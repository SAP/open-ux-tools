
--------------------------------

**TITLE**: Actions — Code Patterns and Annotation/Manifest Examples for SAP Fiori Elements

**INTRODUCTION**: This reference collects actionable, copy-ready code examples and concise guidance for implementing actions in SAP Fiori elements apps (OData V2/V4, ABAP CDS, CAP). Use these snippets to configure navigation and OData actions, control enablement/visibility, group actions/menus, prefill parameters, and override annotation behavior via manifest or extensions.

**TAGS**: SAP Fiori, annotations, manifest.json, DataFieldForAction, DataFieldForIntentBasedNavigation, DefaultValuesFunction, OperationAvailable, CAP, ABAP CDS, OData V2, OData V4, action parameters, menus, priority, overflowGroup

STEP: Context-Independent External Navigation (UI.DataFieldForIntentBasedNavigation, RequiresContext=false)

DESCRIPTION: Use these annotations to create an external navigation button that does NOT require a selected context (RequiresContext=false). Use either XML annotation, ABAP CDS, or CAP CDS formats.

LANGUAGE: XML

CODE:
```xml
<Record Type="UI.DataFieldForIntentBasedNavigation" >
            <PropertyValue Property="Label" String="Navigation Tester with RequiresContext"/>
            <PropertyValue Property="SemanticObject" String="Object"/>
            <PropertyValue Property="Action" String="Action"/>
            <PropertyValue Property="RequiresContext" Bool="false"/>
       </Record> 
```

LANGUAGE: ABAP CDS

CODE:
```
{
    label: 'Navigation Tester with RequiresContext',
    semanticObject: 'Object',
    semanticObjectAction: 'Action', 
    requiresContext: false,
    type: #FOR_INTENT_BASED_NAVIGATION
}
```

LANGUAGE: CAP CDS

CODE:
```
{
    $Type : 'UI.DataFieldForIntentBasedNavigation',
    Label : 'Navigation Tester with RequiresContext',
    SemanticObject : 'Object',
    Action : 'Action',
    RequiresContext : false
}
```

STEP: Context-Dependent External Navigation (UI.DataFieldForIntentBasedNavigation, RequiresContext=true)

DESCRIPTION: Use these annotations to require a selected context for navigation (RequiresContext=true).

LANGUAGE: XML

CODE:
```xml
<Record Type="UI.DataFieldForIntentBasedNavigation" >
            <PropertyValue Property="Label" String="Navigation Tester with RequiresContext"/>
            <PropertyValue Property="SemanticObject" String="Object"/>
            <PropertyValue Property="Action" String="Action"/>
            <PropertyValue Property="RequiresContext" Bool="true"/>
</Record> 
```

LANGUAGE: ABAP CDS

CODE:
```
{
    label: 'Navigation Tester with RequiresContext',
    semanticObject: 'Object',
    semanticObjectAction: 'Action', 
    requiresContext: true,
    type: #FOR_INTENT_BASED_NAVIGATION
}
```

LANGUAGE: CAP CDS

CODE:
```
{
    $Type : 'UI.DataFieldForIntentBasedNavigation',
    Label : 'Navigation Tester with RequiresContext',
    SemanticObject : 'Object',
    Action : 'Action',
    RequiresContext : true
}
```

STEP: UI.DataFieldForAction — InvocationGrouping (grouping multiple invocations for multi-select)

DESCRIPTION: Control how multiple invocations of the same action (selected multiple rows) are grouped using InvocationGrouping. Use Isolated for separate changesets or ChangeSet for all-or-nothing.

LANGUAGE: XML

CODE:
```xml
<Record Type="UI.DataFieldForAction">
  <PropertyValue Property="Label" String="My Action"/>
  <PropertyValue Property="Action" String="STTA_SALES_ORDER_WD_20_SRV.STTA_SALES_ORDER_WD_20_SRV_Entities/C_STTA_SalesOrder_WD_20My_FunctionImport"/>
  <PropertyValue Property="InvocationGrouping" EnumMember="UI.OperationGroupingType/Isolated"/>
</Record>
```

LANGUAGE: ABAP CDS

CODE:
```
 {
    label: 'My Action',
    dataAction: 'PUSHDOWN:C_STTA_SalesOrder_WD_20My_FunctionImport',
    invocationGrouping: #ISOLATED,
    type: #FOR_ACTION,
    position: 1 
  }
```

LANGUAGE: CAP CDS

CODE:
```
{
    $Type : 'UI.DataFieldForAction',
    Label : 'My Action',
    Action : 'STTA_SALES_ORDER_WD_20_SRV.STTA_SALES_ORDER_WD_20_SRV_Entities/C_STTA_SalesOrder_WD_20My_FunctionImport',
    InvocationGrouping : #Isolated
},
```

STEP: Prefill Action Parameters Using DefaultValuesFunction — FunctionImport + Annotations

DESCRIPTION: Define a function import to return default values for an action's parameter dialog and annotate the action/entity with Common.DefaultValuesFunction. This triggers backend calculation of defaults when the dialog opens.

LANGUAGE: XML (FunctionImport + Annotations)

CODE:
```xml
<FunctionImport 
    Name="GetDefaultsForSetText" 
    ReturnType="cds_zrc_dv_defaultvalues.ZRC_DV_A_SetText" 
    m:HttpMethod="GET" 
    sap:action-for="cds_zrc_dv_defaultvalues.RootType">
    <Parameter 
        Name="UUID" 
        Type="Edm.Guid" 
        Mode="In"/>
</FunctionImport>

<Annotations 
    xmlns="http://docs.oasis-open.org/odata/ns/edm" 
    Target="cds_zrc_dv_defaultvalues.cds_zrc_dv_defaultvalues_Entities/SetText">
    
    <Annotation 
        Term="com.sap.vocabularies.Common.v1.SideEffects" 
        Qualifier="Action">
        <Record>
            <PropertyValue Property="TargetProperties">
                <Collection>
                    <PropertyPath>Text</PropertyPath>
                </Collection>
            </PropertyValue>
        </Record>
    </Annotation>
    
    <Annotation 
        Term="com.sap.vocabularies.Common.v1.DefaultValuesFunction" 
        String="GetDefaultsForSetText"/>
</Annotations>
```

STEP: Prefill Action Parameters — CAP: declare return complex type + service function

DESCRIPTION: CAP-based service: define the complex type for defaults and implement a handler that returns default values for action parameters.

LANGUAGE: CAP CDS (type declaration)

CODE:
```
service myService {
  type defaultParamsForSalesOrderCreate {
     SalesOrderType: db.SalesOrderManage : SalesOrderType;
     IncotermsLocation1: db.SalesOrderManage:IncotermsLocation1;
      CustomerPaymentTerms: db.SalesOrderManage: CustomerPaymentTerms;
      OverallSDProcessStatus: db.SalesOrderManage: OverallSDProcessStatus;
      DescriptionFieldForOPACleanup: db.SalesOrderManage: DescriptionFieldForOPACleanup
  };
}
```

LANGUAGE: JavaScript (srv.on handler in CAP service)

CODE:
```
srv.on("GetDefaultParamsForCustomAction", "SalesOrderManage", async req => {
        const tx = cds.transaction(req);
        const salesOrderItem = await tx.run(SELECT.one.from(SalesOrderManage).where(req.query.SELECT.from.ref[0].where));
        if (!salesOrderItem) throw new Error("Not found");
        const overallSDProcessStatus = salesOrderItem.OverallSDProcessStatus;
        var currentDateTime = getCurrentDateTime();

        return {
            OverallSDProcessStatus: overallSDProcessStatus,
            SalesOrderType: "SE",
            LastChangedDateTime: currentDateTime
        };
});
```

STEP: Bound / Unbound Action Definitions and References

DESCRIPTION: Action metadata: use IsBound to mark bound (requires context) vs unbound (context-independent) actions. Reference bound actions as <SchemaNamespace>.<ActionName>, and unbound actions as <SchemaNamespace>.<EntityContainer>/<ActionImportName>. Examples below show XML declarations and annotation references.

LANGUAGE: XML (Action declarations)

CODE:
```xml
<Action Name="REUNION" IsBound="true">
   <Parameter Name="_it" Type="com.sap.gateway.srvd.sadl_gw_appmusicro_definition.v0001.ArtistsType" Nullable="false" />
   <ReturnType Type="com.sap.gateway.srvd.sadl_gw_appmusicro_definition.v0001.ArtistsType" Nullable="false" />
</Action>
<Action Name="UnboundAction" IsBound="false">
   <ReturnType Type="com.sap.gateway.srvd.sadl_gw_appmusicro_definition.v0001.ArtistsType" Nullable="false" />
</Action>
```

LANGUAGE: XML (DataFieldForAction referencing a bound action)

CODE:
```xml
<Record Type="UI.DataFieldForAction">
        <PropertyValue Property="Label" String="Reunion" />
        <PropertyValue Property="Action" String="com.sap.gateway.srvd.sadl_gw_appmusicro_definition.v0001.REUNION" /> 
               <!-- The bound action (REUNION) is referred above in <SchemaNamespace>.<ActionName> -->
</Record>
```

LANGUAGE: XML (DataFieldForAction referencing an unbound action)

CODE:
```xml
<Record Type="UI.DataFieldForAction">
        <PropertyValue Property="Label" String="Break Up" />
        <PropertyValue Property="Action" String="com.sap.gateway.srvd.sadl_gw_appmusicro_definition.v0001.MyContainer/BREAK_ACTION" />
               <!-- The unbound action (BREAK_ACTION) is referred above in <SchemaNamespace>.<EntityContainerName>/<ActionImportName> -->
</Record>
```

LANGUAGE: CAP CDS (define bound/unbound actions)

CODE:
```
entity entityName as projection on db.baseEntity {
   actions {
      action REUNION(
         _it: $self
      ) returns Artists;
   }
}

action UnboundAction() returns Artists;
```

STEP: Static Action (bound to collection header context)

DESCRIPTION: Define a static action by using a parameter `_it` typed as a Collection — IsBound=true but it operates on the collection header context instead of per-row context. Example: XML, CAP, and reference in UI.DataFieldForAction.

LANGUAGE: XML (Action declaration)

CODE:
```xml
<Action Name="createActiveTravel" EntitySetPath="_it" IsBound="true">
            <Parameter Name="_it" Type="Collection(com.sap.gateway.srvd.dmo.ui_travel_processor_uuid.v0001.TravelType)"/>
            <ReturnType Type="com.sap.gateway.srvd.dmo.ui_travel_processor_uuid.v0001.TravelType" Nullable="false"/>
</Action>
```

LANGUAGE: CAP CDS (entity projection with static action)

CODE:
```
entity Travel as projection on db.Travel actions {
  action createActiveTravel (
    _it: many $self
  ) returns Travel;
}
```

LANGUAGE: XML (DataFieldForAction referencing static action)

CODE:
```xml
<Record Type="UI.DataFieldForAction">
        <PropertyValue Property="Label" String="Static Action"/>
        <PropertyValue Property="Action" String="com.c_salesordermanage_sd.myCreateAction(com.c_salesordermanage_sd.SalesOrderManage)"/>
</Record>
```

STEP: Action Parameters — Declaration (single values and collections)

DESCRIPTION: Define action parameters on the backend action metadata. Bound actions include the binding parameter `_it`. Examples show mandatory parameters, collections, and CAP definitions.

LANGUAGE: XML (CreateWithSalesOrderType with parameters)

CODE:
```xml
<Action Name="CreateWithSalesOrderType" EntitySetPath="_it" IsBound="true">
    <Parameter Name="_it" Type="Collection(com.sap.gateway.srvd.c_salesordermanage_sd.v0001.SalesOrderManageType)" Nullable="false"/> <!-- This one is ignored -->
    <Parameter Name="SalesOrderType" Type="Edm.String" Nullable="false" MaxLength="4"/>
    <Parameter Name="SalesOrganization" Type="Edm.String" Nullable="false" MaxLength="4"/>
    <Parameter Name="DistributionChannel" Type="Edm.String" Nullable="false" MaxLength="2"/>
    <Parameter Name="OrganizationDivision" Type="Edm.String" Nullable="false" MaxLength="2"/>
    <ReturnType Type="com.sap.gateway.srvd.c_salesordermanage_sd.v0001.SalesOrderManageType" Nullable="false"/>
</Action>
```

LANGUAGE: CAP CDS (projection action with typed params)

CODE:
```
entity SalesOrderManage as projection on db.baseEntity actions {
  action CreateWithSalesOrderType(
    _it: $self,
    SalesOrderType        : sd.param.SalesOrderType        not null,
    SalesOrganization     : sd.param.SalesOrganization     not null,
    OrganizationDivision  : sd.param.OrganizationDivision  not null,
    DistributionChannel   : sd.param.DistributionChannel   not null
  ) returns SalesOrderManage;
}
```

LANGUAGE: XML (collection parameter example)

CODE:
```
<Action Name="CreateFromSalesOrder" IsBound="true" EntitySetPath="_it">
     <Parameter Name="_it" Type="Collection(com.c_salesordermanage_sd.SalesOrderManage)"/>
     <Parameter Name="SalesOrderId" Type="Edm.String" MaxLength="10" Nullable="false"/>
     <Parameter Name="SalesOrderItemId" Type="Collection(Edm.Int32)" Nullable="false"/>
     <ReturnType Type="com.c_salesordermanage_sd.SalesOrderManage"/>
</Action>
```

STEP: Grouping Action Parameters in Dialog (UI.OperationParameterFacets + UI.FieldGroup)

DESCRIPTION: Use UI.OperationParameterFacets to group parameters into labeled sections in the action parameter dialog. The dialog layout is ColumnLayout via sap.ui.layout.form.SimpleForm.

LANGUAGE: XML

CODE:
```xml
<Annotations Target="com.c_salesordermanage_sd.CreateWithSalesOrderType(com.c_salesordermanage_sd.SalesOrderManage)">
    <Annotation Term="UI.OperationParameterFacets">
        <Collection>
            <Record Type="UI.ReferenceFacet">
                <PropertyValue Property="Label" String="First Parameter Group"/>
                <PropertyValue Property="Target" AnnotationPath="@UI.FieldGroup#FirstGroup"/>
            </Record>
            <Record Type="UI.ReferenceFacet">
                <PropertyValue Property="Label" String="Second Parameter Group"/>
                <PropertyValue Property="Target" AnnotationPath="@UI.FieldGroup#SecondGroup"/>
            </Record>
        </Collection>
    </Annotation>
    
    <Annotation Term="UI.FieldGroup" Qualifier="FirstGroup">
        <Record Type="UI.FieldGroupType">
            <PropertyValue Property="Data">
                <Collection>
                    <Record Type="UI.DataField">
                        <PropertyValue Property="Value" Path="SalesOrderType"/>
                    </Record>
                    <Record Type="UI.DataField">
                        <PropertyValue Property="Value" Path="SalesOrganization"/>
                    </Record>
                </Collection>
            </PropertyValue>
        </Record>
    </Annotation>
    
    <Annotation Term="UI.FieldGroup" Qualifier="SecondGroup">
        <Record Type="UI.FieldGroupType">
            <PropertyValue Property="Data">
                <Collection>
                    <Record Type="UI.DataField">
                        <PropertyValue Property="Value" Path="OrganizationDivision"/>
                    </Record>
                    <Record Type="UI.DataField">
                        <PropertyValue Property="Value" Path="DistributionChannel"/>
                    </Record>
                </Collection>
            </PropertyValue>
        </Record>
    </Annotation>
</Annotations>
```

LANGUAGE: CAP CDS

CODE:
```
@UI 
 : {
        OperationParameterFacets: [
          {
            $Type : 'UI.ReferenceFacet',
            Label : 'First Parameter Group',
            Target: '@UI.FieldGroup#FirstGroup'
          },
          {
            $Type : 'UI.ReferenceFacet',
            Label : 'Second Parameter Group',
            Target: '@UI.FieldGroup#SecondGroup'
          }
        ],
        FieldGroup #FirstGroup  : {
          $Type: 'UI.FieldGroupType',
          Data : [
            {
              $Type: 'UI.DataField',
              Value: SalesOrderType
            },
            {
              $Type: 'UI.DataField',
              Value: SalesOrganization
            }
          ],
        },
        FieldGroup #SecondGroup : {
          $Type: 'UI.FieldGroupType',
          Data : [
            {
              $Type: 'UI.DataField',
              Value: OrganizationDivision
            },
            {
              $Type: 'UI.DataField',
              Value: DistributionChannel
            }
          ],
        }
      }
action CreateWithSalesOrderType(
     SalesOrderType : sd.param.SalesOrderType not null, 
 	SalesOrganization : sd.param.SalesOrganization not null, 
 	OrganizationDivision : sd.param.OrganizationDivision not null, 
 	DistributionChannel : sd.param.DistributionChannel not null
) returns SalesOrderManage;
```

STEP: Default Parameter Values — ParameterDefaultValue (annotation and CAP examples)

DESCRIPTION: Use UI.ParameterDefaultValue to prefill action parameters from a path or fixed string. The path must reference data already loaded into the table or use PresentationVariant/RequestAtLeast to load it.

LANGUAGE: XML

CODE:
```xml
<Annotations Target="SalesOrder.CreateWithSalesOrderType/SalesOrderType">
   <Annotation Term="UI.ParameterDefaultValue" Path="_it/SalesOrderType"/>
</Annotations>
<Annotations Target="SalesOrder.CreateWithSalesOrderType/SalesOrganization">
   <Annotation Term="UI.ParameterDefaultValue" String="0001"/>
</Annotations>
```

LANGUAGE: CAP CDS

CODE:
```
annotate SalesOrder.CreateWithSalesOrderType with {
    UI.ParameterDefaultValue : _it.SalesOrderType
    SalesOrderType
};
annotate SalesOrder.CreateWithSalesOrderType with {	
    UI.ParameterDefaultValue : '0001'
    SalesOrganization
};
```

LANGUAGE: ABAP (annotation snippet)

CODE:
```
annotate sd.param.SalesOrderType with @(UI.ParameterDefaultValue: _it.SalesOrderType);
annotate sd.param.SalesOrganization with @(UI.ParameterDefaultValue: '0001');
```

STEP: Default Values from Backend (Common.DefaultValuesFunction annotation on actions/entities)

DESCRIPTION: Annotate actions (or entities for create) with Common.DefaultValuesFunction to call a backend function that returns parameter defaults. The returned structure field names/types must match action parameters.

LANGUAGE: XML (annotate action)

CODE:
```
<Annotations Target="myService.CustomAction(myService.SalesOrderManage)">
         <Annotation Term="Common.DefaultValuesFunction" String=" myService.GetDefaultParamsForCustomAction " />
</Annotations>
```

LANGUAGE: XML (annotate entity for standard create)

CODE:
```
<Annotations Target=" myService.EntityContainer/SalesOrderManage">
         <Annotation Term="Common.DefaultValuesFunction" String="GetDefaultParamsForSalesOrderCreate" />
</Annotations>
```

STEP: Frontend Default Values via extension.defaultValuesFunction (manifest + JS)

DESCRIPTION: Override or compute defaults on the frontend by wiring a JavaScript function in manifest.json controlConfiguration.defaultValuesFunction. The function receives the current context and selected contexts and must return an object with parameterName:value entries.

LANGUAGE: JSON (manifest.json fragment)

CODE:
```json
"sap.ui5": {
    "routing": {
        "targets": {
            "SalesOrderManageList": {
                "options": {
                    "settings": {
                        "controlConfiguration": {
                            "@com.sap.vocabularies.UI.v1.LineItem": {
                                "actions": {
                                    "DataFieldForAction::com.c_salesordermanage_sd.CreateWithSalesOrderType": {
                                        "defaultValuesFunction": "SalesOrder.ext.CustomActions.getDefaultValues"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}
```

LANGUAGE: JavaScript (extension function)

CODE:
```
getDefaultValues: function(oContext, aSelectedContexts) {
            var oDefaultParams;
            if (aSelectedContexts.length > 1) {
                oDefaultParams = {
                    "SalesOrderType": "SO03",
                    "SalesOrganization": "1111"
                };
            } else {
                oDefaultParams = {
                    "SalesOrderType": "SE",
                    "SalesOrganization": "",
                    "DistributionChannel": "03"
                };
            }
            return oDefaultParams;
        },
```

STEP: Hide Action Parameters (UI.Hidden examples, static/dynamic)

DESCRIPTION: Use UI.Hidden on action parameters to hide them. Supports Bool, Path, or dynamic expressions. If all parameters hidden and mandatory ones have ParameterDefaultValue, action runs without a dialog.

LANGUAGE: XML

CODE:
```xml
<Action Name="actionWithHiddenParameters" IsBound="true">
     <Parameter Name="_it" Type="sap.fe.manageitems.TechnicalTestingService.LineItems"/>
     <Parameter Name="myParameterHiddenFalse" Type="Edm.String"/>
     <Parameter Name="myParameterHiddenTrue" Type="Edm.String"/>
     <Parameter Name="myParameterHiddenDynamicPath" Type="Edm.String"/>
     <Parameter Name="myParameterHiddenDynamicExp" Type="Edm.String"/>
</Action>

<Annotations Target="sap.fe.manageitems.TechnicalTestingService.actionWithHiddenParameters(sap.fe.manageitems.TechnicalTestingService.LineItems)/myParameterHiddenFalse">
     <Annotation Term="UI.Hidden" Bool="false"/>
     <Annotation Term="Common.Label" String="Testparameter (Hidden=false)"/>
</Annotations>

<Annotations Target="sap.fe.manageitems.TechnicalTestingService.actionWithHiddenParameters(sap.fe.manageitems.TechnicalTestingService.LineItems)/myParameterHiddenTrue">
     <Annotation Term="UI.Hidden" Bool="true"/>
     <Annotation Term="Common.Label" String="Testparameter (Hidden=true)"/>
</Annotations>

<Annotations Target="sap.fe.manageitems.TechnicalTestingService.actionWithHiddenParameters(sap.fe.manageitems.TechnicalTestingService.LineItems)/myParameterHiddenDynamicPath">
     <Annotation Term="UI.Hidden" Path="_it/preferredItem"/>
     <Annotation Term="Common.Label" String="Testparameter (Hidden=Dynamic via path)"/>
</Annotations>

<Annotations Target="sap.fe.manageitems.TechnicalTestingService.actionWithHiddenParameters(sap.fe.manageitems.TechnicalTestingService.LineItems)/myParameterHiddenDynamicExp">
     <Annotation Term="UI.Hidden">
          <If>
               <Eq>
                    <Path>myParameterHiddenFalse</Path>
                    <String>Show myParameterHiddenDynamicExp parameter</String>
               </Eq>
               <Bool>false</Bool>
               <Bool>true</Bool>
          </If>
     </Annotation>
     <Annotation Term="Common.Label" String="Testparameter (Hidden=Dynamic via path)"/>
</Annotations>
```

LANGUAGE: CAP CDS

CODE:
```
       @cds.odata.bindingparameter.name : '_it'
       action actionWithHiddenParameters(

                @title                           : 'Testparameter (Hidden=false)'
                @UI.Hidden                       : false
                myParameterHiddenFalse           : String,
                
                @title                           : 'Testparameter (Hidden=true)'
                @UI.Hidden                       : true
                myParameterHiddenTrue            : String,
                
                @title                           : 'Testparameter (Hidden=Dynamic via path)'
                @UI.Hidden                       : _it.preferredItem
                myParameterHiddenDynamicPath     : String,

                @title                           : 'Testparameter (Hidden=Dynamic via path)'
                @UI.Hidden                       : {$edmJson: {$If: [{$Eq: [{$Path: 'myParameterHiddenFalse'}, 'Show myParameterHiddenDynamicExp parameter']}, false, true]}}  
                myParameterHiddenDynamicExp      : String
            );
```

STEP: Grouping Actions as Menu Buttons — Annotation-Based Action Group

DESCRIPTION: Create an annotation-based action group using UI.DataFieldForActionGroup with ID and Actions collection. Use DataFieldForAction items inside the Actions collection. CAP and XML examples provided.

LANGUAGE: XML

CODE:
```xml
<edmx:Reference Uri="https://sap.github.io/odata-vocabularies/vocabularies/UI.xml">
    <edmx:Include Namespace="com.sap.vocabularies.UI.v1" Alias="UI"/>
</edmx:Reference>

<Record Type="UI.DataFieldForActionGroup">
              <PropertyValue Property="Label" String="Action Group" />
              <PropertyValue Property="ID" String="groupedActions" />
              <PropertyValue Property="Actions">
                <Collection>
                  <Record Type="UI.DataFieldForAction">
                    <PropertyValue Property="Label" String="Action 1 inside Action Group" />
                    <PropertyValue
                      Property="Action"
                      String="com.c_salesordermanage_sd.SalesOrderManage.Action1" 
                />
                  </Record>
                  <Record Type="UI.DataFieldForAction">
                    <PropertyValue Property="Label" String="Action 2 inside Action Group" />
                    <PropertyValue
                      Property="Action"
                      String="com.c_salesordermanage_sd.SalesOrderManage.Action2"
                    />
                  </Record>
                  <Record Type="UI.DataFieldForAction">
                    <PropertyValue Property="Label" String="Action 3 inside Action Group" />
                    <PropertyValue
                      Property="Action"
                      String="com.c_salesordermanage_sd.SalesOrderManage.Action3"
                    />
                  </Record>
                </Collection>
              </PropertyValue>
</Record>
```

LANGUAGE: CAP CDS

CODE:
```
{
       $Type  : 'UI.DataFieldForActionGroup',
       Label  : 'Action Group',
       ID     : 'groupedActions',
       Actions: [
           {
               $Type  : 'UI.DataFieldForAction',
               Label  : 'Action 1 inside Action Group',
               Action : 'com.c_salesordermanage_sd.SalesOrderManage.Action1'
           },
           {
               $Type  : 'UI.DataFieldForAction',
               Label  : 'Action 2 inside Action Group',
               Action : 'com.c_salesordermanage_sd.SalesOrderManage.Action2'
           },
            {
               $Type  : 'UI.DataFieldForAction',
               Label  : 'Action 3 inside Action Group',
               Action : 'com.c_salesordermanage_sd.SalesOrderManage.Action3'
           }
       ]
   }
```

STEP: Grouping Actions as Menu Buttons — Manifest-Based Examples (Header, Form, Table)

DESCRIPTION: Use manifest.json control/route settings to define menu items and to group manifest-defined actions and annotation-based actions under a menu button. Keys must match action keys (DataFieldForAction::..., DataFieldForIntentBasedNavigation::SemanticObject::Action).

LANGUAGE: JSON (Grouping Header Actions)

CODE:
```json
"SalesOrderManageObjectPage": {
    "type": "Component",
    "id": "SalesOrderManageObjectPage",
    "name": "sap.fe.templates.ObjectPage",
    "options": {
        "settings": {
           "content": {
              "header": {
                "actions": {
                    "myFirstAction": {
                        "press": "SalesOrder.ext.CustomActions.message",
                        "text": "My First Action"
                    },
                    "mySecondAction": {
                        "press": "SalesOrder.ext.CustomActions.message",
                        "text": "My Second Action"
                    },
                    "MenuActions": {
                        "text": "My Menu Button",
                        "menu": [
                            "myFirstAction",
                            "mySecondAction",
                            "DataFieldForAction::com.c_salesordermanage_sd.BoundActionWithParams"
                            ]
                        }
                    }
                }
            }
        }
    }
}
```

LANGUAGE: JSON (Grouping Form Actions)

CODE:
```json
"options": {
    "settings": {
        "contextPath": "/SalesOrderManage",
        "controlConfiguration": {
            "@com.sap.vocabularies.UI.v1.FieldGroup#OrderData": {
                "actions": {
                    "myFirstAction": {
                        "press": "SalesOrder.ext.CustomActions.getCustomerName",
                        "visible": true,
                        "enabled": true,
                        "text": "My First Action"
                    },
                    "mySecondAction": {
                        "press": "SalesOrder.ext.CustomActions.message",
                        "text": "My Second Action"
                    },
                    "MenuActions": {
                        "text": "My Menu Button",
                        "menu": [
                           "myFirstAction",
                           "mySecondAction",
                           "DataFieldForAction::com.c_salesordermanage_sd.BoundActionWithParams"
                        ]
                    }
                }
            }
        } 
    }
}
```

LANGUAGE: JSON (Grouping Table Toolbar Actions)

CODE:
```json
"options": {
    "settings": {
        "contextPath": "/SalesOrderManage",
        "controlConfiguration": {
            "@com.sap.vocabularies.UI.v1.LineItem": {
                "actions": {
                    "myFirstAction": {
                        "press": "SalesOrder.ext.CustomActions.getCustomerName",
                        "visible": true,
                        "enabled": true,
                        "text": "My First Action"
                    },
                    "mySecondAction": {
                        "press": "SalesOrder.ext.CustomActions.message",
                        "text": "My Second Action"
                    },
                    "MenuActions": {
                        "text": "My Menu Button",
                        "menu": [
                           "myFirstAction",
                           "mySecondAction",
                           "DataFieldForAction::com.c_salesordermanage_sd.BoundActionWithParams"
                        ]
                    }
                }
            }
        }  
    }
}
```

STEP: Pushing Intent-Based Nav Buttons into Menu (manifest key format)

DESCRIPTION: Use the full key format DataFieldForIntentBasedNavigation::<Semantic Object>::<Action> when adding intent-based navigation items into manifest menu arrays.

LANGUAGE: JSON

CODE:
```json
"MenuActions": {
     "text": "My Menu Button",
     "menu": [
          "myFirstAction",
          "DataFieldForIntentBasedNavigation::<Semantic Object>::<Action>"
     ]
}
```

STEP: Defining a Default Action for a Menu Button (manifest.json)

DESCRIPTION: Set defaultAction to make clicking the menu button execute an action directly. Use existing menu entries or explicit keys.

LANGUAGE: JSON

CODE:
```json
"MenuActionsCreateFromTemplate": {
     "text": "Usage Example of a defaultAction",
     "defaultAction": "DataFieldForIntentBasedNavigation::SalesOrder::defaultActionToBeCalled",
     "menu": [
          "DataFieldForAction::com.c_salesordermanage_sd.CreateFromCustomer",
          "DataFieldForAction::com.c_salesordermanage_sd.CreateFromSalesOrder",
          "DataFieldForIntentBasedNavigation::SalesOrder::manageInline"
     ]
}
```

STEP: Setting Action Priority (manifest.json)

DESCRIPTION: Use the priority property on actions to influence toolbar overflow behavior. Values: Low, High, AlwaysOverflow, NeverOverflow. Can be set for custom and standard actions (except Share cannot be overridden).

LANGUAGE: JSON

CODE:
```json
"PurchaseOrder": {
    "type": "Component",
    "name": "sap.fe.templates.ObjectPage",
    ...,
    "options": {
        "settings": {
            "content": {
                "header": {
                    "actions": {
                        "MyCustomAction": {
                            "text": "CustomActionText",
                            "press": ...
                            ...
                            "priority": "AlwaysOverflow"
                        }
                    }
                }
                ...
            },
            "controlConfiguration": {
                "@com.sap.vocabularies.UI.v1.FieldGroup#GeneralInformation": {
                    "actions": {
                        "MyFormAction": {
                            ...
                            "priority": "Low"
                        }
                    }    
                },
                "_Elements/@com.sap.vocabularies.UI.v1.LineItem": {
                    "actions": {
                        "DataFieldForAction::sap.fe.core.ActionAllAreas.CopyAction::sap.fe.core.ActionAllAreas.SubElement": {
                            "priority": "{priorityValue}" // dynamic value from the "priorityValue" property
                        },
                        "TableCustomAction": {
                            ...
                            "priority": "NeverOverflow"
                        }
                    }
                }
            }
        }
    }
}
```

LANGUAGE: JSON (priority for standard actions)

CODE:
```json
"OrdersList": {
    "type": "Component",
    ...
    "options": {
        "settings": {
            "content": {
                "header": {
                    "actions": {
                        "EditAction": {
                            "priority": "{Priority}"
                        },
                        "DeleteAction": {
                            "priority": "AlwaysOverflow"
                        }
                    }
                }
            },
            "controlConfiguration": {
                "_Elements/@com.sap.vocabularies.UI.v1.LineItem": {
                    "actions": {
                        "StandardAction::Create": {
                           "priority": "AlwaysOverflow"
                        },
                        "StandardAction::Delete": {
                           "priority": "AlwaysOverflow"
                        }
                    }
                }
            }
        }
    }
}
```

STEP: Grouping Actions into Overflow Groups and Separators (manifest.json)

DESCRIPTION: Use overflowGroup to move actions together to overflow and overflowGroups to show separators before groups. overflowGroup must be an integer and all actions in a group must have same priority.

LANGUAGE: JSON

CODE:
```json
"actions": {
    "MyCustomAction1": {
        "text": "Approve",
        "priority": "Medium",
        "overflowGroup": 1
    },
    "MyCustomAction2": {
        "text": "Reject",
        "overflowGroup": 1
    },
    "MyCustomAction3": {
        "text": "Export",
        "overflowGroup": 2
    }
},
"overflowGroups": {
    "1": {
        "showSeparator": true 
    },
    "2": {
        "showSeparator": true
    }
}
```

STEP: Overriding Annotation-Based Actions Using manifest.json and CustomActions.js

DESCRIPTION: Override annotation-based enabled/visible behavior in the manifest using keys like DataFieldForAction::... and wire handler functions in CustomActions.js to provide dynamic enablement/visibility.

LANGUAGE: JSON (manifest override example)

CODE:
```json
"controlConfiguration": {
    "@com.sap.vocabularies.UI.v1.LineItem": {
        "actions": {
            "DataFieldForAction::com.c_salesordermanage_sd.CreateWithSalesOrderType": {
                "enabled": "SalesOrder.ext.CustomActions.enabledIfTwoSelected"
                "visible": "SalesOrder.ext.CustomActions.visibleIfAConditionIsTrue"
            }
        }
    }
}
```

LANGUAGE: JavaScript (CustomActions.js)

CODE:
```
enabledIfTwoSelected: function (oBindingContext, aSelectedContexts) {
  return aSelectedContexts.length === 2;
},
visibleIfAConditionIsTrue: function (oBindingContext, aSelectedContexts) {
  // Condition returning a Boolean value
}
```

STEP: Overriding Annotation-Based Action Groups Using manifest.json (menu modification)

DESCRIPTION: Identify action group key as DataFieldForActionGroup::<ID>. Use DataFieldForAction::... and DataFieldForIntentBasedNavigation::SemanticObject::Action keys inside the manifest menu array to add/remove/override menu items.

LANGUAGE: XML (example of DataFieldForActionGroup and actions)

CODE:
```xml
<edmx:Reference Uri="https://sap.github.io/odata-vocabularies/vocabularies/UI.xml">
    <edmx:Include Namespace="com.sap.vocabularies.UI.v1" Alias="UI"/>
</edmx:Reference>

<Record Type="UI.DataFieldForActionGroup">
    <PropertyValue Property="Label" String="Action Group" />
    <PropertyValue Property="ID" String="groupedActions" />
    <PropertyValue Property="Actions">
        <Collection>
            <Record Type="UI.DataFieldForAction">
                <PropertyValue Property="Label" String="Action 1 inside Action Group" />
                <PropertyValue
                    Property="Action" 
					String="com.c_salesordermanage_sd.SalesOrderManage.Action1" 
                />
            </Record>
            <Record Type="UI.DataFieldForAction">
                <PropertyValue Property="Label" String="Action 2 inside Action Group" />
                <PropertyValue
                    Property="Action"
                    String="com.c_salesordermanage_sd.SalesOrderManage.Action2"
                />
            </Record>
            <Record Type="UI.DataFieldForAction">
                <PropertyValue Property="Label" String="Action 3 inside Action Group" />
                <PropertyValue
                    Property="Action"
                    String="com.c_salesordermanage_sd.SalesOrderManage.Action3"
                />
            </Record>
        </Collection>
    </PropertyValue>
</Record>
<Record Type="UI.DataFieldForAction">
    <PropertyValue Property="Label" String="Annotation Action outside action group" />
    <PropertyValue
        Property="Action"
        String="com.c_salesordermanage_sd.SalesOrderManage.AnnotationAction"
    />
</Record>
```

LANGUAGE: JSON (manifest sample: add new action to group)

CODE:
```json
"options": {
  "settings": {
   "contextPath": "/SalesOrderManage",
   "controlConfiguration": {
     "@com.sap.vocabularies.UI.v1.FieldGroup#OrderData": {
       "actions": {
         "myFirstAction": {
           "press": "SalesOrder.ext.CustomActions.getCustomerName",
           "visible": true,
           "enabled": true,
           "text": "My First Action"
         },
         "DataFieldForActionGroup::groupedActions": {
           "menu": [
             "DataFieldForAction::com.c_salesordermanage_sd.SalesOrderManage.Action1",
             "DataFieldForAction::com.c_salesordermanage_sd.SalesOrderManage.Action2",
             "DataFieldForAction::com.c_salesordermanage_sd.SalesOrderManage.Action3",
             "myFirstAction",
              "DataFieldForAction::com.c_salesordermanage_sd.SalesOrderManage.AnnotationAction"            
            ]
         }
       }
     }
   }
  }
}
```

LANGUAGE: JSON (manifest sample: override menu items' enabled/visible)

CODE:
```json
"options": {
  "settings": {
   "contextPath": "/SalesOrderManage",
   "controlConfiguration": {
     "@com.sap.vocabularies.UI.v1.FieldGroup#OrderData": {
       "actions": {
         "DataFieldForAction::com.c_salesordermanage_sd.SalesOrderManage.Action1": {
           "enabled": false
         },
         "DataFieldForAction::com.c_salesordermanage_sd.SalesOrderManage.Action2": {
           "visible": false
         }
       }
     }
   }
  }
}
```

Step: Notes and Best Practices (short actionable bullets)

DESCRIPTION: Keep these practical rules for code generation and implementation:
- Use RequiresContext appropriately: set false for context-independent navigation and true when a specific row is required.
- For OData V4 actions, context is passed only if IsBound=true.
- Use InvocationGrouping to control batch changeset behavior (Isolated vs ChangeSet).
- Default values: ParameterDefaultValue > FLP user defaults > backend DefaultValuesFunction; frontend defaultValuesFunction overrides annotation/backend defaults.
- When overriding annotation-based enable/visible in manifest, annotation logic (like bound-enablement) is ignored — implement equivalent logic in your JS handlers if needed.
- For menu keys, use exact key formats: DataFieldForAction::..., DataFieldForIntentBasedNavigation::<SemanticObject>::<Action>, DataFieldForActionGroup::<ID>.

LANGUAGE: plain

CODE:
```
(No code — this is a best-practices summary for implementers.)
```
--------------------------------

**TITLE**: Actions in the List Report (Fiori Elements)

**INTRODUCTION**: This reference explains how to define and control actions in a Fiori Elements List Report. It covers global actions, table toolbar actions, generic vs. app-specific actions, standard actions (Create, Delete, Copy), and OData V2/V4 specifics for enabling Create via function imports and draft annotations. Use these snippets directly in your manifest.json, XML annotations, or CAP CDS files when implementing actions.

**TAGS**: fiori-elements, list-report, actions, annotations, manifest.json, OData, CAP, CDS, XML, JSON

STEP: Global Actions and Table Toolbar Actions
DESCRIPTION: Define global actions in the manifest.json or use extension points as application enhancements. Table toolbar actions include buttons for actions affecting the entire report or selected rows. Preserve image resources for documentation or UI reference: images/Actions_in_the_Table_Toolbar_856c5a4.png and images/Copy_Action_in_the_List_Report_f337b65.png.
LANGUAGE: Text
CODE:
```text
- Global actions: define in manifest.json via extension points. See: adding-custom-actions-using-extension-points-7619517.md
- Table toolbar actions: used for list-wide or selected-item operations. See: adding-actions-to-tables-b623e0b.md
- Reference images:
  - images/Actions_in_the_Table_Toolbar_856c5a4.png
  - images/Copy_Action_in_the_List_Report_f337b65.png
```

STEP: Generic vs Application-Specific Actions (Behavior & Types)
DESCRIPTION: Use generic actions (Create/Delete) when supported by the entity set. Define app-specific actions for custom logic. App-specific actions can be:
- Confirmation required: opens a confirmation dialog.
- Additional input required: opens a dialog with fields (e.g., approval comment).
- Immediate actions: triggers without dialog.
- External navigation: triggers navigation to external apps.
LANGUAGE: Text
CODE:
```text
- Generic actions: Create (if entity set creatable), Delete (if deletable).
- App-specific action types and expected UI behavior:
  - Confirmation dialog (user must confirm)
  - Input dialog (collect data, then execute)
  - Direct execution (no dialog)
  - External navigation (launch external app)
```

STEP: Standard Actions — Delete and Create (Overview)
DESCRIPTION: Delete and Create are standard actions. Delete is available if the entity set supports deletion. Create is enabled if the entity set is creatable or a NewAction is present (OData V2/V4 differences covered later). Configure Create behavior via DraftRoot annotations and manifest settings for newAction usage.
LANGUAGE: Text
CODE:
```text
- Delete action: render a Delete button in table toolbar when entity set is deletable. (See adding-actions-to-tables-b623e0b.md)
- Create action: default POST behavior, or configured to call a function import (newAction) for draft apps.
```

STEP: Copy Action — XML Annotation
DESCRIPTION: Define a standard Copy action by annotating UI.LineItem with UI.DataFieldForAction and setting UI.IsCopyAction. The button is placed automatically after Create. If no Label provided, default label is "Copy".
LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.LineItem">
  <Collection>
      <Record Type="UI.DataFieldForAction">
          <PropertyValue Property="Label" String="Copy" />
          <PropertyValue Property="Action" String="STTA_PROD_MAN.STTA_PROD_MAN_Entities/STTA_C_MP_ProductCopy" />
          <Annotation Term="UI.IsCopyAction" Bool="true" />
     </Record>
```

STEP: Copy Action — CAP CDS Annotation
DESCRIPTION: CAP/CDS style annotation equivalent to the XML annotation above. Use this in your CDS model to expose the Copy action to the List Report.
LANGUAGE: CDS
CODE:
```
UI.LineItem : [
    {
        $Type : 'UI.DataFieldForAction',
        Label : 'Copy',
        Action : 'STTA_PROD_MAN.STTA_PROD_MAN_Entities/STTA_C_MP_ProductCopy',
        ![@UI.IsCopyAction] : true,
    },
], 
```

STEP: OData V2 — Enable Create Using newAction (DraftRoot + manifest.json)
DESCRIPTION: For draft-enabled OData V2 apps, set Common.DraftRoot NewAction to a function import and enable useNewActionForCreate in manifest.json settings to trigger that function import for Create. When the function import has parameters, use Common.Label on the function import to define the dialog title. Modify i18n keys for button/dialog text if needed.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="Common.DraftRoot">
<Record>
<PropertyValue Property="NewAction" 
    String="cds_zrc_ce_localized_srv.cds_zrc_ce_localized_srv_Entities/Create"/>
</Record>
</Annotation>
```

LANGUAGE: json
CODE:
```json
"ListReport|Localized": {
	"entitySet": "Localized",
	"component": {
	"name": "sap.suite.ui.generic.template.ListReport",
	"list": true,
	"settings": {
	"useNewActionForCreate": true
	}
},
```

LANGUAGE: XML
CODE:
```xml
<Annotations Target="SAP.FCLM_BAM_ACCOUNTWD_SRV_Entities/FunctionImportName">
<Annotation Term="Common.Label" String="Create"/>
</Annotations>
```

STEP: OData V4 — Create via DraftRoot NewAction (Annotation sample)
DESCRIPTION: For OData V4 draft-based apps the presence of NewAction in Common.DraftRoot enables the Create button. InsertRestrictions on the entity set are ignored; visibility/availability is controlled via OperationAvailable with rules below.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="Common.DraftRoot">
<Record Type="Common.DraftRootType">
<PropertyValue Property="ActivationAction" String="com.c_salesordermanage_sd.draftActivate"/>
<PropertyValue Property="EditAction" String="com.c_salesordermanage_sd.draftEdit"/>
<PropertyValue Property="PreparationAction" String="com.c_salesordermanage_sd.draftPrepare"/>
<PropertyValue Property="NewAction" String="com.c_salesordermanage_sd.ReturnInProcess"/>
</Record>
</Annotation>
```

STEP: OData V4 — Create Button Visibility Logic
DESCRIPTION: Use OperationAvailable to control Create button visibility when NewAction is present:
- OperationAvailable=false => Create button NOT displayed.
- OperationAvailable=true or not specified => Create button displayed.
- OperationAvailable=null => treated as not specified (ignored).
LANGUAGE: Text
CODE:
```text
OperationAvailable rules for Create button when NewAction present:
- false => button not displayed
- true OR not specified => button displayed
- null => ignored (equivalent to not specified)
```

STEP: Create Mode Options (List Report Behavior)
DESCRIPTION: Supported create modes and their behavior in the List Report:
- Create page (default): navigates to an object page for entering object data; immutable properties for the new object may be shown in a dialog.
- Create dialog: opens a dialog within the list page for entering values and creating the object.
- External: navigates to an external Fiori Launchpad app to handle creation.
Adjust i18n keys to override dialog titles and button labels:
- DIALOG_TITLE_NEW_ACTION_FOR_CREATE (dialog title)
- CREATE_OBJECT (toolbar button label)
- DIALOG_ACTION_BUTTON_NEW_ACTION_FOR_CREATE (dialog action button text)
LANGUAGE: Text
CODE:
```text
Create modes:
- "Create page" (default): navigate to object page; optional dialog for immutable props.
- "Create dialog": in-place dialog in list report.
- "External": launch external FLP app for creation.

i18n keys to override texts:
- DIALOG_TITLE_NEW_ACTION_FOR_CREATE
- CREATE_OBJECT
- DIALOG_ACTION_BUTTON_NEW_ACTION_FOR_CREATE
```
--------------------------------

**TITLE**: Add Filter Price Button to the List Report Table Toolbar (Adaptation Extension)

**INTRODUCTION**: This guide shows how to add a toolbar button to a SAP Fiori elements List Report (OData V2) that filters the table to show records with Price >= 1000. It uses an adaptation fragment for the button and a controller extension that injects the filter through the templateBaseExtension.addFilters hook and triggers rebind via the extension API.

**TAGS**: fiori-elements-framework, adaptation-extension, sapui5, ui5, list-report, fragment, controller-extension, odata-v2

**STEP**: Prerequisites
**DESCRIPTION**: Confirm applicability and preconditions.
- This topic is only applicable to SAP Fiori elements for OData V2.
- You must have performed the steps described in "Extending Delivered Apps Using Adaptation Extensions".
**LANGUAGE**: Plaintext
**CODE**:
```plaintext
Applicable to SAP Fiori elements for OData V2.
Ensure you have completed: Extending Delivered Apps Using Adaptation Extensions.
```

**STEP**: Add a Fragment to the Table Toolbar
**DESCRIPTION**: Use the UI adaptation editor to add a fragment to the table toolbar.
- Select the table toolbar and choose Add Fragment.
- Set Target Aggregation = content and choose an index or Create New to create the fragment.
- Use fragment name: FilterPriceButton (example).
- The fragment contains a Button whose press handler points to the controller extension function using the .extension.<project>.<controller>.<function> notation.
  - .extension: required by UI adaptation tool guidelines
  - ProdMan.AdaptProject: replace with your project ID / namespace
  - ListReportExtension: controller extension file name
  - handleFilterPricePress: function name in controller extension
**LANGUAGE**: XML
**CODE**:
```xml
<core:FragmentDefinition xmlns:core='sap.ui.core' xmlns='sap.m'>
<Button id="PriceBtnID" text="Filter Price" press=".extension.ProdMan.AdaptProject.ListReportExtension.handleFilterPricePress"></Button>
</core:FragmentDefinition>
```

**STEP**: Create Controller Extension File
**DESCRIPTION**: Create a controller extension for the List Report and implement the button handler and the templateBaseExtension.addFilters extension point.
- In the adaptation editor: select the table toolbar and choose Extend with Controller.
- Name the controller: ListReportExtension (example). The system generates ListReportExtension.js.
- Place the code below into the generated ListReportExtension.js file. Keep custom functions outside the override block; consume extensibility functions (addFilters) inside the override.templateBaseExtension object.
- handleFilterPricePress sets a price restriction and triggers table rebind via oExtensionAPI.rebindTable().
- addFilters is called by the template to add extra filters; it uses this.iPriceRestriction to add a GE filter on the "Price" property.
**LANGUAGE**: JavaScript
**CODE**:
```javascript
/**
*@controller Name: sap.suite.ui.generic.template.ListReport.view.ListReport,
*@viewId:STTA_MP::sap.suite.ui.generic.template.ListReport.view.ListReport::STTA_C_MP_Product
*/
sap.ui.define(["sap/ui/core/mvc/Controller", "sap/ui/core/mvc/ControllerExtension"], function (Controller, ControllerExtension) {
return ControllerExtension.extend("ProdMan.AdaptProject.ListReportExtension", {
 
handleFilterPricePress : function() {
     this.iPriceRestriction = "1000";
     var oExtensionAPI = this.base.templateBaseExtension.getExtensionAPI();
     oExtensionAPI.rebindTable(); 
},
//override an existing method of the Main.controller
override: {
//adding a life cycle method
/**
* Called when a controller is instantiated and its View controls (if available) are already created.
* Can be used to modify the View before it is displayed, to bind event handlers and do other one-time initialization.
* @memberOf src.client.uiadaptation
*/
onInit: function () {
},
/**
* Similar to onAfterRendering, but this hook is invoked before the controller's View is re-rendered
* (NOT before the first rendering! onInit() is used for that one!).
* @memberOf src.client.uiadaptation
*/
onBeforeRendering: function () {
},
/**
* Called when the View has been rendered (so its HTML is part of the document). Post-rendering manipulations of the HTML could be done here.
* This hook is the same one that SAPUI5 controls get after being rendered.
* @memberOf src.client.uiadaptation
*/
onAfterRendering: function () {
},
/**
* Called when the Controller is destroyed. Use this one to free resources and finalize activities.
* @memberOf src.client.uiadaptation
*/
onExit: function () {
},
"templateBaseExtension": {
addFilters : function(fnAddFilter, sControlId){
if(this.iPriceRestriction){
fnAddFilter(this, new sap.ui.model.Filter("Price", "GE", this.iPriceRestriction));
}
}
}
}
});
});
```

**STEP**: Preview and Test
**DESCRIPTION**: Use the adaptation editor preview to test behavior.
- In the adaptation editor choose the Preview tab and click Go.
- Inspect the Price column values for all records.
- Click Filter Price (the new button). The table will rebind and show only records where Price >= 1000. Verify results in the Price column.
**LANGUAGE**: Plaintext
**CODE**:
```plaintext
Preview: Adaptation editor → Preview → Go
Verify: Click "Filter Price" and confirm only rows with Price >= 1000 are shown.
```
--------------------------------

**TITLE**: Adapting Logic Before Save Operation (beforeSaveExtension)

**INTRODUCTION**: Implement the beforeSaveExtension extension API to run custom logic immediately before a save operation in SAP Fiori Elements. Return a Promise to pause the save until you explicitly resolve (continue save) or reject (cancel save). If no value is returned, the save proceeds without waiting for the extension.

**TAGS**: fiori-elements-framework, beforeSaveExtension, extension-api, SAPUI5, SAP Fiori, OData V2, OData V4, draft

**STEP**: 1 - Implement beforeSaveExtension in Object Page Controller (OData V2)

**DESCRIPTION**: Add the beforeSaveExtension method in your Object Page controller framework extensions. Return a Promise; resolve() to continue the save operation or reject() to cancel it. The method is called just before starting save operations. Include UI or other asynchronous logic inside the promise and call resolve/reject from the user actions or async results.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
beforeSaveExtension: function () {
			var fnResolve, fnReject;
			var oPromise = new Promise(function (resolve, reject){
				fnResolve = resolve;
				fnReject = reject;
			});
			this.oDialog = new sap.m.Dialog({
				title: "BeforeSaveExtension",
				content: new sap.m.Text({
					text: "This is an example to check the beforeSaveExtension"
				}),
				beginButton: new sap.m.Button({
					text: "Continue to Save",
					press: function () {
						fnResolve();
						this.oDialog.close();
					}.bind(this)
				}),
				endButton: new sap.m.Button({
					text: "Cancel Save",
					press: function () {
						fnReject();
						this.oDialog.close();
					}.bind(this)
				})
			});
			this.getView().addDependent(this.oDialog);
			this.oDialog.open();
			return oPromise;
		}
```

**STEP**: 2 - Promise Behavior and Default Behavior When Not Returning a Promise

**DESCRIPTION**: 
- If your beforeSaveExtension returns a Promise, the framework waits for it:
  - Resolving the Promise continues the save.
  - Rejecting the Promise cancels the save.
- If the extension does not return a value (no Promise), the save operation starts immediately without waiting for the extension to complete.

**LANGUAGE**: Text

**CODE**:
```
- return a Promise to pause save until resolved/rejected
- resolve() => continue save
- reject() => cancel save
- no return => save proceeds immediately without waiting
```

**STEP**: 3 - Draft vs Non-Draft Behavior (OData V2)

**DESCRIPTION**: 
- Draft applications: beforeSaveExtension is called only once while saving the root object page.
- Non-draft applications: beforeSaveExtension is called for save operations from any object page.

**LANGUAGE**: Text

**CODE**:
```
Draft apps: called once for root object page save
Non-draft apps: called for saves from any object page
```

**STEP**: 4 - Additional References and OData V4 Note

**DESCRIPTION**: 
- Demo Kit reference for the OData V2 API: detailed API docs and examples.
- For OData V4 and additional guidance about running custom code before standard operations, see the referenced documentation.

**LANGUAGE**: Text

**CODE**:
```
- Demo Kit beforeSaveExtension (OData V2): https://ui5.sap.com/#/api/sap.suite.ui.generic.template.ObjectPage.controllerFrameworkExtensions/methods/sap.suite.ui.generic.template.ObjectPage.controllerFrameworkExtensions.beforeSaveExtension
- Using Custom Code Before Standard Operations (OData V4): using-custom-code-before-standard-operations-877e5ff.md
```
--------------------------------

**TITLE**: Adapting Confirmation Dialog Texts for Deleting Table Lines (SAP Fiori Elements)

**INTRODUCTION**: Instructions for overriding the default confirmation and result texts shown when deleting rows/items in table controls on object pages. Covers both SAP Fiori Elements for OData V2 (entity-set scoped i18n keys) and OData V4 (specific allowed keys and manifest configuration). Use these patterns to add custom texts in your application's resource bundle (i18n) and to register the custom bundle in the manifest.

**TAGS**: fiori-elements-framework, i18n, localization, OData V2, OData V4, manifest, enhanceI18n, delete, confirmation

STEP: OData V2 — Key pattern and usage

DESCRIPTION: Provide custom delete/confirmation texts in the application's i18n file. Keys must follow this pattern:
- Without qualifier: <i18n_Key>|<EntitySet>|<navigationProperty>|com.sap.vocabularies.UI.v1.LineItem
- With qualifier: <i18n_Key>|<EntitySet>|<navigationProperty>|com.sap.vocabularies.UI.v1.LineItem|<qualifier>

Use the constructed key as the i18n entry key and set the desired text as the value. Example and allowed keys listed below.

LANGUAGE: properties

CODE:
```properties
# Example with navigation property and LineItem annotation (no qualifier):
DELETE_SELECTED_ITEM|STTA_C_MP_Product|to_ProductText|com.sap.vocabularies.UI.v1.LineItem=Delete this row?
```

CODE:
```properties
# Allowed default keys you can override in the app i18n file (OData V2)
DELETE_SELECTED_ITEM=Delete the selected item?
DELETE_SELECTED_ITEMS=Delete the selected items?
DELETE_SUCCESS_PLURAL_WITH_COUNT={0} items have been deleted.
DELETE_SUCCESS_WITH_COUNT={0} item has been deleted.
DELETE_ERROR_PLURAL_WITH_COUNT={0} items cannot be deleted.
DELETE_ERROR_WITH_COUNT={0} item cannot be deleted.
DELETE_ERROR_PLURAL=The selected items cannot be deleted.
DELETE_ERROR=The selected item cannot be deleted.
DELETE_SUCCESS_PLURAL=The selected items have been deleted.
ITEM_DELETED=Item deleted
DELETE_UNDELETABLE_ITEMS={0} of {1} items cannot be deleted.
```

STEP: OData V2 — Notes and parameter handling

DESCRIPTION: Maintain placeholder syntax ({0}, {1}) when overriding messages that contain counts or multiple dynamic parts. If the annotation uses a qualifier, append the qualifier to the key after the LineItem part. Keys are entity-set and navigation-property scoped.

LANGUAGE: text

CODE:
```text
# Example (qualifier appended):
<yourKey>|<EntitySet>|<navigationProperty>|com.sap.vocabularies.UI.v1.LineItem|<qualifier>=Your custom text
```

STEP: OData V4 — Allowed override keys

DESCRIPTION: For OData V4, only a specific set of keys may be overridden in the custom i18n file. Provide the key entries in the custom resource bundle to change confirmation and related messages for deleting objects.

LANGUAGE: properties

CODE:
```properties
# Allowed OData V4 keys you may override:
C_TRANSACTION_HELPER_OBJECT_PAGE_CONFIRM_DELETE_WITH_OBJECTTITLE_SINGULAR=Delete this object?
C_TRANSACTION_HELPER_OBJECT_PAGE_CONFIRM_DELETE_WITH_UNSAVED_CHANGES=Another user edited this object without saving the changes:{0} Delete anyway?
C_TRANSACTION_HELPER_OBJECT_PAGE_CONFIRM_DELETE_WITH_UNSAVED_CHANGES_MULTIPLE_OBJECTS=Other users have edited the selected objects without saving the changes. Delete anyway?
C_TRANSACTION_HELPER_OBJECT_PAGE_CONFIRM_DELETE_WITH_OBJECTTITLE_PLURAL=Delete the selected objects?
C_TRANSACTION_HELPER_OBJECT_PAGE_CONFIRM_DELETE_WITH_OBJECTINFO_AND_FEW_OBJECTS_NON_DELETABLE={0} of {1} objects cannot be deleted.
C_TRANSACTION_HELPER_OBJECT_PAGE_CONFIRM_DELETE_WITH_OBJECTINFO_AND_FEW_OBJECTS_LOCKED={0} of {1} objects are currently locked.
C_TRANSACTION_HELPER_OBJECT_PAGE_CONFIRM_DELETE_WITH_UNSAVED_AND_FEW_OBJECTS_LOCKED_SINGULAR=The remaining object has unsaved changes. Do you still want to delete it?
C_TRANSACTION_HELPER_OBJECT_PAGE_CONFIRM_DELETE_WITH_UNSAVED_AND_FEW_OBJECTS_LOCKED_PLURAL=The remaining objects have unsaved changes. Do you still want to delete them?
C_TRANSACTION_HELPER_OBJECT_PAGE_CONFIRM_DELETE_WITH_OBJECTINFO_AND_FEW_OBJECTS_UNSAVED_SINGULAR=Also delete object with unsaved changes?
C_TRANSACTION_HELPER_OBJECT_PAGE_CONFIRM_DELETE_WITH_OBJECTINFO_AND_FEW_OBJECTS_UNSAVED_PLURAL=Also delete objects with unsaved changes?
C_TRANSACTION_HELPER_OBJECT_PAGE_CONFIRM_DELETE_WITH_OBJECTINFO_AND_FEW_OBJECTS_LOCKED_AND_NON_DELETABLE={0} out of {2} objects cannot be deleted. {1} of {2} objects are currently locked.
```

STEP: OData V4 — Register custom resource bundle in manifest

DESCRIPTION: Add enhanceI18n (path to your custom resource bundle) under the target's options.settings in the application manifest. This tells Fiori Elements to load your custom i18n file in addition to the framework bundle.

LANGUAGE: JSON

CODE:
```json
"targets":{
   "SalesOrderManageList":{
      "type": "Component",
      "id": "SalesOrderManageList",
      "name": "sap.fe.templates.ListReport",
      "options":{
         "settings":{
            "contextPath": "/SalesOrderManage",
            "enhanceI18n": "i18n/customSalesOrderLR.properties", // This is the line to be added - it provides Fiori Elements with the name of the custom resource bundle
            .
            .
            .
         }
      }
   }
}
```

STEP: OData V4 — Example default vs custom entries (manifest + custom bundle)

DESCRIPTION: Default keys live in the Fiori Elements framework bundle. To customize for a specific entity set, append the entitySet name to the key in your custom resource bundle. Example below shows default framework entries and corresponding custom entries in i18n/customSalesOrderLR.properties.

LANGUAGE: properties

CODE:
```properties
# Default (Fiori Elements framework bundle):
C_TRANSACTION_HELPER_OBJECT_PAGE_CONFIRM_DELETE_WITH_OBJECTTITLE_PLURAL=Delete the selected objects?
C_TRANSACTION_HELPER_OBJECT_PAGE_CONFIRM_DELETE_WITH_OBJECTTITLE_SINGULAR=Delete this object?

# Custom resource bundle (i18n/customSalesOrderLR.properties) with entitySet appended:
C_TRANSACTION_HELPER_OBJECT_PAGE_CONFIRM_DELETE_WITH_OBJECTTITLE_PLURAL|SalesOrderManage=Do you want to delete the selected Sales Orders?
C_TRANSACTION_HELPER_OBJECT_PAGE_CONFIRM_DELETE_WITH_OBJECTTITLE_SINGULAR|SalesOrderManage=Do you want to delete this Sales Order?
```

STEP: Format of custom keys — shared vs entity-scoped vs action-scoped

DESCRIPTION: Rules for naming custom keys:
- Global/shared resource (no entity set appended): do not append anything. This overrides the framework text everywhere.
- Entity-specific resource: append the entitySet (prefixed by '|' or '|_EntitySet' depending on examples) to scope the text to that entity.
- Action-specific override: append entitySet and action name to override confirmation text for a specific action on a specific entity set. Entity set name is mandatory for action-scoped overrides.

LANGUAGE: properties

CODE:
```properties
# Shared resource override (applies globally if you want same text everywhere)
C_COMMON_DIALOG_OK=Okie?   # overrides framework global OK text

# Entity-scoped override (different text per entity)
C_TRANSACTION_HELPER_OBJECT_PAGE_CONFIRM_DELETE_WITH_OBJECTTITLE_SINGULAR|_Items=Do you want to delete this Sales Order Item?

# Action-scoped override (entity set + action name required)
C_OPERATIONS_ACTION_CONFIRM_MESSAGE|SalesOrderManage|ReturnInProcess=Can you please confirm if you really want to trigger the returns?

# Alternate example: action same name, different entity set
C_OPERATIONS_ACTION_CONFIRM_MESSAGE|_Items|ReturnInProcess=Can you please confirm if you really want to trigger the returns for the chosen items?
```

STEP: Practical notes and placeholders

DESCRIPTION: When overriding messages:
- Preserve placeholders exactly: {0}, {1}, etc.
- If you omit an entity-scoped key for an action, the framework fallback is used.
- For LineItem annotation overrides in OData V2, include navigationProperty and optional qualifier as shown in the key pattern.

LANGUAGE: text

CODE:
```text
# Examples of placeholder usage:
DELETE_SUCCESS_PLURAL_WITH_COUNT={0} items have been deleted.
DELETE_UNDELETABLE_ITEMS={0} of {1} items cannot be deleted.
```
--------------------------------

**TITLE**: Adapting Texts in the Delete Dialog (Object Page Header)

**INTRODUCTION**: Configure and customize the Delete dialog text shown when deleting an entire Object Page in SAP Fiori elements (OData V2) by registering a controller extension and implementing beforeDeleteExtension in that controller. Use only the extensionAPI and, where needed, securedExecution to integrate safely with the framework.

**TAGS**: fiori-elements-framework, odata-v2, extension, object-page, extensionAPI, controller-extension, delete-dialog

**STEP**: 1 — Register controller extension in manifest.json

**DESCRIPTION**: Register your controller extension by adding it to the "sap.ui.controllerExtensions" section of manifest.json. Reference the controller class name you will implement in your app (example: "MY_APP.ext.controller.DetailsExtension").

**LANGUAGE**: JSON

**CODE**:
```json
"extends": {
   "extensions": {
      ... 
      "sap.ui.controllerExtensions": { 
         ...
         "sap.suite.ui.generic.template.ObjectPage.view.Details": {
            ...
            "controllerName": "MY_APP.ext.controller.DetailsExtension",
            ...
         }
      } 
      ...
```

**STEP**: 2 — Place and maintain controller extension files in your app

**DESCRIPTION**: Add the controller extension file(s) referenced in the manifest to your application source tree (for example: ext/controller/DetailsExtension.js). Maintain the files alongside your other app extension resources. Ensure the controllerName in manifest.json matches the implemented controller module path and name.

**LANGUAGE**: JSON

**CODE**:
```json
// (No code change required; ensure file path and manifest.controllerName match)
```

**STEP**: 3a — Implement beforeDeleteExtension: return an object

**DESCRIPTION**: Implement beforeDeleteExtension in your controller extension to return an object with title and text properties. The object is used as the dialog title and content. This synchronous form returns the object directly.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
beforeDeleteExtension: function() {
    var oMessageText = {
        title: "My title";
        text: "My text"
    };
    return oMessageText;
}
```

**STEP**: 3b — Implement beforeDeleteExtension: return a Promise

**DESCRIPTION**: For asynchronous determinations (e.g., fetching localized texts or data), return a Promise that resolves to the message object with title and text.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
beforeDeleteExtension: function() {
    var oMessageText = {
        title: "My title";
        text: "My text"
    };
    return Promise.resolve(oMessageText);
}
```

**STEP**: 3c — Implement beforeDeleteExtension: use extensionAPI.securedExecution

**DESCRIPTION**: If your implementation must run inside the Fiori elements secured context (recommended when interacting with framework services or protected operations), wrap asynchronous logic with this.extensionAPI.securedExecution and resolve the message object inside the secured callback.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
beforeDeleteExtension: function() {
    var oMessageText = {
        title: "My title";
        text: "My text"
    };
    return this.extensionAPI.securedExecution(function() {
        return new Promise(function(resolve) {
            ...
            resolve(oMessageText);
            ...
        });
    });
}
```

**NOTE**: This topic applies only to SAP Fiori elements for OData V2. Use app extensions with caution: prefer manifest settings or annotations if possible. When implementing extensions, use only the official extensionAPI of SAP Fiori elements. See "Using the extensionAPI" and "Using the SecuredExecution Method" for more details.
--------------------------------

**TITLE**: Adapting Delete Dialog Texts for Nested Smart Table (Object Page) — SAP Fiori elements (OData V2)

**INTRODUCTION**: Customize the title, main text, and undeletable text shown in the Delete dialog that appears when users delete selected items from a nested Smart Table on an Object Page. Applicable only to SAP Fiori elements for OData V2. Implement a controller extension and return the dialog text either as an object, a Promise, or via extensionAPI.securedExecution.

**TAGS**: fiori-elements-framework, odata-v2, extension, controller-extension, manifest.json, delete-dialog, nested-smart-table

**STEP**: 1 — Register the controller extension in manifest.json

**DESCRIPTION**: Add a controller extension entry for the Object Page Details view in your app's manifest.json. Point the framework to your custom controller (controllerName). Keep the mapping under "extends" -> "extensions" -> "sap.ui.controllerExtensions" -> "sap.suite.ui.generic.template.ObjectPage.view.Details".

**LANGUAGE**: JSON

**CODE**:
```json
"extends": {
   "extensions": {
      ... 
      "sap.ui.controllerExtensions": {
         ...
         "sap.suite.ui.generic.template.ObjectPage.view.Details": {
            ...
            "controllerName": "MY_APP.ext.controller.DetailsExtension",
            ...
         }
      } 
      ...
```

**STEP**: 2 — Add and maintain controller extension files in your application

**DESCRIPTION**: Place your extension controller file(s) in your app extension folder structure. Ensure the file path and naming match the controllerName registered in manifest.json. Example app extension file tree (refer to image in your project):

- Image reference in project: images/AppExtensionTree_ObjectPage_318f52b.png

Keep the controller file (for example, MY_APP/ext/controller/DetailsExtension.js) under your app extension folder.

**LANGUAGE**: Text

**CODE**:
```text
(images/AppExtensionTree_ObjectPage_318f52b.png)
```

**STEP**: 3 — Implement beforeLineItemDeleteExtension in the controller extension

**DESCRIPTION**: Implement beforeLineItemDeleteExtension(oBeforeLineItemDeleteProperties) in your controller extension. Check oBeforeLineItemDeleteProperties.sUiElementId to identify the nested Smart Table that triggered the delete. Return one of:
- an object with keys title, text, undeletableText,
- a Promise that resolves to that object, or
- use this.extensionAPI.securedExecution to return a Promise that resolves to that object.

The property oBeforeLineItemDeleteProperties contains info about selected items and sUiElementId identifies the nested Smart Table source.

Use only the extensionAPI of SAP Fiori elements; avoid accessing internal controls, models, or framework internals. This approach is for OData V2 applications.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
beforeLineItemDeleteExtension: function(oBeforeLineItemDeleteProperties) {
    if (oBeforeLineItemDeleteProperties.sUiElementId !== "My_APP::sap.suite.ui.generic.template.ObjectPage.view.Details::MY_EntitySet--to_NavProperty::com.sap.vocabularies.UI.v1.LineItem::Table") {
        return;
    }
    var oMessageText = {
        title: "My title",
        text: "My text",
        undeletableText: "My undeletable text"
    };
    return oMessageText;
}
```

**STEP**: 4 — Return dialog texts using a Promise

**DESCRIPTION**: If your logic requires async operations (e.g., server checks), return a Promise that resolves to the message object.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
beforeLineItemDeleteExtension: function(oBeforeLineItemDeleteProperties) {
    if (oBeforeLineItemDeleteProperties.sUiElementId !== "My_APP::sap.suite.ui.generic.template.ObjectPage.view.Details::MY_EntitySet--to_NavProperty::com.sap.vocabularies.UI.v1.LineItem::Table") {
        return;
    }
    var oMessageText = {
        title: "My title",
        text: "My text",
        undeletableText: "My undeletable text"
    };
    return Promise.resolve(oMessageText);
}
```

**STEP**: 5 — Use extensionAPI.securedExecution for secure async execution

**DESCRIPTION**: For secure async execution integrated with the framework, wrap your Promise in this.extensionAPI.securedExecution and return it. This ensures the framework's securedExecution behavior is honored.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
beforeLineItemDeleteExtension: function(oBeforeLineItemDeleteProperties) {
    if (oBeforeLineItemDeleteProperties.sUiElementId !== "My_APP::sap.suite.ui.generic.template.ObjectPage.view.Details::MY_EntitySet--to_NavProperty::com.sap.vocabularies.UI.v1.LineItem::Table") {
        return;
    }
    var oMessageText = {
        title: "My title",
        text: "My text",
        undeletableText: "My undeletable text"
    };
    return this.extensionAPI.securedExecution(function() {
        return new Promise(function(resolve) {
            ...
            resolve(oMessageText);
            ...
        });
    });
}
```

**STEP**: 6 — Notes and cautions

**DESCRIPTION**: 
- This customization is only supported for SAP Fiori elements (OData V2).
- Use app extensions only when manifest settings or annotations cannot achieve the required behavior.
- Use only the official extensionAPI; do not access or manipulate internal controls, properties, models, or other internal objects created by the SAP Fiori elements framework.
- For more information about securedExecution, see your project's documentation on Using the SecuredExecution Method.
--------------------------------

**TITLE**: Adapting Delete Dialog Texts in List Report via Controller Extension

**INTRODUCTION**: Use a controller extension to customize the texts shown in the Delete confirmation dialog of a SAP Fiori elements List Report (OData V2). You can provide static values, asynchronous values (Promise), or run secure logic via extensionAPI.securedExecution. This approach is only for OData V2 List Report and should use only the official extensionAPI.

**TAGS**: fiori-elements-framework, odata-v2, extensions, list-report, delete-dialog, extensionAPI, securedExecution

**STEP**: 1 — Register the controller extension in manifest.json

**DESCRIPTION**: Add a controller extension entry for the List Report in your app's manifest.json. Replace controllerName with your extension controller full name (for example, "MY_APP.ext.controller.ListReportExtension"). This registration tells the Fiori elements framework to load your extension controller for the List Report view.

**LANGUAGE**: JSON

**CODE**:
```json
"extends": {
    "extensions": {
        ...
         "sap.ui.controllerExtensions": {
            ...
            "sap.suite.ui.generic.template.ListReport.view.ListReport": { 
                ...
                "controllerName": "MY_APP.ext.controller.ListReportExtension",
                ...
            }
        } 
        ...
```

**STEP**: 2 — Place and maintain the controller extension file in your app

**DESCRIPTION**: Create the controller file at the path matching the controllerName used in the manifest (for example, src/ext/controller/ListReportExtension.controller.js or corresponding namespace MY_APP/ext/controller/ListReportExtension). Maintain your extension file in the application source tree. The framework will load this controller when rendering the List Report. (Reference image: images/AppExtension_Tree_List_Report_cc8015b.png)

**LANGUAGE**: — 

**CODE**:
```text
// Place your extension controller at the namespace/path used in manifest
// Example path: MY_APP/ext/controller/ListReportExtension.controller.js
```

**STEP**: 3 — Implement beforeDeleteExtension to adapt dialog texts (synchronous object)

**DESCRIPTION**: Implement the beforeDeleteExtension hook in your controller extension. Return an object with any of these properties to override texts in the Delete dialog: title, text, unsavedChanges, undeletableText. This synchronous variant returns the object directly.

- Note: oBeforeDeleteProperties contains information about the selected items for deletion.
- Use only extensionAPI functions when interacting with the framework.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
beforeDeleteExtension: function(oBeforeDeleteProperties) {
    var oMessageText = {
        title: "My title";
        text: "My text",
        unsavedChanges: "My unsaved changes",
        undeletableText: "My undeletable text"
    };
    return oMessageText;
}
```

**STEP**: 4 — Implement beforeDeleteExtension to adapt dialog texts (returning a Promise)

**DESCRIPTION**: If your logic requires asynchronous processing (for example, fetching translations or computing values), return a Promise that resolves to the message object with keys: title, text, unsavedChanges, undeletableText.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
beforeDeleteExtension: function(oBeforeDeleteProperties) {
    var oMessageText = {
        title: "My title";
        text: "My text",
        unsavedChanges: "My unsaved changes",
        undeletableText: "My undeletable text"
    };
    return Promise.resolve(oMessageText);
}
```

**STEP**: 5 — Implement beforeDeleteExtension using extensionAPI.securedExecution

**DESCRIPTION**: For secure execution within the extensionAPI context (recommended for operations that must respect the framework's secured execution model), use this.extensionAPI.securedExecution and return a Promise that resolves to the message object.

For more details, see Using the SecuredExecution Method (using-the-securedexecution-method-6a39150.md).

**LANGUAGE**: JavaScript

**CODE**:
```javascript
beforeDeleteExtension: function(oBeforeDeleteProperties) {
    var oMessageText = {
        title: "My title";
        text: "My text",
        unsavedChanges: "My unsaved changes",
        undeletableText: "My undeletable text"
    };
    return this.extensionAPI.securedExecution(function() {
        return new Promise(function(resolve) {
            ...
            resolve(oMessageText);
            ...
        });
    });
}
```

**STEP**: 6 — Behavior details and unsaved changes display conditions

**DESCRIPTION**: The Delete dialog shows Title, Text, and (if applicable) Unsaved Changes. The "Unsaved Changes" text appears only when any selected items meet one of the following conditions:
- Selected items having editing status unsavedChanges.
- Selected items having editing status unsavedChanges and locked.
- Selected items having editing status unsavedChanges and cannot be deleted using deletablePath.
- Selected items having editing status unsavedChanges, locked, and cannot be deleted using deletablePath.
- Selected items having editing status unsavedChanges and cannot be deleted using deletablePath.

Use app extensions only if manifest settings or annotations cannot achieve the required behavior. After adding an extension, controls, properties, models, and busy handling inside the extension are the app's responsibility. Do not access or manipulate internal framework objects—use only the public extensionAPI.

**LANGUAGE**: — 

**CODE**:
```text
// Keys you can return from beforeDeleteExtension:
{
  title: "string",            // dialog title
  text: "string",             // dialog main text
  unsavedChanges: "string",   // text shown when selected items have unsaved changes
  undeletableText: "string"   // text shown for undeletable items
}

// Note: oBeforeDeleteProperties parameter contains info about selected items.
```
--------------------------------

**TITLE**: Adapting the Filter Bar (SAP Fiori Elements — V2 & V4)

**INTRODUCTION**: Practical, code-focused instructions for adapting the Fiori Elements filter bar: include navigation properties, control case sensitivity, add a Clear button, and move filter fields to the Adapt Filters dialog. Contains manifest.json and annotation code snippets to copy/paste and integrate.

**TAGS**: fiori-elements, filter-bar, manifest.json, ODataV2, ODataV4, navigationProperties, FilterFunctions, showClearButton, SelectionFields

**STEP**: 1 — Include Navigation Properties (OData V2)

**DESCRIPTION**: For SAPUI5 >= 1.126.0 the Adapt Filters dialog only lists properties from the main entity set by default. To include properties from navigation entities, add a navigationProperties array under filterSettings in the list report section of manifest.json. Each entry is a navigation path relative to the main entity; you can list a single property (e.g., to_Supplier/EmailAddress) or a navigation property (e.g., to_DeliveryStatus) to include all its simple properties (excluding ones annotated Hidden or HiddenFilter).

**LANGUAGE**: JSON

**CODE**:
```json
"ListReport|C_STTA_SalesOrder_WD_20": {
    "entitySet": "C_STTA_SalesOrder_WD_20",
    "component": {
        "name": "sap.suite.ui.generic.template.ListReport",
        "list": true,
        "settings": {
            "tableSettings": {
…
            },
 
            "filterSettings": {
                "navigationProperties": [
                    "to_Supplier/EmailAddress ",
                    "to_DeliveryStatus"
                ]
            }
        }
```

**STEP**: 2 — Include Navigation Properties (OData V4)

**DESCRIPTION**: In OData V4 the filter bar shows fields from @com.sap.vocabularies.UI.v1.SelectionFields. To add navigation properties only for the Adapt Filters dialog, configure navigationProperties inside the controlConfiguration selection fields in manifest.json. The array accepts navigation paths relative to the current entity type. If a path ends at a navigation or complex property, all of its simple properties are added; if the path points to a simple property, only that single property is added. Note: only one-level navigation is supported (no nested navigation).

**LANGUAGE**: JSON

**CODE**:
```json
"ListReport": {
    ...
    "options": {
        "settings": {
            ...
            "controlConfiguration": {
                ...
                "@com.sap.vocabularies.UI.v1.SelectionFields": {
                    "navigationProperties":  [ "_DistributionChannel", "_Partner/FullName" ],
                    ...
                }
            },
            ...
        }
    }
},
```

**STEP**: 3 — Behavior Notes for Navigation Properties and 1:n Associations

**DESCRIPTION**: When filtering on a field from a 1:n navigation entity:
- The list report fetches main records that have at least one related record matching the filter.
- When opening the object page for a selected main record, the object page shows all related records from the 1:n association (not just the related records that matched the original filter).

**LANGUAGE**: Text

**CODE**:
```text
- Navigation properties are added only one level deep. Nested navigation properties aren't supported.
- 1:n filter behavior: main records with at least one matching related record are returned;
  selecting a main record shows all its related records on the object page.
```

**STEP**: 4 — Control Case Sensitivity via FilterFunctions Annotation (OData V4)

**DESCRIPTION**: Case sensitivity of filter comparisons depends on back end and what filter functions the OData service declares. To make the Fiori client treat filtering as case-insensitive, include the tolower function in the Org.OData.Capabilities.V1.FilterFunctions annotation in the EntityContainer. SAP Fiori elements checks for the presence of "tolower" and sets caseSensitive as follows:
- tolower exists => caseSensitive = false (client expects back end to normalize values to lowercase)
- tolower does not exist => caseSensitive = true (back end decides default)
- No annotation configured => caseSensitive = false (client expects back end to normalize)

This logic applies to: Filter bar, Table personalization filters, Filters created from semantic keys, Value help dialogs.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="namespace.EntityContainer">
    <Annotation Term="Org.OData.Capabilities.V1.FilterFunctions">
      <Collection>
        ....
        <String>tolower</String>
        ...
      </Collection>
    </Annotation>
</Annotations>
```

**STEP**: 5 — Add a Clear Button to the Filter Bar

**DESCRIPTION**: Enable a Clear button in the list report filter bar by setting showClearButton: true in the manifest.json controlConfiguration selection fields. The Clear button clears all filter values (not restoring default values) and resets Editing Status filters to "All". To execute additional custom clear actions, implement the controller extension onAfterClear.

**LANGUAGE**: JSON

**CODE**:
```json
"SalesOrderManageList": {
    "options": {
        "settings": {
            "controlConfiguration": {
                "@com.sap.vocabularies.UI.v1.SelectionFields": {
                    "showClearButton": true,
                }
            }
        }
    }
}
```

**LANGUAGE**: JavaScript

**CODE**:
```javascript
onAfterClear: function (oEvent) {    
  var oView = this.getView();        
  oView.byId("CustomSegmentedButton").setSelectedKey("none"); 
}
```

**STEP**: 6 — Move Explicit Filter Fields to the Adapt Filters Dialog (OData V4)

**DESCRIPTION**: To move an explicitly included filter field from the filter bar to the Adapt Filters dialog, set availability: "Adaptation" for the field under @com.sap.vocabularies.UI.v1.SelectionFields -> filterFields in controlConfiguration of manifest.json. See V4-specific docs for additional availability values.

**LANGUAGE**: JSON

**CODE**:
```json
"SalesOrderManageList": {
    "options": {
        "settings": {
            "controlConfiguration": {
                "@com.sap.vocabularies.UI.v1.SelectionFields": {
                    "filterFields": {
                        "postingDate": {
                            "availability": "Adaptation"
                        }
                    }
                }
            }
        }
    }
}
```

**STEP**: 7 — References and Related Controls

**DESCRIPTION**: Use these references while implementing:
- Smart Filter Bar control docs to understand API and lifecycle: sap.ui.comp.smartfilterbar.SmartFilterBar
- Related guides: enabling search, enabling semantic operators, adding custom fields to filter bar

**LANGUAGE**: Text

**CODE**:
```text
Related documentation:
- Smart Filter Bar: ../10_More_About_Controls/smart-filter-bar-7bcdffc.md
- Enabling the Search Function: enabling-the-search-function-3cdebee.md
- Enabling Semantic Operators in the Filter Bar: enabling-semantic-operators-in-the-filter-bar-fef65d0.md
- Adding Custom Fields to the Filter Bar (V4): adding-custom-fields-to-the-filter-bar-5fb9f57.md
```

--------------------------------

**TITLE**: Adapting the UI — Developer and Key User Configuration for SAP Fiori Elements (OData V2 & V4)

**INTRODUCTION**: Practical, code-focused guidance for enabling and configuring UI adaptation in SAP Fiori Elements apps. Includes conceptual manifest.json examples for common key-user and developer settings (list report, object page, filter bar, tables), plus operational notes to use while implementing adaptation projects or enabling runtime key-user adaptation.

**TAGS**: fiori-elements, sapui5, manifest.json, key-user-adaptation, odata-v2, odata-v4, variant-management, filter-bar, tables, personalization

**STEP**: 1 — Decide adaptation approach

**DESCRIPTION**: Choose whether UI changes are performed at design time by an application developer (Adaptation Project) or at runtime by a key user (Key User Adaptation). Developer changes are applied in the project files; key-user changes are applied to the app's manifest/settings and may override end-user personalizations.

- Developer adaptation: implement changes in the app sources or via an Adaptation Project.
- Key user adaptation: enable runtime adaptation in the app; key users use the User Menu > Adapt UI.

**LANGUAGE**: text

**CODE**:
```text
Actions:
- For design-time changes: modify app sources or create an Adaptation Project (SAP Fiori tools).
- For runtime adaptation: ensure the app is enabled for key-user adaptation (manifest + flexibility enabled).
- Note: Key-user changes can override end-user personalizations; communicate this to stakeholders.
```

**STEP**: 2 — Conceptual manifest.json structure (centralized example)

**DESCRIPTION**: Use a manifest.json "settings" section to hold the adaptation-related configuration. The following conceptual JSON demonstrates the exact property names referenced in the documentation (variantManagement, initialLoad, useSemanticDateRange, scrollThreshold, threshold, enableExport, personalization, selectionMode, etc.). This example is a canonical, implementation-oriented reference: copy the keys you need into your app's manifest.json in the appropriate section (for example under sap.ui.generic.app or template-specific configuration). Adjust locations according to your Fiori elements version and tooling.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui.generic.app": {
    "settings": {
      "listReport": {
        "variantManagement": "Page",        // values: "Page" | "Control" | "None" (V4 also supports "None")
        "initialLoad": "Auto",             // values: "Auto" | "Enabled" | "Disabled"
        "hideVariantManagement": false
      },
      "filterBar": {
        "displayClearButton": true,        // V4: Clear button
        "displayGoButton": false,          // V2: visual filter bar Go button (ALP only)
        "useSemanticDateRange": true       // V4: enable semantic date-range options in manifest.json
      },
      "objectPage": {
        "editableHeaderContent": true,
        "tableVariantManagement": true,
        "chartVariantManagement": true,
        "showRelatedApps": true
      },
      "table": {
        "selectionMode": "Multi",          // values: "Single" | "Multi"
        "createMode": "Inline",            // values: "New Page" | "Inline" | "Inline Creation Rows" | etc.
        "condensed": true,                 // condensed table layout (not for responsive tables)
        "widthIncludingColumnHeader": true,
        "enableSelectAll": true,
        "selectionLimit": 100,             // maximum selectable rows (not for responsive tables)
        "scrollThreshold": 20,             // additional records to load when scrolling (not for responsive)
        "threshold": 50,                   // initial load record count
        "enableExport": true,              // V4: show Export button
        "frozenColumnCount": 1,            // V4: columns always visible when scrolling horizontally
        "rowCount": 20,                    // V4: number of rows to display (object page; not responsive)
        "enableAddCardToInsights": false,  // list report only (S/4HANA My Home card feature)
        "personalization": {
          "enabled": true,                 // enable table personalization
          "ownSettings": [ "Sorting", "Columns", "Filtering", "Grouping" ]
        }
      }
    }
  }
}
```

**STEP**: 3 — Table personalization and selection controls

**DESCRIPTION**: Configure table behavior and personalization keys referenced above. Use "personalization" to selectively enable sorting, columns, filtering, and grouping. Enforce selection policy with selectionMode, selectionLimit, and enableSelectAll. Tune data-loading performance with scrollThreshold and threshold.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui.generic.app": {
    "settings": {
      "table": {
        "selectionMode": "Multi",
        "enableSelectAll": true,
        "selectionLimit": 200,
        "scrollThreshold": 25,
        "threshold": 100,
        "personalization": {
          "enabled": true,
          "ownSettings": [ "Sorting", "Columns", "Filtering" ]
        },
        "enableExport": true,
        "frozenColumnCount": 2
      }
    }
  }
}
```

**STEP**: 4 — Filter bar configuration (semantic dates, clear/go buttons)

**DESCRIPTION**: Enable or disable semantic date ranges and the Clear/Go buttons used in filter bars and Visual Filter Bars (ALP). Use the settings keys exactly as shown to ensure the runtime key-user adapter and templates read them.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui.generic.app": {
    "settings": {
      "filterBar": {
        "useSemanticDateRange": true,      // V4: applies semantic operators / date ranges
        "displayClearButton": true,        // V4: Clear button visible
        "displayGoButton": false           // V2 ALP only: Go button in visual filter bar
      }
    }
  }
}
```

**STEP**: 5 — Object Page header and variants

**DESCRIPTION**: Control header editability and enable variant management for tables and charts on the object page. Variant management settings can be overridden by key-user changes and can be made public for delivery to roles.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui.generic.app": {
    "settings": {
      "objectPage": {
        "editableHeaderContent": true,
        "tableVariantManagement": true,
        "chartVariantManagement": true,
        "showRelatedApps": true
      }
    }
  }
}
```

**STEP**: 6 — Key user variant behavior and operational notes

**DESCRIPTION**: Important operational behavior to consider when enabling key-user adaptation:

- Key users can create, rename, modify, and deliver public variants to all users or specific roles (page variants for list pages, table variants for list report & object pages).
- Entering adaptation mode starts the app with a fresh runtime state; applied changes are not preserved in the internal runtime state. Exiting adaptation mode restores the app to the previous state until the new version is activated.
- Settings made by key users can override end-user personalizations; end users may need to reapply their settings.
- Recommendation: Do not embed iFrames in SAP Fiori Elements for OData V2 apps when using UI adaptation.

**LANGUAGE**: text

**CODE**:
```text
Operational notes:
- Public variants: key users can create and deliver public variants to roles.
- Runtime adaptation behavior: entering adaptation mode resets the app to a fresh state; exiting reverts to the previous runtime state until activation.
- Overrides: key-user settings override end-user personalization.
- V2 note: avoid embedding iFrames in apps that rely on UI adaptation.
```

**STEP**: 7 — Version-specific guidance and references

**DESCRIPTION**: Use the following references and actions depending on your Fiori elements OData version:

- OData V2:
  - Review "Adapting the UI: List Report and Object Page" and "Adapting the UI: Analytical List Page".
  - For enabling key-user adaptation developer support, read "SAPUI5 Flexibility: Enable Your App for UI Adaptation".
- OData V4:
  - For adaptation project creation: use SAP Fiori tools Create Adaptation Project (S/4HANA Cloud Public).
  - For on-premise: use Fiori tools "Creating a Project".
  - Refer to "Enabling an App for Key User Adaptation" and SAPUI5 flexibility documentation.

Preserve image references and documentation links in your implementation notes.

**LANGUAGE**: text

**CODE**:
```text
References & files:
- manifest.json: update settings under appropriate template-specific node (sap.ui.generic.app or equivalent).
- Images referenced in docs:
  - images/Key_Users_Manage_Views1_9ff91e8.png
  - images/Key_Users_Manage_Views_2_f31343c.png

Useful documentation links (place in implementation notes):
- SAPUI5 Flexibility: Adapting UIs Made Easy
- SAPUI5 Flexibility: Enable Your App for UI Adaptation
- Create the Adaptation Project (SAP Fiori tools)
- Creating a Project (SAP Fiori tools)
- Adapting the Filter Bar, Variant Management, Tables, Object Page topics
```
--------------------------------

**TITLE**: Adapting the UI: Analytical List Page (SAP Fiori elements, OData V2)

**INTRODUCTION**: This document collects actionable UI Adaptation settings for the Analytical List Page (ALP) in SAP Fiori elements (OData V2). Use these configuration snippets with SAP Fiori tools (Business Application Studio or VS Code extensions) to programmatically hide/show controls, set chart/table behaviors, and tune columns, chart types, and visual filter dialog controls. Apply only for the use cases described here to avoid unsupported control replacements.

**TAGS**: fiori-elements-framework, analytical-list-page, ui-adaptation, odata-v2, smart-chart, smart-table, visual-filters

**STEP**: 1 — Template-level UI settings (header, filter bar, variants, general visibility)

**DESCRIPTION**: Configure ALP template-level properties to collapse/expand the smart filter bar, freeze it on scroll, enable variant-management options, and control visibility of share, clear, table toolbar and page footer. Use these keys in the UI Adaptation layer (JSON configuration or UI Editor) for the ALP template.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "template": {
    "headerExpanded": false,                        // collapse and hide the smart filter bar when false
    "preserveHeaderStateonScroll": true,            // freeze filter bar on scroll when true
    "pageVariants": {
      "showSetAsDefault": true,                     // enable "Set as Default" per-user variant
      "showShare": true                             // enable visibility/sharing of variants
    },
    "shareIcon": {
      "visible": true
    },
    "clearButton": {
      "visibleOnSmartFilterBar": true,              // visible on the smart filter bar (when Go button enabled)
      "visibleOnHeaderBar": false                   // visible in header area (when Go button disabled)
    },
    "tableToolbar": {
      "visible": true
    },
    "pageFooter": {
      "visible": false
    }
  }
}
```

**STEP**: 2 — Chart configuration (smart chart top-level properties)

**DESCRIPTION**: Configure smart chart behavior and allowed chart types. Use `ignoredChartTypes` as a comma-separated string of chart type codes to hide them from the chart type selector. Control selection mode, tooltips and buttons for chart type selection, download and legend.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "smartChart": {
    "ignoredChartTypes": "pie,donut,scatter",      // comma-separated chart type codes to hide
    "selectionMode": "single",                     // "single", "multiple", or "none"
    "showChartTooltip": true,
    "showChartTypeSelectionButton": true,
    "showDownloadButton": false,
    "showLegendButton": true,
    "noData": "No chart data available"            // override default "no data" text
  }
}
```

**STEP**: 3 — List of available chart type codes (use in ignoredChartTypes)

**DESCRIPTION**: Map of human-readable chart types to the exact codes used by `ignoredChartTypes`. Use these codes in comma-separated lists.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "chartTypeCodes": {
    "Bar Chart": "bar",
    "Column Chart": "column",
    "Line Chart": "line",
    "Combined Column Line Chart": "combination",
    "Pie Chart": "pie",
    "Doughnut Chart": "donut",
    "Scatter Plot": "scatter",
    "Bubble Chart": "bubble",
    "Heat Map": "heatmap",
    "Bullet Chart": "bullet",
    "Vertical Bullet Chart": "vertical_bullet",
    "Stacked Bar Chart": "stacked_bar",
    "Stacked Column Chart": "stacked_column",
    "Combined Stacked Line Chart": "stacked_combination",
    "Horizontal Combined Stacked Line Chart": "horizontal_stacked_combination",
    "Bar Chart with 2 X-Axes": "dual_bar",
    "Column Chart with 2 Y-Axes": "dual_column",
    "Line Chart with 2 Y-Axes": "dual_line",
    "Stacked Bar Chart with 2 X-Axes": "dual_stacked_bar",
    "Stacked Column Chart with 2 Y-Axes": "dual_stacked_column",
    "Combined Column Line Chart with 2 Y-Axes": "dual_combination",
    "Combined Bar Line Chart with 2 X-Axes": "dual_stacked_combination",
    "Combined Stacked Line Chart with 2 Y-Axes": "dual_horizontal_combination",
    "Horizontal Combined Stacked Line Chart with 2 X-Axes": "dual_horizontal_stacked_combination",
    "100% Stacked Bar Chart": "100_stacked_bar",
    "100% Stacked Column Chart": "100_stacked_column",
    "100% Stacked Bar Chart with 2 X-Axes": "100_dual_stacked_bar",
    "100% Stacked Column Chart with 2 Y-Axes": "100_dual_stacked_column",
    "Waterfall Chart": "waterfall",
    "Horizontal Waterfall Chart": "horizontal_waterfall"
  }
}
```

**STEP**: 4 — Chart toolbar settings (personalization and drill-down)

**DESCRIPTION**: Toggle chart toolbar controls: settings (personalization) button visibility and drill-down button visibility/text. The UI adaptation key names should match the property labels used by the editor (example provided).

**LANGUAGE**: JSON

**CODE**:
```json
{
  "chartToolbar": {
    "personalisationButton": {
      "visible": true
    },
    "drillDownButton": {
      "visible": true,
      "textKey": "C_ContrItemMonitoringResults--chart-btnDrillDownText"
    }
  }
}
```

**STEP**: 5 — Table-level settings (noData, personalization, export, scrolling, selection)

**DESCRIPTION**: Configure table UI behavior: override no-data text, show/hide personalization settings icon, turn on/off Export to Excel, tune dynamic loading (scrollThreshold), and control whether responsive table row selections persist (`rememberSelections`).

**LANGUAGE**: JSON

**CODE**:
```json
{
  "smartTable": {
    "C_ContrItemMonitoringResults--table-nodata": "No table data available", // override no-data text
    "personalization": {
      "visible": true    // show/hide the Settings icon for table personalization
    },
    "enableExport": false, // set to false to hide Export to Excel button
    "showRowCount": true,
    "scrollThreshold": 500, // default 300; increase/decrease to change dynamically loaded records while scrolling
    "rememberSelections": false // default false; set true to persist row selections across refreshes
  }
}
```

**STEP**: 6 — Table column properties (per-column tuning)

**DESCRIPTION**: Each smart table column exposes properties you can adjust in UI Adaptation: visibility, width, auto-resize behavior, inclusion in query (`inResult`), resizable, personalization sort entry, sort order, sorted indicator, and summed. Apply per-column configuration objects.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "columns": [
    {
      "id": "Column_Product",
      "property": "Product",
      "visible": true,
      "width": "200px",
      "autoResizable": false,
      "inResult": true,
      "resizable": true,
      "showSortMenuEntry": true,
      "sortOrder": "Ascending",   // or "Descending"
      "sorted": false,
      "summed": false
    },
    {
      "id": "Column_Quantity",
      "property": "Quantity",
      "visible": true,
      "width": "100px",
      "autoResizable": true,
      "inResult": true,
      "resizable": true,
      "showSortMenuEntry": true,
      "sortOrder": "Descending",
      "sorted": true,
      "summed": true
    }
  ]
}
```

**STEP**: 7 — Visual Filters Dialog: button and micro-chart properties

**DESCRIPTION**: Configure each button or micro chart in the Adapt Filters (Visual Filter) dialog. Common properties: visibility, width, icon and activeIcon sources, displayed text, busy/enabled/blocked states.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "visualFilterDialog": {
    "buttons": [
      {
        "id": "VF_Status",
        "text": "Status",
        "visible": true,
        "width": "150px",
        "icon": "sap-icon://filter",
        "activeIcon": "sap-icon://accept",
        "busy": false,
        "enabled": true,
        "blocked": false
      },
      {
        "id": "VF_Category",
        "text": "Category",
        "visible": true,
        "width": "180px",
        "icon": "sap-icon://category",
        "activeIcon": "sap-icon://category2",
        "busy": false,
        "enabled": true,
        "blocked": false
      }
    ],
    "microCharts": [
      {
        "id": "VF_Sparkline",
        "visible": true,
        "width": "120px"
      }
    ]
  }
}
```
--------------------------------

**TITLE**: UI Adaptations for Fiori Elements List Report and Object Page (OData V2)

**INTRODUCTION**: Practical, code-focused reference for adapting UI behavior and control properties in Fiori elements List Report and Object Page (OData V2). Use these snippets in XML fragments or UI5 views (or via Page Editor where supported). Notes mention Page Editor limitations and defaults to preserve compatibility.

**TAGS**: fiori-elements, ui5, list-report, object-page, manifest, fragment, table, dynamicpage, smartfilterbar, binding

STEP: List Report — Enable/Disable "Export to Excel" button
DESCRIPTION: Toggle the Export to Excel button on a table toolbar. Can be set on the table node in the Page Editor or in an XML fragment for custom configuration.
LANGUAGE: XML
CODE:
```xml
<!-- Set to true to show Export to Excel, false to hide -->
<Table id="listReportTable" enableExport="true">
  <!-- table columns / items -->
</Table>
```

STEP: List Report — Column width and horizontal alignment (custom columns)
DESCRIPTION: Change column width or center-align status columns. Page Editor can change Width/hAlign for standard columns. For custom columns, define these properties directly in the fragment (Page Editor does not support custom column width/hAlign).
LANGUAGE: XML
CODE:
```xml
<!-- Example column in an XML fragment (use for custom columns) -->
<Column id="colStatus" width="120px" hAlign="Center">
  <Text text="{Status}"/>
</Column>
```

STEP: List Report — DynamicPage fitContent (prevent tables from occupying full container)
DESCRIPTION: For analytical, grid, and tree tables the default is fitContent="true". Set it to false to allow the container to show free space (Page Editor setting or fragment).
LANGUAGE: XML
CODE:
```xml
<!-- Prevent full-height fitting for the dynamic page -->
<DynamicPage id="listReportDynamicPage" fitContent="false">
  <!-- header / content -->
</DynamicPage>
```

STEP: List Report — Change popinLayout for many columns
DESCRIPTION: Use one of the supported popinLayout values to improve readability when many columns are present.
LANGUAGE: XML
CODE:
```xml
<!-- Options: Block (default), GridSmall, GridLarge -->
<Table id="listReportTable" popinLayout="GridSmall">
  <!-- content -->
</Table>
```

STEP: List Report — scrollThreshold for grid/analytical/tree tables
DESCRIPTION: Change scrollThreshold to control when additional data loads during scrolling. Default is 300.
LANGUAGE: XML
CODE:
```xml
<!-- Increase or decrease from default (300) -->
<Table id="gridTable" scrollThreshold="500">
  <!-- content -->
</Table>
```

STEP: List Report — SmartFilterBar liveMode
DESCRIPTION: Enable or disable live mode in the SmartFilterBar so filters apply automatically as changed.
LANGUAGE: XML
CODE:
```xml
<!-- liveMode true for immediate filtering, false for manual apply -->
<SmartFilterBar id="smartFilterBar" liveMode="true">
  <!-- filter items -->
</SmartFilterBar>
```

STEP: List Report — rememberSelections for responsive tables
DESCRIPTION: Controls whether row selection persists after data refresh/update. Default is false.
LANGUAGE: XML
CODE:
```xml
<!-- Set to true to persist selections across refreshes -->
<Table id="responsiveTable" rememberSelections="true" type="ResponsiveTable">
  <!-- content -->
</Table>
```

STEP: Object Page — Avatar shape in dynamic header
DESCRIPTION: Change the object page dynamic header avatar shape to circle.
LANGUAGE: XML
CODE:
```xml
<!-- ObjectPageHeader displayShape: Square (default) or Circle -->
<ObjectPageHeader id="objectHeader" displayShape="Circle">
  <!-- title, attributes, actions -->
</ObjectPageHeader>
```

STEP: Object Page — Hide anchor bar
DESCRIPTION: Remove the anchor bar/navigation bar from the Object Page layout.
LANGUAGE: XML
CODE:
```xml
<!-- Hide anchor bar -->
<ObjectPageLayout id="objectLayout" showAnchorBar="false">
  <!-- sections / subsections -->
</ObjectPageLayout>
```

STEP: Object Page — Use icon tab bar (switch to tabs)
DESCRIPTION: Render sections as icon tab bar instead of anchor bar.
LANGUAGE: XML
CODE:
```xml
<!-- Switch to tab layout -->
<ObjectPageLayout id="objectLayout" useIconTabBar="true">
  <!-- sections / subsections -->
</ObjectPageLayout>
```

STEP: Object Page — Enable Export to Excel in object page tables
DESCRIPTION: Show the Export to Excel button for object page tables by enabling the property on the table node.
LANGUAGE: XML
CODE:
```xml
<!-- Enable Export on object page table -->
<Table id="objectPageTable" enableExport="true">
  <!-- table content -->
</Table>
```

STEP: Object Page — Show header content in edit mode (static or bound)
DESCRIPTION: Control header content visibility in edit mode. Can be static true/false or a binding/expression. See "Creating a Binding Change" for binding examples.
LANGUAGE: XML
CODE:
```xml
<!-- Static -->
<ObjectPageLayout id="objectLayout" showHeaderContent="true">
  <!-- header content -->
</ObjectPageLayout>

<!-- Binding example (use when value depends on model/expression) -->
<ObjectPageLayout id="objectLayout" showHeaderContent="{= ${ui>/editable} }">
  <!-- header content -->
</ObjectPageLayout>
```

STEP: Object Page — Prevent header collapse when scrolling (always show header)
DESCRIPTION: Keep header visible while scrolling by setting alwaysShowContentHeader to true. Note: on small-screen devices (tablet/phone) header still collapses automatically.
LANGUAGE: XML
CODE:
```xml
<!-- Keep header expanded while scrolling on larger screens -->
<ObjectPageLayout id="objectLayout" alwaysShowContentHeader="true">
  <!-- content -->
</ObjectPageLayout>
```

STEP: Object Page — Table growingThreshold (sap.m.Table)
DESCRIPTION: Change growingThreshold for sap.m.Table. Default is 10. Exception: single section + single subsection with one table defaults to 20 and cannot be changed.
LANGUAGE: XML
CODE:
```xml
<!-- Change growingThreshold (default 10) -->
<Table id="objectMTable" growingThreshold="15">
  <!-- items -->
</Table>
```

STEP: Object Page — Make inner tables non-editable and set navigation mode
DESCRIPTION: By default object page tables become editable when the page is in edit mode. Set editable="false" on the outer table to force non-editable mode and ensure the inner table navigationMode is Navigation so keyboard navigation works across focusable content.
LANGUAGE: XML
CODE:
```xml
<!-- Outer table set to not editable -->
<Table id="outerObjectTable" editable="false">
  <!-- The inner table (framework renders an inner sap.m.Table or similar) -->
  <core:FragmentFragmentName> <!-- placeholder to indicate inner table -->
    <Table id="innerTable" navigationMode="Navigation">
      <!-- columns / items -->
    </Table>
  </core:FragmentFragmentName>
</Table>
```

STEP: Object Page — includeItemInSelection for tables
DESCRIPTION: Set includeItemInSelection to true so selections remain shown when navigating away from the table.
LANGUAGE: XML
CODE:
```xml
<!-- Show item selection even after moving focus away -->
<Table id="objectTable" includeItemInSelection="true">
  <!-- content -->
</Table>
```

STEP: Object Page — "Save and Edit" action visibility binding in Footer
DESCRIPTION: In non-draft apps, enable the Save and Edit action and bind its visibility so it is visible only when the page is editable (example uses ui model path).
LANGUAGE: XML
CODE:
```xml
<!-- Footer action bound to ui>/editable -->
<Button id="saveAndEdit" text="Save and Edit" visible="{ui>/editable}" press="onSaveAndEdit"/>
```

STEP: Object Report & List Report — table popinLayout, threshold, and scrollThreshold defaults
DESCRIPTION: Configure table popinLayout for readability and thresholds for initial loading and scrolling. Default scrollThreshold is 300. For threshold defaults across table types and guidance see the tables reference (tables-c0f6592.md).
LANGUAGE: XML
CODE:
```xml
<!-- Examples -->
<Table id="tableExample" popinLayout="GridLarge" threshold="50" scrollThreshold="300">
  <!-- content -->
</Table>
```

STEP: General — rememberSelections default reminder
DESCRIPTION: rememberSelections defaults to false for responsive tables; explicitly set to true to persist selections across data updates/refreshes.
LANGUAGE: XML
CODE:
```xml
<!-- Persist selection across refreshes -->
<Table id="anyResponsiveTable" rememberSelections="true">
  <!-- content -->
</Table>
```

Related links / files referenced:
- Creating a Binding Change: creating-a-binding-change-4754094.md
- Tables threshold reference: tables-c0f6592.md
- SAP Fiori Tools Page Editor documentation: https://help.sap.com/docs/SAP_FIORI_tools/17d50220bcd848aa854c9c182d65b699/047507c86afa4e96bb3d284adb9f4726.html

Notes preserved:
- Use Page Editor where supported; Page Editor displays properties with spaces for readability but actual property names are used in code (e.g., enableExport, fitContent, popinLayout).
- Custom column width and hAlign must be defined in fragments (Page Editor cannot change custom columns).
- Small-screen devices auto-collapse header despite alwaysShowContentHeader on larger screens.
- Default values: scrollThreshold = 300; sap.m.Table growingThreshold = 10 (special-case single-section single-subsection = 20, immutable); rememberSelections default = false.
--------------------------------

**TITLE**: Adapting Transient Messages from the Back End (SAP Fiori elements — OData V2)

**INTRODUCTION**: Use the adaptTransientMessageExtension extension point to inspect and adapt transient messages (from the back end) before they are displayed in List Report, Object Page, or Analytical List Page. Applicable only for SAP Fiori elements for OData V2. Use app extensions sparingly and only via the official extensionAPI; do not manipulate internal controls, models, or binding structures directly.

**TAGS**: fiori-elements-framework, OData V2, extension, transient-messages, ListReport, ObjectPage, AnalyticalListPage, manifest.json, controller-extension, Messaging

**STEP**: 1 — Register controller extension in manifest.json

**DESCRIPTION**: Register your controller extension in the app manifest under "extends" → "extensions" → "sap.ui.controllerExtensions". Add a controller entry for the relevant view (ListReport, ObjectPage, or AnalyticalListPage). Keep other manifest entries as-is; the example below shows registering a ListReport controller extension. Replace controllerName with your extension controller path.

**LANGUAGE**: JSON

**CODE**:
```json
"extends": {
   "extensions": {
      ... 
      "sap.ui.controllerExtensions": { 
         ...
         "sap.suite.ui.generic.template.ListReport.view.ListReport": { 
            ... 
            "controllerName": "STTA_MP.ext.controller.ListReportExtension",
            ...
         }
      } 
      ...
```

**STEP**: 2 — Implement adaptTransientMessageExtension in the controller extension

**DESCRIPTION**: Implement the adaptTransientMessageExtension function inside your controller extension (ListReport, ObjectPage, or AnalyticalListPage). This function is invoked before a transient message is displayed. Import the required modules: sap/ui/core/Messaging, sap/ui/core/message/Message, sap/ui/core/MessageType. Inside the function you can add or modify transient messages via the Messaging API (Messaging.getMessageModel(), Messaging.addMessages()). Do not change the target of existing messages and do not modify state messages from Messaging.getMessageManager().getMessageModel().

Ensure the message model has been adapted for each page type you support. In Flexible Column Layout (FCL) the extension points for list report, object page, and analytical list page are all invoked.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
    // "Messaging" required from module "sap/ui/core/Messaging"
    // "Message" required from module "sap/ui/core/message/Message"
    // "MessageType" required from module "sap/ui/core/MessageType"
    adaptTransientMessageExtension:function() {
            if (Messaging.getMessageModel().oData.length) {
                    var msgText = "This message has been added through List Extension" ;
                    var consolidatedMessage = new Message({
                        message: msgText,
                        type: MessageType.Information,
                        target: '',
                        persistent: true
                    });
                    Messaging.addMessages(consolidatedMessage);
            }		
    }
```

**STEP**: 3 — Important constraints and best practices

**DESCRIPTION**: Follow these constraints to prevent breaking framework behavior:
- This extension point applies only to transient messages (the transient message model). Do not change state messages from the message model accessed via Messaging.getMessageManager().getMessageModel().
- Do not alter the target property of any message from the message model — changing targets may break message model services.
- Use only the official SAP Fiori elements extensionAPI; avoid accessing or manipulating internal controls, properties, models, or bindings created by the framework.
- Use app extensions only when required; prefer manifest settings or annotations where possible.

**LANGUAGE**: Text

**CODE**:
```
- Applicable only to SAP Fiori elements for OData V2.
- Only adapt transient messages (Messaging.getMessageModel()).
- Do NOT modify state messages (Messaging.getMessageManager().getMessageModel()).
- Do NOT change message targets from the message model.
- Use only the official extensionAPI. Do not access internal framework objects.
- In Flexible Column Layout ensure message model adaptation is handled for ListReport, ObjectPage, and AnalyticalListPage because all extension points are invoked.
```
--------------------------------

**TITLE**: Adding a Chart Facet to an Object Page

**INTRODUCTION**: This guide explains how to add a chart facet to an object page in SAP Fiori Elements. It covers the general approach (UI.Facet → UI.ReferenceFacet → UI.Chart) and provides concrete code examples for OData V4 (XML annotations), ABAP CDS annotations, and CAP CDS annotations. It also states the OData V2 limitation on using qualified UI.Chart annotations in object pages.

**TAGS**: fiori-elements, object-page, chart, UI.Chart, UI.ReferenceFacet, UI.PresentationVariant, OData V4, OData V2, CDS, ABAP, CAP

STEP: 1 — Add a Chart Facet to an Object Page (concept)
DESCRIPTION: Use the UI.Facet term with the UI.ReferenceFacet complex type and reference the UI.Chart annotation (or reference a UI.PresentationVariant that contains UI.Chart). Place the ReferenceFacet inside the object page content section to display a chart facet. This is typically rendered as a chart inside a content section of the object page (see image reference below).
- Image reference: images/ObjectPage_SmartChart_69b1977.png
LANGUAGE: Text
CODE:
```text
To add a chart facet, use the UI.Facet term and include the UI.ReferenceFacet complex type, and then reference the UI.Chart annotation.
```

STEP: 2 — OData V4: XML Annotation example (ReferenceFacet → PresentationVariant with UI.Chart)
DESCRIPTION: For OData V4 applications, point the ReferenceFacet Target to a UI.PresentationVariant annotation that lists UI.Chart as the first visualization. This enables showing the chart as the first visualization in the facet.
LANGUAGE: XML
CODE:
```xml
<Record Type="UI.ReferenceFacet">
    <PropertyValue Property="Label" String="Items"/>
    <PropertyValue Property="ID" String="SalesOrderItems"/>
    <PropertyValue Property="Target" AnnotationPath="_Item/@UI.PresentationVariant"/>
    <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
</Record>

<Annotation Term="UI.PresentationVariant">
    <Record Type="UI.PresentationVariantType">
        <PropertyValue Property="SortOrder">
            <Collection>
                <Record Type="Common.SortOrderType">
                    <PropertyValue Property="Property" PropertyPath="SalesOrderItem"/>
                    <PropertyValue Property="Descending" Bool="true"/>
                </Record>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="Visualizations">
            <Collection>
                <AnnotationPath>@UI.Chart</AnnotationPath>
                <AnnotationPath>@UI.LineItem</AnnotationPath>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

STEP: 3 — ABAP CDS Annotation example (PresentationVariant reference and AS_CHART)
DESCRIPTION: Example ABAP CDS annotation to declare a UI.facet referencing a presentation variant and specifying visualizations including chart first (AS_CHART) and then line item. Use this in ABAP CDS view annotation sections for OData V4 stack.
LANGUAGE: ABAP
CODE:
```
@UI.facet: [
   {
      id:           'SalesOrderItems',
      label:        'Items',
      type:         #PRESENTATIONVARIANT_REFERENCE,
      purpose:      #STANDARD,
      targetElement: '_Item',
      importance:   #HIGH 
    },
  ]
SalesOrder;

@UI.PresentationVariant: [
  {
    sortOrder: [
      {
        by: ' SALESORDERITEM',
        direction: #DESC
      }
    ],
    visualizations: [
      {
        type: #AS_CHART
      },
     {
        type: #AS_LINEITEM
      }
    ]
  }
]
annotate view VIEWNAME with {

}
```

STEP: 4 — CAP CDS Annotation example (UI.ReferenceFacet & UI.PresentationVariant)
DESCRIPTION: CAP CDS (JSON-like) representation showing the ReferenceFacet and PresentationVariant entries. Visualizations reference @UI.Chart first and @UI.LineItem second.
LANGUAGE: CAP CDS
CODE:
```
{
            $Type             : 'UI.ReferenceFacet',
            Label             : 'Items',
            ID                : 'SalesOrderItems',
            Target            : '_Item/@UI.PresentationVariant',
            ![@UI.Importance] : #High
 }
 
UI.PresentationVariant: {
    SortOrder : [
        {
            $Type : 'Common.SortOrderType',
            Property : SalesOrderItem,
            Descending : true
        }
    ],
    Visualizations : [
        '@UI.Chart', 
        '@UI.LineItem'
    ]
}
```

STEP: 5 — OData V2 limitation (qualifier / navigation property)
DESCRIPTION: The object page in SAP Fiori Elements for OData V2 does not support UI.Chart annotations that use qualifiers on navigation properties. Avoid using qualified UI.Chart annotations on the object page; instead use supported patterns (e.g., PresentationVariant with visuals) or target a non-qualified chart annotation where available.
LANGUAGE: XML (example of a qualified chart annotation — avoid for OData V2 object page)
CODE:
```xml
<!-- Example of a qualified chart annotation (NOT supported on OData V2 object page):
     <Annotation Term="UI.Chart#MyQualifier"> ... </Annotation>
-->
```
--------------------------------

**TITLE**: Adding a Contact Facet (UI.ReferenceFacet / Communication.Contact)

**INTRODUCTION**: Instructions and ready-to-use annotation snippets to add a Contact facet/card in SAP Fiori Elements applications. Includes OData V2 and V4 examples (XML annotations, ABAP CDS, CAP CDS). Use these to render contact lists, contact cards, and smart-link popovers that display contact details (name, photo, title, org, address, email, phone).

**TAGS**: fiori-elements-framework, annotations, Communication.Contact, UI.ReferenceFacet, DataFieldForAnnotation, Contact card, OData V2, OData V4, ABAP CDS, CAP CDS, XML

STEP: 1 — Add a Reference Facet (OData V2)

DESCRIPTION: Add a UI.ReferenceFacet that points to a contact annotation (Communication.Contact) via the navigation path. This renders the facet label and the contact fn property; clicking the contact name opens a quick view with details.

LANGUAGE: XML

CODE:
```xml
<Record Type="UI.ReferenceFacet">
   <PropertyValue Property="Label" String="Supplier"/>
   <PropertyValue AnnotationPath="to_Supplier/@Communication.Contact" Property="Target"/>
</Record>
```

LANGUAGE: ABAP CDS

CODE:
```abap
@UI.facet: [
 {
  label: 'Supplier',
  type:         #CONTACT_REFERENCE,
  targetElement: '_Supplier',
  purpose: #STANDARD
 }
]
product;
```

STEP: 2 — Define Contact Annotation (OData V2) — Contact Card Fields and Behavior

DESCRIPTION: Define Communication.Contact on the target EntityType. The contact card reads these properties; implement them as shown to control card content and behavior.

- Property mapping and behavior:
  - fn: full name; displayed as title (large font). Click name to open quick view.
  - title: job title; shown below title.
  - photo: URL for photo; shown in header. If absent, fallback icon is shown.
  - role / org: displayed in content.
  - adr: address must follow addressType; displayed as "street, code, locality, region, country" comma-separated. If label property used, only label shown (other address fields ignored).
  - mail / email: email addresses with type (supported: preferred, work). Displayed as mailto links; clicking opens mail client.
  - tel: telephone numbers with types (supported: preferred, cell, work, fax). Displayed as tel links; clicking opens phone application. For fax use type: #fax.

LANGUAGE: XML

CODE:
```xml
<Annotations Target="SEPMRA_PROD_MAN.SEPMRA_I_EmployeeType">
	<Annotation Term="Communication.Contact">
		<Record>
			<PropertyValue Property="fn" Path="FormattedName"/>
			<PropertyValue Property="title" Path="JobTitle"/>
			<PropertyValue Property="org" Path="CompanyName"/>
			<PropertyValue Property="role" Path="OrganizationRole"/>
			<PropertyValue Property="n">
				<Record>
					<PropertyValue Property="given" Path="FirstName"/>
					<PropertyValue Property="additional" Path="MiddleName"/>
					<PropertyValue Property="surname" Path="LastName"/>
				</Record>
										
			</PropertyValue>
			<PropertyValue Property="photo" Path="EmployeePictureURL"/>
			<PropertyValue Property="tel">
				<Collection>
					<Record>
						<PropertyValue Property="type" EnumMember="Communication.PhoneType/fax"/>
						<PropertyValue Property="uri" Path="FaxNumber"/>
					</Record>
					<Record>
						<PropertyValue Property="type" EnumMember="Communication.PhoneType/cell"/>
						<PropertyValue Property="uri" Path="MobilePhoneNumber"/>
					</Record>
					<Record>
						<PropertyValue Property="type" EnumMember="Communication.PhoneType/work"/>
						<PropertyValue Property="uri" Path="PhoneNumber"/>
					</Record>
					<Record>
						<PropertyValue Property="type" EnumMember=""/>
						<PropertyValue Property="address" Path="FaxNumber"/>
					</Record>
				</Collection>
			</PropertyValue>
			<PropertyValue Property="email">
				<Collection>
					<Record>
						<PropertyValue Property="type" EnumMember="Communication.ContactInformationType/work"/>
						<PropertyValue Property="address" Path="EmailAddress"/>
					</Record>
				</Collection> 
			</PropertyValue>
		</Record>
	</Annotation>
</Annotations>				
```

LANGUAGE: ABAP CDS

CODE:
```abap
define view VIEWNAME
{
  @Semantics.name.fullName: true
  FormattedName,

  @Semantics.eMail.address: true
  @Semantics.eMail.type:  [#WORK]
  EmailAddress,
   
  @Semantics.telephone.type:  [ #FAX ] 
  FaxNumber,

  @Semantics.telephone.type:  [ #CELL ]
  MobilePhoneNumber,
  
  @Semantics.telephone.type:  [ #WORK]
  PhoneNumber,

  @Semantics.name: { jobTitle: true }   
  JobTitle,

  @Semantics.organization: { name: true }
  CompanyName,

  @Semantics.organization: { role: true, unit: true }
  OrganizationRole

  @Semantics.name: { givenName: true }   
  FirstName,

  @Semantics.name: { additionalName: true }   
  MiddleName,

  @Semantics.name: { familyName: true }   
  LastName,

  @Semantics.address : { city: true }  
  City,

  @Semantics.contact.photo: true
  EmployeePictureURL
}
```

STEP: 3 — Add Contact Column / Smart Link (OData V4) — DataFieldForAnnotation

DESCRIPTION: For OData V4 use UI.DataFieldForAnnotation in LineItem to render a contact smart link column. Set Target to supplier/@Communication.Contact (navigation path). This creates a smart link that opens a contact popover with additional configured fields.

LANGUAGE: XML

CODE:
```xml
<Annotations Target="clouds.products.CatalogService.Products">
    <Annotation Term="UI.LineItem">
        <Collection>
            <Record Type="UI.DataFieldForAnnotation">
                <PropertyValue Property="Label" String="Supplier"/>
                <PropertyValue Property="Target" AnnotationPath="supplier/@Communication.Contact"/>
            </Record>
        </Collection>
    </Annotation>
</Annotations>
```

LANGUAGE: ABAP CDS

CODE:
```abap
annotate view PRODUCTS.CATALOGSERVICE.PRODUCTS with {

@UI.lineItem: [
  {
    label: 'Supplier',
    value: 'SUPPLIER',
    type: #AS_CONTACT,
    position: 1 
  }
]

test;
}
```

LANGUAGE: CAP CDS

CODE:
```cds
LineItem                         : [
    {
        $Type  : 'UI.DataFieldForAnnotation',
        Target : 'supplier/@Communication.Contact',
        Label  : 'Supplier'
    }]
```

STEP: 4 — Define Communication.Contact on the EntitySet (OData V4) — Content of the Contact Card / Popover

DESCRIPTION: Add the Communication.Contact annotation to the EntitySet targeted by the navigation property (e.g., Suppliers). The snippet below defines email, fn, and tel entries used to populate the contact card/popover. If you require additional fields (adr, photo, role, org, etc.), add them similarly. Note: if no @Contact.photo annotation is provided, a fallback contact icon is displayed.

LANGUAGE: XML

CODE:
```xml
<Annotations Target="clouds.products.CatalogService.Suppliers">
    <Annotation Term="Communication.Contact">
        <Record Type="Communication.ContactType">
            <PropertyValue Property="email">
                <Collection>
                    <Record Type="Communication.EmailAddressType">
                        <PropertyValue Property="type">
                            <EnumMember>Communication.ContactInformationType/work</EnumMember>
                        </PropertyValue>
                        <PropertyValue Property="address">
                            <Path>emailAddress</Path>
                        </PropertyValue>
                    </Record>
                </Collection>
            </PropertyValue>
            <PropertyValue Property="fn">
                <Path>name</Path>
            </PropertyValue>
            <PropertyValue Property="tel">
                <Collection>
                    <Record Type="Communication.PhoneNumberType">
                        <PropertyValue Property="type">
                            <EnumMember>Communication.PhoneType/fax</EnumMember>
                        </PropertyValue>
                        <PropertyValue Property="uri">
                            <Path>faxNumber</Path>
                        </PropertyValue>
                    </Record>
                    <Record Type="Communication.PhoneNumberType">
                        <PropertyValue Property="type">
                            <EnumMember>Communication.PhoneType/work</EnumMember>
                        </PropertyValue>
                        <PropertyValue Property="uri">
                            <Path>phoneNumber</Path>
                        </PropertyValue>
                    </Record>
                </Collection>
            </PropertyValue>
        </Record>
    </Annotation>
</Annotations>
```

LANGUAGE: ABAP CDS

CODE:
```abap
define view Suppliers
{
  @Semantics.name.fullName: true
  name,

  @Semantics.eMail.address: true
  @Semantics.eMail.type:  [#WORK]
  emailAddress,
   
  @Semantics.telephone.type:  [ #FAX ] 
  FaxNumber,
  
  @Semantics.telephone.type:  [ #WORK]
  PhoneNumber
}
```

LANGUAGE: CAP CDS

CODE:
```cds
FieldGroup #HeaderGeneralInformation            : {Data : [{
        $Type  : 'UI.DataFieldForAnnotation',
        Target : '_SoldToParty/@Communication.Contact',
        Label  : 'Contact Info'
    }, ]},


entity Customer                                        @(
    cds.autoexpose,
    title                  : 'Sold-to Party',
    Communication.Contact  : {
        email : [{
            type    : #work,
            address : EmailAddress
        }],
        fn    : CustomerName,
        tel   : [{
            type : #fax,
            uri  : InternationalPhoneNumber
        }],
        adr   : [{
            type     : #work,
            code     : PostalCode,
            country  : Country,
            locality : CityName
        }]
    },
    Common.IsNaturalPerson : true
)
```

STEP: 5 — Implementation Checklist & Tips

DESCRIPTION: Quick actionable checklist before deploying:

- Ensure the ReferenceFacet / DataFieldForAnnotation Target points to the correct navigation path and EntitySet annotation (e.g., supplier/@Communication.Contact).
- On the target EntitySet (Suppliers / EmployeeType / view), add Communication.Contact entries referencing property Paths used in your service/view.
- Provide @Semantics annotations (email, telephone, name, contact.photo, address) in CDS or mapping in XML so Fiori Elements can identify fields.
- Use supported email types (preferred, work) and phone types (preferred, cell, work, fax).
- Address formatting: street, code, locality, region, country (comma-separated); if address label used, it overrides other address fields.
- If no photo annotation present, a fallback icon is shown.
--------------------------------

**TITLE**: Adding a Contact Quick View to a Table

**INTRODUCTION**: Use the @Communication.Contact annotation to enable a contact quick view for a table column (available from list report and object page). Implementation requires two changes: (1) add a UI.LineItem entry for the entity displayed in the table (ProductType in the example) that references the contact annotation via a DataFieldForAnnotation Target (e.g. to_Supplier/@Communication.Contact), and (2) define the @Communication.Contact annotation on the related entity (SupplierType) mapping name, phone and email fields.

**TAGS**: fiori-elements-framework, annotations, UI.LineItem, Communication.Contact, Contact Quick View, ABAP CDS, CAP CDS, XML

**STEP**: 1 — Add UI.LineItem (XML Annotation)

**DESCRIPTION**: Insert this UI.LineItem annotation block under the ProductType entity annotation file (EDMX / annotation XML) or equivalent location. Ensure the DataFieldForAnnotation record uses Target AnnotationPath="to_Supplier/@Communication.Contact" to enable the contact quick view for the Supplier column.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.LineItem">
    <Collection>
        <Record Type="UI.DataFieldForAction">
            <PropertyValue Property="Label" String="Activate" />
            <PropertyValue Property="Action"
                           String="STTA_PROD_MAN.STTA_PROD_MAN_Entities/STTA_C_MP_ProductActivation"/>
            <PropertyValue Property="InvocationGrouping"
                           EnumMember="UI.OperationGroupingType/ChangeSet" />
        </Record>
        <Record Type="UI.DataField">
            <PropertyValue Property="Value" Path="ProductPictureURL" />
            <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High" />
        </Record>
        <Record Type="UI.DataField">
            <PropertyValue Property="Value" Path="ProductForEdit" />
            <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High" />
        </Record>
        <Record Type="UI.DataField">
            <PropertyValue Property="Value" Path="ProductCategory" />
            <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High" />
        </Record>
        <Record Type="UI.DataFieldWithIntentBasedNavigation">
            <PropertyValue Property="Label" String="Supplier (with IBN)" />
            <PropertyValue Property="Value" Path="Supplier" />
            <PropertyValue Property="SemanticObject" String="EPMProduct" />
            <PropertyValue Property="Action" String="manage" />
        </Record>
        <Record Type="UI.DataFieldForAnnotation">
            <PropertyValue Property="Label" String="{@i18n>Supplier}"/>
            <PropertyValue Property="Target"
                           AnnotationPath="to_Supplier/@Communication.Contact"/>
            <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High" />
        </Record>
        <Record Type="UI.DataField">
            <PropertyValue Property="Criticality"
                           Path="to_StockAvailability/StockAvailability" />
            <PropertyValue Property="Value"
                           Path="to_StockAvailability/StockAvailability" />
            <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High" />
        </Record>
        <Record Type="UI.DataFieldForAnnotation">
            <PropertyValue Property="Label" String="Rating" />
            <PropertyValue Property="Target" AnnotationPath="@UI.DataPoint#Rating" />
        </Record>
        <Record Type="UI.DataFieldForAnnotation">
            <PropertyValue Property="Label" String="Progress" />
            <PropertyValue Property="Criticality"
                           Path="to_StockAvailability/Quantity" />
            <PropertyValue Property="Target" AnnotationPath="@UI.DataPoint#Progress" />
        </Record>
        <Record Type="UI.DataField">
            <PropertyValue Property="Value" Path="Price" />
            <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High" />
        </Record>
        <Record Type="UI.DataFieldForAction">
            <PropertyValue Property="Label" String="Copy" />
            <PropertyValue Property="IconUrl" String="sap-icon://copy" />
            <PropertyValue Property="Action"
                           String="STTA_PROD_MAN.STTA_PROD_MAN_Entities/STTA_C_MP_ProductCopy" />
            <PropertyValue Property="Inline" Bool="true" />
            <PropertyValue Property="Determining" Bool="true" />
            <PropertyValue Property="InvocationGrouping"
                           EnumMember="UI.OperationGroupingType/Isolated" />
        </Record>
        <Record Type="UI.DataFieldForIntentBasedNavigation">
            <PropertyValue Property="Label" String="{@i18n>MANAGE_PRODUCTS_(ST)_2}" />
            <PropertyValue Property="SemanticObject" String="EPMProduct" />
            <PropertyValue Property="Action" String="manage_st" />
            <PropertyValue Property="Inline" Bool="false" />
            <PropertyValue Property="Determining" Bool="false" />
            <PropertyValue Property="RequiresContext" Bool="true" />
        </Record>
        <Record Type="UI.DataFieldForIntentBasedNavigation">
            <PropertyValue Property="Label" String="{@i18n>Inline_Nav_MasterDetail}" />
            <PropertyValue Property="SemanticObject" String="EPMProduct" />
            <PropertyValue Property="Action" String="manage" />
            <PropertyValue Property="Inline" Bool="true" />
            <PropertyValue Property="Determining" Bool="false" />
            <PropertyValue Property="RequiresContext" Bool="false" />
        </Record>
        <Record Type="UI.DataFieldForAnnotation">
            <PropertyValue Property="Label" String="Sales"/>
            <PropertyValue Property="Target" AnnotationPath="to_ProductSalesPrice/@UI.Chart#SalesPriceAreaChart"/>
        </Record>
        <Record Type="UI.DataFieldForAnnotation">
            <PropertyValue Property="Label" String="Revenue"/>
            <PropertyValue Property="Target" AnnotationPath="to_ProductSalesRevenue/@UI.Chart#GrossSalesRevenueBulletChart"/>
        </Record>
    </Collection>
</Annotation> 
```

**STEP**: 2 — Add UI.LineItem (ABAP CDS Annotation)

**DESCRIPTION**: If using ABAP CDS, add the following @UI.lineItem entries in the CDS view for ProductType. Ensure the entry that represents the supplier uses type #AS_CONTACT or references TO_SUPPLIER accordingly so the contact quick view is enabled.

**LANGUAGE**: ABAP CDS

**CODE**:
```
@UI.lineItem: [
  {
    label: 'Activate',
    dataAction: 'PUSHDOWN:STTA_C_MP_ProductActivation',
    invocationGrouping: #CHANGE_SET,
    type: #FOR_ACTION,
    position: 1 
  },
  {
    importance: #HIGH,
    value: 'PRODUCTPICTUREURL',
    type: #STANDARD,
    position: 2 
  },
  {
    importance: #HIGH,
    label: '{@i18n>@Supplier}',
    value: 'TO_SUPPLIER',
    type: #AS_CONTACT,
    position: 6 
  },
  {
    label: 'Rating',
    valueQualifier: 'Rating',
    type: #AS_DATAPOINT,
    position: 8 
  },
  {
    label: 'Progress',
    criticality: 'TO_STOCKAVAILABILITY/QUANTITY',
    valueQualifier: 'Progress',
    type: #AS_DATAPOINT,
    position: 9 
  },
  {
    label: 'Copy',
    iconUrl: 'sap-icon:,//copy'
    dataAction: 'PUSHDOWN:STTA_C_MP_ProductCopy',
    invocationGrouping: #ISOLATED,
    type: #FOR_ACTION,
    position: 11 
  },
  {
    label: '{@i18n>@MANAGE_PRODUCTS_(ST)_2}',
    semanticObjectAction: 'manage_st',
    requiresContext: true,
    type: #FOR_INTENT_BASED_NAVIGATION,
    position: 12 
  },
  {
    label: '{@i18n>@Inline_Nav_MasterDetail}',
    semanticObjectAction: 'manage',
    type: #FOR_INTENT_BASED_NAVIGATION,
    position: 13 
  },
  {
    label: 'Sales',
    valueQualifier: 'SalesPriceAreaChart',
    value: 'TO_PRODUCTSALESPRICE',
    type: #AS_CHART,
    position: 14 
  },
  {
    label: 'Revenue',
    valueQualifier: 'GrossSalesRevenueBulletChart',
    value: 'TO_PRODUCTSALESREVENUE',
    type: #AS_CHART,
    position: 15 
  }
]
PRODUCTPICTUREURL;

@UI.lineItem: [
  {
    importance: #HIGH,
    value: 'PRODUCTFOREDIT',
    type: #STANDARD,
    position: 3 
  }
]
PRODUCTFOREDIT;

@UI.lineItem: [
  {
    importance: #HIGH,
    value: 'PRODUCTCATEGORY',
    type: #STANDARD,
    position: 4 
  }
]
PRODUCTCATEGORY;

@UI.lineItem: [
  {
    label: 'Supplier (with IBN)',
    value: 'SUPPLIER',
    semanticObjectAction: 'manage',
    type: #WITH_INTENT_BASED_NAVIGATION,
    position: 5 
  }
]
SUPPLIER;

@UI.lineItem: [
  {
    importance: #HIGH,
    criticality: 'TO_STOCKAVAILABILITY/STOCKAVAILABILITY',
    value: 'TO_STOCKAVAILABILITY/STOCKAVAILABILITY',
    type: #STANDARD,
    position: 7 
  }
]
TO_STOCKAVAILABILITY/STOCKAVAILABILITY;

@UI.lineItem: [
  {
    importance: #HIGH,
    value: 'PRICE',
    type: #STANDARD,
    position: 10 
  }
]
PRICE;

@Consumption.semanticObject: 'EPMProduct'
SUPPLIER;
```

**STEP**: 3 — Add UI.LineItem (CAP CDS Annotation)

**DESCRIPTION**: If using CAP (CDS), add the following UI.LineItem array to the entity definition for ProductType. Note the DataFieldForAnnotation Target uses 'to_Supplier/@Communication.Contact' to reference the contact annotation defined on the supplier entity.

**LANGUAGE**: CAP CDS

**CODE**:
```
UI.LineItem : [
    {
        $Type : 'UI.DataFieldForAction',
        Label : 'Activate',
        Action : 'STTA_PROD_MAN.STTA_PROD_MAN_Entities/STTA_C_MP_ProductActivation',
        InvocationGrouping : #ChangeSet
    },
    {
        $Type : 'UI.DataField',
        Value : ProductPictureURL,
        ![@UI.Importance] : #High
    },
    {
        $Type : 'UI.DataField',
        Value : ProductForEdit,
        ![@UI.Importance] : #High
    },
    {
        $Type : 'UI.DataField',
        Value : ProductCategory,
        ![@UI.Importance] : #High
    },
    {
        $Type : 'UI.DataFieldWithIntentBasedNavigation',
        Label : 'Supplier (with IBN)',
        Value : Supplier,
        SemanticObject : 'EPMProduct',
        Action : 'manage'
    },
    {
        $Type : 'UI.DataFieldForAnnotation',
        Label : '{@i18n&gt;@Supplier}',
        Target : 'to_Supplier/@Communication.Contact',
        ![@UI.Importance] : #High
    },
    {
        $Type : 'UI.DataField',
        Criticality : to_StockAvailability.StockAvailability,
        Value : to_StockAvailability.StockAvailability,
        ![@UI.Importance] : #High
    },
    {
        $Type : 'UI.DataFieldForAnnotation',
        Label : 'Rating',
        Target : '@UI.DataPoint#Rating'
    },
    {
        $Type : 'UI.DataFieldForAnnotation',
        Label : 'Progress',
        Criticality : to_StockAvailability.Quantity,
        Target : '@UI.DataPoint#Progress'
    },
    {
        $Type : 'UI.DataField',
        Value : Price,
        ![@UI.Importance] : #High
    },
    {
        $Type : 'UI.DataFieldForAction',
        Label : 'Copy',
        IconUrl : 'sap-icon://copy',
        Action : 'STTA_PROD_MAN.STTA_PROD_MAN_Entities/STTA_C_MP_ProductCopy',
        Inline : true,
        Determining : true,
        InvocationGrouping : #Isolated
    },
    {
        $Type : 'UI.DataFieldForIntentBasedNavigation',
        Label : '{@i18n&gt;@MANAGE_PRODUCTS_(ST)_2}',
        SemanticObject : 'EPMProduct',
        Action : 'manage_st',
        Inline : false,
        Determining : false,
        RequiresContext : true
    },
    {
        $Type : 'UI.DataFieldForIntentBasedNavigation',
        Label : '{@i18n&gt;@Inline_Nav_MasterDetail}',
        SemanticObject : 'EPMProduct',
        Action : 'manage',
        Inline : true,
        Determining : false,
        RequiresContext : false
    },
    {
        $Type : 'UI.DataFieldForAnnotation',
        Label : 'Sales',
        Target : 'to_ProductSalesPrice/@UI.Chart#SalesPriceAreaChart'
    },
    {
        $Type : 'UI.DataFieldForAnnotation',
        Label : 'Revenue',
        Target : 'to_ProductSalesRevenue/@UI.Chart#GrossSalesRevenueBulletChart'
    }
]
```

**STEP**: 4 — Define Communication.Contact on SupplierType (XML Annotation)

**DESCRIPTION**: Add the Communication.Contact annotation block to the SupplierType entity annotation file (EDMX / annotation XML). Map fn, tel, and email to entity properties (CompanyName, FaxNumber, PhoneNumber, EmailAddress). The example below shows multiple tel/email entries and types.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="Communication.Contact">
    <Record>
        <PropertyValue Property="fn" Path="CompanyName" />
        <PropertyValue Property="tel">
            <Collection>
                <Record>
                    <PropertyValue Property="type"
                                   EnumMember="Communication.PhoneType/fax" />
                    <PropertyValue Property="uri" Path="FaxNumber" />
                </Record>
                <Record>
                    <PropertyValue Property="type"
                                   EnumMember="Communication.PhoneType/preferred Communication.PhoneType/work" />
                    <PropertyValue Property="uri" Path="PhoneNumber" />
                </Record>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="email">
            <Collection>
                <Record>
                    <PropertyValue Property="type"
                                   EnumMember="Communication.ContactInformationType/work Communication.ContactInformationType/pref" />
                    <PropertyValue Property="address" Path="EmailAddress" />
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

**STEP**: 5 — Define Communication.Contact (ABAP CDS / semantic mapping)

**DESCRIPTION**: For ABAP CDS, ensure the supplier CDS view marks the name, email and telephone fields with the appropriate Semantics annotations so the framework recognizes them as contact data. The sample below demonstrates @Semantics.name.fullName, @Semantics.eMail.address + type, and @Semantics.telephone.type annotations.

**LANGUAGE**: ABAP CDS

**CODE**:
```
define view VIEWNAME
{
  @Semantics.name.fullName: true
  CompanyName,

  @Semantics.eMail.address: true
  @Semantics.eMail.type:  [#WORK]
  EmailAddress,
   
  @Semantics.telephone.type:  [ #FAX ] 
  FaxNumber,
  
  @Semantics.telephone.type:  [ #WORK]
  PhoneNumber
}
```

**STEP**: 6 — Define Communication.Contact (CAP CDS)

**DESCRIPTION**: For CAP CDS, declare a Communication.Contact structured annotation on the supplier entity mapping the name, phone and email properties. The following CAP CDS object shows mapping for fn, tel (multiple entries with types), and email.

**LANGUAGE**: CAP CDS

**CODE**:
```
Communication.Contact : {
    fn : CompanyName,
    tel : [
        {
            type : #fax,
            uri : FaxNumber
        },
        {
            type : [ #preferred, #work ],
            uri : PhoneNumber
        },
    ],
    email : [
        {
            type : [ #work, #pref ],
            address : EmailAddress
        }
    ]
}
```

--------------------------------

**TITLE**: Add Custom Message Strip to List Report, Analytical List Page and Object Page Tables (OData V2 & V4)

**INTRODUCTION**: Provide actionable instructions and code examples to display custom message strips above tables in SAP Fiori Elements: for List Report, Analytical List Page and Object Page tables. Covers both OData V2 and OData V4 scenarios, tab-scoped messages, controller hooks, required table IDs, optional parameters and sample code to implement.

**TAGS**: fiori-elements-framework, OData V2, OData V4, extensionAPI, setCustomMessage, addMessage, message-strip, object-page, list-report, analytical-list-page

**STEP**: 1 — OData V2: Add a custom message to List Report / Analytical List Page tables

**DESCRIPTION**: In the List Report or Analytical List Page controller extension, call this.extensionAPI.setCustomMessage inside the onBeforeRebindTableExtension hook to display a custom message strip above the table. Provide a message object with `message` and `type`. Place code in your extension controller file (example file names shown).

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// ListReportExtension.controller.js / AnaliticalListPageExt.controller.js
onBeforeRebindTableExtension: function () {
          
  var oMessage = {
                message: "Custom message on table",
                type: sap.ui.core.MessageType.Success
            };

   this.extensionAPI.setCustomMessage(oMessage);
  }
```

**STEP**: 2 — OData V2: Display messages for specific tabs or all tabs

**DESCRIPTION**: When your page contains multiple tabs, pass a tab key (string) or an array of tab keys as the second argument to setCustomMessage to show the message only for targeted tabs. Omitting the tabKey displays the message on all tabs.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
this.extensionAPI.setCustomMessage(oMessage, "1");         	        // Displays message only on 1st tab

			or

this.extensionAPI.setCustomMessage(oMessage, ["1","2"]);        // Displays message only on 1st and 2nd tab

			or

this.extensionAPI.setCustomMessage(oMessage); 		        // Displays message on all the tabs
```

**STEP**: 3 — OData V2: Multiple tab messages on Object Page (example with explicit table IDs)

**DESCRIPTION**: For object pages with multiple tabs, call setCustomMessage for each tab. When targeting object page tables, include the full table ID as the second parameter and the tab key (if needed) as the third parameter. Use this pattern in onBeforeRebindTableExtension.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
onBeforeRebindTableExtension: function () {
            if (this.extensionAPI.setCustomMessage) {
                var oMsg1 = {
                    message: "Custom message on object page tab 1",
                    type: sap.ui.core.MessageType.Success
                };
                var oMsg2 = {
                    message: "Custom message on object page tab 2",
                    type: sap.ui.core.MessageType.Error
                };
this.extensionAPI.setCustomMessage(oMsg1,"STTASOMVLR::sap.suite.ui.generic.template.ObjectPage.view.Details::C_STTA_SalesOrder_WD_20--SalesOrderItemsID::Table", "_tab1");    //Displays message on 1st tab
                    this.extensionAPI.setCustomMessage(oMsg2,"STTASOMVLR::sap.suite.ui.generic.template.ObjectPage.view.Details::C_STTA_SalesOrder_WD_20--SalesOrderItemsID::Table", "_tab2");       //Displays message on 2nd tab
}
}
```

**STEP**: 4 — OData V2: Add custom message to object page table (single-table example)

**DESCRIPTION**: To add a custom message for an object page table, specify the exact table ID when calling setCustomMessage inside onBeforeRebindTableExtension. Use the controller file ObjectPageExtension.controller.js.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// ObjectPageExtension.controller.js
onBeforeRebindTableExtension: function () {
            if (this.extensionAPI.setCustomMessage) {
                var oMsg = {
                    message: "Custom message on object page tab 1",
                    type: sap.ui.core.MessageType.Success
                };
this.extensionAPI.setCustomMessage(oMsg,"STTASOMVLR::sap.suite.ui.generic.template.ObjectPage.view.Details::C_STTA_SalesOrder_WD_20--SalesOrderItemsID::Table");           
            }
        }
```

**STEP**: 5 — OData V2: Supported message types and API parameters

**DESCRIPTION**: The setCustomMessage API accepts:
- Message Object (optional): { message: string, type: sap.ui.core.MessageType.* }
- Tab Key (optional): string or array of strings identifying tabs OR the table ID for object page followed by tab key

Supported message types:
- sap.ui.core.MessageType.Success
- sap.ui.core.MessageType.Warning
- sap.ui.core.MessageType.Error
- sap.ui.core.MessageType.Information

Restriction: Do not use this extension API with multiple view scenarios. Not supported for smart charts and smart lists.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "messageObject": {
    "message": "string",
    "type": "sap.ui.core.MessageType.Success | Warning | Error | Information"
  },
  "tabKey": "string | [string]",
  "usageNote": "For object page table: pass tableId as second param, optionally a tab key as third param"
}
```

**STEP**: 6 — OData V4: Add custom message to List Report / Analytical List Page (ListReport extension)

**DESCRIPTION**: In OData V4 ListReport controller extension, call extensionAPI.setCustomMessage (obtained from this.base.getExtensionAPI()) in hooks like routing.onAfterBinding. The function supports three optional parameters: message object, tabKey, and an onClose callback. Omitting the message object removes existing messages. Use the sample routing:onAfterBinding code below.

**LANGUAGE**: JavaScript

**CODE**:
```xml
routing: {
    onAfterBinding: function (oBindingContext, mParameters) {
        var oMessage = {
                message: "onAfterBinding: Context bound. Have a nice day",
                type: sap.ui.core.MessageType.Information
            },
            extensionAPI = this.base.getExtensionAPI();

        function fnOnClose() {
            MessageToast.show("Custom message closed");
        }

        extensionAPI.setCustomMessage(oMessage, null, fnOnClose);

    }
}
```

**STEP**: 7 — OData V4: Add custom message to Object Page table (Table building block)

**DESCRIPTION**: For OData V4 object pages, use the Table building block API addMessage to add messages to tables. Prefer the Table building block's public APIs for object page tables. See the SAP Fiori Development portal for live examples and full Table building block API documentation.

**LANGUAGE**: N/A

**CODE**:
```text
Reference: Building Blocks - Table - Extensions - Table APIs
https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/buildingBlocks/table/tablePublicAPIs
```

**STEP**: 8 — Additional notes and links

**DESCRIPTION**: Useful references for extending list reports, analytical list pages and object pages. Follow the recommended extension points and avoid unsupported combinations.

**LANGUAGE**: N/A

**CODE**:
```text
Related:
- Extending List Reports and Object Pages Using App Extensions:
  extending-list-reports-and-object-pages-using-app-extensions-a892eb8.md

- Configuring Analytical List Page App Extensions:
  configuring-analytical-list-page-app-extensions-9504fb4.md
```
--------------------------------

**TITLE**: Adding a Custom Section to an Object Page (SAP Fiori Elements — OData V2 & V4)

**INTRODUCTION**: Step-by-step, code-focused instructions to add custom sections (facets) to an Object Page in SAP Fiori Elements applications. Covers both OData V2 (viewExtension method) and OData V4 (template method), including fragment creation, i18n entries, manifest changes, and merging section titles with control titles using the extensionAPI. Keep app-extension usage constrained to the official extensionAPI.

**TAGS**: fiori-elements-framework, sap-ui5, object-page, custom-section, manifest.json, extensionAPI, odata-v2, odata-v4, i18n, fragment, viewExtension, template

STEP: Add a Custom Section Using SAP Fiori Tools (quick GUI flow)
DESCRIPTION: Use the SAP Fiori Tools Page Map / Page Editor to add a custom section quickly (GUI). This is the shortest path if you prefer tooling over manual file edits.
LANGUAGE: N/A
CODE:
```text
1. Launch the Page Map (e.g., right-click project folder -> Show Page Map).
2. Launch Page Editor for your Object Page (click the Edit/pencil icon next to Object Page).
3. Click the Add icon next to Sections.
4. Click Add Custom Section.
5. Provide a unique Title.
6. Provide a unique Fragment Name.
7. Select an Anchor Section.
8. Click Add.
9. Preview the app (see Previewing an Application).
```

STEP: Important Caution About App Extensions
DESCRIPTION: Use app extensions only when necessary. Integrate only via the official SAP Fiori elements extensionAPI. Do not manipulate internal framework controls, properties, or models directly from extensions.
LANGUAGE: N/A
CODE:
```text
Caution:
- Use app extensions only if manifest settings or annotations cannot satisfy requirements.
- Use only the extensionAPI of SAP Fiori elements.
- After creating an app extension, the app is responsible for display and system behavior.
- Don't access/manipulate framework internals (controls, properties, models).
```

STEP: OData V2 — Step 1: Create Fragment for the New Facet
DESCRIPTION: Create an XML view fragment under webapp/ext/view. Define the fragment (example shows a TextArea bound to a navigation property). File path and name: webapp/ext/view/DescriptionBreakout.view.xml.
LANGUAGE: XML
CODE:
```xml
<mvc:View xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m">
  <VBox>
    <TextArea
      id="DescriptionTextArea"
      value="{to_ProductTextInOriginalLang/Description}"
      width="30%"
      editable="false"
    />
  </VBox>
</mvc:View>
```

STEP: OData V2 — Step 2: Add Section Title to the i18n File
DESCRIPTION: Add a translatable title entry to your resource bundle so the section title is localized. Typical i18n file path: webapp/i18n/i18n.properties.
LANGUAGE: TEXT
CODE:
```text
#This is the resource bundle for Manage Products
					
# XTIT: Title of a facet within an object page if not needed in local/annotations.xml
ProductDescription=Product Description		
```

STEP: OData V2 — Step 3: Add Extension Definition to manifest.json using viewExtension
DESCRIPTION: Add a view extension under "extends" -> "extensions" -> "sap.ui.viewExtensions" to insert the custom view into the Object Page details view. Example places the custom facet AFTER the GeneralInformation facet. Path: webapp/manifest.json (fragment).
LANGUAGE: JSON
CODE:
```json
"extends": {
  "extensions": {
    "sap.ui.viewExtensions": {
      "sap.suite.ui.generic.template.ObjectPage.view.Details": {
        "AfterFacet|SEPMRA_C_PD_Product|GeneralInformation": {
          "className": "sap.ui.core.mvc.View",
          "viewName": "ManageProducts.ext.view.DescriptionBreakout",
          "type": "XML",
          "sap.ui.generic.app": {
            "title": "{{ProductDescription}}"
          }
        }
      }
    }
  }
}
```

STEP: OData V2 — Example: Add Multiple Sections with Keys
DESCRIPTION: To add multiple instances or control ordering, include a key in the extension name and in sap.ui.generic.app.key when required. Example shows multiple BeforeFacet and AfterFacet entries and how to include a numeric key.
LANGUAGE: JSON
CODE:
```json
"extends": {
  "extensions": {
    "sap.ui.viewExtensions": {
      "sap.suite.ui.generic.template.ObjectPage.view.Details": {
        "BeforeFacet|SEPMRA_C_PD_Product|to_ProductText::com.sap.vocabularies.UI.v1.LineItem": {
          "className": "sap.ui.core.mvc.View",
          "viewName": "ManageProducts.ext.view.BeforeFacetTest",
          "type": "XML",
          "sap.ui.generic.app": {
            "title": "Facet Breakout before Product Text LineItem"
          }
        },
        "BeforeFacet|SEPMRA_C_PD_Product|to_ProductText::com.sap.vocabularies.UI.v1.LineItem|1": {
          "className": "sap.ui.core.mvc.View",
          "viewName": "ManageProducts.ext.view.BeforeFacetTestNew",
          "type": "XML",
          "sap.ui.generic.app": {
            "title": "Facet Breakout before Product Text LineItem",
            "key": "1"
          }
        },
        "AfterFacet|SEPMRA_C_PD_Product|to_Supplier::com.sap.vocabularies.UI.v1.Identification": {
          "className": "sap.ui.core.mvc.View",
          "viewName": "ManageProducts.ext.view.AfterFacetTest",
          "type": "XML",
          "sap.ui.generic.app": {
            "title": "Facet Breakout after Supplier Identification"
          }
        },
        "AfterFacet|SEPMRA_C_PD_Product|to_Supplier::com.sap.vocabularies.UI.v1.Identification|1": {
          "className": "sap.ui.core.mvc.View",
          "viewName": "ManageProducts.ext.view.AfterFacetTest",
          "type": "XML",
          "sap.ui.generic.app": {
            "title": "Facet Breakout after Supplier Identification",
            "key": 1
          }
        }
      }
    }
  }
}
```

STEP: OData V2 — Step 4: Set Section Title to Control within Custom Section (setAsTitleOwner)
DESCRIPTION: If you want the control title to replace the section title, call the extensionAPI.setAsTitleOwner from the control's initialise event. Example shows using a SmartTable initialise event and controller implementation using extensionAPI.
LANGUAGE: XML
CODE:
```xml
<st:SmartTable id="SalesPriceFacetID" initialise="SalesPriceInitialise"/>
```
LANGUAGE: JavaScript
CODE:
```javascript
SalesPriceInitialise: function(oEvent) {
	var oSmartTable = oEvent.getSource();
	var oExtensionAPI = extensionAPI.getExtensionAPI(oSmartTable);
	oExtensionAPI.setAsTitleOwner(oSmartTable);
}
```

STEP: OData V4 — Step 1: Create Fragment for the New Section
DESCRIPTION: Create an XML fragment under webapp/ext (file webapp/ext/CustomSection.fragment.xml). Define core:FragmentDefinition and include controls/layouts. If a custom handler is required, define it via core:require and implement the handler module.
LANGUAGE: XML
CODE:
```xml
<core:FragmentDefinition
  xmlns:core="sap.ui.core"
  xmlns="sap.m"
  xmlns:l="sap.ui.layout">

  <l:VerticalLayout core:require="{handler: 'SalesOrder/ext/CustomColumn'}">
    <Button text="Custom Button" press="handler.buttonPressed" />
  </l:VerticalLayout>

</core:FragmentDefinition>
```
LANGUAGE: JavaScript
CODE:
```javascript
sap.ui.define(["sap/m/MessageBox"], function (MessageBox) {
  "use strict";

  return {
    buttonPressed: function () {
      MessageBox.show("Button pressed!");
    }
  };
});
```

STEP: OData V4 — Step 2: Add Section Title to the i18n File
DESCRIPTION: Add a translatable title entry to your i18n file (e.g., webapp/i18n/i18n.properties).
LANGUAGE: TEXT
CODE:
```text
#This is the resource bundle
					
# XTIT: Title of a facet within an object page
customSection=Custom Section		
```

STEP: OData V4 — Step 3: Add Extension Definition to manifest.json using template
DESCRIPTION: Use the routing.targets -> options -> settings -> content -> body -> sections structure to add custom sections. Define template, title (use i18n binding), and position (placement + anchor). Multiple subsections require unique IDs (keys) which become control IDs at runtime. Example fragment for SalesOrderManageObjectPage.
LANGUAGE: JSON
CODE:
```json
{
   "sap.ui5": {
      "routing": {
         "targets": {
            "SalesOrderManageObjectPage": {
               "options": {
                  "settings": {
                     "content": {
                        "body": {
                           "sections": {
                              "customSection": {
                                 "template": "SalesOrder.custom.CustomSection",
                                 "title": "{i18n>customSection}",
                                 "position": {
                                    "placement": "Before",
                                    "anchor": "SalesOrderItems"
                                 }
                              },
                              "anotherCustomSection": {
                                 "title": "Multiple Subsections",
                                 "subSections": {
                                     "firstSubSectionKey": {
                                         "title": "First Subsection",
                                         "template": "SalesOrder.custom.CustomFieldForm"
                                     },
                                     "secondSubSectionKey": {
                                         "title": "Second Subsection",
                                         "template": "SalesOrder.custom.CustomFieldForm2",
                                         "position": {
                                             "placement": "After",
                                             "anchor": "firstSubSectionKey"
                                         }
                                     }
                                 }
                                 "position": {
                                    "placement": "After",
                                    "anchor": "customSection"
                                 }
                              }
                           }
                        }
                     }
                  }
               }
            }
         }
      }
   }
}
```

STEP: OData V4 — Tip: Add Multiple Sections
DESCRIPTION: Each custom section entry in "sections" needs an ID (key). Those keys map to control IDs within the application. Provide title, template name, and position to control placement and ordering.

STEP: OData V4 — Step 4: Merge Section Title with Control Title (setAsSectionTitleOwner)
DESCRIPTION: For Page layout mode, to merge the section title with a control title when the section contains a building block within a layout, add onSectionLoaded in manifest to call a controller method that invokes setAsSectionTitleOwner. Ensure you pass the correct control reference.
LANGUAGE: JSON
CODE:
```json
"routing": {
  "targets": {
    "SalesOrderManageObjectPage": {
      "options": {
        "settings": {
          "sectionLayout": "Page",
          "content": {
            "body": {
              "sections": {
                "customSectionTableHBox": {
                  "template": "SalesOrder.custom.CustomSectionBuildingBlockTableHBox",
                  "title": "HBox Table",
                  "onSectionLoaded": "SalesOrder.custom.CustomSection.callShowSectionTitle"
                }
              }
            }
          }
        }
      }
    }
  }
}
```
LANGUAGE: JavaScript
CODE:
```javascript
callShowSectionTitle(section){
   const control = section.getSubSections()[0].getBlocks()[0].getContent().getItems()[0];
   this.setAsSectionTitleOwner(control);
}
```

STEP: Results / Verification
DESCRIPTION: After implementing the fragment, i18n, and manifest changes (and optional title-owner logic), build and run the app. The Object Page should display the new custom section in the specified position and with localized title behavior. Use the Fiori preview or deploy to test.


--------------------------------

**TITLE**: Add Micro Charts to Table Columns (SAP Fiori Elements)

**INTRODUCTION**: This guide shows how to add micro charts (area, bullet, etc.) into a responsive table column using UI.LineItem and UI.DataFieldForAnnotation. Includes XML, ABAP CDS, CAP CDS, and manifest.json configuration examples, plus DataPoint, Chart, and PresentationVariant annotations required to render and sort micro charts inside table columns.

**TAGS**: fiori-elements, micro-chart, responsive-table, UI.LineItem, UI.Chart, UI.DataPoint, CDS, CAP, ABAP, manifest.json

STEP: Add a micro chart to a table column using UI.LineItem and UI.DataFieldForAnnotation

DESCRIPTION: Include a DataFieldForAnnotation entry in the UI.LineItem collection. The DataFieldForAnnotation.Target points to a UI.Chart qualifier or Chart annotation. Use Label for the table column header text. Example includes XML annotation and CAP CDS annotation versions.

LANGUAGE: XML
CODE:
```xml
<Annotations Target="STTA_PROD_MAN.STTA_C_MP_ProductType">
  <Annotation Term="UI.LineItem">
    <Collection>
      <Record Type="UI.DataFieldForAction">
        <PropertyValue Property="Label" String="Copy with new Supplier"/>
        <PropertyValue Property="Action" String="STTA_PROD_MAN.STTA_PROD_MAN_Entities/STTA_C_MP_ProductCopywithparams"/>
        <Annotation Term="UI.OperationGrouping" EnumMember="UI.OperationGroupingType/Isolated"/>
      </Record>
      <Record Type="UI.DataFieldForAction">
        <PropertyValue Property="Label" String="Activate"/>
        <PropertyValue Property="Action" String="STTA_PROD_MAN.STTA_PROD_MAN_Entities/STTA_C_MP_ProductActivation"/>
        <PropertyValue Property="Determining" Bool="true"/>
        <Annotation Term="UI.OperationGrouping" EnumMember="UI.OperationGroupingType/ChangeSet"/>
      </Record>
      <Record Type="UI.DataField">
        <PropertyValue Property="Value" Path="Product"/>
        <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
      </Record>
      <Record Type="UI.DataField">
        <PropertyValue Property="Value" Path="ProductCategory"/>
        <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
      </Record>
      <Record Type="UI.DataField">
        <PropertyValue Property="Value" Path="to_Supplier/CompanyName"/>
        <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
      </Record>
      <Record Type="UI.DataField">
        <PropertyValue Property="Criticality" Path="to_StockAvailability/StockAvailability"/>
        <PropertyValue Property="Value" Path="to_StockAvailability/StockAvailability"/>
        <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
      </Record>
      <Record Type="UI.DataField">
        <PropertyValue Property="Value" Path="Price"/>
        <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
      </Record>
      <Record Type="UI.DataFieldForAction">
        <PropertyValue Property="Label" String="Copy"/>
        <PropertyValue Property="IconUrl" String="sap-icon://copy"/>
        <PropertyValue Property="Action" String="STTA_PROD_MAN.STTA_PROD_MAN_Entities/STTA_C_MP_ProductCopy"/>
        <PropertyValue Property="Inline" Bool="true"/>
        <PropertyValue Property="Determining" Bool="true"/>
        ABAP CDS
                    Annotation
<<Annotation Term="UI.OperationGrouping" EnumMember="UI.OperationGroupingType/Isolated"/>Annotations Target="STTA_PROD_MAN.STTA_C_MP_ProductType">
      
  <</Record>Annotation Term="UI.LineItem">
      
    <<Record Type="UI.DataFieldForIntentBasedNavigation">Collection>
        
      <<PropertyValue Property="Label" String="Manage Products (ST)"/>Record Type="UI.DataFieldForAction">
        
        <<PropertyValue Property="SemanticObject" String="EPMProduct"/>PropertyValue Property="Label" String="Copy with new Supplier"/>
        
        <<PropertyValue Property="Action" String="manage_st"/>PropertyValue Property="Action" String="STTA_PROD_MAN.STTA_PROD_MAN_Entities/STTA_C_MP_ProductCopywithparams"/>
        
        <<PropertyValue Property="Inline" Bool="true"/>Annotation Term="UI.OperationGrouping" EnumMember="UI.OperationGroupingType/Isolated"/>
        
      <<PropertyValue Property="Determining" Bool="true"/>/Record>
      
      <</Record>Record Type="UI.DataFieldForAction">
      
        <<Record Type="UI.DataFieldForAnnotation">PropertyValue Property="Label" String="Activate"/>
        
        <<PropertyValue Property="Label" String="Rating"/>PropertyValue Property="Action" String="STTA_PROD_MAN.STTA_PROD_MAN_Entities/STTA_C_MP_ProductActivation"/>
        
        <<PropertyValue Property="Target" AnnotationPath="@UI.DataPoint#Rating"/>PropertyValue Property="Determining" Bool="true"/>
      
        <</Record>Annotation Term="UI.OperationGrouping" EnumMember="UI.OperationGroupingType/ChangeSet"/>
      
      <<Record Type="UI.DataFieldForAnnotation">/Record>
        
      <<PropertyValue Property="Label" String="Progress"/>Record Type="UI.DataField">
        
        <<PropertyValue Property="Criticality" Path="to_StockAvailability/Quantity"/>PropertyValue Property="Value" Path="Product"/>
        
        <<PropertyValue Property="Target" AnnotationPath="@UI.DataPoint#Progress"/>Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
      
      </Record>
      <</Record>Record Type="UI.DataFieldForAnnotation">
      
        <<Record Type="UI.DataField">PropertyValue Property="Label" String="Sales"/>
        
        <<PropertyValue Property="Value" Path="ProductCategory"/>PropertyValue Property="Target" AnnotationPath="to_ProductSalesPrice/@UI.Chart#AreaChartQualifier"/>
        
      <<Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>/Record>
      
      <</Record>Record Type="UI.DataFieldForAnnotation">
      
        <<Record Type="UI.DataField">PropertyValue Property="Label" String="Revenue"/>
        
        <<PropertyValue Property="Target" AnnotationPath="to_ProductSalesRevenue/@UI.Chart#BulletChartQualifier"/>PropertyValue Property="Value" Path="to_Supplier/CompanyName"/>
      
        <</Record>Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
    
      <</Collection>/Record>
  
      <</AnRecord Type="UI.DataField">notation>
        
<<PropertyValue Property="Criticality" Path="to_StockAvailability/StockAvailability"/>/Annotations>
        
```

LANGUAGE: CAP CDS
CODE:
```c
@Consumption.semanticObject: 'EPMProduct'
annotate view STTA_C_MP_PRODUCTTYPE with {
@UI.lineItem: [
  {
    label: 'Copy with new Supplier',
    dataAction: 'PUSHDOWN:STTA_C_MP_ProductCopywithparams',
    type: #FOR_ACTION,
    position: 10 
  },
  {
    label: 'Activate',
    dataAction: 'PUSHDOWN:STTA_C_MP_ProductActivation',
    type: #FOR_ACTION,
    position: 20 
  },
  {
    label: 'Copy',
    iconUrl: 'sap-icon:,//copy'
    dataAction: 'PUSHDOWN:STTA_C_MP_ProductCopy',
    type: #FOR_ACTION,
    position: 80
  },
  {
    label: 'Manage Products (ST)',
    semanticObjectAction: 'manage_st',
    type: #FOR_INTENT_BASED_NAVIGATION,
    position: 90 
  },
  {
    label: 'Rating',
    valueQualifier: 'Rating',
    type: #AS_DATAPOINT,
    position: 100 
  },
  {
    label: 'Progress',
    criticality: 'TO_STOCKAVAILABILITY/QUANTITY',
    valueQualifier: 'Progress',
    type: #AS_DATAPOINT,
    position: 110 
  },
  {
    label: 'Sales',
    valueQualifier: 'AreaChartQualifier',
    value: '_PRODUCTSALESPRICE',
    type: #AS_CHART,
    position: 120 
  },
  {
    label: 'Revenue',
    valueQualifier: 'BulletChartQualifier',
    value: '_PRODUCTSALESREVENUE',
    type: #AS_CHART,
    position: 130 
  },
  {
    importance: #HIGH,
    position: 30 
  }
]
product;

@UI.lineItem: [
  {
    importance: #HIGH,
    position: 40 
  }
]
productcategory;

@UI.lineItem: [
  {
    importance: #HIGH,
    value: '_SUPPLIER.COMPANYNAME',
    type: #STANDARD,
    position: 50
  }
]
_supplier;

@UI.lineItem: [
  {
    importance: #HIGH,
    criticality: '_STOCKAVAILABILITY.STOCKAVAILABILITY',
    value: '_STOCKAVAILABILITY.STOCKAVAILABILITY',
    type: #STANDARD,
    position: 60 
  }
]
_stockavailability;

@UI.lineItem: [
  {
    importance: #HIGH,UI.Chart Annotations
]
price;
}
```

STEP: Define an Area micro chart (XML)

DESCRIPTION: Annotate a UI.Chart with ChartType = Area; set dimensions, measures, and measureAttributes referencing a UI.DataPoint via AnnotationPath.

LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.Chart" Qualifier="AreaChartQualifier">
    <Record Type="UI.ChartDefinitionType">
        <PropertyValue Property="Title" String="Sales Price" />
        <PropertyValue Property="Description" String="Area Micro Chart" />
        <PropertyValue Property="ChartType" EnumMember="UI.ChartType/Area" />
        <PropertyValue Property="Dimensions">
            <Collection>
                <PropertyPath>PriceDay</PropertyPath>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="Measures">
            <Collection>
                <PropertyPath>AreaChartPrice</PropertyPath>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="MeasureAttributes">
            <Collection>
                <Record Type="UI.ChartMeasureAttributeType">
                    <PropertyValue Property="Measure" PropertyPath="AreaChartPrice" />
                    <PropertyValue Property="Role" EnumMember="UI.ChartMeasureRoleType/Axis1" />
                    <PropertyValue Property="DataPoint" AnnotationPath="@UI.DataPoint#AreaChartPrice" />
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

STEP: Define an Area micro chart (ABAP CDS)

DESCRIPTION: ABAP CDS representation of the Area chart qualifier to be used as a micro chart. Use qualifier 'AreaChartQualifier'.

LANGUAGE: ABAP CDS
CODE:
```abap
@UI.Chart: [
  {
    title: 'Sales Price',
    description: 'Area Micro Chart',
    chartType: #AREA,
    dimensions: [
      'PRICEDAY'
    ],
    measures: [
      'AREACHARTPRICE'
    ],
    measureAttributes: [
      {
        measure: 'AreaChartPrice',
        role: #AXIS_1,
        asDataPoint: true
      }
    ],
    qualifier: 'AreaChartQualifier'
  }
]
annotate view ITEM with {

}
```

STEP: Define a Bullet micro chart (XML)

DESCRIPTION: Annotate a UI.Chart with ChartType = Bullet; set measures and measureAttributes referencing a UI.DataPoint via AnnotationPath.

LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.Chart" Qualifier="BulletChartQualifier">
    <Record Type="UI.ChartDefinitionType">
        <PropertyValue Property="Title" String="Sales Revenue" />
        <PropertyValue Property="Description" String="Bullet Micro Chart" />
        <PropertyValue Property="ChartType" EnumMember="UI.ChartType/Bullet" />
        <PropertyValue Property="Measures">
            <Collection>
                <PropertyPath>BulletChartRevenue</PropertyPath>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="MeasureAttributes">
            <Collection>
                <Record Type="UI.ChartMeasureAttributeType">
                    <PropertyValue Property="Measure" PropertyPath="BulletChartRevenue" />
                    <PropertyValue Property="Role" EnumMember="UI.ChartMeasureRoleType/Axis1" />
                    <PropertyValue Property="DataPoint" AnnotationPath="@UI.DataPoint#BulletChartRevenue" />
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

STEP: Define a Bullet micro chart (ABAP CDS)

DESCRIPTION: ABAP CDS representation for the Bullet micro chart qualifier.

LANGUAGE: ABAP CDS
CODE:
```abap
@UI.Chart: [
  {
    title: 'Sales Revenue',
    description: 'Bullet Micro Chart',
    chartType: #BULLET,
    measures: [
      'BULLETCHARTREVENUE'
    ],
    measureAttributes: [
      {
        measure: 'BulletChartRevenue',
        role: #AXIS_1,
        asDataPoint: true
      }
    ],
    qualifier: 'BulletChartQualifier'
  }
]
annotate view ITEM with {

}
```

STEP: Define UI.DataPoint for Area micro chart (XML)

DESCRIPTION: Define the DataPoint referenced from Chart.MeasureAttributes.DataPoint. Include Value, TargetValue, and CriticalityCalculation to drive SmartMicroChart criticality behavior.

LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.DataPoint" Qualifier="AreaChartPrice">
    <Record>
        <PropertyValue Property="Title" String="Sales Price" />
        <PropertyValue Property="Value" Path="AreaChartPrice" />
        <PropertyValue Property="TargetValue" Path="TargetPrice" />
        <PropertyValue Property="CriticalityCalculation">
            <Record>
                <PropertyValue Property="ImprovementDirection" EnumMember="UI.ImprovementDirectionType/Target" />
                <PropertyValue Property="DeviationRangeHighValue" Path="DeviationUpperBoundPrice" />
                <PropertyValue Property="DeviationRangeLowValue" Path="DeviationLowerBoundPrice" />
                <PropertyValue Property="ToleranceRangeHighValue" Path="ToleranceUpperBoundPrice" />
                <PropertyValue Property="ToleranceRangeLowValue" Path="ToleranceLowerBoundPrice" />
            </Record>
        </PropertyValue>
    </Record>
</Annotation>
```

STEP: Define UI.DataPoint for Area micro chart (ABAP CDS)

DESCRIPTION: ABAP CDS DataPoint with criticalityCalculation for Area micro chart mapping.

LANGUAGE: ABAP CDS
CODE:
```abap
@UI.dataPoint: {
  title: 'Sales Price',
  targetValueElement: 'TargetPrice',
  criticalityCalculation: {
    improvementDirection: #TARGET,
    deviationRangeHighValueElement: 'DeviationUpperBoundPrice',
    deviationRangeLowValueElement: 'DeviationLowerBoundPrice',
    toleranceRangeHighValueElement: 'ToleranceUpperBoundPrice',
    toleranceRangeLowValueElement: 'ToleranceLowerBoundPrice'
  }
}
AreaChartPrice;
```

STEP: Define UI.DataPoint for Bullet micro chart (XML)

DESCRIPTION: Define DataPoint with Value, TargetValue, ForecastValue, Min/Max, and Criticality used by SmartMicroChart.

LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.DataPoint" Qualifier="BulletChartRevenue">
    <Record>
        <PropertyValue Property="Title" String="Sales Revenue" />
        <PropertyValue Property="Value" Path="BulletChartRevenue" />
        <PropertyValue Property="TargetValue" Path="TargetRevenue" />
        <PropertyValue Property="ForecastValue" Path="ForecastRevenue" />
        <PropertyValue Property="MinimumValue" Decimal="100" />
        <PropertyValue Property="MaximumValue" Decimal="300" />
        <PropertyValue Property="Criticality" Path="Criticality" />
    </Record>
</Annotation>
```

STEP: Define UI.DataPoint for Bullet micro chart (ABAP CDS)

DESCRIPTION: ABAP CDS DataPoint for Bullet micro chart.

LANGUAGE: ABAP CDS
CODE:
```abap
@UI.dataPoint: {
  title: 'Sales Revenue',
  targetValueElement: 'TargetRevenue',
  forecastValue: 'ForecastRevenue',
  minimumValue: 100,
  maximumValue: 300,
  criticality: 'Criticality'
}
BulletChartRevenue;
```

STEP: CDS annotation definitions for UI.Chart (reference)

DESCRIPTION: Use this CDS structure reference when authoring Chart annotations in CDS. Also includes sample @UI.chart usage for Area and Bullet micro charts.

LANGUAGE: CDS
CODE:
```
chart : array of
{
    qualifier : String(120);
    @LanguageDependency.maxLength : 40
    title : String(60);
    @LanguageDependency.maxLength : 80
    description : String(120);
    chartType : String enum
    {
       COLUMN;
       COLUMN_STACKED;
       COLUMN_STACKED_100;
       COLUMN_DUAL;
       COLUMN_STACKED_DUAL;
       COLUMN_STACKED_DUAL_100;
       BAR;
       BAR_STACKED;
       BAR_STACKED_100;
       BAR_DUAL;
       BAR_STACKED_DUAL;
       BAR_STACKED_DUAL_100;
       AREA;
       AREA_STACKED;
       AREA_STACKED_100;
       HORIZONTAL_AREA;
       HORIZONTAL_AREA_STACKED;
       HORIZONTAL_AREA_STACKED_100;
       LINE;
       LINE_DUAL;
       COMBINATION;
       COMBINATION_STACKED;
       COMBINATION_STACKED_DUAL;
       HORIZONTAL_COMBINATION_STACKED;
       HORIZONTAL_COMBINATION_STACKED_DUAL;
       PIE;
       DONUT;
       SCATTER;
       BUBBLE;
       RADAR;
       HEAT_MAP;
       TREE_MAP;
       WATERFALL;
       BULLET;
       VERTICAL_BULLET;
    };
    dimensions : array of elementRef;
    measures : array of elementRef;
    dimensionAttributes : array of
    {
       dimension : elementRef;
       role : String(10) enum
       {
           CATEGORY;
           SERIES;
       };
    };
    measureAttributes : array of
    {
       measure : elementRef;
       role : String(10) enum
       {
           AXIS_1;
           AXIS_2;
           AXIS_3;
       };
       asDataPoint : Boolean default true;
    };
}
```

LANGUAGE: CDS
CODE:
```
@UI.chart:[{
  title: 'Sales Price',
  description: 'Area Micro Chart',
  chartType: #AREA,
  dimensions:['PriceDay'],
  measures:['AreaChartPrice'],
  measureAttributes: [
    { measure: 'AreaChartPrice', role: #AXIS_1, asDataPoint: true }
  ],
  qualifier: 'AreaChartQualifier'
}]
```

LANGUAGE: CDS
CODE:
```
@UI.chart:[{
  title:'Sales Revenue',
  description: 'Bullet Micro Chart',
  chartType: #BULLET,
  measures:['BulletChartRevenue'],
  measureAttributes: [
    { measure: 'BulletChartRevenue', role: #AXIS_1, asDataPoint: true }
  ],
  qualifier: 'BulletChartQualifier'
}]
```

STEP: CDS annotation definition for UI.DataPoint (reference)

DESCRIPTION: Use this CDS structure to define DataPoint properties such as targetValueElement, forecastValue, criticality, and criticalityCalculation.

LANGUAGE: CDS
CODE:
```
dataPoint
{
    @LanguageDependency.maxLength : 40
    title : String(60);
    @LanguageDependency.maxLength : 80
    description : String(120);
    @LanguageDependency.maxLength : 190
    longDescription : String(250);
    targetValue : DecimalFloat;
    targetValueElement : elementRef;
    forecastValue : elementRef;
    minimumValue : DecimalFloat;
    maximumValue : DecimalFloat;
    visualization : String enum
    {
        NUMBER;
        BULLET_CHART;
        DONUT;
        PROGRESS;
        RATING;
    };
    valueFormat
    {
        scaleFactor : DecimalFloat;
        numberOfFractionalDigits : Integer;
    };
    referencePeriod
    {
        @LanguageDependency.maxLength : 80
        description : String(120);
        start : elementRef;
        end : elementRef;
    };
    criticality : elementRef;
    criticalityCalculation
    {
        improvementDirection : String enum { MINIMIZE; TARGET; MAXIMIZE; };
        toleranceRangeLowValue : DecimalFloat;
        toleranceRangeLowValueElement : elementRef;
        toleranceRangeHighValue : DecimalFloat;
        toleranceRangeHighValueElement : elementRef;
        deviationRangeLowValue : DecimalFloat;
        deviationRangeLowValueElement : elementRef;
        deviationRangeHighValue : DecimalFloat;
        deviationRangeHighValueElement : elementRef;
    };
    trend : elementRef;
    trendCalculation
    {
        referenceValue : elementRef;
        isRelativeDifference : Boolean default false;
        upDifference : DecimalFloat;
        upDifferenceElement : elementRef;
        strongUpDifference : DecimalFloat;
        strongUpDifferenceElement : elementRef;
        downDifference : DecimalFloat;
        downDifferenceElement : elementRef;
        strongDownDifference : DecimalFloat;
        strongDownDifferenceElement : elementRef;
    };
    responsible : elementRef;
    responsibleName : String(120);
};
```

STEP: Use UI.DataFieldForAnnotation in UI.LineItem for OData V4 (XML)

DESCRIPTION: For OData V4, a DataFieldForAnnotation entry in LineItem should reference the Chart via Target AnnotationPath. This example links a chart qualifier via Target and sets the Label.

LANGUAGE: XML
CODE:
```xml
<Record Type="UI.DataFieldForAnnotation">
    <PropertyValue Property="Target" AnnotationPath="_CreditLimitDetails/@com.sap.vocabularies.UI.v1.Chart#RadialCriticalityPathHidden" />
    <PropertyValue Property="Label" String="Credit Limit Details" />
</Record>
```

LANGUAGE: ABAP CDS
CODE:
```
{
label: 'Credit Limit Details',
type: #AS_CHART, valueQualifier: 'RadialCriticalityPathHidden', value: '_ CreditLimitDetails'
}
```

LANGUAGE: CAP CDS
CODE:
```
{
            $Type             : 'UI.DataFieldForAnnotation',
            Target            : '_CreditLimitDetails/@com.sap.vocabularies.UI.v1.Chart#RadialCriticalityPathHidden',
            Label             : 'Credit Limit Details'
}
```

STEP: Configure micro chart size and label visibility in manifest.json

DESCRIPTION: Set microChartSize (default XS) and showMicroChartLabel (default false) under controlConfiguration -> @com.sap.vocabularies.UI.v1.LineItem -> columns -> DataFieldForAnnotation::_<ChartPath> for ResponsiveTable. Example sets size M and enables labels.

LANGUAGE: JSON
CODE:
```json
"options":{
    "settings":{
        "controlConfiguration": {
            "@com.sap.vocabularies.UI.v1.LineItem": {
                "actions":{},
                "tableSettings":{
                    "type": "ResponsiveTable"
                },
                "columns" : {
                        "DataFieldForAnnotation::_CreditLimitDetails::Chart::RadialCriticalityPathHidden ": {
                            "settings" : {
                                " microChartSize": "M",
                                " showMicroChartLabel ": true
                            }
                        }
                }
            }
        }
    }
}
```

STEP: Enable sorting of micro chart data using UI.PresentationVariant (XML)

DESCRIPTION: To sort micro chart data inside responsive tables, link UI.DataFieldForAnnotation.Target to a UI.PresentationVariant qualifier that contains SortOrder and Visualizations that reference the UI.Chart qualifier. Only SortOrder.SortOrderType is considered; other PresentationVariant properties are ignored for micro chart sorting.

LANGUAGE: XML
CODE:
```xml
<Annotations Target="com.c_salesordermanage_sd.SalesOrderItem">
<Annotation Term="UI.LineItem">
   <Collection>
      ………
      ………
      <Record Type="UI.DataFieldForAnnotation">
         <PropertyValue Property="Target" AnnotationPath=”_Item/@com.sap.vocabularies.UI.v1.PresentationVariant#AreaMaxPath” />
         <PropertyValue Property="Label" String="Credit Limit Details"/>
         <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/Low"/>
      </Record>
   </Collection>
</Annotation>

<Annotation Term="UI.PresentationVariant" Qualifier="AreaMaxPath">
   <Record Type="UI.PresentationVariantType">
      <PropertyValue Property="Visualizations">
         <Collection>
            <AnnotationPath>@UI.Chart#AreaMaxPath</AnnotationPath>
         </Collection>
      </PropertyValue>
      <PropertyValue Property="SortOrder">
        <Collection>
            <Record Type="Common.SortOrderType">
               <PropertyValue Property="Property" PropertyPath="NetAmount"/>
               <PropertyValue Property="Descending" Bool="true"/>
            </Record>
         </Collection>
      </PropertyValue>
   </Record>
</Annotation>

<Annotation Term="UI.Chart" Qualifier="AreaMaxPath">
   ………
   ………
</Annotation>
</Annotations>
```

LANGUAGE: CAP CDS
CODE:
```c
LineItem: [
      ………
      ………
      {
        $Type            : 'UI.DataFieldForAnnotation',
        Target           :'_Item/@com.sap.vocabularies.UI.v1.PresentationVariant#AreaMaxPath',
        Label            : 'Credit Limit Details',
        ![@UI.Importance]: #Low
      }
    ]
  },

annotate c_salesordermanage_sd.SalesOrderItem with @(UI: {
  PresentationVariant #AreaMaxPath: {
     Visualizations: ['@UI.Chart#AreaMaxPath'],
     SortOrder     : [{
        Property  : 'NetAmount',
        Descending: true
     }]
  },
  Chart #AreaMaxPath: {
     ………
     ………
  },
  ………
  ………
});
```

STEP: Notes and restrictions (quick reference)

DESCRIPTION: Keep these constraints in mind when implementing micro charts:
- Micro charts in table columns render as XS by default (unless overridden in manifest.json).
- Sorting/filtering: measures/dimensions inside micro charts cannot be sorted/filtered from column header; they are available via Settings -> Sorting and Filtering only if they are direct properties of the table entity.
- UI.Chart should not use navigation properties in the Chart term for templates — this is unsupported for micro charts in the template.
- SmartMicroChart uses UI.DataPoint Criticality and CriticalityCalculation; Title is required in UI.DataPoint though micro chart does not display it.
- A micro chart may not render if backend data retrieval fails or returns no data.
--------------------------------

**TITLE**: Add a Progress Indicator to a Table (Fiori Elements)

**INTRODUCTION**: This guide shows how to add a progress indicator visualization to a table in Fiori Elements using annotations. Examples cover XML annotations, ABAP CDS annotations, and CAP CDS annotations. Also includes how to change progress bar color using a criticality property.

**TAGS**: fiori-elements-framework, annotations, progress-indicator, UI.DataPoint, UI.LineItem, XML, CDS, CAP, ABAP

**STEP**: 1 — XML Annotation: Add a Progress DataPoint and Reference It from LineItem

**DESCRIPTION**: Define a UI.DataPoint annotation with a Qualifier (e.g., "Progress") that specifies Value, TargetValue, and Visualization set to UI.VisualizationType/Progress. Reference this DataPoint from UI.LineItem using AnnotationPath="@UI.DataPoint#<Qualifier>" (e.g., "@UI.DataPoint#Progress") by adding a UI.DataFieldForAnnotation record with Target pointing to the DataPoint qualifier.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="STTA_PROD_MAN.STTA_C_MP_ProductType">
    <Annotation Term="UI.DataPoint" Qualifier="Progress">
        <Record>
            <PropertyValue Property="Value" Path="to_StockAvailability/Quantity" />
            <PropertyValue Property="TargetValue" Decimal="100" />
            <PropertyValue Property="Visualization" EnumMember="UI.VisualizationType/Progress" />
        </Record>
    </Annotation>
    <Annotation Term="UI.LineItem">
        <Collection>
            <Record Type="UI.DataFieldForAnnotation">
                <PropertyValue Property="Label" String="Progress" />
                <PropertyValue Property="Criticality" Path="to_StockAvailability/Quantity" />
                <PropertyValue Property="Target" AnnotationPath="@UI.DataPoint#Progress" />
            </Record>
        <Collection>
    </Annotation>
</Annotations>
```

**STEP**: 2 — ABAP CDS Annotation: Add DataPoint and Reference in LineItem

**DESCRIPTION**: In ABAP CDS view annotations, annotate the view field (e.g., Quantity) with @UI.dataPoint specifying targetValue and visualization = #PROGRESS. Then include a UI.lineItem entry using type #AS_DATAPOINT and valueQualifier to reference the DataPoint.

**LANGUAGE**: ABAP CDS

**CODE**:
```
annotate view STTA_C_MP_StockAvailability with {
  @UI.dataPoint: { targetValue: 100, visualization: #PROGRESS }
  Quantity;
}


@UI.lineItem: [
  {
    label: 'Progress',
    criticality: 'TO_STOCKAVAILABILITY/QUANTITY',
    valueQualifier: 'Progress',
    type: #AS_DATAPOINT
  }
]
progress;
```

**STEP**: 3 — CAP CDS Annotation: DataPoint and LineItem Reference

**DESCRIPTION**: For CAP (SAP Cloud Application Programming) CDS annotations, annotate the entity with UI.DataPoint using a qualifier (e.g., #Progress). Set Value, TargetValue, and Visualization. Reference the DataPoint in UI.LineItem using Target: '@UI.DataPoint#Progress' inside a UI.DataFieldForAnnotation entry.

**LANGUAGE**: CDS

**CODE**:
```
annotate STTA_PROD_MAN.STTA_C_MP_ProductType @(
  UI.DataPoint #Progress : {
    Value : to_StockAvailability.Quantity,
    TargetValue : 100,
    Visualization : #Progress
  },
  UI.LineItem : [
    {
        $Type : 'UI.DataFieldForAnnotation',
        Label : 'Progress',
        Criticality : to_StockAvailability.Quantity,
        Target : '@UI.DataPoint#Progress',
    }
  ]
);
```

**STEP**: 4 — Change Progress Bar Color by Setting Criticality (XML)

**DESCRIPTION**: To make the progress bar color reflect state (e.g., success, warning, error), add a Criticality property to the UI.DataPoint that points to a property determining state (for example, StockAvailability). The example below shows properties for Value, Title, Description, TargetValue, Visualization and Criticality in an XML DataPoint annotation.

**LANGUAGE**: XML

**CODE**:
```
<Annotation Term="UI.DataPoint" Qualifier="Quantity">
               <Record>
                       <PropertyValue Property="Value" Path="Quantity"/>
                       <PropertyValue Property="Title" String="{@i18n&gt;@Availability}"/>
                       <PropertyValue Property="Description" String="Progress Indicator"/>
                       <PropertyValue Property="TargetValue" Decimal="150"/>
                       <PropertyValue Property="Visualization" EnumMember="UI.VisualizationType/Progress"/>
                       <PropertyValue Property="Criticality" Path="StockAvailability"/>
               </Record>
        </Annotation>
```
--------------------------------

**TITLE**: Add a Read-Only Rating Indicator (Stars) to a Fiori Elements Table

**INTRODUCTION**: This guide shows how to add a read-only rating indicator (star visualization) to a Fiori Elements table. The rating indicator maps a backend numeric field to a star-based visualization. Decimal values are rounded (x.25–x.74 → half star). Configure the maximum number of stars with the TargetValue (default is 5).

**TAGS**: fiori-elements-framework, annotations, UI.DataPoint, rating, stars, CDS, ABAP, CAP, OData V2

**STEP**: 1 — XML Annotation: Add a UI.DataPoint and reference it in the LineItem
**DESCRIPTION**: Add a UI.DataPoint annotation with Value (path to backend field), TargetValue (maximum number of stars), and Visualization set to Rating. Then reference this DataPoint in the LineItem via UI.DataFieldForAnnotation and AnnotationPath to display the rating in the table.
**LANGUAGE**: XML
**CODE**:
```xml
<Annotations Target="STTA_PROD_MAN.STTA_C_MP_ProductType">
  <Annotation Term="UI.DataPoint" Qualifier="Rating">
    <Record>
      <PropertyValue Property="Value" Path="to_StockAvailability/StockAvailability" />
      <PropertyValue Property="TargetValue" Decimal="4" />
      <PropertyValue Property="Visualization" EnumMember="UI.VisualizationType/Rating" />
    </Record>
  </Annotation>

  <Annotation Term="UI.LineItem">
    <Collection>
      <Record Type="UI.DataFieldForAnnotation">
        <PropertyValue Property="Label" String="Rating" />
        <PropertyValue Property="Target" AnnotationPath="@UI.DataPoint#Rating" />
      </Record>
      ...
    </Collection>
   ...
  </Annotation>
...
</Annotations>
```

**STEP**: 2 — ABAP CDS Annotation: Annotate view with UI.DataPoint and LineItem entry
**DESCRIPTION**: In ABAP CDS, annotate the view to expose the field in the LineItem as a DataPoint (type #AS_DATAPOINT) and configure the UI.dataPoint with targetValue and visualization set to #RATING. Include the field (navigation path) at the end of the annotate block.
**LANGUAGE**: ABAP
**CODE**:
```
annotate view STTA_C_MP_PRODUCT with
{
  @UI.lineItem: [
    {
      label: 'Rating',
      valueQualifier: 'Rating',
      type: #AS_DATAPOINT,
      position: 1
    }
  ]
  @UI.dataPoint: {
    targetValue: 4,
    visualization: #RATING
  }
  to_stockavailability/stockavailability;
}
```

**STEP**: 3 — CAP CDS Annotation: Annotate entity with UI.DataPoint and UI.LineItem
**DESCRIPTION**: In CAP CDS, add a qualified UI.DataPoint (#Rating) mapping Value to the backend path, set TargetValue and Visualization, and add a UI.LineItem entry that references the DataPoint qualifier.
**LANGUAGE**: CDS
**CODE**:
```
annotate STTA_PROD_MAN.STTA_C_MP_ProductType with 
  @(
    UI.DataPoint #Rating : {
      Value         : to_StockAvailability.StockAvailability,
      TargetValue   : 4,
      Visualization : #Rating
    },
    UI.LineItem : [
      {
        $Type  : 'UI.DataFieldForAnnotation',
        Label  : 'Rating',
        Target : '@UI.DataPoint#Rating'
      }
    ]
  );
```

**STEP**: 4 — OData V2 / Generic Annotation Syntax: Enable rating indicator in LineItem
**DESCRIPTION**: For OData V2 annotations (UI annotations in metadata/annotation files), mark the LineItem entry with type #AS_DATAPOINT and add an @UI.dataPoint with visualization #RATING for the property to render as a read-only rating indicator in the table.
**LANGUAGE**: CDS
**CODE**:
```xml
@UI.lineItem: {
  position: 30,
  type: #AS_DATAPOINT
}

@UI.dataPoint: {
  visualization: #RATING
}

Product.Rating,
```

**STEP**: 5 — OData V2 / Define Maximum Number of Stars
**DESCRIPTION**: Change the default maximum number of stars (default = 5) by setting targetValue in the @UI.dataPoint annotation. Example shows targetValue = 4 (max 4 stars).
**LANGUAGE**: CDS
**CODE**:
```xml
@UI.lineItem: {
  position: 30,
  type: #AS_DATAPOINT
}

@UI.dataPoint: {
  targetValue: 4,
  visualization: #RATING
}

Product.Rating,
```

**NOTE**: TargetValue defines the maximum number of stars displayed. Decimal values are rounded; values between x.25 and x.74 display a half star. Use these annotations in your XML annotation files, ABAP CDS, or CAP CDS files depending on your project setup.
--------------------------------

**TITLE**: Adding a Section to an Object Page Using SAP Fiori Tools

**INTRODUCTION**: Step-by-step, action-oriented instructions for adding a section and adding fields to that section on an Object Page using SAP Fiori tools (SAP Fiori elements for OData V4). Includes UI actions, file references, and links to official documentation for context and validation.

**TAGS**: fiori-elements-framework, sap-fiori-tools, object-page, section, fields, odata-v4, business-application-studio

**STEP**: 0 — Required HTML header and anchors (preserve for project docs)
**DESCRIPTION**: Include project-level stylesheet and preserve HTML anchors/comments used by documentation generators or tooling. Add these lines to the appropriate documentation or HTML header files when you maintain the sample project.
**LANGUAGE**: HTML
**CODE**:
```html
<!-- loio9940cf0b191743f9a421d14bf02ff889 -->

<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>

<a name="loio9940cf0b191743f9a421d14bf02ff889__task_jbc_r22_3cc"></a>
```

**STEP**: 1 — Add a New Section to an Object Page
**DESCRIPTION**: Use SAP Fiori Tools (Page Map and Page Editor) to add a new Section to an Object Page. These are UI-driven actions inside Business Application Studio or VS Code with Fiori Tools. Follow the sequence exactly to ensure the section is registered and configured in the page definition.
**LANGUAGE**: text
**CODE**:
```
1. Launch the Page Map.
   - Example: Right-click the project folder and select "Show Page Map".
   - Reference: Define Application Structure (https://help.sap.com/docs/SAP_FIORI_tools/17d50220bcd848aa854c9c182d65b699/bae38e6216754a76896b926a3d6ac3a9.html)

2. Launch the Page Editor for your Object Page.
   - Click the :pencil2: (Edit) icon next to "Object Page".

3. Add a new Section.
   - Click the :heavy_plus_sign: (Add) icon next to "Sections".
   - Select the type of section you want to add.
   - Enter a name for the section.
   - Select the "Value Source" from the dropdown.
   - Click "Add".

3.a Verify or re-open the page definition in the Page Editor to confirm the new section appears in the outline/tree.

Documentation for section types and behavior:
- Sections (https://help.sap.com/docs/SAP_FIORI_tools/17d50220bcd848aa854c9c182d65b699/2953503145dd428194c6dff252744ac1.html)
```

**STEP**: 2 — Expand Sections Node and Add Fields to a Section
**DESCRIPTION**: After creating the section, add fields (basic fields) to it using the Page Editor outline tree. Expand the Sections node, navigate into the newly created section, and add fields from the entity properties exposed by your OData V4 service.
**LANGUAGE**: text
**CODE**:
```
1. Expand the "Sections" node in the outline tree.
   - Click the Arrow icon next to the section to reveal child nodes.
   - The outline screenshot reference: images/Fiori_Tools_-_Business_Application_Studio_-_Sections_Dropdown_3f19523.png

2. Add fields to the section.
   - Click the :heavy_plus_sign: (Add) icon next to "Fields".
   - Click "Add Basic Fields".
   - Select the fields you wish to add from the dropdown (these map to OData V4 entity properties).
   - Click "Add".

3. Preview the page.
   - Use Previewing an Application to validate layout and data binding:
     https://help.sap.com/docs/SAP_FIORI_tools/17d50220bcd848aa854c9c182d65b699/b962685bdf9246f6bced1d1cc1d9ba1c.html

Additional reference for basic field behavior:
- Basic Fields (https://help.sap.com/docs/SAP_FIORI_tools/17d50220bcd848aa854c9c182d65b699/2953503145dd428194c6dff252744ac1.html)
```

**STEP**: 3 — Notes and Compatibility
**DESCRIPTION**: Important constraints and references to keep in mind when implementing sections and fields.
**LANGUAGE**: text
**CODE**:
```
- This topic is only applicable to SAP Fiori elements for OData V4.
- Use the Page Map and Page Editor inside SAP Business Application Studio or VS Code with SAP Fiori Tools extensions for interactive editing.
- Preserve image and documentation links for reference and onboarding:
  - Outline screenshot: images/Fiori_Tools_-_Business_Application_Studio_-_Sections_Dropdown_3f19523.png
  - Main docs: https://help.sap.com/docs/SAP_FIORI_tools
```
--------------------------------

**TITLE**: Adding Action Buttons to Forms in Sections

**INTRODUCTION**: This guide shows how to add action buttons to forms inside object page sections (FieldGroup) in SAP Fiori elements. It includes annotation examples for XML annotation files, ABAP CDS, and CAP CDS. Use these steps to add function-call actions (DataFieldForAction) and intent-based navigation (DataFieldForIntentBasedNavigation), place actions inline inside the form toolbar, control visibility/enablement, pass context, and emphasize primary form actions.

**TAGS**: fiori-elements-framework, annotations, FieldGroup, DataFieldForAction, DataFieldForIntentBasedNavigation, UI.ReferenceFacet, UI.Identification, UI.StatusInfo, inline, UI.Emphasized, OperationAvailable

**STEP**: 1 — Add action buttons to a FieldGroup (form)
**DESCRIPTION**: Insert DataFieldForAction and DataFieldForIntentBasedNavigation entries into the FieldGroup Data collection. These buttons are rendered in the section toolbar (default) or in the form toolbar when Inline is set to true. Use the XML, ABAP CDS, or CAP CDS snippet matching your project to declare the form fields and actions.
**LANGUAGE**: XML
**CODE**:
```xml
<Annotation Term="UI.FieldGroup" Qualifier="TechnicalData">
    <Record>
        <PropertyValue Property="Data">
            <Collection>
                <Record Type="UI.DataField">
                    <PropertyValue Property="Value" Path="Width"/>
                    <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/Medium"/>
                </Record>
                <Record Type="UI.DataField">
                    <PropertyValue Property="Value" Path="Depth"/>
                    <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/Medium"/>
                </Record>
                ...
                <Record Type="UI.DataFieldForAction">
                    <PropertyValue Property="Label" String="Copy"/>
                    <PropertyValue Property="Action" String="STTA_PROD_MAN.STTA_PROD_MAN_Entities/STTA_C_MP_ProductCopy"/>
                </Record>
                <Record Type="UI.DataFieldForIntentBasedNavigation">
                    <PropertyValue Property="Label" String="Manage Products (ST)" />
                    <PropertyValue Property="SemanticObject" String="EPMProduct" />
                </Record>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="Label" String="Technical Data"/>
    </Record>
</Annotation>
```

**LANGUAGE**: ABAP
**CODE**:
```abap
@UI.fieldGroup: [
  {
    importance: #MEDIUM,
    position: 10,
    qualifier: 'TechnicalData',
    groupLabel: 'Technical Data'
  }
]
WIDTH;

@UI.fieldGroup: [
  {
    importance: #MEDIUM,
    position: 20,
    qualifier: 'TechnicalData'
  }
]
DEPTH;

@UI.fieldGroup: [
  {
    label: 'Copy',
    dataAction: 'STTA_C_MP_ProductCopy',
    type: #FOR_ACTION,
    position: 30,
    qualifier: 'TechnicalData'
  },
  {
    label: 'Manage Products (ST)',
    type: #FOR_INTENT_BASED_NAVIGATION,
    position: 40,
    qualifier: 'TechnicalData'
  }
]

@Consumption.semanticObject: 'EPMProduct'
product;
```

**LANGUAGE**: CAP CDS
**CODE**:
```cap
UI.FieldGroup #TechnicalData : {
    Data : [
        {
            $Type : 'UI.DataField',
            Value : Width,
            ![@UI.Importance] : #Medium
        },
        {
            $Type : 'UI.DataField',
            Value : Depth,
            ![@UI.Importance] : #Medium
        },
        {
            $Type : 'UI.DataFieldForAction',
            Label : 'Copy',
            Action : 'STTA_PROD_MAN.STTA_PROD_MAN_Entities/STTA_C_MP_ProductCopy'
        },
        {
            $Type : 'UI.DataFieldForIntentBasedNavigation',
            Label : 'Manage Products (ST)',
            SemanticObject : 'EPMProduct'
        }
    ],
    Label : 'Technical Data'
}
```

**STEP**: 2 — Link FieldGroup to a ReferenceFacet (render the form on the object page)
**DESCRIPTION**: Reference the FieldGroup via UI.ReferenceFacet so the form appears as a facet on the object page. Use AnnotationPath '@UI.FieldGroup#Qualifier'.
**LANGUAGE**: XML
**CODE**:
```xml
<Annotation Term="UI.Facets">
    <Collection>
    ....                  
        <Record Type="UI.ReferenceFacet">
            <PropertyValue Property="Label" String="Technical Data"/>
            <PropertyValue Property="Target" AnnotationPath="@UI.FieldGroup#TechnicalData"/>
        </Record>
    ....
    </Collection>
</Annotation>
```

**LANGUAGE**: ABAP
**CODE**:
```abap
@UI.Facet: [
  {
    label: 'Technical Data',
    targetQualifier: 'TechnicalData',
    type: #FIELDGROUP_REFERENCE,
    purpose: #STANDARD
 }
]
```

**LANGUAGE**: CAP CDS
**CODE**:
```cap
{
   $Type             : 'UI.ReferenceFacet',
   Label             : 'Technical Data',
   ID                : 'TechnicalData',
   Target            : '@UI.FieldGroup#TechnicalData'
},
```

**STEP**: 3 — Add form actions via UI.Identification or UI.StatusInfo (OData V4 alternative)
**DESCRIPTION**: For OData V4 pages you can add DataFieldForAction entries inside UI.Identification or UI.StatusInfo and then reference that identification/status facet via UI.ReferenceFacet. DataFieldForAction entries in an unqualified UI.Identification become global actions unless marked as determining.
**LANGUAGE**: XML (ReferenceFacet to Identification)
**CODE**:
```xml
<Annotation Term="UI.Facets">
    <Collection>
    ....                  
        <Record Type="UI.ReferenceFacet">
            <PropertyValue Property="Label" String="Technical Data"/>
            <PropertyValue Property="Target" AnnotationPath="@UI.Identification#ID"/>
        </Record>
    ....
    </Collection>
</Annotation>
```

**LANGUAGE**: ABAP (ReferenceFacet to Identification)
**CODE**:
```abap
@UI.Facet: [
  {
    label: 'Technical Data',
    targetQualifier: 'ID',
    type: #IDENTIFICATION_REFERENCE,
    purpose: #STANDARD
  }
]
```

**LANGUAGE**: CAP CDS (ReferenceFacet to Identification)
**CODE**:
```cap
  {
        $Type  : 'UI.ReferenceFacet',
        Label  : 'Technical Data',
        Target : '@UI.Identification#ID'
    },
```

**LANGUAGE**: XML (DataFieldForAction in UI.Identification)
**CODE**:
```xml
<Annotation Term="UI.Identification" Qualifier="ID">
    <Collection>
        ....
        <Record Type="UI.DataFieldForAction">
            <PropertyValue Property="Label" String="Break Up" />
            <PropertyValue Property="Action" String="com.sap.gateway.srvd.sadl_gw_appmusicdr_definition.v0001.BREAK_UP" />
        </Record>
        ....
    </Collection>
</Annotation>
```

**LANGUAGE**: ABAP (DataFieldForAction in UI.identification)
**CODE**:
```abap
@UI.identification: [
  {
    label: 'Break Up',
    dataAction: 'com.sap.gateway.srvd.sadl_gw_appmusicdr_definition.v0001.BREAK_UP',
    type: #FOR_ACTION,
    qualifier: 'ID'
  }
]
```

**LANGUAGE**: CAP CDS (DataFieldForAction in UI.Identification)
**CODE**:
```cap
    UI.Identification #ID : [{
        $Type  : 'UI.DataFieldForAction',
        Label  : 'Break Up',
        Action : ' com.sap.gateway.srvd.sadl_gw_appmusicdr_definition.v0001.BREAK_UP'
    }],
```

**LANGUAGE**: XML (DataFieldForAction in UI.StatusInfo)
**CODE**:
```xml
<Annotation Term="UI.StatusInfo" Qualifier="SI">
    <Collection>
        ....
        <Record Type="UI.DataFieldForAction">
            <PropertyValue Property="Label" String="Move Country" />
            <PropertyValue Property="Action" String="com.sap.gateway.srvd.sadl_gw_appmusicdr_definition.v0001.MOVE_COUNTRY" />
        </Record>
        ....
    </Collection>
</Annotation>
```

**LANGUAGE**: ABAP (UI.statusInfo)
**CODE**:
```abap
@UI.statusInfo: [
  {
    label: 'Move Country',
    dataAction: 'com.sap.gateway.srvd.sadl_gw_appmusicdr_definition.v0001.MOVE_COUNTRY',
    type: #FOR_ACTION,
    qualifier: 'SI'
  }
]
```

**LANGUAGE**: CAP CDS (UI.StatusInfo)
**CODE**:
```cap
    UI.StatusInfo #SI : [{
        $Type  : 'UI.DataFieldForAction',
        Label  : 'Move Country',
        Action : ' com.sap.gateway.srvd.sadl_gw_appmusicdr_definition.v0001.MOVE_COUNTRY'
    }],
```

**STEP**: 4 — Place form actions inside the form toolbar (inline=true)
**DESCRIPTION**: To render a FieldGroup action inside the form toolbar (instead of the section toolbar) set Inline to true on the DataFieldForAction. Use the example below and match format to your annotation source.
**LANGUAGE**: XML
**CODE**:
```xml
<Annotation Term="UI.FieldGroup" Qualifier="OrderData">
    <Record Type="UI.FieldGroupType">
        <PropertyValue Property="Data">
            <Collection>
                <Record Type="UI.DataFieldForAction">
                    <PropertyValue Property="Label" String="Facet Form Action" />
                    <PropertyValue Property="Action" String="com.c_salesordermanage_sd.FacetFormAction" />
                    <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High" />
                </Record>
                <Record Type="UI.DataFieldForAction">
                    <PropertyValue Property="Label" String="Facet Form Action at Form Level" />
                    <PropertyValue Property="Action" String="com.c_salesordermanage_sd.FacetFormAction2" />
                    <PropertyValue Property="Inline" Bool="true" />
                    <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High" />
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

**LANGUAGE**: ABAP
**CODE**:
```abap
@UI.fieldGroup: [
  {
    importance: #HIGH,
    label: 'Facet Form Action',
    dataAction: 'com.c_salesordermanage_sd.FacetFormAction',
    type: #FOR_ACTION,
    position: 1 ,
    qualifier: 'OrderData'
  },
  {
    importance: #HIGH,
    label: 'Facet Form Action at Form Level',
    dataAction: 'com.c_salesordermanage_sd.FacetFormAction2',
    type: #FOR_ACTION,
    position: 2 ,
    qualifier: 'OrderData'
  }
]
```

**LANGUAGE**: CAP CDS
**CODE**:
```cap
FieldGroup #OrderData: {Data : [
    {
        $Type             : 'UI.DataFieldForAction',
        Label             : 'Facet Form Action',
        Action            : 'com.c_salesordermanage_sd.FacetFormAction',
        ![@UI.Importance] : #High
    },{
        $Type             : 'UI.DataFieldForAction',
        Label             : 'Facet Form Action at Form Level',
        Action            : 'com.c_salesordermanage_sd.FacetFormAction2',
        Inline            : true,
        ![@UI.Importance] : #High
    }
]}
```

**STEP**: 5 — Visibility and enablement rules for form actions
**DESCRIPTION**: Control rendering and enablement:
- Use UI.Hidden to hide the action button entirely.
- Use Core.OperationAvailable:
  - If OperationAvailable is a static false value, the action is not rendered.
  - If OperationAvailable is true or omitted (or only the term is provided), the button is enabled.
  - If OperationAvailable is path-bound, the button is enabled when the path evaluates to true and disabled when false.
- For DataFieldForIntentBasedNavigation: RequiresContext must be false to pass page context; true will error for form buttons.
(See also the inline example and contextual passing in next steps.)
**LANGUAGE**: XML
**CODE**:
```xml
<!-- Example reference to Core.OperationAvailable usage (term-only example) -->
<Annotation Term="Core.OperationAvailable"/>
```

**STEP**: 6 — Passing context on invocation
**DESCRIPTION**: When the action is a bound OData action, the current page context (the entity) is passed to the action. For unbound actions, no context is passed. For intent-based navigation (DataFieldForIntentBasedNavigation), set RequiresContext to false to pass the page context for a form action; RequiresContext=true is invalid for form buttons.

**STEP**: 7 — Emphasize the most important form action (UI.Emphasized)
**DESCRIPTION**: Mark the primary form action to make it visually prominent using UI.Emphasized. Emphasized can be a static true, an annotation-term-only, or a path expression. Examples below show different emphasis variants and an intent-based navigation emphasis.
**LANGUAGE**: XML
**CODE**:
```xml
<Record Type="UI.DataFieldForAction">
    <PropertyValue Property="Label" String="Static Action" />
    <PropertyValue Property="Action" String="com.c_salesordermanage_sd.DummyStaticAction" />
    <Annotation Term="UI.Emphasized" />
</Record>
<Record Type="UI.DataFieldForAction">
    <PropertyValue Property="Label" String="Static Action" />
    <PropertyValue Property="Action" String="com.c_salesordermanage_sd.DummyStaticAction" />
    <Annotation Term="UI.Emphasized" Bool="true" />
</Record>
<Record Type="UI.DataFieldForAction">
    <PropertyValue Property="Label" String="Static Action" />
    <PropertyValue Property="Action" String="com.c_salesordermanage_sd.DummyStaticAction" />
    <Annotation Term="UI.Emphasized" Path="…" />
</Record>
```

**LANGUAGE**: XML
**CODE**:
```xml
<Annotation Term="UI.LineItem">
<Collection>
<Record Type="UI.DataFieldForIntentBasedNavigation" >
     <PropertyValue Property="Label" String="IBN"/>
     <PropertyValue Property="SemanticObject" String="SalesOrder"/>
     <PropertyValue Property="Action" String="manageInline"/>
     <PropertyValue Property="RequiresContext" Bool="false"/>
     <Annotation Term="UI.Emphasized" Bool="true" />
</Record> 
</Collection>
</Annotation>
```

**LANGUAGE**: ABAP
**CODE**:
```abap
@UI.lineItem: [{ 
  label: 'IBN',
  type: #FOR_INTENT_BASED_NAVIGATION,
  emphasized: true,
  requiresContext: true,
  semanticObjectAction: 'manageInline',
  semanticObject: 'SalesOrder'
}]
```

**LANGUAGE**: CAP CDS
**CODE**:
```cap
{
    $Type               : 'UI.DataFieldForAction',
    Label               : 'Static Action',
    Action              : 'com.c_salesordermanage_sd.DummyStaticAction', 
    ![@UI.Emphasized]   : <<Path>>
}

{
    $Type               : 'UI.DataFieldForIntentBasedNavigation',
    SemanticObject      : 'SalesOrder',
    Action              : 'manageInline',
    Label               : 'IBN',
    RequiresContext     : false,
    ![@UI.Emphasized]   : true
}
```

**STEP**: 8 — Additional notes and references
**DESCRIPTION**: 
- For OData V2: form action button styles can be changed via UI adaptations.
- Best practice: place the most important action as far left as possible. See Action Placement: https://experience.sap.com/fiori-design-web/action-placement/
- For external navigation configuration see configuring-external-navigation-1d4a0f9.md.
- To trigger actions connected to a field value on a form, see Adding Actions to Tables: adding-actions-to-tables-b623e0b.md.

**LANGUAGE**: Markdown
**CODE**:
```markdown
Image used in documentation: images/Placing_Form_Actions_Inside_the_Form_Toolbar_d513ccf.png
References:
- configuring-external-navigation-1d4a0f9.md
- adding-actions-to-tables-b623e0b.md
- Action placement guidance: https://experience.sap.com/fiori-design-web/action-placement/
```

--------------------------------

**TITLE**: Adding Actions to Tables (Fiori Elements) — Action & Annotation Recipes

**INTRODUCTION**: Practical, code-focused recipes for enabling and controlling table actions (Create, Delete, custom actions, inline actions, navigation actions) in SAP Fiori elements. Includes XML annotation, ABAP CDS, and CAP CDS examples plus manifest.json settings. Use these snippets directly in metadata/annotations or manifest to enable behavior in list reports and object pages.

**TAGS**: fiori-elements, annotations, OData, UI.LineItem, NavigationRestrictions, InsertRestrictions, DeleteRestrictions, manifest.json, CAP, ABAP CDS, XML

STEP: 1 — Enable Create via NavigationRestrictions (XML)
DESCRIPTION: Use Org.OData.Capabilities.V1.NavigationRestrictions with InsertRestrictions for a navigation property. When Insertable=true on the parent navigation restriction, the related entity set is insertable (Create button enabled).
LANGUAGE: XML
CODE:
```xml
<Annotations Target="STTA_PROD_MAN.STTA_PROD_MAN_Entities/STTA_C_MP_Product">
  <Annotation Term="Capabilities.NavigationRestrictions">
    <Record>
        <PropertyValue Property="RestrictedProperties">
          <Collection>
            <Record>
               <PropertyValue Property="NavigationProperty" NavigationPropertyPath="to_ProductText"/>
               <PropertyValue Property="InsertRestrictions">
                  <Record>
                     <PropertyValue Property="Insertable" Bool="true"/>
                     <!--Example with Boolean value for InsertRestriction-->
                     <!-- <PropertyValue Property="Insertable" Path="Insertable"/>-->
                     <!--Example with path for InsertRestriction-->
                  </Record>
               </PropertyValue>
           </Record>
          </Collection>
          </PropertyValue>
      </Record>
    </Annotation>
</Annotations>
```

STEP: 2 — Enable Create via Behavior Definition (ABAP CDS)
DESCRIPTION: In RAP behavior definitions, enable create/delete/update for an entity and for its association. No separate ABAP CDS metadata annotation is required when behavior defines insertability.
LANGUAGE: ABAP CDS
CODE:
```
define behavior for STTA_C_MP_Product
{
  create;
  delete;
  update;
 
  association _ProductText
  { create;  }
};
```

STEP: 3 — Enable Insert via InsertRestrictions (XML)
DESCRIPTION: Use Capabilities.InsertRestrictions on the table entity set directly to enable/disable Create if NavigationRestrictions is not present or does not take precedence.
LANGUAGE: XML
CODE:
```xml
<Annotations Target="STTA_PROD_MAN.STTA_PROD_MAN_Entities/STTA_C_MP_ProductText">
  <Annotation Term="Capabilities.InsertRestrictions">
    <Record>
       <PropertyValue Property="Insertable" Bool="true" />
                    <!--Example with Boolean value for InsertRestriction-->

    </Record>
  </Annotation>
</Annotations>
```

STEP: 4 — Enable Insert via CAP CDS (InsertRestrictions)
DESCRIPTION: CAP CDS annotation form of InsertRestrictions when using CAP. Use annotate block to set Insertable true for the entity.
LANGUAGE: CAP CDS
CODE:
```
annotate STTA_PROD_MAN.STTA_C_MP_ProductText with @(
  Capabilities.InsertRestrictions : {
    Insertable : true,
  }
);
```

STEP: 5 — Disable Delete Button (XML DeleteRestrictions example)
DESCRIPTION: Use Capabilities.DeleteRestrictions on an entity set to disable Delete (Deletable=false). If not provided, Delete is shown by default.
LANGUAGE: XML
CODE:
```xml
<Annotations Target="SAP__self.Container/SalesOrderManage">
   <Annotation Term="SAP__capabilities.DeleteRestrictions">
      <Record>
         <PropertyValue Property="Deletable" Bool="false"/>
      </Record>
   </Annotation>
</Annotations>
```

STEP: 6 — Prevent Delete via NavigationRestrictions (XML)
DESCRIPTION: NavigationRestrictions on the parent entity set can override child Delete behavior. If NavigationRestrictions sets Deletable=false, the child Delete button is never visible.
LANGUAGE: XML
CODE:
```xml
<Annotations Target="STTA_PROD_MAN.STTA_PROD_MAN_Entities/STTA_C_MP_Product">
  <Annotation Term="Capabilities.NavigationRestrictions">
    <Record>
        <PropertyValue Property="RestrictedProperties">
          <Collection>
            <Record>
               <PropertyValue Property="NavigationProperty" NavigationPropertyPath="to_ProductText"/>
               <PropertyValue Property="DeleteRestrictions">
                  <Record>
                     <PropertyValue Property="Deletable" Bool="false"/>
                  </Record>
               </PropertyValue>
           </Record>
          </Collection>
          </PropertyValue>
      </Record>
    </Annotation>
</Annotations>
```

STEP: 7 — Conditional Delete with deletable-path (XML)
DESCRIPTION: Use Org.OData.Capabilities.V1.DeleteRestrictions with Deletable Path to enable/disable Delete per entity instance based on a boolean property (e.g., Delete_mc). Do not use sap:deletable when using deletable-path.
LANGUAGE: XML
CODE:
```xml
<Annotations Target="STTA_PROD_MAN.STTA_PROD_MAN_Entities/STTA_C_MP_Product">
    <Annotation Term="Org.OData.Capabilities.V1.DeleteRestrictions">
        <Record>
            <PropertyValue Property="Deletable" Path="Delete_mc"/>
        </Record>
    </Annotation>
</Annotations>
```

STEP: 8 — Conditional Delete with deletable-path (CAP CDS)
DESCRIPTION: CAP CDS form that maps Deletable to a property (Delete_mc) for the entity.
LANGUAGE: CAP CDS
CODE:
```
annotate STTA_C_MP_Product with @(
    Capabilities.DeleteRestrictions : {
        Deletable : Delete_mc
    }
);
```

STEP: 9 — App-Specific Custom Actions via manifest.json (ordering & custom actions)
DESCRIPTION: Define custom table toolbar actions or reposition standard actions in manifest.json using controlConfiguration for the target route. Use anchor/placement to position actions relative to standard actions like StandardAction::Create.
LANGUAGE: JSON
CODE:
```
{ "sap.ui5": {
     "routing": { 
        "targets": { 
            "SalesOrderManageList": { 
                "options": { 
                    "settings": { 
                        "controlConfiguration": { 
                            "@com.sap.vocabularies.UI.v1.LineItem": { 
                                "actions": { "StandardAction::Delete": { 
                                    "position": { 
                                        "anchor": "StandardAction::Create", 
                                        "placement": "Before" 
                                        } 
                                    }, 
                                    "CustomAction": { 
                                        "press": "SalesOrder.custom.CustomActions.CustomAction1", 
                                        "enabled": true, "text": "Custom Action", 
                                        "command": "COMMON", "position": { 
                                            "anchor": "StandardAction::Create", 
                                            "placement": "After" 
                                            } 
                                        } 
                                    } 
                                } 
                            } 
                        } 
                    } 
                } 
            } 
        } 
    } 
}
```

STEP: 10 — Enable Inline Delete for Table Rows (manifest tableSettings)
DESCRIPTION: Enable inline deletion buttons at the end of each responsive table row using tableSettings.inlineDelete: true. Note: inlineDelete works only for responsive tables and cannot be combined with multiselect.
LANGUAGE: JSON
CODE:
```
"tableSettings": {
     "inlineDelete": true
}
```

STEP: 11 — Define Annotation-Based Actions (UI.LineItem XML)
DESCRIPTION: Create toolbar and inline row actions using UI.LineItem records. Use UI.DataFieldForAction for OData-bound actions and UI.DataFieldForIntentBasedNavigation for outbound navigation. Set Inline = true to render action as a per-row column.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.LineItem">
   <Collection>
      <Record Type="UI.DataFieldForAction">
         <PropertyValue Property="Label" String="Copy with new Supplier"/>
         <PropertyValue Property="Action"
            String="STTA_PROD_MAN.STTA_PROD_MAN_Entities/STTA_C_MP_ProductCopywithparams"/>
         <PropertyValue Property="InvocationGrouping"   
            EnumMember="UI.OperationGroupingType/Isolated"/>
      </Record>
      <Record Type="UI.DataFieldForAction">
         <PropertyValue Property="Label" String="Activate"/>
         <PropertyValue Property="Action"
            String="STTA_PROD_MAN.STTA_PROD_MAN_Entities/STTA_C_MP_ProductActivation"/>
         <PropertyValue Property="InvocationGrouping" 
            EnumMember="UI.OperationGroupingType/ChangeSet"/>
      </Record>
      <Record Type="UI.DataField">
         <PropertyValue Property="Value" Path="Product"/>
         <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
      </Record>
      <Record Type="UI.DataField">
         <PropertyValue Property="Value" Path="ProductCategory"/>
         <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
      </Record>
      <Record Type="UI.DataField">
         <PropertyValue Property="Value" Path="to_Supplier/CompanyName"/>
         <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
      </Record>
      <Record Type="UI.DataField">
         <PropertyValue Property="Criticality" Path="to_StockAvailability/StockAvailability"/>
         <PropertyValue Property="Value" Path="to_StockAvailability/StockAvailability"/>
         <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
      </Record>
      <Record Type="UI.DataField">
         <PropertyValue Property="Value" Path="Price"/>
         <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
      </Record>
      <Record Type="UI.DataFieldForAction">
         <PropertyValue Property="Label" String="Copy"/>
         <PropertyValue Property="Action"
            String="STTA_PROD_MAN.STTA_PROD_MAN_Entities/STTA_C_MP_ProductCopy"/>
         <PropertyValue Property="Inline" Bool="true"/>
         <PropertyValue Property="InvocationGrouping"   
            EnumMember="UI.OperationGroupingType/Isolated"/>
      </Record>
      <Record Type="UI.DataFieldForIntentBasedNavigation">
         <PropertyValue Property="Label" String="Manage Products (ST)"/>
         <PropertyValue Property="SemanticObject" String="EPMProduct"/>
         <PropertyValue Property="Action" String="manage_st"/>
         <PropertyValue Property="Inline" Bool="true"/>
      </Record>
      
      <Record Type="UI.DataFieldWithIntentBasedNavigation">
         < PropertyValue Property ="Label" String ="Weight (with IBN)" />
         < PropertyValue Property ="Action" String ="manage_st_test" />
         <PropertyValue Property="Value" Path="Weight"/>
         <PropertyValue Property="SemanticObject" String="EPMProduct" />
          <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
      </Record>
    </Collection>
</Annotation>
```

STEP: 12 — UI.LineItem (ABAP CDS example)
DESCRIPTION: ABAP CDS form of UI.lineItem for the same toolbar/inline actions. Use positions, types (#FOR_ACTION, #STANDARD) and invocationGrouping.
LANGUAGE: ABAP CDS
CODE:
```
@UI.lineItem: [
  {
    label: 'Copy with new Supplier',
    dataAction: 'PUSHDOWN:STTA_C_MP_ProductCopywithparams',
    invocationGrouping: #ISOLATED,
    type: #FOR_ACTION,
    position: 1
  },
  {
    label: 'Activate',
    dataAction: 'PUSHDOWN:STTA_C_MP_ProductActivation',
    invocationGrouping: #CHANGE_SET,
    type: #FOR_ACTION,
    position: 2
  },
  {
    label: 'Product',   
    importance: #HIGH,
    value: 'PRODUCT',
    type: #STANDARD,
    position: 3
  },
  {
    label: 'Copy',   
    dataAction: 'PUSHDOWN:STTA_C_MP_ProductCopy',
    invocationGrouping: #ISOLATED,
    type: #FOR_ACTION,
    position: 8
  }
]
```

STEP: 13 — UI.LineItem (CAP CDS example)
DESCRIPTION: CAP CDS JSON-like annotation for UI.LineItem. Use $Type to distinguish action types, Inline true to render per-row.
LANGUAGE: CAP CDS
CODE:
```
UI.LineItem : [
    {
        $Type : 'UI.DataFieldForAction',
        Label : 'Copy with new Supplier',
        Action : 'STTA_PROD_MAN.STTA_PROD_MAN_Entities/STTA_C_MP_ProductCopywithparams',
        InvocationGrouping : #Isolated
    },
    {
        $Type : 'UI.DataFieldForAction',
        Label : 'Activate',
        Action : 'STTA_PROD_MAN.STTA_PROD_MAN_Entities/STTA_C_MP_ProductActivation',
        InvocationGrouping : #ChangeSet
    },
    {
        $Type : 'UI.DataField',
        Value : Product,
        ![@UI.Importance] : #High
    },
    {
        $Type : 'UI.DataField',
        Value : ProductCategory,
        ![@UI.Importance] : #High
    },
    {
        $Type : 'UI.DataField',
        Value : to_Supplier.CompanyName,
        ![@UI.Importance] : #High
    },
    {
        $Type : 'UI.DataField',
        Criticality : to_StockAvailability.StockAvailability,
        Value : to_StockAvailability.StockAvailability,
        ![@UI.Importance] : #High
    },
    {
        $Type : 'UI.DataField',
        Value : Price,
        ![@UI.Importance] : #High
    },
    {
        $Type : 'UI.DataFieldForAction',
        Label : 'Copy',
        Action : 'STTA_PROD_MAN.STTA_PROD_MAN_Entities/STTA_C_MP_ProductCopy',
        Inline : true,
        InvocationGrouping : #Isolated
    },
    {
        $Type : 'UI.DataFieldForIntentBasedNavigation',
        Label : 'Manage Products (ST)',
        SemanticObject : 'EPMProduct',
        Action : 'manage_st',
        Inline : true
    },
    {
        $Type : 'UI.DataFieldWithIntentBasedNavigation',
        Label : 'Weight (with IBN)',
        Value : Weight,
        SemanticObject : 'EPMProduct',
        Action : 'manage_st'
    }
]
```

STEP: 14 — Render Inline Action as Icon (DataFieldForAction, XML)
DESCRIPTION: Replace inline action text with an icon via IconUrl. Icon label becomes tooltip. Note: Criticality is ignored for icon inline actions.
LANGUAGE: XML
CODE:
```
<Record Type="UI.DataFieldForAction">
    <PropertyValue Property="Label" String="Navigate via Action"/>
    <PropertyValue Property="Action" String="com.c_salesordermanage_sd.ActionNavigation"/>
    <PropertyValue Property="Inline" Bool="true"/>
    <PropertyValue Property="IconUrl" String="sap-icon://arrow-right"/>
</Record>
```

STEP: 15 — Intent-Based Inline Action with Icon (XML)
DESCRIPTION: Inline intent-based navigation button with icon (IconUrl). Use RequiresContext true if the intent needs the current row context.
LANGUAGE: XML
CODE:
```xml
<Record Type="UI.DataFieldForIntentBasedNavigation">
    <PropertyValue Property="SemanticObject" String="v4Freestyle"/>
    <PropertyValue Property="Action" String="Inbound"/>
    <PropertyValue Property="Label" String="IBN Inline"/>
    <PropertyValue Property="RequiresContext" Bool="true"/>
    <PropertyValue Property="Inline" Bool="true"/>
    <PropertyValue Property=" IconUrl" String="sap-icon://arrow-left"/>
</Record>
```

STEP: 16 — Enable/Disable Field Editing (UpdateRestrictions XML)
DESCRIPTION: Use Capabilities.UpdateRestrictions.Updatable with a Path boolean property to control editability of records/fields shown in the table.
LANGUAGE: XML
CODE:
```xml
<Annotations Target="com.c_salesordermanage_sd.EntityContainer/Material">
    <Annotation Term="Capabilities.UpdateRestrictions">
        <Record Type="Capabilities.UpdateRestrictionsType">
            <PropertyValue Property="Updatable" Path="owner.isUpdatable"/>
        </Record>
    </Annotation>
</Annotations>
```

STEP: 17 — Control Delete via DeleteRestrictions Path (XML)
DESCRIPTION: Apply Capabilities.DeleteRestrictions with Deletable Path to control delete availability per entity via owner.isDeletable.
LANGUAGE: XML
CODE:
```xml
<Annotations Target="com.c_salesordermanage_sd.EntityContainer/Material">
    <Annotation Term="Capabilities.DeleteRestrictions">
        <Record Type="Capabilities.DeleteRestrictionsType">
            <PropertyValue Property="Deletable" Path="owner.isDeletable"/>
        </Record>
    </Annotation>
</Annotations>
```

STEP: 18 — deletable-path / Capabilities in CDS (example)
DESCRIPTION: Example CAP/annotation snippet showing how to set Insertable/Deletable/Updatable flags inline for an entity (deletable-path style).
LANGUAGE: CAP CDS
CODE:
```
annotate com.c_salesordermanage_sd.SalesOrderManagewith @Capabilities: {Insertable: false, Deletable:'isDeletable', Updatable: true}
```

STEP: 19 — Enable Single-Select for Bound Action (manifest enableOnSelect)
DESCRIPTION: Configure annotation-based actions to enable only on single selection by setting enableOnSelect: "single" in manifest controlConfiguration for the LineItem/Chart action key.
LANGUAGE: JSON
CODE:
```
"@com.sap.vocabularies.UI.v1.LineItem": {
    "actions": {
        "DataFieldForAction::com.c_salesordermanage_sd.CreateWithSalesOrderType": {
            "enableOnSelect": "single" // Possible values: "single", "multi" (default)
        }
    }
}
```

STEP: 20 — POST-Based Create Dialog: Computed Default Value (XML)
DESCRIPTION: If POST-based create requires values for non-computed key fields or computed GUID key with text association, annotate with Core.ComputedDefaultValue to render dialog for entering key/defaults.
LANGUAGE: XML
CODE:
```xml
<Annotations Target="com.c_salesordermanage_sd.SalesOrderManage/ID">
    <Annotation Term="Common.Text" String="SalesOrder">
        <Annotation Term="UI.TextArrangement" EnumMember="UI.TextArrangementType/TextOnly" />
    </Annotation>
    <Annotation Term="Common.Label" String="Sales Order" />
    <Annotation Term="Core.ComputedDefaultValue" Bool="true" />
</Annotations>
```

STEP: 21 — POST-Based Create Dialog: ComputedDefaultValue (CAP CDS)
DESCRIPTION: CAP entity definition with Core.ComputedDefaultValue on a UUID key to trigger creation dialog for key entry when using POST-based create.
LANGUAGE: CAP CDS
CODE:
```
entity SalesOrderManage @(
    title        : 'Manage Sales Order'
) {
    key ID : UUID @(
            title         : 'Sales Order',
            Common        : {
                Text            : SalesOrder,
                TextArrangement : #TextOnly
            },
            Core.ComputedDefaultValue : true
        );
    .....
    .....
}
```

STEP: 22 — InsertRestrictions RequiredProperties (XML)
DESCRIPTION: Use InsertRestrictions.RequiredProperties to list properties that are required for create; these force dialog fields when using POST-based create.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="Capabilities.InsertRestrictions">
    <Record Type="Capabilities.InsertRestrictionsType">
        <PropertyValue Property="Insertable" Bool="true"/>
        <PropertyValue Property="RequiredProperties">
            <Collection>
                <PropertyPath>PurchaseOrderByCustomer</PropertyPath>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

STEP: 23 — InsertRestrictions RequiredProperties (CAP CDS)
DESCRIPTION: CAP CDS form of InsertRestrictions including RequiredProperties.
LANGUAGE: CAP CDS
CODE:
```
InsertRestrictions     : {
  Insertable         : true,
  RequiredProperties : [PurchaseOrderByCustomer]
}
```

STEP: 24 — Trigger Action from Field Value (DataFieldWithAction XML)
DESCRIPTION: Render a value as a link and trigger a bound action when clicked. Use UI.ParameterDefaultValue to pass the field to the action parameter (see next step).
LANGUAGE: XML
CODE:
```xml
<Record Type="UI.DataFieldWithAction">
    <PropertyValue Property="Value" Path="PurchaseOrderByCustomer"/>
    <PropertyValue Property="Action" String="com.c_salesordermanage_sd.ActionDataFieldWith"/>
    <PropertyValue Property="Label" String="Customer Reference"/>
</Record>
```

STEP: 25 — Pass Field Value to Action Parameter (ParameterDefaultValue XML)
DESCRIPTION: Use UI.ParameterDefaultValue annotation on the action parameter binding target to set a parameter by path (_it/<Property>).
LANGUAGE: XML
CODE:
```xml
<Annotations Target="com.c_salesordermanage_sd.ActionDataFieldWith(com.c_salesordermanage_sd.SalesOrderManage)/PurchaseOrderByCustomer">
    <Annotation Term="UI.ParameterDefaultValue" Path="_it/PurchaseOrderByCustomer"/>
    <Annotation Term="Common.Label" String="Customer Reference"/>
</Annotations>
```

STEP: 26 — Notes & Behavior Summary (short actionable reminders)
DESCRIPTION: Quick actionable rules to follow when implementing actions and restrictions:
- NavigationRestrictions on parent entity set take precedence over direct Insert/DeleteRestrictions on child entity sets.
- For deletable-path use a boolean property path and do not set sap:deletable in static annotations.
- Inline actions: set Inline = true in UI.DataFieldForAction or UI.DataFieldForIntentBasedNavigation; inline actions cannot use enableOnSelect and are row-context-only.
- Inline deletion requires responsive table type; inlineDelete cannot be enabled with multiselect.
- Delete action is transactional: if deletion of any selected record fails, no selected record is deleted.
--------------------------------

**TITLE**: Add Confirmation Popovers to Actions with IsActionCritical Annotation

**INTRODUCTION**: Add a confirmation popover that appears when a user triggers an action. This is supported only for actions without an action parameter dialog. Use the IsActionCritical annotation on the action to enable the confirmation popover. Examples shown for XML annotations and CAP CDS annotations. Localize dialog text per app localization guidelines.

**TAGS**: fiori-elements, annotations, IsActionCritical, confirmation, CDS, XML, CAP

**STEP**: 1 — Verify action has no parameter dialog

**DESCRIPTION**: Confirm the target action does not use an action parameter dialog. The confirmation popover is supported only for actions without parameters. If the action has parameters, remove the parameter dialog or implement confirmation in a custom handler.

**LANGUAGE**: Notes

**CODE**:
```text
(Validation step — no code required)
```

**STEP**: 2 — Add XML annotation (local annotation file)

**DESCRIPTION**: Add the com.sap.vocabularies.Common.v1.IsActionCritical annotation with Bool="true" to the action in your local XML annotation file to enable the confirmation popover.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="GWSAMPLE_BASIC.GWSAMPLE_BASIC_Entities/RegenerateAllData">
        <Annotation Term="com.sap.vocabularies.Common.v1.IsActionCritical" Bool="true"/>
</Annotations>
```

**STEP**: 3 — Add CAP CDS annotation (if using CAP)

**DESCRIPTION**: If using CAP, add the Common.IsActionCritical annotation to the action in your CDS model. Use the following snippet in your CAP CDS annotations.

**LANGUAGE**: CDS

**CODE**:
```
 
annotate GWSAMPLE_BASIC.RegenerateAllData with @(
    Common.IsActionCritical : true
); CDS
				Annotation
```

**STEP**: 4 — ABAP CDS note

**DESCRIPTION**: There is no ABAP CDS sample available for this annotation in this documentation. Use the local XML annotation approach for ABAP-based projects.

**LANGUAGE**: ABAP CDS

**CODE**:
```text
No ABAP CDS annotation sample is available. Please use the local XML annotation.
```

**STEP**: 5 — Add action-specific messages and localize

**DESCRIPTION**: Apps can provide action-specific texts for the confirmation dialog. Implement localization according to your app’s localization setup. See the project localization documentation for details.

**LANGUAGE**: Notes

**CODE**:
```text
See Localization of UI Texts: localization-of-ui-texts-b8cb649.md
```
--------------------------------

**TITLE**: Adding ConnectedFields to a Table (SAP Fiori elements, OData V4)

**INTRODUCTION**: This guide shows how to represent two semantically related properties in a single table column while keeping each field individually editable by adding UI.ConnectedFields. Includes XML annotation, ABAP CDS, and CAP CDS examples. Applicable only to SAP Fiori elements for OData V4.

**TAGS**: fiori-elements-framework, OData V4, annotations, UI.ConnectedFields, CDS, ABAP, CAP, XML

**STEP**: 1 — Prerequisites and purpose

**DESCRIPTION**: Ensure your app is SAP Fiori elements for OData V4. ConnectedFields group multiple DataField annotations into a single annotated column with a template and a label. Use a qualifier to reference the connected field set in UI.LineItem.

**LANGUAGE**: TEXT

**CODE**:
```text
No code for this step. Prerequisite: SAP Fiori elements for OData V4.
```

**STEP**: 2 — XML Annotation: Define UI.ConnectedFields and expose it as a table column

**DESCRIPTION**: Add a UI.ConnectedFields annotation on the target entity. Provide Label, Template and Data mapping for each field using Core.Dictionary. Then reference the connected fields from UI.LineItem using UI.DataFieldForAnnotation and Target="@UI.ConnectedFields#<Qualifier>".

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="TravelService.Travel">
	<Annotation Term="UI.ConnectedFields" Qualifier="TripDates">
		<Record Type="UI.ConnectedFieldsType">
			<PropertyValue Property="Label" String="Business Trip Dates"/>
			<PropertyValue Property="Template" String="{BeginDate}/{EndDate}"/>
			<PropertyValue Property="Data">
				<Record Type="Core.Dictionary">
					<PropertyValue Property="BeginDate">
						<Record Type="UI.DataField">
							<PropertyValue Property="Value" Path="BeginDate"/>
						</Record>
					</PropertyValue>
					<PropertyValue Property="EndDate">
						<Record Type="UI.DataField">
							<PropertyValue Property="Value" Path="EndDate"/>
						</Record>
					</PropertyValue>
				</Record>
			</PropertyValue>
		</Record>
	</Annotation>
	<Annotation Term="UI.LineItem">
		<Collection>
			<Record Type="UI.DataFieldForAnnotation">
				<PropertyValue Property="Target" AnnotationPath="@UI.ConnectedFields#TripDates"/>
			</Record>
		</Collection>
	</Annotation>
</Annotations>
```

**STEP**: 3 — ABAP CDS Annotation: connected fields and line item entry

**DESCRIPTION**: In ABAP CDS, annotate the view (e.g., view Travel). Use @UI.connectedField (array) with name, qualifier, template, and groupLabel. Add @UI.lineItem entry of type #AS_CONNECTED_FIELDS referencing the valueQualifier to display the connected fields as a single column in the table.

**LANGUAGE**: ABAP

**CODE**:
```
annotate view Travel with {
    @UI.connectedField : [
        {
           name: 'Dates',
           qualifier: 'TripDates',
           template: '{BeginDate} / {EndDate}',
           groupLabel: 'Business Trip Dates'
        } 
    ] 
    
    @UI.lineItem: [
        {
            type: #AS_CONNECTED_FIELDS, 
            valueQualifier: 'TripDates'
        } 
    ]
}
```

**STEP**: 4 — CAP CDS Annotation: service-level annotation for ConnectedFields

**DESCRIPTION**: For CAP model annotation, annotate the service (e.g., service.Travel). Use UI.ConnectedFields with qualifier (#TripDates) containing Label, Template and Data where each field is a UI.DataField with Value. Then add UI.LineItem with a DataFieldForAnnotation Target referencing the connected fields.

**LANGUAGE**: CDS

**CODE**:
```
annotate service.Travel @(
    UI.ConnectedFields #TripDates: {
          Label: 'Business Trip Dates',
          Template: '{BeginDate} / {EndDate}',
          Data: {
              BeginDate: {
                  $Type: 'UI.DataField',
                  Value: BeginDate
                  
              },
              EndDate: {
                  $Type: 'UI.DataField', 
                  Value: EndDate}
          }
      },

    UI.LineItem: [
        {
          $Type: 'UI.DataFieldForAnnotation',
          Target: '@UI.ConnectedFields#TripDates'
        } 
    ]
)
```

**STEP**: 5 — Display behavior and horizontal alignment override

**DESCRIPTION**: By default, the content of the connected-fields column is left-aligned. You can override horizontal alignment using manifest settings for annotation-based table columns. See the referenced documentation for manifest configuration details.

**LANGUAGE**: TEXT

**CODE**:
```text
Default behavior: content is left-aligned.
Override method: use manifest settings to change horizontal alignment for annotation-based table columns (see "Overriding the Horizontal Alignment of Annotation-Based Table Columns").
```

**STEP**: 6 — Semantic key and editing status notes

**DESCRIPTION**: Adding a semantic key to connected fields does not affect editing status. See documentation on Editing Status and Handling Semantic Key Fields for behavior details when working with semantic key fields.

**LANGUAGE**: TEXT

**CODE**:
```text
Note: Adding a semantic key to connected fields does not affect editing status.
Refer to: "Editing Status" and "Handling Semantic Key Fields" for details.
```
--------------------------------

**TITLE**: Adding Custom Actions Using Extension Points (SAP Fiori elements)

**INTRODUCTION**: Step-by-step guide to add custom action buttons (list report global actions, table toolbar actions, object page header/table/form/footer actions) by implementing controller extensions and manifest.json entries for SAP Fiori elements (OData V2 and V4). Includes sample controller code, manifest fragments, and handler function templates. Preserve use of extensionAPI; avoid manipulating internal framework controls.

**TAGS**: fiori-elements, sapui5, extensionPoints, custom-actions, manifest.json, odata-v2, odata-v4, controller-extension

**STEP**: 1 — Caution and integration rule

**DESCRIPTION**: Use app extensions only when required. Always use SAP Fiori elements extensionAPI from your extension code. Do not manipulate internal controls, properties, models, or framework internals directly. After extension creation, UI placement and behavior is the app’s responsibility.

**LANGUAGE**: Plain

**CODE**:
```text
Caution:
Use app extensions with caution and only if you cannot produce the required behavior by other means, such as manifest settings or annotations. To correctly integrate your app extension coding with SAP Fiori elements, use only the `extensionAPI` of SAP Fiori elements.

After you've created an app extension, its display (control placement and layout) and system behavior (model and binding usage, busy handling) lies within the application's responsibility. SAP Fiori elements provides support only for the official `extensionAPI` functions. Don't access or manipulate controls, properties, models, or other internal objects created by the SAP Fiori elements framework.
```

**STEP**: 2 — Create controller extension files and handler functions (OData V2 & V4)

**DESCRIPTION**: Create controller extension files in your app. Typical app and file locations:
- App name: my_app
- Controller file names: MyListReportExt.controller.js (extends ListReport), MyObjectPageExt.controller.js (extends MainObjectPage), MySubObjectPageExt.controller.js (extends SubObjectPage)
- Location: my_app/webapp/ext/controller

Implement handler functions that will be invoked by the manifest-defined action press handlers. Use the extensionAPI inside handlers.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
sap.ui.define([], function() {
    return {
        onCustomAction1 : function(oEvent) { … },
        onCustomAction2 : function(oEvent) { … },
        …
    }
})
```

**STEP**: 3 — OData V2: Extend manifest.json for controllerExtensions and actions (list report and object page)

**DESCRIPTION**: Add custom actions under sap.ui5 → extends → extensions → sap.ui.controllerExtensions. Define entity set, Actions block, and parameters (id, text, press handler, requiresSelection, applicablePath, determining, global, command). The example snippets below show where to add actions for list report table toolbar, object page header, object page table toolbar, form actions, footer bar, and list report global actions. When using keyboard shortcuts, add sap.ui.commands mapping. To construct the "<ComponentName>#<Component ID without app ID prefix>" string, use the component name in sap.ui.generic.app pages and fetch the component ID via getController().getOwnerComponent().getId() or from a ComponentContainer and strip the app prefix.

**LANGUAGE**: XML

**CODE**:
```xml
...
"extends": {
    "extensions": {
        "sap.ui.commands": {
            "<ComponentName>#<Component ID without app ID prefix>": {
                "<CustomActionCommandName>": {
                    "shortcut": "Ctrl+G"
                }
            }
        },
        "sap.ui.controllerExtensions": {
            "sap.suite.ui.generic.template.ListReport.view.ListReport": {
                "controllerName": "my_app.ext.controller.ListReportExtension",
                    "sap.ui.generic.app": {
                    "<entity set>": {
                        "EntitySet": "<entity set>",
                            "Actions": {
                                "<Action 1>": {
                                    "id": "<id>",
                                    "text": "<button text>",
                                    "press": "<handler function>",
                                    "requiresSelection": <true| false >,
                                    "applicablePath": <path>,
                                    "command": "<CustomActionCommandName>"
                                 },
                                "<Action 2>": {
                                    ...
                                },
                            ...
                        }
                        ...
                    }
                }
            }
        }
    }
}
```

**LANGUAGE**: XML

**CODE**:
```xml
...
"extends": {
    "extensions": {
        "sap.ui.commands": {
            "<ComponentName>#<Component ID without app ID prefix>": {
                "<CustomCommandName>": {
                    "shortcut": "Ctrl+K"
                }
            }
        },
        "sap.ui.controllerExtensions": {
            ...
            "sap.suite.ui.generic.template.ObjectPage.view.Details#my_app::sap.suite.ui.generic.template.ObjectPage.view.Details:: <entity set>": {
                "controllerName": "my_app.ext.controller.DetailsExtension",
                    "sap.ui.generic.app": {
                    "<entity set>": {
                        "EntitySet": "<entity set>",
                            "Header" : {
                            "Actions": {
                                "<Action 1>": {
                                    "id" : "<id>",
                                    "text" : "<button text>",
                                    "press" : "<handler function>"
                                    "applicablePath": <path>,
                                    "command": "<CustomCommandName>"
                                },
                                "<Action 2>": { 
                                    ... 
                                }
                            }
                        },
...
```

**LANGUAGE**: XML

**CODE**:
```xml
...
"extends": {
  "extensions": {
    "sap.ui.controllerExtensions": {
      ...
      "sap.suite.ui.generic.template.ObjectPage.view.Details#my_app::sap.suite.ui.generic.template.ObjectPage.view.Details:: <entity set>":  {
        "controllerName": "my_app.ext.controller.DetailsExtension",
          "sap.ui.generic.app": {
            "<entity set>": {
              "EntitySet": "<entity set>",
              "Sections": {
                "<SmartTable Facet ID>": {
                  "id" : "<SmartTable Facet ID>",
                  "Actions": {
                    "<SmartTable Action 1>": {
                      "id" : "<id>",
                      "text" : "<button text>",
                      "press" : "<handler function>",
                      "applicablePath": <path>,
                      "requiresSelection": <true|false>
                    },
                    "<SmartTable Action 2>": { ... }
                  }
...
```

**LANGUAGE**: XML

**CODE**:
```xml
...
"extends": {
  "extensions": {
    "sap.ui.controllerExtensions": {
      ...
      "sap.suite.ui.generic.template.ObjectPage.view.Details": {
        "controllerName": "my_app.ext.controller.DetailsExtension",
          "sap.ui.generic.app": {
            "<entity set>": {
              "EntitySet": "<entity set>",
              "Sections": {
                "<Form Facet ID>": {
                  "id": "<Form Facet ID>",
                  "Actions": {
                    "<Action 1>": {
                      "id" : "<id>",
                      "text" : "<button text>",
                      "press" : "<handler function>"
                      "applicablePath": <path>,
                    },
                    "<Action 2>": { ... }
                  }
...
```

**LANGUAGE**: XML

**CODE**:
```xml
"sap.ui5": {
   "extends": {
      "extensions": {
         "sap.ui.controllerExtensions": {
            "sap.suite.ui.generic.template.ObjectPage.view.Details#my_app::sap.suite.ui.generic.template.ObjectPage.view.Details:: <entity set>":  {
               "controllerName": "my_app.ext.controller.ListReportExtension",
               "sap.ui.generic.app": {
                  "<entity set>": {
                     "EntitySet": "<entity set>",
                     "Actions": {
                        "<Action 1>": {
                           "id": "<id>",
                           "text": "<button text>",
                           "press": "<handler function>",
                           "determining": true
                        }
                     }
                  }
               }
            }
         }
      }
   }
}
```

**LANGUAGE**: XML

**CODE**:
```xml
"sap.ui5": {
   "extends": {
      "extensions": {
         "sap.suite.ui.generic.template.ObjectPage.view.Details#my_app::sap.suite.ui.generic.template.ObjectPage.view.Details:: <entity set>":  {
            "sap.suite.ui.generic.template.ObjectPage.view.Detail": {
               "controllerName": "my_app.ext.controller.DetailsExtension",
               "sap.ui.generic.app": {
                  "<entity set>": {
                     "EntitySet": "<entity set>",
                     "Header": {
                        "Actions": {
                           "<Action 1>": {
                              "id": "<id>",
                              "text": "<button text>",
                              "press": "<handler function>",
                              "applicablePath": <path>,
                              "determining": true
                           }
                        }
                     }
                  }
               }
            }
         }
      }
   }
}
```

**LANGUAGE**: XML

**CODE**:
```xml
...
"extends": {
   "extensions": {
      "sap.ui.controllerExtensions": {
         "sap.suite.ui.generic.template.ListReport.view.ListReport": {
            "controllerName": "my_app.ext.controller.ListReportExtension",
            "sap.ui.generic.app": {
               "<entity set>": {
                  "EntitySet": "<entity set>",
                  "Actions": {
                     "<Action 1>": {
                        "id" : "<id>",
                        "text" : "<button text>",
                        "press" : "<handler function>",
                     "global": <true|false>
                     },
                     "<Action 2>": {
                        ...
                     },
                     ...
                  }
               ...
```

**STEP**: 4 — Component ID construction (how to form "<ComponentName>#<Component ID without app ID prefix>")

**DESCRIPTION**: To map keyboard command entries in sap.ui.commands to a specific component use:
- <ComponentName> = the component name used in sap.ui.generic.app pages (e.g., sap.suite.ui.generic.template.ListReport)
- <Component ID without app ID prefix> = the component ID string with application prefix stripped. Obtain the full component id via the view or ComponentContainer and strip the app prefix.

**LANGUAGE**: Plain / JavaScript examples

**CODE**:
```text
Examples to get the component id:
- Using an XML view:
  Element.getElementById('STTA_MP::sap.suite.ui.generic.template.ListReport.view.ListReport::STTA_C_MP_Product').getController().getOwnerComponent().getId()
  where Element is required from module sap/ui/core/Element.

- Using ComponentContainer:
  Element.getElementById('__xmlview0-__clone0--host').getComponent()
  where '__xmlview0-__clone0--host' is the ComponentContainer ID.
```

**STEP**: 5 — OData V4: Declare actions under routing → targets → <target> → options → settings → controlConfiguration and define handler module

**DESCRIPTION**: For OData V4, define actions in manifest under routing targets controlConfiguration or content/header/footer actions. The action configuration supports press (handler), visible and enabled can be booleans or handler functions, text, and position (placement + anchor). The handler function name format is "<app ID from manifest>.<Folder Name>.<Script file>.<Method Name>". Create an ext folder and a CustomActions.js with functions that accept (oContext, aSelectedContexts).

**LANGUAGE**: XML

**CODE**:
```xml
"<Action name>": {
     "press": "<handler function>",
     "visible": <true|false|handler function>,
     "enabled": <true|false|handler function>,
     "text": "<button text>",
     "position": {
          "placement": <"Before"|"After">,
          "anchor": "<Anchor action name>"
     }
}
```

**LANGUAGE**: JSON

**CODE**:
```
"myCustomEnablement": {
     "press": "SalesOrder.ext.CustomActions.navigateExternal",
     "enabled": "SalesOrder.ext.CustomActions.enabledForCompletedOnly",
     "text": "Enabled for Completed"
}
```

**LANGUAGE**: JavaScript

**CODE**:
```javascript
enabledForCompletedOnly: function(oBindingContext, aSelectedContexts) {
     if (aSelectedContexts && aSelectedContexts.length === 1) {
          return true;
     }
    
    return false;
}
```

**LANGUAGE**: XML

**CODE**:
```xml
"controlConfiguration": {
     "<NavigationPropertyFromRootEntityType>/@com.sap.vocabularies.UI.v1.LineItem": {
          "actions": {
               "myCustomAction": {
                    "press": "TestApplication.ext.CustomActions.message"
                    ....
               }
          }
     }
}
```

**LANGUAGE**: Plain (file path instructions)

**CODE**:
```text
Create ext folder and CustomActions.js:
- Folder: webapp/ext
- File: webapp/ext/CustomActions.js
- Export methods that match manifest handler names, e.g., TestApplication.ext.CustomActions.message
```

**LANGUAGE**: JavaScript

**CODE**:
```javascript
sap.ui.define(
     [],
     function () {
          "use strict";
          return {
               message: function (oContext, aSelectedContexts) {
                    // oContext :  binding context of the current entity
                    // aSelectedContexts : array of binding contexts for selected items in case of table action
                    alert("message");
               },
          };
     }
);
```

**STEP**: 6 — Results / manifest.json placement examples (OData V4 table toolbar, object page header, footer, list report global, section and form toolbar actions)

**DESCRIPTION**: Use these manifest structures as concrete examples for routing target settings. Insert your action blocks under the appropriate target options.settings.content (header/footer) or controlConfiguration.

**LANGUAGE**: XML

**CODE**:
```xml
{
    "sap.ui5": {
        "routing": {
            "targets": {
                "<ListReportTargetName>": {
                    "options": {
                        "settings": {
                            "controlConfiguration": {
                                "@com.sap.vocabularies.UI.v1.LineItem": {
                                    "actions": {
                                        "<ActionName>": {
                                            "press": "<ApplicationId.FolderName.ScriptFilename.methodName>",
                                            "text": "<button text>",
                                            "enabled": <true|false|handler function>,
                                            "visible": <true|false|handler function>
                                        }
                                    }
                                }
                            }
                         }
                    }
                }
```

**LANGUAGE**: XML

**CODE**:
```xml
{
     "sap.ui5": {
          "routing": {
               "targets": {
                    "<ObjectPageTargetName>": {
                         "options": {
                               "settings": {
                                    "content": {
                                         "header": {
                                              "actions": {
                                                   "<ActionName>": {
                                                   }
                                              }
                                         }
                                    }
                               }
                         }
                    }
               }
          }
     }
}
```

**LANGUAGE**: XML

**CODE**:
```xml
"sap.ui5": {
     "routing": {
          "targets": {
               "<ObjectPageTargetName>": {
                    "options": {
                         "settings": {
                              "controlConfiguration": {
                                   <NavigationPropertyFromRootEntityType>/@com.sap.vocabularies.UI.v1.LineItem": {
                                        "actions": {
                                             "<ActionName>": {
                                             }
                                        }
                                   }
                              }
                         }
                    }
               }
          }
     }
}
```

**LANGUAGE**: XML

**CODE**:
```xml
"sap.ui5": {
     "routing": {
          "targets": {
               "<ObjectPageTargetName>": {
                    "options": {
                         "settings": {
                              "content": {
                                   "footer": {
                                        "actions": {
                                             "<ActionName>": {
                                                  ...
                                             }
                                        }
                                   }
                              }
                         }
                    }
               }
          }
     }
}
```

**LANGUAGE**: XML

**CODE**:
```xml
"sap.ui5": {
    "routing": {
        "targets": {
            "<ListReportTargetName>": {
                "options": {
                    "settings": {
                        "content": {
                            "header": {
                                "actions": {
                                    "<ActionName>": {
                                        ...
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}
```

**LANGUAGE**: XML

**CODE**:
```xml
"sap.ui5": {
        "routing": {
            "targets": {
                "SalesOrderManageObjectPage": {
                    "options": {
                        "settings": {
                            "enhanceI18n": "i18n/SalesOrderObjectPage.properties",
                            "controlConfiguration": {
                                "@com.sap.vocabularies.UI.v1.FieldGroup#OrderData": {
                                    "actions": {
                                        "customSectionAction": {
                                            "press": "SalesOrder.ext.CustomActions.alert",
                                            "visible": true,
                                            "enabled": true,
                                            "text": "Alert",
                                            "position": {
                                                "placement": "After",
                                                "anchor": "DataFieldForIntentBasedNavigation::SalesOrder::manageInline"
                                            }
                                        },
                                        "sectionAction2": {
                                            "press": "SalesOrder.ext.CustomActions.accountDetails",
                                            "visible": true,
                                            "enabled": true,
                                            "text": "Display account details",
                                            "position": {
                                                "placement": "Before",
                                                "anchor": "customSectionAction"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
```

**LANGUAGE**: XML

**CODE**:
```xml
"sap.ui5": {
    "routing": {
        "targets": {
            "SalesOrderManageObjectPage": {
                "options": {
                    "settings": {
                        "controlConfiguration": {
                            "@com.sap.vocabularies.UI.v1.FieldGroup#OrderData": {
                                "actions": {
                                    "customSectionAction": {
                                        "press": "SalesOrder.ext.CustomActions.alert",
                                        "visible": true,
                                        "enabled": false,
                                        "text": "Action on Form",
                                        "inline": true
                                    },
                                    "customSectionAction2": {
                                        "press": "SalesOrder.ext.CustomActions.alert",
                                        "visible": true,
                                        "enabled": true,
                                        "text": "Action not on Form"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}
```

**STEP**: 7 — Notes and tips

**DESCRIPTION**: Keep these operational notes while implementing:
- Action names and id values should be identical.
- requiresSelection defaults to true for table toolbar actions.
- determining is deprecated: avoid using determining buttons.
- If you add a command (keyboard shortcut), the event handler parameter signature can change; adapt code accordingly.
- Do not override default keyboard shortcuts (e.g., Ctrl+E, Ctrl+Enter).

**LANGUAGE**: Plain

**CODE**:
```text
Notes:
- Action name == id (use identical values).
- requiresSelection default: true (table toolbar).
- determining default: false (deprecated).
- When adding keyboard shortcut mapping (command), event handler parameter structure may change — update handler code if required.
- Do not override framework default keyboard shortcuts (e.g., Ctrl+E, Ctrl+Enter).
```

**STEP**: 8 — Example explorer and live demos

**DESCRIPTION**: For interactive examples and live samples, explore the SAP Fiori development portal "Standard Floorplans - Extensions - Extensions for Object Pages - Custom Action".

**LANGUAGE**: Plain

**CODE**:
```text
Live demo:
https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/topic/floorplanObjectPage/customAction
```
--------------------------------

**TITLE**: Adding Custom Fields to the Filter Bar (SAP Fiori Elements — V2 & V4)

**INTRODUCTION**: Practical, code-focused guide to add and manage custom filter fields in the Smart Filter Bar for SAP Fiori elements (OData V2 and V4). Includes manifest.json fragments, XML fragments, controller extension code, export customization, custom operator registration and implementation, required-field handling, and metadata binding examples. Use these snippets directly in your app extension files and manifest.

**TAGS**: fiori-elements-framework, filter-bar, custom-filters, sapui5, manifest, extension, smartfilterbar, manifest.json

STEP: 1 — Add View & Controller Extension (OData V2)
DESCRIPTION: Extend ListReport to add a view fragment into the SmartFilterBar and register a controller extension. Place registration in manifest.json under "extends". Replace <myEntityset>, <myNamespace>, and controller name accordingly.
LANGUAGE: JSON
CODE:
```json
"extends": {
                        "extensions": {
                        "sap.ui.controllerExtensions": {
                          "sap.suite.ui.generic.template.ListReport.view.ListReport": {
                            "controllerName": "my_app.ext.controller.ListReportExtension"
                          }
                        },
                "sap.ui.viewExtensions": { 
                                        "sap.suite.ui.generic.template.ListReport.view.ListReport": {
                                    "SmartFilterBarControlConfigurationExtension|<myEntityset>": {
                                              "className": "sap.ui.core.Fragment",
                                              "fragmentName": "<myNamespace>.ext.fragment.CustomFilter",
                                              "type": "XML"
                                          },
```

STEP: 2 — Mandatory Extension Methods (OData V2)
DESCRIPTION: Implement these extension methods in your controller extension. Purpose:
- onBeforeRebindTable: evaluate custom fields and add filters to bindingParameters.
- getCustomAppStateData: serialize state of custom controls into provided object for navigation/variant handling.
- restoreCustomAppStateData: restore values from saved custom app state.
- onInitSmartFilterBarExtension: initialize default values or bind controls to the filter bar.
Also note SAP Fiori elements calls corresponding extension variants: onBeforeRebindTableExtension, getCustomAppStateDataExtension, restoreCustomAppStateDataExtension, onInitSmartFilterBarExtension.
LANGUAGE: JavaScript
CODE:
```javascript
// Implement these methods inside your controller extension
// onBeforeRebindTable: add filters to oBindingParameters
// getCustomAppStateData: write custom filters into oCustomDataObject
// restoreCustomAppStateData: read from oCustomDataObject and set UI state
// onInitSmartFilterBarExtension: setup initial states, bindings or listeners
```

STEP: 3 — Modify Exported Filter Values (OData V2)
DESCRIPTION: Use onBeforeExportTableExtension in the controller extension to transform exported filter representation (e.g., convert internal filter OverallCost <= 1000 to user-friendly "Cost = Low"). Add this code to your controller extension file.
LANGUAGE: JavaScript
CODE:
```javascript
sap.ui.define([
    "sap/ui/core/Element",
>   "sap/ui/export/util/Filter"
> ], function (Element, ExportFilter) {
>   "use strict";
> 
>   return {
>           onInit: function () {
>                 //...
>            },
>            /**
>             * This extension method modifies the "Cost" filter in the exported file.
>             * 
>             * Removes the existing filter with label "OverallCost" and value "<=1000",
>             * and adds a new filter with label "Cost" and value "Low"
>            * 
>            * @param oExportParams 
>            * @returns 
>            */
>            onBeforeExportTableExtension: function (oExportParams) {
>                if (!oExportParams.includeFilterSettings) {
>                      return;
>                  }
>                // Array of filters in the exported file
>                var aFilterSettings = oExportParams.filterSettings;
>                 // Find the "Cost" combobox in smart filter bar
>            var COST_COMBOBOX_ID = "STTA_MP::sap.suite.ui.generic.template.ListReport.view.ListReport::STTA_C_MP_Product--CustomFilter-OverallCost-combobox";
>                var oCostCombobox = Element.getElementById(COST_COMBOBOX_ID);
>                if (oCostCombobox && oCostCombobox.getValue()) {
>                     var oRawValue, sNewCostValue;
>                     for (var i = 0; i < aFilterSettings.length; i++) {
>                          var oCurrentFilter = aFilterSettings[i];
>                          // Find the filter with property "OverallCost"
>                          if (oCurrentFilter.getProperty() === "OverallCost") {
>                               //Store the raw value
>                               oRawValue = oCurrentFilter.rawValues[0];
>                              //Remove the current filter from the filters array
>                               aFilterSettings.splice(i, 1);
>                               break;
>                             }
>                      }
>                      // Derive Cost category (Low / High) from the raw value
>                      if (oRawValue.operator === "<=" && oRawValue.value === "1000") {
>                          sNewCostValue = "Low";
>                      } else {
>                         sNewCostValue = "High";
>                      }
> 
>                      //Create a new export filter with the new label and value
>                      var sProperty = "OverallCost",
>                          sLabel = "Cost",
>                          oNewRawValue = {operator: "==", value: sNewCostValue},
>                          oCostFilter = new ExportFilter(sProperty, oNewRawValue, sLabel);
> 
>                     //Add the updated filter to the filter settings array
>                     aFilterSettings.push(oCostFilter);
>                 }
>          }
>      };
> });
>  in the controller extension.
>                      This extension method is supported for exporting tables on analytical list
>                      pages, list reports and object pages.
```

STEP: 4 — Configure Custom Filter Field in manifest.json (OData V4) — Properties Template
DESCRIPTION: Define a custom filter field configuration under controlConfiguration in manifest.json. Replace placeholders: <Key_of_filter_field>, <Path to XML template>, <ProjectFolder>, property path, label and position. Use "key" equal to metadata property if using predefined operators; else any unique key when using custom operators but provide "property".
LANGUAGE: JSON
CODE:
```json
"<Key_of_filter_field>": {
  // Must be the exact technical name of the underlying filter field if the custom filter uses predefined operators.
  // For a custom filter using custom operators, this can be any unique key in the manifest.json file.
 
  "label": "<Static text or i18n binding>",
  // Label displayed in the UI. Can be a static string (e.g., "MyText") or a i18n binding (e.g., "{i18n>MyCustomLabel}").
 
  "property": "<Path to filter property>",
  // Only required for custom filters using custom operators.
  // Specifies the full path to the property to be filtered.
  // Example: "Rating"
 
  "template": "<Path to XML template>",
  // Path to the XML fragment that contains the filter control.
  // Example: "SalesOrder.ext.CustomRatingFilter".
 
  "required": true | false,
  // Defines whether the filter field is mandatory.
  // Default: false.
 
  "availability": "Default" | "Hidden" | "Adaptation",
  // Determines the visibility of the filter field:
  // - Default: shown in filter bar.
  // - Adaptation: available only via the Adapt Filters dialog.
  // - Hidden: not visible anywhere.
 
  "position": {
    "placement": "Before" | "After",
    "anchor": "<Key_of_filter_field>"
    // Defines the position of the custom filter field relative to another field.
    // For annotation-based filters, use the annotation key, e.g. "SalesOrder"
  }
}
```

STEP: 5 — Bind Custom Control to filterValues Model
DESCRIPTION: Bind your control's value property to the relative path {filterValues>} so SAP Fiori elements handles variant management and app state. The filterValues model is provided internally and must be used for value-provider bindings.
LANGUAGE: XML / Annotation
CODE:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:l="sap.ui.layout">
    <HBox alignItems="Center" width="100%">

<!--     // ...bind it directly (and use a filter value type) (recommended) // -->
         <RatingIndicator id="MyCustomRatingIndicatorId"
             core:require="{
                 Value: 'sap/fe/macros/filter/type/Value'
             }"
             value="{path: 'filterValues>', type: 'Value'}"
         />

<!--     // Example for adapting the used operator, using GT (greater than) instead of default EQ -->
<!--     <RatingIndicator-->
<!--         id="MyCustomRatingIndicatorId"--> 
<!--         core:require="{-->
<!--             Value: 'sap/fe/macros/filter/type/Value'-->
<!--         }"-->
<!--         value="{path: 'filterValues>', type: 'Value', formatOptions: { operator: 'GT' }}"-->
<!--     />-->

    </HBox>
</core:FragmentDefinition>
```

STEP: 6 — Handle Value Change Dynamically (setFilterValues)
DESCRIPTION: Use setFilterValues extension API to update filters when control changes. Template must include a control with change event that calls a handler which calls this.setFilterValues(<key>, <value>) or this.setFilterValues(<key>) to clear.
LANGUAGE: XML
CODE:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:l="sap.ui.layout">
    <HBox alignItems="Center" core:require="{handler: <ProjectFolder>/ext/CustomRating'}" width="100%">

        <RatingIndicator id="MyCustomRatingIndicatorId" 
            value="{= ${filterValues>} ? ${filterValues>}.substring(1) : null }" 
            change="handler.onValueChanged" /> 

        <core:Icon src="sap-icon://reset" 
            press="handler.onReset" 
            class="sapUiSmallMarginBegin" />
            
    </HBox>
</core:FragmentDefinition>
```

STEP: 7 — Handler for Change & Reset (JS)
DESCRIPTION: Example handler module that uses extension API methods to update custom filter values.
LANGUAGE: JavaScript
CODE:
```javascript
sap.ui.define(["sap/ui/model/Filter", "sap/ui/model/FilterOperator"], function(Filter, FilterOperator) {
  "use strict";
  return {
    onValueChanged: function(oEvent) {
        this.setFilterValues("Rating", oEvent.getParameter("value"));
    },
    onReset: function(oEvent) {
        this.setFilterValues("Rating");
    }
  };
});
```

STEP: 8 — Custom Operators: manifest.json Setup (OData V4)
DESCRIPTION: For custom operators, add entries under "sap.fe" -> "macros" -> "filter" -> "customFilterOperators" with the function identifier string so Fiori elements recognizes them.
LANGUAGE: JSON
CODE:
```json
"sap.fe": {
    "macros": 
        "filter": {          
            "customFilterOperators": [{                     
                "name": "SalesOrder.ext.CustomRating.onMultiValueRatingLevels"
              }]
        }
   }
}
```

STEP: 9 — Custom Operator Template & Registration (OData V4)
DESCRIPTION: Example manifest snippet showing custom filter configuration where "property" is specified (required for custom operators) and template points to fragment. Replace placeholders accordingly.
LANGUAGE: JSON
CODE:
```json
    ...
"targets": {
                "SalesOrderManageList": {
                    "type": "Component",
                    "id": "SalesOrderManageList",
                    "name": "sap.fe.templates.ListReport",
                    "options": {
                        "settings" : {
                            "contextPath" : "/SalesOrderManage",
                            "controlConfiguration" : {
                                 "@com.sap.vocabularies.UI.v1.SelectionFields" : {
                                    "navigationProperties": ["_Partner", "_DistributionChannel"],
                                    "filterFields": {
                                        "Rating": {
                                            "label": "{i18n>CustomRatingFilter}",
                                            "availability": "Default",
                                            "template": "<ProjectFolder>.ext.CustomRatingFilter",
                                            "property": "Rating",
                                            "required": true,
                                            "position": {
                                                "placement": "After",
                                                "anchor": "SalesOrder"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
...
```

STEP: 10 — Custom Operator Fragment Example (MultiComboBox)
DESCRIPTION: Use macro type 'sap.fe.macros.filter.type.MultiValue' and specify formatOptions.operator referencing your custom operator function. The operator receives an array of values and must return a sap.ui.model.Filter (masks multi-value/multi-property logic).
LANGUAGE: XML
CODE:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m">
  <MultiComboBox
    width="100%"
    selectedKeys="{path: 'filterValues>', type: 'sap.fe.macros.filter.type.MultiValue', formatOptions: { operator: 'SalesOrder.ext.onMultiValueRatingLevels' }}"
  >
    <layoutData>
      <FlexItemData growFactor="1" />
    </layoutData>
    <items>
      <core:Item key="low" text="low" />
      <core:Item key="medium" text="medium" />
      <core:Item key="high" text="high" />
    </items>
  </MultiComboBox>
</core:FragmentDefinition>
```

STEP: 11 — Implement Custom Operator Function
DESCRIPTION: Example implementation of a custom operator that converts user selections (low/medium/high) into model Filters and combines them with OR. Ensure you import sap.ui.model.Filter and FilterOperator where used.
LANGUAGE: JavaScript
CODE:
```javascript
onMultiValueRatingLevels: function (values) {
    const filters = [];

    values.forEach((value) => {
        switch (value) {
            case "low":
                filters.push(new Filter({ path: "Rating", operator: FilterOperator.EQ, value1: 1 }));
                break;
            case "medium":
                filters.push(new Filter({ path: "Rating", operator: FilterOperator.EQ, value1: 2 }));
                filters.push(new Filter({ path: "Rating", operator: FilterOperator.EQ, value1: 3 }));
                filters.push(new Filter({ path: "Rating", operator: FilterOperator.EQ, value1: 4 }));
                break;
            case "high":
                filters.push(new Filter({ path: "Rating", operator: FilterOperator.EQ, value1: 5 }));
                break;
            default:
                return null;
        }
    });

    return new Filter({
        filters: filters
    });
}
```

STEP: 12 — Mark Custom Filter Required & Visualize ValueState
DESCRIPTION: Mark a custom filter as required in manifest.json (required = true). To show dynamic validation (e.g., red frame when empty), bind valueState to a formatter in a handler module. Example XML fragment and handler implementation below.
LANGUAGE: XML
CODE:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m">
    <Input
        core:require="{
            handler: 'SalesOrder/ext/CustomRating',
            Value: 'sap/fe/macros/filter/type/Value'
        }"
        value="{path: 'filterValues>', type: 'Value', formatOptions: { operator: 'Contains' }}"
        valueState="{path: 'filterValues>', formatter: 'handler.onFilterInputFormatValue'}"
        placeholder="{i18n>customStringFilterPlaceholder}"
    />
</core:FragmentDefinition>
```

LANGUAGE: JavaScript
CODE:
```javascript
sap.ui.define(["sap/ui/core/ValueState"], function (ValueState) {
    "use strict";

    return {
        // this handler needs to be registered in the custom XML's input field
        onFilterInputFormatValue: function (sValue) {
            if (!sValue) {
                return ValueState.Error;
            } else {
                return ValueState.None;
            }
        }
    };
});
```

STEP: 13 — Custom Filter Fields with Metadata Binding
DESCRIPTION: Use metadata (metaModel) bindings to derive labels or other text for custom filters, and configure property, template and position in manifest.json.
LANGUAGE: JSON
CODE:
```json
"MyCustomSoldToPartyThing": {
  "label": "{metaModel>/SalesOrderManage/SoldToParty@com.sap.vocabularies.Common.v1.Label}",
  "property": "Rating",
  "template": "SalesOrder.ext.CustomSoldToParty",
  "required": true,
  "position": {
        "placement": "After",
        "anchor": "MyCustomRatingThing"
    }
}
```

STEP: 14 — Notes, Restrictions & Best Practices (Actionable)
DESCRIPTION:
- Prefer annotations/manifest settings over app extensions; use extensionAPI only.
- Bind value-providing property of custom control to {filterValues>} to enable variant and app state handling.
- For predefined-operator custom filters: key must match metadata property name; do not specify property in manifest.
- For custom-operator filters: key must be unique and property must be specified (points to metadata property used). If a custom operator involves multiple properties, manifest "property" accepts only one property (possible limitation in multi-entity scenarios).
- Register custom operator identifiers under sap.fe -> macros -> filter -> customFilterOperators.
LANGUAGE: PlainText
CODE:
```text
- Use only extensionAPI functions for integration with SAP Fiori elements.
- Implement onBeforeRebindTable / getCustomAppStateData / restoreCustomAppStateData / onInitSmartFilterBarExtension where needed.
- Bind controls to {filterValues>} for variant and navigation persistence.
- Register custom operator functions in manifest.json so Fiori elements recognizes them.
```

--------------------------------

**TITLE**: Adding Custom Filters to Overview Page (OVP) — SAP Fiori Elements

**INTRODUCTION**: This guide shows how to add custom filter controls to the global SmartFilterBar on an OVP overview page. It covers: creating an XML fragment for custom filter UI, implementing controller extension functions to produce filters and persist/restore app state, and wiring the fragment/controller in manifest.json.

**TAGS**: fiori-elements-framework, SAPUI5, OVP, smartfilterbar, filters, manifest.json, extension

**STEP**: 1 — Create view extension fragment (customFilter.fragment.xml)

**DESCRIPTION**: Create an XML fragment (e.g., customFilter.fragment.xml) that extends the SmartFilterBar by adding custom filter controls. Define these properties on each smartfilterbar:ControlConfiguration:
- groupId: associates the custom control with a filter group (falls back to default group if groupId not present).
- key: entity property name used for filter criteria.
- visibleInAdvancedArea: boolean to show control in advanced area.
- Input id: element id to retrieve/set value in controller.

Place the fragment in your extension namespace and reference it via manifest (see Step 3).

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns="sap.m" 
                         xmlns:smartfilterbar="sap.ui.comp.smartfilterbar" 
                         xmlns:core="sap.ui.core">
    <!-- Product ID Filter -->
    <smartfilterbar:ControlConfiguration groupId="_BASIC" key="ProductID" label="Product ID (Extension)" visibleInAdvancedArea="true">
        <smartfilterbar:customControl>
            <Input id="ProductID" type="Text"/>
        </smartfilterbar:customControl>
    </smartfilterbar:ControlConfiguration>

    <smartfilterbar:ControlConfiguration groupId="GlobalFilters" key="SalesOrderID" label="Sales Order ID (Extension)" visibleInAdvancedArea="false">
        <smartfilterbar:customControl>
            <Input id="SalesOrderID" type="Text"/>
        </smartfilterbar:customControl>
    </smartfilterbar:ControlConfiguration>
</core:FragmentDefinition>
```

**STEP**: 2 — Create controller extension (customFilter.controller.js)

**DESCRIPTION**: Implement controller extension methods on your overview page controller extension. Required functions:
- getCustomFilters(): read values from fragment inputs and return a sap.ui.model.Filter (combined with AND) or undefined if none.
- getCustomAppStateDataExtension(oCustomData): store custom input values into the app state object (oCustomData).
- restoreCustomAppStateDataExtension(oCustomData): restore saved values from oCustomData back into the custom inputs.

Ensure sap.ui.model.Filter (or Filter from "sap/ui/model/Filter") is available/imported in your controller module.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
getCustomFilters: function () {
    var oValue1 = this.oView.byId("ProductID").getValue();
    var oValue2 = this.oView.byId("SalesOrderID").getValue();
    var aFilters = [],
        oFilter1,
        oFilter2;

    if (oValue1) {
        oFilter1 = new Filter({
            path: "ProductID",
            operator: "EQ",
            value1: oValue1
        });
        aFilters.push(oFilter1);
    }

    if (oValue2) {
        oFilter2 = new Filter({
            path: "SalesOrderID",
            operator: "EQ",
            value1: oValue2
        });
        aFilters.push(oFilter2);
    }

    if (aFilters && aFilters.length > 0) {
        return new Filter(aFilters, true);
    }
}
```

**LANGUAGE**: JavaScript

**CODE**:
```javascript
getCustomAppStateDataExtension: function (oCustomData) {
    // The content of the custom field will be stored in the app state,
    // so that it can be restored later, for example after a back navigation.
    // The developer has to ensure that the content of the field is stored
    // in the object that is returned by this method.
    if (oCustomData) {
        var oCustomField1 = this.oView.byId("ProductID");
        var oCustomField2 = this.oView.byId("SalesOrderID");

        if (oCustomField1) {
            oCustomData.ProductID = oCustomField1.getValue();
        }
        if (oCustomField2) {
            oCustomData.SalesOrderID = oCustomField2.getValue();
        }
    }
}
```

**LANGUAGE**: JavaScript

**CODE**:
```javascript
restoreCustomAppStateDataExtension: function (oCustomData) {
            //in order to restore the content of the custom field in the filter bar, for example after a back navigation,
            //an object with the content is handed over to this method and the developer has to ensure that the content of the custom field is set accordingly
            //also, empty properties have to be set
            if (oCustomData) {

                if (oCustomData.ProductID) {
                    var oCustomField1 = this.oView.byId("ProductID");
                    oCustomField1.setValue(oCustomData.ProductID);
                }

                if (oCustomData.SalesOrderID) {
                    var oCustomField2 = this.oView.byId("SalesOrderID");
                    oCustomField2.setValue(oCustomData.SalesOrderID);
                }
            }

        },
```

**STEP**: 3 — Register fragment and controller in manifest.json

**DESCRIPTION**: Add your controller extension and viewExtension fragment under "extends" -> "extensions". Set sap.ovp global filter configuration (ensure the same entity type / set is used in viewExtensions and globalFilterEntitySet / globalFilterEntityType). Note: globalFilterEntityType is deprecated as of SAPUI5 1.54 — prefer globalFilterEntitySet.

Add the following sample configuration to manifest.json (update controllerName, fragmentName, and entity set/type to your app values).

**LANGUAGE**: JSON

**CODE**:
```json
"extends": {
    "extensions": {
        "sap.ui.controllerExtensions": {
            "sap.ovp.app.Main": {
                "controllerName": "my_app.ext.controller.OverViewPageExt"
            }
        },
        "sap.ui.viewExtensions": {
            "sap.ovp.app.Main": {
                "SmartFilterBarControlConfigurationExtension|GlobalFilters": {
                    "className": "sap.ui.core.Fragment",
                    "fragmentName": "sap.ovp.demo.ext.customFilter",
                    "type": "XML"
                }
            }
        }
    }
},
"sap.ovp": {
    "globalFilterModel": "salesOrder",
    "globalFilterEntityType": "GlobalFilters", //Deprecated since SAPUI5 1.54.
    "globalFilterEntitySet": "GlobalFilters",  //Available from SAPUI5 1.54.
    ...
}
```
--------------------------------

**TITLE**: Adding Custom Input Fields to the Mass Edit Dialog (OData V2 & V4)

**INTRODUCTION**: Instructions and actionable code examples to add custom input fields to the Mass Edit (Mass Edit / Multi-Edit) dialog in SAP Fiori Elements for both OData V2 and OData V4. Includes manifest changes, fragment XML examples, and controller extension for custom save handling.

**TAGS**: fiori-elements-framework, mass-edit, multi-edit, manifest, sap.ui5, ViewExtension, customFragment, controller-extension, OData V2, OData V4

STEP: 1 — OData V2: Add MultiEditFieldsExtension via ViewExtension in manifest

DESCRIPTION:
- Add a ViewExtension entry named "MultiEditFieldsExtension|<Entity>" under sap.ui5 -> extends -> extensions -> sap.ui.viewExtensions in manifest.json.
- Controls in custom extensions must be surrounded by a GroupElement.
- Provide stable control IDs; handle input values via beforeMultiEditSaveExtension in the application extension/controller.
- ViewExtension is supported for both annotationPath and visibleTable column scenarios.
- Example fragmentName values show typical extension fragment module paths.

LANGUAGE: JSON

CODE:
```json
"sap.ui5": {
    "extends": {
        "extensions": {
            "sap.ui.viewExtensions":{
                "sap.suite.ui.generic.template.ListReport.view.ListReport":{
                    "MultiEditFieldsExtension|STTA_C_SO_SalesOrder_ND": {  // MultiEditFieldsExtension + Entity
                        "className": "sap.ui.core.Fragment",
                        "fragmentName": "STTA_SO_ND.ext.fragments.MultiEditFieldsExtension",
                        "type": "XML"
                    }
                }
            }
        }
    }
}
```

STEP: 2 — OData V2: MultiEdit + quickVariantSelectionX example (using key identifier)

DESCRIPTION:
- When using quickVariantSelectionX, append the key identifier to the MultiEditFieldsExtension fragment key: "MultiEditFieldsExtension|<Entity>|<key>".
- Enable multiEdit via tableSettings.multiEdit.enabled = true for the selected variant.
- Provide stable IDs in fragments and ensure GroupElement wrapping.

LANGUAGE: JSON

CODE:
```json
"sap.ui5": {
    "extends": {
        "extensions": {
            "sap.ui.viewExtensions":{
                "sap.suite.ui.generic.template.ListReport.view.ListReport":{
                    "MultiEditFieldsExtension|C_STTA_SalesOrder_WD_20|1": {  // Key identifier need to be added at the end along with pipe.
                        "className": "sap.ui.core.Fragment",
                        "fragmentName": "ManageSalesOrderWithTableTabs.ext.fragments.MultiEditFieldsExtension",
                        "type": "XML"
                        }
                    }
                }
            }
        }
    }
}
"sap.ui.generic.app": {
    "pages": [{
        "entitySet": " C_STTA_SalesOrder_WD_20",
        "component": {
            "name": "sap.suite.ui.generic.template.ListReport",
            "list": true,
            "settings": {
                "quickVariantSelectionX": {
                    "showCounts": true,
                    "variants": {
                        "0": {
                            "key": "1", // <-- key identifier  
                            "annotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant#Expensive",
                            "tableSettings": {
                                "multiEdit":{
                                    "enabled":true
                                },
                            }
                        },
                    }
                }
            }
        }
    }]
}
```

STEP: 3 — OData V2: MultiEditFieldsExtension fragment XML

DESCRIPTION:
- Example fragment to be referenced by fragmentName in the manifest.
- Wrap controls inside a sap.ui.comp.smartform:GroupElement.
- Provide stable IDs for controls.

LANGUAGE: XML

CODE:
```xml
<core:FragmentDefinition xmlns:sfo="sap.ui.comp.smartform" xmlns:core="sap.ui.core" xmlns="sap.m">
    <sfo:GroupElement>
        <Label text="Rating Bar" labelFor="RI_default"/>
        <RatingIndicator id="RI_default" maxValue="5" class="sapUiSmallMarginBottom" value="4"/>
    </sfo:GroupElement>
</core:FragmentDefinition>
```

STEP: 4 — OData V4: Define customFragment in manifest.json

DESCRIPTION:
- For OData V4, define the custom fragment path using options -> settings -> controlConfiguration -> <entity>/@com.sap.vocabularies.UI.v1.LineItem -> tableSettings -> enableMassEdit -> customFragment.
- Controls in custom extensions must be surrounded by a FormContainer.
- Provide stable IDs for inputs so controller extension can access them.

LANGUAGE: JSON

CODE:
```json
"options": {
    "settings": {
        "contextPath": "/RootEntity",
        "variantManagement": "Control",
        "controlConfiguration": {
            "_Child/@com.sap.vocabularies.UI.v1.LineItem": {
                "tableSettings": {
                    "type": "GridTable",
                    "enableMassEdit":{
                        "customFragment": "sap.fe.core.fpmExplorer.ext.fragment.customMassEdit"
                    }
                }
            }
        }
    }
}
```

STEP: 5 — OData V4: custom fragment XML (FormContainer wrapper)

DESCRIPTION:
- Fragment referenced by customFragment must wrap controls inside a form:FormContainer and provide stable IDs for controls so the controller extension can read them.

LANGUAGE: XML

CODE:
```xml
<core:FragmentDefinition xmlns:form="sap.ui.layout.form" xmlns:core="sap.ui.core" xmlns="sap.m">
    <form:FormContainer>
        <form:formElements>
            <form:FormElement label="Execute with the custom Save">
                <form:fields>
                    <CheckBox id="myCheckBox"/>
                </form:fields>
            </form:FormElement>
        </form:formElements>
    </form:FormContainer>
</core:FragmentDefinition>
```

STEP: 6 — OData V4: Implement customMassEditSave in controller extension

DESCRIPTION:
- Implement customMassEditSave inside the list report or object page controller extension to replace/augment the default mass-edit save behavior.
- aParameters contains: aContexts (selected contexts) and oUpdateData (dictionary of propertyPath -> updated value).
- Use Core.byId("<fragmentPrefix>--<controlId>") to access controls inside the custom fragment. In this example, the fragment ID prefix is "customMassEdit" and checkbox id is "myCheckBox".
- If custom action is executed successfully, return true to prevent default mass-edit save; otherwise return false to allow default behavior.

LANGUAGE: JavaScript

CODE:
```javascript
sap.ui.define(
    [
        "sap/ui/core/mvc/ControllerExtension",
        "sap/m/MessageToast",
        "sap/ui/core/Core"
    ],
    function (ControllerExtension, Filter, FilterOperator, IllustratedMessage, IllustratedMessageType, MessageToast, Core) {
        "use strict";

        return ControllerExtension.extend("sap.fe.core.fpmExplorer.OPExtend", {
            override: {
                editFlow: {
                    customMassEditSave: async function (aParameters) {
                        // aParameters.aContexts: array containing the selected contexts for the mass edit
                        // aParameters.oUpdateData: a dictionary containing the propertyPath and its updated value
                        
                        //Retrieve the control within the custom fragment
                        const isSelected = Core.byId("customMassEdit--myCheckBox").getSelected();

                        //Execute the custom save action if selected
                        if (isSelected){
                            await this.base.editFlow
                            .invokeAction("Service.customUpdateAction", {
                                contexts: aParameters.aContexts,
                                parameterValues: aParameters.oUpdateData
                            })
                            .catch(function (e){
                                MessageToast.show("Custom save failed");
                            });
                        }
                        //Do not execute the default mass-edit if custom save was selected
                        return isSelected;
                    }
                }
            }
        });
    }
);
```
--------------------------------

**TITLE**: Adding Custom Messages via securedExecution (SAP Fiori elements)

**INTRODUCTION**: This guide shows how to add and display custom transition messages from template extension code by using the extensionAPI securedExecution method together with the SAPUI5 Messaging API. Use these patterns to create persistent transition messages that the framework displays after a securedExecution busy session completes.

**TAGS**: fiori-elements, securedExecution, Messaging, sap.ui.core.Messaging, extensionAPI, odata-v2, odata-v4

**STEP**: Concept / Behavior Overview

**DESCRIPTION**: Use extensionAPI.securedExecution to start a busy session. At busy-session start, the framework removes previous transition messages. While the busy session runs, add messages to the SAPUI5 Messaging; when the busy session ends, collected transition messages are displayed automatically according to severity.

- Transition messages: create by setting persistent: true on sap.ui.core.message.Message. The Messaging API does not auto-delete transition messages; the Fiori elements framework deletes them at defined points (for example, at the start of a subsequent busy session).
- Non-transition messages: persistent: false messages are controlled by the Messaging API and are removed automatically when their bound entity is reloaded.
- Use mParameters.sActionLabel when calling securedExecution to set action label text; note that for a single transition info message sActionLabel may have no effect because a message toast is shown.

**LANGUAGE**: Text

**CODE**:
```text
Concept summary:
- Use extensionAPI.securedExecution(fnFunction, mParameters) to group operations into a busy session.
- Add messages during the busy session via sap.ui.core.Messaging.
- Use persistent: true on messages to make them transition messages (framework-controlled lifetime).
```

**STEP**: OData V2 — Async operation example (create a transition message after read)

**DESCRIPTION**: Wrap an asynchronous operation in a function that returns a Promise. Inside success callback, construct a sap.ui.core.message.Message with persistent: true and add it via Messaging.addMessages. Then call this.extensionAPI.securedExecution(fnFunction, mParameters). Import "Messaging" from "sap/ui/core/Messaging" where required.

- mParameters.sActionLabel: set to the UI label or custom text to indicate the action that triggered the busy session.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
onCustomButtonPressed: function(oEvent){
  var oSource = oEvent.getSource();
  var oModel = oSource.getModel();
  var sBindingPath = ...; // binding path to retrieve some information
  var fnFunction = function(){
    return new Promise(function(fnResolve, fnReject){
      oModel.read(sBindingPath, {
        success: function(oResponse){
          var oMessage = new sap.ui.core.message.Message({
            message: "We have received the following response: " + oResponse,
            persistent: true, // create message as transition message
            type: sap.ui.core.MessageType.Success
          });
          //"Messaging" required from module "sap/ui/core/Messaging";
          Messaging.addMessages(oMessage);
          fnResolve();
        },
        error: fnReject
    });  
  };
  var mParameters = {
        sActionLabel:  oSource.getText() // or "Your custom text" 
   };
  this.extensionAPI.securedExecution(fnFunction, mParameters);
} 
```

**STEP**: OData V2 — Immediate message (no asynchronous operation)

**DESCRIPTION**: If no async operation is required, still wrap the message addition in a Promise-returning function and call securedExecution. This ensures messaging behavior (removed at busy-session start and displayed after end) is consistent.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
onCustomButtonPressed: function(oEvent){
    var oSource = oEvent.getSource();
    var fnAddMessage = function(){
    return new Promise(function(fnResolve){
          var oMessage = new sap.ui.core.message.Message({
            message: "Custom button was pressed",
            persistent: true, // create message as transition message
            type: sap.ui.core.MessageType.Success
          });
          //"Messaging" required from module "sap/ui/core/Messaging";
          Messaging.addMessages(oMessage);
          fnResolve();
   });
};
var mParameters = {
      sActionLabel:  oSource.getText() // or "Your custom text" 
 };
this.extensionAPI.securedExecution(fnAddMessage, mParameters);
} 
```

**STEP**: OData V4 — securedExecution example (adding a transition message)

**DESCRIPTION**: Use the editFlow.securedExecution wrapper in OData V4 flows. Create a new Message from "sap/ui/core/message/Message" and add it using Messaging.addMessages. For OData V4 messages: both code and target are mandatory; provide an empty string for target when there is no binding target. Import "Messaging" from "sap/ui/core/Messaging" and "Message" from "sap/ui/core/message/Message".

**LANGUAGE**: JavaScript

**CODE**:
```javascript
securedExecution: function(oContext, aSelectedContexts) {
   this.editFlow.securedExecution( 
      function() { 
         // "Messaging" required from module "sap/ui/core/Messaging"
         // "Message" required from module "sap/ui/core/message/Message"
         Messaging.addMessages(new Message({
            message: "Server says hello", 
            target: "", 
            persistent: true, 
            type: sap.ui.core.MessageType.Success, 
            code: "123" 
         }));
      } 
   ); 
}, 
```

**STEP**: Notes, Tips, and References

**DESCRIPTION**:
- persistent: true = transition message; lifecycle controlled by framework deletions (e.g., at busy session start).
- persistent: false = lifecycle controlled by Messaging; removed when bound entity is reloaded.
- sActionLabel: used to label the action for the busy session; for a single transition info message it may have no visible effect because a toast is shown.
- OData V4 messages: both code and target are mandatory. If no target exists, set target: "" (empty string).
- When adding messages, ensure the Messaging module (sap/ui/core/Messaging) is required/imported and, for individual messages, sap/ui/core/message/Message is required.

Related documents:
- Using the SecuredExecution Method: using-the-securedexecution-method-6a39150.md
- Using Messages: using-messages-239b192.md

**LANGUAGE**: Text

**CODE**:
```text
Related links:
- using-the-securedexecution-method-6a39150.md
- using-messages-239b192.md
```
--------------------------------

**TITLE**: Adding Dynamic Side Content to Object Page Sections (SAP Fiori elements)

**INTRODUCTION**: This guide shows how to add dynamic side content to Object Page sections and subsections in SAP Fiori elements (OData V2 and V4). It explains manifest entries, fragment/view usage, equalSplit behavior, i18n keys for toggle button texts, and the Extension API call to programmatically show/hide side content. Use app extensions only when annotations or manifest settings cannot provide the required behavior and always use the SAP Fiori elements extensionAPI.

**TAGS**: fiori-elements-framework, side-content, object-page, manifest, xmlfragment, extensionpoints, odata-v2, odata-v4, extensionAPI

STEP: 1 — OData V2: Add side content via viewExtensions in manifest.json

DESCRIPTION: Use the view extension points BeforeMainContent or AfterMainContent to inject a fragment or view into a subsection's side content. In manifest.json use a key formed as "<Placement>|<EntitySet>|<Annotation_Information_of_Subsection>". Provide className, fragmentName (or viewName), type, and optional equalSplit (true = 50:50). If equalSplit is false or omitted, the layout is responsive and depends on device size.

- Placement options: BeforeMainContent, AfterMainContent
- Key format: <Placement>|<EntitySet>|<Annotation_Info_of_Subsection>
- Properties: className, fragmentName (or viewName), type, equalSplit (optional, boolean)

LANGUAGE: JSON

CODE:
```json
"extends": {
   "extensions": {
         "sap.ui.viewExtensions": {
                 "sap.suite.ui.generic.template.ObjectPage.view.Details": {
                           "AfterMainContent|STTA_C_MP_Product|GeneralInformationForm":{
               "className": "sap.ui.core.Fragment",
               "fragmentName": "STTA_MP.ext.fragments.SideContentExtension",
               "type": "XML",
		"equalSplit": true
               },
"BeforeMainContent|STTA_C_MP_Product|to_ProductSalesData::com.sap.vocabularies.UI.v1.Chart":{
              "className": "sap.ui.core.Fragment",
              "fragmentName": "STTA_MP.ext.fragments.SideContentExtension",
              "type": "XML"
               }
                        }
           }
     }
}
```

STEP: 2 — OData V2: Provide custom toggle button text via i18n

DESCRIPTION: After adding side content, the subsection toolbar shows a toggle button with default text "Show Details" / "Hide Details". To override texts per entity set and subsection, add keys to the i18n.properties for the object page's entity set. Replace separators (--, ::, etc.) with | when forming the key.

- Show button key format:
  - ShowSideContent|<EntitySet>|<Annotation Info of the Subsection>
  - Examples:
    - ShowSideContent|STTA_C_MP_Product|to_ProductSalesData|com.sap.vocabularies.UI.v1.Chart
    - ShowSideContent|STTA_C_MP_Product|GeneralInformationForm
- Hide button key format:
  - HideSideContent|<EntitySet>|<Annotation Info of the Subsection>
  - Examples:
    - HideSideContent|STTA_C_MP_Product|to_ProductSalesData|com.sap.vocabularies.UI.v1.Chart
    - HideSideContent|STTA_C_MP_Product|GeneralInformationForm

LANGUAGE: text

CODE:
```text
i18n.properties entries sample:
ShowSideContent|STTA_C_MP_Product|GeneralInformationForm=Show Details (custom)
HideSideContent|STTA_C_MP_Product|GeneralInformationForm=Hide Details (custom)
```

STEP: 3 — OData V4: Define sideContent in manifest (sections and subSections)

DESCRIPTION: For OData V4, define side content under the routing targets -> options -> settings -> content -> body -> sections for section-level or subsection-level sideContent. Use "template" to point to an xmlfragment module path. Optionally set equalSplit: true for 50:50 layout.

LANGUAGE: JSON

CODE:
```json
{
   "sap.ui5": {
      "routing": {
         "targets": {
            "SalesOrderManageObjectPage": {
               "options": {
                  "settings": {
                     "content": {
                        "body": {
                           "sections": {
                              "<section-key>": {
                                 "sideContent": {
                                    "template": "SalesOrder.ext.CustomSideContent"
                                 }
                              },
                              "<section-key>": {
                                 "subSections": {
                                    "<subSection-key>": {
                                       "sideContent": {
                                          "template": "SalesOrder.ext.CustomSideContent",
                                          "equalSplit": true
                                       }
                                    }
                                 }
                              }
                           }
                        }
                     }
                  }
               }
            }
         }
      }
   }
}
```

STEP: 4 — Side Content settings (properties and summary)

DESCRIPTION: Side content is implemented as an XML fragment loaded via Fragment.load semantics. Properties:

- template (string): module path to fragment (same syntax as Fragment.load)
- equalSplit (boolean, default false): when true, side content and main content are shown in a 1:1 split regardless of responsive breakpoints. Default/fallback is responsive split (1:3, 1:2 depending on device).

For layout API details see sap.ui.layout.DynamicSideContent.

LANGUAGE: text

CODE:
```text
Properties:
- template: "<module_path_to_a_fragment>"   // fragment module path, e.g. "SalesOrder.ext.CustomSideContent"
- equalSplit: true | false                  // true => 50:50 split; default false => responsive split
```

STEP: 5 — Toggle side content programmatically (showSideContent API)

DESCRIPTION: Use the Extension API method showSideContent("<SideContent-Key>", [boolean]) from within extension code to toggle side content. If the boolean parameter is omitted the API toggles the current state. Provide a controlConfiguration action in manifest to call an extension function that invokes this.showSideContent("<SideContent-Key>").

LANGUAGE: JSON

CODE:
```json
{
   "sap.ui5": {
      "routing": {
         "targets": {
            "SalesOrderManageObjectPage": {
               "options": {
                  "settings": {
                     "content": {
                        "controlConfiguration": {
                           "_Item/@com.sap.vocabularies.UI.v1.LineItem": {
                              "actions": {
                                 "CustomActionToggleSideContent": {
                                  "press": "Namespace.ext.CustomSectionSideContent.toggleSideContent",
                                  "text": "Show/Hide Side Content",
                                  "enabled": true,
                                  "visible": true 
                               }
                            }
                         }
                      }
                   }
                }
             }
          }
       }
    }
}
```

LANGUAGE: JavaScript

CODE:
```javascript
// webapp/ext/customSectionSideContent.js
sap.ui.define([], function() {
   "use strict";

   return {
      toggleSideContent: function(oBindingContext) {
         this.showSideContent("<SideContent-key>");
      }
   };
});
```

Usage examples:
- Toggle: this.showSideContent("<SideContent-key>")
- Show explicitly: this.showSideContent("customerInfo", true)
- Hide explicitly: this.showSideContent("customerInfo", false)

STEP: 6 — Determining Section-Key / SubSection-Key / SideContent-Key

DESCRIPTION: SideContent keys are derived from facet nesting and the facet keys at their respective levels. General rules:
- Section-Key: key of the section/facet at the level where you declare sideContent.
- SubSection-Key: key of the subsection (if any); usually matches Section-Key for single-level facets.
- SideContent-Key: the key you use when invoking showSideContent(...) — typically the same as the SubSection-Key or Section-Key depending on nesting.
- Replace annotation separators (e.g., ::, --) with | when forming keys for manifest or i18n.
- Tip: Scenario 4.1 is special — SubSection-Key and SideContent-Key differ (use the specific facet keys shown in your app’s facet/annotation structure).

Examples (from earlier snippets):
- "SalesOrderItems" as Section-Key and SideContent-Key for a reference facet
- For a subsection defined by annotation to_ProductSalesData::com.sap.vocabularies.UI.v1.Chart use:
  - before/after placement key: BeforeMainContent|STTA_C_MP_Product|to_ProductSalesData::com.sap.vocabularies.UI.v1.Chart
  - replace separators with | where needed in i18n keys or other unique keys

LANGUAGE: text

CODE:
```text
Key formation rules summary:
- For V2 extension point key: "<Placement>|<EntitySet>|<AnnotationInfo>"
- For i18n and show/hide keys: replace separators with "|" and use:
  ShowSideContent|<EntitySet>|<AnnotationInfo>
  HideSideContent|<EntitySet>|<AnnotationInfo>
- SideContent-Key for this.showSideContent(...) = Section-Key or SubSection-Key depending on facet nesting
```

STEP: 7 — UX recommendations and constraints

DESCRIPTION: Best practices and restrictions for dynamic side content:
- Use dynamic side content only for small previews (not as an extension of the main panel).
- Do not use tables inside side content.
- Avoid content that causes horizontal scrolling.
- For best visualization, enable equalSplit (50% screen) for side content when appropriate.

LANGUAGE: text

CODE:
```text
UX rules:
- Small preview content only
- No tables in side content
- Avoid horizontal scroll
- Consider equalSplit: true for better visualization (50%:50%)
```
--------------------------------

**TITLE**: Add a filterable Price field to the Smart Filter Bar (Fiori elements, OData V2)

**INTRODUCTION**: This guide shows the exact files, code, and manifest changes to add a custom Price filter (ComboBox with two options) to a List Report smart filter bar in an SAP Fiori elements (OData V2) app. It uses an app extension: a fragment for ControlConfiguration and a controller for filter logic that injects filters into the table binding before rebind.

**TAGS**: fiori-elements-framework, sapui5, smart-filter-bar, odata-v2, extension, i18n, manifest

**STEP**: 1 — Create fragment and controller files (folder layout and files)
**DESCRIPTION**: Create the extension folder structure and files under your webapp. Place the UI fragment for the ControlConfiguration (ComboBox with items) and the controller implementing onBeforeRebindTableExtension. Use these exact file names/locations (adjust namespace/project name if different).
- Create folder: webapp/ext/fragment
- Create file: webapp/ext/fragment/Custom.Filter.fragment.xml
- Create folder: webapp/ext/controller
- Create file: webapp/ext/controller/Custom.Filter.controller.js

LANGUAGE: XML
CODE:
```xml
<core:FragmentDefinition
		xmlns="sap.m"
		xmlns:smartfilterbar="sap.ui.comp.smartfilterbar"
		xmlns:core="sap.ui.core">
	<!-- Price Filter-->
	<smartfilterbar:ControlConfiguration key="CustomPriceFilter" index="3" 
	label="{i18n|sap.suite.ui.generic.template.ListReport|SEPMRA_C_PD_Product>xfld.Price}"
							visibleInAdvancedArea="true" groupId="_BASIC">
		<smartfilterbar:customControl>
			<ComboBox id="CustomPriceFilter-combobox">
				<core:Item id="CustomPriceFilterItem0" key="0" 
						text="{i18n|sap.suite.ui.generic.template.ListReport|SEPMRA_C_PD_Product>xtit.Price_0-100}"/>
				<core:Item id="CustomPriceFilterItem3" key="1" 
						text="{i18n|sap.suite.ui.generic.template.ListReport|SEPMRA_C_PD_Product>xtit.Price_GE100}"/>
			</ComboBox>
		</smartfilterbar:customControl>
	</smartfilterbar:ControlConfiguration> 
</core:FragmentDefinition>	
```

LANGUAGE: JavaScript
CODE:
```javascript
sap.ui.define([], function () {
    return {
        onBeforeRebindTableExtension: function(oEvent) {
            var oBindingParams = oEvent.getParameter("bindingParams");
            oBindingParams.parameters = oBindingParams.parameters || {};
                            
            var oSmartTable = oEvent.getSource();
            var oSmartFilterBar = this.byId(oSmartTable.getSmartFilterId());
            var vCategory;
            if (oSmartFilterBar instanceof sap.ui.comp.smartfilterbar.SmartFilterBar) {
                //Custom price filter
                var oCustomControl = oSmartFilterBar.getControlByKey("CustomPriceFilter");
                if (oCustomControl instanceof sap.m.ComboBox) {
                    vCategory = oCustomControl.getSelectedKey();
                    switch (vCategory) {
                        case "0":
                            oBindingParams.filters.push(new sap.ui.model.Filter("Price", "LE", "100"));
                            break;
                        case "1":
                            oBindingParams.filters.push(new sap.ui.model.Filter("Price", "GT", "100"));
                            break;
                        default:
                            break;
                    }
                }
            }
        }
    }
});
```

**STEP**: 1 — Implementation notes (behavior & change events)
**DESCRIPTION**: Ensure the Smart Filter Bar recognizes changes in the custom control. If your custom control does not automatically fire a change event that the Smart Filter Bar listens to, explicitly call .fireChange() on that control after selection changes so the filter bar recognizes the state change and the table overlay appears.

LANGUAGE: JavaScript
CODE:
```javascript
// Example: fireChange on the ComboBox after programmatic selection
var oCombo = this.byId("CustomPriceFilter-combobox");
oCombo.setSelectedKey("1");
oCombo.fireChange(); // ensures SmartFilterBar recognizes the change
```

**STEP**: 2 — Add i18n property entries
**DESCRIPTION**: Add the translatable label and option texts to your i18n properties file (webapp/i18n/i18n.properties). These keys are referenced by the fragment above.
LANGUAGE: Properties
CODE:
```
#XFLD: Custom filter breakout label
xfld.Price=Price
#XTIT: Price range 0-100
xtit.Price_0-100=Price between 0-100
#XTIT: Price range Over 100
xtit.Price_GE100=Price: Over 100		
```

**STEP**: 3 — Register the fragment and controller as extensions in manifest.json
**DESCRIPTION**: Integrate the fragment and controller by adding controller and view extensions under the ListReport extend section of webapp/manifest.json. Ensure the fragmentName and controllerName values match your project namespace and file paths. The manifest snippet below shows how to:
- register the controller extension for the ListReport controller
- register the view extension that adds the ControlConfiguration fragment into the Smart Filter Bar

LANGUAGE: JSON
CODE:
```json
"extends": {
        "extensions": {
                "sap.ui.controllerExtensions": {
                        "sap.suite.ui.generic.template.ListReport.view.ListReport": {
                                "controllerName": "my_app.ext.controller.ListReportExtension"
                        }
                },
                "sap.ui.viewExtensions": {
                        "sap.suite.ui.generic.template.ListReport.view.ListReport": {
                                "SmartFilterBarControlConfigurationExtension|SEPMRA_C_PD_Product": {
                                        "className": "sap.ui.core.Fragment",
                                        "fragmentName": "ManageProducts.ext.fragment.CustomFilter",
                                        "type": "XML"
                                }                 
                        }
                }
        }
},
```

**STEP**: 3 — Manifest notes (matching file names)
**DESCRIPTION**: The fragmentName in the manifest must match your fragment module path and name (namespace + fragment name without the .fragment.xml extension). If your fragment file is named Custom.Filter.fragment.xml, set fragmentName accordingly when using your namespace (for example: "YourAppNamespace.ext.fragment.Custom.Filter"). If you rename the file to CustomFilter.fragment.xml, adjust the fragmentName in manifest.json to "YourAppNamespace.ext.fragment.CustomFilter".

LANGUAGE: JSON
CODE:
```json
// Example: if file is webapp/ext/fragment/Custom.Filter.fragment.xml
"fragmentName": "YourAppNamespace.ext.fragment.Custom.Filter"

// Example: if file is webapp/ext/fragment/CustomFilter.fragment.xml
"fragmentName": "YourAppNamespace.ext.fragment.CustomFilter"
```

**RESULTS**: After deploying these changes, the List Report smart filter bar will display a new Price filter with two selectable options. The controller's onBeforeRebindTableExtension injects the corresponding Price filter into the table binding so results update accordingly. Remember to follow the extensionAPI guidelines: use only the supported extensionAPI and avoid manipulating framework-internal objects directly.
--------------------------------

**TITLE**: Add Multiple Fields (IDs, Descriptions, Actions) to One Column in Responsive Tables via UI.FieldGroup

**INTRODUCTION**: Use UI.FieldGroup to group multiple annotations (IDs, descriptions, action buttons, navigation, annotations) into a single responsive table column. Define the FieldGroup with a Data collection, then reference it from UI.LineItem as a DataFieldForAnnotation (AS_FIELDGROUP) to render multiple fields in one column.

**TAGS**: fiori-elements-framework, UI.FieldGroup, UI.LineItem, annotations, OData, XML, ABAP CDS, CAP CDS, responsive-tables, export, personalization

**STEP**: 1 — Define UI.FieldGroup (XML annotation)

**DESCRIPTION**: Create a UI.FieldGroup annotation with qualifier (e.g., FieldGroup1). Inside Data, add UI.DataField, UI.DataFieldForAction, or other supported annotation records to show multiple items in one column.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.FieldGroup" Qualifier="FieldGroup1">
    <Record>
        <PropertyValue Property="Data">
            <Collection>
                <Record Type="UI.DataField">
                    <PropertyValue Property="Value" Path="ContractType"/>
                </Record>
                <Record Type="UI.DataFieldForAction">
                    <PropertyValue Property="Label" String="Dummy Button"/>
                    <PropertyValue Property="Action" String="com.sap.gateway.srvd.sadl_gw_appmusicdr_definition.v0001.SOME_ACTION_2"/>
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

**STEP**: 2 — Define UI.FieldGroup (ABAP CDS annotation)

**DESCRIPTION**: Equivalent FieldGroup in ABAP CDS. Use @UI.fieldGroup qualifiers on properties to semantically group them into the same column.

**LANGUAGE**: ABAP CDS

**CODE**:
```

@UI.fieldGroup: [
  {
    value: 'CONTRACTTYPE',
    type: #STANDARD,
    position: 1 ,
    qualifier: 'FieldGroup1'
  }
]
CONTRACTTYPE;

@UI.fieldGroup: [
  {
    label: 'Dummy Button',
    dataAction: 'PUSHDOWN:com.sap.gateway.srvd.sadl_gw_appmusicdr_definition.v0001.SOME_ACTION_2',
    type: #FOR_ACTION,
    position: 2 ,
    qualifier: 'FieldGroup1'
  }
]
contractname;
```

**STEP**: 3 — Define UI.FieldGroup (CAP CDS annotation)

**DESCRIPTION**: CAP CDS syntax for FieldGroup; include Data array with UI.DataField and UI.DataFieldForAction items.

**LANGUAGE**: CAP CDS

**CODE**:
```

UI.FieldGroup #FieldGroup1 : {
    Data : [
        {
            $Type : 'UI.DataField',
            Value : ContractType
        },
        {
            $Type : 'UI.DataFieldForAction',
            Label : 'Dummy Button',
            Action : 'com.sap.gateway.srvd.sadl_gw_appmusicdr_definition.v0001.SOME_ACTION_2'
        }
    ]
}
```

**STEP**: 4 — Reference FieldGroup from UI.LineItem (XML annotation)

**DESCRIPTION**: In UI.LineItem, reference the FieldGroup qualifier using DataFieldForAnnotation and Target = @UI.FieldGroup#Qualifier. This renders the grouped items in one table column and uses the provided label.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.LineItem">
    <Collection>
        …………
        …………
        <Record Type="UI.DataFieldForAnnotation">
            <PropertyValue Property="Target" AnnotationPath="@UI.FieldGroup#FieldGroup1" />
            <PropertyValue Property="Label" String="Type Information"/>
        </Record>
        …………
        …………
    </Collection>
</Annotation>
```

**STEP**: 5 — Reference FieldGroup from UI.LineItem (ABAP CDS annotation)

**DESCRIPTION**: ABAP CDS lineItem uses type #AS_FIELDGROUP and valueQualifier referencing the FieldGroup qualifier to include the grouped fields in the LineItem.

**LANGUAGE**: ABAP CDS

**CODE**:
```

@UI.lineItem: [
  {
    label: 'Type Information',
    type: #AS_FIELDGROUP,
    valueQualifier: 'FieldGroup1'
  }
]
producttype;
```

**STEP**: 6 — Reference FieldGroup from UI.LineItem (CAP CDS annotation)

**DESCRIPTION**: CAP CDS LineItem should include a DataFieldForAnnotation with Target pointing to the FieldGroup qualifier.

**LANGUAGE**: CAP CDS

**CODE**:
```

UI.LineItem : [
    {
        $Type : 'UI.DataFieldForAnnotation',
        Target : '@UI.FieldGroup#FieldGroup1',
        Label : 'Type Information'
    }
]
```

**STEP**: 7 — Supported annotations inside UI.FieldGroup

**DESCRIPTION**: Use these annotation types inside UI.FieldGroup.Data collection to compose the semantically grouped column.

**LANGUAGE**: List

**CODE**:
```text
Allowed in UI.FieldGroup:
- UI.DataField
- UI.DataFieldForAction
- UI.DataFieldForIntentBasedNavigation
- UI.DataFieldForAnnotation (can include Communication.Contact, UI.Visualization/Rating, UI.Visualization/Progress)
```

**STEP**: 8 — Additional annotations allowed in OData V2

**DESCRIPTION**: In SAP Fiori elements for OData V2 you can also include DataFieldWithNavigationPath and UI.Chart inside UI.FieldGroup.

**LANGUAGE**: List

**CODE**:
```text
Additional for OData V2:
- UI.DataFieldWithNavigationPath
- UI.DataFieldForAnnotation (UI.Chart)
```

**STEP**: 9 — Export & Personalization restrictions to consider

**DESCRIPTION**: Implementers must be aware of export and personalization limitations when grouping fields into one column.

**LANGUAGE**: List

**CODE**:
```text
Restrictions:
- OData V2 Excel export: Only the first field (first visible field) in the semantically connected column is exported.
- OData V4 Excel export: None of the fields in the semantically connected column are exported.
- Table personalization: Users can only filter, sort, and group on the individual properties included in the UI.FieldGroup (properties must belong to the same entity type as the UI.LineItem). Example: A column "Combined" made of Height and Weight cannot be personalized; users can only personalize on Height and Weight individually.
```

**STEP**: 10 — TextArrangement behavior when ID and text shown in same column

**DESCRIPTION**: If a property and its sap:text property are included in the same FieldGroup column, TextArrangement annotation is ignored and defaults to idOnly. For all other cases, textArrangement can be used to control ID/description display.

**LANGUAGE**: Note

**CODE**:
```text
Note:
- When a property and its sap:text property are shown in the same column (same FieldGroup), TextArrangement is not applicable; default is idOnly.
- Otherwise, use textArrangement to control whether to show ID, description, or both.
```
--------------------------------

**TITLE**: Adding Segmented Buttons to a Table Toolbar (SelectionVariant + manifest.quickVariantSelection)

**INTRODUCTION**: This guide shows how to add segmented buttons (or a selection box) to a Fiori Elements table toolbar by defining SelectionVariant annotations and configuring quickVariantSelection in the manifest. Each segmented button (or select entry) is bound to a SelectionVariant that filters the table when selected. Includes XML, ABAP CDS, and CAP CDS examples plus manifest settings for OData V2 and V4.

**TAGS**: fiori-elements, selectionVariant, quickVariantSelection, manifest.json, OData V2, OData V4, CAP, ABAP, XML, JSON, table-toolbar

**STEP**: 1 — Define SelectionVariant annotations (XML)
**DESCRIPTION**: Create SelectionVariant annotations in your metadata/service annotations to define filter variants. Use a simple variant (one property) or a complex variant (multiple properties). Note: If SelectionVariant contains multiple SelectOptionType entries, filters targeting the same property are combined with OR; filters for different properties are combined with AND.
**LANGUAGE**: XML
**CODE**:
```xml
<Annotation Term="UI.SelectionVariant" Qualifier="SimpleFilter">
      <Record>
         <PropertyValue Property="Text" String="Tax amount less than 10 USD" />
         <PropertyValue Property="SelectOptions">
            <Collection>
               <Record Type="UI.SelectOptionType">
                  <PropertyValue Property="PropertyName" PropertyPath="tax_amount" />
                  <PropertyValue Property="Ranges">
                     <Collection>
                        <Record Type="UI.SelectionRangeType">
                           <PropertyValue Property="Sign" EnumMember="UI.SelectionRangeSignType/I" />
                           <PropertyValue Property="Option" EnumMember="UI.SelectionRangeOptionType/LT" />
                           <PropertyValue Property="Low" String="10" />
                        </Record>
                     </Collection>
                  </PropertyValue>
               </Record>
            </Collection>
         </PropertyValue>
      </Record>
   </Annotation>
   <Annotation Term="UI.SelectionVariant" Qualifier="ComplexFilter">
      <Record>
         <PropertyValue Property="Text" String="Net Amount between 10 and 40 And Gross Amount Less than 100 USD" />
         <PropertyValue Property="SelectOptions">
            <Collection>
               <Record Type="UI.SelectOptionType">
                  <PropertyValue Property="PropertyName" PropertyPath="net_amount" />
                  <PropertyValue Property="Ranges">
                     <Collection>
                        <Record>
                           <PropertyValue Property="Sign" EnumMember="com.sap.vocabularies.UI.v1.SelectionRangeSignType/I" />
                           <PropertyValue Property="Option" EnumMember="UI.SelectionRangeOptionType/BT" />
                           <PropertyValue Property="Low" String="10" />
                           <PropertyValue Property="High" String="40" />
                        </Record>
                     </Collection>
                  </PropertyValue>
               </Record>
               <Record Type="UI.SelectOptionType">
                  <PropertyValue Property="PropertyName" PropertyPath="gross_amount" />
                  <PropertyValue Property="Ranges">
                     <Collection>
                        <Record Type="UI.SelectionRangeType">
                           <PropertyValue Property="Option" EnumMember="UI.SelectionRangeOptionType/LT" />
                           <PropertyValue Property="Sign" EnumMember="UI.SelectionRangeSignType/I" />
                           <PropertyValue Property="Low" String="100" />
                        </Record>
                     </Collection>
                  </PropertyValue>
               </Record>
            </Collection>
         </PropertyValue>
      </Record>
   </Annotation>
```

**STEP**: 2 — Define SelectionVariant annotations (ABAP CDS)
**DESCRIPTION**: Alternative: define selection variants in ABAP CDS using @UI.selectionVariant. Each entry includes text, qualifier, and filter expression. Use qualifier values to reference these variants from the manifest.
**LANGUAGE**: ABAP CDS
**CODE**:
```
@UI.selectionVariant: [
  {
    text: 'Tax amount less than 10 USD',
    qualifier: 'SimpleFilter',
    filter: 'tax_amount LT 10'
  }
]

@UI.selectionVariant: [
  {
    text: 'Net Amount between 10 and 40 And Gross Amount Less than 100 USD',
    qualifier: 'ComplexFilter',
    filter: 'net_amount GE 10 and net_amount LE 40 and gross_amount LT 100 '
  }
]
```

**STEP**: 3 — Define SelectionVariant annotations (CAP CDS)
**DESCRIPTION**: Alternative: define UI.SelectionVariant entries in CAP CDS. Use qualifiers (#SimpleFilter, #ComplexFilter) and SelectOptions arrays to reference in the manifest.
**LANGUAGE**: CDS
**CODE**:
```
UI.SelectionVariant #SimpleFilter : {
    Text : 'Tax amount less than 10 USD',
    SelectOptions : [
        {
            $Type : 'UI.SelectOptionType',
            PropertyName : tax_amount,
            Ranges : [
                {
                    $Type : 'UI.SelectionRangeType',
                    Sign : #I,
                    Option : #LT,
                    Low : '10'
                }
            ]
        }
    ]
},
UI.SelectionVariant #ComplexFilter : {
    Text : 'Net Amount between 10 and 40 And Gross Amount Less than 100 USD',
    SelectOptions : [
        {
            $Type : 'UI.SelectOptionType',
            PropertyName : net_amount,
            Ranges : [
                {
                    Sign : #I,
                    Option : #BT,
                    Low : '10',
                    High : '40'
                }
            ]
        },
        {
            $Type : 'UI.SelectOptionType',
            PropertyName : gross_amount,
            Ranges : [
                {
                    $Type : 'UI.SelectionRangeType',
                    Option : #LT,
                    Sign : #I,
                    Low : '100'
                }
            ]
        }
    ]
}
```

**STEP**: 4 — Configure quickVariantSelection in manifest.json for OData V2 (Object Page)
**DESCRIPTION**: Add quickVariantSelection under the relevant section inside component.settings.sections.<SectionID>.quickVariantSelection. Set showCounts to true to display counts next to segmented buttons (this triggers count calls). Define variants as entries with key and annotationPath referencing the SelectionVariant qualifier (com.sap.vocabularies.UI.v1.SelectionVariant#Qualifier). If you define <= 3 variants a segmented button is rendered; 4+ renders a selection box.
**LANGUAGE**: JSON
**CODE**:
```json
"component": {
  "name": "sap.suite.ui.generic.template.ObjectPage",
  "settings": {
    "sections": {
      "SalesOrderItemsID": {
        "navigationProperty": "to_Item",
        "entitySet": "C_STTA_SalesOrderItem_WD_20",
        "createMode": "inline",
        "quickVariantSelection": {
          "showCounts": true,
          "variants": {
            "0": {
              "key": "_tab2",
              "annotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant#SimpleFilter"
            },
            "1": {
              "key": "_tab3",
              "annotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant#ComplexFilter"
            }
          }
        }
      }
    },
    "showRelatedApps": true
  }
}
```

**STEP**: 5 — Configure quickVariantSelection in manifest.json for OData V4 (ControlConfiguration / Table)
**DESCRIPTION**: For OData V4 / sap.fe.templates.ObjectPage, configure controlConfiguration for the relevant table (e.g., _Item/@com.sap.vocabularies.UI.v1.LineItem). Use tableSettings.quickVariantSelection.paths to list annotationPath entries (one per variant). Set showCounts (if true, counts appear next to buttons and not table title) and hideTableTitle when you want to display only the segmented buttons/selection box (use hideTableTitle only if SelectionVariant Text is self-explanatory). Segmented button rendering rule: <= 3 entries -> segmented buttons, 4+ -> selection box.
**LANGUAGE**: JSON
**CODE**:
```json
"SalesOrderManageObjectPage": {
	"type": "Component",
	"id": "SalesOrderManageObjectPage",
	"name": "sap.fe.templates.ObjectPage",
	"options": {
		"settings": {
			"contextPath": "/SalesOrderManage",
			"navigation": {
	           ...
			},
			"controlConfiguration": {
				"_Item/@com.sap.vocabularies.UI.v1.LineItem": {
					"tableSettings": {
						"type": "GridTable",
						"quickVariantSelection": {
							"paths": [
								{
									"annotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant#SimpleFilter"
								},
								{
									"annotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant#ComplexFilter"
								}
							],
							"showCounts": true,
							"hideTableTitle": true
						},
	                  ...
					}
				}
			}
		}
	}
}
```

**STEP**: 6 — Behavior and performance notes
**DESCRIPTION**: Important behavior details to apply during implementation:
- Rendering rule: number of variants <= 3 -> segmented buttons; 4 or more -> selection box.
- Counts:
  - OData V2: set showCounts:false to avoid count calls and not show numbers in button text. If showCounts:true, initial load triggers count calls (two calls are made to determine record count).
  - OData V4: showCounts defaults to false; set to true to show counts next to buttons (counts then not shown next to table title).
- Combining filters: within a SelectionVariant, multiple SelectOptionType entries targeting the same property are OR'ed; different properties are AND'ed.
- hideTableTitle: set to true when you want only the segmented buttons/selection box visible and the SelectionVariant Text is self-explanatory (recommended only if titles are sufficient).

Images showing UI states (optional assets):
- images/Segmented_button_1_selected_65fc70c.png
- images/Segmented_button_2_selected_60bfbdb.png
--------------------------------

**TITLE**: Adding and Removing Object Page Subpages (manifest.json)

**INTRODUCTION**: Instructions to add or remove subpages (object page detail subpages) in SAP Fiori Elements apps by editing manifest.json manually and using SAP Fiori tools. Includes examples for OData V2 (sap.ui.generic.app) and OData V4 (sap.ui5 routing/targets). Use these actionable steps to implement navigation and component loading for subpages or to remove them.

**TAGS**: fiori-elements, manifest.json, subpage, object-page, OData V2, OData V4, routing, targets, sap.ui.generic.app, sap.ui5, SAP Fiori tools, SAP Business Application Studio

STEP: 1 — Recommended Tooling (Page Map)
DESCRIPTION: Use SAP Fiori tools (extensions for SAP Business Application Studio or VS Code) Page Map to add, remove, and configure pages visually. Recommended for most users; manual manifest edits are still possible.
LANGUAGE: Text
CODE:
```text
Tool: SAP Fiori tools -> Page Map
Docs: https://help.sap.com/viewer/product/SAP_FIORI_tools/Latest/en-US
Note: SAP Web IDE is deprecated for trial SAP BTP accounts; prefer SAP Business Application Studio.
```

STEP: 2 — Manual: General note for manifest.json
DESCRIPTION: You can add further subpages manually by editing manifest.json after app generation. For OData V2, add entries under "sap.ui.generic.app"."pages". For OData V4, add a route in "sap.ui5"."routing" and a corresponding target in "sap.ui5"."routing"."targets". To remove a subpage, delete the added manifest entries.
LANGUAGE: Text
CODE:
```text
File to edit: manifest.json
For OData V2: sap.ui.generic.app -> pages
For OData V4: sap.ui5 -> routing -> routes + sap.ui5 -> routing -> targets
```

STEP: 3 — OData V2: Add Subpage via sap.ui.generic.app
DESCRIPTION: Express a 1:n association subpage under sap.ui.generic.app.pages. Add nested "pages" entries to render the subpage (as a table or object page). Example below shows root list report -> object page -> subpage entity (navigationProperty).
LANGUAGE: JSON
CODE:
```json
"sap.ui.generic.app":{
   "pages":{
      "entitySet":"SEPMRA_I_ProductWithDraft",
      "component":{
         "name":"sap.suite.ui.generic.template.ListReport",
         "list":true
      },
      "pages":{
         "entitySet":"SEPMRA_I_ProductWithDraft",
         "component":{
            "name":"sap.suite.ui.generic.template.ObjectPage"
         },
         "pages":{
            "entitySet":"SEPMRA_I_ProductTextWithDraft",
            "navigationProperty":"to_ProductText",
            "component":{
               "name":"sap.suite.ui.generic.template.ObjectPage"
            }
         }
      }
   }
},
```

STEP: 4 — OData V2: Remove Subpage
DESCRIPTION: To delete the subpage and its link from the object page, remove the corresponding "pages" subtree (entitySet/navigationProperty/component) from "sap.ui.generic.app" in manifest.json.
LANGUAGE: Text
CODE:
```text
Action: Remove the nested "pages" block for the subpage under "sap.ui.generic.app" in manifest.json
Result: Subpage and navigation link removed
```

STEP: 5 — OData V4: Add Subpage via routing (route + target)
DESCRIPTION: For OData V4, add two objects to manifest.json:
1) A route in sap.ui5.routing.routes specifying pattern, name, and target.
2) A target in sap.ui5.routing.targets specifying type Component, id, name (e.g., "sap.fe.templates.ObjectPage") and options.settings.contextPath. The example below shows route pattern and target configuration needed to add a SalesOrder Item object page as a subpage.
LANGUAGE: JSON
CODE:
```json
"sap.ui5": {
        ...
        "routing": {
                ...
                {
                    "pattern": "SalesOrderManage({key})/_Item({key2}):?query:",
                    "name": "SalesOrderItemObjectPage",
                    "target": "SalesOrderItemObjectPage"
                }
            ],
            "targets": {
                "SalesOrderItemObjectPage": {
                    "type": "Component",
                    "id": "SalesOrderItemObjectPage",
                    "name": "sap.fe.templates.ObjectPage",
                    "options": {
                        "settings": {
                            "contextPath": "/SalesOrderItem",
                            ...
                        }
                    }
                }
            }
        }
    }
```

STEP: 6 — OData V4: Remove Subpage
DESCRIPTION: To remove the subpage, delete both the route entry in sap.ui5.routing.routes and the corresponding target entry in sap.ui5.routing.targets from manifest.json.
LANGUAGE: Text
CODE:
```text
Action: Remove route (e.g., "SalesOrderItemObjectPage") from sap.ui5.routing.routes and remove "SalesOrderItemObjectPage" from sap.ui5.routing.targets
Result: Subpage route and component target removed
```

STEP: 7 — Caution about SAP Web IDE availability
DESCRIPTION: SAP Web IDE is not available from SAP BTP trial accounts. Only relevant if you have a productive SAP BTP account with SAP Web IDE access. Prefer SAP Business Application Studio as the alternative for Page Map tooling.
LANGUAGE: Text
CODE:
```text
Caution: SAP Web IDE deprecated for trial BTP accounts. Use SAP Business Application Studio instead.
Reference: App Development Using SAP Business Application Studio
```

STEP: 8 — Related Links
DESCRIPTION: Reference for intent-based navigation and changing navigation to object page.
LANGUAGE: Text
CODE:
```text
Related doc: Changing Navigation to Object Page
Path: ../05_Developing_Apps/changing-navigation-to-object-page-8bd546e.md
```
--------------------------------

**TITLE**: Adding the AI Icon to Action Buttons (SAP Fiori elements, OData V4)

**INTRODUCTION**: This guide shows how to mark action buttons as AI operations so the SAP Fiori "AI" icon (SAP-icons-V5: AI) appears before button text. Applicable to SAP Fiori elements for OData V4. Provide transparency when AI processes personal data. Use either the manifest.json controlConfiguration or local annotations. manifest.json settings override local annotations. To add the icon to buttons inside UI.DataFieldForActionGroup, use local annotations and mark each child action.

**TAGS**: fiori-elements-framework, SAP, UI.IsAIOperation, isAIOperation, manifest.json, annotations, OData V4, UI.DataFieldForAction, UI.DataFieldForActionGroup, CAP, ABAP, XML, JSON

STEP: 1 — Prerequisites and restrictions

DESCRIPTION: Ensure you are on SAP Fiori elements for OData V4. Include the SAP icons CSS in your app if not already present. Understand these restrictions:
- Only use the AI icon for buttons created by UI.DataFieldForAction or UI.DataFieldForActionGroup.
- Inline action buttons do not support the AI icon.
- Use the SAP-icons-V5 "AI" icon and set UI.IsAIOperation / isAIOperation = true.
- manifest.json controlConfiguration overrides local annotations.
- To add the icon for actions inside UI.DataFieldForActionGroup, mark each child action as a DataFieldForAction and indicate UI.IsAIOperation (use local annotations for groups).

LANGUAGE: HTML

CODE:
```html
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```

STEP: 2 — Add AI icon using manifest.json (controlConfiguration)

DESCRIPTION: To display the AI icon on a button configured via the application's manifest, set isAIOperation to true for the action under controlConfiguration (LineItem actions example). Place this in your manifest.json under sap.ui5 -> routing -> targets -> <YourTarget> -> options -> settings -> controlConfiguration -> @com.sap.vocabularies.UI.v1.LineItem -> actions -> <YourAction>.

LANGUAGE: JSON

CODE:
```json
{
    ...
    "sap.ui5": {
        ...
        "routing": {
            "targets": {
                "ListReportExample": {
                    "type": "Component",
                    "name": "sap.fe.templates.ListReport",
                    "id": "ListReportExample",
                    "options": {
                        "settings": {
                            ...
                            "controlConfiguration": {
                                "@com.sap.vocabularies.UI.v1.LineItem": {
                                    "actions": {
                                        "TableCustomAction": {
                                            "text": "Custom Action",
                                            "press": "sap.fe.core.ActionAllAreas.AnnotationUnboundAction",
                                            "isAIOperation": true
                                        }
                                    }
                                }
                            }
                            ...
                        }
                    }
                }
            }
        }
        ...
    }
}
```

STEP: 3 — Add AI icon using local annotations (XML annotation)

DESCRIPTION: For local metadata annotations, annotate the action target with UI.IsAIOperation = true. Use XML annotations for OData V4. ABAP CDS does not support UI.IsAIOperation (use local XML instead). For CAP, set @UI.IsAIOperation : true on the action in CDS (example below). For actions inside UI.DataFieldForActionGroup, mark each child DataFieldForAction / action with UI.IsAIOperation = true in local annotations.

LANGUAGE: XML

CODE:
```xml
<Action Name="AIUnboundAction" IsBound="false">
    <ReturnType Type="com.c_salesordermanage_sd_aggregate.SalesOrderManage" />
</Action>

<Annotations Target="com.c_salesordermanage_sd_aggregate.AIUnboundAction()">
    <Annotation Term="UI.IsAIOperation" Bool="true" />
</Annotations>
```

STEP: 4 — ABAP CDS note and CAP CDS example

DESCRIPTION: ABAP CDS does not support UI.IsAIOperation — use the local XML annotation above. For CAP projects, annotate the action in CDS with @UI.IsAIOperation : true.

LANGUAGE: CDS

CODE:
```
namespace sap.fe.core;

service ActionAllAreas {
  @odata.draft.enabled
  entity RootElement as projection on core.RootElement actions {
                          @cds.odata.bindingparameter.name: 'self'
                          @UI.IsAIOperation               : true
                          action AnnotationAction()                   returns RootElement;
                        }
}
```
--------------------------------

**TITLE**: Enable OData $select for OVP Cards via manifest.json

**INTRODUCTION**: Add the OData $select parameter to OVP list or table cards by setting the addODataSelect property in the card's settings inside manifest.json. Use this when your OData service (for example Smart Business services) requires explicit selected properties—such as aggregated values—to be returned. Note: $select is not added automatically for list/table cards because it can affect navigation behavior.

**TAGS**: fiori-elements-framework, OData, manifest.json, sap.ovp, select, list-cards, table-cards, Smart-Business

**STEP**: 1 — Add addODataSelect to the card settings

**DESCRIPTION**: Edit the application's manifest.json and set "addODataSelect": true in the specific card's settings under "sap.ovp" -> "cards" -> "<cardId>" -> "settings". This instructs the OVP runtime to include the OData $select parameter for that card's requests.

**LANGUAGE**: JSON

**CODE**:
```json
"sap.ovp": {
    "globalFilterModel": "salesOrder",
    "globalFilterEntityType": "GlobalFilters", //Deprecated since SAPUI5 1.54
    "globalFilterEntitySet": "GlobalFilters",  //Available from SAPUI5 1.54
    "cards": {
      "card00": {
        "model": "salesOrder",
        "template": "sap.ovp.cards.list",
        "settings": {     
          "entitySet": "SalesOrderSet",
          "category": "Sales Orders with filters",
          "listType": "extended",
          "addODataSelect": true
        }
      }
    }
}
```

**STEP**: 2 — Guidance and caveats

**DESCRIPTION**: Use the setting only when necessary and for the specific card(s) that require explicit property selection.

**LANGUAGE**: Text

**CODE**:
```
- Purpose: Adds an OData $select parameter to the card's requests so only required properties (including aggregated values returned by Smart Business OData services) are fetched.
- Where to set: manifest.json -> sap.ovp -> cards -> <cardId> -> settings -> addODataSelect (boolean).
- Default behavior: List and table cards do NOT add $select automatically (to avoid unintended navigation changes).
- When to enable: When your OData service requires selected properties to be returned (e.g., aggregated fields needed by the card).
- Caution: Enabling $select can impact navigation behavior—test navigation and data returned thoroughly after enabling.
```
--------------------------------

**TITLE**: Adding Titles to Object Page Tables

**INTRODUCTION**: This document shows how to add a title to an Object Page table by supplying a string (or i18n key) to the UI.HeaderInfo.TypeNamePlural annotation on the entity type associated with the table. Includes XML, ABAP CDS, and CAP CDS examples and important rules to follow.

**TAGS**: fiori-elements-framework, annotations, UI.HeaderInfo, TypeNamePlural, i18n, CDS, ABAP, CAP, XML, object-page, table-title

**STEP**: 1 — Add UI.HeaderInfo.TypeNamePlural (XML Annotation)

**DESCRIPTION**: For OData metadata annotations (XML), add a UI.HeaderInfo record on the entity type and set TypeNamePlural to the desired title string or an i18n key (mandatory). Ensure the annotation target is the entity type associated with the table.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="STTA_PROD_MAN.STTA_C_MP_ProductTextType">
      <Annotation Term="UI.HeaderInfo">
          <Record>
              <PropertyValue Property="TypeName" String="Product Text" />
              <PropertyValue Property="TypeNamePlural" String="{@i18n>@TableTitle}" />
              <PropertyValue Property="Title">
                    <Record Type="UI.DataField">
                           <PropertyValue Property="Value" Path="Name" />
                    </Record>
              </PropertyValue>
             <PropertyValue Property="Description">
                    <Record Type="UI.DataField">
                        <PropertyValue Property="Value" Path="Language" />
                    </Record>
             </PropertyValue>
       </Record>
 </Annotation>
```

**STEP**: 2 — Add UI.headerInfo (ABAP CDS Annotation)

**DESCRIPTION**: In ABAP CDS, annotate the view with @UI.headerInfo and set typeNamePlural. Use an i18n key or literal string. This header info is required for the table title to be displayed.

**LANGUAGE**: ABAP CDS

**CODE**:
```
@UI.headerInfo: {
  typeName: 'Product Text',
  typeNamePlural: '{@i18n>@TableTitle}',
  title: {
    value: 'NAME',
    type: #STANDARD
  },
  description: {
    value: 'LANGUAGE',
    type: #STANDARD
  }
}
annotate view STTA_C_MP_PRODUCTTEXT with {

}
```

**STEP**: 3 — Add UI.HeaderInfo (CAP CDS Annotation)

**DESCRIPTION**: In CAP (CDS for CAP) use the UI.HeaderInfo annotation on the entity and set TypeNamePlural. Use $Type UI.DataField for Title/Description values if required.

**LANGUAGE**: CDS

**CODE**:
```
annotate STTA_PROD_MAN.STTA_C_MP_ProductType @(
  UI.HeaderInfo : {
    TypeName : 'Product Text',
    TypeNamePlural : '{@i18n>@TableTitle}',
    Title : {
        $Type : 'UI.DataField',
        Value : Name
    },
    Description : {
        $Type : 'UI.DataField',
        Value : Language
    }
  }
);
```

**STEP**: 4 — Rules, Requirements, and Best Practices

**DESCRIPTION**: Follow these actionable rules when adding table titles:
- TypeNamePlural is mandatory: always provide a value (literal or i18n key) for UI.HeaderInfo.TypeNamePlural on the entity type.
- UI.HeaderInfo required: if the UI.HeaderInfo annotation is missing, the Object Page table title will not be displayed.
- Avoid duplicate section titles: if the same string is used for the section title and TypeNamePlural, ensure appropriate section titles are provided so UX is clear.
- Use i18n keys for translatable labels: e.g., '{@i18n>@TableTitle}'.
- If a section/subsection contains only one control (table or chart), the section title is hidden and set as the control title automatically — account for this when designing section and control titles.

**LANGUAGE**: N/A

**CODE**:
```text
- TypeNamePlural is mandatory.
- If UI.HeaderInfo is not present, table title will not be displayed.
- Provide appropriate section titles if TypeNamePlural duplicates section/subsection strings.
- Use i18n keys for localization: '{@i18n>@TableTitle}'.
```

**STEP**: 5 — Result Preview and Related Resources

**DESCRIPTION**: The table title will appear in the Object Page section when UI.HeaderInfo.TypeNamePlural is defined. Example image file path (retain for documentation or assets): images/Adding_Titles_to_Object_page_8920264.png

Related docs:
- Placing Reuse Component Instances on the Object Page: placing-reuse-component-instances-on-the-object-page-1ba7f88.md
- Adding a Custom Section to an Object Page: adding-a-custom-section-to-an-object-page-a357047.md

**LANGUAGE**: N/A

**CODE**:
```text
Result preview image: images/Adding_Titles_to_Object_page_8920264.png

Notes:
- If a section/subsection has only one control (table or chart), the section title is hidden and used as the control title.
- Sections with tables/charts (custom or embedded) can choose to hide the section title and set it as the control title.
```
--------------------------------

**TITLE**: Adding Two Tables in a Subsection (SAP Fiori elements — OData V2)

**INTRODUCTION**: Add two tables adjacent to each other inside a subsection of an object page by using a UI.CollectionFacet containing two UI.ReferenceFacet annotations. This approach is applicable only to SAP Fiori elements for OData V2. Use the ReferenceFacet properties Label, ID, and Target (AnnotationPath pointing to the @UI.LineItem of the related navigation property) and optionally set UI.Importance.

**TAGS**: fiori-elements-framework, odata-v2, annotations, CollectionFacet, ReferenceFacet, UI.LineItem, responsive

**STEP**: 1 — Add the CollectionFacet with two ReferenceFacet annotations

**DESCRIPTION**: Insert a UI.CollectionFacet record that defines two UI.ReferenceFacet entries. Each ReferenceFacet must include:
- PropertyValue Property="Label" — visible label for the table
- PropertyValue Property="ID" — unique ID for the facet
- PropertyValue Property="Target" AnnotationPath — path to the navigation property's @UI.LineItem (use the correct qualifier if needed, e.g., #SalesOrderItem)
- Optional Annotation Term="UI.Importance" — set importance (e.g., High) to influence rendering priority

Place this XML in your OData V2 annotations file used by the Fiori elements app (for example, in the annotations XML file referenced by the manifest).

**LANGUAGE**: XML

**CODE**:
```xml
<Record Type="UI.CollectionFacet">
   <PropertyValue Property="Label" String="Single Section Multiple Tables" />
   <PropertyValue Property="ID" String="MultiTable" />
   <PropertyValue Property="Facets">
      <Collection>
         <Record Type="UI.ReferenceFacet">
            <PropertyValue Property="Label" String="Sales Order Items" />
            <PropertyValue Property="ID" String="SalesOrderItemsID" />
            <PropertyValue Property="Target" AnnotationPath="to_Item/@UI.LineItem#SalesOrderItem" />
            <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High" />
         </Record>
         <Record Type="UI.ReferenceFacet">
            <PropertyValue Property="Label" String="Contacts" />
            <PropertyValue Property="ID" String="ContactsID" />
          <PropertyValue Property="Target" AnnotationPath="to_BPAContact/@UI.LineItem" />
            <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High" />
         </Record>
      </Collection>
   </PropertyValue>
</Record>
```

**STEP**: 2 — Understand responsive space allocation for the two tables

**DESCRIPTION**: The two tables adjust their widths automatically depending on the container/screen size. Use these rules to anticipate layout and to design column visibility or priorities accordingly.

**LANGUAGE**: Text

**CODE**:
```
- For extra large (XL) container/screen size (large desktops):
  - First table occupies 75%
  - Second table occupies 25%
  - Image: images/Extra_Large_XL_Containers_Screen_Size_287b6ce.png

- For large (L) container/screen size (desktops):
  - First table occupies 66.66%
  - Second table occupies 33.33%
  - Image: images/Large_L_Containers_Screen_Size_88b89fc.png

- For medium (M) container/screen size (tablets):
  - First and second tables occupy 50% each
  - Image: images/Medium_M_Containers_Screen_Sizes_43b4b66.png

- For small (S) container/screen size (mobiles):
  - Tables appear stacked one below the other
  - Image: images/Small_S_Containers_Screen_Sizes_d94126e.png
```
--------------------------------

**TITLE**: Address Facet in Sections (UI.ReferenceFacet -> Communication.Address)

**INTRODUCTION**: Use a UI.ReferenceFacet that points to an address annotation to render a formatted address in object page sections or quick view popovers. Only the Label property of the address annotation is rendered (use "\n" for new lines). Applicable to SAP Fiori elements for OData V2.

**TAGS**: fiori-elements-framework, odata-v2, ui.referencefacet, address-annotation, xml, abap-cds, cap-cds, quick-view, object-page

STEP: Overview / Rules to follow
DESCRIPTION: 
- Use a UI.ReferenceFacet (or DataFieldForAnnotation referencing Communication.Address) to show an address.
- Only the Label property of the address annotation is interpreted and rendered. Put the full formatted address in the Label, using "\n" for new lines (escaped as \\n where required).
- Applicable only for SAP Fiori elements for OData V2.
- Example Label value: "Mail Drop: TNE QB\\n123 Main Street\\nAny Town, CA 91921-1234\\nU.S.A."
LANGUAGE: Text
CODE:
```text
Notes:
- Only the 'Label' property of the address annotation is interpreted and rendered.
- Use '\n' for new lines in the Label (escaped as \\n in XML/JSON where necessary).
- This behavior applies to SAP Fiori elements for OData V2 only.
Example Label value:
"Mail Drop: TNE QB\n123 Main Street\nAny Town, CA 91921-1234\nU.S.A."
```

STEP: Add an Address Facet as a separate section (Object Page)
DESCRIPTION: Add a UI.ReferenceFacet record pointing to the Communication.Address annotation. Ensure the facet Label is the displayed section title and the address annotation's Label contains the formatted address (use "\n" for line breaks).
LANGUAGE: XML
CODE:
```xml
<Record Type="UI.ReferenceFacet">
   <PropertyValue Property="Label" String="Communication Address" />
   <PropertyValue Property="Target" AnnotationPath="to_Address/@Communication.Address" />
</Record>
```

STEP: Add an Address Facet as a separate section (ABAP CDS)
DESCRIPTION: In ABAP CDS, define a UI.facet using type #ADDRESS_REFERENCE, set targetElement to the address element. The facet label becomes the section title; put the formatted address in the address annotation label.
LANGUAGE: ABAP CDS
CODE:
```
@UI.facet: [
 {
  label: 'Communication Address',
  type: #ADDRESS_REFERENCE,
  targetElement: '_Address',
  purpose: #STANDARD
 }
]  
```

STEP: Add an Address Facet as a separate section (CAP CDS / JSON-style)
DESCRIPTION: In CAP CDS (manifest or annotation file), define a UI.ReferenceFacet with Label and Target referencing the Communication.Address.
LANGUAGE: CAP CDS
CODE:
```
{
    $Type : 'UI.ReferenceFacet',
    Label : 'Communication Address',
    Target : 'to_Address/@Communication.Address'
}
```

STEP: Add Address inside a Field Group within a Section (FieldGroup -> Quick View / Smart Link)
DESCRIPTION: To show the address inside a field group (and enable quick view popover usage with smart link navigation), use a DataFieldForAnnotation referencing Communication.Address inside a UI.FieldGroup. The field group's Label is the group/section label; the DataFieldForAnnotation Label is the address title shown in the group or quick view. Ensure the address annotation's Label contains the formatted address with "\n".
LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.FieldGroup" Qualifier="GeneralInformation">
   <Record>
      <PropertyValue Property="Data">
         <Collection>
            <Record Type="UI.DataFieldForAnnotation">
               <PropertyValue Property="Label" String="Communication Address" />
               <PropertyValue Property="Target" AnnotationPath="to_Address/@Communication.Address"/>
            </Record>
         </Collection>
      </PropertyValue>
      <PropertyValue Property="Label" String="Product Information"/>
   </Record>
</Annotation>
```

STEP: Add Address inside a Field Group within a Section (ABAP CDS)
DESCRIPTION: In ABAP CDS, define a UI.fieldGroup with type #AS_ADDRESS (or appropriate address type), assign qualifier and groupLabel. The field group's Data entry maps to the address element; the address annotation's Label must contain the formatted address text.
LANGUAGE: ABAP CDS
CODE:
```
@UI.fieldGroup: [
  {
    label: 'Communication Address',
    value: '_ADDRESS',
    type: #AS_ADDRESS,
    qualifier: 'GeneralInformation',
    groupLabel: 'Product Information'
  }
]
_ADDRESS;
```

STEP: Add Address inside a Field Group within a Section (CAP CDS / JSON-style)
DESCRIPTION: In CAP CDS (UI annotations), define a UI.FieldGroup with Data containing a UI.DataFieldForAnnotation that targets the Communication.Address. Use Label values as needed and put the formatted address into the address annotation's Label.
LANGUAGE: CAP CDS
CODE:
```
UI.FieldGroup #GeneralInformation : {
    Data : [
        {
            $Type : 'UI.DataFieldForAnnotation',
            Label : 'Communication Address',
            Target : 'to_Address/@Communication.Address'
        }
    ],
    Label : 'Product Information'
}
```

STEP: Related resources
DESCRIPTION: For enabling quick views and enriching popovers for link navigation (useful for quick view display of addresses), consult the enabling quick views documentation.
LANGUAGE: Text
CODE:
```text
Related: Enabling Quick Views for Link Navigation (enabling-quick-views-for-link-navigation-307ced1.md)
```
--------------------------------

**TITLE**: Address Facet in the Object Page Header

**INTRODUCTION**: Shows how to add an address facet to an Object Page header using a UI.ReferenceFacet that points to an address annotation. Only the label property of the address annotation is rendered (it must contain the full formatted address using \n for line breaks). Use these snippets to generate or modify annotations in XML, ABAP CDS, or CAP CDS.

**TAGS**: fiori-elements-framework, UI.ReferenceFacet, address, object-page, header, annotation, CDS, XML, CAP, ABAP

STEP: Behavior and formatting requirements

DESCRIPTION: The Object Page header displays the ReferenceFacet label and, underneath, only the address annotation's label property. Other address annotation properties are ignored. The label string must contain the entire formatted address using literal backslash-n sequences (\n) for new lines.

LANGUAGE: text

CODE:
```text
Example label value (must include \n for new lines):
"Mail Drop: TNE QB\n123 Main Street\nAny Town, CA 91921-1234\nU.S.A."
```

STEP: XML Annotation sample

DESCRIPTION: Add a UI.ReferenceFacet XML annotation in the metadata (annotation file) that targets an address annotation. The ReferenceFacet Label is displayed in the header; Target points to the address annotation path.

LANGUAGE: XML

CODE:
```xml
<Record Type="UI.ReferenceFacet">
    <PropertyValue Property="Label" String="Shipping Address"/>
    <PropertyValue AnnotationPath="@Communication.Address" Property="Target"/>
</Record>
```

STEP: ABAP CDS Annotation sample

DESCRIPTION: Define a UI facet in ABAP CDS with type #AS_ADDRESS to mark the field as an address facet. The facet label will appear in the Object Page header; ensure the referenced address annotation's label contains the formatted address with \n.

LANGUAGE: CDS

CODE:
```
@UI.facet: [
 {
  label: 'Shipping Address',
  type:         #AS_ADDRESS,
  purpose: #STANDARD
 }
]
product;
```

STEP: CAP CDS (JSON-like) Annotation sample

DESCRIPTION: CAP-style annotation for a UI.ReferenceFacet targeting an address annotation. Use this in service or annotation JSON files; the Label is shown in the header and the Target points to the address annotation.

LANGUAGE: JSON

CODE:
```json
{
    $Type : "UI.ReferenceFacet",
    Label : "Shipping Address",
    Target : "@Communication.Address"
}
```
--------------------------------

**TITLE**: Analytical Cards — Annotations and Manifest Configuration for Charts

**INTRODUCTION**: This document collects the essential annotation and manifest code snippets to configure analytical cards (header KPI + chart) in SAP Fiori elements / OVP. Use these steps to: limit fetched chart items, control axis scaling, set fixed axis ranges via DataPoint, enable chart interactivity parameters, and configure cards in manifest.json. Keep snippets intact and apply them to your annotation files, CDS definitions or manifest.json as shown.

**TAGS**: analytical-cards, UI.PresentationVariant, UI.Chart, UI.DataPoint, AxisScaling, manifest.json, OData, CDS, CAP, ABAP, SAPUI5, OVP

STEP: 1 — Limit records rendered in charts (PresentationVariant — XML)
DESCRIPTION: Use UI.PresentationVariant.MaxItems to limit number of records fetched/rendered in the chart for responsiveness. Add this XML annotation to your annotation file and reference it from the card presentationAnnotationPath.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.PresentationVariant" Qualifier="Column_Eval_by_Country_123">
    <Record>      
          <PropertyValue Property="MaxItems" Int="5" />
    </Record>
</Annotation>
```

STEP: 2 — Limit records rendered in charts (PresentationVariant — ABAP CDS)
DESCRIPTION: ABAP CDS equivalent for setting MaxItems. Add to the view or CDS definition and reference via qualifier.
LANGUAGE: ABAP CDS
CODE:
```
@UI.PresentationVariant: [
  {
    maxItems: 5,
    qualifier: 'Column_Eval_by_Country_123'
  }
]
annotate view VIEWNAME with { }
```

STEP: 3 — Limit records rendered in charts (PresentationVariant — CAP CDS)
DESCRIPTION: CAP CDS syntax to define PresentationVariant with MaxItems. Use the qualifier referenced by the card.
LANGUAGE: CAP CDS
CODE:
```
UI.PresentationVariant #Column_Eval_by_Country_123 : {
    MaxItems : 5
}
```

STEP: 4 — Tip: show only top records (use SortOrder)
DESCRIPTION: If you want the chart to display top records rather than arbitrary set, apply UI.PresentationVariant.SortOrder in addition to MaxItems. This focuses the chart on top results for easier selection of data points.
LANGUAGE: text
CODE:
```
Use UI.PresentationVariant.SortOrder together with MaxItems to fetch and render only the top N records.
```

STEP: 5 — Chart interactivity: URL parameter payload when selecting a data point
DESCRIPTION: When users select a data point, the card passes technical IDs (keys) not display names. Example: pass "RegionID=001" (technical key) rather than "Region=EMEA" (display).
LANGUAGE: text
CODE:
```
Selected data point payload example (query string):
RegionID=001  // technical key for target app filtering
```

STEP: 6 — Axis scaling: ZeroAlwaysVisible (XML)
DESCRIPTION: To always include zero in axis range, set AxisScaling.AutoScaleBehavior.ZeroAlwaysVisible = true in UI.Chart annotation (XML).
LANGUAGE: XML
CODE:
```xml
<PropertyValue Property="AxisScaling">
   <Record Type="UI.ChartAxisScalingType">
       <PropertyValue Property="AutoScaleBehavior">
           <Record Type="UI.ChartAxisAutoScaleBehaviorType">
               <PropertyValue Property="ZeroAlwaysVisible" Bool="true"/>
           </Record>
       </PropertyValue>
   </Record>
 </PropertyValue>
```

STEP: 7 — Axis scaling: ZeroAlwaysVisible (CAP CDS)
DESCRIPTION: CAP CDS equivalent to enable ZeroAlwaysVisible auto-scaling behavior.
LANGUAGE: CAP CDS
CODE:
```
AxisScaling : { 
     $Type : 'UI.ChartAxisScalingType',
     AutoScaleBehavior: { 
        $Type: 'UI.ChartAxisAutoScaleBehaviorType',
        ZeroAlwaysVisible: true
        }
  }
```

STEP: 8 — Axis scaling: DataScope (XML)
DESCRIPTION: Use DataScope auto-scale behavior to calculate min/max from the entire dataset (automatic scaling).
LANGUAGE: XML
CODE:
```xml
<PropertyValue Property="AxisScaling">
   <Record Type="UI.ChartAxisScalingType">
       <PropertyValue Property="AutoScaleBehavior">
           <Record Type="UI.ChartAxisAutoScaleBehaviorType">
               <PropertyValue Property="DataScope" EnumMember="DataSet"/>
           </Record>
       </PropertyValue>
   </Record>
 </PropertyValue>>
```

STEP: 9 — Axis scaling: DataScope (CAP CDS)
DESCRIPTION: CAP CDS equivalent for DataScope auto-scaling behavior.
LANGUAGE: CAP CDS
CODE:
```
 AxisScaling : { 
     $Type : 'UI.ChartAxisScalingType',
     AutoScaleBehavior: { 
        $Type: 'UI.ChartAxisAutoScaleBehaviorType',
        DataScope: 'DataSet'
        }
  }
```

STEP: 10 — Axis scaling: FixedScale (XML)
DESCRIPTION: Use FixedScale to apply fixed min/max ranges. FixedScale uses DataPoint MinimumValue and MaximumValue by default unless overridden.
LANGUAGE: XML
CODE:
```xml
<PropertyValue Property="AxisScaling">
   <Record Type="UI.ChartAxisScalingType">
       <PropertyValue Property="ScaleBehavior" EnumMember="UI.ChartAxisScaleBehaviorType/FixedScale"/>
   </Record>
 </PropertyValue>
```

STEP: 11 — Axis scaling: FixedScale (CAP CDS)
DESCRIPTION: CAP CDS equivalent to set ScaleBehavior to FixedScale.
LANGUAGE: CAP CDS
CODE:
```
AxisScaling : { 
     $Type : 'UI.ChartAxisScalingType',
     ScaleBehavior: #FixedScale
  }
```

STEP: 12 — Define DataPoint minimum and maximum (XML)
DESCRIPTION: For FixedScale, define UI.DataPoint MinimumValue and MaximumValue (and ValueFormat) in an annotation qualifier referenced by dataPointAnnotationPath.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.DataPoint" Qualifier="DataPoint_Qualifier">
  <Record Type="UI.DataPointType">
    <PropertyValue Property="MinimumValue" Decimal="1" />
    <PropertyValue Property="MaximumValue" Decimal="5" />
    <PropertyValue Property="ValueFormat">
      <Record>
        .......
      </Record>
    </PropertyValue>
  </Record>
</Annotation>
```

STEP: 13 — Define DataPoint minimum and maximum (ABAP CDS)
DESCRIPTION: ABAP CDS syntax to set data point min/max and number format. Reference this property in your annotations.
LANGUAGE: ABAP CDS
CODE:
```
@UI.dataPoint: { 
    minimumValue: 1,
    maximumValue: 2,
	valueFormat: { }
}
property_name;
```

STEP: 14 — Define DataPoint minimum and maximum (CAP CDS)
DESCRIPTION: CAP CDS variant for UI.DataPoint with MinimumValue and MaximumValue. Use qualifier name referenced by card configuration.
LANGUAGE: CAP CDS
CODE:
```
UI.DataPoint #DataPointQualifier : {
    $Type : 'UI.DataPointType',
    MinimumValue : 1,
    MaximumValue : 5,
    NumberFormat : { }
},
```

STEP: 15 — Manifest configuration sample (manifest.json)
DESCRIPTION: Example manifest.json snippet showing dataSources and sap.ovp.cards settings for analytical cards. Use template "sap.ovp.cards.charts.analytical" for OData V2; for OData V4 use "sap.ovp.cards.v4.charts.analytical".
LANGUAGE: JSON
CODE:
```
{
  "sap.app": {
    "_version": "1.1.0",
    "id": "sap.ovp.demo",
    "type": "application",
    "i18n": "i18n/i18n.properties",
    "applicationVersion": {
      "version": "1.2.2"
    },
    "title": "{{app_title}}",
    "description": "{{app_description}}",
    "dataSources": {
      "salesShare": {
        "uri": "https://abc.com/SalesShare.xsodata",
        "type": "OData",
        "settings": {
          "odataVersion": "2.0",
          "annotations": [
            "salesShareAnno"
          ]
        }
      },
      "salesShareAnno": {
        "uri": "data/salesshare/annotations.xml",
        "type": "ODataAnnotation",
        "settings": {}
      }
    }
  },
  "sap.ovp": {
    "globalFilterModel": "salesShare",
    "globalFilterEntityType": "GlobalFilters", //Deprecated since SAPUI5 1.54.
    "globalFilterEntitySet": "GlobalFilters",  //Available from SAPUI5 1.54.                  
    "cards": {
      "cardBubble": {
        "model": "salesShare",
        "template": "sap.ovp.cards.charts.analytical",
        "settings": {
          "entitySet": "SalesShare",
          "selectionAnnotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant#Eval_by_CtryCurr",
          "chartAnnotationPath": "com.sap.vocabularies.UI.v1.Chart#Eval_by_CtryCurr",
          "presentationAnnotationPath": "com.sap.vocabularies.UI.v1.PresentationVariant#Eval_by_CtryCurr",
          "dataPointAnnotationPath": "com.sap.vocabularies.UI.v1.DataPoint#Eval_by_CtryCurr",
          "identificationAnnotationPath": "com.sap.vocabularies.UI.v1.Identification#Eval_by_CtryCurr"
        }
      },
      "cardchartsline": {
        "model": "salesShare",
        "template": "sap.ovp.cards.charts.analytical",
        "settings": {
          "entitySet": "SalesShare",
          "selectionAnnotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant#Eval_by_Country",
          "chartAnnotationPath": "com.sap.vocabularies.UI.v1.Chart#Eval_by_Country",
          "presentationAnnotationPath": "com.sap.vocabularies.UI.v1.PresentationVariant#Eval_by_Country",
          "dataPointAnnotationPath": "com.sap.vocabularies.UI.v1.DataPoint#Eval_by_Country",
          "identificationAnnotationPath": "com.sap.vocabularies.UI.v1.Identification#Eval_by_Country"
        }
      },
      "cardchartsdonut": {
        "model": "salesShare",
        "template": "sap.ovp.cards.charts.analytical",
        "settings": {
          "entitySet": "SalesShare",
          "selectionAnnotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant#Eval_by_Currency",
          "chartAnnotationPath": "com.sap.vocabularies.UI.v1.Chart#Eval_by_Currency",
          "presentationAnnotationPath": "com.sap.vocabularies.UI.v1.PresentationVariant#Eval_by_Currency",
          "dataPointAnnotationPath": "com.sap.vocabularies.UI.v1.DataPoint#Eval_by_Currency",
          "identificationAnnotationPath": "com.sap.vocabularies.UI.v1.Identification#Eval_by_Currency"
        }
      }
    }
  }
}
```

STEP: 16 — Chart title behavior and axis descriptions
DESCRIPTION: If you configure a chart title, axis descriptions (x- and y-axis) are not displayed in the card (exception: bubble charts). Keep chart titles concise because they replace axis labels in the card UI.
LANGUAGE: text
CODE:
```
Example: Chart title "Net Sales by Days Payable" -- the card will not display separate x/y axis descriptions (y-axis inferred as Net Sales, x-axis as Days Payable). Bubble charts still show axis descriptions.
```

STEP: 17 — Further reference
DESCRIPTION: For additional chart configuration options (chart types, feeds, formatters) refer to the Configuring Charts guide.
LANGUAGE: text
CODE:
```
See: Configuring Charts (configuring-charts-c7c5a82.md)
```
--------------------------------

**TITLE**: Analytical List Page (ALP) — Configuration Reference for Code Generation

**INTRODUCTION**: This guide provides actionable, code-focused steps to configure an SAP Fiori Elements Analytical List Page (ALP). Use it to set up the manifest entry, define required OData annotations (chart and table), enable visual filters and KPI tags, and extend/navigation points. Links point to the original reference files for deeper details.

**TAGS**: fiori-elements, analytical-list-page, ALP, manifest.json, annotations, UI.Chart, UI.LineItem, visual-filter, KPI, ODataV4

**STEP**: 1 — Configure the ALP in manifest.json

**DESCRIPTION**: Add a page entry in manifest.json to use the Analytical List Page template. Provide the component name, the entitySet for the main content, and the annotationPath (annotations file/namespace). This minimal skeleton is suitable for code generation tools to fill with actual entity and annotation names.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "mainService",
        "settings": {
          "synchronizationMode": "None"
        }
      }
    }
  },
  "sap.ui.generic.app": {
    "pages": [
      {
        "component": {
          "name": "sap.suite.ui.generic.template.AnalyticalListPage",
          "list": true,
          "settings": {
            "entitySet": "YourMainEntitySet",            // <-- replace with your entity set
            "annotationPath": "YourService.YourAnnotations" // <-- replace with your annotation path
          }
        }
      }
    ]
  }
}
```

**STEP**: 2 — Provide UI.Chart and UI.LineItem annotations (annotations/Annotations.xml)

**DESCRIPTION**: ALP requires chart and table annotations on the main entity type. Define UI.Chart for the chart area and UI.LineItem for the table area. Place these annotations in your annotation XML (or CDS/JSON annotations) file referenced by annotationPath in manifest.json. Use the placeholder fields to map measures, dimensions, and line items.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="YourService.YourEntityType">
  <!-- Line item annotation: defines table columns -->
  <Annotation Term="UI.LineItem">
    <Collection>
      <Record Type="UI.DataField">
        <PropertyValue Property="Value" Path="Property1"/>
      </Record>
      <Record Type="UI.DataField">
        <PropertyValue Property="Value" Path="Property2"/>
      </Record>
      <!-- Add additional DataField records for the table columns -->
    </Collection>
  </Annotation>

  <!-- Chart annotation: defines the chart visualization used in ALP -->
  <Annotation Term="UI.Chart" Qualifier="MainChart">
    <Record>
      <PropertyValue Property="Title" String="Sales Chart"/>
      <PropertyValue Property="ChartType" EnumMember="UI.ChartType/Column"/>
      <PropertyValue Property="MeasureAttributes">
        <Collection>
          <Record>
            <PropertyValue Property="PropertyPath" Path="SalesAmount"/>
            <PropertyValue Property="Role" EnumMember="UI.ChartMeasureRole/Axis1"/>
          </Record>
        </Collection>
      </PropertyValue>
      <PropertyValue Property="Dimensions">
        <Collection>
          <Record>
            <PropertyValue Property="PropertyPath" Path="SalesRegion"/>
          </Record>
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

**STEP**: 3 — Configure the Visual Filter Bar (UI.Facets / Visual Filters)

**DESCRIPTION**: Define visual filters using UI.Facets or Facet annotations in your annotations file. Visual filters are connected to facets/annotations and allow end users to pick values via charts/tiles. For OData V4, visual filters have restrictions — verify compatibility with your service. Reference the Visual Filter Bar configuration for advanced options.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="YourService.YourEntityType">
  <!-- Example: Facet collection for visual filters -->
  <Annotation Term="UI.Facets">
    <Collection>
      <Record Type="UI.CollectionFacet">
        <PropertyValue Property="Label" String="Visual Filters"/>
        <PropertyValue Property="Facets">
          <Collection>
            <!-- Each ReferenceFacet can point to a Chart annotation (visual filter) -->
            <Record Type="UI.ReferenceFacet">
              <PropertyValue Property="Label" String="Sales by Region"/>
              <PropertyValue Property="Target">
                <Record Type="UI.DataFieldForAnnotation">
                  <PropertyValue Property="AnnotationPath" String="@UI.Chart#MainChart"/>
                </Record>
              </PropertyValue>
            </Record>
            <!-- Add additional facets for other visual filters -->
          </Collection>
        </PropertyValue>
      </Record>
    </Collection>
  </Annotation>
</Annotations>
```

**STEP**: 4 — Configure Title Area and KPI Tags

**DESCRIPTION**: Add KPI tags and header content via header/title annotations. KPI tags enable progressive disclosure and KPI cards (KPI navigation). Configure header annotations (Title Area) in the annotation file and wire any KPI cards to navigation targets (apps or pages). Consult the Title Area configuration for exact annotation terms and properties.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="YourService.YourEntityType">
  <!-- Header info / title area (skeleton) -->
  <Annotation Term="UI.HeaderInfo">
    <Record>
      <PropertyValue Property="TypeName" String="Sales Overview"/>
      <PropertyValue Property="Title" Path="SalesOrderID"/>
      <!-- Add more header properties as required -->
    </Record>
  </Annotation>

  <!-- Example KPI tag as a simple DataField (replace with proper KPI annotation if used) -->
  <Annotation Term="com.sap.vocabularies.UI.v1.KPI">
    <!-- KPI definition goes here. Use KPI annotations per implementation guide. -->
  </Annotation>
</Annotations>
```

**STEP**: 5 — Enable Navigation from Content and KPI Cards

**DESCRIPTION**: Define navigations using NavigationPropertyPath within annotation DataField or via manifest routing to link table rows or KPI cards to target apps/pages. Use NavigationProperty on entity associations or use semanticObject/action intent-based navigation in the manifest or annotation extensions.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.app": { /* app descriptor entries */ },
  "sap.ui5": {
    "routing": {
      "routes": [
        {
          "name": "detail",
          "pattern": "detail/{key}",
          "target": "detail"
        }
      ],
      "targets": {
        "detail": {
          "viewName": "Detail",
          "viewLevel": 2
        }
      }
    }
  }
}
```

**STEP**: 6 — Customize and Share Page Variants (Personalization)

**DESCRIPTION**: ALP supports variant management (save/restore of filters, layouts). Use built-in variant management and configure page variants in manifest settings or via annotations and extensions. Implement extension points for advanced personalization where needed.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui.generic.app": {
    "pages": [
      {
        "component": {
          "settings": {
            "enableListReportsV2": false,
            "flexibleColumnLayout": false,
            "saveAsTile": true,
            "pageVariant": { "enabled": true }
          }
        }
      }
    ]
  }
}
```

**STEP**: 7 — OData V4 Restrictions for Visual Filters

**DESCRIPTION**: If using SAP Fiori Elements with OData V4, visual filters are supported but with restrictions. Verify that your service supports the required annotation patterns and features. Consult "Restrictions for SAP Fiori Elements for OData V4" before implementing advanced visual filter scenarios.

**LANGUAGE**: TEXT

**CODE**:
```text
Note: Visual filters are supported with restrictions in SAP Fiori Elements for OData V4.
Refer to "Restrictions for SAP Fiori Elements for OData V4" and test the visual filter behavior against your OData V4 service.
```

Related files and references:
- Configuring the Manifest for the Analytical List Page: configuring-the-manifest-for-the-analytical-list-page-2a9df06.md (manifest.json application configuration)
- Configuring the Title Area: configuring-the-title-area-ebdb5da.md (dynamic title area and KPI tags)
- Configuring the Visual Filter Bar: configuring-the-visual-filter-bar-33f3d80.md (visual filter bar usage and options)
- Configuring the Content Area: configuring-the-content-area-fc7d73c.md (UI.Chart and UI.LineItem usage)
- Configuring Analytical List Page App Extensions: configuring-analytical-list-page-app-extensions-9504fb4.md (advanced extensions)

Image reference (for UI layout preview): images/ALP_Screenshot_182e040.png
--------------------------------

**TITLE**: Overview Page Annotations Reference (XML / ABAP CDS / CAP CDS)

**INTRODUCTION**: Concise, code-focused reference of annotations used in Fiori Elements Overview Pages. For each annotation term, find an action-oriented description and exact sample code in XML, ABAP CDS, and CAP CDS where available. Use these snippets directly to implement UI annotations for Overview Page cards, KPIs, lists, facets, charts, and sensitivity tagging.

**TAGS**: fiori-elements-framework, annotations, overview-page, UI, CDS, CAP, XML, ABAP, KPI, Chart

**STEP**: HeaderInfo (com.sap.vocabularies.UI.v1.HeaderInfo)

**DESCRIPTION**: Configure card header metadata: type names, title, description and image URL. When referencing manifest.json, dynamicSubtitleAnnotationPath is derived from the path property. Use the following XML / ABAP CDS / CAP CDS snippets to annotate entity types or views.

**LANGUAGE**: XML
```xml
<Annotation 
	    Term="com.sap.vocabularies.UI.v1.HeaderInfo"
    	Qualifier="dynamicSubtitle">
		<Record>
        	<PropertyValue Property="TypeName" String="Product"/>
        	<PropertyValue Property="TypeNamePlural" String="Products"/>
        	<PropertyValue Property="Title">
            	<Record Type="com.sap.vocabularies.UI.v1.DataField">
                	<PropertyValue Property="Value" Path="Name"></PropertyValue>
            	</Record>
        	</PropertyValue>
        	<PropertyValue Property="Description">
            	<Record Type="com.sap.vocabularies.UI.v1.DataField">
                	<PropertyValue Path="Description" Property="Value"/>
            	 </Record>
        	</PropertyValue>
        	<PropertyValue Property="ImageUrl" Path="ProductPicUrl"/>
    	</Record>
	</Annotation>
```

**LANGUAGE**: ABAP CDS
```abap
@UI.headerInfo: {
  typeName: 'Product',
  typeNamePlural: 'Products',
  title: {
    value: 'NAME',
    type: #STANDARD
  },
  description: {
    value: 'DESCRIPTION',
    type: #STANDARD
  },
  imageUrl: 'PRODUCTPICURL'
}
annotate view VIEWNAME with { 

}
```

**LANGUAGE**: CAP CDS
```yaml
UI.HeaderInfo #dynamicSubtitle : {
    TypeName : 'Product',
    TypeNamePlural : 'Products',
    Title : {
        $Type : 'UI.DataField',
        Value : Name
    },
    Description : {
        $Type : 'UI.DataField',
        Value : Description
    },
    ImageUrl : ProductPicUrl
}
```

**STEP**: DataField (com.sap.vocabularies.UI.v1.DataField)

**DESCRIPTION**: Display simple text fields. Set Label and Value (typically a metadata path). Use the samples to define line items, fieldgroup data entries, or identification fields.

**LANGUAGE**: XML
```xml
<Record Type="com.sap.vocabularies.UI.v1.DataField">
    <PropertyValue Property="Label" String="Total Sum"/>
    <PropertyValue Property="Value" Path="TotalSum"/>
</Record>
```

**LANGUAGE**: ABAP CDS
```abap
{ label: 'Total Sum' }
  TOTALSUM;
```

**LANGUAGE**: CAP CDS
```yaml
{
    $Type : 'UI.DataField',
    Label : 'Total Sum',
    Value : TotalSum
}
```

**STEP**: DataFieldForAnnotation (com.sap.vocabularies.UI.v1.DataFieldForAnnotation)

**DESCRIPTION**: Reference another annotation by Target (AnnotationPath). Use to render data points or other annotated terms inside line items or lists.

**LANGUAGE**: XML
```xml
<Record Type="com.sap.vocabularies.UI.v1.DataFieldForAnnotation" Qualifier="WeightMeasure">
    <PropertyValue Property="Label" String="Weight Measure"/>
    <PropertyValue Property="Target" AnnotationPath="@com.sap.vocabularies.UI.v1.DataPoint#WeightMeasure"/>
</Record>
```

**LANGUAGE**: ABAP CDS
```abap
  {
    label: 'Weight Measure',
    valueQualifier: 'WeightMeasure',
    type: #AS_DATAPOINT
  }
  Weight;
```

**LANGUAGE**: CAP CDS
```yaml
{
    $Type : 'UI.DataFieldForAnnotation',
    Label : 'Weight Measure',
    Target : '@UI.DataPoint#WeightMeasure'
}
```

**STEP**: DataFieldForAction (com.sap.vocabularies.UI.v1.DataFieldForAction)

**DESCRIPTION**: Add action buttons pointing to OData FunctionImport actions. Use Action property with fully-qualified action name and set Label and Importance as needed.

**LANGUAGE**: XML
```xml
<Record Type="com.sap.vocabularies.UI.v1.DataFieldForAction">
    <Annotation Term="com.sap.vocabularies.UI.v1.Importance" EnumMember="com.sap.vocabularies.UI.v1.ImportanceType/Medium" />
    <PropertyValue Property="Label" String="Confirm" />
    <PropertyValue Property="Action" String="GWSAMPLE_BASIC.GWSAMPLE_BASIC_Entities/SalesOrder_Confirm" />
</Record>
```

**LANGUAGE**: ABAP CDS
```abap
  {
    importance: #MEDIUM,
    label: 'Confirm',
    dataAction: 'GWSAMPLE_BASIC.GWSAMPLE_BASIC_Entities/SalesOrder_Confirm',
    type: #FOR_ACTION
  }
```

**LANGUAGE**: CAP CDS
```yaml
{
    $Type : 'UI.DataFieldForAction',
    Label : 'Confirm',
    Action : 'GWSAMPLE_BASIC.GWSAMPLE_BASIC_Entities/SalesOrder_Confirm',
    ![@UI.Importance] : #Medium
}
```

**STEP**: DataFieldForIntentBasedNavigation (com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation)

**DESCRIPTION**: Declare intent navigation (semantic object + action) for cards. Include Label and set Importance if required. Use for quick view footer and card navigation actions.

**LANGUAGE**: XML
```xml
<Record Type="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation">
    <PropertyValue Property="SemanticObject" String="SemanticObject1"/>
    <PropertyValue Property="Action" String="Action1"/>
     can also contain an intent based navigation with
     route (static or dynamic with arguments).<PropertyValue Property="Label" String="App1"/>
    <Annotation Term="com.sap.vocabularies.UI.v1.Importance" EnumMember="com.sap.vocabularies.UI.v1.ImportanceType/Medium"/>
</Record><Record Type="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"
```

**LANGUAGE**: ABAP CDS
```abap
@Consumption.semanticObject: 'SemanticObject1'
annotate view VIEWNAME with { 

 @UI.lineItem: [
 {
    importance: #MEDIUM,
    semanticObjectAction: 'Action1',
    label: 'App1',
    type: #FOR_INTENT_BASED_NAVIGATION
  },
  {
    type: #FOR_INTENT_BASED_NAVIGATION
  }
 ]
 property_name;

}
```

**LANGUAGE**: CAP CDS
```yaml
{
    $Type : 'UI.DataFieldForIntentBasedNavigation',
    SemanticObject : 'SemanticObject1',
    Action : 'Action1',
    Label : 'App1',
    ![@UI.Importance] : #Medium
}
```

**STEP**: DataFieldWithUrl (com.sap.vocabularies.UI.v1.DataFieldWithUrl)

**DESCRIPTION**: Configure external or intent-based URLs for navigation. Use Url with odata.fillUriTemplate and odata.uriEncode for dynamic URL templates. Set Value and Label for display.

**LANGUAGE**: XML
```xml
<Record Type="com.sap.vocabularies.UI.v1.DataFieldWithUrl">
    <PropertyValue Property="Label" String="Link to"/>
    <PropertyValue Property="Value" String="Google Maps"/>
    <PropertyValue Property="Url">
        <Apply Function="odata.fillUriTemplate">
            <String>https://www.google.de/maps/place/{street},{city}</String>
            <LabeledElement Name="street">
                <Apply Function="odata.uriEncode">
                    <Path>Address/Street</Path>
                </Apply>
            </LabeledElement>
            <LabeledElement Name="city">
                <Apply Function="odata.uriEncode">
                    <Path>Address/City</Path>
                </Apply>
            </LabeledElement>
        </Apply>
    </PropertyValue>
</Record>
```

**LANGUAGE**: ABAP CDS
```abap
  {
    label: 'Link to',
    type: #WITH_URL
  }
```

**LANGUAGE**: CAP CDS
```yaml
{
  $Type : 'UI.DataFieldWithUrl',
  Value : 'Google Maps',
  Label : 'Link to',
  Url   : {
             $edmJson : {
              $Apply: [
                'https://www.google.de/maps/place/{street},{city}',
                {
                  $LabeledElement : {
                      $Apply    : [{$Path : 'Address/Street'}],
                      $Function : 'odata.uriEncode'
                   },
                   $Name           : 'street'
                },
                {
                  $LabeledElement : {
                     $Apply    : [{$Path : 'Address/City'}],
                     $Function : 'odata.uriEncode'
                  },
                  $Name           : 'city'
                },
            ],
            $Function : 'odata.fillUriTemplate'
           }
         }
}
```

**STEP**: DataPoint (com.sap.vocabularies.UI.v1.DataPoint)

**DESCRIPTION**: Render formatted numeric or trend-aware KPI values. Set Title, Value, Number/ValueFormat, Criticality, CriticalityCalculation, TargetValue and TrendCalculation. Use number and criticality properties to control colors and formatting.

**LANGUAGE**: XML
```xml
<Annotation Term="UI.DataPoint" Qualifier="Eval_by_Country">
	<Record Type="UI.DataPointType">
		<PropertyValue Property="Title" String="Sales India - Line Card" />
		<PropertyValue Property="Value" Path="Sales" />
		<PropertyValue Property="NumberValueFormat">
			<Record>
				<PropertyValue Property="ScaleFactor" IntDecimal="0" />
				<PropertyValue Property="NumberOfFractionalDigits"
					Int="3" />
			</Record>
		</PropertyValue>
		<PropertyValue Property="CriticalityCalculation">
			<Record>
				<PropertyValue Property="ImprovementDirection"
					EnumMember="UI.ImprovementDirectionType/Minimizinge" />
				<PropertyValue Property="DeviationRangeHighValue"
					String="7300" />
				<PropertyValue Property="ToleranceRangeHighValue"
					String="7200" />
			</Record>
		</PropertyValue>
		<PropertyValue Property="TargetValue" String="2.000 " />
		<PropertyValue Property="TrendCalculation">
			<Record>
				<PropertyValue Property="ReferenceValue" String="5201680" />
				<PropertyValue Property="DownDifference" IntDecimal="10000000.0" />
			</Record>
		</PropertyValue>
	</Record>
</Annotation>
```

**LANGUAGE**: ABAP CDS
```abap
@UI.dataPoint: { 
	 title: 'Sales India - Line Card',
	 valueFormat: { scaleFactor: 0,
	 numberOfFractionalDigits: 3 },
	 criticalityCalculation: { 
	   improvementDirection: #MINIMIZE,
	   deviationRangeHighValue: 7300,
	   toleranceRangeHighValue: 7200
	 },
	 targetValue: 2.000,
	 trendCalculation: { 
	 referenceValue: 'refValElement', 
	 downDifference: 10000000.0 }
}
Sales;
```

**LANGUAGE**: CAP CDS
```yaml
UI.DataPoint #Eval_by_Country : {
    $Type : 'UI.DataPointType',
    Title : 'Sales India - Line Card',
    Value : Sales,
    NumberFormat : {
        ScaleFactor : 0,
        NumberOfFractionalDigits : 3
    },
    CriticalityCalculation : {
        ImprovementDirection : #Minimizing,
        DeviationRangeHighValue : '7300',
        ToleranceRangeHighValue : '7200'
    },
    TargetValue : '2.000 ',
    TrendCalculation : {
        ReferenceValue : '5201680',
        DownDifference : 10000000.0
    }
}
```

**STEP**: Identification (com.sap.vocabularies.UI.v1.Identification)

**DESCRIPTION**: Container for card actions (intent navigation, actions, URL links) and simple identification fields. Add collections of DataFieldForIntentBasedNavigation, DataField, or DataFieldWithUrl.

**LANGUAGE**: XML
```xml
<Annotation Term="com.sap.vocabularies.UI.v1.Identification">
    <Collection>
        <Record Type="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation">
            <PropertyValue Property="SemanticObject" String="Action"/>
            <PropertyValue Property="Action" String="toappnavsample"/>
            <PropertyValue Property="Label" String="SO Navigation (M)"/>
            <Annotation Term="com.sap.vocabularies.UI.v1.Importance" EnumMember="com.sap.vocabularies.UI.v1.ImportanceType/Medium"/>
        </Record>
        <Record Type="com.sap.vocabularies.UI.v1.DataField">
            <PropertyValue Property="Label" String="Sales Order ID"/>
            <PropertyValue Property="Value" Path="SalesOrderID"/>
        </Record>
    </Collection>
</Annotation>
```

**LANGUAGE**: ABAP CDS
```abap
@UI.identification: [
  {
    importance: #MEDIUM,
    semanticObjectAction: 'toappnavsample',
    label: 'SO Navigation (M)',
    type: #FOR_INTENT_BASED_NAVIGATION,
    position: 10
  }
]
PROPERT_NAME;

@UI.identification: [
  {
    label: 'Sales Order ID',
    position: 20
  }
]
SALESORDERID;

@Consumption.semanticObject: 'Action'
annotate view VIEWNAME with { 

}
```

**LANGUAGE**: CAP CDS
```yaml
UI.Identification : [
    {
        $Type : 'UI.DataFieldForIntentBasedNavigation',
        SemanticObject : 'Action',
        Action : 'toappnavsample',
        Label : 'SO Navigation (M)',
        ![@UI.Importance] : #Medium
    },
    {
        $Type : 'UI.DataField',
        Label : 'Sales Order ID',
        Value : SalesOrderID
    }
]
```

**STEP**: LineItem (com.sap.vocabularies.UI.v1.LineItem)

**DESCRIPTION**: Define list/table columns or list card fields. Compose a collection of DataField, DataFieldForAnnotation, DataFieldForIntentBasedNavigation, and DataFieldWithUrl. Use qualifiers for datapoint references.

**LANGUAGE**: XML
```xml
<Annotation Term="com.sap.vocabularies.UI.v1.LineItem">
    <Collection>
        <Record Type="com.sap.vocabularies.UI.v1.DataField">
            <PropertyValue Property="Label" String="Sales Order ID"/>
            <PropertyValue Property="Value" Path="SalesOrderID"/>
        </Record>
        <Record Type="com.sap.vocabularies.UI.v1.DataField">
            <PropertyValue Property="Label" String="Customer Name"/>
            <PropertyValue Property="Value" Path="CustomerName"/>
        </Record>
        <Record Type="com.sap.vocabularies.UI.v1.DataField">
            <PropertyValue Property="Label" String="Status"/>
            <PropertyValue Property="Value" Path="Status"/>
        </Record>
        <Record Type="com.sap.vocabularies.UI.v1.DataField">
            <PropertyValue Property="Label" String="Note"/>
            <PropertyValue Property="Value" Path="Note"/>
        </Record>
        <Record Type="com.sap.vocabularies.UI.v1.DataFieldForAnnotation" Qualifier="TotalSum">
            <PropertyValue Property="Label" String="Total Sum"/>
            <PropertyValue Property="Target" AnnotationPath="@com.sap.vocabularies.UI.v1.DataPoint#TotalSum"/>
        </Record>
        <Record Type="com.sap.vocabularies.UI.v1.DataFieldForAnnotation" Qualifier="NetSum">
            <PropertyValue Property="Label" String="Net Sum"/>
            <PropertyValue Property="Target" AnnotationPath="@com.sap.vocabularies.UI.v1.DataPoint#NetSum"/>
        </Record>
        <Record Type="com.sap.vocabularies.UI.v1.DataFieldForAnnotation" Qualifier="Tax">
            <PropertyValue Property="Label" String="Tax"/>
            <PropertyValue Property="Target" AnnotationPath="@com.sap.vocabularies.UI.v1.DataPoint#Tax"/>
        </Record>
        <Record Type="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation">
            <PropertyValue Property="SemanticObject" String="Action"/>
            <PropertyValue Property="Action" String="toappnavsample2"/>
            <PropertyValue Property="Label" String="SO Navigation (M)"/>
            <Annotation Term="com.sap.vocabularies.UI.v1.Importance" EnumMember="com.sap.vocabularies.UI.v1.ImportanceType/Medium"/>
        </Record>
    </Collection>
</Annotation>
```

**LANGUAGE**: ABAP CDS
```abap
@UI.lineItem: [
  {
    label: 'Sales Order ID',
    position: 10
  }
]
SALESORDERID;

@UI.lineItem: [
  {
    label: 'Customer Name',
    position: 20
  }
]
CUSTOMERNAME;

@UI.lineItem: [
  {
    label: 'Status',
    position: 30
  }
]
STATUS;

@UI.lineItem: [
  {
    label: 'Note',
    position: 40
  }
]
NOTE;

@UI.lineItem: [
  {
    label: 'Total Sum',
    valueQualifier: 'TotalSum',
    type: #AS_DATAPOINT,
    position: 50 
  },
  {
    label: 'Net Sum',
    valueQualifier: 'NetSum',
    type: #AS_DATAPOINT,
    position: 60
  },
  {
    label: 'Tax',
    valueQualifier: 'Tax',
    type: #AS_DATAPOINT,
    position: 70
  },
  {
    importance: #MEDIUM,
    semanticObjectAction: 'toappnavsample2',
    label: 'SO Navigation (M)',
    type: #FOR_INTENT_BASED_NAVIGATION,
    position: 80
  }
]
PROPERT_NAME;

@Consumption.semanticObject: 'Action'
annotate view VIEWNAME with { }
```

**LANGUAGE**: CAP CDS
```yaml
UI.LineItem : [
    {
        $Type : 'UI.DataField',
        Label : 'Sales Order ID',
        Value : SalesOrderID
    },
    {
        $Type : 'UI.DataField',
        Label : 'Customer Name',
        Value : CustomerName
    },
    {
        $Type : 'UI.DataField',
        Label : 'Status',
        Value : Status
    },
    {
        $Type : 'UI.DataField',
        Label : 'Note',
        Value : Note
    },
    {
        $Type : 'UI.DataFieldForAnnotation',
        Label : 'Total Sum',
        Target : '@UI.DataPoint#TotalSum'
    },
    {
        $Type : 'UI.DataFieldForAnnotation',
        Label : 'Net Sum',
        Target : '@UI.DataPoint#NetSum'
    },
    {
        $Type : 'UI.DataFieldForAnnotation',
        Label : 'Tax',
        Target : '@UI.DataPoint#Tax'
    },
    {
        $Type : 'UI.DataFieldForIntentBasedNavigation',
        SemanticObject : 'Action',
        Action : 'toappnavsample2',
        Label : 'SO Navigation (M)',
        ![@UI.Importance] : #Medium
    }
]
```

**STEP**: Facets (com.sap.vocabularies.UI.v1.Facets)

**DESCRIPTION**: Define the Overview Page facets collection. Overview Page supports ReferenceFacet only. Use ReferenceFacet to point to FieldGroup qualifiers and mark IsSummary where needed.

**LANGUAGE**: XML
```xml
<Annotation Term="com.sap.vocabularies.UI.v1.Facets">
    <Collection>
        <Record Type="com.sap.vocabularies.UI.v1.ReferenceFacet">
            <Annotation Term="com.sap.vocabularies.UI.v1.IsSummary"/>
            <PropertyValue Property="Label" String="Amounts"/>
            <PropertyValue Property="Target" AnnotationPath="@com.sap.vocabularies.UI.v1.FieldGroup#Amounts"/>
        </Record>
        <Record Type="com.sap.vocabularies.UI.v1.ReferenceFacet">
            <Annotation Term="com.sap.vocabularies.UI.v1.IsSummary"/>
            <PropertyValue Property="Label" String="Note1"/>
            <PropertyValue Property="Target" AnnotationPath="@com.sap.vocabularies.UI.v1.FieldGroup#Status"/>
        </Record>
    </Collection>
</Annotation>
```

**LANGUAGE**: ABAP CDS
```abap
@UI.Facet: [
  {
    isSummary: true,
    label: 'Amounts',
    targetQualifier: 'Amounts',
    type: #FIELDGROUP_REFERENCE,
    purpose: #STANDARD
  },
  {
    isSummary: true,
    label: 'Note1',
    targetQualifier: 'Status',
    type: #FIELDGROUP_REFERENCE,
    purpose: #STANDARD
  }
]
PROPERT_NAME;
```

**LANGUAGE**: CAP CDS
```yaml
UI.Facets : [
    {
        $Type : 'UI.ReferenceFacet',
        Label : 'Amounts',
        Target : '@UI.FieldGroup#Amounts',
        ![@UI.IsSummary]
    },
    {
        $Type : 'UI.ReferenceFacet',
        Label : 'Note1',
        Target : '@UI.FieldGroup#Status',
        ![@UI.IsSummary]
    }
]
```

**STEP**: FieldGroup (com.sap.vocabularies.UI.v1.FieldGroup)

**DESCRIPTION**: Group related DataField entries under a label (FieldGroup). Use in ReferenceFacet target to render grouped content inside cards.

**LANGUAGE**: XML
```xml
<Annotation Term="com.sap.vocabularies.UI.v1.FieldGroup" Qualifier="Amounts">
    <Record Type="com.sap.vocabularies.UI.v1.FieldGroupType">
        <PropertyValue Property="Label" String="Amounts"/>
        <PropertyValue Property="Data">
            <Collection>
                <Record Type="com.sap.vocabularies.UI.v1.DataField">
                    <PropertyValue Property="Label" String="Total Sum"/>
                    <PropertyValue Property="Value" Path="TotalSum"/>
                </Record>
                <Record Type="com.sap.vocabularies.UI.v1.DataField">
                    <PropertyValue Property="Label" String="Net Sum"/>
                    <PropertyValue Property="Value" Path="NetSum"/>
                </Record>
                <Record Type="com.sap.vocabularies.UI.v1.DataField">
                    <PropertyValue Property="Label" String="Tax"/>
                    <PropertyValue Property="Value" Path="Tax"/>
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

**LANGUAGE**: ABAP CDS
```abap
@UI.fieldGroup: [
  {
    label: 'Total Sum',
    position: 10,
    qualifier: 'Amounts',
    groupLabel: 'Amounts'
  }
]
TOTALSUM;

@UI.fieldGroup: [
  {
    label: 'Net Sum',
    position: 20,
    qualifier: 'Amounts'
  }
]
NETSUM;

@UI.fieldGroup: [
  {
    label: 'Tax',
    position: 30,
    qualifier: 'Amounts'
  }
]
TAX;
```

**LANGUAGE**: CAP CDS
```yaml
UI.FieldGroup #Amounts : {
    $Type : 'UI.FieldGroupType',
    Label : 'Amounts',
    Data : [
        {
            $Type : 'UI.DataField',
            Label : 'Total Sum',
            Value : TotalSum
        },
        {
            $Type : 'UI.DataField',
            Label : 'Net Sum',
            Value : NetSum
        },
        {
            $Type : 'UI.DataField',
            Label : 'Tax',
            Value : Tax
        }
    ]
}
```

**STEP**: SelectionVariant (com.sap.vocabularies.UI.v1.SelectionVariant)

**DESCRIPTION**: Define query filters and parameters (SelectOptions and Parameters) as reusable selection variants. Use with SelectionPresentationVariant or standalone. Provide ID/Text for external references.

**LANGUAGE**: XML
```xml
<Annotation Term="com.sap.vocabularies.UI.v1.SelectionVariant">
   <Record>
      <PropertyValue Property="SelectOptions">
         <Collection>
            <Record>
               <PropertyValue Property="PropertyName" PropertyPath="TotalSum" />
               <PropertyValue Property="Ranges">
                  <Collection>
                     <Record>
                        <PropertyValue Property="Sign"
                           EnumMember="com.sap.vocabularies.UI.v1.SelectionRangeSignType/I" />
                        <PropertyValue Property="Option"
                           EnumMember="com.sap.vocabularies.UI.v1.SelectionRangeOptionType/BT" />
                        <PropertyValue Property="Low" String="0" />
                        <PropertyValue Property="High" String="8000" />
                     </Record>
                  </Collection>
               </PropertyValue>
            </Record>
         </Collection>
      </PropertyValue>
   </Record>
</Annotation>
```

**LANGUAGE**: CAP CDS
```yaml
UI.SelectionVariant : {
    SelectOptions : [
        {
            PropertyName : TotalSum,
            Ranges : [
                {
                    Sign : #I,
                    Option : #BT,
                    Low : '0',
                    High : '8000'
                }
            ]
        }
    ]
}
```

**STEP**: PresentationVariant (com.sap.vocabularies.UI.v1.PresentationVariant)

**DESCRIPTION**: Control display (GroupBy, SortOrder, RequestAtLeast, Visualizations, MaxItems). Use with SelectionPresentationVariant to combine selection + presentation. Avoid adding too many requestAtLeast fields in aggregated services.

**LANGUAGE**: XML
```xml
<Annotation Term="com.sap.vocabularies.UI.v1.PresentationVariant">
   <Record>
      <PropertyValue Property="GroupBy">
         <Collection>
            <PropertyPath>Status</PropertyPath>
         </Collection>
      </PropertyValue>
      <PropertyValue Property="SortOrder">
         <Collection>
            <Record>
               <PropertyValue Property="Property" PropertyPath="TotalSum" />
               <PropertyValue Property="Descending" Bool="true" />
            </Record>
         </Collection>
      </PropertyValue>
      <PropertyValue Property="RequestAtLeast">
          <Collection>
             <Record>
                <PropertyPath>CustomerID</PropertyPath>
             </Record>
          </Collection>
       </PropertyValue>
   </Record>
</Annotation>
```

**LANGUAGE**: ABAP CDS
```abap
@UI.PresentationVariant: [
  {
    groupBy: [
      'STATUS'
    ],
    sortOrder: [
      {
        by: 'TOTALSUM',
        direction: #DESC
      }
    ],
 	requestAtLeast: ['CustomerID'],
 	
  }
]
annotate view VIEWNAME with { 

}
```

**LANGUAGE**: CAP CDS
```yaml
UI.PresentationVariant : {
    GroupBy : [
        Status
    ],
    SortOrder : [
        {
            Property : TotalSum,
            Descending : true
        },
    ],
    RequestAtLeast : [
        {
            CustomerID
        }
    ]
}
```

**STEP**: SelectionPresentationVariant (com.sap.vocabularies.UI.v1.SelectionPresentationVariant)

**DESCRIPTION**: Combine SelectionVariant and PresentationVariant by referencing their annotation paths. Use qualifiers to reference existing SelectionVariant and PresentationVariant definitions.

**LANGUAGE**: XML
```xml
<Annotation Term="com.sap.vocabularies.UI.v1.SelectionPresentationVariant" Qualifier="BothSelectionAndPresentation">
    <Record>
        <PropertyValue Property="SelectionVariant" Path="@UI.SelectionVariant#SP2"/>
        <PropertyValue Property="PresentationVariant" Path="@UI.PresentationVariant#customer"/>
    </Record>
</Annotation>
```

**LANGUAGE**: ABAP CDS
```abap
@UI.SelectionPresentationVariant: [
  {
    selectionvariantqualifier: 'SP2',
    presentationvariantqualifier: 'customer',
    qualifier: 'BothSelectionAndPresentation'
  }
]
annotate view VIEWNAME with { 

}
```

**LANGUAGE**: CAP CDS
```yaml
UI.SelectionPresentationVariant #BothSelectionAndPresentation : {
    SelectionVariant : ![@UI.SelectionVariant#SP2],
    PresentationVariant : ![@UI.PresentationVariant#customer]
},
```

**STEP**: Chart (com.sap.vocabularies.UI.v1.Chart)

**DESCRIPTION**: Define chart visualizations: Title, ChartType, Dimensions, Measures, and their attribute collections. Ensure measures and dimensions in attribute collections also appear in Measures / Dimensions lists.

**LANGUAGE**: XML
```xml
<Annotation Term="com.sap.vocabularies.UI.v1.Chart">
   <Record Type="com.sap.vocabularies.UI.v1.ChartDefinitionType">
      <PropertyValue Property="Title" String="View1" />
      <PropertyValue Property="MeasureAttributes">
         <Collection>
            <Record Type="com.sap.vocabularies.UI.v1.ChartMeasureAttributeType">
               <PropertyValue Property="Measure" PropertyPath="TotalSum" />
               <PropertyValue Property="Role" EnumMember="com.sap.vocabularies.UI.v1.ChartMeasureRoleType/Axis1" />
            </Record>
         </Collection>
      </PropertyValue>
      <PropertyValue Property="DimensionAttributes">
         <Collection>
            <Record Type="com.sap.vocabularies.UI.v1.ChartDimensionAttributeType">
               <PropertyValue Property="Dimension" PropertyPath="Status" />
               <PropertyValue Property="Role" EnumMember="com.sap.vocabularies.UI.v1.ChartDimensionRoleType/Series" />
            </Record>
         </Collection>
      </PropertyValue>
   </Record>
</Annotation>
```

**LANGUAGE**: ABAP CDS
```abap
@UI.Chart: [
  {
    title: 'View1',
    measureAttributes: [
      {
        measure: 'TotalSum',
        role: #AXIS_1
      }
    ],
    dimensionAttributes: [
      {
        dimension: 'Status',
        role: #SERIES
      }
    ]
  }
]
annotate view VIEWNAME with { }
```

**LANGUAGE**: CAP CDS
```yaml
UI.Chart : {
    $Type : 'UI.ChartDefinitionType',
    Title : 'View1',
    MeasureAttributes : [
        {
            $Type : 'UI.ChartMeasureAttributeType',
            Measure : TotalSum,
            Role : #Axis1
        },
    ],
    DimensionAttributes : [
        {
            $Type : 'UI.ChartDimensionAttributeType',
            Dimension : Status,
            Role : #Series
        }
    ]
}
```

**STEP**: KPI (UI.KPI)

**DESCRIPTION**: Create KPI tags for Overview Page cards. KPI combines SelectionVariant, PresentationVariant, and DataPoint with navigation properties (SemanticObject, Action). Use Detail block to reference presentation variants and set SelectionVariantQualifier and DataPoint path.

**LANGUAGE**: XML
```xml
<Annotation Term="UI.KPI" Qualifier="Eval_by_Country_-Generic">
    <Record>
        <PropertyValue Property="DataPoint" Path="@UI.DataPoint#Eval_by_Country_-Generic" />
        <PropertyValue Property="Detail">
            <Record Type="UI.KPIDetailType">
                <PropertyValue Property="DefaultPresentationVariant" Path="@UI.PresentationVariant#Eval_by_Currency1" />
                <PropertyValue Property="AlternativePresentationVariants">
                    <Collection>
                        <Path>@UI.PresentationVariant#Eval_by_Currency_Column</Path>
                    </Collection>
                </PropertyValue>
                <PropertyValue String="Action" Property="SemanticObject" />
                <PropertyValue String="toappnavsample" Property="Action" />
            </Record>
        </PropertyValue>
        <PropertyValue String="String for KPI Annotation" Property="ID" />
        <PropertyValue Property="SelectionVariantQualifier" Path="@UI.SelectionVariant#Eval_by_Currency_1" />
    </Record>
</Annotation>
<Annotation Term="UI.DataPoint" Qualifier="Eval_by_Country_-Generic">
    <Record>
        <PropertyValue Property="Value" Path="Currency" />
        <PropertyValue String="test" Property="Title" />
    </Record>
</Annotation>
```

**LANGUAGE**: ABAP CDS
```abap
@UI.KPI: [
  {
    detail: {
      defaultPresentationVariantQualifier: 'Eval_by_Currency1',
      alternativePresentationVariantQualifiers: [
        'Eval_by_Currency_Column'
      ],
      semanticObject: 'Action',
      semanticObjectAction: 'toappnavsample'
    },
    selectionVariantQualifier: 'Eval_by_Currency_1',
    id: 'String for KPI Annotation',
    qualifier: 'Eval_by_Country-Generic',
    dataPoint.title: 'test'
  }
]
Eval_by_Country-Generic;
```

**LANGUAGE**: CAP CDS
```yaml
UI.KPI #AllActualCosts : {
    $Type : 'UI.KPIType',
    Detail : {
        $Type : 'UI.KPIDetailType',
        DefaultPresentationVariant : ![@UI.PresentationVariant#Eval_by_Currency1],
        AlternativePresentationVariants : [
            ![@UI.PresentationVariant#Eval_by_Currency_Column],
        ],
        SemanticObject : 'Action',
        Action : 'toappnavsample',
    },
    SelectionVariant : ![@UI.SelectionVariant#Eval_by_Currency_1],
    DataPoint : ![@UI.DataPoint#Eval_by_Country-Generic],
    ID : 'String for KPI Annotation'
},
```

**STEP**: Text Arrangement (com.sap.vocabularies.Common.v1.Text / UI.TextArrangement)

**DESCRIPTION**: Control how text and IDs are displayed (TextLast, TextFirst, TextOnly). Annotate properties with Common.Text and UI.TextArrangement. Use these snippets to place text localization or adjust formatting in forms and lists.

**LANGUAGE**: XML
```xml
<Annotations xmlns="http://docs.oasis-open.org/odata/ns/edm" Target="GWSAMPLE_BASIC.SalesOrder/CustomerID">
    <Annotation Term="com.sap.vocabularies.Common.v1.Text" Path="Supplier_Name"/>
    <Annotation Term="com.sap.vocabularies.UI.v1.TextArrangement" EnumMember="com.sap.vocabularies.UI.v1.TextArrangementType/TextLast" />
</Annotations>
```

**LANGUAGE**: ABAP CDS
```abap
annotate view SALESORDER with {
  @UI.TextArrangement: #TEXT_LAST
  customerid;
}
```

**LANGUAGE**: CAP CDS
```yaml
annotate GWSAMPLE_BASIC.SalesOrder with {
  @Common.Text : Supplier_Name
  @UI.TextArrangement : #TextLast
  CustomerID
};
```

**STEP**: Potentially Sensitive Personal Data (com.sap.vocabularies.PersonalData.v1)

**DESCRIPTION**: Mark properties as potentially sensitive to support privacy handling. Annotate the target property with PersonalData.IsPotentiallySensitive in XML, ABAP CDS, or CAP CDS.

**LANGUAGE**: XML
```xml
<Annotations Target="SEPMRA_OVW.SEPMRA_C_OVW_SalesOrderType/CompanyCode">
           <Annotation Term="com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive"/>
</Annotations>
```

**LANGUAGE**: ABAP CDS
```abap
@Semantics.personalData.isPotentiallySensitive: true
CompanyCode;
```

**LANGUAGE**: CAP CDS
```yaml
annotate SEPMRA_OVW.SEPMRA_C_OVW_SalesOrderType with {
  @PersonalData.IsPotentiallySensitive
  CompanyCode
};
```
--------------------------------

**TITLE**: Area Micro Chart — UI.Chart and UI.DataPoint Annotations (fiori-elements-framework)

**INTRODUCTION**: Use these annotations to render an Area Micro Chart (trend chart) in Fiori Elements. The chart shows a single measure with threshold semantics (error, warning, acceptance, good) and requires CriticalityCalculation. Dimensions and measures must come from a 1:n navigation (not the same entity). This document collects XML, ABAP CDS, and CAP CDS annotation examples and the mandatory annotation checklist for code generation.

**TAGS**: fiori-elements-framework, AreaMicroChart, UI.Chart, UI.DataPoint, CriticalityCalculation, CDS, CAP, ABAP, XML

STEP: UI.Chart Annotation — XML
DESCRIPTION: Define the chart as an Area chart, provide Title and Description, specify Dimensions and Measures, and bind MeasureAttributes (including DataPoint annotation reference). Use this XML snippet inside your OData Vocab annotation file.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.Chart">
    <Record Type="UI.ChartDefinitionType">
        <PropertyValue Property="Title" String="Sales Price" />
        <PropertyValue Property="Description" String="Area Micro Chart" />
        <PropertyValue Property="ChartType" EnumMember="UI.ChartType/Area" />
        <PropertyValue Property="Dimensions">
            <Collection>
                <PropertyPath>PriceDay</PropertyPath>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="Measures">
            <Collection>
                <PropertyPath>AreaChartPrice</PropertyPath>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="MeasureAttributes">
            <Collection>
                <Record Type="UI.ChartMeasureAttributeType">
                    <PropertyValue Property="Measure" PropertyPath="AreaChartPrice" />
                    <PropertyValue Property="Role" EnumMember="UI.ChartMeasureRoleType/Axis1" />
                    <PropertyValue Property="DataPoint" AnnotationPath="@UI.DataPoint#AreaChartPrice" />
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

STEP: UI.Chart Annotation — ABAP CDS
DESCRIPTION: Equivalent ABAP CDS annotation used in CDS view source. It sets chartType to #AREA, assigns dimensions and measures, and defines a measure attribute that maps to a DataPoint.
LANGUAGE: ABAP CDS
CODE:
```
@UI.Chart: [
  {
    title: 'Sales Price',
    description: 'Area Micro Chart',
    chartType: #AREA,
    dimensions: [
      'PRICEDAY'
    ],
    measures: [
      'AREACHARTPRICE'
    ],
    measureAttributes: [
      {
        measure: 'AreaChartPrice',
        role: #AXIS_1,
        asDataPoint: true
      }
    ]
  }
]
annotate view STTA_C_MP_PRODUCT with {

}
```

STEP: UI.Chart Annotation — CAP CDS
DESCRIPTION: CAP CDS annotation example. Use $Type UI.ChartDefinitionType, set ChartType to #Area, include Dimensions, Measures and MeasureAttributes referencing DataPoint.
LANGUAGE: CDS
CODE:
```
UI.Chart : {
    $Type : 'UI.ChartDefinitionType',
    Title : 'Sales Price',
    Description : 'Area Micro Chart',
    ChartType : #Area,
    Dimensions : [
        PriceDay
    ],
    Measures : [
        AreaChartPrice
    ],
    MeasureAttributes : [
        {
            $Type : 'UI.ChartMeasureAttributeType',
            Measure : AreaChartPrice,
            Role : #Axis1,
            DataPoint : '@UI.DataPoint#AreaChartPrice'
        }
    ]
}
```

STEP: UI.DataPoint Annotation — XML
DESCRIPTION: Define DataPoint with Value, TargetValue and CriticalityCalculation (ImprovementDirection, Deviation/Tolerance ranges). Reference DataPoint qualifier in UI.Chart/MeasureAttributes.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.DataPoint" Qualifier="AreaChartPrice">
    <Record>
        <PropertyValue Property="Value" Path="AreaChartPrice" />
        <PropertyValue Property="TargetValue" Path="TargetPrice" />
        <PropertyValue Property="CriticalityCalculation">
            <Record>
                <PropertyValue Property="ImprovementDirection" EnumMember="UI.ImprovementDirectionType/Target" />
                <PropertyValue Property="DeviationRangeHighValue" Path="DeviationUpperBoundPrice" />
                <PropertyValue Property="DeviationRangeLowValue" Path="DeviationLowerBoundPrice" />
                <PropertyValue Property="ToleranceRangeHighValue" Path="ToleranceUpperBoundPrice" />
                <PropertyValue Property="ToleranceRangeLowValue" Path="ToleranceLowerBoundPrice" />
            </Record>
        </PropertyValue>
    </Record>
</Annotation>
```

STEP: UI.DataPoint Annotation — ABAP CDS
DESCRIPTION: ABAP CDS syntax for the same DataPoint definition. Ensure targetValueElement and criticality calculation element names match your entity properties.
LANGUAGE: ABAP CDS
CODE:
```
@UI.dataPoint: {
  targetValueElement: 'TargetPrice',
  criticalityCalculation: {
    improvementDirection: #TARGET,
    deviationRangeHighValueElement: 'DeviationUpperBoundPrice',
    deviationRangeLowValueElement: 'DeviationLowerBoundPrice',
    toleranceRangeHighValueElement: 'ToleranceUpperBoundPrice',
    toleranceRangeLowValueElement: 'ToleranceLowerBoundPrice'
  }
}
AreaChartPrice;
```

STEP: UI.DataPoint Annotation — CAP CDS
DESCRIPTION: CAP CDS syntax for DataPoint. Use the qualifier (#AreaChartPrice) referenced from UI.Chart.MeasureAttributes.DataPoint.
LANGUAGE: CDS
CODE:
```
UI.DataPoint #AreaChartPrice : {
    Value : AreaChartPrice,
    TargetValue : TargetPrice,
    CriticalityCalculation : {
        ImprovementDirection : #Target,
        DeviationRangeHighValue : DeviationUpperBoundPrice,
        DeviationRangeLowValue : DeviationLowerBoundPrice,
        ToleranceRangeHighValue : ToleranceUpperBoundPrice,
        ToleranceRangeLowValue : ToleranceLowerBoundPrice
    }
}
```

STEP: Constraints, Behavior Notes, and Validation Checklist
DESCRIPTION: Keep these constraints and UI behaviors in mind when generating code and validation logic.
LANGUAGE: text
CODE:
```
- Dimensions and measures must NOT be from the same entity: they must come from a 1:n navigation entity (dimension from parent, measure from child list).
- Ensure unit-of-measure consistency across all data points (e.g., currency or unit).
- The first and last measure values become the top-left and top-right labels of the micro chart.
- The first and last dimension values become the bottom-left and bottom-right labels of the micro chart.
- Semantic coloring is mandatory: include UI.DataPoint -> CriticalityCalculation and specify ImprovementDirection.
```

STEP: Mandatory Annotations Checklist
DESCRIPTION: Ensure all listed annotations/properties are present for Area Micro Chart to render correctly.
LANGUAGE: text
CODE:
```
Mandatory:
- UI.Chart -> ChartType: "Area"
- UI.Chart -> Dimensions
- UI.Chart -> Measures
- UI.Chart -> MeasureAttributes -> DataPoint (reference to UI.DataPoint qualifier)
- UI.DataPoint -> Value
- UI.DataPoint -> CriticalityCalculation
- UI.DataPoint -> CriticalityCalculation/ImprovementDirection
```
--------------------------------

**TITLE**: Bar Chart Card (UI.Chart) Annotation for Fiori Elements

**INTRODUCTION**: Configure a Bar Chart Card using UI.Chart annotations. This guide explains how to define measures, dimensions, measure attributes, and enable semantic coloring via DataPoint/Threshold values. Use this when displaying column or horizontal bar charts (one column per measure) in Fiori Elements analytical cards.

**TAGS**: fiori-elements-framework, UI.Chart, Bar Chart, annotation, semantic-coloring, data-point, measures, thresholds

STEP: 1 — Define the Bar Chart Annotation (Measures, Dimensions, MeasureAttributes, DimensionAttributes)

DESCRIPTION: Create a UI.Chart annotation specifying ChartType/Bar, Title, Measures collection, Dimensions collection, and attribute records. Use MeasureAttributes to link each measure to a DataPoint annotation (for semantic coloring) and to assign a role (Axis1). Use DimensionAttributes to mark the category/dimension role. The number of columns equals the number of measures.

LANGUAGE: XML

CODE:
```xml
<Annotation Term="UI.Chart" Qualifier="Eval_by_Currency_Bar">
   <Record Type="UI.ChartDefinitionType">
      <PropertyValue Property="Title" String="Sales by Product" />
      <PropertyValue Property="ChartType" EnumMember="UI.ChartType/Bar" />
      <PropertyValue Property="Measures">
         <Collection>
            <PropertyPath>Sales</PropertyPath>
         </Collection>
      </PropertyValue>
      <PropertyValue Property="Dimensions">
         <Collection>
            <PropertyPath>Product</PropertyPath>
         </Collection>
      </PropertyValue>
      <PropertyValue Property="MeasureAttributes">
         <Collection>
            <Record Type="UI.ChartMeasureAttributeType">
               <PropertyValue Property="Measure" PropertyPath="Sales" />
               <PropertyValue Property="DataPoint">
                  <AnnotationPath>@UI.DataPoint#Column_Eval_by_Country_123</AnnotationPath>
               </PropertyValue>
               <PropertyValue Property="Role"
                  EnumMember="UI.ChartMeasureRoleType/Axis1" />
            </Record>
             
         </Collection>
      </PropertyValue>
      <PropertyValue Property="DimensionAttributes">
         <Collection>
            <Record Type="UI.ChartDimensionAttributeType">
               <PropertyValue Property="Dimension" PropertyPath="Product" />
               <PropertyValue Property="Role"
                  EnumMember="UI.ChartDimensionRoleType/Category" />
            </Record>
         </Collection>
      </PropertyValue>
   </Record>
</Annotation>
```

STEP: 2 — Enable Semantic Coloring via DataPoint and Threshold Properties

DESCRIPTION: Link each measure in MeasureAttributes to a UI.DataPoint annotation that includes threshold and improvement direction properties. Semantic coloring is driven by these DataPoint properties:
- ToleranceRangeLowValue
- ToleranceRangeHighValue
- DeviationRangeLowValue
- DeviationRangeHighValue
- ImprovementDirection
Additionally, threshold values referenced as ThresholdValues.* (e.g., ThresholdValues.ToleranceRangeLowValue) determine color boundaries.

Recommendation: Use only one measure in a chart when you need semantic coloring for clear legends and thresholds.

Notes:
- When semantic coloring is enabled, threshold values influencing color are displayed in the legend.
- If multiple measures are used, the legend shows only Good / Bad / Neutral, not specific threshold numbers.
- The DataPoint requires a Measure Value (the value evaluated against the thresholds) and an ImprovementDirection indicating maximizing, minimizing, or target behavior.

STEP: 3 — Determine Measure Type and Apply Threshold Logic

DESCRIPTION: Set ImprovementDirection in the DataPoint to indicate how to interpret thresholds for color semantics. Use the following mapping of measure type to threshold evaluation rules.

Maximizing measure (higher is better; example: sales)
- Negative to Critical: measure value >= ThresholdValues.DeviationRangeLowValue
- Critical to Positive: measure value >= ThresholdValues.ToleranceRangeLowValue

Minimizing measure (lower is better; example: cost)
- Positive to Critical: measure value > ThresholdValues.ToleranceRangeHighValue
- Critical to Negative: measure value > ThresholdValues.DeviationRangeHighValue

Target measure (preferred within a range; example: temperature)
- Negative to Critical: measure value >= ThresholdValues.DeviationRangeLowValue
- Critical to Positive: measure value >= ThresholdValues.ToleranceRangeLowValue
- Positive to Critical: measure value > ThresholdValues.ToleranceRangeHighValue
- Critical to Negative: measure value > ThresholdValues.DeviationRangeHighValue

STEP: 4 — UI and Visual Notes (Images and Examples)

DESCRIPTION: Example image paths and visual references from the source documentation:
- Horizontal Bar Chart example: images/Example_of_a_Horizontal_Bar_Chart_Card_51ba955.png
- Bar Chart with Semantic Coloring: images/Example_of_a_Bar_Chart_Card_with_Semantic_Coloring_e9cc5d1.png
- Maximizing Measure example: images/Example_of_a_Maximizing_Measure_3a30047.png
- Minimizing Measure example: images/Example_of_a_Minimizing_Measure_9bef69b.png
- Target Measure example: images/Example_of_a_Target_Measure_7626b9d.png

Use these visual references when validating rendering and legend behavior in the UI.
--------------------------------

**TITLE**: Bubble Chart Card (fiori-elements-framework)

**INTRODUCTION**: Use a Bubble Chart Card to present up to three measures and one or two dimensions. Measures map to x-axis, y-axis, and bubble size; dimensions map to color and/or shape. This document summarizes the feed/role mappings, fallback rules, and provides ready-to-use XML, ABAP CDS, and CAP CDS annotation examples.

**TAGS**: fiori-elements, UI.Chart, bubble, chart, annotation, CDS, ABAP, XML, CAP, semantic-color

**STEP**: Define required roles and feed mappings

**DESCRIPTION**: Assign three measures and one or two dimensions. Follow these mapping rules so the generated card maps annotations to chart feeds:
- Measures:
  - The measure whose Role is Axis1 (or Axis2 if no Axis1, or Axis3 if no Axis2) is mapped to the valueAxis feed and becomes the x-axis (UID = valueAxis).
  - The measure whose Role is Axis2 (or Axis1 of the second measure if no Axis2, or Axis3 of the first measure if no Axis1 for the second) is mapped to the valueAxis2 feed and becomes the y-axis (UID = valueAxis2).
  - The remaining measure is mapped to the bubbleWidth feed (UID = bubbleWidth) and controls bubble size.
- Dimensions:
  - Dimensions with Role Series are mapped to the color feed (UID = color). If multiple dimensions assigned Role Series, color is determined by each combination of members (e.g., Country/Year combinations get unique colors).
  - Dimensions with Role Category are mapped to the shape feed (UID = shape). If multiple dimensions are assigned Category, only the first is considered.
  - If a dimension has no role, members share the same color by default.
- Recommendation: Avoid using Category (shape) for bubble charts; prefer Series (color).

**LANGUAGE**: Text

**CODE**:
```text
Feeds used: valueAxis (x-axis), valueAxis2 (y-axis), bubbleWidth (size), color (dimension series), shape (dimension category)
```

**STEP**: Note fallback rules for measure role assignment

**DESCRIPTION**: Use these explicit fallback rules when assigning roles so automated tools choose correct axes when some roles are missing:
- First measure assigned an axis -> valueAxis (x-axis). Role selection order: Axis1; if absent then Axis2 (if Axis1 missing); if Axis2 missing then Axis3.
- Second measure assigned an axis -> valueAxis2 (y-axis). Role selection for this feed:
  - Prefer Axis2 of a measure.
  - If no Axis2 exists on the first measure, use Axis1 of the second measure.
  - If no Axis1 on the second measure, use Axis3 of the first measure.

**LANGUAGE**: Text

**CODE**:
```text
Fallback mapping summary:
- valueAxis (x): first measure with Role=Axis1; if missing Axis1 -> Axis2; if missing Axis2 -> Axis3
- valueAxis2 (y): first measure with Role=Axis2; if missing -> Axis1 of second measure; else -> Axis3 of first measure
- bubbleWidth (size): the remaining measure (Axis3 or unassigned axis measure)
```

**STEP**: XML Annotation example

**DESCRIPTION**: Copy this XML annotation into your OData service metadata annotations to create a Bubble Chart Card. It defines three measures (Axis1, Axis2, Axis3) and one dimension (Series). Keep the Qualifier for binding.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.Chart" Qualifier="Qualifier_ID_1">
    <Record Type="UI.ChartDefinitionType">
        <PropertyValue Property="Title" String="View1" />
        <PropertyValue Property="ChartType" EnumMember="UI.ChartType/Bubble"/>
        <PropertyValue Property="MeasureAttributes">
            <Collection>
                <Record Type="UI.ChartMeasureAttributeType">
                    <PropertyValue Property="Measure" PropertyPath="SalesShare" />
                    <PropertyValue Property="Role" EnumMember="UI.ChartMeasureRoleType/Axis1" />
                </Record>
                <Record Type="UI.ChartMeasureAttributeType">
                    <PropertyValue Property="Measure" PropertyPath="TotalSales" />
                    <PropertyValue Property="Role" EnumMember="UI.ChartMeasureRoleType/Axis2" />
                </Record>
                <Record Type="UI.ChartMeasureAttributeType">
                    <PropertyValue Property="Measure" PropertyPath="Sales" />
                    <PropertyValue Property="Role" EnumMember="UI.ChartMeasureRoleType/Axis3" />
                </Record>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="DimensionAttributes">
            <Collection>
                <Record Type="UI.ChartDimensionAttributeType">
                    <PropertyValue Property="Dimension" PropertyPath="Product" />
                    <PropertyValue Property="Role" EnumMember="UI.ChartDimensionRoleType/Series" />
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

**STEP**: ABAP CDS Annotation example

**DESCRIPTION**: Use this ABAP CDS snippet to annotate a view. It defines the same Bubble Chart configuration in ABAP CDS style. Keep the qualifier and include the annotation on the view via "annotate view VIEWNAME with { }" pattern as necessary.

**LANGUAGE**: ABAP

**CODE**:
```
@UI.Chart: [
  {
    title: 'View1',
    chartType: #BUBBLE,
    measureAttributes: [
      {
        measure: 'SalesShare',
        role: #AXIS_1
      },
      {
        measure: 'TotalSales',
        role: #AXIS_2
      },
      {
        measure: 'Sales',
        role: #AXIS_3
      }
    ],
    dimensionAttributes: [
      {
        dimension: 'Product',
        role: #SERIES
      }
    ],
    qualifier: 'Qualifier_ID_1'
  }
]
annotate view VIEWNAME with { }
```

**STEP**: CAP CDS Annotation example

**DESCRIPTION**: Use this CAP CDS snippet inside your .cds file annotations. It uses CAP CDS syntax to define the Bubble Chart. Keep the qualifier name to reference the chart.

**LANGUAGE**: CDS

**CODE**:
```
UI.Chart #Qualifier_ID_1 : {
    $Type : 'UI.ChartDefinitionType',
    Title : 'View1',
    ChartType : #Bubble,
    MeasureAttributes : [
        {
            $Type : 'UI.ChartMeasureAttributeType',
            Measure : SalesShare,
            Role : #Axis1
        },
        {
            $Type : 'UI.ChartMeasureAttributeType',
            Measure : TotalSales,
            Role : #Axis2
        },
        {
            $Type : 'UI.ChartMeasureAttributeType',
            Measure : Sales,
            Role : #Axis3
        }
    ],
    DimensionAttributes : [
        {
            $Type : 'UI.ChartDimensionAttributeType',
            Dimension : Product,
            Role : #Series
        }
    ]
}
```

**STEP**: Semantic coloring and best practices

**DESCRIPTION**: Bubble charts support semantic color palettes. Use Role=Series for semantic coloring. Best practices:
- Always provide three measures (explicit roles) and at least one dimension for color differentiation.
- If using two dimensions with Role=Series, expect color combinations (cartesian of members).
- Avoid using Category/shape for bubble charts unless needed; shapes can reduce readability.
- Ensure qualifiers are unique and referenced correctly in card manifests or binding logic.

**LANGUAGE**: Text

**CODE**:
```text
Notes:
- Color palette: supported for semantic coloring via Series role.
- Prefer Series for distinct groups; Category leads to shape differences (not recommended).
- Ensure three measures exist to map x, y, and size reliably.
```
--------------------------------

**TITLE**: Building an App with SAP Fiori elements (using SAP Fiori tools)

**INTRODUCTION**: Short actionable guide for scaffolding, building, and running SAP Fiori elements UI applications using SAP Fiori tools (extensions for SAP Business Application Studio and Visual Studio Code). Use this as a concise checklist for automation or code-generation agents to produce required project files and run common local build commands.

**TAGS**: fiori-elements-framework, sap-fiori-tools, sap-fiori, business-application-studio, visual-studio-code, ui5, build, scaffold

**STEP**: 1 — Verify local prerequisites

**DESCRIPTION**: Ensure Node.js and npm are installed and available on the build agent or developer machine. These commands check versions; adjust required minimum versions per your project guidelines.

**LANGUAGE**: Shell

**CODE**:
```shell
# check Node.js and npm
node -v
npm -v

# (optional) check git availability if scaffolding requires cloning templates
git --version
```

**STEP**: 2 — Install SAP Fiori tools extensions (BAS or VS Code)

**DESCRIPTION**: Install the SAP Fiori tools extension set into Visual Studio Code or use the preconfigured environment in SAP Business Application Studio. These extensions provide the Application Generator and templates for creating SAP Fiori elements projects. Open the Extensions view in VS Code (or the BAS extension manager) and install "SAP Fiori tools". For reference and latest docs, use the official SAP Fiori tools page.

**LANGUAGE**: Plain

**CODE**:
```text
Reference: https://help.sap.com/viewer/product/SAP_FIORI_tools/Latest/en-US
# Manual step: In VS Code -> Extensions -> search "SAP Fiori tools" -> Install
# Or use SAP Business Application Studio with Fiori tools pre-installed.
```

**STEP**: 3 — Scaffold a new SAP Fiori elements app (using the Application Generator)

**DESCRIPTION**: Use the SAP Fiori tools Application Generator to scaffold a new app. In VS Code or BAS, invoke the command palette and run the Fiori generator (e.g., "Fiori: Open Application Generator" or "Fiori: New Project"). Select the SAP Fiori elements floorplan required (for example, List Report/Object Page), provide the OData service URL and annotation files, and accept or customize the generated manifest.json, webapp structure, and package.json.

**LANGUAGE**: Plain

**CODE**:
```text
# In VS Code or BAS:
# 1. Open Command Palette (Ctrl+Shift+P / Cmd+Shift+P)
# 2. Run: "Fiori: Open Application Generator" or "Fiori: New Project"
# 3. Follow prompts:
#    - Project name
#    - Template: "SAP Fiori elements" -> "List Report Object Page" (or other)
#    - OData service URL (EDMX) and annotation file(s)
#    - Namespace and app id
# 4. Generator outputs project folder with webapp/, manifest.json, xs-app.json (if applicable), package.json
```

**STEP**: 4 — Install dependencies and run locally

**DESCRIPTION**: After scaffolding, install NPM dependencies and run the local UI5 dev server or the configured start script in package.json. This step uses standard npm commands; adjust to project-specific scripts if different (e.g., ui5 serve, npm run start).

**LANGUAGE**: Shell

**CODE**:
```shell
# from the generated project root
cd <your-project-folder>

# install dependencies
npm install

# run the app locally (uses project start script or ui5 tooling)
npm start
# or explicit ui5 command if configured
# npx ui5 serve --config=ui5.yaml
```

**STEP**: 5 — Connect to OData backend and test end-to-end

**DESCRIPTION**: Ensure the app connects to the provided OData service and annotations. Validate navigation (List Report -> Object Page) and UI behavior. If CORS or proxy is required during local testing, configure the local dev server (xs-app.json or ui5.yaml) to route backend requests.

**LANGUAGE**: JSON

**CODE**:
```json
// Example xs-app.json route snippet for local proxy to backend OData service
[
  {
    "source": "^/sap/opu/odata/(.*)$",
    "target": "/sap/opu/odata/$1",
    "destination": "your-backend-destination",
    "authenticationType": "none",
    "csrfProtection": false
  }
]
```

**STEP**: 6 — Prepare for deployment to SAP BTP (optional)

**DESCRIPTION**: When ready to deploy, package the app according to your target environment (SAP BTP / Cloud Foundry or Neo). Common options include creating an MTA (multi-target app) or deploying the built static app to an app router or HTML5 Application Repository. Use platform-specific CLI tools for pushing the build artifacts.

**LANGUAGE**: Shell

**CODE**:
```shell
# Example: build production artifacts (if project defines a build step)
npm run build

# Example: Cloud Foundry deploy (ensure cf CLI and target org/space are set)
# cf push <app-name> -p ./dist

# Example: deploy to SAP BTP HTML5 Repository via SAP CLI or CI pipeline
# Use platform tools or CI tasks (not shown here)
```

**NOTE**: For detailed step-by-step procedures, templates, and latest generator options, consult the official SAP Fiori tools documentation: https://help.sap.com/viewer/product/SAP_FIORI_tools/Latest/en-US
--------------------------------

**TITLE**: Building Blocks (SAP Fiori elements — OData V4)

**INTRODUCTION**: Short reference for using SAP Fiori elements building blocks (templating instructions that generate control trees at runtime). Focuses on the Field building block example, configuration precedence, runtime behavior, and requirements for dynamically loaded fragments.

**TAGS**: fiori-elements, odata-v4, building-blocks, macros, sap.fe.macros, fragments, loadFragment, extension-api, manifest

**STEP**: 1 — Applicability and purpose

**DESCRIPTION**: Building blocks are template-like instructions (not SAPUI5 controls) used by Fiori elements to generate control trees based on bound data and attributes. This topic applies only to SAP Fiori elements for OData V4. Use building blocks to create UI representations without directly constructing SAPUI5 controls; the framework decides the resulting control(s) based on metadata and attributes.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Building blocks are templating instructions that generate control trees at runtime.
     Applicable only to SAP Fiori elements for OData V4. -->
```

**STEP**: 2 — Invoke the Field building block (example)

**DESCRIPTION**: Use the Field building block in XML fragments or custom sections to declare UI fields by metaPath. The framework transforms Field usage into appropriate controls depending on the target property's type (example: string -> Text, Edm.Date -> DatePicker). Keep the code snippet exact when copying into your fragment.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Usage of the `Field` building block in a custom section -->
<macros:Field xmlns:macro="sap.fe.macros" metaPath="MyStringProperty" readOnly="true"/>
<macros:Field xmlns:macro="sap.fe.macros" metaPath="MyDateProperty" readOnly="true"/>

<!-- Result (control tree created by the framework at runtime) -->
<m:Text xmlns:m="sap.m" value="{MyStringProperty}"/>
<m:DatePicker xmlns:m="sap.m" value="{MyDateProperty}"/>
```

**STEP**: 3 — Configuration sources and precedence

**DESCRIPTION**: Building block behavior is configured by annotations, building-block-specific XML entries, and the manifest. If the same setting is defined in multiple places, manifest configuration overrides XML and annotation definitions. Always verify manifest entries when unexpected behavior occurs.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Configuration precedence (highest -> lowest):
     1) Manifest configuration (overrides others)
     2) XML-specific entries
     3) Annotations -->
```

**STEP**: 4 — Runtime behavior and API access

**DESCRIPTION**: Building blocks do not exist as controls at runtime; they produce controls. The framework exposes a restricted Extension API object to inspect or manipulate the generated controls. Use the exposed API methods (see ExtensionAPI documentation) rather than attempting to access non-existent building block instances.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- At runtime the framework creates control trees. Use the extension API to interact
     with the generated controls via the supported (restricted) API methods. -->
```

**STEP**: 5 — Using building blocks in dynamically loaded fragments

**DESCRIPTION**: When using building blocks inside fragments that are loaded dynamically, always load the fragment via the sap.fe.core.ExtensionAPI.loadFragment method. This ensures the framework can process building blocks correctly during dynamic fragment instantiation.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- IMPORTANT: For fragments that load dynamically and contain building blocks,
     ensure the fragment is loaded using sap.fe.core.ExtensionAPI.loadFragment. -->
```

**STEP**: 6 — References and live examples

**DESCRIPTION**: Use the SAP Fiori development portal and the ExtensionAPI Demo Kit for live examples and API details.

**LANGUAGE**: Text

**CODE**:
```text
Live examples: https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/topic/introduction
ExtensionAPI (loadFragment): https://ui5.sap.com/#/api/sap.fe.core.ExtensionAPI%23overview
```
--------------------------------

**TITLE**: Bullet Micro Chart — UI.Chart and UI.DataPoint Annotations (XML, ABAP CDS, CAP CDS)

**INTRODUCTION**: This document provides actionable annotation examples and required fields to implement a Bullet Micro Chart in SAP Fiori elements. It includes XML, ABAP CDS, and CAP CDS annotation samples for UI.Chart and UI.DataPoint, and lists mandatory annotations and semantic coloring behavior for code generation.

**TAGS**: fiori-elements-framework, ui.chart, ui.datapoint, bullet-chart, sapui5, annotations, abap-cds, cap-cds, xml

**STEP**: 1 — Define UI.Chart (XML)

**DESCRIPTION**: Use the UI.Chart annotation to configure the bullet chart: set Title and Description (subtitle), ChartType to Bullet, define Measures and MeasureAttributes. Ensure MeasureAttributes includes a DataPoint reference via AnnotationPath.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.Chart">
    <Record Type="UI.ChartDefinitionType">
        <PropertyValue Property="Title" String="Sales Revenue" />
        <PropertyValue Property="Description" String="Bullet Micro Chart" />
        <PropertyValue Property="ChartType" EnumMember="UI.ChartType/Bullet" />
        <PropertyValue Property="Measures">
            <Collection>
                <PropertyPath>BulletChartRevenue</PropertyPath>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="MeasureAttributes">
            <Collection>
                <Record Type="UI.ChartMeasureAttributeType">
                    <PropertyValue Property="Measure" PropertyPath="BulletChartRevenue" />
                    <PropertyValue Property="Role" EnumMember="UI.ChartMeasureRoleType/Axis1" />
                    <PropertyValue Property="DataPoint" AnnotationPath="@UI.DataPoint#BulletChartRevenue" />
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

**STEP**: 2 — Define UI.Chart (ABAP CDS)

**DESCRIPTION**: ABAP CDS syntax for the same UI.Chart configuration. Use chartType #BULLET and set measureAttributes with asDataPoint true if mapping to a UI.DataPoint.

**LANGUAGE**: ABAP CDS

**CODE**:
```
@UI.Chart: [
  {
    title: 'Sales Revenue',
    description: 'Bullet Micro Chart',
    chartType: #BULLET,
    measures: [
      'BULLETCHARTREVENUE'
    ],
    measureAttributes: [
      {
        measure: 'BulletChartRevenue',
        role: #AXIS_1,
        asDataPoint: true
      }
    ]
  }
]
annotate view STTA_C_MP_PRODUCT with {

}
```

**STEP**: 3 — Define UI.Chart (CAP CDS)

**DESCRIPTION**: CAP CDS syntax for UI.Chart. Use ChartType #Bullet and reference DataPoint via '@UI.DataPoint#BulletChartRevenue' inside MeasureAttributes.

**LANGUAGE**: CAP CDS

**CODE**:
```
UI.Chart : {
    $Type : 'UI.ChartDefinitionType',
    Title : 'Sales Revenue',
    Description : 'Bullet Micro Chart',
    ChartType : #Bullet,
    Measures : [
        BulletChartRevenue
    ],
    MeasureAttributes : [
        {
            $Type : 'UI.ChartMeasureAttributeType',
            Measure : BulletChartRevenue,
            Role : #Axis1,
            DataPoint : '@UI.DataPoint#BulletChartRevenue'
        }
    ]
}
```

**STEP**: 4 — Define UI.DataPoint (XML)

**DESCRIPTION**: Map the DataPoint qualifier referenced in MeasureAttributes. Include Value, TargetValue, ForecastValue, MinimumValue, MaximumValue, and Criticality (or CriticalityCalculation). Use Decimal values for min/max if needed.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.DataPoint" Qualifier="BulletChartRevenue">
    <Record>
        <PropertyValue Property="Value" Path="BulletChartRevenue" />
        <PropertyValue Property="TargetValue" Path="TargetRevenue" />
        <PropertyValue Property="ForecastValue" Path="ForecastRevenue" />
        <PropertyValue Property="MinimumValue" Decimal="100" />
        <PropertyValue Property="MaximumValue" Decimal="300" />
        <PropertyValue Property="Criticality" Path="Criticality" />
    </Record>
</Annotation>
```

**STEP**: 5 — Define UI.DataPoint (ABAP CDS)

**DESCRIPTION**: ABAP CDS mapping for the DataPoint. Attach DataPoint annotation to the measure element (BulletChartRevenue). Include targetValueElement, forecastValue, minimumValue, maximumValue, and criticality fields.

**LANGUAGE**: ABAP CDS

**CODE**:
```
@UI.dataPoint: {
  targetValueElement: 'TargetRevenue',
  forecastValue: 'ForecastRevenue',
  minimumValue: 100,
  maximumValue: 300,
  criticality: 'Criticality'
}
BulletChartRevenue;
```

**STEP**: 6 — Define UI.DataPoint (CAP CDS)

**DESCRIPTION**: CAP CDS syntax for UI.DataPoint with qualifier #BulletChartRevenue. Include Value, TargetValue, ForecastValue, MinimumValue, MaximumValue, and Criticality.

**LANGUAGE**: CAP CDS

**CODE**:
```
UI.DataPoint #BulletChartRevenue : {
    Value : BulletChartRevenue,
    TargetValue : TargetRevenue,
    ForecastValue : ForecastRevenue,
    MinimumValue : 100,
    MaximumValue : 300,
    Criticality : Criticality
}
```

**STEP**: 7 — Semantic Coloring and Mandatory Annotations

**DESCRIPTION**: Notes required for semantic coloring and mandatory fields to generate a valid Bullet Micro Chart. Criticality annotation overrides CriticalityCalculation when both are present. If using CriticalityCalculation, include ImprovementDirection.

**LANGUAGE**: Text

**CODE**:
```
Semantic coloring:
- Both UI.DataPoint → Criticality and UI.DataPoint → CriticalityCalculation are supported.
- UI.DataPoint → Criticality overrides UI.DataPoint → CriticalityCalculation.

Mandatory annotations for Bullet Micro Chart:
- UI.Chart → ChartType: "Bullet"         (e.g., EnumMember="UI.ChartType/Bullet" or chartType: #BULLET)
- UI.Chart → Measures                    (list of measure property paths)
- UI.Chart → MeasureAttributes → DataPoint (AnnotationPath to a UI.DataPoint qualifier)
- UI.DataPoint → Value                   (value path for the measure)

If using CriticalityCalculation for semantic coloring, additionally include:
- UI.DataPoint → CriticalityCalculation
- UI.DataPoint → CriticalityCalculation/ImprovementDirection
```
--------------------------------

**TITLE**: Caching the Last Executed Request for Fiori elements List Report (OData V4)

**INTRODUCTION**: Describe how the List Report (SAP Fiori elements for OData V4 in SAP S/4HANA Cloud Public Edition) caches the last executed request parameters on the client to improve load performance. Explain when caching applies, when it is disabled, and how to explicitly enable it when a controller extension is present.

**TAGS**: fiori-elements-framework, request-cache, last-request, odata-v4, s4hana-cloud, list-report, manifest.json, security, PersonalData.IsPotentiallySensitive

**STEP**: Applicability and purpose

**DESCRIPTION**: State the feature scope and purpose. This request-parameter caching mechanism is available only for apps that use SAP Fiori elements for OData V4 in SAP S/4HANA Cloud Public Edition. The cache stores request parameters (not backend responses) so the app can re-trigger the last request on load and reduce end-to-end response time.

**LANGUAGE**: Text

**CODE**:
```Text
Applicable to: SAP Fiori elements for OData V4 in SAP S/4HANA Cloud Public Edition
Behavior: Stores the last executed request parameters on the client (not the backend response)
Purpose: Enables triggering the last request automatically on app load to reduce latency
```

**STEP**: Conditions that disable request caching

**DESCRIPTION**: Request caching is automatically disabled if any of the following conditions are true. Detect these conditions and do not rely on the cache when they apply.

- The request contains a filter on properties annotated with PersonalData.IsPotentiallySensitive. (See: https://github.com/SAP/odata-vocabularies/blob/main/vocabularies/PersonalData.xml#L234)
- A controller extension is defined in the List Report (because extensions can add filters on sensitive data).

For code generation, include checks that:
- Inspect filters for IsPotentiallySensitive annotations before enabling caching.
- Detect presence of controller extensions for the List Report and treat caching as disabled unless explicitly overridden.

**LANGUAGE**: Text

**CODE**:
```Text
Disabled when:
- Filters include properties annotated with PersonalData.IsPotentiallySensitive
  (reference: https://github.com/SAP/odata-vocabularies/blob/main/vocabularies/PersonalData.xml#L234)
- A controller extension exists for the List Report (possible addition of sensitive filters)
```

**STEP**: Override when a controller extension exists (enable caching explicitly)

**DESCRIPTION**: If a controller extension is present but you know no filters on sensitive data are added, you can explicitly enable request caching by setting disableRequestCache to false in the manifest.json controlConfiguration.tableSettings of the List Report target. Ensure you audit extensions to confirm no sensitive filters are introduced before enabling.

- File: manifest.json
- Location: under routing.targets.<YourListTarget>.options.settings.controlConfiguration.@com.sap.vocabularies.UI.v1.LineItem.tableSettings.disableRequestCache

Include the following manifest.json snippet exactly as shown to enable the cache for the list report component target.

**LANGUAGE**: JSON

**CODE**:
```json
"routing": {
    "targets": {
        "RootEntityList": {
            "type": "Component",
            "name": "sap.fe.templates.ListReport",
            "id": "RootEntityList",
            "options": {
                "settings": {
                    "entitySet": "RootEntity",
                    "controlConfiguration": {
                        "@com.sap.vocabularies.UI.v1.LineItem": {
                            "tableSettings": {
                                "disableRequestCache": false
                            }
                        }
                    }
                }
            }
        }
    }
}
```

**STEP**: Security note when overriding disableRequestCache

**DESCRIPTION**: When you set disableRequestCache to false while a controller extension exists, you must ensure that no filters on sensitive properties (annotated with PersonalData.IsPotentiallySensitive) are added by the extension. Failing to verify this can cause sensitive data to be cached (request parameters), which may violate security or privacy policies.

**LANGUAGE**: Text

**CODE**:
```Text
Security requirement: If override disableRequestCache = false while controller extensions exist, validate that:
- No filters target properties annotated with PersonalData.IsPotentiallySensitive
- All extension code has been audited for sensitive filter usage
```

**STEP**: End-user control of cache expiration and clearing

**DESCRIPTION**: Inform that end users can control cache expiration and manually clear the cached last request via the SAP Fiori launchpad (FLP) settings. Include reference to the FLP settings UI image path for documentation or UI automation.

**LANGUAGE**: Text

**CODE**:
```Text
End-user control:
- Users can manage cache expiration and clear the cached last request in SAP Fiori launchpad settings.
- Reference image path: images/FLP_Settings-User_Activities_10345fb.png
```
--------------------------------

**TITLE**: Changing Default Titles of New and Unnamed Objects (SAP Fiori elements)

**INTRODUCTION**: How to replace SAP Fiori elements default titles for newly created or saved unnamed objects by providing application-specific strings in the i18n.properties file. Covers OData V2 and OData V4 behavior, required i18n keys, placement, and important caveats for non-draft apps and missing HeaderInfo.

**TAGS**: fiori-elements-framework, odata-v2, odata-v4, localization, i18n, titles, webapp/i18n

**STEP**: 1 — OData V2: Replace default titles

**DESCRIPTION**: For OData V2 list reports and object pages, default titles are "New Object" (for newly created) and "Unnamed Object" (for saved unnamed items). Provide application-specific values by adding the NEW_OBJECT and UNNAMED_OBJECT keys to your i18n.properties file. Notes:
- NEW_OBJECT and UNNAMED_OBJECT are not supported for list reports in non-draft applications.
- On object pages Fiori elements does not provide a default title for saved objects; to define one for saved unnamed objects you must override UNNAMED_OBJECT.

Place the keys in webapp/i18n/i18n.properties (or your configured i18n file).

**LANGUAGE**: properties

**CODE**:
```properties
# webapp/i18n/i18n.properties (OData V2)
# Example: replace generic titles with application-specific names
NEW_OBJECT=New Contract
UNNAMED_OBJECT=Unnamed Contract
```

**STEP**: 2 — OData V4: Replace default titles and handle HeaderInfo

**DESCRIPTION**: For OData V4 list reports and object pages, newly created objects in tables default to "New Object". If saved without modification the title becomes "Unnamed Object". Titles are editable by users; clearing the title will revert it to the default "Unnamed Object" (unless specific HeaderInfo is missing—see note). Provide application-specific values by adding T_NEW_OBJECT and T_ANNOTATION_HELPER_DEFAULT_HEADER_TITLE_NO_HEADER_INFO to your i18n.properties file.

Note:
- If UI.HeaderInfo.Typename is undefined, when the end user clears the title or saves a newly created item without changing the default "New Object", the title will be set to an empty string (""). Use T_ANNOTATION_HELPER_DEFAULT_HEADER_TITLE_NO_HEADER_INFO to define a fallback title in that scenario.

**LANGUAGE**: properties

**CODE**:
```properties
# webapp/i18n/i18n.properties (OData V4)
# Example: replace generic titles with application-specific names
T_NEW_OBJECT=New Contract
T_ANNOTATION_HELPER_DEFAULT_HEADER_TITLE_NO_HEADER_INFO=Unnamed Contract
```

**STEP**: 3 — References and placement

**DESCRIPTION**: Ensure the keys are added to the i18n file used by the application (commonly webapp/i18n/i18n.properties). For localization best practices and additional UI text keys, refer to the localization documentation.

**LANGUAGE**: text

**CODE**:
```text
File path (typical):
webapp/i18n/i18n.properties

See documentation:
Localization of UI Texts: localization-of-ui-texts-b8cb649.md
```
--------------------------------

**TITLE**: Change Navigation from List Report to Object Page (Disable or Replace with External Navigation)

**INTRODUCTION**: Instructions and manifest.json examples to disable internal List Report -> Object Page navigation or replace it with intent-based external navigation for SAP Fiori Elements (OData V2 and V4). Use these manifest edits to remove nested object page targets or to point navigation to an outbound target defined under sap.app > crossNavigation > outbounds.

**TAGS**: fiori-elements-framework, manifest.json, navigation, OData V2, OData V4, intent-based-navigation, crossNavigation, routing

STEP: Disable internal navigation (OData V2)

DESCRIPTION: Remove the nested ObjectPage "pages" block under sap.ui.generic.app.pages for the ListReport entry in manifest.json to disable navigation from the list report to the object page in the same app. Delete the nested "pages" block (shown in the example) entirely if no internal navigation is required.

LANGUAGE: JSON

CODE:
```json
"sap.ui.generic.app": {
			"pages":[{
				"entitySet": "Zfarvd_Bs_Hd_Bo",
				"component": {
					"name": "sap.suite.ui.generic.template.ListReport",
					"list": true,
					"settings": {
						"gridTable": false, 
						"hideTableVariantManagement": false
					}
				},
//Navigation to detail page: eliminate this block if no navigation is needed
				"pages": [{
					"entitySet": "Zfarvd_Bs_Hd_Bo",
					"component": {
						"name": "sap.suite.ui.generic.template.ObjectPage"
					},	
```

STEP: Disable internal navigation (OData V4)

DESCRIPTION: Remove the "navigation" section from the corresponding target in the manifest.json routing/targets to disable navigation to an object page or subobject page. Ensure the target definition remains but with no "navigation" entry if you want to prevent internal outbound navigation.

LANGUAGE: JSON

CODE:
```json
{
  "sap.ui5": {
    "routing": {
      "targets": {
        "ArtistList": {
          "options": {
            "settings": {
              "contextPath": "/Artists"
              // "navigation": { ... }  <-- Remove this navigation section to disable internal navigation
            }
          }
        }
      }
    }
  }
}
```

STEP: Replace internal navigation with external intent-based navigation (OData V2)

DESCRIPTION: Define an outbound target under sap.app.crossNavigation.outbounds and reference it from sap.ui.generic.app.pages -> pages -> navigation -> display.path and display.target. Ensure sap.ui.generic.app->_version matches (example shows 1.2.0) and that the display path/target points to an existing outbounds entry.

LANGUAGE: JSON

CODE:
```json
    "sap.app": {
        "_version": "1.2.0",
        ...
        "crossNavigation": {
            "inbounds": {},
            "outbounds": {
                "ExampleNavigationTarget":
                {
                    "semanticObject": "EPMProduct",
                    "action": "manage_st"
                }
            }
        }
    ...
...
    "sap.ui.generic.app": {
        "_version": "1.2.0",
        "pages": [{
            "entitySet": "STTA_C_MP_Product",
            "component": {
                "name": "sap.suite.ui.generic.template.ListReport",
                "list": true
            },
            "pages": [{
                "entitySet": "STTA_C_MP_Product",
                "component": {
                    "name": "sap.suite.ui.generic.template.ObjectPage"
                },
// Navigation to an external target instead of a detail page: Add this block to set up external navigation.
                "navigation": {
                    "display": {
                        "path": "sap.apps.crossNavigation.outbounds",
                        "target": "ExampleNavigationTarget"

            
```

STEP: Replace internal navigation with external intent-based navigation (OData V4 — routing + outbound using detail -> outbound)

DESCRIPTION: For SAP Fiori Elements OData V4 (sap.ui5 routing), define outbounds under sap.app.crossNavigation.outbounds and reference the outbound from the object page target using navigation -> <association> -> detail -> outbound to trigger external navigation instead of the default internal subobject route. This sample shows routing, targets, and use of "outbound": "ProductDetails".

LANGUAGE: JSON

CODE:
```json
{
…
…
 "sap.app": {
        "crossNavigation": {
            "outbounds": {
                "ProductDetails": {
                    "semanticObject": "ProductDetails",
                    "action": "manage"
                }
            }
        }
 },
"sap.ui5": {
    ....
    ....
    ....
    "routing": {
…
…
        "routes": [{
            "pattern": ":?query:",
            "name": "ArtistList",
            "target": "ArtistList"
        }, {
            "pattern": "Artists({key}):?query:",
            "name": "ArtistDetail",
            "target": "ArtistObjectPage"
        }],
        "targets":{
            "ArtistList": {
                "type": "Component",
                "id": "ArtistList",
                "name": "sap.fe.templates.ListReport",
                "options": {
                    "settings" :{                          
                        "contextPath": "/Artists",
                        "navigation": {                              
                            "Artists": {                                 
                                "detail": {                                      
                                    "route": "ArtistObjectPage" // This triggers the regular internal navigation to OP from LR table record
                                }                           
                            }                          
                        }
                    }
                }
            }, // End of ArtistList
            "ArtistObjectPage": {
                "type": "Component",
                "id":  "ArtistDetail",                  
                "name": "sap.fe.templates.ObjectPage",
                "options": {
                    "settings" : {                          
                        "contextPath": "/Artists",                          
                        "_tableType" : "Table",                          
                        "navigation": {                              
                            "_Publication": {                                  
                                "detail": {                                      
                                    "outbound": "ProductDetails" // This triggers the external navigation to "ProductDetails" instead of the regular internal navigation to the sub-object page
                                }
                            }                          
                        }
                    }
                }
            } // End of ArtistObjectPage
        } // End of Targets
     }, // End of routing
    .....
    .....
    .....
  } // End of sap.ui
…
…
}
```

STEP: Replace internal navigation with external intent-based navigation (OData V4 — navigation.display using crossNavigation.outbounds)

DESCRIPTION: Alternative to using detail->outbound: use navigation -> <association> -> display with a path to sap.apps.crossNavigation.outbounds and a target name. When both display and detail are present, display takes priority. Ensure the target name matches an outbound entry under sap.app.crossNavigation.outbounds.

LANGUAGE: JSON

CODE:
```json
"navigation": {                              
    "_Publication": {
        "display":{                                      
            "path":"sap.apps.crossNavigation.outbounds",
            "target":"ProductDetails"
        }                              
    }
}
```
--------------------------------

**TITLE**: Analytical Chart Cards for Overview Pages

**INTRODUCTION**: Short reference for using analytical (chart) cards in overview pages. Explains behavior and requirements so AI agents can generate configuration and UI code that places analytical charts into overview pages and handles visual behavior.

**TAGS**: fiori-elements-framework, overview-page, analytical-card, chart-card, SAP Fiori, UI

**STEP**: 1 — Purpose and Use Case

**DESCRIPTION**: Analytical chart cards are the chart widgets used in overview pages to present measures and dimensions visually. Use them when you need an at-a-glance analytical visualization inside an overview page. Ensure the card definition supplies the required measures and dimensions (data points) so the framework can render the visualization.

**LANGUAGE**: Plain English

**CODE**:
```text
No code example provided in source.
```

**STEP**: 2 — Visual Behavior and Layout Rules

**DESCRIPTION**: Analytical cards do not have a fixed height. The runtime automatically adjusts a card's height to fit:
- The number of data points visible
- Any legends that are created
Legends are auto-generated based on the measures and dimensions defined in the card configuration. Do not hard-code a card height expecting a fixed chart size — rely on the framework's automatic sizing.

**LANGUAGE**: Plain English

**CODE**:
```text
No code example provided in source.
```

**STEP**: 3 — Implementation Guidance (Actionable Checklist for Code Generation)

**DESCRIPTION**: When generating code or manifest entries for overview pages that include analytical cards, ensure these items are satisfied:
- Declare the card as an analytical/chart type appropriate for the overview page.
- Provide measures and dimensions in the card's data definition so legends can be derived.
- Avoid setting a fixed height for the card; allow automatic layout.
- Verify the data source and mapping of measures/dimensions so the chart renders correctly.

**LANGUAGE**: Plain English

**CODE**:
```text
No code example provided in source.
```
--------------------------------

**TITLE**: Chart Extensions (onBeforeRebindChartExtension for Analytical List Page)

**INTRODUCTION**: Add a controller extension to an Analytical List Page (ALP) to customize chart behavior before rebinding (for example, to supply custom filters or query parameters). This extension uses the onBeforeRebindChartExtension hook provided by the ALP controller. Applicable to SAP Fiori elements for OData V2 only.

**TAGS**: fiori-elements, analytical-list-page, ALP, chart-extension, controller-extension, onBeforeRebindChartExtension, manifest.json, OData V2

**STEP**: 1 — Declare controller extension in manifest.json

**DESCRIPTION**: In your application's manifest.json, declare a controller extension for the ALP base controller (sap.suite.ui.generic.template.AnalyticalListPage.view.AnalyticalListPage). Set the controllerName to the fully qualified name of your extension controller. Place this declaration under the "sap.ui5" section and the "extends" -> "extensions" -> "sap.ui.controllerExtensions" path.

**LANGUAGE**: JSON

**CODE**:
```json
"sap.ui5": {
    "_version": "1.1.0",
	…
	…
"extends": {
		"extensions": {
		"sap.ui.controllerExtensions": {
			"sap.suite.ui.generic.template.AnalyticalListPage.view.AnalyticalListPage": {
				"controllerName": "sap.poc.ftu.apps.alr.ext.controller.AnalyticalListPageExt",
				"sap.ui.generic.app": {
					…
					…
```

**STEP**: 2 — Implement onBeforeRebindChartExtension in the extension controller

**DESCRIPTION**: Create the extension controller with the name specified in manifest.json (for example: sap/poc/ftu/apps/alr/ext/controller/AnalyticalListPageExt.controller.js). Implement the onBeforeRebindChartExtension method to receive the ALP event object (oEvent) and add custom logic—e.g., add filters or modify binding parameters. The sample below shows a minimal implementation that confirms invocation.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
sap.ui.define([], function() {
    return {
        onBeforeRebindChartExtension: function(oEvent) {
            alert('onBeforeRebindChartExtension called!');
        }
    }
})
```

**STEP**: 3 — Usage notes and behavior

**DESCRIPTION**: The ALP framework will call onBeforeRebindChartExtension and pass a chart rebind event object (oEvent). Use oEvent.getSource(), oEvent.getParameter(...) or oEvent.getParameters() as required to extract chart controls, binding contexts, or to add filters/parameters to the rebind. Implement your custom logic inside the onBeforeRebindChartExtension function to modify the chart's binding before the framework issues the request.
--------------------------------

**TITLE**: Verify Generated SAP Fiori elements (OData V2) Project Structure and Artifacts

**INTRODUCTION**: Quick, action-oriented checklist to validate the generated SAP Fiori elements (OData V2) application after scaffolding and npm install. Use this to confirm the folder layout, key artifact files (Component.js, manifest.json, local annotation files), preview destinations, and run configurations for local testing.

**TAGS**: fiori-elements-framework, sapui5, odata-v2, manifest.json, Component.js, ui5, annotations, localService, i18n, run-config

STEP: 1 — Inspect folder structure and expected artifacts

DESCRIPTION: Verify that the generator created the app skeleton and standard folders/files for a List Report + Object Page app. Confirm presence of app descriptor, component, localService, i18n, and UI5 configuration files. If available, open the folder structure image referenced by the generator docs.

LANGUAGE: FilePaths

CODE:
```text
Expected top-level files and folders:
- webapp/
  - Component.js
  - manifest.json
  - index.html
  - localService/
    - metadata.xml
    - SEPMRA_PROD_MAN_ANNO_MDL.xml
  - i18n/
    - i18n.properties
  - view/     (views reused from sap.suite.ui.generic.template)
  - controller/
  - images/
- ui5*.yaml   (UI5 tooling preview/destination configuration)
- package.json
```

STEP: 2 — Verify Component.js (do not edit)

DESCRIPTION: Confirm Component.js exists at webapp/Component.js. This SAPUI5 component bootstraps the app and links to manifest.json for routing, templates, and OData/annotation references. Do not modify this file unless you understand the framework implications.

LANGUAGE: JavaScript

CODE:
```javascript
// File: webapp/Component.js
// This file is generated. Do not edit unless required.
// It initializes the component and reads configuration from manifest.json
sap.ui.define([
  "sap/ui/core/UIComponent"
], function (UIComponent) {
  "use strict";
  return UIComponent.extend("your.namespace.Component", {
    metadata: {
      manifest: "json"
    }
  });
});
```

STEP: 3 — Inspect manifest.json for service and annotation links

DESCRIPTION: Open webapp/manifest.json and confirm the OData service and annotations are configured under "sap.app" / "sap.ui5" -> "models" and "dataSources". Local annotation files (localService/...) should be listed if generator created them. Local annotations (annotations.xml) take precedence over backend annotation links.

LANGUAGE: JSON

CODE:
```json
// File: webapp/manifest.json (relevant sections)
{
  "sap.app": {
    "id": "your.namespace",
    "applicationVersion": { "version": "1.0.0" }
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "mainService"
      },
      "annotations": {
        "dataSource": "annotations"
      }
    },
    "dataSources": {
      "mainService": {
        "uri": "/sap/opu/odata/sap/SEPMRA_PROD_MAN_SRV/",
        "type": "OData",
        "settings": { "odataVersion": "2.0" }
      },
      "annotations": {
        "uri": "localService/SEPMRA_PROD_MAN_ANNO_MDL.xml",
        "type": "ODataAnnotation"
      }
    }
  }
}
```

STEP: 4 — Check localService and annotation precedence

DESCRIPTION: Ensure the generated localService files exist for local testing. If a local annotations file (annotations.xml) is present in the project, it will override annotations provided by the backend/catalog service when running locally.

LANGUAGE: FilePaths / XML

CODE:
```text
Local test files (webapp/localService/):
- webapp/localService/metadata.xml
- webapp/localService/SEPMRA_PROD_MAN_ANNO_MDL.xml

Annotation precedence:
- If webapp/annotations.xml exists -> used for preview/local test
- Else -> annotations are fetched from backend/catalog (as configured in manifest.json)
```

STEP: 5 — Verify ui5 preview destination configuration (ui5*.yaml)

DESCRIPTION: Open any ui5*.yaml files at project root to adapt preview destinations used by the Fiori Tools Run Configurations. Adjust these destination entries to point to the correct backend/annotation locations for local preview.

LANGUAGE: YAML

CODE:
```yaml
# File: ui5-deploy.yaml or ui5.yaml (example structure)
specVersion: '2.1'
metadata:
  name: your-app
server:
  customMiddleware: []
connectivity:
  destinations:
    - name: backend
      url: https://example-backend.example.com
    - name: annotations
      url: https://example-backend.example.com/annotations
```

STEP: 6 — Use Run Configurations for preview (Fiori Tools)

DESCRIPTION: Use the VS Code command palette to open and adapt run configurations (destinations, launch options). This launches the UI5 preview using the destinations defined in ui5*.yaml or workspace settings.

LANGUAGE: Command

CODE:
```text
Command Palette:
- Execute: Fiori: Open Run Configurations
Actions:
- Select a run configuration
- Edit destinations for preview (backend, annotations)
- Start Preview to run the generated app locally
```

STEP: 7 — Localization and shell bar metadata

DESCRIPTION: Check i18n resource files for UI texts and the manifest for app subtitle and shell icon configuration. Maintain UI texts in i18n properties and reference them from manifest.json and views.

LANGUAGE: FilePaths / JSON

CODE:
```text
Localization files:
- webapp/i18n/i18n.properties

Manifest entries:
- webapp/manifest.json -> sap.app (title, description), sap.ui (icon, shell parameters)
```
--------------------------------

**TITLE**: Choosing Filter Modes for Analytical List Page (ALP)

**INTRODUCTION**: Describes visual and compact filter modes in the Analytical List Page (ALP), how they synchronize, how to customize which fields/charts appear on the filter bar, and extra visual-filter capabilities available in SAP Fiori Elements for OData V2.

**TAGS**: fiori-elements-framework, analytical-list-page, ALP, visual-filter, compact-filter, filter-bar, annotations, ODataV2, value-help

**STEP**: 1 — Filter modes overview

**DESCRIPTION**: Understand the two ALP filter modes and their interaction. The ALP provides:
- Visual filter mode (chart-based visual selectors).
- Compact filter mode (regular filter fields).
- Toggling between modes is supported while filters are applied; values synchronize between modes.
- Filter fields that do not have a visual-filter annotation appear only in compact mode.
- Every field configured for the visual filter also appears in compact mode.

**LANGUAGE**: text

**CODE**:
```text
Visual filter <-> Compact filter synchronization:
- Toggling modes preserves and syncs filter values.
- Fields without visual-filter configuration are visible only in Compact filter.
- Fields with visual-filter configuration appear in both Visual and Compact filters.
```

**STEP**: 2 — Customize which filters and visual charts appear on the filter bar

**DESCRIPTION**: Use the UI adaptation to select which fields and charts appear in either filter mode. This affects both visual and compact filters.

- Use "Adapt Filters (<number>)" in the ALP header area to add/remove filter fields and visual filters.
- The number in parentheses is the count of selected filter fields (explained in Step 4).

**LANGUAGE**: text

**CODE**:
```text
UI action: Header > Adapt Filters (<number>)
- Open Adapt Filters to add/remove filter fields and visual filter charts.
- Changes apply to both Visual and Compact filter modes.
```

**STEP**: 3 — Filter selection count behavior

**DESCRIPTION**: The filter selection count shown in the header indicates the number of filter fields that currently have selections applied. Important details:
- The count is based on the number of fields with set filter conditions, not the number of filter values.
- The count includes filters applied from the filter dialog even if those fields are not visible on the filter bar.

**LANGUAGE**: text

**CODE**:
```text
Filter count rules:
- Count = number of fields with active filter conditions.
- Not based on number of values within a field.
- Includes filters set via filter dialog, including those not visible on the filter bar.
```

**STEP**: 4 — Behavior when using Visual Filter mode

**DESCRIPTION**: When the user is in visual filter mode:
- All filter values from the regular (compact) filter bar are applied to the main content area, including compact-only fields (fields without visual-filter configuration).
- Visual filter supports switching chart type, sort order, and measure (OData V2 only).
- Supported visual chart types: bar, donut, line.

**LANGUAGE**: text

**CODE**:
```text
Visual Filter behaviors (OData V2):
- Visual filter applies all compact filter values to the main content area.
- User can change: chart type (bar, donut, line), sort order, and measure for visual filters.
- Fields lacking visual-filter annotation: not shown as visual charts, but their filter values still apply.
```

**STEP**: 5 — Annotation configuration guidance (high-level)

**DESCRIPTION**: The presence of a field in visual or compact filter mode is determined by the annotation configuration for that field. When preparing annotations or CDS for ALP:
- Configure visual-filter related annotations for dimensions you want charted/visualized.
- Ensure selection fields are exposed so they appear on the compact filter bar.
- ValueList annotations (value help) are used to map main-entity fields to value help entities; these support visual filters where applicable.

Preserve links to detailed annotation guidance:
- Configuring the Title Area
- Managing Variants
- Enhancing ValueList Annotations for Visual Filters

**LANGUAGE**: text

**CODE**:
```text
Annotation guidance:
- Use selection field annotations to expose fields in compact filters.
- Use visual-filter annotations (per your project annotation mechanism) to expose fields as visual filters.
- Use ValueList annotations to connect fields to value helps used by filters.

Related documents:
- configuring-the-title-area-ebdb5da.md
- managing-variants-8ce658e.md
- enhancing-valuelist-annotations-for-visual-filters-16d43eb.md
```
--------------------------------

**TITLE**: Coloring Column Chart Cards by Threshold Values (Fiori Elements - Overview Pages)

**INTRODUCTION**: Use semantic coloring for column-chart cards on Fiori overview pages by associating a data point annotation (ThresholdValues & ImprovementDirection) with the measure used in the analytic card. Recommended for single-measure charts. This document describes required conditions, legend behavior, and precise threshold-to-color mappings for target, maximizing, and minimizing measures.

**TAGS**: fiori-elements-framework, overview-page, semantic-coloring, threshold, KPI, annotation, data-point

**STEP**: 1 — Preconditions and Recommended Setup

**DESCRIPTION**: Ensure your measure and its associated data point satisfy the required conditions before enabling semantic coloring on a column chart card. Prefer using a single measure per chart for meaningful legends and coloring.

- Required conditions for a measure to support semantic coloring:
  - The measure must have a data point annotation that provides the improvement direction (ImprovementDirection). Typical directions:
    - Maximizing (higher values are better)
    - Minimizing (lower values are better)
    - Target (preferred within a range)
  - The data point must include the threshold values described below (ToleranceRangeLowValue, ToleranceRangeHighValue, DeviationRangeLowValue, DeviationRangeHighValue).

- Legend behavior:
  - If a single measure satisfies the conditions, legend displays the threshold values and semantic labels.
  - If multiple measures satisfy the conditions, each measure is semantically colored according to its thresholds but the legend becomes less meaningful.
  - If some measures lack the required data point/thresholds, those measures are colored black; the ones with thresholds are semantically colored.

**LANGUAGE**: TEXT

**CODE**:
```text
Required data point annotation elements:
- ImprovementDirection (e.g. Maximize, Minimize, Target)
- ThresholdValues:
    - ToleranceRangeLowValue
    - ToleranceRangeHighValue
    - DeviationRangeLowValue
    - DeviationRangeHighValue
```

**STEP**: 2 — Target Measure (example: temperature) — Threshold-to-Color Mapping

**DESCRIPTION**: For a "Target" improvement direction, define thresholds so the chart segments are colored according to ranges around a preferred target zone. Use the following comparisons against the measure value to map "From -> To" semantic segments.

Keep the exact threshold property names in your data point annotation: ThresholdValues.DeviationRangeLowValue, ThresholdValues.ToleranceRangeLowValue, ThresholdValues.ToleranceRangeHighValue, ThresholdValues.DeviationRangeHighValue.

**LANGUAGE**: TEXT

**CODE**:
```text
Target Measure (improvement direction = Target)
Mapping (From -> To) and condition on Measure Value:

From      -> To        : Measure Value condition
Negative  -> Critical  : >= ThresholdValues.DeviationRangeLowValue
Critical  -> Positive  : >= ThresholdValues.ToleranceRangeLowValue
Positive  -> Critical  : >  ThresholdValues.ToleranceRangeHighValue
Critical  -> Negative  : >  ThresholdValues.DeviationRangeHighValue
```

(Images illustrating Target measure examples: images/Target_Measure_9329c7a.png, images/ovp_semanticcolor_target_b57af63.png)

**STEP**: 3 — Maximizing Measure (example: sales) — Threshold-to-Color Mapping

**DESCRIPTION**: For a "Maximize" improvement direction, map thresholds so larger values are better. Use the specified ThresholdValues properties in the data point annotation.

**LANGUAGE**: TEXT

**CODE**:
```text
Maximizing Measure (improvement direction = Maximize)
Mapping (From -> To) and condition on Measure Value:

From      -> To        : Measure Value condition
Negative  -> Critical  : >= ThresholdValues.DeviationRangeLowValue
Critical  -> Positive  : >= ThresholdValues.ToleranceRangeLowValue
```

(Images illustrating Maximizing measure examples: images/Maximizing_Measure_0f242d3.png, images/ovp_semanticcolor_max_c16efec.png)

**STEP**: 4 — Minimizing Measure (example: cost) — Threshold-to-Color Mapping

**DESCRIPTION**: For a "Minimize" improvement direction, map thresholds so smaller values are better. Use the specified ThresholdValues properties in the data point annotation.

**LANGUAGE**: TEXT

**CODE**:
```text
Minimizing Measure (improvement direction = Minimize)
Mapping (From -> To) and condition on Measure Value:

From      -> To        : Measure Value condition
Positive  -> Critical  : > ThresholdValues.ToleranceRangeHighValue
Critical  -> Negative  : > ThresholdValues.DeviationRangeHighValue
```

**STEP**: 5 — Implementation Notes for Developers

**DESCRIPTION**: Actionable guidance when implementing semantic coloring in your Fiori Elements overview page:

- Attach a DataPoint annotation to the measure used by the analytic card. Ensure ImprovementDirection and ThresholdValues are present.
- Prefer a single measure per chart card for clear legend/threshold display.
- If multiple measures are used and all have thresholds, charts will still color each measure by its own thresholds, but legends may not be useful.
- If some measures lack thresholds, those measures will render in default (black) color.

**LANGUAGE**: TEXT

**CODE**:
```text
Developer checklist:
- Confirm dataPoint/ImprovementDirection is set for the measure.
- Confirm ThresholdValues (ToleranceRangeLow/High, DeviationRangeLow/High) exist.
- Test chart rendering with single measure first to verify legend shows threshold values.
- When multiple measures are present, validate expected coloring and legend behavior.
```
--------------------------------

**TITLE**: Column Chart Card (OVP / Fiori Elements)

**INTRODUCTION**: Use a Column Chart Card to display categorical data as vertical bars (columns), e.g., total product sales per year. This doc gives the implementation checklist and concrete annotation + manifest examples required to render a Column Chart Card in an OVP/Fiori Elements app.

**TAGS**: fiori-elements-framework, OVP, column-chart, annotations, manifest, measures, dimensions

STEP: 1 - Requirements and behavior
DESCRIPTION: Ensure your entity/annotation contains at least one measure and one dimension. Implementation rules (enforced at runtime):
- The chart must have >= 1 measure and >= 1 dimension.
- The number of columns equals the number of measures defined in the chart annotation.
- Every measure is rendered as a separate column regardless of its annotation role.
- Every dimension is placed on the x-axis (axis category) regardless of its annotation role.
LANGUAGE: Plain text
CODE:
```text
Requirements:
- >= 1 measure (each measure => one column)
- >= 1 dimension (used for x-axis)
- Measures and dimensions are taken from the chart annotation
```

STEP: 2 - Example Chart Annotation (XML)
DESCRIPTION: Create a Chart annotation on the target entity type. Set ChartType="Column" and list your measures and dimensions. Adjust property names, annotation target, and qualifier to match your service model.
LANGUAGE: XML
CODE:
```xml
<!-- Example annotation: adjust Target and property names to your model -->
<Annotations Target="YourService.YourEntityType">
  <Annotation Term="UI.Chart" Qualifier="ColumnChart">
    <Record Type="UI.Chart">
      <PropertyValue Property="ChartType" String="Column" />
      <PropertyValue Property="Measures">
        <Collection>
          <PropertyPath>SalesAmount</PropertyPath>
          <PropertyPath>Profit</PropertyPath>
        </Collection>
      </PropertyValue>
      <PropertyValue Property="Dimensions">
        <Collection>
          <PropertyPath>Year</PropertyPath>
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

STEP: 3 - OVP Card Configuration in manifest.json
DESCRIPTION: Configure the OVP card to use the charts template and point to the Chart annotation via annotationPath. Replace entitySet and annotationPath values for your application.
LANGUAGE: JSON
CODE:
```json
"cards": {
  "salesColumnChart": {
    "template": "sap.ovp.cards.charts",
    "settings": {
      "title": "Product Sales by Year",
      "entitySet": "SalesSet",
      "annotationPath": "com.sap.vocabularies.UI.v1.Chart#ColumnChart"
    }
  }
}
```

STEP: 4 - Troubleshooting and validation
DESCRIPTION: Validate these points when the column chart does not render:
- Confirm the Chart annotation qualifier in the annotationPath matches the qualifier in the annotation (case-sensitive).
- Verify the entitySet has the properties referenced in Measures and Dimensions.
- Ensure at least one measure and one dimension are present.
LANGUAGE: Plain text
CODE:
```text
Troubleshooting checklist:
- annotationPath qualifier matches annotation qualifier
- properties exist on the entity type
- chart has >=1 measure and >=1 dimension
```

STEP: 5 - Example image reference
DESCRIPTION: Reference example image for UI expectation (relative image path kept from original docs).
LANGUAGE: Markdown
CODE:
```markdown
![](../01_Whats-New/images/WhatsNew_138_OVP_ColumnChart_d3b0ca9.png "Example of a Column Chart Card")
```
--------------------------------

**TITLE**: Column Micro Chart — UI.Chart and UI.DataPoint Annotations

**INTRODUCTION**: Provide the annotations required to render a Column Micro Chart in Fiori Elements. Includes XML, ABAP CDS, and CAP CDS examples for UI.Chart (chart definition) and UI.DataPoint (value and criticality). Use these directly when generating code or annotation files. Note: chart dimensions and measures must come from a 1:n navigation entity (cannot be from the same entity).

**TAGS**: fiori-elements-framework, column-chart, microchart, annotations, UI.Chart, UI.DataPoint, ABAP, CAP, XML, CDS

**STEP**: 1 — Overview and mapping

**DESCRIPTION**: Key annotation mapping and chart semantics you must implement:
- UI.Chart Title → Title property (chart title).
- UI.Chart Description → Description property (subtitle).
- ChartType must be Column for a column micro chart.
- Measures and Dimensions must be specified (dimensions/measures from a 1:n navigation entity).
- Each measured series must reference a DataPoint via MeasureAttributes → DataPoint.
- UI.DataPoint must provide Value (path) and optional Criticality or CriticalityCalculation.
- If both Criticality and CriticalityCalculation exist, Criticality overrides CriticalityCalculation.
- For CriticalityCalculation, also include ImprovementDirection.

**LANGUAGE**: Text

**CODE**:
```text
Mapping summary:
- UI.Chart Title -> Title
- UI.Chart Description -> Description
- UI.Chart ChartType = Column
- UI.Chart Measures -> list of measure property paths
- UI.Chart Dimensions -> list of dimension property paths
- UI.Chart MeasureAttributes -> each must include Measure, Role, DataPoint (annotation path)
- UI.DataPoint -> must include Value (path); may include Criticality or CriticalityCalculation
- Criticality overrides CriticalityCalculation; if using CriticalityCalculation include ImprovementDirection
Requirement: Measures and Dimensions cannot be from the same entity; use a 1:n navigation entity.
```

**STEP**: 2 — UI.Chart XML Annotation (Column chart)

**DESCRIPTION**: Copy this XML annotation to define a Column micro chart. Set ChartType to Column, define Measures and Dimensions, and include MeasureAttributes with DataPoint annotation path.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.Chart" Qualifier="SpecificationWidthColumnChart">
    <Record Type="UI.ChartDefinitionType">
        <PropertyValue Property="Title" String="Product Width Specification Column Chart"/>
        <PropertyValue Property="Description" String="Describe Column Chart"/>
        <PropertyValue Property="ChartType" EnumMember="UI.ChartType/Column"/>
        <PropertyValue Property="Measures">
            <Collection>
                <PropertyPath>Width</PropertyPath>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="Dimensions">
            <Collection>
                <PropertyPath>Day</PropertyPath>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="MeasureAttributes">
            <Collection>
                <Record Type="UI.ChartMeasureAttributeType">
                    <PropertyValue Property="Measure" PropertyPath="Width"/>
                    <PropertyValue Property="Role" EnumMember="UI.ChartMeasureRoleType/Axis1"/>
                    <PropertyValue Property="DataPoint" AnnotationPath="@UI.DataPoint#Width"/>
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

**STEP**: 3 — UI.Chart ABAP CDS Annotation (Column chart)

**DESCRIPTION**: Use this ABAP CDS fragment inside an annotation file or view annotation section. It defines the same Column chart — measures, dimensions, measureAttributes with qualifier.

**LANGUAGE**: ABAP CDS

**CODE**:
```
@UI.Chart: [
  {
    title: 'Product Width Specification Column Chart',
    description: 'Describe Column Chart',
    chartType: #COLUMN,
    measures: [
      'WIDTH'
    ],
    dimensions: [
      'DAY'
    ],
    measureAttributes: [
      {
        measure: 'Width',
        role: #AXIS_1,
        asDataPoint: true
      }
    ],
    qualifier: 'SpecificationWidthColumnChart'
  }
]
annotate view STTA_C_MP_PRODUCT with {

}
```

**STEP**: 4 — UI.Chart CAP CDS Annotation (Column chart)

**DESCRIPTION**: CAP CDS syntax equivalent for the UI.Chart definition. Include qualifier and DataPoint reference in MeasureAttributes.

**LANGUAGE**: CAP CDS

**CODE**:
```
UI.Chart #SpecificationWidthColumnChart : {
    $Type : 'UI.ChartDefinitionType',
    Title : 'Product Width Specification Column Chart',
    Description : 'Describe Column Chart',
    ChartType : #Column,
    Measures : [
        Width
    ],
    Dimensions : [
        Day
    ],
    MeasureAttributes : [
        {
            $Type : 'UI.ChartMeasureAttributeType',
            Measure : Width,
            Role : #Axis1,
            DataPoint : '@UI.DataPoint#Width',
        }
    ]
}
```

**STEP**: 5 — UI.DataPoint XML Annotation (Value + Criticality)

**DESCRIPTION**: Use this XML DataPoint annotation to bind the measure value and criticality for semantic coloring. Attach this DataPoint via MeasureAttributes → DataPoint.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.DataPoint" Qualifier="Width">
    <Record>
        <PropertyValue Property="Value" Path="Width"/>
        <PropertyValue Property="Criticality" Path="criticalityValue"/>
    </Record>
</Annotation>
```

**STEP**: 6 — UI.DataPoint ABAP CDS Annotation (Value + Criticality)

**DESCRIPTION**: ABAP CDS fragment showing DataPoint annotation with target value and criticality path. Use in CDS field definition or annotations block.

**LANGUAGE**: ABAP CDS

**CODE**:
```
@UI.dataPoint: {
  targetValueElement: 'Weight',
  criticality: 'criticalityValue'
}
Width;
```

**STEP**: 7 — UI.DataPoint CAP CDS Annotation (Value + Criticality)

**DESCRIPTION**: CAP CDS syntax for DataPoint annotation. Use qualifier to reference from MeasureAttributes.

**LANGUAGE**: CAP CDS

**CODE**:
```
UI.DataPoint #Width : {
    Value : Width,    Criticality : criticalityValue
}
```

**STEP**: 8 — Mandatory annotations and criticality rules (Checklist)

**DESCRIPTION**: Checklist to validate before code generation or deployment. Ensure each mandatory annotation exists and criticality rules are implemented properly.

**LANGUAGE**: Text

**CODE**:
```text
Mandatory annotations checklist:
- UI.Chart -> ChartType = "Column" (required)
- UI.Chart -> Measures (required)
- UI.Chart -> MeasureAttributes -> DataPoint (must reference a UI.DataPoint qualifier)
- UI.DataPoint -> Value (required)
- If using CriticalityCalculation for semantic coloring:
  - UI.DataPoint -> CriticalityCalculation (required)
  - UI.DataPoint -> CriticalityCalculation/ImprovementDirection (required)
Notes:
- Both Criticality and CriticalityCalculation are supported; Criticality overrides CriticalityCalculation.
- Measures and Dimensions must come from a 1:n navigation entity (cannot be from the same entity).
```
--------------------------------

**TITLE**: Combination Chart Card - Annotation Examples and Implementation Rules

**INTRODUCTION**: This document explains how to define a Combination Chart Card (column + line) using UI.Chart annotations. It lists actionable rules and provides XML, ABAP CDS, and CAP CDS code examples that can be copied into Fiori Elements/OData service annotations to render combination charts. Use these examples to implement charts that combine multiple measure types (columns and lines) and map dimensions to category/series roles.

**TAGS**: fiori-elements-framework, UI.Chart, combination-chart, annotations, CDS, ABAP, CAP, XML, chart

**STEP**: 1 - Rules and Implementation Guidelines

**DESCRIPTION**: Follow these actionable rules when creating a combination chart card:
- The chart type must be set to Combination (UI.ChartType/Combination or #COMBINATION / #Combination depending on annotation syntax).
- You must have at least two measures. The first measure is rendered as columns; subsequent measures are rendered as lines.
- Use one time-based dimension for the category axis where applicable (recommended).
- All measures are assigned to the feed's UID value axis; ensure measures are declared in MeasureAttributes.
- At least one category role must be defined in DimensionAttributes to map a dimension to the category axis.
- Use Series role to enable color-coded grouping (each series member is displayed with its own color combination).
- Qualifier is optional but useful for multiple charts on the same entity/view; keep the qualifier consistent between annotation definition and usage.

**LANGUAGE**: Text

**CODE**:
```text
- First measure: column format
- Subsequent measures: line format
- At least two measures required
- At least one category dimension required
- Use qualifier to distinguish multiple chart annotations
```

**STEP**: 2 - XML Annotation Example

**DESCRIPTION**: Copy this XML UI.Chart annotation into your annotation file (e.g., annotations.xml). It defines a combination chart titled "Sales and Total Sales", using 'sales' and 'totalsales' measures on Axis1 and 'quarter_1' as the category dimension. Keep the Qualifier to reference this chart where needed.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.Chart" Qualifier="Eval_by_Currency_Combination">
    <Record Type="UI.ChartDefinitionType">
        <PropertyValue Property="Title" String="Sales and Total Sales" />
        <PropertyValue Property="ChartType" EnumMember="UI.ChartType/Combination"/>
        <PropertyValue Property="MeasureAttributes">
            <Collection>
                <Record Type="UI.ChartMeasureAttributeType">
                        <PropertyValue Property="Measure" PropertyPath="sales" />
                        <PropertyValue Property="Role" EnumMember="UI.ChartMeasureRoleType/Axis1" />
                </Record>
                <Record Type="UI.ChartMeasureAttributeType">
                    <PropertyValue Property="Measure" PropertyPath="totalsales" />
                    <PropertyValue Property="Role" EnumMember="UI.ChartMeasureRoleType/Axis1" />
                </Record>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="DimensionAttributes">
            <Collection>
                <Record Type="UI.ChartDimensionAttributeType">
                    <PropertyValue Property="Dimension" PropertyPath="quarter_1" />
                    <PropertyValue Property="Role" EnumMember="UI.ChartDimensionRoleType/Category" />
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

**STEP**: 3 - ABAP CDS Annotation Example

**DESCRIPTION**: Use this ABAP CDS annotation snippet inside your CDS view annotations section. It produces the same chart definition (qualifier: Eval_by_Currency_Combination). Insert the annotation above the view or in a dedicated annotation include file and reference it from the Fiori Elements app manifest or OData metadata.

**LANGUAGE**: ABAP

**CODE**:
```
@UI.Chart: [
  {
    title: 'Sales and Total Sales',
    chartType: #COMBINATION,
    measureAttributes: [
      {
        measure: 'sales',
        role: #AXIS_1
      },
      {
        measure: 'totalsales',
        role: #AXIS_1
      }
    ],
    dimensionAttributes: [
      {
        dimension: 'quarter_1',
        role: #CATEGORY
      }
    ],
    qualifier: 'Eval_by_Currency_Combination'
  }
]
annotate view VIEWNAME with { }
```

**STEP**: 4 - CAP CDS Annotation Example

**DESCRIPTION**: For CAP-based services, add this UI.Chart annotation to your CDS service definitions (e.g., in srv/ or annotations.cds). It defines the same combination chart and qualifier. Ensure measure and dimension names match your entity model.

**LANGUAGE**: CDS

**CODE**:
```
UI.Chart #Eval_by_Currency_Combination : {
    $Type : 'UI.ChartDefinitionType',
    Title : 'Sales and Total Sales',
    ChartType : #Combination,
    MeasureAttributes : [
        {
            $Type : 'UI.ChartMeasureAttributeType',
            Measure : sales,
            Role : #Axis1
        },
        {
            $Type : 'UI.ChartMeasureAttributeType',
            Measure : totalsales,
            Role : #Axis1
        }
    ],
    DimensionAttributes : [
        {
            $Type : 'UI.ChartDimensionAttributeType',
            Dimension : quarter_1,
            Role : #Category
        }
    ]
}
```
--------------------------------

**TITLE**: Comparison Micro Chart Annotations for SAP Fiori elements (OData V4)

**INTRODUCTION**: This document shows the exact annotations required to implement a Comparison Micro Chart in SAP Fiori elements for OData V4. It includes required constraints, behavior rules, and full example annotations in XML, ABAP CDS, and CAP CDS for UI.Chart and UI.DataPoint.

**TAGS**: fiori-elements-framework, OData V4, UI.Chart, UI.DataPoint, ComparisonMicroChart, CDS, XML, ABAP, CAP, microchart

**STEP**: 1 — Requirements and constraints

**DESCRIPTION**: Mandatory annotations, chart constraints, display behavior, and semantic coloring rules you must follow when implementing the Comparison Micro Chart.

- Applicable only for SAP Fiori elements for OData V4.
- Chart shows a single measure value against a maximum value. Only the first three backend values are shown.
- Dimensions on the chart must be from a 1:n navigation entity; dimensions and measures cannot be from the same entity.
- Unit of measure must be consistent across all data points.
- Display value rules:
  - If UI.DataPoint Value has no @Common.Text annotation, the numeric Value is displayed.
  - If the DataPoint has an associated text via @com.sap.vocabularies.Common.v1.Text, the TextValue is displayed instead.
- Semantic coloring: only the Criticality annotation is supported.
- Mandatory annotations to include:
  - UI.Chart → ChartType: "Bar"
  - UI.Chart → Dimensions
  - UI.Chart → Measures
  - UI.Chart → MeasureAttributes → DataPoint
  - UI.DataPoint → Value

**LANGUAGE**: TEXT

**CODE**:
```text
Applicable: SAP Fiori elements for OData V4
Mandatory: UI.Chart ChartType=Bar, Dimensions, Measures, MeasureAttributes->DataPoint, UI.DataPoint->Value
Constraints: Dimensions and Measures must not be from the same entity (use 1:n navigation entity)
Unit consistency required across data points
Semantic coloring: only Criticality supported
Display rule: If DataPoint has Text via @com.sap.vocabularies.Common.v1.Text, show TextValue; otherwise show Value
```

**STEP**: 2 — UI.Chart Annotation (XML example)

**DESCRIPTION**: Chart definition using XML annotations. Sets ChartType to Bar, defines dimension SalesOrderItem, assigns NetAmount as Measure and attaches a DataPoint via AnnotationPath. Title and Description are demonstrated.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.Chart" Qualifier="ComparisonPath">
    <Record Type="UI.ChartDefinitionType">
        <PropertyValue Property="ChartType" EnumMember="UI.ChartType/Bar"/>
        <PropertyValue Property="Description" String="Testing Comparison Chart"/>
        <PropertyValue Property="Dimensions">
            <Collection>
                <PropertyPath>SalesOrderItem</PropertyPath>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="MeasureAttributes">
            <Collection>
                <Record Type="UI.ChartMeasureAttributeType">
                    <PropertyValue Property="Measure" PropertyPath="NetAmount"/>
                    <PropertyValue Property="Role" EnumMember="UI.ChartMeasureRoleType/Axis1"/>
                    <PropertyValue Property="DataPoint" AnnotationPath="@UI.DataPoint#ComparisonPath"/>
                </Record>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="Measures">
            <Collection>
                <PropertyPath>NetAmount</PropertyPath>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="Title" String="Items Comparison Chart"/>
    </Record>
</Annotation>
```

**STEP**: 3 — UI.Chart Annotation (ABAP CDS example)

**DESCRIPTION**: Equivalent chart definition for ABAP CDS. Declares chartType BAR, dimensions, measureAttributes with asDataPoint true and qualifier ComparisonPath.

**LANGUAGE**: ABAP CDS

**CODE**:
```
@UI.Chart: [
  {
    chartType: #BAR,
    description: 'Testing Comparison Chart',
    dimensions: [
      'SALESORDERITEM'
    ],
    measureAttributes: [
      {
        measure: 'NetAmount',
        role: #AXIS_1,
        asDataPoint: true
      }
    ],
    measures: [
      'NETAMOUNT'
    ],
    title: 'Items Comparison Chart',
    qualifier: 'ComparisonPath'
  }
]
annotate view STTA_C_MP_PRODUCT with {

}
```

**STEP**: 4 — UI.Chart Annotation (CAP CDS example)

**DESCRIPTION**: CAP CDS variant of the UI.Chart annotation. Uses qualifier ComparisonPath and references DataPoint via '@UI.DataPoint#ComparisonPath'.

**LANGUAGE**: CAP CDS

**CODE**:
```
UI.Chart #ComparisonPath : {
    $Type : 'UI.ChartDefinitionType',
    ChartType : #Bar,
    Description : 'Testing Comparison Chart',
    Dimensions : [
        SalesOrderItem
    ],
    MeasureAttributes : [
        {
            $Type : 'UI.ChartMeasureAttributeType',
            Measure : NetAmount,
            Role : #Axis1,
            DataPoint : '@UI.DataPoint#ComparisonPath'
        },
    ],
    Measures : [
        NetAmount
    ],
    Title : 'Items Comparison Chart'
}
```

**STEP**: 5 — UI.DataPoint Annotation (XML example)

**DESCRIPTION**: Defines DataPoint for the measure including Value path, Criticality, MaximumValue, and MinimumValue. This configures criticality-based coloring and scale.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.DataPoint" Qualifier="NetAmount">
      <Record Type="UI.DataPointType">
            <PropertyValue Property="Value" Path="NetAmount"/>
            <PropertyValue Property="Criticality" Path="Criticality"/>
            <PropertyValue Property="MaximumValue" Decimal="100"/>
            <PropertyValue Property="MinimumValue" Decimal="0"/>
      </Record>
</Annotation>
```

**STEP**: 6 — UI.DataPoint Annotation (ABAP CDS example)

**DESCRIPTION**: ABAP CDS example for attaching criticality and min/max values to the measure NetAmount.

**LANGUAGE**: ABAP CDS

**CODE**:
```
@UI.dataPoint: {
  criticality: 'Criticality'
  maximumValue: 100,
  minimumValue: 0
}
NetAmount;
```

**STEP**: 7 — UI.DataPoint Annotation (CAP CDS example)

**DESCRIPTION**: CAP CDS example defining a DataPoint with Value, Criticality, MaximumValue, and MinimumValue. Use qualifier name as required in your Chart MeasureAttributes.

**LANGUAGE**: CAP CDS

**CODE**:
```
UI.DataPoint #NetAmount              : {
            Value       : NetAmount,
            Criticality : Criticality,
            MaximumValue : 100,
            MinimumValue : 0,
        }
```
--------------------------------

**TITLE**: Configure EntitySet Input Parameters using com.sap.vocabularies.UI.v1.SelectionVariant

**INTRODUCTION**: Demonstrates how to configure input parameters for an EntitySet using the SelectionVariant annotation (com.sap.vocabularies.UI.v1.SelectionVariant) for SAP Fiori elements (OData V2). Use this to provide parameters for parameter entity sets (sap:semantics="parameters"), associate them with result entity sets, and wire the selection variant into OVP cards via manifest settings.

**TAGS**: fiori-elements-framework, OData V2, SelectionVariant, annotations, com.sap.vocabularies.UI.v1.SelectionVariant, CDS, manifest, sap.ovp, parameters, entityset

**STEP**: 1 — Applicability and overview
**DESCRIPTION**: This approach applies only to SAP Fiori elements for OData V2. Use SelectionVariant annotations to declare Parameters that will be applied at runtime to query an EntitySet that exposes a parameter-typed navigation association. Typical pattern: a parameter entity (sap:semantics="parameters") defines parameters and a navigation property "Results" points to the result EntityType (e.g., SalesShare). The SelectionVariant record (annotated on the result EntityType) supplies concrete parameter values.
**LANGUAGE**: text
**CODE**:
```text
Applicability: SAP Fiori elements for OData V2 only.
Pattern: Parameter EntityType (sap:semantics="parameters") -> NavigationProperty Results -> Result EntityType.
SelectionVariant with Parameters: Annotate the Result EntityType with com.sap.vocabularies.UI.v1.SelectionVariant and include the Parameters collection.
```

**STEP**: 2 — OData metadata: EntityTypes, parameters type, association and EntityContainer
**DESCRIPTION**: Add two EntityTypes: SalesShareType (result, sap:semantics="aggregate") and SalesShareParametersType (parameters, sap:semantics="parameters"). Define the NavigationProperty Results on the parameters type with an Association to the result type. Expose both EntitySets in the EntityContainer, mark parameters entitySet as non-addressable if appropriate (sap:addressable="false").
**LANGUAGE**: XML
**CODE**:
```xml
<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<edmx:Edmx Version="1.0" xmlns:edmx="http://schemas.microsoft.com/ado/2007/06/edmx" xmlns:sap="http://www.sap.com/Protocols/SAPData">
    <edmx:DataServices xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata" m:DataServiceVersion="2.0">
        <Schema Namespace="sap.smartbusinessdemo.services" xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices" xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata" xmlns="http://schemas.microsoft.com/ado/2008/09/edm">
            <EntityType Name="SalesShareType" sap:semantics="aggregate">
                <Key>
                    <PropertyRef Name="ID" />
                </Key>
                <Property Name="ID" Type="Edm.String" Nullable="false" MaxLength="2147483647" sap:filterable="false" />
                <Property Name="Country" Type="Edm.String" MaxLength="3" sap:label="Country" sap:aggregation-role="dimension" />
                <Property Name="Region" Type="Edm.String" MaxLength="4" sap:label="Region" sap:aggregation-role="dimension" />
                <Property Name="ProductID" Type="Edm.String" MaxLength="10" sap:label="Product ID" sap:aggregation-role="dimension" />
                <Property Name="Currency" Type="Edm.String" MaxLength="5" sap:label="Currency" sap:aggregation-role="dimension" />
                <Property Name="Product" Type="Edm.String" MaxLength="1024" sap:label="Product" sap:aggregation-role="dimension" />
                <Property Name="SupplierCompany" Type="Edm.String" MaxLength="80" sap:label="Supplier Company" sap:aggregation-role="dimension" />
                <Property Name="BuyerCompany" Type="Edm.String" MaxLength="80" sap:label="Buyer Company" sap:aggregation-role="dimension" />
                <Property Name="Year" Type="Edm.String" MaxLength="4" sap:label="Year" sap:aggregation-role="dimension" />
                <Property Name="Quarter" Type="Edm.String" MaxLength="2" sap:label="Quarter" sap:aggregation-role="dimension" />
                <Property Name="Month" Type="Edm.String" MaxLength="2" sap:label="Month" sap:aggregation-role="dimension" />
                <Property Name="TotalSales_CURRENCY" Type="Edm.String" MaxLength="5" sap:semantics="currency-code" />
                <Property Name="Sales_CURRENCY" Type="Edm.String" MaxLength="5" sap:semantics="currency-code" />
                <Property Name="TotalSales" Type="Edm.Decimal" Precision="15" Scale="2" sap:filterable="false" sap:label="Total Sales" sap:aggregation-role="measure" sap:unit="TotalSales_CURRENCY" />
                <Property Name="Sales" Type="Edm.Decimal" Precision="15" Scale="2" sap:filterable="false" sap:label="Sales" sap:aggregation-role="measure" sap:unit="Sales_CURRENCY" />
                <Property Name="SalesShare" Type="Edm.Decimal" Precision="12" Scale="5" sap:filterable="false" sap:label="Sales Share" sap:aggregation-role="measure" />
            </EntityType>
            <EntityType Name="SalesShareParametersType" sap:semantics="parameters">
                <Key>
                    <PropertyRef Name="P_Currency"/>
                    <PropertyRef Name="P_Country"/>
                </Key>
                <Property Name="P_Currency" Type="Edm.String" Nullable="false" MaxLength="5" sap:label="Currency" sap:parameter="mandatory"/>
                <Property Name="P_Country" Type="Edm.String" Nullable="false" DefaultValue="3" MaxLength="20" sap:label="CountryCode" sap:parameter="mandatory"/>
                <NavigationProperty Name="Results" Relationship="sap.smartbusinessdemo.services.SalesShareParameters_SalesShareType" FromRole="SalesShareParametersPrincipal" ToRole="SalesShareDependent"/>
            </EntityType>
 
            <Association Name="SalesShareParameters_SalesShareType">
                <End Type="sap.smartbusinessdemo.services.SalesShareParametersType" Role="SalesShareParametersPrincipal" Multiplicity="*"/>
                <End Type="sap.smartbusinessdemo.services.SalesShareType" Role="SalesShareDependent" Multiplicity="*"/>
            </Association>
 
            <EntityContainer Name="SalesShare" m:IsDefaultEntityContainer="true">
                <EntitySet Name="SalesShare" EntityType="sap.smartbusinessdemo.services.SalesShareType"/>
                <EntitySet Name="SalesShareParameters" EntityType="sap.smartbusinessdemo.services.SalesShareParametersType" sap:addressable="false"/>
                <AssociationSet Name="SalesShareParameters_SalesShare" Association="sap.smartbusinessdemo.services.SalesShareParameters_SalesShareType">
                    <End Role="SalesShareParametersPrincipal" EntitySet="SalesShareParameters"/>
                    <End Role="SalesShareDependent" EntitySet="SalesShare"/>
                </AssociationSet>
            </EntityContainer>
        </Schema>
    </edmx:DataServices>
</edmx:Edmx>
```

**STEP**: 3 — Annotation: SelectionVariant with Parameters (XML)
**DESCRIPTION**: Annotate the result EntityType (SalesShareType) with com.sap.vocabularies.UI.v1.SelectionVariant. Provide the Parameters collection containing UI.Parameter records. Use a Qualifier (e.g., #params) and reference this qualifier from the card manifest (selectionAnnotationPath).
**LANGUAGE**: XML
**CODE**:
```xml
<Annotations Target="sap.smartbusinessdemo.services.SalesShareType">
    <Annotation Term="com.sap.vocabularies.UI.v1.SelectionVariant" Qualifier="params">
        <Record>
            <PropertyValue Property="SelectOptions">
                <Collection>
                </Collection>
            </PropertyValue>
            <PropertyValue Property="Parameters">
                <Collection>
                    <Record Type="com.sap.vocabularies.UI.v1.Parameter">
                        <PropertyValue Property="PropertyName" PropertyPath="P_Currency" />
                        <PropertyValue Property="PropertyValue" String="EUR" />
                    </Record>
                    <Record Type="com.sap.vocabularies.UI.v1.Parameter">
                        <PropertyValue Property="PropertyName" PropertyPath="P_Country" />
                        <PropertyValue Property="PropertyValue" String="IN" />
                    </Record>
                </Collection>
            </PropertyValue>
        </Record>
    </Annotation>
    ...
</Annotations>
```

**STEP**: 4 — Annotation: SelectionVariant with Parameters (CAP CDS)
**DESCRIPTION**: Equivalent SelectionVariant declaration in CAP CDS syntax. Annotate the result entity type with UI.SelectionVariant and list UI.Parameter objects. Use the same qualifier name and property names.
**LANGUAGE**: CDS
**CODE**:
```cds
annotate sap.smartbusinessdemo.services.SalesShareType @(
  UI.SelectionVariant #params : {
    SelectOptions : [
    ],
    Parameters : [
        {
            $Type : 'UI.Parameter',
            PropertyName : P_Currency,
            PropertyValue : 'EUR'
        },
        {
            $Type : 'UI.Parameter',
            PropertyName : P_Country,
            PropertyValue : 'IN'
        }
    ]
  }
);
```

**STEP**: 5 — Card configuration in manifest.json (sap.ovp)
**DESCRIPTION**: Configure the OVP card to use the SelectionVariant qualifier via selectionAnnotationPath and point to the result entitySet. The selectionAnnotationPath value must match the Annotation Qualifier defined earlier (com.sap.vocabularies.UI.v1.SelectionVariant#params).
**LANGUAGE**: JSON
**CODE**:
```json
{
  "sap.ovp": {
    "cards": {
      "card04": {
        "model": "salesShare",
        "template": "sap.ovp.cards.list",
        "settings": {
          "selectionAnnotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant#params",
          "entitySet": "SalesShare"
        }
      }
    }
  }
}
```

**STEP**: 6 — EntityType with Optional Input Parameter (XML)
**DESCRIPTION**: If an EntitySet contains optional parameters, the SelectionVariant does not need to define that optional parameter. When an optional parameter is not supplied in the SelectionVariant, an empty string is used by default. Current support for optional parameters is only for Edm.String.
**LANGUAGE**: XML
**CODE**:
```xml
<EntityType Name="SalesShareParametersType" sap:semantics="parameters">
    <Key>          
        <PropertyRef Name="P_Currency"/>
        <PropertyRef Name="P_Country"/>
        <PropertyRef Name="P_Optional"/>
    </Key>
    <Property Name="P_Currency" Type="Edm.String" Nullable="false" MaxLength="5" sap:label="Currency" sap:parameter="mandatory"/>
    <Property Name="P_Country" Type="Edm.String" Nullable="false" DefaultValue="3" MaxLength="20" sap:label="CountryCode" sap:parameter="mandatory"/>
    <Property Name="P_Optional" Type="Edm.String" Nullable="false" MaxLength="5" sap:label="Optional" sap:parameter="optional"/>
    <NavigationProperty Name="Results" Relationship="sap.smartbusinessdemo.services.SalesShareParameters_SalesShareType" FromRole="SalesShareParametersPrincipal" ToRole="SalesShareDependent"/>
</EntityType>
```

**STEP**: 7 — Multiple cards with analytical parameters
**DESCRIPTION**: For multiple cards to respond to analytical/filter bar parameters, define a SelectionVariant annotation per card (distinguishable by Qualifier). When a user applies parameters in the filter bar, cards whose SelectionVariant Parameters include matching parameter names receive the applied values. Ensure each card's selectionAnnotationPath references the correct qualifier.
**LANGUAGE**: JSON
**CODE**:
```json
{
  "sap.ovp": {
    "cards": {
      "cardA": {
        "settings": {
          "selectionAnnotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant#paramsA",
          "entitySet": "SalesShare"
        }
      },
      "cardB": {
        "settings": {
          "selectionAnnotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant#paramsB",
          "entitySet": "SalesShare"
        }
      }
    }
  }
}
```
--------------------------------

**TITLE**: Configuring Analytical List Page (ALP) App Extensions for SAP Fiori elements (OData V2)

**INTRODUCTION**: This document provides concise, code-focused steps to extend and configure Analytical List Page (ALP) apps built with SAP Fiori elements (OData V2). It summarizes where to place extension configuration (manifest.json), how to register controller extensions, where to implement Component-level refresh logic, and which extension types to implement (charts, tables, custom filters, custom actions, message strip). Use the provided skeletons to implement extension points and wiring in your project.

**TAGS**: fiori-elements-framework, ALP, analytical-list-page, OData V2, manifest.json, Component.js, controllerExtensions, smart-table, chart, custom-filters, custom-actions, message-strip

STEP: 1 — Applicability and prerequisites

DESCRIPTION: Confirm applicability and prerequisites before implementing ALP extensions. This entire extension workflow applies only to SAP Fiori elements for OData V2. Ensure your project uses the ALP floorplan and has standard files: webapp/manifest.json and webapp/Component.js (or equivalent component bootstrap).

LANGUAGE: Text

CODE:
```text
Applicability: SAP Fiori elements — Analytical List Page (ALP) for OData V2 only.
Required files: webapp/manifest.json, webapp/Component.js, webapp/controller/, webapp/ext/ (optional)
Related docs to consult while implementing:
- Analytical List Page
- Refresh API (Component.js)
- Smart Table Extensions
- Chart Extensions
- Creating Custom Filters
- Defining Custom Actions
- Adding a Custom Message Strip
```

STEP: 2 — Register a controller extension in manifest.json

DESCRIPTION: Register your custom controller to extend the ALP controller using sap.ui.controllerExtensions in manifest.json. This tells the framework to load your controller that can implement hooks for charts, tables, toolbar, and custom actions. Keep the key exactly matching the ALP controller: "sap.suite.ui.generic.template.AnalyticalListPage.view.AnalyticalListPage".

LANGUAGE: JSON

CODE:
```json
{
  "sap.ui5": {
    "extends": {
      "extensions": {
        "sap.ui.controllerExtensions": {
          "sap.suite.ui.generic.template.AnalyticalListPage.view.AnalyticalListPage": {
            "controllerName": "my.namespace.ext.AnalyticalListPageController"
          }
        }
      }
    }
  }
}
```

STEP: 3 — Create the controller extension skeleton

DESCRIPTION: Implement the controller file referenced by manifest.json. Use the controller to attach handlers for chart events, table custom actions, and view extension points. Keep methods small and focused. Example skeleton shows standard onInit override and placeholders for handler functions.

LANGUAGE: JavaScript

CODE:
```javascript
// File: webapp/ext/AnalyticalListPageController.js
sap.ui.define([
  "sap/ui/core/mvc/Controller"
], function(Controller) {
  "use strict";

  return Controller.extend("my.namespace.ext.AnalyticalListPageController", {
    onInit: function() {
      // Initialization logic, e.g., attach to view models or register event handlers
    },

    // Example handler invoked by custom action configured in annotations/manifest
    onCustomAction: function(oEvent) {
      // read selected contexts, perform action, refresh bindings if needed
    },

    // Example chart select handler
    onChartSelect: function(oEvent) {
      // implement drilldown or navigation logic
    }
  });
});
```

STEP: 4 — Implement Component-level refresh behavior (refresh API)

DESCRIPTION: Use the Component-level refresh mechanism to refresh header, filter, and content area elements. If you need to programmatically refresh the ALP binding sets (for example after a backend action), implement a helper on the Component to call the model refresh API or framework-provided refresh method. The example shows a safe, generic approach using the ODataModel refresh; adapt to your template/framework API if a framework-specific refreshBinding function exists.

LANGUAGE: JavaScript

CODE:
```javascript
// File: webapp/Component.js
sap.ui.define([
  "sap/ui/core/UIComponent"
], function(UIComponent) {
  "use strict";

  return UIComponent.extend("my.namespace.Component", {
    metadata: {
      manifest: "json"
    },

    // Generic refresh helper (adapt to template-specific API if available)
    refreshAllBindings: function() {
      // For ODataModel
      var oModel = this.getModel();
      if (oModel && typeof oModel.refresh === "function") {
        // true -> reload from server; set bIncludePendingChanges as appropriate
        oModel.refresh(true);
      }

      // If using framework-provided refreshBinding API, call it here instead.
      // Example placeholder: this._oTemplateContract.refreshBinding();
    }
  });
});
```

STEP: 5 — Add custom actions (chart / table / global) via annotations + manifest wiring

DESCRIPTION: Define custom actions in annotations (or metadata) and ensure the UI wiring points to your controller handlers. Custom actions can be scoped to chart, table, or global toolbar. Implement the logic in the controller extension created earlier and refresh bindings via Component helper as needed. Keep action definitions in annotation files and manifest wiring consistent.

LANGUAGE: Text

CODE:
```text
Action implementation checklist:
1. Add custom action annotation(s) to your OData V2 annotations file (XML) or CDS annotations.
2. Ensure action uses correct 'appliesTo' target (Chart/Table/Global).
3. Implement a controller handler (e.g., onCustomAction) referenced by the action (manifest/controllerExtension).
4. From handler, call this.getOwnerComponent().refreshAllBindings() or appropriate framework refresh.
References:
- Use "Defining Custom Actions" doc for annotation structure and manifest wiring.
```

STEP: 6 — Extend Smart Table behavior

DESCRIPTION: To add custom table actions or modify table behavior, use Smart Table extension points and annotations. Configure table-level custom actions using annotation-driven approaches and add controller handlers for action logic and UI modifications.

LANGUAGE: Text

CODE:
```text
Smart Table extension checklist:
1. Define custom actions in annotation (Action or UI.LineItem related annotations).
2. Use manifest/controllerExtensions to point to your extension controller.
3. In controller, capture table events (e.g., selectionChange, actions) and implement logic.
4. Refresh table binding if action changes backend state: this.getOwnerComponent().refreshAllBindings().
Reference: Smart Table Extensions documentation.
```

STEP: 7 — Extend Chart behavior

DESCRIPTION: Define chart actions and drilldown behavior via annotations and implement handlers in the controller extension. Charts can host custom actions that must be wired to controller methods.

LANGUAGE: Text

CODE:
```text
Chart extension checklist:
1. Use chart-specific annotations for toolbar actions and drilldown configuration.
2. Wire actions to controller extension handlers via manifest/controllerExtensions.
3. Implement selection and action handlers to navigate, filter, or call backend actions.
4. After backend changes, refresh content and KPI via component refresh helper.
Reference: Chart Extensions documentation.
```

STEP: 8 — Add custom filters and KPI tags

DESCRIPTION: Implement custom filters (for compact filters and KPI tags) by extending annotations and wiring any required control fragments. Use the controller extension to manage custom filter lifecycle and update the filter bar programmatically when needed.

LANGUAGE: Text

CODE:
```text
Custom filters implementation checklist:
1. Define custom filter fields in annotations or add a filter bar fragment.
2. Wire the fragment via manifest/extensionPoint or controllerExtensions.
3. In controller, respond to filter change events and update the list/table bindings.
4. Update KPI tags programmatically when filters change (retrieve values and set them).
Reference: Creating Custom Filters documentation.
```

STEP: 9 — Add a custom message strip above the table

DESCRIPTION: To show custom texts above the table, add a message strip fragment and include it within the ALP view using the available extension point. Register the fragment in manifest or load it programmatically from the controller extension.

LANGUAGE: Text

CODE:
```text
Message strip extension checklist:
1. Create an XML fragment for the message strip (e.g., webapp/ext/MessageStrip.fragment.xml).
2. Insert the fragment via a view extension point or load/attach it in your controller's onInit:
   - this.byId("yourExtensionPlaceholder").addContent(sFragment);
3. Control visibility and text from the controller based on application state.
Reference: Adding a Custom Message Strip to List Report and Analytical List Page documentation.
```

STEP: 10 — Cross-reference and additional resources

DESCRIPTION: Use the related documents while implementing each step. They contain detailed examples for annotations, manifest wiring, and framework-specific APIs.

LANGUAGE: Text

CODE:
```text
Related documentation to consult:
- Analytical List Page (ALP)
- Refresh API (Component.js)
- Smart Table Extensions
- Chart Extensions
- Creating Custom Filters
- Defining Custom Actions
- Adding a Custom Message Strip to List Report and Analytical List Page
```

--------------------------------

**TITLE**: Configuring Card Filters (SelectionVariant and URL filters)

**INTRODUCTION**: How to add and configure filters for SAP Fiori cards and overview pages using the com.sap.vocabularies.UI.v1.SelectionVariant annotation or by passing filter parameters in the URL. Includes XML annotation example, CAP CDS example, ABAP CDS guidance, and URL filter usage notes.

**TAGS**: fiori-elements-framework, annotations, selectionvariant, card-filters, CAP, ABAP, XML, CDS, URL-filters

**STEP**: 1 — Add filters via XML Annotation (SelectionVariant)

**DESCRIPTION**: Use the com.sap.vocabularies.UI.v1.SelectionVariant annotation on a card/entity to define filter SelectOptions. You can provide multiple SelectOptions. The example filters records by the TotalSum property to return values between 0 and 8000. Keep the annotation Qualifier to reference it from card definitions.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="com.sap.vocabularies.UI.v1.SelectionVariant" Qualifier="bubble">
    <Record>
        <PropertyValue Property="SelectOptions">
            <Collection>
            <Record>
               <PropertyValue Property="PropertyName" PropertyPath="TotalSum" />
               <PropertyValue Property="Ranges">
                  <Collection>
                     <Record>
                        <PropertyValue Property="Sign"
                           EnumMember="com.sap.vocabularies.UI.v1.SelectionRangeSignType/I" />
                        <PropertyValue Property="Option"
                           EnumMember="com.sap.vocabularies.UI.v1.SelectionRangeOptionType/BT" />
                        <PropertyValue Property="Low" String="0" />
                        <PropertyValue Property="High" String="8000" />
                     </Record>
                  </Collection>
               </PropertyValue>
            </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

**STEP**: 2 — Add filters via CAP CDS (UI.SelectionVariant)

**DESCRIPTION**: For CAP projects, define UI.SelectionVariant with SelectOptions containing PropertyName and Ranges. Use Sign and Option enums (#I, #BT) and provide Low/High as strings. This will be applied to the generated metadata and used by cards.

**LANGUAGE**: CDS

**CODE**:
```

UI.SelectionVariant #bubble: {
    SelectOptions: [
        {
            PropertyName: TotalSum,
            Ranges: [
                {
                    Sign: #I,
                    Option: #BT,
                    Low: '0',
                    High: '8000'
                }
            ]
        }
    ]
}
```

**STEP**: 3 — ABAP CDS Guidance

**DESCRIPTION**: If using ABAP CDS, there is no sample ABAP CDS annotation provided here. Use the local XML annotation (SelectionVariant) in the service metadata if ABAP CDS sample is not available.

**LANGUAGE**: ABAP CDS

**CODE**:
```abap
-- No ABAP CDS annotation sample is provided. Use the XML SelectionVariant annotation shown in Step 1.
```

**STEP**: 4 — Use URL filter parameters for Overview Pages

**DESCRIPTION**: You can set filters when launching Fiori overview pages by appending filter parameters to the URL. Only string or integer values are accepted. The filter is applied automatically if the filter property exists in the entity set. Use this method when launching pages from FLP or other applications.

**LANGUAGE**: URL

**CODE**:
```
Example URL:
http://abc#Equipment-overviewPage?EquipmentNumber=123456
```

**STEP**: 5 — Currency Display Preference

**DESCRIPTION**: The currency display on cards follows the SAP Fiori Launchpad user settings. The DisplayCurrency field of the application in the FLP user settings determines how currency values are shown. No additional annotation is required for this preference.
--------------------------------

**TITLE**: Configuring Card Navigation for SAP Fiori Overview Pages (OVP)

**INTRODUCTION**: This doc shows how to configure card navigation for SAP Fiori overview pages (OVP). It covers intent-based navigation (DataFieldForIntentBasedNavigation), URL navigation (DataFieldWithUrl), how to reference Identification and LineItem annotations from manifest.json, custom navigation extensions (doCustomNavigation), and adding staticParameters in the manifest to pass navigation parameters.

**TAGS**: fiori-elements-framework, sap-ovp, manifest.json, annotations, DataFieldForIntentBasedNavigation, DataFieldWithUrl, custom-navigation, doCustomNavigation, staticParameters

STEP: Navigation annotation types and behavior

DESCRIPTION: Use these annotation terms to configure navigation on OVP cards. Key points:
- DataFieldForIntentBasedNavigation — configure intent-based navigation to another Fiori app (semanticObject + action).
- DataFieldWithUrl — configure external URL navigation (opens in new tab) or construct a URL for a specific application route.
- Only list/table cards can pass single-record context to the navigation destination; provide navigation config in com.sap.vocabularies.UI.v1.LineItem for that behavior.
- If multiple navigation records exist in Identification or LineItem, the first record is used. Records are sorted by ImportanceType and order of entry.

LANGUAGE: Text

CODE:
```text
Navigation information is taken from the `com.sap.vocabularies.UI.v1.Identification`

-   `com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation`: Used to define intent-based navigation to SAP Fiori application.

-   `com.sap.vocabularies.UI.v1.DataFieldWithUrl term`: Used to configure navigation to external apps and websites.

The recommended way to configure intent-based navigation is to use `DataFieldForIntentBasedNavigation`. However, if navigation to a specific application is required and the route isn't configured as a target mapping, you can use `DataFieldWithUrl` to construct the specific application. The overview page identifies this as an intent-based navigation and open the target application in the relevant context in the same tab.

Note that information about the single record selected can only be passed to the navigation destination only from list or table cards. To enable this behavior, provide navigation configuration in the `com.sap.vocabularies.UI.v1.LineItem` term used by the specific card.

If more than one navigation record is provided in the `com.sap.vocabularies.UI.v1.Identification` or `com.sap.vocabularies.UI.v1.LineItem` terms, the first record is used for each term. The navigation records are sorted according to their importance, set in the`com.sap.vocabularies.UI.v1.ImportanceType` annotation, and their order of entry.
```

STEP: Reference Identification annotation from manifest.json

DESCRIPTION: Configure the identificationAnnotationPath (optionally with a qualifier) in the card settings to point to the Identification annotation to use for card-level navigation. If not configured, the unqualified com.sap.vocabularies.UI.v1.Identification term is used.

LANGUAGE: JSON

CODE:
```json
"sap.ovp": {
    ...
    "cards": {
        ...
        "card04": {
            "model": "ZCD204_EPM_DEMO_SRV",
            "template": "sap.ovp.cards.list",
            "settings": {
                "sortBy": "Price",
                "sortOrder": "descending",
                "listFlavor": "bar",
                "annotationPath": "com.sap.vocabularies.UI.v1.LineItem#bar",
                "identificationAnnotationPath": "com.sap.vocabularies.UI.v1.Identification#bar",
                "category": "{{card04_category}}",
                "entitySet": "Products"
            }
        },
        ...
    }
}
```

STEP: Enable custom navigation via controller extension

DESCRIPTION: To provide multiple or conditional navigation targets per card/line item, extend the OVP main controller and implement doCustomNavigation. First, add a controller extension to the manifest to register your extended controller.

LANGUAGE: JSON

CODE:
```json
"extends": {
            "extensions": {
                "sap.ui.controllerExtensions": {
                    "sap.ovp.app.Main": {
                        "controllerName": "my_app.ext.controller.OverViewPageExt"
                    }
                }
            }
        }
```

STEP: Implement doCustomNavigation controller handler

DESCRIPTION: Implement doCustomNavigation(sCardId, oContext, oNavigationEntry) in your extension controller to override or supply navigation entries. Input parameters:
- sCardId (String): card ID as defined in manifest.json.
- oContext (Object): UI5 binding context of the clicked card item (use oContext.getProperty(oContext.sPath) to access the entity).
- oNavigationEntry (Object): original navigation entry derived from annotations.

Return: an object (or null/undefined) that matches the navigation entry shape and contains string attributes:
- type (mandatory): "com.sap.vocabularies.UI.v1.DataFieldWithUrl" or "com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation"
- semanticObject (required for DataFieldForIntentBasedNavigation)
- action (required for DataFieldForIntentBasedNavigation)
- url (required for DataFieldWithUrl)
- label (optional)

Return an object when you need a custom target; otherwise return null/undefined to fall back to annotation-defined navigation.

LANGUAGE: JavaScript

CODE:
```javascript
doCustomNavigation: function (sCardId, oContext, oNavigationEntry) {
         var oCustomNavigationEntry;
         var oEntity = oContext && oContext.getProperty(oContext.sPath);

         if (sCardId === "card001" && oEntity.PurchaseOrder === "4500003575") {
              oCustomNavigationEntry = {};
              oCustomNavigationEntry.type = "com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation";
              oCustomNavigationEntry.semanticObject = "Action";
              oCustomNavigationEntry.action = "toappnavsample2";
              oCustomNavigationEntry.url = "";
              oCustomNavigationEntry.label = ""; 
         }
         return oCustomNavigationEntry;
}
```

STEP: Static parameters for intent-based navigation

DESCRIPTION: Provide staticParameters in the card settings of manifest.json to send constant key/value pairs during IntentBasedNavigation from the overview page to a target application.

LANGUAGE: JSON

CODE:
```json
"staticParameters": {
              "parameter1": "parameterValue1",
              "parameter2": "parameterValue2"
            },
```
--------------------------------

**TITLE**: Configuring Card Properties (Overview Page Cards)

**INTRODUCTION**: This document lists the mandatory configuration items required for all Fiori overview page cards and shows a minimal manifest.json example. Use these properties when defining card entries so the card instance can be instantiated and provided with the correct model, template, settings, and entity set.

**TAGS**: fiori-elements-framework, overview-page, cards, card-configuration, manifest.json

**STEP**: Mandatory card properties

**DESCRIPTION**: All overview page cards inherit generic capabilities (header, footer, navigation, etc.). The following properties are mandatory for every card and must be provided in the card configuration:

- model: Name of the client-side model to provide to the card instance (string).
- template: Card component package or card type to instantiate (string).
- settings: Internal card configuration object passed to the card instance (object).
- entitySet: OData entity set name used by the card (string).

Provide these keys in each card definition to ensure the framework can instantiate and bind the card correctly.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "model": "string",       /* Name of the model for the card */
  "template": "string",    /* Card type / component package to instantiate */
  "settings": {            /* Internal card settings (object) */
    "...": "..."
  },
  "entitySet": "string"    /* OData entity set name */
}
```

**STEP**: Example: Minimal manifest.json card configuration (overview page)

**DESCRIPTION**: Minimal example showing required properties used inside a typical overview page (sap.ovp) card configuration. Replace example values (MyCardId, MyModel, sap.ovp.cards.list, Products) with your concrete IDs, model names, templates, settings, and entity sets.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ovp": {
    "cards": {
      "MyCardId": {
        "model": "MyModel",
        "template": "sap.ovp.cards.list",
        "settings": {
          "title": "Top Products",
          "subTitle": "Sales overview",
          "chartType": "bar" /* optional settings specific to the template */
        },
        "entitySet": "Products"
      }
    }
  }
}
```

**STEP**: Implementation notes

**DESCRIPTION**: Actionable points for code generation and implementation:
- Always include model, template, settings, and entitySet in each card definition.
- settings is template-specific: include only properties supported by the chosen template.
- Use the correct model name as registered in your application (e.g., in manifest dataSources or component initialization).
- Use the exact entitySet name from your OData service metadata. Mismatches prevent data binding. 

**LANGUAGE**: plaintext

**CODE**:
```text
All cards inherit common capabilities (header, footer, navigation, etc.). Ensure the mandatory properties are present and validated at generation time to avoid runtime instantiation errors.
```
--------------------------------

**TITLE**: Configuring Chart Facets and Chart Annotations for SAP Fiori Elements

**INTRODUCTION**: Practical, code-focused guide showing how to configure chart facets and chart definitions in SAP Fiori Elements. Includes UI.ReferenceFacet, UI.Chart, manifest.json controlConfiguration settings, aggregation-related annotations (groupable/aggregatable, transformation aggregation, dynamic measures, custom aggregation), criticality coloring, time-axis rules, and relevant restrictions. Use these snippets directly in XML annotations, ABAP CDS, CAP CDS, and manifest.json to implement charts in List Reports and Object Pages.

**TAGS**: UI.ReferenceFacet, UI.Chart, chart-facet, aggregation, DynamicMeasures, Analytics.AggregatedProperty, manifest.json, criticality, time-axis, SAP Fiori Elements, OData V4, OData V2

**STEP**: 1 — Add a Chart Facet (ReferenceFacet) to an Entity
**DESCRIPTION**: Define a chart facet on an entity type using UI.ReferenceFacet to point to the chart annotation. Examples provided for XML annotation, ABAP CDS, and CAP CDS.
**LANGUAGE**: XML
**CODE**:
```xml
<Annotations Target="STTA_PROD_MAN.STTA_C_MP_ProductType">
   <Annotation Term="UI.Facets">
      <Record Type="UI.ReferenceFacet">
         <PropertyValue Property="Label" String="{@i18n>@SalesData}"/>
         <PropertyValue Property="Target" AnnotationPath="to_ProductSalesData/@UI.Chart"/>
      </Record>
   </Annotation>
</Annotations>
```

**LANGUAGE**: ABAP CDS
**CODE**:
```
@UI.facet: [
 {
  label: '{@i18n>@SalesData}',
  type: #CHART_REFERENCE,
  purpose: #STANDARD,
  targetElement: '_productSalesData'
 }
]  
```

**LANGUAGE**: CAP CDS
**CODE**:
```
annotate STTA_PROD_MAN.STTA_C_MP_ProductType @(
  UI.Facets : {
    $Type : 'UI.ReferenceFacet',
    Label : '{@i18n>@SalesData}',
    Target : 'to_ProductSalesData/@UI.Chart'
  }
);
```

**STEP**: 2 — Define the UI.Chart Annotation (Chart Definition)
**DESCRIPTION**: Create a chart definition on the chart entity type: set Title, ChartType, Dimensions, and Measures. Examples for XML, ABAP CDS, and CAP CDS are provided.
**LANGUAGE**: XML
**CODE**:
```xml
<Annotations Target="STTA_PROD_MAN.STTA_C_MP_ProductSalesDataType">
   <Annotation Term="UI.Chart">
      <Record>
         <PropertyValue Property="Title" String="Test Chart"/>
         <PropertyValue Property="ChartType" EnumMember="UI.ChartType/Column"/>
         <PropertyValue Property="Dimensions">
            <Collection>
               <PropertyPath>DeliveryMonth</PropertyPath>
            </Collection>
         </PropertyValue> 
         <PropertyValue Property="Measures">
            <Collection>
               <PropertyPath>Revenue</PropertyPath>
            </Collection>
         </PropertyValue>
      </Record>
   </Annotation>
</Annotations>
```

**LANGUAGE**: ABAP CDS
**CODE**:
```
@UI.Chart: [
  {
    title: 'Test Chart',
    chartType: #COLUMN,
    dimensions: [
      'DELIVERYMONTH'
    ],
    measures: [
      'REVENUE'
    ]
  }
]
annotate view STTA_C_MP_PRODUCTSALESDATA with {

}
```

**LANGUAGE**: CAP CDS
**CODE**:
```
annotate STTA_PROD_MAN.STTA_C_MP_ProductSalesDataType @(
  UI.Chart : {
    Title : 'Test Chart',
    ChartType : #Column,
    Dimensions : [
        DeliveryMonth
    ],
    Measures : [
        Revenue
    ]
  }
);
```

**STEP**: 3 — Restriction: Navigation Properties Not Supported in UI.Chart
**DESCRIPTION**: The UI.Chart term cannot use navigation properties as dimensions/measures. Ensure chart properties reference properties directly present on the chart entity.

**LANGUAGE**: XML
**CODE**:
```xml
<!-- Note: Do not use navigation property references inside UI.Chart -->
```

**STEP**: 4 — OData V2 Restriction (SAP Fiori Elements)
**DESCRIPTION**: Charts are supported only for entities/services that are not draft-enabled or are read-only when using SAP Fiori Elements for OData V2.
**LANGUAGE**: None
**CODE**:
```text
Restriction: Charts are only supported for entities or services that are not draft enabled or for read-only entities or services.
```

**STEP**: 5 — Enabling Chart for Draft-Enabled Entities (OData V4)
**DESCRIPTION**: You can define charts against draft-enabled entities in OData V4. Only active data is used for chart display. No code change required beyond chart annotation on the aggregate/active entity.

**LANGUAGE**: None
**CODE**:
```text
Enable chart on draft-enabled entity: chart displays only active (non-draft) data.
```

**STEP**: 6 — Configure Chart Header Text and Visibility via manifest.json
**DESCRIPTION**: Use controlConfiguration in manifest.json to set chart header visibility and custom header text. Applies to charts inside List Report pages (not object page charts).
**LANGUAGE**: JSON
**CODE**:
```json
"BusinessPartnersList": {
   "type": "Component",
   "id": "BusinessPartnersList",
   "name": "sap.fe.templates.ListReport",
   "options": {
      "settings": {
         "controlConfiguration": {
            "@com.sap.vocabularies.UI.v1.Chart": {
               "chartSettings": {
                  "headerVisible": false,  // Can be true (default) or false
                  "header": "My Custom chart title"
               }
            }
         }
      }
   }
}
```

**STEP**: 7 — Configure Chart Selection Mode via manifest.json
**DESCRIPTION**: Allow end users to select chart data points (None / Single / Multiple). Set selectionMode in controlConfiguration.
**LANGUAGE**: JSON
**CODE**:
```json
"BusinessPartnersList": {
   "type": "Component",
   "id": "BusinessPartnersList",
   "name": "sap.fe.templates.ListReport",
   "options": {
      "settings": {
         "controlConfiguration": {
            "@com.sap.vocabularies.UI.v1.Chart": {
               "chartSettings": {
                  "selectionMode": "None" // None/Single/Multiple (default)
               }
            }
         }
      }
   }
}
```

**STEP**: 8 — Add Criticality Coloring for Chart Values (UI.ValueCriticality)
**DESCRIPTION**: Annotate properties with UI.ValueCriticality to map value strings to UI.CriticalityType values. Use XML, ABAP CDS, or CAP CDS examples.
**LANGUAGE**: XML
**CODE**:
```xml
<Annotations Target="com.c_salesordermanage_sd_aggregate.SalesOrderManage/SalesOrderType">
    <Annotation Term="UI.ValueCriticality">
        <Collection>
            <Record Type="UI.ValueCriticalityType">
                <PropertyValue Property="Value" String="CCLN"/>
                <PropertyValue Property="Criticality" EnumMember="UI.CriticalityType/Negative"/>
            </Record>
            <Record Type="UI.ValueCriticalityType">
                <PropertyValue Property="Value" String="CR"/>
                <PropertyValue Property="Criticality" EnumMember="UI.CriticalityType/Critical"/>
            </Record>
            <Record Type="UI.ValueCriticalityType">
                <PropertyValue Property="Value" String="OR"/>
                <PropertyValue Property="Criticality" EnumMember="UI.CriticalityType/Positive"/>
            </Record>
        </Collection>
    </Annotation>
</Annotations>
```

**LANGUAGE**: ABAP CDS
**CODE**:
```
annotate view C_SALESORDERMANAGE_SD_AGGREGATE.SALESORDERMANAGE with {

@UI.ValueCriticality: [
  {
    value: 'CCLN',
    criticality: #NEGATIVE
  },
  {
    value: 'CR',
    criticality: #CRITICAL
  },
  {
    value: 'OR',
    criticality: #POSITIVE
  }
]

salesordertype;
}
```

**LANGUAGE**: CAP CDS
**CODE**:
```
SalesOrderType         @(
        UI.ValueCriticality   : [
        {
            Value       : 'CCLN',
            Criticality : #Negative
        },
        {
            Value       : 'CR',
            Criticality : #Critical
        },
       {
            Value       : 'OR',
            Criticality : #Positive
        }
        ]
    );
```

**STEP**: 9 — Time Axis Support Rules
**DESCRIPTION**: Time axis is automatically enabled when the chart dimension is Edm.Date or Edm.DateTimeOffset. Also enabled for String dimensions annotated with specific Common annotations (fiscal/calendar/year/month/quarter/week/date).
**LANGUAGE**: None
**CODE**:
```text
Enable time axis when dimension type is:
- Edm.Date
- Edm.DateTimeOffset

Or when dimension is String and annotated with:
- @Common.IsFiscalYear
- @Common.IsFiscalYearPeriod
- @Common.IsCalendarYearMonth
- @Common.IsCalendarYearQuarter
- @Common.IsCalendarYearWeek
- @Common.IsCalendarDate
```

**STEP**: 10 — Enable Aggregation: Declare Groupable and Aggregatable Properties (Entity Set Level)
**DESCRIPTION**: At entity set level, declare GroupableProperties and AggregatableProperties (Aggregation.ApplySupported). Use XML or CAP CDS to list properties that can be used as dimensions (groupable) or measures (aggregatable).
**LANGUAGE**: XML
**CODE**:
```xml
<Annotations Target="sap.fe.managepartners.ManagePartnersService.EntityContainer/BusinessPartners">
    <Annotation Term="Aggregation.ApplySupported">
        <Record Type="Aggregation.ApplySupportedType">
            <PropertyValue Property="AggregatableProperties">
                <Collection>
                    <Record Type="Aggregation.AggregatablePropertyType">
                        <PropertyValue Property="Property">
                            <PropertyPath>SalesAmount</PropertyPath>
                        </PropertyValue>
                    </Record>
                    <Record Type="Aggregation.AggregatablePropertyType">
                        <PropertyValue Property="Property">
                            <PropertyPath>SalesAmountLocalCurrency</PropertyPath>
                        </PropertyValue>
                    </Record>
                    ....
                    ....
                </Collection>
            </PropertyValue>
            <PropertyValue Property="GroupableProperties">
                <Collection>
                    <PropertyPath>AccountResponsible</PropertyPath>
                    <PropertyPath>Country</PropertyPath>
                    ....
                    ....
                </Collection>
            </PropertyValue>
        </Record>
    </Annotation>
</Annotations>
```

**LANGUAGE**: CAP CDS
**CODE**:
```
@Aggregation.ApplySupported : {
     GroupableProperties : [AccountResponsible, Country, .......],
     AggregatableProperties: [{
          Property: SalesAmount
          },{
          Property: SalesAmountLocalCurrency
          },
          ....
          ....
     ]
}
```

**STEP**: 11 — Transformation Aggregation with Standard Methods (Analytics.AggregatedProperty)
**DESCRIPTION**: Define Aggregation.ApplySupported on entity set and list Analytics.AggregatedProperty records to expose aggregated results (min, max, etc.). Use XML or CAP CDS examples.
**LANGUAGE**: XML
**CODE**:
```xml
<Annotations Target="com.c_salesordermanage_sd_aggregate.SalesOrderManage">
    <Annotation Term="Aggregation.ApplySupported">
        …
        …
    </Annotation>
    <Annotation Term="Analytics.AggregatedProperty">
        <Record Type="Analytics.AggregatedPropertyType">
            <PropertyValue Property="Name" String="minPrice"/>
            <PropertyValue Property="AggregationMethod" String="min"/>
            <PropertyValue Property="AggregatableProperty" PropertyPath="NetPricing"/>
            <Annotation Term="Common.Label" String="Minimum Net Price"/>
         </Record>
    </Annotation>
    <Annotation Term="Analytics.AggregatedProperty" Qualifier="max">
        <Record Type="Analytics.AggregatedPropertyType">
            <PropertyValue Property="Name" String="maximumPrice"/>
            <PropertyValue Property="AggregationMethod" String="max"/>
            <PropertyValue Property="AggregatableProperty" PropertyPath="NetPricing"/>
            <Annotation Term="Common.Label" String="Maximum Net Price"/>
         </Record>
    </Annotation>   
</Annotations>
```

**LANGUAGE**: CAP CDS
**CODE**:
```
annotate com.c_salesordermanage_sd_aggregate.SalesOrderManage with @(
  Aggregation.ApplySupported        : {
    AggregatableProperties   : [{Property : NetPricing}],
    CustomAggregationMethods : ['Custom.concat']
  },
  Analytics.AggregatedProperty      : {
    Name                 : 'minPrice',
    AggregationMethod    : 'min',
    AggregatableProperty : 'NetPricing',
    ![@Common.Label]     : 'Minimum Net Price'
  }
});
```

**STEP**: 12 — Use Transformation Aggregate-Based Measures in Charts: DynamicMeasures + MeasureAttributes
**DESCRIPTION**: When using transformation-aggregate-based measures in charts, define them as DynamicMeasures (not in Measures). Show XML and CAP CDS examples: specify Measures, DynamicMeasures, MeasureAttributes, DimensionAttributes for correct chart mapping.
**LANGUAGE**: XML
**CODE**:
```xml
<Annotation Term="UI.Chart">
    <Record Type="UI.ChartDefinitionType">
        <PropertyValue Property="Title" String="Sales Chart"/>
        <PropertyValue Property="ChartType" EnumMember="UI.ChartType/Column"/>
        <PropertyValue Property="Measures">
            <Collection>
                <PropertyPath>avgPricing</PropertyPath>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="DynamicMeasures">
            <Collection>
                <AnnotationPath>@Analytics.AggregatedProperty#sum</AnnotationPath>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="Dimensions">
            <Collection>
                <PropertyPath>SalesOrganization</PropertyPath>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="MeasureAttributes">
            <Collection>
                <Record Type="UI.ChartMeasureAttributeType">
                    <PropertyValue Property="Measure" PropertyPath="avgPricing"/>
                    <PropertyValue Property="Role" EnumMember="UI.ChartMeasureRoleType/Axis1"/>
                </Record>
                <Record Type="UI.ChartMeasureAttributeType">
                    <PropertyValue Property="DynamicMeasure" AnnotationPath="@Analytics.AggregatedProperty#sum"/>
                    <PropertyValue Property="Role" EnumMember="UI.ChartMeasureRoleType/Axis1"/>
                </Record>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="DimensionAttributes">
            <Collection>
                <Record Type="UI.ChartDimensionAttributeType">
                    <PropertyValue Property="Dimension" PropertyPath="SalesOrganization"/>
                    <PropertyValue Property="Role" EnumMember="UI.ChartDimensionRoleType/Category"/>
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

**LANGUAGE**: CAP CDS
**CODE**:
```
Chart                                                    : {
      $Type               : 'UI.ChartDefinitionType',
      Title               : 'Sales Chart',
      ChartType           : #Column,
      Measures            : [avgPricing],
      DynamicMeasures     : ['@Analytics.AggregatedProperty#sum'],
      Dimensions          : [SalesOrganization],
      MeasureAttributes   : [
        {
          $Type   : 'UI.ChartMeasureAttributeType',
          Measure : avgPricing,
          Role    : #Axis1
        },
        {
          $Type          : 'UI.ChartMeasureAttributeType',
          DynamicMeasure : '@Analytics.AggregatedProperty#sum',
          Role           : #Axis1
        }
      ],
      DimensionAttributes : [{
        $Type     : 'UI.ChartDimensionAttributeType',
        Dimension : SalesOrganization,
        Role      : #Category
      }]
    }
```

**STEP**: 13 — Transformation Aggregation with Custom Aggregation Methods (Entity Set Level)
**DESCRIPTION**: Declare Aggregation.CustomAggregate qualifiers for custom aggregate measures on the entity set and mark groupable properties. Use XML and CAP CDS examples.
**LANGUAGE**: XML
**CODE**:
```xml
<Annotations Target="sap.fe.managepartners.ManagePartnersService.EntityContainer/BusinessPartners">
     <Annotation Term="Aggregation.CustomAggregate" Qualifier="RequestedQuantity">
        <String>Edm.Decimal</String>
     </Annotation>
     <Annotation Term="Aggregation.CustomAggregate" Qualifier="RequestedQuantityLocalUnit">
        <String>Edm.Decimal</String>
     </Annotation>
</Annotations>

<Annotations Target="sap.fe.managepartners.ManagePartnersService.BusinessPartners/Name">
     <Annotation Term="Aggregation.Groupable">
        <Bool>true</Bool>
     </Annotation>
     <Annotation Term="Common.Label">
        <String>Partner Name</String>
     </Annotation>
</Annotations>
```

**LANGUAGE**: CAP CDS
**CODE**:
```
@Aggregation.CustomAggregate #RequestedQuantity          : 'Edm.Decimal'
@Aggregation.CustomAggregate #RequestedQuantityLocalUnit : 'Edm.Decimal'

entity BusinessPartners {
               Name   : String @Common : { Label: 'Partner Name' }
               @Aggregation.Groupable: true;
}
```

**STEP**: 14 — Restrictions and Important Notes (Summary)
**DESCRIPTION**: Consolidated restrictions and operational notes to apply when implementing charts.
**LANGUAGE**: None
**CODE**:
```text
- Navigation properties inside UI.Chart are not supported.
- OData V2: Charts are not supported for draft-enabled or transactional entities; only non-draft or read-only.
- Chart personalization settings and selections are not saved in iAppState (not part of variant).
- Properties from associated entity sets (measures/dimensions/text associations) are not supported.
- Semantic coloring via UI.Criticality and UI.CriticalityCalculation is not supported for chart controls.
- Aggregations on draft-enabled entities are not supported in ABAP CDS (SADL does not support $apply on draft/transactional entities).
- For chart selection and aggregation behavior, backend must support transformation filters and Aggregation.ApplySupported must be present.
- Unit properties annotated as custom aggregate may be allowed but do not appear in the list of measures for chart selection.
```

--------------------------------

**TITLE**: Configuring Charts for Overview Pages (Annotations and manifest.json)

**INTRODUCTION**: This document provides actionable annotation and manifest.json examples and requirements to configure analytical chart cards in SAP Fiori overview pages. Use these snippets when generating or modifying annotation files (XML, ABAP CDS, CAP CDS) and manifest.json to control chart type, measures/dimensions roles, formatting, semantic forecasting, color palettes, stable dimension coloring, time-series behavior, and data labels.

**TAGS**: fiori-elements-framework, charts, annotations, UI.Chart, UI.DataPoint, manifest.json, CDS, ABAP, CAP, colorPalette, semantic-pattern, time-series

STEP: Required Annotation Terms (summary)
DESCRIPTION: Ensure these annotation terms are present in the annotation file used by the card. They apply across chart types and control navigation, filtering, sorting, limits, chart definition, measures and dimensions, and their roles.
LANGUAGE: Text
CODE:
```text
Required annotation terms:
- UI.Identification         : mandatory, configures navigation targets and parameters for the card.
- UI.SelectionVariant.SelectOptions : optional, defines filters applied when retrieving card data.
- UI.PresentationVariant.SortOrder  : optional, defines sort order.
- UI.PresentationVariant.MaxItems   : optional, limits maximum records fetched from backend (avoid for charts that need full dataset like donut charts).
- UI.Chart                 : mandatory, defines chart (type, measures, dimensions).
- UI.Chart.MeasureAttributes.Measure : defines measures used.
- UI.Chart.MeasureAttributes.Role    : specifies measure role (interpretation varies by chart type).
- UI.Chart.DimensionAttributes.Dimension : defines dimensions.
- UI.Chart.DimensionAttributes.Role      : specifies dimension role (category or series).
```

STEP: Formatting Numeric Values in Charts (XML annotation)
DESCRIPTION: Configure number formatting for chart measures by referencing a UI.DataPoint annotation with ValueFormat containing ScaleFactor and NumberOfFractionalDigits. Attach this DataPoint to a measure in UI.Chart via DataPoint annotation path.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.DataPoint" Qualifier=" Eval_by_Currency_TotalSales ">
  <Record Type="UI.DataPointType">
    <PropertyValue Property="Value" Path="Sales"/> 
    <PropertyValue Property="ValueFormat">
      <Record>
        <PropertyValue Property="ScaleFactor" Decimal="1000" />
        <PropertyValue Property="NumberOfFractionalDigits" Int="3" />
      </Record>
    </PropertyValue>
  </Record>
</Annotation>

<Annotation Term="UI.Chart" Qualifier="Eval_by_Currency">
  <Record Type="UI.ChartDefinitionType">
    <PropertyValue Property="Title" String="View1" />
    <PropertyValue Property="ChartType" EnumMember="UI.ChartType/Bubble"/>
    <PropertyValue Property="MeasureAttributes">
      <Collection>
        …
        <Record Type="UI.ChartMeasureAttributeType">
          <PropertyValue Property="Measure" PropertyPath="TotalSales" />
          <PropertyValue Property="Role" EnumMember="UI.ChartMeasureRoleType/Axis2" />
          <PropertyValue Property="DataPoint" AnnotationPath="@UI.DataPoint#Eval_by_Currency-TotalSales"/>
        </Record>
        …
      </Collection>
    </PropertyValue>
    …
  </Record>
</Annotation>
```

STEP: Formatting Numeric Values in Charts (ABAP CDS)
DESCRIPTION: Example ABAP CDS syntax: add @UI.dataPoint with valueFormat and attach UI.Chart annotation with measureAttributes referencing the datapoint (use asDataPoint:true).
LANGUAGE: ABAP CDS
CODE:
```
@UI.dataPoint: {
  valueFormat: { 
    scaleFactor: 1000, 
    numberOfFractionalDigits: 3 
  }
}
property_name;

@UI.Chart: [
  {
    title: 'View1',
    chartType: #BUBBLE,
    measureAttributes: [
      {
        measure: 'TotalSales',
        role: #AXIS_2,
        asDataPoint: true
      }
    ],
    qualifier: 'Eval_by_Currency'
  }
]
annotate view VIEWNAME with { }
```

STEP: Formatting Numeric Values in Charts (CAP CDS)
DESCRIPTION: CAP CDS syntax: define UI.DataPoint and UI.Chart with MeasureAttributes referencing the DataPoint via DataPoint property.
LANGUAGE: CAP CDS
CODE:
```
UI.DataPoint # Eval_by_Currency-TotalSales  : {
    $Type : 'UI.DataPointType',
    ValueFormat : {
        ScaleFactor : 1000,
        NumberOfFractionalDigits : 3
    }
},
UI.Chart #Eval_by_Currency : {
    $Type : 'UI.ChartDefinitionType',
    Title : 'View1',
    ChartType : #Bubble,
    MeasureAttributes : [
        {
            $Type : 'UI.ChartMeasureAttributeType',
            Measure : TotalSales,
            Role : #Axis2,
            DataPoint : '@UI.DataPoint#Eval_by_Currency-TotalSales'
        }
    ]
}
```

STEP: Semantic Pattern — Purpose and Requirements (summary)
DESCRIPTION: Enable semantic pattern to compare actual vs forecast values. Supported in line, column, and vertical bullet chart cards. Requirements:
- DataPoint annotation must include ForecastValue referencing a measure.
- Chart annotation:
  - line/column: 1 dimension + 1 measure
  - vertical bullet: 1 dimension + 1–2 measures
When conditions are met, the chart will display actual as solid and forecast as dashed (or dotted for line charts).
Referenced illustration file: images/Semantic_Pattern_for_Charts_in_Overview_Pages_62a0e9a.png
LANGUAGE: Text
CODE:
```text
Semantic pattern behavior:
- Enabled when DataPoint.ForecastValue exists and chart dimension/measure counts match the supported patterns.
- Visuals:
  - Column & vertical bullet: forecast shown dashed.
  - Line: forecast shown dotted.
- If requirements not met, semantic pattern is not applied.
```

STEP: Semantic Pattern Example (XML)
DESCRIPTION: XML example: DataPoint with ForecastValue and UI.Chart with measure linked to the data point to enable semantic forecast rendering.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.DataPoint" Qualifier="Column_Forecast">
  <Record Type="UI.DataPointType">
    <PropertyValue Property="Title" String="Sales Performance"/>
    <PropertyValue Property="Value" Path="Sales"/>
    <PropertyValue Property="ValueFormat">
      <Record>
        <PropertyValue Property="ScaleFactor" Decimal="0"/>
        <PropertyValue Property="NumberOfFractionalDigits" Int="3"/>
      </Record>
    </PropertyValue>
    <PropertyValue Property="ForecastValue" Path="SalesShare"/>
  </Record>
</Annotation>

<Annotation Term="UI.Chart" Qualifier="Eval_by_Currency_Column">
  <Record Type="UI.ChartDefinitionType">
    <PropertyValue Property="Title" String="Column chart for shape" />
    <PropertyValue Property="ChartType" EnumMember="UI.ChartType/Column" />
    <PropertyValue Property="MeasureAttributes">
      <Collection>
        <Record Type="UI.ChartMeasureAttributeType">
          <PropertyValue Property="Measure" PropertyPath="Sales" />
          <PropertyValue Property="DataPoint">
            <AnnotationPath>@UI.DataPoint#Column_Forecast</AnnotationPath>
          </PropertyValue>
          <PropertyValue Property="Role" EnumMember="UI.ChartMeasureRoleType/Axis1" />
        </Record>
      </Collection>
    </PropertyValue>
    <PropertyValue Property="DimensionAttributes">
      <Collection>
        <Record Type="UI.ChartDimensionAttributeType">
          <PropertyValue Property="Dimension" PropertyPath="SupplierCompany" />
          <PropertyValue Property="Role" EnumMember="UI.ChartDimensionRoleType/Category" />
        </Record>
      </Collection>
    </PropertyValue>
  </Record>
</Annotation>
```

STEP: Semantic Pattern Example (ABAP CDS)
DESCRIPTION: ABAP CDS example that annotates a property with forecast and adds UI.Chart annotation for the chart qualifier.
LANGUAGE: ABAP CDS
CODE:
```
@UI.dataPoint: {
  title: 'Sales Performance',
  forecastValue: 'SalesShare',
  valueFormat: { scaleFactor: 0, numberOfFractionalDigits: 3 }
}
Sales;

@UI.Chart: [
  {
    title: 'Column chart for shape',
    chartType: #COLUMN,
    measureAttributes: [
      {
        measure: 'Sales',
        role: #AXIS_1,
        asDataPoint: true
      }
    ],
    dimensionAttributes: [
      {
        dimension: 'SupplierCompany',
        role: #CATEGORY
      }
    ],
    qualifier: 'Eval_by_Currency_Column'
  }
]
annotate view VIEWNAME with { }
```

STEP: Semantic Pattern Example (CAP CDS)
DESCRIPTION: CAP CDS equivalent for DataPoint with ForecastValue and UI.Chart linking to that datapoint.
LANGUAGE: CAP CDS
CODE:
```
UI.DataPoint #Column_Forecast : {
    $Type : 'UI.DataPointType',
    Title : 'Sales Performance',
    Value : Sales,
    NumberFormat : {
        ScaleFactor : 0,
        NumberOfFractionalDigits : 3
    },
    ForecastValue : SalesShare
},
UI.Chart #Eval_by_Currency_Column : {
    $Type : 'UI.ChartDefinitionType',
    Title : 'Column chart for shape',
    ChartType : #Column,
    MeasureAttributes : [
        {
            $Type : 'UI.ChartMeasureAttributeType',
            Measure : Sales,
            DataPoint : '@UI.DataPoint#Column_Forecast',
            Role : #Axis1
        }
    ],
    DimensionAttributes : [
        {
            $Type : 'UI.ChartDimensionAttributeType',
            Dimension : SupplierCompany,
            Role : #Category
        }
    ]
},
```

STEP: Chart Types, Dimension & Measure Roles, and Time Series Rules
DESCRIPTION: Rules for chart types, role properties and automatic time-axis behavior. Use these rules when generating chart annotations.
LANGUAGE: Text
CODE:
```text
Chart types supported in overview pages:
- line, donut, bubble, column, stacked column, vertical bullet, combination, scatter

Dimension role:
- role: "category" or "series"
- default: "category" if not specified

Measure role:
- role: "axis1", "axis2", or "axis3"
- default: "axis1" if not specified
- interpretation of axis roles depends on chart type

Time series automatic usage (analytic cards use a time axis automatically when ALL conditions met):
- Chart type: line, bubble, column, or combination
- Chart has exactly one dimension
- Dimension data type: edm.datetime OR edm.string with OData metadata sap:semantics="yearmonthday"
- For bubble charts: exactly two measures
- For combination charts: at least two measures

Note: Only line, bubble, column, and combination charts support time axis.
```

STEP: Color Palette (semantic coloring) — manifest.json snippet
DESCRIPTION: Define colorPalette in manifest.json to map four semantic states (0..3) to UI CSS color tokens and legend text. All four entries are mandatory and must use SAP Fiori semantic palette tokens.
LANGUAGE: JSON
CODE:
```json
"colorPalette": {
  "0": {
    "color": "sapUiChartPaletteSemanticNeutral",
    "legendText": "{{OTHERS}}"
  },
  "1": {
    "color": "sapUiChartPaletteSemanticBadDark1",
    "legendText": "{{BAD}}"
  },
  "2": {
    "color": "sapUiChartPaletteSemanticCriticalDark2",
    "legendText": "{{CRITICAL}}"
  },
  "3": {
    "color": "sapUiChartPaletteSemanticCritical",
    "legendText": "{{GOOD}}"
  }
}
```

STEP: Stable Coloring with Dimension Values (enable + palette rules snippet)
DESCRIPTION: For column stack charts, enable stable colors and map specific dimension values to colors using colorPalette.dimensionSettings. Set bEnableStableColors to true in the card settings and provide dimensionSettings rules: each rule must include dimensionValue and color; index is optional (defines legend order). If only dimensionValue/index is provided without color, legends are ordered but default colors are used.
LANGUAGE: JSON
CODE:
```json
// colorPalette.dimensionSettings sample
"colorPalette": {
  "dimensionSettings": {
    "StatusCriticality": {
      "rule1": {
        "color": "<colorValue1>",
        "dimensionValue": "<dimensionValue1>"
      },
      "rule2": {
        "color": "<colorValue2>",
        "dimensionValue": "<dimensionValue2>"
      }
    }
  }
}
```

STEP: Card manifest example with stable colors, color mapping, and legend ordering
DESCRIPTION: Full card settings example to enable stable colors, set chartAnnotationPath, and configure colorPalette.dimensionSettings with index property to order legends. Place under "sap.ovp"."cards"."<card_id>" in manifest.json.
LANGUAGE: JSON
CODE:
```json
"sap.ovp": {
  ...
  "cards": {
    ...
    "<card_id>": {
      "model": "<model_name>",
      "template": "sap.ovp.cards.charts.analytical",
      "settings": {
        "title": "<Card title>",
        "entitySet": "<entitySet>",
        "chartAnnotationPath": "com.sap.vocabularies.UI.v1.Chart#Eval_by_Currency_ColumnStacked",
        "bEnableStableColors": true,
        "colorPalette": {
          "dimensionSettings": {
            "<dimensionAttribute>": {
              "<dimensionValue1>": {
                "color": "sapUiChartPaletteSemanticGood",
                "dimensionValue": "<dimensionValue1>",
                "index": 0
              },
              "<dimensionValue2>": {
                "color": "sapUiChartPaletteSemanticNeutral",
                "dimensionValue": "<dimensionValue2>",
                "index": 1
              },
              "<dimensionValue3>": {
                "color": "sapUiChartPaletteSemanticCriticalDark2",
                "dimensionValue": "<dimensionValue3>",
                "index": 2
              }
            }
          }
        }
      }
    }
  }
}
```

STEP: Data Label in Analytical Chart (manifest.json)
DESCRIPTION: Enable visible data labels in analytical cards by setting sap.ovp.chartSettings.showDataLabel to true (default: false). Place under "sap.ovp" in manifest.json.
LANGUAGE: JSON
CODE:
```json
"sap.ovp": {
  "globalFilterModel": "salesOrder",
  "globalFilterEntityType": "GlobalFilters",
  "chartSettings": {
    "showDataLabel": true
  }
}
```

STEP: Related Links and Image Reference
DESCRIPTION: Reference resources for further details and illustrative image file path used in original docs.
LANGUAGE: Text
CODE:
```text
Related:
- Chart Cards Used in Overview Pages: chart-cards-used-in-overview-pages-68e62ad.md
Image illustrating semantic pattern behavior:
- images/Semantic_Pattern_for_Charts_in_Overview_Pages_62a0e9a.png
```
--------------------------------

**TITLE**: Configuring Custom Messages for Cards (getCustomMessage)

**INTRODUCTION**: Define a getCustomMessage function in your extension controller to provide custom messages and optional icons per card for success (including "success with no data") and error scenarios. Use the response object and card ID to decide which message and icon to return. Error scenarios show a default icon; success/no-data scenarios can include a custom icon.

**TAGS**: fiori-elements-framework, sapui5, custom-messages, extension-controller, cards, ui5

**STEP**: 1 — Add getCustomMessage to your extension controller

**DESCRIPTION**: Implement getCustomMessage(oResponse, sCardId) inside the extension controller file that is used for the card(s). The method receives:
- oResponse: response object from the service (use getParameters() to inspect success flag etc.)
- sCardId: the card identifier string

Return an object with:
- sMessage: (string) message to display
- sIcon: (string, optional) icon URI for success/no-data scenarios (e.g., "sap-icon://message-information")

For error scenarios, do not need to provide sIcon — a default error icon will be displayed. If you do not handle a card, return undefined.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
getCustomMessage: function (oResponse, sCardId) {
 if (sCardId == "card001") {
  if (oResponse && oResponse.getParameters() && oResponse.getParameters().success) {
    return {
       sMessage: "My Custom Message for No Data", //message in case of success and no data
       sIcon: "sap-icon://message-information"    //icon in case of success and no data
     }
  } else {
    return {
       sMessage: "My Custom Message for Error" //message in case of error
           }
         }
  }
},
```

**STEP**: 2 — Recommended: robust pattern and handling multiple cards

**DESCRIPTION**: Use defensive checks and explicit returns for multiple cards. Return undefined for cards you do not customize. Check success using oResponse.getParameters().success and handle both success-with-no-data and error cases. Include sIcon only for success/warning/info scenarios.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Example: extension controller snippet handling multiple cards robustly
getCustomMessage: function (oResponse, sCardId) {
  // Ensure parameters exist
  var bSuccess = !!(oResponse && oResponse.getParameters && oResponse.getParameters().success);

  switch (sCardId) {
    case "card001":
      if (bSuccess) {
        // Success with no data: custom message + icon
        return {
          sMessage: "Card 001: No data available",
          sIcon: "sap-icon://message-information"
        };
      } else {
        // Error: custom message (default error icon will be used)
        return {
          sMessage: "Card 001: Failed to load data"
        };
      }

    case "card002":
      if (bSuccess) {
        return {
          sMessage: "Card 002: Operation completed successfully",
          sIcon: "sap-icon://accept"
        };
      } else {
        return {
          sMessage: "Card 002: An error occurred"
        };
      }

    default:
      // Do not override messages for other cards
      return undefined;
  }
}
```
--------------------------------

**TITLE**: Configure Date Fields with a Valid Date Range (OData V4, SAP Fiori elements)

**INTRODUCTION**: Use Org.OData.Validation.V1 annotations to restrict Date-type properties to a valid date range so users can only pick valid dates in the date picker. This applies to SAP Fiori elements for OData V4. Provide either literal dates or path references to other properties. For CAP CDS use $edmJson date literals or property names. ABAP CDS does not support path-based Validation in annotations; use local XML annotation instead.

**TAGS**: fiori-elements-framework, OData V4, annotations, Validation, Date, SAP, CAP, CDS, XML, edmx

**STEP**: Add the Validation vocabulary reference (XML)

**DESCRIPTION**: Include the Org.OData.Validation.V1 vocabulary reference in your annotation XML so Validation.Minimum and Validation.Maximum terms are available.

**LANGUAGE**: XML

**CODE**:
```xml
<edmx:Reference Uri="https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Validation.V1.xml">
       <edmx:Include Alias="Validation" Namespace="Org.OData.Validation.V1" />
</edmx:Reference>
...
...
<Annotations Target="com.service.Entity/DateProperty">
        <Annotation Term="Validation.Minimum" Date="2024-07-01" />
	<Annotation Term="Validation.Maximum" Date="2024-12-31" />
</Annotations>

```

**STEP**: Configure a fixed date range (XML annotation)

**DESCRIPTION**: Set literal minimum and maximum dates directly in the XML annotation for the Date property so the date picker disables values outside this range.

**LANGUAGE**: XML

**CODE**:
```xml
<edmx:Reference Uri="https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Validation.V1.xml">
       <edmx:Include Alias="Validation" Namespace="Org.OData.Validation.V1" />
</edmx:Reference>
...
...
<Annotations Target="com.service.Entity/DateProperty">
        <Annotation Term="Validation.Minimum" Date="2024-07-01" />
	<Annotation Term="Validation.Maximum" Date="2024-12-31" />
</Annotations>
```

**STEP**: Configure a fixed date range (CAP CDS)

**DESCRIPTION**: Use $edmJson date literals in CAP CDS to set static Validation.Minimum and Validation.Maximum for the Date property.

**LANGUAGE**: CDS

**CODE**:
```cds
DateProperty : 
       Date @(Validation: {
          Minimum: {$edmJson: {$Date: '2024-07-01'}},
          Maximum: {$edmJson: {$Date: '2024-12-31'}}
        });
```

**STEP**: Configure a dynamic date range using path references (XML annotation)

**DESCRIPTION**: Reference other Date properties (e.g., MinimumDate and MaximumDate) using Path in the XML annotation so the valid range is driven by data in the entity.

**LANGUAGE**: XML

**CODE**:
```xml
<edmx:Reference Uri="https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Validation.V1.xml">
       <edmx:Include Alias="Validation" Namespace="Org.OData.Validation.V1" />
</edmx:Reference>
...
...
<Annotations Target="com.service.Entity/DateProperty">
        <Annotation Term="Validation.Minimum" Path="MinimumDate" />
	<Annotation Term="Validation.Maximum" Path="MaximumDate" />
</Annotations>
```

**STEP**: Configure a dynamic date range using path references (CAP CDS)

**DESCRIPTION**: Define MinimumDate and MaximumDate properties on the entity and reference them by name in the Validation annotation for DateProperty.

**LANGUAGE**: CDS

**CODE**:
```cds
MinimumDate: Date;
MaximumDate: Date;
DateProperty: Date @(Validation: {
  Minimum: MinimumDate,
  Maximum: MaximumDate
});
```

**STEP**: Platform limitation and recommendation

**DESCRIPTION**: Note that path-based Validation (using MinimumDate/MaximumDate) is not supported in ABAP CDS annotations. To apply dynamic ranges in ABAP scenarios, use a local XML annotation file (local annotations) instead of ABAP CDS annotations.
--------------------------------

**TITLE**: Configuring Default Filter Values for SAP Fiori elements

**INTRODUCTION**: How to configure default filter values for filter bar fields in SAP Fiori elements using UI.SelectionVariant or Common.FilterDefaultValue annotations (XML, ABAP CDS, CAP CDS). Includes interaction priority between annotation defaults, user variants, navigation context, and manifest settings for OData V2 Analytical List Page.

**TAGS**: fiori-elements, annotations, SelectionVariant, FilterDefaultValue, CDS, XML, manifest, OData

**STEP**: 1 — Use UI.SelectionVariant to set default filter values

**DESCRIPTION**: Add a UI.SelectionVariant annotation (local XML or CDS) to define default parameter and filter values. Use SelectionVariant for complex ranges and multi-value filters. If you configure SelectionVariant in the manifest, the framework will use it as the standard variant. Note: SelectionOption/SelectOptions is not supported in ABAP CDS — use local XML for range-based filter defaults when using ABAP CDS.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.SelectionVariant" Qualifier="Default">
    <Record>
        <PropertyValue Property="Parameters">
            <Collection>
                <Record Type="UI.Parameter">
                    <PropertyValue Property="PropertyName" PropertyPath="P_CompanyCode" />
                    <PropertyValue Property="PropertyValue" String="EASI" />
                </Record>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="SelectOptions">
            <Collection>
                <Record Type="UI.SelectOptionType">
                    <PropertyValue Property="PropertyName" PropertyPath="Customer"/>
                    <PropertyValue Property="Ranges">
                        <Collection> 
                            <Record Type="UI.SelectionRangeType">
                                <PropertyValue EnumMember="UI.SelectionRangeSignType/I" Property="Sign"/>
                                <PropertyValue EnumMember="UI.SelectionRangeOptionType/EQ" Property="Option"/>
                                <PropertyValue Property="Low" String="ABC"/>
                            </Record>
                        </Collection>
                    </PropertyValue>
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

**LANGUAGE**: ABAP CDS

**CODE**:
```
@UI.selectionVariant: [
  {
    qualifier: 'SVForQuantity',
    parameters: [{name: 'PropertyName', value: 'P_CompanyCurrency' },{ name: 'PropertyValue', value: 'EASI'}]
  }
]
```

**LANGUAGE**: CAP CDS

**CODE**:
```
UI.SelectionVariant #Default : {
    Parameters : [
        {
            $Type : 'UI.Parameter',
            PropertyName : P_CompanyCode,
            PropertyValue : 'EASI'
        }
    ],
    SelectOptions : [
        {
            $Type : 'UI.SelectOptionType',
            PropertyName : Customer,
            Ranges : [
                {
                    $Type : 'UI.SelectionRangeType',
                    Sign : #I,
                    Option : #EQ,
                    Low : 'ABC'
                }
            ]
        }
    ]
}
```

**STEP**: 2 — Use Common.FilterDefaultValue for single-value defaults

**DESCRIPTION**: Use Common.FilterDefaultValue when you only need a single static default value on a filter field. This annotation does not support complex expressions (e.g., "startsWith") or multi-value logic (e.g., Status = "A" or "B"). If a SelectionVariant is present, SelectionVariant takes precedence and Common.FilterDefaultValue is ignored for those filters.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="STTA_PROD_MAN.STTA_C_MP_ProductType/Supplier">
    <Annotation Term="Common.FilterDefaultValue" String="100000047"/>
</Annotations>
```

**LANGUAGE**: ABAP CDS

**CODE**:
```
@Consumption.filter.defaultValue: '100000047'
Supplier;
```

**LANGUAGE**: CAP CDS

**CODE**:
```
annotate STTA_PROD_MAN.STTA_C_MP_ProductType with {
    @Common.FilterDefaultValue : '100000047'
    Supplier
};
```

**STEP**: 3 — Manifest setting for Analytical List Page (OData V2)

**DESCRIPTION**: For SAP Fiori elements Analytical List Page (OData V2), enable consideration of filter defaults from SelectionVariant by setting filterDefaultsFromSelectionVariant to true in the component/page settings of manifest.json.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui5": {
    "models": { /* ... */ }
  },
  "sap.ui.generic.app": {
    "pages": [
      {
        "component": {
          "name": "sap.suite.ui.generic.template.AnalyticalListPage",
          "settings": {
            "filterDefaultsFromSelectionVariant": true
          }
        }
      }
    ]
  }
}
```

**STEP**: 4 — Priority: combining values from multiple sources

**DESCRIPTION**: When multiple sources provide values for a filter field (navigation context, user-defined variant, standard variant + annotations, FLP user defaults), the framework evaluates them in this priority order and with these rules:

- Navigation context
  - Overrides everything; navigation context is applied. (Navigation context includes FLP tile target mapping configuration / navigation source and target mapping default values.)
  - Filter values applied by annotation/variant are cleared and overwritten by incoming navigation context.

- User-defined default variant (not equal to standard variant, and no navigation context)
  - Overrides everything including FLP user default values.

- Standard variant (no navigation context) combined with annotation values (UI.SelectionVariant or Common.FilterDefaultValue)
  - Merge logic with FLP user default values:
    1. If only FLP user default values exist for a field (no annotation values) → retain FLP values.
    2. If only annotation values exist (no FLP values) → retain annotation values.
    3. If both FLP user default values and annotation values exist → only FLP user default values are considered.
- Tip: FLP user default values mark the standard variant as dirty (unlike annotation/manifest defaults).

**LANGUAGE**: text

**CODE**:
```
Priority summary:
1) Navigation context (highest) — overrides
2) User-defined default variant — overrides everything (if present and no navigation context)
3) Standard variant + annotations — merged with FLP user defaults per rules above
```

**STEP**: 5 — Additional rules, restrictions, and recommendations

**DESCRIPTION**: Important operational details to preserve when implementing default filter values.

**LANGUAGE**: text

**CODE**:
```
- Default values from annotations:
  - Applied only on application load and only when the application is launched with a standard variant.
  - Do not affect visibility of filter fields.
  - Are cleared/overwritten by incoming navigation context.

- Date values:
  - Use ISO format YYYY-MM-DD for date default values.

- DisplayCurrency:
  - Default values for DisplayCurrency can also come from SAP Fiori launchpad (FLP). Handle FLP-sourced defaults accordingly.

- ABAP CDS limitation:
  - SelectionOption / SelectOptions (range/multi-value) is not supported in ABAP CDS annotations. Use local XML annotations if you need range/selectOptions.

- OData V4 Analytical List Page restriction:
  - You cannot define default values for filter fields using UI.SelectionVariant in Analytical List Page-based applications for OData V4.
```
--------------------------------

**TITLE**: Configure Default Visualizations, Sort Order, and Filter Defaults (UI.SelectionPresentationVariant, UI.PresentationVariant, UI.SelectionVariant)

**INTRODUCTION**: Configure default UI behavior for List Reports and Analytical/List Pages in SAP Fiori elements by using UI.SelectionPresentationVariant (ties UI.SelectionVariant and UI.PresentationVariant), UI.PresentationVariant (visualizations, sort, MaxItems, RequestAtLeast), UI.SelectionVariant (default filter values), UI.LineItem and UI.Chart annotations. Use manifest.json settings to point the app to a default (qualified) annotation. The examples below show XML, ABAP CDS, and CAP CDS formats.

**TAGS**: fiori-elements-framework, annotations, SelectionPresentationVariant, PresentationVariant, SelectionVariant, LineItem, Chart, manifest, odata-v2, odata-v4

STEP: Define UI.SelectionPresentationVariant (qualifier) linking SelectionVariant and PresentationVariant

DESCRIPTION: Create a SelectionPresentationVariant record that references a SelectionVariant and a PresentationVariant by qualifier. This defines the default filter values and the default visualization (sort, visualizations). Ensure the referenced SelectionVariant and PresentationVariant exist and paths are correct.

LANGUAGE: XML
CODE:
```xml
<Annotations Target="self.BookingType">
    ...
    <Annotation Term="UI.SelectionPresentationVariant" Qualifier="BookingSPV">
        <Record>
            <PropertyValue Property="Text" String="Default"/>
            <PropertyValue Property="SelectionVariant" Path="@UI.SelectionVariant#BookingSV"/>
            <PropertyValue Property="PresentationVariant" Path="@UI.PresentationVariant#BookingPV"/>
        </Record>
    </Annotation>
    ...
</Annotations>
```

LANGUAGE: ABAP CDS
CODE:
```abap
//@Scope: [ENTITY] ("Booking")
@UI: {
    selectionPresentationVariant: [ {
        qualifier: 'BookingSPV',
        selectionVariantQualifier: 'BookingSV',
        presentationVariantQualifier: 'BookingPV'
    } ],
    ...
}
```

LANGUAGE: CAP CDS
CODE:
```cds
annotate TravelService.Travel with @UI: {
    SelectionPresentationVariant #BookingSPV : {
        SelectionVariant : ![@UI.SelectionVariant#BookingSV],
        PresentationVariant : ![@UI.PresentationVariant#BookingPV]
    }
    ...
}
```

STEP: Define UI.SelectionVariant (default filter values)

DESCRIPTION: Use SelectionVariant to define default filter values (SelectOptions / Ranges). Add this annotation and reference it from SelectionPresentationVariant or use as unqualified default.

LANGUAGE: XML
CODE:
```xml
<Annotations Target="self.BookingType">
    ...
    <Annotation Term="UI.SelectionVariant" Qualifier="BookingSV">
        <Record>
            <PropertyValue Property="SelectOptions">
                <Collection>
                    <Record Type="UI.SelectOptionType">
                        <PropertyValue Property="PropertyName" PropertyPath="BookingStatus"/>
                        <PropertyValue Property="Ranges">
                            <Collection>
                                <Record Type="UI.SelectionRangeType">
                                    <PropertyValue Property="Sign" EnumMember="UI.SelectionRangeSignType/I"/>
                                    <PropertyValue Property="Option" EnumMember="UI.SelectionRangeOptionType/EQ"/>
                                    <PropertyValue Property="Low" String="N"/>
                                </Record>
                            </Collection>
                        </PropertyValue>
                    </Record>
                </Collection>
            </PropertyValue>
        </Record>
    </Annotation>
    ...
</Annotations>
```

LANGUAGE: ABAP CDS
CODE:
```abap
//@Scope: [ENTITY] (e.g. "Booking")
@UI: {
    selectionVariant: [ { 
        qualifier: 'BookingSV',
        filter: 'BookingStatus EQ "N"'
    } ]
}
```

LANGUAGE: CAP CDS
CODE:
```cds
annotate TravelService.Travel with @UI: {
    SelectionVariant #BookingSV: {
        SelectOptions: [ {
            $Type       : 'UI.SelectOptionType',
            PropertyName: BookingStatus,
            Ranges      : [ {
                $Type : 'UI.SelectionRangeType',
                Sign  : #I,
                Option: #EQ,
                Low   : 'N'
            } ]
        } ]
    },
    ...
}
```

STEP: Define UI.PresentationVariant (visualizations, SortOrder, MaxItems)

DESCRIPTION: Use PresentationVariant to define default visualizations (LineItem/Chart), sort order, MaxItems, and other visualization properties. Reference this PV from SelectionPresentationVariant. If PV is missing while SPV points to it, the app throws an error—ensure correct path.

LANGUAGE: XML (OData V4)
CODE:
```xml
<Annotations Target="self.BookingType">
    ...
    <Annotation Term="UI.PresentationVariant" Qualifier="BookingPV">
        <Record>
            <PropertyValue Property="Text" String="Default"/>
            <PropertyValue Property="SortOrder">
                <Collection>
                    <Record Type="Common.SortOrderType">
                        <PropertyValue Property="Property" PropertyPath="BookingID"/>
                        <PropertyValue Property="Descending" Bool="true"/>
                    </Record>
 
                </Collection>
            </PropertyValue>
            <PropertyValue Property="Visualizations">
                <Collection>
                    <AnnotationPath>@UI.LineItem</AnnotationPath>
                </Collection>
            </PropertyValue>
        </Record>
    </Annotation>
    ...
</Annotations>
```

LANGUAGE: ABAP CDS
CODE:
```abap
//@Scope: [ENTITY] ("Booking")
@UI: {
    presentationVariant: [ { 
        qualifier: 'BookingPV',
        sortOrder: [ {
            by: 'BookingID',
            direction: #DESC
        } ],
        visualizations: [ {
            type: #AS_LINEITEM
        } ]
   } ]
}
```

LANGUAGE: CAP CDS
CODE:
```cds
annotate TravelService.Travel with @UI: {
    PresentationVariant #BookingPV: {
        SortOrder : [
            {
                $Type : 'Common.SortOrderType',
                Property : BookingID,
                Descending : true
            }
        ],
        Visualizations : [
            '@UI.LineItem'
        ]
    },
    ...
    ...
}
```

STEP: Define UI.Chart (chart annotation for ALP/main chart or multiple views)

DESCRIPTION: Define chart title, chart type, dimensions and measures. UI.Chart is applicable to ALP main chart and table-multiple-view scenarios.

LANGUAGE: XML
CODE:
```xml
<Annotations Target="STTA_PROD_MAN.STTA_C_MP_ProductSalesDataType">
   <Annotation Term="UI.Chart">
      <Record>
         <PropertyValue Property="Title" String="Test Chart"/>
         <PropertyValue Property="ChartType" EnumMember="UI.ChartType/Column"/>
         <PropertyValue Property="Dimensions">
            <Collection>
               <PropertyPath>DeliveryMonth</PropertyPath>
            </Collection>
         </PropertyValue> 
         <PropertyValue Property="Measures">
            <Collection>
               <PropertyPath>Revenue</PropertyPath>
            </Collection>
         </PropertyValue>
      </Record>
   </Annotation>
</Annotations>
```

LANGUAGE: ABAP CDS
CODE:
```abap
@UI.Chart: [
  {
    title: 'Test Chart',
    chartType: #COLUMN,
    dimensions: [
      'DELIVERYMONTH'
    ],
    measures: [
      'REVENUE'
    ]
  }
]
annotate view STTA_C_MP_PRODUCTSALESDATA with {

}
```

LANGUAGE: CAP CDS
CODE:
```cds
annotate STTA_PROD_MAN.STTA_C_MP_ProductSalesDataType @(
  UI.Chart : {
    Title : 'Test Chart',
    ChartType : #Column,
    Dimensions : [
        DeliveryMonth
    ],
    Measures : [
        Revenue
    ]
  }
);
```

STEP: Define UI.LineItem (table columns and importance/criticality)

DESCRIPTION: Use UI.LineItem to define which properties show in table rows, their order (position), importance, text arrangements, and criticality mapping.

LANGUAGE: XML
CODE:
```xml
<Annotations Target="self.Container/Booking">

    <Annotation Term="UI.LineItem">
        <Collection>
            <Record Type="UI.DataField">
                <PropertyValue Property="Value" Path="TravelID"/>
                <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
            </Record>
            <Record Type="UI.DataField">
                <PropertyValue Property="Value" Path="BookingID"/>
                <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
            </Record>
            <Record Type="UI.DataField">
                <PropertyValue Property="Value" Path="BookingDate"/>
                <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
            </Record>
            <Record Type="UI.DataField">
                <PropertyValue Property="Value" Path="CustomerID"/>
                <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
            </Record>
            <Record Type="UI.DataField">
                <PropertyValue Property="Value" Path="CarrierID"/>
                <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
            </Record>
            <Record Type="UI.DataField">
                <PropertyValue Property="Value" Path="ConnectionID"/>
                <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
            </Record>
            <Record Type="UI.DataField">
                <PropertyValue Property="Value" Path="FlightDate"/>
                <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
            </Record>
            <Record Type="UI.DataField">
                <PropertyValue Property="Value" Path="FlightPrice"/>
                <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
            </Record>
            <Record Type="UI.DataField">
                <PropertyValue Property="Criticality" Path="BookingStatusIndicator"/>
                <PropertyValue Property="Value" Path="BookingStatus"/>
                <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
            </Record>
        </Collection>
    </Annotation>
    ...
</Annotations>
```

LANGUAGE: ABAP CDS
CODE:
```abap
//@Scope: [VIEW] ("BOOKING")
annotate view VIEWNAME with {
    @UI.lineItem: [ {
        position: 10 ,
        importance: #HIGH
    } ]
    TravelID;
    
    @UI.lineItem: [ {
        position: 20 ,
        importance: #HIGH
    } ]
    BookingID;
    
    @UI.lineItem: [ {
        position: 30 ,
        importance: #HIGH
    } ]
    BookingDate;
    
    @UI.lineItem: [ {
        position: 40 ,
        importance: #HIGH
    } ]
    @UI.textArrangement: #TEXT_FIRST
    CustomerID;
    
    @UI.lineItem: [ {
        position: 50 ,
        importance: #HIGH
    } ]
    CarrierID;
    
    @UI.lineItem: [ {
        position: 60 ,
        importance: #HIGH
    } ]
    ConnectionID;
    
    @UI.lineItem: [ {
        position: 70 ,
        importance: #HIGH
    } ]
    FlightDate;
    
    @UI.lineItem: [ {
        position: 80 ,
        importance: #HIGH
    } ]
    FlightPrice;
    
    @UI.lineItem:       [ {
        position: 90,
        criticality: 'BookingStatusIndicator',
        importance: #HIGH
    } ]
    BookingStatus;
}
```

LANGUAGE: CAP CDS
CODE:
```cds
UI.LineItem : [
    {
        $Type : 'UI.DataField',
        Value : TravelID,
        ![@UI.Importance] : #High
    },
    {
        $Type : 'UI.DataField',
        Value : BookingID,
        ![@UI.Importance] : #High
    },
    {
        $Type : 'UI.DataField',
        Value : BookingDate,
        ![@UI.Importance] : #High
    },
    {
        $Type : 'UI.DataField',
        Value : CustomerID,
        ![@UI.Importance] : #High
    },
    {
        $Type : 'UI.DataField',
        Value : CarrierID,
        ![@UI.Importance] : #High
    },
    {
        $Type : 'UI.DataField',
        Value : ConnectionID,
        ![@UI.Importance] : #High
    },
    {
        $Type : 'UI.DataField',
        Value : FlightDate,
        ![@UI.Importance] : #High
    },
    {
        $Type : 'UI.DataField',
        Value : FlightPrice,
        ![@UI.Importance] : #High
    },
    {
        $Type       : 'UI.DataField',
        Value       : BookingStatus,
        Criticality : BookingStatusIndicator,
        ![@UI.Importance] : #High
    }
]
```

STEP: Manifest setting for default annotation (OData V2: annotationPath)

DESCRIPTION: To force the app to use a specific SelectionPresentationVariant, PresentationVariant, or SelectionVariant at startup, specify annotationPath in manifest.json for the ListReport generic template. This example shows V2 manifest format. annotationPath can point to SelectionPresentationVariant#Qualifier, PresentationVariant#Qualifier, or SelectionVariant#Qualifier. Note: if you point annotationPath to SelectionPresentationVariant, ensure the referenced PresentationVariant exists or the app will fail to load.

LANGUAGE: JSON
CODE:
```json
"component": {
     "name": "sap.suite.ui.generic.template.ListReport",
     "list": true,
     "settings": {
          "annotationPath": "com.sap.vocabularies.UI.v1.SelectionPresentationVariant#DefaultSPV" // This can also point to PresentationVariant/SelectionVariant instead of SelectionPresentationVariant
     }
}
```

STEP: Manifest setting for default annotation (OData V4: defaultTemplateAnnotationPath)

DESCRIPTION: For SAP Fiori elements V4 (sap.fe.templates.ListReport), set defaultTemplateAnnotationPath under the target options to point to a SelectionPresentationVariant. For V4, defaultTemplateAnnotationPath must reference a SelectionPresentationVariant (not just PresentationVariant or SelectionVariant).

LANGUAGE: JSON
CODE:
```json
"targets": {
    "SalesOrderManageList": {
        "type": "Component",
        "id": "SalesOrderManageList",
        "name": "sap.fe.templates.ListReport",
        "options": {
            "settings": {
                "contextPath": "/SalesOrderManage",
                "defaultTemplateAnnotationPath": "com.sap.vocabularies.UI.v1.SelectionPresentationVariant#SPVPath", 
                 .....
                 .....
            }
        }
    }
}
```

STEP: Inline SelectionVariant/PresentationVariant inside SelectionPresentationVariant (XML + CAP)

DESCRIPTION: You can inline a SelectionVariant (and reference an unqualified PresentationVariant) inside a SelectionPresentationVariant. ABAP CDS does not support inline definitions—use local XML in that case.

LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.SelectionPresentationVariant" Qualifier="OpenSPVWithPVPath">
   <Record>
    <PropertyValue Property="Text" String="Open">
    </PropertyValue>
    <PropertyValue Property="SelectionVariant">
        <Record Type="UI.SelectionVariantType">
            <PropertyValue Property="Text" String="Open">
            </PropertyValue>
            <PropertyValue Property="SelectOptions">
                <Collection>
                    <Record Type="UI.SelectOptionType">
                        <PropertyValue Property="PropertyName" PropertyPath="OverallSDProcessStatus" />
                        <PropertyValue Property="Ranges">
                            <Collection>
                               <Record Type="UI.SelectionRangeType">
                                   <PropertyValue Property="Sign" EnumMember="UI.SelectionRangeSignType/I" />
                                   <PropertyValue Property="Option" EnumMember="UI.SelectionRangeOptionType/EQ" />
                                   <PropertyValue Property="Low" String="A" />
                                </Record>
                            </Collection>
                        </PropertyValue>
                     </Record>
                </Collection>
            </PropertyValue>
        </Record>
     </PropertyValue>
     <PropertyValue Property="PresentationVariant" Path="@UI.PresentationVariant" />
   </Record>
</Annotation>

 

<Annotation Term="UI.PresentationVariant">
    <Record>
        <PropertyValue Property="MaxItems" Int="2" />
        <PropertyValue Property="SortOrder">
            <Collection>
                <Record Type="Common.SortOrderType">
                  <PropertyValue Property="Property" PropertyPath="ID" />
                </Record>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="Visualizations">
            <Collection>
                <AnnotationPath>@UI.LineItem</AnnotationPath>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

LANGUAGE: CAP CDS
CODE:
```cds
UI.SelectionPresentationVariant #OpenSPVWithPVPath           : {
        Text                : 'Open',
        SelectionVariant    : {
            Text          : 'Open',
            SelectOptions : [{
                PropertyName : OverallSDProcessStatus,
                Ranges       : [{
                      Sign : #I,
                    Option : #EQ,
                   Low    : 'A'
                }]
            }]
        },
        PresentationVariant : ![@UI.PresentationVariant]
    },

UI.PresentationVariant                             : {
        MaxItems       : 2,
        SortOrder      : [{Property : ID}],
        Visualizations : ['@UI.LineItem']
    }
```

STEP: Request additional properties for backend read (RequestAtLeast)

DESCRIPTION: Use PresentationVariant.RequestAtLeast to ensure additional properties are requested from the backend even when not displayed in the visualization. Useful to avoid extra round-trips when personalization or client-side needs require them.

LANGUAGE: XML
CODE:
```xml
<Annotations xmlns=http://docs.oasis-open.org/odata/ns/edm Target="ZFAR_CUSTOMER_LINE_ITEMS2_SRV.Item">
    <Annotation Term="com.sap.vocabularies.UI.v1.PresentationVariant">
        <Record>
            <PropertyValue Property="Visualizations">
                <Collection>
                    <AnnotationPath>@UI.LineItem</AnnotationPath>
                </Collection>
            </PropertyValue>
            <PropertyValue Property="RequestAtLeast">
                <Collection>
                    <PropertyPath>Customer</PropertyPath>
                    <PropertyPath>CompanyCode</PropertyPath>
               </Collection>
            </PropertyValue>
        </Record>
    </Annotation>
</Annotations>
```

LANGUAGE: ABAP CDS
CODE:
```abap
@UI.PresentationVariant: [
  {
    requestAtLeast: [
      'CUSTOMER',
      'COMPANYCODE'
    ],
    visualizations: [{type: #AS_LINEITEM }]
  }
]
annotate view ITEM with {
 
}
```

LANGUAGE: CAP CDS
CODE:
```cds
annotate ZFAR_CUSTOMER_LINE_ITEMS2_SRV.Item @(
  com.sap.vocabularies.UI.v1.PresentationVariant : {
    Visualizations : [
        '@UI.LineItem'
    ],
    RequestAtLeast : [
        Customer,
        CompanyCode
    ]
  }
);
```

STEP: Configure default SortOrder

DESCRIPTION: Define SortOrder entries in PresentationVariant to set default column sort direction(s). For amount fields with currency/unit, the sort first groups by currency/unit then by amount.

LANGUAGE: XML
CODE:
```xml
<Annotations xmlns="http://docs.oasis-open.org/odata/ns/edm" Target="ZFAR_CUSTOMER_LINE_ITEMS2_SRV.Item">
    <Annotation Term="com.sap.vocabularies.UI.v1.PresentationVariant">
        <Record>
            <PropertyValue Property="Visualizations">
                <Collection>
                    <AnnotationPath>@UI.LineItem</AnnotationPath>
                </Collection>
            </PropertyValue>
            <PropertyValue Property="SortOrder">
                <Collection>
                    <Record>
                        <PropertyValue Property="Property" PropertyPath="CompanyCode"/>
                        <PropertyValue Property="Descending" Bool="true"/>
                    </Record>
                    <Record>
                        <PropertyValue Property="Property" PropertyPath="Customer"/>
                    </Record>
                </Collection>
            </PropertyValue>
        </Record>
    </Annotation>
</Annotations>
```

LANGUAGE: ABAP CDS
CODE:
```abap
@UI.PresentationVariant: [
  {
    
    sortOrder: [
      {
        by: 'COMPANYCODE',
        direction: #DESC
      },
      {
        by: 'CUSTOMER'
      }
    ],
    visualizations: [{type: #AS_LINEITEM }]
  }
]
annotate view ITEM with {

}
```

LANGUAGE: CAP CDS
CODE:
```cds
annotate ZFAR_CUSTOMER_LINE_ITEMS2_SRV.Item @(
  com.sap.vocabularies.UI.v1.PresentationVariant : {
    Visualizations : [
        '@UI.LineItem'
    ],
    
    SortOrder : [
        {
            Property : CompanyCode,
            Descending : true
        },
        {
            Property : Customer
        }
    ]
  }
);
```

STEP: Configure MaxItems (number of rows loaded initially)

DESCRIPTION: Use PresentationVariant.MaxItems to set how many rows are initially loaded into the table. This controls initial data volume.

LANGUAGE: XML
CODE:
```xml
<Annotations xmlns=http://docs.oasis-open.org/odata/ns/edm Target="ZFAR_CUSTOMER_LINE_ITEMS2_SRV.Item">
    <Annotation Term="com.sap.vocabularies.UI.v1.PresentationVariant">
        <Record>
            <PropertyValue Property="Visualizations">
                <Collection>
                    <AnnotationPath>@UI.LineItem</AnnotationPath>
                </Collection>
            </PropertyValue>
            <PropertyValue Property="MaxItems" Int="50" />
        </Record>
    </Annotation>
</Annotations>
```

LANGUAGE: ABAP CDS
CODE:
```abap
@UI.PresentationVariant: [
  {
    maxItems : 50,
    visualizations: [{type: #AS_LINEITEM }]
  }
]
annotate view ITEM with {

}
```

LANGUAGE: CAP CDS
CODE:
```cds
annotate ZFAR_CUSTOMER_LINE_ITEMS2_SRV.Item @(
  com.sap.vocabularies.UI.v1.PresentationVariant : {
    Visualizations : [
        '@UI.LineItem'
    ],
    MaxItems : 50
  }
);
```

STEP: Manifest behavior when annotationPath points to PresentationVariant or SelectionVariant (OData V2 details)

DESCRIPTION: If manifest annotationPath references a PresentationVariant: only visualization (PV) is applied—SelectionVariant defaults are not applied. If annotationPath references a SelectionVariant: default filters are applied; visualization falls back to unqualified PresentationVariant or UI.LineItem/UI.Chart.

LANGUAGE: JSON
CODE:
```json
"component": {
     "name": "sap.suite.ui.generic.template.ListReport",
     "list": true,
     "settings": {
          "annotationPath": "com.sap.vocabularies.UI.v1.SelectionPresentationVariant#DefaultSPV" // This can also point to PresentationVariant/SelectionVariant instead of SelectionPresentationVariant
     }
}
```

STEP: Notes and fallbacks (action points for implementers)

DESCRIPTION: Action-oriented rules to follow:
- Always verify that if you point manifest to SelectionPresentationVariant#Qualifier, the referenced PresentationVariant exists—otherwise the app fails to load.
- If no manifest annotation path is provided, fallback order is:
  1) unqualified UI.SelectionPresentationVariant
  2) unqualified UI.SelectionVariant and UI.PresentationVariant
  3) UI.LineItem or UI.Chart (fallback visualization)
  4) empty table/chart (user can personalize to render desired view)
- For SAP Fiori elements V4 ALP flavor, use ALP-specific configuration (analytical list page uses different descriptor settings). For V4 ListReport use defaultTemplateAnnotationPath pointing to a SelectionPresentationVariant.
- ABAP CDS has no inline SelectionPresentationVariant syntax—use local XML annotations when you need inline definitions.

LANGUAGE: Text
CODE:
```text
- Ensure correct annotation paths and qualifiers to avoid startup errors.
- Fallback resolution order if manifest setting is omitted:
  1) unqualified UI.SelectionPresentationVariant
  2) unqualified UI.SelectionVariant and UI.PresentationVariant
  3) UI.LineItem or UI.Chart
  4) empty control (user personalization possible)
- For sorting amounts with currency/UoM: sort by currency/UoM first, then by amount.
- ABAP CDS: no inline SelectionPresentationVariant support; use XML annotations.
```

STEP: Reference: Default filter values

DESCRIPTION: Use UI.SelectionVariant for default filter values. For actionable examples and detailed behavior when merging selection defaults and user input, consult your project-specific "Configuring Default Filter Values" documentation or follow the SelectionVariant examples above.

LANGUAGE: Text
CODE:
```text
See the SelectionVariant examples in this document for inline and qualified definitions to set default filter values.
```
--------------------------------

**TITLE**: Configure sap.ui5 Dependencies to Include Required SAPUI5 Libraries

**INTRODUCTION**: Define SAPUI5 library dependencies in the "sap.ui5" section to limit loaded libraries and improve application loading time. For Overview page application instances, include the sap.ovp library and specify minimum versions.

**TAGS**: fiori-elements-framework, sap.ui5, sap.ovp, dependencies, performance

**STEP**: Add required SAPUI5 libraries to the sap.ui5 dependencies section

**DESCRIPTION**: Edit your application's manifest (or relevant configuration) to include a "dependencies" block under "sap.ui5" that specifies the minimum UI5 version and the libraries your app depends on. For Overview page applications, add the "sap.ovp" library with a minVersion to ensure the runtime loads the required library and optimizes loading.

**LANGUAGE**: JSON

**CODE**:
```json
"sap.ui5": {
    ...
    "dependencies": {
        "minUI5Version": "1.32.0",
        "libs": {
            "sap.ovp": {
                "minVersion": "1.32.0"
            }
        }
    },
    ...
}
```
--------------------------------

**TITLE**: Configuring External Navigation (Fiori Elements)

**INTRODUCTION**: Short guide to configure outbound (navigation from this app) and inbound (navigation to this app) external navigation for Fiori Elements apps. Includes manifest.json fragments and runtime call examples used by code generators and automation to produce correct navigation configuration.

**TAGS**: fiori-elements-framework, navigation, cross-application-navigation, manifest.json, sap.app, outbound, inbound, sap.ushell

**STEP**: 1 — Outbound Navigation (define targets this app will call)

**DESCRIPTION**: Add outbound intents (targets) to your app manifest under sap.app -> crossNavigation -> outbounds. Each outbound defines the semanticObject/action, optional parameters (signature), a user-facing title, and a resolutionResult describing how the target should be launched (URL or SAPUI5 component). Use these entries so runtime navigation APIs (CrossApplicationNavigation) can resolve and call other apps.

File reference: navigation-from-an-app-outbound-navigation-d782acf.md

- Where to edit: manifest.json (project root)
- Key location: sap.app.crossNavigation.outbounds
- Typical use: programmatic navigation with CrossApplicationNavigation service (see next step for usage snippet)

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.app": {
    "crossNavigation": {
      "outbounds": {
        "toOrderDisplay": {
          "semanticObject": "Order",
          "action": "display",
          "title": "Display Order",
          "signature": {
            "parameters": {
              "orderId": {}
            }
          },
          "resolutionResult": {
            "applicationType": "URL",
            "url": "#/Orders/{orderId}"
          }
        },
        "toExternalApp": {
          "semanticObject": "Invoice",
          "action": "manage",
          "title": "Manage Invoice",
          "signature": {
            "parameters": {
              "invoiceId": {}
            }
          },
          "resolutionResult": {
            "applicationType": "SAPUI5",
            "additionalInformation": "SAPUI5.Component=com.company.external.invoice",
            "url": "/resources/com/company/external/invoice"
          }
        }
      }
    }
  }
}
```

**STEP**: 2 — Call an Outbound Target at Runtime

**DESCRIPTION**: Use the CrossApplicationNavigation service to navigate to an outbound target. Provide target semanticObject/action and params. This snippet demonstrates how to call an outbound defined in manifest.json.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Example: Navigate to the outbound "toOrderDisplay" defined in manifest
const navService = sap.ushell.Container.getService("CrossApplicationNavigation");

// target as semantic object + action, params values must be arrays
navService.toExternal({
  target: {
    semanticObject: "Order",
    action: "display"
  },
  params: {
    orderId: ["12345"]
  }
});
```

**STEP**: 3 — Inbound Navigation (declare intents this app accepts)

**DESCRIPTION**: Declare inbound intents in your manifest so other apps (or the FLP) can navigate into this app. Inbounds define the semanticObject/action this app implements, required or optional parameters, title, and resolutionResult describing this app's component (applicationType SAPUI5 with additionalInformation specifying the SAPUI5 component). This is required for intent-based navigation and for the FLP to resolve the app.

File reference: navigation-to-an-app-inbound-navigation-c337d8b.md

- Where to edit: manifest.json (project root)
- Key location: sap.app.crossNavigation.inbounds
- Typical use: ensure semanticObject/action names and required parameters match what calling apps expect

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.app": {
    "crossNavigation": {
      "inbounds": {
        "Order-display": {
          "semanticObject": "Order",
          "action": "display",
          "title": "Order Display",
          "signature": {
            "parameters": {
              "orderId": {
                "required": true
              },
              "showEdit": {}
            }
          },
          "resolutionResult": {
            "applicationType": "SAPUI5",
            "additionalInformation": "SAPUI5.Component=com.company.app.order",
            "url": ""
          }
        },
        "Invoice-manage": {
          "semanticObject": "Invoice",
          "action": "manage",
          "title": "Manage Invoice",
          "signature": {
            "parameters": {
              "invoiceId": {
                "required": true
              }
            }
          },
          "resolutionResult": {
            "applicationType": "SAPUI5",
            "additionalInformation": "SAPUI5.Component=com.company.app.invoice",
            "url": ""
          }
        }
      }
    }
  }
}
```

**STEP**: 4 — Handle Inbound Parameters in the App

**DESCRIPTION**: Map inbound parameters (semanticObject/action parameters) to your component/app routing or startup logic. In UI5 apps you typically read the URL parameters or the startup parameters provided by the ComponentData. Use these to route to appropriate pages or to execute initialization logic.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Example in Component.js or a controller: read startup parameters from ComponentData
sap.ui.define(["sap/ui/core/UIComponent"], function(UIComponent) {
  return UIComponent.extend("com.company.app.order.Component", {
    init: function() {
      UIComponent.prototype.init.apply(this, arguments);

      const startupParameters = this.getComponentData() && this.getComponentData().startupParameters;
      if (startupParameters && startupParameters.orderId) {
        const orderId = startupParameters.orderId[0]; // values are arrays
        // route or initialize view based on orderId
        this.getRouter().navTo("orderDetail", { orderId: orderId }, false);
      }
    }
  });
});
```

**STEP**: 5 — Validation and Best Practices

**DESCRIPTION**: Ensure:
- manifest.json entries are under sap.app.crossNavigation.inbounds and .outbounds
- semanticObject/action names are consistent across calling and called apps
- parameters defined in signatures match required usage and are typed if needed
- resolutionResult for SAPUI5 apps includes additionalInformation with SAPUI5.Component
- Use CrossApplicationNavigation.toExternal with params as arrays
- Test navigation in FLP or local sandbox to verify resolution and parameter passing

**LANGUAGE**: N/A

**CODE**:
```text
See detailed guides:
- Navigation from an App (Outbound): navigation-from-an-app-outbound-navigation-d782acf.md
- Navigation to an App (Inbound): navigation-to-an-app-inbound-navigation-c337d8b.md
```
--------------------------------

**TITLE**: Configuring Fields in SAP Fiori elements (OData V4)

**INTRODUCTION**: Practical, code-focused guidance for configuring field behavior and presentation in SAP Fiori elements (OData V4). Covers: placeholders for input fields, date/time formatting, currency and unit-of-measure validation, and Edm.Guid validation. Use these annotations and examples directly in XML annotations, ABAP CDS, or CAP CDS where shown.

**TAGS**: fiori-elements-framework, OData V4, annotations, UI.Placeholder, DateTimeStyle, isCurrency, isUnit, Edm.Guid, XML, ABAP CDS, CAP CDS

STEP: 1 — Applicability note

DESCRIPTION: This topic applies only to SAP Fiori elements for OData V4. Use the annotations and examples below when implementing fields in OData V4-based Fiori elements apps.

LANGUAGE: Text

CODE:
```text
Note: Applicable only to SAP Fiori elements for OData V4.
```

STEP: 2 — Set placeholder text for input fields

DESCRIPTION: Use the UI.Placeholder annotation to define text shown in input fields (sap.m.Input, sap.m.ComboBox) before user entry. Add the annotation to the property target in the annotation XML file.

LANGUAGE: XML

CODE:
```xml
<Annotations Target="sap.fe.manageitems.TechnicalTestingService.LineItems/multiLineTextField">
    <Annotation Term="Common.Label" String="Test Multi Line Text Field"/>
    <Annotation Term="UI.MultiLineText" Bool="true"/>
    <Annotation Term="UI.Placeholder" String="Enter a multi line text"/>
</Annotations>
```

STEP: 3 — Format Date, Time, and DateTime fields using DateTimeStyle

DESCRIPTION: Use the UI.DateTimeStyle annotation to control display format in input and display modes. Values: short, medium, long, full (examples shown). If you need a custom format, supply an LDML pattern (e.g., "yyyy-MM-dd") via the manifest.json pattern property (follow LDML guidelines).

- short: concise date/time (e.g., 7/25/24, 1:11 PM)
- medium: more readable, includes seconds (e.g., Jul 25, 2024, 1:11:51 PM)
- long: includes time zone details (e.g., July 25, 2024 at 1:11:51 PM GMT+2)
- full: full day and time zone name (e.g., Thursday, July 25, 2024 at 1:11:51 PM Central European Summer Time)

LANGUAGE: XML

CODE:
```xml
<edmx:Reference Uri="https://sap.github.io/odata-vocabularies/vocabularies/UI.xml">
        <edmx:Include Namespace="com.sap.vocabularies.UI.v1" Alias="UI"/>
</edmx:Reference>
    
<Annotations Target="SAP__self.TravelType/CreatedAt">
        <Annotation Term="UI.DateTimeStyle" String="short"/>
</Annotations>
```

STEP: 4 — DateTimeStyle samples for CDS / CAP

DESCRIPTION: Use the DateTimeStyle annotation in CDS (CAP / ABAP where available). ABAP CDS: no sample provided in the source; use XML annotation instead. CAP CDS example shows DateTimeStyle set to 'short' for Date, Time, and DateTime properties.

LANGUAGE: CAP CDS

CODE:
```
DatePropertyWithStyle          : Date          @UI: {DateTimeStyle: 'short'};
TimePropertyWithStyle          : Time          @UI: {DateTimeStyle: 'short'};
DateTimePropertyWithStyle.     : DateTime      @UI: {DateTimeStyle: 'short'};
```

STEP: 5 — Use LDML patterns for custom date/time formats

DESCRIPTION: When DateTimeStyle is insufficient, define an LDML pattern to control display format for input and display text. Patterns follow Unicode LDML (e.g., "yyyy-MM-dd" produces 2023-09-24). Provide the pattern in your app's manifest.json where the framework expects field formatting settings.

LANGUAGE: Text

CODE:
```text
Example LDML pattern: "yyyy-MM-dd"  (follow LDML pattern letters per Unicode/SDk documentation)
```

STEP: 6 — Validate currency fields without a related value field (isCurrency)

DESCRIPTION: For currency properties that do not have a linked "value" property, mark them as currency with Common.isCurrency = true in annotations. Examples shown for XML, ABAP CDS, and CAP CDS.

LANGUAGE: XML

CODE:
```xml
<Annotations Target="com.c_salesordermanage_sd.SalesOrderManage/TransactionCurrency">
    <Annotation Term="Common.isCurrency" Bool="true"/>
    ...some more definition of property and/or value help...
</Annotations>
```

LANGUAGE: ABAP CDS

CODE:
```
@Semantics.currencyCode: true 
TransactionCurrency
```

LANGUAGE: CAP CDS

CODE:
```
TransactionCurrency @(
        Common         : {
               IsCurrency : true
        }
  );
```

STEP: 7 — Validate unit-of-measure fields without a related value field (isUnit)

DESCRIPTION: For unit-of-measure (UoM) properties that do not have a linked "value" property, mark them as unit with Common.isUnit = true. Examples shown for XML, ABAP CDS, and CAP CDS.

LANGUAGE: XML

CODE:
```xml
<Annotations Target="com.c_salesordermanage_sd.SalesOrderManage/DocumentUnit">
    <Annotation Term="Common.isUnit" Bool="true"/>
    ...some more definition of property and/or value help...
</Annotations>
```

LANGUAGE: ABAP CDS

CODE:
```
@Semantics.unitOfMeasure: true 
DocumentUnit
```

LANGUAGE: CAP CDS

CODE:
```
DocumentUnit @(
        Common         : {
               IsUnit : true
        }
);
```

STEP: 8 — Edm.Guid properties validation

DESCRIPTION: Validation for Edm.Guid properties is automatically enabled when the property has a value help. Ensure a value help (value list / value help annotation) exists for the Edm.Guid property to enable validation.

LANGUAGE: XML

CODE:
```xml
<!-- Validation is automatically enabled for Edm.Guid properties that have a value help. -->
```
--------------------------------

**TITLE**: Configuring Filter Bars (Fiori elements — List Report & Analytical List Page)

**INTRODUCTION**: Practical, code-focused reference for configuring filter bars in SAP Fiori elements list reports and analytical list pages. Includes required annotations, manifest.json settings, parameterized entity handling, filter restrictions, mandatory/non-filterable fields, tooltips, hiding the filter bar, enabling live mode, and examples for XML, ABAP CDS and CAP CDS.

**TAGS**: filter-bar, ui.selectionfields, manifest.json, liveMode, filter-restrictions, parameterized-entities, sap-fe, odata, annotations, CAP, ABAP, XML, JSON

STEP: 1 — Ensure Service Supports Filtering

DESCRIPTION: Confirm the OData service supports filtering. For V2 set sap-filterable=true; for V4 set Capabilities.Filterable=true. The filter bar is available only if the service advertises filtering capability.

LANGUAGE: Text

CODE:
```text
SAP Fiori elements for OData V2: sap-filterable=true

SAP Fiori elements for OData V4: Capabilities.Filterable=true
```

STEP: 2 — Configure UI.SelectionFields (controls fields shown in filter bar)

DESCRIPTION: Define which properties appear in the filter bar (plus mandatory fields and draft Editing Status). Use one of the annotation formats below depending on your stack.

LANGUAGE: XML

CODE:
```xml

<Annotation Term="UI.SelectionFields">
   <Collection>
     <PropertyPath>SalesOrder</PropertyPath>
     <PropertyPath>SoldToParty</PropertyPath>
     <PropertyPath>OverallSDProcessStatus</PropertyPath>
     <PropertyPath>SalesOrderDate</PropertyPath>
     <PropertyPath>_Item/Material</PropertyPath>
   </Collection>
</Annotation>
```

LANGUAGE: ABAP CDS

CODE:
```
@UI.SelectionField: [{ position: 10 }]
SALESORDER;

@UI.SelectionField: [{ position: 20 }]
SOLDTOPARTY;
 
@UI.SelectionField: [{ position: 30 }]
OVERALLSDPROCESSSTATUS;
 
@UI.SelectionField: [{ position: 40 }]
SALESORDERDATE;

@UI.SelectionField: [{ position: 50, element: '_Item.Material' }]
_Item;
```

LANGUAGE: CAP CDS

CODE:
```

annotate service.SalesOrderManage with @(
  UI.SelectionFields  : [
     SalesOrder,
     SoldToParty,
     OverallSDProcessStatus,
     SalesOrderDate,
     Item.Material
]
);
```

STEP: 3 — Configure Search Behavior: Go Button Mode vs Live Mode

DESCRIPTION: Choose whether searches run only on explicit Go click (Go button mode, default) or automatically on field change (live mode). Live mode can be enabled via manifest.json (or UI adaptation in V2) — see code examples below. CAUTION: live mode triggers automatic refreshes during initial load and on every field change; test performance for large or complex datasets.

LANGUAGE: JSON

CODE:
```text
# Example: enable live mode (V4) in manifest.json — see Step 7 for full routing context
"liveMode": true
```

STEP: 4 — V2: EntitySet with Input Parameters (displayed automatically)

DESCRIPTION: If an entity set exposes input parameters (sap:semantics="parameters"), its parameters are shown on the filter bar automatically. Mandatory parameters must be filled to trigger queries. Optional parameters (currently only Edm.String supported) default to empty string if not provided.

LANGUAGE: XML

CODE:
```

<EntityType Name="SalesShareParametersType" sap:semantics="parameters">
    <Key>          
        <PropertyRef Name="P_Currency"/>
        <PropertyRef Name="P_Country"/>
        <PropertyRef Name="P_Optional"/>
    </Key>
    <Property Name="P_Currency" Type="Edm.String" Nullable="false" MaxLength="5" sap:label="Currency" sap:parameter="mandatory"/>
    <Property Name="P_Country" Type="Edm.String" Nullable="false" DefaultValue="3" MaxLength="20" sap:label="CountryCode" sap:parameter="mandatory"/>
    <Property Name="P_Optional" Type="Edm.String" Nullable="false" MaxLength="5" sap:label="Optional" sap:parameter="optional"/>
    <NavigationProperty Name="Results" Relationship="sap.smartbusinessdemo.services.SalesShareParameters_SalesShareType" FromRole="SalesShareParametersPrincipal" ToRole="SalesShareDependent"/>
</EntityType>

```

STEP: 5 — V4: Add Filter Fields Using SAP Fiori Tools (UI path)

DESCRIPTION: Use SAP Fiori Tools Page Map and Page Editor to add filter fields without editing annotations manually. Steps:
- Open Page Map (e.g., right-click project > Show Page Map).
- Open Page Editor for List Report (click pencil icon).
- Expand Filter Fields node, click Arrow icon.
- Click Add (+) next to Filter Fields > Add Filter Fields.
- Select fields from dropdown > Click Add.
- Preview using Fiori Tools preview.

LANGUAGE: Text

CODE:
```text
Reference docs:
- Define Application Structure: https://help.sap.com/docs/SAP_FIORI_tools/17d50220bcd848aa854c9c182d65b699/bae38e6216754a76896b926a3d6ac3a9.html
- Filter Fields: https://help.sap.com/docs/SAP_FIORI_tools/17d50220bcd848aa854c9c182d65b699/0b8428645243486680ffa22c0b541039.html
- Previewing an Application: https://help.sap.com/docs/SAP_FIORI_tools/17d50220bcd848aa854c9c182d65b699/b962685bdf9246f6bced1d1cc1d9ba1c.html
```

STEP: 6 — Hide the Filter Bar via manifest.json

DESCRIPTION: Force the filter bar to be hidden at app startup (content area loads regardless of initialLoad). Note: ignored if mandatory filter fields or parameter fields without defaults exist.

LANGUAGE: JSON

CODE:
```json

{
     "sap.ui5": {
          "routing": {
               "targets": {
                    "SalesOrderManageList": {
                         "options": {
                              "settings": {
                                   "hideFilterBar": true
                              }
                         }
                    }
               }
          }
     }
}
```

STEP: 7 — Enable Live Mode via manifest.json (V4 example)

DESCRIPTION: Set liveMode true for the ListReport target in manifest.json to enable automatic searches on filter changes. Evaluate performance impact before enabling.

LANGUAGE: JSON

CODE:
```

"routing": {
	"targets": {
	    "MyEntitiesList": {
            "type": "Component",
            "name": "sap.fe.templates.ListReport",
            "id": "MyEntitiesList",
            "options": {
                "settings": {
                "liveMode": true,
                ...
                }
            }
        }
    }
}
```

STEP: 8 — Configure Mandatory Filter Fields (Capabilities.RequiredProperties)

DESCRIPTION: Mark filter properties as mandatory so a value is required before a search can be executed. Use FilterRestrictions.RequiredProperties.

LANGUAGE: XML

CODE:
```
<Annotations Target="SAP__self.Container/SalesOrder">
   <Annotation Term="SAP__capabilities.FilterRestrictions">
      <Record>
         <PropertyValue Property="RequiredProperties">
            <Collection>
               <PropertyPath>OrderType</PropertyPath>
            </Collection>
         </PropertyValue>
      </Record>
   </Annotation>
</Annotations>
```

LANGUAGE: ABAP CDS

CODE:
```
@Consumption.filter.mandatory: true
OrderType;
```

LANGUAGE: CAP CDS

CODE:
```
annotate service.SalesOrder with @Capabilities : {
    FilterRestrictions : {
        $Type : 'Capabilities.FilterRestrictionsType',
        RequiredProperties : [
            OrderType
        ],
    },
};
```

STEP: 9 — Add Tooltips to Filter Fields (@Common.QuickInfo)

DESCRIPTION: Provide user-facing quick info tooltip for a filter field using Common.QuickInfo annotation.

LANGUAGE: XML

CODE:
```
<Annotations Target="SAP__self.Container/SalesOrder/OrderNumber>
   <Annotation Term="Common.QuickInfo" String="Unique identifier for the sales order"/>
</Annotations>
```

LANGUAGE: ABAP CDS

CODE:
```
@Common.QuickInfo: 'Unique identifier for the sales order'
OrderNumber;
```

LANGUAGE: CAP CDS

CODE:
```
entity SalesOrder {
   key ID : UUID;
   OrderNumber : String(20) @Common.QuickInfo: 'Unique identifier for the sales order';
   ... 
}
```

STEP: 10 — Keep Fields Hidden in Filter Bar and Adapt Filters (NonFilterableProperties)

DESCRIPTION: Use Capabilities.NonFilterableProperties to prevent a property from appearing in the filter bar and the Adapt Filters dialog. Note: UI.Hidden and UI.HiddenFilter also hide properties.

LANGUAGE: XML

CODE:
```

<Annotations Target="SAP__self.Container/SalesOrder">
   <Annotation Term="SAP__capabilities.FilterRestrictions">
      <Record>
         <PropertyValue Property="NonFilterableProperties">
            <Collection>
               <PropertyPath>DeliveryChannel</PropertyPath>
            </Collection>
         </PropertyValue>
      </Record>
   </Annotation>
</Annotations>
```

LANGUAGE: ABAP CDS

CODE:
```
@ObjectModel.filter.enabled: false
DeliveryChannel;
```

LANGUAGE: CAP CDS

CODE:
```

annotate service.SalesOrder with @Capabilities : {
    FilterRestrictions : {
        $Type : 'Capabilities.FilterRestrictionsType',
        NonFilterableProperties : [
            DeliveryChannel
        ],
    },
};
```

STEP: 11 — Parameterized Entities: setup and manifest contextPath

DESCRIPTION: For parameterized main entities, the filter bar includes required parameter fields. Ensure manifest contextPath targets the parameter entity set with the "/Set" suffix. Call main entity results by passing parameters through the parameter entity set and then calling the containment navigation (e.g., /Customer(P_DisplayCurrency='JPY')/Set?$count=true).

LANGUAGE: XML

CODE:
```

<EntityType Name="CustomerType">
    <Key>
        <PropertyRef Name="Customer"/>
        <PropertyRef Name="CompanyCode"/>
        ...
    </Key>
    <Property Name="Customer" Type="Edm.String" Nullable="false" MaxLength="10"/>
    <Property Name="CompanyCode" Type="Edm.String" Nullable="false" MaxLength="4"/>
    <Property Name="SalesOrganization" Type="Edm.String" Nullable="false" MaxLength="4"/>
    ...
    <NavigationProperty Name="Parameters" Type="com.sap.gateway.srvd.zrc_arcustomer_definition.v0001.CustomerParameters" Nullable="false"/>
    ...
</EntityType>
```

LANGUAGE: XML

CODE:
```
<Annotations Target="SAP__self.CustomerParameters">
    <Annotation Term="SAP__common.ResultContext"/>
    ...
</Annotations>
```

LANGUAGE: XML

CODE:
```
<EntityType Name="CustomerParameters">
    <Key>
        <PropertyRef Name="P_DisplayCurrency"/>
    </Key>
    <Property Name="P_DisplayCurrency" Type="Edm.String" Nullable="false" MaxLength="3"/>
    <NavigationProperty Name="Set" Type="Collection(com.sap.gateway.srvd.zrc_arcustomer_definition.v0001.CustomerType)" Partner="Parameters" ContainsTarget="true"/>
</EntityType>
```

LANGUAGE: JSON

CODE:
```

"targets": {
    "CustomerList": {
        "type": "Component",
        "id": "CustomerList",
        "name": "sap.fe.templates.ListReport",
        "options": {
            "settings": {
                "contextPath": "/Customer/Set",
            }
        }
    }
},
```

LANGUAGE: XML

CODE:
```

<EntityContainer Name="Container">
    <EntitySet Name="Customer" EntityType="com.sap.gateway.srvd.zrc_arcustomer_definition.v0001.CustomerParameters">
        <NavigationPropertyBinding Path="Set/Parameters" Target="Customer"/>
        ...
    </EntitySet>
    ...
</EntityContainer>
```

LANGUAGE: Text

CODE:
```
Example OData call to fetch main entity results through parameter entity set:
http://<path>/Customer(P_DisplayCurrency='JPY')/Set?$count=true
```

LANGUAGE: CAP CDS

CODE:
```

@Common.ResultContext #$parameters
  entity RootElement(P_CurrencyUnit : String not null @(---));
```

STEP: 12 — Filter Restrictions for Parameterized Entities (two approaches)

DESCRIPTION: Two supported approaches to specify filter restrictions when main entity set is parameterized:
- Define FilterExpressionRestrictions at the main entity using PropertyPath that points through containment (Set/Property).
- Define NavigationRestrictions at the parameter entity (navigation property path pointing to containment) and add FilterRestrictions there. NavigationRestrictions take priority over direct restrictions on the main entity.

LANGUAGE: XML

CODE:
```

<Annotation Term="SAP__capabilities.FilterRestrictions">
    <Record>
        <PropertyValue Property="FilterExpressionRestrictions">
            <Collection>
                <Record>
                    <PropertyValue Property="Property" PropertyPath="Set/SalesOrganization" />
                    <PropertyValue Property="AllowedExpressions" String="MultiValue" />
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

LANGUAGE: CAP CDS

CODE:
```

entity Customer   @(
    Capabilities : {
        FilterRestrictions:{
            $Type: 'Capabilities.FilterRestrictionsType',
            FilterExpressionRestrictions: [{
                Property: 'Set/SalesOrganization',
                AllowedExpressions: 'MultiValue'
            }]
    }
}
```

LANGUAGE: XML

CODE:
```

<Annotations Target="SAP__self.Container/Customer">
   <Annotation Term="SAP__capabilities.NavigationRestrictions">
      <Record>
         <PropertyValue Property="RestrictedProperties">
            <Collection>
               <Record>
                  <PropertyValue Property="NavigationProperty" NavigationPropertyPath="Set" />
                     <PropertyValue Property="FilterRestrictions">
                        <Record>
                           ....
                           ....
                           <PropertyValue Property="FilterExpressionRestrictions">
                              <Collection>
                                 <Record>
                                    <PropertyValue Property="Property" PropertyPath="SalesOrganization" />
                                    <PropertyValue Property="AllowedExpressions" String="MultiValue" />
                                 </Record>
                              </Collection>
                           </PropertyValue>
                        </Record>
                     </PropertyValue>
                  </PropertyValue>
               </Record>
            </Collection>
         </PropertyValue>
      </Record>
   </Annotation>
</Annotations>
```

LANGUAGE: CAP CDS

CODE:
```

service MyService {
    @Capabilities.NavigationRestrictions.RestrictedProperties : [{
        $Type              : 'Capabilities.NavigationPropertyRestriction',
        NavigationProperty : 'Set',
        FilterRestrictions : {
            $Type                        : 'Capabilities.FilterRestrictionsType',
            FilterExpressionRestrictions : [{
                $Type              : 'Capabilities.FilterExpressionRestrictionType',
                Property           : 'Set.SalesOrganization',
                AllowedExpressions : 'MultiValue'
            }]
        }
    }]
}
```

STEP: 13 — Constraints, Notes and Restrictions

DESCRIPTION: Keep these constraints in mind when designing filter bars:
- Parameter support only for read-only services (editable services not supported).
- Parameters not supported with multiple view mode unless single-table mode is used.
- Navigation entity sets associated with the main entity cannot be parameterized.
- Sort restrictions not supported for first-level navigation entity sets in parameterized scenarios.
- Filtering on measure properties is not supported.
- NavigationRestriction-based filter restrictions override direct main-entity restrictions.

LANGUAGE: Text

CODE:
```text
Refer to "Live Mode" performance caution: live mode triggers initial load and refresh on every field change — test thoroughly for large or complex datasets.
```

STEP: 14 — References and Further Reading

DESCRIPTION: Links to related topics for adapting the filter bar, initial data loading behavior, and adding custom filter fields.

LANGUAGE: Text

CODE:
```text
- Adapting the Filter Bar: adapting-the-filter-bar-609c39a.md
- Loading Behavior of Data on Initial Launch of the Application: loading-behavior-of-data-on-initial-launch-of-the-application-9f4e119.md
- Adding Custom Fields to the Filter Bar (extension APIs): adding-custom-fields-to-the-filter-bar-5fb9f57.md
```
--------------------------------

**TITLE**: Configuring Filter Fields (SAP Fiori Elements — FilterRestrictions)

**INTRODUCTION**: This guide shows how to configure filter fields in SAP Fiori Elements so they accept single values, multiple values, or ranges. It covers OData V2 and V4 annotations (XML, ABAP CDS, CAP CDS), navigation/entity scenarios (association, parent, child), prioritization rules, strict Unit-of-Measure (UoM) filtering, and copy/paste behavior. Use these examples directly in your annotation files (EDMX XML, CDS, manifest.json) to control filter entry behavior in filter bars and value helps.

**TAGS**: fiori-elements-framework, filter-restrictions, ODataV2, ODataV4, CDS, CAP, ABAP, manifest, UoM, visual-filters

STEP: 1 — Copying and Pasting Multiple Values in the Filter Bar

DESCRIPTION: End users can copy/paste multiple values into filter fields if the source and target fields share the same data type. This works across filter fields, value help dialogs (paste into equal-to field), and spreadsheets. Note performance considerations and the need for custom event handlers for custom filters.

LANGUAGE: Plain text

CODE:
```text
Use cases:
- From one filter field to another filter field of the same data type.
- From one filter field to the value help dialog of another field of the same data type.
- From a spreadsheet to a filter field of the same data type.

Example: Copy values from "Sales Order No." filter and paste into another filter or into the value help dialog's "equal to" field.

Restriction:
- Copying/pasting a large number of values can cause performance issues.
- For apps with custom filters, developers must define copy and paste events for the custom filters.
Image reference: images/copy-paste-filter-bar_e343435.png
```

STEP: 2 — OData V2: sap:filter-restriction (control single vs multi value)

DESCRIPTION: Use the sap:filter-restriction attribute on property definitions in the EDMX to force single-value filtering. If no filter-restriction is provided, fields default to multi-valued.

LANGUAGE: XML

CODE:
```xml
<Property Name="StartDate" Type="Edm.DateTime" sap:display-format="Date" 
sap:aggregation-role="dimension" sap:label="Date" sap:filter-restriction="single-value"/>

<Property Name="StartDate" Type="Edm.String" sap:semantics="yearmonthday" 
sap:aggregation-role="dimension" sap:label="Date" sap:filter-restriction="single-value"/>
```

STEP: 3 — OData V4: XML FilterRestrictions (FilterExpressionRestrictions example)

DESCRIPTION: Use Capabilities.FilterRestrictions in service annotations to set AllowedExpressions per property (SingleValue, MultiValue, SingleRange, MultiRange). If not provided, fields are multi-valued by default.

LANGUAGE: XML

CODE:
```xml
<AnnotationsTarget="com.c_salesordermanage_sd.EntityContainer/SalesOrderManage">
    <AnnotationTerm="Capabilities.FilterRestrictions">
        <RecordType="Capabilities.FilterRestrictionsType">
            <PropertyValueProperty="FilterExpressionRestrictions">
                <Collection>
                    <RecordType="Capabilities.FilterExpressionRestrictionType">
                        <PropertyValueProperty="Property" PropertyPath="SoldToParty"/>
                        <PropertyValueProperty="AllowedExpressions" String="SingleValue"/>
                    </Record>
                    <RecordType="Capabilities.FilterExpressionRestrictionType">
                        <PropertyValueProperty="Property" PropertyPath="SalesOrderDate"/>
                        <PropertyValueProperty="AllowedExpressions" String="SingleRange"/>
                    </Record>
                </Collection>
            </PropertyValue>
        </Record>
    </Annotation>
    ….
    ….
</Annotations>
```

STEP: 4 — Equivalent ABAP CDS: AllowedExpressions mapping to @Consumption annotations

DESCRIPTION: Use these ABAP CDS annotation mappings to produce equivalent AllowedExpressions behavior in OData V4. Map AllowedExpressions to @Consumption.filter.multipleSelections and @Consumption.filter.selectionType.

LANGUAGE: ABAP CDS

CODE:
```
FilterExpressionRestriction.AllowedExpressions = "SingleValue"
       @Consumption.filter.multipleSelections: false 
       @Consumption.filter.selectionType: #SINGLE
 
FilterExpressionRestriction.AllowedExpressions = "MultiValue"
       @Consumption.filter.multipleSelections: true 
       @Consumption.filter.selectionType: #SINGLE

FilterExpressionRestriction.AllowedExpressions = "SingleRange"
       @Consumption.filter.multipleSelections: false 
       @Consumption.filter.selectionType: #INTERVAL

FilterExpressionRestriction.AllowedExpressions = "MultiRange"
       @Consumption.filter.multipleSelections: true 
       @Consumption.filter.selectionType: #INTERVAL
```

STEP: 5 — CAP CDS: Define FilterRestrictions on entity

DESCRIPTION: Add Capabilities.FilterRestrictions to your CAP CDS entity definition to restrict properties. Example shows single-value and single-range restrictions for properties.

LANGUAGE: CAP CDS

CODE:
```cds
entity SalesOrderManage @(
    title        : 'Manage Sales Order',
    Capabilities : {
        FilterRestrictions     : {FilterExpressionRestrictions : [
        {
            Property           : 'SoldToParty',
            AllowedExpressions : 'SingleValue'
        },
        {
            Property           : 'SalesOrderDate',
            AllowedExpressions : 'SingleRange'
        }
        ]}
    },
```

STEP: 6 — Make a filter field required (CAP CDS)

DESCRIPTION: Use Capabilities.FilterRestrictions.RequiredProperties to mark filter fields as required in CAP CDS (manifest or service annotations will reflect this).

LANGUAGE: CAP CDS

CODE:
```cds
entity SalesOrderManage @(
    title        : 'Manage Sales Order',
    Capabilities : {
      FilterRestrictions         : {
              $Type              : 'Capabilities.FilterRestrictionsType',
              RequiredProperties : [
                  SalesOrderDate,
              ],
      }
    },
```

STEP: 7 — Navigation Entity: FilterRestrictions at Association Entity (non-containment)

DESCRIPTION: Annotate the association (navigation property) target to set filter restrictions for the navigation property. This approach has highest priority and wins over lower-priority approaches.

LANGUAGE: XML

CODE:
```xml
<Annotations Target="com.c_salesordermanage_sd.SalesOrderManage/_Material">
    <Annotation Term="Capabilities.FilterRestrictions">
        <Record Type="Capabilities.FilterRestrictionsType">
            <PropertyValue Property="FilterExpressionRestrictions">
                <Collection>
                    <Record Type="Capabilities.FilterExpressionRestrictionType">
                        <PropertyValue Property="Property" PropertyPath="Material"/>
                        <PropertyValue Property="AllowedExpressions" String="SingleValue"/>
                    </Record>
                </Collection>
            </PropertyValue>
        </Record>
    </Annotation>
```

STEP: 8 — Navigation Entity: CAP CDS association-level FilterRestrictions (non-containment)

DESCRIPTION: Add FilterRestrictions to the navigation property definition in CAP CDS to annotate the association entity directly (non-containment).

LANGUAGE: CAP CDS

CODE:
```cds
entity SalesOrderManage    @( // add annotations
    ...
    SemanticKey : [ID],
    ...
) {
    SalesOrder :      SalesOrderId not null; // Add properties
    ...
    // Add restrictions where navigation property is defined
    _Material  :      Association to Material on _Material.Material = Material;
                      @(Capabilities: { 
                          FilterRestrictions: {
                              FilterExpressionRestrictions: [
                                  {
                                      Property   : 'Material',
                                      AllowedExpressions: 'SingleRange'
                                  }
                              ]
                          }
                      });
}
```

STEP: 9 — Navigation Entity: XML containment example for FilterRestrictions

DESCRIPTION: For containment scenarios, annotate the containment navigation target in XML to set AllowedExpressions (MultiValue example).

LANGUAGE: XML

CODE:
```xml
<Annotations Target="sap.fe.test.MyService.MainEntityType/_ItemPartners">
   <Annotation Term="SAP__capabilities.FilterRestrictions">
      <Record>
         ....
         ....
         <PropertyValue Property="FilterExpressionRestrictions">
            <Collection>
               <Record>
                  <PropertyValue Property="Property" PropertyPath="CityName" />
                  <PropertyValue Property="AllowedExpressions" String="MultiValue" />
               </Record>
            </Collection>
         </PropertyValue>
      </Record>
   </Annotation>
</Annotations>
```

STEP: 10 — Navigation Entity: CAP CDS containment example

DESCRIPTION: Annotate composition/containment entities with FilterRestrictions directly at the child entity (example for CityName multi-value).

LANGUAGE: CAP CDS

CODE:
```cds
entity CustomerType {
    key ID            : UUID;
        @Capabilities.FilterRestrictions : {
          FilterExpressionRestrictions : [{
            $Type              : 'Capabilities.FilterExpressionRestrictionType',
            Property           : FullName,
            AllowedExpressions : 'MultiValue'
          }]
        }
        _PartnerItems : Composition of many PartnerType;
  };
```

STEP: 11 — Parent Entity: NavigationRestrictions with FilterRestrictions (parent-level)

DESCRIPTION: Annotate the parent entity's NavigationRestrictions.RestrictedProperties to set FilterRestrictions for navigation properties (non-containment example).

LANGUAGE: XML

CODE:
```xml
<Annotations Target="com.c_salesordermanage_sd.EntityContainer/SalesOrderManage">
  <Annotation Term="Capabilities.NavigationRestrictions">
    <Record>
        <PropertyValue Property="RestrictedProperties">
          <Collection>
            <Record>
               <PropertyValue Property="NavigationProperty" NavigationPropertyPath="_Material"/>
               <PropertyValue Property="FilterRestrictions">
                  <Record>
                     .....
                     .....
                     <PropertyValue Property="FilterExpressionRestrictions">
                        <Collection>
                           <Record>
                              <PropertyValue Property="Property" PropertyPath="Material" />
                              <PropertyValue Property="AllowedExpressions" String="SingleValue" />
                           </Record>
                        </Collection>
                     </PropertyValue>
                  </Record>
               </PropertyValue>
           </Record>
          </Collection>
        </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

STEP: 12 — Parent Entity: CAP CDS NavigationRestrictions (non-containment)

DESCRIPTION: Use Capabilities.NavigationRestrictions at parent entity level in CAP CDS to assign filter restrictions for a navigation property.

LANGUAGE: CAP CDS

CODE:
```cds
entity SalesOrderManage  @(
   title: 'Manage Sales Order',
   Capabilities: {
      NavigationRestrictions: {
         RestrictedProperties: [{
            NavigationProperty: _Material,
            FilterRestrictions: {
               FilterExpressionRestrictions: [{
                  Property: 'Material',
                  AllowedExpressions : 'SingleValue'
               }]
            }
         }]
      }
   }
)
```

STEP: 13 — Parent Entity: FilterRestrictions with PropertyPath pointing to child property

DESCRIPTION: Annotate FilterRestrictions at parent entity but use PropertyPath to point to child fields (non-containment). Not supported for containment scenarios.

LANGUAGE: XML

CODE:
```xml
<Annotations Target="com.c_salesordermanage_sd.EntityContainer/SalesOrderManage">
    <Annotation Term="Capabilities.FilterRestrictions">
        <Record Type="Capabilities.FilterRestrictionsType">
            <PropertyValue Property="FilterExpressionRestrictions">
                <Collection>
                    <Record Type="Capabilities.FilterExpressionRestrictionType">
                        <PropertyValue Property="Property" PropertyPath="_Material/Material"/>
                        <PropertyValue Property="AllowedExpressions" String="SingleValue"/>
                    </Record>
                </Collection>
            </PropertyValue>
        </Record>
    </Annotation>
```

STEP: 14 — Parent Entity: CAP CDS property-path pointing to child property

DESCRIPTION: Example CAP CDS showing FilterRestrictions with PropertyPath pointing to association child property.

LANGUAGE: CAP CDS

CODE:
```cds
entity SalesOrderManage   @(  
    Capabilities: {    
        FilterRestrictions    : {FilterExpressionRestrictions: [     
        {      
            Property           : _Material.Material,      
            AllowedExpressions : 'SingleValue'      
        }    
        ]}  
    }
)
```

STEP: 15 — Child Entity: FilterRestrictions directly on child entity

DESCRIPTION: Annotate the child entity directly to set AllowedExpressions for properties in the child entity. This is lower priority than association-level annotations.

LANGUAGE: XML

CODE:
```xml
<Annotations Target="com.c_salesordermanage_sd.SalesOrderManage/MaterialEntity">
    <Annotation Term="Capabilities.FilterRestrictions">
        <Record Type="Capabilities.FilterRestrictionsType">
            <PropertyValue Property="FilterExpressionRestrictions">
                <Collection>
                    <Record Type="Capabilities.FilterExpressionRestrictionType">
                        <PropertyValue Property="Property" PropertyPath="Material"/>
                        <PropertyValue Property="AllowedExpressions" String="SingleValue"/>
                    </Record>
                </Collection>
            </PropertyValue>
        </Record>
    </Annotation>
```

STEP: 16 — Child Entity: CAP CDS direct child example (non-containment)

DESCRIPTION: CAP CDS example to annotate child entity with FilterRestriction for Material property.

LANGUAGE: CAP CDS

CODE:
```cds
entity MaterialEntity @(
   title: 'Material',
   Capabilities: {
      FilterRestrictions: {
         FilterExpressionRestrictions: [{
            Property: 'Material',
            AllowedExpressions: 'SingleValue'
         }]
      }
  }
)
```

STEP: 17 — Child Entity: containment example XML and CAP CDS

DESCRIPTION: For containment scenarios, annotate child entities similarly. Example XML and CAP CDS show CityName MultiValue.

LANGUAGE: XML

CODE:
```xml
<Annotations Target="SAP__self.Container/ItemPartner">
   <Annotation Term="SAP__capabilities.FilterRestrictions">
      <Record>
         ....
         ....
         <PropertyValue Property="FilterExpressionRestrictions">
            <Collection>
               <Record>
                  <PropertyValue Property="Property" PropertyPath="CityName" />
                  <PropertyValue Property="AllowedExpressions" String="MultiValue" />
               </Record>
            </Collection>
         </PropertyValue>
      </Record>
   </Annotation>
</Annotations>
```

LANGUAGE: CAP CDS

CODE:
```cds
entity _ItemPartner  @(
    Capabilities: {
        FilterRestrictions: {
            FilterExpressionRestrictions: [{
                Property: 'CityName',
                AllowedExpressions: 'MultiValue'
            }]
    }
}
```

STEP: 18 — ABAP CDS equivalent mapping for AllowedExpressions (repeated reference)

DESCRIPTION: ABAP CDS mapping for AllowedExpressions (same as STEP 4). Use @Consumption.filter.* annotations in ABAP CDS to control multipleSelections and selectionType.

LANGUAGE: ABAP CDS

CODE:
```
FilterExpressionRestriction.AllowedExpressions = "SingleValue"
       @Consumption.filter.multipleSelections: false 
       @Consumption.filter.selectionType: #SINGLE
  
FilterExpressionRestriction.AllowedExpressions = "MultiValue"
       @Consumption.filter.multipleSelections: true 
       @Consumption.filter.selectionType: #SINGLE

FilterExpressionRestriction.AllowedExpressions = "SingleRange"
       @Consumption.filter.multipleSelections: false 
       @Consumption.filter.selectionType: #INTERVAL

FilterExpressionRestriction.AllowedExpressions = "MultiRange"
       @Consumption.filter.multipleSelections: true 
       @Consumption.filter.selectionType: #INTERVAL
```

STEP: 19 — Prioritization of FilterRestrictions (merge + override rules)

DESCRIPTION: When multiple annotations exist for the same field, they are merged and higher-priority annotations override lower-priority ones. Priority order (highest to lowest):
1. Filter Restrictions at Association Entity
2. Navigation Restrictions at Parent Entity
3. Filter Restrictions at Parent Entity with PropertyPath pointing to Child Entity (not supported for containment)
4. Filter Restrictions Directly at Child Entity

Example: If Child.CityName is SingleValue at child level but MultiValue at association level, final behavior = MultiValue (association-level overrides).

LANGUAGE: Plain text

CODE:
```text
Prioritization:
1. Filter Restrictions at Association Entity
2. Navigation Restrictions at Parent Entity
3. Filter Restrictions at Parent Entity with PropertyPath (not for containment)
4. Filter Restrictions Directly at Child Entity
```

STEP: 20 — Strict Filtering of Unit of Measure (UoM)

DESCRIPTION: Strict UoM filtering enforces single-value entry for unit fields when filtering measure fields (Amount, Quantity). It is enabled by default. Disable globally via sap.fe.disableStrictUomFiltering in manifest.json.

LANGUAGE: JSON

CODE:
```json
"sap.fe": {
    "app": {
        "disableStrictUomFiltering": true
    }
}
```

STEP: 21 — Visual Filters and Field Help references

DESCRIPTION: Use visual filter bar configuration to select values based on measure values. For field help configuration see Field Help documentation. Links kept from original docs for deeper integration.

LANGUAGE: Plain text

CODE:
```text
See also:
- Configuring the Visual Filter Bar: configuring-the-visual-filter-bar-33f3d80.md
- Field Help configuration: field-help-a5608ea.md
```
--------------------------------

**TITLE**: Configuring Status Colors and Navigation via Annotations for List Report and Object Page

**INTRODUCTION**: This guide explains how to configure common features used by both the List Report and Object Page in Fiori elements — specifically: (1) semantic status colors (via DataPoint/Criticality) and (2) intent-based navigation. Add these annotations to your service annotation files so the framework renders colored status indicators and navigation actions automatically.

**TAGS**: fiori-elements-framework, annotations, status, criticality, navigation, data-point, intent-based-navigation, list-report, object-page

**STEP**: 1 — Add a DataPoint with Criticality and expose it in the LineItem to render semantic status colors

**DESCRIPTION**: Create or update your OData annotation file (XML) and:
- Define a DataPoint annotation that maps an entity property to Value and Criticality.
- Reference that DataPoint from the UI.LineItem (table/list) so the UI renders a status visualization (colored badge) based on Criticality.

File path (example): app/annotations/<YourService>.annotations.xml

**LANGUAGE**: XML

**CODE**:
```xml
<?xml version="1.0" encoding="utf-8"?>
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
  <edmx:DataServices>
    <Schema xmlns="http://docs.oasis-open.org/odata/ns/edm" Namespace="Your.Service.Namespace">

      <!-- DataPoint annotation: maps a property to a value and a criticality (semantic color) -->
      <Annotations Target="Your.Service.Namespace.YourEntityType">
        <!-- Define a DataPoint (qualifier 'StatusPoint') -->
        <Annotation Term="com.sap.vocabularies.UI.v1.DataPoint" Qualifier="StatusPoint">
          <Record>
            <!-- Value: the property holding the text/number to display -->
            <PropertyValue Property="Value" Path="StatusText" />
            <!-- Criticality: maps to semantic colors, can be EnumMember with dynamic/path-based mapping -->
            <!-- Example: static criticality -->
            <PropertyValue Property="Criticality" EnumMember="com.sap.vocabularies.UI.v1.CriticalityType/Neutral" />
            <!-- Example: dynamic criticality based on a Path (uncomment and use instead of static above)
            <PropertyValue Property="Criticality">
              <Path>StatusCriticality</Path>
            </PropertyValue>
            -->
          </Record>
        </Annotation>

        <!-- Reference the DataPoint from the LineItem so list tables show the status visualization -->
        <Annotation Term="com.sap.vocabularies.UI.v1.LineItem">
          <Collection>
            <Record Type="com.sap.vocabularies.UI.v1.DataFieldForAnnotation">
              <PropertyValue Property="Label" String="Status" />
              <!-- Reference the DataPoint via AnnotationPath including qualifier -->
              <PropertyValue Property="Target">
                <AnnotationPath>com.sap.vocabularies.UI.v1.DataPoint#StatusPoint</AnnotationPath>
              </PropertyValue>
            </Record>

            <!-- Keep other LineItem entries here (e.g., other columns) -->
          </Collection>
        </Annotation>
      </Annotations>

    </Schema>
  </edmx:DataServices>
</edmx:Edmx>
```

**STEP**: 2 — Configure intent-based navigation (List -> Object or cross-app navigation)

**DESCRIPTION**: Add a DataFieldForIntentBasedNavigation annotation in the LineItem (or Action area) to enable navigation using Semantic Object and Action. The framework generates the navigation control; replace SemanticObject and Action with your app’s intent mapping. Place this annotation where list rows or action items are defined.

File path (example): app/annotations/<YourService>.annotations.xml

**LANGUAGE**: XML

**CODE**:
```xml
<?xml version="1.0" encoding="utf-8"?>
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
  <edmx:DataServices>
    <Schema xmlns="http://docs.oasis-open.org/odata/ns/edm" Namespace="Your.Service.Namespace">

      <Annotations Target="Your.Service.Namespace.YourEntityType">
        <Annotation Term="com.sap.vocabularies.UI.v1.LineItem">
          <Collection>
            <!-- Intent-based navigation column/action on a line item -->
            <Record Type="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation">
              <PropertyValue Property="Label" String="Open Details" />
              <!-- Semantic Object that maps to the target application -->
              <PropertyValue Property="SemanticObject" String="SalesOrder" />
              <!-- Action like 'displayFactSheet' or 'manage' depending on your intent -->
              <PropertyValue Property="Action" String="display" />
              <!-- Optional: target parameters passed to the target intent -->
              <!-- Use a Target with a Path if you need to pass entity keys/fields -->
              <!-- Example: pass SalesOrderID as parameter (framework resolves automatically) -->
              <PropertyValue Property="Parameters">
                <Collection>
                  <Record>
                    <PropertyValue Property="LocalProperty" PropertyPath="SalesOrderID" />
                    <PropertyValue Property="SemanticObjectProperty" String="SalesOrderID" />
                  </Record>
                </Collection>
              </PropertyValue>
            </Record>

            <!-- Other LineItem columns -->
          </Collection>
        </Annotation>
      </Annotations>

    </Schema>
  </edmx:DataServices>
</edmx:Edmx>
```

**STEP**: 3 — Apply annotations to Object Page header/actions where appropriate

**DESCRIPTION**: Use the same DataPoint or DataFieldForIntentBasedNavigation annotations in the Object Page context. For example, reference the DataPoint in UI.HeaderInfo or place intent-based navigation actions in UI.Facets or UI.HeaderAction. Ensure the Target in annotations refers to the Object Page entity type.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Example: reference DataPoint in HeaderInfo for object page header -->
<Annotation Term="com.sap.vocabularies.UI.v1.HeaderInfo" Target="Your.Service.Namespace.YourEntityType">
  <Record>
    <PropertyValue Property="TypeName" String="Sales Order" />
    <PropertyValue Property="TypeNamePlural" String="Sales Orders" />
    <PropertyValue Property="Title">
      <Record Type="com.sap.vocabularies.UI.v1.DataFieldForAnnotation">
        <PropertyValue Property="Target">
          <AnnotationPath>com.sap.vocabularies.UI.v1.DataPoint#StatusPoint</AnnotationPath>
        </PropertyValue>
      </Record>
    </PropertyValue>
  </Record>
</Annotation>

<!-- Example: add an intent-based header action -->
<Annotation Term="com.sap.vocabularies.UI.v1.HeaderFacets" Target="Your.Service.Namespace.YourEntityType">
  <Collection>
    <Record Type="com.sap.vocabularies.UI.v1.CollectionFacet">
      <PropertyValue Property="Label" String="Actions" />
      <PropertyValue Property="Target">
        <AnnotationPath>com.sap.vocabularies.UI.v1.FieldGroup#HeaderActions</AnnotationPath>
      </PropertyValue>
    </Record>
  </Collection>
</Annotation>

<!-- Define the header action FieldGroup#HeaderActions and include DataFieldForIntentBasedNavigation as needed -->
```

**STEP**: 4 — Verify and test in the Fiori elements app

**DESCRIPTION**: After adding/updating annotations:
- Rebuild and serve the Fiori app.
- Open the List Report to confirm the status column displays colored badges according to Criticality and that row or action navigation triggers the expected intent.
- Open an Object Page to confirm header/status render and header actions work as configured.

**LANGUAGE**: JSON (optional — annotation manifest mapping)

**CODE**:
```json
{
  "sap.app": {
    "id": "your.app.id",
    "dataSources": {
      "mainService": {
        "uri": "/sap/opu/odata/sap/YOUR_SERVICE_SRV/",
        "type": "OData",
        "settings": {
          "annotations": [
            {
              "uri": "annotations/YourService.annotations.xml"
            }
          ]
        }
      }
    }
  }
}
```
--------------------------------

**TITLE**: Configuring Internal Navigation for SAP Fiori Elements (OData V2 & V4)

**INTRODUCTION**: Practical, code-focused guidance for configuring internal navigation in SAP Fiori Elements apps. Covers enabling/disabling navigation after actions, configuring page hierarchies for OData V2, routing/navigation targets for OData V4, availability-based navigation, mapping child entities to list reports, linking entities via DataFieldWithNavigationPath (XML / ABAP CDS / CAP CDS), and the navigateToInstance setting for action behavior.

**TAGS**: fiori-elements-framework, navigation, manifest.json, OData V2, OData V4, DataFieldForAction, DataFieldWithNavigationPath, annotations

STEP: 1 — Default behavior: navigation after executing an action
DESCRIPTION: Understand the default navigation behavior when executing UI.DataFieldForAction annotations. Navigation occurs automatically only if a single instance is returned that is different from the triggering instance, the action succeeded, and manifest navigation exists for the returned context. Multiple selected contexts in toolbar actions will not trigger navigation.
LANGUAGE: Text
CODE:
```text
By default, when executing an action defined using the `UI.DataFieldForAction` annotation, navigation is automatically triggered after the action is executed. This happens if a single instance is returned by the action and if the returned instance is not the same as the instance used when the action was triggered. The navigation is only triggered if the action was executed successfully and if the manifest has navigation defined for the context that is returned. In addition, when a user selects multiple contexts for a table or chart toolbar action, the navigation is not triggered, even if the action returns the context.
```

STEP: 2 — OData V2: Configure page hierarchy and enable/disable chevron navigation
DESCRIPTION: Configure pages and subpages in manifest.json to enable navigation (chevrons). Keep predefined page definitions to allow navigation; remove those blocks to disable navigation to that level. Recommend specifying navigationProperty for subpages.
LANGUAGE: JSON
CODE:
```json
"sap.ui.generic.app": {
  "pages": {
    "MyListReport": {
      "entitySet": "MyEntitySet",
      "component": {
        "name": "sap.suite.ui.generic.template.ListReport",
        "list": true
      },
      // Navigation to detail page: eliminate this block if no navigation is needed
      "pages": {
        "MyObjectPageOnFirstLevel":          {
          "entitySet": "MyEntitySet",
          "component": {
            "name": "sap.suite.ui.generic.template.ObjectPage"
          },
          "pages": {
                                   "MyFirstObjectPageOnSecondLevel": {
              "navigationProperty": "to_MyFirstEntitySet",
              "entitySet": "MyFirstEntitySet",
              "component": {
                "name": "sap.suite.ui.generic.template.ObjectPage"
              },
            }, 
                                               "MySecondObjectPageOnSecondLevel": {
              "navigationProperty": "to_MySecondEntitySetNavigation",
              "entitySet": "MMySecondEntitySet",
              "component": {
                "name": "sap.suite.ui.generic.template.ObjectPage"
              },
            }, 
                                               "MyThirdObjectPageOnSecondLevel": {
              "navigationProperty": "to_MyThirdEntitySet",
              "entitySet": "MyThirdEntitySet",
              "component": {
                "name": "sap.suite.ui.generic.template.ObjectPage"
              }
            }
          }
        }
      }
    }
  }
}
```

STEP: 3 — OData V2: Disable navigation after executing DataFieldForAction in object page tables
DESCRIPTION: For DataFieldForAction annotations in object page tables, disable automatic navigation after action execution using navigateToInstance under annotatedActions in manifest.json.
LANGUAGE: JSON
CODE:
```json
"to_Item::com.sap.vocabularies.UI.v1.LineItem": {
    "tableSettings": {
        ...,
        ...
    },
    "annotatedActions": {
        "C_STTA_SalesOrderItem_WD_20Setopportunityid": {
            "afterExecution": {
                "navigateToInstance": false
            }
        }
    }
}
```

STEP: 4 — OData V2: Show item list in list report while displaying parent object with child entities on object page
DESCRIPTION: Map a child entity to a list report page and direct Create action in the list report to the parent/main entity by setting creationEntitySet in the ListReport component settings.
LANGUAGE: JSON
CODE:
```json
  "component": {
    "name": "sap.suite.ui.generic.template.ListReport",
    "list": true,
    "settings": {
      // Create of parent entity: Provide the parent entity set name.
      "creationEntitySet": "C_MPPurchasingSource"
    }
  }
```

STEP: 5 — OData V4: Configure routing and enable/disable navigation per target
DESCRIPTION: Define navigation under each target in manifest.json (sap.ui5.routing.targets options.settings.navigation). Remove navigation sections to disable chevrons for that target. Use navigation property paths (not entity set names) as keys under navigation.
LANGUAGE: JSON
CODE:
```json
The pages structure of the app should always be a tree, with the root as either a list report or an analytical list page. All the{
…
…
"sap.ui5": {
    ....
    ....
    ....
    "routing": {
…
…
        "routes": [{
            "pattern": ":?query:",
            "name": "ArtistList",
            "target": "ArtistList"
        }, {
            "pattern": "Artists({key}):?query:",
            "name": "ArtistDetail",
            "target": "ArtistObjectPage"
        }],
        "targets":{
            "ArtistList": {
                "type": "Component",
                "id": "ArtistList",
                "name": "sap.fe.templates.ListReport",
                "options": {
                    "settings" :{                         
                        "contextPath": "/Artists",
                        "navigation": {                              // Navigation Section to detail page: Eliminate if no navigation is required.
                            "Artists": {                                
                                "detail": {                                     
                                    "route": "ArtistObjectPage" // This triggers the regular internal navigation to OP from LR table record
                                }                          
                            }                         
                        }
                    }
                }
            }, // End of ArtistList
            "ArtistObjectPage": {
                "type": "Component",
                "id":  "ArtistDetail",                 
                "name": "sap.fe.templates.ObjectPage",
               "options": {
                 "setting": {
                  …..
                  …..
                  "navigation": {               // Navigation Section to SubOP detail page: Eliminate if no navigation is required.
                            "_Records": {       // NOTE: This should refer to navigation path and NOT navigation entity name                         
                                "detail": {                                     
                                    "route": "RecordSubObjectPage" // This triggers the regular internal navigation from OP "Records" table record to SubOP
                                }                         
                            },
                            "_Publishers": {    // NOTE: This should refer to navigation path and NOT navigation entity name                            
                                "detail": {                                     
                                    "route": "PublisherSubObjectPage" // This triggers the regular internal navigation from OP "Publisher" table record to SubOP
                                }                         
                            }                         
                        }
                    }
                  }
                 ...
                 ...
            } // End of ArtistObjectPage
        } // End of Targets
     }, // End of routing
    .....
    .....
    .....
  } // End of sap.ui
…
…
}
```

STEP: 6 — OData V4: Disable navigation per route using availability expression or formatter
DESCRIPTION: Use the availability property in navigation detail to conditionally disable navigation. Provide either an expression binding or a formatter that returns boolean.
LANGUAGE: JSON / JavaScript
CODE:
```json
"Travel": {
    "detail": {
        "route": "objectPage",
	    "availability": "{= ${TravelStatus_code} === 'O'}"
    }
}
```

```json
"Travel": {
	"detail": {
		"route": "objectPage",
		"availability": "{path: 'TravelStatus_code', formatter: '.extension.sap.fe.core.fpmExplorer.customHeaderListReport.LRExtend.isNavigable'}"
	}
}
...
isNavigable: function(travelStatus, context) {
	return travelStatus !== "O"
}
```

STEP: 7 — Navigation between entities: map UI.DataFieldWithNavigationPath to routing target parameters
DESCRIPTION: Use the manifest navigation section to map a navigation path (Target in DataFieldWithNavigationPath) to a UI5 route and resolve route pattern parameters via relative binding paths.
LANGUAGE: JSON
CODE:
```json
"routing": {
"routes": [
        {                 
            "pattern": "SalesOrderManage({key}):?query:",                                                                                 
            "name": "SalesOrderManageObjectPage",                                                                                                 
            "target": "SalesOrderManageObjectPage"
        }
    ],
"targets": {                
    "SalesOrderManageObjectPage":
        {
            "type": "Component",
            "id": "SalesOrderManageObjectPage",
            "name": "sap.fe.templates.ObjectPage",
            "options": {
                "settings": {
                    "contextPath":    "/SalesOrderManage",
                    "navigation": {
                        "to_SalesOrder": {  // 'Target' of UI.DataFieldWithNavigationPath annotation
                            "detail": {
                                "route": "SalesOrderManageObjectPage",
                                "parameters": {
                                    "key":  "{_ReferencedSalesOrder/ID}"
                                }
                           }
                      }   
                 }                  
            }
    }
}
        }
    }
}
```

STEP: 8 — DataFieldWithNavigationPath annotations: XML, ABAP CDS, CAP CDS examples
DESCRIPTION: Implement UI.DataFieldWithNavigationPath in your metadata/annotations to create in-app links. The Target property must match the manifest navigation key (navigation property path).
LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.FieldGroup" Qualifier="NavExample">
    <Record>
        <PropertyValue Property="Data">
            <Collection>
                <Record Type="UI.DataFieldWithNavigationPath">
                    <PropertyValue Property="Label" String="Ref. Sales Order" />
                    <PropertyValue Property="Value" Path="RefSalesOrderID" />
                    <PropertyValue Property="Target" NavigationPropertyPath="to_SalesOrder" />
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

LANGUAGE: ABAP CDS
CODE:
```
@UI.fieldGroup: [
  {
    targetelement: 'TO_SALESORDER',
    label: 'Ref. Sales Order',
    value: 'REFSALESORDERID',
    type: #WITH_NAVIGATION_PATH,
    position: 1 ,
    qualifier: 'NavExample'
  }
]
REFSALESORDERID;
```

LANGUAGE: CAP CDS
CODE:
```
UI.FieldGroup #NavExample : {
    Data : [
        {
            $Type : 'UI.DataFieldWithNavigationPath',
            Label : 'Ref. Sales Order',
            Value : RefSalesOrderID,
            Target : to_SalesOrder
        }
    ]
}
```

STEP: 9 — OData V4: Disable navigation after executing actions (navigateToInstance)
DESCRIPTION: Disable automatic navigation after action execution by setting navigateToInstance: false for action keys. For bound actions, use actions section; for inline actions define this under columns. Keys must start with DataFieldForAction::<ActionName>.
LANGUAGE: JSON
CODE:
```json
"com.sap.vocabularies.UI.v1.LineItem": {
    "tableSettings": {
        ...,
        ...
    },
    "actions": {
        "DataFieldForAction::com.c_salesordermanage_sd.AddRandomItem": {
            "afterExecution": {
                "navigateToInstance": false
            }
        },
        "DataFieldForAction::com.c_salesordermanage_sd.DummyBoundAction": {
            "afterExecution": {
                "navigateToInstance": false
            }
        }
    }
}
```

```json
"com.sap.vocabularies.UI.v1.LineItem": {
    "tableSettings": {
        ...,
        ...
    },
    "columns": {
        "DataFieldForAction::com.c_salesordermanage_sd.AddRandomItem": {
            "afterExecution": {
                "navigateToInstance": false
            }
        },
        "DataFieldForAction::com.c_salesordermanage_sd.DummyBoundAction": {
            "afterExecution": {
                "navigateToInstance": false
                }
            }
        }
     }
}
```

STEP: 10 — Rules: when navigation after action works and does not work
DESCRIPTION: Use this checklist when enabling navigateToInstance or troubleshooting navigation behavior.
LANGUAGE: Text
CODE:
```text
Navigation after executing an action works in the following cases:
- If the returned context belongs to the same entity as the context that triggered the action. For example, navigation is not triggered if the table action (with the table pointing to a navigation entity) returns an object that belongs to the header entity.
- For bound actions in the table toolbar, inline actions, header and footer actions, and form actions.
- For annotation-based custom actions.
- For navigation to the next level, as defined through routing.

Navigation after executing an action doesn't work in the following cases:
- For the chart toolbar.
- For subobject pages, the control associated with the action is refreshed, since navigation isn't possible.
- For standard actions in SAP Fiori elements, such as Save, Edit, or Create.
- For manifest-based actions.
- For external navigation.
```

STEP: 11 — In-page navigation for header facets
DESCRIPTION: Header facets support in-page navigation. Reference the Navigation from Header Facet Title guide for details and examples.
LANGUAGE: Text
CODE:
```text
Header facets supports in-page navigation. For more information, see Navigation from Header Facet Title (navigation-from-header-facet-title-fa0ca22.md)
```
--------------------------------

**TITLE**: Configuring List Report Features for SAP Fiori Elements

**INTRODUCTION**: This document describes actionable steps and code examples to configure List Report features in SAP Fiori Elements applications. It shows how to set the table type, define the filter bar (selection fields), and define table columns (line items) using manifest configuration, annotation XML/JSON, and CDS annotations. Use the exact snippets in your project files (manifest.json, annotations.xml, or CDS model) and adapt entity and property names to your data model.

**TAGS**: fiori-elements-framework, list-report, annotations, filter-bar, table-type, manifest.json, annotations.xml, CDS

**STEP**: 1 — Set the List Report table type in the application manifest

**DESCRIPTION**: Configure the List Report page in manifest.json to set the table rendering mode. Replace pageId, entitySet, and component name as needed. Common table types: ResponsiveTable, GridTable, AnalyticalTable, TreeTable.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "mainService"
      }
    }
  },
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "SalesOrders",
        "component": {
          "name": "sap.suite.ui.generic.template.ListReport",
          "settings": {
            "tableType": "ResponsiveTable"
          }
        }
      }
    ]
  }
}
```

**STEP**: 2 — Define selection (filter) fields using annotations.xml (OData V2/V4)

**DESCRIPTION**: Add com.sap.vocabularies.UI.v1.SelectionFields annotation to expose properties in the List Report filter bar. Replace Target with your entity full name and PropertyPath values with entity properties.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="MyService.SalesOrder">
  <Annotation Term="com.sap.vocabularies.UI.v1.SelectionFields">
    <Collection>
      <PropertyPath>SalesOrderID</PropertyPath>
      <PropertyPath>CustomerName</PropertyPath>
      <PropertyPath>OrderDate</PropertyPath>
    </Collection>
  </Annotation>
</Annotations>
```

**STEP**: 3 — Define table columns (LineItem) using annotations.xml

**DESCRIPTION**: Use UI.LineItem annotation to declare which properties appear as columns in the List Report table and control labels, value formats, and positions.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="MyService.SalesOrderType">
  <Annotation Term="com.sap.vocabularies.UI.v1.LineItem">
    <Collection>
      <Record Type="com.sap.vocabularies.UI.v1.DataField">
        <PropertyPath>SalesOrderID</PropertyPath>
      </Record>
      <Record Type="com.sap.vocabularies.UI.v1.DataField">
        <PropertyPath>CustomerName</PropertyPath>
      </Record>
      <Record Type="com.sap.vocabularies.UI.v1.DataField">
        <PropertyPath>TotalAmount</PropertyPath>
      </Record>
      <Record Type="com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation">
        <PropertyPath>SalesOrderID</PropertyPath>
        <Label>Open Details</Label>
      </Record>
    </Collection>
  </Annotation>
</Annotations>
```

**STEP**: 4 — Equivalent JSON annotations for services that consume JSON annotation files

**DESCRIPTION**: If your annotation format is JSON, provide the corresponding structures for SelectionFields and LineItem. Adjust Target and property names.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "Annotations": [
    {
      "Target": "MyService.SalesOrder",
      "Annotation": {
        "Term": "com.sap.vocabularies.UI.v1.SelectionFields",
        "Collection": [
          { "PropertyPath": "SalesOrderID" },
          { "PropertyPath": "CustomerName" },
          { "PropertyPath": "OrderDate" }
        ]
      }
    },
    {
      "Target": "MyService.SalesOrderType",
      "Annotation": {
        "Term": "com.sap.vocabularies.UI.v1.LineItem",
        "Collection": [
          { "Record": { "Type": "com.sap.vocabularies.UI.v1.DataField", "PropertyPath": "SalesOrderID" } },
          { "Record": { "Type": "com.sap.vocabularies.UI.v1.DataField", "PropertyPath": "CustomerName" } },
          { "Record": { "Type": "com.sap.vocabularies.UI.v1.DataField", "PropertyPath": "TotalAmount" } }
        ]
      }
    }
  ]
}
```

**STEP**: 5 — Configure filters and line items using CDS annotations (CAP / ABAP CDS)

**DESCRIPTION**: For CDS-based models, use @UI annotations directly in the CDS entity definition. Replace entity and field names as appropriate.

**LANGUAGE**: CDS

**CODE**:
```cds
namespace my.bookshop;

entity SalesOrder {
  key SalesOrderID : String(32);
  CustomerName : String(100);
  OrderDate : Date;
  TotalAmount : Decimal(15,2);

  @UI.hidden : false
  @UI.selectionField : [{ position: 10 }]
  SalesOrderID;

  @UI.selectionField : [{ position: 20 }]
  CustomerName;

  @UI.lineItem : [
    { position: 10 },
    { value: SalesOrderID },
    { value: CustomerName },
    { value: TotalAmount, position: 30 }
  ];
}
```

**STEP**: 6 — Combine manifest and annotations: deployment checklist

**DESCRIPTION**: Ensure the following:
- manifest.json pages entry points to the correct entitySet.
- Annotations file (annotations.xml or annotations.json) is referenced in manifest (if not using service metadata).
- Annotation Target values match entity/complex type names exposed by your OData service.
- For CAP/CDS, register the generated annotations or expose the service metadata so Fiori Elements consumes them.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.app": {
    "id": "com.mycompany.app"
  },
  "sap.ui5": {
    "models": {
      "annotationModel": {
        "dataSource": "annotations"
      }
    }
  },
  "sap.ui": {
    "resources": {}
  },
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "SalesOrders",
        "component": {
          "name": "sap.suite.ui.generic.template.ListReport",
          "settings": {
            "tableType": "GridTable"
          }
        }
      }
    ]
  },
  "sap.app": {
    "dataSources": {
      "annotations": {
        "uri": "annotations/annotations.xml"
      }
    }
  }
}
```
--------------------------------

**TITLE**: Configuring Navigation for SAP Fiori elements

**INTRODUCTION**: This document summarizes the navigation configuration options available in SAP Fiori elements apps. It covers internal (in-app) navigation and external navigation (outbound and inbound), and points to detailed configuration documents for each scenario. Use these steps as a quick reference for generating or updating app navigation logic and manifest references.

**TAGS**: fiori-elements-framework, navigation, internal-navigation, external-navigation, semantic-object, outbound, inbound, overview-page

**STEP**: 1 — Overview and design guidance

**DESCRIPTION**: Review general navigation concepts and how SAP Fiori elements approaches navigation. Use the SAP Fiori Design Guidelines for overall navigation principles and then apply Fiori elements-specific options listed below.

**LANGUAGE**: Markdown

**CODE**:
```markdown
<!-- loioa42427550b72436a8bdf53045b06effb -->

Fiori Design Guidelines — Navigation:
https://experience.sap.com/fiori-design/concept/navigation/

Available navigation options in SAP Fiori elements:
- Internal navigation (standard navigation within an app)
- External navigation
  - Outbound navigation (app triggers navigation)
    - Using a URL
    - Using a semantic object (intent-based navigation)
  - Inbound navigation (app is the navigation target)
```

**STEP**: 2 — Configure Internal Navigation

**DESCRIPTION**: Internal navigation refers to standard navigation within the app (pages, lists, object pages, etc.). For implementation details, code patterns, and manifest/settings to enable internal navigation flows, consult the dedicated internal navigation configuration guide.

**LANGUAGE**: Markdown

**CODE**:
```markdown
See detailed internal navigation configuration:
./configuring-internal-navigation-2c65f07.md
```

**STEP**: 3 — Configure External Navigation (Outbound and Inbound)

**DESCRIPTION**: External navigation covers scenarios where your Fiori elements app either initiates navigation to another app (outbound) or acts as a target for navigation (inbound). Outbound navigation can be implemented using direct URLs or intent-based navigation via semantic objects. Use the external navigation guide for manifest examples, semantic object mapping, and intent handling.

**LANGUAGE**: Markdown

**CODE**:
```markdown
External navigation options:
- Outbound:
  - Using a URL
  - Using a semantic object (intent-based navigation)
- Inbound:
  - Configure the app to be a navigation target (intent handling)

See detailed external navigation configuration:
./configuring-external-navigation-1d4a0f9.md
```

**STEP**: 4 — Configure Card (Overview Page) Navigation

**DESCRIPTION**: For overview pages that use cards, navigation behavior for cards (target URLs, semantic objects, or internal navigation targets) is configured separately. Refer to the card navigation guide for card manifest settings and examples.

**LANGUAGE**: Markdown

**CODE**:
```markdown
See card navigation configuration for overview pages:
./configuring-card-navigation-530f9e6.md
```
--------------------------------

**TITLE**: Configuring Object Page Features with UI Annotations

**INTRODUCTION**: Use UI annotations to configure an Object Page's header, identification area, and page sections (facets). This guide provides ready-to-use XML annotation templates and concise instructions for common Object Page scenarios: header info, identification fields, field groups, and facets (reference/collection). Replace placeholder names (Namespace.Service.MyEntityType, property names, qualifiers, labels) with your service/entity and properties.

**TAGS**: fiori-elements-framework, annotations, object-page, UI, odata, header, facets

**STEP**: 1 — Configure Header (Title and TypeName)

**DESCRIPTION**: Define the header title and type name shown on the Object Page. Use com.sap.vocabularies.UI.v1.HeaderInfo and set Title via Path to an entity property, and TypeName as a static label.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="Namespace.Service.MyEntityType">
  <Annotation Term="com.sap.vocabularies.UI.v1.HeaderInfo">
    <Record>
      <!-- Static type label -->
      <PropertyValue Property="TypeName" String="My Entity"/>

      <!-- Title uses an entity property -->
      <PropertyValue Property="Title" Path="Name"/>
    </Record>
  </Annotation>
</Annotations>
```

**STEP**: 2 — Add Identification Fields (header details)

**DESCRIPTION**: Specify the individual properties displayed in the header’s identification area. Use com.sap.vocabularies.UI.v1.Identification with a collection of PropertyPath entries in the order you want them to appear.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="Namespace.Service.MyEntityType">
  <Annotation Term="com.sap.vocabularies.UI.v1.Identification">
    <Collection>
      <PropertyPath>ProductID</PropertyPath>
      <PropertyPath>Name</PropertyPath>
      <PropertyPath>Status</PropertyPath>
    </Collection>
  </Annotation>
</Annotations>
```

**STEP**: 3 — Define Field Groups (reusable group of fields)

**DESCRIPTION**: Create FieldGroups (qualifier-based) to group properties for reuse in facets or header targets. Typical usage: reference a FieldGroup from a ReferenceFacet to render a form-like section on the Object Page.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- FieldGroup with qualifier "General" -->
<Annotations Target="Namespace.Service.MyEntityType">
  <Annotation Term="com.sap.vocabularies.UI.v1.FieldGroup" Qualifier="General">
    <Record>
      <PropertyValue Property="Label" String="General Info"/>
      <PropertyValue Property="Data">
        <Collection>
          <!-- Use PropertyPath entries or DataField records as required -->
          <PropertyPath>Name</PropertyPath>
          <PropertyPath>Description</PropertyPath>
          <PropertyPath>Category</PropertyPath>
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

**STEP**: 4 — Configure Facets (sections and subsections)

**DESCRIPTION**: Use com.sap.vocabularies.UI.v1.Facets to define Object Page sections. Use ReferenceFacet to reference a FieldGroup (via AnnotationPath and qualifier) and CollectionFacet to show lists/tables (e.g., LineItem or custom qualifiers). Order facets in the Collection as they should appear.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="Namespace.Service.MyEntityType">
  <Annotation Term="com.sap.vocabularies.UI.v1.Facets">
    <Collection>

      <!-- ReferenceFacet referencing a FieldGroup qualifier -->
      <Record Type="com.sap.vocabularies.UI.v1.ReferenceFacet">
        <PropertyValue Property="Label" String="General Information"/>
        <PropertyValue Property="Target">
          <Record Type="com.sap.vocabularies.UI.v1.Target">
            <!-- Reference the FieldGroup qualifier created above -->
            <PropertyValue Property="AnnotationPath" String="@com.sap.vocabularies.UI.v1.FieldGroup#General"/>
          </Record>
        </PropertyValue>
      </Record>

      <!-- CollectionFacet referencing a LineItem (list/table) qualifier -->
      <Record Type="com.sap.vocabularies.UI.v1.CollectionFacet">
        <PropertyValue Property="Label" String="Items"/>
        <PropertyValue Property="Target">
          <Record Type="com.sap.vocabularies.UI.v1.Target">
            <!-- Reference a LineItem annotation (could be default or qualifier-based) -->
            <PropertyValue Property="AnnotationPath" String="@com.sap.vocabularies.UI.v1.LineItem#Items"/>
          </Record>
        </PropertyValue>
      </Record>

    </Collection>
  </Annotation>
</Annotations>
```

**STEP**: 5 — Use Qualifiers and AnnotationPath consistently

**DESCRIPTION**: Qualifiers allow multiple annotations of the same term (e.g., multiple FieldGroups or LineItem views). When referencing them (e.g., from Facets or HeaderInfo), use the AnnotationPath format: @com.sap.vocabularies.UI.v1.<Term>#<Qualifier>. Ensure qualifiers match exactly between definition and reference.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Example: FieldGroup definition with qualifier "General" -->
<Annotation Term="com.sap.vocabularies.UI.v1.FieldGroup" Qualifier="General">
  ...
</Annotation>

<!-- Reference from a Facet using AnnotationPath -->
<PropertyValue Property="AnnotationPath" String="@com.sap.vocabularies.UI.v1.FieldGroup#General"/>
```

**STEP**: 6 — Related reference for prefilled/default values

**DESCRIPTION**: When creating entities or prefilling action parameters, you may also want to set default values. See the related documentation file for DefaultValuesFunction usage.

**LANGUAGE**: Markdown / Reference

**CODE**:
```text
Related information:
Prefilling Fields Using the DefaultValuesFunction
File: prefilling-fields-using-the-defaultvaluesfunction-5ada91c.md
```
--------------------------------

**TITLE**: Configuring Overview Page App Extensions (Fiori elements)

**INTRODUCTION**: This guide shows how to extend and customize the Overview Page (OVP) card and filter areas in a Fiori elements application. It includes concrete file locations, sample fragments, controller code and example manifest snippets you can copy and adapt. Use these steps to inject UI5 fragments/controllers into the OVP filter and card areas and to register custom card definitions in the manifest.

**TAGS**: fiori-elements, ovp, sapui5, manifest, extension, card, filter, fragment, controller

**STEP**: 1 — Create a fragment for the filter area

**DESCRIPTION**: Add a UI5 fragment that will be injected into the OVP filter area. Save under webapp/extension/Filter.fragment.xml. The fragment contains controls and IDs that your extension controller will use.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- File: webapp/extension/Filter.fragment.xml -->
<core:FragmentDefinition
  xmlns:core="sap.ui.core"
  xmlns:m="sap.m">
  <m.VBox id="extFilterVBox" renderType="Bare">
    <m.Label text="Custom Filter" />
    <m.Input id="extFilterInput" placeholder="Enter value" />
    <m.Button text="Apply" press=".onApplyFilter" />
  </m.VBox>
</core:FragmentDefinition>
```

**STEP**: 2 — Create a fragment for the card area (optional)

**DESCRIPTION**: Add a fragment that will be injected into the OVP card area or used inside a custom card. Save under webapp/extension/Card.fragment.xml.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- File: webapp/extension/Card.fragment.xml -->
<core:FragmentDefinition
  xmlns:core="sap.ui.core"
  xmlns:m="sap.m">
  <m.VBox id="extCardVBox" renderType="Bare">
    <m.Text text="Custom Card content" />
    <!-- Add your layout and binding controls here -->
  </m.VBox>
</core:FragmentDefinition>
```

**STEP**: 3 — Add a controller for your extension logic

**DESCRIPTION**: Implement the controller referenced by your fragment to handle UI events and to apply filters or interact with models. Save under webapp/extension/Filter.controller.js.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// File: webapp/extension/Filter.controller.js
sap.ui.define([
  "sap/ui/core/mvc/Controller",
  "sap/ui/model/Filter",
  "sap/ui/model/FilterOperator"
], function(Controller, Filter, FilterOperator) {
  "use strict";
  return Controller.extend("my.namespace.extension.Filter", {
    onInit: function() {
      // Initialization logic if needed
    },

    onApplyFilter: function() {
      var sValue = this.byId("extFilterInput").getValue();
      // Example: create filter and apply to a list/table in the OVP card via model binding
      // Adapt the target path and control lookup per your app structure
      var oFilter = new Filter("MyProperty", FilterOperator.EQ, sValue);

      // Example of dispatching an event, setting a model property, or finding a control and applying a filter
      // Option A: publish to an event bus (recommended if multiple components need it)
      var oEventBus = sap.ui.getCore().getEventBus();
      oEventBus.publish("my.namespace", "customFilterApplied", { filter: oFilter });

      // Option B: directly set parameters on a model or target control
      // var oList = sap.ui.getCore().byId("idOfTargetList");
      // if (oList && oList.getBinding("items")) {
      //   oList.getBinding("items").filter([oFilter]);
      // }
    }
  });
});
```

**STEP**: 4 — Register your fragments as view extensions in manifest.json

**DESCRIPTION**: Register the fragments under sap.ui5.viewExtensions in the application's manifest to inject them into the OVP. Confirm the correct view name / extension point keys for your OVP template (the examples below use common placeholders — update them to match your template's views/extension points).

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui5": {
    "viewExtensions": {
      "sap.ovp.app.Main": {
        "ovpFilterArea": {
          "className": "sap.ui.core.Fragment",
          "fragment": "extension.Filter"
        },
        "ovpCardsArea": {
          "className": "sap.ui.core.Fragment",
          "fragment": "extension.Card"
        }
      }
    }
  }
}
```

**STEP**: 5 — Define custom card(s) in the manifest (sap.ovp)

**DESCRIPTION**: Configure custom cards in the "sap.ovp" section of manifest.json. Use "template" for built-in OVP card templates or attach a custom component under "component". Adjust "entitySet", "settings", and model names as required by your app.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ovp": {
    "cards": {
      "MyCustomCard": {
        "template": "sap.ovp.cards.list",
        "settings": {
          "title": "My Custom Card",
          "subTitle": "",
          "entitySet": "MyEntitySet",
          "selectionAnnotationPath": ""
        },
        "model": "mainModel",
        "component": {
          "name": "my.namespace.custom.card",
          "settings": {
            // custom component settings
          }
        }
      }
    },
    "globalFilter": {
      "filters": [
        {
          "label": "Custom Filter",
          "path": "MyProperty"
        }
      ]
    }
  }
}
```

**STEP**: 6 — Implement the custom card component (optional)

**DESCRIPTION**: If you registered a custom component for a card, implement it under webapp/card (or the namespace you used). Provide Component.js, view(s), and controller(s) for the custom card. Example file paths:
- webapp/card/Component.js
- webapp/card/view/CardView.view.xml
- webapp/card/controller/CardView.controller.js

**LANGUAGE**: JavaScript / XML

**CODE**:
```javascript
// Example: webapp/card/Component.js (skeleton)
sap.ui.define(["sap/ui/core/UIComponent"], function(UIComponent) {
  "use strict";
  return UIComponent.extend("my.namespace.custom.card.Component", {
    metadata: {
      manifest: "json"
    },
    init: function() {
      UIComponent.prototype.init.apply(this, arguments);
    }
  });
});
```

**STEP**: 7 — Build, deploy and test

**DESCRIPTION**: After adding fragments, controllers and updating manifest.json:
- Rebuild or reload the app (ui5 tooling / Grunt / local server).
- Open the Overview Page and confirm:
  - The filter fragment is visible in the filter area and events call your controller.
  - The card fragment/component renders in the card area.
- Debug via browser console and network to verify models and bindings.

**NOTE**: Verify exact view names and extension point keys used by your OVP template (the manifest viewExtension keys vary by Fiori elements version). Replace placeholder view names (e.g., "sap.ovp.app.Main", "ovpFilterArea", "ovpCardsArea") with the values used in your project template.
--------------------------------

**TITLE**: Configuring Overview Pages Using Runtime Capabilities (Rearrange, Hide, Resize, Filter Cards)

**INTRODUCTION**: Configure runtime behavior of Fiori overview pages so end users can rearrange, hide/show, resize, and filter cards. Includes end-user actions and developer manifest.json settings to enable card resizing and default sizing.

**TAGS**: fiori-elements-framework, overview-page, cards, manifest.json, personalization, runtime-capabilities, resize, filters

**STEP**: 1 — Rearranging Cards (End user)
**DESCRIPTION**: Allow end users to rearrange cards on an overview page via drag-and-drop or keyboard. Provide guidance for using ClickLock (Windows) to enable click-and-drag without holding the mouse button. Note constraints and behaviors:
- Interaction: drag-and-drop with mouse; or press Ctrl + Arrow keys to move focus and re-order.
- ClickLock (optional): enable in Windows to single-click, move, then second-click to commit.
  - Open Settings → Bluetooth and Devices → Touchpad
  - Click "More touchpad settings" → "Mouse Properties" dialog
  - Check "Turn on ClickLock"
- Limitations and best practices:
  - Personalization only retained for cards with same screen resolution and size.
  - Browser zoom must be 100% (default).
  - When moving a card, only the moved card’s target location is guaranteed to be saved; other cards auto-fit. To pin specific locations for all cards, move each card at least once.
**LANGUAGE**: text
CODE:
```text
(No code required — end-user interaction and OS settings)
```

**STEP**: 2 — Control Visibility of Cards (End user)
**DESCRIPTION**: Steps for end users to hide or show cards on the overview page and to reset to default view:
1. In the header bar, click/tap the Options icon → Manage Cards.
2. Use checkboxes to hide or show the relevant cards.
3. Click OK to save.
4. To reset to default, open Manage Cards and click Reset.
**LANGUAGE**: text
CODE:
```text
(No code required — UI steps)
```

**STEP**: 3 — Resize Cards (Developer + End user)
**DESCRIPTION**: End users can resize cards horizontally and vertically at runtime when the application enables resizable container layout. Developers must set containerLayout: "resizable" in manifest.json for the card(s). Optionally provide a default size via defaultSpan in manifest.json to load a card with specific default rows/cols.
- Prerequisite (developer): Set containerLayout: "resizable" for the relevant card(s) in manifest.json.
- End-user capability: Once enabled, users can drag resize handles to change a card’s width/height in the overview.
- Limitations: Resizing of stack cards is not supported.
- File: manifest.json — update card settings section for the specific card ID.
**LANGUAGE**: JSON
CODE:
```json
{
  "sap.ovp": {
    "cards": {
      "myCardId": {
        "component": {
          "name": "sap.ovp.cards.list"
        },
        "settings": {
          "containerLayout": "resizable",
          "defaultSpan": {
            "rows": 7,
            "cols": 2
          }
        }
      }
    }
  }
}
```

**STEP**: 4 — Preserve Original defaultSpan Example (Developer)
**DESCRIPTION**: Keep the original sample snippet for quick copy/paste into manifest.json when setting default card span.
**LANGUAGE**: JSON
CODE:
```json
"defaultSpan": {
  "rows": 7,
  "cols": 2
}
```

**STEP**: 5 — Filter Information Displayed in Cards (End user / Developer guidance)
**DESCRIPTION**: End users can apply filters on the overview page; filters affect all relevant cards showing that field. Example use case: filter to display only orders where supply date has passed. Implementation notes:
- End users: use the page’s filter controls (filter bar or filter panel) to define values or ranges for fields; changes propagate to all cards that consume the filtered field.
- Developers: ensure cards expose and bind the relevant OData properties/parameters so the overview page filter context is applied to each card’s data requests.
**LANGUAGE**: text
CODE:
```text
(No single code snippet provided — ensure cards are bound to OData model properties and support filter propagation from the overview page)
```
--------------------------------

**TITLE**: Configuring Sort Properties for SAP Fiori Elements Cards

**INTRODUCTION**: This guide shows how to configure sorting for Fiori Elements cards (list, table, stack) using either card-level settings in manifest.json or PresentationVariant annotations (XML / ABAP CDS / CAP CDS). Use manifest.json for quick card-local sorting; use PresentationVariant to share sort definitions across applications and to define multiple sort properties.

**TAGS**: fiori-elements-framework, ovp, sap, presentation-variant, sorting, manifest.json, CDS, annotations, OVP

**STEP**: 1 — Configure card-level sorting in manifest.json

**DESCRIPTION**: For list, table, and stack OVP cards, set "sortBy" and "sortOrder" in the card's "settings" block inside the application's manifest.json. Use the entity property name in "sortBy". "sortOrder" accepts "ascending" or "descending". This is a card-local configuration.

**LANGUAGE**: JSON

**CODE**:
```json
"sap.ovp": {
    ...
    "cards": {
        ...
        "card04": {
            "model": "ZCD204_EPM_DEMO_SRV",
            "template": "sap.ovp.cards.list",
            "settings": {
                "sortBy": "Price",
                "sortOrder": "descending",
                "listFlavor": "bar",
                "annotationPath": "com.sap.vocabularies.UI.v1.LineItem#bar",
                "identificationAnnotationPath": "com.sap.vocabularies.UI.v1.Identification#bar",
                "category": "{{card04_category}}",
                "entitySet": "Products"
            }
        },
        ...
    }
}
```

**STEP**: 2 — Configure sorting using PresentationVariant (EDMX / XML annotation)

**DESCRIPTION**: Use the OData PresentationVariant annotation com.sap.vocabularies.UI.v1.PresentationVariant to define sort order (and grouping/visualizations). Define SortOrder as a collection of Record entries; each Record sets Property (the field) and Descending (Boolean). Multiple records define multi-level sort.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="com.sap.vocabularies.UI.v1.PresentationVariant" Qualifier="Eval_by_Country">
   <Record>
      <PropertyValue Property="GroupBy">
         <Collection>
            <PropertyPath>Country</PropertyPath>
         </Collection>
      </PropertyValue>
      <PropertyValue Property="SortOrder">
         <Collection>
            <Record>
               <PropertyValue Property="Property" PropertyPath="Sales" />
               <PropertyValue Property="Descending" Boolean="true" />
            </Record>
         </Collection>
      </PropertyValue>
      <PropertyValue Property="Visualizations">
         <Collection>
            <AnnotationPath>@UI.Chart#Eval_by_Country</AnnotationPath>
         </Collection>
      </PropertyValue>
   </Record>
</Annotation>
```

**STEP**: 3 — Configure sorting in ABAP CDS using @UI.PresentationVariant

**DESCRIPTION**: In ABAP CDS views, annotate the view with @UI.PresentationVariant to specify groupBy, sortOrder, visualizations, and qualifier. Use 'by' for the sort property; include qualifier if needed. Multiple entries in sortOrder produce multiple sort keys.

**LANGUAGE**: ABAP CDS

**CODE**:
```
@UI.PresentationVariant: [
  {
    groupBy: [
      'COUNTRY'
    ],
    sortOrder: [
      {
        by: 'SALES'
      }
    ],
    visualizations: [
      {
        type: #AS_CHART,
        qualifier: 'Eval_by_Country'
      }
    ],
    qualifier: 'Eval_by_Country'
  }
]
annotate view VIEWNAME with { 

}
```

**STEP**: 4 — Configure sorting in CAP CDS (Core Data Services for CAP)

**DESCRIPTION**: In CAP CDS, define a UI.PresentationVariant block with GroupBy, SortOrder, and Visualizations. Use Property and Descending inside SortOrder entries. This integrates with OData metadata and Fiori Elements.

**LANGUAGE**: CDS

**CODE**:
```
UI.PresentationVariant #Eval_by_Country : {
    GroupBy : [
        Country
    ],
    SortOrder : [
        {
            Property : Sales,
            Descending : true
        },
    ],
    Visualizations : [
        '@UI.Chart#Eval_by_Country'
    ]
},
```

**STEP**: 5 — Notes and cross-application behavior

**DESCRIPTION**: PresentationVariant annotations can be shared by overview pages to target Fiori Elements applications; target applications can consume these parameters to apply the same sorting. For external navigation and integrating shared sort parameters, see the Overview Pages external navigation documentation.

**LANGUAGE**: text

**CODE**:
```
Note:
Overview pages allow you to share sort parameters defined in the presentation variant to any target SAP Fiori Elements application. The target applications can use these parameters to sort data accordingly. For more information, see configuring-external-navigation-1d4a0f9.md.
```
--------------------------------

**TITLE**: Configuring Tables (Fiori Elements OData V4 — UI.LineItem and UI.PresentationVariant)

**INTRODUCTION**: Use OData V4 annotations to configure list/table visualizations in SAP Fiori Elements. Define UI.LineItem to control table columns and UI.PresentationVariant to control sorting, visualizations, and default presentation. Add these annotations to your OData annotation file (annotation XML or equivalent) and ensure your app's manifest.json references that annotation file.

**TAGS**: fiori-elements-framework, odata-v4, annotations, UI.LineItem, UI.PresentationVariant, manifest.json, tables, smarttable

**STEP**: 1 — Use annotations from manifest.json
**DESCRIPTION**: Ensure your annotation file (annotation XML or service metadata) containing UI.LineItem / UI.PresentationVariant is referenced by your application. The manifest.json should reference the annotation file so Fiori Elements picks up the annotations at runtime. Use annotations to control table columns, sorting, and visualizations.
**LANGUAGE**: JSON / Manifest (instructional)
**CODE**:
```json
// Ensure your annotation file is referenced in the manifest.json (example conceptual entry).
// Exact manifest paths vary by project setup; adapt as needed to reference your annotation XML.
{
  "sap.app": {
    "dataSources": {
      "mainService": {
        "uri": "/sap/opu/odata/sap/YOUR_SERVICE_SRV/",
        "type": "OData",
        "settings": {
          "annotations": [
            {
              "src": "annotations.xml",
              "type": "XML"
            }
          ]
        }
      }
    }
  }
}
```

**STEP**: 2 — Define UI.PresentationVariant to set default sorting and visualizations
**DESCRIPTION**: Add a UI.PresentationVariant annotation to specify presentation metadata such as Text, SortOrder, and Visualizations. Reference the UI.LineItem (by qualifier) inside Visualizations to assign the LineItem as the visualization for the presentation variant.
**LANGUAGE**: XML
**CODE**:
```xml
<Annotation Term="UI.PresentationVariant">
  <Record>
    <PropertyValue Property="Text" String="Default"/>
    <PropertyValue Property="SortOrder">
      <Collection>
        <Record Type="Common.SortOrderType">
          <PropertyValue Property="Property" PropertyPath="NetAmount"/>
          <PropertyValue Property="Descending" Bool="true"/>
        </Record>
      </Collection>
    </PropertyValue>
    <PropertyValue Property="Visualizations">
      <Collection>
         <AnnotationPath>@UI.LineItem#Default</AnnotationPath>
      </Collection>
   </PropertyValue>
  </Record>
</Annotation>
```

**STEP**: 3 — Define UI.LineItem to configure table columns and actions
**DESCRIPTION**: Implement a UI.LineItem annotation (use Qualifier if multiple variants are needed) to define the table columns (UI.DataField), intent-based navigation (UI.DataFieldForIntentBasedNavigation), and actions (UI.DataFieldForAction). Use UI.Importance to mark Important columns. Use Determining and InvocationGrouping on actions where applicable.
**LANGUAGE**: XML
**CODE**:
```xml
<Annotation Term="UI.LineItem" Qualifier="Default">
  <Collection>
    <Record Type="UI.DataField">
      <PropertyValue Property="Value" Path="DeliveryCalendarYear"/>
        <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
    </Record>
    <Record Type="UI.DataField">
      <PropertyValue Property="Value" Path="DeliveryCalendarMonth"/>
        <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
    </Record>
    <Record Type="UI.DataField">
      <PropertyValue Property="Value" Path="SalesOrder"/>
        <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
    </Record>
    <Record Type="UI.DataFieldForIntentBasedNavigation">
      <PropertyValue Property="Label" String="Manage Sales Order"/>
      <PropertyValue Property="SemanticObject" String="EPMSalesOrder"/>
      <PropertyValue Property="Action" String="manage_st"/>
      <PropertyValue Property="RequiresContext" Bool="false"/>
        <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
    </Record>
    <Record Type="UI.DataField">
      <PropertyValue Property="Label" String="Item"/>
      <PropertyValue Property="Value" Path="SalesOrderItem"/>
      <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
    </Record>
    <Record Type="UI.DataField">
      <PropertyValue Property="Value" Path="Product"/>
      <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
    </Record>
    <Record Type="UI.DataFieldForAction">
         <PropertyValue Property="Label" String="Copy"/>
         <PropertyValue Property="Action" String="CZ_EASILINEITEMS_SADL_CDS.CZ_EASILINEITEMS_SADLType/Copy"/>
         <PropertyValue Property="InvocationGrouping" EnumMember="UI.OperationGroupingType/Isolated"/>
         <PropertyValue Property="Determining" Bool="true"/>
    </Record>
    <Record Type="UI.DataFieldForIntentBasedNavigation">
         <PropertyValue Property="Label" String="Manage Products (STTA)"/>
         <PropertyValue Property="SemanticObject" String="EPMProduct"/>
         <PropertyValue Property="Action" String="manage_st"/>
         <PropertyValue Property="Determining" Bool="true"/>
     </Record>  
</Collection>
</Annotation>
```

**STEP**: 4 — Additional guidance and references
**DESCRIPTION**: Use these references for additional table-related features and integration details. Consult OData V2 smart table docs if working with V2 implementations.
**LANGUAGE**: Links / References
**CODE**:
```text
- Smart table (OData V2): https://ui5.sap.com/#/api/sap.ui.comp.smarttable.SmartTable
- Tables: Which One Should I Choose? (guidance): ../10_More_About_Controls/tables-which-one-should-i-choose-148892f.md
- Configuring Default Settings (which PresentationVariant is picked): configuring-default-settings-visualizations-sort-order-filter-values-49a6ba5.md

Related Information:
- Maintaining Standard Texts for Tables: maintaining-standard-texts-for-tables-aacfac5.md
- Maintaining Standard Texts for Charts: maintaining-standard-texts-for-charts-37cd601.md
- Setting the Default Column Width: setting-the-default-column-width-a765253.md
- Extension Points for Tables: extension-points-for-tables-d525522.md
```
--------------------------------

**TITLE**: Configure Application Title for SAP Fiori Elements (List Report, Object Page, Overview/Analytical Pages)

**INTRODUCTION**: This guide shows exactly how to configure the application title that appears in the SAP Fiori Launchpad shell bar and on page headers for List Report and Object Page apps (also applicable to Overview and Analytical List pages). The title is controlled by the @UI.headerInfo.typeName (and optional typeNamePlural) UI annotation. Examples for CDS (ABAP CDS) and OData annotation XML are provided.

**TAGS**: fiori-elements-framework, annotations, UI.headerInfo, CDS, odata, application-title, list-report, object-page, overview-page, analytical-list-page

**STEP**: 1 — Configure title in CDS (ABAP CDS)

**DESCRIPTION**: Add or update the @UI.headerInfo annotation in your ABAP CDS entity definition. Use TypeName to set the singular application title and TypeNamePlural for plural forms. Place this annotation on the entity that is exposed to the OData service and consumed by the Fiori Elements app.

**LANGUAGE**: CDS

**CODE**:
```cds
@AbapCatalog.sqlViewName: 'ZPO_HEADER'
@EndUserText.label: 'Purchase Order'
@UI.headerInfo: {
  typeName: 'Purchase Order',
  typeNamePlural: 'Purchase Orders'
}
entity Z_I_PurchaseOrder {
  key PurchaseOrderID : abap.char(10);
  // ... other fields ...
}
```

**STEP**: 2 — Configure title in OData annotation XML (vocab UI) — when using separate annotation files

**DESCRIPTION**: If you maintain annotations as external XML files (CSDL annotation files) instead of CDS, set the UI.HeaderInfo annotation for the target entity. Use PropertyValue elements for TypeName and TypeNamePlural. Ensure the Annotation block targets the correct EntityType (Namespace.EntityType).

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="MyService.PurchaseOrderType">
  <Annotation Term="UI.HeaderInfo">
    <Record>
      <PropertyValue Property="TypeName" String="Purchase Order"/>
      <PropertyValue Property="TypeNamePlural" String="Purchase Orders"/>
    </Record>
  </Annotation>
</Annotations>
```

**STEP**: 3 — Where to place the annotation (files / deployment)

**DESCRIPTION**: Place the CDS annotation within your ABAP CDS source file for the entity exposed by the OData service. For external annotation files, place the XML annotation file in your OData service project and register it so the service metadata exposes the UI annotations (for example, include in annotation.xml bundled with the service or reference it in the service registration). After deployment, Fiori Elements will pick up the UI.headerInfo values from the service metadata.

**LANGUAGE**: JSON (manifest.json example reference)

**CODE**:
```json
// In manifest.json (SAPUI5/Fiori Elements app), ensure the OData service registration points to your service:
// No direct title setting here; app uses @UI.headerInfo from the OData service metadata.
{
  "sap.app": {
    "dataSources": {
      "mainService": {
        "uri": "/sap/opu/odata/sap/Z_MY_SERVICE_SRV/",
        "type": "OData",
        "settings": { "odataVersion": "2.0" }
      }
    }
  }
}
```

**STEP**: 4 — Notes and additional features

**DESCRIPTION**: 
- The @UI.headerInfo.typeName (and typeNamePlural) controls the application title shown in the shell bar and page headers (List Report, Object Page). 
- For SAP Fiori Elements (OData V2), the same annotation can be used to configure titles on Overview pages and Analytical List pages. 
- For more header customization (titles, subtitles, dynamic titles), see the Object Page header configuration documentation and the "Sample Code" section in Setting Up the Object Page Header:
  - setting-up-the-object-page-header-cce93e6.md#loiocce93e6f067a4133a8430c4f5d7b8fc7__sample_code
  - setting-the-table-header-f996207.md
  - configuring-the-object-page-header-title-and-description-333f850.md

**LANGUAGE**: Plain

**CODE**:
```text
Tips:
- Use static strings for consistent titles, or use localized texts (i18n) in CDS or annotation files where supported.
- After changing annotations, redeploy the service and refresh the Fiori app / clear browser cache to see updates.
```
--------------------------------

**TITLE**: Configure Chart-Only View as Default for Analytical List Page (ALP)

**INTRODUCTION**: Step-by-step actionable instructions and exact annotation/manifest code snippets to configure the Analytical List Page (ALP) to render the chart-only view as the default. Includes manifest settings (OData V2/V4), SelectionPresentationVariant, PresentationVariant, UI.Chart annotations, chartPresentationQualifier, semantic object annotations, enabling data labels, and stable color mapping for chart dimension values.

**TAGS**: fiori-elements-framework, ALP, AnalyticalListPage, chart-only, manifest.json, UI.SelectionPresentationVariant, UI.PresentationVariant, UI.Chart, ODataV2, ODataV4, CDS, CAP, ABAP, semantic-object, stable-colors

STEP: 1 — Configure manifest.json for OData V2 to load ALP chart-only view
DESCRIPTION: Add or update the sap.ui.generic.app.pages entry in manifest.json for the ALP component. Place component settings under the relevant page's component to render ALP and set qualifiers where required.
LANGUAGE: JSON
CODE:
```json
"sap.ui.generic.app": {
   "pages": [
      {
         "entitySet": "SEPMRA_C_ALP_SlsOrdItemCube",
         "component": {
            "name": "sap.suite.ui.generic.template.AnalyticalListPage",
            "list": true,
            "settings": {
                  "qualifier":"DefaultVariant"
            }
         }
      }
   ]
}
```

STEP: 2 — Configure manifest.json for OData V4 to set the default view to chart-only
DESCRIPTION: For OData V4 ALP, set views.paths and set "defaultPath": "primary" so the primary (chart) path is loaded by default.
LANGUAGE: JSON
CODE:
```json
"views": {
    "paths": [{
        "primary": [
            {
                "annotationPath": "com.sap.vocabularies.UI.v1.PresentationVariant"
            }
        ],
        "secondary": [
            {
                "annotationPath": "com.sap.vocabularies.UI.v1.LineItem"
            }
        ],
        "defaultPath": "primary"
    }]
},
```

STEP: 3 — Define SelectionPresentationVariant annotation (Qualifier="DefaultVariant")
DESCRIPTION: Define SelectionPresentationVariant to link a selection variant and a presentation variant (presentation qualifier "DefaultPresentationVariant") and give the overall qualifier "DefaultVariant". Use the variant that the ALP manifest references.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.SelectionPresentationVariant" Qualifier="DefaultVariant">
  <Record>
    <PropertyValue Property="Text" String="Product Financial Analysis"/>
    <PropertyValue Property="SelectionVariant" Path="@UI.SelectionVariant#DefaultSelectionVariant"/>
    <PropertyValue Property="PresentationVariant" Path="@UI.PresentationVariant#DefaultPresentationVariant"/>
  </Record>
</Annotation>
```
LANGUAGE: ABAP CDS
CODE:
```abap
@UI.SelectionPresentationVariant: [
  {
    text: 'Product Financial Analysis',
    selectionvariantqualifier: 'DefaultSelectionVariant',
    presentationvariantqualifier: 'DefaultPresentationVariant',
    qualifier: 'DefaultVariant'
  }
]
annotate view VIEWNAME with {

}
```
LANGUAGE: CAP CDS
CODE:
```cds
UI.SelectionPresentationVariant #DefaultVariant : {
    Text : 'Product Financial Analysis',
    SelectionVariant : ![@UI.SelectionVariant#DefaultSelectionVariant],
    PresentationVariant : ![@UI.PresentationVariant#DefaultPresentationVariant]
}
```

STEP: 4 — Define PresentationVariant annotation (Qualifier="DefaultPresentationVariant")
DESCRIPTION: Define the PresentationVariant that sets sort order and lists Visualizations pointing to the chart annotation qualifier used by the ALP.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.PresentationVariant" Qualifier="DefaultPresentationVariant">
  <Record>
    <PropertyValue Property="Text" String="Default"/>
    <PropertyValue Property="SortOrder">
      <Collection>
        <Record Type="Common.SortOrderType">
          <PropertyValue Property="Property" PropertyPath="NetAmount"/>
          <PropertyValue Property="Descending" Bool="true"/>
        </Record>
      </Collection>
    </PropertyValue>
    <PropertyValue Property="Visualizations">
      <Collection>
         <AnnotationPath>@UI.Chart#Default</AnnotationPath>
      </Collection>
   </PropertyValue>
  </Record>
</Annotation>
```
LANGUAGE: ABAP CDS
CODE:
```abap
@UI.PresentationVariant: [
  {
    text: 'Default',
    sortOrder: [
      {
        by: 'NETAMOUNT',
        direction: #DESC
      }
    ],
    visualizations: [
      {
        type: #AS_CHART,
        qualifier: 'Default'
      }
    ],
    qualifier: 'DefaultPresentationVariant'
  }
]
annotate view VIEWNAME with {

}
```
LANGUAGE: CAP CDS
CODE:
```cds
UI.PresentationVariant #DefaultPresentationVariant : {
    Text : 'Default',
    SortOrder : [
        {
            $Type : 'Common.SortOrderType',
            Property : NetAmount,
            Descending : true
        },
    ],
    Visualizations : [
        '@UI.Chart#Default'
    ]
}
```

STEP: 5 — Set chartPresentationQualifier in manifest.json to pick a PresentationVariant
DESCRIPTION: Use chartPresentationQualifier in the component settings (manifest.json) to instruct ALP to render the chart defined by a specific PresentationVariant qualifier.
LANGUAGE: JSON
CODE:
```json
"settings": { 
  "chartPresentationQualifier": "qualifier"
}
```
NOTE: Place this under the ALP component settings entry (sap.ui.generic.app.pages[n].component.settings).

STEP: 6 — Define UI.Chart annotation (Qualifier="Default")
DESCRIPTION: Define the UI.Chart annotation (XML, ABAP CDS or CAP CDS) with dimensions, measures, roles, ChartType and qualifier "Default". This annotation is referenced from the PresentationVariant Visualizations list.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.Chart" Qualifier="Default">
  <Record Type="UI.ChartDefinitionType">
    <PropertyValue Property="Title" String="Revenue by Customer"/>
    <PropertyValue Property="Description" String="Net Revenue by Customer"/>
    <PropertyValue Property="ChartType" EnumMember="UI.ChartType/Column"/>
    <PropertyValue Property="Dimensions">
      <Collection>
        <PropertyPath>SoldToParty</PropertyPath>
        <PropertyPath>DeliveryCalendarYear</PropertyPath>
      </Collection>
     </PropertyValue>
     <PropertyValue Property="DimensionAttributes">
       <Collection>
          <Record Type="UI.ChartDimensionAttributeType">
             <PropertyValue Property="Dimension" PropertyPath="SoldToParty"/>
             <PropertyValue Property="Role" EnumMember="UI.ChartDimensionRoleType/Category"/>
          </Record>
          <Record Type="UI.ChartDimensionAttributeType">
             <PropertyValue Property="Dimension" PropertyPath="DeliveryCalendarYear"/>
             <PropertyValue Property="Role" EnumMember="UI.ChartDimensionRoleType/Series"/>
          </Record>
       </Collection>
     </PropertyValue>
     <PropertyValue Property="Measures">
       <Collection>
         <PropertyPath>NetAmount</PropertyPath>
       </Collection>
     </PropertyValue>
     <PropertyValue Property="MeasureAttributes">
       <Collection>
          <Record Type="UI.ChartMeasureAttributeType">
             <PropertyValue Property="Measure" PropertyPath="NetAmount"/>
             <PropertyValue Property="Role" EnumMember="UI.ChartMeasureRoleType/Axis1"/>
             <PropertyValue Property="DataPoint" AnnotationPath="@UI.DataPoint#NetAmount"/>
          </Record>
       </Collection>
     </PropertyValue>
   </Record>
</Annotation>
```
LANGUAGE: ABAP CDS
CODE:
```abap
@UI.Chart: [
  {
    title: 'Revenue by Customer',
    description: 'Net Revenue by Customer',
    chartType: #COLUMN,
    dimensions: [
      'SOLDTOPARTY',
      'DELIVERYCALENDARYEAR'
    ],
    dimensionAttributes: [
      {
        dimension: 'SoldToParty',
        role: #CATEGORY
      },
      {
        dimension: 'DeliveryCalendarYear',
        role: #SERIES
      }
    ],
    measures: [
      'NETAMOUNT'
    ],
    measureAttributes: [
      {
        measure: 'NetAmount',
        role: #AXIS_1,
        asDataPoint: true
      }
    ],
    qualifier: 'Default'
  }
]
annotate view VIEWNAME with {

}
```
LANGUAGE: CAP CDS
CODE:
```cds
UI.Chart #Default : {
    $Type : 'UI.ChartDefinitionType',
    Title : 'Revenue by Customer',
    Description : 'Net Revenue by Customer',
    ChartType : #Column,
    Dimensions : [
        SoldToParty,
        DeliveryCalendarYear
    ],
    DimensionAttributes : [
        {
            $Type : 'UI.ChartDimensionAttributeType',
            Dimension : SoldToParty,
            Role : #Category
        },
        {
            $Type : 'UI.ChartDimensionAttributeType',
            Dimension : DeliveryCalendarYear,
            Role : #Series
        },
    ],
    Measures : [
        NetAmount
    ],
    MeasureAttributes : [
        {
            $Type : 'UI.ChartMeasureAttributeType',
            Measure : NetAmount,
            Role : #Axis1,
            DataPoint : '@UI.DataPoint#NetAmount'
        }
    ]
}
```

STEP: 7 — Semantic object annotation for chart-based navigation
DESCRIPTION: Annotate the dimension property with a SemanticObject to allow semantic navigation from chart data points. The smart chart uses the semantic object to build navigation links and pass selection context to target apps.
LANGUAGE: XML
CODE:
```xml
<Annotations xmlns=http://docs.oasis-open.org/odata/ns/edm Target="Emp_Line_Item.Item/Cost_Center">
	<Annotation Term="com.sap.vocabularies.Common.v1.SemanticObject" String="CostCenter"/>
</Annotations>
```
LANGUAGE: ABAP CDS
CODE:
```abap
annotate view ITEM with {
  @Consumption.semanticObject: 'CostCenter'
  cost_center;
}
```

STEP: 8 — Enable data labels in smart charts and KPI cards via manifest.json
DESCRIPTION: Enable showDataLabel under chartSettings in the ALP component settings of manifest.json. Default is false; set to true to show numeric labels on chart points and KPI cards.
LANGUAGE: JSON
CODE:
```json
"pages": [{
  "entitySet": "SEPMRA_C_ALP_SlsOrdItemCubeALPResults",
  "component": {
      "name": "sap.suite.ui.generic.template.AnalyticalListPage",
      "list": true,
      "settings": {
          "chartSettings": {
              "showDataLabel": true
          }
      }
  }
}]
```

STEP: 9 — Enable stable colors for chart dimension values and define dimension color mapping
DESCRIPTION: Turn on enableStableColors and define dimensionSettings in manifest.json.chartSettings. Map specific dimension values to colors and legend indices. Include a "default" color fallback.
LANGUAGE: JSON
CODE:
```json
"chartSettings": {
     "showDataLabel": true,
     "enableStableColors": true,
     "dimensionSettings": {
          "CostElement": {  // Dimension Name
              "400020": { //  Dimension Value
                   "color":"red",
                   "legendIndex":0
                        },
              "421000": {
                   "color":"sapUiChartPaletteSemanticNeutral",
                   "legendIndex":1
                        },
              "417900": {
                   "color":"blue",
                   "legendIndex":2
                        }
                         },
          "Customer": {
               "C000013": {
                    "color": "red",
                    "legendIndex": 0
                          },
               "C000085": {
                    "color": "blue",
                    "legendIndex": 0
                          }
                      },
          "default" : {
               "color": "green"
                      }
        }
  }
```

STEP: 10 — Chart toolbar operations and recommendations
DESCRIPTION: Chart toolbar offers Settings (modify dimensions/measures/roles/sort) and View By (change grouping dimension) — ensure PresentationVariant and Chart annotations include intended dimensions/measures. Recommendation: Avoid deprecated determining actions; use modern alternatives for action handling.
LANGUAGE: JSON
CODE:
```json
// No additional code required. Ensure UI.Chart and UI.PresentationVariant provide
// the correct dimensions/measures and that manifest settings reference the correct qualifiers.
```


--------------------------------

**TITLE**: Configuring the Analytical List Page Content Area (Annotations + manifest.json)

**INTRODUCTION**: This guide shows how to configure the Analytical List Page (ALP) content area to render chart and table content. It includes annotation examples for UI.Chart and UI.LineItem (OData V2) and a minimal manifest.json snippet to set the content area title. Use the annotations to control the chart/table rendering and use manifest settings to provide a content title and enable content tile / KPI behavior.

**TAGS**: fiori-elements, analytical-list-page, manifest.json, annotations, UI.Chart, UI.LineItem, OData V2, FilterableKPI

STEP: 1 — Provide UI.Chart and UI.LineItem annotations for the main entity set

DESCRIPTION: Add OData V2 annotations to define the chart visualization (UI.Chart) and the table columns (UI.LineItem). The UI.Chart annotation defines chartType, dimensions and measures. The UI.LineItem annotation defines the table columns and their labels. Replace target EntityType and property names with your service-specific names.

LANGUAGE: XML

CODE:
```xml
<!-- File: annotations.xml (OData V2 annotations) -->
<Annotations Target="YourService.YourEntityType">
  <!-- Chart definition: set chartType, dimensions and measures -->
  <Annotation Term="UI.Chart">
    <Record>
      <PropertyValue Property="chartType" String="column" />
      <PropertyValue Property="title" String="Revenue by Category" />
      <PropertyValue Property="dimensions">
        <Collection>
          <PropertyPath>ProductCategory</PropertyPath>
        </Collection>
      </PropertyValue>
      <PropertyValue Property="measures">
        <Collection>
          <PropertyPath>TotalRevenue</PropertyPath>
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>

  <!-- LineItem definition: specify the columns shown in the table -->
  <Annotation Term="UI.LineItem">
    <Collection>
      <Record Type="UI.DataField">
        <PropertyValue Property="Value" Path="ProductID" />
        <PropertyValue Property="Label" String="Product ID" />
      </Record>
      <Record Type="UI.DataField">
        <PropertyValue Property="Value" Path="ProductName" />
        <PropertyValue Property="Label" String="Product" />
      </Record>
      <Record Type="UI.DataField">
        <PropertyValue Property="Value" Path="TotalRevenue" />
        <PropertyValue Property="Label" String="Revenue" />
      </Record>
    </Collection>
  </Annotation>
</Annotations>
```

STEP: 2 — Use SelectionPresentationVariant to bind default visualization, sort order and filter behavior (optional)

DESCRIPTION: To set default visualization (chart/table), sort order, or default filter selection, add a UI.SelectionPresentationVariant annotation that links a PresentationVariant (visualizations and sort) with a SelectionVariant. This allows the ALP to honor default view, sorting and filters on initial load.

LANGUAGE: XML

CODE:
```xml
<!-- File: annotations.xml (SelectionPresentationVariant example) -->
<Annotations Target="YourService.YourEntityType">
  <Annotation Term="UI.SelectionPresentationVariant" Qualifier="DefaultView">
    <Record>
      <PropertyValue Property="SelectionVariant">
        <!-- define default filter selection(s) -->
        <Record>
          <PropertyValue Property="SelectOptions">
            <Collection>
              <Record Type="Common.SelectOption">
                <PropertyValue Property="PropertyName" PropertyPath="Region" />
                <PropertyValue Property="Ranges">
                  <Collection>
                    <Record Type="Common.Range">
                      <PropertyValue Property="Sign" String="I"/>
                      <PropertyValue Property="Option" String="EQ"/>
                      <PropertyValue Property="Low" String="EMEA"/>
                    </Record>
                  </Collection>
                </PropertyValue>
              </Record>
            </Collection>
          </PropertyValue>
        </Record>
      </PropertyValue>

      <PropertyValue Property="PresentationVariant">
        <Record Type="UI.PresentationVariant">
          <PropertyValue Property="Visualizations">
            <Collection>
              <!-- reference visualization by property path defined in the service annotations -->
              <PropertyPath>Chart</PropertyPath>
            </Collection>
          </PropertyValue>

          <PropertyValue Property="SortOrder">
            <Collection>
              <Record Type="UI.SortOrder">
                <PropertyValue Property="Property" PropertyPath="TotalRevenue" />
                <PropertyValue Property="Descending" Bool="true" />
              </Record>
            </Collection>
          </PropertyValue>
        </Record>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

STEP: 3 — Set contentTitle in manifest.json to add a content area title

DESCRIPTION: Add a contentTitle under the ALP component settings in manifest.json to display a title above the content area. Place this under the sap.ui.generic.app pages component settings for the page that targets the ALP. Replace the entitySet and title value with your app-specific values.

LANGUAGE: JSON

CODE:
```json
// File: manifest.json (minimal snippet)
{
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "SalesOrderSet",
        "component": {
          "name": "sap.suite.ui.generic.template.AnalyticalListPage",
          "settings": {
            "contentTitle": "Sales Analysis"
            /* If you configure a content tile (FilterableKPI) in the manifest,
               the ALP will show the FilterableKPI view alongside the segmented
               buttons (Hybrid/Chart/Table). See related docs for full tile config. */
          }
        }
      }
    ]
  }
}
```

STEP: 4 — Choose the view mode: Table only, Chart only, or Hybrid

DESCRIPTION: ALP supports three view modes: Table only, Chart only, and Hybrid (chart + table). Control initial/default presentation with either:
- UI.SelectionPresentationVariant (preferred for annotation-driven defaults, see Step 2), or
- ALP manifest/settings (project-specific; check your template version docs if a manifest key is supported for default view).

LANGUAGE: JSON / XML

CODE:
```json
// Use SelectionPresentationVariant (XML example in Step 2) to force default visualization.
// If your project template supports a manifest key for default view, set it there per your template docs.
```

STEP: 5 — Dynamic Page Header: pinnable behavior

DESCRIPTION: The dynamic page header is pinnable when the app uses a responsive table on desktop, hybrid, and medium ('M') devices (table must be responsive). A pin toggle keeps the header content expanded while scrolling. The pin button is NOT available:
- for other table types in ALP, and
- on small ('S') devices (mobile).

LANGUAGE: Plain text

CODE:
```text
Notes:
- Ensure the table type is responsive to enable the header pin toggle on supported devices.
- Pin toggle appears on desktop, hybrid and 'M' size devices only.
```

STEP: 6 — Files and locations summary

DESCRIPTION: Use these files/locations when implementing the configuration.

LANGUAGE: Plain text

CODE:
```text
- Annotations (OData V2): annotations.xml (or service annotations file)
  - Add UI.Chart and UI.LineItem annotations for the target entity type
  - Optionally add UI.SelectionPresentationVariant to control default view/sort/filters

- Manifest: manifest.json
  - Under "sap.ui.generic.app" -> "pages" -> component -> "settings"
  - Set "contentTitle": "<your title>"
  - (Optional) Configure content tile / FilterableKPI per your template docs
```
--------------------------------

**TITLE**: Configure Quick View Content (UI.QuickViewFacets) for SAP Fiori Elements (OData V2 & V4)

**INTRODUCTION**: This document gives concise, action-oriented instructions and examples to configure Quick View content (title area, content area: field groups, contacts, DataPoints, and footer actions) using UI.QuickViewFacets annotations for OData V2 and OData V4. Use these instructions to annotate target entities in XML annotations, ABAP CDS, or CAP CDS so Fiori Elements renders the Quick View popover correctly.

**TAGS**: quickview, ui.quickviewfacets, fiori-elements, annotations, odata-v2, odata-v4, ui.headerinfo, ui.fieldgroup, contact, datapoint, semanticobject, sap-tag

STEP: 1 — Title Area (OData V2)

DESCRIPTION: For OData V2 Quick View header behavior:
- Images: annotate HeaderInfo.ImageUrl and/or HeaderInfo.TypeImageUrl. If both exist, ImageUrl is evaluated first, then TypeImageUrl. Paths including navigation properties are evaluated.
- Title: determine title rendering via TextArrangement (e.g., TextLast, TextOnly).
- Description: must be provided according to TextArrangement. If missing, title font increases and description remains empty.

LANGUAGE: XML

CODE:
```xml

```

STEP: 2 — Content Area: Field Groups (OData V2 & V4)

DESCRIPTION:
- Add zero or multiple field groups via UI.FieldGroup annotations referenced from UI.QuickViewFacets.
- Each ReferenceFacet may have a Label (from the Record Type="UI.ReferenceFacet").
- Field paths evaluate navigation properties.
- Fields support IsEmailAddress, IsUrl, IsPhoneNumber annotations. Links that would create a popover on Quick View are ignored.
- Supported field types:
  - Handled by SmartField: DataField (with criticality), DataFieldWithUrl
  - Handled by Fiori elements: DataFieldWithIntentBasedNavigation

LANGUAGE: XML

CODE:
```xml

```

STEP: 3 — Content Area: Contacts (OData V2 & V4)

DESCRIPTION:
- Add contact facets using UI.ReferenceFacet records that target a com.sap.vocabularies.Communication.v1.Contact annotation.
- Place contacts by position in UI.QuickViewFacets collection.
- If a contact's picture, title, and description match the Quick View title area, the contact title area is not shown.

LANGUAGE: XML

CODE:
```xml

```

STEP: 4 — Content Area: DataPoints (OData V2 & V4)

DESCRIPTION:
- Reference existing UI.DataPoint annotations from UI.QuickViewFacets.
- Place DataPoint facets in any position; the ordering is defined by the collection order.
- DataPoint facets can have a Label (from the ReferenceFacet Record).

LANGUAGE: XML

CODE:
```xml

```

STEP: 5 — Sample Code: Quick View Facets (OData V2) — XML Annotation

DESCRIPTION: Example showing a Quick View with a field group, a contact, and a DataPoint referenced in UI.QuickViewFacets.

LANGUAGE: XML

CODE:
```xml
<Annotations Target="STTA_PROD_MAN.STTA_C_MP_SupplierType">    <Annotation Term="UI.QuickViewFacets">      <Collection>         <Record Type="UI.ReferenceFacet">            <PropertyValue Property="Target" AnnotationPath="@UI.FieldGroup#SupplierQuickViewPOC_FieldGroup_1" />         </Record>                                 <Record Type="UI.ReferenceFacet">            <PropertyValue Property="Label" String="Main Contact Person" />            <PropertyValue Property="Target" AnnotationPath="@Communication.Contact#KeyAccount"/>         </Record>         <Record Type="UI.ReferenceFacet">            <PropertyValue Property="Label" String="DataPoint in QV"/>            <PropertyValue Property="Target" AnnotationPath="@UI.DataPoint#Product"/>         </Record>       </Collection>   </Annotation></Annotations>
```

STEP: 6 — Sample Code: Quick View Facets (OData V2) — ABAP CDS Annotation

DESCRIPTION: Equivalent ABAP CDS annotate view example that registers quick-view facets for FIELDGROUP_REFERENCE, CONTACT_REFERENCE, and DATAPOINT_REFERENCE.

LANGUAGE: ABAP CDS

CODE:
```
annotate view STTA_C_MP_SUPPLIER with {@UI.Facet: [  {    targetQualifier: 'SupplierQuickViewPOC_FieldGroup_1',    type: #FIELDGROUP_REFERENCE,    purpose: #QUICK_VIEW  },  {    label: 'Main Contact Person',    targetQualifier: 'KeyAccount',    type: #CONTACT_REFERENCE,    purpose: #QUICK_VIEW  },  {    label: 'DataPoint in QV',    targetQualifier: 'Product',    type: #DATAPOINT_REFERENCE,    purpose: #QUICK_VIEW  }]supplier;}
```

STEP: 7 — Title Area (OData V4)

DESCRIPTION: For OData V4 Quick View header:
- Images: provide one or more of HeaderInfo.ImageUrl, HeaderInfo.TypeImageUrl, HeaderInfo.Initials to display an image (Initials renders initials if no URL).
- Title: taken from HeaderInfo.Title. If a main navigation (primaryAction via sap-tag) is defined, the title becomes a link.
- Description: taken from HeaderInfo.Description. If missing, subtitle displays the label of the source property.
- Restriction: Browser "Open link in new tab" on title link is not supported — navigation goes to SAP Fiori launchpad.

LANGUAGE: XML

CODE:
```xml

```

STEP: 8 — Sample Code: Quick View Facets (OData V4) — XML Annotation

DESCRIPTION: V4 XML example of UI.QuickViewFacets referencing a field group, a contact, and a DataPoint.

LANGUAGE: XML

CODE:
```xml

<Annotations Target="STTA_PROD_MAN.STTA_C_MP_SupplierType">
    <Annotation Term="UI.QuickViewFacets">
        <Collection>
            <Record Type="UI.ReferenceFacet">
                <PropertyValue Property="Target" AnnotationPath="@UI.FieldGroup#SupplierQuickViewPOC_FieldGroup_1" />
            </Record>
            <Record Type="UI.ReferenceFacet">
                <PropertyValue Property="Label" String="Main Contact Person" />
                <PropertyValue Property="Target" AnnotationPath="@Communication.Contact#KeyAccount"/>
            </Record>
            <Record Type="UI.ReferenceFacet">
                <PropertyValue Property="Label" String="DataPoint in QV"/>
                <PropertyValue Property="Target" AnnotationPath="@UI.DataPoint#Product"/>
            </Record>
        </Collection>
    </Annotation>
</Annotations>

```

STEP: 9 — Sample Code: Quick View Facets (OData V4) — ABAP CDS Annotation

DESCRIPTION: V4 ABAP CDS equivalent annotation of UI.Facet entries for Quick View.

LANGUAGE: ABAP CDS

CODE:
```
Annotate view STTA_C_MP_SUPPLIER with
{
    @UI.Facet: [
        {
            targetQualifier: 'SupplierQuickViewPOC_FieldGroup_1',
            type: #FIELDGROUP_REFERENCE,
            purpose: #QUICK_VIEW
        },
        {
            label: 'Main Contact Person',
            targetQualifier: 'KeyAccount',
            type: #CONTACT_REFERENCE,
            purpose: #QUICK_VIEW
        },
        {
            label: 'DataPoint in QV',
            targetQualifier: 'Product',
            type: #DATAPOINT_REFERENCE,
            purpose: #QUICK_VIEW
        }
    ]
    supplier;
}
```

STEP: 10 — Sample Code: Quick View Facets (OData V4) — CAP CDS Annotation

DESCRIPTION: CAP CDS example showing UI.QuickViewFacets using UI.ReferenceFacet entries.

LANGUAGE: CAP CDS

CODE:
```
Annotate STTA_PROD_MAN.STTA_C_MP_SupplierType with 
@(
    UI.QuickViewFacets : [
        {
            $Type : 'UI.ReferenceFacet',
            Target : '@UI.FieldGroup#SupplierQuickViewPOC_FieldGroup_1'
        },
        {
            $Type : 'UI.ReferenceFacet',
            Label : 'Main Contact Person',
            Target : '@Communication.Contact#KeyAccount'
        },
        {
            $Type : 'UI.ReferenceFacet',
            Label : 'DataPoint in QV',
            Target : '@UI.DataPoint#Product'
        }
    ]
);
```

STEP: 11 — Footer Section (Actions, SemanticObject, sap-tag)

DESCRIPTION:
- To enable navigation from a Quick View facet, define a SemanticObject:
  - For a source property with ReferentialConstraints: set SemanticObject on source property.
  - For a navigation property defined via an association: set SemanticObject on the navigation target property.
- Mark important navigation targets with the sap-tag parameter superiorAction to show them by default in the Quick View footer.
- If superiorAction is not used, the first three actions are shown by default.
- Users can open the More Links popover to personalize visible actions.

Restrictions and notes:
- When running in an i-frame, browser "Open link in new tab" for action links is not supported. IntentBasedNavigation extension point processing is not executed in this scenario. See the IntentBasedNavigation API reference for details.
- If no QuickView annotations exist or no target is resolved at runtime, the field still appears as a link; pressing it displays an error/message.

LANGUAGE: JSON

CODE:
```json

```
--------------------------------

**TITLE**: Configuring the Delete Dialog (UI.HeaderInfo & i18n keys)

**INTRODUCTION**: This guide shows how to configure the delete confirmation dialog text for SAP Fiori Elements list reports, object pages, and subobject pages. It includes exact annotation examples (XML and CDS) and rules for how the UI.HeaderInfo Title and Description are used in OData V2 and OData V4 (fullscreen and Flexible Column Layout). It also lists the i18n keys to override default delete messages.

**TAGS**: fiori-elements-framework, OData V2, OData V4, UI.HeaderInfo, delete-dialog, i18n, FCL, fullscreen

**STEP**: 1 — Add UI.HeaderInfo annotation for entity set

**DESCRIPTION**: Define the UI.HeaderInfo annotation (Title and Description) on the entity set bound to the table. Use either XML annotations or ABAP CDS annotations. The code below shows both forms exactly as used.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.HeaderInfo"> 
  <Record> 
    <PropertyValue Property="TypeName" String="Sales Order" /> 
    <PropertyValue Property="TypeNamePlural" String="Sales Orders" /> 
    <PropertyValue Property="Title"> 
      <Record Type="UI.DataField"> 
        <PropertyValue Property="Value" Path="so_id" /> 
       </Record> 
    </PropertyValue> 
    <PropertyValue Property="Description"> 
      <Record Type="UI.DataField"> 
        <PropertyValue Property="Value" String="Sales Order" /> 
      </Record>   
    </PropertyValue> 
  </Record> 
</Annotation>
```

**LANGUAGE**: CDS

**CODE**:
```
@UI.headerInfo: {
  typeName: 'Sales Order',
  typeNamePlural: 'Sales Orders',
  title: {
    value: 'SO_ID',
    type: #STANDARD
  },
  description: {
    type: #STANDARD
  }
}
annotate view SALESORDERMANAGE with {

}
```

**STEP**: 2 — Behavior in OData V2 (fullscreen mode)

**DESCRIPTION**: In fullscreen mode (V2), the delete confirmation message derives from UI.HeaderInfo properties but displays only the Title even if Description is defined. If neither Title nor Description are defined, a generic delete confirmation message is shown.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "V2_fullscreen_rules": [
    "If Title and Description are defined -> Delete dialog shows only Title",
    "If neither Title nor Description are defined -> Generic delete confirmation displayed"
  ]
}
```

**STEP**: 3 — Behavior in OData V2 (Flexible Column Layout - FCL)

**DESCRIPTION**: In FCL mode (V2), the delete confirmation message varies based on presence of Title and Description:
- Both Title and Description defined -> Dialog shows both Title and Description.
- Only Title defined -> Dialog shows only Title.
- Neither defined -> Generic delete confirmation message.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "V2_FCL_rules": [
    "Both Title and Description defined -> show Title and Description",
    "Only Title defined -> show Title only",
    "Neither defined -> generic message"
  ]
}
```

**STEP**: 4 — Behavior in OData V4 (list reports, object pages, tables)

**DESCRIPTION**: In OData V4 the mapping is different:
- Delete from list report (main object): UI.HeaderInfo is NOT considered. Use i18n key: C_TRANSACTION_HELPER_CONFIRM_DELETE_WITH_OBJECTTITLE_SINGULAR
- Delete from object page header (or subobject page header): UI.HeaderInfo.Title and UI.HeaderInfo.Description are both considered. Use i18n key: C_TRANSACTION_HELPER_CONFIRM_DELETE_WITH_OBJECTINFO
- Delete from tables in object page or subobject page: Use i18n key: C_TRANSACTION_HELPER_CONFIRM_DELETE_WITH_OBJECTTITLE_SINGULAR

Include these keys in your i18n file to override default texts.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "V4_rules_and_keys": {
    "list_report_delete": "C_TRANSACTION_HELPER_CONFIRM_DELETE_WITH_OBJECTTITLE_SINGULAR",
    "object_page_header_delete": "C_TRANSACTION_HELPER_CONFIRM_DELETE_WITH_OBJECTINFO",
    "tables_in_object_or_subobject_page_delete": "C_TRANSACTION_HELPER_CONFIRM_DELETE_WITH_OBJECTTITLE_SINGULAR"
  }
}
```

**STEP**: 5 — Localize / override delete dialog texts

**DESCRIPTION**: To change the default delete dialog text, override the specified i18n keys in your application i18n resource file. See the Localization of UI Texts document for full guidance and additional keys.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "i18n_override_examples": {
    "C_TRANSACTION_HELPER_CONFIRM_DELETE_WITH_OBJECTTITLE_SINGULAR": "Are you sure you want to delete {0}?",
    "C_TRANSACTION_HELPER_CONFIRM_DELETE_WITH_OBJECTINFO": "Are you sure you want to delete {0} ({1})?"
  },
  "reference": "See localization-of-ui-texts-b8cb649.md for full list and context"
}
```

**STEP**: 6 — Important notes for implementers

**DESCRIPTION**: Keep these checks when customizing delete messages:
- Applications that override the delete message for a single table entry must review UI.HeaderInfo configuration and adapt Title/Description texts accordingly.
- Ensure Title and Description paths or values in the annotation correctly reference entity properties or strings.
- Test behavior in both Fullscreen and FCL modes for OData V2 and in list/object/table contexts for OData V4.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "notes": [
    "Review UI.HeaderInfo when overriding delete message per-entry",
    "Validate Title and Description bindings (Path or String) in annotations",
    "Test delete dialog in Fullscreen and FCL (V2) and list/object/table contexts (V4)"
  ]
}
```
--------------------------------

**TITLE**: Configuring the Delete Dialog in List Reports

**INTRODUCTION**: Instructions to adapt the Delete confirmation dialog in SAP Fiori Elements list reports. Covers how the dialog text and object context are provided for OData V2 (via UI.HeaderInfo annotation and i18n key ST_GENERIC_DELETE_SELECTED) and how to override localization keys for OData V4 (keys starting with C_TRANSACTION_HELPER_CONFIRM_DELETE).

**TAGS**: fiori-elements-framework, odata-v2, odata-v4, i18n, annotations, UI.HeaderInfo, delete-dialog

**STEP**: 1 — OData V2: Display object context in Delete dialog and change the dialog text

**DESCRIPTION**: 
- The Delete dialog uses the text key ST_GENERIC_DELETE_SELECTED for the dialog message. Override this key in your app's i18n to change the default message.
- The object-specific context shown in the Delete dialog is taken from UI.HeaderInfo > Title. Map Title.Value to the property you want to display (for example so_id) in your annotation. Use either XML annotation or ABAP CDS annotation shown below.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.HeaderInfo">
<Record>
  <PropertyValue Property="TypeName" String="Sales Order"/>
     <PropertyValue Property="TypeNamePlural" String="Sales Orders"/>
     <PropertyValue Property="Title">
       <Record Type="UI.DataField">
         <PropertyValue Property="Value" Path="so_id"/>
       </Record>
     </PropertyValue>
   </Record>
 </Annotation>
```

**LANGUAGE**: ABAP CDS

**CODE**:
```
@UI.headerInfo: {
  typeName: 'Sales Order',
  typeNamePlural: 'Sales Orders',
  title: {
    value: 'SO_ID',
    type: #STANDARD
  }
}
annotate view STTA_C_MP_PRODUCT with {

}
```

**LANGUAGE**: Properties (example)

**CODE**:
```properties
# Example i18n entry - update in your app's i18n file to change dialog text.
# Use {0} or the placeholder supported by your framework to insert the object title
ST_GENERIC_DELETE_SELECTED=Delete {0}?
```

**STEP**: 2 — OData V4: Override confirmation keys in i18n

**DESCRIPTION**: 
- For OData V4 based list reports, override the localization keys that start with C_TRANSACTION_HELPER_CONFIRM_DELETE in your custom i18n file to change the Delete dialog texts.
- Add corresponding entries in your application's i18n file using the exact keys used by the framework. See your project localization file and the framework's Localization of UI Texts documentation for the exact key names and syntax.

**LANGUAGE**: Properties (example)

**CODE**:
```properties
# Example overrides for OData V4 (replace keys and values with actual keys from your framework)
C_TRANSACTION_HELPER_CONFIRM_DELETE=Delete {0}?
C_TRANSACTION_HELPER_CONFIRM_DELETE_TITLE=Confirm deletion
```
--------------------------------

**TITLE**: Configuring the Dynamic Link List Card

**INTRODUCTION**: Step-by-step, code-focused instructions to configure a Dynamic Link List Card in the Fiori Elements framework. Covers manifest.json card settings, UI.HeaderInfo annotations (XML, ABAP CDS, CAP CDS), contact annotation mapping, and supported navigation types and behaviors.

**TAGS**: fiori-elements-framework, linklist, cards, manifest.json, UI.HeaderInfo, contact, annotation, navigation, ABAP CDS, CAP CDS

STEP: 1 — Configure the card in manifest.json

DESCRIPTION: Add a card entry to your app manifest. Set model, template "sap.ovp.cards.linklist", title, targetUri, listFlavor ("standard" or "carousel"), entitySet, sorting, headerAnnotationPath pointing to a UI.HeaderInfo qualifier, and defaultSpan. Use this as the card definition to render the Dynamic Link List Card.

LANGUAGE: JSON

CODE:
```json
"card017": {
          "model": "salesOrder",
          "template": "sap.ovp.cards.linklist",
          "settings": {
            "title": "Standard Dynamic Linklist Card",
            "targetUri": "https://en.abc.org/wiki/xyz _2",
            "subTitle": "Smartlink Feature Test",
            "listFlavor": "standard",
            "entitySet": "ProductSet",
            "sortBy": "Name",
            "sortOrder": "ascending",
            "headerAnnotationPath": "com.sap.vocabularies.UI.v1.HeaderInfo#header1",
            "defaultSpan": {
              "rows": 20,
              "cols": 2
            }
          }
        },
```

STEP: 2 — Configure UI.HeaderInfo (purpose and mapping for list)

DESCRIPTION: Define the card title, subtitle, and list item image/icon in the UI.HeaderInfo annotation referenced by headerAnnotationPath. Map:
- Title -> UI.HeaderInfo.Title (DataField, Value path -> label shown as list title)
- Description -> UI.HeaderInfo.Description (DataField, Value path -> list subtitle)
- TypeImageUrl or ImageUrl -> UI.HeaderInfo.TypeImageUrl / ImageUrl (used as list icon or image)
Carousel images follow the same mapping and behave like clicking the list title.

LANGUAGE: XML

CODE:
```xml
<Annotation Term="com.sap.vocabularies.UI.v1.HeaderInfo" Qualifier="header1">
   <Record Type="com.sap.vocabularies.UI.v1.HeaderInfoType">
      <PropertyValue Property="TypeName" String="Product" />
      <PropertyValue Property="TypeNamePlural" String="Products" />
      <PropertyValue Property="Title">
         <Record Type="com.sap.vocabularies.UI.v1.DataField">
            <PropertyValue Property="Label" String="Product Name" />
            <PropertyValue Property="Value" Path="Name" />
         </Record>
      </PropertyValue>
      <PropertyValue Property="Description">
         <Record Type="com.sap.vocabularies.UI.v1.DataField">
            <PropertyValue Property="Label" String="Product Description" />
            <PropertyValue Property="Value" Path="Description" />
         </Record>
      </PropertyValue>
      <PropertyValue Property="TypeImageUrl" Path="ImageUrl" />
   </Record>
</Annotation>
```

STEP: 3 — Configure UI.HeaderInfo in ABAP CDS

DESCRIPTION: If using ABAP CDS, add @UI.headerInfo to annotate title, description, and type names. Map fields to entity properties (NAME, DESCRIPTION, etc.) to drive list display.

LANGUAGE: ABAP CDS

CODE:
```
@UI.headerInfo: {
  typeName: 'Product',
  typeNamePlural: 'Products',
  title: {
    label: 'Product Name',
    value: 'NAME',
    type: #STANDARD
  },
  description: {
    label: 'Product Description',
    value: 'DESCRIPTION',
    type: #STANDARD
  }
}
annotate view VIEWNAME with { 

}
```

STEP: 4 — Configure UI.HeaderInfo in CAP CDS

DESCRIPTION: If using CAP CDS, define UI.HeaderInfo with $Type UI.HeaderInfoType and map Title, Description, and TypeImageUrl to entity fields.

LANGUAGE: CAP CDS

CODE:
```
UI.HeaderInfo #header1 : {
    $Type : 'UI.HeaderInfoType',
    TypeName : 'Product',
    TypeNamePlural : 'Products',
    Title : {
        $Type : 'UI.DataField',
        Label : 'Product Name',
        Value : Name
    },
    Description : {
        $Type : 'UI.DataField',
        Label : 'Product Description',
        Value : Description
    },
    TypeImageUrl : ImageUrl
},
```

STEP: 5 — Configure the contact annotation (purpose and field mapping)

DESCRIPTION: To enable quick view (contact popover) from the list title, add a Contact annotation (com.sap.vocabularies.Communication.v1.Contact) on the entity. Map:
- fn -> Full name (headline of contact popover)
- photo -> Picture URL used in popover header
- role -> Description text in popover header
- tel -> Collection of phone records; types control label mapping:
  - work + pref -> Phone
  - cell + work -> Mobile
  - fax -> Fax
- email -> Collection of emails; work + pref -> E-Mail
Implement contact annotation in XML / ABAP CDS / CAP CDS as shown.

LANGUAGE: XML

CODE:
```xml
<Annotation Term="com.sap.vocabularies.Communication.v1.Contact">
   <Record>
       <PropertyValue Property="fn" Path="FullName" />
      <PropertyValue Property="title" Path="Title" />
      <PropertyValue Property="org" Path="CompanyName" />
      <PropertyValue Property="role" Path="OrganizationRole" />
      <PropertyValue Property="tel">
         <Collection>
            <Record>
               <PropertyValue Property="type"
                  EnumMember="com.sap.vocabularies.Communication.v1.PhoneType/fax" />
               <PropertyValue Property="uri" Path="FaxNumber" />
            </Record>
            <Record>
               <PropertyValue Property="type"
                  EnumMember="com.sap.vocabularies.Communication.v1.PhoneType/work com.sap.vocabularies.Communication.v1.PhoneType/preferred" />
               <PropertyValue Property="uri" Path="PhoneNumber" />
            </Record>
         </Collection>
      </PropertyValue>
      <PropertyValue Property="email">
         <Collection>
            <Record>
               <PropertyValue Property="type"
                  EnumMember="com.sap.vocabularies.Communication.v1.ContactInformationType/preferred com.sap.vocabularies.Communication.v1.ContactInformationType/work" />
               <PropertyValue Property="address" Path="EmailAddress" />
            </Record>
         </Collection>
      </PropertyValue>
   </Record>
</Annotation>
```

STEP: 6 — Contact mapping in ABAP CDS

DESCRIPTION: Annotate entity/view fields for contact semantics (full name, email, phone, job title, organization) so the contact popover uses these properties.

LANGUAGE: ABAP CDS

CODE:
```
define view VIEWNAME
{
  @Semantics.name.fullName: true
  FullName,

  @Semantics.eMail.address: true
  @Semantics.eMail.type:  [#WORK, #PREF]
  EmailAddress,
   
  @Semantics.telephone.type:  [ #FAX ] 
  FaxNumber,
  
  @Semantics.telephone.type:  [ #PREF , #WORK]
  PhoneNumber,

  @Semantics.name: { jobTitle: true }   
  Title,

  @Semantics.organization: { name: true }
  CompanyName,

  @Semantics.organization: { role: true, unit: true }
  OrganizationRole
}
```

STEP: 7 — Contact mapping in CAP CDS

DESCRIPTION: In CAP CDS, provide Communication.Contact mapping, listing telephone and email arrays with types and uri/address properties to drive the contact popover.

LANGUAGE: CAP CDS

CODE:
```
Communication.Contact : {
    fn : FullName,
    title : Title,
    org : CompanyName,
    role : OrganizationRole,
    tel : [
        {
            type : #fax,
            uri : FaxNumber
        },
        {
            type : [ #work, #pref ],
            uri : PhoneNumber
        }
    ],
    email : [
        {
            type : [ #pref, #work ],
            address : EmailAddress
        }
    ]
}
```

STEP: 8 — Configure navigation types and expected behavior

DESCRIPTION: The link list supports three navigation approaches. Implement one or more depending on your use case:
- Intent-based navigation: Provide UI.Identification with SemanticObject and Action (intent target).
- Function import (server-side action): Use DataFieldForAction in LineItem or set Action in LineItem to trigger an OData function import.
- External navigation (direct URL): Use a UI.LineItem of type WITH_URL; set the line item's url property to the entity field that contains the external URL.

Navigation behavior summary (when clicking list items and titles):
- If UI.Identification with Action OR LineItem with Action OR LineItem with Url exists: navigation is available from the line item.
- If any of the above exists AND default contact annotation is provided: navigation is available from the line item, and quick view (contact popover) is shown when clicking the title.
- If only the default contact annotation exists: quick view is available when clicking the title.
- If no navigation annotations and no contact annotation: only the label is displayed (no navigation, no quick view).

LANGUAGE: text

CODE:
```
Supported annotation configurations for navigation:
- UI.Identification with SemanticObject and Action (intent-based navigation)
- com.sap.vocabularies.UI.v1.LineItem with Action (DataFieldForAction -> OData action)
- com.sap.vocabularies.UI.v1.LineItem with Url (WITH_URL -> external navigation using entity field referenced in url)

Navigation behavior:
- For UI.Identification(Action) OR LineItem(Action) OR LineItem(Url): Navigation available from the line item.
- For UI.Identification(Action) OR LineItem(Action) OR LineItem(Url) + default contact annotation: Navigation available from the line item + quick view on title click.
- For default contact annotation only: Quick view available on title click.
- If no navigation/contact annotations: Only label is displayed.
```
--------------------------------

**TITLE**: Configure Global Filter (SmartFilterBar) for SAP Fiori Elements OVP

**INTRODUCTION**: Configure the global filter (sap.ui.comp.smartfilterbar.SmartFilterBar) for Overview Pages (sap.ovp) by setting manifest.json properties. The global filter is applied to all cards that share property names in their entity types. Use UI.SelectionFields annotations to add default filters. This guide covers: manifest configuration, enabling basic search, and semantic date range (useDateRange / dateSettings) configuration.

**TAGS**: fiori-elements, sap.ovp, SmartFilterBar, manifest.json, SAPUI5, global-filter, OData, date-range, SearchRestrictions

**STEP**: 1 — Configure global filter in manifest.json

**DESCRIPTION**: Add global filter settings inside the "sap.ovp" section of your application's manifest.json. Specify:
- globalFilterModel: OData model name for the global filter.
- globalFilterEntitySet: Use from SAPUI5 1.54 onward (preferred).
- globalFilterEntityType: Deprecated since SAPUI5 1.54 — do not use for newer versions.

This configuration registers the entity set that contains the filterable properties and applies the SmartFilterBar across cards that share property names in their entity types.

**LANGUAGE**: JSON

**CODE**:
```json
"sap.ovp": {
    "_version": "1.1.0",
    "globalFilterModel": "ZCD204_EPM_DEMO_SRV",
    "globalFilterEntityType": "SalesOrder", //Deprecated since SAPUI5 1.54
    "globalFilterEntitySet": "SalesOrders", //Available from SAPUI5 1.54 onwards
    "cards": {
        ...
    }
}
```

**STEP**: 2 — Enable Basic Search on SmartFilterBar

**DESCRIPTION**: To enable the basic search field (search across all searchable entity sets) add the showBasicSearch property in manifest.json under "sap.ovp". Ensure your entity types/sets support search:
- Metadata: sap:searchable="true"
- Annotations: SearchRestrictions on the entity set

Set the property to "true" (string as in the reference) to display the search field on the SmartFilterBar.

**LANGUAGE**: JSON

**CODE**:
```json
"sap.ovp": {
    ...
    "showBasicSearch": "true"
}
```

**STEP**: 3 — Configure Semantic Date Ranges (useDateRange / dateSettings)

**DESCRIPTION**: Configure semantic date ranges and custom date-range behavior using filterSettings.dateSettings under sap.ovp in manifest.json. Options:
- customDateRangeImplementation: Reference to a JS class (controller path) to modify date range value list (can remove or add values).
- selectedValues: Comma-separated set of standard date range values to include/exclude.
- exclude: When true (default), selectedValues are excluded; when false, only selectedValues are shown.
- Precedence: customDateRangeImplementation takes precedence over selectedValues/exclude.
- useDateRange precedence: dateSettings.useDateRange always takes precedence. If not set, sap.ovp.useDateRangeType is used. Defining both causes an application error.

When useDateRange is False, other settings under dateSettings remain effective for configuring date filters.

Use property-level entries to override defaults per date property.

**LANGUAGE**: JSON

**CODE**:
```json
sap.ovp: {
    "filterSettings": {
        "dateSettings": {
            "selectedValues": "DAYS,WEEK,MONTH,DATERANGE,QUARTER,YEAR",
            "fields": {
                "DateProperty1": {
                    "selectedValues": "TOMORROW,NEXT,LASTYEAR,LAST2WEEKS,LAST3WEEKS,LAST4WEEKS,LAST5WEEKS,YEARTODATE,QUARTER1,QUARTER2,QUARTER3,QUARTER4",
                    "exclude": true
                },
                "DateProperty2": {
                    "customDateRangeImplementation": "SOMULTIENTITY.ext.controller.customDateRangeType",
                    "selectedValues": "FROM,TO,DAYS,WEEK,MONTH,DATERANGE,TODAY,TOMORROW,YEAR,YESTERDAY",
                    "exclude": true
                },
                "DateProperty3": {
                    "selectedValues": "YESTERDAY",
                    "exclude": false
                }
            }
        }
    }
}
```

**STEP**: 4 — Implementation notes and precedence rules

**DESCRIPTION**: Follow these rules when implementing:
- SmartFilterBar persists user filters and allows sharing; UI.SelectionFields annotations can add default filters.
- Use globalFilterEntitySet (preferred) instead of globalFilterEntityType for SAPUI5 >= 1.54.
- For date ranges:
  - customDateRangeImplementation overrides selectedValues/exclude for that property.
  - dateSettings.useDateRange overrides sap.ovp.useDateRangeType. Do not define both simultaneously.
  - If useDateRange = False, dateSettings entries still apply to configure date filters.

No code block required.
--------------------------------

**TITLE**: Configuring the List Area (LineItem) with DataField, DataPoint, Contact, and Navigation Annotations

**INTRODUCTION**: Practical, code-focused guidance to configure the list area (UI.LineItem) for Fiori Elements using XML annotations, ABAP CDS, and CAP CDS. Shows how to: display textual values (DataField), show numeric and quick-view information (DataPoint, Contact via DataFieldForAnnotation), and configure navigation (intent-based or URL). Use these patterns to generate or modify annotation code in metadata/CDS sources.

**TAGS**: fiori-elements-framework, annotations, LineItem, DataField, DataPoint, Contact, navigation, XML, ABAP CDS, CAP CDS, UI

**STEP**: 1 — Define DataField properties (display textual values in the list)

**DESCRIPTION**: Add DataField entries to the LineItem annotation (UI.LineItem / com.sap.vocabularies.UI.v1.LineItem) to display label/value pairs in the list. Use qualifiers to scope alternate views (example uses qualifier "View4"). Provide value paths for properties and use DataFieldForAnnotation to reference other annotation constructs (e.g., DataPoint).

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="com.sap.vocabularies.UI.v1.LineItem" Qualifier="View4">
   <Collection>
      <Record Type="com.sap.vocabularies.UI.v1.DataField">
         <PropertyValue Property="Label" String="Order ID" />
         <PropertyValue Property="Value" Path="SalesOrderID" />
      </Record>
      <Record Type="com.sap.vocabularies.UI.v1.DataField">
         <PropertyValue Property="Label" String="Customer" />
         <PropertyValue Property="Value" Path="ToBusinessPartner/EmailAddress" />
      </Record>
      <Record Type="com.sap.vocabularies.UI.v1.DataField">
         <PropertyValue Property="Label" String="Customer" />
         <PropertyValue Property="Value" Path="CustomerName" />
      </Record>
      <Record Type="com.sap.vocabularies.UI.v1.DataFieldForAnnotation">
         <PropertyValue Property="Label" String="TaxAmount" />
         <PropertyValue Property="Target" AnnotationPath="@com.sap.vocabularies.UI.v1.DataPoint#TaxAmount" />
      </Record>
   </Collection>
</Annotation>
```

**LANGUAGE**: ABAP CDS

**CODE**:
```
@UI.lineItem: [
  {
    label: 'Order ID',
    position: 10,
    qualifier: 'View4'
  }
]
SALESORDERID;

@UI.lineItem: [
  {
    label: 'Customer',
    value: '_BUSINESSPARTNER.EMAILADDRESS',
    position: 20,
    qualifier: 'View4'
  }
]
TOBUSINESSPARTNER/EMAILADDRESS;

@UI.lineItem: [
  {
    label: 'Customer',
    position: 30,
    qualifier: 'View4'
  }
]
CUSTOMERNAME;

@UI.lineItem: [
  {
    label: 'TaxAmount',
    valueQualifier: 'TaxAmount',
    type: #AS_DATAPOINT,
    position: 40,
    qualifier: 'View4'
  }
]
PROPERT_NAME;
```

**LANGUAGE**: CAP CDS

**CODE**:
```
UI.LineItem #View4 : [
    {
        $Type : 'UI.DataField',
        Label : 'Order ID',
        Value : SalesOrderID
    },
    {
        $Type : 'UI.DataField',
        Label : 'Customer',
        Value : ToBusinessPartner.EmailAddress
    },
    {
        $Type : 'UI.DataField',
        Label : 'Customer',
        Value : CustomerName
    },
    {
        $Type : 'UI.DataFieldForAnnotation',
        Label : 'TaxAmount',
        Target : '@UI.DataPoint#TaxAmount'
    }
]
```

**STEP**: 2 — (Optional) Define DataFieldForAnnotation: DataPoint (numeric display)

**DESCRIPTION**: Use DataPoint annotations to render numeric/measure values in the list (referenced via DataFieldForAnnotation). Define a DataPoint with a qualifier (e.g., #TaxAmount) and include Title and Value properties. Apply the DataPoint annotation in the LineItem via a DataFieldForAnnotation Target pointing to the qualifier.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="com.sap.vocabularies.UI.v1.DataPoint" Qualifier="TaxAmount">
   <Record Type="com.sap.vocabularies.UI.v1.DataPointType">
      <PropertyValue Property="Title" String="TaxAmount" />
      <PropertyValue Property="Value" Path="TaxAmount" />
   </Record>
</Annotation>
```

**LANGUAGE**: ABAP CDS

**CODE**:
```
@UI.dataPoint: {
  title: 'TaxAmount'
}
TaxAmount;
```

**LANGUAGE**: CAP CDS

**CODE**:
```
UI.DataPoint #TaxAmount : {
    $Type : 'UI.DataPointType',
    Title : 'TaxAmount',
    Value : TaxAmount
}
```

**STEP**: 3 — (Optional) Define DataFieldForAnnotation: Contact (quick view / contact details)

**DESCRIPTION**: Use the Communication.Contact annotation to present quick-view contact information for list items. Include tel and email collections with type and uri/address mapping. The Contact annotation can be referenced from a DataFieldForAnnotation in the LineItem to enable quick view panels.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="com.sap.vocabularies.Communication.v1.Contact">
   <Record>
      <PropertyValue Property="tel">
         <Collection>
            <Record>
               <PropertyValue Property="type" EnumMember="com.sap.vocabularies.Communication.v1.PhoneType/fax" />
               <PropertyValue Property="uri" Path="FaxNumber" />
            </Record>
            <Record>
               <PropertyValue Property="type" EnumMember="com.sap.vocabularies.Communication.v1.PhoneType/work com.sap.vocabularies.Communication.v1.PhoneType/preferred" />
               <PropertyValue Property="uri" Path="PhoneNumber" />
            </Record>
         </Collection>
      </PropertyValue>
      <PropertyValue Property="email">
         <Collection>
            <Record>
               <PropertyValue Property="type" EnumMember="com.sap.vocabularies.Communication.v1.ContactInformationType/preferred com.sap.vocabularies.Communication.v1.ContactInformationType/work" />
               <PropertyValue Property="address" Path="EmailAddress" />
            </Record>
         </Collection>
      </PropertyValue>
   </Record>
</Annotation>
```

**LANGUAGE**: ABAP CDS

**CODE**:
```
define view VIEWNAME
{
  @Semantics.eMail.address: true
  @Semantics.eMail.type:  [#WORK]
  EmailAddress,
   
  @Semantics.telephone.type:  [ #FAX ] 
  FaxNumber,
  
  @Semantics.telephone.type:  [ #WORK]
  PhoneNumber
}
```

**LANGUAGE**: CAP CDS

**CODE**:
```
Communication.Contact : {
    tel : [
        {
            type : #fax,
            uri : FaxNumber
        },
        {
            type : [ #work, #pref ],
            uri : PhoneNumber
        }
    ],
    email : [
        {
            type : [ #pref, #work ],
            address : EmailAddress
        }
    ]
}
```

**STEP**: 4 — Configure navigation properties for list items (intent-based and URL)

**DESCRIPTION**: Choose the navigation term appropriate to your target:
- Use com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation to enable intent-based navigation to other Fiori apps (recommended). This leverages the target mapping / intent resolution.
- Use com.sap.vocabularies.UI.v1.DataFieldWithUrl to navigate to external URLs or application routes not exposed as a target map. Overview pages treat such navigation as intent-based and open the application in the same tab with context.

Include such navigation records inside the LineItem collection. The code snippet below is a placeholder comment illustrating where to add either term inside the LineItem annotation.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Add a Record of Type DataFieldForIntentBasedNavigation or DataFieldWithUrl inside the LineItem Collection.
     Example placeholder: use DataFieldForIntentBasedNavigation to reference an intent (SemanticObject/Action)
     or DataFieldWithUrl to provide a direct URL/route. -->
```

**STEP**: 5 — Recommendation / Notes

**DESCRIPTION**: Prefer DataFieldForIntentBasedNavigation for standard intent-based navigation to Fiori applications. Use DataFieldWithUrl only when navigating to a specific application route not configured as a target mapping. Ensure qualifiers and value paths match the DataPoint/Contact qualifiers used in the LineItem.
--------------------------------

**TITLE**: Configuring the List Card Header Area (sap.ovp list card)

**INTRODUCTION**: Action-oriented reference for configuring list card header elements in SAP Fiori Elements (sap.ovp). Includes manifest.json settings and required UI annotations (KPI, PresentationVariant, SelectionVariant, DataPoint), view tabs, header navigation, and header counter configuration. Use these snippets directly in your manifest and annotation sources.

**TAGS**: sap.ovp, list card, manifest.json, KPI, DataPoint, PresentationVariant, SelectionVariant, tabs, header, annotations, CDS, CAP, XML, JSON

STEP: 1 — Card Title and Subtitle (manifest.json)
DESCRIPTION: Set the card title and subtitle in the card settings of manifest.json. Place the block under "sap.ovp" -> "cards" -> "<card id>" -> "settings".
LANGUAGE: JSON
CODE:
```json
"sap.ovp": {
		"globalFilterModel": "salesOrder",
		"globalFilterEntityType": "GlobalFilters", //Deprecated since SAPUI5 1.54.
                "globalFilterEntitySet": "GlobalFilters",  //Available from SAPUI5 1.54.
              ...
              ...
		"cards": {
          "sap.ovp.test_card.card002": {
            "model": "salesOrder",
            "template": "sap.ovp.cards.list",
            "settings": {
              "title": "Purchase History",
              "subTitle": "SubTitle",
              "entitySet": "SalesOrderSet",
              ...
              ...
                }
              ]
            }
        }
```

STEP: 2 — Enable KPI on the Card Header (manifest.json)
DESCRIPTION: Reference a KPI annotation by setting kpiAnnotationPath under sap.ovp to display KPI values in the list card header.
LANGUAGE: JSON
CODE:
```json
"sap.ovp": {
    ...
    "kpiAnnotationPath": "com.sap.vocabularies.UI.v1.KPI#AllActualCosts", // Represents the KPI annotation path
    ...
}
```

STEP: 3 — KPI Annotation (XML)
DESCRIPTION: Define a KPI annotation (UI.KPI) with Detail, SelectionVariant and DataPoint references. Use Qualifier to match kpiAnnotationPath from manifest.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.KPI" Qualifier="AllActualCosts">
   <Record Type="UI.KPIType">
      <PropertyValue Property="Detail">
         <Record Type="UI.KPIDetailType">
            <PropertyValue Property="DefaultPresentationVariant" Path="@UI.PresentationVariant#Eval_by_Currency1" />
            <PropertyValue Property="AlternativePresentationVariants">
               <Collection>
                  <Path>@UI.PresentationVariant#Eval_by_Currency_Column</Path>
               </Collection>
            </PropertyValue>
            <PropertyValue Property="SemanticObject" String="Action" />
            <PropertyValue Property="Action" String="toappnavsample" />
         </Record>
      </PropertyValue>
      <PropertyValue Property="SelectionVariant" Path="@UI.SelectionVariant#Eval_by_Currency_1" />
      <PropertyValue Property="DataPoint" Path="@UI.DataPoint#Eval_by_Country_Generic" />
      <PropertyValue Property="ID" String="String for KPI Annotation" />
   </Record>
</Annotation>
```

STEP: 4 — KPI Annotation (ABAP CDS)
DESCRIPTION: Equivalent KPI definition using ABAP CDS syntax. Use the same qualifier to match manifest kpiAnnotationPath.
LANGUAGE: CDS
CODE:
```
@UI.KPI: [
  {
    detail: {
      defaultPresentationVariantQualifier: 'Eval_by_Currency1',
      alternativePresentationVariantQualifiers: [
        'Eval_by_Currency_Column'
      ],
      semanticObject: 'Action',
      semanticObjectAction: 'toappnavsample'
    },
    selectionVariantQualifier: 'Eval_by_Currency_1',
    id: 'String for KPI Annotation',
    qualifier: 'AllActualCosts'
  }
]
Eval_by_Country-Generic;
```

STEP: 5 — KPI Annotation (CAP CDS)
DESCRIPTION: CAP CDS representation of a KPI. Keep qualifier and DataPoint reference consistent with manifest.
LANGUAGE: CDS
CODE:
```
UI.KPI #AllActualCosts : {
    $Type : 'UI.KPIType',
    Detail : {
        $Type : 'UI.KPIDetailType',
        DefaultPresentationVariant : ![@UI.PresentationVariant#Eval_by_Currency1],
        AlternativePresentationVariants : [
            ![@UI.PresentationVariant#Eval_by_Currency_Column]
        ],
        SemanticObject : 'Action',
        Action : 'toappnavsample',
    },
    SelectionVariant : ![@UI.SelectionVariant#Eval_by_Currency_1],
    DataPoint : ![@UI.DataPoint#Eval_by_Country-Generic],
    ID : 'String for KPI Annotation'
},
```

STEP: 6 — Associated PresentationVariant Annotation (XML)
DESCRIPTION: Define PresentationVariant with MaxItems, GroupBy, SortOrder, and Visualizations referenced by KPI detail. Use Qualifier to link defaultPresentationVariantQualifier.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.PresentationVariant" Qualifier="Eval_by_Currency1">
   <Record>
      <PropertyValue Property="MaxItems" Int="5" />
      <PropertyValue Property="GroupBy">
         <Collection>
            <PropertyPath>Country</PropertyPath>
            <PropertyPath>Currency</PropertyPath>
         </Collection>
      </PropertyValue>
      <PropertyValue Property="SortOrder">
         <Collection>
            <Record>
               <PropertyValue Property="Property" PropertyPath="TotalSales" />
               <PropertyValue Property="Descending" Bool="true" />
            </Record>
         </Collection>
      </PropertyValue>
      <PropertyValue Property="Visualizations">
         <Collection>
            <AnnotationPath>@UI.Chart#Eval_by_Currency_Donut</AnnotationPath>
         </Collection>
      </PropertyValue>
   </Record>
</Annotation>
```

STEP: 7 — Associated PresentationVariant Annotation (ABAP CDS)
DESCRIPTION: ABAP CDS representation for PresentationVariant. Use qualifier Eval_by_Currency1 to match KPI detail.
LANGUAGE: CDS
CODE:
```
@UI.PresentationVariant: [
  {
    maxItems: 5,
    groupBy: [
      'COUNTRY',
      'CURRENCY'
    ],
    sortOrder: [
      {
        by: 'TOTALSALES'
      }
    ],
    visualizations: [
      {
        type: #AS_CHART,
        qualifier: 'Eval_by_Currency_Donut'
      }
    ],
    qualifier: 'Eval_by_Currency1'
  }
]
annotate view VIEWNAME with { }
```

STEP: 8 — Associated PresentationVariant Annotation (CAP CDS)
DESCRIPTION: CAP CDS PresentationVariant equivalent. Use Visualizations referencing chart qualifier.
LANGUAGE: CDS
CODE:
```
UI.PresentationVariant #Eval_by_Currency1 : {
    MaxItems : 5,
    GroupBy : [
        Country,
        Currency,
    ],
    SortOrder : [
        {
            Property : TotalSales,
            Descending : true
        },
    ],
    Visualizations : [
        '@UI.Chart#Eval_by_Currency_Donut'
    ]
},
```

STEP: 9 — Associated SelectionVariant Annotation (XML)
DESCRIPTION: Create SelectionVariant with SelectOptions and Parameters. Use Qualifier to match KPI/Tab settings.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.SelectionVariant" Qualifier="Eval_by_Currency_1">
   <Record>
      <PropertyValue Property="SelectOptions">
         <Collection>
            <Record>
               <PropertyValue Property="PropertyName" PropertyPath="Country" />
               <PropertyValue Property="Ranges">
                  <Collection>
                     <Record>
                        <PropertyValue Property="Sign" EnumMember="UI.SelectionRangeSignType/I" />
                        <PropertyValue Property="Option" EnumMember="UI.SelectionRangeOptionType/EQ" />
                        <PropertyValue Property="Low" String="IN" />
                     </Record>
                  </Collection>
               </PropertyValue>
            </Record>
         </Collection>
      </PropertyValue>
      <PropertyValue Property="Parameters">
         <Collection>
            <Record Type="UI.Parameter">
               <PropertyValue Property="PropertyName" PropertyPath="Currency_Target" />
               <PropertyValue Property="PropertyValue" String="EUR" />
            </Record>
            <Record Type="UI.Parameter">
               <PropertyValue Property="PropertyName" PropertyPath="UoM_Target" />
               <PropertyValue Property="PropertyValue" String="KGM" />
            </Record>
         </Collection>
      </PropertyValue>
   </Record>
</Annotation>
```

STEP: 10 — Associated SelectionVariant Annotation (ABAP CDS)
DESCRIPTION: ABAP CDS SelectionVariant sample. Use qualifier Eval_by_Currency_1.
LANGUAGE: CDS
CODE:
```
@UI.SelectionVariant: [
  {
    qualifier: 'Eval_by_Currency_1',
	parameters: [
	  {name: 'PropertyName', value: 'CompanyCurrency' },
	  { name: 'PropertyValue', value: 'EUR'}
	]
  }
]
annotate view VIEWNAME with { 

}
```

STEP: 11 — Associated SelectionVariant Annotation (CAP CDS)
DESCRIPTION: CAP CDS SelectionVariant example with SelectOptions and Parameters.
LANGUAGE: CDS
CODE:
```
UI.SelectionVariant #Eval_by_Currency_1 : {
    SelectOptions : [
        {
            PropertyName : Country,
            Ranges : [
                {
                    Sign : #I,
                    Option : #EQ,
                    Low : 'IN'
                }
            ]
        }
    ],
    Parameters : [
        {
            $Type : 'UI.Parameter',
            PropertyName : Currency_Target,
            PropertyValue : 'EUR'
        },
        {
            $Type : 'UI.Parameter',
            PropertyName : UoM_Target,
            PropertyValue : 'KGM'
        }
    ]
},
```

STEP: 12 — DataPoint Annotation (purpose & properties)
DESCRIPTION: Define DataPoint annotation referenced by KPI to show title, measured value, number formatting, criticality and trend. Required/used properties:
- Title: displayed on KPI header
- Value: Path to measure
- ValueFormat: number formatting (ScaleFactor, NumberOfFractionalDigits)
- Criticality/CriticalityCalculation: use either enum or a path-based value
  - Supported enum members:
    - com.sap.vocabularies.UI.v1.CriticalityType/Neutral (default neutral color)
    - com.sap.vocabularies.UI.v1.CriticalityType/Negative (red)
    - com.sap.vocabularies.UI.v1.CriticalityType/Critical (orange)
    - com.sap.vocabularies.UI.v1.CriticalityType/Positive (green)
  - Or use a numeric path returning:
    - 0 = Neutral, 1 = Negative, 2 = Critical, 3 = Positive
- CriticalityCalculation: improvementDirection, deviation/tolerance thresholds
- TargetValue, TrendCalculation: optional additional KPI metadata
LANGUAGE: (explanatory) 

STEP: 13 — Associated DataPoint Annotation (XML)
DESCRIPTION: XML DataPoint example including Title, Value, ValueFormat, CriticalityCalculation, TargetValue and TrendCalculation. Qualifier should match DataPoint reference in KPI.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.DataPoint" Qualifier="Eval_by_Country_Generic">
   <Record Type="UI.DataPointType">
      <PropertyValue Property="Title" String="Sales India - Generic Card" />
      <PropertyValue Property="Value" Path="Sales" />
      <PropertyValue Property="ValueFormat">
         <Record>
            <PropertyValue Property="ScaleFactor" Decimal="2" />
            <PropertyValue Property="NumberOfFractionalDigits" Int="1" />
         </Record>
      </PropertyValue>
      <PropertyValue Property="CriticalityCalculation">
         <Record>
            <PropertyValue Property="ImprovementDirection" EnumMember="UI.ImprovementDirectionType/Minimize" />
            <PropertyValue Property="DeviationRangeHighValue" String="7300" />
            <PropertyValue Property="ToleranceRangeHighValue" String="7200" />
         </Record>
      </PropertyValue>
      <PropertyValue Property="TargetValue" String="2.000 " />
      <PropertyValue Property="TrendCalculation">
         <Record>
            <PropertyValue Property="ReferenceValue" String="5201680" />
            <PropertyValue Property="DownDifference" Decimal="10000000.0" />
         </Record>
      </PropertyValue>
   </Record>
</Annotation>
```

STEP: 14 — Associated DataPoint Annotation (ABAP CDS)
DESCRIPTION: ABAP CDS DataPoint example. Place this in your CDS source and ensure the qualifier matches KPI.DataPoint.
LANGUAGE: CDS
CODE:
```
@UI.dataPoint: { 
	 title: 'Sales India - Generic Card',
	 valueFormat: { scaleFactor: 2, numberOfFractionalDigits: 1 },
	 criticalityCalculation: { 
	   improvementDirection: #MINIMIZE,
	   deviationRangeHighValue: 7300,
	   toleranceRangeHighValue: 7200
	 },
	 targetValue: 2.000,
	 trendCalculation: { referenceValue: 'refValElement', downDifference: 10000000.0 }
}
Sales;
```

STEP: 15 — Associated DataPoint Annotation (CAP CDS)
DESCRIPTION: CAP CDS DataPoint block. Use qualifier Eval_by_Country-Generic to match KPI reference.
LANGUAGE: CDS
CODE:
```
UI.DataPoint #Eval_by_Country-Generic : {
    $Type : 'UI.DataPointType',
    Title : 'Sales India - Generic Card',
    Value : Sales,
    ValueFormat : {
        ScaleFactor : 2,
        NumberOfFractionalDigits : 1
    },
    CriticalityCalculation : {
        ImprovementDirection : #Minimizing,
        DeviationRangeHighValue : '7300',
        ToleranceRangeHighValue : '7200'
    },
    TargetValue : '2.000 ',
    TrendCalculation : {
        ReferenceValue : '5201680',
        DownDifference : 10000000.0
    }
},
```

STEP: 16 — View Switch (tabs in manifest.json)
DESCRIPTION: Configure card-level tabs (view switch) in the card settings using the "tabs" array. Each tab references annotation paths for LineItem, SelectionVariant, PresentationVariant, Identification and DataPoint. Use these values to present alternate tab views and KPI per tab.
LANGUAGE: JSON
CODE:
```
"cards": {
      "card00": {
        "model": "salesOrder",
        "template": "sap.ovp.cards.list",
        "settings": {
          "category" : "Sales Orders With Analytical Header",
          "listFlavor": "bar",
          "listType": "extended",
          "entitySet": "SalesOrderSet",
          "tabs": [
                {
                    "annotationPath": "com.sap.vocabularies.UI.v1.LineItem#View1",
                    "selectionAnnotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant#line1",
                    "presentationAnnotationPath": "com.sap.vocabularies.UI.v1.PresentationVariant#line",
                    "identificationAnnotationPath": "com.sap.vocabularies.UI.v1.Identification",
                    "dataPointAnnotationPath": "com.sap.vocabularies.UI.v1.DataPoint#line",
                    "value": "{{dropdown_value1}}"
                },
                {
                    "annotationPath": "com.sap.vocabularies.UI.v1.LineItem#View2",
                    "presentationAnnotationPath": "com.sap.vocabularies.UI.v1.PresentationVariant#customer",
                    "selectionAnnotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant#SP2",
                    "identificationAnnotationPath": "com.sap.vocabularies.UI.v1.Identification#item2",
                    "dataPointAnnotationPath": "com.sap.vocabularies.UI.v1.DataPoint#line",
                    "value": "{{dropdown_value2}}"
                },
```

STEP: 17 — List Header Navigation (identification annotation)
DESCRIPTION: Use the Identification annotation to configure header and content navigation within the application. Note: LineItem navigation settings take precedence over Identification when both are present for list area navigation.
LANGUAGE: (explanatory)

STEP: 18 — Header Counter (manifest.json)
DESCRIPTION: Configure header counter visibility by setting defaultCountMode in the card settings in manifest.json. Supported only for OData V2 in SAP Fiori elements.
LANGUAGE: JSON
CODE:
```json
 "Card_Model_Name": {
                "settings": {
                    "defaultCountMode": "None"
                }
            }
```

STEP: 19 — Header Counter Note
DESCRIPTION: defaultCountMode is only supported in SAP Fiori elements for OData V2. Ensure your service and app are OData V2 if you require header counting behavior.
LANGUAGE: (explanatory)
--------------------------------

**TITLE**: Configuring manifest.json for the Analytical List Page (ALP) — OData V2 & V4

**INTRODUCTION**: Quick, code-focused guide to configure the SAP Fiori Elements Analytical List Page (ALP) in manifest.json for both OData V2 and OData V4 apps. Includes intact manifest examples and explicit guidance on settings you must set or avoid for reliable code generation and runtime behavior.

**TAGS**: fiori-elements-framework, analytical-list-page, manifest.json, ALP, OData V2, OData V4, sap.ui.generic.app, sap.fe.templates.ListReport, KPI, tableSettings

STEP: 1 — Enable ALP (OData V2) and core ALP manifest structure

DESCRIPTION: Add an entry to manifest.json under "sap.ui.generic.app" pages. ALP consumes the first page entry. Use component.name = "sap.suite.ui.generic.template.AnalyticalListPage". Ensure the service is an analytical (aggregate) OData service. The sample below is a complete ALP-focused manifest fragment (keep as-is when scaffolded). Key settings explained below the code: tableSettings (type, multiSelect, selectAll, selectionLimit), qualifier, condensedTableLayout, smartVariantManagement, defaultContentView, defaultFilterMode, showGoButtonOnFilterBar, contentTitle (use i18n key), filterDefaultsFromSelectionVariant, allFiltersAsInParameters, keyPerformanceIndicators (model, entitySet, qualifier, detailNavigation, groupId / KPI batching). For inner navigation from ALP to a template, use pages[] inside the ALP page entry (ALP does inner app navigation by default; use navigation.display to configure external target via crossNavigation outbounds).

LANGUAGE: JSON

CODE:
```json
{
  "sap.ui.generic.app": {
    "_version": "1.2.0",
    "settings": {
      "flexibleColumnLayout": {
        "defaultTwoColumnLayoutType": "TwoColumnsBeginExpanded"
      }
    },
    "pages": [
      {
        // This can have multiple page definitions within it. ALP only consumes the first page.
        "entitySet": "SEPMRA_C_ALP_SlsOrdItemCube",
        /* 
        Represents the entity set that is used to populate the main content area. 
        For parametrized entity set, use result entity set name instead of parametrized entity set. 
        */
        "component": {
          "name": "sap.suite.ui.generic.template.AnalyticalListPage", // Should not be changed.
          "list": true,
          "settings": {
            "tableSettings": {
              "type": "GridTable or AnalyticalTable or ResponsiveTable",
              /*
              Use these settings to select a table in ALP. Supports three table types: "AnalyticalTable", "GridTable" & "ResponsiveTable".
              By default, ALP determines the table type when undefined or if there is an incorrect value.
              Note: Do not set "tableType" to "AnalyticalTable" if the underlying service for the main entity set
              is not an aggregate service.
              */
              "multiSelect": true,
              /*
              When true, multiple records in the tabular display can be 
              selected. This setting takes effect only if the service has
              defined Actions in annotation or inside ControllerExtension.
              Else, the selection is always single.
              */
              "selectAll": true,
              /*
              Use this setting to select all the rows that are available in the back end with the current filters.
              It triggers only one batch call to select all the records.
              */
              "selectionLimit": 20
              /*
              You can only select 20 rows at a time while selecting a range of rows in the table.
              If selectionLimit is not provided, then a default value of 200 is set to selectionLimit.
              Note: Select all and selection limit are applicable only for GridTable and AnalyticalTable
              */
            },
            "qualifier": "DefaultPresentationVariant",
            /*
            Represents the SelectionPresentationVariant qualifier. 
            ALP looks for SelectionPresentationVariant with this qualifier 
            and if not found, it looks for PresentationVariant with this qualifier.
            This setting is optional, if this is not provided ALP looks for 
            Default LineItem and Chart without qualifiers.
            */
            "condensedTableLayout": true, // When set to false, compact style will be used to render the table.
            "smartVariantManagement": true, // When false, control level variant management is used instead of page level variant management
            "defaultContentView": "charttable", // Determines the visualization of content area. Possible other values: chart or table.
            "defaultFilterMode": "visual", // Determines the filter mode that is used. Possible other value: compact
            "showGoButtonOnFilterBar": false, // Go button is displayed for compact filters when this is set to true
            "contentTitle": "{{contentAreaTitle}}", // Lets you define title for the content area. Ensure that the contentAreaTitle is also defined in i18n.properties
            "autoHide": false,
            "filterDefaultsFromSelectionVariant": false, // Lets you to add default values for FilterBar using SelectionVariant annotation.
            "allFiltersAsInParameters": true, // All filter fields will be set as in parameter.
            "keyPerformanceIndicators": {
              // The first 3 KPIs listed here show up in the KPI tags
              "KPIRevenue": {
                // First KPI
                "model": "kpi",
                /*
                Links to the item in "models" section which provides additional information,
                for example, the data source for the KPI from which we could further obtain the
                data source and annotation corresponding to this KPI. This property must not be empty.
                */
                "entitySet": "SEPMRA_C_ALP_TotalSalesKPI", // Entity set used for bringing up the details displayed within the KPI tag/card.
                "qualifier": "KPIRevenue",
                /* Refers to the UI.KPI annotation. */
                "detailNavigation": "OverviewPage",
                /*
                Points to an element within "outbounds" property of the
                "crossNavigation" section. The details there help us in determining
                the target application as well as the parameters that need to be passed
                upon navigation from the KPI card footer.
                */
                "groupId": "mainKpiGroup"
                /*
                To achieve faster end-to-end response time within analytical list page, enable 
                batching of KPIs by defining groupId in the KPI section of the manifest  
                file. You can determine which KPIs should be grouped together in a 
                given batch call. 
                Note: 
                -> The KPIs with same data source are batched together. KPIs with same 
                groupId and different data source triggers different batch calls.
                -> Batching of KPIs may increase the number of batch calls to the back end.
                */
              }
            } // End of KPIs
          } // End of settings
        },
        "pages": [
          {
            // ALP does an inner app navigation to the smart template specified below
            "entitySet": "SEPMRA_C_ALP_SlsOrdItemCube",
            "component": {
              "name": "<sap.suite.ui.generic.template.ObjectPage>"
            },
            "navigation": {
              // Optional (If specified ALP navigates to the target Application specified below through external app navigation)
              "display": {
                "path": "sap.apps.crossNavigation.outbounds",
                "target": "<NavigateToCTRItem>"
              }
            }
          }
        ]
      }
    ] // End of outer pages
  }
}
```

STEP: 2 — V2 ALP key constraints & actionable rules (compact list for code generation)

DESCRIPTION: Follow these rules when generating or validating manifest.json programmatically:
- ALP requires an analytical (aggregate) backend service. Do not set tableSettings.type to "AnalyticalTable" when service is not aggregate.
- selectionLimit: if omitted defaults to 200. selectAll and selectionLimit apply only to GridTable and AnalyticalTable.
- multiSelect: works only if Actions are defined in annotations or ControllerExtension; otherwise selection remains single.
- qualifier: optional; ALP looks for SelectionPresentationVariant with that qualifier, then PresentationVariant. If absent, ALP uses default LineItem/Chart without qualifier.
- KPI groupId: use to group KPIs into a single batch call (KPIs with same data source AND same groupId are batched). Different data source + same groupId -> separate batch calls.
- contentTitle should reference an i18n key present in i18n.properties.
- Inner navigation: ALP uses pages[] for inner app navigation; use navigation.display.path = "sap.apps.crossNavigation.outbounds" and target = outbound key for external app navigation.

LANGUAGE: text

CODE:
```text
Rules:
- Ensure component.name === "sap.suite.ui.generic.template.AnalyticalListPage"
- Ensure main page is the first element in "sap.ui.generic.app.pages"
- Validate selectionLimit default (200) and allowed use-cases for selectAll/multiSelect
- Validate KPI model/entitySet/qualifier/detailNavigation/groupId presence when using KPIs
```

STEP: 3 — Enable ALP flavor for OData V4 (List Report with views)

DESCRIPTION: In OData V4, ALP is a flavor of the List Report template. Configure the target (usually under "sap.ui5" -> "routing" -> "targets" or in Fiori Launchpad target config) to use "sap.fe.templates.ListReport" and add "options.settings.views" to specify primary/secondary annotation paths and defaultPath ("primary", "secondary", "both"). Primary annotation paths accept UI.Chart, UI.PresentationVariant, or UI.SelectionPresentationVariant. If PresentationVariant/SelectionPresentationVariant is referenced, FE will pick the first chart visualization. If PresentationVariant lacks chart, fallback to default UI.Chart (unqualified). If not found -> blank chart. Secondary supports UI.LineItem, UI.PresentationVariant, UI.SelectionPresentationVariant; similarly, PresentationVariant fallback tries UI.LineItem (unqualified) then blank. Important: do not use arrays for "paths", "primary" or "secondary" — FE does not support arrays here; missing annotationPath leads to app load failure.

LANGUAGE: JSON

CODE:
```json
"targets": {
     "BusinessPartnersList": {
          ………
          "name": "sap.fe.templates.ListReport",
          "options": {
               "settings": {
                    "contextPath": "/BusinessPartners",
                    ………
                    "views": {
                         "paths": [{
                              "primary": [{
                                   "annotationPath": "com.sap.vocabularies.UI.v1.PresentationVariant#ProductSalesPV"
                              }],
                              "secondary": [{
                                   "annotationPath": "com.sap.vocabularies.UI.v1.LineItem"
                              }],
                              "defaultPath": "both"
                         }]
                    },
                    ………
                    ………
               }
          }
     }
}
```

STEP: 4 — V4 annotationPath behavior, defaultPath values, and constraints (reference snippets)

DESCRIPTION: Use these concrete examples when generating manifest fragments or validating annotation references.

LANGUAGE: JSON

CODE:
```json
// defaultPath examples:
{ "defaultPath": "primary" }   // chart-only view
{ "defaultPath": "secondary" } // table-only view
{ "defaultPath": "both" }      // hybrid chart + table view

// Primary annotation path types (allowed):
// - UI.Chart
// - UI.PresentationVariant (FE picks first chart inside it)
// - UI.SelectionPresentationVariant (FE picks first chart inside it)

// Secondary annotation path types (allowed):
// - UI.LineItem
// - UI.PresentationVariant (FE picks first LineItem inside it)
// - UI.SelectionPresentationVariant (FE picks first LineItem inside it)

// Important constraint:
 // Do not use arrays for the "paths", "primary", or "secondary" properties — FE does not support array fallback semantics here.
```
--------------------------------

**TITLE**: Configuring the Overview Page via manifest.json (OVP)

**INTRODUCTION**: Instructions and ready-to-use manifest.json fragments for initializing and configuring a Fiori Overview Page (OVP) application. Includes card definitions, global filter settings, lazy rendering, data load behavior, and container layout options. Use these snippets directly in your app's manifest.json root.

**TAGS**: fiori-elements-framework, SAPUI5, overview-page, manifest.json, OVP, cards, lazy-loading

**STEP**: 1 — Add or update the "sap.ovp" section in manifest.json

**DESCRIPTION**: Add the "sap.ovp" object at the root of your manifest.json to define OVP-specific settings: global filter model/entity, container layout, variant management, date formatting, live filter behavior, data load settings, image support, analytical parameter handling, refresh interval, date range control, lazy rendering, and card definitions. Replace model/entity names and card settings with values appropriate to your app.

**LANGUAGE**: JSON

**CODE**:
```json
"sap.ovp" : { //section for ovp-specific app manifest settings
    "globalFilterModel": "ZModelName", //OData model that contains entity definitions relevant for global filters
    "globalFilterEntityType": "ZFilterEntityType", //Represents the entity to use as a global filter in the smart filter bar control. Deprecated since SAPUI5 1.54.
    "globalFilterEntitySet": "ZFilterEntitySet", //Represents the entity set to use as a global filter in the smart filter bar control. Available from SAPUI5 1.54 onwards.
    "containerLayout": "resizable", //Represents the layout of the card container.
    "smartVariantRequired": true, //Represents a switch to activate smart variant management in the global filters. The default value is true.
    "showDateInRelativeFormat": false, //Represents a switch to enable or disable relative/normal date formatting in OVP applications.
    "enableLiveFilter": false, //Represents the switch to activate live update in the global filters, otherwise a manual update is required by clicking the Go button.
    "dataLoadSettings": {
        "loadDataOnAppLaunch": "ifAnyFilterExist" //Defines the data load behaviour on app launch. Values: 'ifAnyFilterExist'/'always' to auto load data and 'never' to stop the auto data load during application launch.
    },
    "imageSupported": true, //Allows the condensed list card to show images or icons.	
    "considerAnalyticalParameters": true, //Flag to enable/disable analytical parameter support for the smart filter bar.
    "refreshIntervalInMinutes": 2, //Time interval in minutes to auto refresh the card models.
    "useDateRangeType": true, //Flag to enable or disable the semantic date range control for the smart filter bar. The default value is false.
    "enableLazyRendering": true, //Cards in the visible view port get rendered. Additional cards are rendered when scrolling. Default value is false.
    
    "cards": { //An object of cards 
        "card01": { //each card contains the following 
            "model": "ZCard1Model", //Model for the card
            "template": "sap.ovp.cards.list", //Card component path to use for this card.
            "settings": {
                "title": "card title", //Language-dependent title of the card - used in the card header.
                "subTitle": "sub title", //Language-dependent subtitle of the card - used in the card header.
                "entitySet": "zCard1EntitySet", //Entity set displayed in this card.
                "valueSelectionInfo": "text for KPI Header", //Additional information relevant for the KPI Header.
                "listFlavor": "Standard", //Represents the flavor of the list to use in this card. The flavor can be bar or standard.
                "listType": "Extended", //Represents the type of list to use for this card. The list can be extended to display more information or condensed to take up less space on the card.
                "sortBy": "zPropertyForSort", //Property name to sort by this entity set.
                "sortOrder": "Ascending", //Sort order - ascending or descending.
                "showRefresh": false, // Show or hide the Refresh option under More Actions. The default value is true.
                "staticContent": {}, //Applicable for static link list cards.
                "annotationPath": "", // Represents the annotation path.
                "kpiAnnotationPath": "com.sap.vocabularies.UI.v1.KPI#AllActualCosts", // Represents the KPI annotation path "selectionAnnotationPath": "", // Represents the selection annotation path.
                "chartAnnotationPath": "", //Represents the chart annotation path.
                "presentationAnnotationPath": "", //Represents the presentation annotation path.
                "dataPointAnnotationPath": "", //Represents the data point annotation path.
                "identificationAnnotationPath": "", //Represents the identification annotation path.
                "dynamicSubtitleAnnotationPath": "dynamicSubtitle", //Represents the dynamic subtitle annotation path.
                "requireAppAuthorization": "", //Represents the cards for which authorization is required.
                "chartAnnotationPath": "com.sap.vocabularies.UI.v1.Chart#SalesShareBubble",
                "presentationAnnotationPath": "com.sap.vocabularies.UI.v1.PresentationVariant#SalesShareBubble",
                "identificationAnnotationPath": "com.sap.vocabularies.UI.v1.Identification#Eval_by_Currency_Scatter",
                "selectionAnnotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant#Eval_by_Currency_ColumnStacked",
                "navigation": "noHeaderNav" //Allows you to disable navigation from the analytical list card header area.
            }
        }
    }
}
```

**STEP**: 2 — Important properties and valid values (quick reference)

**DESCRIPTION**: Quick actionable reference for frequently used properties. Copy/paste these fragments into your manifest or use them as models when generating code.

- containerLayout: "resizable" or "fixed"
- enableLazyRendering: true | false
- dataLoadSettings.loadDataOnAppLaunch: "ifAnyFilterExist" | "always" | "never"
- smartVariantRequired: true | false
- enableLiveFilter: true | false
- refreshIntervalInMinutes: integer (minutes)
- imageSupported: true | false
- useDateRangeType: true | false
- globalFilterModel, globalFilterEntitySet: use your OData model and entity set names

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ovp": {
    "containerLayout": "resizable",
    "enableLazyRendering": true,
    "dataLoadSettings": {
      "loadDataOnAppLaunch": "ifAnyFilterExist"
    },
    "smartVariantRequired": true,
    "refreshIntervalInMinutes": 2
  }
}
```

**STEP**: 3 — Enable lazy loading during performance testing (URL parameter)

**DESCRIPTION**: For performance testing or to mimic manifest lazy rendering behavior without changing manifest.json, append the URL parameter sap-fe-xx-lazyloadingtest=true to the app URL. This behaves like setting "enableLazyRendering": true in the manifest.

**LANGUAGE**: text

**CODE**:
```
https://<host>:<port>/sap/bc/ui5_ui5/sap/<app>/index.html?sap-fe-xx-lazyloadingtest=true
```

**STEP**: 4 — Choose and configure Overview Page layout: fixed vs resizable

**DESCRIPTION**: Configure container layout in manifest.json to control card sizing and behavior.

- Resizable layout (recommended): set "containerLayout" to "resizable". End users can resize cards horizontally and vertically within the grid.
- Fixed layout (deprecated): set "containerLayout" to "fixed". Cards have fixed widths; configure default sizes per card. Supports up to four columns. Note: fixed layout deprecated as of SAPUI5 1.142.

When switching from fixed -> resizable, the following end-user/key-user changes made in fixed layout are NOT retained:
- Card arrangements changed by end users using drag and drop.
- Card order changes made by key users using cut and paste.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ovp": {
    "containerLayout": "fixed"
  }
}
```

```json
{
  "sap.ovp": {
    "containerLayout": "resizable"
  }
}
```

**STEP**: 5 — File location and integration note

**DESCRIPTION**: Put or update the "sap.ovp" section in your project's manifest.json (application root manifest). Ensure models referenced by "globalFilterModel" and each card "model" are declared under the "models" section of manifest.json and that entitySet/annotation paths match your service metadata and annotations.

**LANGUAGE**: JSON

**CODE**:
```json
// manifest.json (root)
{
  "sap.app": { /* app descriptor */ },
  "sap.ui5": {
    "models": {
      "ZModelName": { /* model config */ },
      "ZCard1Model": { /* model config */ }
    }
  },
  "sap.ovp": { /* use fragments from STEP 1 */ }
}
```
--------------------------------

**TITLE**: Configuring the Object Page Header Title and Description

**INTRODUCTION**: Use annotations to set or change the Object Page header Title and Description in SAP Fiori elements. This guide shows three annotation approaches (OData XML annotations, ABAP CDS annotations, and CAP CDS annotations). Each example demonstrates mapping Title and Description to entity properties (including navigation properties) so code generation tools can apply them directly to a service or metadata file.

**TAGS**: fiori-elements-framework, annotations, UI.HeaderInfo, OData, ABAP CDS, CAP CDS, object-page, header, title, description

**STEP**: 1 — OData XML Annotation: Add UI.HeaderInfo to an entity type

**DESCRIPTION**: Edit your OData annotations XML file and add a UI.HeaderInfo annotation targeting the entity type. Set Title and Description as UI.DataField records pointing to the desired properties (can be simple properties or navigation property paths). The example targets STTA_PROD_MAN.STTA_C_MP_ProductType, maps Title to a navigation property to_ProductTextInOriginalLang/Name and Description to ProductForEdit.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="STTA_PROD_MAN.STTA_C_MP_ProductType">
    <Annotation Term="UI.HeaderInfo">
        <Record>
            <PropertyValue Property="Title">
                <Record Type="UI.DataField">
                    <PropertyValue Property="Value" Path="to_ProductTextInOriginalLang/Name"/>
                </Record>
            </PropertyValue>
            <PropertyValue Property="Description">
                <Record Type="UI.DataField">
                     <PropertyValue Property="Value" Path="ProductForEdit"/>
                </Record>
            </PropertyValue>
        </Record>
    </Annotation>
</Annotations>
```

**STEP**: 2 — ABAP CDS Annotation: Add @UI.headerInfo to a CDS view

**DESCRIPTION**: In an ABAP CDS view, use the @UI.headerInfo annotation to define title and description for the UI. Use the title.value and description.value entries to reference fields or localized text identifiers. The example shows a headerInfo block for view STTA_C_MP_PRODUCT (note the annotate statement included for completeness).

**LANGUAGE**: ABAP CDS

**CODE**:
```
@UI.headerInfo: {
  title: {
    value: '_PRODUCTTEXTINORIGINALLANG.NAME',
    type: #STANDARD
  },
  description: {
    value: 'PRODUCTFOREDIT',
    type: #STANDARD
  }
}
annotate view STTA_C_MP_PRODUCT with {

}
```

**STEP**: 3 — CAP CDS Annotation: Annotate entity type with UI.HeaderInfo

**DESCRIPTION**: For CAP (Core Data Services) projects, add an annotation block to the service's CDS where you annotate the entity type. Use UI.HeaderInfo with Title and Description configured as UI.DataField entries. The example annotates STTA_PROD_MAN.STTA_C_MP_ProductType and maps Title to to_ProductTextInOriginalLang.Name and Description to ProductForEdit.

**LANGUAGE**: CDS

**CODE**:
```
annotate STTA_PROD_MAN.STTA_C_MP_ProductType with @(
  UI.HeaderInfo : {
    Title : {
        $Type : 'UI.DataField',
        Value : to_ProductTextInOriginalLang.Name
    },
    Description : {
        $Type : 'UI.DataField',
        Value : ProductForEdit
    }
  }
);
```

**STEP**: 4 — Reference screenshot and related information

**DESCRIPTION**: Visual reference image for the Object Page header: images/Object_Page_Title_and_Subtitle_0430d3e.png. For additional guidance about default titles of new/unnamed objects, see: changing-default-titles-of-new-and-unnamed-objects-63946c0.md.
--------------------------------

**TITLE**: Configure Table Selection Mode (multiSelect / selectionMode / selectAll / selectionLimit)

**INTRODUCTION**: This guide shows exactly where and how to configure row selection behavior for tables in SAP Fiori Elements apps (OData V2 and V4). It covers switching between single/multiple selection, enabling Select All / Clear All, and limiting selection size. Use the manifest.json settings shown below to apply configuration at the List Report, Object Page, page-level, or table-level.

**TAGS**: fiori-elements-framework, manifest.json, tableSettings, multiSelect, selectionMode, selectAll, selectionLimit, ListReport, ObjectPage, ODataV2, ODataV4

STEP: 1 — OData V2: Enable multiple selection for List Report tables

DESCRIPTION: Set multiSelect:true under the List Report page's tableSettings in manifest.json to switch a table from single selection (default) to multiple selection.

LANGUAGE: JSON

CODE:
```json
"sap.ui.generic.app": {
  "_version": "1.3.0",
  "pages": {
  "ListReport|STTA_C_MP_Product": {
    "entitySet": "STTA_C_MP_Product",
    "component": {
    "name": "sap.suite.ui.generic.template.ListReport",
    "list": true,
    "settings" : { 
      "tableSettings": {
        "multiSelect": true
      }
    }

```

STEP: 2 — OData V2: Enable multiple selection for Object Page (page-level)

DESCRIPTION: To enable multiple selection for all tables on an Object Page, set multiSelect:true in the page-level tableSettings.

LANGUAGE: JSON

CODE:
```json
"pages": {
  "ObjectPage|STTA_C_MP_Product": {
  "entitySet": "STTA_C_MP_Product",
  "name": "sap.suite.ui.generic.template.ObjectPage",
    "settings": {
      "showRelatedApps": true,
      "editableHeaderContent": true,
      "tableSettings": {
        "multiSelect": true
      },
      "sections": {
        "to_ProductText::com.sap.vocabularies.UI.v1.LineItem": {
          "navigationProperty": "to_ProductText",
          "entitySet": "STTA_C_MP_ProductText",
          "createMode": "inline"
        }
```

STEP: 3 — OData V2: Enable multiple selection for a specific table (table-level)

DESCRIPTION: To enable multiple selection only for a specific section/table on an Object Page, add tableSettings.multiSelect:true inside that section definition.

LANGUAGE: JSON

CODE:
```json
"pages": {
  "ObjectPage|STTA_C_MP_Product": {
  "entitySet": "STTA_C_MP_Product",
  "name": "sap.suite.ui.generic.template.ObjectPage",
    "settings": {
      "showRelatedApps": true,
      "editableHeaderContent": true,
      "sections": {
        "to_ProductText::com.sap.vocabularies.UI.v1.LineItem": {
          "navigationProperty": "to_ProductText",
          "entitySet": "STTA_C_MP_ProductText",
          "createMode": "inline",
          "tableSettings": {
            "multiSelect": true
          }
        }
```

STEP: 4 — OData V2: Configure Select All / Clear All and selectionLimit

DESCRIPTION: For responsive tables: Select All checkbox appears by default when multiSelect is enabled. To show Clear All instead, set selectAll:false. For Grid/Analytical/Tree tables, Clear All is visible by default when multiSelect is enabled. Use selectionLimit to restrict how many rows can be selected when selectAll is false. Default selectionLimit = 200 (if not configured). selectionLimit applies only to Grid/Analytical/Tree tables.

LANGUAGE: JSON

CODE:
```json
     "tableSettings": {
           "multiSelect": true,
           "selectAll": true/false,
           "selectionLimit": 150  //Applicable only for Grid/Analytical/Tree table types
     }
```

STEP: 5 — OData V2: Notes on Select All behavior and performance

DESCRIPTION: When selectAll:true on Grid/Analytical/Tree tables, the system loads all backend data in multiple sequential requests — enable only if data volume is reasonable. In responsive tables selectAll selects only loaded rows and shows a toast with the number of selected records.

LANGUAGE: JSON

CODE:
```json
// No extra code: behavior note applied when using tableSettings.selectAll in manifest.json
```

STEP: 6 — OData V4: selectionMode values and evaluation rules

DESCRIPTION: Use selectionMode in manifest.json to control selection in Fiori Elements V4. Possible values:
- "Multi" (default): In display mode, multiple selection allowed only if toolbar has actions requiring context (or DataFieldForIntentBasedNavigation). In edit mode, Multi is allowed if a Delete button exists when no context actions.
- "Single": Similar logic but for single selection.
- "None": No selection in display mode; in edit mode selection can still occur if Delete button available.
- "Auto": deprecated.
Note: If bound actions are not enabled for the user, selectionMode evaluates to "None" even if manifest sets "Multi" or "Single". You can force selection via "ForceMulti" or "ForceSingle".

LANGUAGE: JSON

CODE:
```json
// No single code snippet: set selectionMode in tableSettings/controlConfiguration as shown in steps below.
```

STEP: 7 — OData V4: Enable multiple selection for List Report tables

DESCRIPTION: For List Report in V4, set controlConfiguration -> @com.sap.vocabularies.UI.v1.LineItem -> tableSettings -> selectionMode:"Multi" and specify type if needed.

LANGUAGE: JSON

CODE:
```json
"SalesOrderManageList":{
         "type":"Component",
         "id":"SalesOrderManageList",
         "name":"sap.fe.templates.ListReport",
         "options":{
            "settings":{
               "contextPath":"/SalesOrderManage",
               "controlConfiguration":{
                  "@com.sap.vocabularies.UI.v1.LineItem":{
                     "tableSettings":{
                        "type":"ResponsiveTable",
                        "selectionMode":"Multi"
                     }
                  }
               }
            }
         }
      }
```

STEP: 8 — OData V4: Enable multiple selection for Object Page tables (table-level)

DESCRIPTION: Configure selectionMode:"Multi" inside controlConfiguration per LineItem to enable multi selection for a specific table on the Object Page. Also set table type (GridTable, etc.).

LANGUAGE: JSON

CODE:
```json
"SalesOrderManageObjectPage":{
      "type":"Component",
      "id":"SalesOrderManageObjectPage",
      "name":"sap.fe.templates.ObjectPage",
      "options":{
         "settings":{
            "contextPath":"/SalesOrderManage",
            "sectionLayout":"Tabs",
            "controlConfiguration":{
               "_Item/@com.sap.vocabularies.UI.v1.LineItem":{
                  "tableSettings":{
                     "type":"GridTable",
                     "selectionMode":"Multi"
                  }
               }
            }
         }
      }
   }
```

STEP: 9 — OData V4: Configure Select All behavior and override defaults

DESCRIPTION: On List Report: Responsive tables show Select All by default; non-responsive show Clear All by default. On Object Page: Select All default depends on page layout (anchor bar -> enabled, tab bar -> disabled). Override defaults by setting selectAll:true/false in tableSettings within controlConfiguration.

LANGUAGE: JSON

CODE:
```json
"controlConfiguration":{
	"_Item/@com.sap.vocabularies.UI.v1.LineItem":{
		"tableSettings":{
            "type":"GridTable",
            "selectionMode":"Multi",
            "selectAll": true
        }
    }
}
```

STEP: 10 — OData V4: Limit selected rows using selectionLimit

DESCRIPTION: Set selectionLimit in manifest.json (controlConfiguration tableSettings) to limit how many rows can be selected at once in Grid/Tree/Analytical tables. If unset, default = 200.

LANGUAGE: JSON

CODE:
```json
// manifest.json
"SalesOrderManageObjectPage":{
      "type":"Component",
      "id":"SalesOrderManageObjectPage",
      "name":"sap.fe.templates.ObjectPage",
      "options":{
         "settings":{
            "contextPath":"/SalesOrderManage",
            "sectionLayout":"Tabs",
            "controlConfiguration":{
               "_Item/@com.sap.vocabularies.UI.v1.LineItem":{
                  "tableSettings":{
                     "type":"GridTable",
                     "selectionMode":"Multi",
                     "selectionLimit": "50"
                  }
               }
            }
         }
      }
   }
```

STEP: 11 — Summary of key actionable rules

DESCRIPTION:
- For OData V2 use tableSettings.multiSelect (boolean).
- For OData V4 use tableSettings.selectionMode with values "Multi", "Single", "None" (or force variants).
- Use tableSettings.selectAll:true/false to control Select All vs Clear All visibility.
- Use tableSettings.selectionLimit (Grid/Analytical/Tree) to cap selectable rows; default = 200 if not provided.
- Consider performance: selectAll:true on non-responsive tables triggers backend-wide loading in multiple requests — enable only for modest data volumes. In responsive tables selectAll only selects loaded rows and shows a toast.
--------------------------------

**TITLE**: Configuring the Static Link List Card

**INTRODUCTION**: Configure a static link list card (sap.ovp.cards.linklist) to display static items (links, images, icons) as a standard list or carousel. Use listFlavor to choose presentation and populate staticContent with per-item display and navigation properties (URL-based or intent-based).

**TAGS**: fiori-elements-framework, sap.ovp.cards.linklist, linklist, staticContent, listFlavor, targetUri, semanticObject, action, openInNewWindow

**STEP**: 1 — Set card metadata and list flavor

**DESCRIPTION**: Define the card title, subtitle and listFlavor to choose between "standard" (list) or "carousel" presentation. Apply other general settings (e.g., defaultSpan) at the card root as needed.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "card010_QuickLinks": {
    "model": "salesOrder",
    "template": "sap.ovp.cards.linklist",
    "settings": {
      "title": "Quick Links",
      "subTitle": "Standard Link List With Static Data",
      "listFlavor": "standard"
    }
  }
}
```

**STEP**: 2 — Provide staticContent items (display properties)

**DESCRIPTION**: Populate settings.staticContent with an array of items. Each item supports display fields: title, subTitle, imageUri, imageAltText. Images can be local paths (e.g., img/JD.png) or SAP icon URIs (sap-icon://...). Keep display fields filled to ensure accessibility (imageAltText).

**LANGUAGE**: JSON

**CODE**:
```json
"staticContent": [
  {
    "title": "Jim Smith",
    "subTitle": "Sales",
    "imageUri": "img/JD.png",
    "imageAltText": "Jim Smith"
  },
  {
    "title": "Alice Wilson",
    "subTitle": "Sales",
    "imageUri": "img/AW.png",
    "imageAltText": "Alice Wilson"
  }
]
```

**STEP**: 3 — Configure URL-based navigation per item

**DESCRIPTION**: For link navigation to external or internal URLs, add targetUri and openInNewWindow (boolean). When openInNewWindow is true, the card opens the target in a new browser window/tab.

**LANGUAGE**: JSON

**CODE**:
```json
"card010_QuickLinks": {
  "model": "salesOrder",
  "template": "sap.ovp.cards.linklist",
  "settings": {
    "title": "Quick Links",
    "subTitle": "Standard Link List With Static Data",
    "listFlavor": "standard",
    "staticContent": [
      {
        "title": "Jim Smith",
        "subTitle": "Sales",
        "imageUri": "img/JD.png",
        "imageAltText": "Jim Smith",
        "targetUri": "https://abc.com",
        "openInNewWindow": true
      },
      {
        "title": "Alice Wilson",
        "subTitle": "Sales",
        "imageUri": "img/AW.png",
        "imageAltText": "Jim Smith",
        "targetUri": "https://abc.com",
        "openInNewWindow": true
      }
    ]
  }
}
```

**STEP**: 4 — Configure Intent-Based Navigation per item

**DESCRIPTION**: For SAP Fiori intent navigation, set semanticObject and action on each item. Optionally include display properties and additional flags like disableInCard. Use sap-icon URIs for icons when appropriate. You can also include card-level layout settings (e.g., defaultSpan).

**LANGUAGE**: JSON

**CODE**:
```json
"card010_QuickLinks": {
  "model": "salesOrder",
  "template": "sap.ovp.cards.linklist",
  "settings": {
    "title": "Quick Links",
    "subTitle": "Standard Link List With Static Data",
    "listFlavor": "standard",
    "defaultSpan": {
      "rows": 15,
      "cols": 1
    },
    "staticContent": [
      {
        "title": "Create Purchase Order",
        "imageUri": "sap-icon://Fiori6/F0865",
        "imageAltText": "{{card30_icon_prod_man}}",
        "semanticObject": "Action",
        "action": "toappnavsample",
        "disableInCard": true
      },
      {
        "title": "Create Supplier",
        "imageUri": "sap-icon://Fiori2/F0246",
        "imageAltText": "{{card30_icon_so_man}}",
        "semanticObject": "Action",
        "action": "toappnavsample"
      },
      {
        "title": "Create Contact",
        "imageUri": "sap-icon://Fiori6/F0866",
        "imageAltText": "{{card30_icon_so_man}}",
        "semanticObject": "Action",
        "action": "toappnavsample"
      }
    ]
  }
}
```
--------------------------------

**TITLE**: Configuring the Table Area (LineItem, DataField, DataFieldForAnnotation, Navigation)

**INTRODUCTION**: This document instructs how to configure table columns for Fiori elements using the UI.LineItem annotation and related annotations. It provides concrete examples in XML annotations, ABAP CDS, and CAP CDS to define column labels, values, numeric DataPoints, contact quick views, and navigation properties.

**TAGS**: fiori-elements-framework, UI.LineItem, DataField, DataFieldForAnnotation, DataPoint, Contact, DataFieldForIntentBasedNavigation, DataFieldWithUrl, ABAP CDS, CAP CDS, XML

**STEP**: 1 — Define LineItem DataField entries for table columns

**DESCRIPTION**: Add UI.LineItem (qualified) entries to define table columns. Use DataField records to set Label (column header) and Value (path to property). Examples include standard value paths, navigation property paths, and referencing a DataPoint via DataFieldForAnnotation.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="com.sap.vocabularies.UI.v1.LineItem" Qualifier="View4">
   <Collection>
      <Record Type="com.sap.vocabularies.UI.v1.DataField">
         <PropertyValue Property="Label" String="Order ID" />
         <PropertyValue Property="Value" Path="SalesOrderID" />
      </Record>
      <Record Type="com.sap.vocabularies.UI.v1.DataField">
         <PropertyValue Property="Label" String="Customer" />
         <PropertyValue Property="Value" Path="ToBusinessPartner/EmailAddress" />
      </Record>
      <Record Type="com.sap.vocabularies.UI.v1.DataField">
         <PropertyValue Property="Label" String="Customer" />
         <PropertyValue Property="Value" Path="CustomerName" />
      </Record>
      <Record Type="com.sap.vocabularies.UI.v1.DataFieldForAnnotation">
         <PropertyValue Property="Label" String="TaxAmount" />
         <PropertyValue Property="Target" AnnotationPath="@com.sap.vocabularies.UI.v1.DataPoint#TaxAmount" />
      </Record>
   </Collection>
</Annotation>
```

**LANGUAGE**: ABAP CDS

**CODE**:
```abap
@UI.lineItem: [
  {
    label: 'Order ID',
    position: 10 ,
    qualifier: 'View4'
  }
]
SALESORDERID;

@UI.lineItem: [
  {
    label: 'Customer',
    value: '_BUSINESSPARTNER.EMAILADDRESS',
    position: 20 ,
    qualifier: 'View4'
  }
]
_BUSINESSPARTNER;

@UI.lineItem: [
  {
    label: 'Customer',
    position: 30,
    qualifier: 'View4'
  }
]
CUSTOMERNAME;

@UI.lineItem: [
  {
    label: 'TaxAmount',
    valueQualifier: 'TaxAmount',
    type: #AS_DATAPOINT,
    position: 40,
    qualifier: 'View4'
  }
]
PROPERT_NAME;
```

**LANGUAGE**: CAP CDS

**CODE**:
```cds
UI.LineItem #View4 : [
    {
        $Type : 'UI.DataField',
        Label : 'Order ID',
        Value : SalesOrderID
    },
    {
        $Type : 'UI.DataField',
        Label : 'Customer',
        Value : ToBusinessPartner.EmailAddress
    },
    {
        $Type : 'UI.DataField',
        Label : 'Customer',
        Value : CustomerName
    },
    {
        $Type : 'UI.DataFieldForAnnotation',
        Label : 'TaxAmount',
        Target : '@UI.DataPoint#TaxAmount'
    }
]
```

**STEP**: 2 — (Optional) Use DataFieldForAnnotation: DataPoint (numeric values)

**DESCRIPTION**: Create a DataPoint annotation and reference it from a DataFieldForAnnotation in the LineItem to render numeric values with DataPoint semantics (title and value). Examples show XML, ABAP CDS, and CAP CDS DataPoint definitions. Reference the DataPoint via AnnotationPath / valueQualifier or Target depending on notation.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="com.sap.vocabularies.UI.v1.DataPoint" Qualifier="TaxAmount">
   <Record Type="com.sap.vocabularies.UI.v1.DataPointType">
      <PropertyValue Property="Title" String="TaxAmount" />
      <PropertyValue Property="Value" Path="TaxAmount" />
   </Record>
</Annotation>
```

**LANGUAGE**: ABAP CDS

**CODE**:
```abap
@UI.dataPoint: {
  title: 'TaxAmount'
}
TaxAmount;
```

**LANGUAGE**: CAP CDS

**CODE**:
```cds
UI.DataPoint #TaxAmount : {
    $Type : 'UI.DataPointType',
    Title : 'TaxAmount',
    Value : TaxAmount
}
```

**STEP**: 3 — (Optional) Use DataFieldForAnnotation: Contact (quick view contact info)

**DESCRIPTION**: Define a Contact annotation to provide quick-view contact details such as telephone and email that can be surfaced in the table (card quick view). Examples provided for XML and CAP CDS show tel and email collections and types.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="com.sap.vocabularies.Communication.v1.Contact">
   <Record>
      <PropertyValue Property="tel">
         <Collection>
            <Record>
               <PropertyValue Property="type" EnumMember="com.sap.vocabularies.Communication.v1.PhoneType/fax" />
               <PropertyValue Property="uri" Path="FaxNumber" />
            </Record>
            <Record>
               <PropertyValue Property="type" EnumMember="com.sap.vocabularies.Communication.v1.PhoneType/work com.sap.vocabularies.Communication.v1.PhoneType/preferred"/>
               <PropertyValue Property="uri" Path="PhoneNumber" />
            </Record>
         </Collection>
      </PropertyValue>
      <PropertyValue Property="email">
         <Collection>
            <Record>
               <PropertyValue Property="type" EnumMember="com.sap.vocabularies.Communication.v1.ContactInformationType/preferred com.sap.vocabularies.Communication.v1.ContactInformationType/work" />
               <PropertyValue Property="address" Path="EmailAddress" />
            </Record>
         </Collection>
      </PropertyValue>
   </Record>
</Annotation>
```

**LANGUAGE**: CAP CDS

**CODE**:
```cds
Communication.Contact : {
    tel : [
        {
            type : #fax,
            uri : FaxNumber
        },
        {
            type : [ #work, #pref ],
            uri : PhoneNumber
        }
    ],
    email : [
        {
            type : [ #pref, #work ],
            address : EmailAddress
        }
    ]
}
```

**STEP**: 4 — (Optional) Configure navigation for table entries

**DESCRIPTION**: For navigation from table rows or cells, prefer DataFieldForIntentBasedNavigation to configure intent-based (Fiori launchpad) navigation. Use DataFieldWithUrl when linking to a specific application route or external website (non-target-map route). The overview page will treat DataFieldWithUrl as intent-based navigation and open the application in the same tab with context.

**LANGUAGE**: Text

**CODE**:
```text
- Use com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation to define intent-based navigation to SAP Fiori applications.
- Use com.sap.vocabularies.UI.v1.DataFieldWithUrl to configure navigation to external apps and websites or specific application routes not in the target mapping.

Note:
The recommended way to configure intent-based navigation is by using the DataFieldForIntentBasedNavigation property. However, you can also use DataFieldWithUrl for navigating to a specific application route that is not configured as target map. The overview page identifies this as an intent-based navigation and opens the application in the same tab with relevant context.
```
--------------------------------

**TITLE**: Configuring the Table Card Header Area (Optional)

**INTRODUCTION**: Steps and code samples to configure the table card header in an SAP Fiori Elements OVP app: set title/subtitle in manifest.json, point the card to a KPI DataPoint annotation, provide DataPoint annotation examples (XML, ABAP CDS, CAP CDS), configure card-level view switch (tabs) and selection, and define criticality settings for KPI visualization. Use these exact snippets in your app descriptor and metadata annotations.

**TAGS**: fiori-elements-framework, sap.ovp, manifest.json, DataPoint, KPI, table-card, header, view-switch, annotations

STEP: 1 — Configure card title and subtitle in manifest.json

DESCRIPTION: In the application descriptor (manifest.json) set the card title, subTitle and entitySet under sap.ovp.cards.<cardId>. Use the card template "sap.ovp.cards.table" and set the model and entitySet for the table card.

LANGUAGE: JSON

CODE:
```json
"sap.ovp": {
"globalFilterModel": "salesOrder",
"globalFilterEntityType": "GlobalFilters", //Deprecated since SAPUI5 1.54.
"globalFilterEntitySet": "GlobalFilters", //Available from SAPUI5 1.54.
      ...
      ...
"cards": {
  "card014": {
    "model": "salesOrder",
    "template": "sap.ovp.cards.table",
    "settings": {
       "title": "Sales Forecast",
       "subTitle": "per Supplier",
       "entitySet": "SalesShare",
    ...
    ...
      }
    ]
  }
},
```

STEP: 2 — Point the card to a KPI annotation path (kpiAnnotationPath) in manifest.json

DESCRIPTION: Use kpiAnnotationPath under sap.ovp to reference an existing KPI/DataPoint annotation qualifier. This tells the card which KPI annotation to render in the header.

LANGUAGE: JSON

CODE:
```json
"sap.ovp": {//section for ovp-specific app descriptor settings
	...
	"kpiAnnotationPath":"com.sap.vocabularies.UI.v1.KPI#AllActualCosts", // Represents the KPI annotation path	
     ...
}
}
```

STEP: 3 — Define the UI.DataPoint annotation (XML example)

DESCRIPTION: Add a UI.DataPoint annotation in the service metadata (XML) to define the KPI shown in the card header. Include Title, Value, ValueFormat, CriticalityCalculation, TargetValue, TrendCalculation. Use Qualifier to reference the annotation from kpiAnnotationPath or card settings.

LANGUAGE: XML

CODE:
```xml
<Annotation Term="UI.DataPoint" Qualifier="Eval_by_Country_Generic">
   <Record Type="UI.DataPointType">
      <PropertyValue Property="Title" String="Sales India - Generic Card" />
      <PropertyValue Property="Value" Path="Sales" />
      <PropertyValue Property="ValueFormat">
         <Record>
            <PropertyValue Property="ScaleFactor" Decimal="2" />
            <PropertyValue Property="NumberOfFractionalDigits" Int="1" />
         </Record>
      </PropertyValue>
      <PropertyValue Property="CriticalityCalculation">
         <Record>
            <PropertyValue Property="ImprovementDirection" EnumMember="UI.ImprovementDirectionType/Minimize" />
            <PropertyValue Property="DeviationRangeHighValue" String="7300" />
            <PropertyValue Property="ToleranceRangeHighValue" String="7200" />
         </Record>
      </PropertyValue>
      <PropertyValue Property="TargetValue" String="2.000 " />
      <PropertyValue Property="TrendCalculation">
         <Record>
            <PropertyValue Property="ReferenceValue" String="5201680" />
            <PropertyValue Property="DownDifference" Decimal="10000000.0" />
         </Record>
      </PropertyValue>
   </Record>
</Annotation>
```

STEP: 4 — Define the DataPoint in ABAP CDS (example)

DESCRIPTION: If using ABAP CDS, add UI.dataPoint annotation with same properties—title, valueFormat, criticalityCalculation, targetValue, trendCalculation—so the card can consume the KPI.

LANGUAGE: ABAP

CODE:
```
@UI.dataPoint: { 
	 title: 'Sales India - Generic Card',
	 valueFormat: { scaleFactor: 2, numberOfFractionalDigits: 1 },
	 criticalityCalculation: { 
	   improvementDirection: #MINIMIZE,
	   deviationRangeHighValue: 7300,
	   toleranceRangeHighValue: 7200
	 },
	 targetValue: 2.000,
	 trendCalculation: { referenceValue: 'refValElement', downDifference: 10000000.0 }
}
Sales;
```

STEP: 5 — Define the DataPoint in CAP CDS (example)

DESCRIPTION: For CAP-based projects, add a UI.DataPoint annotation block in your CDS model with the same fields. Use the qualifier name to reference it.

LANGUAGE: CDS

CODE:
```
UI.DataPoint #Eval_by_Country-Generic : {
    $Type : 'UI.DataPointType',
    Title : 'Sales India - Generic Card',
    Value : Sales,
    ValueFormat : {
        ScaleFactor : 2,
        NumberOfFractionalDigits : 1
    },
    CriticalityCalculation : {
        ImprovementDirection : #Minimizing,
        DeviationRangeHighValue : '7300',
        ToleranceRangeHighValue : '7200'
    },
    TargetValue : '2.000 ',
    TrendCalculation : {
        ReferenceValue : '5201680',
        DownDifference : 10000000.0
    }
}
```

STEP: 6 — Configure View Switch (tabs) in manifest.json for card-level dropdowns

DESCRIPTION: Use the tabs array under the card's settings to configure a dropdown (view switch) that maps different annotationPath / selectionAnnotationPath / presentationAnnotationPath to each tab. Each tab can also reference a dataPointAnnotationPath and a UI text value (e.g., binding string placeholders).

LANGUAGE: JSON

CODE:
```json
"sap.ovp": {
	"globalFilterModel": "salesOrder",
	"globalFilterEntityType": "GlobalFilters", //Deprecated since SAPUI5 1.54.
     "globalFilterEntitySet": "GlobalFilters", //Available from SAPUI5 1.54.
	"showDateInRelativeFormat": false,
	"disableTableCardFlexibility": false,
	"considerAnalyticalParameters": true,
	"useDateRangeType": false,
	"cards": {
     "card014": {
         "model": "salesOrder",
         "template": "sap.ovp.cards.table",
         "settings": {
     "title": "Sales Forecast",
     "subTitle": "per Supplier",
     "valueSelectionInfo": "Value Selection Info",
     "entitySet": "SalesShare",
     "tabs": [
           {
     "dynamicSubtitleAnnotationPath": "com.sap.vocabularies.UI.v1.HeaderInfo#dynamicSubtitle",
     "annotationPath": "com.sap.vocabularies.UI.v1.LineItem#View1",
     "selectionAnnotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant#line1",
     "presentationAnnotationPath": "com.sap.vocabularies.UI.v1.PresentationVariant#line",
     "identificationAnnotationPath": "com.sap.vocabularies.UI.v1.Identification",
     "dataPointAnnotationPath": "com.sap.vocabularies.UI.v1.DataPoint#line",
     "value": "{{dropdown_value2}}"
           },
           {
     "dynamicSubtitleAnnotationPath": "com.sap.vocabularies.UI.v1.HeaderInfo#dynamicSubtitle",
     "annotationPath": "com.sap.vocabularies.UI.v1.LineItem#View4",
     "identificationAnnotationPath": "com.sap.vocabularies.UI.v1.Identification#item2",
     "dataPointAnnotationPath": "com.sap.vocabularies.UI.v1.DataPoint#line",
     "value": "{{dropdown_value4}}"
    }
   ]
  }
},DescriptorSettings
```

STEP: 7 — DataPoint properties and criticality options (how to set them)

DESCRIPTION: For KPI header behavior use these DataPoint properties:
- Title: shown in header and as column name
- Value: KPI measure (Path or constant)
- ValueFormat: number formatting (ScaleFactor, NumberOfFractionalDigits)
- CriticalityCalculation or Criticality: highlight KPI (enum or path)
- TargetValue: expected value shown in KPI
- TrendCalculation: reference, differences for trend

Criticality can be provided as an EnumMember or via a numeric path that returns 0–3. Supported enum values:
- com.sap.vocabularies.UI.v1.CriticalityType/Neutral — default neutral color
- com.sap.vocabularies.UI.v1.CriticalityType/Negative — red
- com.sap.vocabularies.UI.v1.CriticalityType/Critical — orange
- com.sap.vocabularies.UI.v1.CriticalityType/Positive — green

If using a path, the service must return numeric values:
- 0 = Neutral (default neutral color)
- 1 = Negative (red)
- 2 = Critical (orange)
- 3 = Positive (green)

LANGUAGE: JSON

CODE:
```json
// Example: criticality using enum
"Criticality": "com.sap.vocabularies.UI.v1.CriticalityType/Positive"

// Example: criticality using path (service returns 0..3)
"Criticality": { "Path": "CriticalityValue" }
```

STEP: 8 — Configure Table Header Navigation (Identification annotation)

DESCRIPTION: Use the Identification annotation to configure navigation targets from header and table areas. Note: For table area navigation, navigation settings defined in LineItem take precedence over Identification settings. Ensure your identification annotations are present and referenced properly in manifest settings (identificationAnnotationPath).

LANGUAGE: None

CODE:
```text
Note:
- Use UI.Identification annotations in metadata to define header navigation targets.
- For table area navigation, UI.LineItem navigation settings override UI.Identification.
```
--------------------------------

**TITLE**: Configure Table-Only View as Default for Analytical List Page (ALP)

**INTRODUCTION**: Instructions to set the Analytical List Page (ALP) to load the table-only view by default, configure the table type, and adjust column widths. Includes manifest examples for OData V2 and OData V4 and notes on table display modes and deprecated determining actions.

**TAGS**: fiori-elements-framework, analytical-list-page, ALP, manifest.json, OData V2, OData V4, table-only, tableSettings, MaxLength, Precision

**STEP**: 1 — Configure Table-Only View (OData V2)

**DESCRIPTION**: Update the sap.ui.generic.app pages entry in manifest.json to load the Analytical List Page as a list (table-only view). Choose the table implementation via tableSettings.type. Apply this snippet under your application manifest where you define pages for the entity set.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "SEPMRA_C_ALP_SlsOrdItemCube",
        "component": {
          "name": "sap.suite.ui.generic.template.AnalyticalListPage",
          "list": true,
          "settings": {
            "tableSettings": {
              "type": "GridTable or AnalyticalTable or ResponsiveTable"
            }
          }
        }
      }
    ]
  }
}
```

**STEP**: 2 — Adjust Column Widths and Table Display Mode

**DESCRIPTION**: Control column widths via metadata: set MaxLength for text properties and Precision for decimal properties to influence column width. Note that ALP defaults to condensed table display; change the related manifest setting if you require compact mode instead.

**LANGUAGE**: text

**CODE**:
```
Adjust metadata:
- Text properties: set MaxLength
- Decimal properties: set Precision

Note: ALP default = condensed mode. Modify manifest table display setting to use compact mode if needed.
```

**STEP**: 3 — ALP Configuration to Load Table-Only View by Default (OData V4)

**DESCRIPTION**: For OData V4, set the default annotation path to the "secondary" view so the table-only view is loaded by default. Add the provided views.paths.defaultPath entry to your manifest.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "views": {
    "paths": [
      {
        "defaultPath": "secondary"
      }
    ]
  }
}
```

**STEP**: 4 — Determining Actions (Deprecated)

**DESCRIPTION**: The determining actions feature is deprecated and retained only for compatibility. Avoid adding new determining buttons; prefer alternative action patterns. For legacy references, see the defining-determining-actions-in-list-reports documentation.

**LANGUAGE**: text

**CODE**:
```
Reference: defining-determining-actions-in-list-reports-d719982.md
Recommendation: Do not use determining buttons for new development (deprecated).
```

**STEP**: 5 — Related Files and Further Reading

**DESCRIPTION**: Quick references to related configuration topics to continue setup or tune table behavior.

**LANGUAGE**: text

**CODE**:
```
- Configuring Tables: configuring-tables-f4eb70f.md
- Configuring the Manifest for the Analytical List Page: configuring-the-manifest-for-the-analytical-list-page-2a9df06.md
- Configuring the Content Area: configuring-the-content-area-fc7d73c.md
- Setting the Table Type: setting-the-table-type-7f844f1.md
```
--------------------------------

**TITLE**: Configuring the Title Area (Analytical List Page - Header / KPI)

**INTRODUCTION**: This document explains how to configure the dynamic title/header area of an Analytical List Page (ALP) in SAP Fiori elements (OData V2). It covers enabling built-in header features (variants, filter modes, filter customization, share) and configuring UI.KPI annotation mapping through the manifest.json to display and enable navigation for KPI cards.

**TAGS**: fiori-elements-framework, analytical-list-page, ALP, UI.KPI, manifest.json, KPI, variants, filter-modes, OData V2

**STEP**: 1 — Header area built-in features

**DESCRIPTION**: Enable or use the ALP header area to expose built-in Fiori elements functionality. These options are available to include in the header/title area:
- Manage page variants (variants of filter and content settings)
- Choose filter modes (compact or visual)
- Customize the filter area (show/hide or rearrange filter controls)
- Share the analytical list page

Implement these features using standard ALP configuration in your app (manifest/annotations as required). Use the Managing Variants and Choosing Filter Modes docs for concrete implementation details.

**LANGUAGE**: Documentation / Configuration

**CODE**:
```none
(no code sample required for this step; configure via standard ALP manifest and annotation settings)
```

**STEP**: 2 — Display KPIs using UI.KPI annotation

**DESCRIPTION**: Use the UI.KPI annotation to display KPI cards in the ALP header. Map a qualifier in the manifest.json to the UI.KPI annotation so the ALP can load the KPI definition. If UI.KPI is not configured, the UI.SelectionPresentationVariant annotation with the same qualifier will be used instead. Prefer using a centralized SAP-wide KPI gallery created by standard SAP KPI tools (for consistency and reuse).

- Define the KPI mapping in the manifest.json with the model, entitySet and qualifier.
- Keep the same qualifier name between manifest mapping and annotations (UI.KPI and/or UI.SelectionPresentationVariant).

**LANGUAGE**: JSON (manifest.json)

**CODE**:
```json
"KPIQuantity": {
                "model": "kpi",
                "entitySet": "SEPMRA_C_ALP_SlsOrdItemCubeALPResults",
                "qualifier": "KPIQuantity
}
```

**STEP**: 3 — Enable navigation for KPI cards

**DESCRIPTION**: To allow navigation from a KPI card to a target (for example, smart business application), define the following inside the UI.KPI annotation:
- semanticObject: target semantic object
- action: the action to invoke
- KPI ID: a unique KPI identifier

At runtime the KPI ID is passed to the target application as the EvaluationId parameter to launch the smart business app. Ensure your annotation includes these properties and that the target application can accept EvaluationId.

**LANGUAGE**: Annotation configuration / XML or CDS (depending on your annotation source)

**CODE**:
```none
(Configure UI.KPI annotation with semanticObject, action and KPI ID in your annotation source (EDMX/Annotations XML or CDS). Example fields: semanticObject, action, EvaluationId)
```

**STEP**: 4 — Related resources (for implementation details)

**DESCRIPTION**: Refer to these related pages for step-by-step examples and additional configuration patterns:
- Analytical List Page: analytical-list-page-3d33684.md
- Managing Variants: managing-variants-8ce658e.md
- Creating Key Performance Indicator Tags: creating-key-performance-indicator-tags-d80a360.md
- Choosing Filter Modes: choosing-filter-modes-00c19e1.md

**LANGUAGE**: Documentation links

**CODE**:
```none
(See the referenced markdown files for detailed examples and implementation code)
```
--------------------------------

**TITLE**: Configuring the Visual Filter Bar (Fiori Elements)

**INTRODUCTION**: This guide explains how to enable and configure the Visual Filter Bar in SAP Fiori elements applications. It covers required annotations, manifest.json settings for OData V4 apps, aggregation requirements for the value list entity, availability options, and limitations when using draft-enabled entities.

**TAGS**: fiori-elements-framework, visual-filters, manifest.json, valueList, aggregation, OData V4, draft

STEP: 1 — Purpose and prerequisites

DESCRIPTION:
- The Visual Filter Bar lets end users select filter values based on associated measure values in addition to regular filter fields.
- Visual filter values are synchronized with the regular filter bar.
- Visual filters only apply to filter fields that accept single or multiple values (not range-based fields).
- Semantic dates are not supported.
- To enable visual filters, define value list annotations for each filter field. See: Enhancing ValueList Annotations for Visual Filters (enhancing-valuelist-annotations-for-visual-filters-16d43eb.md).

LANGUAGE: Text

CODE:
```text
Prerequisites:
- Filter fields must accept single or multiple value selection (no range fields).
- Semantic dates are not supported.
- Define value list annotations for each filter field.
- For OData V4 apps, enhance manifest.json as described in the following steps.
```

STEP: 2 — manifest.json settings for OData V4 (enable visual filters and control layout)

DESCRIPTION:
- For OData V4 Fiori elements apps, ensure manifest.json contains a settings.controlConfiguration entry for @com.sap.vocabularies.UI.v1.SelectionFields.
- Use "layout" to indicate Compact vs CompactVisual (CompactVisual means both compact and visual filters present).
- Use "initialLayout" to specify default filter mode (Visual or Compact).
- Add a "filterFields" object listing each filter field to control availability and link the visual filter to a valueList annotation path.
- Set the "visualFilter.valueList" to the path of the value list annotation for this visual filter.

LANGUAGE: JSON

CODE:
```json
"settings" : {  
   "contextPath" : "/SalesOrderManage",
   "controlConfiguration" : {
      "@com.sap.vocabularies.UI.v1.SelectionFields" : {
         "layout": "CompactVisual" , // Possible Values: "Compact" (if only compact filter is present) and "CompactVisual" if both compact and visual filters are present
         "initialLayout": "Visual" , // Specifies the default filter mode on initial load. Possible values: "Visual" and "Compact"
         "filterFields": {
            "ItemRating": { // Below this are all the settings for "ItemRating" filter field
               "availability": "Default", // see below for possible values
               "visualFilter": { // Only available if there is a visual filter configured for this filter field and holds all information specific to visual filter configuration
                  "valueList": "<pathToValueList>" // Should point to the valuelist annotation corresponding to the visual filter representation
               }
            }
         }
      }
   }
}
```

STEP: 3 — availability property values and behavior

DESCRIPTION:
- Configure availability per filter field in manifest.json under filterFields.<Field>.availability.
- Possible values and their behavior:
  - Default: Shown by default in the filter bar (regular and visual filters, if defined).
  - Adaptation: Initially hidden in filter bar; available under Adapt Filters dialog.
  - Hidden: Not visible in filter bar or Adapt Filters dialog.

LANGUAGE: Text

CODE:
```text
"availability" values:
- "Default"  => shown by default in filter bar (regular + visual if defined)
- "Adaptation" => hidden by default; available under "Adapt Filters"
- "Hidden" => not visible in filter bar or "Adapt Filters"
```

STEP: 4 — Aggregation requirements for the valueList entity

DESCRIPTION:
- The entity referenced by visualFilter.valueList must have aggregation enabled in the back end.
- Where to place aggregation annotations:
  - Non-parameterized valueList entity: define aggregation at the entity set level for visual filters.
  - Parameterized valueList entity: define aggregation against the EntityType.
- See Configuring Charts -> Enabling Aggregation in the Back End (configuring-charts-653ed0f.md#...__enabling_aggregation_subsection) for more details.

LANGUAGE: Text

CODE:
```text
Aggregation placement rules:
- Non-parameterized valueList entity:
  - Define aggregation annotations at the entity set level (for visual filters).
- Parameterized valueList entity:
  - Define aggregation annotations on the EntityType.
Ensure the valueList entity is enabled for aggregation in the backend.
Reference: configuring-charts-653ed0f.md#loio653ed0f4f0d743dbb33ace4f68886c4e__enabling_aggregation_subsection
```

STEP: 5 — Visual filters on draft-enabled entities (behavior, notes, and restrictions)

DESCRIPTION:
- You can define visual filters/charts against draft-enabled entities; only active data is used for chart display.
- Important notes:
  - CAP Node.js: sorting on virtual properties and measures can cause issues unless @sap/cds >= 6.0.0 (fix present in 6.0.0).
  - ABAP CDS: Aggregations on draft-enabled entities are not supported because SADL does not support $apply on draft/transactional entities.
- Restrictions (visual filters not supported in these cases):
  - Donut charts are not supported.
  - Properties (measures, dimensions, text associations) from "associated entity sets" (value help entity set related) are not supported.
  - For line charts, use only fields of types Edm.Date, Edm.Time, or Edm.DateTime. String-based time/date fields are not supported.
  - Selection of values outside the chart is enabled only for value-help-based fields (not for drop-down lists or date/time fields).
  - Visual filters inside the Adapt Filters dialog are not supported.
  - Visual Filters do not support correct formatting for fiscal periods or for string-based dimensions annotated as time-based.
  - Path-based UI.Criticality annotation values and CriticalityCalculation-based semantic coloring are not supported.
  - You cannot configure a visual filter for a filter field that already has a custom filter defined.

LANGUAGE: Text

CODE:
```text
Draft-enabled entities:
- Charts/visual filters on draft-enabled entities use only active data.

Notes:
- CAP Node.js: sorting on virtual properties/measures issues fixed in @sap/cds 6.0.0.
- ABAP CDS: Aggregations on draft-enabled entities are not supported (SADL limitation on $apply).

Restrictions:
- No donut charts.
- No properties from associated entity sets (value help entity set) supported.
- Line charts: use only Edm.Date, Edm.Time, Edm.DateTime fields (no string-based dates).
- External selection support only for value-help-based fields (not for drop-downs or date/time).
- Visual filters are not available in Adapt Filters dialog.
- No correct formatting for fiscal periods or string-based time dimensions.
- No path-based UI.Criticality or CriticalityCalculation-based semantic coloring.
- Cannot configure visual filter if a custom filter exists for the same field.
```

STEP: 6 — Related documentation (file references)

DESCRIPTION:
- Reference these internal docs for detailed guidance and examples:
  - Analytical List Page: analytical-list-page-3d33684.md
  - Visual Filters: visual-filters-1714720.md
  - Enhancing ValueList Annotations for Visual Filters: enhancing-valuelist-annotations-for-visual-filters-16d43eb.md
  - Configuring Charts (aggregation guidance): configuring-charts-653ed0f.md

LANGUAGE: Text

CODE:
```text
Related docs:
- analytical-list-page-3d33684.md
- visual-filters-1714720.md
- enhancing-valuelist-annotations-for-visual-filters-16d43eb.md
- configuring-charts-653ed0f.md
```
--------------------------------

**TITLE**: Configuring View Switch for OVP Cards

**INTRODUCTION**: Configure a view-switch dropdown for SAP Fiori elements (OVP) cards to filter or present different views of data at the card level. Use either a single entitySet with multiple tab definitions or define multiple entitySets per tab. The view switch entries map to annotation paths, data points, and bindings (e.g., value bindings such as "{{dropdown_value1}}"). You can extend behavior based on filter conditions or custom configuration — see Extending Custom View Switch (extending-custom-view-switch-ecd9f10.md).

**TAGS**: fiori-elements-framework, ovp, view-switch, card, annotations, JSON, SAPUI5

**STEP**: 1 — Define a view switch with a single entity set

**DESCRIPTION**: Use settings.entitySet to specify one entity set shared across tabs. Inside settings.tabs, define each tab entry (annotation paths, selection/presentation paths, dataPoint, value binding, etc.). This creates dropdown options that switch views while using the same entity set.

**LANGUAGE**: JSON

**CODE**:
```json
"settings": {
    "entitySet": "SalesOrderSet"
    "tabs": [
        {
            ...
        },
        {
            ...
        }
    ]
}
```

**STEP**: 2 — Define a view switch with multiple entity sets

**DESCRIPTION**: Omit a top-level settings.entitySet and specify entitySet per tab inside settings.tabs. Each tab can target different entity sets and annotation definitions. Use this when dropdown entries should switch between different entity sets (e.g., SalesOrderSet and ProductSet).

**LANGUAGE**: JSON

**CODE**:
```json
"settings": {
    "tabs": [
        {
            "entitySet": "SalesOrderSet"
		  ...
        },
        {
            "entitySet": " ProductSet"
		  ...
        }
    ]
}
```

**STEP**: 3 — Full card example with multiple tabs, annotations, and value bindings

**DESCRIPTION**: Example of a complete card configuration (card009) that uses a view-switch dropdown with three tabs. Two tabs use the SalesOrderSet with different annotation/presentation paths and one tab uses ProductSet. Each tab includes annotation path references (annotationPath, presentationAnnotationPath, selectionAnnotationPath, dynamicSubtitleAnnotationPath, identificationAnnotationPath, dataPointAnnotationPath) and a value binding string for the dropdown selection (e.g., "{{dropdown_value2}}"). Copy this structure into your card JSON to implement the view switch behavior.

**LANGUAGE**: JSON

**CODE**:
```json
"card009": {
  "model": "salesOrder",
  "template": "sap.ovp.cards.list",
  "settings": {
    "title": "Contract Monitoring",
    "subTitle": "Per Supplier",
    "valueSelectionInfo": "Total contract volume",
    "listFlavor": "bar",
    "listType": "extended",
    "showLineItemDetail":true,
    "tabs": [
      {
        "entitySet": "SalesOrderSet",
        "dynamicSubtitleAnnotationPath": "com.sap.vocabularies.UI.v1.HeaderInfo#dynamicSubtitle",
        "annotationPath": "com.sap.vocabularies.UI.v1.LineItem#View1",
        "selectionAnnotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant#line1",
        "presentationAnnotationPath": "com.sap.vocabularies.UI.v1.PresentationVariant#line",
        "identificationAnnotationPath": "com.sap.vocabularies.UI.v1.Identification",
        "dataPointAnnotationPath": "com.sap.vocabularies.UI.v1.DataPoint#line",
        "value": "{{dropdown_value2}}"
       },
      {
        "entitySet": "SalesOrderSet",
        "dynamicSubtitleAnnotationPath": "com.sap.vocabularies.UI.v1.HeaderInfo#dynamicSubtitle",
        "annotationPath": "com.sap.vocabularies.UI.v1.LineItem#View3",
        "presentationAnnotationPath": "com.sap.vocabularies.UI.v1.PresentationVariant#SP3",
        "identificationAnnotationPath": "com.sap.vocabularies.UI.v1.Identification",
        "dataPointAnnotationPath": "com.sap.vocabularies.UI.v1.DataPoint#line",
        "value": "{{dropdown_value3}}"
       },
      {
        "entitySet": "ProductSet",
        "annotationPath": "com.sap.vocabularies.UI.v1.LineItem",
        "identificationAnnotationPath": "com.sap.vocabularies.UI.v1.Identification#identify1",
        "value": "{{dropdown_value1}}"
       }
    ]
  }
}
```

**STEP**: 4 — Extension and customization note

**DESCRIPTION**: To implement custom reactions to selection changes (e.g., apply additional filters or dynamic behavior), extend the view-switch feature as required. For guidance and implementation patterns, refer to Extending Custom View Switch: extending-custom-view-switch-ecd9f10.md

**LANGUAGE**: Markdown

**CODE**:
```markdown
See: extending-custom-view-switch-ecd9f10.md
```
--------------------------------

**TITLE**: Configure Confirmation Popups in SAP Fiori Elements (OData V2 & V4)

**INTRODUCTION**: Action-oriented reference for configuring confirmation popups in SAP Fiori Elements: draft-discard dialogs, 412 (Precondition Failed) warning dialogs, suppression behavior, disabling strict handling (to turn off 412 dialogs), legacy object-page activation confirmations, and i18n title customization. Use these manifest.json and API examples to enable/disable behaviors per application or per action.

**TAGS**: fiori-elements, confirmation, draft, 412, manifest.json, OData V2, OData V4, i18n, disableStrictHandling, invokeAction

STEP: 1 — 412 Confirmation Flow (how it works)
DESCRIPTION: Exact runtime flow for 412-driven confirmation popups. Use this to design back-end responses and front-end retry logic.
LANGUAGE: text
CODE:
```text
- Client sends request with header: Prefer:handling=strict
- Back end can:
    - Ignore unknown preference -> action proceeds normally
    - Return HTTP 412 ("Precondition Failed") indicating warnings that block processing
- UI displays confirmation popup with back-end message
- If user confirms:
    - UI resends request WITHOUT Prefer:handling=strict
    - Back end executes action and responds (success or failure)
    - If back end sends the same message again, the UI suppresses repeated message (see suppression attributes)
- If user cancels:
    - Operation terminated
```

STEP: 2 — Turn off Draft-Activation Confirmation for External Navigation (OData V2)
DESCRIPTION: Disable the default draft discard confirmation for external navigation in OData V2 apps by adding draftDiscardConfirmationSettings in sap.ui.generic.app settings.
LANGUAGE: JSON
CODE:
```json
"sap.ui.generic.app": {
              "_version": "1.3.0",
              "settings": {
                             "draftDiscardConfirmationSettings": {
                                           "enabled": "restricted"
                             }
              }
}
.
.
.
```

STEP: 3 — Turn off Draft-Activation Confirmation for External Navigation (OData V4)
DESCRIPTION: Disable the default draft discard confirmation for external navigation in OData V4 apps by setting silentlyKeepDraftOnForwardNavigation in sap.fe.app.
LANGUAGE: JSON
CODE:
```json
"sap.fe": {
     "app": {
          "silentlyKeepDraftOnForwardNavigation": true
     }
}
```

STEP: 4 — Disable 412 Confirmation Popups at Application Level (OData V4)
DESCRIPTION: Turn off strict handling globally for the application so 412 confirmation dialogs are not shown.
LANGUAGE: JSON
CODE:
```json
"sap.fe": {
    "app": {
       "disableStrictHandling": true
    }
}
```

STEP: 5 — Disable 412 Confirmation Popups for a Specific Table Action (OData V4)
DESCRIPTION: Disable strict handling for a specific action defined in the LineItem annotation so that the action does not cause a 412 confirmation popup.
LANGUAGE: JSON
CODE:
```json
"@com.sap.vocabularies.UI.v1.LineItem": {
     "actions": {
        "DataFieldForAction::YourActionWith412Handling": {
           "disableStrictHandling": true
        }
     }
}
```

STEP: 6 — Disable 412 Confirmation Popups for a Header Action on an Object Page (OData V4)
DESCRIPTION: Disable strict handling for a specific header action on an object page.
LANGUAGE: JSON
CODE:
```json
"content": {
    "header": {
        "actions": {
            "DataFieldForAction::YourActionWith412Handling": {
                "disableStrictHandling": true,
            }
        }
    }
}
```

STEP: 7 — Disable 412 Confirmation Popups Programmatically via invokeAction API (OData V4)
DESCRIPTION: Use invokeAction with disableStrictHandling:true to bypass 412 confirmation for a programmatic action invocation.
LANGUAGE: JavaScript
CODE:
```javascript
this.base.editFlow.invokeAction("com.c_salesordermanage_sd.EntityContainer/message412", {
     contexts: context,
     model: this.base.getView().getModel(),
     disableStrictHandling: true
});
```

STEP: 8 — Legacy: Additional Confirmation Popup for Save/Activation on Object Pages (UI-level)
DESCRIPTION: Legacy option to show an extra confirmation dialog before activation/save on object pages if front-end warnings exist. Prefer 412 handling; use this only if required for older scenarios.
LANGUAGE: JSON
CODE:
```json
"pages": {
              "ObjectPage|STTA_C_MP_Product": {
                             "entitySet": "STTA_C_MP_Product",
                             "component": {
                                           "name": "sap.suite.ui.generic.template.ObjectPage",
                                           "settings": {
                                                          "showRelatedApps": true,
                                                          "tableType": "ResponsiveTable",
                                                          "editableHeaderContent": true,
                                                          "showConfirmationOnDraftActivate": true,
                                                          "sections": {
                                                                        "to_ProductText::com.sap.vocabularies.UI.v1.LineItem": {
                                                                                      "navigationProperty": "to_ProductText",
                                                                                      "entitySet": "STTA_C_MP_ProductText",
                                                                                      "multiSelect": true,
                                                                                      "createMode": "inline",
                                                                                      "tableType": "ResponsiveTable"
                                                                        }
                                                          }
                                           }
                             }
              }
}
```

STEP: 9 — Customize Confirmation Dialog Title Text (i18n keys)
DESCRIPTION: Override dialog titles and button text in i18n to provide application-specific UI copy for draft discard and save/create actions.
LANGUAGE: text
CODE:
```text
i18n keys to override:
- ST_KEEP_DRAFT_MESSAGE_CREATE   (title text for Create scenario)
- ST_KEEP_DRAFT_MESSAGE_EDIT     (title text for Edit scenario)
- CREATE                         (button/text label for create mode)
- SAVE                           (button/text label for save mode)
```

STEP: 10 — Suppression Matching Attributes for Repeated 412 Messages (OData V2)
DESCRIPTION: For OData V2, repeated messages are suppressed only if subsequent messages match the original in all listed attributes.
LANGUAGE: text
CODE:
```text
Suppression attributes (OData V2):
- code
- message
- severity
- target        (targets considered equal if they resolve to the same model element)
- transition flag (absent = treated as true)
```

STEP: 11 — Suppression Matching Attributes for Repeated 412 Messages (OData V4)
DESCRIPTION: For OData V4, repeated messages are suppressed only if subsequent messages match the original in all listed attributes.
LANGUAGE: text
CODE:
```text
Suppression attributes (OData V4):
- code
- message
- numericSeverity
- longtextUrl       (equal if both null/absent; may contain variables not present in message string)
- target and additionalTargets (equal if they resolve to same model element)
- transition flag (absent = treated as true)
```

STEP: 12 — Handling Rules, Message Types, Multi-select Behavior, and Restrictions
DESCRIPTION: Back-end and front-end configuration rules and known restrictions to consider when implementing 412 handling and draft confirmations.
LANGUAGE: text
CODE:
```text
- For SAP Fiori elements, 412 indicates warnings that block processing but users can confirm to continue.
- You must configure 412 messages from the back end as transition messages (not state) for save, delete, and function import actions (OData V4).
- For activation, a back end state message or transition is configurable (OData V2 notes).
- Deletion: 412 handling is NOT applied when a record is deleted (OData V4 restriction).
- CAP back ends: 412 handling may fail if action is executed with InvocationGrouping=UI.OperationGroupingType/Isolated (multiple contexts executed in same changeset).
- Deletion triggered from a table in an object page: you cannot configure 412 confirmation popups for this scenario (restriction).
- Multi-select actions: if only some selected items return warnings, processing fails and the UI asks the user to act on individual objects.
```

STEP: 13 — Critical Actions Confirmation (reference)
DESCRIPTION: You can mark actions as critical so the UI displays a confirmation popup before execution. See "Adding Confirmation Popovers for Actions" for annotation/manifest specifics (refer to the referenced guide for implementation details).
LANGUAGE: text
CODE:
```text
- Configure actions as critical to trigger confirmation popovers.
- Implementation details are in "Adding Confirmation Popovers for Actions" (external doc).
```
--------------------------------

**TITLE**: Contact Facet (Communication.Contact) — SAP Fiori Elements (OData V2 & V4)

**INTRODUCTION**: Enable a quick-view contact in a header form facet by using the Communication.Contact annotation. This document provides action-oriented code examples for OData V2 and OData V4, including XML annotations, ABAP CDS examples, and CAP CDS variants. Use the UI.DataFieldForAnnotation (or UI.DataFieldForAnnotation / UI.DataFieldForAnnotationType equivalents) in the header field group to reference the contact annotation on a related 1:1 entity. Define the Communication.Contact annotation on the referenced entity to populate the popover (fn, email, tel, adr, photo).

**TAGS**: fiori-elements-framework, Communication.Contact, contact-facet, odata-v2, odata-v4, abap-cds, cap-cds, xml, annotations

**STEP**: 1 — Contact link (OData V2 XML)
**DESCRIPTION**: Add a UI.DataFieldForAnnotation to the header facet (field group) that targets the related entity’s Communication.Contact annotation via AnnotationPath. This displays the contact label from UI.DataFieldForAnnotation and the contact name from the contact annotation fn property.
**LANGUAGE**: XML
**CODE**:
```XML

<Record Type="UI.DataFieldForAnnotation">
       <PropertyValue Property="Label" String="Supplier [ContactQV]"/>
       <PropertyValue Property="Target" AnnotationPath="to_Supplier/@Communication.Contact"/>
       <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
</Record>
```

**STEP**: 2 — Contact link (OData V2 ABAP CDS)
**DESCRIPTION**: Equivalent ABAP CDS field group entry to mark a field as contact type in the header field group. Use type: #AS_CONTACT and value pointing to the navigation element.
**LANGUAGE**: ABAP
**CODE**:
```ABAP

@UI.fieldGroup: [
  {
    importance: #LOW,
    value: '_STOCKAVAILABILITY.QUANTITY',
    position: 10 ,
    qualifier: 'GeneralInformationForHeader',
    groupLabel: '{@i18n>@GeneralInfoFieldGroupLabel}'
  }
]
_STOCKAVAILABILITY;

@UI.fieldGroup: [
  {
    importance: #HIGH,
    position: 20 ,
    qualifier: 'GeneralInformationForHeader'
  }
]
WEIGHT;

@UI.fieldGroup: [
  {
    importance: #HIGH,
    label: 'WeightUnit [SmLiQv]',
    position: 30 ,
    qualifier: 'GeneralInformationForHeader'
  }
]
WEIGHTUNIT;

@UI.fieldGroup: [
  {
    importance: #HIGH,
    label: 'Supplier [ContactQV]',
    value: '_SUPPLIER',
    type: #AS_CONTACT,
    position: 40 ,
    qualifier: 'GeneralInformationForHeader'
  }
]
MANAGER;
```

**STEP**: 3 — Popover (OData V2 XML)
**DESCRIPTION**: Define the Communication.Contact annotation on the target entity. Map fn, email, and tel properties to entity properties using Path, and build collections for multiple email/phone entries. This provides the content shown in the contact popover.
**LANGUAGE**: XML
**CODE**:
```XML
<Annotation Term="Communication.Contact">
                          <Record>
                               <PropertyValue Property="fn" Path="CompanyName"/>
                               <PropertyValue Property="email">
                                    <Collection>
                                          <Record>
                                               <PropertyValue Property="type" EnumMember="Communication.ContactInformationType/work"/>
                                               <PropertyValue Property="address" Path="EmailAddress"/>
                                          </Record>
                                    </Collection>
                               </PropertyValue>
                               <PropertyValue Property="tel">
                                    <Collection>
                                          <Record>
                                               <PropertyValue Property="type" EnumMember="Communication.PhoneType/preferred Communication.PhoneType/work"/>
                                               <PropertyValue Property="uri" Path="PhoneNumber"/>
                                          </Record>
                                          <Record>
                                               <PropertyValue Property="type" EnumMember="Communication.PhoneType/fax"/>
                                               <PropertyValue Property="uri" Path="FaxNumber"/>
                                          </Record>
                                    </Collection>
                               </PropertyValue>
                          </Record>
                     </Annotation>
```

**STEP**: 4 — Popover (OData V2 ABAP CDS)
**DESCRIPTION**: ABAP CDS example defining fields used by the Communication.Contact mapping. Add Semantics annotations to identify e-mail and telephone semantic roles and types.
**LANGUAGE**: ABAP
**CODE**:
```ABAP

define view VIEWNAME
{

 @Semantics.name.fullName: true
  CompanyName,

  
  @Semantics.eMail.address: true
  @Semantics.eMail.type:  [#WORK]
  EmailAddress,
   
  @Semantics.telephone.type:  [ #CELL ] 
  PhoneNumber,
 
  @Semantics.telephone.type: [ #FAX ]
  FaxNumber,
}

```

**STEP**: 5 — Contact link (OData V4 XML)
**DESCRIPTION**: Add a UI.FieldGroup / UI.DataFieldForAnnotation entry that targets _SoldToParty/@Communication.Contact (or the appropriate navigation path) to display the contact in the header. Example shows using UI.FieldGroup Qualifier "OrderData".
**LANGUAGE**: XML
**CODE**:
```XML

<Annotation Term="UI.FieldGroup" Qualifier="OrderData">
    <Record Type="UI.FieldGroupType">
        <PropertyValue Property="Data">
            <Collection>
                <Record Type="UI.DataFieldWithNavigationPath">
                    <PropertyValue Property="Label" String="Referenced Sales Order"/>
                    <PropertyValue Property="Value" Path="_ReferencedSalesOrder/SalesOrder"/>
                    <PropertyValue Property="Target" NavigationPropertyPath="SalesOrderManage"/>
                </Record>
                <Record Type="UI.DataFieldForAnnotation">
                    <PropertyValue Property="Target" AnnotationPath="_SoldToParty/@Communication.Contact"/>
                    <PropertyValue Property="Label" String="Sold-To-Party"/>
                </Record>
                <Record Type="UI.DataField">
                    <PropertyValue Property="Value" Path="PurchaseOrderByCustomer"/>
                    <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
                </Record>
                <Record Type="UI.DataField">
                    <PropertyValue Property="Value" Path="SalesOrderDate"/>
                    <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
                    <Annotation Term="UI.Hidden" Path="Delivered"/>
                </Record>
                <Record Type="UI.DataField">
                    <PropertyValue Property="Value" Path="ShippingCondition"/>
                    <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
                </Record>
                <Record Type="UI.DataField">
                    <PropertyValue Property="Value" Path="OverallSDProcessStatus"/>
                    <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
                    <PropertyValue Property="Criticality" Path="StatusCriticality"/>
                </Record>
                <Record Type="UI.DataField">
                    <PropertyValue Property="Value" Path="DescriptionFieldForOPACleanup"/>
                    <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

**STEP**: 6 — Contact link (OData V4 ABAP CDS)
**DESCRIPTION**: ABAP CDS field group entries to mark the element as contact type in OData V4 (use type: #AS_CONTACT and value referencing the navigation element). Use qualifier to scope to the field group.
**LANGUAGE**: ABAP
**CODE**:
```ABAP

@UI.fieldGroup: [
  {
    targetelement: 'SALESORDERMANAGE',
    label: 'Referenced Sales Order',
    value: '_REFERENCEDSALESORDER.SALESORDER',
    type: #WITH_NAVIGATION_PATH,
    position: 10,
    qualifier: 'OrderData'
  }
]
_REFERENCEDSALESORDER;

@UI.fieldGroup: [
  {
    value: '_SOLDTOPARTY',
    label: 'Sold-To-Party',
    type: #AS_CONTACT,
    position: 20 ,
    qualifier: 'OrderData'
  }
]
_SOLDTOPARTY;

@UI.fieldGroup: [
  {
    importance: #HIGH,
    position: 30 ,
    qualifier: 'OrderData'
  }
]
PURCHASEORDERBYCUSTOMER;

@UI.fieldGroup: [
  {
    importance: #HIGH,
    hidden: true,
    position: 40 ,
    qualifier: 'OrderData'
  }
]
SALESORDERDATE;

@UI.fieldGroup: [
  {
    importance: #HIGH,
    position: 50 ,
    qualifier: 'OrderData'
  }
]
SHIPPINGCONDITION;

@UI.fieldGroup: [
  {
    importance: #HIGH,
    criticality: 'STATUSCRITICALITY',
    position: 60 ,
    qualifier: 'OrderData'
  }
]
OVERALLSDPROCESSSTATUS;

@UI.fieldGroup: [
  {
    importance: #HIGH,
    position: 70 ,
    qualifier: 'OrderData'
  }
]
DESCRIPTIONFIELDFOROPACLEANUP;
```

**STEP**: 7 — Contact link (OData V4 CAP CDS)
**DESCRIPTION**: CAP CDS (CSN) representation of the same UI.FieldGroup including DataFieldForAnnotation Target pointing to _SoldToParty/@Communication.Contact.
**LANGUAGE**: CDS
**CODE**:
```CDS

UI.FieldGroup #OrderData : {
    $Type : 'UI.FieldGroupType',
    Data : [
        {
            $Type : 'UI.DataFieldWithNavigationPath',
            Label : 'Referenced Sales Order',
            Value : _ReferencedSalesOrder.SalesOrder,
            Target : SalesOrderManage
        },
        {
            $Type : 'UI.DataFieldForAnnotation',
            Target : '_SoldToParty/@Communication.Contact',
            Label : 'Sold-To-Party'
        },
        {
            $Type : 'UI.DataField',
            Value : PurchaseOrderByCustomer,
            ![@UI.Importance] : #High
        },
        {
            $Type : 'UI.DataField',
            Value : SalesOrderDate,
            ![@UI.Importance] : #High,
            ![@UI.Hidden] : Delivered
        },
        {
            $Type : 'UI.DataField',
            Value : ShippingCondition,
            ![@UI.Importance] : #High
        },
        {
            $Type : 'UI.DataField',
            Value : OverallSDProcessStatus,
            Criticality : StatusCriticality,
            ![@UI.Importance] : #High
        },
        {
            $Type : 'UI.DataField',
            Value : DescriptionFieldForOPACleanup,
            ![@UI.Importance] : #High
        }
    ]
}
```

**STEP**: 8 — Popover (OData V4 XML)
**DESCRIPTION**: Define Communication.Contact on the referenced entity for OData V4. Map address (adr), email, fn, tel, and photo properties to entity fields. Use types (EnumMember) for address and phone types where applicable.
**LANGUAGE**: XML
**CODE**:
```XML

<Annotation Term="Communication.Contact">
    <Record Type="Communication.ContactType">
        <PropertyValue Property="adr">
            <Collection>
                <Record Type="Communication.AddressType">
                    <PropertyValue Property="type" EnumMember="Communication.ContactInformationType/work"/>
                    <PropertyValue Property="uri" Path="InternationalPhoneNumber"/>
                    <PropertyValue Property="code" Path="PostalCode"/>
                    <PropertyValue Property="country" Path="Country"/>
                    <PropertyValue Property="locality" Path="CityName"/>
                </Record>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="email">
            <Collection>
                <Record Type="Communication.EmailAddressType">
                    <PropertyValue Property="type" EnumMember="Communication.ContactInformationType/work"/>
                    <PropertyValue Property="address" Path="EmailAddress"/>
                </Record>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="fn" Path="CustomerName"/>
        <PropertyValue Property="tel">
            <Collection>
                <Record Type="Communication.PhoneNumberType">
                    <PropertyValue Property="type" EnumMember="Communication.PhoneType/fax"/>
                    <PropertyValue Property="uri" Path="InternationalPhoneNumber"/>
                </Record>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="photo" Path="CustomerImg"/>
    </Record>
</Annotation>
```

**STEP**: 9 — Popover (OData V4 ABAP CDS)
**DESCRIPTION**: ABAP CDS view fields with semantic annotations used to supply values for the Communication.Contact annotation (CustomerName, EmailAddress, InternationalPhoneNumber, PostalCode, Country, CityName, CustomerImg).
**LANGUAGE**: ABAP
**CODE**:
```ABAP

define view VIEWNAME
{
  @Semantics.name.fullName: true
  CustomerName,

  @Semantics.eMail.address: true
  @Semantics.eMail.type:  [#WORK]
  EmailAddress,
   
  @Semantics.telephone.type:  [ #FAX ] 
  InternationalPhoneNumber,

  @Semantics.address : { zipCode: true } 
  PostalCode,

  @Semantics.address : { country: true } 
  Country,

  @Semantics.address : { city: true }  
  CityName,

  @Semantics.contact.photo: true
  CustomerImg
}
```

**STEP**: 10 — Popover (OData V4 CAP CDS)
**DESCRIPTION**: CAP CDS (CSN) representation of the Communication.Contact structure mapping to entity fields. Use this to place in annotation section for the referenced entity.
**LANGUAGE**: CDS
**CODE**:
```CDS

Communication.Contact : {
    $Type : 'Communication.ContactType',
    adr : [
        {
            $Type : 'Communication.AddressType',
            type : #work,
            uri : InternationalPhoneNumber,
            code : PostalCode,
            country : Country,
            locality : CityName
        }
    ],
    email : [
        {
            $Type : 'Communication.EmailAddressType',
            type : #work,
            address : EmailAddress
        }
    ],
    fn : CustomerName,
    tel : [
        {
            $Type : 'Communication.PhoneNumberType',
            type : #fax,
            uri : InternationalPhoneNumber
        }
    ],
    photo : CustomerImg
},
```

**STEP**: 11 — Related Link
**DESCRIPTION**: Additional documentation reference for implementation details.
**LANGUAGE**: TEXT
**CODE**:
```
Adding a Contact Facet: adding-a-contact-facet-a6a8c0c.md
```
--------------------------------

**TITLE**: Controlling the Editability of Child-Entity Sections with UpdateRestrictions

**INTRODUCTION**: This guide shows how to control editability of fields that originate from child entities in SAP Fiori elements (OData V4) using the Capabilities.UpdateRestrictions annotation. It includes XML and CAP CDS examples, explains interaction with NavigationRestrictions and the main entity set, and recommends path-based rules for draft scenarios.

**TAGS**: fiori-elements-framework, OData V4, UpdateRestrictions, NavigationRestrictions, annotations, CAP, XML, editability, draft

**STEP**: Apply UpdateRestrictions to a child entity (XML)
**DESCRIPTION**: Add a local XML annotation to set UpdateRestrictions.Updatable for the target child entity. This makes all fields coming from that entity editable or non-editable as a group. Use this only for child entity sets; UpdateRestrictions on the main entity set is ignored.
**LANGUAGE**: XML
**CODE**:
```xml
<Annotations Target="com.c_salesordermanage_sd.MaterialCategory">
     <Annotation Term="Capabilities.UpdateRestrictions">
          <Record Type="Capabilities.UpdateRestrictionsType">
               <PropertyValue Property="Updatable" Bool="true"/>
          </Record>
     </Annotation>
</Annotations>
```

**STEP**: Apply UpdateRestrictions to a child entity (CAP CDS)
**DESCRIPTION**: CAP CDS equivalent to the XML annotation above. Add this to your .cds file for the target entity.
**LANGUAGE**: CAP CDS
**CODE**:
```
annotate c_salesordermanage_sd.MaterialCategory with @Capabilities : {
UpdateRestrictions : {Updatable : true}
};
```

**STEP**: ABAP CDS availability note
**DESCRIPTION**: No ABAP CDS sample is provided for this topic. Use the local XML annotation instead.
**LANGUAGE**: text
**CODE**:
```
No ABAP CDS annotation sample is available. Please use the local XML annotation.
```

**STEP**: Rules that determine field editability in object and subobject pages
**DESCRIPTION**:
- UpdateRestrictions is ignored for the main entity set.
- Fields that originate from other entity sets can be editable in tables and forms on object and subobject pages only if:
  - The list report entity set is updatable, AND
  - The UI is in an edit state, AND
  - The property field control allows editing.
- If the child entity cannot be updated (UpdateRestrictions.Updatable evaluates to false), the fields coming from that entity cannot be edited regardless of UI state or field control.
- NavigationRestrictions on the parent entity set have priority. If the parent entity set has a NavigationRestrictions entry with RestrictedProperties specifying a NavigationProperty whose UpdateRestrictions.Updatable = false, the child entity records cannot be edited. If NavigationRestrictions.Updatable = true or contains a path, then the child's UpdateRestrictions determines editability.
- See also: Further Features of the Field for field-level control logic.

**STEP**: Example - NavigationRestrictions in XML
**DESCRIPTION**: Use this XML to restrict update capability of a specific navigation property from the parent entity set. This example makes the navigation property _MaterialDetails non-updatable via the parent.
**LANGUAGE**: XML
**CODE**:
```xml
<Annotation Term="Capabilities.NavigationRestrictions">
     <Record Type="Capabilities.NavigationRestrictionsType">
          <PropertyValue Property="RestrictedProperties">
               <Collection>
                    <Record Type="Capabilities.NavigationPropertyRestriction">
                         <PropertyValue Property="NavigationProperty" NavigationPropertyPath="_MaterialDetails"/>
                         <PropertyValue Property="UpdateRestrictions">
                              <Record Type="Capabilities.UpdateRestrictionsType">
                                   <PropertyValue Property="Updatable" Bool="false"/>
                              </Record>
                         </PropertyValue>
                    </Record>
               </Collection>
          </PropertyValue>
     </Record>
</Annotation>
```

**STEP**: Example - NavigationRestrictions in CAP CDS
**DESCRIPTION**: CAP CDS equivalent to the XML NavigationRestrictions above. Add to the parent entity definition.
**LANGUAGE**: CAP CDS
**CODE**:
```
entity SalesOrderItem                                     @(
Capabilities : {
NavigationRestrictions : {RestrictedProperties : [{
NavigationProperty : _MaterialDetails,
UpdateRestrictions     : {Updatable : false}
}]}        
});
```

**STEP**: Use a path expression for UpdateRestrictions.Updatable (XML)
**DESCRIPTION**: Instead of a static boolean, use a path so the Updatable flag can evaluate per-record (recommended for draft scenarios). Add this XML to the child entity's annotations pointing to a boolean property (e.g., isUpdatable).
**LANGUAGE**: XML
**CODE**:
```xml
<Annotations Target="com.c_salesordermanage_sd_aggregate.MaterialDetails">
     <Annotation Term="Capabilities.UpdateRestrictions">
          <Record Type="Capabilities.UpdateRestrictionsType">
               <PropertyValue Property="Updatable" Path="isUpdatable"/>
          </Record>
     </Annotation>
</Annotations>
```

**STEP**: Use a path expression for UpdateRestrictions.Updatable (CAP CDS)
**DESCRIPTION**: CAP CDS equivalent: annotate the entity and reference a property name as a path to control per-record editability (isUpdatable).
**LANGUAGE**: CAP CDS
**CODE**:
```
annotate MaterialDetails with @(
    Capabilities.UpdateRestrictions : {
        Updatable : isUpdatable
    }
);
```

**STEP**: Draft behavior and best practice
**DESCRIPTION**:
- Static Updatable=false is applied for both draft and active records. If you set Updatable to a static false, draft copies (not yet activated) will also be non-editable, preventing edits on newly created drafts.
- Best practice: use a path-based Updatable expression that returns true for newly created draft records and false after activation. This allows creating and editing drafts, while preventing edits post-activation.
- Visual examples in the application: images/UpdateRestrictions1_9616035.png and images/UpdateRestrictions2_b3a0021.png demonstrate fields that remain in display mode when their entity's UpdateRestrictions.Updatable evaluates to false.
--------------------------------

**TITLE**: Copy and Paste from External Applications into Editable Fiori Elements Tables

**INTRODUCTION**: This document explains how end users can copy data from external applications (for example, spreadsheets) into editable SAP Fiori elements tables and how application developers can control this behaviour. It covers table-level vs cell-level paste, supported table types, limitations, OData V2 and V4 specifics, data preparation recommendations, and the configuration option to disable paste.

**TAGS**: fiori-elements, paste, copy, table, smart-table, grid-table, responsive-table, odata-v2, odata-v4, inline-creation, enablePaste

STEP: 1 — Paste Modes and When They Apply

DESCRIPTION:
- Two paste modes:
  - Table-level paste: creates new rows from clipboard data. Trigger via browser paste (Ctrl/Cmd+V) or Paste icon in table toolbar. Requirements:
    - Application must be draft-enabled.
    - Table creation mode must be "inline" or "creationRows".
    - New rows are created only in these cases.
  - Cell-level paste: pastes into selected single cell or a group of cells. Replaces values of active/draft rows and can create new rows if an empty row is part of the selection.
    - Supported only for GridTable and ResponsiveTable.
- UI notes:
  - Copy button appears by default in table toolbar.
  - Paste icon shows only if the table supports paste.

LANGUAGE: text

CODE:
```text
Table-level paste: draft-enabled apps + creationMode inline|creationRows
Cell-level paste: supported table types = GridTable, ResponsiveTable
```

STEP: 2 — Data Preparation for Pasting

DESCRIPTION:
- Recommended: export table to spreadsheet using "split cells" mode to get the exact format expected for paste. Maintain placeholders for inline-action columns when required.
- When copying from spreadsheets, omit columns that contain inline actions (these are ignored by paste) and be aware read-only columns are ignored during paste (but will be present in exported spreadsheet format).
- Image assets referenced (for examples and format):
  - images/Copying_Data_from_a_Table_3e5d9c8.png
  - images/Excel_copy_paste_5_db3d9d3.png
  - images/Excel_copy_paste_6_fa98abc.png
  - images/Pasting_in_Excel_with_Inline_Actions_8173bd4.png
  - images/Sample_Data_for_Pasting_in_Exccel_with_Inline_Action_b4c1a5d.png

LANGUAGE: text

CODE:
```text
Export table with split-cells -> edit spreadsheet to match exported columns (omit inline-action columns for paste)
```

STEP: 3 — Supported Fields, Restrictions and Error Handling

DESCRIPTION:
- Supported: simple data fields (primitive values).
- Not supported: complex fields (links, images, connected fields, multi-input fields, field groups) and properties annotated with textArrangement = TextOnly (cannot be pasted).
- If a cell contains both ID and text, the ID property is updated on paste; the text description updates only after saving.
- Cannot paste into cells that contain a navigation property.
- Read-only columns: ignored by paste; still exported in spreadsheet format.
- If validation errors occur during paste, frontend shows an error dialog and the user must correct input.
- If new rows are created during paste, they are sent in a single POST batch call. POST duration grows with number of rows. Order of pasted rows may differ from the spreadsheet order — this is not controlled by Fiori elements.
- Feature is not supported in custom tables.

LANGUAGE: text

CODE:
```text
Supported: primitive/simple fields
Not supported: links, images, connected fields, multi-input, field groups, navigation properties
Validation: front-end checks data types; back-end must enforce editability and fixed-value lists
```

STEP: 4 — Behavior Specific to OData V2

DESCRIPTION:
- Smart table paste is available when the smart table contains inline actions.
- Columns containing inline actions are ignored by the paste operation — omit them from the source spreadsheet.
- Read-only columns are ignored during paste but are included in spreadsheet exports and must be present when preparing pasted data.

LANGUAGE: text

CODE:
```text
OData V2: Inline action columns ignored for paste -> omit these columns when copying from spreadsheet
```

STEP: 5 — Behavior Specific to OData V4

DESCRIPTION:
- Paste is enabled by default on the object page if creationMode is set to inline or empty row.
- End users must preserve placeholders for inline action columns in the spreadsheet (these columns may be empty).
- Front-end verifies pasted values match the field's data type but does not check field editability or fixed-value lists — back-end validation is required.
- Properties with textArrangement = TextOnly cannot be pasted.

LANGUAGE: text

CODE:
```text
OData V4: paste enabled by default for object page when creationMode = inline|emptyRow
Front-end: type validation only. Back-end must enforce editability and business validations.
```

STEP: 6 — Disable Paste via Configuration (enablePaste)

DESCRIPTION:
- Application developers can disable paste by setting enablePaste to false in the tableSettings configuration of the component options.

LANGUAGE: JSON

CODE:
```json
                "SalesOrderManageObjectPageEnableExport": {
                    "type": "Component",
                    "id": "SalesOrderManageObjectPage",
                    "name": "sap.fe.templates.ObjectPage",
                    "options": {
                        "settings": {
                            "controlConfiguration": {
                                _Item/@com.sap.vocabularies.UI.v1.LineItem: {
                                    "tableSettings": {
                                        "type": "GridTable",
                                        "enablePaste": false,
                                        "condensedTableLayout": true,
                                        "personalization": {
                                            "column": true,
                                            "sort": false
                                        },
                                        "creationMode": {
                                            "name": "Inline"
                                        }
                                    }
                                }
                            }
                        
```

STEP: 7 — Copying Multiple Rows and Range Selections

DESCRIPTION:
- End users can copy multiple rows and ranges of rows/columns to the clipboard and paste them according to the rules above.
- For more details about multi-row and range selection copy, see:
  - tables-c0f6592.md#loioc0f6592a592e47f9bb6d09900de47412__section_pth_3mb_dzb

LANGUAGE: text

CODE:
```text
Supports copying multiple rows and ranges; paste behaviour follows table-level or cell-level rules as applicable.
```
--------------------------------

**TITLE**: Configure Create Mode as External App (Fiori Elements OData V4)

**INTRODUCTION**: Enable the Create button in a Fiori Elements list/table to launch an external SAP Fiori launchpad app. This config uses manifest.json: set creationMode to "External" with an outbound key and define the corresponding outbound entry (semanticObject, action, optional parameters) under sap.app.crossNavigation.outbounds. Applicable only for SAP Fiori elements with OData V4.

**TAGS**: fiori-elements, odata-v4, manifest.json, navigation, create-mode, external-app, sap.fiori, crossNavigation, outbounds

**STEP**: 1 — Applicability
**DESCRIPTION**: Confirm this configuration is only valid for SAP Fiori elements for OData V4.
**LANGUAGE**: JSON
**CODE**:
```json
// Note: This configuration applies only to SAP Fiori elements for OData V4.
// For OData V2, see Handling of the preferredMode Parameter documentation.
```

**STEP**: 2 — Enable Create button to open external app
**DESCRIPTION**: In manifest.json, set the table's creationMode to External and specify an outbound key (here "MyExternalApp"). This instructs the Create button to navigate via the specified outbound target.
**LANGUAGE**: JSON
**CODE**:
```json
"controlConfiguration": {
    "/@com.sap.vocabularies.UI.v1.LineItem": {
        "tableSettings": {
            "creationMode": {
                "name": "External",
                "outbound": "MyExternalApp"
            }
        }
    }
}
```

**STEP**: 3 — Define outbound target and parameters
**DESCRIPTION**: In manifest.json, add the outbound under sap.app.crossNavigation.outbounds. The outbound must contain semanticObject and action (mandatory). The source app's context is passed automatically on navigation. Define additional parameters here to be delivered to the target app. Use "format": "plain" and "value" for static values; dynamic expressions can be used as needed.
**LANGUAGE**: JSON
**CODE**:
```json
"sap.app": {
    "id": "DraftsManage",
    "type": "application",
    ...
    "crossNavigation": {
        "outbounds": {
            "MyExternalApp": {
                "semanticObject": "mySemanticObject",
                "action": "myAction",
                "parameters": {
                    "MyParam": {
                        "value": {
                            "value": "myValue",
                            "format": "plain"
                        }
                    }
                }
            }
        }
    }
}
```
--------------------------------

**TITLE**: Create Mode Options for Object Page (SAP Fiori elements)

**INTRODUCTION**: This document lists the available create-mode options for tables on the Object Page in SAP Fiori elements, explains when each mode is used, and points to the relevant implementation references. Use these modes to configure how users create new business objects from an object page table.

**TAGS**: fiori-elements-framework, object-page, create-mode, inline-creation, dialog, external, OData-v4

**STEP**: 1 — Overview of Create Modes

**DESCRIPTION**: Summary of available create modes and their high-level behavior. Use these identifiers when configuring table/create behavior or when searching implementation references.

**LANGUAGE**: text

**CODE**:
```text
Available create modes:
- `Inline`
- `InlineCreationRows`
- Create page (default when navigation from the table is available)
- Create dialog (dialog-based object creation; OData V4 only on the Object Page)
- `External` (navigates to an external Fiori launchpad app)
```

**STEP**: 2 — Inline and InlineCreationRows

**DESCRIPTION**: Use these modes to let users create new business objects directly within the table rows on the Object Page without navigation. Refer to the detailed guide to enable inline creation or empty-row creation for table entries.

- Use when you want seamless row-based creation.
- No navigation away from the Object Page is performed.

**LANGUAGE**: text

**CODE**:
```text
Modes: `Inline`, `InlineCreationRows`
Reference: Enabling Inline Creation Mode or Empty Row Mode for Table Entries
File: enabling-inline-creation-mode-or-empty-row-mode-for-table-entries-cfb04f0.md
```

**STEP**: 3 — Create Page (Default when navigation is available)

**DESCRIPTION**: Configure the application to navigate to a dedicated object page for creation when navigation from the table is available. This is the default create mode in scenarios where row navigation is supported and preferred.

- Use when comprehensive creation UI and navigation are needed.
- Default behavior when table row navigation exists.

**LANGUAGE**: text

**CODE**:
```text
Mode: Create page
Behavior: Application navigates to an object page where the user can enter values and create a new object.
Default: Used when navigation from the table is available.
```

**STEP**: 4 — Create Dialog (Object Page only supported for OData V4)

**DESCRIPTION**: Use a dialog to capture creation inputs without leaving the current page. Note: On the Object Page, create dialog support is available only for SAP Fiori elements with OData V4. Refer to the implementation guide for enabling dialog-based creation.

**LANGUAGE**: text

**CODE**:
```text
Mode: Create dialog
Behavior: A dialog opens where the user can enter values and trigger object creation.
Important: On the Object Page, the create dialog is only supported by SAP Fiori elements for OData V4.
Reference: Enabling Object Creation Using the Dialog on the Object Page
File: enabling-object-creation-using-the-dialog-on-the-object-page-7fee938.md
```

**STEP**: 5 — External Create Mode

**DESCRIPTION**: Use the External mode when creation is handled by a separate SAP Fiori launchpad-based application. Clicking Create triggers navigation to the external app that manages object creation.

**LANGUAGE**: text

**CODE**:
```text
Mode: `External`
Behavior: Clicking the Create button navigates to an external Fiori launchpad app for object creation.
Reference: Create Mode as an External App
File: create-mode-as-an-external-app-5c2bc2e.md
```
--------------------------------

**TITLE**: Create a propertyBindingChange for SAP Fiori elements (OData V2)

**INTRODUCTION**: This document explains how to create a property binding change (propertyBindingChange) for SAP Fiori elements (OData V2). Use it when you want a control property (for example visibility) to be data-bound or expression-bound rather than having a static newValue. This is intended for code generation or automated edits of change files produced by the Page Editor.

**TAGS**: fiori-elements-framework, SAPUI5, ui5, change-management, propertyBindingChange, ODataV2, PageEditor

**STEP**: 1 — Preconditions and applicability

**DESCRIPTION**: Ensure this procedure is applicable and model data is already retrieved by the model. This procedure applies only to SAP Fiori elements for OData V2 and is relevant for these UI adaptation use cases: object page — show header content in edit mode; show content parts in the header according to a mode; control visibility of a section.

**LANGUAGE**: text

**CODE**:
```text
Preconditions:
- SAP Fiori elements for OData V2 only.
- The property you bind must have its data available in the model.
- If binding to an OData property, the property must belong to the same node or the root node.
```

**STEP**: 2 — Open the Page Editor and identify the target property

**DESCRIPTION**: Open the Page Editor for the target application/page. Locate the control property you want to change (for example the "visible" property of an ObjectPage section). In the property panel you may either select a binding from the drop-down or compose an expression.

**LANGUAGE**: text

**CODE**:
```text
Action:
- Open your app in Web IDE or Business Application Studio.
- Open the app's Page Editor for the target page.
- Select the control and its property (e.g., visible).
- Choose or enter an expression/binding, e.g. {myProperty} or {= !${ui>/editable}}
```

**STEP**: 3 — Convert an existing propertyChange file to propertyBindingChange

**DESCRIPTION**: If you already have a change file of type propertyChange, modify it programmatically or manually:
- Change "changeType" from "propertyChange" to "propertyBindingChange".
- In "content", remove or replace "newValue" with "newBinding" and set its value to the desired binding string (for example "{myProperty}" or an expression).
- Keep other metadata (reference, selector, namespace, etc.) intact.

Include the original propertyChange file and the resulting propertyBindingChange file examples below. Use these as templates for automated edits or generation.

**LANGUAGE**: json

**CODE**:
```json
{
    "fileName": "id_1460988346969_256_propertyChange",
    "fileType": "change",
    "changeType": "propertyChange",
    "reference": "STTA_MP.Component",
    "packageName": "$TMP",
    "content": {
        "property": "visible",
        "oldValue": true,
        "newValue": false
    },
    "selector": {        "id": "STTA_MP::sap.suite.ui.generic.template.ObjectPage.view.Details::STTA_C_MP_Product--action::STTA_PROD_MAN.STTA_PROD_MAN_Entities::STTA_C_MP_ProductCopywithparams",
        "type": "sap.uxap.ObjectPageHeaderActionButton"
    },
    "layer": "CUSTOMER_BASE",
    "texts": {},
    "namespace": "apps/STTA_MP/changes/",
    "creation": "2016-04-18T14:05:47.149Z",
    "originalLanguage": "EN",
    "conditions": {},
    "context": "",
    "support": {
        "generator": "Change.createInitialFileContent",
        "service": "",
        "user": ""
    }
}
```

```json
{
    "fileName": "id_1460988346969_256_propertyChange",
    "fileType": "change",
    "changeType": "propertyBindingChange",
    "reference": "STTA_MP.Component",
    "packageName": "$TMP",
    "content": {
        "property": "visible",
        "oldValue": true,
        "newBinding": "{myProperty}"
    },
    "selector": {
        "id": "STTA_MP::sap.suite.ui.generic.template.ObjectPage.view.Details::STTA_C_MP_Product--action::STTA_PROD_MAN.STTA_PROD_MAN_Entities::STTA_C_MP_ProductCopywithparams",
        "type": "sap.uxap.ObjectPageHeaderActionButton"
    },
    "layer": "CUSTOMER_BASE",
    "texts": {},
    "namespace": "apps/STTA_MP/changes/",
    "creation": "2016-04-18T14:05:47.149Z",
    "originalLanguage": "EN",
    "conditions": {},
    "context": "",
    "support": {
        "generator": "Change.createInitialFileContent",
        "service": "",
        "user": ""
    }
}
```

**STEP**: 4 — Use expression binding where needed

**DESCRIPTION**: You can use expression binding syntax for transformations (for example negation) in newBinding. The expression must be a valid UI5 expression binding literal.

**LANGUAGE**: text

**CODE**:
```text
Examples of bindings and expressions:
- Simple property binding: "{myProperty}"
- Negation (expression binding): "{= !${myProperty}}"
- Object Page edit mode: "{ui>/editable}"
- Object Page display mode: "{= !${ui>/editable}}"
- Object Page create mode: "{ui>/createMode}"
- Controls enabled: "{ui>/enabled}"
Note: expression binding must be valid UI5 syntax and refer to models available at runtime.
```

**STEP**: 5 — Bind to i18n texts (optional)

**DESCRIPTION**: To bind a property to an i18n text, prefix the binding with the i18n model name. Use the same newBinding field in the change file.

**LANGUAGE**: json

**CODE**:
```json
{
    "content": {
        "property": "tooltip",
        "oldValue": "Move down",
        "newBinding": "{i18n>xtol.MoveDown}"
    }
}
```
--------------------------------

**TITLE**: Create a List Report without Variant Management (SAP Fiori Elements)

**INTRODUCTION**: This guide shows how to disable standard variant management for List Report apps in SAP Fiori Elements (OData V2 and V4), and how to display an app-specific subtitle when variant management is hidden. Use these manifest and i18n edits to remove variant UI and show a custom title.

**TAGS**: fiori-elements-framework, sap-fiori, list-report, variant-management, manifest.json, i18n, odata-v2, odata-v4

STEP: V2 — Disable variant management in manifest.json (List Report component)
DESCRIPTION: Add the variantManagementHidden flag under the List Report component settings in sap.ui.generic.app pages. Set smartVariantManagement to true and variantManagementHidden to true to hide page and control variants. If smartVariantManagement is omitted or false, variantManagementHidden will only hide the filter bar variant.
LANGUAGE: JSON
CODE:
```json
"sap.ui.generic.app": {
        "_version":"1.1.0",
        "pages": [
            {
                "entitySet": "XXXXXX_Product",
                "component": {
                    "name": "sap.suite.ui.generic.template.ListReport",
                    "list": true,
                    "settings" : {
                        "gridTable" : false,
                        "smartVariantManagement": true,
                        "variantManagementHidden": true // Hides Variant management
                    }
                },
```

STEP: V2 — Provide an app-specific subtitle when variant management is hidden (i18n)
DESCRIPTION: Add a key in the i18n properties file to supply the subtitle text used when variant management is hidden.
LANGUAGE: properties
CODE:
```properties
#XTIT,40
subTitleIfVariantMgmtHidden = List Report Custom Title
```

STEP: V2 — Bind the subtitle key in manifest.json settings
DESCRIPTION: Reference the i18n key from the List Report settings so the app shows the custom subtitle when variant management is hidden.
LANGUAGE: JSON
CODE:
```json
"sap.ui.generic.app": {
        "_version":"1.1.0",
        "pages": [
            {
                "entitySet": "XXXXXX_Product",
                "component": {
                    "name": "sap.suite.ui.generic.template.ListReport",
                    "list": true,
                    "settings" : {
                        "gridTable" : false,
                        "smartVariantManagement": true,
                        "variantManagementHidden": true,
                        "subTitleIfVariantMgmtHidden": "{{subTitleIfVariantMgmtHidden}}" // Adding Custom Title here
                    }
                },
```

STEP: V2 — Important note
DESCRIPTION: The variantManagementHidden property must be used with smartVariantManagement = true to hide both the page variant and control variant. If used alone, it hides only the filter bar variant.

STEP: V4 — Disable variant management in routing target settings
DESCRIPTION: For OData V4 List Report (FE), set the variantManagement option to "None" in the target settings under sap.ui5.routing.targets to remove standard variant management. If omitted or set to "Page" / "Control", variant management remains available.
LANGUAGE: JSON
CODE:
```json
"sap.ui5": {
            "routing": {
                "targets": {
                    "XXXXXX_List": {
                        "type": "Component",
                        "id": "XXXXXX_List",
                        "name": "sap.fe.templates.ListReport",
                        "options": {
                            "settings" : {
                                "contextPath" : "/XXXXXX",
                                "variantManagement": "None"
                                }
                            }
                        }
                    },
```

STEP: V4 — Provide an app-specific subtitle in i18n
DESCRIPTION: Add a subtitle key to the i18n properties file and set text to display as the app subtitle when variant management is not shown.
LANGUAGE: properties
CODE:
```properties
#XTIT, 40
appSubTitle = List Report Custom Title
```

STEP: V4 — Bind the app subtitle in sap.app section of manifest.json
DESCRIPTION: Reference the i18n subtitle key in sap.app.subTitle so the app displays the custom subtitle.
LANGUAGE: JSON
CODE:
```json
"sap.app": {
            "id": "XXXXXX",
            "type": "application",
            "i18n": "i18n/i18n.properties",
            "title": "{{title}}",
            "subTitle": "{{appSubTitle}}",
            "description": "{{description}}",
```

STEP: V4 — Behavior summary
DESCRIPTION: Setting variantManagement to "None" removes standard variant management and shows the app name (or the app subTitle if provided). Setting variantManagement to "Page" or "Control", or omitting the setting, keeps standard variant management available.
--------------------------------

**TITLE**: Creating a SAP Fiori Elements Project with SAP Fiori Tools

**INTRODUCTION**: Step-by-step developer-focused instructions to prepare your environment and generate a SAP Fiori elements application using SAP Fiori tools in SAP Business Application Studio (BAS) or Visual Studio Code (VS Code). Use this when you need to scaffold a new Fiori elements app (list report/object page, overview page, etc.) using the SAP Fiori generator.

**TAGS**: fiori-elements-framework, sap-fiori, sap-fiori-tools, sap-business-application-studio, visual-studio-code, generator

**STEP**: 1 — Verify prerequisites

**DESCRIPTION**: Confirm your environment meets the required prerequisites before creating a Fiori elements app. Open and follow the official prerequisites checklist. Ensure you have either SAP Business Application Studio or Visual Studio Code available.

**LANGUAGE**: Text

**CODE**:
```text
Action items:
- Open and follow the prerequisites checklist:
  prerequisites-for-using-sap-fiori-elements-f2344b5.md

- Ensure you have one of the supported editors:
  - SAP Business Application Studio (recommended for SAP Cloud development)
  - Visual Studio Code

- For SAP Fiori tools installation details (extensions and setup):
  https://help.sap.com/docs/SAP_FIORI_tools/17d50220bcd848aa854c9c182d65b699/e870fcff88b245e9b48a9d9f81715ac0.html
```

**STEP**: 2 — Install SAP Fiori tools in your editor

**DESCRIPTION**: Install the SAP Fiori tools extension set into your chosen editor so you can access the Fiori application generator and other productivity features. Follow the official installation guide for BAS or VS Code.

**LANGUAGE**: Text

**CODE**:
```text
Installation (high level):
- Open your editor (SAP Business Application Studio or Visual Studio Code).
- In Visual Studio Code:
  1. Open Extensions view (Ctrl+Shift+X or View → Extensions).
  2. Search for "SAP Fiori tools".
  3. Install the SAP Fiori tools extensions relevant to Application Generator and App Capabilities.
- In SAP Business Application Studio:
  1. Use the Dev Space that includes SAP Fiori tools (or add the extensions via the SAP Business Application Studio dev space configuration).
- Follow the official installation documentation for exact steps:
  https://help.sap.com/docs/SAP_FIORI_tools/17d50220bcd848aa854c9c182d65b699/e870fcff88b245e9b48a9d9f81715ac0.html
```

**STEP**: 3 — Generate a SAP Fiori elements application

**DESCRIPTION**: Use the SAP Fiori generator (provided by the SAP Fiori tools extension) to scaffold a new Fiori elements application. Launch the generator from your editor, follow the interactive prompts to select project template, data source, OData service, and other app settings. Refer to the official generate-app documentation for platform-specific guidance.

**LANGUAGE**: Text

**CODE**:
```text
Generate app (interactive):
- Open SAP Business Application Studio or Visual Studio Code.
- Launch the Fiori Application Generator:
  - In Visual Studio Code: open Command Palette (Ctrl+Shift+P) → run "Fiori: Open Application Generator"
  - In SAP Business Application Studio: use the Fiori tools menu / command to open the Application Generator
- Follow prompts to:
  1. Choose application type (e.g., SAP Fiori elements - List Report Object Page).
  2. Configure project name and namespace.
  3. Select data source type and specify OData service (URL or local definition).
  4. Configure annotations, pages, navigation, and deployment options.
- For full, editor-specific guidance and screenshots:
  https://help.sap.com/docs/SAP_FIORI_tools/17d50220bcd848aa854c9c182d65b699/db44d45051794d778f1dd50def0fa267.html
```


--------------------------------

**TITLE**: Extension Points to Modify Navigation Context (OData V2 & V4)

**INTRODUCTION**: Use controller extensions to add/remove/modify properties in the navigation context immediately before external outbound navigation is triggered (semantic links, related apps, DataFieldForIntentBasedNavigations). Includes registration in manifest.json and example implementations for OData V2 (adaptNavigationParameterExtension) and OData V4 (adaptNavigationContext).

**TAGS**: fiori-elements, extension, navigation, selectionVariant, odata-v2, odata-v4, intent-based-navigation, manifest, controller-extension, adaptNavigationContext

STEP: Caution and best practices

DESCRIPTION: Use app extensions only when manifest settings or annotations cannot achieve the required behavior. Integrate with SAP Fiori elements by using only the extensionAPI. Do not access or manipulate internal controls, properties, models, or other internal objects created by the SAP Fiori elements framework. See security guidance as needed.

LANGUAGE: Text

CODE:
```text
Caution:
Use app extensions with caution and only if you cannot produce the required behavior by other means, such as manifest settings or annotations. To correctly integrate your app extension coding with SAP Fiori elements, use only the extensionAPI of SAP Fiori elements. After you've created an app extension, its display (for example, control placement and layout) and system behavior (for example, model and binding usage, busy handling) lies within the application's responsibility. SAP Fiori elements provides support only for the official extensionAPI functions. Don't access or manipulate controls, properties, models, or other internal objects created by the SAP Fiori elements framework.

For more security-related information, see Security Configuration documentation.
```

STEP: Register controller extensions in manifest.json (OData V2)

DESCRIPTION: Register your controller extension for List Report and Object Page controllers in the manifest so SAP Fiori elements will load your custom controller implementations. Add the snippet under the appropriate manifest root (e.g., inside "sap.ui5" or as applicable to your project structure).

LANGUAGE: JSON

CODE:
```json
"extends": {
   "extensions": {
      ... 
      "sap.ui.controllerExtensions": { 
         ...
         "sap.suite.ui.generic.template.ListReport.view.ListReport": { 
            ... 
            "controllerName": "MY_APP.ext.controller.ListReportExtension",
            ...
         },
         "sap.suite.ui.generic.template.ObjectPage.view.Details": {
            ...
            "controllerName": "MY_APP.ext.controller.DetailsExtension",
            ...
         }
      } 
      ...
```

STEP: Create controller extension files

DESCRIPTION: Create the controller files referenced by the manifest controllerName values. For example, with namespace "MY_APP.ext.controller.ListReportExtension" create a file at webapp/ext/controller/ListReportExtension.controller.js and similarly for DetailsExtension. Implement extension methods in these files. Keep code scoped to the extensionAPI and avoid manipulating internal framework objects.

LANGUAGE: Text

CODE:
```text
Example controller file locations (match your namespace):
- webapp/ext/controller/ListReportExtension.controller.js  (namespace: MY_APP.ext.controller.ListReportExtension)
- webapp/ext/controller/DetailsExtension.controller.js     (namespace: MY_APP.ext.controller.DetailsExtension)
```

STEP: Implement adaptNavigationParameterExtension (OData V2)

DESCRIPTION: In your controller extension (List Report, Object Page, or Analytical List Page), implement adaptNavigationParameterExtension(oSelectionVariant, oObjectInfo). Use SelectionVariant API to add/remove parameters or selection options. Do not remove required properties such as the semanticObject for semantic links. SelectionVariant API reference: https://ui5.sap.com/#/api/sap.ui.generic.app.navigation.service.SelectionVariant/overview

LANGUAGE: JavaScript

CODE:
```javascript
adaptNavigationParameterExtension: function(oSelectionVariant, oObjectInfo) {
  // This is an example! Please create your own code!!
  // This is an example to remove the parameter 'Currency' from the parameters
  oSelectionVariant.removeParameter("Currency");
  // This is an example to remove the property 'Price' from the selection option
  oSelectionVariant.removeSelectOption("Price");
  // This is an example to remove all properties which starts with 'D'
  oSelectionVariant.getSelectOptionsPropertyNames().forEach(function(sSelectOptionName){
    if (sSelectOptionName.startsWith('D')) {
       oSelectionVariant.removeSelectOption(sSelectOptionName);
    }
  });
},
```

STEP: Restriction for adaptNavigationParameterExtension (OData V2)

DESCRIPTION: Note that you cannot remove every property required for a navigation link; required properties (for example, the semantic object property) must remain. The method is invoked just before outbound navigation.

LANGUAGE: Text

CODE:
```text
Note:
You cannot remove all properties for each navigation link. For example, the property of the semantic object is required for the semantic object link on the object page.
```

STEP: Register controller extensions in manifest.json (OData V4)

DESCRIPTION: For OData V4 (SAP Fiori elements V4 / SAP Fiori elements for OData V4), register controller extensions using the "sap.ui5" -> "extends" -> "extensions" -> "sap.ui.controllerExtensions" path. Provide controllerName values that point to your extension controllers.

LANGUAGE: JSON

CODE:
```json
"sap.ui5": {
    "extends": {
        "extensions": {
            "sap.ui.controllerExtensions": {
                "sap.fe.templates.ListReport.ListReportController": {
                    "controllerName": "SalesOrder.ext.LRExtend"
                },
                "sap.fe.templates.ObjectPage.ObjectPageController": {
                    "controllerName": "SalesOrder.ext.OPExtend"
                }
            }
        }
    }
}
```

STEP: Implement adaptNavigationContext (OData V4)

DESCRIPTION: In the controller extension (e.g., SalesOrder.ext.OPExtend), override intentBasedNavigation.adaptNavigationContext to modify the passed selection variant (oSelectionVariant) and inspect oTargetInfo (semanticObject and action). oSelectionVariant contains all properties passed to the target app (sensitive info already excluded and object mappings applied). This method is called once when an external outbound navigation is triggered. Use SelectionVariant APIs to remove or modify selection options.

LANGUAGE: JavaScript

CODE:
```javascript
override: {
    intentBasedNavigation: {
        adaptNavigationContext: function(oSelectionVariant, oTargetInfo) {
            Log.info("adaptNavigationContext extension called with semantic object: " + oTargetInfo .semanticObject + " and action: " + oTargetInfo .action);
            oSelectionVariant.removeSelectOption("HasDraftEntity");
        }
    }
}
```

STEP: Restriction and invocation behavior (OData V4)

DESCRIPTION: The adaptNavigationContext extension is invoked only once when you click a field displayed as a link, even if that link opens multiple navigation links. It cannot be invoked by clicking second-level navigation links.

LANGUAGE: Text

CODE:
```text
Restriction:
When you click a field that is displayed as a link, the call to the adaptNavigationContext extension method is invoked only once even if the link opens more than one navigation link. You cannot invoke this method by clicking the navigation links at the second level.
```
--------------------------------

**TITLE**: Configure "Add Card to Insights" Option for My Home (SAP S/4HANA Cloud & On-Premise)

**INTRODUCTION**: This guide shows how to enable/disable the "Add Card to Insights" option that appears in the overflow toolbar of tables (List Report) and charts (Analytical List Page) so end users can create cards for the Insights section of My Home. It includes prerequisites, supported/unsupported column types for card creation, restrictions, and exact manifest.json snippets for SAP Fiori elements OData V2 and V4 scenarios.

**TAGS**: fiori-elements-framework, sap-s4hana, manifest.json, list-report, analytical-list-page, odata-v2, odata-v4, my-home, insights, cards

STEP: Prerequisites

DESCRIPTION: Ensure the administrator has enabled My Home in SAP S/4HANA Cloud (Public Edition) or My Home in SAP S/4HANA. Once enabled, the "Add Card to Insights" option appears automatically in:
- the overflow toolbar of the table in list report applications
- the overflow toolbar of the chart in analytical list page applications

Images (for reference in UI):
- images/Add_Cards_to_Insights_New_fe526c6.png
- images/Add_Cards_to_Insights_ALP_401e0b0.png

LANGUAGE: Text

CODE:
```text
Prerequisite: Administrator must enable My Home in SAP S/4HANA Cloud Public Edition and/or My Home in SAP S/4HANA.
UI placement: Overflow toolbar of table (List Report) and overflow toolbar of chart (Analytical List Page)
```

STEP: Supported and Unsupported Columns for Card Creation

DESCRIPTION: Card creation dialog supports only single-valued DataField-based columns and some link/navigation flavors. Use columns that map to these supported DataField types to ensure fields appear in the card creation dialog.

LANGUAGE: Text

CODE:
```text
Supported column types (card creation dialog shows):
- Single-valued DataField
- DataFieldWithUrl
- Semantic links
- DataField with QuickViewFacets
- (OData V4 only) DataFieldWithIntentBasedNavigation
- (OData V4 only) DataFieldWithNavigationPath

Unsupported column types (will NOT appear in card creation dialog):
- Image
- Multi-valued columns
- FieldGroup-based columns
- Columns with inline action
- Columns with navigation button
- DataFieldForAnnotation-based columns (e.g., contact or address)
- Custom columns
```

STEP: Hide "Add Card to Insights" in SAP Fiori Elements (OData V2) — List Report

DESCRIPTION: To hide the Add Card to Insights option from the table overflow toolbar in a List Report app, add the addCardtoInsightsHidden property under tableSettings in your manifest.json for the specific page entry.

LANGUAGE: JSON

CODE:
```json
"sap.ui.generic.app": {
    "pages": [{
        "entitySet": "Zfarvd_Bs_Hd_Bo",
        "component": {
            "name": "sap.suite.ui.generic.template.ListReport",
            "list": true,
            "settings": {
                "tableSettings": { 
                    "addCardtoInsightsHidden": "true" //default value false
                }
            }
        }
    }]
}
```

STEP: Hide "Add Card to Insights" in SAP Fiori Elements (OData V2) — Analytical List Page

DESCRIPTION: To hide the Add Card to Insights option from the chart overflow toolbar in an Analytical List Page app, add the addCardtoInsightsHidden property under chartSettings in your manifest.json for the specific page entry.

LANGUAGE: JSON

CODE:
```json
"sap.ui.generic.app": {
    "pages": [{
        "entitySet": "Zfarvd_Bs_Hd_Bo",
        "component": {
            "name": "sap.suite.ui.generic.template.AnalyticalListPage",
            "list": true,
            "settings": {
               "chartSettings": { 
                    "addCardtoInsightsHidden": "true" //default value false
               }
            }
        }
    }]
}
```

STEP: Hide "Add Card to Insights" in SAP Fiori Elements (OData V4) — Table Toolbar

DESCRIPTION: For OData V4 List Report apps (single view or single-entity multi-view with ResponsiveTable), disable the Add Card to Insights option by configuring controlConfiguration for the LineItem annotation specifying type ResponsiveTable and enableAddCardToInsights: false in manifest.json.

LANGUAGE: JSON

CODE:
```json
"controlConfiguration": {
     "@com.sap.vocabularies.UI.v1.LineItem": {
         "tableSettings": {
             "type": "ResponsiveTable",
             "enableAddCardToInsights": false
         }
     }
}
```

STEP: Hide "Add Card to Insights" in SAP Fiori Elements (OData V4) — Chart Toolbar

DESCRIPTION: For OData V4 Analytical List Page charts, disable the Add Card to Insights option by adding a controlConfiguration for the Chart annotation in manifest.json.

LANGUAGE: JSON

CODE:
```json
"controlConfiguration": {
    "@com.sap.vocabularies.UI.v1.Chart": {
        enableAddCardToInsights: false
    }
}
```

STEP: Restrictions When Creating Integration Cards

DESCRIPTION: Be aware of known limitations when creating integration cards from List Report tables:
- Removed filter fields or table columns and changes to their positions are not retained when navigating back from the created card.
- Cards do not retain the same unit-of-measure formatting as the list report table.

LANGUAGE: Text

CODE:
```text
Restrictions:
- Removed filter fields or table columns and changes in their positions are NOT retained when navigating back from the card.
- Cards do NOT retain the same unit-of-measure formatting as shown in the list report table.
```

STEP: Related Documentation Links

DESCRIPTION: Reference the official My Home documentation for Cloud Public Edition and On-Premise S/4HANA.

LANGUAGE: Text

CODE:
```text
Related:
- My Home in SAP S/4HANA Cloud Public Edition:
  https://help.sap.com/docs/SAP_S4HANA_CLOUD/4fc8d03390c342da8a60f8ee387bca1a/8a60279e8d2041b5ad8d3455fab0f3ef.html

- My Home in SAP S/4HANA:
  https://help.sap.com/docs/ABAP_PLATFORM_NEW/a7b390faab1140c087b8926571e942b7/8a60279e8d2041b5ad8d3455fab0f3ef.html
```
--------------------------------

**TITLE**: Creating Custom Cards for Fiori Overview Pages

**INTRODUCTION**: Step-by-step action guide to create and integrate a custom overview page card in a SAP Fiori Elements (OVP) application. Shows required file structure, component extension, view fragment, controller, manifest linking, and extension APIs for refresh and filter application.

**TAGS**: fiori-elements-framework, sapui5, ovp, custom-card, overview-page, extension-api, manifest, JavaScript, XML

**STEP**: 1 — Create extension folder

**DESCRIPTION**: Create a new folder under your app's webapp/ext to contain the custom card. Example uses webapp/ext/myCustomCard.

**LANGUAGE**: Bash

**CODE**:
```bash
# from project root
mkdir -p webapp/ext/myCustomCard
```

**STEP**: 2 — Create required files

**DESCRIPTION**: Create the component, controller, and fragment files in the new folder. The header fragment is optional (only required if you want to customize the card header).

Required files:
- Component.js (or component.js as referenced in later steps)
- MyCustomCard.controller.js
- MyCustomCard.fragment.xml
- MyCustomCardHeader.fragment.xml (optional)

**LANGUAGE**: Bash

**CODE**:
```bash
touch webapp/ext/myCustomCard/Component.js
touch webapp/ext/myCustomCard/MyCustomCard.controller.js
touch webapp/ext/myCustomCard/MyCustomCard.fragment.xml
touch webapp/ext/myCustomCard/MyCustomCardHeader.fragment.xml  # optional
```

**STEP**: 3 — Extend the custom card component

**DESCRIPTION**: Implement the custom card component by extending the OVP custom card component. Place this file in webapp/ext/myCustomCard (filename shown in snippet).

Keep the sample component code intact and adapt the names (namespace, default fragments, dependencies) to your project. The metadata properties define which fragment and controller will be used by the card.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
sap.ui.define(["sap/ovp/cards/custom/Component"],
    function (CustomCardComponent) {
        "use strict";
         return CardComponent.extend("test.testovp.ext.myCustomCard.Component", {

            metadata: {
                properties: {
                    "contentFragment": {
                        "type": "string",
                        "defaultValue": "test.testovp.ext.myCustomCard.MyCustomCard"
                    },
                    customizing: {
                        "sap.ui.controllerExtensions": {
                             "sap.ovp.cards.generic.Card": {
                                  controllerName: "test.testovp.ext.myCustomCard.MyCustomCard"
                     }
                 }
             }
                     "annotationPath": {
                         "type": "string",
                         "defaultValue": "com.sap.vocabularies.UI.v1.LineItem"
                     },
                     "countHeaderFragment": {
                         "type": "string",
                         "defaultValue": "sap.ovp.cards.generic.CountHeader"
                     },
                     "headerExtensionFragment": {
                         "type": "string",
                         "defaultValue": "sap.ovp.cards.generic.KPIHeader"
                     }
                 },
                  version: "${version}",
                  library: "sap.ovp",
                  includes: [],
                  dependencies: {
                     libs: ["sap.suite.ui.microchart"],
                     components: []
                 },
                 config: {}
             }
         });
     }
);
```

**STEP**: 4 — Define the card view fragment

**DESCRIPTION**: Implement the content area of your custom card using a UI5 fragment. Place this file as webapp/ext/myCustomCard/MyCustomCard.fragment.xml. Use ovp controls and binding as needed.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition
         xmlns="sap.m"
         xmlns:core="sap.ui.core"
         xmlns:ovp="sap.ovp.ui"
         xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1">
     <!-- Here you can put your Card's Content Area -->
</core:FragmentDefinition>
```

**STEP**: 5 — Implement the card controller

**DESCRIPTION**: Add lifecycle and extension methods to the custom card controller. Place this file as webapp/ext/myCustomCard/MyCustomCard.controller.js. Implement onInit, onAfterRendering, and other hooks (onRefresh, setRelevantFilters) as required.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
 (function () {
     "use strict";
     /*global sap, jQuery */
    
     sap.ui.define([], function() {
         return {
             onInit: function () {
                 ...
             },
    
             onAfterRendering: function () {
                ...
            }
        }
    });
 })();
```

**STEP**: 6 — Link the custom card component in manifest.json

**DESCRIPTION**: Register the custom card in the application's manifest so the OVP runtime uses your component. Add a card entry that references your component template and settings (title, entitySet, model). Example shows a card key entry snippet.

Place changes in webapp/manifest.json under sap.ovp/config or the card area your app uses.

**LANGUAGE**: JSON

**CODE**:
```json
"card008_HereIsMyCustomCard": {
   "model": "myModel",
   "template": "test.testovp.ext.myCustomCard",
   "settings": {
     "title": "Custom Card Title",
     "entitySet": "MyEntity",
     ...
 	...
```

**STEP**: 7 — Enable Refresh action via onRefresh extension

**DESCRIPTION**: To allow end users to refresh card data (action on the card), implement the onRefresh extension in the controller. Add onRefresh to your MyCustomCard.controller.js and perform re-binding or data reload logic there.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
     (function () {
         "use strict";
         /*global sap, jQuery */
        
         sap.ui.define([], function() {
             return {
                 onInit: function () {
                     ...
                 },
                 onAfterRendering: function () {
                    ...
                 },
                 onRefresh: function () {
                    ...
                 }
            }
        });
     })();
```

**STEP**: 8 — Apply relevant filters via setRelevantFilters extension

**DESCRIPTION**: Use setRelevantFilters in the custom card controller to receive and apply OVP-provided relevant filters to your card's bindings. The sample shows checking filter arrays and applying them to the card's list/items binding. Place this method in MyCustomCard.controller.js.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
(function () {
    "use strict";
    /*global sap, jQuery */
    sap.ui.define([], function () {
        return {
            onInit: function () { },
            onAfterRendering: function () {},
            /**
             * Extension function to receive card relevant filters
             * @param {sap.ui.model.Filter} oFilters - Relevant filters
             * @returns {void}
             */
            setRelevantFilters: function (oFilters) {
                var oView = this.getView().byId("cardView");
                if (oFilters[0] && oFilters[0].aFilters && oFilters[0].aFilters.length > 0) {
                    // Apply filters to the card
                    oView.getBinding("items").filter(oFilters);
                } else {
                    oView.getBinding("items").filter([]);
                }
            }
        });
})();
```

**STEP**: 9 — Notes and conventions

**DESCRIPTION**: Use these rules and notes when implementing custom cards:
- The header fragment (MyCustomCardHeader.fragment.xml) is optional—create it only if you want a custom header.
- Card templates that begin with "sap.ovp.cards" are reserved for standard OVP cards. Use your own namespace for custom templates (e.g., test.testovp.ext.myCustomCard).
- Confirm file paths:
  - Component: webapp/ext/myCustomCard/Component.js (or component.js depending on naming)
  - Controller: webapp/ext/myCustomCard/MyCustomCard.controller.js
  - Fragment: webapp/ext/myCustomCard/MyCustomCard.fragment.xml
  - Optional header: webapp/ext/myCustomCard/MyCustomCardHeader.fragment.xml
- Update webapp/manifest.json to reference your template/component under the cards configuration.
--------------------------------

**TITLE**: Creating Custom Filters for SAP Fiori Elements (OData V2)

**INTRODUCTION**: This document shows concise, actionable steps to add custom compact filters, visual filter customizations, and KPI tag filter modifications in SAP Fiori elements (Analytical List Page) for OData V2. It includes manifest extension snippets, XML fragment for custom controls, controller extension methods, visual filter hooks, and KPI extension samples ready to paste into your app.

**TAGS**: fiori-elements-framework, sapui5, analytical-list-page, filters, visual-filters, kpi, extension, odata-v2

**STEP**: 1 — Add manifest extensions to include custom filter fragment and controller extension

**DESCRIPTION**: Extend the application manifest (sap.ui5) to register:
- controller extension for the AnalyticalListPage (ALP) view,
- view extension that inserts an XML fragment as a custom filter ControlConfiguration into the SmartFilterBar (key: SmartFilterBarControlConfigurationExtension|<EntitySet>).
Place the extended controller and fragment in your application namespace.

**LANGUAGE**: JSON

**CODE**:
```JSON
                        
                        "sap.ui5": {
    "_version": "1.1.0",
    "extends": {
        "extensions": {
             "sap.ui.controllerExtensions": { // Controller extension
                 "sap.suite.ui.generic.template.AnalyticalListPage.view.AnalyticalListPage": { // ALP app view to be extended with controller
                   "controllerName": "my_app.ext.controller.AnalyticalListPageExt", // extended Controller declared using namespace
                       ... // Other custom controllers
                    ...
                  } // End of ALP controller extensions
             }, // End of controller extensions
             "sap.ui.viewExtensions": { // View Extension
                 "sap.suite.ui.generic.template.AnalyticalListPage.view.AnalyticalListPage": { // ALP app view to be extended with filter fragment
                    "SmartFilterBarControlConfigurationExtension|CZ_EASILINEITEMS_SADL": { // <Filter Bar Extension>|<Entity Set>
                    "className": "sap.ui.core.Fragment",
                    "fragmentName": "analytics2.alr.ext.fragments.CustomFilters", // extended Fragment declared using namespace
                    "type": "XML"
                },
                ... // Other view extensions
                ... 
            } // End of ALP view extensions
        } // End of view extensions
      }
   }
}
```

**STEP**: 2 — Create the XML fragment for custom compact filter

**DESCRIPTION**: Add an XML fragment that defines a SmartFilterBar ControlConfiguration entry. Use visibleInAdvancedArea, a custom key, and embed any custom control (example uses ComboBox). Save fragment at the namespace path referenced in manifest (e.g., analytics2/alr/ext/fragments/CustomFilters.fragment.xml).

**LANGUAGE**: XML

**CODE**:
```XML
<core:FragmentDefinition xmlns="sap.m" xmlns:smartfilterbar="sap.ui.comp.smartfilterbar" xmlns:core="sap.ui.core">
    <smartfilterbar:ControlConfiguration key="CustomFilters" index="99" visibleInAdvancedArea="true" label="Custom Filter" groupId="_BASIC">
        <smartfilterbar:customControl>
            <ComboBox id="CustomFilters-combobox">
                <core:Item key="0" text="Item1"/>
                <core:Item key="1" text="Item2"/>
                <core:Item key="2" text="Item3"/>
            </ComboBox>
        </smartfilterbar:customControl>
    </smartfilterbar:ControlConfiguration>
</core:FragmentDefinition>
```

**STEP**: 3 — Implement controller extension methods for SmartFilterBar lifecycle and state persistence

**DESCRIPTION**: Implement the extension controller (registered in manifest) to:
- attach event handlers during onInitSmartFilterBarExtension,
- influence table/chart bindings in onBeforeRebindTableExtension and onBeforeRebindChartExtension,
- persist and restore custom field values using getCustomAppStateDataExtension and restoreCustomAppStateDataExtension.

Paste this code into your controller file (e.g., my_app/ext/controller/AnalyticalListPageExt.js).

**LANGUAGE**: JavaScript

**CODE**:
```JavaScript

sap.ui.define([], function() {
    return {
        onInitSmartFilterBarExtension: function(oEvent) {
        // the custom field in the filter bar might have to be bound to a custom data model
        // if a value change in the field shall trigger a follow up action, this method is the 
        // place to define and bind an event handler to the field
        // Example:
        var oSmartFilterBar = oEvent.getSource();
        oSmartFilterBar.getControlByKey("CustomFilters").attachSelectionChange(function(oChangeEvent){
        //code
        },this);
        jQuery.sap.log.info("onInitSmartFilterBarExtension initialized");
        },
        onBeforeRebindTableExtension: function(oEvent) {
        // usually the value of the custom field should have an effect on the selected data in the table. 
        // So this is the place to add a binding parameter depending on the value in the custom field.
        },
        onBeforeRebindChartExtension: function(oEvent) {
            // usually the value of the custom field should have an effect on the selected data in the chart. 
            // So this is the place to add a binding parameter depending on the value in the custom field.
        },
        getCustomAppStateDataExtension : function(oCustomData) {
            // the content of the custom field shall be stored in the app state, so that it can be restored
            // later again e.g. after a back navigation. The developer has to ensure that the content of the
            // field is stored in the object that is returned by this method.
            // Example:
            var oComboBox = this.byId("CustomFilters-combobox");
                if (oComboBox){
            oCustomData.CustomPriceFilter = oComboBox.getSelectedKey();
        }
            },
        restoreCustomAppStateDataExtension : function(oCustomData) {
            // in order to to restore the content of the custom field in the filter bar e.g. after a 
            // back navigation, an object with the content is handed over to this method and the developer 
            // has to ensure, that the content of the custom field is set accordingly
            // also, empty properties have to be set
            // Example:
            if ( oCustomData.CustomPriceFilter !== undefined ){
                if ( this.byId("CustomFilters-combobox") ) {
                    this.byId("CustomFilters-combobox").setSelectedKey(oCustomData.CustomPriceFilter);
                }
            }
        }
    }
});
```

**STEP**: 4 — Implement onClearFilterExtension to clear custom filter controls

**DESCRIPTION**: ALP triggers onClearFilterExtension when the user clears filters. Implement logic to clear your custom controls (ComboBox, etc.) so they are reset when Clear is invoked.

**LANGUAGE**: JavaScript

**CODE**:
```JavaScript
onClearFilterExtension: function(oEvent) {
        // Logic for clearing extended filters
        'use strict';
        if ( this.byId("CustomFilters-combobox") ) {
             this.byId("CustomFilters-combobox").setSelectedKey(null);
        }
}
```

**STEP**: 5 — Notes and behaviors for compact filters

**DESCRIPTION**: Keep these important behavioral notes in mind and implement required logic accordingly:
- Custom filters do not appear in visual filters.
- Add logic in onBeforeRebindChartExtension or onBeforeRebindTableExtension to apply custom filter values to table/chart queries; these values refresh automatically when the chart/table area refreshes to keep custom filters synchronized when filter mode changes.
- Ensure getCustomAppStateDataExtension and restoreCustomAppStateDataExtension persist/restore values for navigation/back flows.

**LANGUAGE**: Text

**CODE**:
```Text
- Custom filters do not show up in visual filters.
- If you define logic in onBeforeRebindChartExtension or onBeforeRebindTableExtension to handle values that come from the custom filter fields, then these values are refreshed when the table or chart area is refreshed. This ensures that custom filters are synchronized when the filter mode changes.
- When you choose Clear, ALP triggers onClearFilterExtension, which clears all filter dimensions. This means that you need to define the logic to handle the clear event for custom filters in the application controller extension.
```

**STEP**: 6 — Customize visual filters via onBeforeRebindVisualFilterExtension

**DESCRIPTION**: Use onBeforeRebindVisualFilterExtension to:
- modify visual filter filters/parameters,
- add custom queryParameters for the visual filter call,
- influence sorting,
- access incoming navigation context via this.extensionAPI.getNavigationContext().

Include date/time formatting rules when manipulating date values in SelectionVariant.

**LANGUAGE**: JavaScript

**CODE**:
```JavaScript
onBeforeRebindVisualFilterExtension: function(sEntityType, sDimension, sMeasure, oContext){     // oContext has filters, queryParameters, sorters, entityParameters applicable for this specific visual filter 
    'use strict';
    var oNavigationContext = this.extensionAPI.getNavigationContext();                          //getting incoming navigation context through extension API                     
    if (sDimension === "CostCenter") { 
        oContext.queryParameters.Type = "Cost";                                                 //adding custom query parameter (It will be included in visual filter query as "?Type="Cost")   
         
        if (oContext.entityParameters.P_DisplayCurrency === "USD") {                            //Influencing applied parameters / filters                                         
            oContext.queryParameter.Country = "USA";         
            oContext.filters.push(new sap.ui.model.Filter("Product", "EQ", "HT-1000"));
        }
    }
}
```

**STEP**: 7 — Visual filter date/time format notes

**DESCRIPTION**: Use these exact formats when setting date/datetime values in SelectionVariant or query parameters to ensure correct parsing by back-end and runtime:

**LANGUAGE**: Text

**CODE**:
```Text
- Date-only format: YYYY-MM-DDT00:00:00Z, e.g., 2018-10-15T00:00:00Z.
- SelectionVariant date/time formats:
  - UTC with milliseconds: YYYY-MM-DDT00:00:00.000Z (e.g., 2018-09-03T12:46:00.000Z)
  - Local with offset: YYYY-MM-DDTHH:MM:SS.fff-HH:MM (e.g., 2018-09-03T12:46:12:123-7:00)
```

**STEP**: 8 — Modify Filterable KPI parameters via onBeforeRebindFilterableKPIExtension

**DESCRIPTION**: Implement onBeforeRebindFilterableKPIExtension to change or add filters/parameters for Filterable KPIs. You can inspect sEntityType and sKPIId to target specific KPI tags. Use the SelectionVariant API to add select options.

Place this code into an extension controller (sap.ui.define) used by the ALP.

**LANGUAGE**: JavaScript

**CODE**:
```JavaScript
sap.ui.define(["sap/base/Log"], function(Log) {
    onBeforeRebindFilterableKPIExtension: function(oSelectionVariant, sEntityType, sKPIId) {
        'use strict';
        // using this extension app can modify the existing filters and parameters
        // and also add/remove/modify the custom filters applied to FilterableKPIs
        if (sKPIId === "alp.tech.app::sap.suite.ui.generic.template.AnalyticalListPage.view.AnalyticalListPage::SEPMRA_C_ALP_SlsOrdItemCubeALPResults--template::KPITag::kpi::KPINetProductPriceByCategory") {
            oSelectionVariant.addSelectOption("Product", "I", "EQ", "HT-1502", null);
        }
        Log.info("onBeforeRebindFilterableKPIExtension called!");
    }
});
```

**STEP**: 9 — Related reference

**DESCRIPTION**: For more advanced ALP configurations and extensions, consult the application extension guide.

**LANGUAGE**: Text

**CODE**:
```Text
Related Information:
- Configuring Analytical List Page App Extensions (see app-specific documentation)
```
--------------------------------

**TITLE**: Creating Key Performance Indicator (KPI) Tags for Analytical List Page (ALP)

**INTRODUCTION**: Practical, code-focused guide to configure KPI tags for SAP Fiori elements Analytical List Page (ALP). Includes manifest settings (OData V2/V4), annotation examples (XML, ABAP CDS, CAP CDS) for UI.KPI, DataPoint, SelectionVariant, PresentationVariant, Chart, KPI detail/navigation, number formatting, unit of measure, and filterable KPI configuration. Use these snippets directly in annotation files, CDS sources, or manifest.json.

**TAGS**: KPI, ALP, AnalyticalListPage, manifest.json, UI.KPI, DataPoint, SelectionVariant, PresentationVariant, Chart, CDS, CAP, ODataV2, ODataV4, filterable

STEP: 1 - Configure manifest.json for SAP Fiori elements (OData V2)
DESCRIPTION: Define KPI mapping in manifest.json for ALP (OData V2). Map qualifier to UI.KPI annotation, specify model, entitySet, qualifier, and optional detailNavigation and filterable flags.
LANGUAGE: JSON
CODE:
```json
"sap.ui.generic.app":{  
   "pages":[  
      {  
         "entitySet":"SEPMRA_C_ALP_SlsOrdItemCube",
         "component":{  
            "name":"sap.suite.ui.generic.template.AnalyticalListPage",
            "list":true,
            "settings":{  
               "keyPerformanceIndicators":{  
                  "KPIRevenue":{  
                     "model":"kpi",
                     "entitySet":"SEPMRA_C_ALP_TotalSalesKPI",
                     "qualifier":"KPIQuantity",
                     "detailNavigation":"EPMProduct"
                  }
            }
      }
},
```

STEP: 2 - Configure manifest.json for SAP Fiori elements (OData V4 / FE)
DESCRIPTION: Define KPI mapping in sap.ui5 routing target options for Fiori Elements (OData V4 / FE). Map keyPerformanceIndicators with entitySet, qualifier, and optional detailNavigation.
LANGUAGE: JSON
CODE:
```json
"sap.ui5": {
    "routing": {
        "targets": {
            "BusinessPartnersALP": {
                "type": "Component",
                "id": "BusinessPartnersList",
                "name": "sap.fe.templates.ListReport",
                "options": {
                    "settings": {
                        "keyPerformanceIndicators": {
                            "KPIRevenue": {
                                "entitySet": "BusinessPartners",
                                "qualifier": "KPIQuantity"
                            },
                            "KPIVolume": {
                                "entitySet": "BusinessPartners",
                                "qualifier": "Volume",
                                "detailNavigation": "PartnerSales"
                            }
                        }
                    }
                }
            }
        }
    }
}
```

STEP: 3 - UI.KPI annotation (XML) with qualifier KPIQuantity
DESCRIPTION: XML annotation for UI.KPI mapping DataPoint, SelectionVariant and Detail. Required fields: DataPoint path, SelectionVariant path, ID string, and Detail specifying semantic object, action, and default presentation variant.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.KPI" Qualifier="KPIQuantity">
   <Record>
      <PropertyValue Property="DataPoint" Path="@UI.DataPoint#DPForQuantity" />
      <PropertyValue Property="SelectionVariant" Path="@UI.SelectionVariant#SVForQuantity" />
      <PropertyValue Property="ID" String="ActualCostByGLAccountNameKPI" />
      <PropertyValue Property="Detail">
         <Record Type="UI.KPIDetailType">
            <PropertyValue Property="SemanticObject" String="EPMProduct" />
            <PropertyValue Property="Action" String="manage_stta" />
            <PropertyValue Property="DefaultPresentationVariant" Path="@UI.PresentationVariant#PVForQuantity" />
         </Record>
      </PropertyValue>
   </Record>
</Annotation>
```

STEP: 4 - UI.KPI annotation (ABAP CDS)
DESCRIPTION: ABAP CDS inline KPI annotation example mapping selection variant qualifier, ID, datapoint, criticality, detail and qualifier. Use in CDS view definitions.
LANGUAGE: ABAP CDS
CODE:
```abap
@UI.KPI: [
  {
    selectionVariantQualifier: 'SVForQuantity',
    id: 'ActualCostByGLAccountNameKPI',
    dataPoint.title: 'Define datapoint inline',
    datapoint.minimumValue: 2,
    detail: {
      semanticObject: 'EPMProduct',
      semanticObjectAction: 'manage_stta',
      defaultPresentationVariantQualifier: 'PVForQuantity'
    },
    qualifier: 'KPIQuantity'
  }
]
DPForQuantity;
```

STEP: 5 - UI.KPI annotation (CAP CDS)
DESCRIPTION: CAP CDS representation for UI.KPI using qualifier and references to DataPoint, SelectionVariant and PresentationVariant. Use in .cds files when annotating entities.
LANGUAGE: CDS
CODE:
```cds
UI.KPI #KPIQuantity : {
    DataPoint : ![@UI.DataPoint#DPForQuantity],
    SelectionVariant : ![@UI.SelectionVariant#SVForQuantity],
    ID : 'ActualCostByGLAccountNameKPI',
    Detail : {
        $Type : 'UI.KPIDetailType',
        SemanticObject : 'EPMProduct',
        Action : 'manage_stta',
        DefaultPresentationVariant : ![@UI.PresentationVariant#PVForQuantity]
    }
},
```

STEP: 6 - KPIDetailType (XML)
DESCRIPTION: Define KPI detail navigation metadata. SemanticObject and Action enable launching target app. DefaultPresentationVariant links to visualization.
LANGUAGE: XML
CODE:
```xml
<PropertyValue Property="Detail">
   <Record Type="UI.KPIDetailType">
      <PropertyValue Property="SemanticObject" String="EPMProduct" />
      <PropertyValue Property="Action" String="manage_stta" />
      <PropertyValue Property="DefaultPresentationVariant" Path="@UI.PresentationVariant#PVForQuantity" />
   </Record>
</PropertyValue>
```

STEP: 7 - DataPoint annotation (XML) with qualifier DPForQuantity
DESCRIPTION: DataPoint defines title, description, value path and criticality. This datapoint is referenced by UI.KPI for KPI value and color logic.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="com.sap.vocabularies.UI.v1.DataPoint" Qualifier="DPForQuantity">
   <Record Type="com.sap.vocabularies.UI.v1.DataPointType">
      <PropertyValue Property="Title" String="Quantity by Customer Company Name" />
      <PropertyValue Property="Description" String="About NumberOfSalesOrders" />
      <PropertyValue Property="Value" Path="Quantity" />
      <PropertyValue Property="Criticality" EnumMember="com.sap.vocabularies.UI.v1.CriticalityType/Neutral" />
   </Record>
</Annotation>
```

STEP: 8 - SelectionVariant annotation (XML)
DESCRIPTION: Configure default filter parameters and select options used by the KPI (overrides Common.FilterDefaultValue). Provide Parameters and SelectOptions to seed KPI backend requests.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.SelectionVariant" Qualifier="SVForQuantity">
   <Record>
      <PropertyValue Property="Parameters">
         <Collection>
            <Record Type="UI.Parameter">
               <PropertyValue Property="PropertyName" PropertyPath="CompanyCurrency" />
               <PropertyValue Property="PropertyValue" String="EUR" />
            </Record>
         </Collection>
      </PropertyValue>
      <PropertyValue Property="SelectOptions">
         <Collection>
            <Record Type="UI.SelectOptionType">
               <PropertyValue Property="PropertyName" PropertyPath="MainProductCategory" />
               <PropertyValue Property="Ranges">
                  <Collection>
                     <Record Type="UI.SelectionRangeType">
                        <PropertyValue EnumMember="UI.SelectionRangeSignType/I" Property="Sign" />
                        <PropertyValue EnumMember="UI.SelectionRangeOptionType/EQ" Property="Option" />
                        <PropertyValue Property="Low" String="Computer Systems" />
                     </Record>
                  </Collection>
               </PropertyValue>
            </Record>
         </Collection>
      </PropertyValue>
   </Record>
</Annotation>
```

STEP: 9 - SelectionVariant annotation (ABAP CDS)
DESCRIPTION: CDS-style selectionVariant qualifier for use in ABAP CDS sources when defining KPI selection defaults.
LANGUAGE: ABAP CDS
CODE:
```abap
@UI.selectionVariant: [
  {
    qualifier: 'SVForQuantity',
    parameters: [{name: 'PropertyName', value: 'CompanyCurrency' },{ name: 'PropertyValue', value: 'EUR'}]
  }
]
```

STEP: 10 - SelectionVariant annotation (CAP CDS)
DESCRIPTION: CAP CDS equivalent of SelectionVariant with Parameters and SelectOptions arrays. Use in CAP .cds annotations.
LANGUAGE: CDS
CODE:
```cds
UI.SelectionVariant #SVForQuantity : {
    Parameters : [
        {
            $Type : 'UI.Parameter',
            PropertyName : CompanyCurrency,
            PropertyValue : 'EUR'
        },
    ],
    SelectOptions : [
        {
            $Type : 'UI.SelectOptionType',
            PropertyName : MainProductCategory,
            Ranges : [
                {
                    $Type : 'UI.SelectionRangeType',
                    Sign : #I,
                    Option : #EQ,
                    Low : 'Computer Systems'
                }
            ]
        }
    ]
}
```

STEP: 11 - PresentationVariant annotation (XML) with qualifier PVForQuantity
DESCRIPTION: PresentationVariant defines SortOrder and Visualizations. The first visualization renders the KPI value. Link PresentationVariant qualifier to UI.KPI Detail.DefaultPresentationVariant.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="com.sap.vocabularies.UI.v1.PresentationVariant" Qualifier="PVForQuantity">
   <Record>
      <PropertyValue Property="SortOrder">
         <Collection>
            <Record Type="Common.SortOrderType">
               <PropertyValue Property="Property" PropertyPath="Quantity" />
               <PropertyValue Property="Descending" Bool="true" />
            </Record>
         </Collection>
      </PropertyValue>
      <PropertyValue Property="Visualizations">
         <Collection>
            <AnnotationPath>@com.sap.vocabularies.UI.v1.Chart#QuantityChart</AnnotationPath>
         </Collection>
      </PropertyValue>
   </Record>
</Annotation>
```

STEP: 12 - PresentationVariant annotation (ABAP CDS)
DESCRIPTION: ABAP CDS PresentationVariant with SortOrder and Visualizations qualifier for CDS views.
LANGUAGE: ABAP CDS
CODE:
```abap
@UI.PresentationVariant: [
  {
    sortOrder: [
      {
        by: 'QUANTITY',
        direction: #DESC
      }
    ],
    visualizations: [
      {
        type: #AS_CHART,
        qualifier: 'QuantityChart'
      }
    ],
    qualifier: 'PVForQuantity'
  }
]
annotate view VIEWNAME with {

}
```

STEP: 13 - PresentationVariant annotation (CAP CDS)
DESCRIPTION: CAP CDS PresentationVariant with SortOrder and Visualizations linking to UI.Chart qualifier.
LANGUAGE: CDS
CODE:
```cds
UI.PresentationVariant #PVForQuantity : {
    SortOrder : [
        {
            $Type : 'Common.SortOrderType',
            Property : Quantity,
            Descending : true
        },
    ],
    Visualizations : [
        '@UI.Chart#QuantityChart'
    ]
}
```

STEP: 14 - Chart annotation (XML) with qualifier QuantityChart
DESCRIPTION: Define chart visualization for KPI presentation. Include MeasureAttributes, DimensionAttributes, ChartType and Description. First visualization entry in PresentationVariant is used by KPI rendering.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="com.sap.vocabularies.UI.v1.Chart" Qualifier="QuantityChart">
   <Record>
      <PropertyValue Property="Title" String="NumberOfSalesOrders" />
      <PropertyValue Property="MeasureAttributes">
         <Collection>
            <Record Type="com.sap.vocabularies.UI.v1.ChartMeasureAttributeType">
               <PropertyValue Property="Measure" PropertyPath="Quantity" />
               <PropertyValue Property="Role" EnumMember="com.sap.vocabularies.UI.v1.ChartMeasureRoleType/Axis1" />
            </Record>
         </Collection>
      </PropertyValue>
      <PropertyValue Property="DimensionAttributes">
         <Collection>
            <Record Type="com.sap.vocabularies.UI.v1.ChartDimensionAttributeType">
               <PropertyValue Property="Dimension" PropertyPath="SoldToPartyCompanyName" />
               <PropertyValue Property="Role" EnumMember="com.sap.vocabularies.UI.v1.ChartDimensionRoleType/Category" />
            </Record>
         </Collection>
      </PropertyValue>
      <PropertyValue Property="ChartType" EnumMember="UI.ChartType/Bar" />
      <PropertyValue Property="Description" String="NumberOfSalesOrders by Customer Company Name" />
   </Record>
</Annotation>
```

STEP: 15 - Chart annotation (ABAP CDS)
DESCRIPTION: ABAP CDS chart annotation mapping measure/dimension/ chartType with qualifier for CDS views.
LANGUAGE: ABAP CDS
CODE:
```abap
@UI.Chart: [
  {
    title: 'NumberOfSalesOrders',
    measureAttributes: [
      {
        measure: 'Quantity',
        role: #AXIS_1
      }
    ],
    dimensionAttributes: [
      {
        dimension: 'SoldToPartyCompanyName',
        role: #CATEGORY
      }
    ],
    chartType: #BAR,
    description: 'NumberOfSalesOrders by Customer Company Name',
    qualifier: 'QuantityChart'
  }
]
annotate view VIEWNAME with {

}
```

STEP: 16 - Chart annotation (CAP CDS)
DESCRIPTION: CAP CDS chart definition referencing measure/dimension and chart type. Use in CAP .cds.
LANGUAGE: CDS
CODE:
```cds
UI.Chart #QuantityChart : {
    Title : 'NumberOfSalesOrders',
    MeasureAttributes : [
        {
            $Type : 'UI.ChartMeasureAttributeType',
            Measure : Quantity,
            Role : #Axis1
        },
    ],
    DimensionAttributes : [
        {
            $Type : 'UI.ChartDimensionAttributeType',
            Dimension : SoldToPartyCompanyName,
            Role : #Category
        },
    ],
    ChartType : #Bar,
    Description : 'NumberOfSalesOrders by Customer Company Name'
}
```

STEP: 17 - KPI Title Abbreviation Rules (plaintext)
DESCRIPTION: Rules used to abbreviate KPI Title displayed in KPI tag. Title is taken from DataPoint.Title.
LANGUAGE: Plaintext
CODE:
```text
If KPI name is:
- One word: abbreviation = first three letters. Example: TargetMargin -> TAR
- Two words: abbreviation = first letter of each word. Example: Actual Cost -> AC
- Three or more words: abbreviation = first letter of first three words. Example: Actual Margin Relative -> AMR
```

STEP: 18 - KPI Value and Color: DataPoint properties and criticality (plaintext)
DESCRIPTION: Actionable rules to determine KPI color and value rendering. The first visualization in PresentationVariant renders KPI value and color. Use DataPoint.Value and DataPoint.ValueFormat for percent and number formatting. Use CriticalityCalculation and Criticality to set thresholds.
LANGUAGE: Plaintext
CODE:
```text
- KPI value and color rendered from first DataPoint visualization in PresentationVariant.
- Percent-based KPIs display '%' with value (use ValueFormat).
- Define thresholds using DataPoint properties:
  - CriticalityCalculation: static thresholds or path-based values.
  - Criticality: server-side complex logic (overrides CriticalityCalculation if both present).
- ImprovementDirection (Maximizing / Minimizing / Range/Target) determines color logic:
  - Use appropriate threshold configuration for Target, Maximizing, or Minimizing measures.
- If thresholds are missing/insufficient, ALP chooses closest color match.
- KPI ID is passed as EvaluationId to target app when navigating (KPI Detail must include SemanticObject and Action).
```

STEP: 19 - Number formatting and NumberOfFractionalDigits (XML)
DESCRIPTION: Override OData metadata NumberOfFractionalDigits using DataPoint.ValueFormat.NumberOfFractionalDigits. Up to 2 decimals are shown by default; higher values add to 2.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="com.sap.vocabularies.UI.v1.DataPoint" Qualifier="Price">
    <Record Type="com.sap.vocabularies.UI.v1.DataPointType">
        <PropertyValue Property="Value" Path="Price"/>
        <PropertyValue Property="ValueFormat">
            <Record Type="com.sap.vocabularies.UI.v1.NumberFormat">
                <PropertyValue Property="NumberOfFractionalDigits" Int="1"/>
            </Record>
        </PropertyValue>
    </Record>
</Annotation>
```

STEP: 20 - Number formatting (ABAP CDS)
DESCRIPTION: CDS annotation example overriding number of fractional digits for price field.
LANGUAGE: ABAP CDS
CODE:
```abap
@UI.dataPoint: { 
   valueFormat.numberOfFractionalDigits: 1  
}
price;
```

STEP: 21 - Number formatting (CAP CDS)
DESCRIPTION: CAP CDS DataPoint with ValueFormat.NumberOfFractionalDigits set to control fraction digits.
LANGUAGE: CDS
CODE:
```cds
UI.DataPoint #Price : {
    $Type : 'UI.DataPointType',
    Value : Price,
    ValueFormat : {
        $Type : 'UI.NumberFormat',
        NumberOfFractionalDigits : 1
    }
}
```

STEP: 22 - Units of Measure (XML) - display KPI with currency or unit
DESCRIPTION: Attach Org.OData.Measures.V1.ISOCurrency or Org.OData.Measures.V1.Unit to KPI property to show unit/currency. Use Path to use entity property or String to hardcode.
LANGUAGE: XML
CODE:
```xml
<Annotations Target="CZ_PROJECTKPIS_CDS.CZ_PROJECTKPISType/ActualCost">
        <Annotation Term="Org.OData.Measures.V1.ISOCurrency" Path="CompanyCodeCurrency"/>
</Annotations>
<Annotations Target="CZ_PROJECTKPIS_CDS.CZ_PROJECTKPISType/TargetMargin">
        <Annotation Term="Org.OData.Measures.V1.ISOCurrency" String="EUR"/> 
</Annotations>
<Annotations Target="CZ_PROJECTKPIS_CDS.CZ_PROJECTKPISType/ActualMarginRelative">
        <Annotation Term="Org.OData.Measures.V1.Unit" String="%"/>
</Annotations>
<Annotations Target="CZ_PROJECTKPIS_CDS.CZ_PROJECTKPISType/NetWeight">
        <Annotation Term="Org.OData.Measures.V1.Unit" Path="WeightUnit"/>
</Annotations>
```

STEP: 23 - Units of Measure (CAP CDS)
DESCRIPTION: CAP CDS example annotating entity type with ISOCurrency measure mapping.
LANGUAGE: CDS
CODE:
```cds
annotate CZ_PROJECTKPIS_CDS.CZ_PROJECTKPISType with {
  @Measures.ISOCurrency : CompanyCodeCurrency
  ActualCost
};
```

STEP: 24 - Override unit of measure (XML)
DESCRIPTION: Example to override backend unit/currency mapping and force a specific unit (e.g., '%').
LANGUAGE: XML
CODE:
```xml
<Annotations Target="CZ_PROJECTKPIS_CDS.CZ_PROJECTKPISType/ActualCost">
     <Annotation Term="Org.OData.Measures.V1.Unit" String="%"/>
</Annotations>
```

STEP: 25 - Configure filterable KPIs (OData V2 manifest)
DESCRIPTION: Enable filterable KPIs by setting "filterable": true in manifest.json keyPerformanceIndicators entry. Filterable KPIs react to filter bar changes when technical names/fields match between KPI entity set and ALP filter bar.
LANGUAGE: JSON
CODE:
```json
"sap.ui.generic.app":{  
   "pages":[  
      {  
         "entitySet":"SEPMRA_C_ALP_SlsOrdItemCube",
         "component":{  
            "name":"sap.suite.ui.generic.template.AnalyticalListPage",
            "list":true,
            "settings":{  
               "keyPerformanceIndicators":{  
                  "KPIRevenue":{  
                     "model":"kpi",
                     "entitySet":"SEPMRA_C_ALP_TotalSalesKPI",
                     "qualifier":"KPIRevenue",
                     "filterable":true,
                     "detailNavigation":"OverviewPage"
                  }
            }
      }
},
```

STEP: 26 - Filterable KPIs behavior and semantic coloring (plaintext)
DESCRIPTION: Operational notes and restrictions for filterable KPIs and semantic coloring.
LANGUAGE: Plaintext
CODE:
```text
- Filterable KPIs are only available for SAP Fiori elements OData V2.
- If SelectionVariant default values overlap with filter bar fields:
  - filter bar values override SelectionVariant defaults.
  - otherwise SelectionVariant defaults are applied in addition.
- ALP ignores UI.Hidden fields on filter selection for filterable KPIs if KPI entity set marks the filter field as UI.Hidden.
- If showGoButtonOnFilterBar is true, filterable KPIs are hidden until Go is clicked.
- Semantic coloring requires path-based CriticalityCalculation values (only path-based supported for filterable KPIs).
- For KPI navigation, define SemanticObject, Action and KPI ID in UI.KPI; KPI ID is passed as EvaluationId to target application.
```

STEP: 27 - Chart type restrictions for OData V4 (plaintext)
DESCRIPTION: Supported chart types and limited PresentationVariant parameters considered by ALP when using OData V4.
LANGUAGE: Plaintext
CODE:
```text
For OData V4 ALP:
- Supported chart types: line, column, bar, stacked bar, stacked column, vertical_bullet, scatter, combination, donut, bubble.
- PresentationVariant: only SortOrder and MaxItems parameters are considered by ALP.
```

STEP: 28 - References and related files
DESCRIPTION: Use these internal docs for additional ALP title area and variant configuration.
LANGUAGE: Plaintext
CODE:
```text
Related: 
- Configuring the Title Area: configuring-the-title-area-ebdb5da.md
- Managing Variants: managing-variants-8ce658e.md
```
--------------------------------

**TITLE**: Creating Key Performance Indicators (KPI) in SAP Fiori elements (OData V4, manifest-based)

**INTRODUCTION**: This guide shows how to add manifest-based KPI tags in SAP Fiori elements for OData V4. Use the manifest.json keyPerformanceIndicators section to register KPI fragments and create an XML fragment using the KPITag building block (sap.fe.macros.KPITag). If needed, wire a press handler via an extension controller. Use this for KPI tags that do not require an analytical service.

**TAGS**: fiori-elements, OData V4, KPI, manifest.json, KPITag, sap.fe.macros, UI5, fragment, extension

**STEP**: 1 — Register KPI fragments in manifest.json

**DESCRIPTION**: Add a keyPerformanceIndicators section under targets -> <yourTarget> -> options -> settings in manifest.json. Each KPI entry name (e.g., "myKPITag") maps to a fragment template module name. The template value must be the UI5 module name for the fragment that contains your KPI definition (e.g., sap.fe.core.fpmExplorer.customKPIContent.CustomKPITag maps to file sap/fe/core/fpmExplorer/customKPIContent/CustomKPITag.fragment.xml in the project).

**LANGUAGE**: JSON

**CODE**:
```json
{
  "targets": {
    "mainPage": {
      "type": "Component",
      "id": "Default",
      "name": "sap.fe.templates.ListReport",
      "options": {
        "settings": {
          "contextPath": "/RootEntity",
          "variantManagement": "None",
          "initialLoad": true,
          "keyPerformanceIndicators": {
            "myKPITag": {
              "template": "sap.fe.core.fpmExplorer.customKPIContent.CustomKPITag"
            },
            "myKPIWithPress": {
              "template": "sap.fe.core.fpmExplorer.customKPIContent.CustomKPITagWithPress"
            }
          }
        }
      }
    }
  }
}
```

**STEP**: 2 — Create the KPI XML fragment using sap.fe.macros.KPITag

**DESCRIPTION**: Implement the fragment file whose module name matches the template in manifest.json. Use the KPITag macro to match the standard KPI design (number, unit, status, showIcon, press). Example fragment module name sap.fe.core.fpmExplorer.customKPIContent.CustomKPITag corresponds to file path sap/fe/core/fpmExplorer/customKPIContent/CustomKPITag.fragment.xml.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition 
  xmlns="sap.m" 
  xmlns:core="sap.ui.core" 
  xmlns:macros="sap.fe.macros">
  
  <macros:KPITag
    number="0"
    unit="Days"
    status="Error"
    showIcon="true"
    press=".extension.sap.fe.core.fpmExplorer.customKPIContent.LRExtend.onKPIPressed"
  />
  
</core:FragmentDefinition>
```

**STEP**: 3 — Implement the extension controller handler (optional, if press is used)

**DESCRIPTION**: If the KPI fragment defines a press event that points to an extension controller method (see press=".extension.<module>.<ControllerName>.<method>"), implement the extension controller at the corresponding module path. Example module sap.fe.core.fpmExplorer.customKPIContent.LRExtend maps to file sap/fe/core/fpmExplorer/customKPIContent/LRExtend.controller.js. The method receives the UI5 event and can navigate or open a dialog.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
sap.ui.define([
  "sap/ui/core/mvc/Controller"
], function (Controller) {
  "use strict";

  return Controller.extend("sap.fe.core.fpmExplorer.customKPIContent.LRExtend", {
    onKPIPressed: function (oEvent) {
      // oEvent contains the press event from the KPITag
      // Implement navigation, dialog, or custom logic here
      var oSource = oEvent.getSource();
      // Example: simple log
      /* eslint-disable no-console */
      console.log("KPI pressed:", oSource);
      /* eslint-enable no-console */
    }
  });
});
```

**STEP**: 4 — Notes, properties and references

**DESCRIPTION**: Use properties on KPITag such as number, unit, status, showIcon, and press. You can reuse any fragment content, but using sap.fe.macros.KPITag keeps UI consistent with analytical-service KPIs. For API and live examples see the KPITag documentation: https://ui5.sap.com/#/api/sap.fe.macros.KPITag and the sample floorplan page: https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/topic/floorplanListReport/customKPI.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "notes": [
    "Template module name -> fragment file path mapping: replace dots with slashes and append .fragment.xml",
    "Example: sap.fe.core.fpmExplorer.customKPIContent.CustomKPITag -> sap/fe/core/fpmExplorer/customKPIContent/CustomKPITag.fragment.xml",
    "press attribute can reference extension controllers using the .extension.<module>.<Controller>.<method> syntax"
  ]
}
```
--------------------------------

**TITLE**: Custom State Handling for Extended SAP Fiori Elements Apps (OData V2 & V4)

**INTRODUCTION**: Action-oriented guide for implementing custom app-state handling in SAP Fiori Elements (OData V2 and OData V4). Includes required extension hooks, lifecycle definitions, reuse-component signatures, ViewState controller-extension examples, manifest registration, and how to trigger app-state updates from custom controls.

**TAGS**: fiori-elements-framework, odata-v2, odata-v4, viewstate, extensionapi, sapui5, controller-extension, object-page, app-state

**STEP**: 1 — Call ExtensionAPI.onCustomStateChange when custom UI state changes (OData V2)

**DESCRIPTION**: When your custom UI element changes a persistable state, call the Object Page ExtensionAPI method onCustomStateChange() so the framework knows to collect and persist state. This method has no parameters.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Example: Call when custom control changes its persistable state
onCustomControlChange: function() {
    // notify framework that custom state changed and should be collected
    this.extensionAPI.onCustomStateChange();
}
```

**STEP**: 2 — Implement provideCustomStateExtension(oState) to supply state (OData V2)

**DESCRIPTION**: Override provideCustomStateExtension in your object page controller. The framework passes an empty oState object. Add properties whose values are objects with two required keys:
- data: any JSON-serializable object (state payload)
- lifecycle: object with boolean lifecycle flags (session, permanent, page, pagination)

Provide example structure and usage.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Example: provideCustomStateExtension override in object page controller
provideCustomStateExtension: function(oState) {
    // Add a named state "myControlState" with data and lifecycle
    oState.myControlState = {
        data: {
            selectedKey: this.byId("mySelect").getSelectedKey(),
            filter: { foo: "bar" }
        },
        lifecycle: {
            session: true,      // survives cross-app navigation during session
            permanent: false,   // persists beyond session if configured
            page: false,
            pagination: false
        }
    };
}
```

**STEP**: 3 — Implement applyCustomStateExtension(oState, bIsSameAsLast) to restore state (OData V2)

**DESCRIPTION**: Override applyCustomStateExtension in the object page controller. The oState contains properties added previously; each property value corresponds to the earlier data object (may have been serialized/deserialized). The lifecycle details are not provided here; evaluate oState and restore controls. If bIsSameAsLast is truthy, skip applying UI changes (page should already be in same state).

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Example: applyCustomStateExtension override in object page controller
applyCustomStateExtension: function(oState, bIsSameAsLast) {
    if (bIsSameAsLast) {
        // No UI changes required when revisiting the same instance
        return;
    }
    if (oState && oState.myControlState) {
        var sKey = oState.myControlState.selectedKey;
        this.byId("mySelect").setSelectedKey(sKey);
        // restore other parts of the state as needed
    }
}
```

**STEP**: 4 — Define lifecycle object semantics and example (OData V2)

**DESCRIPTION**: Each state item’s lifecycle object controls whether that piece of state is preserved across:
- session: survive cross-app navigation during same browser session (hash in URL)
- permanent: survive sessions (requires front-end persistence configuration; stored in URL hash)
- page: apply when user navigates to same page for different instance
- pagination: similar to page but only when instance changes by pagination UI

Provide an explicit example of a state entry with lifecycle flags.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "myControlState": {
    "data": {
      "scrollPosition": 120,
      "selectedKey": "A"
    },
    "lifecycle": {
      "session": true,
      "permanent": false,
      "page": false,
      "pagination": false
    }
  }
}
```

**STEP**: 5 — Reuse components: implement stGetCurrentState() and stApplyState(oState, bIsSameAsLast) signatures

**DESCRIPTION**: Reuse components cannot override controller extension methods. Implement these two methods inside the reuse component to participate in state handling:
- stGetCurrentState(): return a state object matching the { data, lifecycle } structure (no wrapper oState parameter).
- stApplyState(oState, bIsSameAsLast): apply the passed state.data to the component.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Example reuse component API methods
stGetCurrentState: function() {
    return {
        myReuseState: {
            data: {
                collapsed: this._isCollapsed,
                selectedTab: this._selectedTab
            },
            lifecycle: {
                session: true,
                permanent: false,
                page: false,
                pagination: false
            }
        }
    };
},

stApplyState: function(oState, bIsSameAsLast) {
    if (bIsSameAsLast) {
        return;
    }
    if (oState && oState.myReuseState && oState.myReuseState.collapsed !== undefined) {
        this._setCollapsed(oState.myReuseState.collapsed);
        this._selectTab(oState.myReuseState.selectedTab);
    }
}
```

**STEP**: 6 — Implement a control state handler for ViewState (OData V4)

**DESCRIPTION**: Control state handlers must expose retrieve(oControl) and apply(oControl, oControlState, oNavParameters) functions. Use adaptControlStateHandler to attach handlers for custom controls (e.g., ObjectPageLayout).

**LANGUAGE**: JavaScript

**CODE**:
```javascript
{
  retrieve: function(oOPLayout) {
    return {
      selectedSection: oOPLayout.getSelectedSection()
    };
  },
  apply: function(oOPLayout, oControlState, oNavParameters) {
    oControlState && oOPLayout.setSelectedSection(oControlState.selectedSection);
  }
}
```

**STEP**: 7 — Override the default ViewState controller extension (OData V4)

**DESCRIPTION**: Create a ControllerExtension that overrides the viewState extension functions: adaptControlStateHandler, adaptStateControls, retrieveAdditionalStates, applyAdditionalStates, and any before/after hooks. Register the controller extension in manifest.json under sap.ui5 > extends > extensions > sap.ui.controllerExtensions.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
return ControllerExtension.extend("Custom.LRControllerExtension", {
	override: {
		viewState: {
			adaptControlStateHandler: function(oControl, aControlHandlers) {
				if (oControl.isA("sap.f.DynamicPage")) {
					aControlHandlers.push({
						retrieve: function(oControl) {
							return {
								headerExpanded: oControl.getHeaderExpanded()
							};
						},
						apply: function(oControl, mControlState) {
							if ("headerExpanded" in mControlState) {
								oControl.setHeaderExpanded(mControlState.headerExpanded);
							}
						}
					});
				}
			},
			adaptStateControls: function(aControls) {
				aControls.push(this.getView().byId("My::DynamicePage::Control"));
			},
			retrieveAdditionalStates: function(mAdditionalStates) {
				mAdditionalStates.lastVisit = new Date().toString();
			},
			applyAdditionalStates: function(mAdditionalStates) {
				if (mAdditionalStates.lastVisit) {
					MessageToast.show("Applying view state from " + mAdditionalStates.lastVisit);
				}
			}
		}
	}
});
```

**STEP**: 8 — Register the controller extension in manifest.json (OData V4)

**DESCRIPTION**: Add the controller extension registration to sap.ui5.extends.extensions.sap.ui.controllerExtensions for the template controller.

**LANGUAGE**: JSON

**CODE**:
```json
{
    "sap.ui5": {
        "extends": {
            "extensions": {
                "sap.ui.controllerExtensions": {
                    "sap.fe.templates.ListReport.ListReportController": {
                        "controllerName": "Custom.LRControllerExtension"
                    }
                }
            }
        }
    }
}
```

**STEP**: 9 — Trigger app-state update when view state changes (OData V4 & general)

**DESCRIPTION**: When custom view/control state changes, notify the framework so it will compute and persist the new app state. Use the ExtensionAPI method updateAppState (or the object-page onCustomStateChange for OData V2). Call this from your controller/extension when a persistable change occurs.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Example: trigger full app-state update via ExtensionAPI
onCustomControlChange: function() {
    // Inform framework to update the overall app state (V4)
    this.extensionAPI.updateAppState();
    
    // For OData V2 Object Page: call onCustomStateChange() instead
    // this.extensionAPI.onCustomStateChange();
}
```
--------------------------------

**TITLE**: Customizing List Card — Smart Links, Text Arrangement, Filters, Sorting

**INTRODUCTION**: This guide shows how to customize list cards in Fiori Elements using OData/UI annotations and application descriptor properties. It includes exact code examples for XML annotations, ABAP CDS, and CAP CDS. Use these snippets to add semantic object (smart links), control text arrangement in list items, add filters, and configure sorting/grouping.

**TAGS**: fiori-elements-framework, annotations, OData, CDS, CAP, ABAP, smart-links, text-arrangement, filters, sorting, list-card

**STEP**: 1 — Add Smart Links (Semantic Object)
**DESCRIPTION**: Define a semantic object for the entity set property so the list card can render smart links (navigation to semantic actions). Add these annotations to your service metadata (XML) or model (ABAP CDS / CAP CDS).
**LANGUAGE**: XML
**CODE**:
```xml
<Annotations Target="GWSAMPLE_BASIC.SalesOrder/SalesOrderID">
<Annotation Term="com.sap.vocabularies.Common.v1.SemanticObject" String="OVP" />
</Annotations>

```

**LANGUAGE**: ABAP CDS
**CODE**:
```

annotate view SALESORDER with {
  @Consumption.semanticObject: 'OVP'
  salesorderid;
}

```

**LANGUAGE**: CAP CDS
**CODE**:
```

annotate GWSAMPLE_BASIC.SalesOrder with {
  @Common.SemanticObject : 'OVP'
  SalesOrderID
};

```

**STEP**: 2 — Text Arrangement in List Area
**DESCRIPTION**: Use Text and TextArrangement annotations to control how a main value and its descriptive text are displayed in the list area. Apply annotations on the property target (XML) or in the CDS model (ABAP / CAP). The Text annotation binds a descriptive property; TextArrangement chooses display order.
**LANGUAGE**: XML
**CODE**:
```xml
<Annotations xmlns="http://docs.oasis-open.org/odata/ns/edm" Target="GWSAMPLE_BASIC.SalesOrder/CustomerID">
<Annotation Term="com.sap.vocabularies.Common.v1.Text" Path="Supplier_Name"/>
<Annotation Term="com.sap.vocabularies.UI.v1.TextArrangement" EnumMember="com.sap.vocabularies.UI.v1.TextArrangementType/TextLast" />
</Annotation> 
</Annotations>

```

**LANGUAGE**: ABAP CDS
**CODE**:
```

annotate view SALESORDER with {
  @UI.TextArrangement: #TEXT_LAST
  customerid;
}

```

**LANGUAGE**: CAP CDS
**CODE**:
```

annotate GWSAMPLE_BASIC.SalesOrder with {
  @Common.Text : Supplier_Name
  @UI.TextArrangement : #TextLast
  CustomerID
};

```

**DESCRIPTION (continued)**: Text arrangement rendering examples (when main property is ContractID and descriptive text is Customer):
- TextLast -> ContractID (Customer)
- TextFirst -> Customer (ContractID)
- TextOnly -> Customer

Use the appropriate EnumMember or CDS annotation constant (#TEXT_LAST / #TextLast) depending on platform.

**STEP**: 3 — Filtering the List Card
**DESCRIPTION**: Add filters in two ways:
- Use the annotation term com.sap.vocabularies.UI.v1.SelectionVariant in your OData/UI annotations to define filter fields and defaults.
- Pass filter parameters in the card URL (query string) to apply dynamic filters at runtime.
See the referenced configuration document for advanced filter mapping: configuring-card-filters-ecde99f.md

**LANGUAGE**: XML (annotation term reference)
**CODE**:
```xml
<!-- Use com.sap.vocabularies.UI.v1.SelectionVariant in your annotations to define filters and defaults -->
<!-- Example structure (add specific properties and values per your model): -->
<Annotations Target="YourService.EntitySet">
  <Annotation Term="com.sap.vocabularies.UI.v1.SelectionVariant">
    <!-- SelectionVariant details here -->
  </Annotation>
</Annotations>
```

**STEP**: 4 — Sorting or Grouping
**DESCRIPTION**: Configure default sort and grouping for list cards via the application descriptor (manifest.json). Use the properties:
- sortBy — property name to sort by
- sortOrder — "asc" or "desc"

For details and examples, see: configuring-sort-properties-41af842.md

**LANGUAGE**: JSON (manifest example placeholder)
**CODE**:
```json
{
  "sap.card": {
    "content": {
      "sortBy": "CreatedAt",
      "sortOrder": "desc"
    }
  }
}
```
--------------------------------

**TITLE**: Customizing Table Card (Smart Links, Text Arrangement, Filtering, Sorting/Grouping)

**INTRODUCTION**: This guide shows how to customize the table area of an SAP Fiori Elements table card. It covers adding smart links (semantic objects), configuring text arrangement for display formatting, applying filters, and controlling sorting/grouping via manifest.json. Use the provided annotation examples for XML OData metadata, ABAP CDS, and CAP CDS.

**TAGS**: fiori-elements-framework, annotations, smart-links, text-arrangement, filtering, sorting, grouping, manifest.json, ABAP, CAP, OData, XML, CDS

**STEP**: 1 — Adding Smart Links

**DESCRIPTION**: Define a semantic object for an entity set property so that the table cell is rendered as a smart link. Implement this by adding the SemanticObject annotation on the property target. Examples provided for XML OData annotations, ABAP CDS, and CAP CDS.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="GWSAMPLE_BASIC.SalesOrder/SalesOrderID">
  <Annotation Term="com.sap.vocabularies.Common.v1.SemanticObject" String="OVP" />
</Annotations>
```

**LANGUAGE**: ABAP CDS

**CODE**:
```abap
annotate view SALESORDER with {
 @Consumption.semanticObject: 'OVP'
 salesorderid;
}
```

**LANGUAGE**: CDS

**CODE**:
```cds
annotate GWSAMPLE_BASIC.SalesOrder with {
  @Common.SemanticObject : 'OVP'
  SalesOrderID
};
```

**STEP**: 2 — Text Arrangement in Table Area

**DESCRIPTION**: Use the Text and TextArrangement annotations to bind and format display text for a property in the table area. Examples below show how to bind a text property and set text arrangement (TextLast/TextFirst/TextOnly) for XML, ABAP CDS, and CAP CDS.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations xmlns="http://docs.oasis-open.org/odata/ns/edm" Target="GWSAMPLE_BASIC.SalesOrder/CustomerID">
  <Annotation Term="com.sap.vocabularies.Common.v1.Text" Path="Supplier_Name"/>
  <Annotation Term="com.sap.vocabularies.UI.v1.TextArrangement" EnumMember="com.sap.vocabularies.UI.v1.TextArrangementType/TextLast" />
</Annotations>
```

**LANGUAGE**: ABAP CDS

**CODE**:
```abap
annotate view SALESORDER with {
 @UI.TextArrangement: #TEXT_LAST
 customerid;
}
```

**LANGUAGE**: CDS

**CODE**:
```cds
annotate GWSAMPLE_BASIC.SalesOrder with {
  @Common.Text : Supplier_Name,
  @UI.TextArrangement : #TextLast,
  CustomerID
};
```

**DESCRIPTION**: Text arrangement rendering results (choose the arrangement that matches your UX requirement):
- TextLast => ContractID (Customer)
- TextFirst => Customer (ContractID)
- TextOnly => Customer

**STEP**: 3 — Filtering

**DESCRIPTION**: Add filters to the table card using:
- The com.sap.vocabularies.UI.v1.SelectionVariant annotation term in your metadata/annotations.
- Or by passing filter parameters in the card URL.

See the Configuring Card Filters reference for examples and selection variant patterns:
- configuring-card-filters-ecde99f.md

**LANGUAGE**: (conceptual)  
**CODE**:
```text
// Use com.sap.vocabularies.UI.v1.SelectionVariant in your annotations
// Or append OData filter query parameters to the card URL for runtime filtering
```

**STEP**: 4 — Sorting or Grouping

**DESCRIPTION**: Control sorting and grouping of table card entries via manifest.json using the sortBy and sortOrder properties. Define the property name for sortBy and "asc" or "desc" for sortOrder. See the Configuring Sort Properties reference for additional options.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.card": {
    "content": {
      "data": {
        "sortBy": "SalesOrderID",
        "sortOrder": "asc"
      }
    }
  }
}
```

Reference for detailed configuration:
- configuring-sort-properties-41af842.md
--------------------------------

**TITLE**: Data Points — UI.DataPoint, UI.ReferenceFacet, and NumberFormat overrides

**INTRODUCTION**: This document shows how to define and render data points in Fiori Elements object page headers using UI.DataPoint and UI.ReferenceFacet annotations. It includes XML, ABAP CDS, and CAP CDS examples, plus how to control decimal places for numerical data points using NumberFormat.NumberOfFractionalDigits.

**TAGS**: fiori-elements, annotations, UI.DataPoint, UI.ReferenceFacet, NumberFormat, CDS, CAP, ABAP, XML

**STEP**: 1 — Render DataPoint in Header via UI.ReferenceFacet

**DESCRIPTION**: Add UI.ReferenceFacet entries that point to UI.DataPoint qualifiers so the data point title and value render in the object page header. The XML example shows ReferenceFacet entries that reference a DataPoint qualifier or a navigation property with a DataPoint qualifier. The ABAP CDS and CAP CDS examples show how to declare header facets with DATAPOINT_REFERENCE / ReferenceFacet pointing to qualifiers.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.HeaderFacets">
    <Collection>
        ...
        <Record Type="UI.ReferenceFacet">
            <PropertyValue Property="Target" AnnotationPath="@UI.DataPoint#Price" />
        </Record>
        ...
        <Record Type="UI.ReferenceFacet">
            <PropertyValue Property="Target" AnnotationPath="to_StockAvailability/@UI.DataPoint#StockAvailability" />
        </Record>
        ...
    </Collection>
</Annotation>
```

**LANGUAGE**: ABAP CDS

**CODE**:
```abap
@UI.Facet: [
  {
    label: '{@i18n>@TechnicalData}',
    targetQualifier: 'TechnicalData',
    type: #FIELDGROUP_REFERENCE,
    purpose: #HEADER
  },
  {
    targetQualifier: 'Price',
    type: #DATAPOINT_REFERENCE,
    purpose: #HEADER
  },
  {
    targetQualifier: 'ProductCategory',
    type: #DATAPOINT_REFERENCE,
    purpose: #HEADER
  },
  {
    label: 'Employee',
    targetElement: 'TO_SUPPLIER',
    type: #CONTACT_REFERENCE,
    purpose: #HEADER
  }
]
product;
```

**LANGUAGE**: CAP CDS

**CODE**:
```cap
UI.HeaderFacets : [
    {
        $Type : 'UI.ReferenceFacet',
        Label : '{@i18n>@TechnicalData}',
        Target : '@UI.FieldGroup#TechnicalData'
    },
    {
        $Type : 'UI.ReferenceFacet',
        Target : '@UI.DataPoint#Price'
    },
    {
        $Type : 'UI.ReferenceFacet',
        Target : '@UI.DataPoint#ProductCategory'
    },
    {
        $Type : 'UI.ReferenceFacet',
        Label : 'Employee',
        Target : 'to_Supplier/@Communication.Contact'
    }
]
```

**STEP**: 2 — Define UI.DataPoint annotations

**DESCRIPTION**: Define UI.DataPoint annotations with qualifiers. Each UI.DataPoint must specify a qualifier and typically includes Value and Title. Optionally include Criticality or other properties. Examples below show XML annotations for Price and StockAvailability, plus ABAP CDS and CAP CDS declaration patterns.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.DataPoint" Qualifier="Price">
    <Record>
        <PropertyValue Property="Value" Path="Price" />
        <PropertyValue Property="Title" String="Price" />
    </Record>
</Annotation>

<Annotations Target="STTA_PROD_MAN.STTA_C_MP_StockAvailabilityType">
    <Annotation Term="UI.DataPoint" Qualifier="StockAvailability">
        <Record>
            <PropertyValue Property="Value" Path="StockAvailability" />
            <PropertyValue Property="Title" String="Availability" />
            <PropertyValue Property="Criticality" Path="StockAvailability" />
        </Record>
    </Annotation>
</Annotations>
```

**LANGUAGE**: ABAP CDS

**CODE**:
```abap
@UI.dataPoint: {
  title: 'Price'
}
Price;

@UI.dataPoint: {
  title: 'Category'
}
ProductCategory;
```

**LANGUAGE**: CAP CDS

**CODE**:
```cap
UI.DataPoint #Price : {
    Value : Price,
    Title : 'Price'
},
UI.DataPoint #ProductCategory : {
    Value : ProductCategory,
    Title : 'Category'
}
```

**STEP**: 3 — Numerical Data Points: control decimal places with NumberFormat.NumberOfFractionalDigits

**DESCRIPTION**: For numerical data points, override metadata scale/precision display using NumberFormat.NumberOfFractionalDigits (annotation ValueFormat -> NumberFormat). The NumberOfFractionalDigits determines decimal places shown in the UI; the following concrete examples illustrate behavior (metadata: Scale = 3, Precision = 15):

- NumberOfFractionalDigits undefined -> UI shows 3 decimal places
- NumberOfFractionalDigits = 5 -> UI shows 5 decimal places
- NumberOfFractionalDigits = 1 -> UI shows 1 decimal place
- NumberOfFractionalDigits = 20 -> UI shows 14 decimal places
- NumberOfFractionalDigits = 0 -> UI shows 3 decimal places

Define NumberOfFractionalDigits within the DataPoint's ValueFormat (NumberFormat) as shown in the examples below.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.DataPoint" Qualifier="Weight">
    <Record Type="com.sap.vocabularies.UI.v1.DataPointType">
        <PropertyValue Property="Value" Path="Weight" />
        <PropertyValue Property="Title" String="Weight" />
        <PropertyValue Property="ValueFormat">
            <Record Type="com.sap.vocabularies.UI.v1.NumberFormat">
                <PropertyValue Property="NumberOfFractionalDigits" Int="5"/>
            </Record>
        </PropertyValue>
    </Record>
</Annotation>
```

**LANGUAGE**: ABAP CDS

**CODE**:
```abap
@UI.dataPoint: {
  title: 'Weight',
  valueFormat: {
    numberOfFractionalDigits: 5
  }
}
Weight;
```

**LANGUAGE**: CAP CDS

**CODE**:
```cap
UI.DataPoint #Weight : {
    $Type : 'UI.DataPointType',
    Value : Weight,
    Title : 'Weight',
    ValueFormat : {
        $Type : 'UI.NumberFormat',
        NumberOfFractionalDigits : 5
    }
}
```
--------------------------------

**TITLE**: Defining Actions in the Chart Toolbar (UI.Chart Annotation)

**INTRODUCTION**: How to add action buttons to a chart toolbar by defining the Actions property in the UI.Chart annotation. Includes XML, ABAP CDS, and CAP CDS code samples and required properties for visibility and enablement. Use this when you want chart-level actions (triggering backend actions or navigation intents) in SAP Fiori Elements charts.

**TAGS**: UI.Chart, chart-toolbar, actions, DataFieldForAction, DataFieldForIntentBasedNavigation, ODataV2, ODataV4, CDS, CAP, ABAP

STEP: 1 — Requirements for Adding Actions to Chart Toolbar

DESCRIPTION:
- The UI.Chart Actions property must be a collection containing items of types UI.DataFieldForAction and/or UI.DataFieldForIntentBasedNavigation.
- To make a button visible in the chart toolbar, ensure the properties Determining and Inline on UI.DataFieldForAction/UI.DataFieldForIntentBasedNavigation are either false or not defined (omit them).
- UI.DataFieldForAction-based chart actions do not support passing a selected context (no context parameter is passed).
- For intent-based navigation (UI.DataFieldForIntentBasedNavigation), use RequiresContext to require a chart selection; default is true (selection required). Set RequiresContext = false to always enable the button.
- When controlling visibility via path-based settings:
  - OData V2: the path must be based on a property from the parent entity set (not from the chart entity set). See filename: using-action-control-for-context-dependent-actions-5b0b686.md for context-dependent control.
  - OData V4: when using OperationAvailable, the property must also be from the parent entity set (not the chart entity set).

LANGUAGE: Text

CODE:
```text
Notes:
- Actions collection must contain UI.DataFieldForAction and/or UI.DataFieldForIntentBasedNavigation.
- To display toolbar buttons: Determining and Inline must be false or omitted.
- DataFieldForAction does NOT pass context.
- For intent-based navigation enablement: use RequiresContext (default true).
- Path-based visibility settings must reference properties of the parent entity set (not chart entity set).
- Related docs:
  - using-action-control-for-context-dependent-actions-5b0b686.md
  - adding-actions-to-tables-b623e0b.md (Enablement of Operations for OData V4)
- Image references in original docs:
  - images/Actions_in_Smart_Chart_Toolbar_067d5d8.png
  - images/ChartActions_NavProps_9111386.png
```

STEP: 2 — XML Annotation Example (UI.Chart with Actions)

DESCRIPTION:
- Add Actions collection to the UI.Chart annotation.
- Example shows a UI.DataFieldForAction and a UI.DataFieldForIntentBasedNavigation entry.
- Ensure Determining and Inline are false or omitted. Set InvocationGrouping if needed.

LANGUAGE: XML

CODE:
```xml
<Annotation Term="UI.Chart">
    <Record>
        <PropertyValue Property="ChartType" EnumMember="UI.ChartType/Column"/>
        <PropertyValue Property="Dimensions">
            <Collection>
                <PropertyPath>product</PropertyPath>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="Measures">
            <Collection>
                <PropertyPath>sales</PropertyPath>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="Actions">
            <Collection>
                <Record Type="UI.DataFieldForAction">
                    <PropertyValue Property="Label" String="provide_label"/>
                    <PropertyValue Property="Action" String="provide_action_name"/>
                    <PropertyValue Property="InvocationGrouping" EnumMember="UI.OperationGroupingType/Isolated"/>
                </Record>
                <Record Type="UI.DataFieldForIntentBasedNavigation">
                    <PropertyValue Property="Label" String="provide_label"/>
                    <PropertyValue Property="SemanticObject" String="provide_semantic_object"/>
                    <PropertyValue Property="Action" String="provide_action_name"/>
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

STEP: 3 — ABAP CDS Annotation Example

DESCRIPTION:
- Annotate a CDS view with UI.Chart and Actions (UI.DataFieldForAction and UI.DataFieldForIntentBasedNavigation).
- The ABAP CDS sample shows the dataAction with a PUSHDOWN qualifier and invocationGrouping mapping.

LANGUAGE: ABAP

CODE:
```abap
@UI.Chart: [
  {
    chartType: #COLUMN,
    dimensions: [
      'PRODUCT'
    ],
    measures: [
      'SALES'
    ],
    actions: [
      {
        label: 'provide_label',
        dataAction: 'PUSHDOWN:provide_action_name',
        invocationGrouping: #ISOLATED,
        type: #FOR_ACTION
      },
      {
        label: 'provide_label',
        semanticObjectAction: 'provide_action_name',
        type: #FOR_INTENT_BASED_NAVIGATION
      }
    ]
  }
]
annotate view STTA_C_MP_PRODUCTSALESDATA with {

}
```

STEP: 4 — CAP CDS Annotation Example

DESCRIPTION:
- CAP CDS representation of UI.Chart with Actions. Use $Type to specify UI.DataFieldForAction or UI.DataFieldForIntentBasedNavigation.
- Keep InvocationGrouping/Invocation grouping and SemanticObject as required.

LANGUAGE: CDS

CODE:
```cds
UI.Chart : {
    ChartType : #Column,
    Dimensions : [
        product
    ],
    Measures : [
        sales
    ],
    Actions : [
        {
            $Type : 'UI.DataFieldForAction',
            Label : 'provide_label',
            Action : 'provide_action_name',
            InvocationGrouping : #Isolated
        },
        {
            $Type : 'UI.DataFieldForIntentBasedNavigation',
            Label : 'provide_label',
            SemanticObject : 'provide_semantic_object',
            Action : 'provide_action_name'
        }
    ]
}
```

STEP: 5 — Controlling Enablement of Actions (OData V2)

DESCRIPTION:
- For UI.DataFieldForAction-based enable/disable (context-dependent), use the approach documented in "Using Action Control for Context-Dependent Actions" (using-action-control-for-context-dependent-actions-5b0b686.md).
- For UI.DataFieldForIntentBasedNavigation, use RequiresContext:
  - RequiresContext = true (default) → user must select a chart item to enable the button.
  - RequiresContext = false → button always enabled.
- If using path-based applicable-path to control visibility, ensure the path property belongs to the parent entity set (not the chart entity set).

LANGUAGE: Text

CODE:
```text
OData V2 enablement guidance:
- DataFieldForAction: use action-control approach (see using-action-control-for-context-dependent-actions-5b0b686.md).
- DataFieldForIntentBasedNavigation: set RequiresContext to true/false.
- Path-based applicable-path must reference parent entity set property.
```

STEP: 6 — Controlling Enablement of Actions (OData V4)

DESCRIPTION:
- Use the same enablement strategy as Tables (see Adding Actions to Tables => Enablement of Operations in adding-actions-to-tables-b623e0b.md).
- Use OperationAvailable path-based setting to control visibility; the referenced property must be from the parent entity set (not the chart entity set).

LANGUAGE: Text

CODE:
```text
OData V4 enablement guidance:
- Use enablement logic from "Adding Actions to Tables" (Enablement of Operations).
- OperationAvailable path must reference a property from the parent entity set.
```
--------------------------------

**TITLE**: Defining and Adapting Object Page Sections (UI.Facets)

**INTRODUCTION**: Action-oriented reference for defining, structuring, and adapting sections and subsections on SAP Fiori Object Pages using com.sap.vocabularies.UI.v1.Facets annotations (XML, ABAP CDS, CAP CDS) and related manifest.json settings. Includes patterns for reference vs collection facets, table rendering, dynamic visibility, stable IDs, and SmartForm layout configuration.

**TAGS**: fiori-elements-framework, OData V2, OData V4, annotations, UI.Facets, manifest.json, CDS, CAP, ABAP, XML

STEP: 1 — Create top-level sections and subsections using UI.Facets

DESCRIPTION: Use UI.ReferenceFacet and UI.CollectionFacet under UI.Facets to define sections (top-level) and subsections (second-level via a collection facet with nested facets). Do not create collection facets beyond second level (third level and above ignored). Avoid using a UI.CollectionFacet under UI.Facets that contains only one UI.ReferenceFacet — use UI.ReferenceFacet directly to prevent rendering issues. Note differences: in OData V2 reference facets outside second-level collection facets are ignored; in OData V4 they are considered as separate subsections.

LANGUAGE: XML

CODE:
```xml
<Annotation Term="UI.Facets">
    <Collection>
        <Record Type="UI.ReferenceFacet">
            <PropertyValue Property="Label" String="{@i18n>@GeneralInfoFacetLabel}"/>
            <PropertyValue Property="Target" AnnotationPath="@UI.FieldGroup#GeneralInformation" />
        </Record>
        <Record Type="UI.CollectionFacet">
            <PropertyValue Property="ID" String="FurtherData"/>
            <PropertyValue Property="Label" String="{@i18n>@FurtherData}"/>
            <PropertyValue Property="Facets">
                <Collection>
                    <Record Type="UI.CollectionFacet">
                    </Record>
                </Collection>
            </PropertyValue>
        </Record>
    </Collection>
</Annotation>
```

STEP: 2 — Equivalent definitions in ABAP CDS and CAP CDS

DESCRIPTION: Same section/subsection structure can be expressed in ABAP CDS or CAP CDS. For ABAP CDS use @UI.Facet; for CAP CDS use UI.Facets. Ensure IDs are unique and meaningful (camelCase, no spaces).

LANGUAGE: ABAP CDS

CODE:
```
@UI.Facet: [
  {
    label: '{@i18n>@GeneralInfoFacetLabel}',
    targetQualifier: 'GeneralInformation',
    type: #FIELDGROUP_REFERENCE,
    purpose: #STANDARD
  },
  {
    id: 'FurtherData',
    label: '{@i18n>@FurtherData}',
    type: #COLLECTION,
    purpose: #STANDARD
  },
  {
    parentId: 'FurtherData',
    purpose: #STANDARD
  }
]
product;
```

LANGUAGE: CAP CDS

CODE:
```
UI.Facets : [
    {
        $Type : 'UI.ReferenceFacet',
        Label : '{@i18n>@GeneralInfoFacetLabel}',
        Target : '@UI.FieldGroup#GeneralInformation',
    },
    {
        $Type : 'UI.CollectionFacet',
        ID : 'FurtherData',
        Label : '{@i18n>@FurtherData}',
        Facets : [
            {
                $Type : 'UI.CollectionFacet'
            }
        ]
    }
]
```

STEP: 3 — Reference facet examples and mapping to field groups/line items/charts

DESCRIPTION: Reference facets point at annotations such as UI.FieldGroup, UI.LineItem, UI.Chart, UI.Identification. When a reference facet points to a LineItem, a list/table is rendered in the section. Ensure the annotation path is correct.

LANGUAGE: XML

CODE:
```xml
<Annotation Term="UI.Facets">
  <Collection>
    <Record Type="UI.CollectionFacet">
      <PropertyValue Property="ID" String="FacetIdentifier1"/>
      <PropertyValue Property="Label" String="Section 1"/>
      <PropertyValue Property="Facets">
        <Collection>
          <Record Type="UI.ReferenceFacet">
            <PropertyValue Property="ID" String="FacetIdentifier2"/>
            <PropertyValue Property="Target" AnnotationPath=_Child/@UI.LineItem/>
          </Record>
        </Collection>
      </PropertyValue>
    </Record>

    <Record Type="UI.CollectionFacet">
      <PropertyValue Property="ID" String="FacetIdentifier2"/>
      <PropertyValue Property="Label" String="Section 2"/>
      <PropertyValue Property="Facets">
        <Collection>
          <Record Type="UI.ReferenceFacet">
            <PropertyValue Property="ID" String="FacetIdentifier2"/>
            <PropertyValue Property="Target" AnnotationPath=_Child/@UI.SelectionPresentationVariant#mySPV/>
          </Record>
        </Collection>
      </PropertyValue>
    </Record>
  </Collection>
</Annotation>
```

LANGUAGE: CAP CDS

CODE:
```
Facets                              : [
  {
    $Type : 'UI.CollectionFacet',
    ID    : 'FacetIdentifier1',
    Label : 'Section 1',
    Facets: [{
      $Type : 'UI.ReferenceFacet',
      ID    : 'FacetIdentifier2',
      Target: '_Child/@UI.LineItem'
    }]
  },
  {
    $Type : 'UI.CollectionFacet',
    ID    : 'FacetIdentifier2',
    Label : 'Section 2',
    Facets: [{
      $Type : 'UI.ReferenceFacet',
      ID    : 'FacetIdentifier2',
      Target: '_Child/@UI.SelectionPresentationVariant#mySPV'
    }]
  }
]
```

STEP: 4 — Hide or show sections dynamically using UI.Hidden

DESCRIPTION: Apply UI.Hidden on a ReferenceFacet (or other facets) to bind visibility to an entity property. Use the same pattern across XML, ABAP CDS, and CAP CDS.

LANGUAGE: XML

CODE:
```xml
<Record Type="UI.ReferenceFacet">
   <Annotation Term="UI.Hidden" Path="IsActiveEntity"/>
   <PropertyValue Property="Label" String="{@i18n>@SalesData}" />
   <PropertyValue Property="Target" AnnotationPath="to_ProductSalesData/@UI.Chart" />
</Record>
```

LANGUAGE: ABAP CDS

CODE:
```
@UI.facet: [
 {
  label: '{@i18n>@SalesData}',
  type:         #DATAPOINT_REFERENCE,
  targetElement: '_PRODUCTSALESDATA',
  purpose: #STANDARD
 }
]
product;
```

LANGUAGE: CAP CDS

CODE:
```
UI.Facets : {
    $Type : 'UI.ReferenceFacet',
    Label : '{@i18n>@SalesData}',
    Target : 'to_ProductSalesData/@UI.Chart',
    ![@UI.Hidden] : IsActiveEntity
}
```

STEP: 5 — Rendering tables in sections and enabling creation

DESCRIPTION: To render a table inside a section: reference UI.LineItem or a PresentationVariant/SelectionPresentationVariant that contains UI.LineItem as the first visualization. For inline creation or create button, ensure Org.OData.Capabilities.V1.InsertRestrictions/Insertable/Bool is true on the target entity set (server-side capability). Use SelectionPresentationVariant only if it contains a PresentationVariant with UI.LineItem first.

LANGUAGE: XML (example already shown in Step 3 above)

CODE:
```xml
        <Annotation Term="UI.Facets">
          <Collection>
            <Record Type="UI.CollectionFacet">
              <PropertyValue Property="ID" String="FacetIdentifier1"/>
              <PropertyValue Property="Label" String="Section 1"/>
              <PropertyValue Property="Facets">
                <Collection>
                  <Record Type="UI.ReferenceFacet">
                    <PropertyValue Property="ID" String="FacetIdentifier2"/>
                    <PropertyValue Property="Target" AnnotationPath=_Child/@UI.LineItem/>
                  </Record>
                </Collection>
              </PropertyValue>
            </Record>

            <Record Type="UI.CollectionFacet">
              <PropertyValue Property="ID" String="FacetIdentifier2"/>
              <PropertyValue Property="Label" String="Section 2"/>
              <PropertyValue Property="Facets">
                <Collection>
                  <Record Type="UI.ReferenceFacet">
                    <PropertyValue Property="ID" String="FacetIdentifier2"/>
                    <PropertyValue Property="Target" AnnotationPath=_Child/@UI.SelectionPresentationVariant#mySPV/>
                  </Record>
                </Collection>
              </PropertyValue>
            </Record>
          </Collection>
        </Annotation>
```

STEP: 6 — Stable IDs for Collection Facets (mandatory) and Reference Facets (optional)

DESCRIPTION: Define ID for UI.CollectionFacet to enable stable view/control IDs used for extensions, personalization, and automated testing. Use meaningful unique camelCase IDs without spaces. If no ID for a UI.ReferenceFacet is defined, the runtime derives it from the annotation path by replacing "/@" with "::". Avoid adding IDs post-delivery because stable IDs are used to build control IDs.

LANGUAGE: XML

CODE:
```xml
<Annotation Term="UI.Facets">
  <Collection>
    <Record Type="UI.CollectionFacet">
      <PropertyValue Property="ID" String="GeneralInformation"/>
    </Record>
  </Collection>
</Annotation>
```

LANGUAGE: ABAP CDS

CODE:
```
@UI.Facet: [
  {
    id: 'GeneralInformation',
    type: #COLLECTION,
    purpose: #STANDARD
  }
]
```

LANGUAGE: CAP CDS

CODE:
```
UI.Facets : [
    {
        $Type : 'UI.CollectionFacet',
        ID : 'GeneralInformation'
    }
]
```

STEP: 7 — Section layout mode: Page vs Tabs (manifest.json configuration)

DESCRIPTION: Choose section layout by setting "sectionLayout" in the component options under sap.ui.generic.app settings: "Page" (default; all sections on same page with anchor navigation) or "Tabs" (each top-level section as a separate tab). Use "Tabs" for better UX with UI.Table (grid/table).

LANGUAGE: JSON

CODE:
```json
"SalesOrderManageObjectPage":{              
    "type": "Component",                  
    "id": "SalesOrderManageObjectPage",                  
    "name": "sap.fe.templates.ObjectPage",                  
    "options":{                      
        "settings":{                          
            "contextPath": "/SalesOrderManage",                          
            "navigation":{                              
                "_Item":{                                  
                    "detail":{                                      
                        "route": "SalesOrderItemObjectPage"                                  
                    }                              
                },                              
                "SalesOrderManage":{                                  
                    "detail":{                                      
                        "route": "SalesOrderManageObjectPage",                                      
                        "parameters":{                                          
                            "key": "{_ReferencedSalesOrder/ID}"                                      
                        }                                  
                    }         
                }                          
            }, // End of navigation                          
            "sectionLayout": "Tabs"    // Default value: Page. Possible values: Page (all sections are shown on same page) and Tabs (each top-level section is shown in an own tab)
        }
    }
}
```

STEP: 8 — SmartForm column layout and responsive layout settings (manifest.json)

DESCRIPTION: Change default SmartForm column layout (six columns on XL screens) to four columns using objectPageColumns.screenSizeXL, or switch SmartForm from column layout to responsive grid using useColumnLayoutForSmartForm = false.

LANGUAGE: JSON

CODE:
```json
"sap.ui.generic.app": { 
        "settings": { 
            "objectPageColumns": { 
                "screenSizeXL": 4 
            } 
        },
```

LANGUAGE: JSON

CODE:
```json
"sap.ui.generic.app": {
                              "_version": "1.3.0",
                              "settings": {
                                             "useColumnLayoutForSmartForm": false
                              }
```

STEP: 9 — Additional behavior notes and best practices (no code)

DESCRIPTION: Keep these operational rules and tips when implementing facets and sections:

- UI.CollectionFacet at third level and beyond are ignored.
- Do not use UI.CollectionFacet under UI.Facets if it contains only one UI.ReferenceFacet; use UI.ReferenceFacet directly to avoid rendering issues.
- Do not include commas (,) in section or subsection titles — commas act as delimiters in Fiori elements.
- Icon tab bar: section title is not displayed in content area; Anchor bar: first section title hidden in content area.
- Page layout mode: if a section/subsection contains only a table or chart, the section title is hidden and control title is replaced by the section/subsection title (Tabs mode: applies to subsections only). In OData V2, special logic is not invoked if the section/subsection has multiple controls and at runtime a single visible control appears due to dynamic visibility.
- When the object page contains only one section with one table: ui.table expands to use full page height; sap.m.Table expands to show 20 rows.
- When using a chart or table as a UI.ReferenceFacet, ensure it is the only content (no peer ReferenceFacet) to avoid rendering issues (OData V4).
- For OData V2 additional hierarchy level behavior: a top-level collection facet can contain several reference facets arranged underneath.
- For large tables: consider condensed table layout and MultiSelectionPlugin configuration (see project docs).
- SmartForm: do not include layout or container controls (or views) inside GroupElement — breaks visual layout and accessibility.
- If UI.FieldGroup contains only one UI.MultiLineText property and no other controls, the TextArea label is hidden; provide a meaningful TextArea label for screen reader compatibility.
- Facet annotation label is used twice: header facet and section title.

Use these rules to ensure consistent rendering, stable IDs, and predictable behavior across OData V2 and V4 applications.
--------------------------------

**TITLE**: Defining Custom Actions for Quick View Cards and Smart Filter Bar

**INTRODUCTION**: This guide explains how to add custom actions (buttons) to quick view cards shown in stack card object streams, and how to add global actions to the Smart Filter Bar. It provides the exact controller/fragment files and manifest.json entries to register press handlers and wire UI fragments to extension controllers.

**TAGS**: fiori-elements-framework, sap.ovp, manifest.json, quick-view, custom-actions, smart-filter-bar, controller-extension, fragment

**STEP**: 1 — Create a custom controller file for quick view actions

**DESCRIPTION**: Create a JavaScript controller file in your project (example name: customConfiguration.controller.js). Define an onCustomActionPress hook that maps the press handler name (string from manifest customActions.press) to the actual handler function implemented in the controller. Implement the press handlers to perform desired actions (for example, open a URL or show a message).

**LANGUAGE**: JavaScript

**CODE**:
```javascript
sap.ui.define([], function () {
    "use strict";
    return {
        /*
        The following Hook function "onCustomActionPress" accepts only one argument name of the press handler as a string and return the press handler function defined in the custom controller.       
        */
        onCustomActionPress: function(sCustomAction) {
            if (sCustomAction === "press1") {
                return this.press1;
            } else if (sCustomAction === "press2") {
                return this.press2;
            }
        },
        /*
        The following Press Handler contains the custom actions to be performed on click of the button in quickview action footer.
        */
        press1: function(oEvent) {
            window.open("https://www.google.co.in");
        },
        press2: function(oEvent) {
            window.open("http://www.sap.com/index.html");
        }
    };
});
```

**STEP**: 2 — Register the controller extension in manifest.json

**DESCRIPTION**: In the manifest.json, add your controller extension under the "extends" -> "extensions" -> "sap.ui.controller.Extensions" section so the OVP app will use your custom controller. Use the controllerName fully-qualified module path that points to your custom controller file.

**LANGUAGE**: JSON

**CODE**:
```json
"extends": {
        "extensions": {
             "sap.ui.controller.Extensions": {
                     "sap.ovp.app.Main": {
                                 "controllerName": "my_app.ext.controller.OverViewPageExt"
                      }
              }
        }
}
```

**STEP**: 3 — Define customActions in the stack card objectStreamCardsSettings

**DESCRIPTION**: For each stack card that should show custom quick view footer actions, add the "objectStreamCardsSettings.customActions" array inside the card settings in manifest.json. Each action object must include:
- text (string shown on the button)
- press (name of press handler defined in your controller; mapped via onCustomActionPress)
- position (numeric ordering of actions in the footer)

The example below shows multiple custom actions and the "showFirstActionInFooter" option.

**LANGUAGE**: JSON

**CODE**:
```json
"card007_ProductsOutOfStock": {
  "model": "salesOrder",
  "template": "sap.ovp.cards.stack",
  "settings": {
    "itemText": "{{stackCard_itemText}}",
    "title": "Products Out of Stock",
    "subTitle": "SalesOrderSet Stack Card",
    "requireAppAuthorization": "#Action-toappnavsample",
    "entitySet": "SalesOrderSet",
    "identificationAnnotationPath": "com.sap.vocabularies.UI.v1.Identification,com.sap.vocabularies.UI.v1.Identification#item2",
    "objectStreamCardsSettings": {
      "showFirstActionInFooter": false,
      "customActions": [
        {
          "text": "text1",
          "press": "press1",
          "position": 1
        },
        {
          "text": "text2",
          "press": "press2",
          "position": 10
        },
        {
          "text": "text3",
          "press": "press1",
          "position": 3
        },
        {
          "text": "text4",
          "press": "press2",
          "position": 8
        },
        {
          "text": "text5",
          "press": "press1",
          "position": 5
        },
        {
          "text": "text6",
          "press": "press2",
          "position": 6
        }
      ]
    }
  }
},
```

**STEP**: 4 — Add global actions to the Smart Filter Bar (manifest configuration)

**DESCRIPTION**: To add global actions to the Smart Filter Bar, extend sap.ui5 in manifest.json to:
- Register a controller extension (custom controller path)
- Register view extensions that include fragment references for both filter bar control configuration and global action fragment(s)

Add the following sap.ui5 snippet inside your manifest.json. Ensure the fragmentName and controllerName match the files you will create.

**LANGUAGE**: JSON

**CODE**:
```json
"sap.ui5": {
   "_version": "1.1.0",
       "dependencies": {
         "libs": {
           "sap.ovp": {}
         }
       },
   "models": {
      "i18n": {
         "type": "sap.ui.model.resource.ResourceModel",
         "uri": "i18n/i18n.properties"
      },
      "salesOrder": {
         "dataSource": "salesOrder",
         "settings": {}
      }
       },
       "extends": {
         "extensions": {
           "sap.ui.controllerExtensions": {
             "sap.ovp.app.Main": {
               "controllerName": "sap.ovp.demo.ext.customFilter"
             }
           },
           "sap.ui.viewExtensions": {
             "sap.ovp.app.Main": {
               "SmartFilterBarControlConfigurationExtension|GlobalFilters": {
                 "className": "sap.ui.core.Fragment",
                 "fragmentName": "sap.ovp.demo.ext.customFilter",
                 "type": "XML"
               },
               "SmartFilterBarGlobalActionExtension": {
                 "className": "sap.ui.core.Fragment",
                 "fragmentName": "sap.ovp.demo.ext.customAction",
                 "type": "XML"
               }
             }

           }
         }
       }
   },
```

**STEP**: 5 — Create the fragment for the Smart Filter Bar global action

**DESCRIPTION**: Create an XML fragment (example filename: customAction.fragment.xml) that defines the UI for the global action. The press event name should match the handler implemented in the controller extension.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns="sap.m" xmlns:smartfilterbar="sap.ui.comp.smartfilterbar" xmlns:core="sap.ui.core">
 
    <Button text="Action" press="handleCustomAction" type="Transparent"></Button>
 
</core:FragmentDefinition>
```

**STEP**: 6 — Create the controller extension for the Smart Filter Bar global action

**DESCRIPTION**: Create the controller file (example name: customFilter.controller.js) that implements the event handler referenced by the fragment (handleCustomAction). Use MessageToast or other UI responses per your needs. Ensure the controller module name matches the controllerName used in manifest.json (sap.ovp.demo.ext.customFilter).

**LANGUAGE**: JavaScript

**CODE**:
```javascript
sap.ui.define("sap.ovp.demo.ext.customFilter", [
    "sap/ui/model/Filter",
    "sap/m/MessageToast"
], function (Filter, MessageToast) {
    "use strict";

    // Extension controller for OVP demo app
    return {
        /**
         * This is for Custom Global Action
         */
        handleCustomAction: function() {
            var msg = 'Custom Global Action clicked';
            MessageToast.show(msg);
        }
    };
});
```
--------------------------------

**TITLE**: Defining Custom Actions for Analytical List Page (ALP) — SAP Fiori elements (OData V2)

**INTRODUCTION**: How to declare custom actions for Analytical List Page (ALP) in the app manifest and implement their handlers in controller extensions. Applies to SAP Fiori elements for OData V2. Covers manifest entries (sap.ui.commands, controllerExtensions → sap.ui.generic.app → <EntitySet> → Actions), keyboard shortcuts, getSelectedContexts usage, and invoking back-end actions via the extensionAPI.

**TAGS**: fiori-elements-framework, analytical-list-page, ALP, manifest.json, extensionAPI, custom-actions, OData V2, sap.ui5, controllerExtensions, keyboard-shortcuts

**STEP**: 1 — Where to place definitions

**DESCRIPTION**: Add custom actions in your app's manifest.json under sap.ui5 → extends → extensions. Define:
- sap.ui.commands: keyboard shortcuts (commands mapped to actions).
- sap.ui.controllerExtensions: controller name and under sap.ui.generic.app define the EntitySet and Actions mapping.

Specify the manifest path explicitly: manifest.json → "sap.ui5" → "extends" → "extensions".

**LANGUAGE**: Text

**CODE**:
```text
Place custom actions under manifest.json:
"sap.ui5" -> "extends" -> "extensions" -> {
  "sap.ui.commands": { ... }, 
  "sap.ui.controllerExtensions": {
    "sap.suite.ui.generic.template.AnalyticalListPage.view.AnalyticalListPage": {
      "controllerName": "my_app.ext.controller.AnalyticalListPageExt",
      "sap.ui.generic.app": {
        "<EntitySet>": {
          "EntitySet": "<EntitySet>",
          "Actions": { ... }
        }
      }
    }
  }
}
```

**STEP**: 2 — Action properties (what each manifest property means)

**DESCRIPTION**: Use the following properties when declaring each Action under an EntitySet. Action names are keys under "Actions".

- <entity set>: EntitySet shown on the ALP (e.g., ZCostCenterCostQuery0020). If multiple views with different entity sets exist, define Actions only for the main entity set.
- <Action 1>, <Action 2>: Action logical names (object keys).
- id: ID used for the action button.
- text: Button text (typically i18n binding).
- press: Handler function name in your custom controller extension.
- global (required): true/false — whether action is global. Default false. If determining is set it takes precedence (renders as global).
- filter: "chart" | "table" | "global" — where the action appears.
- requiresSelection (optional, table toolbar only): true/false — whether action requires selection. Default true.
- determining (optional): true/false — display action in the footer. Default false.
- command: Name of the command mapped to a keyboard shortcut under sap.ui.commands. Note: adding command changes the oEvent parameter passed to the event handler; update handler code if it depends on oEvent.

**LANGUAGE**: Text

**CODE**:
```text
Use properties: id, text, press, global, filter, requiresSelection, determining, command
Define them under: "sap.ui5" -> "extends" -> "extensions" -> "sap.ui.controllerExtensions" -> "...AnalyticalListPage" -> "sap.ui.generic.app" -> "<EntitySet>" -> "Actions"
```

**STEP**: 3 — Sample manifest.json snippet (commands + controllerExtensions + Actions)

**DESCRIPTION**: Copy this manifest fragment into your manifest.json (under sap.ui5). It shows sap.ui.commands mapping and a set of Actions for EntitySet ZCostCenterCostQuery0020. Keep this snippet intact when inserting into your manifest.

**LANGUAGE**: JSON

**CODE**:
```json
"sap.ui5": {
    "_version": "1.1.0",
        "extends": {
        "extensions": {
            "sap.ui.commands": {
                "sap.suite.generic.template.AnalyticalListPage#sap.suite.generic.template.AnalyticalListPage::ZCostCenterCostQuery0020": {
                    "GlobalActionCommand": {
                        "shortcut": "Ctrl+B"
                    }
                }		
            },
            "sap.ui.controllerExtensions": {
                "sap.suite.ui.generic.template.AnalyticalListPage.view.AnalyticalListPage": {
                    "controllerName": "my_app.ext.controller.AnalyticalListPageExt",
                    "sap.ui.generic.app": {
                        "ZCostCenterCostQuery0020": {
                            "EntitySet": "ZCostCenterCostQuery0020",
                            "Actions": {
                                "Action A": {
                                    "id": "ActionA",
                                    "text": "{{Action A}}",
                                    "press": "onClickActionA",
                                    "global": true,
                                    "command": "GlobalActionCommand"
                                },
                                "Action B": {
                                    "id": "ActionB_requiresSelection",
                                    "text": "{{Action B}}",
                                    "press": "onClickActionB",
                                    "filter": "table",
                                    "requiresSelection":true
                                }
                                "Action C": {
                                    "id": "ActionC_requiresSelection",
                                    "text": "{{Action C}}",
                                    "press": "onClickActionC",
                                    "filter": "chart",
                                    "requiresSelection":true
                                }
                                "Action D": {
                                    "id": "ActionD",
                                    "text": "{{Action D}}",
                                    "press": "onClickActionD",
                                    "filter": "table"
                                }
                                "Action E": {
                                    "id": "ActionE",
                                    "text": "{{Action E}}",
                                    "press": "onClickActionE",
                                    "filter": "chart"
                                }
                            } //End of Custom Actions
                        } // End of entity type ZCostCenterCostQuery0020
                    }
                } // End of ALP controllerExtensions       
            } // End of controllerExternsions
        }
    },
    ...
}
```

**STEP**: 4 — Implement controller extension handlers (sample controller)

**DESCRIPTION**: Implement handler functions referenced by "press" in a controller extension. Use this sample controller as-is. Important: call this.extensionAPI.getSelectedContexts() synchronously (cache results before async dialogs). For chart toolbar buttons, pass the event ID into getSelectedContexts(oEvent.ID).

Place this controller in the path referenced by "controllerName" in manifest (example: my_app/ext/controller/AnalyticalListPageExt.js).

**LANGUAGE**: JavaScript

**CODE**:
```javascript
sap.ui.define([], function () {
    return {
        onBeforeRebindTableExtension: function (oEvent) {
            console.log('onBeforeRebindTableExtension called!');
        },
        onBeforeRebindChartExtension: function (oEvent) {
            console.log('onBeforeRebindChartExtension called!');
        },
        onClickActionA() {
            console.log('Global Action Shortcut Key triggers');
            alert('Button A shows up only in table toolbar and is clicked toolbar!');
        },
        onClickActionB() {
            // The "getSelectedContexts" should be invoked from synchronous code block.
            //
            // The results of "getSelectedContexts" is cached on "aContexts" and 
            // passed as a parameter to the callback function "onActionConfirm".
            var aContexts = this.extensionAPI.getSelectedContexts();
            sap.m.MessageBox.confirm("Would you like to perform the action", {
                title: "Confirm",
                actions: [sap.m.MessageBox.Action.OK, sap.m.MessageBox.Action.CANCEL],
                emphasizedAction: sap.m.MessageBox.Action.OK,
                onClose: this.onActionConfirm.bind(this, aContexts)
            });
        },
        onActionConfirm(aContexts, sAction) {
            if (sAction === sap.m.MessageBox.Action.OK) {
                this.extensionAPI.invokeActions("/ActionB", aContexts).then(function () {
                    ///
                });
            }
        },
        onClickActionC() {
            var contexts = this.extensionAPI.getSelectedContexts(oEvent.ID);
            alert('Button C which shows up in chart toolbar only is clicked!');
        },
        onClickActionD() {
            alert('Button D which shows up in table toolbar only is clicked!');
        },
        onClickActionE() {
            alert('Button E which shows up in chart toolbar only is clicked!');
        }
    }
})
```

**STEP**: 5 — Invoke backend actions from controller (invokeActions example)

**DESCRIPTION**: Use extensionAPI.invokeActions to call an OData action/function on the back end. Provide parameters and contexts array. Example shows calling a specific action with parameters.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
onClickActionSTTA_C_SO_SalesOrder_ND1: function(oEvent) {
  var oApi = this.extensionAPI;    
  var mParameters = {
        "SalesOrderID": "500000052"
     };
  oApi.invokeActions("STTA_SALES_ORDER_ND_SRV_01/AFF8CCF97ACESave_stta_i_so_salesorder_nd", [], mParameters);
}
```

**STEP**: 6 — Runtime notes & best practices

**DESCRIPTION**: Action-oriented runtime rules to follow when implementing and wiring custom actions:

- Use only the extensionAPI of SAP Fiori elements for integration in controller extensions.
- getSelectedContexts must be called from synchronous code to cache selection before opening async dialogs; store result (aContexts) and pass to confirm callbacks or invokeActions.
- For chart toolbar buttons, call getSelectedContexts(oEvent.ID) to get the chart-specific selection.
- Defining a "command" in manifest maps keyboard shortcut (sap.ui.commands) to the action. When adding command settings to an existing action, the oEvent parameter passed to the event handler may change; update handler code if it relies on oEvent.
- requiresSelection applies only to table toolbar actions; default is true.
- determining=true will render action in the footer; if both determining and global are set, determining takes precedence (renders as global).
- This documentation applies to SAP Fiori elements for OData V2. For OData V4 use extension points (see Adding Custom Actions Using Extension Points).

**LANGUAGE**: Text

**CODE**:
```text
Best practices:
- Call this.extensionAPI.getSelectedContexts() synchronously and cache results before async operations.
- For chart toolbar actions use getSelectedContexts(oEvent.ID).
- Update event handler code if a command mapping changes the oEvent signature.
- Place controller extension file at the path defined in manifest "controllerName".
- Use this.extensionAPI.invokeActions(actionPath, aContexts, mParameters) to call backend actions.
```
--------------------------------

**TITLE**: Defining Custom Navigation Parameters for Intent-Based Navigation (OVP / Fiori Elements)

**INTRODUCTION**: This guide shows how to define and return custom URL/navigation parameters when performing intent-based navigation from an SAPUI5/Fiori Elements application (e.g., OVP). Implement the custom parameter functions in a controller extension, register the extension in manifest.json, and reference the function in the card definition to include parameters during navigation.

**TAGS**: fiori-elements-framework, sapui5, ovp, navigation, selection-variant, manifest.json, controller-extension, custom-params

**STEP**: 1 — Implement onCustomParams and custom parameter functions in the controller extension

**DESCRIPTION**: Add an onCustomParams dispatcher in your controller extension which returns a named function that will produce the custom parameters. Implement the returned functions to either build a selectionVariant-style array of filter objects or mutate and return a navigation params object. Use the configuration properties path, operator, value1, value2, sign for selectionVariant entries.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
onCustomParams: function(sCustomParams) {
    if (sCustomParams === "getParameters") {
        return this.getParameters;
    } else if (sCustomParams === "param2") {
        return this.param2;
    }
},
```

Configuration properties for each selectionVariant entry (use exactly these names when building selectionVariant objects):
- path: Defines the property name
- operator: One of EQ, NE, LE, GE, LT, GT, BT, CP
- value1: First value for the operator
- value2: Second value for range operators (e.g., BT). Set to null if unused
- sign: "I" to include, "E" to exclude

Example functions that return selectionVariant-style filters or modify navigation params:

**LANGUAGE**: JavaScript

**CODE**:
```javascript
getParameters: function(oNavigateParams) {
    var aCustomSelectionVariant = [];
    var oCustomSelectionVariant = {
        path: "TaxTarifCode",
        operator: "EQ",
        value1: 5,
        value2: null,
        sign: "I"
    };
    aCustomSelectionVariant.push(oCustomSelectionVariant);
    return aCustomSelectionVariant;
},

param2: function(oNavigateParams) {
    oNavigateParams.TaxTarifCode = '3';
    return oNavigateParams;
}
```

Advanced example: build aSelectionVariant and remove empty filters by returning selectionVariant and ignoreEmptyString (deprecated names shown; see note below about replacements):

**LANGUAGE**: JavaScript

**CODE**:
```javascript
getParameters: function(oNavigateParams,oSelectionVariantParams) {

            // to get the select option property names, make use of this to check what values are available to modify
            var aSelectOptionNames = oSelectionVariantParams.getSelectOptionsPropertyNames();

            var oFilter1 = oSelectionVariantParams.getSelectOption("Filter1");
            var oFilter2 = oSelectionVariantParams.getSelectOption("Filter2");

             ///
                Your logic to extract values from oFilter1 and oFilter2
             ///

             /// logic to remove Filter1 and Filter2
             /// assigning empty values to Filter1 and Filter2, with ignoreEmptyString as true, this will be removed from the Selection Variant

                  var Filter1 = {
                     path: "Filter1",
                     operator: "EQ",
                     value1: "",
                     value2: null,
                     sign: "I"
                 };


                 var Filter2 = {
                     path: "Filter2",
                     operator: "EQ",
                     value1: "",
                     value2: null,
                     sign: "I"
                 };


             /// logic to remove Filter1 and Filter2

             var aCustomSelectionVariant = [];
             var oFilter3 = {
                 path: "Filter3PropertyName",
                 operator: "EQ",
                 value1: "< Value you want to include >",
                 value2: null,
                 sign: "I"
             };
             aCustomSelectionVariant.push(oFilter3);
             aCustomSelectionVariant.push(oFilter2);
             aCustomSelectionVariant.push(oFilter1);
             return {
                 selectionVariant: aCustomSelectionVariant,
                 ignoreEmptyString: true
             };
        },
```

Note: As of SAPUI5 1.54, selectionVariant/ignoreEmptyString are deprecated. Use the replacements:
- selectionVariant -> aSelectionVariant
- ignoreEmptyString -> bIgnoreEmptyString

Return shape (preferred current names):
- return { aSelectionVariant: <array-of-filter-objects>, bIgnoreEmptyString: true/false }

**STEP**: 2 — Register the controller extension in manifest.json

**DESCRIPTION**: Add a controller extension entry under "sap.ui.controllerExtensions" in manifest.json and set controllerName to your extension controller path. If a controllerExtensions block already exists, add the new extension within the same file.

**LANGUAGE**: JSON

**CODE**:
```json
"extends": {
    "extensions": {
        "sap.ui.controllerExtensions": {
            "sap.ovp.app.Main": {
                "controllerName": "my_app.ext.controller.OverViewPageExt"
            }
        }
    }
}
```

**STEP**: 3 — Reference the custom parameter function in the card definition (manifest.json)

**DESCRIPTION**: In the card configuration in manifest.json, set the settings.customParams value to the name of the function returned by onCustomParams (the key passed to onCustomParams, e.g., "getParameters" or "param2"). The framework will call onCustomParams with that name and expect the returned function to provide parameters.

**LANGUAGE**: JSON

**CODE**:
```json
"card002_ReorderSoon": {
  "model": "purchaseOrder",
  "template": "sap.ovp.cards.list",
  "settings": {
    "title": "reorder Soon",
    "subTitle": "Less than 10 in stock",
    "listType": "condensed",
    "entitySet": "PurchaseSet",
    "customParams": "<function-name>"    // Depending on the logic you define in step 1, input the function name.
    ...
    ...
```

**STEP**: 4 — Implementation notes and checklist

**DESCRIPTION**: Quick actionable checklist for implementing custom parameters:
- Implement onCustomParams in your controller extension and return function references by name.
- Use aSelectionVariant / bIgnoreEmptyString (preferred) or selectionVariant / ignoreEmptyString (deprecated) in returned object shapes.
- For selectionVariant entries, produce objects with path, operator, value1, value2, sign.
- Register the controller extension in manifest.json under sap.ui.controllerExtensions and point controllerName to your extension controller.
- In the card definition, set settings.customParams to the function name that onCustomParams recognizes.

**LANGUAGE**: Plain text

**CODE**:
```text
- Return either:
  - an array of selectionVariant objects (legacy), or
  - { aSelectionVariant: [ ... ], bIgnoreEmptyString: true } (preferred)
  - or mutate oNavigateParams and return it for simple URL param additions.

- Keep function names consistent between:
  - the string passed as customParams in the card definition,
  - the onCustomParams dispatcher checks, and
  - the actual function implemented on the controller extension.
```
--------------------------------

**TITLE**: Defining Determining Actions for Object Page Footer (Fiori Elements)

**INTRODUCTION**: Add determining action buttons to the object page footer in edit mode by annotating UI.DataFieldForAction with the Determining property. Determining actions appear in the object page footer only when Determining = true and must be hidden in display mode via a path-based UI.Hidden annotation. This document provides ready-to-use annotation examples for XML, ABAP CDS, and CAP CDS.

**TAGS**: fiori-elements-framework, object-page, determining-actions, annotations, UI.Identification, DataFieldForAction, CAP, ABAP, XML

STEP: Behavior and constraints

DESCRIPTION: 
- Determining actions are used to trigger actions directly using the page context on an object page.
- Determining actions appear in the object page footer only when in edit mode and only if the DataFieldForAction has Determining set to true.
- If Determining is absent or false, the action will appear in the header (or not in the footer).
- Footer actions must not be available in display mode — add a path-based UI.Hidden annotation to the action to hide it when the page is not in edit mode.
- Use the UI.Identification vocabulary term to define actions for the object page.

LANGUAGE: None

CODE:
```text
Notes:
- Determining actions appear in the footer only in edit mode.
- Use UI.Identification to define object page actions.
- Ensure you add a path-based value to UI.Hidden for the action so it is not available in display mode.
- Image reference (optional): images/ObjectPage_DeterminingAction_5dc52f1.jpg
```

STEP: XML Annotation example

DESCRIPTION: Use the UI.Identification annotation to define DataFieldForAction entries. Set Determining="true" on the DataFieldForAction record you want placed in the footer (edit mode). The example below shows two action records; the second has Determining set and will appear in the footer.

LANGUAGE: XML

CODE:
```xml
<Annotation Term="UI.Identification">
    <Collection>
       <Record Type="UI.DataFieldForAction">
          <PropertyValue Property="Label" String="CWP"/>
          <PropertyValue Property="Action"
             String="STTA_PROD_MAN.STTA_PROD_MAN_Entities/
             STTA_C_MP_ProductCopywithparams"/>
       </Record>
       <Record Type="UI.DataFieldForAction">
          <PropertyValue Property="Label" String="Copy"/>
          <PropertyValue Property="Action"
             String="STTA_PROD_MAN.STTA_PROD_MAN_Entities/STTA_C_MP_ProductCopy"/>
          <PropertyValue Property="Determining" Bool="true"/>
       </Record>
    </Collection>
</Annotation>
```

STEP: ABAP CDS Annotation example

DESCRIPTION: Equivalent ABAP CDS annotation using @UI.identification. The determining action is declared with determining: true so it will be rendered in the footer in edit mode.

LANGUAGE: ABAP CDS

CODE:
```
@UI.identification: [
  {
    label: 'CWP',
    dataAction: 'PUSHDOWN: STTA_C_MP_ProductCopywithparams ',
    type: #FOR_ACTION,
    position: 1
  },
  {
    label: 'Copy',
    dataAction: 'PUSHDOWN: STTA_C_MP_ProductCopy',
    type: #FOR_ACTION,
    determining: true,
    position: 2
  }
]
product;
```

STEP: CAP CDS Annotation example

DESCRIPTION: CAP CDS uses UI.Identification with UI.DataFieldForAction records. Set Determining : true on the record to place the action in the footer (edit mode).

LANGUAGE: CAP CDS

CODE:
```
UI.Identification : [
    {
        $Type : 'UI.DataFieldForAction',
        Label : 'CWP',
        Action : 'STTA_PROD_MAN.STTA_PROD_MAN_Entities/
        STTA_C_MP_ProductCopywithparams'
    },
    {
        $Type : 'UI.DataFieldForAction',
        Label : 'Copy',
        Action : 'STTA_PROD_MAN.STTA_PROD_MAN_Entities/STTA_C_MP_ProductCopy',
        Determining : true
    }
]
```

STEP: Hide footer action in display mode

DESCRIPTION: Footer actions must not be available in display mode. Add a path-based UI.Hidden annotation on the action record so the action is hidden when the page is not in edit mode. Implement the UI.Hidden annotation according to your annotation format (XML, ABAP CDS, CAP CDS) and the property/path that represents the page edit mode in your service/UI model.

LANGUAGE: Guidance

CODE:
```text
Implement UI.Hidden as a path-based annotation on the same DataFieldForAction entry:
- XML: add a PropertyValue with Property="Hidden" and Path="..." inside the Record.
- ABAP CDS: add hidden: 'Path: <YourEditModeFlag>' or equivalent in the @UI annotation.
- CAP CDS: add Hidden : { Path : '<YourEditModeFlag>' } in the UI.DataFieldForAction record.

Replace <YourEditModeFlag> with the path/property from your service that indicates edit/display mode.
```

STEP: Related information

DESCRIPTION: Refer to related documentation for additional ways to display actions on the object page and details about action placement and behavior.

LANGUAGE: None

CODE:
```text
Related doc:
- Displaying Actions on the Object Page (displaying-actions-on-the-object-page-f65e8b1.md)
```
--------------------------------

**TITLE**: Defining Determining Actions in List Reports (SAP Fiori elements, OData V2)

**INTRODUCTION**: Use UI annotation UI.LineItem to add determining action buttons to the footer of a List Report smart table in SAP Fiori elements (OData V2). Determining actions use the table context to either call backend OData operations or trigger intent-based navigation. Note: this feature is deprecated and supported only for compatibility; avoid using it for new designs.

**TAGS**: fiori-elements, odata-v2, annotations, ui.lineitem, datafieldforaction, intentbasednavigation, determining-actions, deprecated

STEP: 1 — Applicability and recommendation
DESCRIPTION: Confirm applicability and preferred usage. This feature is supported only in SAP Fiori elements for OData V2 and is deprecated. Use only for compatibility; prefer alternative UI patterns for new implementations.
LANGUAGE: Text
CODE:
```text
Note: This topic is only applicable to SAP Fiori elements for OData V2.
Recommendation: This feature is deprecated. SAP Fiori elements supports it only for compatibility reasons. Avoid using determining actions in list reports for new designs.
```

STEP: 2 — Determining action types
DESCRIPTION: There are two determining action types. Choose the appropriate complex type based on the action behavior required.
LANGUAGE: Text
CODE:
```text
- DataFieldForAction: triggers a back-end call through the OData service (Function, FunctionImport, Action, or ActionImport).
- DataFieldForIntentBasedNavigation: triggers intent-based navigation (semantic object + action).
```

STEP: 3 — Add determining actions to the List Report footer
DESCRIPTION: Add determining actions by defining UI.LineItem annotations and setting the Determining property to true on the relevant DataField record(s). Determining=true causes buttons to render in the smart table footer. If Determining is omitted or false, the action appears in the smart table toolbar.
LANGUAGE: XML
CODE:
```xml
<!-- File: Annotations (e.g., annotations.xml) -->
<Annotation Term="UI.LineItem">
   <Collection>
      <Record Type="UI.DataFieldForAction">
         <PropertyValue Property="Label" String="Copy with new Supplier"/>
         <PropertyValue Property="Action"
           String="STTA_PROD_MAN.STTA_PROD_MAN_Entities/
            STTA_C_MP_ProductCopywithparams"/>
         <PropertyValue Property="InvocationGrouping"   
            EnumMember="UI.OperationGroupingType/Isolated"/>
      </Record>
      <Record Type="UI.DataFieldForAction">
         <PropertyValue Property="Label" String="Copy"/>
         <PropertyValue Property="Action"
            String="STTA_PROD_MAN.STTA_PROD_MAN_Entities/STTA_C_MP_ProductCopy"/>
         <PropertyValue Property="Determining" Bool="true"/>
         <PropertyValue Property="InvocationGrouping"   
            EnumMember="UI.OperationGroupingType/Isolated"/>
      </Record>
      <Record Type="UI.DataFieldForIntentBasedNavigation">
         <PropertyValue Property="Label" String="Manage Products (ST)"/>
         <PropertyValue Property="SemanticObject" String="EPMProduct"/>
         <PropertyValue Property="Action" String="manage_st"/>
         <PropertyValue Property="Determining" Bool="true"/>
      </Record>
   </Collection>
</Annotation>
```

STEP: 4 — Explain sample behavior
DESCRIPTION: Interpret the example: first DataFieldForAction has no Determining property -> appears in smart table toolbar. The second DataFieldForAction and the DataFieldForIntentBasedNavigation include Determining=true -> these action buttons appear in the table footer.
LANGUAGE: Text
CODE:
```text
- Record 1 (DataFieldForAction) has no Determining -> action appears in the smart table toolbar.
- Record 2 (DataFieldForAction) has Determining="true" -> action appears in the smart table footer.
- Record 3 (DataFieldForIntentBasedNavigation) has Determining="true" -> navigation action appears in the footer.
```

STEP: 5 — Additional details and assets
DESCRIPTION: Use the UI.LineItem vocabulary term to define columns for the smart table. Reference example image for expected footer rendering (preserve path if needed).
LANGUAGE: Text
CODE:
```text
Note: The UI.LineItem vocabulary term defines the columns for the smart table.
Example image (reference): images/Determining_Action_in_List_Report_5adb885.png
```
--------------------------------

**TITLE**: Defining Filter Facets (UI.FilterFacets) for Fiori Elements

**INTRODUCTION**: Use UI.FilterFacets annotations to display filter groups in filter bars. This document shows how to add ReferenceFacet entries that point to UI.FieldGroup qualifiers and how filter fields are grouped and displayed. Includes examples for XML annotations, ABAP CDS, and CAP CDS.

**TAGS**: fiori-elements-framework, UI.FilterFacets, ReferenceFacet, FieldGroup, UI.SelectionFields, OData V2, ABAP CDS, CAP CDS, XML, annotations

STEP: Add a ReferenceFacet via XML annotation on the target entity type

DESCRIPTION: Add a UI.FilterFacets annotation to the target entity type and include a UI.ReferenceFacet that targets a UI.FieldGroup qualifier. The Target property uses AnnotationPath to reference the FieldGroup qualifier (e.g., @UI.FieldGroup#MyFilterGroup).

LANGUAGE: XML

CODE:
```xml
<Annotations Target="STTA_PROD_MAN.STTA_C_MP_SupplierType">
   <Annotation Term="UI.FilterFacets">
      <Collection>
            <Record Type="UI.ReferenceFacet">
                <PropertyValue Property="Target" AnnotationPath="@UI.FieldGroup#MyFilterGroup"/>
            </Record>
      </Collection>
   </Annotation>
</Annotations>
```

STEP: Add a ReferenceFacet via ABAP CDS annotation

DESCRIPTION: In ABAP CDS, annotate the view with @UI.Facet entries. Use type #FIELDGROUP_REFERENCE, set targetQualifier to the FieldGroup qualifier and set purpose to #FILTER.

LANGUAGE: ABAP CDS

CODE:
```abap
annotate view STTA_C_MP_SUPPLIERTYPE with {
@UI.Facet: [
  {
    targetQualifier: 'MyFilterGroup',
    type: #FIELDGROUP_REFERENCE,
    purpose: #FILTER
  }
]
Supplier; 
}
```

STEP: Add a ReferenceFacet via CAP CDS annotation

DESCRIPTION: In CAP CDS, set @UI.FilterFacets with a collection entry typed as 'UI.ReferenceFacet' and provide the Target path to the FieldGroup qualifier (example uses an association path).

LANGUAGE: CAPCDS

CODE:
```cds
@UI.FilterFacets                                    : [
    {
        $Type             : 'UI.ReferenceFacet',   
        Target            : '_SoldToParty/@UI.FieldGroup#MyFilterGroup'
    }
]
```

STEP: Default visibility and grouping behavior (applies to OData V2 only)

DESCRIPTION: By default only UI.SelectionFields and mandatory filters appear directly in the filter bar. Other filters appear in the Adapt Filters dialog and are grouped as follows. Note the restriction: this feature is only available in SAP Fiori elements for OData V2.

LANGUAGE: TEXT

CODE:
```
- Basic Group:
  - Includes all fields listed in UI.SelectionFields.
  - Also includes fields that are part of UI.FieldGroup with qualifier "_BASIC" under the UI.FilterFacets structure.

- Field Group:
  - Includes fields that are part of a UI.FieldGroup (via a FieldGroup qualifier referenced by a ReferenceFacet)
    but are NOT listed in UI.SelectionFields.

- Entity Type Name Group:
  - Fields not in UI.SelectionFields or any UI.FieldGroup are grouped under a group named <EntityTypeName>.
  - If multiple entity types are present, multiple <EntityTypeName> groups are created.
```

STEP: Define a FieldGroup via XML annotation

DESCRIPTION: Use UI.FieldGroup with a Qualifier to list DataFields (UI.DataField) and provide a Label. Reference this FieldGroup via FilterFacets ReferenceFacet Target with the qualifier.

LANGUAGE: XML

CODE:
```xml
<Annotation Term="UI.FieldGroup" Qualifier="Group_Name">
    <Record>
        <PropertyValue Property="Data">
            <Collection>
                <Record Type="UI.DataField">
                    <PropertyValue Property="Value" Path="Name"/>
                </Record>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="Label" String="Group Name"/>
    </Record>
</Annotation>
```

STEP: Define a FieldGroup via ABAP CDS annotation

DESCRIPTION: In ABAP CDS, declare a @UI.fieldGroup annotation with qualifier and label, then list the property in the view/entity. This FieldGroup can be referenced by a ReferenceFacet in UI.FilterFacets.

LANGUAGE: ABAP CDS

CODE:
```abap
@UI.fieldGroup: [{ qualifier: 'Group Name', groupLabel: 'Group Name' }]
PROPERTY_NAME;
```

STEP: Define a FieldGroup via CAP CDS annotation

DESCRIPTION: In CAP CDS, create a UI.FieldGroup with a qualifier, include Data entries of type UI.DataField that reference properties, and set the Label. Reference the qualifier from UI.FilterFacets ReferenceFacet.

LANGUAGE: CAPCDS

CODE:
```cds
UI.FieldGroup #GroupName : {
    Data : [
        {
            $Type : 'UI.DataField',
            Value : PropertyName
        }
    ],
    Label : 'Group Name'
}
```
--------------------------------

**TITLE**: Defining Line Items

**INTRODUCTION**: This guide shows how to define table line items for SAP Fiori Elements using UI.LineItem annotations. Includes exact examples for XML (OData annotations), ABAP CDS, and CAP CDS. Use these annotations to control which properties appear as table columns, their order, and importance (visibility/responsiveness).

**TAGS**: fiori-elements-framework, UI.LineItem, LineItem, annotations, CDS, CAP, ABAP, XML, OData

**STEP**: 1 — XML Annotation (OData / EDMX annotations)

**DESCRIPTION**: Add a UI.LineItem annotation to the entity or EntitySet annotations in your OData service annotations file. Each Record of Type="UI.DataField" specifies a column via PropertyValue Property="Value" Path="...". Use UI.Importance to mark important/high-priority columns.

**LANGUAGE**: XML

**CODE**:
```xml
...
<Annotation Term="UI.LineItem">
  <Collection>
    <Record Type="UI.DataField">
      <PropertyValue Property="Value" Path="Product"/>
      <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
    </Record>
    <Record Type="UI.DataField">
      <PropertyValue Property="Value" Path="ProductCategory"/>
      <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
    </Record>
    <Record Type="UI.DataField">
      <PropertyValue Property="Value" Path="Supplier"/>
      <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
    </Record>
  </Collection>
</Annotation>
```

**STEP**: 2 — ABAP CDS Annotation

**DESCRIPTION**: Annotate CDS entities or fields with @UI.lineItem to declare table columns. Specify properties: value (property name), importance (#HIGH/#MEDIUM/#LOW), type (e.g., #STANDARD), and position to set ordering. Place the annotation where appropriate (on the field or after the field declaration).

**LANGUAGE**: ABAP CDS

**CODE**:
```

@UI.lineItem: [
  {
    importance: #HIGH,
    value: 'PRODUCT',
    type: #STANDARD,
    position: 1 
  }
]
PRODUCT;

@UI.lineItem: [
  {
    importance: #HIGH,
    value: 'PRODUCTCATEGORY',
    type: #STANDARD,
    position: 2 
  }
]
PRODUCTCATEGORY;

@UI.lineItem: [
  {
    importance: #HIGH,
    value: 'SUPPLIER',
    type: #STANDARD,
    position: 3 
  }
]
SUPPLIER;
```

**STEP**: 3 — CAP CDS Annotation

**DESCRIPTION**: In CAP (Core Data Services) use the UI.LineItem annotation array on the entity to list UI.DataField entries. Use Value to reference the property and ![@UI.Importance] to set importance. This controls which properties are shown as columns and their responsiveness behavior.

**LANGUAGE**: CDS (CAP)

**CODE**:
```

UI.LineItem : [
    {
        $Type : 'UI.DataField',
        Value : Product,
        ![@UI.Importance] : #High
    },
    {
        $Type : 'UI.DataField',
        Value : ProductCategory,
        ![@UI.Importance] : #High
    },
    {
        $Type : 'UI.DataField',
        Value : Supplier,
        ![@UI.Importance] : #High
    }
]

```

**STEP**: 4 — Determining Column Names, Order, and Responsiveness

**DESCRIPTION**: Implementation notes to apply when writing or generating code:
- Column names derive from the property referenced by Value (CAP/CDS) or PropertyValue Path (XML). Use the exact property name used in the entity/model.
- Order:
  - In XML and CAP, the sequence of entries in UI.LineItem determines column order.
  - In ABAP CDS, use the position attribute to explicitly set column order.
- Visibility/responsiveness:
  - Use UI.Importance / @UI.lineItem importance settings (#High/#Medium/#Low) to influence responsive behavior and which columns collapse on smaller screens.
- Field types: set type (e.g., #STANDARD) where supported (ABAP CDS) to declare rendering expectations.

**LANGUAGE**: Plain text

**CODE**:
```text
- Column source: Value / PropertyValue Path -> property in entity
- Order control: sequence (XML/CAP) or position (ABAP CDS)
- Importance: UI.Importance or @UI.lineItem.importance -> influences responsive hiding
- Use UI.DataField records for simple property columns
```

**STEP**: 5 — Related Links

**DESCRIPTION**: References for related capabilities (actions, responsiveness) to include when extending line items or tables.

**LANGUAGE**: Markdown links / file paths

**CODE**:
```text
- Adding actions for line items: adding-actions-to-tables-b623e0b.md
- Responsiveness options in tables (example): responsiveness-options-example-69efbe7.md
```
--------------------------------

**TITLE**: Defining Multiple Chart Configurations (UI.Chart with Qualifier)

**INTRODUCTION**: Show how to define multiple chart configurations for the same dataset by creating multiple UI.Chart annotations with different qualifiers, and how to select a specific chart configuration in a Fiori Elements page (List Report or Object Page). Use cases: show different chart types or measures for different views/sections while reusing the same entity set and data source.

**TAGS**: fiori-elements-framework, UI.Chart, qualifier, annotations, OData, CDS, manifest

**STEP**: 1 — Create multiple UI.Chart annotations in OData V4 annotation XML

**DESCRIPTION**: Add multiple UI.Chart annotations on the same target entity, each with a unique Qualifier. Each Annotation Record defines Title, ChartType, Dimensions and Measures. The Qualifier differentiates chart configurations so the runtime can pick the correct chart.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- annotations.xml -->
<Annotations Target="MyService.SalesEntityType">
  <!-- Chart configuration 1: monthly column chart -->
  <Annotation Term="UI.Chart" Qualifier="byMonth">
    <Record>
      <PropertyValue Property="Title" String="Sales by Month"/>
      <PropertyValue Property="ChartType" EnumMember="UI.ChartType/Column"/>
      <PropertyValue Property="Dimensions">
        <Collection>
          <PropertyPath>Month</PropertyPath>
        </Collection>
      </PropertyValue>
      <PropertyValue Property="Measures">
        <Collection>
          <PropertyPath>TotalSales</PropertyPath>
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>

  <!-- Chart configuration 2: regional donut chart -->
  <Annotation Term="UI.Chart" Qualifier="byRegion">
    <Record>
      <PropertyValue Property="Title" String="Sales by Region"/>
      <PropertyValue Property="ChartType" EnumMember="UI.ChartType/Donut"/>
      <PropertyValue Property="Dimensions">
        <Collection>
          <PropertyPath>Region</PropertyPath>
        </Collection>
      </PropertyValue>
      <PropertyValue Property="Measures">
        <Collection>
          <PropertyPath>TotalSales</PropertyPath>
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

**STEP**: 2 — Define multiple chart qualifiers in ABAP CDS (alternative approach)

**DESCRIPTION**: In ABAP CDS views you can annotate the entity/view with multiple UI.Chart entries (as an array) where each entry uses a qualifier. This produces multiple UI.Chart annotations in the generated OData metadata.

**LANGUAGE**: CDS

**CODE**:
```abap
@AbapCatalog.sqlViewName: 'ZV_SALES'
@EndUserText.label: 'Sales View'
define view ZI_Sales as select from sepm_sales
{
  key SalesID,
  Month,
  Region,
  TotalSales,

  @UI.chart: [
    {
      qualifier: 'byMonth',
      title: 'Sales by Month',
      chartType: #Column,
      dimensions: ['Month'],
      measures: ['TotalSales']
    },
    {
      qualifier: 'byRegion',
      title: 'Sales by Region',
      chartType: #Donut,
      dimensions: ['Region'],
      measures: ['TotalSales']
    }
  ]
}
```

**STEP**: 3 — Select a qualified chart configuration in the app manifest (List Report / Object Page)

**DESCRIPTION**: Configure the Fiori Elements page to use a specific chart qualifier by setting the chartQualifier property (or the equivalent page-level setting) in the manifest. Use the same entitySet but point the page’s chart configuration to the desired qualifier to display the corresponding chart.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "Sales",
        "component": {
          "name": "sap.suite.ui.generic.template.ListReport",
          "settings": {
            "chartQualifier": "byMonth"   /* uses the UI.Chart qualifier "byMonth" */
          }
        }
      },
      {
        "entitySet": "Sales",
        "component": {
          "name": "sap.suite.ui.generic.template.ObjectPage",
          "settings": {
            "sections": {
              "OverviewSection": {
                "chartQualifier": "byRegion" /* use a different qualifier in another section */
              }
            }
          }
        }
      }
    ]
  }
}
```

**STEP**: 4 — Notes and best practices

**DESCRIPTION**: Key technical notes to follow:
- Use unique Qualifier values for each UI.Chart annotation on the same entity.
- The runtime picks a chart by matching the chartQualifier configured for the page/section to the Qualifier of a UI.Chart annotation.
- Keep chart dimensions and measures consistent with entity properties (PropertyPath values).
- You can define charts in OData annotation XML or generate them from ABAP CDS annotations—both approaches produce UI.Chart annotations with qualifiers in the service metadata.
- For live examples and detailed property names, consult the SAP Fiori documentation: Building Blocks - Chart - Usage with Qualifier (https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/buildingBlocks/chart/chartQualifier).
--------------------------------

**TITLE**: Define Multiple Table Views (SelectionVariants) for Analytical List Page (Single Table Mode)

**INTRODUCTION**: Configure multiple pre-filtered views for an Analytical List Page table using UI.SelectionVariant annotations and activate them in single table mode via manifest.json quickVariantSelection. Users can switch views through a segmented button (<=3 views) or a drop-down (>3 views). Optionally show counts per view.

**TAGS**: fiori-elements-framework, analytical-list-page, selectionvariant, manifest.json, annotations, OData V2, quickVariantSelection

**STEP**: 1 — Add SelectionVariant annotations to your annotations file

**DESCRIPTION**: Create UI.SelectionVariant records in your OData V2 annotations XML. Each SelectionVariant qualifier represents one view and must include a Text and SelectOptions specifying filter ranges. Add these records to your annotations file (e.g., annotations.xml) targeting the relevant entity type.

**LANGUAGE**: XML

**CODE**:
```xml
<?xml version="1.0" encoding="UTF-8"?>
<Annotations xmlns="http://docs.oasis-open.org/odata/ns/edm" Target="SEPMRA_ALP_SO_ANA_SRV.SEPMRA_C_ALP_SlsOrdItemCubeALPResult">
   <Annotation Term="UI.SelectionVariant" Qualifier="Expensive">
      <Record>
         <PropertyValue Property="Text" String="Expensive" />
         <PropertyValue Property="SelectOptions">
            <Collection>
               <Record Type="UI.SelectOptionType">
                  <PropertyValue Property="PropertyName" PropertyPath="Product" />
                  <PropertyValue Property="Ranges">
                     <Collection>
                        <Record Type="UI.SelectionRangeType">
                           <PropertyValue Property="Sign" EnumMember="UI.SelectionRangeSignType/I" />
                           <PropertyValue Property="Option" EnumMember="UI.SelectionRangeOptionType/EQ" />
                           <PropertyValue Property="Low" String="HT-1000" />
                        </Record>
                     </Collection>
                  </PropertyValue>
               </Record>
            </Collection>
         </PropertyValue>
      </Record>
   </Annotation>
   <Annotation Term="UI.SelectionVariant" Qualifier="Cheap">
      <Record>
         <PropertyValue Property="Text" String="Cheap" />
         <PropertyValue Property="SelectOptions">
            <Collection>
               <Record Type="UI.SelectOptionType">
                  <PropertyValue Property="PropertyName" PropertyPath="Product" />
                  <PropertyValue Property="Ranges">
                     <Collection>
                        <Record Type="UI.SelectionRangeType">
                           <PropertyValue Property="Sign" EnumMember="UI.SelectionRangeSignType/I" />
                           <PropertyValue Property="Option" EnumMember="UI.SelectionRangeOptionType/EQ" />
                           <PropertyValue Property="Low" String="HT-1050" />
                        </Record>
                     </Collection>
                  </PropertyValue>
               </Record>
            </Collection>
         </PropertyValue>
      </Record>
   </Annotation>
   <Annotation Term="UI.SelectionVariant" Qualifier="Economic">
      <Record>
         <PropertyValue Property="Text" String="Economic" />
         <PropertyValue Property="SelectOptions">
            <Collection>
               <Record Type="UI.SelectOptionType">
                  <PropertyValue Property="PropertyName" PropertyPath="Product" />
                  <PropertyValue Property="Ranges">
                     <Collection>
                        <Record Type="UI.SelectionRangeType">
                           <PropertyValue Property="Sign" EnumMember="UI.SelectionRangeSignType/I" />
                           <PropertyValue Property="Option" EnumMember="UI.SelectionRangeOptionType/EQ" />
                           <PropertyValue Property="Low" String="HT-1002" />
                        </Record>
                     </Collection>
                  </PropertyValue>
               </Record>
            </Collection>
         </PropertyValue>
      </Record>
   </Annotation>
   <Annotation Term="UI.SelectionVariant" Qualifier="Budget">
      <Record>
         <PropertyValue Property="Text" String="Budget" />
         <PropertyValue Property="SelectOptions">
            <Collection>
               <Record Type="UI.SelectOptionType">
                  <PropertyValue Property="PropertyName" PropertyPath="Product" />
                  <PropertyValue Property="Ranges">
                     <Collection>
                        <Record Type="UI.SelectionRangeType">
                           <PropertyValue Property="Sign" EnumMember="UI.SelectionRangeSignType/I" />
                           <PropertyValue Property="Option" EnumMember="UI.SelectionRangeOptionType/EQ" />
                           <PropertyValue Property="Low" String="HT-1022" />
                        </Record>
                     </Collection>
                  </PropertyValue>
               </Record>
            </Collection>
         </PropertyValue>
      </Record>
   </Annotation>
</Annotations>
```

**STEP**: 2 — Configure quickVariantSelection in manifest.json to enable multiple views

**DESCRIPTION**: In your application manifest.json under "sap.ui.generic.app" → analytical list page settings, enable quickVariantSelection to reference the SelectionVariant annotations you created. Each variant entry must include a unique key and an annotationPath that points to UI.SelectionVariant with the qualifier (#QualifierName). This activates multiple view switching in single table mode.

**LANGUAGE**: JSON

**CODE**:
```json
"quickVariantSelection":{
   "variants":{
      "0":{
         "key":"_tab1",
         "annotationPath":"com.sap.vocabularies.UI.v1.SelectionVariant#Expensive"
      },
      "1":{
         "key":"_tab2",
         "annotationPath":"com.sap.vocabularies.UI.v1.SelectionVariant#Cheap"
      },
      "2":{
         "key":"_tab3",
         "annotationPath":"com.sap.vocabularies.UI.v1.SelectionVariant#Economic"
      },
      "3":{
         "key":"_tab4",
         "annotationPath":"com.sap.vocabularies.UI.v1.SelectionVariant#Budget"
      }
   }
},
```

**STEP**: 3 — (Optional) Enable counts per view

**DESCRIPTION**: To display the number of entries for each view, set showCounts to true inside quickVariantSelection. This will render counts next to each variant in the UI (both drop-down and segmented button).

**LANGUAGE**: JSON

**CODE**:
```json
"quickVariantSelection":{
   "showCounts": true,
   "variants":{
      "0":{
         "key":"_tab1",
         "annotationPath":"com.sap.vocabularies.UI.v1.SelectionVariant#Expensive"
      },
      "1":{
         "key":"_tab2",
         "annotationPath":"com.sap.vocabularies.UI.v1.SelectionVariant#Cheap"
      },
      "2":{
         "key":"_tab3",
         "annotationPath":"com.sap.vocabularies.UI.v1.SelectionVariant#Economic"
      },
      "3":{
         "key":"_tab4",
         "annotationPath":"com.sap.vocabularies.UI.v1.SelectionVariant#Budget"
      }
   }
},
```

**STEP**: 4 — UI behavior and recommendations

**DESCRIPTION**: Rendering behavior:
- If number of defined variants <= 3, the UI displays them as a segmented button.
- If number of variants > 3, the UI displays a drop-down list.
- showCounts true displays counts in either control type.
- Ensure annotation qualifiers match exactly in manifest.json annotationPath (use #Qualifier).

**LANGUAGE**: Text

**CODE**:
```text
- Segmented button when variants count <= 3
- Drop-down when variants count > 3
- Use annotationPath: "com.sap.vocabularies.UI.v1.SelectionVariant#<Qualifier>"
- Set "showCounts": true to show counts for each variant
```

**STEP**: 5 — Reference for OData V4

**DESCRIPTION**: For OData V4 or List Report single table mode, consult the Fiori Elements documentation: Defining Multiple Views on a List Report Table - Single Table Mode.

**LANGUAGE**: Text

**CODE**:
```text
See: Defining Multiple Views on a List Report Table - Single Table Mode (defining-multiple-views-on-a-list-report-table-single-table-mode-0d390fe.md)
```
--------------------------------

**TITLE**: Defining Multiple Views on a List Report Table (Multiple Table Mode)

**INTRODUCTION**: Steps and code examples to define multiple table views (tabs) on a Fiori Elements list report using SelectionVariant / SelectionPresentationVariant annotations and (optionally) UI.Chart annotations. Covers OData V2 (sap.ui.generic.app quickVariantSelectionX) and OData V4 (sap.fe.templates ListReport views.paths) manifest configurations, chart support (actions, navigation), stable ID behavior, and controlConfiguration usage.

**TAGS**: fiori-elements, annotations, UI.Chart, SelectionVariant, SelectionPresentationVariant, manifest.json, quickVariantSelectionX, multiple-table-mode, ODataV2, ODataV4

STEP: 1 — Define a UI.Chart annotation (optional, required if you want chart views)

DESCRIPTION: Create a UI.Chart annotation with a qualifier. Use XML, ABAP CDS, or CAP CDS depending on your project. Reference this chart in a SelectionPresentationVariant/PresentationVariant to show charts as a view.

LANGUAGE: XML

CODE:
```xml
<Annotation Term="UI.Chart" Qualifier="Chart1">
    <Record Type="UI.ChartDefinitionType">
        <PropertyValue Property="Title" String="Revenue by Customer"/>
        <PropertyValue Property="Description" String="Net Revenue by Customer"/>
        <PropertyValue Property="ChartType" EnumMember="UI.ChartType/Column"/>
        <PropertyValue Property="Dimensions">
            <Collection>
                <PropertyPath>ProductCategory</PropertyPath>             
            </Collection>
        </PropertyValue>
        <PropertyValue Property="Measures">
            <Collection>
                <PropertyPath>NetAmount</PropertyPath>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

LANGUAGE: ABAP CDS

CODE:
```abap
@UI.Chart: [
  {
    title: 'Revenue by Customer',
    description: 'Net Revenue by Customer',
    chartType: #COLUMN,
    dimensions: [
      'PRODUCTCATEGORY'
    ],
    measures: [
      'NETAMOUNT'
    ],
    qualifier: 'Chart1'
  }
]
annotate view SALESORDERMANAGE with {

}
```

LANGUAGE: CAP CDS

CODE:
```cds
UI.Chart #Chart1 : {
    $Type : 'UI.ChartDefinitionType',
    Title : 'Revenue by Customer',
    Description : 'Net Revenue by Customer',
    ChartType : #Column,
    Dimensions : [
        ProductCategory
    ],
    Measures : [
        NetAmount
    ],
}
```

STEP: 2 — Reference the UI.Chart from a SelectionPresentationVariant/PresentationVariant

DESCRIPTION: Reference the chart qualifier in PresentationVariant.Visualizations or SelectionPresentationVariant so it is available as a view. Use XML, ABAP CDS, or CAP CDS.

LANGUAGE: XML

CODE:
```xml
<Annotation Term="UI.SelectionPresentationVariant" Qualifier="Chart1">
    <Record>
        <PropertyValue Property="Text" String="Chart1"/>
            <PropertyValue Property="SelectionVariant">
                <Record>
                    ....
                </Record>
            </PropertyValue>
        <PropertyValue Property="PresentationVariant">
            <Record>
                <PropertyValue Property="Visualizations">
                    <Collection>
                        <AnnotationPath>@UI.Chart#Chart1</AnnotationPath>
                    </Collection>
                </PropertyValue>
            </Record>
        </PropertyValue>
    </Record>
</Annotation>
```

LANGUAGE: ABAP CDS

CODE:
```abap
@UI.selectionPresentationVariant: [{
  text: 'Chart1',
  selectionVariantQualifier: '',
  presentationVariantQualifier: 'Default',
  qualifier: 'Chart1'
}]

@UI.presentationVariant: [
  {
    qualifier: 'Default',
    sortOrder: [{by: 'GrossAmount', direction: #ASC }],
    visualizations: [{type: #AS_CHART, qualifier: 'Chart1'}]
  }
]
annotate view SALESORDERMANAGE with {

}
```

LANGUAGE: CAP CDS

CODE:
```cds
UI.SelectionPresentationVariant #Chart1 : {
    Text : 'Chart1',
    SelectionVariant : {
        ....
    },
    PresentationVariant : {
        Visualizations : [
            '@UI.Chart#Chart1'
        ]
    }
},
```

STEP: 3 — Add SelectionVariant / SelectionPresentationVariant annotations for tabs (OData V2 & V4)

DESCRIPTION: Define SelectionVariant or SelectionPresentationVariant annotations (with qualifiers if you want named variants). These provide the filtering, text, and presentation settings per tab. Supported SelectionRangeOptionTypes: EQ, BT, LE, GE, NE, GT, LT (no wildcards). PresentationVariant supports SortOrder and Visualizations.

LANGUAGE: XML

CODE:
```xml
<!-- Example SelectionVariant 'Expensive' filtering GrossAmount > 5000 -->
<Annotations Target="STTA_SALES_ORDER_ITEM_AGGR_SRV.STTA_C_SO_ItemAggrType">
<Annotation Term="UI.SelectionVariant" Qualifier="Expensive">
    <Record>
        <PropertyValue Property="Text" String="Expensive">
        </PropertyValue>
        <PropertyValue Property="SelectOptions">
            <Collection>
                <Record Type="UI.SelectOptionType">
                    <PropertyValue Property="PropertyName" PropertyPath="GrossAmount" />
                    <PropertyValue Property="Ranges">
                        <Collection>
                            <Record Type="UI.SelectionRangeType"> 
                                 <PropertyValue Property="Sign" EnumMember="UI.SelectionRangeSignType/E"/>
                                 <PropertyValue Property="Option" EnumMember="UI.SelectionRangeOptionType/LT"/> 
                                 <PropertyValue Property="Low" String="5000"/>
                            </Record>
                        </Collection>
                    </PropertyValue>
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

LANGUAGE: XML

CODE:
```xml
<!-- Example SelectionPresentationVariant 'Cheap' with SelectionVariant and SortOrder -->
<Annotations Target="STTA_SALES_ORDER_ITEM_AGGR_SRV.STTA_C_SO_ItemAggrType">
<Annotation Term="UI.SelectionPresentationVariant" Qualifier="Cheap">
    <Record>
        <PropertyValue Property="Text" String="Cheap">
        </PropertyValue>
        <PropertyValue Property="SelectionVariant">
            <Record>
                <PropertyValue Property="Text" String="Cheap">
                </PropertyValue>
                <PropertyValue Property="SelectOptions">
                    <Collection>
                        <Record Type="UI.SelectOptionType">
                            <PropertyValue Property="PropertyName"
                                PropertyPath="GrossAmount" />
                            <PropertyValue Property="Ranges">
                                <Collection>
                                    <Record Type="UI.SelectionRangeType">
                                        <PropertyValue Property="Option"
                                            EnumMember="UI.SelectionRangeOptionType/LT" />
                                        <PropertyValue Property="Low" String="5000" />
                                    </Record>
                                </Collection>
                            </PropertyValue>
                        </Record>
                    </Collection>
                </PropertyValue>
            </Record>
        </PropertyValue>
        <PropertyValue Property="PresentationVariant">
            <Record>
                <PropertyValue Property="SortOrder">
                    <Collection>
                        <Record>
                            <PropertyValue Property="Property"
                                PropertyPath="GrossAmount" />
                            <PropertyValue Property="Descending" Bool="false" />
                        </Record>
                    </Collection>
                </PropertyValue>
            </Record>
        </PropertyValue>
    </Record>
</Annotation>
</Annotations>
```

LANGUAGE: ABAP CDS

CODE:
```abap
@UI.selectionPresentationVariant: [{
  id: '',
  text: 'Cheap',
  selectionVariantQualifier: 'Default',
  presentationVariantQualifier: 'Default',
  qualifier: 'Cheap'
}]

@UI.selectionVariant: [
  {
    text: 'Cheap',
    qualifier: 'Default'
  }
]

@UI.presentationVariant: [
  {
    qualifier: 'Default',
    sortOrder: [{by: 'GrossAmount', direction: #ASC }]
  }
]
annotate view SALESORDERMANAGE with {

}
```

STEP: 4 — Enable multiple table mode in manifest.json for OData V2 (quickVariantSelectionX)

DESCRIPTION: In manifest.json under sap.ui.generic.app > pages > settings use quickVariantSelectionX. Define variants objects where each variant has a mandatory "key" and "annotationPath" pointing to the SelectionVariant or SelectionPresentationVariant annotation. Keys are used to suffix stable IDs for per-tab table instances (avoid duplicates). Example snippet shows two variants "Expensive" and "Cheap".

LANGUAGE: JSON

CODE:
```json
1 ...
2 "sap.ui.generic.app": {
3     "pages": [
4         {
5             "entitySet": "C_STTA_SalesOrder_WD_20",
6             "component": {
7                 "name": "sap.suite.ui.generic.template.ListReport",
8                 "list": true,
9                 "settings": {
10                    "quickVariantSelectionX": {
11                        "variants": {
12                            "Expensive": {
13                                "key": "Expensive",
14                                "annotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant#Expensive"
15                            },
16                            "Cheap": {
17                                "key": "Cheap",
18                                "annotationPath": "com.sap.vocabularies.UI.v1.SelectionPresentationVariant#Cheap"
19                            }
20                        }
21                    }
22                    ...
```

NOTE: Use keys composed of letters, digits, underscores and not starting with a digit. Table-specific IDs will get suffix "-<key>".

STEP: 5 — Enable multiple table mode in manifest.json for OData V4 (sap.fe.templates ListReport views.paths)

DESCRIPTION: For OData V4 / sap.fe, define views in the ListReport target options.settings > views.paths. Each path object requires "key" and "annotationPath". You can set "showCounts" and "keepPreviousPersonalization". Configure controlConfiguration per annotation visualization to set table types and settings.

LANGUAGE: JSON

CODE:
```json
"SalesOrderManageList": {
    "type": "Component",
    "id": "SalesOrderManageList",
    "name": "sap.fe.templates.ListReport",
    "options": {
        "settings": {
            "contextPath": "/SalesOrderManage",
            "views": {
                "paths": [
	            {
	                "key": "tab1",
	                "annotationPath":        "com.sap.vocabularies.UI.v1.SelectionVariant#Good"
	            },
	            {
	                "key": "tab2",
	                "annotationPath": "com.sap.vocabularies.UI.v1.SelectionPresentationVariant#UncompletePV"
	            },
	            { 
	                "key": "tab3",
	                "annotationPath": "com.sap.vocabularies.UI.v1.SelectionPresentationVariant#PVandSV"
	            }
	        ],
	        "showCounts" : false
	    },
	    "controlConfiguration": {
	        ...
            }
	},
	...
    }
}
```

DESCRIPTION (controlConfiguration example): Map an annotation visualization ID to a tableSettings block to customize table type and features.

LANGUAGE: JSON

CODE:
```json
"controlConfiguration": {
   "@com.sap.vocabularies.UI.v1.LineItem#withPrice ": {
      "tableSettings": {
         "type": "ResponsiveTable",
         "enableExport": false,  
          ...
      },
   }
}
```

STEP: 6 — Charts in multiple table mode: actions and navigation

DESCRIPTION: Charts support annotation-defined actions (UI.Chart/Actions) and custom extension-point actions. For chart navigation, set showItemNavigationOnChart=true on that variant's manifest entry and define an internal navigation target in manifest. Ensure chart service/entity is not draft-enabled or read-only.

LANGUAGE: XML

CODE:
```xml
<Annotation Term="UI.Chart" Qualifier="Chart4">
    <Record Type="UI.ChartDefinitionType">
        <PropertyValue Property="ChartType" EnumMember="UI.ChartType/Column"/>
        <PropertyValue Property="Dimensions">
            <Collection>
                <PropertyPath>CompanyCode</PropertyPath>
                <PropertyPath>Customer</PropertyPath>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="Measures">
            <Collection>
                <PropertyPath>AmountInTransactionCurrency</PropertyPath>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="Actions">
            <Collection>
                <Record Type="UI.DataFieldForAction">
                    <PropertyValue Property="Action" String="ZFAR_CUSTOMER_LINE_ITEMS2_SRV.ZFAR_CUSTOMER_LINE_ITEMS2_SRV_Entities/Create"/>
                    <PropertyValue Property="Label" String="Action 1"/>
                </Record>
                <Record Type="UI.DataFieldForIntentBasedNavigation">
                    <PropertyValue Property="SemanticObject" String="Customer"/>
                    <PropertyValue Property="Action" String="postPayment2"/>
                    <PropertyValue Property="Label" String="SO Navigation (M)"/>
                    <Annotation Term="com.sap.vocabularies.UI.v1.Importance" EnumMember="com.sap.vocabularies.UI.v1.ImportanceType/Medium"/>
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

LANGUAGE: JSON

CODE:
```json
"quickVariantSelectionX": {
    "variants": {
       "SalesOrderTable": {
            "key": "SalesOrderTable",
            "annotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant#VAR1"
            },
        "Amount_CustomerChart": {
            "key": "Amount_CustomerChart",
            "annotationPath": "com.sap.vocabularies.UI.v1.SelectionPresentationVariant#VAR4",
            "showItemNavigationOnChart": true
             }               
    }
}
```

NOTE: When showItemNavigationOnChart is true, the Show details button appears in the chart popup after selecting a bar and Details. Maintain an internal navigation target in the manifest (see internal navigation configuration). Service/entity for the chart must not be draft-enabled or read-only.

STEP: 7 — Additional examples: SelectionVariant / SelectionPresentationVariant without qualifier and LineItem variations

DESCRIPTION: Examples for unqualified (no qualifier) SelectionVariant and SelectionPresentationVariant usage and using different LineItem qualifiers for tabs.

LANGUAGE: XML

CODE:
```xml
<!-- SelectionVariant without a Qualifier -->
<Annotation Term="UI.SelectionVariant">
     <Record>
          <PropertyValue Property="Text" String="Expensive">
          </PropertyValue>
          <PropertyValue Property="SelectOptions">
               <Collection>
                    <Record Type="UI.SelectOptionType">
                         <PropertyValue Property="PropertyName"
                                        PropertyPath="GrossAmount" />
                         <PropertyValue Property="Ranges">
                              <Collection>
                                   <Record Type="UI.SelectionRangeType">
                                        <PropertyValue Property="Option"
                                                       EnumMember="UI.SelectionRangeOptionType/GE" />
                                        <PropertyValue Property="Low" String="5000" />
                                   </Record>
                              </Collection>
                         </PropertyValue>
                    </Record>
               </Collection>
          </PropertyValue>
     </Record>
</Annotation>
```

LANGUAGE: JSON

CODE:
```json
"settings": {
     "quickVariantSelectionX": {
          "variants": {
               "ExpensiveOrdersTable": {
                    "key": "ExpensiveOrdersTable",
                    "annotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant"
               }
          }
     }
},
```

LANGUAGE: XML

CODE:
```xml
<!-- SelectionPresentationVariant without Qualifier referencing LineItem#Reduced  -->
<Annotation Term="UI.SelectionPresentationVariant">
     <Record>
          <PropertyValue Property="Text" String="Cheap">
          </PropertyValue>
          <PropertyValue Property="SelectionVariant">
               <Record>
                    <PropertyValue Property="Text" String="Cheap">
                    </PropertyValue>
                    <PropertyValue Property="SelectOptions">
                         <Collection>
                              <Record Type="UI.SelectOptionType">
                                   <PropertyValue Property="PropertyName"
                                                  PropertyPath="GrossAmount" />
                                   <PropertyValue Property="Ranges">
                                        <Collection>
                                             <Record Type="UI.SelectionRangeType">
                                                  <PropertyValue Property="Option"
                                                                 EnumMember="UI.SelectionRangeOptionType/LT" />
                                                  <PropertyValue Property="Low" String="5000" />
                                             </Record>
                                        </Collection>
                                   </PropertyValue>
                              </Record>
                         </Collection>
                    </PropertyValue>
               </Record>
          </PropertyValue>
          <PropertyValue Property="PresentationVariant">
               <Record>
                    <PropertyValue Property="Visualizations">
                         <Collection>
                              <AnnotationPath>@UI.LineItem#Reduced</AnnotationPath>
                         </Collection>
                    </PropertyValue>
                    <PropertyValue Property="SortOrder">
                         <Collection>
                              <Record>
                                   <PropertyValue Property="Property"
                                                  PropertyPath="GrossAmount" />
                                   <PropertyValue Property="Descending" Bool="false" />
                              </Record>
                         </Collection>
                    </PropertyValue>
               </Record>
          </PropertyValue>
     </Record>
</Annotation>
```

LANGUAGE: JSON

CODE:
```json
"quickVariantSelectionX": {
     "variants": {
          "ExpensiveOrdersTable": {
               "key": "ExpensiveOrdersTable",
               "annotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant"
          },
          "CheapOrdersTable": {
               "key": "CheapOrdersTable",
               "annotationPath": "com.sap.vocabularies.UI.v1.SelectionPresentationVariant"
          }
     }
}
```

LANGUAGE: XML

CODE:
```xml
<!-- Example: LineItem with qualifier "Simplified" and a SelectionPresentationVariant using it -->
<Annotation Term="UI.LineItem" Qualifier="Simplified">
     <Collection>
          <Record Type="UI.DataField">
               <PropertyValue Property="Value" Path="ID" />
          </Record>
          <Record Type="UI.DataField">
               <PropertyValue Property="Value" Path="ImageUrl" />
          </Record>
          <Record Type="UI.DataFieldForAnnotation">
               <PropertyValue Property="Target" AnnotationPath="@UI.FieldGroup#multipleActionFields" />
               <PropertyValue Property="Label" String="Sold-To Party" />
          </Record>
     </Collection>
</Annotation>

<Annotation Term="UI.SelectionPresentationVariant" Qualifier="PVandSV">
     <Record Type="UI.SelectionPresentationVariantType">
          <PropertyValue Property="Text" String="Medium Rating/PVandSV">
          </PropertyValue>
          <PropertyValue Property="SelectionVariant">
               <Record Type="UI.SelectionVariantType">
                    <PropertyValue Property="SelectOptions">
                         <Collection>
                              <Record Type="UI.SelectOptionType">
                                   <PropertyValue Property="PropertyName" PropertyPath="Rating" />
                                   <PropertyValue Property="Ranges">
                                        <Collection>
                                             <Record Type="UI.SelectionRangeType">
                                                  <PropertyValue Property="Option" EnumMember="UI.SelectionRangeOptionType/BT" />
                                                  <PropertyValue Property="Low" String="2" />
                                                  <PropertyValue Property="High" String="4" />
                                             </Record>
                                        </Collection>
                                   </PropertyValue>
                              </Record>
                         </Collection>
                    </PropertyValue>
                    <PropertyValue Property="Text" String="Medium Rating" />
               </Record>
          </PropertyValue>
          <PropertyValue Property="PresentationVariant">
               <Record Type="UI.PresentationVariantType">>
                    <PropertyValue Property="MaxItems" Int="2" />
                    <PropertyValue Property="SortOrder">
                         <Collection>
                              <Record Type="Common.SortOrderType">
                                   <PropertyValue Property="Property" PropertyPath="ID" />
                                   <PropertyValue Property="Ascending" Bool="false" />
                              </Record>
                              <Record Type="Common.SortOrderType">
                                   <PropertyValue Property="Property" PropertyPath="SalesOrderType" />
                                   <PropertyValue Property="Descending" Bool="true" />
                              </Record>
                         </Collection>
                    </PropertyValue>
                    <PropertyValue Property="Visualizations">
                         <Collection>
                              <AnnotationPath>@UI.LineItem#Simplified</AnnotationPath>
                         </Collection>
                    </PropertyValue>
               </Record>
          </PropertyValue>
     </Record>
</Annotation>
```

STEP: 8 — Important notes and behavior (stable IDs, personalization, supported features)

DESCRIPTION: Quick checklist to apply while implementing:

- Stable IDs: Per-tab tables get suffix "-<key>" where <key> is the manifest variant key. Use alphanumeric + underscore keys that do not begin with a digit.
- keepPreviousPersonalization: Can keep a previous single-table personalization on one tab. Add this at the view definition level in OData V4 views.paths.
- Supported SelectionRangeOptionTypes: EQ, BT, LE, GE, NE, GT, LT (no wildcards).
- PresentationVariant must include a Visualization to be applied; otherwise the default LineItem is used.
- For charts: actions from UI.Chart and custom extension actions supported; custom actions tied to selection will be disabled unless a chart bar is selected.
- Control configuration: Customize each tab/table using controlConfiguration entries keyed by annotation visualization (see examples).
- When mixing entity sets: Each tab can display different entity sets/table settings; configure entitySet or table settings in manifest per view (see referenced topic on different entity sets).


--------------------------------

**TITLE**: Defining Multiple Views on a List Report Table (Single Table Mode)

**INTRODUCTION**: Instructions and code examples to define multiple table views (selection variants) and enable switching between them with a segmented button in single table mode for SAP Fiori Elements (OData V2 and V4). Include annotations (XML/ABAP/CDS/CAP) and manifest.json settings for quickVariantSelection.

**TAGS**: fiori-elements-framework, odata-v2, odata-v4, annotations, SelectionVariant, SelectionPresentationVariant, quickVariantSelection, manifest.json, segmented-button

**STEP**: 1 — Add SelectionVariant annotations (OData V2)

**DESCRIPTION**: Create SelectionVariant annotations in your annotations file to define preconfigured filters (views). Example shows a SelectionVariant qualifier "Expensive" filtering GrossAmount >= 5000.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.SelectionVariant" Qualifier="Expensive">
    <Record>
        <PropertyValue Property="Text" String="Expensive">
        </PropertyValue>
        <PropertyValue Property="SelectOptions">
            <Collection>
                <Record Type="UI.SelectOptionType">
                    <PropertyValue Property="PropertyName"
                        PropertyPath="GrossAmount" />
                    <PropertyValue Property="Ranges">
                        <Collection>
                            <Record Type="UI.SelectionRangeType">
                                <PropertyValue Property="Option"
                                    EnumMember="UI.SelectionRangeOptionType/GE" />
                                <PropertyValue Property="Low" String="5000" />
                            </Record>
                        </Collection>
                    </PropertyValue>
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

**LANGUAGE**: ABAP CDS

**CODE**:
```
@UI.SelectionVariant: [
  {
    text: 'Expensive',
    qualifier: 'Expensive'
  }
]
annotate view STTA_C_MP_Product with {

}
```

**DESCRIPTION (Notes)**: 
- The SelectionVariant's FilterExpression is not supported.
- Supported SelectionRangeOptionTypes (no wildcards): EQ, BT, LE, GE, NE, GT, LT.
- For PresentationVariant, SortOrders are supported.

---

**STEP**: 2 — Enable multiple views in manifest.json (OData V2, sap.ui.generic.app quickVariantSelection)

**DESCRIPTION**: In manifest.json under sap.ui.generic.app -> pages -> component -> settings, enable quickVariantSelection and point each variant entry to an annotationPath. Each variant must include a mandatory "key" used to initialize the SegmentedButton item.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "C_STTA_SalesOrder_WD_20",
        "component": {
          "name": "sap.suite.ui.generic.template.ListReport",
          "list": true,
          "settings": {
            "quickVariantSelection": {
              "variants": {
                "0": {
                  "key": "_tab1",
                  "annotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant#Expensive"
                },
                "1": {
                  "key": "_tab2",
                  "annotationPath": "com.sap.vocabularies.UI.v1.SelectionPresentationVariant#Cheap"
                }
              }
            }
            ...
          }
        }
      }
    ]
  }
}
```

**DESCRIPTION (Note)**: The PresentationVariant part of a SelectionPresentationVariant is not considered for filtering — SelectionPresentationVariant is used only to find the SelectionVariant and its filters.

---

**STEP**: 3 — SelectionVariant / SelectionPresentationVariant examples (OData V2)

**DESCRIPTION**: Additional annotation examples (qualified/unqualified) and manifest.json settings demonstrating quickVariantSelection options including showCounts and hideTableTitle.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.SelectionVariant" Qualifier="Expensive">
     <Record>
          <PropertyValue Property="Text" String="{@i18n>@Expensive}">
          </PropertyValue>
          <PropertyValue Property="SelectOptions">
               <Collection>
                    <Record Type="UI.SelectOptionType">
                         <PropertyValue Property="PropertyName" PropertyPath="GrossAmount" />
                         <PropertyValue Property="Ranges">
                              <Collection>
                                   <Record Type="UI.SelectionRangeType">
                                        <PropertyValue Property="Sign" EnumMember="UI.SelectionRangeSignType/E"/>
                                        <PropertyValue Property="Option" EnumMember="UI.SelectionRangeOptionType/LT" />
                                        <PropertyValue Property="Low" String="5000" />
                                   </Record>
                              </Collection>
                         </PropertyValue>
                    </Record>
               </Collection>
          </PropertyValue>
     </Record>
</Annotation>
```

**LANGUAGE**: JSON

**CODE**:
```json
"settings": {
          "smartVariantManagement": true,
          "quickVariantSelection": {
               "showCounts": true,
               "variants": {
                    "0": {
                         "key": "_tab1",
                         "annotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant#Expensive"
                    },
                    "1": {
                         "key": "_tab2",
                         "annotationPath": "com.sap.vocabularies.UI.v1.SelectionPresentationVariant#Cheap"
                    }
               }
          }
     }
```

**LANGUAGE**: XML

**CODE**:
```
<Annotation Term="UI.SelectionVariant" >
     <Record>
          <PropertyValue Property="Text" String="{@i18n>@Expensive}">
          </PropertyValue>
          <PropertyValue Property="SelectOptions">
               <Collection>
                     <Record Type="UI.SelectOptionType">
                          <PropertyValue Property="PropertyName" PropertyPath="GrossAmount" />
                          <PropertyValue Property="Ranges">
                               <Collection>
                                    <Record Type="UI.SelectionRangeType">
                                         <PropertyValue Property="Sign" EnumMember="UI.SelectionRangeSignType/E"/>
                                         <PropertyValue Property="Option" EnumMember="UI.SelectionRangeOptionType/LT" />
                                         <PropertyValue Property="Low" String="5000" />
                                    </Record>
                               </Collection>
                          </PropertyValue>
                     </Record>
                </Collection>
           </PropertyValue>
      </Record>
</Annotation>
```

**LANGUAGE**: JSON

**CODE**:
```json
"settings": {
     "smartVariantManagement": true,
     "quickVariantSelection": {
          "showCounts": true,
          "variants": {
               "0": {
               "key": "_tab1",
               "annotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant"
               },
               "1": {
                    "key": "_tab2",
                    "annotationPath": "com.sap.vocabularies.UI.v1.SelectionPresentationVariant#Cheap"
               }
          }
     }
}
```

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.SelectionPresentationVariant"Qualifier="Cheap">
     <Record>
          <PropertyValue Property="Text" String="{@i18n>@Cheap}">
          </PropertyValue>
          <PropertyValue Property="SelectionVariant">
               <Record>
                    <PropertyValue Property="Text" String="Cheap">
                    </PropertyValue>
                    <PropertyValue Property="SelectOptions">
                         <Collection>
                              <Record Type="UI.SelectOptionType">
                                   <PropertyValue Property="PropertyName"
                                                  PropertyPath="GrossAmount" />
                                   <PropertyValue Property="Ranges">
                                        <Collection>
                                             <Record Type="UI.SelectionRangeType">
                                                  <PropertyValue Property="Option"
                                                                 EnumMember="UI.SelectionRangeOptionType/LT" />
                                                  <PropertyValue Property="Low" String="5000" />
                                             </Record>
                                        </Collection>
                                   </PropertyValue>
                              </Record>
                         </Collection>
                    </PropertyValue>
               </Record>
          </PropertyValue>
          <PropertyValue Property="PresentationVariant">
               <Record>
                    <PropertyValue Property="Visualizations">
                         <Collection>
                              <AnnotationPath>@UI.LineItem#Reduced</AnnotationPath>
                         </Collection>
                    </PropertyValue>
                    <PropertyValue Property="SortOrder">
                         <Collection>
                              <Record>
                                   <PropertyValue Property="Property"
                                                  PropertyPath="GrossAmount" />
                                   <PropertyValue Property="Descending" Bool="false" />
                              </Record>
                         </Collection>
                    </PropertyValue>
               </Record>
          </PropertyValue>
     </Record>
</Annotation>
```

**LANGUAGE**: JSON

**CODE**:
```json
"settings": {
     "smartVariantManagement": true,
     "quickVariantSelection": {
          "showCounts": true,
          "variants": {
               "0": {
                    "key": "_tab1",
                    "annotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant#Expensive"
               },
               "1": {
                    "key": "_tab2",
                    "annotationPath": "com.sap.vocabularies.UI.v1.SelectionPresentationVariant#Cheap"
               }
          }
     }
}
```

**LANGUAGE**: XML

**CODE**:
```
<Annotation Term="UI.SelectionPresentationVariant">
     <Record>
          <PropertyValue Property="Text" String="{@i18n>@Cheap}">
          </PropertyValue>
          <PropertyValue Property="SelectionVariant">
               <Record>
                    <PropertyValue Property="Text" String="Cheap">
                    </PropertyValue>
                    <PropertyValue Property="SelectOptions">
                         <Collection>
                              <Record Type="UI.SelectOptionType">
                                   <PropertyValue Property="PropertyName"
                                                  PropertyPath="GrossAmount" />
                                   <PropertyValue Property="Ranges">
                                        <Collection>
                                             <Record Type="UI.SelectionRangeType">
                                                  <PropertyValue Property="Option"
                                                                 EnumMember="UI.SelectionRangeOptionType/LT" />
                                                  <PropertyValue Property="Low" String="5000" />
                                             </Record>
                                        </Collection>
                                   </PropertyValue>
                              </Record>
                         </Collection>
                    </PropertyValue>
               </Record>
          </PropertyValue>
          <PropertyValue Property="PresentationVariant">
               <Record>
                    <PropertyValue Property="Visualizations">
                         <Collection>
                              <AnnotationPath>@UI.LineItem#Reduced</AnnotationPath>
                         </Collection>
                    </PropertyValue>
                    <PropertyValue Property="SortOrder">
                         <Collection>
                              <Record>
                                   <PropertyValue Property="Property"
                                                  PropertyPath="GrossAmount" />
                                   <PropertyValue Property="Descending" Bool="false" />
                              </Record>
                         </Collection>
                    </PropertyValue>
               </Record>
          </PropertyValue>
     </Record>
</Annotation>
```

**LANGUAGE**: JSON

**CODE**:
```json
"settings": {
     "smartVariantManagement": true,
     "quickVariantSelection": {
          "showCounts": true,
          "variants": {
               "0": {
                    "key": "_tab1",
                    "annotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant"
                    },
               "1": {
                    "key": "_tab2",
                    "annotationPath": "com.sap.vocabularies.UI.v1.SelectionPresentationVariant"
                    }
          }
     }
}
```

---

**STEP**: 4 — Add SelectionVariant annotations (OData V4)

**DESCRIPTION**: For OData V4, add SelectionVariant annotations in the annotations file. Examples include XML Annotations, ABAP CDS, and CAP CDS variants.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="com.c_salesordermanage_sd.SalesOrderManage">
     <Annotation Term="UI.SelectionVariant" Qualifier="Completed">
          <Record Type="UI.SelectionVariantType">
               <PropertyValue Property="SelectOptions">
                    <Collection>
                         <Record Type="UI.SelectOptionType">
                              <PropertyValue Property="PropertyName" PropertyPath="OverallSDProcessStatus" />
                              <PropertyValue Property="Ranges">
                                   <Collection>
                                        <Record Type="UI.SelectionRangeType">
                                             <PropertyValue Property="Option" EnumMember="UI.SelectionRangeOptionType/BT" />
                                             <PropertyValue Property="Low" String="A" />
                                             <PropertyValue Property="High" String="D" />
                                        </Record>
                                        <Record Type="UI.SelectionRangeType">
                                             <PropertyValue Property="Option" EnumMember="UI.SelectionRangeOptionType/BT" />
                                             <PropertyValue Property="Low" String="B" />
                                             <PropertyValue Property="High" String="C" />
                                        </Record>
                                   </Collection>
                              </PropertyValue>
                         </Record>
                    </Collection>
               </PropertyValue>
               <PropertyValue Property="Text" String="completed (2 Ranges)" />
          </Record>
     </Annotation>
     <Annotation Term="UI.SelectionVariant" Qualifier="InProcess">
          <Record Type="UI.SelectionVariantType">
               <PropertyValue Property="SelectOptions">
                    <Collection>
                         <Record Type="UI.SelectOptionType">
                              <PropertyValue Property="PropertyName" PropertyPath="OverallSDProcessStatus" />
                              <PropertyValue Property="Ranges">
                                   <Collection>
                                        <Record Type="UI.SelectionRangeType">
                                             <PropertyValue Property="Option" EnumMember="UI.SelectionRangeOptionType/EQ" />
                                             <PropertyValue Property="Low" String="B" />
                                        </Record>
                                   </Collection>
                              </PropertyValue>
                         </Record>
                    </Collection>
               </PropertyValue>
               <PropertyValue Property="Text" String="In Process" />
          </Record>
     </Annotation>
</Annotations>
```

**LANGUAGE**: ABAP CDS

**CODE**:
```
@UI.SelectionVariant: [
  {
    text: 'completed (2 Ranges)',
    qualifier: 'Completed'
  },
  {
    text: 'In Process',
    qualifier: 'InProcess'
  }
]
annotate view SALESORDERMANAGE with {

}
```

**LANGUAGE**: CAP CDS

**CODE**:
```
annotate com.c_salesordermanage_sd.SalesOrderManage with @(
  UI.SelectionVariant #Completed : {
    $Type : 'UI.SelectionVariantType',
    SelectOptions : [
        {
            $Type : 'UI.SelectOptionType',
            PropertyName : OverallSDProcessStatus,
            Ranges : [
                {
                    $Type : 'UI.SelectionRangeType',
                    Option : #BT,
                    Low : 'A',
                    High : 'D'
                },
                {
                    $Type : 'UI.SelectionRangeType',
                    Option : #BT,
                    Low : 'B',
                    High : 'C'
                }
            ]
        }
    ],
    Text : 'completed (2 Ranges)'
  },
  UI.SelectionVariant #InProcess : {
    $Type : 'UI.SelectionVariantType',
    SelectOptions : [
        {
            $Type : 'UI.SelectOptionType',
            PropertyName : OverallSDProcessStatus,
            Ranges : [
                {
                    $Type : 'UI.SelectionRangeType',
                    Option : #EQ,
                    Low : 'B'
                }
            ]
        }
    ],
    Text : 'In Process'
  },
);
```

**DESCRIPTION (Notes)**:
- The SelectionVariant FilterExpression is not supported.
- Supported SelectionRangeOptionTypes (no wildcards): EQ, BT, LE, GE, NE, GT, LT.
- For PresentationVariant, SortOrders are supported.

---

**STEP**: 5 — Enable multiple views in manifest.json (OData V4, controlConfiguration quickVariantSelection)

**DESCRIPTION**: In V4 manifest.json routing targets (or component options), configure controlConfiguration for the LineItem table with quickVariantSelection.paths array. Each path entry uses annotationPath pointing to SelectionVariant/SelectionPresentationVariant qualifiers. Optional keys: showCounts (adds $count requests), hideTableTitle (show only segmented buttons).

**LANGUAGE**: JSON

**CODE**:
```json
"SalesOrderManageList": {
  "type": "Component",
  "id": "SalesOrderManageList",
  "name": "sap.fe.templates.ListReport",
  "options": {
    "settings": {
      "contextPath": "/SalesOrderManage",
      "controlConfiguration": {
        "@com.sap.vocabularies.UI.v1.LineItem": {
          "tableSettings": {
            "type": "ResponsiveTable",
            "quickVariantSelection": {
              "paths": [
                {
                  "annotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant#Open"
                },
                {
                  "annotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant#Completed"
                },
                {
                  "annotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant#NotRelevant"
                },
                {
                  "annotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant#InProcess"
                }
              ],
              "hideTableTitle": true,
              "showCounts": true
            }
          }
        }
      },
      ...
    }
  }
}
```

**DESCRIPTION (Notes)**:
- paths: entries pointing to annotationPath of SelectionVariant/SelectionPresentationVariant.
- showCounts: when true, segmented buttons show counts and no count is shown next to the table title; when false, count is not shown next to buttons and is shown next to the table title.
- showCounts=true triggers additional $count requests (performance impact).
- hideTableTitle=true hides the title and shows only segmented buttons — enable only if variant titles are explicit.

---

**STEP**: 6 — Required fields and behavior summary

**DESCRIPTION**: Quick actionable checklist to implement multiple views in single table mode.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "checklist": [
    "Add one or more UI.SelectionVariant or UI.SelectionPresentationVariant annotations (XML/ABAP/CDS/CAP).",
    "For V2: reference variants in manifest.json under sap.ui.generic.app.pages[].component.settings.quickVariantSelection. Each variant must have a 'key' and 'annotationPath'.",
    "For V4: reference variants in manifest.json under options.settings.controlConfiguration['@com.sap.vocabularies.UI.v1.LineItem'].tableSettings.quickVariantSelection.paths[].annotationPath.",
    "Optionally set 'showCounts': true to display counts (beware of $count requests).",
    "Optionally set 'hideTableTitle': true to hide the table title and display only segmented buttons.",
    "Supported SelectionRangeOptionTypes: EQ, BT, LE, GE, NE, GT, LT. FilterExpression is not supported."
  ]
}
```
--------------------------------

**TITLE**: Configuring Multiple List-Report Views with Different Entity Sets and Table Settings

**INTRODUCTION**: Configure a Fiori Elements List Report to display multiple views (tabs) that use different entity sets and per-tab table settings. Applicable for OData V2 (sap.ui.generic.app / ListReport) and OData V4 (sap.fe / ListReport). This guide shows manifest.json changes, XML/CAP annotations for SelectionVariant/SelectionPresentationVariant, and how to use controlConfiguration to set per-entity-set personalization.

**TAGS**: fiori-elements-framework, list-report, multiple-views, entity-set, manifest.json, odata-v2, odata-v4, selectionvariant, selectionpresentationvariant, controlConfiguration, quickVariantSelectionX

**STEP**: 1 — Prerequisites & high-level behavior

**DESCRIPTION**: Ensure you already implemented "Multiple Table Mode" for a List Report. Key behaviors to account for when using multiple entity sets:
- The leading entitySet (under sap.ui.generic.app/pages or sap.fe/targets/contextPath) defines the smart filter bar and footer.
- Filters in the filter bar come from the main (leading) entity set; you cannot add filters that belong only to an additional entity set.
- Filters are applied to each table only if the corresponding property exists on that table's entity type; otherwise ignored.
- Counts for each tab are always shown in the icon tab bar and reflect filters when those filters are relevant for the entity set.
- Do not mix draft and non-draft entity sets; do not mix responsive and non-responsive table types in the same app. Ensure charts/services are not draft-enabled when required.

**LANGUAGE**: PlainText

**CODE**:
```PlainText
Prerequisite: Completed "Defining Multiple Views on a List Report Table - Multiple Table Mode".
System behavior summary:
- Leading entitySet controls the smart filter bar.
- Additional tabs can set entitySet per variant/annotation.
- Filters applied only if property exists on entitySet.
- Counts shown in icon tab bar; reflect only relevant filters.
- Avoid mixing draft/non-draft; avoid mixing responsive/non-responsive tables.
```

**STEP**: 2 — OData V2: Add entitySet and tableSettings per variant in manifest.json (quickVariantSelectionX)

**DESCRIPTION**: For sap.ui.generic.app (classic List Report), specify the leading entitySet under pages[].entitySet. To add additional views (tabs) that use different entity sets and table types, add an entitySet and an annotationPath per variant inside quickVariantSelectionX. Use tableSettings per variant to set table type (GridTable, TreeTable, AnalyticalTable, ResponsiveTable as applicable). If entitySet is omitted inside a variant, the leading entitySet is used.

**LANGUAGE**: JSON

**CODE**:
```json
"sap.ui.generic.app": {
         "pages": [{
             "entitySet": "C_RequirementTrackingPurReq",
             "component": {
                 "name": "sap.suite.ui.generic.template.ListReport",
                 "list": true,
                 "settings": {
                     "condensedTableLayout": true,
                     "smartVariantManagement": false,
                     "quickVariantSelectionX": {
                        "variants": {
                            "1": {
                                "key": "1",
                                "entitySet": "C_RequirementTrackingPurReq",
                                "annotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant#VAR1",
                                "tableSettings": { 
                                      "type": "GridTable",
                        }
                            },
                            "2": {
                                "key": "2",
                                "entitySet": "C_RequirementTrackingPurOrd",
                                "annotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant#VAR5",
                                "tableSettings": { 
                                      "type": "GridTable",
                        }
                            },
                            "3": {
                                "key": "3",
                                "entitySet": "C_RequirementTrackingPurReq",
                                "annotationPath": "com.sap.vocabularies.UI.v1.SelectionPresentationVariant#VAR6",
                                "showItemNavigationOnChart": true,
                                       "tableSettings": { 
                                            "type": "TreeTable",
                                }
                            }
                        }
                    }
                }
            }
        }]    
	}
```

**STEP**: 3 — OData V2: Table type and UX constraints

**DESCRIPTION**: Rules to enforce when specifying table types per variant:
- Do not mix responsive and non-responsive table types within the same list report. Either all tables are responsive or you have only non-responsive types (GridTable, TreeTable, AnalyticalTable) mixed.
- Different tabs can render different (non-responsive) table types (e.g., tab1 = TreeTable, tab2 = GridTable).
- Table settings not specified per variant will fall back to the overall table settings defined at the list level.

**LANGUAGE**: PlainText

**CODE**:
```PlainText
Guidelines:
- If tableSettings not provided for a variant, overall list table settings apply.
- Do not combine responsive and non-responsive tables in the same app.
- Validate performance and usability when adding entity sets and table types.
```

**STEP**: 4 — System behavior for filters and counts (detailed)

**DESCRIPTION**: How the runtime applies filters and updates counts across tabs:
- The filter bar uses properties from the main entity set only.
- When a filter is applied that matches a property in some but not all entity sets, only the tabs whose entity sets contain that property will update their counts and results.
- If a user navigates to a tab where active filters are not relevant, the application shows an informational message listing the filters that were ignored for that entity set.

**LANGUAGE**: PlainText

**CODE**:
```PlainText
Behavior:
- Filters applied globally but evaluated per-tab: applied only if property exists.
- Counts in icon tab bar reflect only relevant filters per entity set.
- UI informs users when active filters are not relevant to the selected tab.
```

**STEP**: 5 — OData V4: Define SelectionVariant (SV) and SelectionPresentationVariant (SPV) annotations (XML)

**DESCRIPTION**: For OData V4 (sap.fe), define XML annotations for the entity sets you want to render on each tab. Use UI.SelectionVariant on the target entity or UI.SelectionPresentationVariant to combine selection and presentation (sorting, MaxItems). Qualify the annotation to reference it in manifest views/paths.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="myService.entityB">
   <Annotation Term="UI.SelectionVariant" Qualifier="Good">
   <Record Type="UI.SelectionVariantType">
      <PropertyValue Property="SelectOptions">
         <Collection>
            <Record Type="UI.SelectOptionType">
               <PropertyValue Property="PropertyName" PropertyPath="propertyInteger" />
               <PropertyValue Property="Ranges">
                  <Collection>
                     <Record Type="UI.SelectionRangeType">
                        <PropertyValue Property="Option" EnumMember="UI.SelectionRangeOptionType/EQ" />
                        <PropertyValue Property="Low" String="1" />
                     </Record>
                  </Collection>
               </PropertyValue>
            </Record>
         </Collection>
      </PropertyValue>
      <PropertyValue Property="Text" String="entityA with one follower" />
   </Record>
  </Annotation>
</Annotations>
 
<Annotations Target="myService.entityA">
<Annotation Term="UI.SelectionPresentationVariant" Qualifier="trueSPV">
      <Record Type="UI.SelectionPresentationVariantType"
           <PropertyValue Property="Text" String="entityB with true value"></PropertyValue>
           <PropertyValue Property="SelectionVariant">
              <Record Type="UI.SelectionVariantType">
                 <PropertyValue Property="SelectOptions">
                    <Collection>
                       <Record Type="UI.SelectOptionType">
                          <PropertyValue Property="PropertyName" PropertyPath="propertyBoolean" />
                          <PropertyValue Property="Ranges">
                             <Collection>
                                <Record Type="UI.SelectionRangeType">
                                   <PropertyValue Property="Option" EnumMember="UI.SelectionRangeOptionType/EQ" />
                                   <PropertyValue Property="Low" String="true" />                                </Record>
                             </Collection>
                          </PropertyValue>
                       </Record>
                    </Collection>
                 </PropertyValue>
                 <PropertyValue Property="Text" String="Medium Rating" />
              </Record>
            </PropertyValue>
            <PropertyValue Property="PresentationVariant">
                  <Record Type="UI.PresentationVariantType">>
                      <PropertyValue Property="MaxItems" Int="3" />
                      <PropertyValue Property="SortOrder">
                           <Collection>
                              <Record Type="Common.SortOrderType">
                                  <PropertyValue Property="Property" PropertyPath="propertyInteger" />
                              </Record>
                          </Collection>
                      </PropertyValue>
                   </Record>
              </PropertyValue>
          </Record>
      </Annotation>
```

**STEP**: 6 — OData V4: Define SelectionVariant/SPV using CAP CDS (alternative)

**DESCRIPTION**: If you use CAP CDS annotations, annotate entities with UI.SelectionVariant and UI.SelectionPresentationVariant qualifiers and SelectOptions/Ranges. Use these qualifiers in manifest views.

**LANGUAGE**: CDS

**CODE**:
```cds
annotate entityB with @(
UI.SelectionVariant#One :
{
    Text: 'entityA with one follower',
    SelectOptions:
    [
        {
            $Type : 'UI.SelectOptionType',
            PropertyName : propertyInteger,
             Ranges:
             [
                 {
                     $Type: 'UI.SelectionRangeType',
                     Option: #EQ,
                     Low: '1'
                }
             ]
        }
    ]
}
 
...
annotate entityA with @(
 
UI.SelectionPresentationVariant#trueSPV :
{
    Text: 'entityB with true value',
    SelectionVariant: {
          SelectOptions:
          [
              {
                  $Type : 'UI.SelectOptionType',
                  PropertyName : propertyBoolean,
                   Ranges:
                   [
                       {
                           $Type: 'UI.SelectionRangeType',
                           Option: #EQ,
                           Low: 'true'
                      }
                   ]
              }
          ]
      },
    PresentationVariant: {
            MaxItems       : 3,
            SortOrder      : [{Property : 'ID'}]
    }
},
```

**STEP**: 7 — OData V4: Manifest configuration for multiple views (sap.fe targets)

**DESCRIPTION**: Configure the List Report target to include multiple views. Set contextPath to the leading entity and supply views.paths entries for each tab. For tabs that use a different entity set, add "entitySet" alongside "annotationPath".

**LANGUAGE**: JSON

**CODE**:
```json
"targets": {   
    "DraftList": {
        "type": "Component",
            "id": "DraftList",
            "name": "sap.fe.templates.ListReport",
            "options": {
                "settings": {
                    "contextPath": "/entityA",
                    "views": {
                        "paths": [
                            {
                                "key": "tab1",
                                "annotationPath": "com.sap.vocabularies.UI.v1.SelectionPresentationVariant#trueSPV"
                            },
                            {
                                "key": "tab2",
                                "entitySet": "entityB",
                                "annotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant#One"
                            }
                        ]
                    }
                }
            }
        },
...
}
```

**STEP**: 8 — OData V4: Define per-entity-set table personalization using controlConfiguration

**DESCRIPTION**: To set different personalization or tableSettings per entity set, prefix the annotation key with the entity set name in controlConfiguration. Use the path "/EntityB/@<AnnotationKey>" to scope settings to EntityB. Place controlConfiguration under the target component settings.

**LANGUAGE**: JSON

**CODE**:
```json
"targets": {
    "DraftList": {
        "type": "Component",
        "id": "DraftList",
        "name": "sap.fe.templates.ListReport",
        "options": {
            "settings": {
                "contextPath": "/EntityA",
                "views": {
                    "paths": [
                        {
                            "key": "tab1",
                            "annotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant"
                        },
                        {
                            "key": "tab2",
                            "entitySet": "EntityB",
                            "annotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant"
                        }
                    ]
                },
                "controlConfiguration": {
                    "@com.sap.vocabularies.UI.v1.LineItem": {
                        "tableSettings": {
                            "personalization": false
                        }
                    },
                    "/EntityB/@com.sap.vocabularies.UI.v1.LineItem": {
                        "tableSettings": {
                            "personalization": {
                                "column": true,
                                "sort": false,
                                "filter": true,
                                "group": false
                            }
                        }
                    }
                }
            }
        }
    },
    ...
}
```

**STEP**: 9 — Checklist before deployment

**DESCRIPTION**: Verify these before releasing:
- Leading entitySet configured correctly (smart filter bar fields exist).
- Each variant or view has correct annotationPath and entitySet (if different).
- Table types per-variant comply with responsive/non-responsive constraints.
- Do not mix draft/non-draft entity sets.
- Chart services/entities are read-only or non-draft as required.
- Test filter behavior: apply filters that are not present in secondary entity sets and confirm informational messages and counts.

**LANGUAGE**: PlainText

**CODE**:
```PlainText
Pre-deployment checklist:
- Leading entitySet defined.
- Each variant/view: annotationPath + optional entitySet set.
- Table types validated (no responsive/non-responsive mix).
- No draft/non-draft mixing.
- Chart services non-draft or read-only.
- Filter/Count behavior verified per tab.
```
--------------------------------

**TITLE**: Defining the Loading Behavior of Object Page (OData V4)

**INTRODUCTION**: 
Instructions for controlling request grouping and understanding lazy loading for SAP Fiori elements Object Page (OData V4). Use these steps to configure header DataPoint/MicroChart request grouping via manifest.json, follow best practices for performance, and understand how the framework performs lazy loading of sections and header content.

**TAGS**: fiori-elements-framework, object-page, odata-v4, request-groups, lazy-loading, manifest.json, DataPoint, MicroChart

**STEP**: 1 — Request groups available (names and purposes)

**DESCRIPTION**: 
Use these request group names in manifest.controlConfiguration entries to bundle requests into batch groups. Set the requestGroupId for header DataPoints and MicroCharts using the annotation path as the key in manifest.json.

Request group names and intended use:
- Heroes
  - Requests for fields coming directly from the main entity set
  - All 1:1 (multiplicity) fields from header forms and visible section forms
- Workers
  - All table requests
- Decoration
  - All 1-n multiplicity micro charts in the header
- LongRunners
  - Slow KPIs (complex analytical service responses). Not used by Fiori elements by default, but available to send as a separate batch group so UI performance from standard groups is not impacted.

Recommendation:
- Place LongRunners KPIs at the far-right of the header so faster groups (Heroes/Workers/Decoration) deliver visible information first.

**LANGUAGE**: text

**CODE**:
```text
Use one of the requestGroupId values: "Heroes", "Workers", "Decoration", "LongRunners"
Set in manifest.json under the ObjectPage component options.settings.controlConfiguration
Key: annotation path of the header element (DataPoint or MicroChart)
Value: { "requestGroupId": "<GroupName>" }
```

**STEP**: 2 — Configure request grouping in manifest.json (example)

**DESCRIPTION**: 
Add controlConfiguration entries for header DataPoints/MicroCharts in the object page component configuration. Use the annotation path (e.g. "@com.sap.vocabularies.UI.v1.DataPoint#NetValue" or "<NavigationProperty>/<AnnotationPath>") as the object key, and set "requestGroupId" to one of the group names. Batch groups are fired in parallel by Fiori elements (with a slight delay) but the underlying model may affect exact bundling and ordering. Expect that the framework cannot fully enforce batching timing when the model is preparing requests.

Preserve example keys exactly as annotation paths when configuring.

File: manifest.json (inside the object page component entry)

**LANGUAGE**: JSON

**CODE**:
```json
"SalesOrderManageObjectPage": {                  
    "type": "Component",                 
    "id": "SalesOrderManageObjectPage",                  
    "name": "sap.fe.templates.ObjectPage",                  
    "options": {               
       "settings": {                         
            "contextPath": "/SalesOrderManage",                         
            …
            "controlConfiguration": {                                
                …
                "@com.sap.vocabularies.UI.v1.DataPoint#NetValue": {                                  
                    "requestGroupId": "Workers"                   
               },                              
                "_CreditLimitDetails/@com.sap.vocabularies.UI.v1.Chart#CreditLimitChart": {                                  
                    "requestGroupId": "LongRunners"                              
               }                                
                …
```

**STEP**: 3 — Request-group behavior notes and best practices

**DESCRIPTION**: 
Operational notes to apply while configuring requestGroupId:
- SAP Fiori elements fires batch groups in parallel but cannot fully control the OData model; requests may still be sent at slightly different times.
- The framework recommends bundling requests of a given requestGroupId into one batch, but a request from that group may fire before another request in the same group if the model prepares it earlier.
  - Example: A DataPoint configured with "Workers" can be fired before a table request also configured "Workers".
- Best practice: Put LongRunners KPIs to the far right of the header so the initial visible header area loads via standard, faster groups.
- Use requestGroupId only for header DataPoints and MicroCharts (set via controlConfiguration annotation path keys).

**LANGUAGE**: text

**CODE**:
```text
Notes:
- Fiori elements fires groups in parallel (small delays may occur).
- The model can change batching behavior; grouping is advisory to the model.
- Put LongRunners KPIs to the right-most header positions to avoid delaying visible header content.
```

**STEP**: 4 — Lazy loading behavior (default, cannot be disabled)

**DESCRIPTION**: 
Lazy loading delays data calls for Object Page sections that are not yet visible. This is enabled by default in SAP Fiori elements for OData V4 and cannot be turned off by applications. Behavior details below describe how many batch requests are created and when.

Simple scenario (header has no micro charts AND no form section contains a table):
- Two batch requests on initial load:
  1. Header request (header fields)
  2. Section data request — includes:
     - The first three subsections on desktop
     - Only currently visible subsections on touch devices (tablet/mobile)

Complex scenario (header has micro charts OR any form section contains a table):
- Two additional parallel calls on initial load:
  - Table request(s) in a separate batch (parallel)
  - All micro charts in the header in a separate batch (parallel)
- Header and visible section requests still occur as above.

On scrolling:
- When a user scrolls and a section enters the viewport, a separate batch request is sent for that scrolled-to subsection.

Error handling and subsequent loads:
- If the backend returns messages (errors) for fields not currently visible, lazy loading is temporarily switched off and additional sections are loaded so the user can navigate directly to the field referenced in the message.
- On subsequent navigations to the object page instance (for example back to list report then opening another object), the header and visible subsection requests are combined into a single GET batch request.

**LANGUAGE**: text

**CODE**:
```text
Lazy loading:
- Enabled by default (OData V4 Object Page). Cannot be disabled.
- Simple scenario: initial batches = Header + SectionData (first 3 subsections on desktop).
- Complex scenario: additional parallel batches = TableRequests + HeaderMicroCharts.
- On scroll: separate batch per newly visible subsection.
- On backend messages for invisible fields: lazy loading switched off to load relevant sections for navigation.
- On subsequent loads: header + visible subsections may be sent in a single GET batch.
```
--------------------------------

**TITLE**: Defining loadingBehavior for Object Page subsections (SAP Fiori elements OData V2)

**INTRODUCTION**: Configure when a subsection in an Object Page activates its binding (loads data) via the manifest. Use loadingBehavior to control waiting for header data and/or waiting until the subsection enters the viewport. Applicable only to SAP Fiori elements for OData V2.

**TAGS**: fiori-elements-framework, OData V2, object-page, manifest, loadingBehavior, subsection, waitForHeaderData, waitForViewportEnter

STEP: 1 - Identify subsection id

DESCRIPTION: Locate the subsection id under the Object Page (or subobject page) configuration in the manifest. The property path is:
pages -> ObjectPage|<ObjectPageId> -> component -> settings -> sections -> <SubsectionId>

LANGUAGE: JSON

CODE:
```json
// Example path (context): pages -> "ObjectPage|C_STTA_SalesOrder_WD_20" -> component.settings.sections -> "SalesOrderItemsID"
```

STEP: 2 - Add loadingBehavior properties

DESCRIPTION: Add the loadingBehavior object under the subsection entry. Set one or both of:
- waitForHeaderData: true/false — if true, the subsection waits until header data is loaded before activating its binding (useful when subsection table/chart needs additional filters from header).
- waitForViewportEnter: true/false — if true, the subsection waits to enter the viewport before activating its binding. If false, binding activation is independent of viewport and can load together with header data.

LANGUAGE: JSON

CODE:
```json
"loadingBehavior":{
	"waitForHeaderData":true/false,
	"waitForViewportEnter":true/false
}
```

STEP: 3 - Default behavior and property rules

DESCRIPTION:
- Default if loadingBehavior is not defined:
  - waitForHeaderData: false
  - waitForViewportEnter: true
- If you define one property and omit the other, the omitted property is considered false. Example: if you set waitForHeaderData: true and omit waitForViewportEnter, waitForViewportEnter is treated as false.

LANGUAGE: JSON

CODE:
```json
"loadingBehavior":{
	"waitForHeaderData":false,
	"waitForViewportEnter":true
}
```

STEP: 4 - Full manifest example (Object Page subsections)

DESCRIPTION: Insert loadingBehavior per subsection in the Object Page pages configuration. The following shows two subsections with different loadingBehavior settings.

LANGUAGE: JSON

CODE:
```json
"pages": {
                    "ObjectPage|C_STTA_SalesOrder_WD_20": {
                        "entitySet": "C_STTA_SalesOrder_WD_20",
                        "component": {
                            "name": "sap.suite.ui.generic.template.ObjectPage",
                            "settings": {
                                "sections": {
                                    "SalesOrderItemsID": {
                                        "navigationProperty": "to_Item",
                                        "entitySet": "C_STTA_SalesOrderItem_WD_20",
                                        "createMode": "inline",
                                        "tableSettings": {
                                            "inlineDelete": true
                                        },
                                        "loadingBehavior":{
                                            "waitForHeaderData":true,
                                            "waitForViewportEnter":false
                                        }
                                    },
                                    "ContactsID": {
                                        "loadingBehavior":{
                                            "waitForHeaderData":false,
                                            "waitForViewportEnter":false
                                        }
                                    }
                                }
```

STEP: 5 - Implementation guidance for code/extensions

DESCRIPTION: When using waitForHeaderData:true, implement any rebind or filter adjustments (for example, onBeforeRebindTableExtension) after header data is available. When waitForViewportEnter:false, subsection binding may run together with header data—ensure your handlers tolerate simultaneous loading.

LANGUAGE: Text

CODE:
```
// Implementation note (example):
// If you use waitForHeaderData: true, perform table/chart rebind logic in onBeforeRebindTableExtension
// after header data has been loaded to apply header-based filters before binding.
```
--------------------------------

**TITLE**: Deploy an SAP Fiori Application (Business Application Studio & Visual Studio Code)

**INTRODUCTION**: This guide gives minimal, action-oriented steps to deploy SAP Fiori applications using SAP Fiori tools from Business Application Studio (BAS) and Visual Studio Code (VS Code). It covers prerequisites, UI-driven deployment via the Fiori tools command, and common CLI-based deployment for Cloud Foundry (MTA) targets. For full vendor documentation, see: https://help.sap.com/docs/SAP_FIORI_tools/17d50220bcd848aa854c9c182d65b699/1b7a3be8d99c45aead90528ef472af37.html

**TAGS**: fiori-elements-framework, sap-fiori-tools, deployment, business-application-studio, visual-studio-code, cloud-foundry, mbt

STEP: 1 — Prerequisites and project preparation

DESCRIPTION: Ensure your environment and project are ready for deployment. Install required extensions/tools, build the app, and prepare any required artifacts (MTA archive) before running the deploy flow.

LANGUAGE: Bash / Checklist

CODE:
```bash
# 1. Install project dependencies and build the production bundle
npm install
npm run build

# 2. (Optional, if using Multi-Target Application (MTA) packaging)
# Install the mbt tool (if not already installed)
npm install -g @sap/mbt

# Build the MTA archive (produces mtar under mta_archives/)
mbt build

# 3. (Optional, Cloud Foundry CLI deployment)
# Install and login to CF CLI and target your org/space
cf login -a https://api.<region>.cf.<domain> -u <user> -p <password> -o <org> -s <space>

# Deploy the built MTA archive (replace <archive>.mtar)
cf deploy mta_archives/<project>.mtar -f
```

STEP: 2 — Deploy using SAP Fiori tools (Business Application Studio or VS Code UI)

DESCRIPTION: Use the SAP Fiori tools extension to run a wizard/command-driven deployment from the IDE. This is the recommended quick path to push an app to supported targets (BTP Cloud Foundry, ABAP, or other configured servers).

LANGUAGE: UI / Command Palette

CODE:
```text
# Typical UI-driven steps (use in BAS or VS Code with SAP Fiori tools installed):
1. Open your Fiori project in BAS or VS Code.
2. Open Command Palette:
   - Windows/Linux: Ctrl+Shift+P
   - macOS: Cmd+Shift+P
3. Run the Fiori tools deploy command:
   - Type: "Fiori: Deploy Application"  (or "SAP Fiori Tools: Deploy Application")
4. Follow the wizard:
   - Select the target type (Cloud Foundry / ABAP / Other)
   - Select destination / system (choose configured BTP/ABAP connection)
   - Provide credentials or choose a saved destination
   - Confirm transport/space/org settings if prompted
5. Monitor the Output/Terminal view for deployment logs and success messages.
```

STEP: 3 — CLI deployment to Cloud Foundry (MTA archive)

DESCRIPTION: Build an MTA archive and deploy it directly via the Cloud Foundry CLI. Use this when you need repeatable scripted deployments or CI/CD integration.

LANGUAGE: Bash

CODE:
```bash
# Build MTA archive
mbt build

# Login with CF CLI (one-time)
cf login -a https://api.<region>.cf.<domain> -u <user> -p <password> -o <org> -s <space>

# Deploy the MTA archive
cf deploy mta_archives/<project>.mtar -f

# Watch logs for the application or service instances as needed:
cf logs <app-name> --recent
```

STEP: 4 — ABAP deployment notes (using Fiori tools)

DESCRIPTION: SAP Fiori tools provide a UI path to deploy to ABAP systems (BSP/Flp). Use the IDE deploy command, choose ABAP as target, and supply the ABAP system connection or destination. For ABAP-specific requirements (transports, package, BSP name), respond to prompts in the wizard. See official docs for ABAP system setup.

LANGUAGE: Text / UI

CODE:
```text
# Typical ABAP deployment flow in IDE:
1. Open Command Palette -> "Fiori: Deploy Application"
2. Choose target -> ABAP
3. Enter/select ABAP destination (system alias, client, user)
4. Provide package name or local object (if required)
5. Confirm transport request or choose local change
6. Watch Output/Terminal for upload and activation messages
# For detailed ABAP prerequisites and steps, consult:
# https://help.sap.com/docs/SAP_FIORI_tools/17d50220bcd848aa854c9c182d65b699/1b7a3be8d99c45aead90528ef472af37.html
```

STEP: 5 — Troubleshooting common issues

DESCRIPTION: Quick checks when deployment fails: verify connectivity, credentials, built artifacts, target capacity, and review logs shown in IDE Output or CF logs.

LANGUAGE: Checklist

CODE:
```text
# Troubleshooting checklist:
- Confirm npm run build completed without errors.
- Verify mbt build produced an .mtar in mta_archives/.
- Ensure CF CLI is logged in to the correct org/space.
- For ABAP: Verify destination settings and transport availability.
- Check IDE Output and Terminal for detailed error messages.
- Retry with increased verbosity or check BTP cockpit / ABAP logs for server-side errors.
```


--------------------------------

**TITLE**: Extension Functions Reference — Adaptation Extensions for SAP Fiori elements (OData V2)

**INTRODUCTION**: Concise, action-oriented reference for implementing controller extension functions in adaptation extensions for SAP Fiori elements (OData V2). Each step shows what to implement, expected inputs/outputs, and minimal code examples demonstrating how to call the platform-provided helper functions (fnSetAppStateData, fnGetAppStateData, fnEnsureSelectionProperty, fnAddFilter, fnSetExtensionStateData, fnGetExtensionStateData, etc.).

**TAGS**: fiori-elements, adaptation, extension, odata-v2, list-report, object-page, overview-page, analytical-list-page

**STEP**: onInitSmartFilterBar

**DESCRIPTION**: Implement this method to react when the SmartFilterBar is initialized. Use it for any custom initialization of filter controls, registering events, or reading initial filter values.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Controller extension: called when SmartFilterBar is initialized
onInitSmartFilterBar: function (oEvent) {
  // oEvent.getSource() is the SmartFilterBar control
  var oSmartFilterBar = oEvent.getSource();

  // Example: attach a liveChange handler to a custom filter field
  var oCustomField = oSmartFilterBar.getControlByKey && oSmartFilterBar.getControlByKey("MyCustomFilter");
  if (oCustomField) {
    oCustomField.attachLiveChange(function () {
      // custom logic
      console.log("Custom filter changed");
    });
  }
}
```

**STEP**: provideExtensionAppStateData

**DESCRIPTION**: Store extension-specific app state into the framework-managed app state. Must call fnSetAppStateData(oControllerExtension, oAppState). The core ignores calls if oAppState is faulty.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Example implementation inside controller extension
provideExtensionAppStateData: function (fnSetAppStateData, oControllerExtension) {
  // Prepare a plain JSON object representing your extension state
  var oAppState = {
    myCustomFlag: true,
    selectedIds: ["A", "B", "C"]
  };

  // Call the provided helper to store state for this controller extension
  // Follow the documented call signature
  fnSetAppStateData(oControllerExtension, oAppState);
}
```

**STEP**: restoreExtensionAppStateData

**DESCRIPTION**: Restore extension state previously stored in the app state. Use fnGetAppStateData(oControllerExtension) to retrieve it. The function returns undefined if no state or a faulty state was stored.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Example implementation inside controller extension
restoreExtensionAppStateData: function (fnGetAppStateData, oControllerExtension) {
  // Retrieve stored state for this controller extension
  var oStoredState = fnGetAppStateData(oControllerExtension);

  if (oStoredState) {
    // Apply stored values back to controls or internal variables
    if (oStoredState.myCustomFlag) {
      // apply behavior
    }
    if (Array.isArray(oStoredState.selectedIds)) {
      this._applySelectedIds(oStoredState.selectedIds);
    }
  } else {
    // No state to restore
  }
}
```

**STEP**: ensureFieldsForSelect

**DESCRIPTION**: Ensure that specific fields are present in the $select clause of the table binding used by the control with id sControlId. For each field call fnEnsureSelectionProperty(oControllerExtension, sFieldname). sFieldname must be an entity field or a relative path via a 1:1 navigation property.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Example implementation inside controller extension
ensureFieldsForSelect: function (fnEnsureSelectionProperty, oControllerExtension, sControlId) {
  // Ensure direct entity property
  fnEnsureSelectionProperty(oControllerExtension, "CustomerName");

  // Ensure a property accessible via a 1:1 navigation: NavProp/Field
  fnEnsureSelectionProperty(oControllerExtension, "Address/City");

  // Repeat for all fields your custom code depends on
}
```

**STEP**: addFilters

**DESCRIPTION**: Add additional filters (combined with AND with other filters). For each filter call fnAddFilter(oControllerExtension, oFilter). oFilter must be an instance of sap.ui.model.Filter.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Example implementation inside controller extension
addFilters: function (fnAddFilter, oControllerExtension) {
  // Create sap.ui.model.Filter instances (import or global sap.ui.model.Filter)
  var Filter = sap.ui.model.Filter;

  // Example: Status EQ 'A'
  var oStatusFilter = new Filter("Status", sap.ui.model.FilterOperator.EQ, "A");
  fnAddFilter(oControllerExtension, oStatusFilter);

  // Example: Date >= 2020-01-01
  var oDateFilter = new Filter("CreatedDate", sap.ui.model.FilterOperator.GE, "2020-01-01");
  fnAddFilter(oControllerExtension, oDateFilter);
}
```

**STEP**: provideExtensionStateData (Object Page)

**DESCRIPTION**: Store extension-specific state for Object Page lifecycle. Call fnSetExtensionStateData(oControllerExtension, oExtensionState). The call is ignored if oExtensionState is faulty. Lifecycle object parameters (Page, Permanent, etc.) should be provided in oExtensionState.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Example implementation inside Object Page controller extension
provideExtensionStateData: function (fnSetExtensionStateData, oControllerExtension) {
  // oExtensionState should provide lifecycle info and your data
  var oExtensionState = {
    lifecycle: {
      page: "Transient",
      permanent: false
    },
    myExtensionData: {
      lastFocusedSection: "General",
      customSelections: ["X", "Y"]
    }
  };

  fnSetExtensionStateData(oControllerExtension, oExtensionState);
}
```

**STEP**: restoreExtensionStateData (Object Page)

**DESCRIPTION**: Restore previously stored extension state for Object Page. Use fnGetExtensionStateData(oControllerExtension) to retrieve it. The helper returns undefined for missing/faulty state. bIsSameAsLast indicates whether the current view equals the last stored view (true: no adaptation needed).

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Example implementation inside Object Page controller extension
restoreExtensionStateData: function (fnGetExtensionStateData, oControllerExtension, bIsSameAsLast) {
  var oExtensionState = fnGetExtensionStateData(oControllerExtension);

  if (!oExtensionState) {
    return;
  }

  if (bIsSameAsLast) {
    // No view adaptation required
    return;
  }

  // Apply stored extension state
  if (oExtensionState.myExtensionData) {
    this._applyLastFocusedSection(oExtensionState.myExtensionData.lastFocusedSection);
    this._applyCustomSelections(oExtensionState.myExtensionData.customSelections);
  }
}
```

**STEP**: provideStartupExtension (Overview Page)

**DESCRIPTION**: Modify the selection variant object that will be set on the Overview Page filter bar. The parameter is a reference to the selection variant expected by the Overview Page; modify it in-place.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Example implementation inside overview controller extension
provideStartupExtension: function (oSelectionVariant) {
  // oSelectionVariant structure varies. Modify select options or parameters as required.
  // Example: add selection for Customer = 'CUST01'
  if (!oSelectionVariant.SelectOptions) {
    oSelectionVariant.SelectOptions = {};
  }
  oSelectionVariant.SelectOptions.Customer = [
    { Sign: "I", Option: "EQ", Low: "CUST01", High: null }
  ];

  // No return required if modifying by reference
}
```

**STEP**: provideExtensionNavigation (Overview Page)

**DESCRIPTION**: Return a new or modified navigation entry (custom navigation) for the core. This method receives the standard navigation entry details for a card and context; return the modified/alternative navigation entry object the core should use.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Example implementation inside overview controller extension
provideExtensionNavigation: function (oNavigationEntry) {
  // Modify target route or parameters
  var oCustomNav = Object.assign({}, oNavigationEntry);

  // Example: change semantic object/action or add a custom parameter
  oCustomNav.semanticObject = "MyObject";
  oCustomNav.action = "display";
  oCustomNav.parameters = oCustomNav.parameters || {};
  oCustomNav.parameters.customParam = "value";

  // Return the custom navigation entry for the core to execute
  return oCustomNav;
}
```

**STEP**: provideCustomActionPress (Overview Page)

**DESCRIPTION**: Capture a custom action's press event and return an event object or perform custom logic. The method is defined in the controller extension and the core forwards the event.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Example implementation inside overview controller extension
provideCustomActionPress: function (oEvent) {
  // oEvent is the press event from the card/action
  var oPressedEvent = oEvent;

  // Custom behavior: show a message, modify event, etc.
  console.log("Custom action pressed", oPressedEvent);

  // Optionally return the event or a promise resolving to event details
  return oPressedEvent;
}
```

**STEP**: provideCustomParameter (Overview Page)

**DESCRIPTION**: Map a name/key to a function that provides custom parameters. The core calls this method with the key; return a function that resolves/returns the custom parameters (can be sync or return a Promise).

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Example implementation inside overview controller extension
provideCustomParameter: function (sName) {
  if (sName === "getCardParams") {
    // Return a function that provides parameters (can be async)
    return function () {
      return {
        param1: "value1",
        param2: 123
      };
    };
  }

  // For unknown names return undefined
  return undefined;
}
```

**STEP**: Related Information (file reference)

**DESCRIPTION**: Reference to the adaptation extensions how-to file for creating adaptation projects.

**LANGUAGE**: text

**CODE**:
```
Extending Delivered Apps Using Adaptation Extensions:
extending-delivered-apps-using-adaptation-extensions-52fc48b.md
```
--------------------------------

**TITLE**: Developing SAP Fiori Elements Apps (metadata-driven, no UI JS)

**INTRODUCTION**: Build SAP Fiori applications using Fiori elements: a template- and metadata-driven approach where SAPUI5 interprets OData metadata and annotations to assemble UI (predefined views/controllers). Use this guide to prepare OData services and annotations, scaffold a Fiori elements app, configure manifest.json, and reference annotation files and assets.

**TAGS**: fiori-elements-framework, sapui5, odata, annotations, metadata-driven, manifest.json, fiori-tools

**STEP**: 1 — Project layout and assets

**DESCRIPTION**: Use a standard webapp structure. Place the manifest.json in webapp/, annotation XML files in webapp/annotations/, and image assets in webapp/images/. Example file paths used by later steps are shown here.

**LANGUAGE**: text

**CODE**:
```text
Project root/
└─ webapp/
   ├─ manifest.json
   ├─ index.html
   ├─ annotations/
   │  └─ annotations.xml
   └─ images/
      └─ ImageMapEntryPage_dc8d2b1.png
```

**STEP**: 2 — Prepare an OData service with annotations

**DESCRIPTION**: Provide an OData service (V2 or V4) exposing entity sets and annotation references. Produce annotation XML (or EDMX/CDS) describing UI semantics (LineItem, FieldGroup, Identification, etc.). Store annotation files under webapp/annotations/ and ensure the service is reachable from the app.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- webapp/annotations/annotations.xml -->
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
  <edmx:Reference Uri="http://docs.oasis-open.org/odata/odata/v4.0/annotation">
    <edmx:Include Namespace="Org.OData.Core.V1" Alias="Core"/>
  </edmx:Reference>
  <edmx:DataServices>
    <Schema Namespace="MyService" xmlns="http://docs.oasis-open.org/odata/ns/edm">
      <EntityType Name="Product">
        <Key>
          <PropertyRef Name="ID"/>
        </Key>
        <Property Name="ID" Type="Edm.String"/>
        <Property Name="Name" Type="Edm.String"/>
        <Annotation Term="UI.LineItem">
          <Collection>
            <Record Type="UI.DataField">
              <PropertyValue Property="Value">
                <Path>Name</Path>
              </PropertyValue>
            </Record>
          </Collection>
        </Annotation>
      </EntityType>
    </Schema>
  </edmx:DataServices>
</edmx:Edmx>
```

**STEP**: 3 — Configure manifest.json dataSources and annotations

**DESCRIPTION**: In webapp/manifest.json, register the OData service under sap.app/dataSources and list annotation files. For Fiori elements apps, ensure "sap.ui5" and "sap.app" sections are set to use the OData dataSource and annotation files. Below is a minimal manifest snippet illustrating dataSource + annotation configuration.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.app": {
    "id": "my.fiori.elements.app",
    "type": "application",
    "applicationVersion": {
      "version": "1.0.0"
    }
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "mainService",
        "settings": {
          "synchronizationMode": "None"
        }
      }
    }
  },
  "sap.app": {
    "dataSources": {
      "mainService": {
        "uri": "/sap/opu/odata/sap/MY_SERVICE_SRV/",
        "type": "OData",
        "settings": {
          "annotations": [
            {
              "type": "XML",
              "uri": "annotations/annotations.xml"
            }
          ]
        }
      }
    }
  },
  "sap.ui": {
    "technology": "UI5"
  }
}
```

**STEP**: 4 — Scaffold a Fiori elements app (Fiori tools / template)

**DESCRIPTION**: Use SAP Business Application Studio or the Fiori tools VS Code extension to generate a Fiori elements project (List Report/Object Page or Analytical List Page) referencing the OData service. The generator creates a manifest.json configured for the chosen floorplan and wiring to annotations, so no application-specific view JS is required.

**LANGUAGE**: text

**CODE**:
```text
Recommended tooling:
- SAP Business Application Studio: Application Generator (Fiori)
- VS Code + SAP Fiori tools: use 'Fiori: Create Project from Template' -> choose 'Fiori Elements' -> select floorplan and OData service -> provide annotations file
```

**STEP**: 5 — How SAPUI5 uses metadata and annotations at runtime

**DESCRIPTION**: At startup SAPUI5 reads the OData service metadata and annotation files referenced in manifest.json. It automatically selects predefined views and controllers (floorplans) and binds data according to annotations (no custom UI JS required for standard patterns). Verify behavior during development by running the app locally or in SAP Cloud Platform to ensure annotation-driven UI renders as expected.

**LANGUAGE**: text

**CODE**:
```text
Runtime behavior summary:
- SAPUI5 reads OData metadata (+ EDMX) and annotation XML referenced in manifest.json
- Fiori elements runtime selects predefined floorplan views/controllers
- UI is assembled based on UI annotations (e.g., UI.LineItem, UI.FieldGroup)
- Minimal or no custom UI5 JS code needed for standard scenarios
```

**STEP**: 6 — Asset / documentation image reference

**DESCRIPTION**: Include diagrams, images, or links in your app documentation. Reference images from webapp/images/. Example image referenced in original docs is included here.

**LANGUAGE**: text

**CODE**:
```text
Image path used in docs:
webapp/images/ImageMapEntryPage_dc8d2b1.png
```
--------------------------------

**TITLE**: Developing Reuse Components for SAP Fiori elements (Object Page Sections)

**INTRODUCTION**: Practical, code-focused guide for implementing reusable UI components (reuse components) that can be embedded as sections in SAP Fiori elements object pages. Covers project structure, property handling, model propagation, lifecycle hooks (stStart/stRefresh), extension API usage, lazy loading, subpage definition, and navigation. Includes complete sample code snippets ready for copy/paste.

**TAGS**: fiori-elements-framework, reuse-component, sapui5, UI5, OData, object-page, extensionAPI, manifest.json, embeddedComponents

STEP: 1 — Project / Packaging Guidelines

DESCRIPTION: 
- Provide reuse components as libraries when they are consumed by multiple apps.  
- For one-time reuse, deliver the component inside the same application project.  
- Do not store instance-specific state in singletons—each reuse component instance must be instance-local.  
- Ensure the view hosting the reuse component content has a stable ID and define the view declaratively in manifest.json.

LANGUAGE: text

CODE:
```text
# Action:
# - If multi-app reuse: create a library/package for the reuse component.
# - If single app use: provide component inside the application project.
# - Avoid singletons for instance-level state.
# - Define and reference the host view declaratively in manifest.json for stable IDs.
```

STEP: 2 — Property Handling & Reserved Names

DESCRIPTION:
- Reuse components expose properties (metadata) that the embedding app sets. Setter and getter methods are autogenerated. The embedding app does not get direct access to the component instance.
- To react to property changes programmatically, override setter methods inside the reuse component.
- Method names starting with "st" or "_st" are reserved by SAP Fiori elements — do not define custom methods with these prefixes except the documented ones (stStart, stRefresh).  
- The method name getComponentModel is reserved by Fiori elements; beware when using component model features.
- When using ReuseComponentSupport.mixInto(this, modelName, bTwoWaySync?) you can:
  - Pass a model name (string) as second parameter — this creates a JSON model attached to the component retrievable via getComponentModel().
  - Optionally enable two-way sync (bTwoWaySync) to push JSON model changes back to the component properties (use with care).

LANGUAGE: JavaScript

CODE:
```javascript
sap.ui.define([
 "sap/ui/core/UIComponent",
 "sap/suite/ui/generic/template/extensionAPI/ReuseComponentSupport"
], function(UIComponent, ReuseComponentSupport) {
 "use strict";

 /* Definition of the reuse component */
 return UIComponent.extend("MyReuseComponent", {
  metadata: {
   manifest: "json",
   library: "myLibrary",   
   properties: {
    /* Standard properties for reuse components */

    uiMode: {
     type: "string",
     group: "standard"
    },
    semanticObject: {
     type: "string",
     group: "standard"
    },
    stIsAreaVisible: {
     type: "boolean",
     group: "standard"
    },
    
    /* Component specific properties */
   
    documentNumber: {
     type: "string",
     group: "specific",
     defaultValue: ""
    }
   }
  },
  
  // Standard life time event of a component. Used to transform this component into a reuse component for Fiori Elements
  init: function(){
    //Transform this component into a reuse component for Fiori Elements:
    ReuseComponentSupport.mixInto(this, "myPropertiesModelName");    
    // Defensive call of init of the super class:
    (UIComponent.prototype.init || jQuery.noop).apply(this, arguments);
  }
 });
});
```

STEP: 3 — Declarative Binding of Component Model in XML Views

DESCRIPTION: Use the component model created by mixInto for declarative bindings (read-only by default). Example shows binding to uiMode via the properties model name passed to mixInto.

LANGUAGE: XML

CODE:
```xml
<sfo:SmartForm xmlns:sfo="sap.ui.comp.smartform"
    editable="{= ${myPropertiesModelName>/uiMode} !== 'Display' }"
</sfo:SmartForm>
```

STEP: 4 — Two Techniques to React to Property Changes Programmatically

DESCRIPTION:
- Technique 1: Override the predefined setter (redefine setStIsAreaVisible).
- Technique 2: Use component model bindings and attach change handlers to property bindings.
- Place initialization and mixInto calls in init(); attach bindings after mixInto if you rely on the component model.

LANGUAGE: JavaScript

CODE:
```javascript
sap.ui.define([
 "sap/ui/core/UIComponent",
 "sap/suite/ui/generic/template/extensionAPI/ReuseComponentSupport"
], function(UIComponent, ReuseComponentSupport) {
 "use strict";


 /* Definition of the reuse component */
 return UIComponent.extend("MyReuseComponent", {
  metadata: {
   manifest: "json",
   library: "myLibrary",   
   properties: {
    /* Standard properties for reuse components */


    uiMode: {
     type: "string",
     group: "standard"
    },
    semanticObject: {
     type: "string",
     group: "standard"
    },
    stIsAreaVisible: {
     type: "boolean",
     group: "standard"
    },
     
    /* Component specific properties */
    

    documentNumber: {
     type: "string",
     group: "specific",
     defaultValue: ""
    }
   }
  },
 

  // Technique 1: Redefine the predefined setter-method
  setStIsAreaVisible: function(bIsAreaVisible){    
   if (bIsAreaVisible !== this.getStIsAreaVisible()){     
     this.setProperty("stIsAreaVisible", bIsAreaVisible); // ensure that the property is updated accordingly
     // ... (any code that wants to consume the changed visibility of the reuse component)
   }   
  },  
  
 
  // Standard life time event of a component. Used to transform this component into a reuse component for Fiori Elements and do some initialization
  init: function(){
   // Defensive call of init of the super class:
   (UIComponent.prototype.init || jQuery.noop).apply(this, arguments);
    //Transform this component into a reuse component for Fiori Elements:
    ReuseComponentSupport.mixInto(this, "myPropertiesModelName");
    // Technique 2: Attach to changes of the component model
    var oMyPropertiesModel = this.getComponentModel();
    var oPropertyBinding = oMyPropertiesModel.bindProperty("/documentNumber");
    oPropertyBinding.attachChange(function(){
      var sDocumentNumber = oMyPropertiesModel.getProperty("/documentNumber");
      // ... (any code that wants to consume the changed document number)
    }); 
  }
 });
});
```

STEP: 5 — Model Propagation Rules

DESCRIPTION:
- The unnamed OData model and a JSON model named "ui" from the embedding application are propagated to the reuse component. Additional internal JSON models may be propagated but must not be accessed.
- The binding context for the unnamed model is preset. By default, the binding context of the object page is propagated; embedding app can apply a relative binding to change it.
- Model propagation is critical when the reuse component accesses the same OData service as the embedding app.

LANGUAGE: text

CODE:
```text
# Behavior:
# - Unnamed OData model + "ui" JSON model from app → propagated to reuse component.
# - Binding context from the object page → propagated to reuse component (can be modified by relative binding).
# - Do NOT access other internal propagated models.
```

STEP: 6 — Lifecycle Hooks: stStart and stRefresh (Signatures & Use)

DESCRIPTION:
- Implement stStart(oModel, oBindingContext, oExtensionAPI) and/or stRefresh(oModel, oBindingContext, oExtensionAPI) to react to binding context changes or refresh events.
- stRefresh is called when: new binding context for embedding page, binding context refresh forced, or embedding page key changes. Called only after model propagation.
- stStart is called once (first occurrence); if both implemented, first occurrence calls stStart, subsequent occurrences call stRefresh.
- Parameters:
  - oModel: standard OData model of the app.
  - oBindingContext: binding context of the current page (may be null/faulty in create scenarios).
  - oExtensionAPI: extension API instance attached to this reuse component instance.
- Recommendation: implement stRefresh for change scenarios and data refresh needs.

LANGUAGE: text

CODE:
```text
# Signatures:
# stStart(oModel, oBindingContext, oExtensionAPI)
# stRefresh(oModel, oBindingContext, oExtensionAPI)
# - Implement stRefresh for refresh scenarios.
```

STEP: 7 — Lazy Loading + Refresh Example (Combine stRefresh with stIsAreaVisible)

DESCRIPTION:
- Example shows how to combine lazy loading (stIsAreaVisible toggle) and stRefresh. setStIsAreaVisible triggers refreshImpl(); stRefresh stores model/context/extensionAPI and triggers refreshImpl() that loads data only when visible and context exists.

LANGUAGE: JavaScript

CODE:
```javascript
sap.ui.define([
 "sap/ui/core/UIComponent",
 "sap/suite/ui/generic/template/extensionAPI/ReuseComponentSupport"
], function(UIComponent, ReuseComponentSupport) {
 "use strict";

 

 /* Definition of the Reuse Component */
 return UIComponent.extend("MyReuseComponent", {
  metadata: {
   manifest: "json",
   library: "myLibrary",   
   properties: {
    stIsAreaVisible: {
     type: "boolean",
     group: "standard"
    },    
  },
 

  setStIsAreaVisible: function(bIsAreaVisible){    
   if (bIsAreaVisible !== this.getStIsAreaVisible()){     
     this.setProperty("stIsAreaVisible", bIsAreaVisible); // ensure that the property is updated accordingly
     this.refreshImpl();
   }   
  },  
   

  // Standard life time event of a component. Used to transform this component into a Reuse Component for Fiori Elements and do some initialization
  init: function(){
   // Defensive call of init of the super class:
   (UIComponent.prototype.init || jQuery.noop).apply(this, arguments);
    //Transform this component into a reuse component for Fiori Elements:
    ReuseComponentSupport.mixInto(this);
  },


  stRefresh: function(oModel, oBindingContext, oExtensionAPI) {
    this.oModel = oModel;
    this.oBindingContext = oBindingContext;
    this.oExtensionAPI = oExtensionAPI;
    this.refreshImpl();
  },
 

  refreshImpl: function(){
     if (this.oBindingContext && this.getStIsAreaVisible()){
       // ... (any code that loads the data for the Reuse Component according to this.oBindingContext)
       this.oBindingContext = null;     
     }
  }
 });
});
```

STEP: 8 — Extension API Behavior & mixInto Return Value

DESCRIPTION:
- ReuseComponentSupport.mixInto returns a Promise resolving to the extension API instance attached to the reuse component instance.
- The extension API attached to each reuse component instance is a variant of the page extension API with modifications:
  - getNavigationController(): modified NavigationController able to navigate to pages defined in the reuse component and share a communication object.
  - getCommunicationObject(): getCommunicationObject(1) provides a communication object for communication with reuse component pages; subpages call getCommunicationObject() without parameters to retrieve it.
  - If embedded in an object page, extension API includes setSectionHidden(bHidden) to show/hide the section implemented by the reuse component.

LANGUAGE: text

CODE:
```text
# mixInto returns Promise -> resolves to extension API for reuse component instance.
# Extension API modifications:
# - getNavigationController(): supports internal navigation to reuse component pages.
# - getCommunicationObject(1): communication object to subpages.
# - setSectionHidden(bHidden): available for object page embedding.
```

STEP: 9 — Defining Subpages: Embedding App must include subpage manifest snippet

DESCRIPTION:
- The reuse component provider publishes a manifest snippet for subpages; each consumer must add that snippet inside their embedding declaration. The structure of "pages" must follow the pages structure used for object page subpages.

LANGUAGE: JSON

CODE:
```json
...    
"embeddedComponents": {        
    "myComponentEmbedding": {         
        "id": "myComponentEmbedding",         
        "componentName": "theEmbeddedComponent",                  
        "title": "{{I18N_KEY_FOR_REUSE_COMPONENT_TITLE}}",         
        "settings": {  
            "documentNumber": "{documentNumber}"
            },         
        "pages":{
            // add sub-pages here
        }
    }
}
```

STEP: 10 — Use Standard Object Pages as Subpages (Manifest + Navigation)

DESCRIPTION:
- Prefer using standard object pages as subpages of the reuse component. The embedding app must define the subpage entry in embeddedComponents.pages with navigationProperty and component.Name set to the ObjectPage component.
- The reuse component must be provided with the name of the navigation property (e.g., via property theNavigationPropertyName). Use NavigationController.navigateInternal to trigger internal navigation to the subpage.

LANGUAGE: JSON

CODE:
```json
...     
"embeddedComponents": {        
    "myComponentEmbedding": {         
        "id": "myComponentEmbedding",         
        "componentName": "theEmbeddedComponent",                  
        "title": "{{I18N_KEY_FOR_REUSE_COMPONENT_TITLE}}",         
        "settings": {  
            "theNavigationPropertyName": "myNavigationProperty"         },         
        "pages":{
                "ObjectPage|myNavigationProperty":{           
                "navigationProperty": "myNavigationProperty",           
                "entitySet": "myDependingEntitySet",           
                "component": {            
                    "name": "sap.suite.ui.generic.template.ObjectPage"          
                }          
            }
        }
    }
}
```

LANGUAGE: JavaScript

CODE:
```javascript
var oBindingContext = oEvent.getSource().getBindingContext();  // or any other way you have to get a binding context for the target page  
var oNavigationController = oExtensionAPI.getNavigationController(); // oExtensionAPI is the instance of the extension api which has been discussed above
var sNavigationProperty = this.getOwnerComponent().getTheNavigationPropertyName();   // retrieve the name of the navigation property (see comments below)
var oNavigationData = {
    navigationProperty: sNavigationProperty
};
oNavigationController.navigateInternal(oBindingContext, oNavigationData);
```

STEP: 11 — Additional Notes for OData V4

DESCRIPTION:
- SAP Fiori elements for OData V4:
  - Does not provide an eventing API for reuse components to support draft handling (create/save draft).
  - You can implement reuse components with an internal OData V4 model independent of the embedding app. If doing so, give the internal model a unique name to avoid conflict with the propagated unnamed OData model.

LANGUAGE: text

CODE:
```text
# OData V4 notes:
# - No eventing API for draft handling in reuse components.
# - If reusing an internal OData V4 model, provide a unique model name to avoid conflicts with the propagated unnamed OData model.
```
--------------------------------

**TITLE**: Field Representation Variants for SAP Fiori elements (OData V4) — Annotation and Manifest Recipes

**INTRODUCTION**: Action-oriented reference of annotation and manifest examples to render OData V4 fields in SAP Fiori elements. Use these concise, copy-ready snippets to implement common field representations: plain text, currency/unit, forms, KPIs/DataPoints, rating/progress indicators, links, multiline text, micro charts, file streams, boolean controls, timezone-aware timestamps, and masked inputs.

**TAGS**: fiori-elements-framework, OData V4, annotations, UI.DataField, UI.FieldGroup, UI.DataPoint, UI.MultiLineText, UI.InputMask, Common.Masked, Measures.ISOCurrency, Measures.Unit, manifest.json

STEP: 1 — Plain Text Facet (UI.FieldGroup wrapping UI.DataField)

DESCRIPTION: Represent a field as a simple key-value plain text facet. Add a UI.DataField inside a UI.FieldGroup annotation (XML), or equivalent in ABAP CDS or CAP CDS.

LANGUAGE: XML

CODE:
```xml
<Annotation Term="UI.FieldGroup" Qualifier="PlainText">
     <Record>
          <PropertyValue Property="Data">
                <Collection>
                     <Record Type="UI.DataField">
                           <PropertyValue Property="Value" Path="description" />
                       </Record>
                 </Collection>
          </PropertyValue>
      </Record>
</Annotation>
```

LANGUAGE: ABAP CDS

CODE:
```abap
@UI.fieldGroup: [
  {
    value: 'DESCRIPTION',
    type: #STANDARD,
    qualifier: 'PlainText'
  }
];
```

LANGUAGE: CDS

CODE:
```cds
UI.FieldGroup #PlainText: {
Data : [{
              $Type : 'UI.DataField',
               Value : description
       }]
}
```

STEP: 2 — Amount with Currency or Unit of Measure

DESCRIPTION: Display numeric amounts with currency or unit by annotating the amount property and linking Measures.ISOCurrency or Measures.Unit on the currency/unit property. Use these annotations on your entity properties so Fiori renders aligned amount + currency/unit.

LANGUAGE: XML (usage hint)

CODE:
```xml
<!-- Annotate the numeric field and the related currency/unit field -->
<!-- Use Measures.ISOCurrency on the currency property and Measures.Unit on the unit property -->
<!-- Example concept: -->
<!-- Amount property: Path="price" -->
<!-- Currency property: @Org.OData.Measures.V1.ISOCurrency or @Org.OData.Measures.V1.Unit -->
```

STEP: 3 — Representation as Part of a Form (Field grouping)

DESCRIPTION: Group fields into a form using UI.FieldGroup annotations and link them to the object page form. See grouping-of-fields for complex patterns; sample FieldGroup is used in Step 1.

LANGUAGE: XML

CODE:
```xml
<!-- Use UI.FieldGroup with Data collection of UI.DataField records to define a form section -->
<Annotation Term="UI.FieldGroup" Qualifier="General">
  <Record>
    <PropertyValue Property="Data">
      <Collection>
        <Record Type="UI.DataField"><PropertyValue Property="Value" Path="field1"/></Record>
        <Record Type="UI.DataField"><PropertyValue Property="Value" Path="field2"/></Record>
      </Collection>
    </PropertyValue>
  </Record>
</Annotation>
```

STEP: 4 — Key Value Facet or KPI using UI.DataPoint

DESCRIPTION: Render a key value facet or KPI using UI.DataPoint. Use DataPoint properties Title, Value, Criticality and optionally CriticalityRepresentation. The DataPoint can be used in headers and facets.

LANGUAGE: XML

CODE:
```xml
<Annotation Term="UI.DataPoint" Qualifier="Availability">
      <Record Type="UI.DataPointType">
           <PropertyValue Property="Title" String="Availability" />
           <PropertyValue Property="Value" Path="stock/availability" />
           <PropertyValue Property="Criticality" Path="stock/availability"/>
       </Record>
</Annotation>
```

LANGUAGE: ABAP CDS

CODE:
```abap
@UI.dataPoint: {
  title: 'Availability',
  criticality: 'availability'
}
availability;
```

LANGUAGE: CDS

CODE:
```cds
UI.DataPoint #Availability                               : {
        Value                : stock.availability,
        Title                : 'Availability',
       Criticality         :  stock.availability
}
```

STEP: 5 — KPI via DataField with Criticality (object status control)

DESCRIPTION: Instead of DataPoint, mark a DataField with Criticality and CriticalityRepresentation to render as KPI/object status control.

LANGUAGE: XML

CODE:
```xml
<Record Type="SAP__UI.DataField">
    <PropertyValue Property="Criticality" Path="OvrlDeliveryStatusCriticality"/>
    <PropertyValue Property="CriticalityRepresentation" EnumMember="SAP__UI.CriticalityRepresentationType/WithoutIcon"/>
    <PropertyValue Property="Value" Path="OverallDeliveryStatus"/>
    <Annotation Term="SAP__UI.Importance" EnumMember="SAP__UI.ImportanceType/High"/>
</Record>
```

LANGUAGE: ABAP CDS

CODE:
```abap
@UI.dataPoint: {
  criticality: 'OvrlDeliveryStatusCriticality',
  criticalityRepresentation: #WITHOUT_ICON
}
OverallDeliveryStatus;
```

LANGUAGE: CDS

CODE:
```cds
{
        $Type : 'UI.DataField',
        Value : OverallDeliveryStatus,
       Criticality :  OvrlDeliveryStatusCriticality,
             ![@UI.CriticalityRepresentation ]        :  #WithoutIcon 
}
```

STEP: 6 — Rating Indicator (UI.DataPoint Visualization = Rating)

DESCRIPTION: Render a rating indicator by setting UI.DataPoint Visualization to Rating and providing Value and TargetValue (max stars).

LANGUAGE: XML

CODE:
```xml
<Annotation Term="UI.DataPoint" Qualifier="averageRating">
      <Record>
           <PropertyValue Property="Value" Path="averageRating" />
            <PropertyValue Property="TargetValue" Decimal="5" />
            <PropertyValue Property="Visualization"EnumMember="UI.VisualizationType/Rating" />
      </Record>
</Annotation>
```

LANGUAGE: ABAP CDS

CODE:
```abap
@UI.dataPoint: {
  targetValue: 5,
  visualization: #RATING
}
averageRating;
```

LANGUAGE: CDS

CODE:
```cds
DataPoint #averageRating               : {
        Value         : averageRating,
        TargetValue   : 5.0,
        Visualization : #Rating
}
```

STEP: 7 — Progress Indicator (UI.DataPoint Visualization = Progress)

DESCRIPTION: Render progress bars by setting UI.DataPoint Visualization to Progress and providing Value and TargetValue.

LANGUAGE: XML

CODE:
```xml
<Annotation Term="UI.DataPoint" Qualifier="quantity">
      <Record>
           <PropertyValue Property="Value" Path="stock/quantity" />
            <PropertyValue Property="TargetValue" Decimal="100" />
            <PropertyValue Property="Visualization"EnumMember="UI.VisualizationType/Progress" />
       </Record>
</Annotation>
```

LANGUAGE: ABAP CDS

CODE:
```abap
@UI.dataPoint: {
  targetValue: 100,
  visualization: #PROGRESS
}
quantity;
```

LANGUAGE: CDS

CODE:
```cds
DataPoint #quantity               : {
        Value         : stock.quantity,
        TargetValue   : 100.0,
        Visualization : #Progress
}
```

STEP: 8 — Links: Semantic Link, Quick View, Contact Card, Contact Links, Basic Links

DESCRIPTION: Multiple link patterns — semantic object link for intent-based navigation, quick view and contact card (DataFieldForAnnotation pointing to Communication.Contact), contact links (IsPhoneNumber / IsEmailAddress), and basic hyperlinks (DataFieldWithUrl). Use the matching annotation style for ABAP CDS / CAP CDS.

LANGUAGE: XML (Semantic Object)

CODE:
```xml
<Annotations Target="clouds.products.CatalogService.Products/SoldToParty">
    <Annotation Term="Common.SemanticObject" String="supplier"/>
</Annotations>
```

LANGUAGE: ABAP CDS (Semantic Object)

CODE:
```abap
annotate view PRODUCTS.CATALOGSERVICE.PRODUCTS with {
@Consumption.semanticObject: 'supplier'
soldtoparty;
}
```

LANGUAGE: CDS (Semantic Object)

CODE:
```cds
SoldToParty                   : String(10)                            @(Common : {
SemanticObject                  : 'supplier'
});
```

LANGUAGE: XML (Quick View / Contact Card via DataFieldForAnnotation)

CODE:
```xml
<Annotations Target="clouds.products.CatalogService.Products">
    <Annotation Term="UI.LineItem">
        <Collection>
            <Record Type="UI.DataFieldForAnnotation">
                <PropertyValue Property="Label" String="Supplier"/>
                <PropertyValue Property="Target" AnnotationPath="supplier/@Communication.Contact"/>
            </Record>
        </Collection>
    </Annotation>
</Annotations>

<Annotations Target="sap.fe.manageitems.TechnicalTestingService.Supplier/phoneNumber">
    <Annotation Term="Common.Label" String="Mobile"/>
    <Annotation Term="Communication.IsPhoneNumber" Bool="true"/>
</Annotations>

<Annotations Target="sap.fe.manageitems.TechnicalTestingService.Supplier/emailAddress">
    <Annotation Term="Common.Label" String="Email"/>
    <Annotation Term="Communication.IsEmailAddress" Bool="true"/>
</Annotations>
```

LANGUAGE: ABAP CDS (Contact Card)

CODE:
```abap
annotate view PRODUCTS.CATALOGSERVICE.PRODUCTS with {
@UI.lineItem: [
  {
    label: 'Supplier',
    value: 'SUPPLIER',
    type: #AS_CONTACT,
    position: 1 
  }
]
SupplierID; 
}

annotate view FE.MANAGEITEMS.TECHNICALTESTINGSERVICE.SUPPLIER with { 
    @Semantics.eMail.address: true
    @EndUserText.label: 'EMail'
    emailAddress;
    @Semantics.telephone.type:  [ #CELL ]
    @EndUserText.label: 'Mobile'
    phoneNumber;
}
```

LANGUAGE: CDS (Contact Card)

CODE:
```cds
UI.LineItem                         : [
    {
        $Type  : 'UI.DataFieldForAnnotation',
        Target : 'supplier/@Communication.Contact',
        Label  : 'Supplier'
    }
]
phoneNumber             : String(15)         @(
            title     : 'Mobile',
            Communication.IsPhoneNumber
);
emailAddress             : String(241)         @(
            title     : 'Email',
            Communication.IsEmailAddress
);
```

LANGUAGE: XML (Contact Links: phone/email)

CODE:
```xml
<Annotations Target="sap.fe.manageitems.TechnicalTestingService.LineItems/phoneNumber">
    <Annotation Term="Common.Label" String="Mobile"/>
    <Annotation Term="Communication.IsPhoneNumber" Bool="true"/>
</Annotations>
```

```xml
<Annotations Target="sap.fe.manageitems.TechnicalTestingService.LineItems/emailAddress">
    <Annotation Term="Common.Label" String="Email"/>
    <Annotation Term="Communication.IsEmailAddress" Bool="true"/>
</Annotations>
```

LANGUAGE: XML (Basic link with DataFieldWithUrl)

CODE:
```xml
<Annotation Term="UI.FieldGroup" Qualifier="DataFieldUrl">
    <Record Type="UI.FieldGroupType">
        <PropertyValue Property="Data">
            <Collection>
                <Record Type="UI.DataFieldWithUrl">
                    <PropertyValue Property="Url" String="www.sap.com"/>
                    <PropertyValue Property="Value" String="This is an URL"/>
                    <PropertyValue Property="IconUrl" String="sap-icon://arrow-right"/>
                </Record>
                <Record Type="UI.DataFieldWithUrl">
                    <PropertyValue Property="Url" String="www.sap.com"/>
                    <PropertyValue Property="Value" String=""/>
                    <PropertyValue Property="IconUrl" Path="oneIcon"/>
                </Record>
                <Record Type="UI.DataFieldWithUrl">
                    <PropertyValue Property="Url" Path="oneUrl"/>
                    <PropertyValue Property="Value" String="This is an URL three"/>
                    <PropertyValue Property="IconUrl" String="sap-icon://arrow-right"/>
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

LANGUAGE: ABAP CDS (Basic link)

CODE:
```abap
@UI.fieldGroup: [
  {
    iconUrl: 'sap-icon://arrow-right'
    type: #WITH_URL,
    position: 1 ,
    qualifier: 'DataFieldUrl'
  },
  {
    url: 'ONEURL',
    value: 'ONEURL',
    type: #WITH_URL,
    position: 2 ,
    qualifier: 'DataFieldUrl'
  }
]
```

LANGUAGE: CDS (Basic link)

CODE:
```cds
UI.FieldGroup #DataFieldUrl: {
Data : [{
              $Type : 'UI.DataFieldWithUrl',
              Url   : 'www.sap.com',
              Value : 'This is an URL',
              IconUrl: 'sap-icon://arrow-right',
       },
       {
              $Type  : 'UI.DataFieldWithUrl',
              Url    : oneDisplay,
              Value  : oneUrl,
              IconUrl: oneIcon
}
}]
```

STEP: 9 — TextArea / ExpandableText (UI.MultiLineText + manifest controlConfiguration)

DESCRIPTION: Use UI.MultiLineText on a property to render TextArea in edit mode and ExpandableText in display. Configure defaults and custom lengths via manifest.json controlConfiguration > fields/columns. Use formatOptions keys: textLinesEdit, textMaxLines, textMaxCharactersDisplay, textExpandBehaviorDisplay, textMaxLength.

LANGUAGE: XML

CODE:
```xml
<Annotations Target="com.c_salesordermanage_sd.SalesOrderManage">
    <Annotation Term="Common.Label" String="Customer Reference"/>
    <Annotation Term="UI.MultiLineText" Bool="true"/>
</Annotations>
```

LANGUAGE: JSON

CODE:
```json
{
  "sap.ui5": {
    "routing": {
      "targets": {
        "SalesOrderManageObjectPage": {
          "options": {
            "settings": {
              "controlConfiguration": {
                "@com.sap.vocabularies.UI.v1.FieldGroup#myQualifier": {
                  "fields": {
                    "DataField::myFormTextField": {
                      "formatOptions": {
                        "textLinesEdit": "6",
                        "textMaxCharactersDisplay": "Infinity"
                      }
                    }
                 }
              },
              "myEntity/@com.sap.vocabularies.UI.v1.LineItem": {
                  "columns": {
                    "DataField::myTableTextField": {
                      "formatOptions": {                                         
                        "textLinesEdit": "3",
                        "textMaxLines": "5",
                        "textMaxCharactersDisplay": "400",
                        "textExpandBehaviorDisplay" : "Popover"
                      }
                    }
                  }
                }
             }
           }
         }
       }
     }
  }
}
```

LANGUAGE: Text (formatOptions summary)

CODE:
```text
formatOptions keys:
- textLinesEdit: number/string -> visible lines in edit mode (default 4)
- textMaxLines: number/string -> maximum growth lines in edit mode
- textMaxCharactersDisplay: number/string or "Infinity" -> chars shown before "More"
- textExpandBehaviorDisplay: "InPlace" | "Popover" -> how full text is displayed
- textMaxLength: number/string -> max characters allowed in edit input
```

STEP: 10 — Micro Chart Facet

DESCRIPTION: Annotate a field to render a micro chart facet; use the Micro Chart facet and related annotations to show critical measures/criticality. See micro-chart-facet and adding-a-micro-chart-to-a-table for patterns.

LANGUAGE: XML (hint)

CODE:
```xml
<!-- Example: add a micro chart annotation referencing a chart facet annotation on the entity -->
<!-- See Micro Chart Facet docs for full examples -->
```

STEP: 11 — File Upload/Download (Edm.Stream)

DESCRIPTION: Enable Edm.Stream on entity properties to allow file upload/download in object page forms. Follow Enabling Stream Support doc for required OData service and annotations.

LANGUAGE: XML (hint)

CODE:
```xml
<!-- Annotate the property as Edm.Stream in the service metadata and add form binding to display upload/download controls -->
```

STEP: 12 — Boolean Properties: Checkbox or Radio Buttons

DESCRIPTION: Boolean property renders as checkbox by default. To render as immediate-action radio buttons (Yes/No), set formatOptions.useRadioButtonsForBoolean either in XML view macros or in manifest controlConfiguration.

LANGUAGE: XML (View macros)

CODE:
```xml
<macros:Field metaPath="BooleanProperty" >
    <macros:formatOptions>
        <macrosF:FieldFormatOptions useRadioButtonsForBoolean="true"/>
    </macros:formatOptions>
</macros:Field>
```

LANGUAGE: JSON (manifest.json controlConfiguration)

CODE:
```json
{
  "controlConfiguration": {
    "@com.sap.vocabularies.UI.v1.FieldGroup#GeneralInformation": {
      "fields": {
        "DataField::booleanField": {
          "formatOptions": {
            "useRadioButtonsForBoolean": true
          }
        }
      }
    }
  }
}
```

STEP: 13 — Timestamp with Timezone (Common.IsTimezone)

DESCRIPTION: Annotate a property that contains a timezone code with @Common.IsTimezone so the UI shows timezone text in display mode. Use with datetime fields to render timezone information.

LANGUAGE: XML (hint)

CODE:
```xml
<!-- Annotate timezone code property -->
<!-- Example: @Common.IsTimezone on the timezone property associated with a timestamp -->
```

STEP: 14 — Masked Input Field (UI.InputMask) and Masked Display (Common.Masked)

DESCRIPTION: Use UI.InputMask on properties to enforce input format on the client. Define Mask, PlaceholderSymbol, and Rules for MaskSymbol regular expressions. For display masking (password-style), use Common.Masked to visually conceal values. Ensure placeholder symbol != mask symbols and use ^ (caret) to escape rule characters as immutable.

LANGUAGE: XML (UI.InputMask examples)

CODE:
```xml
<Annotations Target="sap.fe.core.MaskInputMassEdit.MainEntity/MaskedInputPhone"> 
          <Annotation Term="UI.InputMask"> 
              <Record> 
                   <PropertyValue Property="Mask" String="(***) *** ******"/> 
                   <PropertyValue Property="PlaceholderSymbol" String="_"/> 
              </Record> 
          </Annotation> 
          <Annotation Term="UI.Placeholder" String="Enter twelve-digit number"/> 
</Annotations> 

<Annotations Target="sap.fe.core.MaskInputMassEdit.MainEntity/MaskedInputRegistration"> 
          <Annotation Term="UI.InputMask"> 
                <Record> 
                   <PropertyValue Property="Mask" String="I____-__"/> 
                   <PropertyValue Property="PlaceholderSymbol" String="_"/> 
                   <PropertyValue Property="Rules"> 
                        <Collection> 
                                  <Record> 
                                       <PropertyValue Property="MaskSymbol" String="_"/> 
                                       <PropertyValue Property="RegExp" String="[0-9]"/> 
                                  </Record> 
                        </Collection> 
                   </PropertyValue> 
               </Record> 
          </Annotation> 
</Annotations>
```

LANGUAGE: CDS (CAP InputMask examples)

CODE:
```cds
MaskedInputPhone   : String          @( 
      UI.InputMask  : { 
         Mask       : '(***) *** ******', 
         PlaceholderSymbol: '_', 
      }, 
      UI.Placeholder: 'Enter twelve-digit number' 
      ); 
     MaskedInputRegistration    : String          @( 
      UI.InputMask  : { 
        Mask       : 'I****-**', 
        PlaceholderSymbol: '_', 
        Rules      : [{ 
         MaskSymbol: '*', 
         RegExp    : '[0-9]' 
        }] 
      }, 
      UI.Placeholder: 'Enter digits registration number' 
); 
     MaskedInputSAP            : String          @(
  UI.InputMask  : {
    Mask             : 'S^AP-AA-999',
    PlaceholderSymbol: '_',
    Rules            : [
      {
        MaskSymbol: '9',
        RegExp    : '[0-9]'
      },
      {
        MaskSymbol: 'A',
        RegExp    : '[A-Z]'
      }
    ]
  },
  UI.Placeholder: 'Starts with SAP followed by two uppercase letter and three digits'
);
```

LANGUAGE: XML (Common.Masked)

CODE:
```xml
<Annotations Target="sap.fe.core.FieldDisplayStyles.RootEntity/MaskedField"> 
        <Annotation Term="Common. Masked" Bool="true"/> 
</Annotations>
```

LANGUAGE: CDS (Common.Masked)

CODE:
```cds
MaskedField  : String  @Common : {Masked: true};
```


--------------------------------

**TITLE**: Disabling the Editing Status Filter

**INTRODUCTION**: Disable the default Editing Status filter that appears on list report pages for draft-enabled Fiori elements applications. Use annotation changes (XML or CAP CDS) to remove the DraftAdministrativeData filter so end users cannot filter by editing status.

**TAGS**: fiori-elements-framework, annotations, draft, filter, list-report, EditingStatus

**STEP**: 1 — When to use this change

**DESCRIPTION**: Use this when you want to remove the Editing Status filter from list reports in draft-enabled applications. Note: removing this filter prevents end users from filtering objects by editing/draft status.

**LANGUAGE**: text

**CODE**:
```text
Purpose: Remove the Editing Status (DraftAdministrativeData) filter from list reports.
Consequence: End users can no longer filter objects based on editing status.
```

**STEP**: 2 — Add XML annotation to disable the Editing Status filter

**DESCRIPTION**: Add the following XML annotation to your app's annotation file (the XML annotation file your app consumes) to set Filterable=false on the DraftAdministrativeData navigation property. This uses the Capabilities.NavigationRestrictions / RestrictedProperties / NavigationPropertyRestriction / FilterRestrictions structure.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="TravelService.EntityContainer/Travel">
   <Annotation Term="Capabilities.NavigationRestrictions">
      <Record Type="Capabilities.NavigationRestrictionsType">
         <PropertyValue Property="RestrictedProperties">
            <Collection>
               <Record Type="Capabilities.NavigationPropertyRestriction">
                  <PropertyValue Property="NavigationProperty" NavigationPropertyPath="DraftAdministrativeData"/>
                  <PropertyValue Property="FilterRestrictions">
                     <Record Type="Capabilities.FilterRestrictionsType">
                        <PropertyValue Property="Filterable" Bool="false"/>
                     </Record>
                  </PropertyValue>
               </Record>
           </Collection>
        </PropertyValue>
      </Record>
   </Annotation>
</Annotations>
```

**STEP**: 3 — Add CAP CDS annotation to disable the Editing Status filter

**DESCRIPTION**: For CAP-based services, add this CDS annotate block to the service model so that DraftAdministrativeData is marked as not filterable. Place it in your service CDS file or an appropriate annotation CDS file that is deployed with the service.

**LANGUAGE**: CDS

**CODE**:
```c
annotate TravelService.Travel with @(
Capabilities: {
   NavigationRestrictions : {
       $Type : 'Capabilities.NavigationRestrictionsType',
       RestrictedProperties : [
           {
               $Type : 'Capabilities.NavigationPropertyRestriction',
               NavigationProperty : DraftAdministrativeData,
               FilterRestrictions : {
                   $Type : 'Capabilities.FilterRestrictionsType',
                   Filterable : false,
               },
           },
       ],
   },
});
```

**STEP**: 4 — ABAP CDS annotation guidance

**DESCRIPTION**: No ABAP CDS sample is provided. If you are using ABAP CDS and need the same behavior, implement the equivalent annotation in your local XML annotation file consumed by the UI.

**LANGUAGE**: ABAP CDS

**CODE**:
```text
No ABAP CDS annotation sample is available. Please use the local XML annotation.
```

**STEP**: 5 — Verify and consider user impact

**DESCRIPTION**: After deploying the annotation change, verify the list report UI: the Editing Status filter should no longer appear. Inform stakeholders because end users will no longer be able to filter by editing status (draft/active).
--------------------------------

**TITLE**: Displaying and Controlling Actions on the Object Page (Fiori Elements)

**INTRODUCTION**: This document summarizes rules and actionable examples for where and how actions are displayed on the Object Page in SAP Fiori elements (OData V4). It explains display order, mode-based placement, how to set action criticality using annotations, and how to change order using the "position" property (manifest-based or annotation-based actions). Use the snippets as templates and adapt to your service/manifest structure.

**TAGS**: fiori-elements, object-page, actions, annotations, manifest, odata-v4, criticality, semantic-actions

STEP: 1 — Default order of actions in the Object Page header

DESCRIPTION: The Object Page header displays actions in a specific default order. Use this to anticipate where actions appear by default and where to override placement if needed.

- Default display order:
  1. Generic actions (e.g., Save, Edit)
  2. Application-specific actions (order as defined in metadata)
  3. Manifest-based custom actions
  4. Related Apps button
  5. Other generic actions (e.g., Share)

- Note: For OData V4, if semantic actions (with criticality) are defined, they are automatically placed first and may change emphasis of standard generic actions.

LANGUAGE: None

CODE:
```text
# No code for this step — conceptual rules only.
# Reference: Adding Custom Actions Using Extension Points (see section "Additional Features in SAP Fiori elements for OData V4")
# Related docs:
# - enabling-actions-in-the-object-page-header-5fe4396.md
# - adding-custom-actions-using-extension-points-7619517.md
```

STEP: 2 — Display of actions depending on mode (Display vs Edit/Create)

DESCRIPTION: Actions appear in different toolbars depending on the current object page mode. Implement or place actions accordingly:

- Display mode: actions are shown in the header toolbar.
- Edit/Create mode: relevant actions are moved to the footer bar (e.g., Edit mode -> Save, Cancel; Create mode -> Create, Cancel).

LANGUAGE: None

CODE:
```text
# No code for this step — behavioral rules only.
# Visual reference: Object Page Footer Bar (Edit Mode) screenshot (images/Object_Page_Footer_Bar_Edit_Mode_2c8767f.png)
```

STEP: 3 — Set action criticality via OData annotations (OData V4) — XML example

DESCRIPTION: Add criticality to actions using annotations so the runtime can style and treat them as semantic actions (these may be prioritized). The example below shows an OData V4 annotation using UI.v1.DataFieldForAction with a Criticality enum value. Adapt Target, Action name, and enum to your model.

LANGUAGE: XML

CODE:
```xml
<Annotations Target="YourServiceNamespace.YourEntityType">
  <Annotation Term="com.sap.vocabularies.UI.v1.LineItem">
    <Collection>
      <Record Type="com.sap.vocabularies.UI.v1.DataFieldForAction">
        <PropertyValue Property="Action" String="Approve"/>
        <PropertyValue Property="Label" String="Approve"/>
        <!-- Use the appropriate Criticality enum member for your case -->
        <PropertyValue Property="Criticality" EnumMember="com.sap.vocabularies.UI.v1.CriticalityType/High"/>
      </Record>
    </Collection>
  </Annotation>
</Annotations>
```

STEP: 4 — Set action criticality via CDS annotations (CAP/ABAP CDS style example)

DESCRIPTION: If you use CDS annotations, declare the action and annotate the entity to mark the action as a line-item action with criticality. This example shows the concept (adapt to your exact CDS syntax / tooling):

LANGUAGE: CDS

CODE:
```cds
entity SalesOrder {
  key ID : UUID;
  // fields...
}

// Define action (service or entity action)
action approve() returns Boolean;

// Annotate the action for UI with criticality
annotate SalesOrder with {
  @UI.lineItem : [
    { type           : #DataFieldForAction,
      label          : 'Approve',
      action         : 'approve',
      criticality    : #High
    }
  ]
};
```

STEP: 5 — Change order of actions using "position" (manifest-based and annotation-based)

DESCRIPTION: You can change the order of action buttons defined in the manifest or annotations by specifying a "position" property. Use position to place actions before/after other actions or at particular positions in the header/footer. The snippet below shows a manifest-based configuration skeleton — adapt keys, page structure and property names to your project manifest layout and Fiori elements version. Consult "Adding Custom Actions Using Extension Points" for exact manifest schema for your FE version.

LANGUAGE: JSON

CODE:
```json
{
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "SalesOrders",
        "component": "sap.suite.ui.generic.template.ObjectPage",
        "settings": {
          "header": {
            "actions": {
              "ZCustomAction": {
                "label": "My Custom",
                "target": "ZCustomAction",
                "press": "onCustomAction",
                "position": "After" /* Example values: "Before" | "After" | "First" | "Last" — check your FE version docs */
              }
            }
          }
        }
      }
    ]
  }
}
```

STEP: 6 — Additional considerations and references

DESCRIPTION: Summary of important operational notes and where to look for more detail:

- Semantic/criticality-enabled actions (OData V4) are placed automatically before generic actions — this can change emphasis behavior.
- You can reorder both manifest-based and annotation-based actions via "position".
- Related topics to implement or review:
  - Enabling Actions in the Object Page Header (enabling-actions-in-the-object-page-header-5fe4396.md)
  - Adding Custom Actions Using Extension Points (adding-custom-actions-using-extension-points-7619517.md)
  - Adding Action Buttons to Forms in Sections (adding-action-buttons-to-forms-in-sections-e64efda.md)
  - Defining Determining Actions (defining-determining-actions-1743323.md)
  - Setting the Criticality for Actions (setting-the-criticality-for-actions-12f2ba2.md)
  - Generic Action Buttons in Tables on the Object Page: Additional Considerations (generic-action-buttons-in-tables-on-the-object-page-additional-considerations-d27ae99.md)

LANGUAGE: None

CODE:
```text
# Use the linked documentation files for full schema and exact property names for your Fiori elements version:
# - adding-custom-actions-using-extension-points-7619517.md
# - setting-the-criticality-for-actions-12f2ba2.md
# - enabling-actions-in-the-object-page-header-5fe4396.md
```
--------------------------------

**TITLE**: Configuring Decimal Alignment and Display for Currency and Unit of Measure in SAP Fiori Elements (OData V4)

**INTRODUCTION**: This document explains how to control decimal alignment and decimal display for currency and unit-of-measure fields in SAP Fiori elements (OData V4) tables. Use manifest.json keys to set decimal padding for alignment, preserve backend-decimal precision for currency, and restrict unit decimals to the unit's defined scale.

**TAGS**: fiori-elements-framework, sap.fe, manifest.json, currency, unitOfMeasure, decimalPadding, preserveDecimalsForCurrency, showOnlyUnitDecimals, OData V4

**STEP**: 1 — Alignment behavior and default padding

**DESCRIPTION**: Understand default visual behavior and padding used for alignment in table display mode:
- Amounts are aligned on the decimal separator.
- Currency or unit-of-measure labels are right-aligned.
- Default decimal padding used to align amounts: currency = 5, unitOfMeasure = 3.

Use these defaults as a baseline before overriding in manifest.json.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "alignment": {
    "amountAlignedOn": "decimalSeparator",
    "labelAlignedOn": "right",
    "defaults": {
      "currencyDecimalPadding": 5,
      "unitOfMeasureDecimalPadding": 3
    }
  }
}
```

**STEP**: 2 — Change decimal padding for currency and unit-of-measure

**DESCRIPTION**: Override the default decimalPadding values for currency and unitOfMeasure to control the padding (number of decimal positions reserved for alignment). Add these keys under "sap.fe.macros.table" in your app's manifest.json.

File: manifest.json

**LANGUAGE**: JSON

**CODE**:
```json
"sap.fe": {
    "macros": {
        "table": {
            "currency": {
                "decimalPadding": 5
            },
            "unitOfMeasure": {
                "decimalPadding": 3
            }
        }
    }
}
```

**STEP**: 3 — Preserve exact decimal places returned from the backend for currency

**DESCRIPTION**: To display currency values with the exact number of decimal places provided by the backend (do not round or trim), enable the preserveDecimalsForCurrency flag under "sap.fe.app" in manifest.json.

File: manifest.json

**LANGUAGE**: JSON

**CODE**:
```json
"sap.fe": {
    "app": {
        "preserveDecimalsForCurrency": true
    }
}
```

**STEP**: 4 — Limit decimals to the unit definition for unit-of-measure values

**DESCRIPTION**: To restrict displayed decimals for unit-of-measure fields to the number defined for the unit (i.e., show only the unit's decimals), enable showOnlyUnitDecimals under "sap.fe.app" in manifest.json.

File: manifest.json

**LANGUAGE**: JSON

**CODE**:
```json
"sap.fe": {
    "app": {
       "showOnlyUnitDecimals": true
    }
}
```
--------------------------------

**TITLE**: Display an Illustrated Message or Text When a Table Has No Data (SAP Fiori elements)

**INTRODUCTION**: This document shows how to control the illustrated "No Data" message (or replace it with plain text) for tables in SAP Fiori elements pages. It includes default behavior, how to override default texts via i18n, how to enable text-only messages via the manifest, and how to add custom actions to the illustrated message using the beforeRebindTable extension point.

**TAGS**: fiori-elements, no-data, illustrated-message, i18n, manifest.json, extension-point, beforeRebindTable, OData V4, UI5, SAP Fiori

STEP: Default behavior and contexts

DESCRIPTION: Understand the default illustrated message behavior and contexts in which different illustrations/titles/descriptions are shown. Use this knowledge to decide whether to override texts, switch to text-only messages, or add custom actions.

- List report: Illustrated message size adapts to available table space.
- Object page anchor bar mode: Reduced illustrated message size to keep information density.
- Icon tab bar mode: If section contains only a table, illustrated message adapts like list report.
- Default displayed texts (examples):
  - Opening a list report without autoload: Title "Let’s get some results", Description "Start by providing your search or filter criteria."
  - No filters and no data on list report: Title "No results found", Description "Start by providing your search or filter criteria."
  - Filters applied and no results: Title "No results found", Description "Try changing your filter criteria."
  - Multi-view mode table with no data: Title "No no results found", Description "Try changing the view or filter criteria."
  - Object page with no search/filters and no data: Title "No items available", Description "When there are, you'll find them here."

LANGUAGE: N/A

CODE:
```text
(Informational defaults described above — no code)
```

STEP: Override default illustrated message texts via i18n

DESCRIPTION: Override standard illustrated message texts by adding specific i18n keys to the list report and object page i18n files. See the Localization of UI Texts documentation for the complete list of keys to provide.

LANGUAGE: N/A

CODE:
```text
File: i18n/<YourPage>.properties
# Add keys referenced in "Localization of UI Texts" (see localization-of-ui-texts-b8cb649.md)
# Example (pseudo-keys — replace with exact keys from Localization doc):
NO_RESULTS_TITLE=No results found
NO_RESULTS_DESCRIPTION=Try changing your filter criteria.
# Use the real keys and translations for your app
```

STEP: Show text instead of illustrated message (manifest setting)

DESCRIPTION: Use the manifest setting useTextForNoDataMessages to display plain text messages instead of illustrated messages on an object page. This setting applies to all tables on the page. When enabled, you must override default texts using i18n keys (see Localization of UI Texts).

LANGUAGE: JSON

CODE:
```json
"SalesOrderManageObjectPage": {
    "type": "Component",
    "id": "SalesOrderManageObjectPage",
    "name": "sap.fe.templates.ObjectPage",
    "options": {
        "settings": {
            "contextPath": "/SalesOrderManage",
            "enhanceI18n": "i18n/SalesOrderObjectPage.properties",
            "variantManagement": "Control",
            "showRelatedApps": true,
            "sectionLayout": "Tabs",
            "useTextForNoDataMessages": true,
            "controlConfiguration": {
...
            }
        }
    }
}
```

STEP: Add actions to an illustrated message using beforeRebindTable

DESCRIPTION: Add contextual actions (buttons) to the IllustratedMessage shown when a table has no data. Use the beforeRebindTable extension point to set a custom IllustratedMessage on the table instance via table.setNoData(...). Configure the extension point in manifest.json and implement the callback in a ControllerExtension module. The manifest mapping must point to your controller extension and method, and the controller must construct and apply the IllustratedMessage based on filter/search state.

LANGUAGE: JSON

CODE:
```json
"targets": {
    "sample": {
        "type": "Component",
        "id": "Default",
        "name": "sap.fe.templates.ObjectPage",
        "level": 1,
        "options": {
            "settings": {
                "contextPath": "/RootEntity",
                "editableHeaderContent": false,
                "variantManagement": "Control",
                "controlConfiguration": {
                    "_Child/@com.sap.vocabularies.UI.v1.LineItem": {
                        "tableSettings": {
                            "beforeRebindTable": ".extension.sap.fe.core.fpmExplorer.OPExtend.onTableRefresh"
                        }
                    }
                }
            }
        }
    }
}
```

STEP: Implement the ControllerExtension callback to set IllustratedMessage and actions

DESCRIPTION: Implement the beforeRebindTable callback to inspect the collectionBindingInfo (filters and $search) and set a customized sap.m.IllustratedMessage on the table. Use table.setNoData(illustratedMessage) to apply it. The sample below is a full controller extension module demonstrating two different messages and actions (one for filter/search applied and one for no filters/search and edit mode).

LANGUAGE: JavaScript

CODE:
```javascript
sap.ui.define(
    [
        "sap/ui/core/mvc/ControllerExtension",
        "sap/ui/model/Filter",
        "sap/ui/model/FilterOperator",
        "sap/m/IllustratedMessage",
        "sap/m/IllustratedMessageType",
        "sap/m/Button",
        "sap/m/MessageToast",
        "sap/m/IllustratedMessageSize"
    ],
    function (
        ControllerExtension,
        Filter,
        FilterOperator,
        IllustratedMessage,
        IllustratedMessageType,
        Button,
        MessageToast,
        IllustratedMessageSize
    ) {
        "use strict";

        return ControllerExtension.extend("sap.fe.core.fpmExplorer.OPExtend", {
            onTableRefresh: function (event) {
                var collectionBindingInfoAPI = event.getParameter("collectionBindingInfo");
                var table = this.getView().byId("fe::table::_Child::LineItem::Table");
                var illustratedMessage = new IllustratedMessage();
                var showDialogNoData = function () {
                    return MessageToast.show("Action when No Data in edit mode");
                };
                var showDialogFilterSearch = function () {
                    return MessageToast.show("Action when No Data with filter or search");
                };

                //Filters or Search applied
                if (
                    (collectionBindingInfoAPI.getFilters() && collectionBindingInfoAPI.getFilters().aFilters.length > 0) ||
                    collectionBindingInfoAPI.collectionBindingInfo.parameters.$search
                ) {
                    illustratedMessage.setTitle("No Data");
                    illustratedMessage.setDescription("Change Search or filter criteria.");
                    illustratedMessage.setIllustrationType(IllustratedMessageType.NoSearchResults);
                    illustratedMessage.setIllustrationSize(sap.m.IllustratedMessageSize.Dot);
                    illustratedMessage.addAdditionalContent(new Button({ text: "My Action", press: showDialogFilterSearch }));
                    table.setNoData(illustratedMessage);
                } else {
                    //No filter or search and table in edit mode
                    illustratedMessage.setTitle("No Item found");
                    illustratedMessage.setDescription("Please create some.");
                    illustratedMessage.setIllustrationType(IllustratedMessageType.NoSearchResults);
                    illustratedMessage.setIllustrationSize(sap.m.IllustratedMessageSize.Dot);
                    illustratedMessage.addAdditionalContent(
                        new Button({ text: "Create New Item", visible: "{ui>/isEditable}", press: showDialogNoData })
                    );
                    table.setNoData(illustratedMessage);
                }
            }
        });
    }
);
```

STEP: References and live examples

DESCRIPTION: For keys to override and exact localization key names, consult "Localization of UI Texts". For live examples and API references for table NoData handling, see the SAP Fiori development portal links (Table - Extensions - Table APIs).

LANGUAGE: N/A

CODE:
```text
See:
- Localization of UI Texts: localization-of-ui-texts-b8cb649.md
- Building Blocks - Table - Extensions - Table APIs: https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/buildingBlocks/table/tableNoData
```
--------------------------------

**TITLE**: Displaying Fields in Smartforms on Small Devices (UI.Importance for SAP Fiori elements V2)

**INTRODUCTION**: Use the UI.Importance annotation to control visibility of individual data fields inside Smartforms on small-screen devices. This applies only to SAP Fiori elements for OData V2. Set importance per data field (High / Medium / Low) to determine whether the field is shown on desktops, tablets, and mobiles.

**TAGS**: sap-fiori, fiori-elements, annotations, ui.importance, smartforms, odata-v2, cds, abap, xml, cap

**STEP**: Applicability and default behavior

**DESCRIPTION**: Confirm this approach is only valid for SAP Fiori elements (OData V2). If UI.Importance is not specified for a field, the default is None (treated as Medium importance).

**LANGUAGE**: Text

**CODE**:
```Text
Applicability: SAP Fiori elements for OData V2 only.
Default behavior: If UI.Importance is not specified, default = None -> treated as Medium.
```

**STEP**: Importance -> Visibility mapping

**DESCRIPTION**: Use these mappings when deciding which importance to assign to a data field.

**LANGUAGE**: Text

**CODE**:
```Text
UI.Importance = High   -> Visible on desktops, tablets, and mobiles.
UI.Importance = Medium -> Visible on desktops and tablets (hidden on mobiles).
UI.Importance = Low    -> Visible on desktops and tablets (hidden on mobiles).
```

**STEP**: XML Annotation example (UI.FieldGroup with UI.Importance on data fields)

**DESCRIPTION**: Add UI.Importance annotations to UI.DataField records inside a UI.FieldGroup. This example shows High, Medium, Low and an unspecified field (defaults to Medium). Use this XML in your annotation file or CDS-to-XML export for OData V2 services.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.FieldGroup" Qualifier="GeneralInformation">
    <Record>
        <PropertyValue Property="Data">
            <Collection>
                <Record Type="UI.DataField">
                    <PropertyValue Property="Value" Path="SalesOrder"/>
                    <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
                </Record>
                <Record Type="UI.DataField">
                    <PropertyValue Property="Label" String="Business Partner ID"/>
                    <PropertyValue Property="Value" Path="BusinessPartnerID"/>
                    <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/Low"/>
                </Record>
                <Record Type="UI.DataField">
                    <PropertyValue Property="Label" String="Opportunity ID"/>
                    <PropertyValue Property="Value" Path="OpportunityID"/>
                    <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/Medium"/>
                </Record>
                <Record Type="UI.DataField">
                    <PropertyValue Property="Label" String="Enabled"/>
                    <PropertyValue Property="Value" Path="EnabledStatus"/>
                </Record>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="Label" String="General Information"/>
    </Record>
</Annotation>
```

**STEP**: ABAP CDS Annotation example (UI.fieldGroup with importance per element)

**DESCRIPTION**: Apply @UI.fieldGroup annotations in ABAP CDS. Set importance: #HIGH, #MEDIUM, #LOW per element. The annotated element follows the field-level importance on runtime Smartforms for OData V2.

**LANGUAGE**: ABAP CDS

**CODE**:
```
@UI.fieldGroup: [
  {
    importance: #HIGH,
    position: 10,
    qualifier: 'GeneralInformation',
    groupLabel: 'General Information'
  }
]
SALESORDER;

@UI.fieldGroup: [
  {
    importance: #LOW,
    label: 'Business Partner ID',
    position: 20,
    qualifier: 'GeneralInformation'
  }
]
BUSINESSPARTNERID;

@UI.fieldGroup: [
  {
    importance: #MEDIUM,
    label: 'Opportunity ID',
    position: 30,
    qualifier: 'GeneralInformation'
  }
]
OPPORTUNITYID;

@UI.fieldGroup: [
  {
    label: 'Enabled',
    position: 40,
    qualifier: 'GeneralInformation'
  }
]
ENABLEDSTATUS;
```

**STEP**: CAP CDS Annotation example (UI.FieldGroup with importance flags)

**DESCRIPTION**: In CAP CDS, define UI.FieldGroup with a Data collection. Use ![@UI.Importance] : #High/#Medium/#Low to set importance per UI.DataField. This example preserves the same visibility semantics for OData V2 Smartforms.

**LANGUAGE**: CDS

**CODE**:
```
UI.FieldGroup #GeneralInformation : {
    Data : [
        {
            $Type : 'UI.DataField',
            Value : SalesOrder,
            ![@UI.Importance] : #High
        },
        {
            $Type : 'UI.DataField',
            Label : 'Business Partner ID',
            Value : BusinessPartnerID,
            ![@UI.Importance] : #Low
        },
        {
            $Type : 'UI.DataField',
            Label : 'Opportunity ID',
            Value : OpportunityID,
            ![@UI.Importance] : #Medium
        },
        {
            $Type : 'UI.DataField',
            Label : 'Enabled',
            Value : EnabledStatus
        }
    ],
    Label : 'General Information'
}
```

**STEP**: Important implementation notes

**DESCRIPTION**: Follow these constraints when using UI.Importance in Smartforms.

**LANGUAGE**: Text

**CODE**:
```Text
- You must set UI.Importance on each data field inside a FieldGroup; you cannot hide an entire FieldGroup or Identification section by setting UI.Importance on the group itself.
- UI.Importance affects only data fields rendered inside the smartform.
- Use per-field importance to guarantee predictable mobile behavior.
```
--------------------------------

**TITLE**: Displaying Images in Tables (Fiori Elements)

**INTRODUCTION**: This guide shows the required annotations to display images inside table line items in SAP Fiori Elements. It covers: adding the data field to the line item, marking a property as an image URL, using Common.Text for accessibility (alt text), and handling media properties for OData V4 (stream and binary). Use the exact annotation snippets in your local annotation file or CDS definitions.

**TAGS**: fiori-elements-framework, annotations, images, OData-v4, CDS, XML, ABAP

STEP: 1 — Add an image data field to the line item

DESCRIPTION: Add a UI.DataField lineItem entry that references the property containing the image URL. Mark its importance as needed. Provide one of the following annotation formats depending on your technology (XML local annotations, ABAP CDS, or CAP CDS).

LANGUAGE: XML
CODE:
```xml
<Record Type="UI.DataField">
    <PropertyValue Property="Value" Path="ProductPictureURL"/>
    <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
</Record>
```

LANGUAGE: ABAP CDS
CODE:
```abap
@UI.lineItem: [{ importance: #HIGH }]
PRODUCTPICTUREURL;
```

LANGUAGE: CAP CDS
CODE:
```cap
{
    $Type : 'UI.DataField',
    Value : ProductPictureURL,
    ![@UI.Importance] : #High
}
```

STEP: 2 — Annotate the property as an image URL and provide alt text (optional)

DESCRIPTION: Annotate the property that contains the image URL using UI.IsImageUrl (XML) or equivalent CDS annotations. Optionally add Common.Text to supply alt text (screen-reader accessible, assigned to sap.m.Image@alt). Use the example for the appropriate format. Preserve the target property path exactly (example: STTA_PROD_MAN.STTA_C_MP_ProductType/ProductPictureURL).

LANGUAGE: XML
CODE:
```xml
<Annotations Target="STTA_PROD_MAN.STTA_C_MP_ProductType/ProductPictureURL">
    <Annotation Term="UI.IsImageUrl" />
    <Annotation Term="Common.Text" String="{Product}" />
</Annotations>
```

LANGUAGE: ABAP CDS
CODE:
```abap
@Semantics.imageUrl: true
@UI.textArrangement: #TEXT_ONLY
PRODUCTPICTUREURL;
```

LANGUAGE: CAP CDS
CODE:
```cap
annotate STTA_PROD_MAN.STTA_C_MP_ProductType with {
  @UI.IsImageUrl : true
  @Common.Text : '{Product}'
  ProductPictureURL
};
```

STEP: 3 — OData V4: Use a stream property (image served via URL)

DESCRIPTION: For OData V4, a stream-typed property can be used when the property provides a URL to the media. In local XML annotations, set Core.IsURL = true and Core.MediaType to the correct image MIME type (e.g. image/jpg). Include Common.Text for alt text. Stream properties are read-only (media read from the URL only). See the OData v4 JSON format documentation for stream properties if needed.

LANGUAGE: XML
CODE:
```xml
<Annotations Target="STTA_PROD_MAN.STTA_C_MP_ProductType/ProductPictureURL">
   <Annotation Term="Common.Text" String="{Product}" /> 
   <Annotation Term="Core.IsURL" Bool="true"/>
   <Annotation Term="Core.MediaType" String="image/jpg"/>
</Annotations>
```

LANGUAGE: CAP CDS
CODE:
```cap
annotate STTA_PROD_MAN.STTA_C_MP_ProductType with {
  @Common.Text : '{Product}'
  @Core.IsURL : true
  @Core.MediaType : 'image/jpg'
  ProductPictureURL
};
```

STEP: 4 — Use binary media data (image content as binary) with MediaType

DESCRIPTION: If your service exposes binary media content (not a URL), annotate only the Media Content Type for the property in the local annotation or CAP CDS. Include Common.Text for alt text. Example uses image/png.

LANGUAGE: XML
CODE:
```xml
<Annotations Target="STTA_PROD_MAN.STTA_C_MP_ProductType/ProductPictureURL">
   <Annotation Term="Common.Text" String="{Product}" /> 
   <Annotation Term="Core.MediaType" String="image/png"/>
</Annotations>
```

LANGUAGE: CAP CDS
CODE:
```cap
annotate STTA_PROD_MAN.STTA_C_MP_ProductType with {
  @Common.Text : '{Product}'
  @Core.MediaType : 'image/png'
  ProductPictureURL
};
```

STEP: 5 — Notes and accessibility

DESCRIPTION: - Common.Text is optional but recommended to populate the alt attribute of sap.m.Image for screen readers. - Stream properties are supported for read-only scenarios only (media is read from the URL). - For more on stream properties in OData V4, consult: http://docs.oasis-open.org/odata/odata-json-format/v4.0/os/odata-json-format-v4.0-os.html#_Toc372793075
--------------------------------

**TITLE**: Display Text and ID for Value Help Input Fields (Edit & Display Modes)

**INTRODUCTION**: Configure object pages in SAP Fiori Elements to show both descriptive text and ID for value-help bound fields in Edit and Display modes. This guide provides actionable annotation samples (XML, ABAP CDS, CAP CDS) and behavior rules for OData V2 and V4 scenarios. Use these snippets directly in service metadata, annotation files, or CDS definitions.

**TAGS**: fiori-elements-framework, OData, value-help, textArrangement, SmartField, annotations, CDS, CAP, XML, ABAP

**STEP**: 1 — Edit Mode: Define textArrangement at Entity Level

**DESCRIPTION**: Apply a TextArrangement at the entity level so value help displays text and ID for bound fields. Field-level annotations override entity-level settings.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="STTA_SALES_ORDER_ND_SRV_01.STTA_C_SO_SalesOrder_NDType">
     <Annotation Term="com.sap.vocabularies.UI.v1.TextArrangement" EnumMember="com.sap.vocabularies.UI.v1.TextArrangementType/TextLast"/>
 </Annotations>
```

**STEP**: 2 — Edit Mode: Define textArrangement at Entity Level (ABAP CDS)

**DESCRIPTION**: Equivalent entity-level configuration using ABAP CDS annotation.

**LANGUAGE**: ABAP CDS

**CODE**:
```
@UI.TextArrangement: #TEXT_LAST
annotate view STTA_C_SO_SALESORDER_ND with {

}
```

**STEP**: 3 — Edit Mode: Define textArrangement at Entity Level (CAP CDS)

**DESCRIPTION**: Equivalent entity-level configuration for CAP CDS services.

**LANGUAGE**: CAP CDS

**CODE**:
```
annotate STTA_SALES_ORDER_ND_SRV_01.STTA_C_SO_SalesOrder_NDType @(
  UI.TextArrangement : #TextLast
);
```

**STEP**: 4 — Edit Mode: Define textArrangement at Field Level (XML)

**DESCRIPTION**: Apply TextArrangement to a specific property. Field-level annotation takes precedence over entity-level.

**LANGUAGE**: XML

**CODE**:
```xml
 <Annotations Target="STTA_SALES_ORDER_ND_SRV_01.STTA_C_SO_SalesOrder_NDType/BusinessPartnerID">
       <Annotation Term="com.sap.vocabularies.UI.v1.TextArrangement" EnumMember="com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly"/>
 </Annotations>
```

**STEP**: 5 — Edit Mode: Define textArrangement at Field Level (ABAP CDS)

**DESCRIPTION**: Example of field-level ABAP CDS annotation to force TextOnly for a property.

**LANGUAGE**: ABAP CDS

**CODE**:
```
annotate view STTA_C_SO_SALESORDER_ND with {
  @UI.TextArrangement: #TEXT_ONLY
  businesspartnerid;
}
```

**STEP**: 6 — Edit Mode: Define textArrangement at Field Level (CAP CDS)

**DESCRIPTION**: Field-level CAP CDS annotation example.

**LANGUAGE**: CAP CDS

**CODE**:
```
annotate STTA_SALES_ORDER_ND_SRV_01.STTA_C_SO_SalesOrder_NDType {
  @UI.TextArrangement : #TextOnly
  BusinessPartnerID
};
```

**STEP**: 7 — Client Validation Against Value Help (ValueListForValidation)

**DESCRIPTION**: Configure client-side validation against a ValueList. Use Common.ValueListForValidation at the property level. Note that ValueListForValidation only works with an empty qualifier (String="") and user input not matching the list is not stored in backend drafts.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="STTA_PROD_MAN.STTA_C_MP_ProductType/Supplier" xmlns="http://docs.oasis-open.org/odata/ns/edm">
	<Annotation Term="Common.ValueListForValidation" String=""/>
	<Annotation Term="Common.ValueList">
		...Definition of ValueList...
	</Annotation>
</Annotations>
```

**STEP**: 8 — OData V2 — Edit Mode: Default and Conditions for TextInEditModeSource

**DESCRIPTION**: By default object page forms allow entering values not in value help using TextInEditModeSource = ValueListNoValidation. The sap.ui.comp.smartfield.TextInEditModeSource.ValueList behavior is supported only when all of the following hold:
- SmartField value property is bound to EDM property type Edm.String or Edm.Guid.
- com.sap.vocabularies.UI.v1.TextArrangement is specified for the bound EDM property or entity.
- SmartField value binding is two-way.
- The description field used is filterable.
If any condition fails, only the ID is shown.

**LANGUAGE**: Configuration

**CODE**:
```
TextInEditModeSource = ValueListNoValidation
```

**STEP**: 9 — OData V2 — Display Mode: Use sap:text to fetch description via navigation path

**DESCRIPTION**: To display text + ID in Display mode, model sap:text on the property to point to the navigation property description (navigation path). Also specify TextArrangement on the entity.

**LANGUAGE**: XML

**CODE**:
```
   <Property Name="BusinessPartnerID" Type="Edm.String" Nullable="false" MaxLength="10" sap:display-format="UpperCase" sap:text="to_BusinessPartner/CompanyName" sap:label="Business Partner ID" sap:value-list="standard">


<Annotations Target="STTA_SALES_ORDER_ND_SRV_01.STTA_C_SO_SalesOrder_NDType">
         <Annotation Term="com.sap.vocabularies.UI.v1.TextArrangement" EnumMember="com.sap.vocabularies.UI.v1.TextArrangementType/TextLast"/> 
 </Annotations>
```

**STEP**: 10 — OData V2 — Display Mode: Value Help Entity Modeling with sap:text property

**DESCRIPTION**: Alternative: model the value-help entity so the ID property includes sap:text pointing to a text property (CostCenter_Text). Add TextArrangement annotation on the value-help entity type.

**LANGUAGE**: XML

**CODE**:
```
<EntityType Name="C_CostCenterVHType" sap:label="Cost Center Value Help" sap:value-list="true"
                sap:content-version="1">
                <Key>
                    <PropertyRef Name="CostCenter" />
                </Key>
                <Property Name="CostCenter" Type="Edm.String" Nullable="false" MaxLength="10"
                    sap:display-format="UpperCase" sap:text="CostCenter_Text" sap:label="Cost Center" />
                <Property Name="CostCenter_Text" Type="Edm.String" MaxLength="20" sap:label="Cost Center Name"
                    sap:creatable="false" sap:updatable="false" />
</EntityType>

<Annotations Target="COST_CENTERS_SRV.C_CostCenterVHType"
                xmlns="http://docs.oasis-open.org/odata/ns/edm">
     <Annotation Term="com.sap.vocabularies.UI.v1.TextArrangement"
                    EnumMember="com.sap.vocabularies.UI.v1.TextArrangementType/TextLast" />
</Annotations>
```

**STEP**: 11 — OData V2 — Default UI Behavior Rules and Exceptions

**DESCRIPTION**: Rules and exceptions to apply when controlling text+ID display:
- DataField rendered as SmartLink (SemanticObject) or quick view: shows descriptive text + ID by default.
- DataFieldWithNavigationPath bound to value help: shows descriptive text + ID by default.
- Applies to tables, object page headers, and object page forms.
- Change ordering using TextArrangement values: TextFirst, TextLast, TextOnly.
- Unsupported record types for this behavior: DataFieldWithIntentBasedNavigation, Communication.Contact.
- If TextArrangement is defined as textSeparate, only the ID is displayed.

**LANGUAGE**: Notes

**CODE**:
```
Supported record types: DataField (SmartLink/QuickView), DataFieldWithNavigationPath.
Unsupported: DataFieldWithIntentBasedNavigation, Communication.Contact.
TextArrangement options: TextFirst, TextLast, TextOnly, textSeparate (ID only).
```

**STEP**: 12 — OData V4 — Display Mode Behavior

**DESCRIPTION**: For OData V4, the same default applies: DataField rendered as link via SemanticObject or quick view and DataFieldWithNavigationPath bound to value help show descriptive text + ID by default across tables, object page headers, and object page forms. Control ordering via TextArrangement (TextFirst, TextLast, TextOnly). See "Further Features of the Field" for additional configuration options.

**LANGUAGE**: Notes

**CODE**:
```
OData V4: Default behavior mirrors V2 for DataField and DataFieldWithNavigationPath.
Use UI.TextArrangement to change display order.
Reference: further-features-of-the-field-f49a0f7.md
```
--------------------------------

**TITLE**: Donut Chart Card

**INTRODUCTION**: How to configure and use a Donut Chart Card in Fiori Elements. Covers data-model constraints, rendering percentages, enabling stable coloring with a color map, required chart annotations, and handling the "Others" sector navigation filter.

**TAGS**: fiori-elements-framework, donut-chart, chart, sap, colorPalette, stable-colors, annotation, OData, card-settings

**STEP**: 1 — Data model requirements

**DESCRIPTION**: Donut charts require exactly one measure and one or more dimensions. If multiple dimensions are provided they are stacked: each unique combination of dimension values becomes one colored section. Optionally disable navigation from the chart if you don't want drill-through.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "requirements": {
    "measures": "exactly 1",
    "dimensions": "one or more (stacked: combinations become sections)",
    "navigation": "optional (can be disabled in card settings)"
  }
}
```

**STEP**: 2 — Show values as percentages in the chart

**DESCRIPTION**: To render data labels as percentages in the donut chart, set the ChartProperties -> plotArea -> dataLabel type to "percentage". Keep this snippet exactly as-is in your chart properties block.

**LANGUAGE**: JSON

**CODE**:
```json
"ChartProperties" : {
			"plotArea" : {
				dataLabel: {
					"type" : "percentage"
					}
				}
			}
```

**STEP**: 3 — Enable stable coloring (assign fixed colors to specific dimension values)

**DESCRIPTION**: Stable coloring requires:
- a color map in the descriptor configuration (colorPalette) that maps dimension values to colors,
- enabling bEnableStableColors in the card settings,
- the chart dimension Role must be Category,
- the dimension property must have com.sap.vocabularies.Common.v1.Text defined for readable legend labels.

Follow the examples below for each configuration piece.

**LANGUAGE**: JSON

**CODE**:
```json
// Example: descriptor configuration – colorPalette maps dimension property values to colors
{
  "descriptor": {
    "configuration": {
      "colorPalette": {
        "Country": {
          "Germany": "#0a6ed1",
          "USA": "#e26a1a",
          "India": "#8bc34a",
          "Others": "#9e9e9e"
        }
      }
    }
  }
}
```

**STEP**: 3.1 — Turn on stable coloring in the card settings

**DESCRIPTION**: Set bEnableStableColors to true in the card settings (sap.card or your card settings location).

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.card": {
    "type": "List" ,
    "settings": {
      "bEnableStableColors": true
    }
  }
}
```

**STEP**: 3.2 — Chart annotation: set dimension Role to Category

**DESCRIPTION**: Ensure the chart annotation defines the dimension Role as "Category". This example shows the typical annotation Record used to declare a dimension with Role equal to Category.

**LANGUAGE**: XML

**CODE**:
```xml
<PropertyValue Property="Dimensions">
  <Collection>
    <Record Type="UI.ChartDimension">
      <PropertyValue Property="PropertyPath" String="Country" />
      <PropertyValue Property="Role" String="Category" />
    </Record>
  </Collection>
</PropertyValue>
```

**STEP**: 3.3 — Define com.sap.vocabularies.Common.v1.Text annotation for the dimension property

**DESCRIPTION**: Add com.sap.vocabularies.Common.v1.Text annotation on the dimension property inside the entity type so legend labels are rendered properly.

**LANGUAGE**: XML

**CODE**:
```xml
<Property Name="Country" Type="Edm.String">
  <Annotation Term="com.sap.vocabularies.Common.v1.Text">
    <String>Country</String>
  </Annotation>
</Property>
```

**STEP**: 4 — Others sector: navigation filter behavior

**DESCRIPTION**: The "Others" section lets you navigate to a target application with a filter that excludes the explicitly shown dimension values (A, B, C). Compose the navigation filter so the target receives a "not in (A, B, C)" condition.

**LANGUAGE**: OData / Query

**CODE**:
```
// Example OData $filter representing "not in (A,B,C)"
$filter=not (Dimension eq 'A' or Dimension eq 'B' or Dimension eq 'C')
```
--------------------------------

**TITLE**: Draft Handling — Configurations and Integration Guide for SAP Fiori Elements

**INTRODUCTION**: Practical, code-focused reference for implementing and configuring draft handling in SAP Fiori elements (OData V2 and V4). Includes manifest.json samples and actionable notes for behavior (Apply, Save, Discard, PreparationAction, side effects, collaborative drafts, and hiding draft UI). Use these snippets directly in your app manifest and controller-extension workflows.

**TAGS**: draft, manifest.json, sap.fe, OData V2, OData V4, DraftRoot, PreparationAction, DiscardAction, hideDraft, dataSaveFrequency, collaborative draft, editFlow

STEP: 1 — Draft behavior summary and key terms

DESCRIPTION: Concise, actionable summary of core runtime behavior and terms to use when writing code or configuring services and annotations.
LANGUAGE: Text
CODE:
```
# Core draft handling behavior (for quick reference)
- Draft created automatically when user starts Create or Edit (background).
- Apply (subobject footer): applies UI changes to the draft and navigates one step up.
- Save: persists draft changes to the active entity.
- DiscardAction: if defined in DraftRoot annotation, call DiscardAction to delete a draft; otherwise the Delete OData call is used.
- PreparationAction: backend validation action available on DraftRoot; triggered on Enter or explicit Validate.
- TriggerAction: a global side-effect action annotation that can replace PreparationAction when annotated in global side effects.
- Side effects: may trigger automatic saves, validation, and additional backend calls.
- Validation errors: technical inconsistencies (e.g., wrong data type, overflow) block saving and prompt users to fix errors before Save or Apply.
```

STEP: 2 — Configure immediate draft save frequency (OData V2 special case)

DESCRIPTION: Change automatic draft merge/save timing from the default delayed behavior to immediate saves. Place this in your application manifest.json under "sap.ui.generic.app" -> "settings" -> "draftSettings".
LANGUAGE: JSON
CODE:
```json
"sap.ui.generic.app": {
    "settings": {
        "draftSettings": {
            "dataSaveFrequency": "immediate"
        }
    }
}
```

STEP: 3 — Hide draft-related UI elements while keeping draft functionality (global hideDraft)

DESCRIPTION: Hide draft UI affordances (filters, Apply button, Draft updated footer message) while keeping draft handling active in the background. Use "sap.fe.app.hideDraft" settings in manifest.json. Examples show basic hiding, keeping user on current page after Save/Cancel, and hiding Create Next button.
LANGUAGE: JSON
CODE:
```json
// Basic enable hideDraft
"sap.fe": {
  "app": {
    "hideDraft": {
      "enabled": true
    }
  }
}

// Keep user on same object page after Save or Cancel
"sap.fe": {
  "app": {
    "hideDraft": {
      "enabled": true,
      "stayOnCurrentPageAfterSave": true,
      "stayOnCurrentPageAfterCancel": true
    }
  }
}

// Hide the Create Next button when hideDraft is enabled
"sap.fe": {
  "app": {
    "hideDraft": {
      "enabled": true,
      "hideCreateNext": true
    }
  }
}
```

STEP: 4 — Handling DiscardAction vs Delete (annotation behavior)

DESCRIPTION: Ensure correct annotation placement on the DraftRoot entity. If DraftRoot has a DiscardAction annotation, the framework calls that action to delete/discard the draft; otherwise the framework calls the standard Delete operation. Use this when implementing custom discard logic in the backend or when annotating service metadata.
LANGUAGE: Text
CODE:
```
// Implementation note (no strict code sample provided in original):
// - Annotate DraftRoot with DiscardAction to route the discard behavior to a custom backend action.
// - If DiscardAction is absent, framework triggers the Delete call for the draft entity.
// - Ensure your service metadata (annotations) expose DiscardAction on the DraftRoot entity.
```

STEP: 5 — Triggering PreparationAction and global side effects (Enter key behavior)

DESCRIPTION: PreparationAction on DraftRoot validates draft values backend-side and returns messages. On Enter:
- OData V2: PreparationAction is triggered by default; saved pending changes are sent first.
- TriggerAction in global side effects replaces PreparationAction if configured (except for side effects that use SourceProperties where PreparationAction remains).
- Side effects annotated for a field may cause immediate draft save when leaving a virtual field group.
LANGUAGE: Text
CODE:
```
// Behavior summary for implementation:
- Define PreparationAction on the DraftRoot entity to enable server-side draft validation.
- Define global side effects (TriggerAction) if you want Enter to execute different backend logic.
- If side effects reference SourceProperties with TriggerAction, PreparationAction is not suppressed.
- Ensure UI-side pending changes are saved before issuing PreparationAction.
```

STEP: 6 — OData V2 automatic background save timing and immediate actions

DESCRIPTION: OData V2 drafts auto-save every 20 seconds by default while editing. Immediate save occurs when:
- The user executes an action.
- A field with a side effect is modified and the user moves out of the side effect’s virtual field group.
Use Step 2 to change behavior to immediate saves globally.
LANGUAGE: Text
CODE:
```
// OData V2 default behavior:
- Auto-save interval: 20 seconds for pending changes in edit mode.
- Immediate save triggers:
  * Action executions
  * Leaving a virtual field group containing a field annotated with a side effect
// Use manifest.dataSaveFrequency to force immediate saves if required (see Step 2).
```

STEP: 7 — OData V4 specific draft features and collaborative drafts

DESCRIPTION: For OData V4:
- Two draft modes: exclusive (single user) and collaborative (shared draft).
- Collaborative draft requires ShareAction annotation on the service and uses WebSocket for synchronization.
- Field-level locks and live updates are supported (avatars, lock indicators).
- Restrictions: collaborative draft supported only with ABAP RAP; mass edit not supported on object pages when collaborative draft is enabled. For freestyle extensions, use sap.fe.macros.CollaborativeDraftHandler API.
LANGUAGE: Text
CODE:
```
// Collaborative draft implementation notes:
- Ensure service supports ShareAction annotation on DraftRoot to enable collaborative draft.
- When collaborative draft is enabled:
  * All drafts are shared automatically with users who have draft access.
  * Field-level locks appear when a user focuses/edits a field.
  * Updates are broadcast via WebSocket; this extends browser session until users leave.
- Restrictions:
  * Supported only with ABAP RAP services.
  * For freestyle app extensions, integrate sap.fe.macros.CollaborativeDraftHandler API.
  * Mass edit on object pages is not supported with collaborative draft.
```

STEP: 8 — Filtering draft-related data (OData V4)

DESCRIPTION: Draft-related filters are available by default in OData V4: Draft Created By/On and Draft Last Changed By/On. Time filters use semantic operators showing past values. This feature is not available with CAP services.
LANGUAGE: Text
CODE:
```
// Filtering draft metadata (OData V4):
- Available filters (default): "Draft Created By", "Draft Created On", "Draft Last Changed By", "Draft Last Changed On"
- Time filters use semantic operators (e.g., past ranges).
- Note: CAP services do not support this feature by default.
```

STEP: 9 — editFlow API (controller extension entry points for custom draft logic)

DESCRIPTION: Use the editFlow controller-extension API to add custom logic for standard draft lifecycle actions (create, edit, save, discard) or to implement draft handling on custom pages. The API is sap.fe.core.controllerextensions.EditFlow. Consult the API reference and examples in the SAP Fiori dev portal.
LANGUAGE: Text
CODE:
```
// Integration pointers:
- API: sap.fe.core.controllerextensions.EditFlow
- Use editFlow to:
  * Add custom logic before/after draft actions (create, edit, save, discard)
  * Implement draft handling in custom pages and custom controls
- Reference / live examples:
  * EditFlow examples: https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/controllerExtensions/editFlow
  * API Reference: https://ui5.sap.com/#/api/sap.fe.core.controllerextensions.EditFlow
```

STEP: 10 — Useful references (links to docs and design guidance)

DESCRIPTION: Keep these references handy when implementing or debugging draft handling.
LANGUAGE: Text
CODE:
```
- Draft design guidance: https://experience.sap.com/fiori-design-web/draft-handling/
- SAP ABAP docs: https://help.sap.com/docs/SAP_NETWEAVER_AS_ABAP_752/cc0c305d2fab47bd808adcad3ca7ee9d/d36820f082c84085b6634be4576e351a.html
- Confirmation Popups: confirmation-popups-9a53662.md
- Using Global Side Effects: using-global-side-effects-955ae31.md
- Toggling Between Draft and Saved Values: toggling-between-draft-and-saved-values-fd3950a.md
- Draft Validation live example: https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/advancedFeatures/guidance/draftValidation
```
--------------------------------

**TITLE**: Dual Combination Chart Card (UI.Chart Annotation)

**INTRODUCTION**: Use this UI.Chart OData annotation to define a Dual Combination Chart card for Fiori Elements. The chart displays two value axes (columns + lines) so you can combine multiple measures (one axis as columns, the other as lines). Apply this annotation in your service metadata extensions or local annotation files to render the chart in Fiori Elements cards.

**TAGS**: fiori-elements-framework, UI.Chart, DualCombination, chart, annotation, OData, SAPUI5

STEP: 1 — Add UI.Chart annotation for Dual Combination Chart

DESCRIPTION: Insert a UI.Chart annotation that specifies a CombinationDual chart. Define the Title, ChartType, Measures, Dimensions, MeasureAttributes (assigning measures to Axis1/Axis2), and DimensionAttributes (assigning Category role). Place this Record in your OData metadata extension file or local annotation file that Fiori Elements reads (e.g., annotations.xml, annotations.cds, or metadata extension).

LANGUAGE: XML

CODE:
```xml
<Annotation Term="UI.Chart" Qualifier="Eval_by_CtryCurr_Dual_Combo">
    <Record Type="UI.ChartDefinitionType">
        <PropertyValue Property="Title" String="Dual Combination Chart" />
        <PropertyValue Property="ChartType" EnumMember="UI.ChartType/CombinationDual"/>
        <PropertyValue Property="Measures">
            <Collection>
                <PropertyPath>Sales</PropertyPath>
                <PropertyPath>SalesShare</PropertyPath>
                <PropertyPath>TotalSales</PropertyPath>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="Dimensions">
            <Collection>
                <PropertyPath>Product</PropertyPath>
                <PropertyPath>Quarter</PropertyPath>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="MeasureAttributes">
            <Collection>
                <Record Type="UI.ChartMeasureAttributeType">
                    <PropertyValue Property="Measure" PropertyPath="Sales"/>
                    <PropertyValue Property="Role"
                        EnumMember="UI.ChartMeasureRoleType/Axis1"/>
                </Record>
                <Record Type="UI.ChartMeasureAttributeType">
                    <PropertyValue Property="Measure" PropertyPath="TotalSales" />
                    <PropertyValue Property="Role" EnumMember="UI.ChartMeasureRoleType/Axis1"/>
                </Record>
                <Record Type="UI.ChartMeasureAttributeType">
                    <PropertyValue Property="Measure" PropertyPath="SalesShare" />
                    <PropertyValue Property="Role" EnumMember="UI.ChartMeasureRoleType/Axis2"/>
                </Record>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="DimensionAttributes">
            <Collection>
                <Record Type="UI.ChartDimensionAttributeType">
                    <PropertyValue Property="Dimension" PropertyPath="Product" />
                    <PropertyValue Property="Role" EnumMember="UI.ChartDimensionRoleType/Category"/>
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

STEP: 2 — Implementation rules and recommendations

DESCRIPTION: Follow these concrete rules when authoring the annotation so the Dual Combination Chart renders correctly:
- Use ChartType = UI.ChartType/CombinationDual to enable two axes.
- Configure at least two measures. All measures must be listed under Measures and then assigned to an axis via MeasureAttributes.
- Assign measures to the feed's UID value axis (use Axis1 for primary axis and Axis2 for secondary axis).
- The first measure will render as a column; subsequent measures can render as lines—define roles accordingly.
- Assign at least one role to the category axis via DimensionAttributes. Any dimension given the Role = UI.ChartDimensionRoleType/Category is used as the category axis; Category is the default role.
- Prefer one time-based dimension for the category axis (e.g., Quarter) to get proper time-series behavior.
- Place this annotation in the metadata extension file or local annotation file referenced by your Fiori Elements application so it is consumed at runtime.

LANGUAGE: JSON (example of recommended placement metadata — conceptual)
CODE:
```json
{
  "notes": "Place the above UI.Chart XML Record in your OData annotations file (annotations.xml or metadata extension). Ensure the annotation file is registered in the manifest or service metadata."
}
```

STEP: 3 — Validation checklist before deployment

DESCRIPTION: Validate these items programmatically or manually before deploying:
- Measures exist in the entity type (Sales, SalesShare, TotalSales).
- Dimensions exist (Product, Quarter) and Quarter is time-aware if used as time axis.
- The annotation Qualifier (Eval_by_CtryCurr_Dual_Combo) does not conflict with other chart annotations or is referenced where needed.
- The annotation file is reachable by the Fiori Elements app (manifest.json annotation configuration).

LANGUAGE: JSON (checklist example)
CODE:
```json
{
  "validation": [
    "Measures defined in EntityType: Sales, SalesShare, TotalSales",
    "Dimensions defined in EntityType: Product, Quarter",
    "Annotation Qualifier is unique: Eval_by_CtryCurr_Dual_Combo",
    "Annotation file referenced in manifest or metadata extension"
  ]
}
```
--------------------------------

**TITLE**: Fiori Elements — Editing Status (List Report / Draft Administrative Data)

**INTRODUCTION**: This document explains how Fiori elements list reports render and expose the draft editing status of entries, where the status data comes from (draft administrative data on the back end), how users access related user/time details, and how the static "Editing Status" filter behaves. Use these instructions when implementing or customizing list report UIs that are draft-enabled.

**TAGS**: fiori-elements-framework, editing-status, draft, list-report, responsive-table, grid-table, tree-table, analytical-table, filter

**STEP**: Rendering editing status in list report tables

**DESCRIPTION**: Implement and verify visual placement of the editing-status indicator for list report table types. The editing status is calculated from the draft administrative data returned by the back end (draft-enabled OData). Placement rules:
- Responsive table: show editing status in the key column (the first column shown with the semantic key).
- Grid table, Tree table, Analytical table: show editing status in a separate column placed in the second position; this column has no column label.
Include the provided visualization assets in design references or automated tests to validate expected UI. Keep draft administrative data mapping intact between backend and UI.

**LANGUAGE**: text

**CODE**:
```text
Image assets (use as visual references):
- images/Draft_Administrative_Data_Visualization_in_List_Report_Page_with_Responsive_Table_f66fced.png
- images/Draft_Administrative_Data_Visualization_in_List_Report_Page_with_Grid_Table_4b053c1.png

Data source:
- Draft administrative data must be provided by the OData service (backend).
- Map the draft status fields from the backend to the list report's row-level editing-status UI control.
```

**STEP**: Display user/time access for specific statuses (Own Draft / Unsaved Changes by Another User / Locked by Another User)

**DESCRIPTION**: For statuses Own Draft, Unsaved Changes by Another User, and Locked by Another User:
- Display the name of the user who last changed the object directly in the line item (if available).
- Provide a link in the line item that opens a popover showing the full user name (if available) and the time of the change.
- Fallback rules:
  - If the user's full name is not present in backend master data, display the technical user name.
  - If the technical user name is also not available, display "another user" for the user reference.
Ensure the popover control is reachable via keyboard and meets accessibility requirements.

**LANGUAGE**: text

**CODE**:
```text
Behavior:
- Line item text: show lastChangedUser (fullName || technicalUserName || "another user")
- Popover: show lastChangedUserFullName (if available), technicalUserName (if available), lastChangedTimestamp

Backend fields to use (example fields from Draft Administrative Data; confirm exact field names in your OData service):
- DraftAdministrativeData/InProcessByUser
- DraftAdministrativeData/LastChangedByUser
- DraftAdministrativeData/LastChangedAt
```

**STEP**: Editing Status filter (static filter added to the filter bar)

**DESCRIPTION**: All draft-enabled list-report applications include a static "Editing Status" filter that is added to the filter bar by default. Use this filter to allow users to search for entities by draft status. The filter's default selection is All (even if the user clears the filter). Implement the following dropdown values and semantics exactly as listed.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "editingStatusFilter": {
    "default": "All",
    "values": [
      { "key": "All", "description": "Displays all entities" },
      { "key": "Own Draft", "description": "Displays a user's own draft only" },
      { "key": "Locked by Another User", "description": "Displays all entities that are currently in progress by someone" },
      { "key": "Unsaved Changes by Another User", "description": "Displays all entities with unsaved changes (lock expired, draft of someone is still available)" },
      { "key": "Unchanged", "description": "Displays all entities that have no draft" }
    ],
    "note": "Default search filter is 'All' even when the user clears the value"
  }
}
```

**STEP**: Disabling the Editing Status filter after app generation

**DESCRIPTION**: If you need to remove the static Editing Status filter from the filter bar after the app is generated, follow the platform-specific procedure documented by SAP. Use the referenced documentation to modify the generated app configuration safely (do not remove backend draft behavior unless intended).

**LANGUAGE**: text

**CODE**:
```text
See documentation for details:
- disabling-the-editing-status-filter-8eb695a.md
Related doc links for context:
- handling-semantic-key-fields-aa2793c.md
- settings-for-list-report-tables-4c2d17a.md
```

**RELATED INFORMATION**:
- handling-semantic-key-fields-aa2793c.md — Semantic key fields in tables are displayed with a special logic.
- settings-for-list-report-tables-4c2d17a.md — Configure list report table aspects via annotations and manifest.json.
- disabling-the-editing-status-filter-8eb695a.md — Steps to disable the editing status filter after generation.
--------------------------------

**TITLE**: Enabling Actions Added Using Extension Points (List Report & Object Page)

**INTRODUCTION**: Configure enablement and visibility of actions added using extension points by editing manifest.json. Supports SAP Fiori elements for OData V2 (requiresSelection, applicablePath) and OData V4 (enabled binding or handler). Use extensionAPI only for integrations; prefer manifest settings or annotations before extensions.

**TAGS**: fiori-elements-framework, manifest.json, extension-points, actions, enablement, OData V2, OData V4, object-page, list-report, extensionAPI

**STEP**: 1 — OData V2: Enable actions in List Report (action in table header)

**DESCRIPTION**: In manifest.json, add requiresSelection to require a row selection before enabling. Use applicablePath to query the backend for per-row applicability; if any selected row has applicablePath true the action is enabled. If applicablePath absent, action is always enabled. Place the code inside sap.ui5 -> extends -> extensions -> sap.ui.controllerExtensions -> ListReport controller extension info and sap.ui.generic.app -> <entity set> -> Actions.

**LANGUAGE**: XML

**CODE**:
```xml
"sap.ui5": {
   "extends": {
      "extensions": {
         "sap.ui.controllerExtensions": {
            "sap.suite.ui.generic.template.ListReport.view.ListReport": {
               "controllerName": "my_app.ext.controller.ListReportExtension",
               "sap.ui.generic.app": {
                  "<entity set>": {
                     "EntitySet": "<entity set>",
                     "Actions": {
                        "<Action 1>": {
                           "id": "<id>",
                           "text": "<button text>",
                           "press": "<handler function>",
                           "requiresSelection": true,
                           "applicablePath": "<entity type property>"
                        },
                        "<Action 2>": {
                           "id": "<id>",
                           "text": "<button text>",
                           "press": "<handler function>",
                           "requiresSelection": true
                        }
                     }
                  }
               }
            }
         }
      }
   }
}
```

**STEP**: 2 — OData V2: Enable actions in Object Page (header and table in section)

**DESCRIPTION**: Configure actions for the object page header (applies to the whole object) and for SmartTable facets in sections. Header actions use only applicablePath (object itself is the selection) and will be hidden when applicablePath evaluates to false. Section/table actions can use requiresSelection plus applicablePath to control enablement per selected row.

**LANGUAGE**: XML

**CODE**:
```xml
"sap.ui5": {
   "extends": {
      "extensions": {
         "sap.ui.controllerExtensions": {
            "sap.suite.ui.generic.template.ObjectPage.view.Details#my_app::sap.suite.ui.generic.template.ObjectPage.view.Details:: <entity set>":  {
               "controllerName": "my_app.ext.controller.DetailsExtension",
               "sap.ui.generic.app": {
                  "<entity set>": {
                     "EntitySet": "<entity set>",
                     "Header": {
                        "Actions": {
                           "<Action 1>": {
                              "id": "<id>",
                              "text": "<button text>",
                              "press": "<handler function>",
                              "applicablePath": "<entity type property>"
                           }
                        }
                     },
                     "Sections": {
                        "<entity type association>::com.sap.vocabularies.UI.v1.LineItem": {
                        "id": "<SmartTable Facet ID>",
                           "Actions": {
                              "<Action 2>": {
                                 "id": "<id>",
                                 "text": "<button text>",
                                 "press": "<handler function>",
                                 "requiresSelection": true,
                                 "applicablePath": "<entity type property>"
                              }
                           }
                        }
                     }
                  }
               }
            }
         }
      }
   }
}
```

**STEP**: 3 — OData V2: Show/hide custom action depending on Draft mode (use DraftAdministrativeData)

**DESCRIPTION**: In controller/view extension, bind the custom action to the DraftAdministrativeData navigation property to read draft status (for example, to only show a button in edit mode). Use getElementById and bindElement/bindProperty to connect visibility to DraftIsCreatedByMe (example below is the provided sample).

**LANGUAGE**: JavaScript

**CODE**:
```
 // "Element" required from module "sap/ui/core/Element"
> onAfterRendering: function(oEvent) {
>     var oButton = Element.getElementbyId("STTA_MP::sap.suite.ui.generic.template.ObjectPage.view.Details::STTA_C_MP_Product--action::ObjectPageCustomAction");
>     oButton.bindElement("DraftAdministrativeData");
>     oButton.bindProperty("visible", {
>         path: "DraftIsCreatedByMe"
```

**STEP**: 4 — OData V4: Use enabled property in manifest.json to control action enablement using a handler function

**DESCRIPTION**: For OData V4, set the enabled property of the action in manifest.json to the path of a handler function (Application function). The handler receives binding context and selected contexts and returns true/false or a Promise resolving to boolean. The example below shows reference string and handler skeleton that enables only when exactly one row is selected.

**LANGUAGE**: JSON / JavaScript

**CODE**:
```
"enabled": "SalesOrder.ext.CustomActions.enabledForCompletedOnly"
```

```
enabledForCompletedOnly: function(oBindingContext, aSelectedContexts) {
   if (aSelectedContexts && aSelectedContexts.length === 1) {
      return true;
   }
    
    return false;
}
```

**STEP**: 5 — OData V4: Manifest sample — List Report (action in table header)

**DESCRIPTION**: Place actions inside sap.ui5 -> routing -> targets -> <ListReportTargetName> -> options -> settings -> content -> header -> actions. Set press (Application method), visible, enabled, and text. visible/enabled accept boolean or handler function paths or binding expressions.

**LANGUAGE**: JSON

**CODE**:
```json
{
    "sap.ui5": {
        "routing": {
            "targets": {
                "<ListReportTargetName>": {
                    "options": {
                        "settings": {
                            "content": {
                                "header": {
                                    "actions": {
                                        "<ActionName>": {
                                            "press": "<ApplicationId.FolderName.ScriptFilename.methodName>",
                                            "visible": <true|false|handler function>,
                                            "enabled": <true|false|handler function>,
                                            "text": "{i18n>key}"                                         
                                        }
                                    }
                                }
                            }
                         }
                    }
                }
```

**STEP**: 6 — OData V4: Manifest sample — Object Page (action in header/footer)

**DESCRIPTION**: Same pattern as List Report: place actions inside the target options settings content header or footer. enabled can be static, binding expression, or handler function path.

**LANGUAGE**: JSON

**CODE**:
```json
{
    "sap.ui5": {
        "routing": {
            "targets": {
                "<ObjectPageTargetName>": {
                    "options": {
                        "settings": {
                            "content": {
                                "header": {
                                    "actions": {
                                        "<ActionName>": {
                                            "press": "<ApplicationId.FolderName.ScriptFilename.methodName>",
                                            "visible": <true|false|handler function>,
                                            "enabled": <true|false|handler function>,
                                            "text": "{i18n>key}"                                         
                                        }
                                    }
                                }
                            }
                         }
                    }
                }
```

**STEP**: 7 — OData V4: Enable action only in edit mode using ui model binding

**DESCRIPTION**: Use a binding expression on the ui model to enable only when ui>/editMode equals 'Editable'. Place this expression as the enabled property for the action in manifest.json.

**LANGUAGE**: JSON / Binding Expression

**CODE**:
```
enabled:"{= ${ui>/editMode} === 'Editable'}"
```

```json
{
    "sap.ui5": {
        "routing": {
            "targets": {
                "<ObjectPageTargetName>": {
                    "options": {
                        "settings": {
                            "content": {
                                "header": {
                                    "actions": {
                                        "<ActionName>": {
                                            "press": "<ApplicationId.FolderName.ScriptFilename.methodName>",
                                            "visible": <true|false|handler function>,
                                            "enabled": "{= ${ui>/editMode} === 'Editable'}",
                                            "text": "{i18n>key}"                                         
                                        }
                                    }
                                }
                            }
                         }
                    }
                }
            }
        }
    }
}
```

**STEP**: 8 — OData V4: Control action visibility using a custom handler (manifest + implementation)

**DESCRIPTION**: Configure a handler path in manifest.json to evaluate visibility dynamically (for example, based on backend property via requestObject). Implement the handler to return boolean or Promise<boolean>. Use caution when toggling visibility dynamically as it affects UX.

**LANGUAGE**: JSON / JavaScript

**CODE**:
```json
{
    "sap.ui5": {
        "routing": {
            "targets": {
                "<ObjectPageTargetName>": {
                    "options": {
                        "settings": {
                            "content": {
                                "header": {
                                    "actions": {
                                        "<ActionName>": {
                                            "DataFieldForAction::com.c_salesordermanage_sd.ArchiveSalesOrder": {
                                            "visible": "SalesOrder.ext.CustomActions.visibleForCompletedOnly"
                                            }
                                        }
                                    }
                                }
                             }
                        }
                    }
                }
            }
        }
    }
}
```

```
visibleForCompletedOnly: function (oBindingContext) {
  if (oBindingContext) {
    return oBindingContext.requestObject("OverallSDProcessStatus").then(function (sStatus) {
      return sStatus === "C";
    });
  } else {
    return false;
  }
}
```

**STEP**: 9 — Caution and Best Practices

**DESCRIPTION**: Use app extensions only when necessary. Integrate using SAP Fiori elements extensionAPI exclusively. After adding app extensions, your code owns display and behavior (controls, bindings, busy handling). Prefer manifest settings and annotations where possible. Follow SAP Design guidelines when showing/hiding actions dynamically.
--------------------------------

**TITLE**: Enable Header Actions on the Object Page (UI.Identification / DataFieldForAction)

**INTRODUCTION**: This guide shows how to enable and control header actions (Edit, Delete, Copy, and custom actions) on SAP Fiori Elements Object Pages using annotations. It includes exact XML, ABAP CDS, and CAP CDS code examples for OData V2 and V4, plus rules for visibility and enablement (updatable-path, deletable, UI.Hidden, OperationAvailable, NavigationAvailable, IsCopyAction).

**TAGS**: fiori-elements-framework, annotations, UI.Identification, DataFieldForAction, ODataV2, ODataV4, CAP, ABAP-CDS, XML, CDS, actions, copy-action

STEP: 1 - Enable Generic Header Actions (DataFieldForAction in UI.Identification)

DESCRIPTION: Add DataFieldForAction records under the unqualified UI.Identification annotation collection. Each DataFieldForAction renders a header button showing the Label. Use these examples to add a "Copy with new supplier" action. Note: In OData V2 the object page context is always passed to header actions. In OData V4 context is passed only for bound actions; unbound actions receive no context.

LANGUAGE: XML

CODE:
```xml
<Annotation Term="UI.Identification">
      <Collection>
            <Record Type="UI.DataFieldForAction">
                  <PropertyValue Property="Label" String="Copy with new supplier" />
                  <PropertyValue Property="Action"
                        String="STTA_PROD_MAN.STTA_PROD_MAN_Entities/STTA_C_MP_ProductCopy_new_supplier" />
                  <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High" />
            </Record>
            ...
      </Collection>
</Annotation>
```

LANGUAGE: ABAP

CODE:
```
@UI.identification: [
  {
    importance: #HIGH,
    label: 'Copy with new supplier',
    dataAction: 'PUSHDOWN:STTA_C_MP_ProductCopy_new_supplier',
    type: #FOR_ACTION,
    position: 1 
  }
]
product;
```

LANGUAGE: CDS

CODE:
```
UI.Identification : [
    {
        $Type : 'UI.DataFieldForAction',
        Label : 'Copy with new supplier',
        Action : 'STTA_PROD_MAN.STTA_PROD_MAN_Entities/STTA_C_MP_ProductCopy_new_supplier',
        ![@UI.Importance] : #High
    }
]
```

STEP: 2 - Edit Action Behavior on Subobject Pages

DESCRIPTION: Rules for displaying/enabling the Edit button on subobject pages:
- Visible on subobject page only if visible on object page AND not hidden on subobject entity.
- Enabled on subobject page only if enabled on object page AND not disabled on subobject entity.
- Selecting Edit on a subobject page enables editing for the entire object page (affects whole object page, not only subobject).

LANGUAGE: Text

CODE:
```
Rules:
- Show Edit on subobject: visible_on_object_page == true AND subobject_not_annotated_hide == true
- Enable Edit on subobject: enabled_on_object_page == true AND subobject_not_annotated_disable == true
- NOTE: Edit action toggles edit mode for the entire object page, not just the subobject.
```

STEP: 3 - Add a Standard Copy Action (isCopyAction)

DESCRIPTION: Define a Copy action by annotating a DataFieldForAction with UI.IsCopyAction = true. The Copy button appears after Delete. If no Label is provided, "Copy" is used by default. Copy action is available only on the object page (not subobject pages).

LANGUAGE: XML

CODE:
```xml
<Annotation Term="UI.Identification">
  <Collection>
      <Record Type="UI.DataFieldForAction">
          <PropertyValue Property="Label" String="Copy" />
          <PropertyValue Property="Action" String="STTA_PROD_MAN.STTA_PROD_MAN_Entities/STTA_C_MP_ProductCopy" />
          <Annotation Term="UI.IsCopyAction" Bool="true" />
     </Record>
```

LANGUAGE: CDS

CODE:
```
UI.Identification : [
    {
        $Type : 'UI.DataFieldForAction',
        Label : 'Copy',
        Action : 'STTA_PROD_MAN.STTA_PROD_MAN_Entities/STTA_C_MP_ProductCopy',
        ![@UI.IsCopyAction] : true,
    },
],
```

STEP: 4 - OData V2: Control Edit/Delete Visibility and updatable-path Example

DESCRIPTION: For OData V2:
- Edit button is shown if sap:updatable != "false".
- Delete button is shown if sap:deletable != "false".
To hide/show Edit based on runtime property, use Org.OData.Capabilities.V1.UpdateRestrictions with Updatable Path.

LANGUAGE: XML

CODE:
```xml
<Annotations Target="STTA_PROD_MAN.STTA_PROD_MAN_Entities/STTA_C_MP_Product">
    <Annotation Term="Org.OData.Capabilities.V1.UpdateRestrictions">
        <Record>
            <PropertyValue Property="Updatable" Path="Updatable_mc"/>
        </Record>
    </Annotation>
</Annotations>
```

NOTE: If you use updatable-path/deletable-path you must not have sap:updatable or sap:deletable statically overriding it.

STEP: 5 - OData V4: Draft, UpdateHidden, and Edit Enablement (EditAction and OperationAvailable)

DESCRIPTION:
- Draft apps often define a DraftRoot EditAction; when EditAction exists, UpdateRestrictions are ignored. Example of DraftRoot EditAction:
- Control visibility of Edit via UI.UpdateHidden at entity set level (static Bool or Path).
- Edit enablement when EditAction exists is controlled by OperationAvailable (static true/false or path). Behavior:
  - OperationAvailable = true or not defined => Edit visible (if updateHidden != true) and enabled.
  - OperationAvailable = false => Edit not visible.
  - OperationAvailable = <path> => If path returns true => enabled; false => not visible; null => visible but disabled.

LANGUAGE: XML

CODE:
```xml
<Annotation Term="com.sap.vocabularies.Common.v1.DraftRoot">
    <Record>
        <PropertyValue Property="EditAction" String="com.sap.gateway.srvd.sadl_gw_appmusicdr_definition.v0001.EditAction"/>
    </Record>
</Annotation>
```

LANGUAGE: XML

CODE:
```
<Annotations Target="com.c_salesordermanage_sd.EntityContainer/HeaderPartner"> 
   <Annotation Term="UI.UpdateHidden" Bool="true"/> 
</Annotations>

OR

<Annotations Target="com.c_salesordermanage_sd.EntityContainer/SalesOrderManage"> 
   <Annotation Term="UI.UpdateHidden" Path="isUpdateHidden"/> 
</Annotations>
```

LANGUAGE: ABAP

CODE:
```
@UI.updateHidden:true 

OR

@UI.updateHidden: #('isUpdateHidden')
```

LANGUAGE: CDS

CODE:
```
annotate com.c_salesordermanage_sd.SalesOrderManage with @( UI.UpdateHidden: true);

OR

annotate com.c_salesordermanage_sd.SalesOrderManage with @( UI.UpdateHidden: isUpdateHidden);
```

STEP: 6 - Define Custom Global Header Actions (DataFieldForAction, DataFieldForIntentBasedNavigation)

DESCRIPTION: Place global actions under UI.Identification (unqualified). Actions not marked determining=true render next to standard actions. Bound actions or DataFieldForIBN receive object context; unbound actions do not. Use UI.Hidden to hide actions (static or path-based). Use OperationAvailable to control enablement for DataFieldForAction. For intent-based navigation, control enablement using NavigationAvailable.

LANGUAGE: XML

CODE:
```xml
<Annotation Term="UI.Identification">
    <Collection>
        ...
        <Record Type="UI.DataFieldForAction">
            <PropertyValue Property="Label" String="Break Up" />
            <PropertyValue Property="Action" String="com.sap.gateway.srvd.sadl_gw_appmusicdr_definition.v0001.BREAK_UP" />
        </Record>
        <Record Type="UI.DataFieldForIntentBasedNavigation">
            <PropertyValue Property="Label" String="SampleIBN"/>
            <PropertyValue Property="SemanticObject" String="MySemanticObject"/>
            <PropertyValue Property="Action" String="manage"/>
            <PropertyValue Property="RequiresContext" Bool="false"/> // For header IBN buttons, this should only be false or not specified!
        </Record>
        ...
    </Collection>
</Annotation>
```

LANGUAGE: ABAP

CODE:
```
@UI.identification: [
  {
    label: 'Break Up',
    dataAction: 'com.sap.gateway.srvd.sadl_gw_appmusicdr_definition.v0001.BREAK_UP',
    type: #FOR_ACTION,
    position: 1 
  },
  {
    label: 'SampleIBN',
    semanticObjectAction: 'manage',
    type: #FOR_INTENT_BASED_NAVIGATION,
    position: 2 
  }
]
TEST;
@Consumption.semanticObject: 'MySemanticObject'
%ENTITY;
```

LANGUAGE: CDS

CODE:
```
UI : {
    Identification: [
        {
            $Type  : 'UI.DataFieldForAction',
            Label   : 'Break Up',
            Action : ' com.sap.gateway.srvd.sadl_gw_appmusicdr_definition.v0001.BREAK_UP'
        },
        {
            $Type              : ' UI.DataFieldForIntentBasedNavigation',
            Label              : ' SampleIBN ',
            SemanticObject     : 'MySemanticObject',
            Action             : 'manage',
            RequiresContext    : false
        }
    ]
}
```

STEP: 7 - Visibility and Enablement Controls Summary

DESCRIPTION: Quick mapping of annotations to behavior:
- UI.Hidden (static true or path => hidden) — controls visibility of custom actions.
- OperationAvailable (static true/false or path) — controls enablement/visibility for DataFieldForAction when EditAction/operation model used.
- NavigationAvailable / RequiresContext / Intent-based navigation — enablement for IBN buttons.
- UI.IsCopyAction = true — identifies the standard Copy button; appears after Delete on object page.
- sap:updatable / sap:deletable — OData V2 static controls (avoid combining with path-based annotations).
- Org.OData.Capabilities.V1.UpdateRestrictions / Updatable Path — path-based control for Edit visibility on OData V2 (use instead of static sap:updatable).

LANGUAGE: Text

CODE:
```
Controls:
- UI.Hidden        -> hide action (static or path)
- OperationAvailable -> enable/disable (true=enabled, false=not visible, path: null=visible disabled)
- NavigationAvailable -> enable/disable IBN
- UI.IsCopyAction -> makes DataFieldForAction behave as Copy (placed after Delete)
- sap:updatable / sap:deletable (OData V2) -> static show/hide (do not combine with path-based)
- UpdateRestrictions.Updatable (OData V2) -> use Path="..." for dynamic control
```

STEP: 8 - References (Related Topics & Links)

DESCRIPTION: Consult these related docs to expand action behavior and criticality:
- Displaying Actions on the Object Page: displaying-actions-on-the-object-page-f65e8b1.md
- Actions (general): actions-cbf16c5.md
- Setting the Criticality for Actions: setting-the-criticality-for-actions-12f2ba2.md
- Navigation from an App (Outbound): navigation-from-an-app-outbound-navigation-d782acf.md
- Adding Actions to Tables (Delete button details): adding-actions-to-tables-b623e0b.md

LANGUAGE: Text

CODE:
```
Related docs:
- displaying-actions-on-the-object-page-f65e8b1.md
- actions-cbf16c5.md
- setting-the-criticality-for-actions-12f2ba2.md
- navigation-from-an-app-outbound-navigation-d782acf.md
- adding-actions-to-tables-b623e0b.md
```
--------------------------------

**TITLE**: Enabling Key User Adaptation for SAP Fiori elements (OData V4)

**INTRODUCTION**: Step-by-step, code-focused instructions to enable SAPUI5 flexibility (key user adaptation) for SAP Fiori elements apps (OData V4). Includes required manifest.json settings, annotation samples to prepare header facets, manifest entries to stash or restrict header facets, and annotation guidance for enabling form personalization.

**TAGS**: fiori-elements-framework, sapui5, flexibility, key-user-adaptation, manifest.json, annotations, object-page, forms

STEP: 1 — Enable SAPUI5 Flexibility for the App

DESCRIPTION: Turn on SAPUI5 flexibility in your app manifest so key users can adapt the UI (required for all further personalization). This setting belongs under the top-level "sap.ui5" section of manifest.json.

LANGUAGE: JSON

CODE:
```json
// manifest.json (top-level)
{
  "sap.ui5": {
    "flexEnabled": true
    // other sap.ui5 settings...
  }
}
```

STEP: 2 — Prepare Header Facets via Annotations (UI.HeaderFacets)

DESCRIPTION: Provide annotations that define header facets (ReferenceFacet entries). These annotations prepare facets so they can be added by key users to the object page header. Include IDs when you want a stable reference; otherwise an ID is generated from the AnnotationPath and qualifier.

LANGUAGE: XML

CODE:
```xml
<Annotation Term="UI.HeaderFacets">
  <Collection>
    ...
    <Record Type="UI.ReferenceFacet">
      <PropertyValue Property="Label" String="Column MicroChart"/>
      <PropertyValue Property="ID" String="ColumnMicroChart"/>
      <PropertyValue Property="Target" AnnotationPath="_Item/@UI.Chart#ColumnMaxPath"/>
      <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
    </Record>
    <Record Type="UI.ReferenceFacet">
      <PropertyValue Property="Label" String="Progress Indicator"/>
      <PropertyValue Property="ID" String="ProgressIndicator"/>
      <PropertyValue Property="Target" AnnotationPath="@UI.DataPoint#Progress"/>
      <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
    </Record>
    ...
  </Collection>
</Annotation>
```

STEP: 3 — Configure Object Page Settings and Control Configuration for Header Facets

DESCRIPTION: Use the object page component entry in manifest.json to stash header facets (initially hide them) or restrict their adaptability. Reference header facets by the ID defined in annotations, or by the generated ID if no ID is present. Example shows stashing ColumnMicroChart and applying flexSettings designtime restriction for ProgressIndicator.

LANGUAGE: JSON

CODE:
```json
// manifest.json (component settings for an ObjectPage)
"SalesOrderManageObjectPage": {
  "type": "Component",
  "id": "SalesOrderManageObjectPage",
  "name": "sap.fe.templates.ObjectPage",
  "options": {
    "settings": {
      "editableHeaderContent ": false,
      "controlConfiguration": {
        "@com.sap.vocabularies.UI.v1.HeaderFacets": {
          "facets": {
            "ColumnMicroChart": {
              "stashed": true
            },
            "ProgressIndicator": {
              "stashed": false,
              "flexSettings": {
                "designtime": "not-adaptable-visibility"
              }
            }
          }
        }
      }
    }
  }
}
```

STEP: 4 — How Header Facet IDs Are Determined (Reference Behavior)

DESCRIPTION: If your annotation record contains a PropertyValue "ID", that ID is used in manifest.json references. If no ID is defined, the framework generates an ID from the AnnotationPath and qualifier (example: DataPoint::Rating). Use these IDs in controlConfiguration facets entries to stash or restrict adaptivity.

LANGUAGE: XML

CODE:
```xml
<Record Type="UI.ReferenceFacet">
  <PropertyValue Property="Label" String="Progress Indicator"/>
  <PropertyValue Property="ID" String="ProgressIndicator"/>
  <PropertyValue Property="Target" AnnotationPath="@UI.DataPoint#Progress"/>
</Record>
<Record Type="UI.ReferenceFacet">
  <PropertyValue Property="Label" String="Rating Indicator"/>
  <PropertyValue Property="Target" AnnotationPath="@UI.DataPoint#Rating"/>
</Record>
```

STEP: 5 — Stashing Behavior and User Experience

DESCRIPTION: Mark facets as "stashed" in manifest.json to keep them initially hidden and not loaded on app start. Key users can later add these stashed facets to the object page header via key user adaptation UI. (This is configured using the "stashed": true entry shown in Step 3.)

LANGUAGE: JSON

CODE:
```json
// Example entry that keeps a facet stashed (not loaded on startup)
"ColumnMicroChart": {
  "stashed": true
}
```

STEP: 6 — Restrict Adaptability Using flexSettings / designtime

DESCRIPTION: Use "flexSettings": { "designtime": "<value>" } to restrict allowed adaptation actions for a control. Example: "not-adaptable-visibility" disables add/remove actions affecting visibility but still allows move operations. Apply per facet in controlConfiguration as shown in Step 3.

LANGUAGE: JSON

CODE:
```json
// Example flexSettings to restrict visibility-related adaptions
"ProgressIndicator": {
  "stashed": false,
  "flexSettings": {
    "designtime": "not-adaptable-visibility"
  }
}
```

STEP: 7 — Enable Key User Adaptation in Forms (DataFieldDefault usage)

DESCRIPTION: To allow key users to add/move/remove form fields, expose properties using DataFieldDefault. Use DataFieldDefault as a wrapper for DataField or DataFieldWithUrl to make properties available in the Add dialog. Ensure FormContainers that will accept moved fields are based on the same entity.

LANGUAGE: JavaScript (annotation snippet syntax)

CODE:
```js
OrganizationDivision : String(2) @(
  Common : {Label : 'Division'},
  UI : {
    DataFieldDefault : {
      $Type: 'UI.DataField',
      Value: OrganizationDivision,
      Label: 'Default Division'
    }
  }
);
```

STEP: 8 — Constraints, Notes and Best Practices

DESCRIPTION: Keep these actionable constraints visible to the developer:
- Key user adaptation is available only for SAP Fiori elements for OData V4.
- Standard actions such as edit, save, delete are excluded from key user adaptation.
- Actions with dynamic visibility cannot be added or removed.
- DataFieldForAction, DataFieldForIntendBasedNavigation, DataFieldWithAction, and DataFieldWithIntentBasedNavigation are not supported for adding as form fields.
- Fields added via key user adaptation receive a stable ID provided by SAPUI5 flexibility (different from SAP Fiori elements generated stable IDs).

LANGUAGE: JSON

CODE:
```json
// Reminder (no code change) - ensure "sap.ui5": { "flexEnabled": true } is set
// and configure controlConfiguration entries per facet/form-field as required.
```


--------------------------------

**TITLE**: Enabling Chart Personalization in SAP Fiori Elements (Manifest Configuration)

**INTRODUCTION**: This guide shows how to enable, disable, and control chart personalization options through the application manifest. It targets Fiori Elements apps (OData V4) and explains default behaviors, variant-management effects (Page/Control/None), and which fields are excluded from the chart Filter option.

**TAGS**: fiori-elements, chart, personalization, manifest, OData V4, variant-management, controlConfiguration

**STEP**: 1 — Default behavior and variant-management effect

**DESCRIPTION**: Understand default availability of chart personalization options and how variant management affects them. Default behaviors:
- Page-level variant or when variant management is not enabled: Filter option is disabled.
- Control-level variant: Filter option is enabled.
- Variant-management mapping to visible options:
  - "Page" => Item, Sort, Type
  - "None" => Item, Sort, Type
  - "Control" => Item, Sort, Type, Filter

Use this knowledge when choosing a variant-management strategy and when deciding whether to allow users to change Filter-related settings.

**LANGUAGE**: Plain

**CODE**:
```text
Default behaviors:
- Page-level variant or when variant management is not enabled: Filter option is disabled.
- Control-level variant: Filter option is enabled.

Variant-management mapping:
- "Page" => Item, Sort, Type
- "None" => Item, Sort, Type
- "Control" => Item, Sort, Type, Filter
```

**STEP**: 2 — Disable all chart personalization (manifest setting)

**DESCRIPTION**: To switch off all chart personalization options globally for a chart control, set the chartSettings.personalization value to false in the component manifest under controlConfiguration for the chart annotation namespace. Use this manifest fragment as-is within the corresponding Component entry.

**LANGUAGE**: JSON

**CODE**:
```json
"BusinessPartnersList": {
   "type": "Component",
   "id": "BusinessPartnersList",
   "name": "sap.fe.templates.ListReport",
   "options": {
      "settings": {
         "contextPath": "/BusinessPartners",
         .....
         .....    
         "controlConfiguration": {
            "@com.sap.vocabularies.UI.v1.Chart": {
               "chartSettings": {
                  "personalization": false         
               }
            }
         }
      }
   }
},
```

**STEP**: 3 — Fine-grained control of personalization options (manifest setting with object)

**DESCRIPTION**: To enable/disable specific personalization features, set personalization to an object with boolean flags for column, sort, filter, and type. Important notes:
- personalization: true enables all features (default).
- personalization: false disables all features.
- personalization: object must explicitly define any options you want enabled; omitted options are treated as false. This avoids unexpected automatic enabling of new features in future releases.

Use this manifest fragment as a template inside the correct Component entry.

**LANGUAGE**: JSON

**CODE**:
```json
"BusinessPartnersList": {
   "type": "Component",
   "id": "BusinessPartnersList",
   "name": "sap.fe.templates.ListReport",
   "options": {
      "settings": {
         "contextPath": "/BusinessPartners",
         ....
         ....
         "controlConfiguration": {
            "@com.sap.vocabularies.UI.v1.Chart": {
               "chartSettings": {
                  "personalization": {
                    "column" : true,
                    "sort" : false, // Sort option is not visible
                    "filter" : true,
                    "type": true
                  }
               }
            }
         }
      }
   }
},
```

**STEP**: 4 — Fields excluded from the chart Filter option

**DESCRIPTION**: When configuring Filter as part of chart personalization, these fields are automatically excluded and will not appear in the Filter personalization UI:
- Fields annotated with @com.sap.vocabularies.UI.v1.HiddenFilter
- Fields coming from a navigation entity set
- Properties annotated as measures (Analytics.AggregatedProperty) or marked with Aggregation.CustomAggregate

Refer to "Configuring Charts" docs for additional chart-specific rules and examples.

**LANGUAGE**: Plain

**CODE**:
```text
Excluded from chart Filter personalization:
- @com.sap.vocabularies.UI.v1.HiddenFilter annotated fields
- Fields from a navigation entity set
- Properties annotated with Analytics.AggregatedProperty or Aggregation.CustomAggregate
```
--------------------------------

**TITLE**: Enabling Discovery / Persistence Mode for Object Page State Preservation

**INTRODUCTION**: Configure how the object page preserves/restores UI state (filters, tab/section selection, visible columns, chart/table personalization) via iAppState by setting the manifest property statePreservationMode. Use "discovery" for per-object transient state, and "persistence" for shared state across sibling objects (default for FCL apps).

**TAGS**: fiori-elements, sapui5, manifest.json, iAppState, statePreservationMode, object-page, persistence, discovery, flexible-column-layout, ODataV2, ODataV4

STEP: 1 — Choose the correct mode for your application

DESCRIPTION: Select the mode that matches your UX expectations and layout:
- discovery: default for non-FCL apps. Personalization changes affect only the current object instance and do NOT persist when navigating to another object at the same level.
  - Use when each object should revert to default settings when opened.
  - Examples: filter applied on one object shouldn't affect the next; tab selection resets to first tab on a new object.
- persistence: default for FCL apps. Personalization changes persist across sibling objects at the same level.
  - Use when personalization should be shared when navigating between objects (paginator or sibling navigation).
  - Examples: filters and selected tabs persist across objects.

LANGUAGE: text

CODE:
```text
Allowed values for statePreservationMode:
- "discovery"
- "persistence"
```

STEP: 2 — Configure statePreservationMode in manifest.json (OData V2)

DESCRIPTION: Set the statePreservationMode property under "sap.ui.generic.app" → "settings" in the application manifest (manifest.json). This is the primary configuration for enabling discovery or persistence mode for SAP Fiori elements (OData V2). Place the setting at the app-level where other generic app settings are declared.

LANGUAGE: JSON

CODE:
```json
 
"sap.ui.generic.app": {
        "_version": "1.3.0",
        "settings": {
            
            "objectPageDynamicHeaderTitleWithVM": true,
            "statePreservationMode": "persistence"/"discovery"
        },
        "pages": {
            "ListReport|C_STTA_SalesOrder_WD_20": {
```

STEP: 3 — Operational notes and edge cases

DESCRIPTION: Keep these behavior specifics in mind when implementing:
- Section selection: Persists only when selected via anchor navigation; scrolling to a section does NOT count as selection for persistence.
- Scope of persistence: Changes persist only while the object/subobject page remains open. Closing the page resets changes to annotation/manifest defaults.
- Exception: The latest opened object (most recently visited) retains its changes even after closing its page.
- Default behavior by layout: If your app uses flexible column layout (FCL), persistence is the default; non-FCL apps default to discovery.

LANGUAGE: text

CODE:
```text
Notes:
- Section selection persists only when selected from anchor area (not via scrolling).
- Changes to pages/subobjects reset to defaults when the page is closed (except the latest opened object retains its changes).
- FCL apps default to "persistence"; non-FCL apps default to "discovery".
```

STEP: 4 — OData V4 restriction

DESCRIPTION: For SAP Fiori elements with OData V4, discovery mode is not supported. Only persistence behavior is applicable — do not configure statePreservationMode to "discovery" for OData V4 apps.

LANGUAGE: text

CODE:
```text
Restriction for OData V4:
- Discovery mode is NOT applicable for SAP Fiori elements for OData V4. Use persistence behavior instead.
```
--------------------------------

**TITLE**: Enabling Mass Edit (Dialog) in SAP Fiori Elements

**INTRODUCTION**: Action-oriented reference for enabling and configuring the Mass Edit dialog (mass edit) in SAP Fiori Elements applications. Covers compatibility (OData V2 vs V4), manifest.json configuration (enableMassEdit, visibleFields, ignoredFields), operation grouping, prerequisites, behavior, and restrictions. Use this as a checklist and copy-paste source for manifest.json changes.

**TAGS**: fiori-elements, mass-edit, manifest.json, OData, enableMassEdit, visibleFields, ignoredFields, operationGroupingMode, CAP

STEP: Compatibility (OData V2 vs OData V4)

DESCRIPTION: Determine where mass edit is supported and how configuration options differ between OData V2 and OData V4.

LANGUAGE: text

CODE:
```text
- OData V2: Mass edit dialog is available only in the list report.
- OData V4: Mass edit dialog is available in the list report and on the object page (object page only in edit mode). Configuration is via enableMassEdit in manifest.json and accepts:
  - undefined (disabled)
  - boolean
  - object with visibleFields or ignoredFields (only one of these can be used)
```

STEP: Enable mass edit in manifest.json (Boolean)

DESCRIPTION: Turn on mass edit for a specific table by setting enableMassEdit to true in the controlConfiguration entry for the table (identified by the LineItem annotation id/path).

LANGUAGE: JSON

CODE:
```JSON
"controlConfiguration": {
   "_Item/@com.sap.vocabularies.UI.v1.LineItem": {
      "tableSettings": {
         ......
         ......
         "enableMassEdit": true
      },
      ......
      ......
}
```

STEP: Enable mass edit using visibleFields (recommended for performance)

DESCRIPTION: Use visibleFields to explicitly list fields available in the mass edit dialog. This lets you load only required fields (performance boost). visibleFields accepts a FieldGroup annotation reference or a comma-separated property list. If visibleFields is set, ignoredFields is ignored. Use visibleFields when you need full control over the dialog fields.

LANGUAGE: JSON

CODE:
```JSON
"controlConfiguration": {
   "_Item/@com.sap.vocabularies.UI.v1.LineItem": {
      "tableSettings": {
         ......
         ......
         "enableMassEdit": {
            "visibleFields": "@com.sap.vocabularies.UI.v1.FieldGroup#FieldsForMassEdit" 
      },
      ......
      ......
}
```

STEP: Enable mass edit using ignoredFields

DESCRIPTION: Use ignoredFields to hide specific fields from the mass edit dialog (fields listed are not shown). ignoredFields accepts a comma-separated list of properties or a FieldGroup annotation. Do not use ignoredFields together with visibleFields — visibleFields takes precedence.

LANGUAGE: JSON

CODE:
```JSON
"controlConfiguration": {
   _Item/@com.sap.vocabularies.UI.v1.LineItem: {
      "tableSettings": {
         ......
         ......
         "enableMassEdit": {
             "ignoredFields": "property2,property3"
      },
      ......
      ......
}
```

STEP: Configure operation grouping mode (ChangeSet vs Isolated)

DESCRIPTION: Choose how update requests from a mass edit are grouped: "ChangeSet" groups updates for multiple objects in a single OData changeset; "Isolated" sends separate changesets per object. Set via operationGroupingMode inside enableMassEdit. Default: object page = ChangeSet, list report = Isolated.

LANGUAGE: JSON

CODE:
```JSON
"controlConfiguration": {
   _Item/@com.sap.vocabularies.UI.v1.LineItem: {
      "tableSettings": {
         ......
         ......
         "enableMassEdit": {
            ......
            "operationGroupingMode": "Isolated"
      },
      ......
      ......
}
```

STEP: Prerequisites to enable/use mass edit

DESCRIPTION: Ensure these conditions before relying on mass edit:

LANGUAGE: text

CODE:
```text
- The application manifest.json must enable mass edit (see samples above).
- End users must select at least one record to open mass edit.
- On object pages, mass edit is available only in edit mode.
- For CAP Node.js back ends, you may need to enable a feature flag. See:
  https://cap.cloud.sap/docs/releases/dec23#sapui5-mass-edit
- If the back end is ETag enabled, ensure ETag implementation is in "etag master" mode (child entity ETag must not depend on parent/root ETag).
```

STEP: Mass edit behavior and runtime details

DESCRIPTION: Implementation and runtime behaviors that affect mass edit operations; use to design back-end and front-end expectations.

LANGUAGE: text

CODE:
```text
- Read-only fields are automatically excluded from the mass edit dialog. Only editable fields are changed.
- When saving, values entered apply to all selected records that are editable.
- Updates are executed per selected record:
  - If some records fail with errors/warnings, updates for other selected instances still proceed.
  - An individual record is only updated if all fields for that record can be updated.
- Suggestion values (prepopulated suggestion list) are proposed only using the first 30 selected lines.
  - For >30 lines, dialog opens immediately; field editability per line is computed in background and used on save.
- The Edit button
  - Is not visible if the table entity has an update restriction set to static false.
  - Visibility can be controlled by UI.UpdateHidden (can be path-based to parent for object/subobject pages or singleton in list report).
  - Is not enabled if an update restriction path resolves to false.
- If enableMassEdit is active and selectionMode is unspecified or "Multi", multiple selection is allowed regardless of other toolbar action conditions.
- Server-side validation is not performed while editing in the dialog; no back-end communication until the user presses Save.
- Do NOT enable mass edit if the back end locks the entire object while updating a child object.
- Mass edit is NOT supported on object pages when Collaborative Draft is enabled.
```

STEP: Restrictions — unsupported fields and limitations

DESCRIPTION: Fields and features that cannot be used in the mass edit dialog. Ensure these are not included in visibleFields or expected to work.

LANGUAGE: text

CODE:
```text
Unsupported field types/features in the mass edit dialog:
- Image-based fields
- DataFieldForAnnotation-based fields (examples: micro-chart fields, contact fields, fields coming from a FieldGroup-based field in the table)
- Multi-input fields
- Fields coming from navigation entities
- Custom fields
- Fields with context-dependent value help (see Field Help docs)
- Value help fields with fixed dropdown values (@Common.ValueListWithFixedValues: true)

Other limitations:
- Suggestion lists are not available when:
  - A field is part of Common.ValueListParameterIn mapping of another field that is filled (e.g., City suggestions suppressed if Country is selected in dialog).
  - A field has a Common.ValueListParameterOut mapping (Out mapping cannot be resolved reliably for multiple selected records).
```

STEP: Performance guidance

DESCRIPTION: Best practices for fast load and predictable mass edit dialogs.

LANGUAGE: text

CODE:
```text
- Prefer using visibleFields to explicitly list only the fields needed in the mass edit dialog (reduces payload and improves load time).
- Avoid including large or complex value helps in visibleFields if not required.
- Limit the number of fields exposed for mass edit to those strictly necessary for the operation.
```
--------------------------------

**TITLE**: Enable Mass Edit Dialog in List Report (OData V2)

**INTRODUCTION**: This document describes how to enable and configure the Mass Edit (multiEdit) dialog on a List Report (OData V2). It covers enabling multiEdit in manifest.json, targeting fields via FieldGroup annotation for performance, ignoring specific fields from the dialog, overriding the dialog title, and platform limitations/behavior.

**TAGS**: fiori-elements-framework, list-report, mass-edit, multiEdit, manifest.json, FieldGroup, annotation, i18n, ODataV2

**STEP**: 1 — Enable multiEdit in manifest.json

**DESCRIPTION**: Enable multiEdit to show the Edit option in the table toolbar. When enabled, users can select multiple records and open the mass edit dialog; values entered are applied to all selected records. By default the dialog displays editable fields corresponding to columns currently displayed in the table (table personalization affects displayed columns).

**LANGUAGE**: JSON

**CODE**:
```json
"sap.ui.generic.app": {
        "_version": "1.1.0",
        "pages": [
            {
                "entitySet": "STTA_C_SO_SalesOrder_ND",
                "component": {
                    "name": "sap.suite.ui.generic.template.ListReport",
                    "list": true,
                    "settings": {
                           "tableSettings": {
                                  "multiEdit": {
                                         "enabled" : true
                                   }

                    }
```

**STEP**: 2 — Use FieldGroup annotation to select fields for multiEdit (recommended for performance)

**DESCRIPTION**: Provide a FieldGroup annotation (with a qualifier) and reference it from manifest.json via annotationPath. The DataFields in the FieldGroup define which fields appear in the multiEdit dialog. This is recommended to improve performance by explicitly enumerating editable fields.

**LANGUAGE**: JSON

**CODE**:
```json
"sap.ui.generic.app": {
        "_version": "1.1.0",
        "pages": [
            {
                "entitySet": "STTA_C_SO_SalesOrder_ND",
                "component": {
                    "name": "sap.suite.ui.generic.template.ListReport",
                    "list": true,
                    "settings": {
                           "tableSettings": {
                                  "multiEdit": {
                                         "enabled" : true,
                                         "annotationPath" : "com.sap.vocabularies.UI.v1.FieldGroup#MultiEdit"
                                   }
                    }
```

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.FieldGroup" Qualifier="MultiEdit">
          <Record>
              <PropertyValue Property="Data">
                     <Collection>
                          <Record Type="UI.DataField">
                                <PropertyValue Property="Value" Path="NetAmount"/>
                          </Record>
                          <Record Type="UI.DataField">
                                <PropertyValue Property="Value" Path="TaxAmount"/>
                          </Record>
                          <Record Type="UI.DataField">
                           <PropertyValue Property="Value" Path="LifecycleStatus"/>
                          </Record>
                      </Collection>
            	</PropertyValue>
          </Record>
</Annotation>
```

**STEP**: 3 — Ignore specific fields from the mass edit dialog (key user adaptation)

**DESCRIPTION**: Exclude fields from being displayed in the mass edit dialog by adding an ignoredFields list in manifest.json. Provide comma-separated property names as the value. Use this to prevent specific properties from being added to the dialog.

**LANGUAGE**: JSON

**CODE**:
```json
manifest.json:
"tableSettings": {
                            "multiEdit": {
                                "enabled": true,
                                "annotationPath": "com.sap.vocabularies.UI.v1.FieldGroup#MultiEdit",
                                "ignoredFields":"NetAmount,TaxAmount" // comma separated values
                            }
}
```

**STEP**: 4 — Override the default dialog title

**DESCRIPTION**: The default dialog title is "Edit(X)". Override it by adding the MULTI_EDIT_DIALOG_TITLE key to the list report i18n file to customize the title displayed by the multiEdit dialog.

**LANGUAGE**: PlainText

**CODE**:
```
Add the resource key MULTI_EDIT_DIALOG_TITLE to the app's i18n properties file for the List Report.
```

**STEP**: 5 — Limitations and behavior

**DESCRIPTION**: Preserve these technical constraints and runtime behaviors when implementing multiEdit:
- Applicable table types: responsive tables and grid tables only.
- Not supported: smart multi-input fields, custom columns, and DataFieldForAnnotations.
- Only entity set properties (i.e., properties of the underlying entity) are supported for mass edit.
- Batch/update behavior: each selected instance is updated in a separate changeset within a single batch. If one or more selected instances fail during update, other instances in the batch are still executed.

**LANGUAGE**: PlainText

**CODE**:
```
- Tables supported: responsive table, grid table.
- Unsupported controls: smart multi-inputs, custom columns, DataFieldForAnnotations.
- Only entity set properties supported.
- Each selected instance is sent as a separate changeset within a single batch; failures for some instances do not stop updates for others.
```

**STEP**: 6 — Related resources

**DESCRIPTION**: Use these related documents for advanced customization (custom save, adding custom input fields, localization):

**LANGUAGE**: PlainText

**CODE**:
```
- Replacing the Standard Save Functionality in Mass Edit Dialog:
  replacing-the-standard-save-functionality-in-the-mass-edit-dialog-492d8a9.md

- Enabling Editing Using a Dialog (Mass Edit):
  enabling-editing-using-a-dialog-mass-edit-965ef5b.md

- Adding a Custom ViewExtension in the Mass Edit Dialog:
  adding-custom-input-fields-to-the-mass-edit-dialog-fd26fee.md

- Localization of UI Texts:
  localization-of-ui-texts-b8cb649.md
```
--------------------------------

**TITLE**: Enabling Inline Creation Mode and Empty Row Mode for Table Entries (Fiori Elements)

**INTRODUCTION**: Practical, code-focused guide to configure inline creation and empty-row creation modes for table entries in SAP Fiori Elements (OData V2 & V4). Includes required annotations, DefaultValuesFunction wiring, side effects, manifest.json settings, custom error message keys, and behavior toggles.

**TAGS**: fiori-elements, manifest.json, annotations, DefaultValuesFunction, InsertRestrictions, RequiredProperties, InlineCreation, creationRows, InlineCreationRows, side-effects, i18n

STEP: 1 — Choose creation mode and use-case
DESCRIPTION: Decide which creation mode suits your table. Use inline/empty-row modes only for tables with a small number of columns. For complex tables use a create page. Behavior summary:
- Inline Creation Mode: Add row inline, highlighted until saved; avoids automatic navigation.
- Empty Row Mode: A persistent empty row is shown (top for responsive tables, bottom for grid tables). No draft exists for the empty row until user inputs. Features: hidden row actions in empty row, no sorting/grouping for empty row; responsive table hides Create button; grid table shows Create and scrolls to empty row.
LANGUAGE: text
CODE:
```text
(Behavior summary; no code)
```

STEP: 2 — Annotate RequiredProperties for InsertRestrictions (XML)
DESCRIPTION: Mark required properties for insertion so empty-row/draft conversions require these fields. Use Capabilities.InsertRestrictions.RequiredProperties on the target entity (LineItem).
LANGUAGE: XML
CODE:
```xml
<Annotations Target="com.c_salesordermanage_sd.SalesOrderManage/_Item">
    <Annotation Term="Capabilities.InsertRestrictions">
        <Record Type="Capabilities.InsertRestrictionsType">
            <PropertyValue Property="RequiredProperties">
                <Collection>
                    <PropertyPath>RequestedQuantity</PropertyPath>
                    <PropertyPath>Material</PropertyPath>
                </Collection>
            </PropertyValue>
        </Record>
    </Annotation>
</Annotations>
```

STEP: 3 — Provide Default Values via DefaultValuesFunction (entity-level)
DESCRIPTION: Define a function import that returns default values and annotate the entity set with com.sap.vocabularies.Common.v1.DefaultValuesFunction to prefill empty rows.
LANGUAGE: XML
CODE:
```xml
<FunctionImport Name="GetDefaultsForRoot" ReturnType="cds_zrc_dv_defaultvalues.ZRC_DV_A_Create" m:HttpMethod="GET"/> 

<Annotations xmlns=http://docs.oasis-open.org/odata/ns/edm Target="cds_zrc_dv_defaultvalues.cds_zrc_dv_defaultvalues_Entities/Root">
<Annotation Term="com.sap.vocabularies.Common.v1.DefaultValuesFunction" String="GetDefaultsForRoot"/>
</Annotations>
```

STEP: 4 — Provide Default Values via DefaultValuesFunction (navigation property / item-level)
DESCRIPTION: Create a function import for defaults when creating via a navigation property (item). Annotate the navigation property's target with DefaultValuesFunction.
LANGUAGE: XML
CODE:
```xml
<FunctionImport Name="GetDefaultsForItem" ReturnType="cds_zrc_dv_defaultvalues.ZRC_DV_A_Create" m:HttpMethod="GET" sap:action-for="cds_zrc_dv_defaultvalues.RootType">
<Parameter Name="UUID" Type="Edm.Guid" Mode="In"/>
</FunctionImport>
 
<Annotations xmlns=http://docs.oasis-open.org/odata/ns/edm Target="cds_zrc_dv_defaultvalues.RootType/to_Item">
<Annotation Term="com.sap.vocabularies.Common.v1.DefaultValuesFunction" String="GetDefaultsForItem"/>
</Annotations>
```

STEP: 5 — Recalculate default values when influencing properties change (SideEffects)
DESCRIPTION: If a property influences DefaultValuesFunction output, define SideEffects so the existing empty row gets recalculated. Use the navigation property that represents the table as TargetEntities.
LANGUAGE: plain
CODE:
```
SideEffects #TableIsRefreshed: {
      SourceProperties: [CustomerNumber],
      TargetEntities  : [_Item]
  }
```

STEP: 6 — Recalculate default values (XML annotation for SideEffects)
DESCRIPTION: Example of XML annotation syntax for Common.SideEffects with a Qualifier.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="Common.SideEffects" Qualifier=" TableIsRefreshed ">
     <Record Type="Common.SideEffectsType">
          <PropertyValue Property="SourceProperties">
          <Collection>
          <PropertyPath>CustomerNumber</PropertyPath>
          </Collection>
          </PropertyValue>
          <PropertyValue Property="TargetEntities">
          <Collection>
          <NavigationPropertyPath>_Item</NavigationPropertyPath>
          </Collection>
     </Record>
</Annotation>
```

STEP: 7 — Configure createMode globally and per-page (OData V2 manifest.json sample)
DESCRIPTION: Configure createMode at app, object page, and section levels. Section-level createMode overrides page-level and app-level settings. Use section ID matching the annotation's ID when referencing sections.
LANGUAGE: JSON
CODE:
```json
{
  "sap.ui.generic.app" : {
    "_version" : "1.3.0",
    "settings" : {
      "tableSettings" : {
        "createMode" : " creationRows"   // Applicable to all tables in object page and sub object page.
      }
    },
    "pages" : {
      "ListReport|C_STTA_SalesOrder_WD_20" : {
        "entitySet" : "C_STTA_SalesOrder_WD_20",
        "component" : {
          "name" : "sap.suite.ui.generic.template.ListReport",
          "list" : true
        },
        "pages" : {
          "ObjectPage|C_STTA_SalesOrder_WD_20" : {
            "entitySet" : "C_STTA_SalesOrder_WD_20",
            "component" : {
              "name" : "sap.suite.ui.generic.template.ObjectPage",
              "settings" : {
                "createMode" : "inline",    // Applicable to all tables in the object page. Overrides the app level definition for create mode.
                "sections" : {
                  "to_Item::com.sap.vocabularies.UI.v1.LineItem" : {
                    "navigationProperty" : "to_Item",
                    "entitySet" : "C_STTA_SalesOrderItem_WD_20",
                    "createMode" : "newPage",     // Applicable to the table in the section. Overrides the object page and app level definition for create mode.
                    "tableSettings" : {
                      "inlineDelete" : true
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
```

STEP: 8 — Toggle default inline-create row sorting (disableDefaultInlineCreateSort)
DESCRIPTION: In object page section settings, set disableDefaultInlineCreateSort=true to prevent new inline rows from being forced to the top in edit mode. Applicable only when createMode:"inline" is set.
LANGUAGE: JSON
CODE:
```json
"ObjectPage|STTA_C_MP_Product": {
                        "entitySet": "STTA_C_MP_Product",
                        "component": {
                            "name": "sap.suite.ui.generic.template.ObjectPage",
                            "settings": {
                                "showRelatedApps": true,
                                "tableType": "ResponsiveTable",
                                "editableHeaderContent": true,,
                                "sections": {
                                    "to_ProductText::com.sap.vocabularies.UI.v1.LineItem": {
                                        "navigationProperty": "to_ProductText",
                                        "entitySet": "STTA_C_MP_ProductText",
                                        "multiSelect": true,
                                        "createMode": "inline",
                                        "disableDefaultInlineCreateSort":true,
                                        "tableType": "ResponsiveTable"
                                    }
                                }
                            }
                        }
                   }
```

STEP: 9 — Custom error message key for empty required fields (i18n)
DESCRIPTION: Override the default "Enter a value" message by adding a key in your app's i18n file. Use the key format:
REQUIRED_PROP_ERROR|<EntitySet>|<navigationProperty>|com.sap.vocabularies.UI.v1.LineItem|<Required Property Name>
LANGUAGE: text
CODE:
```text
Example:
REQUIRED_PROP_ERROR|C_STTA_SalesOrder_WD_20|to_Item|com.sap.vocabularies.UI.v1.LineItem|so_item_pos=Enter an item position
```

STEP: 10 — Enable Inline creation mode in OData V4 manifest (ObjectPage controlConfiguration)
DESCRIPTION: For Fiori Elements OData V4, set creationMode "Inline" in controlConfiguration for the table. FieldControl=mandatory displays an asterisk in column header in edit mode.
LANGUAGE: JSON
CODE:
```json
"SalesOrderManageObjectPage":{                  
    "type": "Component",                  
    "id": "SalesOrderManageObjectPage",                  
    "name": "sap.fe.templates.ObjectPage",                  
    "options":{
        "settings":{
            ....
            ....                                
            "controlConfiguration":{                              
                "_Item/@com.sap.vocabularies.UI.v1.LineItem":{
                    "tableSettings": {
                        ....
                        ....           
                        "creationMode":{                                          
                            "name": "Inline",            // Results in Inline creation (default).                               
                            ...                          
                        }                                  
                    }                              
                }                      
            }      
        } 
    }
}
```

STEP: 11 — Enable InlineCreationRows (empty row mode) and hide empty row in edit mode (OData V4)
DESCRIPTION: Use creationMode name "InlineCreationRows". Option inlineCreationRowsHiddenInEditMode (default false) hides the empty row in edit mode when true. Create button reveals/focuses the empty row when hidden.
LANGUAGE: JSON
CODE:
```json
"SalesOrderManageObjectPage":{                  
    "type": "Component",                  
    "id": "SalesOrderManageObjectPage",                  
    "name": "sap.fe.templates.ObjectPage",                  
    "options":{
        "settings":{
            ....
            ....                                
            "controlConfiguration":{                              
                "_Item/@com.sap.vocabularies.UI.v1.LineItem":{
                    "tableSettings": {
                        ....
                        ....           
                        "creationMode":{                                          
                            "name": "InlineCreationRows",            
                            "inlineCreationRowsHiddenInEditMode": true
                        }                                  
                    }                              
                }                      
            }      
        } 
    }
}
```

STEP: 12 — Set InlineCreationRows as default for all tables (OData V4 macros)
DESCRIPTION: Define a default creation mode at the app-level macros so all table macros use InlineCreationRows unless overridden per table.
LANGUAGE: JSON
CODE:
```json
"sap.fe": {
        …
        "macros": {
            "table": {
                "defaultCreationMode": "InlineCreationRows"
            }
        }
        …
    }
```

STEP: 13 — Show newly created objects at bottom for GridTable (createAtEnd)
DESCRIPTION: For GridTable, set creationMode.createAtEnd=true to append new inline-created objects at the bottom instead of top (default). Also set table type and personalization options if needed.
LANGUAGE: JSON
CODE:
```json
"controlConfiguration": {
    "@com.sap.vocabularies.UI.v1.LineItem": {
        "tableSettings": {
            "type": "GridTable",
            "personalization": {
                "column": true,
                "sort": false
            },
            "creationMode": {
                "name": "Inline",
                "createAtEnd": true
            }
        }
    }
}
```

STEP: 14 — Behavior notes & best practices
DESCRIPTION: Key operational notes to implement correctly:
- InsertRestrictions annotation controls whether table is insertable.
- If using a custom section ID, reference it in manifest (e.g., to_ProductText::com.sap.vocabularies.UI.v1.LineItem).
- For older NW 7.51 SP00 or lower using drafts: inline creation + filters may behave incorrectly.
- DefaultValuesFunction must be annotated on the entity set for empty-row prefill; use SideEffects for recalculation when influencing properties change.
- Set UI.Importance to High for RequiredProperties so required columns remain visible on small screens.
LANGUAGE: text
CODE:
```text
(Operational notes; no code)
```
--------------------------------

**TITLE**: Enable Lazy Loading for Custom Object Page Sections (Fiori elements, OData V2)

**INTRODUCTION**: Enable lazy loading for custom sections added via extension points on the SAP Fiori elements Object Page. Applicable only for Fiori elements with OData V2. This guide shows where to set the enableLazyLoading flag in your app's manifest.json and what to check before enabling it.

**TAGS**: fiori-elements-framework, lazy-loading, object-page, manifest.json, extension-points, OData V2, SAPUI5, ObjectPageLayout

STEP: 1 — Verify applicability and locate manifest.json

DESCRIPTION: Confirm your application uses SAP Fiori elements for OData V2 and locate the manifest.json file in your application root. Identify the extension point key under "sap.suite.ui.generic.template.ObjectPage.view.Details" corresponding to the custom section you added.

LANGUAGE: text

CODE:
```
manifest.json
// Ensure the app is Fiori elements for OData V2.
// Locate: "sap.suite.ui.generic.template.ObjectPage.view.Details" -> [YourExtensionPointKey]
```

STEP: 2 — Enable lazy loading for the custom extension point

DESCRIPTION: In manifest.json, under the object page view descriptor "sap.suite.ui.generic.template.ObjectPage.view.Details", set "enableLazyLoading": true inside the "sap.ui.generic.app" object for the extension point entry that defines your section (fragment). Keep the rest of the extension point configuration (className, fragmentName, type) unchanged.

LANGUAGE: JSON

CODE:
```json
"sap.suite.ui.generic.template.ObjectPage.view.Details": {
  "AfterFacet|STTA_C_MP_Producttext|ProductTextCollectionFacetID":{
    "className": "sap.ui.core.Fragment",
    "fragmentName": "STTA_MP.ext.fragments.ApplicationLogBreakout",
    "type": "XML",
    "sap.ui.generic.app": {
      "title": "{{xtit.applicationLog}}",
      "enableLazyLoading": true
    }
  },
```

STEP: 3 — Constraints, verification, and references

DESCRIPTION: Only enable lazy loading for sections that do not affect other sections or the object page header (inter-section dependencies or header updates may require immediate loading). Default standard sections are already lazy-loaded; apply this flag only to custom extension-point sections. After updating manifest.json, deploy or reload the app and verify the section loads on demand (check network and runtime loading of the fragment). For details and behavior, consult the ObjectPageLayout API and Fiori Design Guidelines.

LANGUAGE: text

CODE:
```
Checklist:
- Only set enableLazyLoading for independent custom sections.
- Do not enable for sections that update header or other sections.
- Test: Reload app, navigate to object page, confirm fragment is loaded on demand.
References:
- Fiori Design Guidelines: https://experience.sap.com/fiori-design-web/object-page/#structure
- ObjectPageLayout API: https://ui5.sap.com/#/api/sap.uxap.ObjectPageLayout
```
--------------------------------

**TITLE**: Enable "Create Object" Dialog in List Report (OData V2 & V4)

**INTRODUCTION**: This guide shows how to enable creation of new entities using a dialog in SAP Fiori List Report pages for both OData V2 and OData V4. It includes exact manifest.json configuration snippets, required constraints, and i18n keys to customize dialog title and buttons. Use these snippets verbatim and ensure the specified fields are valid properties of the target entity set.

**TAGS**: manifest.json, ListReport, createWithParameterDialog, creationMode, ODataV2, ODataV4, i18n, SAP Fiori Elements

STEP: 1 — Enable create dialog in List Report (OData V2)

DESCRIPTION:
- Add the createWithParameterDialog property under the table settings for the List Report page in manifest.json.
- Provide the fields object mapping dialog field names to entity property paths. Keep the dialog fields to a maximum of 8 data fields.
- Ensure all mandatory properties of the entity are present in the fields list.
- Limitations: You cannot navigate to an object page in create mode after enabling this; draft state is not maintained; only list report pages support this. If backend returns state messages on create, each message must include a target pointing to the respective field.

LANGUAGE: JSON

CODE:
```json
"createWithParameterDialog" : {
               "fields" : {
                  "<fieldName>" : {"path":"<fieldname>"},
                  "<fieldName>" : {"path":"<fieldname>"}
             }
```

STEP: 2 — Full manifest.json example for OData V2 List Report

DESCRIPTION:
- Place the following example under "sap.ui.generic.app" -> "pages" for the ListReport page that targets your entity set.
- The snippet shows createWithParameterDialog under tableSettings -> createWithParameterDialog -> fields with explicit property mappings.

LANGUAGE: JSON

CODE:
```json
"sap.ui.generic.app": {
    "_version": "1.3.0",
    "pages": {
        "ListReport|STTA_C_SO_SalesOrder_ND": {
            "entitySet": "STTA_C_SO_SalesOrder_ND",
            "component": {
                "name": "sap.suite.ui.generic.template.ListReport",
                "list": true,
                "settings": {
                    "multiSelect": true,
                    "isWorklist": true,
                    "tableSettings": {
                        "createWithParameterDialog" : {
                            "fields" : {
                                "BusinessPartnerID":{"path": "BusinessPartnerID"},
                                "CurrencyCode" : {"path":"CurrencyCode"},
                                "BillingStatus" : {"path":"BillingStatus"},
                                "DeliveryStatus" : {"path":"DeliveryStatus"},
                                "OpportunityID" : {"path":"OpportunityID"}
                            }
                        }
                    }
                }
            },
            "pages": {
                ..............
                ..............
            }
        }
    }
}
```

STEP: 3 — Enable create dialog in multi-view (OData V2) per-variant

DESCRIPTION:
- For multi-view list reports (quickVariantSelectionX), specify createWithParameterDialog inside the tableSettings for the variant where you want the dialog available.
- This example shows a variant ("1") with tableSettings containing createWithParameterDialog.

LANGUAGE: JSON

CODE:
```json
"sap.ui.generic.app": {
    "pages": {
        "ListReport|STTA_C_SO_SalesOrder_ND": {
            "entitySet": "C_STTA_SalesOrder_WD_20",
            "component": {
                "name": "sap.suite.ui.generic.template.ListReport",
                "list": true,
                "settings": {
                    "quickVariantSelectionX": {
                        "showCounts": true,
                        "variants": {
                            "0": {
                                "key": "_tab1",
                                "annotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant#Expensive"
                            },
                            "1": {
                                "key": "_tab2",
                                "annotationPath": "com.sap.vocabularies.UI.v1.SelectionPresentationVariant#Cheap",
                                "tableSettings": {
                                    "createWithParameterDialog": {
                                        "fields": {
                                            "bp_id": { "path": "bp_id" },
                                            "currency_code": { "path": "currency_code" },
                                            "op_id": { "path": "op_id" }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            ...
        }
    }
}
```

STEP: 4 — OData V2: Dialog behavior and constraints (Action items)

DESCRIPTION:
- Ensure the specified fields exist in the entity type and include all mandatory fields.
- You can prefill dialog fields from filter values using the extension point (see platform docs on prefilling fields).
- If backend returns state messages after Create, each message must provide a target mapping so the UI can display the message on the correct field.
- Dialog title default key (i18n): CREATE_DIALOG_TITLE. Change in your i18n file or via Adaptation Editor.
- Default dialog buttons are "Create" and "Cancel" — changeable via Adaptation Editor.

LANGUAGE: Properties

CODE:
```properties
# i18n.properties (OData V2)
CREATE_DIALOG_TITLE=New Object
```

STEP: 5 — Enable create dialog in List Report (OData V4)

DESCRIPTION:
- For OData V4 List Report, use the creationMode setting in manifest.json under the page target options -> settings -> controlConfiguration -> @com.sap.vocabularies.UI.v1.LineItem -> tableSettings.
- Set creationMode.name to "CreationDialog" and specify creationFields either as:
  - an annotation path to a FieldGroup (e.g., com.sap.vocabularies.UI.v1.FieldGroup#CreationParameters), or
  - a comma-separated list of properties.
- Immutable properties are automatically included in creationFields.
- Place per-view creationMode settings in the TableSettings for each line item in multi-view mode.

LANGUAGE: JSON

CODE:
```json
"targets": {
    "ProductsList": {
        "type": "Component",
        "name": "sap.fe.templates.ListReport",
        "id": "ProductsList",
        "options": {
            "settings": {
                "contextPath": "/Products",
                "controlConfiguration": {
                    "@com.sap.vocabularies.UI.v1.LineItem": {
                        "tableSettings": {
                            "creationMode": {
                                "name": "CreationDialog",
                                "creationFields": "com.sap.vocabularies.UI.v1.FieldGroup#CreationParameters"
                            }
                        }
                    }
                },
                ...
            }
        }
    },
```

STEP: 6 — OData V4: Behavior, constraints, and customization

DESCRIPTION:
- Limitations: cannot navigate to an object page in create mode; draft state not maintained for dialog-created objects; navigation properties are not supported in the create dialog.
- Mandatory fields are marked with a red asterisk in the dialog. Ensure they are included in creationFields.
- To customize the dialog title for OData V4, add or override the i18n key C_TRANSACTION_HELPER_SAPFE_ACTION_CREATE in the page’s i18n file.

LANGUAGE: Properties

CODE:
```properties
# i18n.properties (OData V4)
C_TRANSACTION_HELPER_SAPFE_ACTION_CREATE=New Object
```
--------------------------------

**TITLE**: Enable Object Creation via Creation Dialog on Object Page (OData V4)

**INTRODUCTION**: Configure the Object Page to allow creating new entities using a modal dialog instead of navigating to a create page. Applicable only for SAP Fiori elements with OData V4. Edit manifest.json to set creationMode for the table control configuration and optionally localize the dialog title via the page i18n file.

**TAGS**: sap-fiori, fiori-elements, odata-v4, manifest.json, object-page, creation-dialog, ui5, sap.fe

STEP: 1 — Enable creation dialog in the Object Page manifest

DESCRIPTION: Add a creationMode configuration to the table control within the Object Page target in manifest.json. Set creationMode.name to "CreationDialog" and set creationFields to either a FieldGroup annotation reference or a comma-separated list of properties. This example targets the Suppliers line item under Products.

LANGUAGE: JSON

CODE:
```json
"targets": {
    "ProductsList": {
        "type": "Component",
        "name": "sap.fe.templates.ObjectPage",
        "id": "ProductsObjectPage",
        "options": {
            "settings": {
                "contextPath": "/Products",
                "controlConfiguration": {
                    "_suppliers/@com.sap.vocabularies.UI.v1.LineItem": {
                        "tableSettings": {
                            "creationMode": {
                                "name": "CreationDialog",
                                "creationFields": "com.sap.vocabularies.UI.v1.FieldGroup#CreationParametersSupplier"
                            }
                        }
                    }
                },
                ...
            }
        }
    }
}
```

STEP: 2 — Specify creationFields (FieldGroup or property list)

DESCRIPTION: The creationFields value can be:
- A FieldGroup annotation reference (recommended) — use the fully qualified annotation path plus fragment (e.g., com.sap.vocabularies.UI.v1.FieldGroup#CreationParametersSupplier).
- A comma-separated list of property names (e.g., "Name,Category,Price").

Immutable properties are automatically added to the dialog fields even if not included in creationFields.

LANGUAGE: JSON

CODE:
```json
// Example: creationFields as a comma-separated property list
"creationMode": {
    "name": "CreationDialog",
    "creationFields": "Name,Category,Price"
}
```

STEP: 3 — Behavior and limitations

DESCRIPTION: Key behavioral points you must account for in code/design:
- This feature is only supported for OData V4 (do not enable for OData V2).
- When creation dialog is enabled, users cannot navigate to an Object Page in create mode; they can navigate to the page in display mode and modify entities.
- Filter-based prefill is supported: if filter values are entered to prefill fields, creation via dialog will honor those prefilled values.
- Mandatory parameters are shown with a red asterisk in the dialog (handled by UI framework).
- Navigation properties are not supported inside the creation dialog (do not include navprops in creationFields).
- For related functionality see: enabling a create dialog in the List Report or custom create dialog on Tree Table.

LANGUAGE: text

CODE:
```text
Notes:
- OData V4 only.
- No navigation-to-create page when dialog enabled.
- Immutable properties auto-added.
- Navigation properties unsupported for dialog.
```

STEP: 4 — Customize the dialog title via i18n

DESCRIPTION: Override the default dialog title "New Object" by adding/overriding the i18n key C_TRANSACTION_HELPER_SAPFE_ACTION_CREATE in the page i18n properties file (i18n.properties). The framework uses this key to display the creation dialog title.

LANGUAGE: Properties

CODE:
```properties
# i18n.properties (page-level)
C_TRANSACTION_HELPER_SAPFE_ACTION_CREATE=Create Supplier
```
--------------------------------

**TITLE**: Enabling Quick Views for Link Navigation (OData V2 & V4)

**INTRODUCTION**: This guide shows the exact annotation steps to enable Quick Views for link navigation in SAP Fiori Elements. It covers how to identify the semantic object, locate the referential constraint or semantic key, and annotate the association end type with UI.QuickViewFacets (examples for XML annotations, ABAP CDS, and CAP CDS are included). Use these steps to generate the quick view content displayed in popovers for semantic-object links.

**TAGS**: fiori-elements-framework, quick-view, UI.QuickViewFacets, SemanticObject, annotations, odata-v2, odata-v4, ABAP-CDS, CAP-CDS, XML, metadata

STEP: 1 — Identify the property annotated as a SemanticObject (source property shown as link)

DESCRIPTION: Locate the property on the source entity that is annotated as a semantic object. Keep the annotation in the service metadata and/or CDS. Use either XML annotation, ABAP CDS or CAP CDS depending on your stack.

LANGUAGE: XML
CODE:
```xml
<Annotations Target="STTA_PROD_MAN.STTA_C_MP_ProductType/Supplier">
   <Annotation Term="Common.SemanticObject" String="EPMProduct"/>
</Annotations>
```

LANGUAGE: ABAP CDS
CODE:
```abap
annotate view STTA_C_MP_PRODUCT with {
  @Consumption.semanticObject: 'EPMProduct'
  supplier;
}ABAP CDS
```

STEP: 2 — Locate the association and referential constraint in metadata (identify association end type)

DESCRIPTION: In the service metadata, find the Association / NavigationProperty that contains a ReferentialConstraint referencing the identified source property (Dependent). This tells you the association end type to annotate with QuickViewFacets.

LANGUAGE: XML (metadata)
CODE:
```xml
<Association Name="assoc_2CCAF987BA334B3BD1DF2404F50BC9C5" sap:content-version="1">
    <End Type="STTA_PROD_MAN.STTA_C_MP_ProductType" Multiplicity="1" Role="FromRole_assoc_2CCAF987BA334B3BD1DF2404F50BC9C5"/>
    <End Type="STTA_PROD_MAN.STTA_C_MP_SupplierType" Multiplicity="0..1" Role="ToRole_assoc_2CCAF987BA334B3BD1DF2404F50BC9C5"/>
    <ReferentialConstraint>
        <Principal Role="ToRole_assoc_2CCAF987BA334B3BD1DF2404F50BC9C5">
            <PropertyRef Name="Supplier"/>
        </Principal>
        <Dependent Role="FromRole_assoc_2CCAF987BA334B3BD1DF2404F50BC9C5">
            <PropertyRef Name="Supplier"/>
        </Dependent>
    </ReferentialConstraint>
</Association>
```

STEP: 3 — Annotate UI.QuickViewFacets on the association end type (OData V2 example)

DESCRIPTION: Annotate the target entity (association end type) with UI.QuickViewFacets and define a UI.FieldGroup qualifier that contains UI.DataField entries for the quick view content. Use XML or ABAP CDS examples below.

LANGUAGE: XML
CODE:
```xml
<!-- QuickViewFacets annotation for Supplier-->

<Annotations Target="STTA_PROD_MAN.STTA_C_MP_SupplierType">
    <Annotation Term="UI.QuickViewFacets">
        <Collection>
            <Record Type="UI.ReferenceFacet">
                <PropertyValue Property="Target" AnnotationPath="@UI.FieldGroup#SupplierQuickViewPOC_FieldGroup_1" />
            </Record> 
        </Collection>
    </Annotation>
    <Annotation Term="UI.FieldGroup" Qualifier="SupplierQuickViewPOC_FieldGroup_1">
        <Record>
            <PropertyValue Property="Data">
                <Collection>
                    <Record Type="UI.DataField">
                        <PropertyValue Property="Label" String="Company Name" />
                        <PropertyValue Property="Value" Path="CompanyName"/>
                    </Record>
                    <Record Type="UI.DataField">
                        <PropertyValue Property="Label" String="Supplier" />
                        <PropertyValue Property="Value" Path="Supplier"/>
                    </Record>
                    <Record Type="UI.DataField">
                        <PropertyValue Property="Label" String="Email Address" />
                        <PropertyValue Property="Value" Path="EmailAddress"/>
                    </Record>                           
                </Collection>
            </PropertyValue>
        </Record>
    </Annotation>    
</Annotations>
```

LANGUAGE: ABAP CDS
CODE:
```abap
annotate view STTA_C_MP_SUPPLIER with {
@UI.Facet: [
  {
    targetQualifier: 'SupplierQuickViewPOC_FieldGroup_1',
    type: #FIELDGROUP_REFERENCE,
    purpose: #QUICK_VIEW
  }
]
@UI.fieldGroup: [
  {
    label: 'Company Name',
    value: 'COMPANYNAME',
    type: #STANDARD,
    position: 1 ,
    qualifier: 'SupplierQuickViewPOC_FieldGroup_1'
  }
]
companyname;
@UI.fieldGroup: [
  {
    label: 'Supplier',
    value: 'SUPPLIER',
    type: #STANDARD,
    position: 2 ,
    qualifier: 'SupplierQuickViewPOC_FieldGroup_1'
  }
]
supplier;
@UI.fieldGroup: [
  {
    label: 'Email Address',
    value: 'EMAILADDRESS',
    type: #STANDARD,
    position: 3 ,
    qualifier: 'SupplierQuickViewPOC_FieldGroup_1'
  }
]
emailaddress;
}
```

STEP: 4 — Define semantic object and associations (OData V4 variations)

DESCRIPTION: For OData V4 you can define the SemanticObject as a string, path or EdmJson expression. Then define an association and a foreign-key association (or navigation property with referential constraint). The association/navigation points to the entity you will annotate with UI.QuickViewFacets.

LANGUAGE: XML (SemanticObject string)
CODE:
```xml
<Annotations Target="com.c_salesordermanage_sd.ProductSupplier/Supplier">
   <Annotation Term="Common.SemanticObject" String="EPMSupplier"/>
</Annotations>
```

LANGUAGE: ABAP CDS
CODE:
```abap
annotate view ProductSupplier with {
  @Consumption.semanticObject: 'EPMSupplier'
  Supplier;
}
```

LANGUAGE: CAP CDS
CODE:
```cds
annotate ProductSupplier with {
Supplier @Common.SemanticObject: 'EPMSupplier';
}
```

LANGUAGE: XML (SemanticObject via Path)
CODE:
```xml
<Annotations Target="com.c_salesordermanage_sd.ProductSupplier/Supplier">
             <Annotation Term="Common.SemanticObject" Path="SupplierSemanticObject"/>
</Annotations>
```

LANGUAGE: XML (SemanticObject via EdmJson expression)
CODE:
```xml
<Annotations Target="com.c_salesordermanage_sd.ProductSupplier/Supplier">
           <Annotation Term="Common.SemanticObject">
               <If>
                  <Eq>
                      <Path>SupplierType</Path>
                      <Int>2</Int>
                  </Eq>
                  <String>EPMSupplier</String>
                  <String>ERPSupplier</String>
               </If>        
            </Annotation>
</Annotations>
```

LANGUAGE: ABAP CDS (association + foreign-key)
CODE:
```abap
association [1..1] to I_Supplier as _Supplier on  $projection.Supplier = _Supplier.Supplier
...
@ObjectModel.foreignKey.association: '_Supplier'
Supplier,
```

LANGUAGE: XML (NavigationProperty with ReferentialConstraint)
CODE:
```xml
<NavigationProperty Name="_Supplier" Type="com.c_salesordermanage_sd.I_Supplier">
    <ReferentialConstraint Property="Supplier" ReferencedProperty="Supplier"/>
</NavigationProperty>
```

LANGUAGE: XML (Common.ReferentialConstraint annotation)
CODE:
```xml
<Annotations Target=" com.c_salesordermanage_sd.ProductSupplier/_Supplier">
    <Annotation Term="Common.ReferentialConstraint">
        <Collection>
            <Record>
                <PropertyValue Property="Property" PropertyPath="Supplier"/>
                <PropertyValue Property="ReferencedProperty" PropertyPath="_Supplier/Supplier"/>
            </Record>
        </Collection>
    </Annotation>
</Annotations>
```

STEP: 5 — Annotate UI.QuickViewFacets on association end type for OData V4 (referential constraint case)

DESCRIPTION: Annotate the target entity (association end type) with QuickViewFacets and a FieldGroup for quick view content. Examples for XML, ABAP CDS and CAP CDS are provided.

LANGUAGE: XML
CODE:
```xml
<Annotations Target="com.c_salesordermanage_sd.I_Supplier">
<Annotation Term="UI.QuickViewFacets">
   <Collection>
    <Record Type="UI.ReferenceFacet">
      <PropertyValue Property="Label" String="Address"/>
      <PropertyValue Property="Target" AnnotationPath="@UI.FieldGroup#SupplierQuickView"/>
    </Record>
   </Collection>
</Annotation>
<Annotation Term="UI.FieldGroup" Qualifier="SSupplierQuickView">
   <Record Type="UI.FieldGroupType">
     <PropertyValue Property="Data">
      <Collection>
       <Record Type="UI.DataField">
        <PropertyValue Property="Value" Path="PostalCode"/>
       </Record>
       <Record Type="UI.DataField">
        <PropertyValue Property="Value" Path="CityName"/>
       </Record>
       <Record Type="UI.DataField">
        <PropertyValue Property="Value" Path="Country"/>
       </Record>
      </Collection>
     </PropertyValue>
   </Record>
</Annotation>
</Annotations>
```

LANGUAGE: ABAP CDS
CODE:
```abap
annotate view I_Supplier with {
@UI.Facet: [
  {
    label: 'Address',
    targetQualifier: 'SupplierQuickView',
    type: #FIELDGROUP_REFERENCE,
    purpose: #QUICK_VIEW
  }
]
@UI.fieldGroup: [
  {
    value: 'PostalCode',
    type: #STANDARD,
    position: 1 ,
    qualifier: 'SupplierQuickView'
  }
]
PostalCode;
@UI.fieldGroup: [
  {
    value: 'CityName',
    type: #STANDARD,
    position: 2 ,
    qualifier: 'SupplierQuickView'
  }
]
CityName;
@UI.fieldGroup: [
  {
    value: 'Country',
    type: #STANDARD,
    position: 3 ,
    qualifier: 'SupplierQuickView'
  }
]
Country;
}
```

LANGUAGE: CAP CDS
CODE:
```cql
annotate schema.I_Supplier with @(UI : {
QuickViewFacets             : [
    {
        $Type  : 'UI.ReferenceFacet',
        Label  : 'Address',
        Target : '@UI.FieldGroup#SupplierQuickView'
    }
],
FieldGroup #SupplierQuickView:{Data : [
    {
        $Type : 'UI.DataField',
        Value : PostalCode
    },
    {
        $Type : 'UI.DataField',
        Value : CityName
    },
    {
        $Type : 'UI.DataField',
        Value : Country
    }
]}
})
```

STEP: 6 — Quick view when target property is a semantic key or entity key (alternative approach)

DESCRIPTION: If the target property is a semantic key or an entity key, you can define an association on the source entity, annotate the navigation property with SemanticObject, ensure the target entity has a semantic key or entity key, and then annotate UI.QuickViewFacets on the target entity. Examples below use CAP CDS, ABAP CDS, XML and CAP CDS quick-view annotations.

LANGUAGE: CAP CDS
CODE:
```cql
entity ProductSupplier {
     CustomerReference: String;
     _NavigationProperty: Association to Customer
          on _NavigationProperty.Customer = CustomerReference @(Common : {
               SemanticObject             : 'Customer'
           });
}
```

LANGUAGE: CAP CDS (define target semantic key and key)
CODE:
```cql
annotate Customer with @(
     //…
     Common.SemanticKey : [CustomerName],
     //…
) {
 key Customer: String;
     CustomerName: String;
}
```

LANGUAGE: XML (QuickViewFacets on Customer)
CODE:
```xml
<Annotations Target="com.c_salesordermanage_sd.Customer">
    <Annotation Term="UI.QuickViewFacets">
        <Collection>
            <Record Type="UI.ReferenceFacet">
                <PropertyValue Property="Label" String="Address" />
                <PropertyValue Property="Target" AnnotationPath="@UI.FieldGroup#SoldToQuickView" />
            </Record>
        </Collection>
    </Annotation>
    <Annotation Term="UI.FieldGroup" Qualifier="SoldToQuickView">
        <Record Type="UI.FieldGroupType">
            <PropertyValue Property="Data">
                <Collection>
                    <Record Type="UI.DataField">
                        <PropertyValue Property="Value" Path="PostalCode" />
                    </Record>
                    <Record Type="UI.DataField">
                        <PropertyValue Property="Value" Path="CityName" />
                    </Record>
                    <Record Type="UI.DataField">
                        <PropertyValue Property="Value" Path="Country" />
                    </Record>
                </Collection>
            </PropertyValue>
        </Record>
    </Annotation>
</Annotations>
```

LANGUAGE: ABAP CDS
CODE:
```abap
annotate view CUSTOMER with {
@UI.Facet: [
  {
    label: 'Address',
    targetQualifier: 'SoldToQuickView',
    type: #FIELDGROUP_REFERENCE,
    purpose: #QUICK_VIEW
  }
]
@UI.fieldGroup: [
  {
    value: 'POSTALCODE',
    type: #STANDARD,
    position: 1 ,
    qualifier: 'SoldToQuickView'
  }
]
postalcode;
@UI.fieldGroup: [
  {
    value: 'CITYNAME',
    type: #STANDARD,
    position: 2 ,
    qualifier: 'SoldToQuickView'
  }
]
cityname;
@UI.fieldGroup: [
  {
    value: 'COUNTRY',
    type: #STANDARD,
    position: 3 ,
    qualifier: 'SoldToQuickView'
  }
]
country;
}
```

LANGUAGE: CAP CDS (QuickViewFacets on Customer)
CODE:
```cql
annotate schema.Customer with @(UI : {
QuickViewFacets             : [
    {
        $Type  : 'UI.ReferenceFacet',
        Label  : 'Address',
        Target : '@UI.FieldGroup#SoldToQuickView'
    }
],
FieldGroup #SoldToQuickView: {Data : [
    {
        $Type : 'UI.DataField',
        Value : PostalCode
    },
    {
        $Type : 'UI.DataField',
        Value : CityName
    },
    {
        $Type : 'UI.DataField',
        Value : Country
    }
]}
})
```

STEP: 7 — Add DataField on UI.LineItem / UI.FieldGroup / UI.Identification pointing to navigation property

DESCRIPTION: To render the link that shows the quick view on the source UI annotations, add a UI.DataField that references the navigation property path to the target property (use in LineItem, FieldGroup or Identification).

LANGUAGE: XML
CODE:
```xml
<Record Type="UI.DataField">
    <PropertyValue Property="Value" Path="_NavigationProperty/Customer" />
</Record>
```

STEP: 8 — Notes & behavior

DESCRIPTION: QuickViewFacets must be annotated on entity types within the same service (referential constraints reference only same-service entity types). If the user cannot navigate to the target application, no link is displayed. For configuration options and system behavior, refer to "Configuring the Content of Quick Views".
--------------------------------

**TITLE**: Enable and Configure Semantic Date Operators in Filter Bar (SAP Fiori Elements)

**INTRODUCTION**: Action-oriented guide for enabling semantic date operators (semantic date ranges like TODAY, LASTWEEK) in the filter bar for SAP Fiori Elements apps. Covers OData V2 and V4: manifest settings, metadata requirements, field-level overrides, inclusion/exclusion rules, default values (including parameterized operators), custom implementations, and enabling additional operators.

**TAGS**: fiori-elements-framework, filter-bar, semantic-dates, manifest.json, OData-V2, OData-V4, CDS, XML, JSON

STEP: 1 — Enable semantic date control (OData V2)
DESCRIPTION: Ensure the entity property metadata allows interval filtering and enable useDateRange in the app manifest to render semantic date controls instead of a date picker.
LANGUAGE: XML
CODE:
```xml
<Property Name="DeliveryDate" Type="Edm.DateTime" sap:label="Delivery Date" Precision="0" sap:display-format="Date" sap:filter-restriction="interval" />
```

STEP: 2 — CDS hint for OData V2 interval filter
DESCRIPTION: For ABAP CDS or CDS-like models, mark the field as interval selection to enable semantic range usage.
LANGUAGE: CDS
CODE:
```
@Consumption.filter.selectionType: #INTERVAL
```

STEP: 3 — Enable date range globally in manifest (OData V2)
DESCRIPTION: Set useDateRange to true in the generic app filterSettings to enable semantic date ranges globally (default is false). This example enables default date ranges for all date types.
LANGUAGE: JSON
CODE:
```json
"sap.ui.generic.app": {
    "pages": {
        "ListReport|SEPMRA_C_PD_Product: {
            "component": {
                "settings" : {
                    "filterSettings": {
                        "dateSettings":{
                            "useDateRange": true //Default value of the property is false. If set to true all date types will get default date ranges.
                        }
                    }
                }
            }
        }
    }
}
```

STEP: 4 — Customize default date range options and field overrides (OData V2)
DESCRIPTION: Override default date range options and exclude or include specific values per property by configuring selectedValues and exclude under dateSettings.fields. Use customDateRangeImplementation to supply a JS class that modifies the list.
LANGUAGE: JSON
CODE:
```json
"sap.ui.generic.app": {
   "pages": {
        "component": {
           "settings" : {
                ...
                "filterSettings": {
                    "dateSettings":{
			            "useDateRange": true,
                        "fields": {
                            "DateProperty1": {
                                //Override for a specific property of type sap:date DateProperty1. This is the most simplest way of removing selected values
                                // from the standard date range. The values which you want to remove or keep needs to be mentioned as selectedValues 
                                // in a comma separated format
                                "selectedValues": "TOMORROW,NEXT,LASTYEAR,LAST2WEEKS,LAST3WEEKS,LAST4WEEKS,LAST5WEEKS,YEARTODATE,QUARTER1,QUARTER2,QUARTER3,QUARTER4",
                                //Below is an optional property. Default value "exclude" property is true. If set to false, values listed in the "selectedValues" above are shown in the drop down
                                "exclude": true
                            }
                        }
                    }
                }
            }
        }
    }
}
```

STEP: 5 — Provide default selectedValues and field precedence (OData V2)
DESCRIPTION: Define default dateSettings.selectedValues applied globally and override per-field under fields. Field-level settings take precedence over defaults; absence of selectedValues leads to date picker rendering.
LANGUAGE: JSON
CODE:
```json
"sap.ui.generic.app": {
   "pages": {
      "component": {
         "settings" : {
            ...
            "filterSettings": {
                "dateSettings":{
                    "selectedValues": "DAYS,WEEK,MONTH,DATERANGE ",
                    "fields": {
                        "DateProperty1": {
                            "selectedValues": "TOMORROW,NEXT,LASTYEAR,LAST2WEEKS,LAST3WEEKS,LAST4WEEKS,LAST5WEEKS,YEARTODATE,QUARTER1,QUARTER2,QUARTER3,QUARTER4",
                            "exclude": true
                        },
                        "DateProperty2": {
                            "customDateRangeImplementation": "SOMULTIENTITY.ext.controller.customDateRangeType",
                            "selectedValues": "FROM,TO,DAYS,WEEK,MONTH,DATERANGE,TODAY,TOMORROW,YEAR,YESTERDAY",
                            "exclude": true
                        },
                        "DateProperty3": { 
                            "selectedValues": "YESTERDAY",
                            "exclude": false 
                        },
		            "DateTimeProperty1": { 
                            "selectedValues": "MONTH",
                            "exclude": true 
                        }

                        }
                    }
                }
            }
        }
    }
}
```

STEP: 6 — Set default semantic date values (OData V2)
DESCRIPTION: Assign default semantic date values per field via dateSettings.fields.<Property>.defaultValue.operation. The default value must be part of the allowed values for that field.
LANGUAGE: JSON
CODE:
```json
"filterSettings": {
	"dateSettings": {
		"fields": {
			"CreatedDate": {
				"defaultValue": {
					"operation": "TOMORROW"
				}
			},
			"DeliveryDate": {
				"defaultValue": {
					"operation": "TOMORROW"
				},
				"filter": [{
					"path": "key",
					"equals": "TODAY",
					"exclude": true
				}]
			}
		}
	}
}
```

STEP: 7 — Exclude specific semantic date keys using filter (OData V2)
DESCRIPTION: Use the filter array on a field to include/exclude specific keys (path: 'key'), with equals and exclude flags. This supports detailed inclusion/exclusion rules per value.
LANGUAGE: JavaScript
CODE:
```
filterSettings: {
	dateSettings: { 
		useDateRange: false 
		fields: {
			"PostingDate": {
				//Alternate way of configuring is using the Filter option. Here the developer should be able to specify
				// the condition specific to each and every value (whether it is a key/category), needs to be excluded
				// or included. You could also specify the operator whether it is contains or equal. This configuration
				// passed directly to the filter bar and therefore anything that is possible in SFB can be configured
				// here as well
				//Application can use this for more complex and detailed configuration
				"filter": [{
						path: 'key',
						equals: 'TODAY',
						exclude: true
					} // TODAY filter will be removed
				]
			}
		}
	}
}
```

STEP: 8 — Include/Exclude examples (OData V2)
DESCRIPTION: Include a specific key (TODAY) while excluding other keys (TODAYFROMTO) using explicit filter array entries.
LANGUAGE: JSON
CODE:
```json
"filter": [{
		"path": "key",
		"equals": "TODAY",
		"exclude": false
	},
	{
		"path": "key",
		"equals": "TODAYFROMTO",
		"exclude": true
	}
]
```

STEP: 9 — Exclude categories via DateRangeType category (OData V2)
DESCRIPTION: Exclude whole categories of date operators by filtering on path: 'category' with contains and exclude flags (e.g., remove all FIXED keys).
LANGUAGE: JSON
CODE:
```json
"filter": [{
	"path": "category",
	"contains": "FIXED",
	"exclude": true
}]
// this will remove all the keys under the category that "contains" FIXED
```

STEP: 10 — Default behavior and supported fields (OData V4)
DESCRIPTION: Semantic operators are enabled by default for Edm.Date fields with FilterRestrictions.AllowedExpressions = SingleRange or SingleValue, and for Edm.DateTimeOffset fields with AllowedExpressions = SingleRange. To enable, add FilterRestrictions annotations.
LANGUAGE: XML
CODE:
```xml
<edmx:Reference Uri="https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Capabilities.V1.xml">
   <edmx:Include Namespace="Org.OData.Capabilities.V1" Alias="Capabilities" />
</edmx:Reference>
<Annotations Target="com.c_salesordermanage_sd.EntityContainer/SalesOrderManage">
    <Annotation Term="Capabilities.FilterRestrictions">
        <Record Type="Capabilities.FilterRestrictionsType">
            <PropertyValue Property="FilterExpressionRestrictions">
                <Collection>
                    <Record Type="Capabilities.FilterExpressionRestrictionType">
                        <PropertyValueProperty="Property"PropertyPath="myDate"/>
                        <PropertyValueProperty="AllowedExpressions"String="SingleRange"/>
                    </Record>
                    …
                    …
                </Collection>
            </PropertyValue>
        </Record>
    </Annotation>
    …
    …
</Annotations>
```

STEP: 11 — CAP CDS FilterRestrictions sample (OData V4)
DESCRIPTION: Use CAP CDS annotations to set FilterRestrictions.AllowedExpressions = 'SingleRange' for a date property.
LANGUAGE: CDS
CODE:
```
@Capabilities : {
   FilterRestrictions : {
      FilterExpressionRestrictions :
         [{
            Property : 'myDate',
            AllowedExpressions : 'SingleRange'
         }]
      }
}
...
entity MyEntity {
...
    myDate: Date;
}
```

STEP: 12 — Set default operator value in manifest (OData V4)
DESCRIPTION: Set default semantic operator for a filter field via controlConfiguration / SelectionFields / filterFields.<Field>.settings.defaultValues with operator string.
LANGUAGE: JSON
CODE:
```json
"settings" : {  
   "contextPath" : "/SalesOrderManage",
   "controlConfiguration" : {
      "@com.sap.vocabularies.UI.v1.SelectionFields" : {
   …
   …
         "filterFields": {
            "SalesOrderDate": { 
               "settings": {
                  "defaultValues": [{"operator": "YESTERDAY"}] 
               }
            }
         }
   …
   …
      }
   }
}
```

STEP: 13 — Supported semantic operators (OData V4)
DESCRIPTION: Complete list of fully supported single-date and date-range operators; use these as values for default operator or for inclusion/exclusion rules.
LANGUAGE: JSON
CODE:
```json
{
  "singleDateOperators": ["YESTERDAY","TOMORROW","TODAY","FIRSTDAYWEEK","LASTDAYWEEK","FIRSTDAYMONTH","LASTDAYMONTH","FIRSTDAYQUARTER","LASTDAYQUARTER","FIRSTDAYYEAR","LASTDAYYEAR"],
  "dateRangeOperators": ["THISWEEK","LASTWEEK","NEXTWEEK","THISMONTH","LASTMONTH","NEXTMONTH","THISQUARTER","LASTQUARTER","NEXTQUARTER","QUARTER1","QUARTER2","QUARTER3","QUARTER4","THISYEAR","LASTYEAR","NEXTYEAR","YEARTODATE","DATETOYEAR","Empty"]
}
```

STEP: 14 — Default values for operators that require parameters — DATE/FROM/TO/DATERANGE (OData V4)
DESCRIPTION: Examples for manifest defaultValues for parameterized operators. Date values use YYYY-MM-DD format; DATERANGE uses two dates.
LANGUAGE: JSON
CODE:
```json
"@com.sap.vocabularies.UI.v1.SelectionFields": {
   "filterFields": {
      "SalesOrderDate": {
         "settings": {
            "defaultValues" : [ {"operator": "DATE",   "values": ["2018-12-28"]}]             }
      }
   }
}
```

STEP: 15 — Default value example: FROM (OData V4)
DESCRIPTION: FROM operator default value (YYYY-MM-DD).
LANGUAGE: JSON
CODE:
```json
"@com.sap.vocabularies.UI.v1.SelectionFields": {
   "filterFields": {
      "SalesOrderDate": {
         "settings": {
            "defaultValues" : [ {"operator": "FROM",   "values": ["2018-11-28"]}]

         }
      }
   }
}
```

STEP: 16 — Default value example: TO (OData V4)
DESCRIPTION: TO operator default value (YYYY-MM-DD).
LANGUAGE: JSON
CODE:
```json
"@com.sap.vocabularies.UI.v1.SelectionFields": {
   "filterFields": {
      "SalesOrderDate": {
         "settings": {
            "defaultValues" : [ {"operator": "TO",   "values": ["2019-11-02"]}]

         }
      }
   }
}
```

STEP: 17 — Default value example: DATERANGE (OData V4)
DESCRIPTION: DATERANGE requires two YYYY-MM-DD values: [from, to].
LANGUAGE: JSON
CODE:
```json
"@com.sap.vocabularies.UI.v1.SelectionFields": {

   "filterFields": {
      "SalesOrderDate": {
         "settings": {
            "defaultValues" : [ {"operator": "DATERANGE",   "values": ["2019-11-02","2022-01-01"]}]

         }
      }
   }
}
```

STEP: 18 — Default value example: TODAYFROMTO (OData V4)
DESCRIPTION: TODAYFROMTO takes two numeric parameters: days before TODAY and days after TODAY.
LANGUAGE: JSON
CODE:
```json
"@com.sap.vocabularies.UI.v1.SelectionFields": {

   "filterFields": {
      "SalesOrderDate": {
         "settings": {
            "defaultValues" : [ {"operator": "TODAYFROMTO", "values":[5,6]}]

         }
      }
   }
}
```

STEP: 19 — Default value example: LASTDAYS / NEXTDAYS / SpecificMonth (OData V4)
DESCRIPTION: Use numeric parameters for Last/Next X operators; SpecificMonth expects zero-based month number (January = 0).
LANGUAGE: JSON
CODE:
```json
"@com.sap.vocabularies.UI.v1.SelectionFields": {
 
   "filterFields": {
      "SalesOrderDate": {
         "settings": {
            "defaultValues" : [ {"operator": "LASTDAYS", "values":[6]}]
         }

      }
   }
}
```

STEP: 20 — Default value example: NEXTDAYS
DESCRIPTION: NEXTDAYS sample manifest defaultValues.
LANGUAGE: JSON
CODE:
```json
"@com.sap.vocabularies.UI.v1.SelectionFields": {

   "filterFields": {
      "SalesOrderDate": {
         "settings": {
            "defaultValues" : [ {"operator": "NEXTDAYS", "values":[6]}]
         }
      }
   }

}
```

STEP: 21 — Default value example: SPECIFICMONTH (OData V4)
DESCRIPTION: SPECIFICMONTH uses zero-based months; example sets January (0 or 1 depending on doc — sample shows 1 as example).
LANGUAGE: JSON
CODE:
```json
"@com.sap.vocabularies.UI.v1.SelectionFields": {
   "filterFields": {
      "SalesOrderDate": {
         "settings": {
            "defaultValues" : [ {"operator": "SPECIFICMONTH", "values":[1]}]
         }
      }
   }

} 
```

STEP: 22 — Semantic filter fields from navigation entity set (OData V4)
DESCRIPTION: When the filter field comes from a navigation entity set, reference it as "<navigationProperty>::<filterField>" in SelectionFields.filterFields.
LANGUAGE: JSON
CODE:
```json
"@com.sap.vocabularies.UI.v1.SelectionFields": {

   "filterFields": {
      "_Item::SalesOrderDate": {
         "settings": {
            "defaultValues" : [ {"operator": "SPECIFICMONTH", "values":[1]}]
         }
      }
   }

}
```

STEP: 23 — Exclude specific operators using operatorConfiguration (OData V4) — remove TODAY
DESCRIPTION: Use operatorConfiguration.path = "key" and equals/exclude to remove individual operators (allowed only for SingleRange-based Date fields).
LANGUAGE: JSON
CODE:
```json
"filterFields": {
    "SalesOrderDate": {
       "settings": {
           "operatorConfiguration": [
                 {
                     "path": "key",
                      "equals": "TODAY",
                      "exclude": true
                  } // TODAY filter will be removed
            ]
       }
    }
 }
```

STEP: 24 — Exclude/include multiple operators using operatorConfiguration (OData V4)
DESCRIPTION: Example to include "TODAY" and exclude "TODAYXYDAYS" via operatorConfiguration entries.
LANGUAGE: JSON
CODE:
```json
"filterFields": {
    "SalesOrderDate": {
       "settings": {
           "operatorConfiguration": [
                 {
                     "path": "key",
                      "equals": "TODAY",
                      "exclude": false
                  },
                  {
                    "path": "key",
                     "equals": "TODAYXYDAYS",
                     "exclude": true
                  }
            ]
       }
    }
 }
```

STEP: 25 — Supported operators for exclusion (OData V4)
DESCRIPTION: Use these operator keys with operatorConfiguration.exclude to hide/show specific operators for SingleRange Date fields.
LANGUAGE: JSON
CODE:
```json
[
 "DATE","FROM","TO","DATERANGE","TODAY","YESTERDAY","TOMORROW","TODAYFROMTO","LASTDAYS","NEXTDAYS","THISWEEK","LASTWEEK","LASTWEEKS","NEXTWEEK","NEXTWEEKS","SPECIFICMONTH","THISMONTH","LASTMONTH","LASTMONTHS","NEXTMONTH","NEXTMONTHS","THISQUARTER","LASTQUARTER","LASTQUARTERS","NEXTQUARTER","NEXTQUARTERS","QUARTER1","QUARTER2","QUARTER3","QUARTER4","THISYEAR","LASTYEAR","LASTYEARS","NEXTYEAR","NEXTYEARS","YEARTODATE","DATETOYEAR","Empty"
]
```

STEP: 26 — Additional combined FROM/TO operators (OData V4) — list
DESCRIPTION: New additional single-range operators that combine standard single-date operators with FROM or TO. These are not enabled by default and must be explicitly enabled in operatorConfiguration (exclude:false).
LANGUAGE: JSON
CODE:
```json
[
"FROMTODAY","FROMTOMORROW","FROMYESTERDAY","FROMFIRSTDAYWEEK","FROMLASTDAYWEEK","FROMFIRSTDAYMONTH","FROMLASTDAYMONTH","FROMFIRSTDAYQUARTER","FROMLASTDAYQUARTER","FROMFIRSTDAYYEAR","FROMLASTDAYYEAR",
"TOTODAY","TOTOMORROW","TOYESTERDAY","TOFIRSTDAYWEEK","TOLASTDAYWEEK","TOFIRSTDAYMONTH","TOLASTDAYMONTH","TOFIRSTDAYQUARTER","TOLASTDAYQUARTER","TOFIRSTDAYYEAR","TOLASTDAYYEAR"
]
```

STEP: 27 — Enable additional operators in manifest (OData V4)
DESCRIPTION: Example manifest snippet enabling additional FROM/TO operators by setting operatorConfiguration equals flags with exclude:false (they default to excluded).
LANGUAGE: JSON
CODE:
```json
"targets": {
   "SalesOrderManageList": {
      "options": {
         "settings": {
            "controlConfiguration": {
               "@com.sap.vocabularies.UI.v1.SelectionFields": {
                  "filterFields": {
                     "SalesOrderDate": {
                        "settings": {
                           "operatorConfiguration": [
                           {
                              "path": "key",
                              "equals": "FROMTODAY",
                              "exclude": false // By default, "exclude" is set to true for all these additional date range operators and have to be explicitly set to false in case the operator needs to be enabled
                           },
                          {
                             "path": "key",
                             "equals": "TOYESTERDAY",
                             "exclude": false
                          }]
                       }
                    },
                    …….
                    …….
                 }
```

STEP: 28 — Notes, precedence and constraints (Action items)
DESCRIPTION: Key action notes to apply while coding:
- customDateRangeImplementation takes precedence over filter and selectedValues.
- If custom fields or navigation fields are used, specify "<navigationProperty>::<propertyName>".
- Default manifest values are ignored if app state, navigation context, or URL provides a semantic date.
- Numeric defaultValue entries (e.g., FROM(val1)/TO(val2)) are not allowed; use operator-specific formats shown above.
- Excluding operators is allowed only for SingleRange-based Date fields; Edm.DateTime defaults mirror Edm.DateTimeOffset behavior for V4.
LANGUAGE: Text
CODE:
```text
- customDateRangeImplementation > filter > selectedValues precedence
- Use "<navigationProperty>::<propertyName>" for navigation-source filter fields
- Manifest defaults ignored if SelectionVariant or URL provides value
- Use operator-specific parameter formats; do not supply numeric FROM/TO ranges incorrectly
- Exclusion applies only to SingleRange date fields
```
--------------------------------

**TITLE**: Enabling Simple Header Facets

**INTRODUCTION**: Enable the simple header facet to display additional content in the Object Page header for SAP Fiori elements (OData V2). This requires adding the simpleHeaderFacets flag in the app manifest (manifest.json) under the Object Page component settings.

**TAGS**: fiori-elements-framework, OData V2, manifest.json, object-page, simpleHeaderFacets, header-facet

**STEP**: 1 — Confirm applicability

**DESCRIPTION**: This feature applies only to SAP Fiori elements for OData V2. Verify your app uses OData V2 before enabling the flag.

**LANGUAGE**: Plain text

**CODE**:
```text
Note: This topic is only applicable to SAP Fiori elements for OData V2.
```

**STEP**: 2 — Add the simpleHeaderFacets flag in manifest.json

**DESCRIPTION**: Edit your app's manifest.json. Within the "sap.ui.generic.app" → pages array find the ObjectPage component settings and add "simpleHeaderFacets": true. The flag must be added in the Object Page component's "settings" object. File path: manifest.json (root of your UI5 application).

Preserve the structure and placement as shown in the example below.

**LANGUAGE**: JSON

**CODE**:
```json
"sap.ui.generic.app": {
        "_version": "1.2.0",
        
        "pages": [{
                "entitySet": "STTA_C_MP_Product",
                "component": {
                        "name": "sap.suite.ui.generic.template.ListReport",
                        "list": true,
                        "settings": {
                                "gridTable": false,
                                "multiSelect": true,
                                "smartVariantManagement": true
                        }
                },
                "pages": [{
                        "entitySet": "STTA_C_MP_Product",
                        "component": {
                                "name": "sap.suite.ui.generic.template.ObjectPage",
                                "settings": {
                                        "showRelatedApps": true,
                                        "gridTable": false,
                                        "editableHeaderContent": true,
                                        "simpleHeaderFacets":true, // This Enables Simple Header Facet on the Object Page
                                }
                        },
                        "pages": [{
                                "navigationProperty": "to_ProductText",
                                "entitySet": "STTA_C_MP_ProductText",
                                "component": {
                                        "name": "sap.suite.ui.generic.template.ObjectPage"
                                }
                        }]
                }]
        }]
},
```

**STEP**: 3 — Understand limitations and supported content

**DESCRIPTION**: The simple header facet supports placing additional header content but does NOT support complex data points created via DataFieldForAnnotation (for example: ratings, progress indicators, charts). Only simple header facets should be used for additional header content.

**LANGUAGE**: Plain text

**CODE**:
```text
Note: The simple header facet does not support the use of complex data points and DataFieldForAnnotation, such as ratings, progress indicators, or charts.
```
--------------------------------

**TITLE**: Enabling Standard List Items and Object List Items (Fiori elements, OData V2)

**INTRODUCTION**: Configure UI.LineItem annotations and manifest.json settings to render StandardList and ObjectList items in Fiori elements (OData V2). Includes required annotation XML samples, manifest.json snippets, and mapping of annotation elements to UI positions and behavior (importance, data points, criticality, image URL).

**TAGS**: fiori-elements-framework, OData V2, UI.LineItem, DataField, DataFieldForAnnotation, DataPoint, manifest.json, StandardList, ObjectList, UI.Criticality

STEP: 1 — General rules and prerequisites

DESCRIPTION: Apply these rules before adding annotations. This topic is applicable only to SAP Fiori elements for OData V2. Use the guidelines below when authoring UI.LineItem, DataField, DataFieldForAnnotation, and DataPoint annotations. Ensure internal navigation extension (onListNavigationExtension) is enabled for internal navigation if required.

- UI.LineItem is the default annotation term used to render a list item similar to a table. UI.LineItem must contain only UI.DataField and UI.DataFieldForAnnotation elements. Other DataFieldAbstract types are not supported.
- UI.DataFieldForAnnotation with a DataPoint target is used for fields displayed on the right side of the list item. If no DataPoint exists for those positions, UI.DataField is used.
- Fields are sorted by their UI.Importance (High, Medium, Low). If a DataPoint exists, it will be used regardless of the DataField importance. Default importance = Medium when UI.Importance is not defined.
- Standard and Object list items support UI.Criticality so data points can drive semantic coloring.
- onListNavigationExtension is enabled for internal navigation. See Example: Enable Internal Navigation to Different Detail Page (example-enable-internal-navigation-to-different-detail-page-75002b3.md).

LANGUAGE: text

CODE:
```text
- Applicable only to SAP Fiori elements for OData V2.
- UI.LineItem must contain only UI.DataField and UI.DataFieldForAnnotation.
- Use UI.DataFieldForAnnotation (Target = @UI.DataPoint#<Qualifier>) to show right-side fields (data points).
- If no DataPoint exists for a right-side slot, a UI.DataField is used instead.
- Default importance = UI.ImportanceType/Medium when not specified.
- UI.Criticality supported on data points for semantic coloring.
- Enable onListNavigationExtension for internal navigation (see referenced example).
```

STEP: 2 — Standard List Item: Add UI.LineItem annotation (annotation XML)

DESCRIPTION: Add the UI.LineItem annotation with DataField and DataFieldForAnnotation entries. Add a UI.DataPoint qualifier (Price) used by DataFieldForAnnotation. Place these annotations in your service annotations file (for example annotations.xml) or OData annotation provider used by the app.

LANGUAGE: XML

CODE:
```xml
<Annotation Term="UI.LineItem">
	<Collection>
		<Record Type="UI.DataField">
			<PropertyValue Property="Value" Path="ProductForEdit" />
			<Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High" />
		</Record>
		<Record Type="UI.DataField">
			<PropertyValue Property="Value" Path="ProductCategory" />
			<Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/Medium" />
		</Record>
		<Record Type="UI.DataField">
			<PropertyValue Property="Value" Path="ProductPictureURL" />
		</Record>
		<Record Type="UI.DataFieldForAnnotation">
			<PropertyValue Property="Target" AnnotationPath="@UI.DataPoint#Price" /> 
		</Record>
	</Collection>
</Annotation>

<Annotation Term="UI.DataPoint" Qualifier="Price">
	<Record>
		<PropertyValue Property="Value" Path="Price" />
		<PropertyValue Property="Criticality" Path="PriceCriticality" />
	</Record>
</Annotation>
```

STEP: 3 — Standard List Item: Update manifest.json to use StandardList

DESCRIPTION: Update the app manifest.json to configure the List Report page to use a StandardList table type and optional settings like isWorklist and smartVariantManagement. Place this under the "pages" section for the corresponding ListReport page id.

LANGUAGE: JSON

CODE:
```json
"pages": {
	"ListReport|STTA_C_MP_Product": {
		"entitySet": "STTA_C_MP_Product",
		"component": {
			"settings": {
				"isWorklist": true,
				"tableSettings": {
					type: "StandardList"
				},
				"smartVariantManagement": false
			}
		}
	}
}
```

STEP: 4 — Standard List Item: Mapping of UI.LineItem entries to UI roles

DESCRIPTION: Follow these mappings when ordering DataField and DataPoint entries under UI.LineItem. DataPoints occupy right-side UI locations and can override DataField placement. If DataPoint is missing for a right-side slot, the next DataField is used.

LANGUAGE: text

CODE:
```text
Standard List Item Property -> Entity Annotation -> Location on List Item UI -> Additional comments

title
- First data field of UI.LineItem
- Top left

description
- Second data field of UI.LineItem
- Bottom left

info
- First data point
- Top right
- If no data point exists, the next data field is used (third data field).

infoState
- First data point or criticality, or first data point or CriticalityCalculation
- Color
- If no data point exists, default state = None.

icon
- First data field marked with UI.IsImageURL annotation
- (Location not order-sensitive)
- This data field can be placed anywhere under UI.LineItem; order is not important.
```

STEP: 5 — Object List Item: Add UI.LineItem annotation (annotation XML)

DESCRIPTION: Add UI.LineItem annotation tailored for ObjectList layout. Include DataField entries for attributes and DataFieldForAnnotation entries that reference DataPoints with qualifiers (NetAmount, GrossAmount, TaxAmount). Add DataPoint annotations with Criticality values. Place these in your service annotations file (annotations.xml) or OData annotation provider.

LANGUAGE: XML

CODE:
```xml
<Annotation Term="UI.LineItem">
	<Collection>
		<Record Type="UI.DataField">
			<PropertyValue Property="Label" String="Sales Order ID" />
			<PropertyValue Property="Value" Path="SalesOrderID"/>
			<Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
		</Record>
		<Record Type="UI.DataField">
			<PropertyValue Property="Value" Path="BusinessPartnerID"/>
			<Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/Medium"/>
		</Record>
		<Record Type="UI.DataField">
			<PropertyValue Property="Value" Path="CurrencyCode"/>
			<Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/Low"/>
		</Record>
		<Record Type="UI.DataFieldForAnnotation">
			<Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
			<PropertyValue Property="Target" AnnotationPath="@UI.DataPoint#NetAmount" /> 
		</Record>
		<Record Type="UI.DataFieldForAnnotation">
			<PropertyValue Property="Target" AnnotationPath="@UI.DataPoint#GrossAmount" /> 
		</Record>
		<Record Type="UI.DataFieldForAnnotation">
		<Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/Low"/>
			<PropertyValue Property="Target" AnnotationPath="@UI.DataPoint#TaxAmount" /> 
		</Record>
    </Collection>
</Annotation>

<Annotation Term="UI.DataPoint" Qualifier="NetAmount">
	<Record>
		<PropertyValue Property="Value" Path="NetAmount" />
		<PropertyValue Property="Criticality" EnumMember="com.sap.vocabularies.UI.v1.CriticalityType/Positive" />
	</Record>
</Annotation>
<Annotation Term="UI.DataPoint" Qualifier="GrossAmount">
	<Record>
		<PropertyValue Property="Value" Path="GrossAmount" />
		<PropertyValue Property="Criticality" EnumMember="com.sap.vocabularies.UI.v1.CriticalityType/Negative" />
	</Record>
</Annotation>
<Annotation Term="UI.DataPoint" Qualifier="TaxAmount">
	<Record>
		<PropertyValue Property="Value" Path="TaxAmount" />
		<PropertyValue Property="Criticality" EnumMember="com.sap.vocabularies.UI.v1.CriticalityType/Critical" />
	</Record>
</Annotation>
```

STEP: 6 — Object List Item: Update manifest.json to use ObjectList

DESCRIPTION: Update manifest.json "pages" section for the ListReport page to set tableSettings.type to "ObjectList". Place this snippet under the app's manifest pages configuration.

LANGUAGE: JSON

CODE:
```json
"pages": {
	"ListReport|STTA_C_MP_Product": {
		"entitySet": "STTA_C_MP_Product",
		"component": {
			"settings": {
				"isWorklist": true,
				"tableSettings": {
					type: "ObjectList"
  				},
				"smartVariantManagement": false
			}
		}
	}
}
```

STEP: 7 — Object List Item: Mapping of UI.LineItem entries to UI roles

DESCRIPTION: Use this mapping when creating ObjectList annotations. DataPoints and DataFields map to title, attributes, number, statuses, and their visual positions. If DataPoints are missing for a slot, subsequent DataFields are used according to the fallback rules described.

LANGUAGE: text

CODE:
```text
Object List Item Property -> Entity Annotation -> Location on List Item UI -> Additional comments

title
- First data field of UI.LineItem
- Top left

First ObjectAttribute (under attributes aggregation)
- Second data field of UI.LineItem
- Middle left

number
- First data point
- Top right
- If no data point exists, the next data field (third data field) is used.

numberState
- First data point or criticality, or first data point or CriticalityCalculation
- Color
- If no data point exists, default state = None.

firstStatus
- Second data point
- Middle right
- If no data point exists, the next data field is used (third data field if one data point provided, fourth if none provided).

Second ObjectAttribute (under attributes aggregation)
- Third data field
- Bottom left
- If third data field is already used, the next available data field is used (e.g., fifth if no data points, or fourth if one data point provided).

secondStatus
- Third data point
- Bottom right
- If no data points exist, the next data field is used (fourth data field if two data points provided, fifth if one provided, sixth if none provided).
```
--------------------------------

**TITLE**: Enabling Stream Support (OData V2 & V4) for SAP Fiori Elements

**INTRODUCTION**: Practical, code-focused reference showing required entity properties and annotations to enable file upload/download/delete (stream support) in SAP Fiori elements apps for OData V2 and V4. Includes security prerequisites, V2 and V4 annotation examples, UI field mapping, UI rendering rules, and file upload as action parameter (XML, ABAP CDS, CAP CDS examples). Use these snippets directly in your service/annotation files.

**TAGS**: fiori-elements, odata-v2, odata-v4, streams, file-upload, annotations, CAP, CDS, ABAP, XML, MediaType, ContentDisposition

STEP: Security prerequisites

DESCRIPTION: Mandatory security checks and back-end measures to implement before enabling stream support. Ensure virus scanning, size limits, MIME-type restrictions, and file validation. Define acceptable media types via annotation. See security configuration doc for details.

LANGUAGE: text

CODE:
```text
Security checklist (implement in back end & metadata):

- Add Core.AcceptableMediaTypes annotation on the entity/property to whitelist upload MIME types.
- Ensure back-end service framework performs virus scanning and enforces maximum file size and MIME-type restrictions.
- Implement file validation and data sanitization in the back end.
- Reference: security-configuration-ba0484b.md
```

STEP: Prerequisite for OData V2 (entity must be stream enabled)

DESCRIPTION: OData V2 requires an EntityType with HasStream="true" to support media streams. Add key properties and other fields as needed.

LANGUAGE: XML

CODE:
```xml
<EntityType Name="MyStreamType" m:HasStream="true" sap:label="Stream Test" sap:content-version="1">
  <Key>
    <PropertyRef Name="Streamuuid" />
    <PropertyRef Name="IsActiveEntity" />
  </Key>
  <Property Name="Edit_ac" Type="Edm.Boolean" sap:label="Dyn. Action Control" sap:creatable="false" sap:updatable="false" sap:sortable="false" sap:filterable="false" />
</EntityType>
```

STEP: Enable stream field on Object Page (OData V2)

DESCRIPTION: Annotate a UI.FieldGroup or UI.Identification with a UI.DataField where Value path is the reserved $value to enable stream UI (uploader/link/thumbnail). Also annotate entity-level MediaType, optionally UI.IsImage, and ContentDisposition Filename path. Restrict upload MIME types using Core.AcceptableMediaTypes. Notes on behavior: draft apps require editable UI for upload/delete; non-draft support is in display mode. Only one file per record; uploading a second file replaces the existing one.

LANGUAGE: XML

CODE:
```xml
<!-- Use $value in a UI.DataField to bind the stream -->
<Record Type="UI.DataField">
    <PropertyValue Property="Value" Path="$value"/>
</Record>

<!-- Entity-level: specify MediaType property used for the stream -->
<Annotation Term="Org.OData.Core.V1.MediaType" Path="ThisMimeType"></Annotation>

<!-- Optional: render stream as image thumbnails -->
<Annotation Term="UI.IsImage"/>

<!-- ContentDisposition: specify file name property (if missing, UI shows "Open File") -->
<Annotation Term="SAP__core.ContentDisposition">
    <Record>
        <PropertyValue Property="Filename" Path="ThisFileName" />
    </Record>
</Annotation>

<!-- Restrict accepted media types for upload -->
<Annotation Term="Core.AcceptableMediaTypes">
    <Collection>
        <String>text/plain</String>
    </Collection>
</Annotation>
```

STEP: OData V4 — Step 1: Add Edm.Stream property and related properties

DESCRIPTION: Define Edm.Stream property, a property holding media type, optional MaxLength for file size, and acceptable media types annotations. Annotate the stream property with Core.MediaType pointing to the media-type property. Mark media-type property with Core.IsMediaType.

LANGUAGE: XML

CODE:
```xml
<EntityType Name="MainEntities">
    ...
    <Property Name="myStreamProperty" Type="Edm.Stream" />
    <Property Name="myStreamPropertyType" Type="Edm.String" />
    <Property Name="myRestrictedStreamProperty" Type="Edm.Stream" MaxLength="100000"/>
    ...
</EntityType>
<Annotations Target="sap.fe.stream.StreamsService.MainEntities/myStreamProperty">
    <Annotation Term="Core.MediaType" Path="myStreamPropertyType" />
</Annotations>
<Annotations Target="sap.fe.stream.StreamsService.MainEntities/myStreamPropertyType">
    <Annotation Term="Core.IsMediaType" Bool="true" />
</Annotations>
<Annotations Target="sap.fe.stream.StreamsService.MainEntities/myRestrictedStreamProperty">
    <Annotation Term="Core.MediaType" String="text/plain"/>
    <Annotation Term="Core.AcceptableMediaTypes">
        <Collection>
            <String>text/plain</String>
        </Collection>
    </Annotation>
</Annotations>
```

STEP: OData V4 — Step 2: Add UI DataField for stream property

DESCRIPTION: Add a UI.FieldGroup (qualifier optional) and include a UI.DataField referencing the Edm.Stream property via Value Path. This will render the uploader / link / preview in forms.

LANGUAGE: XML

CODE:
```xml
<Annotations Target="sap.fe.stream.StreamsService.MainEntities">
    <Annotation Term="UI.FieldGroup" Qualifier="streams">
        <Record Type="UI.FieldGroupType">
            <PropertyValue Property="Label" String="Streams" />
            <PropertyValue Property="Data">
                <Collection>
                    <Record Type="UI.DataField">
                        <PropertyValue Property="Label" String="Stream" />
                        <PropertyValue Property="Value" Path="myStreamProperty" />
                    </Record>
                </Collection>
            </PropertyValue>
        </Record>
    </Annotation>
</Annotations>
```

STEP: UI representation rules (OData V4)

DESCRIPTION: Implementation rules for how Fiori Elements renders streams:
- Document icon is derived from odata.mediaContentType mapping; fallback to generic icon.
- Link text uses Core.ContentDisposition/Filename if present and non-empty; otherwise "Open File".
- If odata.mediaContentType is null => stream is empty => empty indicator shown.
- Avatar rendered when UI.IsImage is set or Core.MediaType starts with "image/".
- Use MaxLength to restrict file size (bytes). Use Core.AcceptableMediaTypes to restrict MIME types.

LANGUAGE: XML

CODE:
```xml
<!-- Example: dynamic media type with filename -->
<Annotations Target="sap.fe.streams.StreamsService.MainEntities/streamWithFilename_content">
     <Annotation Term="Core.MediaType" Path="streamWithFilename_type"/>
          <Annotation Term="Core.ContentDisposition">
               <Record Type="Core.ContentDispositionType">
                    <PropertyValue Property="Filename" Path="streamWithFilename_name"/>
               </Record>
          </Annotation>
     <Annotation Term="Common.Label" String="Stream, dynamic media type, with name"/>
</Annotations>
```

STEP: UI mapping example (CAP CDS snippet for stream + filename + media type)

DESCRIPTION: CAP CDS example that shows how to annotate stream, media type, and filename in CDS. Use @Core.MediaType to point to MediaType property and @Core.ContentDisposition.Filename to point to filename property.

LANGUAGE: CDS

CODE:
```cddl
@title : 'Stream with file name'
@Core.MediaType : streamWithFilename_type
@Core.ContentDisposition.Filename : streamWithFilename_name
                                    streamWithFilename_content : Stream;
                                    streamWithFilename_type : MediaType;
                                    streamWithFilename_name : StreamName;
```

STEP: File upload as Action Parameter — XML Annotation

DESCRIPTION: Define an Action that takes a ComplexType parameter containing an Edm.Stream, MIME type, and FileName. Annotate the ComplexType stream property with Core.ContentDisposition.Filename, Core.MediaType, Core.AcceptableMediaTypes, and mark MIME property with Core.IsMediaType. Use MaxLength on stream property to restrict file size.

LANGUAGE: XML

CODE:
```xml
<Action Name="ActionParameterTypeName" IsBound="true">
  <Parameter Name="_it" Type="service.namespace.EntityTypeName" Nullable="false"/>
  <Parameter Name="_StreamProperties" Type="service.namespace.FileStreamTypeName" Nullable="false"/>
</Action>

<ComplexType Name="FileStreamTypeName">
  <Property Name="StreamProperty" Type="Edm.Stream" Nullable="false" MaxLength="128" />
  <Property Name="MimeType" Type="Edm.String" Nullable="false" />
  <Property Name="FileName" Type="Edm.String" Nullable="false" />
</ComplexType>

<Annotations Target="service.namespace.FileStreamTypeName/StreamProperty">
  <Annotation Term="Common.Label" String="Label for File Upload" />
  <Annotation Term="Core.ContentDisposition">
    <Record>
      <PropertyValue Property="Filename" Path="FileName" />
    </Record>
  </Annotation>
  <Annotation Term="Core.MediaType" Path="MimeType" />
  <Annotation Term="Core.AcceptableMediaTypes">
    <Collection>
      <String>image/png</String>
    </Collection>
  </Annotation>
</Annotations>
<Annotations Target="service.namespace.FileStreamTypeName/MimeType">
  <Annotation Term="Core.IsMediaType" />
</Annotations>
```

STEP: File upload as Action Parameter — ABAP CDS example

DESCRIPTION: ABAP CDS pattern for defining a file-stream complex type and an action parameter referencing it. Use Semantics annotations to link stream, mimetype, and filename.

LANGUAGE: ABAP CDS

CODE:
```abap
// ==== FILE_STREAM_TYPE_NAME ==== //

// == CDS View for FILE_STREAM_TYPE_NAME
define root abstract entity FILE_STREAM_TYPE_NAME
{
  @Semantics.largeObject.mimeType: 'mimetype'
  @Semantics.largeObject.fileName: 'filename'
  @Semantics.largeObject.contentDispositionPreference: #INLINE
  streamproperty : abap.rawstring(0);
  
  @UI.hidden: true
  mimetype : abap.char(128);
  
  @UI.hidden: true
  filename : abap.char(128);
}

// == Behavior Definitions for FILE_STREAM_TYPE_NAME
abstract;
strict;
with hierarchy;
define behavior for FILE_STREAM_TYPE_NAME {}


// ==== ACTION_PARAMETER_TYPE_NAME ==== //

// == CDS View for ACTION_PARAMETER_TYPE_NAME
define root abstract entity ACTION_PARAMETER_TYPE_NAME
{
  _StreamProperties : association [1] to FILE_STREAM_TYPE_NAME on 1 = 1;
}

// == Behavior Definitions for ACTION_PARAMETER_TYPE_NAME
abstract;
strict;
with hierarchy;
define behavior for ACTION_PARAMETER_TYPE_NAME
{
  association _StreamProperties with hierarchy;
}
```

STEP: File upload as Action Parameter — CAP CDS example

DESCRIPTION: CAP CDS action and complex type definition showing LargeBinary usage and annotations for media type and filename.

LANGUAGE: CDS

CODE:
```cddl
action ActionParameterTypeName(
  _StreamProperties : service.namespace.FileStreamTypeName not null
) returns EntityTypeName;

type FileStreamTypeName {
  StreamProperty       : LargeBinary @Core.MediaType: MimeType @Core.ContentDisposition.Filename: FileName;
  MimeType             : String @Core.IsMediaType;
  FileName             : String;
};
```
--------------------------------

**TITLE**: Enabling Sub-object Creation Through Dialog on a Non-draft Object Page (OData V2)

**INTRODUCTION**: Enable creation of related (sub-)objects with up to 8 data fields via a dialog on an Object Page in non-draft SAP Fiori elements (OData V2). This document shows the manifest settings to add, constraints to follow, and how to override dialog title and success toast i18n keys.

**TAGS**: fiori-elements-framework, OData V2, manifest, object-page, create-dialog, non-draft, i18n, related-entity

**STEP**: 1 - Add createWithParameterDialog fields mapping (template)
**DESCRIPTION**: In the manifest, add the createWithParameterDialog property and map fields to their respective entity properties. Use this template to declare the fields that appear in the create dialog. Keep placeholders for actual field names and paths.
**LANGUAGE**: JSON
**CODE**:
```json
"createWithParameterDialog" : {
       "fields" : {
         "<fieldname1>" : {"path":"<fieldname1>"},
         "<fieldname2>" : {"path":"<fieldname2>"}
        }
```

**STEP**: 2 - Example: Add createWithParameterDialog to a section's tableSettings in pages
**DESCRIPTION**: Example manifest fragment showing how to enable the create dialog for a related entityset inside an Object Page section. Copy this structure under your pages[] -> component.settings.sections -> <sectionKey> to enable the dialog for the related table. Replace entitySet, navigationProperty and field names with your actual values.
**LANGUAGE**: JSON
**CODE**:
```json
"pages": [
           {
             "entitySet": "STTA_C_SO_SalesOrder_ND",
              "component": {
                  "name": "sap.suite.ui.generic.template.ObjectPage",
                  "settings": {
                    "showRelatedApps": true,
                     "gridTable": false,
                      "sections": {
                         "to_Item::com.sap.vocabularies.UI.v1.LineItem": {
                         "navigationProperty": "to_Item",
                          "entitySet": "STTA_C_SO_SalesOrderItem_ND",
                           "tableSettings": {
                             "createWithParameterDialog" : {
                               "fields" : {
                                 "SalesOrderItemID":{"path": "SalesOrderItemID"},
                                  "ProductID" : {"path":"ProductID"},
                                  "Quantity" : {"path":"Quantity"}
                                 }
                               }
                            }
                          }
                       }
                    }                    
                  },
```

**STEP**: 3 - Constraints and validation checklist
**DESCRIPTION**: Apply these rules when enabling createWithParameterDialog.
**LANGUAGE**: Plaintext
**CODE**:
```
- Applicable only for SAP Fiori elements with OData V2.
- Use only on non-draft applications (do not enable for draft-enabled apps).
- The create dialog supports a maximum of 8 data fields.
- Ensure each listed property is part of the related entity (correct entity path).
- Include all mandatory fields of the target entity in the create dialog fields mapping.
- Validate navigationProperty and entitySet names are correct for the section.
```

**STEP**: 4 - Customize dialog title and success toast via i18n
**DESCRIPTION**: Override the default dialog title and success toast by setting i18n keys CREATE_DIALOG_TITLE and ITEM_CREATED in your i18n properties file. Add or modify these keys in your i18n file to change the dialog title and success message.
**LANGUAGE**: properties
**CODE**:
```
CREATE_DIALOG_TITLE=New Item
ITEM_CREATED=Item Created
```

**STEP**: 5 - Implementation notes and recommended actions
**DESCRIPTION**: Practical actions to implement and test the feature.
**LANGUAGE**: Plaintext
**CODE**:
```
- Add createWithParameterDialog under the specific section.tableSettings where related items are shown.
- Replace placeholder field names and entitySet/navigationProperty with actual application values.
- Update i18n keys to localized texts if needed.
- Deploy and test on a non-draft app, create a related item via the Object Page and verify:
  - Dialog appears with the mapped fields (<= 8 fields).
  - Mandatory fields are present and validated.
  - On success, the customized ITEM_CREATED toast appears (if overridden).
```
--------------------------------

**TITLE**: Enabling Table Personalization in SAP Fiori Elements (OData V2 & V4)

**INTRODUCTION**: Quick reference for enabling and configuring table personalization (columns, sorting, filtering, grouping) in SAP Fiori Elements apps. Includes actionable manifest.json settings and annotation examples (XML, ABAP CDS, CAP CDS) to control filter/sort availability and restrictions for OData V2 and OData V4.

**TAGS**: fiori-elements, table-personalization, manifest.json, annotations, SortRestrictions, personalization, ODataV2, ODataV4

**STEP**: 1 — Defaults and variant-management behavior

**DESCRIPTION**: Understand default filter behavior and the impact of variant management levels.
- Default filtering behavior for list report page tables:
  - Disabled in page-level variant management (harmonized variant management).
  - Enabled in control-level variant management.
- In harmonized (page-level) variant management, end users cannot set table filters unless explicitly enabled.
- If smartVariantManagement = false, table filters are enabled by default.

**LANGUAGE**: text

**CODE**:
```text
Defaults:
- Page-level variant: table filtering disabled.
- Control-level (control) variant: table filtering enabled.
- smartVariantManagement: false => table filter enabled by default.
```

**STEP**: 2 — Enable table filters for OData V2 (manifest.json)

**DESCRIPTION**: To allow end users to set filters in table personalization when using harmonized variant management, set enableTableFilterInPageVariant to true in the manifest. Place this setting in the page component settings for the ListReport.

**LANGUAGE**: JSON

**CODE**:
```json
manifest.json

"sap.ui.generic.app": {
    "_version": "1.3.0",
        "settings": {
        "forceGlobalRefresh": true
        },
        "pages": {
            "ListReport|STTA_C_MP_Product": {
                "entitySet": "STTA_C_MP_Product",
                "component": {
                    "name": "sap.suite.ui.generic.template.ListReport",
                    "list": true,
                    "settings": {
                        "smartVariantManagement": true,
                        "enableTableFilterInPageVariant": true
                    }
                },
```

**STEP**: 3 — Table personalization defaults and control in OData V4 (overview)

**DESCRIPTION**: For OData V4, table personalization is enabled by default (add/remove columns, filter, sort, group). Use annotations to exclude properties from filtering/sorting or to restrict navigation properties. Key considerations:
- Use @com.sap.vocabularies.UI.v1.HiddenFilter to exclude columns from being filterable.
- Filtering of navigation properties is available only for properties used in the LineItem.
- In list reports with page-level variant management, enable filtering by setting "filter": true in a personalization object in the manifest (see Step 4).
- Use OData Capabilities annotations (SortRestrictions, NavigationRestrictions) to restrict sorting.
- Caution: sorting on navigation properties can cause issues in CAP Node.js with SQLite.

**LANGUAGE**: text

**CODE**:
```text
OData V4 table personalization:
- Default: personalization enabled (columns, filter, sort, group).
- Use @UI.HiddenFilter to exclude filterable columns.
- Filtering nav properties: only if used in LineItem.
- Use NavigationRestrictions and SortRestrictions to control sorting.
- Note: Sorting on currency/unit fields sorts currency/unit first, then amount.
- Caution: CAP NodeJS + SQLite may have issues when sorting on navigation properties.
```

**STEP**: 4 — Restrict sorting using NavigationRestrictions / SortRestrictions (XML annotation)

**DESCRIPTION**: Example XML annotation to restrict sorting on navigation properties and specific nested properties. Use in service metadata annotations for OData V4.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="Capabilities.NavigationRestrictions">
    <Record Type="Capabilities.NavigationRestrictionsType">
        <PropertyValue Property="RestrictedProperties">
            <Collection>
                <Record Type="Capabilities.NavigationPropertyRestriction">
                    <PropertyValue Property="NavigationProperty" NavigationPropertyPath="_OverallSDProcessStatus"/>
                    <PropertyValue Property="SortRestrictions">
                        <Record Type="Capabilities.SortRestrictionsType">
                            <PropertyValue Property="NonSortableProperties">
                                <Collection>
                                    <PropertyPath>_OverallSDProcessStatus/OverallSDProcessStatus_Text</PropertyPath>
                                </Collection>
                            </PropertyValue>
                        </Record>
                    </PropertyValue>
                </Record>
                <Record Type="Capabilities.NavigationPropertyRestriction">
                    <PropertyValue Property="NavigationProperty" NavigationPropertyPath="_SalesOrderType"/>
                    <PropertyValue Property="SortRestrictions">
                        <Record Type="Capabilities.SortRestrictionsType">
                            <PropertyValue Property="NonSortableProperties">
                                <PropertyValue Property="Sortable" Bool="false"/>
                            </PropertyValue>
                        </Record>
                    </PropertyValue>
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

**STEP**: 5 — Restrict sorting using ABAP CDS

**DESCRIPTION**: Example ABAP CDS annotation to disable sorting on an entity or property.

**LANGUAGE**: ABAP

**CODE**:
```abap
@ObjectModel.sort.enabled: false
```

**STEP**: 6 — Restrict sorting using CAP CDS (Node.js / CAP model)

**DESCRIPTION**: CAP CDS-style definition showing NavigationRestrictions with SortRestrictions for navigation properties. Use in CAP model definitions or manifest-adjacent configuration depending on project.

**LANGUAGE**: CDS

**CODE**:
```cds
NavigationRestrictions : {
    RestrictedProperties : [
        {
            NavigationProperty: _OverallSDProcessStatus,
            SortRestrictions: {NonSortableProperties: [_OverallSDProcessStatus.OverallSDProcessStatus_Text]}
        },
        {
            NavigationProperty: _SalesOrderType,
            SortRestrictions: {Sortable: false}
        }
    ]
}
```

**STEP**: 7 — Configure personalization in manifest.json (choose which features are available)

**DESCRIPTION**: Use the "personalization" setting under the component options (LineItem tableSettings) to enable/disable column, sort, filter, and group behavior. Values:
- true: all personalization options enabled (default).
- false: all disabled.
- object: define properties (column, sort, filter, group). Omit = treated as false for safety across releases.

Place this configuration under the component options for the ListReport or relevant page component.

**LANGUAGE**: JSON

**CODE**:
```json
manifest.json

"BusinessPartnersList": {
    "type": "Component",
    "id": "BusinessPartnersList",
    "name": "sap.fe.templates.ListReport",
    "options": {
        "settings": {
            "contextPath": "/BusinessPartners",
            "variantManagement": "Control",
            "controlConfiguration": {
                "@com.sap.vocabularies.UI.v1.LineItem": {
                    "tableSettings": {
                        "type": "AnalyticalTable",
                        "personalization": {
                            "column" : true,
   	                        "sort" : false,
   	                        "filter" : true, 
                	        "group": true
  	                    }
                    }
                }
            }
        }
    }
},
```

**STEP**: 8 — Rules for personalization with TextArrangement

**DESCRIPTION**: Apply these rules when properties use TextArrangement:
- Sorting and grouping are available for visible items:
  - For TextFirst: both property and text can be sorted/grouped.
  - For TextOnly: only the text is visible; sorting/grouping available for text. Filtering applies to the property itself (not text) unless the text property has no filter restriction.
- When TextOnly text is annotated UI.Hidden = true, that Hidden annotation is ignored for sorting/grouping; text can still be sorted/grouped.
- If a presentationVariant sets sortOrder on a TextOnly property, sorting applies to the property (not the text). Sort indicator won't show in the visible column header (property not visible).
- If the TextArrangement target is a navigation property, that target is not shown in the personalization Columns tab unless explicitly defined in LineItem or a custom column.

**LANGUAGE**: text

**CODE**:
```text
TextArrangement rules:
- TextFirst: property or text can be sorted/grouped.
- TextOnly: sorting/grouping only on text; filtering on property itself (text filter may be available if not restricted).
- UI.Hidden on text property is ignored for sort/group (text still available).
- PresentationVariant sortOrder on TextOnly property sorts the property; sort indicator hidden if property not visible.
- TextArrangement target that is a navigation property appears in Columns only if included in LineItem or a custom column.
```
--------------------------------

**TITLE**: Enable and Configure Flexible Column Layout (FCL) in SAP Fiori Elements

**INTRODUCTION**: This guide shows how to enable and configure the Flexible Column Layout (FCL) for SAP Fiori Elements applications (OData V2 and V4). It includes actionable steps for enabling FCL with SAP Fiori Tools, required manifest.json changes (rootView, router config, routing targets), examples for 2- and 3-column scenarios, default layout overrides, personalization (column resize saving), and known restrictions.

**TAGS**: sap.fiori, fcl, flexible-column-layout, manifest.json, sap.fe, routing, sap.ui5, ODataV2, ODataV4, sap.f.routing.Router

**STEP**: 1 — Overview of FCL options and properties

**DESCRIPTION**: Use these manifest properties to control default behavior of the FCL. Set globally under "sap.ui.generic.app" (OData V2) or router config (OData V4). Values shown are the supported default layout types.

- defaultTwoColumnLayoutType: TwoColumnsBeginExpanded | TwoColumnsMidExpanded
- defaultThreeColumnLayoutType: ThreeColumnsMidExpanded | ThreeColumnsEndExpanded
- defaultLayoutType (per-page override): e.g., OneColumn, MidColumnFullScreen, etc.

End users can expand, collapse, and set full-screen on columns via UI buttons. Column resize state is persisted per application and device type (desktop/tablet/phone) in personalization settings.

**LANGUAGE**: none

**CODE**:
```text
Properties (examples):
- defaultTwoColumnLayoutType: TwoColumnsBeginExpanded | TwoColumnsMidExpanded
- defaultThreeColumnLayoutType: ThreeColumnsMidExpanded | ThreeColumnsEndExpanded
- defaultLayoutType (per page): OneColumn | MidColumnFullScreen | ...
```

**STEP**: 2 — Enable FCL using SAP Fiori Tools (Page Map)

**DESCRIPTION**: Use SAP Fiori Tools Page Map to enable and preview FCL quickly. Steps are action-oriented for UI tooling:

1. Open the Page Map (e.g., right-click project folder → Show Page Map).  
2. In the Property Panel, toggle "Flexible Column Layout" on.  
3. Choose the desired two- or three-column layout. Optionally customize layout keys in manifest.json.  
4. Preview the application (Previewing an Application) to verify behavior.

Note: FCL is not available for the Overview Page floorplan. Analytical List Page supports only TwoColumnsBeginExpanded. FCL works in draft and non-draft apps.

**LANGUAGE**: none

**CODE**:
```text
No code required: use Page Map in SAP Fiori Tools → Property Panel → Flexible Column Layout → select layout → Preview
```

**STEP**: 3 — Enable FCL in manifest.json (OData V2)

**DESCRIPTION**: Add a flexibleColumnLayout entry under "sap.ui.generic.app" → "settings". This sample shows global defaults for two- and three-column types. Place in your manifest.json.

**LANGUAGE**: JSON

**CODE**:
```json
"sap.ui.generic.app": {
        "_version": "1.1.0",
        "settings": {
            "flexibleColumnLayout": {
                "defaultTwoColumnLayoutType": "TwoColumnsMidExpanded",
                "defaultThreeColumnLayoutType": "ThreeColumnsEndExpanded"
            }
        },
        "pages": [...
```

**STEP**: 4 — Define per-page default layout (OData V2)

**DESCRIPTION**: Override global defaults per page using "defaultLayoutType" inside the page definition. Common use: set an object page to "OneColumn" so it moves to the first column on open, or "MidColumnFullScreen" to open full-screen. This is useful when pages in the same column require different initial layouts.

**LANGUAGE**: JSON

**CODE**:
```json
"sap.ui.generic.app": {
    "settings": {
            "flexibleColumnLayout": {
                "defaultTwoColumnLayoutType": "TwoColumnsMidExpanded",
                "defaultThreeColumnLayoutType": "ThreeColumnsEndExpanded"
            }
        },
                      "pages": [{
                               "entitySet": "…",
                               "component": {
                                     "name": "sap.suite.ui.generic.template.ListReport",
                                     "settings": {
                                              …
                                       }
                                 },
                                  "pages": [{
                                            "entitySet": "…",
                                             "defaultLayoutType": "OneColumn",
                                             "component": {
                                                      "name": "sap.suite.ui.generic.template.ObjectPage",
                                                      "settings": {
                                                                 …
                                                      }
                                             },
```

**STEP**: 5 — Enable FCL in manifest.json (OData V4) — add rootView

**DESCRIPTION**: For OData V4 FE apps, add the rootView to sap.ui5 in manifest.json to use FCL root view (sap.fe.core.rootView.Fcl). This is required to enable FCL instead of full-screen.

**LANGUAGE**: JSON

**CODE**:
```json
"sap.ui5":{
 …
        "rootView":{
            "viewName":"sap.fe.core.rootView.Fcl",
            "type":"XML",
            "async":true,
            "id":"appRootView"
        },
…
   }
```

**STEP**: 6 — Enable FCL in manifest.json (OData V4) — routerClass + flexibleColumnLayout in routing config

**DESCRIPTION**: Set routerClass to sap.f.routing.Router and add flexibleColumnLayout defaults under the "routing" → "config" key. Ensure the sap.f library is added as a dependency under sap.ui5.

**LANGUAGE**: JSON

**CODE**:
```json
"routing":{
     "config":{
            "routerClass":"sap.f.routing.Router",
            "flexibleColumnLayout":{
                    "defaultTwoColumnLayoutType":"TwoColumnsMidExpanded",
                    "defaultThreeColumnLayoutType":"ThreeColumnsMidExpanded"
                }
            },
           "routes":[
              …
            ]
    }
```

**STEP**: 7 — Configure routes for FCL (OData V4) — general rules

**DESCRIPTION**: For FCL routing:
- route.pattern: pattern to match navigation (end with :?query: if required).
- route.name: unique route identifier.
- route.target: ARRAY listing the targets to display for the route (controls number/placement of columns).

Targets map to control aggregations:
- beginColumnPages → first column
- midColumnPages → second column
- endColumnPages → third column

Use sap.fe.templates.ListReport for first-level view and sap.fe.templates.ObjectPage for subsequent levels.

**LANGUAGE**: none

**CODE**:
```text
Routing keys to set:
- name: unique route id
- target: array of target names to display (controls how many columns populate)
Targets: each target sets controlAggregation (beginColumnPages | midColumnPages | endColumnPages)
```

**STEP**: 8 — Sample: 3-column layout starting with List Report (OData V4)

**DESCRIPTION**: Scenario: List report → List report | Object page 1 → List report | Object page 1 | Object page 2 → Object page 3. The routes define the target arrays to load 1, 2 or 3 columns.

Place these route and target fragments inside manifest.json routing and targets sections.

**LANGUAGE**: JSON

**CODE**:
```json
"routes": [
     	{
        	"pattern": ":?query:",
            "name": "SalesOrderManageList",
            "target": ["SalesOrderManageList"]
        },
        {
        	"pattern": "SalesOrderManage({key}):?query:",
            "name": "SalesOrderManageObjectPage",
            "target": ["SalesOrderManageList", "SalesOrderManageObjectPage"]
        },
        {
        	"pattern": "SalesOrderManage({key})/_Item({key2}):?query:",
            "name": "SalesOrderItemObjectPage",
            "target": ["SalesOrderManageList", "SalesOrderManageObjectPage", "SalesOrderItemObjectPage"]
         },
         {
         	"pattern": "SalesOrderManage({key})/_Item({key2})/_MaterialDetails({key3}):?query:",
            "name": "MaterialDetailsObjectPage",
            "target": ["MaterialDetailsObjectPage"]
         },
         {
         	"pattern": "SalesOrderManage({key})/_Item({key2})/_MaterialDetails({key3})/_MaterialRatings({key4}):?query:",
            "name": "MaterialRatingsObjectPage",
            "target": ["MaterialRatingsObjectPage"]
         },
         {
          	"pattern": "SalesOrderManage({key})/_Item({key2})/_MaterialDetails({key3})/_MaterialRatings({key4})/_MaterialRatingsDetails({key5}):?query:",
            "name": "MaterialRatingsDetailsObjectPage",
            "target": ["MaterialRatingsDetailsObjectPage"]
         }
],
"targets": {
   "SalesOrderManageList": {
       "type": "Component",
       "id": "SalesOrderManageList",
       "name": "sap.fe.templates.ListReport",
       "controlAggregation": "beginColumnPages",
       "contextPattern": "",
       "options": {
                ...
       }
   },
   "SalesOrderManageObjectPage": {
       "type": "Component",
       "id":  "SalesOrderManageObjectPage",
       "name": "sap.fe.templates.ObjectPage",
       "controlAggregation": "midColumnPages",
       "contextPattern": "/SalesOrderManage({key})",
       "options": {
                ...
       }
   },
   "SalesOrderItemObjectPage": {
       "type": "Component",
       "id":  "SalesOrderItemObjectPage",
       "name": "sap.fe.templates.ObjectPage",
       "controlAggregation": "endColumnPages",
       "contextPattern": "/SalesOrderManage({key})/_Item({key2})",
       "options": {
                ...
       }
   },
   "MaterialDetailsObjectPage": {
       "type": "Component",
       "id":  "MaterialDetailsObjectPage",
       "name": "sap.fe.templates.ObjectPage",
       "controlAggregation": "endColumnPages",
       "contextPattern": "/SalesOrderManage({key})/_Item({key2})/_MaterialDetails({key3})",
       "options": {
                ...
       }
   },
   ...
}
```

**STEP**: 9 — Sample: 2-column layout that starts with an Object Page (OData V4)

**DESCRIPTION**: Scenario: List report → Object page 1 → Object page 1 | Object page 2 → Object page 3. Adjust route.target arrays and controlAggregation to move pages between columns.

**LANGUAGE**: JSON

**CODE**:
```json
"routes": [
                {
               "pattern": ":?query:",
               "name": "SalesOrderManageList",
               "target": ["SalesOrderManageList"]
        },
        {
               "pattern": "SalesOrderManage({key}):?query:",
               "name": "SalesOrderManageObjectPage",
               "target": ["SalesOrderManageObjectPage"]
        },
        {
               "pattern": "SalesOrderManage({key})/_Item({key2}):?query:",
               "name": "SalesOrderItemObjectPage",
               "target": ["SalesOrderManageObjectPage", "SalesOrderItemObjectPage"]
         },
         {
               "pattern": "SalesOrderManage({key})/_Item({key2})/_MaterialDetails({key3}):?query:",
               "name": "MaterialDetailsObjectPage",
               "target": ["MaterialDetailsObjectPage"]
         },
        …
],
"targets": {
       "SalesOrderManageList": {
           "type": "Component",
           "id": "SalesOrderManageList",
           "name": "sap.fe.templates.ListReport",
           "controlAggregation": "beginColumnPages",
           "contextPattern": "",
           "options": {
                    ...
           }
       },
       "SalesOrderManageObjectPage": {
           "type": "Component",
           "id":  "SalesOrderManageObjectPage",
           "name": "sap.fe.templates.ObjectPage",
           "controlAggregation": "beginColumnPages",
           "contextPattern": "/SalesOrderManage({key})",
           "options": {
                    ...
           }
       },
       "SalesOrderItemObjectPage": {
           "type": "Component",
           "id":  "SalesOrderItemObjectPage",
           "name": "sap.fe.templates.ObjectPage",
           "controlAggregation": "midColumnPages",
           "contextPattern": "/SalesOrderManage({key})/_Item({key2})",
           "options": {
                    ...
           }
       },
       "MaterialDetailsObjectPage": {
           "type": "Component",
           "id":  "MaterialDetailsObjectPage",
           "name": "sap.fe.templates.ObjectPage",
           "controlAggregation": "endColumnPages",
           "contextPattern": "/SalesOrderManage({key})/_Item({key2})/_MaterialDetails({key3})",
           "options": {
                    ...
           }
       },
       ...
   }
```

**STEP**: 10 — Sample: 3-column layout starting with an Object Page (OData V4)

**DESCRIPTION**: Scenario demonstrates complex nested navigation with explicit target arrays to populate specific columns.

**LANGUAGE**: JSON

**CODE**:
```json
"routes": [
    {
        "pattern": ":?query:",
        "name": "SalesOrderManageList",
        "target": "SalesOrderManageList"
    },
    {
        "pattern": "SalesOrderManage({key}):?query:",
        "name": "SalesOrderManageObjectPage",
        "target": ["SalesOrderManageObjectPage"]
    },
    {
        "pattern": "SalesOrderManage({key})/_Item({key2}):?query:",
        "name": "SalesOrderItemObjectPage",
        "target": ["SalesOrderItemObjectPage"]
    },
    {
        "pattern": "SalesOrderManage({key})/_Item({key2})/_MaterialDetails({key3}):?query:",
        "name": "MaterialDetailsObjectPage",
        "target": ["SalesOrderItemObjectPage","MaterialDetailsObjectPage"]
    },
    {
        "pattern": "SalesOrderManage({key})/_Item({key2})/_MaterialDetails({key3})/_MaterialRatings({key4}):?query:",
        "name": "MaterialRatingsObjectPage",
        "target": ["SalesOrderItemObjectPage","MaterialDetailsObjectPage","MaterialRatingsObjectPage"]
    },
    {
        "pattern": "SalesOrderManage({key})/_Item({key2})/_MaterialDetails({key3})/_MaterialRatings({key4})/_MaterialRatingsDetails({key5}):?query:",
        "name": "MaterialRatingsDetailsObjectPage",
        "target": ["MaterialRatingsDetailsObjectPage"]
    }
],
"targets": {
    "SalesOrderManageList": {
        "type": "Component",
        "id": "SalesOrderManageList",
        "name": "sap.fe.templates.ListReport",
        "controlAggregation": "beginColumnPages",
        "contextPattern": "",
        "options": {
            ...
        }
    },
    "SalesOrderManageObjectPage": {
        "type": "Component",
        "id": "SalesOrderManageObjectPage",
        "name": "sap.fe.templates.ObjectPage",
        "controlAggregation": "beginColumnPages",
        "contextPattern": "/SalesOrderManage({key})",
        "options": {
            ...
        }
    },
    "SalesOrderItemObjectPage": {
        "type": "Component",
        "id": "SalesOrderItemObjectPage",
        "name": "sap.fe.templates.ObjectPage",
        "controlAggregation": "beginColumnPages",
        "contextPattern": "/SalesOrderManage({key})/_Item({key2})",
        "options": {
           ...
        }
    },
    "MaterialDetailsObjectPage": {
        "type": "Component",
        "id": "MaterialDetailsObjectPage",
        "name": "sap.fe.templates.ObjectPage",
        "controlAggregation": "midColumnPages",
        "contextPattern": "/SalesOrderManage({key})/_Item({key2})/_MaterialDetails({key3})",
        "options": {
            ...
        }
    },
    "MaterialRatingsObjectPage": {
        "type": "Component",
        "id": "MaterialRatingsObjectPage",
        "name": "sap.fe.templates.ObjectPage",
        "controlAggregation": "endColumnPages",
        "contextPattern": "/SalesOrderManage({key})/_Item({key2})/_MaterialDetails({key3})/_MaterialRatings({key4})",
        "options": {
            ...
        }
    },
    "MaterialRatingsDetailsObjectPage": {
        "type": "Component",
        "id": "MaterialRatingsDetailsObjectPage",
        "name": "sap.fe.templates.ObjectPage",
        "controlAggregation": "endColumnPages",
        "contextPattern": "/SalesOrderManage({key})/_Item({key2})/_MaterialDetails({key3})/_MaterialRatings({key4})/_MaterialRatingsDetails({key5})",
        "options": {
            ...
        }
    }
}
},
```

**STEP**: 11 — Targets configuration details (OData V4)

**DESCRIPTION**: For each target set these keys (same as full-screen apps except controlAggregation and contextPattern may differ):

- type: "Component"
- id: unique identifier
- name: template to use: sap.fe.templates.ListReport for the first level; sap.fe.templates.ObjectPage for subsequent levels
- controlAggregation: beginColumnPages | midColumnPages | endColumnPages
- contextPattern: navigation path to bind the target

Use options the same as full-screen template options.

**LANGUAGE**: JSON

**CODE**:
```json
"targets": {
        "SalesOrderManageList": {
            "type": "Component",
            "id": "SalesOrderManageList",
            "name": "sap.fe.templates.ListReport",
            "controlAggregation": "beginColumnPages",
            "contextPattern": "",
            "options": {
                        ...
                     // Same as fullscreen  //
                        ...
            }
        },
        "SalesOrderManageObjectPage": {
            "type": "Component",
            "id":  "SalesOrderManageObjectPage",
            "name": "sap.fe.templates.ObjectPage",
            "controlAggregation": "midColumnPages",
            "contextPattern": "/SalesOrderManage({key})",
            "options": {
                        ...
                     // Same as fullscreen  //
                        ...
            }
        },
        "SalesOrderItemObjectPage": {
            "type": "Component",
            "id":  "SalesOrderItemObjectPage",
            "name": "sap.fe.templates.ObjectPage",
            "controlAggregation": "endColumnPages",
            "contextPattern": "/SalesOrderManage({key})/_Item({key2})",
            "options": {
                        ...
                     // Same as fullscreen  //
                        ...
            }
        },
        "MaterialDetailsObjectPage": {
            "type": "Component",
            "id":  "MaterialDetailsObjectPage",
            "name": "sap.fe.templates.ObjectPage",
            "controlAggregation": "endColumnPages",
            "contextPattern": "/SalesOrderManage({key})/_Item({key2})/_MaterialDetails({key3})",
            "options": {
                         ...
                      // Same as fullscreen  //
                         ...
            }
        },
        ...
    }
```

**STEP**: 12 — Saving column resize information (personalization)

**DESCRIPTION**: Column resize information (sizes adjusted by end users) is saved per application and device type within personalization settings. No extra manifest config required; this is built-in behavior.

**LANGUAGE**: none

**CODE**:
```text
Column resize state persists per application and device (desktop/tablet/phone) in personalization storage.
```

**STEP**: 13 — Known restrictions and notes

**DESCRIPTION**: Keep these constraints in mind when designing FCL-enabled applications:

- Overview page: FCL is not relevant or supported.
- Analytical List Page: supports only TwoColumnsBeginExpanded.
- Both draft and non-draft applications support 2- and 3-column layouts; in non-draft CRUD apps, only the last column shows Edit/Delete buttons.
- In edit mode on an object page, a subobject page closes automatically when you add/remove a column from a table.
- If a list report or object page contains multiple tables based on the same entity, only the first table synchronizes with its subobject page.
- After updating a multi-input field on an object page, refresh the parent page to see changes.
- Tree table and analytical table in the list report cannot be displayed in FCL when using a draft-enabled service.
- For OData V4: ensure the sap.f library is declared as a dependency under sap.ui5.

**LANGUAGE**: none

**CODE**:
```text
Restrictions summary:
- No FCL for Overview Page
- Analytical List Page: only TwoColumnsBeginExpanded
- Only last column shows edit/delete in non-draft CRUD apps
- Subobject pages close if table columns change in edit mode
- Only first table (if multiple on same entity) syncs with subobject page
- Refresh parent page after multi-input updates to see changes
- Tree/Analytical table in list report not supported with draft-enabled service
- For OData V4, add sap.f to sap.ui5 dependencies
```
--------------------------------

**TITLE**: Enable Full-Screen Mode for Tables (SAP Fiori elements for OData V4)

**INTRODUCTION**: Enable a full-screen toggle for table controls by adding a manifest.json configuration. This displays a full-screen button on the table toolbar (left of the personalization button) and opens the table in a full-screen dialog with a Close button. Applicable only for SAP Fiori elements for OData V4.

**TAGS**: fiori-elements-framework, manifest.json, odata-v4, table, fullscreen, controlConfiguration, UI.v1.LineItem, tableSettings

**STEP**: 1 — Verify applicability and prerequisites

**DESCRIPTION**: Confirm your application is built with SAP Fiori elements for OData V4. The full-screen table setting:
- Applies only to OData V4 Fiori elements.
- Is ignored if configured for a list report (the templating phase will drop it).
- Is enabled by default on mobile phones (no manifest change needed for mobile).

If your app meets the requirement, proceed to modify manifest.json.

**LANGUAGE**: Text

**CODE**:
```
# Precondition: SAP Fiori elements for OData V4
# Note: Do not apply this setting for list reports (it will be ignored)
```

**STEP**: 2 — Modify manifest.json to enable full-screen for a table

**DESCRIPTION**: Open your application's manifest.json and add the controlConfiguration.tableSettings.enableFullScreen property under the target object's settings. Insert the snippet under the relevant object (for example: SalesOrderManageObjectPage). This exact JSON snippet toggles on the full-screen button for the object's table LineItem.

Place the snippet in manifest.json at the appropriate location for your page (e.g., within the target object's options -> settings -> controlConfiguration -> _Item/@com.sap.vocabularies.UI.v1.LineItem).

**LANGUAGE**: JSON

**CODE**:
```json
"SalesOrderManageObjectPage": {
    "options": {
        "settings": {
            "controlConfiguration": {
                "_Item/@com.sap.vocabularies.UI.v1.LineItem": {
                    "tableSettings": {
                        "enableFullScreen": true
                    }
                }
            }
        }
    }
}
```

**STEP**: 3 — Expected UI behavior and visual references

**DESCRIPTION**: After enabling:
- A full-screen button appears on the table toolbar to the left of the personalization button.
- Clicking the button opens the table in a full-screen dialog; the button icon toggles to allow exiting full-screen.
- A Close button is shown at the bottom of the dialog to exit full-screen mode.

Image references used in the documentation:
- images/Full-Screen_Button_for_Tables_543c2fd.png
- images/Close_Full-Screen_Mode_for_Tables_0d13370.png

Include or reference these images in your documentation or UI guides as needed. No additional runtime configuration is required.
--------------------------------

**TITLE**: Enabling the History of Recently Entered Values (SAP Fiori elements)

**INTRODUCTION**: This guide shows how to enable, disable, and configure the input-history (recently entered values) behavior for fields in SAP Fiori elements applications. It covers prerequisites, OData V2 per-field and global settings (manifest.json), OData V4 settings, and security controls to prevent storing sensitive personal data.

**TAGS**: fiori-elements-framework, manifest.json, input-history, historySettings, OData V2, OData V4, security, PersonalData

STEP: Prerequisites
DESCRIPTION: Enable the SAP Fiori launchpad parameter INPUTFIELD_HISTORY so the platform allows storing and showing recently entered values. Verify this setting before changing manifest.json. See Manage Launchpad Settings for details.
LANGUAGE: Link
CODE:
```text
Manage Launchpad Settings:
https://help.sap.com/docs/SAP_S4HANA_CLOUD/4fc8d03390c342da8a60f8ee387bca1a/22d573aead754b80abca18ec71872fb7.html
```

STEP: Configure history per field (OData V2)
DESCRIPTION: In the application's manifest.json, configure historySettings under sap.ui.generic.app → pages → "<PageId>" → component → settings → filterSettings. Use the fields map to set historyEnabled for specific OData property names. Possible values: "enabled", "disabled", "auto" (default). Replace <fieldname> with the OData property name.
LANGUAGE: JSON
CODE:
```json
"sap.ui.generic.app": {
    "pages": {
        "ListReport|RootEntity": {
            "component": {
                "settings": {
                    "filterSettings": {
                        "historySettings": {
                            "fields": {
                                "<fieldname>": {
                                    "historyEnabled": ("enabled" | "disabled" | "auto")
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}
```

STEP: Configure global/default history behavior (OData V2)
DESCRIPTION: Use historySettings.historyEnabled at the filterSettings level to apply a default behavior to all fields or those not explicitly listed. Valid values: "enabled", "disabled", "auto" (default). Place this under the same manifest.json path shown for OData V2 pages.
LANGUAGE: JSON
CODE:
```json
"sap.ui.generic.app": {
    "pages": {
        "ListReport|RootEntity": {
            "component": {
                "settings": {
                    "filterSettings": {
                        "historySettings": {
                            "historyEnabled": (
                                "enabled" |
                                "disabled" |
                                "auto"
                            )
                        }
                    }
                }
            }
        }
    }
}
```

STEP: Configure history per field (OData V4)
DESCRIPTION: For SAP Fiori elements for OData V4, history is enabled by default. To disable history for specific properties, add historySettings under sap.fe in the manifest and set historyEnabled: false for each propertyPath you want to exclude.
LANGUAGE: JSON
CODE:
```json
"sap.fe": {
    "historySettings": {
        "fields": {
            "<propertyPath>": {
                "historyEnabled": false
            }
        }
    }
}
```

STEP: Security — prevent storing sensitive data
DESCRIPTION: To prevent storing potentially sensitive personal data in the history, add the annotation com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive to either:
- the property of the main entity set on which the value help is defined, or
- any ValueList parameter used by the field.

If either the property or any ValueList parameter is annotated with com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive, SAP Fiori elements will not store that field's values in history. Use this to ensure no potentially sensitive information is retained.
LANGUAGE: Annotation
CODE:
```text
Annotation to apply in OData metadata:
com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive
```

STEP: End-user history management and related docs
DESCRIPTION: End users can delete input history from the UI. For UI control behavior and additional information, see the Input History documentation and Configuring Filter Bars.
LANGUAGE: Links
CODE:
```text
Input History:
../10_More_About_Controls/input-history-152f84f.md

Configuring Filter Bars:
configuring-filter-bars-4bd7590.md
```
--------------------------------

**TITLE**: Enabling the Icon for Situation Handling

**INTRODUCTION**: Enable the Situation Handling icon in SAP Fiori elements (OData V4) list reports and object pages by annotating exactly one navigation target entity type with the SAPObjectNodeType = "BusinessSituation". This guide gives the required annotation snippet, verification steps, and UI placement notes for code-generation and service edits.

**TAGS**: fiori-elements-framework, situation-handling, OData V4, annotations, SAPObjectNodeType, SAP Fiori

**STEP**: 1 — Confirm OData V4 and Fiori elements usage

**DESCRIPTION**: Ensure the application is built with SAP Fiori elements for OData V4. The Situation Handling icon support is applicable only for OData V4 services consumed by Fiori elements apps.

**LANGUAGE**: text

**CODE**:
```text
N/A - Confirm your service metadata and UI stack use OData V4 (EDMX v4 / Fiori elements for OData V4).
```

**STEP**: 2 — Add the SAPObjectNodeType annotation to the target entity type

**DESCRIPTION**: In your service metadata or annotations file (EDMX / annotations.xml), add the following annotation to the target entity type that represents business situations. The annotation must be present on the target entity type that a navigation property from the primary entity points to.

- Required annotation Term: com.sap.vocabularies.Common.v1.SAPObjectNodeType
- Required Record Property: Name = "BusinessSituation"
- Place this annotation on the entity type representing the situation nodes.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="com.sap.vocabularies.Common.v1.SAPObjectNodeType">
     <Record>
          <PropertyValue Property="Name" String="BusinessSituation" />
     </Record>
</Annotation>
```

**STEP**: 3 — Ensure exactly one navigation property points to the annotated entity type

**DESCRIPTION**: Your main entity type must contain exactly one NavigationProperty whose Type/Target is the entity type annotated with SAPObjectNodeType (BusinessSituation). Confirm there is only one such navigation property; otherwise the icon will not be shown.

- Action: Add or validate a single NavigationProperty in the main entity metadata that targets the annotated entity type.
- Use consistent names and namespaces in your EDMX/annotations.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Example navigation property in the main entity type (replace placeholders with your names) -->
<EntityType Name="MainEntityType">
    ...
    <NavigationProperty Name="BusinessSituationNav" Type="Namespace.BusinessSituationEntityType" />
    ...
</EntityType>
```

**STEP**: 4 — Verify UI behavior and image references

**DESCRIPTION**: After deploying the updated metadata/annotations, verify the Situation Handling icon appears:

- In List Reports: next to the first semantic key in a responsive table (or in a dedicated column for non-responsive table types).
- On Object Pages: icon shown next to the semantic key or in a dedicated UI location per Fiori elements behavior.

Reference images used in documentation (for visual verification):
- images/Situation_Handling_in_a_List_Report_8cbabf0.png
- images/Situation_Handling_on_an_Object_Page_3268202.png

**LANGUAGE**: text

**CODE**:
```text
N/A - Validate in the running Fiori elements app that the icon appears as described.
```
--------------------------------

**TITLE**: Enable List-Detail Mode (Flexible Column Layout) in SAP Fiori Elements

**INTRODUCTION**: Configure the flexible column layout (FCL) to display two columns (list-detail mode) by editing your app's manifest.json. This guide covers both SAP Fiori Elements for OData V2 and OData V4 settings, lists the available parameters and allowed values, and provides exact JSON snippets to place in your manifest.

**TAGS**: fiori-elements-framework, flexible-column-layout, FCL, list-detail, manifest.json, OData V2, OData V4, SAP Fiori

STEP: 1 — Configure List-Detail Mode for SAP Fiori Elements (OData V2)

DESCRIPTION: Edit the app manifest.json under the "sap.ui.generic.app" -> "settings" -> "flexibleColumnLayout" entry. Add or update the parameters below to start the FCL with two columns, limit the maximum number of columns, and configure behavior after deleting an object. Place this block in your manifest.json (project root: manifest.json).

Parameters and allowed values:
- initialColumnsCount: integer — Use to start with two columns. Allowed values: 1 or 2.
- maxColumnsCount: integer — Max number of columns displayed. Allowed values: 2 or 3. If you have three views and set to 2, the third view opens full-screen.
- displayNextObjectAfterDelete: boolean — If true, after deleting a list/main object the next object is displayed. If false, the column is closed. Note: this does not apply when deleting sub-objects within an object page.

LANGUAGE: JSON

CODE:
```json
"sap.ui.generic.app": {
    "_version": "1.1.0",
    "settings": {
        "flexibleColumnLayout": {
            "defaultTwoColumnLayoutType": "TwoColumnsMidExpanded",
            "defaultThreeColumnLayoutType": "ThreeColumnsMidExpanded",
            "initialColumnsCount": 2,
            "maxColumnsCount" : 2,
            "displayNextObjectAfterDelete": true
        }
    },
    "pages": [
```

STEP: 2 — Configure List-Detail Mode for SAP Fiori Elements (OData V4)

DESCRIPTION: For OData V4 apps, edit the manifest.json routing configuration. Set the "flexibleColumnLayout" properties under "routing" -> "config". Use limitFCLToTwoColumns to restrict the FCL to two columns. Place this block in your manifest.json (project root: manifest.json).

Parameter and allowed values:
- limitFCLToTwoColumns: boolean — If true, FCL is limited to two columns and a third view opens full-screen. Allowed values: true or false.
- defaultTwoColumnLayoutType / defaultThreeColumnLayoutType: layout presets (examples provided). These define initial expansion state for two- and three-column layouts.

LANGUAGE: JSON

CODE:
```json
"routing": {
    "config": {
        "routerClass": "sap.f.routing.Router",
        "flexibleColumnLayout": {
            "defaultTwoColumnLayoutType": "TwoColumnsMidExpanded",
            "defaultThreeColumnLayoutType": "ThreeColumnsMidExpanded",
            "limitFCLToTwoColumns": true
        }
    },
}
```
--------------------------------

**TITLE**: Enabling and Configuring the Related Apps Button (Object Page)

**INTRODUCTION**: This document gives step-by-step actionable configuration and annotation examples to enable and customize the Related Apps button on SAP Fiori elements Object Pages (OData V2 and V4). It includes how to enable the button, hide specific semantic-object actions, add additional semantic objects or actions from the manifest, override settings at runtime, and map keys between source and target apps.

**TAGS**: fiori-elements, related-apps, manifest.json, semantic-object, semanticObjectAction, SemanticObjectUnavailableActions, semanticObjectMapping, ODataV2, ODataV4, annotations, CDS, XML, ABAP

STEP: 1 — Enable the Related Apps button (OData V2)
DESCRIPTION: Set showRelatedApps to true in the object page component definition inside manifest.json. This displays the Related Apps button on the object page header and lets the app call the FLP GetLinks API to resolve navigation targets for the current semantic object.
LANGUAGE: JSON
CODE:
```json
{
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "SEPMRA_C_PD_Product",
        "component": {
          "name": "sap.suite.ui.generic.template.ListReport",
          "list": true
        },
        "pages": [
          {
            "entitySet": "SEPMRA_C_PD_Product",
            "component": {
              "name": "sap.suite.ui.generic.template.ObjectPage",
              "settings": {
                "showRelatedApps": true
              }
            },
            "pages": [
              {
                "navigationProperty": "to_ProductText",
                "entitySet": "SEPMRA_C_PD_ProductText",
                "component": {
                  "name": "sap.suite.ui.generic.template.ObjectPage"
                }
              }
            ]
          }
        ]
      }
    ]
  }
}
```

STEP: 2 — Enable the Related Apps button (OData V4)
DESCRIPTION: For OData V4-based Fiori elements apps, set showRelatedApps under the object page component options.settings in manifest.json component definition.
LANGUAGE: JSON
CODE:
```json
"SalesOrderManageObjectPage":{
   "type": "Component",
   "id": "SalesOrderManageObjectPage",
   "name": "sap.fe.templates.ObjectPage",
   "options":{
      "settings":{
         ...
         ...
         "showRelatedApps": true,
         ...
         ...
      }
   }
}
```

STEP: 3 — Hide specific semantic-object actions using annotations (XML)
DESCRIPTION: Use the Common.SemanticObjectUnavailableActions annotation on the service/entity to list action names to exclude in the context of this Fiori elements app (XML annotations). Example hides the action displayFactSheet.
LANGUAGE: XML
CODE:
```xml
<Annotations Target="SalesOrderService.SalesOrderManage"> 
     …
     <Annotation Term="Common.SemanticObjectUnavailableActions"> 
          <Collection> 
               <String>displayFactSheet</String> 
          </Collection> 
     </Annotation>
     <Annotation Term="Common.SemanticObject" String="SalesOrder"/>
     …
</Annotations>
```

STEP: 4 — Hide specific semantic-object actions using CAP CDS
DESCRIPTION: For CAP CDS services, define the Common.SemanticObjectUnavailableActions property in the CDS model (local XML annotation alternative if ABAP CDS not available).
LANGUAGE: CDS
CODE:
```
Common.SemanticObjectUnavailableActions : ['displayFactSheet']
```

STEP: 5 — Add additional Related Apps via manifest (OData V2: relatedAppsSettings)
DESCRIPTION: Configure relatedAppsSettings under the ObjectPage component settings to add extra semantic objects shown under Related Apps in addition to links resolved from the FLP for the current app semantic object.
LANGUAGE: JSON
CODE:
```
{
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "SEPMRA_C_PD_Product",
        "component": {
          "name": "sap.suite.ui.generic.template.ListReport",
          "list": true
        },
        "pages": [
          {
            "entitySet": "SEPMRA_C_PD_Product",
            "component": {
              "name": "sap.suite.ui.generic.template.ObjectPage",
              "settings": {
                "showRelatedApps": true,
                "relatedAppsSettings": {
                  "0": {
                    "semanticObject": "EPMProduct"
                  }
                }
              }
            },
            "pages": [
              {
                "navigationProperty": "to_ProductText",
                "entitySet": "SEPMRA_C_PD_ProductText",
                "component": {
                  "name": "sap.suite.ui.generic.template.ObjectPage"
                }
              }
            ]
          }
        ]
      }
    ]
  }
}
```

STEP: 6 — Add semantic objects with explicit actions (relatedAppsSettings: semanticObjectAction)
DESCRIPTION: If you need precise control which actions (links) for a semantic object are considered, declare semanticObjectAction per semantic object in relatedAppsSettings. If semanticObjectAction is omitted, all actions except those listed in SemanticObjectUnavailableActions are shown. If semanticObjectAction is an empty object ({}), no actions from that semantic object are considered.
LANGUAGE: JSON
CODE:
```
{
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "SEPMRA_C_PD_Product",
        "component": {
          "name": "sap.suite.ui.generic.template.ListReport"
        },
        "pages": [
          {
            "entitySet": "SEPMRA_C_PD_Product",
            "component": {
              "name": "sap.suite.ui.generic.template.ObjectPage",
              "relatedAppsSettings": {                
                "EPMProduct": {
                  "semanticObject": "EPMProduct"
                },
                "STTA_WD20": {
                  "semanticObject": "STTA_WD20",
                  "semanticObjectAction": {
                    "0": {
                      "action": "Multi_View"
                    },
                    "1": {
                      "action": "Tree_Table"
                    }
                  }
                }
              }
            }
          }
        ]
      }
    ]
  }
}
```

STEP: 7 — Override related app settings at runtime (extension API)
DESCRIPTION: Use the modifyRelatedAppsSettings extension API (declare this function in your manifest.json/custom controller extension) to change related app configuration dynamically based on the deployed semantic environment (current semantic object or entity). Return the new/merged oRelatedAppSetting object.
LANGUAGE: JavaScript
CODE:
```
modifyRelatedAppsSettings: function (oRelatedAppSetting, sCurrentSemanticObject, sEntityTypeName) {
    if (sCurrentSemanticObject === "EPMProduct") {
        oRelatedAppSetting = {
            ...oRelatedAppSetting,
            // adding additional semantic object and action to the existing related app settings.
            "EPMSalesOrder": {
                semanticObject: "EPMSalesOrder",
                semanticObjectAction: {
                    0: {
                        action: "display"
                    }
                }
			}
        }
    }
    return oRelatedAppSetting;
}
```

STEP: 8 — Add additional related semantic objects and mappings (OData V4: additionalSemanticObjects)
DESCRIPTION: For OData V4, add additionalSemanticObjects under the object page component options.settings. For each additional semantic object, you can:
- specify unavailableActions (list of action names to exclude)
- specify mapping as key-value pairs mapping local field technical names to target app field names
- or use allowedActions to explicitly list which actions to show (allowedActions takes precedence over unavailableActions; if allowedActions is empty, no links are shown)
LANGUAGE: JSON
CODE:
```json
"SalesOrderManageObjectPage": {
    "type": "Component",
    "id": "SalesOrderManageObjectPage",
    "name": "sap.fe.templates.ObjectPage",
    "options": {
        "settings": {
            "contextPath": "/SalesOrderManage",
            "showRelatedApps": true,
            "additionalSemanticObjects": {
                "ProductCollection": {
                    unavailableActions: ["displayFactSheet", "reorderProduct"],
                    mapping: {
                        "SoldToParty": "Client",
                         .
                         .
                    }
                },
                "Customer": {
                    "unavailableActions": ["manage"],
                    "mapping": {
                        "SoldToParty": "Customer"
                    }
                }
            },
            ....
            ....
        }
    }
}
```

STEP: 9 — Use allowedActions to explicitly list links (OData V4)
DESCRIPTION: Use allowedActions inside additionalSemanticObjects to define the exact set of semantic-object actions to show for that semantic object. When allowedActions is present, unavailableActions is ignored. If allowedActions is present but empty, no links are shown for that semantic object.
LANGUAGE: JSON
CODE:
```json
"SalesOrderManageObjectPage": {
    "type": "Component",
    "id": "SalesOrderManageObjectPage",
    "name": "sap.fe.templates.ObjectPage",
    "options": {
        "settings": {
            "contextPath": "/SalesOrderManage",
            "showRelatedApps": true,
            "additionalSemanticObjects": {
                "SalesOrder": {
                    allowedActions: ["create", "managev2"],
                "ProductCollection": {
                    allowedActions: ["displayFactSheet"],
                    mapping: {
                        "SoldToParty": "Client",
                         .
                         .
                    }
                },
            },
            ....
        }
    }
}
```

STEP: 10 — Map different technical field names between apps (SemanticObjectMapping annotations)
DESCRIPTION: If the local object page field names differ from the target app keys, define a semantic object mapping so FLP GetLinks can pass the correct key names to target apps. Use Common.SemanticObject and Common.SemanticObjectMapping annotations (XML, ABAP CDS, or CAP CDS).
LANGUAGE: XML
CODE:
```xml
<Annotations Target="com.c_salesordermanage_sd.SalesOrderManage">
    <Annotation Term="Common.SemanticObject" String="SalesOrder"/>
    <Annotation Term="Common.SemanticObjectMapping">
        <Collection>
            <Record Type="Common.SemanticObjectMappingType">
                <PropertyValue Property="LocalProperty" PropertyPath="SoldToParty"/>
                <PropertyValue Property="SemanticObjectProperty" String="Customer"/>
            </Record>
        </Collection>
    </Annotation>
</Annotations>
```

LANGUAGE: ABAP CDS
CODE:
```xml
annotate view SalesOrderManage with {
   @Consumption.semanticObject: 'SalesOrder'
   @Consumption.semanticObjectMapping.additionalBinding: [{element: 'Customer', localElement: 'SoldToParty'}]
   Customer
}
```

LANGUAGE: CDS
CODE:
```xml
entity SalesOrderManage
@(
  Common: {
    SemanticObject: 'SalesOrder',
    SemanticObjectMapping: [
      {
        LocalProperty: SoldToParty,
        SemanticObjectProperty: 'Customer'
      }
    ]
  }
)
```

STEP: 11 — Key behaviors and implementation notes
DESCRIPTION: Keep these operational rules to ensure correct behavior:
- showRelatedApps must be true for any manifest-based additional semantic objects/links to be considered.
- When FLP GetLinks is called, Fiori elements passes all semantic keys if available; otherwise it passes all technical keys.
- If semanticObjectAction list is defined in manifest for a semantic object, only listed actions are shown and SemanticObjectUnavailableActions annotation is ignored for that semantic object.
- If semanticObjectAction is defined as an empty object ({}), no actions from that semantic object are considered.
- When allowedActions is configured for an additional semantic object, unavailableActions for that semantic object is ignored.
- If allowedActions is present but empty, no links are shown for that semantic object.
--------------------------------

**TITLE**: Enabling Search in Fiori Elements List Report (OData V2 & V4)

**INTRODUCTION**: Instructions and code examples to enable or disable the List Report Search field in SAP Fiori elements for both OData V2 and OData V4. Includes exact metadata and annotation snippets for metadata XML, XML annotations, ABAP CDS and CAP CDS, plus restrictions and implementation notes.

**TAGS**: fiori-elements-framework, odata-v2, odata-v4, search, metadata, annotations, cds, cap, rap

**STEP**: 1 — Enable Search in OData V2 (Metadata XML)

**DESCRIPTION**: To enable the Search function for a List Report when using OData V2, set the sap:searchable attribute to true on the root EntitySet in your service metadata XML. The search input is restricted to 1000 characters. Update the service metadata XML (EDMX) where the EntitySet is defined.

Include the image reference if you maintain documentation assets: images/ListReport_Search_8f1dc18.png

**LANGUAGE**: XML

**CODE**:
```xml
<EntitySet Name="SEPMRA_C_PD_Product"EntityType="SEPMRA_PROD_MAN.SEPMRA_C_PD_ProductType" sap:searchable="true" sap:content-version="1"/>
```

**STEP**: 2 — Default Search Behavior and Disabling Search in OData V4 (Annotations & CDS)

**DESCRIPTION**: In OData V4 the Search field is enabled by default. If the backing entity does not support search, explicitly disable it using the SearchRestrictions annotation (Searchable = false). Use one of the following approaches depending on your project environment: XML Annotation in the service metadata, ABAP CDS annotation, or CAP CDS annotation.

- Edit service metadata annotations or CDS artifacts to include the SearchRestrictions annotation.
- If disabling, ensure the annotation target references the correct entity (example uses SAP__self.Container/SalesOrder).

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="SAP__self.Container/SalesOrder">
   <Annotation Term="SAP__capabilities.SearchRestrictions">
      <Record>
         <PropertyValue Property="Searchable" Bool="false" />
      </Record>
   </Annotation>
</Annotations>
```

**LANGUAGE**: ABAP CDS

**CODE**:
```abap
@Search.searchable: false
annotate view ZC_SalesOrder with { };
```

**LANGUAGE**: CDS

**CODE**:
```cds
annotate SalesOrder with @Capabilities: {SearchRestrictions: {Searchable: false}};
```

**STEP**: 3 — Search Request Behavior and Link to CAP Docs

**DESCRIPTION**: In OData V4, the user-entered search string is transmitted to the back end using the $search query parameter. The back end must interpret $search to return relevant results. See the CAP documentation for guidance on implementing search support in services.

**LANGUAGE**: Plain

**CODE**:
```text
Reference: https://cap.cloud.sap/docs/guides/providing-services#cds-search
```

**STEP**: 4 — Restrictions and Analytical Table Note

**DESCRIPTION**: Important restrictions and references:
- Search input is limited to 1000 characters.
- The following special characters are ignored because they cause errors in RAP and CAP back ends:
  - "
  - (
  - )
  - ;
- For enabling/disabling Search specifically for analytical tables, see the "Setting the Table Type" section in your documentation.

**LANGUAGE**: Plain

**CODE**:
```text
Special characters ignored: "  (  )  ;

See also:
- Setting the Table Type: setting-the-table-type-7f844f1.md
- Adapting the Filter Bar: adapting-the-filter-bar-609c39a.md
```
--------------------------------

**TITLE**: Enabling File Upload for SAP Fiori elements Table (OData V4)

**INTRODUCTION**: Configure the Fiori elements Table building block to support file upload (drag & drop or Upload button), download (click filename), and delete (selection + Delete or context menu). Uploading and deleting are available only in edit mode. This guide lists the required annotations, security controls, and configuration entry points (annotations, manifest.json, CAP plugin).

**TAGS**: fiori-elements-framework, upload, odata-v4, UI.LineItem, UI.MediaResource, Edm.Stream, Core.AcceptableMediaTypes, manifest.json, CAP, annotations, security

STEP: 1 — Prerequisites: Entity type and annotations
DESCRIPTION: Ensure the entity type used for the table contains a stream (Edm.Stream) property and that UI.LineItem and UI.MediaResource annotations reference it. The table uses the stream property to store uploaded files and to enable download/delete actions.
LANGUAGE: XML
CODE:
```xml
<Annotations Target="Namespace.EntityType">
    <Annotation Term="UI.LineItem">
        <Collection>
            <Record Type="UI.DataField">
                <PropertyValue Property="Value" Path="PropertyOfEdmStreamType"/>
                <PropertyValue Property="Label" String="File"/>
            </Record>
        </Collection>
    </Annotation>
    <Annotation Term="UI.MediaResource">
        <Record Type="UI.MediaResourceType">
            <PropertyValue Property="Stream" Path="file"/>
        </Record>
    </Annotation>
</Annotations>
```

STEP: 2 — ABAP CDS annotations
DESCRIPTION: No ABAP CDS sample is provided in the source documentation. If using ABAP CDS, supply equivalent XML annotations or use the local XML annotation approach described above.
LANGUAGE: Text
CODE:
```
No ABAP CDS annotation sample is available. Use the XML annotation example from Step 1.
```

STEP: 3 — CAP (SAP Cloud Application Programming) CDS annotations / Attachments plug-in
DESCRIPTION: For CAP projects, use the Attachments plug-in to add stream support to an entity. The plug-in wires necessary service-side capabilities to store and serve attachments used by the Table upload building block.
LANGUAGE: Text
CODE:
```
Use the CAP Attachments plug-in. See: https://cap.cloud.sap/docs/plugins/#attachments
```

STEP: 4 — Add additional columns and actions to the table
DESCRIPTION: Add columns or actions either by enhancing the UI.LineItem annotation (add Records) or by defining custom columns/actions in manifest.json. This is how to include extra metadata columns or custom operations alongside the upload file column.
LANGUAGE: Text
CODE:
```
- Option A: Add UI.LineItem Records to reference additional properties (see Step 1 pattern).
- Option B: Add custom columns/actions in manifest.json (see "Defining Line Items").
Reference: Defining Line Items - defining-line-items-f0e1e17.md
```

STEP: 5 — Control Upload button visibility and enablement
DESCRIPTION: The Upload button behaves like a Create button (upload creates a new instance). Control its visibility/enablement using the same mechanisms you use for Create (annotations, manifest.json actions, or semantic restrictions). Apply conditions the same way as you would for Create.
LANGUAGE: Text
CODE:
```
Control Upload using the same patterns as Create (visibility/enablement).
Reference: Adding Actions to Tables - adding-actions-to-tables-b623e0b.md
```

STEP: 6 — Restrict allowed file types and size
DESCRIPTION: Use annotations and back-end validation to restrict media types and maximum size. Declare acceptable MIME types using @Core.AcceptableMediaTypes on the media/stream property and use MaxLength for file-size limits where applicable. Ensure back-end enforces size and MIME restrictions.
LANGUAGE: Text
CODE:
```
- Annotation: @Core.AcceptableMediaTypes on the stream property to list allowed MIME types.
- Annotation: MaxLength can be used to express maximum allowed size.
Reference: Enabling Stream Support - enabling-stream-support-b236d32.md
```

STEP: 7 — Mandatory server-side security and validation
DESCRIPTION: Implement server-side protections to avoid security risks (malicious content). The back end must enforce virus scanning, MIME-type checks, maximum file size, file validation, and data sanitization. Always combine client-side annotation constraints with robust server-side validation.
LANGUAGE: Text
CODE:
```
Required server-side measures:
- Define @Core.AcceptableMediaTypes for allowed MIME types.
- Perform virus scanning on uploaded files.
- Enforce maximum file size limits.
- Validate MIME types and file content.
- Sanitize data and perform file validation before processing/storing.
Reference: Security Configuration - security-configuration-ba0484b.md
```

STEP: 8 — Live example and testing
DESCRIPTION: Inspect a working implementation and UI behavior in the SAP Fiori development portal to validate configuration and UX.
LANGUAGE: Text
CODE:
```
Live example: Building Blocks - Table - Upload Table
https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/buildingBlocks/table/tableUpload
```
--------------------------------

**TITLE**: Enable or Disable Variant Management on the Object Page (Fiori Elements)

**INTRODUCTION**: Action-oriented guidance and manifest.json snippets to enable or disable variant management for tables and charts on the Object Page in SAP Fiori elements. Includes separate instructions for OData V2 and OData V4, plus personalization and delivery notes. Use these manifest edits in your application manifest.json to change behavior.

**TAGS**: fiori-elements, variant-management, manifest.json, object-page, ODataV2, ODataV4, personalization, SAPUI5

STEP: 1 — Where to change: manifest.json (component-level or section-level)
DESCRIPTION: Edit your application manifest.json to change variant management settings for the Object Page. Use component-level settings to affect all tables/charts, or section-level settings to target a specific table or chart within the Object Page sections.
LANGUAGE: JSON
CODE:
```json
// Edit manifest.json: component -> settings OR component -> settings -> sections
```

STEP: 2 — OData V2: Disable variant management globally (all tables and charts)
DESCRIPTION: Disable variant management for all tables and charts on the Object Page in OData V2 by setting tableSettings.variantManagement and chartSettings.variantManagement to false at the component settings level in manifest.json.
LANGUAGE: JSON
CODE:
```json
"component": {
	"name": "sap.suite.ui.generic.template.ObjectPage",
	"settings": {
		"tableSettings": {
			"variantManagement": false
		},
		"chartSettings": {
			"variantManagement": false
		}
	}
}
```

STEP: 3 — OData V2: Disable variant management for a specific table (section-level)
DESCRIPTION: Disable variant management for a specific table on the Object Page by targeting the section ID (section key) and adding tableSettings.variantManagement = false under that section in manifest.json.
LANGUAGE: JSON
CODE:
```json
"component": {
	"name": "sap.suite.ui.generic.template.ObjectPage",
	"settings": {
		"sections": {
			"to_ProductText::com.sap.vocabularies.UI.v1.LineItem ": {
				"tableSettings": {
					"variantManagement": false
				}
			}
		}
	}
}
```

STEP: 4 — OData V2: Disable variant management for a specific chart (section-level)
DESCRIPTION: Disable variant management for a specific chart on the Object Page by targeting the section ID and adding chartSettings.variantManagement = false under that section in manifest.json.
LANGUAGE: JSON
CODE:
```json
"component": {
	"name": "sap.suite.ui.generic.template.ObjectPage",
	"settings": {
		"sections": {
			"to_ProductSalesData::com.sap.vocabularies.UI.v1.Chart ": {
				"chartSettings": {
					"variantManagement": false
				}
			}
		}
	}
}
```

STEP: 5 — OData V2: Notes and default behavior
DESCRIPTION: Important behavioral notes for OData V2:
- Variant management is enabled by default for tables and charts on the Object Page in SAP Fiori elements for OData V2.
- As of SAPUI5 1.108, variant management is enabled by default; do not explicitly set "variantManagement": "true".
- If you previously enabled variant management in the manifest before SAPUI5 1.108, you can keep those settings.
- When enabled, the selected variant is stored in the inner app state and restored when navigating objects.
LANGUAGE: JSON
CODE:
```json
// Notes: no code change required; follow guidance above when editing manifest.json
```

STEP: 6 — OData V4: Enable variant management on the Object Page (set to "Control")
DESCRIPTION: In OData V4, variant management is disabled by default. Enable it by setting "variantManagement": "Control" in the target/options/settings area of manifest.json (example target: SalesOrderManageObjectPage). You can also define controlConfiguration for table personalization per LineItem. Apply this exact manifest snippet under the appropriate routing/targets/options -> settings for the Object Page.
LANGUAGE: JSON
CODE:
```json
"SalesOrderManageObjectPage": {
    "options": {
        "settings": {
            "variantManagement": "Control",                        
            "controlConfiguration": {
                "_Item/@com.sap.vocabularies.UI.v1.LineItem": {
                    "tableSettings": {
                        "personalization": {
                            "column": true,
                            "sort" : false
                        }
                    }
                },
                "_Partner/@com.sap.vocabularies.UI.v1.LineItem": {
                    "tableSettings": {
                        "personalization":
                            "column": true,
                            "sort" : false
                        }
                    }
                }
            }
        }
    }
}
```

STEP: 7 — OData V4: Disable variant management (set to "None") and personalization rules
DESCRIPTION: To disable variant management after it has been enabled in OData V4, set "variantManagement" to "None" in the same target/options/settings area. Control personalization (column, sort, etc.) is configured per table via controlConfiguration.tableSettings.personalization. Personalization is independent from variant management; you cannot enable variant management if personalization for that table is turned off.
Also: Do not change variant management settings after delivering the application — changing these settings post-delivery causes end users to lose their personalization settings.
LANGUAGE: JSON
CODE:
```json
// To disable variant management in OData V4:
"options": {
  "settings": {
    "variantManagement": "None"
  }
}

// Personalization example per table (must be enabled for variant management to work)
"controlConfiguration": {
  "_Item/@com.sap.vocabularies.UI.v1.LineItem": {
    "tableSettings": {
      "personalization": {
        "column": true,
        "sort": false
      }
    }
  }
}
```

STEP: 8 — Related resource
DESCRIPTION: Reference link for creating a List Report without variant management (review for related patterns).
LANGUAGE: JSON
CODE:
```json
// Related doc: creating-a-list-report-without-variant-management-094fe8c.md
```
--------------------------------

**TITLE**: Enhancing ValueList Annotations with PresentationVariantQualifier to Enable Visual Filters

**INTRODUCTION**: Add a PresentationVariantQualifier to ValueList annotations so the ValueList (value help) is considered for visual filter rendering. The PresentationVariantQualifier must reference a UI.PresentationVariant (on the value help entity) that contains a UI.Chart annotation. This guide provides XML, ABAP CDS, and CAP CDS examples and the runtime behavior rules to implement and validate visual filters.

**TAGS**: fiori-elements-framework, ValueList, visual-filter, UI.PresentationVariant, UI.Chart, annotations, ABAP CDS, CAP CDS, XML

STEP: 1 - XML ValueList: Add PresentationVariantQualifier

DESCRIPTION: Add or enhance the Common.ValueList annotation for the filter field to include PresentationVariantQualifier pointing to the UI.PresentationVariant qualifier that defines UI.Chart on the value help entity set. The PresentationVariantQualifier always refers to the value-help entity (CollectionPath), not the main entity set. Use CollectionPath to point to the value help entity set (for OData V4 ensure it points to the result entity set).

LANGUAGE: XML

CODE:
```XML
<Annotations Target="Z0020_CDS.Z0020Type/CountryID">
<Annotation Term="Common.ValueList" Qualifier="0020_Country">
    <Record>
        <PropertyValue Property="Label" String="Country"/>
        <PropertyValue Property="CollectionPath" String="Z0022"/>
        <PropertyValue Bool="false" Property="SearchSupported"/>
        <PropertyValue Property="Parameters">
            <Collection>
                <Record Type="Common.ValueListParameterOut">
                    <PropertyValue Property="LocalDataProperty" PropertyPath="CountryID"/>
                    <PropertyValue Property="ValueListProperty" String="CountryIdentifier"/>
                </Record>
                <Record Type="Common.ValueListParameterIn">
                    <PropertyValue Property="LocalDataProperty" PropertyPath="RegionID"/>
                    <PropertyValue Property="ValueListProperty" String="RegionIdentifier"/>
                </Record>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="PresentationVariantQualifier" String="Country_Chart"/>
    </Record>
</Annotation>
</Annotations>
```

STEP: 2 - ABAP CDS: Define presentationVariantQualifier in @Consumption.valueHelpDefinition

DESCRIPTION: In ABAP CDS, include presentationVariantQualifier in the valueHelpDefinition entry. Note: ABAP CDS does not support separate Common.ValueListParameterIn and ...Out types — only the InOut equivalent (use combined mapping). The PresentationVariantQualifier value must reference a UI.PresentationVariant qualifier defined on the value help entity (Z0022 in this example).

LANGUAGE: ABAP CDS

CODE:
```ABAP CDS
@Consumption.valueHelpDefinition:
        [{
          entity :{
            name    : 'Z0022', //(collectionPath)
            element : 'CountryIdentifier'   // (valuelistproperty in parameterInOut)
          },
          label  : 'Country',   // valuelist label
          qualifier: '0020_Country',  //(valuelist qualifier)
           presentationVariantQualifier: 'Country_Chart'  // value list presentvariantqualifier
          }]
CountryID
```

STEP: 3 - CAP CDS: Add ValueList with PresentationVariantQualifier

DESCRIPTION: In CAP CDS (annotations syntax), add the Common.ValueList annotation with PresentationVariantQualifier. Ensure CollectionPath points to the value help entity (result entity set for OData V4). The example shows Parameters with $Type entries for IN and OUT mapping. Keep the PresentationVariantQualifier referencing the UI.PresentationVariant qualifier defined on the value help entity.

LANGUAGE: CAP CDS

CODE:
```CAP CDS
CountryID @(
     Common         : {
     ValueList     #0020_Country                  : {
          Label          : 'Country',
          CollectionPath : 'Z0022',
          SearchSupported: false,
          Parameters     : [
          {
               $Type             : 'Common. ValueListParameterOut,
               LocalDataProperty : CountryID,
               ValueListProperty : 'CountryIdentifier'
          },
          {
               $Type             : 'Common.ValueListParameterIn',
               LocalDataProperty : RegionID,
               ValueListProperty : 'RegionIdentifier'
          }
          ],
          PresentationVariantQualifier: ' Country_Chart '
     }
     }
);
```

STEP: 4 - OData V4 CollectionPath requirement

DESCRIPTION: For SAP Fiori elements with OData V4, ensure the ValueList annotation's CollectionPath points to the result entity set (the actual entity set returned by the value help service) as described in "Supporting Parameterized Entities" in Configuring Filter Bars. See: configuring-filter-bars-4bd7590.md#loio4bd7590569c74c61a0124c6e370030f6__suppprting_parameterized_entities_subsection

LANGUAGE: Plain Text

CODE:
```Plain Text
Note: In OData V4, CollectionPath must point to the result entity set (see Configuring Filter Bars - Supporting Parameterized Entities).
```

STEP: 5 - Runtime behavior rules and mapping notes

DESCRIPTION: Use these rules to implement, test, and debug visual filter interactions between value help entity sets and the main entity set:

- PresentationVariantQualifier on a ValueList makes the value list considered for visual filter rendering; the referenced UI.PresentationVariant must include a UI.Chart.
- The PresentationVariantQualifier refers to the value-help entity set (CollectionPath) — not to the main entity set.
- ABAP CDS: you cannot model Common.ValueListParameterIn and Common.ValueListParameterOut separately — only an InOut equivalent is supported.
- If a filter field has a ValueList annotation, the IN mapping defined elsewhere for the same field is ignored for visual filters; the ignored IN mapping still applies to the main filter query and appears in the visual filter's Selected button.
- Mandatory filter field values are passed automatically to visual filters only if the value-help entity of the visual filter is the same as the main entity; otherwise explicitly define IN mappings so values are passed.
- If an IN mapping points to a field in the value-help entity that is marked with UI.Hidden, the ALP ignores the incoming value for that visual filter.

LANGUAGE: Plain Text

CODE:
```Plain Text
Runtime mapping rules:
- PresentationVariantQualifier -> UI.PresentationVariant with UI.Chart on value-help entity.
- ValueList takes precedence over IN mapping for visual filters; IN mapping still affects main filter query.
- Mandatory filters auto-pass only when value-help entity == main entity; otherwise define IN mappings explicitly.
- UI.Hidden on value-help field causes ALP to ignore incoming mapped values for visual filters.
```

STEP: 6 - Example interaction scenarios to validate visual filter behavior

DESCRIPTION: Validate visual filters using the following test scenarios with value help entity sets Z0021 (Region), Z0022 (Country), Z0023 (Plant). These scenarios assume value lists for RegionID, CountryID, PlantID each show top 3 bars (RegionCode, CountryIdentifier, PlantNumber respectively) and mappings are declared as in In/Out Mappings documentation.

LANGUAGE: Plain Text

CODE:
```Plain Text
Scenario 1: Select a bar in Region chart
- Action: Select RegionID = <RegionCode from Z0021>.
- Result: ALP passes RegionID to main entity filter query, refreshes main content and other charts.
- Country and Plant charts refresh (RegionID is IN parameter for CountryID and PlantID value-lists) showing top 3 for selected region.

Scenario 2: Select Region chart, then Country chart
- Action: After Scenario 1, select CountryID = <CountryIdentifier from Z0022>.
- Result: ALP passes CountryID to main query, refreshes main content and Plant chart.
- Plant chart shows plants within selected region and country (CountryID is IN parameter only for PlantID).

Scenario 3: Select a bar in Plant chart
- Action: Select PlantID = <PlantNumber from Z0023>.
- Result: ALP passes PlantID to main query and refreshes main content and Region chart.
- Only Region chart refreshes (PlantID is IN parameter only for RegionID) and displays top three countries for the chosen plant.
```

STEP: 7 - Related links

DESCRIPTION: Reference documentation for configuring the visual filter bar and choosing filter modes.

LANGUAGE: Plain Text

CODE:
```Plain Text
Related Information:
- Configuring the Visual Filter Bar: configuring-the-visual-filter-bar-33f3d80.md
- Choosing Filter Modes: choosing-filter-modes-00c19e1.md
```
--------------------------------

**TITLE**: SAP Fiori elements (OData V4) — Event-Driven Side Effects (Annotations & Manifest)

**INTRODUCTION**: Action-oriented reference for implementing server-triggered side effects in SAP Fiori elements for OData V4. Shows required UI annotations to declare side-effect events, how to refresh specific properties or entire entities, how to configure the WebSocket connection via annotations, and how to set interaction types in manifest.json (global and per-event).

**TAGS**: fiori-elements-framework, OData V4, side-effects, annotations, WebSocket, manifest.json

**STEP**: 1 — Annotate a side-effect event for an entity type

**DESCRIPTION**: Add a SideEffects annotation on the entity type that declares the event name(s) sent from the server and the target properties that should be refreshed when the event is received. The server sends the event name and the entity key via WebSocket; the client refreshes the specified properties if the entity is currently displayed.

- Use Term: com.sap.vocabularies.UI.v1.SideEffects
- Populate SourceEvents with the event name(s)
- Populate TargetProperties with the properties to refresh

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="MyService.MyEntityType"> 
     <Annotation Term="com.sap.vocabularies.UI.v1.SideEffects"> 
          <Record Type="SAP__common.SideEffectsType"> 
               <PropertyValue Property="SourceEvents"> 
                    <Collection> 
                         <String>MyEventName</String> 
                    </Collection> 
               </PropertyValue> 
               <PropertyValue Property="TargetProperties"> 
                    <Collection> 
                         <String>Property1</String> 
                         <String>Property2</String> 
                    </Collection> 
               </PropertyValue> 
          </Record> 
     </Annotation> 
</Annotations> 
```

**STEP**: 2 — Refresh entire table / entity set in a list report (use absolute TargetEntities)

**DESCRIPTION**: For use cases where the list report table must be completely refreshed when the event occurs, declare TargetEntities with an absolute NavigationPropertyPath. Use the entity container path starting with “/” to point to the entity set to be reloaded.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="MyService.MyEntityType">
    <Annotation Term="com.sap.vocabularies.UI.v1.SideEffects">
        <Record Type="Common.SideEffectsType">
            <PropertyValue Property="SourceEvents">
                <Collection>
                        <String>MyEventName</String>
                </Collection>
            </PropertyValue>
            <PropertyValue Property="TargetEntities">
                <Collection>
                    <NavigationPropertyPath>/MyService.EntityContainer/MyEntity</NavigationPropertyPath>
                </Collection>
            </PropertyValue>
        </Record>
    </Annotation>
</Annotations>
```

**STEP**: 3 — Configure WebSocket connection via annotations on the service/container

**DESCRIPTION**: Provide the WebSocket base URL and optional channel qualifier through annotations on the Container (target: SAP__self.Container). The client uses these values to establish the WebSocket connection and listen for server-side events.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="SAP__self.Container"> 
     <Annotation Term="SAP__common.WebSocketBaseURL" String="testEndpoint" /> 
     <Annotation Term="SAP__common.WebSocketChannel" Qualifier="sideEffects" String="cinema" /> 
</Annotations>
```

**STEP**: 4 — Interaction types: meanings and global default in manifest.json

**DESCRIPTION**: Interaction type controls how the UI handles data refreshes triggered by side-effect events. Supported values:
- "Notification": Automatically refresh data and show a notification (default).
- "Confirmation": Show a confirmation dialog; user decides whether to refresh.
- "None": Automatically refresh without UI interaction.

Set a global interaction type for all side-effect events in manifest.json under sap.fe.app.sideEffectsEventsInteractionType.

**LANGUAGE**: JSON

**CODE**:
```json
{ 
     "sap.fe": { 
          "app": { 
               "sideEffectsEventsInteractionType": "Confirmation" 
          }
     } 
}
```

**STEP**: 5 — Define per-event interaction types in manifest.json (default + event mapping)

**DESCRIPTION**: Override the global default by providing an object with "default" and an "events" map. The "default" value applies to events not listed in "events". Map specific event names to interaction types to control behavior per event.

**LANGUAGE**: JSON

**CODE**:
```json
{
    "sap.fe": {
        "app": {
            "sideEffectsEventsInteractionType": {
                "default": "None",
                "events": {
                    "myEventName": "Confirmation",
                    "myOtherEventName": "Notification"
                }
            }
        }
    }
}
```
--------------------------------

**TITLE**: Adding Custom Columns to a Grid Table in the List Report (SAP Fiori elements, OData V2)

**INTRODUCTION**: This guide shows how to add custom columns to a GridTable in a List Report application (SAP Fiori elements for OData V2) using a view extension fragment and manifest registration. It includes required customData entries (p13nData), column ordering via columnIndex, leadingProperty usage, fragment file path, and manifest extension point naming (including QuickVariantSelectionX per-tab variants).

**TAGS**: fiori-elements-framework, odata-v2, extensions, manifest.json, fragments, grid-table, list-report, p13nData, QuickVariantSelectionX

**STEP**: 1 — Create an XML fragment for the view extension

**DESCRIPTION**: Add an XML fragment that defines the custom columns. Place the fragment in your app project (example path: webapp/ext/fragments/ListReportGridTableColumns.fragment.xml). Use sap.ui.table:Column elements. Include p13nData in core:CustomData with keys: columnKey, columnIndex (for ordering), and leadingProperty (required if your column content binds to a property). The grid table will use columnIndex to position the column; set lower numbers for earlier positions.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- File: webapp/ext/fragments/ListReportGridTableColumns.fragment.xml -->
<core:FragmentDefinition xmlns:core="sap.ui.core"
       xmlns:table="sap.ui.table" xmlns="sap.m">
       <table:Column>
              <Label text="Rating" />
              <table:customData>
                     <core:CustomData key="p13nData"
                            value='{"columnKey": "Rating", "leadingProperty":"Price", "columnIndex" : "100"}' />
              </table:customData>
              <table:template>
                     <RatingIndicator value="{= ${Price} > 500 ? 1:5}"></RatingIndicator>
              </table:template>
       </table:Column>
       <table:Column>
              <Label text="Test" />
              <table:customData>
                     <core:CustomData key="p13nData" value='{"columnKey": "Test", "columnIndex" : "101"}' />
              </table:customData>
              <table:template>
                     <Text text="{i18n|sap.suite.ui.generic.template.ListReport|STTA_C_MP_Product>xfld.BreakoutColumnContent}"></Text>
              </table:template>
       </table:Column>
</core:FragmentDefinition>
```

**STEP**: 2 — Register the view extension in manifest.json

**DESCRIPTION**: Register the fragment under the extends.extensions.sap.ui.viewExtensions section for the ListReport view. Use a unique key naming convention: "GridTableColumnsExtension|<EntitySet>" for single-view, or "GridTableColumnsExtension|<EntitySet>|<tabKey>" when QuickVariantSelectionX is used (define per tab). Provide className "sap.ui.core.Fragment", fragmentName matching the fragment path (dot-separated namespace), and type "XML".

**LANGUAGE**: JSON

**CODE**:
```json
{
  "extends": {
    "component": "sap.suite.ui.generic.template.ListReport",
    "minVersion": "1.1.0",
    "extensions": {
      "sap.ui.viewExtensions": {
        "sap.suite.ui.generic.template.ListReport.view.ListReport": {
          "GridTableColumnsExtension|STTA_C_MP_Product": {
            "className": "sap.ui.core.Fragment",
            "fragmentName": "STTA_MP.ext.fragments.ListReportGridTableColumns",
            "type": "XML"
          }
        }
      }
    }
  }
}
```

**STEP**: 3 — Register per-tab extensions when using QuickVariantSelectionX

**DESCRIPTION**: If your List Report uses QuickVariantSelectionX (multiple table mode), register separate fragment extensions per tab. Use extension point names: "GridTableColumnsExtension|<EntitySet>|<tabKey>". Providing the tab key enables stable IDs for columns and cells. For backward compatibility, omitting the tab key still works but you cannot provide stable IDs.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "extends": {
    "extensions": {
      "sap.ui.viewExtensions": {
        "sap.suite.ui.generic.template.ListReport.view.ListReport": {
          "GridTableColumnsExtension|STTA_C_MP_Product|Expensive": {
            "className": "sap.ui.core.Fragment",
            "fragmentName": "STTA_MP.ext.fragments.ListReportGridTableColumnsExpensive",
            "type": "XML"
          },
          "GridTableColumnsExtension|STTA_C_MP_Product|Cheap": {
            "className": "sap.ui.core.Fragment",
            "fragmentName": "STTA_MP.ext.fragments.ListReportGridTableColumnsCheap",
            "type": "XML"
          }
        }
      }
    }
  }
}
```

**STEP**: 4 — Important notes and constraints

**DESCRIPTION**: Follow these constraints when implementing extensions:
- Applicability: This approach applies only to SAP Fiori elements for OData V2.
- Use app extensions only if manifest settings or annotations cannot achieve the required behavior.
- When fragment content binds to an entity property (e.g., {Price}), include the same property name as "leadingProperty" inside the p13nData CustomData so personalization and column behaviors integrate correctly.
- Use only the official extensionAPI of SAP Fiori elements to integrate behavior; do not access or manipulate internal SAP Fiori elements controls, properties, models, or other internal objects directly. After creating an app extension, display and system behavior fall under the application's responsibility.
--------------------------------

**TITLE**: Add Custom Columns to a Grid Table in the Object Page (Fiori elements, OData V2)

**INTRODUCTION**: Add custom columns to a grid table in an Object Page by creating an XML fragment that defines column structure and registering that fragment as a view extension in manifest.json. This example adds two columns: one text column and one action button column. Applicable only to SAP Fiori elements for OData V2. Use only the extensionAPI of SAP Fiori elements and avoid manipulating internal framework objects.

**TAGS**: fiori-elements-framework, OData V2, sap.ui.viewExtensions, fragments, manifest.json, extensionAPI, UI5, grid-table

**STEP**: 1 — Create XML fragment that defines the custom grid table columns

**DESCRIPTION**: Create an XML fragment file under your app extension folder (example path: webapp/ext/fragments/ProductTextGridTableColumns.fragment.xml). The fragment defines two table:Column entries for a sap.ui.table grid table: a text column and a button column. Keep the namespaces exactly as shown and implement the press handler name ("onGridTableBreakoutButtonPress") in your controller extension.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- File: webapp/ext/fragments/ProductTextGridTableColumns.fragment.xml -->
<core:FragmentDefinition 
    xmlns:core="sap.ui.core" 
    xmlns:table="sap.ui.table" 
    xmlns="sap.m" 
    xmlns:sfi="sap.ui.comp.smartfield">

    <table:Column width="150px">
        <Label text="{i18n|sap.suite.ui.generic.template.ObjectPage|STTA_C_MP_Product>xfld.BreakoutColumn}" />
        <table:template>
            <Text text="{i18n|sap.suite.ui.generic.template.ObjectPage|STTA_C_MP_Product>xfld.BreakoutColumnContent}" />
        </table:template>
    </table:Column>

    <table:Column width="160px">
        <Label text="{i18n|sap.suite.ui.generic.template.ObjectPage|STTA_C_MP_Product>xfld.BreakoutColumn}" />
        <table:template>
            <Button text="GridTab.Button" press="onGridTableBreakoutButtonPress" />
        </table:template>
    </table:Column>

</core:FragmentDefinition>
```

**STEP**: 2 — Register the fragment as a view extension in manifest.json

**DESCRIPTION**: Register the fragment under the "sap.ui.viewExtensions" entry for the Object Page Details view in your manifest.json. Use the fragmentName pointing to the fragment file created above. The example shows a registration key for a specific LineItem extension; ensure the key matches your annotation target or view mapping. Keep the JSON structure under "extends" → "extensions" → "sap.ui.viewExtensions".

**LANGUAGE**: JSON

**CODE**:
```json
// File: manifest.json (snippet)
"extends": {
    "extensions": {
        "sap.ui.controllerExtensions": {
            ...
        },
        "sap.ui.viewExtensions": {
            ...
            "sap.suite.ui.generic.template.ObjectPage.view.Details": {
                ...
                "GridTableColumnsExtension|STTA_C_MP_ProductText|to_ProductTextNavigation::com.sap.vocabularies.UI.v1.LineItem": {
                    "className": "sap.ui.core.Fragment",
                    "fragmentName": "STTA_MP.ext.fragments.ProductTextGridTableColumns",
                    "type": "XML"
                }
                ...
            }
        }
    }
}
```

**STEP**: 3 — Implement the button press handler in a controller extension (optional but required for button action)

**DESCRIPTION**: If you added a Button with press="onGridTableBreakoutButtonPress", implement that method in a controller extension. Register the controller extension via "sap.ui.controllerExtensions" in manifest.json if not already done. Example controller extension file path: webapp/ext/controllers/ObjectPageExtension.controller.js. Implement the handler to perform the required action (e.g., navigation, dialog, or custom logic). Keep implementation to use extensionAPI where integration with Fiori elements is needed.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// File: webapp/ext/controllers/ObjectPageExtension.controller.js
sap.ui.define([
    "sap/ui/core/mvc/Controller"
], function(Controller) {
    "use strict";

    return Controller.extend("STTA_MP.ext.controllers.ObjectPageExtension", {
        onGridTableBreakoutButtonPress: function(oEvent) {
            // Implement custom logic here.
            // Use the extensionAPI or event parameters to access context.
            // Example placeholder:
            var oSource = oEvent.getSource();
            var oRowContext = oSource.getBindingContext();
            // Add your logic: navigation, dialog, or other action
        }
    });
});
```

**STEP**: 4 — Important context and best practices

**DESCRIPTION**: 
- This approach is only applicable to SAP Fiori elements for OData V2.
- Use app extensions only when manifest settings or annotations cannot produce the behavior you need.
- Integrate with SAP Fiori elements using only the extensionAPI. Do not manipulate internal framework controls, models, or properties directly. Ensure busy handling and model usage remain consistent with Fiori elements expectations.
--------------------------------

**TITLE**: Adding Custom Columns to a Responsive Table in a List Report

**INTRODUCTION**: This document shows the exact steps and code needed to add custom columns to a responsive table in a SAP Fiori elements List Report. You will implement two XML fragments (column definitions and cell content) and register them in the application's manifest.json. Use these instructions only when manifest settings or annotations cannot achieve the required behavior; follow the extensionAPI guidance and avoid manipulating internal Fiori elements objects.

**TAGS**: fiori-elements, responsive-table, extensions, fragments, manifest, list-report, custom-columns

**STEP**: 1 — Create fragment: Column definitions

**DESCRIPTION**: Create the fragment that defines the custom Column entries and their p13n metadata. Use the customData property p13nData to set columnKey, columnIndex (for column ordering) and leadingProperty (required when your cell content binds to a property such as {Price}). Save this file at webapp/ext/fragments/ListReportResponsiveTableColumns.fragment.xml.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core"
       xmlns="sap.m">
       <Column>
              <Text text="{i18n|sap.suite.ui.generic.template.ListReport|STTA_C_MP_Product>xfld.Rating}" />
              <customData>
                     <core:CustomData key="p13nData"
                            value='\{"columnKey": "Rating", "leadingProperty":"Price", "columnIndex" : "100"}' />
              </customData>
       </Column>
       <Column>
              <Text text="{i18n|sap.suite.ui.generic.template.ListReport|STTA_C_MP_Product>xfld.BreakoutColumn}" />
              <customData>
                     <core:CustomData key="p13nData"
                            value='\{"columnKey": "Test", "columnIndex" : "101"}' />
              </customData>
       </Column>
</core:FragmentDefinition>
```

**STEP**: 2 — Create fragment: Cell content

**DESCRIPTION**: Create the fragment that defines the controls to render inside the custom columns (cells). Ensure bindings match any leadingProperty referenced in the column definition. Save this file at webapp/ext/fragments/ListReportResponsiveTableCells.fragment.xml.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m">
       <RatingIndicator value="{= ${Price} > 500 ? 1:5}"></RatingIndicator>
       <Text text="{i18n|sap.suite.ui.generic.template.ListReport|STTA_C_MP_Product>xfld.BreakoutColumnContent}"></Text>
</core:FragmentDefinition>
```

**STEP**: 3 — Register the fragments in manifest.json (single view)

**DESCRIPTION**: Register both the Columns and Cells fragments under sap.ui.viewExtensions for the ListReport view. Use keys composed of the extension point name and the EntitySet (and optionally the tab key). Example for a single registration (entity set STTA_C_MP_Product):

**LANGUAGE**: JSON

**CODE**:
```json
...
 "extends": {
      "extensions": {
        "sap.ui.viewExtensions": {
          "sap.suite.ui.generic.template.ListReport.view.ListReport": { 
            "ResponsiveTableColumnsExtension|STTA_C_MP_Product": {
                  "className": "sap.ui.core.Fragment",
                  "fragmentName": "STTA_MP.ext.fragments.ListReportResponsiveTableColumns",
                  "type": "XML"
            },
            "ResponsiveTableCellsExtension|STTA_C_MP_Product": {
                  "className": "sap.ui.core.Fragment",
                  "fragmentName": "STTA_MP.ext.fragments.ListReportResponsiveTableCells",
                  "type": "XML"
            },...
```

**STEP**: 4 — Register the fragments per QuickVariantSelectionX tab (multiple-table mode)

**DESCRIPTION**: If the List Report uses QuickVariantSelectionX (multiple tabs/views), register each tab-specific extension using the pattern ResponsiveTableColumnsExtension|<EntitySet>|<tabKey> and ResponsiveTableCellsExtension|<EntitySet>|<tabKey>. Use the tab key you defined in QuickVariantSelectionX. If you omit the tab key for backward compatibility, the feature still works but you cannot provide stable IDs.

**LANGUAGE**: JSON

**CODE**:
```json
...
"extends": {
  "extensions": {
    "sap.ui.viewExtensions": {
     "sap.suite.ui.generic.template.ListReport.view.ListReport": { 
        "ResponsiveTableColumnsExtension|STTA_C_MP_Product|Expensive": {
          "className": "sap.ui.core.Fragment",
         "fragmentName": "STTA_MP.ext.fragments.ListReportResponsiveTableColumnsExpensive",
         "type": "XML"
        },
        "ResponsiveTableCellsExtension|STTA_C_MP_Product|Expensive": {
          "className": "sap.ui.core.Fragment",
          "fragmentName": "STTA_MP.ext.fragments.ListReportResponsiveTableCellsExpensive",
          "type": "XML"
        },
        "ResponsiveTableColumnsExtension|STTA_C_MP_Product|Cheap": {
          "className": "sap.ui.core.Fragment",
         "fragmentName": "STTA_MP.ext.fragments.ListReportResponsiveTableColumnsCheap",
         "type": "XML"
        },
        "ResponsiveTableCellsExtension|STTA_C_MP_Product|Cheap": {
          "className": "sap.ui.core.Fragment",
          "fragmentName": "STTA_MP.ext.fragments.ListReportResponsiveTableCellsCheap",
          "type": "XML"
        },...
```

**STEP**: 5 — Reuse the same fragment for multiple tabs (set unique ids)

**DESCRIPTION**: To reuse a fragment instance across multiple tabs while keeping stable IDs, register the same fragment multiple times and provide a distinct id for each registration.

**LANGUAGE**: JSON

**CODE**:
```json
"extensions":{
      "sap.ui.viewExtensions":{
         "sap.suite.ui.generic.template.ListReport.view.ListReport":{
            "ResponsiveTableColumnsExtension|STTA_C_MP_Product|Expensive":{
               "className":"sap.ui.core.Fragment",
               "fragmentName":"STTA_MP.ext.fragments.ListReportResponsiveTableColumns",
               "type":"XML",
               "id":"Expensive"        
 },
            "ResponsiveTableCellsExtension|STTA_C_MP_Product|Expensive":{
               "className":"sap.ui.core.Fragment",
               "fragmentName":"STTA_MP.ext.fragments.ListReportResponsiveTableCells",
               "type":"XML",
               "id":"Expensive"          
 },
            "ResponsiveTableColumnsExtension|STTA_C_MP_Product|Cheap":{
               "className":"sap.ui.core.Fragment",
               "fragmentName":"STTA_MP.ext.fragments.ListReportResponsiveTableColumns",
               "type":"XML",
               "id":"Cheap"          
 },
            "ResponsiveTableCellsExtension|STTA_C_MP_Product|Cheap":{
               "className":"sap.ui.core.Fragment",
               "fragmentName":"STTA_MP.ext.fragments.ListReportResponsiveTableCells",
               "type":"XML",
               "id":"Cheap"           
 },…
```

**STEP**: Notes and best practices

**DESCRIPTION**: Important rules to follow when implementing custom columns:
- Use app extensions only if manifest settings or annotations cannot achieve the behavior.
- Integrate with Fiori elements only via the extensionAPI; do not access or manipulate internal controls, properties, models, or bindings created by the framework.
- If your cell content binds to a property (for example {Price}), add that property as "leadingProperty" in the column's p13nData customData.
- Use "columnIndex" inside p13nData to control column ordering.
- When using QuickVariantSelectionX, include the tabKey in the extension point name to provide stable IDs. If reusing fragments across tabs, provide unique "id" values in the manifest registration.
--------------------------------

**TITLE**: Add Custom Columns to a Responsive Table on the Object Page (Fiori Elements)

**INTRODUCTION**: This guide shows the exact files and code you must add to implement a custom column in a responsive table on the Object Page of a Fiori Elements app. You will create two XML fragments (one defining the column header and p13n metadata, one providing the cell content) and register both fragments as view extensions in the application's manifest.json. Use app extensions only when manifest settings or annotations cannot achieve the behavior; integrate only via the Fiori elements extensionAPI and avoid manipulating internal framework objects.

**TAGS**: fiori-elements, extension, responsive-table, object-page, odata-v2, odata-v4, fragments, manifest, UI5

STEP: 1 — Create fragment: column definition (header + p13n data)

DESCRIPTION: Create an XML fragment that defines the custom column header and p13n data (columnKey and columnIndex). Place this file under webapp/ext/fragments and preserve the exact CustomData value JSON string (escaped as shown). This fragment is referenced by the ResponsiveTableColumnsExtension.

LANGUAGE: XML

CODE:
```xml
<!-- File: webapp/ext/fragments/ProductTextResponsiveTableColumns.fragment.xml -->
<core:FragmentDefinition xmlns:core="sap.ui.core"
       xmlns="sap.m">
       <Column>
              <Text text="{i18n|sap.suite.ui.generic.template.ObjectPage|STTA_C_MP_Product>xfld.BreakoutColumn}" />
              <customData>
                     <core:CustomData key="p13nData"
                            value='\{"columnKey": "Test", "columnIndex" : "101"}' />
              </customData>
       </Column>
</core:FragmentDefinition>
```

STEP: 2 — Create fragment: column cell content

DESCRIPTION: Create an XML fragment that provides the cell content for the custom column. Place this file under webapp/ext/fragments and ensure the fragment contains the binding or static content you want displayed in each row. This fragment is referenced by the ResponsiveTableCellsExtension.

LANGUAGE: XML

CODE:
```xml
<!-- File: webapp/ext/fragments/ProductTextResponsiveTableCells.fragment.xml -->
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m">
       <Text text="{i18n|sap.suite.ui.generic.template.ObjectPage|STTA_C_MP_Product>xfld.BreakoutColumnContent}"></Text>
</core:FragmentDefinition>
```

STEP: 3 — Register view extensions in manifest.json

DESCRIPTION: Register both fragments as view extensions in the application manifest. Add entries under "sap.ui.viewExtensions" for the Object Page Details view. Use the exact keys shown (format: ResponsiveTableColumnsExtension|<Entity>|<Navigation>::<LineItemAnnotation> and ResponsiveTableCellsExtension|...). Provide className "sap.ui.core.Fragment", fragmentName matching the module path (namespace-like name), and type "XML". Place this snippet inside the "extends" → "extensions" → "sap.ui.viewExtensions" section of manifest.json.

LANGUAGE: JSON

CODE:
```json
...
 "extends": {
      "component": "sap.suite.ui.generic.template.ListReport",
      "minVersion": "1.1.0",
      "extensions": {
        "sap.ui.viewExtensions": {
"sap.suite.ui.generic.template.ObjectPage.view.Details": {
            "ResponsiveTableColumnsExtension|STTA_C_MP_ProductText|to_ProductText::com.sap.vocabularies.UI.v1.LineItem": {
                  "className": "sap.ui.core.Fragment",
                  "fragmentName": "STTA_MP.ext.fragments.ProductTextResponsiveTableColumns",
                  "type": "XML"
            },
            "ResponsiveTableCellsExtension|STTA_C_MP_ProductText|to_ProductText::com.sap.vocabularies.UI.v1.LineItem": {
                  "className": "sap.ui.core.Fragment",
                  "fragmentName": "STTA_MP.ext.fragments.ProductTextResponsiveTableCells",
                  "type": "XML"
            }    
      }, 
...
```

STEP: 4 — Notes, naming, and best practices

DESCRIPTION: 
- Naming: Follow the extension naming conventions. See the "Extension Points for Tables" topic for details on naming rules and available extension IDs. 
- Caution: Use extensions only when necessary; prefer manifest settings or annotations when possible. When extending, use only the Fiori elements extensionAPI; avoid direct manipulation of internal controls, models, or framework objects. 
- Placement: Ensure fragmentName uses your app's module path (e.g., STTA_MP.ext.fragments.ProductTextResponsiveTableColumns) and that the fragment files exist at the matching file paths under webapp/ext/fragments.
--------------------------------

**TITLE**: Adding Custom Columns to a Tree Table in a Fiori Elements List Report (OData V2)

**INTRODUCTION**: This guide shows how to add custom columns to a Tree Table in an SAP Fiori elements List Report (OData V2) using a view extension fragment and manifest registration. It includes the fragment XML to define columns and the manifest.json entries to register the extension (single-table and QuickVariantSelectionX / multiple-tab variants). Use only the extensionAPI for further interactions; extension code is your app's responsibility.

**TAGS**: fiori-elements, odata-v2, sapui5, tree-table, list-report, manifest, view-extension, extensionAPI

**STEP**: 0 — Pre-requisites and Cautions

**DESCRIPTION**: Verify target framework and follow extension best practices:
- Applicable only to SAP Fiori elements for OData V2.
- Use app extensions only when manifest settings or annotations cannot provide required behavior.
- Only use the official extensionAPI of SAP Fiori elements; do not access or manipulate internal controls, models, or properties created by the framework.

**LANGUAGE**: Text

**CODE**:
```text
Context:
- SAP Fiori elements for OData V2 only.
- Use extensionAPI only; extension code is responsible for display and behavior after integration.
```

**STEP**: 1 — Create the view extension fragment

**DESCRIPTION**: Create an XML fragment that adds one or more columns to the tree table. Place the fragment in your app at webapp/ext/fragments/ListReportTreeTableColumns.fragment.xml (or another fragment name and path you reference in manifest). Use customData p13nData with keys:
- columnKey: unique column identifier
- columnIndex: determines insertion order (lower index = earlier column)
- leadingProperty: include when content bindings refer to a property (e.g., {Price}) so the framework knows the leading property for the column

Keep fragment content intact (below sample). Adjust Labels, templates, bindings, and indices to match your app.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core"
       xmlns:table="sap.ui.table" xmlns="sap.m">
       <table:Column>
              <Label text="Rating" />
              <table:customData>
                     <core:CustomData key="p13nData"
                            value='\{"columnKey": "Rating", "leadingProperty":"Price", "columnIndex" : "100"}' />
              </table:customData

              <table:template>
                     <RatingIndicator value="{= ${Price} > 500 ? 1:5}"></RatingIndicator>
              </table:template>
       </table:Column>
       <table:Column>
              <Label text="Test" />
              <table:customData>
                     <core:CustomData key="p13nData" value='\{"columnKey": "Test", "columnIndex" : "101"}' />
              </table:customData>
              <table:template>
                     <Text text="{i18n|sap.suite.ui.generic.template.ListReport|STTA_C_MP_Product>xfld.BreakoutColumnContent}"></Text>
              </table:template>
       </table:Column>
</core:FragmentDefinition>
```

**STEP**: 2 — Register the fragment in manifest.json (single view)

**DESCRIPTION**: Register the fragment under extends → extensions → sap.ui.viewExtensions targeting the ListReport view. Use a key for the extension such as "TreeTableColumnsExtension|<EntitySet>" (example uses STTA_C_MP_Product). Reference your fragmentName and type XML. Place this snippet inside your manifest.json extends block.

**LANGUAGE**: JSON

**CODE**:
```json
...
 "extends": {
      "component": "sap.suite.ui.generic.template.ListReport",
      "minVersion": "1.1.0",
      "extensions": {
        "sap.ui.viewExtensions": {
          "sap.suite.ui.generic.template.ListReport.view.ListReport": {
            "TreeTableColumnsExtension|STTA_C_MP_Product": {
                  "className": "sap.ui.core.Fragment",
                  "fragmentName": "STTA_MP.ext.fragments.ListReportTreeTableColumns",
                  "type": "XML"
            },… 
```

**STEP**: 3 — Register the fragment for QuickVariantSelectionX (multiple-tab) scenarios

**DESCRIPTION**: When using QuickVariantSelectionX (multiple table mode), register extensions per tab. Extension point names must be "TreeTableColumnsExtension|<EntitySet>|<tabKey>". Including the <tabKey> allows stable IDs for columns and cells. For backward compatibility the feature may work without <tabKey>, but stable IDs are not guaranteed. Add each tab-specific fragment registration in sap.ui.viewExtensions.

**LANGUAGE**: JSON

**CODE**:
```json
...
"extends": {
  "extensions": {
    "sap.ui.viewExtensions": {
      "sap.suite.ui.generic.template.ListReport.view.ListReport": {
        "TreeTableColumnsExtension|STTA_C_MP_Product|Expensive": {
          "className": "sap.ui.core.Fragment",
          "fragmentName": "STTA_MP.ext.fragments.ListReportTreeTableColumnsExpensive",
          "type": "XML"
        },
        "TreeTableColumnsExtension|STTA_C_MP_Product|Cheap": {
          "className": "sap.ui.core.Fragment",
          "fragmentName": "STTA_MP.ext.fragments.ListReportTreeTableColumnsCheap",
          "type": "XML"
        },... 
```

**STEP**: 4 — Implementation notes and tips

**DESCRIPTION**:
- If your custom column content binds to an entity property (e.g., {Price}), include "leadingProperty" in CustomData so the framework can handle sorting/filtering correctly.
- Use columnIndex in p13nData to control column ordering. Lower values appear earlier.
- Provide stable IDs by including the <tabKey> when using multiple table mode.
- Do not access internal controls or models created by Fiori elements; rely on the extensionAPI for integration.
--------------------------------

**TITLE**: Add Custom Columns to an Analytical Table on the Object Page (Fiori elements, OData V2)

**INTRODUCTION**: This guide shows how to add custom columns to an AnalyticalTable on an Object Page in SAP Fiori elements (OData V2) via a view fragment and manifest registration. It includes an XML fragment example (controls and p13n customData) and the manifest.json view extension registration to attach the fragment to the Object Page. Use only the extensionAPI and avoid manipulating internal framework controls or models directly.

**TAGS**: fiori-elements-framework, ODataV2, SAPUI5, extension, fragment, analytical-table, manifest, ObjectPage, view-extension

**STEP**: Context and Cautions

**DESCRIPTION**: Applicable only to SAP Fiori elements for OData V2. Use app extensions sparingly — prefer manifest settings or annotations when possible. When using an app extension, integrate via the Fiori elements extensionAPI only. Do not directly manipulate internal controls, properties, models, or other framework internals.

**LANGUAGE**: text

**CODE**:
```text
Applicable only to SAP Fiori elements for OData V2.
Use app extensions with caution and only if you cannot produce the required behavior by other means, such as manifest settings or annotations.
To correctly integrate your app extension coding with SAP Fiori elements, use only the extensionAPI of SAP Fiori elements.
Don't access or manipulate controls, properties, models, or other internal objects created by the SAP Fiori elements framework.
```

**STEP**: 1 — Create view fragment with custom AnalyticalTable columns

**DESCRIPTION**: Create an XML fragment that defines additional AnalyticalColumn entries. Place this fragment in your project at webapp/ext/fragments/ProductSalesDataAnalyticalTableColumns.fragment.xml. The fragment below shows two columns: one with text content and one with a button that fires a press handler (onAnalyticalTableBreakoutButtonPress). Each column includes core:CustomData with a p13nData key and a JSON-like value containing a columnKey.

Keep the file path and fragment name consistent with your manifest registration.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition
               xmlns:core="sap.ui.core"
               xmlns:table="sap.ui.table" 
               xmlns="sap.m" 
               xmlns:sfi="sap.ui.comp.smartfield">

               <table:AnalyticalColumn width="150px"> 
      <Label text="{i18n|sap.suite.ui.generic.template.ObjectPage|STTA_C_MP_Product>xfld.BreakoutColumn}" />
      <table:template>
         <Text text="{i18n|sap.suite.ui.generic.template.ObjectPage|STTA_C_MP_Product>xfld.BreakoutColumnContent}"></Text>
      </table:template>
      <table:customData>
                              <core:CustomData key="p13nData" value='\{"columnKey": "some unique key" \}' />
                   </table:customData>
               </table:AnalyticalColumn>
               
               <table:AnalyticalColumn width="170px">

                              <Label text="{i18n|sap.suite.ui.generic.template.ObjectPage|STTA_C_MP_Product>xfld.BreakoutColumn}" />

                              <table:template>
                                             <Button text="{i18n|sap.suite.ui.generic.template.ObjectPage|STTA_C_MP_Product>xfld.AnalyticalTableButton}"
                                                                                                         press = "onAnalyticalTableBreakoutButtonPress">
                                             </Button>
                             </table:template>            
                              
                              <table:customData>
                                             <core:CustomData key="p13nData" value='\{"columnKey": some unique key"  \}' />
                              </table:customData>
               
               </table:AnalyticalColumn>
               
</core:FragmentDefinition>
```

**STEP**: 2 — Register the fragment as a view extension in manifest.json

**DESCRIPTION**: Register your fragment under sap.ui.viewExtensions for the Object Page Details view. Match the fragmentName to the file path and reference type "XML". Place this snippet in your application's manifest.json under the "extends" → "extensions" → "sap.ui.viewExtensions" section. Ensure the key used (here: AnalyticalTableColumnsExtension|STTA_C_MP_ProductSalesData|to_ProductSalesData::com.sap.vocabularies.UI.v1.LineItem) maps to the intended table or extension point.

Adjust className, fragmentName, and type values to match your fragment location and naming.

**LANGUAGE**: JSON

**CODE**:
```json
"extends": {
     "extensions": {
         "sap.ui.controllerExtensions": {
             ....
         }
         "sap.ui.viewExtensions": {
              .... 
              "sap.suite.ui.generic.template.ObjectPage.view.Details": {
                     ....
                     "AnalyticalTableColumnsExtension|STTA_C_MP_ProductSalesData|to_ProductSalesData::com.sap.vocabularies.UI.v1.LineItem": {
                        "className": "sap.ui.core.Fragment",
                        "fragmentName": "STTA_MP.ext.fragments.ProductSalesDataAnalyticalTableColumns",
                        "type": "XML"
                     },
                     ....
```

**STEP**: 3 — Implement controller handler and verify behavior

**DESCRIPTION**: Implement the press handler (onAnalyticalTableBreakoutButtonPress) in your controller extension (registered under sap.ui.controllerExtensions in manifest.json). Ensure handler logic uses only the extensionAPI to interact with framework resources. Test in the Object Page: the AnalyticalTable should render the added columns, text content, and button actions as defined.

**LANGUAGE**: text

**CODE**:
```text
- Implement onAnalyticalTableBreakoutButtonPress in your controller extension.
- Use only extensionAPI methods to interact with the Fiori elements app framework.
- Test the Object Page to confirm the new AnalyticalTable columns display and button press executes your handler.
```
--------------------------------

**TITLE**: Adding Custom Filter Fields in Table Toolbar (Object Page, OData V2)

**INTRODUCTION**: This guide shows how to add custom filter controls (Select, ComboBox, DatePicker, TextField, etc.) into an Object Page table toolbar in SAP Fiori elements (OData V2). Use a TableToolBarExtension fragment and attach filters in onBeforeRebindTableExtension. Prevent toolbar overflow per-control by setting OverflowToolbarLayoutData priority="NeverOverflow".

**TAGS**: fiori-elements-framework, OData V2, SAPUI5, UI5, TableToolBarExtension, overflow, fragment, manifest, controller, extension

**STEP**: 1 — Add view extension entry in manifest.json

**DESCRIPTION**: Add a TableToolBarExtension under the object page view extensions. The manifest key must follow the format TableToolBarExtension|entitySet|facetId. The example attaches an XML fragment (OPCustomFilter) to the ObjectPage view Details.

**LANGUAGE**: JSON

**CODE**:
```json
"extends": {
  "extensions": {
    "sap.ui.viewExtensions": {
      "sap.suite.ui.generic.template.ObjectPage.view.Details": {
        "TableToolBarExtension|STTA_C_MP_Product|to_ProductText::com.sap.vocabularies.UI.v1.LineItem": {
          "className": "sap.ui.core.Fragment",
          "fragmentName": "STTA_MP.ext.fragments.OPCustomFilter",
          "type": "XML"
        }
      }
    }
  }
}
```

**STEP**: 2 — Create XML fragment with custom filter controls

**DESCRIPTION**: Create the fragment OPCustomFilter.fragment.xml containing filter controls for the toolbar. Set OverflowToolbarLayoutData priority="NeverOverflow" on controls you want to prevent from overflowing into the overflow toolbar. Use labelFor to link label and control.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core">

    <Label 
        text="{i18n|sap.suite.ui.generic.template.ListReport|STTA_C_MP_Product>ST_GENERIC_LANGUAGE_FILTER}" 
        labelFor="filterId">
        <layoutData>
            <OverflowToolbarLayoutData priority="NeverOverflow"/>
        </layoutData>
    </Label>

    <Select id="filterId" change="onCustomFilterChange">
        <items>
            <core:Item 
                key="0" 
                text="{i18n|sap.suite.ui.generic.template.ListReport|STTA_C_MP_Product>ST_GENERIC_ENGLISH_LANGUAGE_FILTER}"/>
            <core:Item 
                key="1" 
                text="{i18n|sap.suite.ui.generic.template.ListReport|STTA_C_MP_Product>ST_GENERIC_MANDARIN_LANGUAGE_FILTER}"/>
        </items>
        <layoutData>
            <OverflowToolbarLayoutData priority="NeverOverflow"/>
        </layoutData>
    </Select>

</core:FragmentDefinition>
```

**STEP**: 3 — Add controller logic to apply filters and rebind table

**DESCRIPTION**: In the extension controller, require sap/ui/core/Element (or import it) so Element.getElementById is available. Implement onCustomFilterChange to rebind the SmartTable after selection changes. Implement onBeforeRebindTableExtension to read the selected key from the custom filter control and push corresponding sap.ui.model.Filter instances to bindingParams.filters to apply the filter on the table binding.

Ensure the control IDs match the IDs used in the manifest fragment and SmartTable. The example references the SmartTable ID registered by the Generic Template; adjust IDs per your application if needed.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// "Element" required from module "sap/ui/core/Element"
onCustomFilterChange: function (oEvent) {
    var smartTable = Element.getElementById(
        "STTA_MP::sap.suite.ui.generic.template.ObjectPage.view.Details::STTA_C_MP_Product--to_ProductText::com.sap.vocabularies.UI.v1.LineItem::Table"
    );
    smartTable.rebindTable();
},

onBeforeRebindTableExtension: function (oEvent) {
    var oBindingParams = oEvent.getParameter("bindingParams");
    oBindingParams.parameters = oBindingParams.parameters || {};

    var customFilter = Element.getElementById(
        "STTA_MP::sap.suite.ui.generic.template.ObjectPage.view.Details::STTA_C_MP_Product--filterId"
    );
    var key = customFilter.getSelectedKey();

    switch (key) {
        case "0":
            oBindingParams.filters.push(
                new sap.ui.model.Filter("Language", "EQ", "EN")
            );
            break;

        case "1":
            oBindingParams.filters.push(
                new sap.ui.model.Filter("Language", "EQ", "ZH")
            );
            break;

        default:
            return;
    }
},
```
--------------------------------

**TITLE**: Applying Custom Logic When a Table Is Loaded or Refreshed (Fiori elements, OData V2)

**INTRODUCTION**: This guide shows how to register a controller extension and implement onBeforeRebindTableExtension to apply custom logic when a table is loaded or refreshed in SAP Fiori elements for OData V2. Use this only if manifest settings or annotations cannot achieve the required behavior. Always use the extensionAPI and avoid manipulating internal framework controls, models, or properties directly.

**TAGS**: fiori-elements-framework, sapui5, odata-v2, extension, manifest.json, onBeforeRebindTableExtension, controller-extension

STEP: 1 — Register the controller extension in manifest.json

DESCRIPTION: Add a controller extension entry under sap.ui5 > extends > extensions > sap.ui.controllerExtensions to register your extension controller for the relevant ObjectPage view. Replace the example controllerName with your extension module path (for example: STTA_MP.ext.controller.DetailsExtension). File: manifest.json

LANGUAGE: JSON

CODE:
```json
"sap.ui5": {
      ...
      "extends": {
              "extensions": {
              ... 
                    "sap.ui.controllerExtensions": { 
                          ...
                          "sap.suite.ui.generic.template.ObjectPage.view.Details": { 
                  ... 
                    "controllerName": "STTA_MP.ext.controller.DetailsExtension",
                        ...
                          }
            } 
      ...
```

STEP: 2 — Implement the controller extension and onBeforeRebindTableExtension

DESCRIPTION: Implement your extension controller module (for example, STTA_MP.ext.controller.DetailsExtension) and define onBeforeRebindTableExtension(oEvent). Use oEvent.getSource().getId() to identify the table firing the event. If the object page contains multiple tables, compare the source ID against the specific tableId to apply table-specific logic. Keep default logic or early return for other tables. Ensure you use only the extensionAPI for interacting with framework-provided functionality. File: DetailsExtension.controller.js (module: STTA_MP.ext.controller.DetailsExtension)

LANGUAGE: JavaScript

CODE:
```javascript
sap.ui.define([], function() {
    return {
        onBeforeRebindTableExtension: function(oEvent) {
            var oID = oEvent.getSource().getId();
            var tableId = "STTA_MP::sap.suite.ui.generic.template.ObjectPage.view.Details::STTA_C_MP_Product--to_ProductText::com.sap.vocabularies.UI.v1.LineItem::Table";
            // to select only one specific table
            switch (oID) {
                case tableId:
                // implement your logic for table 1 here
                ...
                break;
            default :
                // implement your default logic for all others here
                ...
                return;
            }
        }
        ...
    }
})
```
--------------------------------

**TITLE**: Custom State Handling for Fiori elements (OData V2)

**INTRODUCTION**: Implements inner app state handling for a custom UI element (map) inside an SAP Fiori elements application (OData V2). Demonstrates:
- zoomFactor: numeric (1–100), shared across pagination and persisted for the session.
- selectedCity: {country, city}, not passed between instances but bookmarkable (permanent) for the current instance.
Place these functions in your custom controller/extension where you manage the custom UI. Use extensionAPI to notify the framework about state changes.

**TAGS**: fiori-elements-framework, OData V2, custom-state, app-state, bookmark, session, pagination, JavaScript, extensionAPI

STEP: 1 - Event handlers that detect state changes and notify framework

DESCRIPTION: Implement event handlers that update the controller state and notify the framework via the extension API. Use isAdoptingState to ignore events fired while applying a provided state (prevents loops).

LANGUAGE: JavaScript

CODE:
```JavaScript
onZoomFactorChange: function(iZoomFactor){
    if (!this.isAdoptingState){ // ignore case where we are just adapting to the given state
        this.zoomFactor = iZoomFactor;
        // Inform framework that state of custom ui area has changed
        this.extensionAPI.onCustomStateChange();
    }
},
 

onSelectedCityChange: function(sCountry, sCity){
    if (!this.isAdoptingState){ // ignore case where we are just adapting to the given state
        this.city = sCity;
        this.country = sCountry; 
        // Inform framework that state of custom ui area has changed
        this.extensionAPI.onCustomAppStateChange();
    }
},
```

STEP: 2 - Provide custom state to the framework

DESCRIPTION: Implement provideCustomStateExtension to supply the framework with a structured state object. Include lifecycle flags to control persistence and propagation:
- session: true and pagination: true for zoomFactor (shared across pagination and session).
- permanent: true for selectedCity (bookmarkable for the current instance).

LANGUAGE: JavaScript

CODE:
```JavaScript
provideCustomStateExtension: function(oState){
    oState.zoomFactor = {
        data: this.zoomFactor,
        lifecycle: {
            session: true,
            pagination: true
        }
    };
    oState.selectedCity = {
        data: {
            country: this.country,
            city: this.city
        },
        lifecycle: {
            permanent: true
        }
    };
},
```

STEP: 3 - Apply provided custom state from the framework

DESCRIPTION: Implement applyCustomStateExtension to restore the provided state into your custom UI. Check whether the provided state equals the last applied state (bIsSameAsLast) and skip applying if unchanged. Use isAdoptingState to prevent event handlers from reacting during state application.

LANGUAGE: JavaScript

CODE:
```JavaScript
applyCustomStateExtension: function(oState, bIsSameAsLast){
    if (bIsSameasLast){
        return; // all controls are still in the correct state
    }
    this.isAdoptingState = true;
    this.setZoomFactor(oState.zoomFactor);
    this.setSelectedCity(oState.selectedCity.country, oState.selectedCity.city);
    this.isAdoptingState = false;
},
```

STEP: 4 - Implement setter helpers that update UI controls

DESCRIPTION: Provide helper methods that set the visual state of your custom UI (map). These methods update controller properties and perform any UI-specific actions. Ensure these methods do not call the notification methods directly (the event handlers should handle notifications), or protect with isAdoptingState.

LANGUAGE: JavaScript

CODE:
```JavaScript
setZoomFactor: function(iZoomFactor){
    this.zoomFactor = iZoomFactor; 
    //... custom code which brings the map to the given zoom factor
},
 

setSelectedCity: function(sCountry, sCity){ 
    this.city = sCity; 
    this.country = sCountry;
    //... custom code which selects the specified city 
}
```

STEP: 5 - Recommended pattern to avoid feedback loops

DESCRIPTION: Always include the controller property isAdoptingState and wrap code paths that programmatically change UI state with this flag. This prevents event handlers (onZoomFactorChange / onSelectedCityChange) from treating programmatic updates as user-driven changes and notifying the framework incorrectly.

LANGUAGE: JavaScript

CODE:
```JavaScript
// Example: initialize flag in controller
this.isAdoptingState = false;

// When applying state:
this.isAdoptingState = true;
this.setZoomFactor(...);
this.setSelectedCity(...);
this.isAdoptingState = false;

// Event handlers check:
if (!this.isAdoptingState) {
  // treat as user change and call extensionAPI.onCustomStateChange()/onCustomAppStateChange()
}
```
--------------------------------

**TITLE**: Enable Internal Navigation to Different Detail Page (SAP Fiori Elements)

**INTRODUCTION**: This guide shows how to enable conditional internal navigation from a list report or object page to different detail pages (different entity sets). It includes SAP Fiori Elements examples for OData V2 (onListNavigationExtension + visual indication via onChildOpenedExtension) and OData V4 (manifest route + routing.onBeforeNavigation extension). Use these code snippets inside your controller extension files to override the standard navigation flow.

**TAGS**: fiori-elements-framework, OData V2, OData V4, list-report, object-page, navigation, extension, manifest, routing

**STEP**: V2 — Implement conditional internal navigation in the List Report controller extension

**DESCRIPTION**: Add an onListNavigationExtension function in your List Report controller extension. The function inspects the selected row's context, chooses a navigation property based on your conditions, creates the target binding context, and calls the extensionAPI navigation controller to perform internal navigation. Wrap the navigation function in extensionAPI.securedExecution to honor busy and dataloss handling. Return true when custom navigation was performed, otherwise return false to allow default navigation.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
onListNavigationExtension: function(oEvent) {
			var oBindingContext = oEvent.getSource().getBindingContext();
			var oObject = oBindingContext.getObject();
			var sNavigationProperty;
			switch (oObject.Column3){
				case "100":
					sNavigationProperty = "NavigationProperty1";
					break;
				case "200":
					sNavigationProperty = "NavigationProperty2";
					break;
			}
			if (sNavigationProperty){
				var oExtensionAPI = this.extensionAPI;
				var fnNavigate = function(){
					return new Promise(function(fnResolve, fnReject){
						var oModel = oBindingContext.getModel();
						var oTarget;
						oModel.createBindingContext(sNavigationProperty, oBindingContext, {}, function(oTarget){
							var oNavigationController = oExtensionAPI.getNavigationController();
							oNavigationController.navigateInternal(oTarget);
							fnResolve();
						});
					});
				};
			oExtensionAPI.securedExecution(fnNavigate, {
                busy: {
                               check: false
                },
                dataloss: {
                             popup: false
                }
			});

				return true;				
			}
			return false;
		}
```

**STEP**: V2 — Manifest: register multiple ObjectPage pages for different entity sets

**DESCRIPTION**: Ensure your manifest pages section contains ObjectPage definitions for each target entity set so routing/internal navigation can resolve the pages. Add one ObjectPage entry per target entity set.

**LANGUAGE**: JSON

**CODE**:
```json
"pages": {
			"ObjectPage|EntitySet1 ": {
				"entitySet": " EntitySet1",
				"component": {
					"name": "sap.suite.ui.generic.template.ObjectPage"
				}
			},					
			"ObjectPage| EntitySet2 ": {
				"entitySet": " EntitySet2",
				"component": {
					"name": "sap.suite.ui.generic.template.ObjectPage"
				}
			},
			"ObjectPage| EntitySet3": {
				"entitySet": " EntitySet3",
				"component": {
					"name": "sap.suite.ui.generic.template.ObjectPage"
				}
			}
}
```

**STEP**: V2 — Visual indication for table rows when navigated using onListNavigationExtension

**DESCRIPTION**: Implement onChildOpenedExtension in the list report/object page controller extension to provide visual highlighting/selection for the row that was navigated to via onListNavigationExtension. Call fnSetPath with the binding path of the corresponding list item (when it differs from the default oSelectionInfo.path).

**LANGUAGE**: JavaScript

**CODE**:
```javascript
onChildOpenedExtension: function(oSelectionInfo, fnSetPath) {
	//oSelectionInfo - Information about the child page instance opened last.
	//oSelectionInfo.keys – The array of keys (one on each hierarchy level) used for last opened child page.
	//fnSetPath - pass the binding path of the corresponding list item to this function if it is not identical 	to oSelection.path.
	var oModel = this.getView().getModel();
          oModel.createBindingContext(oSelectionInfo.path + "NavigationProperty", null, null, function(oContext) { 
                fnSetPath(oContext.getPath());
	});
},  
```

**STEP**: V4 — Define a route in manifest for the custom detail page

**DESCRIPTION**: For OData V4 apps, define an explicit route (pattern + name + target) in the manifest routing configuration for each custom detail page you want to navigate to via code. Ensure the target referenced exists and maps to the intended view/component.

**LANGUAGE**: JSON

**CODE**:
```json
"sap.ui5": {
  "routing": {
     "routes": [
        ......
        {
           "pattern": "SalesOrderManage({key})/_Item({key2})/_MaterialDetails({key3}):?query:",
           "name": "CustomMaterialDetailsPage",
           "target": "CustomMaterialDetailsPage"
        }
      ]
    }
}
```

**STEP**: V4 — List report: conditional navigation using routing.onBeforeNavigation

**DESCRIPTION**: In a controller extension for the list report, override routing.onBeforeNavigation. Inspect oContextInfo.sourceBindingContext to detect the line item. If your condition matches, call oRouting.navigateToRoute with the route name and key parameters to navigate to the custom page. Return true to prevent default navigation; return false to allow default internal navigation.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
sap.ui.define(["sap/ui/core/mvc/ControllerExtension", "sap/m/MessageToast", "sap/base/Log"], function(
    ControllerExtension,
    MessageToast,
    Log
) {
    "use strict";
    return ControllerExtension.extend("SalesOrder.ext.LRExtend", {
        // this section allows to extend lifecycle hooks or override public methods of the base controller
        override: {
            ......
            ......
            routing: {
                onBeforeNavigation: function(oContextInfo) {
                    var oLineContextData = oContextInfo.sourceBindingContext,
                        oNav = this.base.getExtensionAPI().intentBasedNavigation,
                        oRouting = this.base.getExtensionAPI().routing;
                    // for salesOrder 2919431 navigate to CustomMaterialDetailsPage
                    if (oLineContextData.SalesOrder === "2919431") {
                        oRouting.navigateToRoute("CustomMaterialDetailsPage", {
                            "key": "ID=11111138-aaaa-bbbb-cccc-ddddeeeeffff,IsActiveEntity=true",
                            "key2": "ID=11111142-aaaa-bbbb-cccc-ddddeeeeffff,IsActiveEntity=true",
                            "key3": "ID=21111142-aaaa-bbbb-cccc-ddddeeeeffff,IsActiveEntity=true"
                        });
                    } else {
                        // return false to trigger the default internal navigation
                        return false;
                    }
                    // return true is necessary to prevent further default navigation
                    return true;
                }
            },
            .......
            .......
        }
    })
});
```

**STEP**: V4 — Object page: conditional navigation using routing.onBeforeNavigation

**DESCRIPTION**: In a controller extension for the object page, override routing.onBeforeNavigation. Inspect oContextInfo.sourceBindingContext to detect the line item. When the condition matches, call oRouting.navigateToRoute with the desired route name and key parameters. Return true to prevent the default navigation; return false to allow default internal navigation.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
sap.ui.define(
    [
        "sap/ui/core/mvc/ControllerExtension",
        "sap/m/Dialog",
        "sap/m/DialogType",
        "sap/m/Text",
        "sap/m/Button",
        "sap/m/ButtonType",
        "sap/m/MessageToast",
        "sap/base/Log"
    ],
    function(ControllerExtension, Dialog, DialogType, Text, Button, ButtonType, MessageToast, Log) {
        "use strict";
        return ControllerExtension.extend("SalesOrder.ext.OPExtend", {
            // this section allows to extend lifecycle hooks or override public methods of the base controller
            override: {
                ......
                ......
                routing: {
                    onBeforeNavigation: function(oContextInfo) {
                        var oLineContextData = oContextInfo.sourceBindingContext,
                            oExtensionAPI = this.base.getExtensionAPI(),
                            oNav = oExtensionAPI.intentBasedNavigation,
                            oRouting = oExtensionAPI.routing;
                        // for salesOrderItem 40 from SalesOrder 2916499, navigate to PartnerObjectPage
                        if (
                            oLineContextData.SalesOrder &&
                            oLineContextData.SalesOrder === "2916499" &&
                            oLineContextData.SalesOrderItem &&
                            oLineContextData.SalesOrderItem === 40
                        ) {
                            oRouting.navigateToRoute("PartnerObjectPage", {
                                "key": "ID=" + oLineContextData.ID + ",IsActiveEntity=" + oLineContextData.IsActiveEntity,
                                "key2": "ID=" + oLineContextData.ID + ",IsActiveEntity=" + oLineContextData.IsActiveEntity
                            });
                        } else {
                            // return false to trigger the default internal navigation
                            return false;
                        }
                        // return true is necessary to prevent further default navigation
                        return true;
                    }
                },
                ......
                ......
            }
        }
    }
);
```
--------------------------------

**TITLE**: Replace Standard Chevron Navigation in List Report Table (OData V2 & V4)

**INTRODUCTION**: Step-by-step instructions to override the default chevron/navigation behavior in a Fiori elements List Report responsive table. Shows how to add outbound navigation targets in manifest.json, register controller extensions, and implement extension hooks to route navigation to external or internal targets (examples for OData V2 and OData V4).

**TAGS**: fiori-elements-framework, sapui5, odata-v2, odata-v4, list-report, navigation, extension, manifest.json, controller-extension, extensionAPI

**STEP**: Caution and prerequisites

**DESCRIPTION**: Use app extensions only when manifest settings or annotations cannot provide the needed behavior. Integrate with SAP Fiori elements using only extensionAPI functions. After creating an app extension the application is responsible for display and system behavior. Do not access internal framework controls, properties, or models directly.

**LANGUAGE**: Text

**CODE**:
```Text
Caution:
Use app extensions with caution and only if you cannot produce the required behavior by other means, such as manifest settings or annotations. To correctly integrate your app extension coding with SAP Fiori elements, use only the `extensionAPI` of SAP Fiori elements. For more information, see Using the extensionAPI.
After you've created an app extension, its display (for example, control placement and layout) and system behavior (for example, model and binding usage, busy handling) lies within the application's responsibility. SAP Fiori elements provides support only for the official `extensionAPI` functions. Don't access or manipulate controls, properties, models, or other internal objects created by the SAP Fiori elements framework.
```

**STEP**: OData V2 — Add outbound navigation target to manifest.json

**DESCRIPTION**: Add an outbound entry under sap.app -> crossNavigation -> outbounds in your application's manifest.json to define an external target (launchpad outbound). Place this JSON fragment into manifest.json where your sap.app configuration is defined.

**LANGUAGE**: JSON

**CODE**:
```JSON
sap.app": {

...
  "crossNavigation": {
     "inbounds": {},
     "outbounds": {
       "EPMProductManageSt": {
         "semanticObject": "EPMProduct",
         "action": "manage",
         "parameters": {
            "preferredMode": {
               "value": {
                  "value": "display"
               }
            }
         }
      }
   }
 }
 
....
 
```

**STEP**: OData V2 — Register the controller extension in manifest.json

**DESCRIPTION**: Register your List Report controller extension under sap.ui5 -> extends -> extensions -> sap.ui.controllerExtensions. Map the ListReport controller to your custom controller name. Add this to your manifest.json.

**LANGUAGE**: JSON

**CODE**:
```JSON
"extends": {
   "extensions": {
      ... 
      "sap.ui.controllerExtensions": { 
         ...
         "sap.suite.ui.generic.template.ListReport.view.ListReport": { 
            ... 
            "controllerName": "STTA_MP.ext.controller.ListReportExtension",
            ...
         }
      } 
      ...
```

**STEP**: OData V2 — Implement onListNavigationExtension in your list report controller extension

**DESCRIPTION**: Implement the onListNavigationExtension handler in your registered controller. Use this.extensionAPI.getNavigationController() to obtain navigation functions. Return true to prevent default internal navigation when you perform external navigation; return false to allow default internal navigation.

- Behavior in example: If ProductCategory == "Notebooks" navigate externally to outbound "EPMProductManageSt"; otherwise allow default internal navigation.

**LANGUAGE**: JavaScript

**CODE**:
```JavaScript
onListNavigationExtension: function(oEvent) {
 var oNavigationController = this.extensionAPI.getNavigationController();
 var oBindingContext = oEvent.getSource().getBindingContext();
 var oObject = oBindingContext.getObject();
 // for notebooks we trigger external navigation for all others we use internal navigation
 if (oObject.ProductCategory == "Notebooks") {
    oNavigationController.navigateExternal("EPMProductManageSt");
 } else {
    // return false to trigger the default internal navigation
    return false;
 }
 // return true is necessary to prevent further default navigation
 return true;
 },
```

**STEP**: OData V2 — Ensure an object page exists (or disable navigation if not desired)

**DESCRIPTION**: For navigation to be available to users, an object page target must be defined. If you don’t want the user to navigate to the object page, follow the Enable External Navigation procedure in the “Changing Navigation to Object Page” documentation to prevent default navigation to the object page.

**LANGUAGE**: Text

**CODE**:
```Text
To ensure that this navigation can be triggered by the user, you must have defined an object page. If you do not want the user to be able to navigate to this object page, follow the procedure described in the Enable External Navigation section in the Changing Navigation to Object Page topic.
```

**STEP**: OData V4 — Add outbound navigation target to manifest.json

**DESCRIPTION**: Define an outbound navigation under sap.app -> crossNavigation -> outbounds to point to the target application. Add the JSON snippet into manifest.json.

**LANGUAGE**: JSON

**CODE**:
```JSON
sap.app": {
    ...
    "crossNavigation": {
        "inbounds": {},
        "outbounds": {
            "FreestyleNav1": {
                "semanticObject": "v4Freestyle",
                "action": "Inbound",
                "parameters": {
                    "SoldToParty": {
                        "value": {
                            "value": "7P100001",
                            "format": "plain"
                        }
                    }
                }
            }
        }
    }
}
```

**STEP**: OData V4 — Configure controller extensions in manifest.json

**DESCRIPTION**: Register controller extensions for the List Report and Object Page controllers under sap.ui5 -> extends -> extensions -> sap.ui.controllerExtensions. Point to your custom controllers (e.g., SalesOrder.ext.LRExtend and SalesOrder.ext.OPExtend).

**LANGUAGE**: JSON

**CODE**:
```JSON
"sap.ui5": {
    "extends": {
        "extensions": {
            "sap.ui.controllerExtensions": {
                "sap.fe.templates.ListReport.ListReportController": {
                    "controllerName": "SalesOrder.ext.LRExtend"
                },
                "sap.fe.templates.ObjectPage.ObjectPageController": {
                    "controllerName": "SalesOrder.ext.OPExtend"
                }
            }
        }
    }
}
```

**STEP**: OData V4 — Implement onBeforeNavigation in the controller extension

**DESCRIPTION**: Implement the override routing.onBeforeNavigation extension method in your List Report controller extension. Use this.base.getExtensionAPI().intentBasedNavigation to navigate outbound. Return true to stop default internal navigation when you perform external navigation; return false to allow default behavior.

- Example: For SalesOrder "6437" navigate outbound to "FreestyleNav" with parameter Customer = "10001". oContextInfo contains lineItem binding context for list report navigation.

**LANGUAGE**: JavaScript

**CODE**:
```JavaScript
override: {
    routing: {
        onBeforeNavigation: function(oContextInfo) {
            var oLineContext = oContextInfo.bindingContext,
            oNav = this.base.getExtensionAPI().intentBasedNavigation;
            // for salesOrder 6437 navigate to FreeStyle App
            if (oLineContext.SalesOrder === "6437") {
                oNav.navigateOutbound("FreestyleNav", { "Customer": "10001" });
            } else {
                // return false to trigger the default internal navigation
                return false;
            }
            // return true is necessary to prevent further default navigation
            return true;                                                       
        }
    }
}
```
--------------------------------

**TITLE**: Replace Standard Chevron Navigation in Object Page Responsive Table (OData V2 & V4)

**INTRODUCTION**: This guide shows how to replace the default chevron navigation from a responsive table on the Object Page with a custom external or internal target. It covers required manifest.json changes and controller extension implementations for both OData V2 and OData V4 SAP Fiori elements apps. Use only the SAP Fiori elements extensionAPI when integrating custom code.

**TAGS**: fiori-elements, extensionAPI, manifest.json, navigation, object-page, responsive-table, OData V2, OData V4, controller-extension, intent-based-navigation, paginator

STEP: Caution / Integration Context
DESCRIPTION: Important integration notes. Use app extensions only if equivalent behavior cannot be achieved by annotations or manifest settings. Integrate only via the official extensionAPI. After adding an extension, the app is responsible for display and system behavior (model/bindings/busy handling). Do not access or manipulate SAP Fiori elements internal controls, properties, models, or other internal objects.
LANGUAGE: text
CODE:
```text
Caution:
Use app extensions with caution and only if you cannot produce the required behavior by other means, such as manifest settings or annotations. To correctly integrate your app extension coding with SAP Fiori elements, use only the `extensionAPI` of SAP Fiori elements. For more information, see Using the extensionAPI.

After you've created an app extension, its display (for example, control placement and layout) and system behavior (for example, model and binding usage, busy handling) lies within the application's responsibility. SAP Fiori elements provides support only for the official `extensionAPI` functions. Don't access or manipulate controls, properties, models, or other internal objects created by the SAP Fiori elements framework.
```

STEP: OData V2 — Add navigation target (outbound) to manifest.json
DESCRIPTION: Add an outbound navigation target (intent) to sap.app > crossNavigation > outbounds in manifest.json to enable external navigation via the FLP outbound/inbound configuration.
LANGUAGE: JSON
CODE:
```json
manifest.json

sap.app": {
...
  "crossNavigation": {
     "inbounds": {},
     "outbounds": {
       "EPMProductManageSt": {
         "semanticObject": "EPMProduct",
         "action": "manage",
         "parameters": {
            "preferredMode": {
               "value": {
                  "value": "display"
               }
            }
         }
      }
   }
 }
....
```

STEP: OData V2 — Register controller extension in manifest.json
DESCRIPTION: Register your object page controller extension in sap.ui5 > extends > extensions > sap.ui.controllerExtensions so SAP Fiori elements uses your custom controller for the ObjectPage view.
LANGUAGE: JSON
CODE:
```json
manifest.json

"extends": {
   "extensions": {
      ... 
      "sap.ui.controllerExtensions": { 
         ...
         "sap.suite.ui.generic.template.ObjectPage.view.Details": { 
            ... 
            "controllerName": "STTA_MP.ext.controller.DetailsExtension",
            ...
         }
      } 
      ...
```

STEP: OData V2 — Implement onListNavigationExtension in controller extension
DESCRIPTION: Implement onListNavigationExtension in your Object Page controller extension. Use the extensionAPI to get the navigation controller and call navigateExternal for external navigation; return false to allow default internal navigation; return true to suppress default navigation.
LANGUAGE: JavaScript
CODE:
```javascript
onListNavigationExtension: function(oEvent) {
 var oNavigationController = this.extensionAPI.getNavigationController();
 var oBindingContext = oEvent.getSource().getBindingContext();
 var oObject = oBindingContext.getObject();
 // for notebooks we trigger external navigation for all others we use internal navigation
 if (oObject.ProductCategory == "Notebooks") {
    oNavigationController.navigateExternal("EPMProductManageSt");
 } else {
    // return false to trigger the default internal navigation
    return false;
 }
 // return true is necessary to prevent further default navigation
 return true;
 },
```

STEP: OData V4 — Add outbound navigation configuration to manifest.json
DESCRIPTION: Add outbound navigation (intent) to sap.app > crossNavigation > outbounds in manifest.json for OData V4 apps. Specify semanticObject, action and optional parameters or formats required by the target app.
LANGUAGE: JSON
CODE:
```json
manifest.json

sap.app": {
    ...
    "crossNavigation": {
        "inbounds": {},
        "outbounds": {
            "FreestyleNav1": {
                "semanticObject": "v4Freestyle",
                "action": "Inbound",
                "parameters": {
                    "SoldToParty": {
                        "value": {
                            "value": "7P100001",
                            "format": "plain"
                        }
                    }
                }
            }
        }
    }
}
```

STEP: OData V4 — Configure controller extensions in manifest.json
DESCRIPTION: Register list-report and object-page controller extensions under sap.ui5 > extends > extensions > sap.ui.controllerExtensions so your custom controllers receive navigation lifecycle hooks like onBeforeNavigation.
LANGUAGE: JSON
CODE:
```json
manifest.json

"sap.ui5": {
    "extends": {
        "extensions": {
            "sap.ui.controllerExtensions": {
                "sap.fe.templates.ListReport.ListReportController": {
                    "controllerName": "SalesOrder.ext.LRExtend"
                },
                "sap.fe.templates.ObjectPage.ObjectPageController": {
                    "controllerName": "SalesOrder.ext.OPExtend"
                }
            }
        }
    }
}
```

STEP: OData V4 — Implement onBeforeNavigation in controller extension
DESCRIPTION: Implement the onBeforeNavigation routing override to inspect the clicked line item (oContextInfo.bindingContext), decide whether to navigate outbound, and call the intent-based navigation API via this.base.getExtensionAPI().intentBasedNavigation. Return false to use default internal navigation; return true to suppress default navigation.
LANGUAGE: JavaScript
CODE:
```javascript
override: {
    routing: {
        onBeforeNavigation: function(oContextInfo) {
            var oLineContext = oContextInfo.bindingContext.getObject( ),
            oNav = this.base.getExtensionAPI().intentBasedNavigation;
            // for salesOrder 6437 navigate to FreeStyle App
            if (oLineContext.SalesOrder === "6437") {
                oNav.navigateOutbound("FreestyleNav", { "Customer": "10001" });
            } else {
                // return false to trigger the default internal navigation
                return false;
            }
            // return true is necessary to prevent further default navigation
            return true;                                                       
        }
    }
}
```

STEP: Paginator behavior — implement determineContextNavigationType()
DESCRIPTION: If you replace standard navigation with external navigation or suppress navigation, implement determineContextNavigationType() per the Paginator API so the framework can skip contexts with ContextNavigationType.None or ContextNavigationType.External when using paginator buttons in the detailed view. See API reference for details.
LANGUAGE: text
CODE:
```text
Note:
When replacing the standard navigation for any record by configuring it to navigate to an external application or suppressing the navigation option, you must implement the determineContextNavigationType() method. This ensures that SAP Fiori elements for OData V4 recognizes this special navigation flow configured for such contexts and enables the correct behavior while using paginator buttons in the detailed view. Contexts that return ContextNavigationType.None or ContextNavigationType.External are skipped when using paginators.

For information about the determineContextNavigationType method, see the API Reference:
https://ui5.sap.com/#/api/sap.fe.core.controllerextensions.Paginator%23methods/determineContextNavigationType
```
--------------------------------

**TITLE**: Extending SAP Fiori Elements Apps with a Canvas Page (OData V2)

**INTRODUCTION**: How to embed a custom Canvas page into a SAP Fiori elements (OData V2) app via manifest configuration, wire required controls, enable routing, and implement navigation and data handling in controller and component lifecycle methods. Includes sample manifest snippets and JavaScript examples for extensionAPI usage and implementing component lifecycle hooks.

**TAGS**: fiori-elements-framework, SAPUI5, manifest.json, canvas, routing, extensionAPI, OData V2, navigation, component, controller

**STEP**: 1 - Declare a Canvas Page in manifest (basic structure)

**DESCRIPTION**: Add a canvas page entry under "sap.ui.generic.app.pages" in the app manifest. Use "sap.suite.ui.generic.template.Canvas" as the embedding component and set "implementingComponent.componentName" to your implementing component qualified name. This snippet shows the minimal structure; preserve surrounding manifest context as needed.

**LANGUAGE**: JSON

**CODE**:
```json
...     
 "sap.ui.generic.app": {   
    ...   
        "pages": {
            "thePageName": {     
                "component": {          
                    "name": "sap.suite.ui.generic.template.Canvas",
                    "settings": {
                    }   
                },
                "implementingComponent": {                              
                    "componentName": "theImplementingComponentQualifiedName",
                        "settings": {                                   
                        ...                             
                    }
                }
            }                       
        },
        ...
}
...
```

**STEP**: 2 - Use componentUsage instead of componentName (alternate manifest pattern)

**DESCRIPTION**: If you define a component usage in the manifest, reference it from "implementingComponent" using "componentUsage" instead of "componentName" to create the implementing component via a manifest component usage entry.

**LANGUAGE**: JSON

**CODE**:
```json
...     
 "sap.ui.generic.app": {   
    ...   
        "pages": {
            "thePageName": {     
                "component": {          
                    "name": "sap.suite.ui.generic.template.Canvas",
                    "settings": {
                    }   
                },
                "implementingComponent": {                              
                    "componentUsage": "theComponentUsageKey",
                        "settings": {                                   
                        ...                             
                    }
                }
            }                       
        },
        ...
}
...
```

**STEP**: 3 - Request standard controls from Canvas (footerBar or flexibleColumnLayoutActions)

**DESCRIPTION**: Configure the Canvas component's "requiredControls" in the "component.settings" section to request standard controls. Use "footerBar": true to allow the implementing component to add the standard footer bar via extension API; or use "flexibleColumnLayoutActions" for flexible column action buttons. You may combine both flags.

**LANGUAGE**: JSON

**CODE**:
```json
...       
"sap.ui.generic.app": {     
    ...         
        "pages": {
            "thePageName": {                
                "component": {                          
                    "name": "sap.suite.ui.generic.template.Canvas",             
                    "settings": { 
                        "requiredControls": {                    
                            "footerBar": true      
                        } 
                    }   
                },
                "implementingComponent": {                              
                    "componentName": "theImplementingComponentQualifiedName",
                            "settings": {                                   
                        ...                             
                    }
                }
            }                       
        },
        ...
}
...
```

**STEP**: 4 - Add routingSpec to enable navigation to the Canvas page

**DESCRIPTION**: Add a "routingSpec" object to the canvas page manifest entry to enable navigation via extensionAPI. Set "noOData", and choose "noKey" depending on whether the routing should carry a key. "routeName" is used to build a unique route name within the app. Do not reuse routeName within the app or match entity set/navigation property names unless intentionally overriding (see below).

**LANGUAGE**: JSON

**CODE**:
```json
...       
"sap.ui.generic.app": {     
    ...         
        "pages": {
            "thePageName": {                
                "component": {                          
                    "name": "sap.suite.ui.generic.template.Canvas",             
                    "settings": { 
                        "requiredControls": {                    
                            "footerBar": true      
                        } 
                    }   
                },
                "implementingComponent": {                              
                    "componentName": "theImplementingComponentQualifiedName",
                            "settings": {                                   
                        ...                             
                    }
                },
                "routingSpec": {
                    "noOData": true,
                    "noKey": true,
                    "routeName": "theRouteName"
                }
            }                       
        },
        ...
}
...
```

**STEP**: 5 - Example parent-child manifest structure (context passed from parent)

**DESCRIPTION**: When the Canvas page is a child of a parent object page, declare it under the parent's "pages" block. The parent page's context (for example entitySet binding) is passed to the Canvas page and also to the implementing component lifecycle methods. Only the parent's extension API instance can be used to navigate to this child canvas page.

**LANGUAGE**: JSON

**CODE**:
```json
...       
"sap.ui.generic.app": {     
...
    "pages": {
        "theParentPageName": {
            "entitySet": "theMainEntitySet",
            "component": {
                "name": "sap.suite.ui.generic.template.ObjectPage",
                "settings": {
                    ...
                }
            }           
            "pages": {
                "thePageName": {                
                    "component": {                          
                        "name": "sap.suite.ui.generic.template.Canvas",             
                        "settings": { 
                            ...
                        } 
                    },  
                    "implementingComponent": {                              
                        "componentName": "theImplementingComponentQualifiedName",
                                "settings": {                                   
                            ...                             
                        }
                    },
                    "routingSpec": {
                        "noOData": true,
                        "noKey": true,
                        "routeName": "theRouteName"
                    }
                },
                ...                         
            }

        },
        ...
    }
...
}
```

**STEP**: 6 - Trigger navigation to a Canvas page from parent extension API (noKey = true)

**DESCRIPTION**: Use the parent page's extensionAPI in an event handler to navigate to the canvas page. This example calls navigateInternal with an empty key because routingSpec.noKey is true. Ensure the extensionAPI instance belongs to the parent page of the target canvas page.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
...
var oApi = this.extensionAPI;   
var oNavigationController = oApi.getNavigationController();   
oNavigationController.navigateInternal("", {     routeName: "theRouteName"   });  

...
```

**STEP**: 7 - Navigate with a user choice (pass single string key) when noKey = false

**DESCRIPTION**: When routingSpec.noKey is false, pass a single string (the user's choice or key) to the canvas page via navigateInternal. Only one string can be passed; complex data must be encoded. Use this code in an event handler (e.g., button press or list navigation extension) on the source page.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
...
var oApi = this.extensionAPI;   
var oNavigationController = oApi.getNavigationController();
var sUsersChoice = ... // do whatever is necessary to determine the users choice   
oNavigationController.navigateInternal(sUsersChoice, {     routeName: "theRouteName"   });  

...
```

**STEP**: 8 - Evaluate the passed user choice in the implementing component (stRefresh)

**DESCRIPTION**: In the implementing component's stRefresh lifecycle method, get current navigation keys via the provided oExtensionAPI, extract the last key as the user's choice, and set it on the component model for binding.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
...
 
  stRefresh: function(oModel, oBindingContext, oExtensionAPI) {
    var oNavigationController = oExtensionAPI.getNavigationController();    
    var aKeys = oNavigationController.getCurrentKeys();    
    var sUserChoice = aKeys[aKeys.length - 1];
    var oComponentModel = this.getComponentModel();    
    oComponentModel.setProperty("/UsersChoice", sUserChoice);     
  }
 
...
```

**STEP**: 9 - Bind a navigation context from a list report to the Canvas view (stStart example)

**DESCRIPTION**: In the implementing component's stStart lifecycle method, get the navigation key from the extensionAPI, build a binding path, and bind the canvas view to that path so smart controls use the provided context. Example is from component.js.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
stStart: function(oModel, oBindingContext, oExtensionAPI) {
            var oComponentModel = this.getComponentModel();
            var sPath = oExtensionAPI.getNavigationController().getCurrentKeys()[1];
            var sBindingPath = "/C_STTA_SalesOrder_WD_20(" + sPath + ")";
            var oPathSpec = {
                path: sBindingPath
            };
            var oCanvasView = oComponentModel.getProperty("/View");
            oCanvasView.bindElement(oPathSpec);
        },
```

**STEP**: 10 - Navigate to a non-child canvas page or ancestor child (use isAbsolute = true)

**DESCRIPTION**: To navigate to a canvas page that is not a child of the current canvas page (including a child of any hierarchical ancestor), pass isAbsolute: true in navigateInternal options. The manifest routingSpec for the target page remains the same (example below shows routingSpec.noKey = false).

**LANGUAGE**: JSON

**CODE**:
```json
...       
"sap.ui.generic.app": {     
...
    "pages": {
        "theParentPageName": {
            "entitySet": "theMainEntitySet",
            "component": {
                "name": "sap.suite.ui.generic.template.ObjectPage",
                "settings": {
                    ...
                }
            }           
            "pages": {
                "thePageName": {                
                    "component": {                          
                        "name": "sap.suite.ui.generic.template.Canvas",             
                        "settings": { 
                            ...
                        } 
                    },  
                    "implementingComponent": {                              
                        "componentName": "theImplementingComponentQualifiedName",
                                "settings": {                                   
                            ...                             
                        }
                    },
                    "routingSpec": {
                        "noOData": true,
                        "noKey": false,
                        "routeName": "theRouteName"
                    }
                },
                ...                         
            }

...
}
```

**LANGUAGE**: JavaScript

**CODE**:
```javascript
...
var oApi = this.extensionAPI;   
var oNavigationController = oApi.getNavigationController();
var sUsersChoice = ... //do whatever is necessary to determine the user's choice 
oNavigationController.navigateInternal(sUsersChoice, {
	routeName: "theRouteName",
	isAbsolute: true
});  
...
```

**STEP**: 11 - Implementation notes and constraints (actionable reminders)

**DESCRIPTION**: - This topic applies only to SAP Fiori elements for OData V2.  
- routeName must be unique within the app and should not clash with entity set or navigation property names unless intentionally overriding behavior (see use-case in docs).  
- The implementing component can use the Canvas extension API to add standard controls when requested via requiredControls.  
- If you need to provide complex information to the canvas page, encode it into a single string before navigation.

**LANGUAGE**: N/A

**CODE**:
```text
Related Information:
Developing Reuse Components: developing-reuse-components-6314fcd.md
Including Reuse Components on an Object Page: including-reuse-components-on-an-object-page-d869d7a.md
UI5 Extension API docs: https://ui5.sap.com/#/api/sap.suite.ui.generic.template.Canvas.extensionAPI.ExtensionAPI
```
--------------------------------

**TITLE**: Extending Custom View Switch

**INTRODUCTION**: Implement a controller extension that dynamically switches card tab views based on filter conditions or custom configuration. Use the onBeforeRebindPageExtension hook to compute a mapping of card IDs to tab indices and call this.setTabIndex(oTabIndexList).

**TAGS**: fiori-elements-framework, UI5, OVP, controller-extension, manifest, view-switch, card

**STEP**: 1 — Create controller extension and implement onBeforeRebindPageExtension

**DESCRIPTION**: 
- Create a controller extension file (for example, customViewswitch.controller.js).
- Implement onBeforeRebindPageExtension(aCards, oSelectionVariant) to inspect visible cards and the current filter/selection variant, build an object mapping CardId -> TabIndex, and call this.setTabIndex(oTabIndexList).
- Input parameters:
  - aCards: Array of visible card objects (each has an id property).
  - oSelectionVariant: Object containing filter values (has Parameters and SelectOptions arrays).
- TabIndex rules: values start at 1 and must not exceed the number of tabs for the card.
- Example mapping: var oTabIndexList = {"card1": 2, "card2": 1};

**LANGUAGE**: JavaScript

**CODE**:
```javascript
/*
* Breakout function for dynamic view switch
* */
onBeforeRebindPageExtension: function (aCards, oSelectionVariant) {
    var oTabIndexList = {};
    var oFilterList = this._getFilterList(oSelectionVariant); //Sample logic
    var oTabIndexList = {};
    if (aCards && aCards.length > 0) {
        for (var i = 0; i < aCards.length; i++) {
            if (aCards[i].id == "card012") {
                if (oFilterList && oFilterList.hasOwnProperty("SupplierName")) {
                    if (oFilterList.SupplierName == "SAP") {
                        oTabIndexList["card012"] = 1; 
                    } else if (oFilterList.SupplierName == "Talpa") {
                        oTabIndexList["card012"] = 2;
                    }
                }
            }
        }
    }//End of sample logic	

    this.setTabIndex(oTabIndexList); //Pass updated oTabIndexList object here
}
```

**STEP**: 2 — Implement supporting helper to extract filters from oSelectionVariant

**DESCRIPTION**: Implement a helper method _getFilterList(oSelectionVariant) to return a flat object of filter property names to values by reading both Parameters and SelectOptions (ranges with Option == "EQ").

**LANGUAGE**: JavaScript

**CODE**:
```javascript
//get all filters with values
_getFilterList: function (oSelectionVariant) {
    var oFilterList = {};
    if (oSelectionVariant && oSelectionVariant.Parameters && oSelectionVariant.Parameters.length > 0) {
        for (var i = 0; i < oSelectionVariant.Parameters.length; i++) {
            oFilterList[oSelectionVariant.Parameters[i].PropertyName] = oSelectionVariant.Parameters[i].PropertyValue;
        }
    }
    if (oSelectionVariant && oSelectionVariant.SelectOptions && oSelectionVariant.SelectOptions.length > 0) {
        for (var j = 0; j < oSelectionVariant.SelectOptions.length; j++) {
            var aRanges = oSelectionVariant.SelectOptions[j].Ranges;
            for (var k = 0; k < aRanges.length; k++) {
                if (aRanges[k].Option == "EQ" && aRanges[k].Low !== "") {
                    oFilterList[oSelectionVariant.SelectOptions[j].PropertyName] = aRanges[k].Low;
                }
            }
        }
    }
    return oFilterList;
},
```

**STEP**: 3 — Register controller extension in manifest.json

**DESCRIPTION**: Add a controller extension entry under "extends" -> "extensions" -> "sap.ui.controllerExtensions". Set controllerName to the module path of your controller (e.g., sap.ovp.demo.ext.customController). Ensure the module exists at the corresponding file path.

**LANGUAGE**: JSON

**CODE**:
```json
"extends": {
    "extensions": {
        "sap.ui.controllerExtensions": {
            "sap.ovp.app.Main": {
                "controllerName": "sap.ovp.demo.ext.customController"
            }
        }
    }
}
```
--------------------------------

**TITLE**: Extending Delivered SAP Fiori Elements Apps Using Adaptation Extensions

**INTRODUCTION**: Use the Adaptation Editor in SAP Business Application Studio (BAS) to create UI adaptation projects that extend delivered SAP Fiori elements applications. This guide summarizes supported page types, available adaptation extension points, overrideable extension functions, and shows a sample override code snippet for List Report addFilters. Use these steps to implement ControllerExtension overrides (templateBased/templateBaseExtension points) as part of an adaptation project.

**TAGS**: fiori-elements-framework, adaptation, adaptation-editor, business-application-studio, controllerextension, OData V2, OData V4, list-report, object-page, overview-page

STEP: 1 — Prerequisites and scope

DESCRIPTION: Create an adaptation project in SAP Business Application Studio using the Adaptation Editor. Supported page types and limitations:
- Supported: List Report, Object Page, Overview Page, Analytical List Page.
- Not supported: Flexible Column Layout.
- The adaptation project references delivered/base (parent) applications.
- For an end-to-end example of creating an adaptation project, see: https://help.sap.com/docs/bas/developing-sap-fiori-app-in-sap-business-application-studio/extending-sap-fiori-application

LANGUAGE: Text

CODE:
```Text
Create an adaptation project in SAP Business Application Studio using the Adaptation Editor and select the delivered app as the parent application.
```

STEP: 2 — Adaptation extension use cases (OData V2)

DESCRIPTION: For OData V2 based Fiori elements apps, adaptation extensions can be used to:
- List Report & Analytical List Page:
  - Add fields to Smart Filter Bar
  - Add columns to tables
  - Add table toolbar buttons and controller logic
  - Override extension functions (see list below)
  - Visual reference: images/List_Report_Adaptation_extensions_d09b292.png
- Object Page:
  - Add toolbar actions, sections, header fields, form fields/field groups
  - Override extension functions (see list below)
  - Visual reference: images/Object_Page_Adaptation_Extensions_07345eb.png
- Overview Page:
  - Add fields to Smart Filter Bar, global actions, controller logic, cards (clone/edit/add)
  - Override extension functions (see list below)

LANGUAGE: Text

CODE:
```Text
Adaptation extensions apply to List Report, Object Page, Overview Page, and Analytical List Page for OData V2 apps.
```

STEP: 3 — List Report: overrideable extension functions and sample override

DESCRIPTION: Override the List Report extension functions as part of a ControllerExtension by implementing the templateBased/templateBaseExtension override points. Common overrideable functions for List Report and Analytical List Page:
- onInitSmartFilterBar
- provideExtensionAppStateData
- restoreExtensionAppStateData
- ensureFieldsForSelect
- addFilters

Example: Overriding addFilters (sample code preserved):

LANGUAGE: JavaScript

CODE:
```JavaScript
override: {	
    // override public method of the ListReport controller 
    templateBaseExtension: {	
        addFilters: function(fnAddFilter, sControlId){							
            // custom logic
        }
    }
}
```

STEP: 4 — Object Page: overrideable extension functions and use cases

DESCRIPTION: For Object Page adaptation projects, you can:
- Add toolbar actions, additional sections, header fields, form fields/field groups.
- Override these functions as part of ControllerExtension/templateBasedExtension:
  - provideExtensionStateData
  - restoreExtensionStateData
  - ensureFieldsForSelect
  - addFilters

LANGUAGE: Text

CODE:
```Text
Implement ControllerExtension overrides (templateBasedExtension) to provide/restore extension state data, ensure select fields, and add filters on Object Page.
```

STEP: 5 — Overview Page: overrideable extension functions and use cases

DESCRIPTION: For Overview Page adaptation projects, you can:
- Add fields to Smart Filter Bar, add global actions to filter bar, add extension controller logic.
- Add, clone, and edit cards.
- Override these functions as part of ControllerExtension/templateBasedExtension:
  - provideExtensionAppStateData
  - restoreExtensionAppStateData
  - addFilters
  - provideStartupExtension
  - provideExtensionNavigation
  - provideCustomActionPress
  - provideCustomParameter

LANGUAGE: Text

CODE:
```Text
Use ControllerExtension overrides to extend Overview Page behaviors, card handling, and custom parameters/actions.
```

STEP: 6 — OData V4: controllerextensions API and Safe Mode

DESCRIPTION: For OData V4 Fiori elements apps, use the controllerextensions API to override framework behavior and implement hooks for custom logic. References and tools:
- API Reference: https://ui5.sap.com/#/api/sap.fe.core.controllerextensions
- Live examples and guidance: Standard Floorplans - Extensions - Overview: https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/controllerExtensions/guidanceControllerExtensions
- Adapt UI in Safe Mode documentation: SAPUI5 Flexibility: Adapting UIs Made Easy (link in references)

LANGUAGE: Text

CODE:
```Text
Use sap.fe.core.controllerextensions to register and implement ControllerExtension overrides for OData V4 Fiori elements apps.
```

STEP: 7 — Notes, limitations, and API reference caveat

DESCRIPTION: Important notes:
- The extension points listed in the UI5 API Reference (for example sap.suite.ui.generic.template.ListReport.controllerFrameworkExtensions) cannot be consumed directly as part of an adaptation project.
- Use the templateBased/templateBaseExtension override points exposed by the adaptation framework instead.
- Check "Details of Extension Functions Used for Extending Delivered Apps" for deeper reference (details-of-extension-functions-used-for-extending-delivered-apps-82630e5.md).

LANGUAGE: Text

CODE:
```Text
Do not use UI5 controllerFrameworkExtensions API endpoints directly in adaptation projects; implement overrides via templateBased/templateBaseExtension points instead.
```

STEP: 8 — Related resources

DESCRIPTION: Further reading and related documentation:
- SAPUI5 Flexibility: Enable Your App for UI Adaptation: ../05_Developing_Apps/sapui5-flexibility-enable-your-app-for-ui-adaptation-f1430c0.md
- SAPUI5 Flexibility: Adapting UIs Made Easy: ../04_Essentials/sapui5-flexibility-adapting-uis-made-easy-a8e55aa.md
- Adapting the UI: adapting-the-ui-59bfd31.md
- Extending SAP Fiori Applications (BAS): https://help.sap.com/docs/bas/developing-sap-fiori-app-in-sap-business-application-studio/extending-sap-fiori-application?locale=en-US

LANGUAGE: Text

CODE:
```Text
Follow the linked references for examples, API details, and step-by-step guidance when implementing adaptation projects and ControllerExtension overrides.
```
--------------------------------

**TITLE**: Extending Generated SAP Fiori Elements Apps Using App Extensions

**INTRODUCTION**: Practical, code-focused guidance for implementing app extensions in SAP Fiori elements generated applications. Covers when to extend, required cautionary constraints, primary extension mechanisms (manifest changes and SAPUI5 extension points), recommended resources and links for OData V2 and V4 scenarios, and pointers to SAP Fiori tools for creating extensions.

**TAGS**: fiori-elements, app-extensions, sapui5, manifest, extensionAPI, odata-v2, odata-v4, sap-fiori-tools

**STEP**: 1 — Read prerequisites and warnings

**DESCRIPTION**: Before implementing extensions, read the "Read Before Extending a Generated App" guidance and follow the caution: prefer manifest settings and annotations over code extensions. Use app extensions only when absolutely necessary.

**LANGUAGE**: text

**CODE**:
```text
Read Before Extending a Generated App:
- Document: read-before-extending-a-generated-app-d9c146a.md
- Key caution: Use app extensions only when required. Prefer manifest settings or annotations.
- Integration rule: Use only the SAP Fiori elements extensionAPI. Do NOT access or manipulate internal framework controls, properties, models, or binding internals.
```

**STEP**: 2 — Choose extension mechanism based on floorplan

**DESCRIPTION**: Determine which mechanism is appropriate for your floorplan:
- Use manifest.json modifications for configuration-based extensions where available.
- Use SAPUI5 extension points (controller extensions, custom fragments, XML view hooks) when UI control placement or custom logic is required.
- Remember: display/layout and runtime behavior become your responsibility after extension; Fiori elements only supports official extensionAPI functions.

**LANGUAGE**: text

**CODE**:
```text
Typical extension touchpoints:
- File: webapp/manifest.json (manifest-based configuration changes)
- Files: webapp/ext/<yourExtensionController>.js or webapp/controls/<customFragment>.fragment.xml (UI5 controller/fragment extensions)
- Hook into SAP Fiori elements using: extensionAPI methods (see API reference)
Note: After creating an extension, the app owner is responsible for display and runtime behavior.
```

**STEP**: 3 — Use the official ExtensionAPI only

**DESCRIPTION**: All code-based extensions must integrate with SAP Fiori elements via the documented ExtensionAPI. Do not manipulate internal framework objects. Use ExtensionAPI functions for adding filters, actions, navigation, or custom UI elements where supported.

**LANGUAGE**: text

**CODE**:
```text
ExtensionAPI reference:
- OData V4 / UI5 API: https://ui5.sap.com/#/api/sap.fe.core.ExtensionAPI
- Follow only the public methods and lifecycle patterns documented here.
```

**STEP**: 4 — Use SAP Fiori tools to create app extensions (recommended workflow)

**DESCRIPTION**: Use SAP Fiori tools extensions for Visual Studio Code or SAP Business Application Studio to scaffold and maintain app extension artifacts. These tools provide guided configuration for page elements and extension wiring.

**LANGUAGE**: text

**CODE**:
```text
SAP Fiori tools resources:
- SAP Fiori tools: https://help.sap.com/viewer/product/SAP_FIORI_tools/Latest/en-US
- Configure Page Elements: https://help.sap.com/docs/SAP_FIORI_tools/17d50220bcd848aa854c9c182d65b699/047507c86afa4e96bb3d284adb9f4726.html
```

**STEP**: 5 — Follow floorplan-specific extension docs and examples

**DESCRIPTION**: Consult these specific guides per floorplan to apply the correct extension patterns and manifest changes. Use them to find specific extension points and scaffolding examples.

**LANGUAGE**: text

**CODE**:
```text
Floorplan-specific extension documentation:
- Extending List Reports and Object Pages Using App Extensions:
  extending-list-reports-and-object-pages-using-app-extensions-a892eb8.md
- Configuring Analytical List Page App Extensions:
  configuring-analytical-list-page-app-extensions-9504fb4.md
- Configuring Overview Page App Extensions:
  configuring-overview-page-app-extensions-b240f61.md
- General SAPUI5 app extension patterns:
  ../08_Extending_SAPUI5_Applications/extending-apps-a264a9a.md
```

**STEP**: 6 — OData V2 vs V4 considerations

**DESCRIPTION**: When working with OData V2 or V4, prefer the extension guidance for the respective version. For OData V4, consult the ExtensionAPI reference on UI5 for the exact API surface.

**LANGUAGE**: text

**CODE**:
```text
Additional features & references:
- SAP Fiori elements for OData V2: use SAP Fiori tools and floorplan-specific docs (see Step 5)
- SAP Fiori elements for OData V4: ExtensionAPI reference:
  https://ui5.sap.com/#/api/sap.fe.core.ExtensionAPI
```

**STEP**: 7 — Checklist before committing extension code

**DESCRIPTION**: Quick checklist for code-generation agents to validate extension readiness and compliance.

**LANGUAGE**: text

**CODE**:
```text
Pre-commit checklist:
- Confirm requirement cannot be met with manifest settings or annotations.
- Confirm only public ExtensionAPI methods are used.
- Ensure no direct access to framework internals (controls, private models, binding internals).
- Add unit/integration tests for new extension behaviors.
- Document extension location: webapp/manifest.json changes, webapp/ext/<files>, and any fragment XML.
- Verify compatibility with the targeted SAP Fiori elements floorplan and OData version.
```
--------------------------------

**TITLE**: Extending List Reports and Object Pages Using App Extensions

**INTRODUCTION**: This document summarizes the required precautions, resources, and actionable steps for adding app extensions to SAP Fiori elements List Reports and Object Pages. Use this as a concise checklist and link map for implementing extensions safely and correctly. Prefer manifest/annotation/configuration solutions; use app extensions only when necessary. Always use the SAP Fiori elements extensionAPI.

**TAGS**: fiori-elements, app-extension, extensionAPI, list-report, object-page, SAP Fiori tools

**STEP**: 1 — Read prerequisite guidance

**DESCRIPTION**: Before creating any app extension, read the prerequisite guidance that explains extension implications and best practices. This ensures you understand what parts of the app you can safely extend and what must remain managed by SAP Fiori elements.

**LANGUAGE**: text

**CODE**:
```text
Read: "Read Before Extending a Generated App"
Path or link: read-before-extending-a-generated-app-d9c146a.md
```

**STEP**: 2 — Follow the security/maintenance caution

**DESCRIPTION**: Only use app extensions when required. After you add an extension, display/layout and system behavior of that extension (control placement, model usage, busy handling) become your responsibility. Do not access or manipulate internal SAP Fiori elements framework objects (controls, models, bindings) directly. Use only the official extensionAPI exposed by SAP Fiori elements.

**LANGUAGE**: text

**CODE**:
```text
Caution:
- Use app extensions only if manifest settings, annotations, or standard APIs can't achieve the behavior.
- Use only the SAP Fiori elements extensionAPI. Do NOT access internal controls, models, properties, or binding internals created by the framework.
```

**STEP**: 3 — Learn how to use the extensionAPI

**DESCRIPTION**: Use the official extensionAPI for all integration points between your extension code and SAP Fiori elements. Review the extensionAPI documentation to find supported methods, lifecycle hooks, and recommended patterns. This avoids fragile implementations and ensures compatibility with framework-managed features (e.g., smart handling, navigation, message handling).

**LANGUAGE**: text

**CODE**:
```text
Reference: "Using the extensionAPI"
Path or link: using-the-extensionapi-bd2994b.md
```

**STEP**: 4 — Create extensions using SAP Fiori tools or manually

**DESCRIPTION**: You can scaffold and manage app extensions either via SAP Fiori tools (recommended) or manually:
- SAP Fiori tools: extensions for Business Application Studio and Visual Studio Code provide GUI and generators.
- Manual: create extension files and register them according to your project structure/manifest.

Use the Configure Page Elements documentation for step-by-step guidance on creating and wiring the extension points.

**LANGUAGE**: text

**CODE**:
```text
SAP Fiori tools: https://help.sap.com/viewer/product/SAP_FIORI_tools/Latest/en-US
Guide: "Configure Page Elements" - https://help.sap.com/docs/SAP_FIORI_tools/17d50220bcd848aa854c9c182d65b699/047507c86afa4e96bb3d284adb9f4726.html
```

**STEP**: 5 — Note about deprecated Web IDE videos

**DESCRIPTION**: Older video walkthroughs using SAP Web IDE were removed from the main documentation because SAP Web IDE is no longer actively supported. If needed, you can still access archived video content from older versions of the documentation.

**LANGUAGE**: text

**CODE**:
```text
Note: Web IDE step-by-step videos removed from current docs; archived versions remain available in older document versions.
```

**STEP**: 6 — Related example: add a custom message strip

**DESCRIPTION**: If your extension needs to show custom text messages above a table on a List Report or Object Page, review the "Adding a Custom Message Strip" example for implementation details.

**LANGUAGE**: text

**CODE**:
```text
Related doc: "Adding a Custom Message Strip to List Report and Analytical List Page"
Link: adding-a-custom-message-strip-to-list-report-analytical-list-page-and-object-page-tables-0fdbefb.md
```
--------------------------------

**TITLE**: App Extension Manifest Examples for SAP Fiori Elements (OData V2 & V4)

**INTRODUCTION**: This document provides concrete manifest examples and actionable guidance to register controller extensions for SAP Fiori elements-based apps. It shows how to target controllers at different specificity levels (global view vs. specific page instance) for both OData V2 and OData V4 floorplans. Use these manifest snippets when you need to override or extend standard controllers on an Object Page or other Fiori Elements views.

**TAGS**: fiori-elements-framework, sapui5, manifest, object-page, odata-v2, odata-v4, extension, routing

**STEP**: 1 — OData V2: Register a global view controller and a page-specific controller

**DESCRIPTION**: Add controller registration entries in the manifest to load either a generic controller for a view or a more specific controller for a single page instance. The "most specific" manifest key wins. Behind the hash (#) is the view ID that makes an entry page-specific.

**LANGUAGE**: JSON

**CODE**:
```json
"sap.suite.ui.generic.template.ObjectPage.view.Details": {
	"controllerName": "SalesOrder.ext.controller.DetailsExtension",
},
"sap.suite.ui.generic.template.ObjectPage.view.Details#SalesOrder::sap.suite.ui.generic.template.ObjectPage.view.Details::SalesOrder_WD" {
	"controllerName": "SalesOrder.ext.controller.SalesOrderExtension",
}
```

**STEP**: 2 — OData V4: Register a generic ObjectPage controller and a page-specific controller

**DESCRIPTION**: For OData V4 Fiori Elements, register controllerName for the template controller and a more specific entry that includes the page ID after the hash. The specific entry will be used for the given page ID; the generic one is the fallback.

**LANGUAGE**: JSON

**CODE**:
```json
"sap.fe.templates.ObjectPage.ObjectPageController": {
    "controllerName": "SalesOrder.ext.OPExtend"
},
"sap.fe.templates.ObjectPage.ObjectPageController#SalesOrder::SalesOrderManageObjectPage": {
    "controllerName": "SalesOrder.ext.SalesOrderOPExtend"
}
```

**STEP**: 3 — OData V2: Multiple page-specific controller registrations with entity set mapping

**DESCRIPTION**: Example showing multiple manifest keys mapping different page instances (by app name, view ID and entity set) to distinct controllers. This pattern is useful when a single application contains multiple object pages (different entity sets) that require different controller extensions. The "most specific" entry (including the hash) overrides the generic view entry.

**LANGUAGE**: JSON

**CODE**:
```json
"sap.suite.ui.generic.template.ObjectPage.view.Details": {
                        "controllerName": "STTASOWD20.ext.controller.DetailsExtension",
                        "sap.ui.generic.app": {
                            "C_STTA_SalesOrder_WD_20": {
                                "EntitySet": "C_STTA_SalesOrder_WD_20"
                            }
                        }
                    },
                    "sap.suite.ui.generic.template.ObjectPage.view.Details#STTASOWD20::sap.suite.ui.generic.template.ObjectPage.view.Details::C_STTA_SalesOrder_WD_20": {
                        "controllerName": "STTASOWD20.ext.controller.SalesOrderExtension",
                        "sap.ui.generic.app": {
                            "C_STTA_SalesOrder_WD_20": {
                                "EntitySet": "C_STTA_SalesOrder_WD_20"
                            }
                        }
                    },
                    "sap.suite.ui.generic.template.ObjectPage.view.Details#STTASOWD20::sap.suite.ui.generic.template.ObjectPage.view.Details::C_STTA_SalesOrderItem_WD_20": {
                        "controllerName": "STTASOWD20.ext.controller.SalesOrderItemExtension",
                        "sap.ui.generic.app": {
                            "C_STTA_SalesOrderItem_WD_20": {
                                "EntitySet": "C_STTA_SalesOrderItem_WD_20"
                            }
                        }
                    }
```

**STEP**: 4 — OData V4: Use routing configuration to derive the page ID for targeting extensions

**DESCRIPTION**: For OData V4, object page targets are typically defined via the routing configuration in the manifest. The target ID (for example "MainEntityObjectPage") combined with the application ID becomes the page ID you can use after the hash in controller registration (MyApplicationID::MainEntityObjectPage). Use this manifest routing example to determine the page identifier for page-specific extension entries.

**LANGUAGE**: JSON

**CODE**:
```json
{
   "sap.app": {
      "id": "MyApplicationID",
      "type": "application"
   },
   "sap.ui5": {
   "routing": {
          "config": {
            "async": true
          },
          "routes": [
            {
              "pattern": "MainEntity({key}):?query:",
              "name": "MainEntityObjectPage",
              "target": "MainEntityObjectPageTarget"
            }
          ],
          "targets": {
            "MainEntityObjectPageTarget": {
              "type": "Component",
              "id": "MainEntityObjectPage",
              "name": "sap.fe.templates.ObjectPage",
              "options": {
                "settings": {
                  "contextPath": "/MainEntity"
                }
              }
            }
          }
        }
   }
}
```

**STEP**: 5 — Additional notes and supported floorplans (OData V2)

**DESCRIPTION**: Adaptation-style app extensions allow safe, upgrade-friendly customizations and are supported for these floorplans: list report, object page, overview page and analytical list page. Extension points can be implemented via manifest changes or SAPUI5 extension points depending on the floorplan. See your project’s adaptation/extension strategy and use the manifest patterns above to register controller overrides.
--------------------------------

**TITLE**: Enforce Static Launchpad Tiles for Fiori Elements Bookmarks (OData V2)

**INTRODUCTION**: Extend the standard bookmark function in SAP Fiori elements (OData V2) to force creation of static tiles on the SAP Fiori Launchpad by adding the onSaveAsTileExtension extension point to a list report or analytical list page controller extension. Use this when dynamic tiles are undesirable (e.g., to avoid incorrect runtime data fetches or inconsistent representations).

**TAGS**: fiori-elements-framework, SAP Fiori, bookmark, launchpad, tiles, static-tile, OData V2, extension-point, controller-extension, manifest

**STEP**: 1 — Preconditions and behavior summary

**DESCRIPTION**: Confirm applicability and understand default behavior:
- Applicable only for SAP Fiori elements for OData V2.
- The onSaveAsTileExtension extension point is usable only for tiles added using the bookmark (Share) function.
- Default tile behavior:
  - List reports and analytical list pages: dynamic tiles by default, except if semantic date range fields are used and populated — then a static tile is created.
  - Object pages: static tile by default.
- Use the extension to enforce a static tile (prevent dynamic tile creation) by overriding the serviceUrl field on the oShareInfo object.

**LANGUAGE**: Text

**CODE**:
```text
Notes:
- Ensure you already added a controller extension in manifest.json for your app (prerequisite).
- The extension receives a single parameter oShareInfo; set oShareInfo.serviceUrl = "" to force a static tile.
```

**STEP**: 2 — Implement onSaveAsTileExtension in your controller extension

**DESCRIPTION**: Add the onSaveAsTileExtension method to your controller extension file. Overwrite the serviceUrl field on the provided oShareInfo object. Setting serviceUrl to an empty string forces a static tile. You may instead set it to any explicit service URL string to control dynamic tile behavior.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
sap.ui.define([], function () {
   "use strict";
   return {
      onSaveAsTileExtension: function(oShareInfo) {
         oShareInfo.serviceUrl = ""; // Force static tile
      }
   };
});
```

**STEP**: 3 — Implementation notes and alternatives

**DESCRIPTION**: Implementation details to follow while coding:
- Place the above code in your controller extension module (the module referenced in manifest.json).
- The extension receives oShareInfo; available fields include serviceUrl (the one to override). Setting it to "" enforces a static tile; setting it to a specific URL string forces a dynamic tile that uses that URL.
- Use this extension only for tiles created via the Share/bookmark action. It does not affect other tile creation mechanisms.
- Consider semantic date range behavior: if the filter bar uses semantic date range fields and any such field is populated, a static tile may be created by default; otherwise a dynamic tile is used for list reports and analytical list pages.

**LANGUAGE**: Text

**CODE**:
```text
Reminder:
- This approach is intended for OData V2 Fiori elements apps.
- Ensure the controller extension entry exists in manifest.json before adding the method.
```
--------------------------------

**TITLE**: Extending Delivered Apps Manifest Using an Adaptation Project (SAP Fiori elements, OData V2)

**INTRODUCTION**: This guide shows exact manifest/appdescr_variant and annotation changes to extend SAP-delivered Fiori elements apps using an adaptation project. Use the provided JSON/XML snippets to:
- add new subobject pages,
- change page and application configurations (table types, createMode, filters, navigation, etc.),
- add selection presentation variants via annotations,
- include reuse components (libraries/componentUsages and embeddedComponents),
and to register annotation files in the adaptation project's manifest.appdescr_variant.

**TAGS**: fiori-elements-framework, adaptation, manifest.appdescr_variant, manifest.json, OData V2, annotations, reuse-component, neo-app.json, headerWhiteList

**STEP**: Prerequisites

**DESCRIPTION**: Ensure you meet these preconditions before applying the changes:
- SAPUI5 1.108 or higher (ABAP platform 2021 or higher).
- In the application manifest.json, pages and subpages must be specified in object format within sap.ui.generic.app (array format supported as of SAPUI5 1.133).
- Backend: new navigation node must be added and exposed in the OData service metadata before adding a new subobject page.

**LANGUAGE**: Text

**CODE**:
```Text
Files referenced:
- manifest.appdescr_variant (adaptation project) -> Add change definitions to the content[] array.
- manifest.json (application) -> target for the mergers identified by parentPage/entitySet and propertyPath.
- neo-app.json (consuming application) -> add headerWhiteList when reuse components require specific headers.
- changes/annotations/annotations.xml -> local annotation file referenced by appdescr_variant if adding annotations.
```

**STEP**: Add a New Subobject Page (manifest.appdescr_variant)

**DESCRIPTION**: Add this JSON change object to the adaptation project's manifest.appdescr_variant content[] to add a detail (subobject) page for a newly extended node. Ensure the backend navigationProperty and entitySet exist. Set the appropriate layer prefix in childPage.id (e.g., "customer." for customer/vendor layers as described).

**LANGUAGE**: JSON

**CODE**:
```json
{
    "changeType": "appdescr_ui_generic_app_addNewObjectPage",
    "content": {
        "parentPage": {
        "component": "sap.suite.ui.generic.template.ObjectPage",
            "entitySet": "C_STTA_SalesOrder_WD_20"
        },            
        "childPage": {
            "id": "customer.ObjectPage|to_extendedNode",
            "definition": {
                "navigationProperty": "to_extendedNode",
                "entitySet": "C_STTA_ExtendedNode"
            }
        }
    }
}
```

**STEP**: Define Node Configuration (createMode, table type) (manifest.appdescr_variant)

**DESCRIPTION**: Use this change to UPSERT section settings for a given parent page (ObjectPage). Adjust propertyPath to point to the facet/section ID (component/settings/sections/<facetId>) or to the component/settings root for page-level settings.

**LANGUAGE**: JSON

**CODE**:
```json
{
    "changeType": "appdescr_ui_generic_app_changePageConfiguration",
    "content": {
        "parentPage": {
            "component": "sap.suite.ui.generic.template.ObjectPage",
            "entitySet": "C_STTA_SalesOrder_WD_20"
        },            
        "entityPropertyChange": {
            "propertyPath": "component/settings/sections/extendedFacetId",
            "operation": "UPSERT",
            "propertyValue": {
                "createMode": "inline",
                "tableSettings": {
                    "tableType": "GridTable"
                }
            }
        }
    }
}
```

**STEP**: Modify Application-level Settings (createMode & flexibleColumnLayout) (manifest.appdescr_variant)

**DESCRIPTION**: UPSERT application-level settings (component settings) such as tableSettings.createMode and flexibleColumnLayout defaults. Add this object to the content[] array.

**LANGUAGE**: JSON

**CODE**:
```json
{
    "changeType": "appdescr_ui_generic_app_changePageConfiguration",
    "content": {
        "parentPage": {
            "component": "sap.suite.ui.generic.template"
        },
        "entityPropertyChange": {
            "propertyPath": "settings",
            "operation": "UPSERT",
            "propertyValue": {
                "tableSettings": {
                    "createMode": "creationRows"
                },
                "flexibleColumnLayout": {
                    "defaultTwoColumnLayoutType": "TwoColumnsMidExpanded",
                    "defaultThreeColumnLayoutType": "ThreeColumnsEndExpanded"
                }
            }
        }
    }
}
```

**STEP**: Modify externalNavigationSettings and inboundParameters (manifest.appdescr_variant)

**DESCRIPTION**: Use this UPSERT to add external navigation defaults and inbound parameter settings at the component settings level.

**LANGUAGE**: JSON

**CODE**:
```json
{
    "changeType": "appdescr_ui_generic_app_changePageConfiguration",
    "content": {
        "parentPage": {
            "component": "sap.suite.ui.generic.template"
        },
        "entityPropertyChange": {
            "propertyPath": "settings",
            "operation": "UPSERT",
            "propertyValue": {
                "externalNavigationSettings": {
                    "defaultOutboundSettings": {
                        "refreshStrategyOnAppRestore": {
                            "entitySets": {
                                "STTA_C_MP_Product": "self"
                            }
                        }
                    }
                },
                "inboundParameters": {
                    "Supplier": {
                        "useForCreate": true
                    }
                }
            }
        }
    } 
}
```

**STEP**: Add filterSettings (historySettings & dateSettings) for List Report (manifest.appdescr_variant)

**DESCRIPTION**: UPSERT list report component settings to configure filter history and date filter behavior for an entitySet.

**LANGUAGE**: JSON

**CODE**:
```json
{
    "changeType": "appdescr_ui_generic_app_changePageConfiguration",
    "content": {
        "parentPage": {
            "component": "sap.suite.ui.generic.template.ListReport",
            "entitySet": "STTA_C_MP_Product"
        },
        "entityPropertyChange": {
            "propertyPath": "component/settings",
            "operation": "UPSERT",
            "propertyValue": {
                "filterSettings": {
                    "historySettings": {
                        "historyEnabled": "enabled"
                    },
                    "dateSettings": {
                        "useDateRange": false,
                        "selectedValues": "DAYS,WEEK,MONTH,DATERANGE",
                        "fields": {
                            "SemanticDate1": {
                                "selectedValues": "TOMORROW",
                                "exclude": true
                            },
                            "SemanticDate2": {
                                "defaultValue": {
                                    "operation": "LASTYEAR"
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}
```

**STEP**: Enable table filter in page variant, dataLoadSettings, condensedTableLayout (manifest.appdescr_variant)

**DESCRIPTION**: UPSERT these list report settings to enable table filter in page variants, control initial data load, and set table layout.

**LANGUAGE**: JSON

**CODE**:
```json
{
    "changeType": "appdescr_ui_generic_app_changePageConfiguration",
    "content": {
        "parentPage": {
            "component": "sap.suite.ui.generic.template.ListReport",
            "entitySet": "STTA_C_MP_Product"
        },
        "entityPropertyChange": {
            "propertyPath": "component/settings",
            "operation": "UPSERT",
            "propertyValue": {
                "enableTableFilterInPageVariant":true,
                "dataLoadSettings": {
                    "loadDataOnAppLaunch": "never"
                },
                "condensedTableLayout":true
            }
        }
    }
}
```

**STEP**: Change tableSettings (type, multiSelect, selectAll, multiEdit) (manifest.appdescr_variant)

**DESCRIPTION**: UPSERT table settings on the List Report for an entitySet to configure table type and selection/multi-edit behaviors.

**LANGUAGE**: JSON

**CODE**:
```json
{
    "changeType": "appdescr_ui_generic_app_changePageConfiguration",
    "content": {
        "parentPage": {
            "component": "sap.suite.ui.generic.template.ListReport",
            "entitySet": "STTA_C_MP_Product"
        },
        "entityPropertyChange": {
            "propertyPath": "component/settings/tableSettings",
            "operation": "UPSERT",
            "propertyValue": {
                "type": "GridTable",
                "multiSelect": true,
                "selectAll": false,
                "multiEdit": {
                    "enabled": true
                }
            }
        }
    }
}
```

**STEP**: Add fields to createWithParameterDialog (manifest.appdescr_variant)

**DESCRIPTION**: UPSERT dialog fields mapping for createWithParameterDialog in tableSettings. Adjust path to entitySet that contains the table.

**LANGUAGE**: JSON

**CODE**:
```json
{
    "changeType": "appdescr_ui_generic_app_changePageConfiguration",
    "content": {
        "parentPage": {
            "component": "sap.suite.ui.generic.template.ListReport",
            "entitySet": "STTA_C_SO_SalesOrder_ND"
        },
        "entityPropertyChange": {
            "propertyPath":
            "component/settings/tableSettings/createWithParameterDialog/fields",
            "operation": "UPSERT",
            "propertyValue": {
                "CurrencyCode":{
                    "path":"CurrencyCode"
                }
            }
        }
    }
}
```

**STEP**: Modify Object Page editableHeaderContent and showRelatedApps (manifest.appdescr_variant)

**DESCRIPTION**: UPSERT object page component settings to toggle editableHeaderContent and showRelatedApps flags.

**LANGUAGE**: JSON

**CODE**:
```json
{
    "changeType": "appdescr_ui_generic_app_changePageConfiguration",
    "content": {
        "parentPage" : {
            "component": "sap.suite.ui.generic.template.ObjectPage",
            "entitySet": "STTA_C_MP_Product"
        },
        "entityPropertyChange": {
            "propertyPath": "component/settings",
            "operation": "UPSERT",
            "propertyValue": {
                "editableHeaderContent":false,
                "showRelatedApps":false
            }
        }
    }
}
```

**STEP**: Add createMode for Object Page tableSettings (manifest.appdescr_variant)

**DESCRIPTION**: UPSERT object page tableSettings for creationRows and selection behavior.

**LANGUAGE**: JSON

**CODE**:
```json
{
    "changeType": "appdescr_ui_generic_app_changePageConfiguration",
    "content": {
        "parentPage": {
            "component": "sap.suite.ui.generic.template.ObjectPage",
            "entitySet": "STTA_C_SO_SalesOrder_ND"
        },
        "entityPropertyChange": {
            "propertyPath": "component/settings/tableSettings",
            "operation": "UPSERT",
            "propertyValue": {
                "createMode": "creationRows",
                "multiSelect": true,
                "selectAll": false
            }
        }
    }
}
```

**STEP**: Add Selection Presentation Variant via component settings (manifest.appdescr_variant)

**DESCRIPTION**: UPSERT annotationPath at the List Report component settings to reference a SelectionPresentationVariant (SPV) qualifier defined in an annotation file. After this manifest change, add the annotation file to the adaptation project and register it (next steps).

**LANGUAGE**: JSON

**CODE**:
```json
{
    "changeType": "appdescr_ui_generic_app_changePageConfiguration",
    "content": {
        "parentPage" : {
            "component": "sap.suite.ui.generic.template.ListReport",
            "entitySet": "STTA_C_MP_Product"
        },
        "entityPropertyChange": {
            "propertyPath": "component/settings",
            "operation": "UPSERT",
            "propertyValue": {
                "annotationPath": "com.sap.vocabularies.UI.v1.SelectionPresentationVariant#DefaultSPV"
            }
        }
    }
}
```

**STEP**: Create local annotation file (EDMX XML) in adaptation project

**DESCRIPTION**: Create a local annotation file (e.g., changes/annotations/annotations.xml) in the adaptation project containing the SelectionPresentationVariant, PresentationVariant, LineItem, SelectionFields and SelectionVariant definitions. Use the exact EDMX content below (keep edmx:Reference URIs and Annotations Target set to your namespace/entity type).

**LANGUAGE**: XML

**CODE**:
```xml
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
    <edmx:Reference Uri="https://fiorielementsqh3815snapshot-xdf25c17a.dispatcher.neo.ondemand.com/sap/opu/odata/IWFND/CATALOGSERVICE;v=2/Vocabularies(TechnicalName='%2FIWBEP%2FVOC_COMMON',Version='0001',SAP__Origin='LOCAL')/$value">
        <edmx:Include Namespace="com.sap.vocabularies.Common.v1" Alias="Common"/>
    </edmx:Reference>
    <edmx:Reference Uri="/sap/bc/ui5_ui5/ui2/ushell/resources/sap/ushell/components/factsheet/vocabularies/UI.xml">
        <edmx:Include Alias="UI" Namespace="com.sap.vocabularies.UI.v1"/>
    </edmx:Reference>
    <edmx:Reference Uri="http://docs.oasis-open.org/odata/odata/v4.0/cs01/vocabularies/Org.OData.Capabilities.V1.xml">
        <edmx:Include Alias="Capabilities" Namespace="Org.OData.Capabilities.V1"/>
    </edmx:Reference>
    <edmx:Reference	Uri="/sap/opu/odata/IWFND/CATALOGSERVICE;v=2/Vocabularies(TechnicalName='%2FIWBEP%2FVOC_COMMUNICATION',Version='0001',SAP__Origin='LOCAL')/$value">
        <edmx:Include Namespace="com.sap.vocabularies.Communication.v1" Alias="Communication"/>
    </edmx:Reference>
    <edmx:Reference Uri="http://docs.oasis-open.org/odata/odata/v4.0/cs01/vocabularies/Org.OData.Measures.V1.xml">
        <edmx:Include Alias="Measures" Namespace="Org.OData.Measures.V1"/>
    </edmx:Reference>
    <edmx:Reference Uri="/sap/opu/odata/sap/STTA_PROD_MAN/$metadata">
        <edmx:Include Alias="STTA_PROD_MAN" Namespace="STTA_PROD_MAN"/>
    </edmx:Reference>
    <edmx:Reference Uri="http://docs.oasis-open.org/odata/odata-data-aggregation-ext/v4.0/cs02/vocabularies/Org.OData.Aggregation.V1.xml">
        <edmx:Include Alias="Aggregation" Namespace="Org.OData.Aggregation.V1"/>
    </edmx:Reference>
    <edmx:Reference Uri="http://docs.oasis-open.org/odata/odata/v4.0/errata03/os/complete/vocabularies/Org.OData.Core.V1.xml">
        <edmx:Include Alias="Core" Namespace="Org.OData.Core.V1"/>
    </edmx:Reference>
    <edmx:DataServices>
        <Schema xmlns="http://docs.oasis-open.org/odata/ns/edm">
            <Annotations Target="STTA_PROD_MAN.STTA_C_MP_ProductType">
                <Annotation Term="com.sap.vocabularies.UI.v1.SelectionPresentationVariant" Qualifier="DefaultSPV">
                    <Record>
                        <PropertyValue Property="ID" String=""/>
                        <PropertyValue Property="Text" String="Default SPV"/>
                        <PropertyValue Property="SelectionVariant" Path="@UI.SelectionVariant#FilterDefaults"/>
                        <PropertyValue Property="PresentationVariant" Path="@UI.PresentationVariant#ManageProducts"/>
                    </Record>
                </Annotation>
                <Annotation Term="com.sap.vocabularies.UI.v1.PresentationVariant" Qualifier="ManageProducts">
                    <Record>
                        <PropertyValue Property="SortOrder">
                            <Collection>
                                <Record Type="com.sap.vocabularies.Common.v1.SortOrderType">
                                    <PropertyValue Property="Property" PropertyPath="Price"/>
                                    <PropertyValue Property="Descending" Bool="false"/>
                                </Record>
                            </Collection>
                        </PropertyValue>
                        <PropertyValue Property="Visualizations">
                            <Collection>
                                <AnnotationPath>@com.sap.vocabularies.UI.v1.LineItem#ManageProducts</AnnotationPath>
                            </Collection>
                        </PropertyValue>
                    </Record>
                </Annotation>
                <Annotation Term="UI.LineItem" Qualifier="ManageProducts">
                    <Collection>
                        <Record Type="UI.DataField">
                            <PropertyValue Property="Value" Path="Price"/>
                            <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
                        </Record>
                        <Record Type="UI.DataFieldForAction">
                            <PropertyValue Property="Label" String="New Activate Button"/> 
                            <PropertyValue Property="Action" String="STTA_PROD_MAN.STTA_PROD_MAN_Entities/STTA_C_MP_ProductActivation"/> 
                            <PropertyValue Property="InvocationGrouping" EnumMember="UI.OperationGroupingType/ChangeSet"/> 
                        </Record> 
                        <Record Type="UI.DataField"> 
                            <PropertyValue Property="Value" Path="ProductPictureURL"/> 
                            <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/> 
                        </Record> 
                        <Record Type="UI.DataField"> 
                            <PropertyValue Property="Value" Path="Supplier"/> 
                            <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/> 
                        </Record> 
                        <Record Type="UI.DataField"> 
                            <PropertyValue Property="Label" String="Product-ID/-Text"/> 
                            <PropertyValue Property="Value" Path="ProductForEdit"/> 
                            <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/> 
                        </Record> 
                        <Record Type="UI.DataField">
                            <PropertyValue Property="Label" String="Width"/> 
                            <PropertyValue Property="Value" Path="Width"/> 
                            <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/> 
                        </Record> 
                    </Collection> 
                </Annotation> 
                <Annotation Term="UI.SelectionFields"> 
                    <Collection> 
                        <PropertyPath>Width</PropertyPath> 
                    </Collection> 
                </Annotation> 
                <Annotation Term="UI.SelectionVariant" Qualifier="FilterDefaults"> 
                    <Record> 
                        <PropertyValue Property="Parameters"> 
                            <Collection>
                            </Collection> 
                        </PropertyValue> 
                        <PropertyValue Property="SelectOptions"> 
                            <Collection> 
                                <Record Type="UI.SelectOptionType"> 
                                    <PropertyValue Property="PropertyName" PropertyPath="Width"/> 
                                    <PropertyValue Property="Ranges"> 
                                        <Collection> 
                                            <Record> 
                                                <PropertyValue Property="Sign" EnumMember="com.sap.vocabularies.UI.v1.SelectionRangeSignType/I"/> 
                                                <PropertyValue Property="Option" EnumMember="UI.SelectionRangeOptionType/BT"/> 
                                                <PropertyValue Property="Low" String="1.0"/> 
                                                <PropertyValue Property="High" String="20.00"/> 
                                            </Record> 
                                        </Collection> 
                                    </PropertyValue> 
                                </Record> 
                            </Collection>
                        </PropertyValue>
                    </Record> 
                </Annotation> 
            </Annotations> 
        </Schema> 
    </edmx:DataServices> 
</edmx:Edmx>
```

**STEP**: Register the newly created annotation in manifest.appdescr_variant (manifest.appdescr_variant)

**DESCRIPTION**: Add this appdescr_app_addAnnotationsToOData change to content[] to register the local annotation file under the mainService data source. Adjust dataSourceId and annotations keys to match your project.

**LANGUAGE**: JSON

**CODE**:
```json
{ 
"changeType": "appdescr_app_addAnnotationsToOData", 
    "content": { 
        "dataSourceId": "mainService", 
        "annotations": ["customer.localAnnotationsNew"], 
        "annotationsInsertPosition": "END", 
        "dataSource": { 
            "customer.localAnnotationsNew": {
                "uri": "changes/annotations/annotations.xml", "type": "ODataAnnotation" 
            } 
        } 
    } 
}
```

**STEP**: Include a Reuse Component (clone, neo-app.json headerWhiteList, manifest.appdescr_variant)

**DESCRIPTION**: To include a reuse component:
1. Clone the reuse component into the workspace and ensure the reuse component is available in the target backend.
2. Add required headers in neo-app.json headerWhiteList for the consuming application (if the reuse component requires them).
3. In the adaptation project's manifest.appdescr_variant content[], add appdescr_ui5_addComponentUsages, appdescr_ui5_addLibraries and appdescr_ui_generic_app_changePageConfiguration entries to register componentUsage, library and embed the component on the ObjectPage (embeddedComponents).

Preserve corresponding reuse component configuration (e.g., attachments require additional neo-app.json parameters).

**LANGUAGE**: JSON

**CODE**:
```json
"headerWhiteList": [
    "objecttype",
    "objectkey",
    "slug",
    "MarkForDeletion",
    "documentType",
    "documentNumber",
    "documentVersion",
    "documentPart",
    "semanticobjecttype"
]
```

**STEP**: Add componentUsages, libraries and embedded component to manifest.appdescr_variant (manifest.appdescr_variant)

**DESCRIPTION**: Add these change objects to content[] in manifest.appdescr_variant to register the reuse component usage, its library and embed it into the ObjectPage as an embeddedComponents entry.

**LANGUAGE**: JSON

**CODE**:
```json
{
    "changeType": "appdescr_ui5_addComponentUsages",
    "content": {
        "componentUsages": {
            "attachmentReuseComponent": {
                "name": "sap.se.mi.plm.lib.attachmentservice.attachment.components.stcomponent",
                "settings": {}
            }
        }
    }
},
{
    "changeType": "appdescr_ui5_addLibraries",
    "content": {
        "libraries": {
            "sap.se.mi.plm.lib.attachmentservice": {
                "minVersion": "Active",
                "lazy": true
            }
        }
    }
},
{
    "changeType": "appdescr_ui_generic_app_changePageConfiguration",
    "content": {
        "parentPage": {
            "component": "sap.suite.ui.generic.template.ObjectPage",
            "entitySet": "C_PaymentRunPlanTP"
        },
        "entityPropertyChange": {
            "propertyPath": "embeddedComponents",
            "operation": "UPSERT",
            "propertyValue": {
                "simple::Attachments": {
                    "id": "simple::Attachments",
                    "componentUsage": "attachmentReuseComponent",
                    "title": "Attachment",
                    "settings": {
                        "mode": "C",
                        "objectType": "SCASE",
                        "objectKey": "{PaymentRunPlanName}",
                        "isGuid": true
                    }
                }
            }
        }
    }
},
```

**STEP**: Notes, Limitations & OData V4 pointer

**DESCRIPTION**:
- Table type modifications via adaptation projects can behave differently across applications, OData versions, and configurations — thoroughly test before production.
- Not supported via adaptation projects: adding/modifying filter[] configurations per field and customDateRangeImplementation under filterSettings.
- For OData V4 and additional guidance, see the SAP Fiori tools User Guide "Creating the Project" (link in source documentation).

**LANGUAGE**: Text

**CODE**:
```Text
- Test table type changes across scenarios before productive usage.
- Unsupported in filterSettings via adaptation: filter[] per-field configs and customDateRangeImplementation.
- For OData V4 adaptation steps, consult:
  https://help.sap.com/docs/SAP_FIORI_tools/17d50220bcd848aa854c9c182d65b699/072f566ed1d845b6aa41cb01057700d5.html
```
--------------------------------

**TITLE**: Extension Point for List Report Header (Custom Expanded and Collapsed Header Fragments)

**INTRODUCTION**: Configure a List Report to include custom header content above the filter bar by specifying fragment names in manifest.json. Provide UI5 XML fragment files for both expanded and collapsed header states, placed according to the fragment namespace.

**TAGS**: fiori-elements-framework, list-report, extension-point, custom-header, manifest.json, ui5, fragments

**STEP**: 1 — Configure manifest.json to add custom header fragments

**DESCRIPTION**: Add the custom header fragment names under the List Report component target in manifest.json. Use the keys expandedHeaderFragment and collapsedHeaderFragment under content.header.customHeader. These fragment names map to UI5 fragment files by namespace (dot → path).

**LANGUAGE**: JSON

**CODE**:
```json
"targets": {
    "sample": {
        "type": "Component",
        "id": "Default",
        "name": "sap.fe.templates.ListReport",
        "options": {
            "settings": {
                "contextPath": "/RootEntity",
                "variantManagement": "Page",
                "initialLoad": true,
                "liveMode": true,
                "content": {
                    "header": {
                        "customHeader": {
                            "expandedHeaderFragment": "sap.fe.core.fpmExplorer.customListReportHeaderContent.CustomExpandedHeader",
                            "collapsedHeaderFragment": "sap.fe.core.fpmExplorer.customListReportHeaderContent.CustomCollapsedHeader"
                        }
                    }
                }
            }
        }
    }
}
```

**STEP**: 2 — Create the expanded header fragment file

**DESCRIPTION**: Implement the expanded header fragment as an XML fragment at the path derived from the fragment namespace:
webapp/sap/fe/core/fpmExplorer/customListReportHeaderContent/CustomExpandedHeader.fragment.xml. The fragment content is rendered above the filter bar when the header is expanded. Replace the sample controls with your custom UI5 controls.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- File: webapp/sap/fe/core/fpmExplorer/customListReportHeaderContent/CustomExpandedHeader.fragment.xml -->
<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core">
  <VBox>
    <!-- Replace with your custom controls for expanded header -->
    <Text text="Custom Expanded Header" />
  </VBox>
</core:FragmentDefinition>
```

**STEP**: 3 — Create the collapsed header fragment file

**DESCRIPTION**: Implement the collapsed header fragment as an XML fragment at:
webapp/sap/fe/core/fpmExplorer/customListReportHeaderContent/CustomCollapsedHeader.fragment.xml. This fragment is used when the header is collapsed. Keep it minimal for compact display.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- File: webapp/sap/fe/core/fpmExplorer/customListReportHeaderContent/CustomCollapsedHeader.fragment.xml -->
<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core">
  <!-- Replace with your compact controls for collapsed header -->
  <HBox>
    <Text text="Custom Collapsed Header" />
  </HBox>
</core:FragmentDefinition>
```

**STEP**: 4 — Notes and validation

**DESCRIPTION**: 
- The custom header content is inserted above the filter bar. Implement behavior and styling in the fragment controls or associated controllers as needed.
- Verify fragment namespace-to-file mapping: dots in the fragment name map to path separators in webapp/.
- For live examples and additional implementation details, consult the SAP Fiori development portal topic: Standard Floorplans - Extensions - Extensions for List-Based Pages - Custom Header:
https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/topic/floorplanListReport/customHeaderListReport

**LANGUAGE**: N/A

**CODE**:
```text
Images (for reference):
- images/Custom_Content_in_List_Report_Header_in_Expand_Mode_51fe3b2.png
- images/Custom_Content_in_List_Report_Header_in_Collapsed_Mode_bd1a51e.png
```
--------------------------------

**TITLE**: Extension Point — React to Back-End Property Updates (watchProperty)

**INTRODUCTION**: Use the extensionAPI.watchProperty method in a controller extension to run custom logic when a specific OData V4 property is updated from the back end. Typical uses: display or hide messages, trigger UI updates, or perform side effects when property values change. Note: 1:n navigation properties are not supported.

**TAGS**: fiori-elements-framework, ODataV4, extensionAPI, watchProperty, controller-extension, messages

**STEP**: 1 — Scope and constraints

**DESCRIPTION**: Confirm applicability and limitations before implementing. This extension point is only applicable to SAP Fiori elements for OData V4. 1:n navigation properties are not supported by watchProperty.

**LANGUAGE**: Plain Text

**CODE**:
```text
Note: This topic is only applicable to SAP Fiori elements for OData V4.
1:n navigation properties are not supported.
```

**STEP**: 2 — Understand watchProperty callback parameters

**DESCRIPTION**: The watchProperty callback receives these arguments. Use them to determine what changed and whether it's the initial load:
- newValue: the new value of the property
- oldValue: the previous value of the property
- isInitial: true if the property value was retrieved from the back end for the first time
- context: the page context object (useful for retrieving additional context or data)

**LANGUAGE**: Plain Text

**CODE**:
```text
Callback parameters:
- newValue: the new value of the property
- oldValue: the previous value of the property
- isInitial: set to true if the property is retrieved from the back end for the first time
- context: the page context
```

**STEP**: 3 — Implement watchProperty in a controller extension (example)

**DESCRIPTION**: Place the watchProperty call inside the controller extension's onInit override. The sample below shows reacting to a boolean property "isHotCountry": when it becomes true, create and show an information message; otherwise hide messages. Use this.base.getExtensionAPI() to access extensionAPI methods showMessages and hideMessage.

**LANGUAGE**: JavaScript

**CODE**:
```js
sap.ui.define(
    ["sap/ui/core/mvc/ControllerExtension", "sap/ui/core/message/Message", "sap/ui/core/message/MessageType"],
    function (ControllerExtension, Message, MessageType) {
        "use strict";

        return ControllerExtension.extend("watchProperties-basic.ext.OPExtend", {
            override: {
                onInit: function () {
                    this.base.getExtensionAPI().watchProperty("isHotCountry", (newValue, oldValue, isInitial, context) => {
                        if (newValue === true) {
                            const messages = [
                                new Message({
                                    message: "Employee is in a hot country",
                                    type: MessageType.Information
                                })
                            ];
                            this.base.getExtensionAPI().showMessages(messages);
                        } else {
                            this.base.getExtensionAPI().hideMessage();
                        }
                    });
                }
            }
        });
    }
);
```

**STEP**: 4 — Recommended behaviors and tips

**DESCRIPTION**: 
- Use isInitial to skip actions on the first back-end load if undesired.
- Keep callback logic lightweight to avoid UI delays.
- Use context to access related entity or page state if needed.
- For message handling, use extensionAPI.showMessages(messages) and extensionAPI.hideMessage() as shown.

**LANGUAGE**: Plain Text

**CODE**:
```text
Tips:
- Use isInitial to avoid executing logic on initial load when appropriate.
- Keep watch callback logic efficient.
- Use 'context' to access related data/state.
- Use showMessages(messages) and hideMessage() for message display control.
```
--------------------------------

**TITLE**: Extension Points for Forms on the Object Page (OData V2 & V4)

**INTRODUCTION**: Practical, code-focused reference for extending forms on the Object Page in SAP Fiori elements. Contains manifest and fragment examples for OData V2 (SmartFormExtension) and OData V4 (custom form elements), property definitions for custom fields, usage of the UI model, and metadata-binding examples. Use only the Fiori elements extensionAPI for behavior and data integration.

**TAGS**: fiori-elements, object-page, forms, extension-points, odata-v2, odata-v4, manifest.json, xmlfragment, ui5, extensionAPI

**STEP**: 1 — Caution / Extension API rule

**DESCRIPTION**: Use app extensions only when manifest settings or annotations cannot produce the required behavior. Integrate app extension code using only the SAP Fiori elements extensionAPI. Do not access or manipulate internal controls, properties, models, or objects created by the framework — you are responsible for extension display and behavior after adding it.

**LANGUAGE**: Text

**CODE**:
```text
Caution:
- Use app extensions only when necessary.
- Use only the official extensionAPI of SAP Fiori elements.
- Do not access or manipulate internal framework controls, properties, or models.
```

**STEP**: 2 — OData V2: Add fields to an existing FieldGroup via SmartFormExtension in manifest

**DESCRIPTION**: Add new fields to an existing FieldGroup on the Object Page by registering a SmartFormExtension in the manifest. Place this manifest entry under the view key for the Object Page (e.g., "sap.suite.ui.generic.template.ObjectPage.view.Details"). SmartFormExtension supports only sap.ui.core.Fragment for className.

- Path context: sap.ui5 -> routing -> targets -> <YourObjectPageTarget> -> options -> settings -> controlConfiguration
- Key format: "SmartFormExtension|<EntityName>|<FieldGroupAnnotation>"

**LANGUAGE**: JSON

**CODE**:
```json
"sap.suite.ui.generic.template.ObjectPage.view.Details": {
    "SmartFormExtension|STTA_C_MP_Product|com.sap.vocabularies.UI.v1.FieldGroup::GeneralInformation": {
        "className": "sap.ui.core.Fragment",
        "fragmentName": "STTA_MP.ext.fragments.SmartFormGroupElement",
        "type": "XML"
    }
}
```

**STEP**: 3 — OData V4: Create an XML fragment for a custom form element (view extension)

**DESCRIPTION**: Implement an xmlfragment that defines the UI for the custom field. Save the fragment as e.g., CustomFormElement.fragment.xml and reference it as the template in manifest controlConfiguration entries.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- CustomFormElement.fragment.xml -->
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m">
    <Text id="customFieldFormSoldToPartyInputField" text="{SoldToParty}" />
</core:FragmentDefinition>
```

**STEP**: 4 — OData V4: Register view extensions in manifest.json via controlConfiguration

**DESCRIPTION**: Register custom fields under the controlConfiguration of the Object Page target in manifest.json. Each custom field needs a unique key, a template that points to the fragment, a label (i18n or metadata binding), and a position object specifying placement and anchor. Example shows two custom fields where the second is positioned after the first.

- Path context: sap.ui5 -> routing -> targets -> <YourObjectPageTarget> -> options -> settings -> controlConfiguration -> @com.sap.vocabularies.UI.v1.FieldGroup -> fields

**LANGUAGE**: JSON

**CODE**:
```json
"sap.ui5": {
    "routing": {
        "targets": {
            "SalesOrderManageObjectPage": {
                "options": {
                    "settings": {
                        "controlConfiguration": {
                            "@com.sap.vocabularies.UI.v1.FieldGroup": {
                                "fields": {
                                    "customFormElementAnchor": {
                                        "template": "ObjectPageStructure.ext.CustomField",
                                         "label": "{i18n>myFieldLabel1}",
                                         "position": {
                                             "placement": "After",
                                             "anchor": "DataField::SalesOrder"
                                         }
                                     },
                                     "customFormElementAnchor2": {
                                         "template": "ObjectPageStructure.ext.CustomField",
                                         "label": "{i18n>myFieldLabel2}",
                                         "position": {
                                             "placement": "After",
                                             "anchor": "customFormElementAnchor"
                                         }
                                     }
                                 }
                             }
                         }
                     }
                 }
             }
        }
    }
 }
```

**STEP**: 5 — Custom Field Properties (required for manifest controlConfiguration entries)

**DESCRIPTION**: Use these properties when declaring custom fields under a FieldGroup in controlConfiguration. Keys must be unique identifiers and can be referenced as anchors for placement.

**LANGUAGE**: Text / Specification

**CODE**:
```text
Properties of a Custom Field in a Form:
- key
  - Supported values: aA-zZ, 0-9, :, _, -
  - Description: Unique identifier used as reference/anchor by other fields.

- label
  - Supported values: any Unicode string
  - Description: Label shown next to the field (can use i18n or metadata binding).

- position
  - Description: Defines position relative to other fields.

- position.placement
  - Supported values: "After" | "Before"
  - Description: Placement relative to the anchor field.

- position.anchor
  - Supported values: "<key_of_column>"
  - Description: The key of another field used as the placement anchor.

- template
  - Description: Fragment name/path following Fragment.load syntax (the fragment implementing the UI).
```

**STEP**: 6 — Use the UI model in fragments to react to edit mode

**DESCRIPTION**: Bind fragment element properties to the ui model to react to mode changes (for example enable/disable behavior depending on editMode).

**LANGUAGE**: JSON / Binding Expression

**CODE**:
```json
"enabled=\"{= ${ui>/editMode} === 'Editable'}\""
```

**STEP**: 7 — Metadata binding for labels (alternative to i18n)

**DESCRIPTION**: Use metadata binding to derive the label from the OData meta model instead of i18n. Useful when the label exists in the service metadata.

**LANGUAGE**: JSON

**CODE**:
```json
"customFormElementAnchor3": {
    "template": "ObjectPageStructure.ext.CustomField",
  "label": "{metaModel>/SalesOrderManage/SoldToParty@com.sap.vocabularies.Common.v1.Label}",
  "position": {
    "placement": "After",
    "anchor": "customFormElementAnchor"
  }
}
```

**STEP**: 8 — Live example and further exploration

**DESCRIPTION**: Use the SAP Fiori development portal building block for form extensions to experiment with sample implementations and see live behavior.

**LANGUAGE**: URL

**CODE**:
```text
Live Example: https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/buildingBlocks/form/formCustom
```
--------------------------------

**TITLE**: Object Page Header Facet Extensions (OData V2 & V4) — Manifest & Fragments Guide

**INTRODUCTION**: Practical, code-focused guide for adding custom header facets and header fields on SAP Fiori Elements Object Pages (OData V2 and V4). Includes manifest configuration formats, extension point keys, extensionAPI usage (setCustomMessage), XML fragment examples (display and editable), and metadata snippet for custom header fields.

**TAGS**: fiori-elements-framework, object-page, header-facet, header-field, extension, manifest.json, xmlfragment, odata-v2, odata-v4, extensionAPI, setCustomMessage

STEP: 1 — Add an Object Page Header Facet Extension (OData V2)

DESCRIPTION: Use a view-based extension inside the app manifest to insert/replace header facets on the Object Page. Use only the extensionAPI; do not manipulate Fiori elements internals. Specify the manifest key in the format:
<Different_Scenario>|<EntitySet_Name>|headerEditable::<Annotation_Information>
Include className, viewName, type, and optional bVisibleOnEdit (set to false only to hide the entire header extension in edit mode).

LANGUAGE: JSON

CODE:
```json
{
  "extends": {
    "extensions": {
      "sap.ui.viewExtensions": {
        "sap.suite.ui.generic.template.ObjectPage.view.Details": {
          "BeforeHeaderFacet|STTA_C_MP_Product|headerEditable::com.sap.vocabularies.UI.v1.Chart::SpecificationWidthBulletChart": {
            "className": "sap.ui.core.mvc.View",
            "viewName": "STTA_MP.ext.fragments.HeaderExtensionFacet",
            "type": "XML",
            "bVisibleOnEdit": true
          }
        }
      }
    }
  }
}
```

STEP: 2 — Extension Point Key Options (OData V2)

DESCRIPTION: Use one of these keys in the manifest to position your header extension. Replace <EntitySet Name> and <Annotation information> accordingly.

LANGUAGE: JSON

CODE:
```json
[
  "BeforeHeaderFacet|<EntitySet Name>|headerEditable::<Annotation information>",
  "ReplaceHeaderFacet|<EntitySet Name>|headerEditable::<Annotation information>",
  "AfterHeaderFacet|<EntitySet Name>|headerEditable::<Annotation information>",
  "BeforeSimpleHeaderFacet|<EntitySet Name>|headerEditable::<Annotation information>",
  "ReplaceSimpleHeaderFacet|<EntitySet Name>|headerEditable::<Annotation information>",
  "AfterSimpleHeaderFacet|<EntitySet Name>|headerEditable::<Annotation information>",
  "ReplaceHeaderExtensionFacet|<EntitySet Name>",
  "NoImageExtensionFacet|<EntitySet Name>",
  "AfterImageExtensionFacet|<EntitySet Name>",
  "BeforeHeaderDataPoint|<EntitySet Name>|<Annotation Information>",
  "ReplaceHeaderDataPoint|<EntitySet Name>|<Annotation Information>",
  "AfterHeaderDataPoint|<EntitySet Name>|<Annotation Information>"
]
```

STEP: 3 — Show Custom Status Message on Object Page Header (setCustomMessage)

DESCRIPTION: Use extensionAPI.attachPageDataLoaded to react to page data and call extensionAPI.setCustomMessage with an object { message, type }. This runs in your extension controller (e.g., View controller module).

LANGUAGE: JavaScript

CODE:
```javascript
sap.ui.define([
], function () {
    return {
        onInit: function () {
            this.extensionAPI.attachPageDataLoaded(this.onPageDataLoaded.bind(this));
        },
        onPageDataLoaded: function(oEvent) {
            var quantity = oEvent.context.getObject().quantity;
            var oMsg = {
                message: quantity == 0 ? "Product Not Available!" : "Product Available!",
                type: quantity == 0 ? sap.ui.core.MessageType.Error : sap.ui.core.MessageType.Success
            }
            this.extensionAPI.setCustomMessage(oMsg);
        }
        ....
    }
});
```

STEP: 4 — Add Custom Header Facets (OData V4) — Content-Based Configuration

DESCRIPTION: Define custom header facets inside target.options.settings.content.header.facets in the routing target settings. Content-based config has higher priority than annotation-based config. Provide template (module path for Fragment.load), optional templateEdit, title/subTitle, visible/stashed flags, position (placement + anchor), requestGroupId, and flexSettings.

LANGUAGE: JSON

CODE:
```json
{
    "sap.ui5": {
        "routing": {
            "targets": {
                "SalesOrderManageObjectPage": {
                    "options": {
                        "settings": {
                            "content": {
                                "header": {
                                    "facets": {
                                        "CustomHeaderFacet1": {
                                            "template": "SalesOrder.ext.CustomHeaderFacetColumnChart",
                                            "stashed": false,
                                            "visible": "{= %{OverallSDProcessStatus} === 'C'}",
                                            "position": {
                                                "placement": "After",
                                                "anchor": "NetValueDataHeader"
                                            },
                                            "flexSettings": {
                                                "designtime": "not-adaptable-visibility"
                                            }
                                        },
                                        "CustomHeaderFacet2": {
                                            "template": "SalesOrder.ext.CustomHeaderFacetDataPoint",
                                            "templateEdit": "SalesOrder.ext.CustomHeaderFacetDataPointEdit",
                                            "title": "{i18n>customHeaderFacet2-CustomDataPoint}",
                                            "subTitle": "{i18n>customHeaderFacet2-CarRental}",
                                            "requestGroupId": "LongRunners",
                                            "stashed": false,
                                            "position": {
                                                "placement": "After",
                                                "anchor": "CustomHeaderFacet1"
                                            }
                                        }
                                    }
                                }
                            },
                            "controlConfiguration": {
                                "@com.sap.vocabularies.UI.v1.HeaderFacets": {
                                   "...": "see annotation-based example below"
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}
```

STEP: 5 — Add Custom Header Facets (OData V4) — Annotation-Based Configuration

DESCRIPTION: Provide overrides or additional facets in controlConfiguration."@com.sap.vocabularies.UI.v1.HeaderFacets". Keys here are lower priority than content-based keys.

LANGUAGE: JSON

CODE:
```json
{
    "sap.ui5": {
        "routing": {
            "targets": {
                "SalesOrderManageObjectPage": {
                    "options": {
                        "settings": {
                            "content": {
                               "...": "see content-based example above"
                            },
                            "controlConfiguration": {
                                "@com.sap.vocabularies.UI.v1.HeaderFacets": {
                                    "facets": {
                                        "CustomHeaderFacet2": {
                                            "template": "SalesOrder.ext.CustomHeaderFacetOverwritten",
                                            "title": "Custom Error",
                                            "subTitle": "Should never appear!",
                                            "stashed": false,
                                            "position": {
                                                "placement": "After",
                                                "anchor": "CustomHeaderFacet1"
                                            }
                                        },
                                        "CustomHeaderFacet3": {
                                            "template": "SalesOrder.ext.CustomHeaderFacetHarveyBall",
                                            "templateEdit": "SalesOrder.ext.CustomHeaderFacetHarveyBallEdit",
                                            "title": "{i18n>customHeaderFacet2-CustomProgress}",
                                            "stashed": false,
                                            "position": {
                                                "placement": "After",
                                                "anchor": "CustomHeaderFacet2"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}
```

STEP: 6 — Properties Schema for Custom Header Facets (Actionable Keys)

DESCRIPTION: Use these properties when authoring a custom header facet entry (content-based or annotation-based). Required/optional markers: *optional. Use template/module path matching Fragment.load syntax. Use position.anchor to point to a facet key (FacetKey for annotation-based facets).

LANGUAGE: JSON

CODE:
```json
{
  "template": "ModulePath.of.XMLFragment",
  "templateEdit": "ModulePath.of.EditableXMLFragment (optional)",
  "title": "{i18n>key} (optional)",
  "subTitle": "{i18n>key} (optional)",
  "stashed": false,
  "visible": true,
  "position": {
    "placement": "Before | After",
    "anchor": "FacetKey"
  },
  "requestGroupId": "Heroes | Decoration | Workers | LongRunners (optional)",
  "flexSettings": {
    "designtime": "Default | not-adaptable-visibility | not-adaptable | not-adaptable-tree | not-removable"
  }
}
```

STEP: 7 — Custom Header Fragment Example (Harvey Ball Micro Chart)

DESCRIPTION: XML fragment example to render a HarveyBallMicroChart inside a header facet. Use fraction binding expressions and standard UI5 namespaces.

LANGUAGE: XML

CODE:
```xml
<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:mc="sap.suite.ui.microchart">
    <VBox id="CustomHeaderFacetHarveyBall" displayInline="true">
        <mc:HarveyBallMicroChart size="S" total="100" totalScale="%" press="press">
            <mc:items>
                <mc:HarveyBallMicroChartItem
                    fraction="{= ((100 > 0) ? ((${Progress} > 100) ? 100 : ((${Progress} &lt; 0) ? 0 : (${Progress} / 100 * 100))) : 0) }"
                    color="Good"
                    fractionScale="%"
                />
            </mc:items>
        </mc:HarveyBallMicroChart>
    </VBox>
</core:FragmentDefinition>
```

STEP: 8 — Editable Custom Header Facet Fragment (FormElement + macro:Field)

DESCRIPTION: In edit mode, the header facet appears as a Form; supply an editable fragment using sap.ui.layout.form FormElement and macro:Field. TemplateEdit should point to this fragment.

LANGUAGE: XML

CODE:
```xml
<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:f="sap.ui.layout.form" xmlns:macro="sap.fe.macros">
        <f:FormElement label="Number of Items">
            <f:fields>
                <macro:Field id="NumberItems" metaPath="fieldControlType_item" />
            </f:fields>
        </f:FormElement>
        <f:FormElement label="Classification">
            <f:fields>
                <macro:Field id="IncotermsClassification" metaPath="IncotermsClassification" />
            </f:fields>
        </f:FormElement>
</core:FragmentDefinition>
```

STEP: 9 — Add Custom Header Fields (Annotation-Based, OData V4)

DESCRIPTION: Define custom header fields by extending controlConfiguration for the FieldGroup qualifier of the header (e.g., @com.sap.vocabularies.UI.v1.FieldGroup#ObjectPageHeaderData). Provide fields with keys that reference XML fragments and position placement/anchor pointing to a property or existing field key.

LANGUAGE: JSON

CODE:
```json
{
   "sap.ui5": {
      "routing": {
         "targets": {
            "LineItemsObjectPage": {
               "options": {
                  "settings": {
                     "controlConfiguration": {
                        "@com.sap.vocabularies.UI.v1.FieldGroup#ObjectPageHeaderData": {
                           "fields": {
                              "CustomField1": {
                                 "label": "{i18n>ObjectPageHeaderFacetFieldLabel1}",
                                 "template": "ManageItems.ext.CustomHeaderFacetFieldGroupForm",
                                 "position": {
                                    "placement": "Before",
                                    "anchor": "DataField::headerDate"
                                 }
                              }
                           }
                        }
                     }
                  }
               }
            }
         }
      }
   }
}
```

STEP: 10 — Metadata: FieldGroup Qualifier Reference (Find the anchor key)

DESCRIPTION: The anchor key is the FieldGroup qualifier in metadata. Use the annotation target qualifier to identify the correct field group for extension.

LANGUAGE: XML

CODE:
```xml
<Schema>
    <Annotations Target="<PageName>">
        <Annotation Term="UI.FieldGroup" Qualifier="ObjectPageHeaderData">
            ... records
        </Annotation>
    </Annotations>
</Schema>
```
--------------------------------

**TITLE**: Extension Points — Implementing Custom Pages in SAP Fiori elements (OData V4)

**INTRODUCTION**: This guide provides actionable steps and exact code examples to implement custom pages in SAP Fiori elements apps (OData V4). It covers manifest routing configuration, required target properties, an XML view with binding context, controller navigation using the routing controller extension, and usage of the Table building block from the flexible programming model.

**TAGS**: fiori-elements-framework, sapui5, odata-v4, custom-pages, routing, xml-view, controller, building-blocks

**STEP**: 1 — Add routing targets to the manifest

**DESCRIPTION**: Extend your app manifest (sap.ui5 > routing) to add routes and targets for custom pages and for the standard object page. Add a routing target with type "Component" and name "sap.fe.core.fpm" for custom pages to enable features of the flexible programming model. Insert the following JSON into your manifest (webapp/manifest.json) under "sap.ui5". This sample defines a custom entry page, an object page, and a custom detail page.

**LANGUAGE**: JSON

**CODE**:
```json
{
   "sap.ui5": {
        "routing": {
            "routes": [
                {
                    "pattern": ":?query:",
                    "name": "customPage",
                    "target": "customPage"
                },
                {
                    "pattern": "/RootEntity({key}):?query:",
                    "name": "objectPage",
                    "target": "objectPage"
                },
                {
                    "pattern": "/RootEntity({key})/items({key2}):?query:",
                    "name": "customDetailPage",
                    "target": "customDetailPage"
                }
            ],
            "targets": {
                "customPage": {
                    "type": "Component",
                    "id": "customPage",
                    "name": "sap.fe.core.fpm",
                    "options": {
                        "settings": {
                            "viewName": "sap.fe.core.fpmExplorer.customPageContent.CustomPage",
                            "contextPath": "/RootEntity",
                            "navigation": {
                                "RootEntity": {
                                    "detail": {
                                        "route": "objectPage"
                                    }
                                }
                            }
                        }
                    }
                },
                "objectPage": {
                    "type": "Component",
                    "id": "objectPage",
                    "name": "sap.fe.templates.ObjectPage",
                    "options": {
                        "settings": {
                            "contextPath": "/RootEntity",
                            "editableHeaderContent": false,
                            "navigation": {
                                "items": {
                                    "detail": {
                                        "route": "customDetailPage"
                                    }
                                }
                            }
                        }
                    }
                },
                "customDetailPage": {
                    "type": "Component",
                    "id": "customDetailPage",
                    "name": "sap.fe.core.fpm",
                    "options": {
                        "settings": {
                            "viewName": "sap.fe.core.fpmExplorer.customPageContent.CustomDetailPage",
                            "contextPath": "/ChildEntity",
                            "navigation": {}
                        }
                    }
                }
            }
        }
   }
}
```

**STEP**: 2 — Required properties for a custom page target

**DESCRIPTION**: Ensure your target object includes these properties under "targets.<yourTarget>". Use "Component" + "sap.fe.core.fpm" to enable flexible programming model features. The viewName must use your app namespace (sap.app.id) as prefix and map to an XML view under webapp. The contextPath should point to the entity set root for the custom page.

- type: "Component"
- id: "<unique_page_id>"
- name: "sap.fe.core.fpm"
- viewName: "<sap.app.id>.<path>.ViewName"
- contextPath: "/<EntitySetName>"

Include the target configuration similar to the snippet below (taken from the manifest example) to align properties and settings.

**LANGUAGE**: JSON

**CODE**:
```json
"customPage": {
    "type": "Component",
    "id": "customPage",
    "name": "sap.fe.core.fpm",
    "options": {
        "settings": {
            "viewName": "sap.fe.core.fpmExplorer.customPageContent.CustomPage",
            "contextPath": "/RootEntity",
            "navigation": {
                "RootEntity": {
                    "detail": {
                        "route": "objectPage"
                    }
                }
            }
        }
    }
}
```

**STEP**: 3 — Create the custom XML view with available binding context

**DESCRIPTION**: Implement an XML view whose binding context is automatically available (contextPath set in manifest target). Place the view under the namespace path used in viewName. Use standard UI5 controls; bind content to the entity set path (e.g., {/RootEntity}). The example below uses sap.m.GenericTile inside a HorizontalLayout, binding tile properties to OData properties. Save at the namespace path referenced by viewName (for example: webapp/sap/fe/core/fpmExplorer/customPageContent/CustomPage.view.xml based on the viewName).

**LANGUAGE**: XML

**CODE**:
```xml
<mvc:View
    id="application-product"
    height="100%"
    controllerName="sap.fe.core.fpmExplorer.customPageContent.CustomPage"
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:l="sap.ui.layout"
    xmlns:macros="sap.fe.macros"
>
    <Page>
        <content>
                <l:HorizontalLayout id="TileContainerExpanded" allowWrapping="true" content="{/RootEntity}" class="sapUiTinyMarginTopBottom">
                    <GenericTile header="{TitleProperty}" subheader="{DescriptionProperty}" press="onPressed" class="sapUiTinyMarginEnd">
                        <TileContent unit="{unit}" footer="{footer}">
                            <NumericContent withMargin="false" value="{kpivalue}" valueColor="{color}" indicator="{trend}" scale="{scale}" />
                        </TileContent>
                    </GenericTile>
                </l:HorizontalLayout>
        </content>
    </Page>
</mvc:View>
```

**STEP**: 4 — Implement controller for context-based navigation using routing extension

**DESCRIPTION**: Implement the custom page controller module referenced by controllerName in the XML view. Use the PageController base and the routing controller extension (this.routing) to perform context-based navigation. The binding context obtained from the event source can be passed directly to this.routing.navigate(oContext). Save the controller at the corresponding module path (for example: webapp/controller/CustomPage.controller.js matching the namespace).

**LANGUAGE**: JavaScript

**CODE**:
```javascript
sap.ui.define(["sap/fe/core/PageController", "sap/ui/core/UIComponent"], function(PageController, UIComponent) {
    "use strict";
 
    return PageController.extend("sap.fe.core.fpmExplorer.customPageContent.CustomPage", {
        onPressed: function(oEvent) {
            var oContext = oEvent.getSource().getBindingContext();
            this.routing.navigate(oContext);
        }
    });
});
```

**STEP**: 5 — Use flexible programming model building blocks (Table) inside custom pages

**DESCRIPTION**: Use SAP Fiori elements building blocks (macros) in custom pages to reuse UI annotations, standard routing, and draft edit flow. When using macros:Table with metaPath pointing to @com.sap.vocabularies.UI.v1.LineItem the table behaves like a standard table including automatic in-app navigation. Place this view in the same view/controller structure as above.

**LANGUAGE**: XML

**CODE**:
```xml
<mvc:View
    id="application-product"
    height="100%"
    controllerName="sap.fe.core.fpmExplorer.customPageContent.CustomPage"
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:l="sap.ui.layout"
    xmlns:macros="sap.fe.macros"
>
    <Page>
        <content>
            <macros:Table contextPath="/RootEntity" metaPath="@com.sap.vocabularies.UI.v1.LineItem" id="macroTable" />
        </content>
    </Page>
</mvc:View>
```

**STEP**: 6 — Quick verification and live example

**DESCRIPTION**: Run the app and navigate to the configured route (e.g., the app root for the customPage pattern). Verify that:
- The XML view receives the binding context from contextPath.
- Press handlers using this.routing.navigate navigate to the object page.
- macros:Table supports automatic in-app navigation without explicit press handlers.

Use the live example to inspect behavior and code: https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/topic/customPage
--------------------------------

**TITLE**: Extension Points for Object Page Sections (SAP Fiori elements)

**INTRODUCTION**: Action-oriented guide for adding custom sections to an Object Page in SAP Fiori elements. Covers both OData V2 extension points (view/fragments via sap.ui.viewExtensions) and OData V4 custom sections (content->body->sections in manifest.json). Includes required manifest entries, supported properties, fragment/form alignment, and UI model binding examples.

**TAGS**: fiori-elements-framework, object-page, extension, manifest, ODataV2, ODataV4, custom-section, extensionAPI, xmlfragment, fragment, i18n

**STEP**: V2 — Add an extension point for an Object Page section in manifest.json

**DESCRIPTION**: For OData V2 object pages you add section extensions under "extends" -> "extensions" -> "sap.ui.viewExtensions" in manifest.json. Each extension key encodes placement, the entitySet name, and the annotation path. Specify either a view or an XML fragment with className, fragmentName, and type. Always provide the entitySet because the same annotation path can appear for multiple entity sets. Use the SAP Fiori elements extensionAPI only and keep integration responsibilities (model/binding/busy handling) within the app code.

- Placement values: BeforeFacet, ReplaceFacet, AfterFacet
- Key format example: "BeforeFacet|<EntitySet>|<AnnotationPath>" (optionally suffix with "|<index>" to disambiguate)
- className: "sap.ui.core.Fragment" or view class
- fragmentName: module path to the fragment

Keep the following manifest block (preserve and adapt keys/fragment names and titles to your app):

**LANGUAGE**: JSON

**CODE**:
```json
"extends": {
    "extensions": {
        "sap.ui.viewExtensions": {
	   "sap.suite.ui.generic.template.ObjectPage.view.Details":
      "BeforeFacet|SEPMRA_C_PD_Product|to_ProductText::com.sap.vocabularies.UI.v1.LineItem": {
      "className": "sap.ui.core.Fragment",
      "fragmentName": "nw.epm.refapps.st.prod.manage.ext.BeforeFacetTest",
      "type": "XML",
      "sap.ui.generic.app": {
         "title": "Facet Breakout before Product Text LineItem"
      }
     },
     "BeforeFacet|SEPMRA_C_PD_Product|to_ProductText::com.sap.vocabularies.UI.v1.LineItem|1": {
      "className": "sap.ui.core.Fragment",
      "fragmentName": "nw.epm.refapps.st.prod.manage.ext.BeforeFacetTestNew",
      "type": "XML",
      "sap.ui.generic.app": {
         "title": "Facet Breakout before Product Text LineItem",
          "key" : "1"
      }
     }
     "AfterFacet|SEPMRA_C_PD_Product|to_Supplier::com.sap.vocabularies.UI.v1.Identification": {
      "className": "sap.ui.core.Fragment",
      "fragmentName": "nw.epm.refapps.st.prod.manage.ext.AfterFacetTest",
      "type": "XML",
      "sap.ui.generic.app": {
         "title": "Facet Breakout after Supplier Identification"
      }
     },
     "AfterFacet|SEPMRA_C_PD_Product|to_Supplier::com.sap.vocabularies.UI.v1.Identification|1": {
      "className": "sap.ui.core.Fragment",
      "fragmentName": "nw.epm.refapps.st.prod.manage.ext.AfterFacetTest",
      "type": "XML",
      "sap.ui.generic.app": {
         "title": "Facet Breakout after Supplier Identification",
         "key": 1
      }
}
}
```

**STEP**: V4 — Define custom sections using the manifest "content" block

**DESCRIPTION**: For OData V4, add custom sections under sap.ui5.routing.targets.<ObjectPageTarget>.options.settings.content.body.sections in manifest.json. Use custom keys to reference the section. Provide:
- template: module path to your XML fragment (Fragment.load syntax)
- title: localized text or binding expression (typically i18n)
- position: placement ("Before" | "After") and anchor (key of another section or a FacetId)
- subSections support: define nested subSections with their own templates, titles, and positions

Ensure translations exist for i18n keys and that the referenced template module paths resolve to your fragment files.

Use the following sample manifest snippet as a starting point (preserve and adapt keys, template names, and titles):

**LANGUAGE**: JSON

**CODE**:
```json
{
   "sap.ui5": {
      "routing": {
         "targets": {
            "SalesOrderManageObjectPage": {
               "options": {
                  "settings": {
                     "content": {
                        "body": {
                           "sections": {
                              "customSection": {
                                 "template": "SalesOrder.ext.CustomSection",
                                 "title": "{i18n>customSection}",
                                 "position": {
                                    "placement": "Before",
                                    "anchor": "SalesOrderItems"
                                 }
                              },
                              "anotherCustomSection": {
                                 "title": "Multiple Subsections",
                                 "subSections": {
                                     "firstSubSectionKey": {
                                         "title": "First Subsection",
                                         "template": "SalesOrder.ext.CustomFieldForm"
                                     },
                                     "secondSubSectionKey": {
                                         "title": "Second Subsection",
                                         "template": "SalesOrder.ext.CustomFieldForm2",
                                         "position": {
                                             "placement": "After",
                                             "anchor": "firstSubSectionKey"
                                         }
                                     }
                                 }
                                 "position": {
                                    "placement": "After",
                                    "anchor": "customSection"
                                 }
                              }
                           }
                        }
                     }
                  }
               }
            }
         }
      }
   }
}
```

**STEP**: Custom section properties and usage rules

**DESCRIPTION**: Implement these properties when defining a custom section key under content.body.sections. The asterisk (*) marks mandatory properties.

- template (required for content): module path to an XML fragment; matches Fragment.load syntax
- title* (mandatory): text or binding expression (typically "{i18n>key}")
- position:
  - placement: "Before" | "After" (default is After)
  - anchor*: key of another section or a FacetId (for annotation-defined facets)
- visible: Boolean or binding expression (default: true)
- actions: actions object (same format as Adding Custom Actions Using Extension Points)
- subSections: object with keys for subsections having their own title/template/position

Use these rules:
- Reference annotation-defined facets by their FacetId in position.anchor.
- Provide i18n translations for titles.
- If you need actions on custom sections, declare an "actions" object matching framework expectations.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "yourSectionKey": {
    "template": "your.module.path.ToFragment",
    "title": "{i18n>yourSectionTitle}",
    "position": {
      "placement": "Before",
      "anchor": "ExistingFacetIdOrSectionKey"
    },
    "visible": true,
    "actions": {
      // actions object as per framework
    },
    "subSections": {
      "subKey1": {
        "title": "{i18n>subTitle1}",
        "template": "your.module.path.SubFragment"
      }
    }
  }
}
```

**STEP**: Fragment form alignment (ensure proper layout inside custom sections)

**DESCRIPTION**: When using UI5 Form in a custom section, add the CSS class sapUxAPObjectPageSubSectionAlignContent on the Form to align content correctly inside Object Page subsections.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:layout="sap.ui.layout">
  <layout:Form class="sapUxAPObjectPageSubSectionAlignContent">
    <!-- form content -->
  </layout:Form>
</core:FragmentDefinition>
```

**STEP**: Use the UI model to react to editMode inside fragments

**DESCRIPTION**: Bind control properties inside your fragment to the UI model to respond to editMode. Example below shows enabling a control only when editMode equals 'Editable'.

**LANGUAGE**: XML

**CODE**:
```xml
enabled="{= ${ui>/editMode} === 'Editable'}"
```

**STEP**: Operational notes, examples and links

**DESCRIPTION**: Implementation checklist and references:
- Use app extensions only if manifest settings or annotations cannot achieve the UI/behavior.
- Use only the SAP Fiori elements extensionAPI for interactions with the framework.
- You can specify either a view or an XML fragment for additional sections; you do not need to declare ObjectPageSection/subSections in the object page view—the template provides those.
- For working examples and live playground: Standard Floorplans - Extensions - Custom Section at https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/topic/floorplanObjectPage/customSection
- Ensure a defined LineItem service is available in examples (e.g., service.cds) and add translations for all i18n keys.
- For extensionAPI usage details, consult Using the extensionAPI documentation and Extension Points docs in the SAP Fiori elements documentation.

**LANGUAGE**: PlainText

**CODE**:
```text
References:
- Using the extensionAPI: using-the-extensionapi-bd2994b.md
- Adding a custom section example: adding-a-custom-section-to-an-object-page-a357047.md
- Extension Points: ../08_Extending_SAPUI5_Applications/extension-points-403c050.md
- Live example: https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/topic/floorplanObjectPage/customSection
```
--------------------------------

**TITLE**: Extension Points for Object Page Subsections (OData V2 & V4)

**INTRODUCTION**: This guide explains how to add custom subsections to the Object Page in SAP Fiori elements. It covers OData V2 (sap.ui.viewExtensions) and OData V4 (manifest content sections). Use these patterns to insert a custom view or XML fragment before, after, or replacing existing subsections, or to add fully custom subsections with positioning and localized titles.

**TAGS**: fiori-elements-framework, object-page, extension-points, odata-v2, odata-v4, manifest.json, sap.ui.viewExtensions, xmlfragment, lazy-loading

**STEP**: 1 — Overview and best practices

**DESCRIPTION**: 
- Prefer manifest settings and annotations over app extensions. Use app extensions only when necessary.
- When implementing extensions, interact with Fiori elements only through the official extensionAPI. Do not directly access or manipulate internal framework controls, properties, models, or bindings.
- Terminology:
  - OData V2: use the term "facet" and extension keys like BeforeSubSection, AfterSubSection, ReplaceSubSection inside sap.ui.viewExtensions.
  - OData V4: use the term "section" and define custom subsections inside routing.targets.options.settings.content.body.sections.
- For V2 extension points, you must specify the subsection as an annotation path and include the entitySet name (annotation paths can repeat across entity sets).

**LANGUAGE**: text

**CODE**:
```text
Best practices:
- Use extensionAPI only.
- Prefer manifest settings/annotations over app extensions.
- Specify entitySet + annotation path for V2 extension points.
```

**STEP**: 2 — OData V2: Insert subsections using sap.ui.viewExtensions (Before/After/Replace)

**DESCRIPTION**: Add additional subsections into existing facets by registering view extensions under sap.ui.viewExtensions for the ObjectPage Details view. Use keys of the form:
- "BeforeSubSection|<EntitySet>|<AnnotationPath>::<AnnotationTerm>"
- "AfterSubSection|<EntitySet>|<AnnotationPath>::<AnnotationTerm>"
- "ReplaceSubSection|<EntitySet>|<AnnotationPath>::<AnnotationTerm>"
Each extension entry must reference either a view or fragment (className/viewName/type or fragment reference). You can enable lazy loading using sap.ui.generic.app.enableLazyLoading.

Include the extension entries in the application's manifest.json under sap.ui.viewExtensions -> sap.suite.ui.generic.template.ObjectPage.view.Details.

**LANGUAGE**: JSON

**CODE**:
```json
"sap.ui.viewExtensions": {
   "sap.suite.ui.generic.template.ObjectPage.view.Details": {
      "BeforeSubSection|STTA_C_MP_Product|to_ProductSalesData::com.sap.vocabularies.UI.v1.Chart":{
         "className": "sap.ui.core.mvc.View",
         "viewName": "STTA_MP.ext.view.ProductSalesPrice",
         "type": "XML",
         "sap.ui.generic.app": {
            "title": "Target Sales Prices",
            "enableLazyLoading": true
         }
      },
      "AfterSubSection|STTA_C_MP_Product|to_ProductSalesData::com.sap.vocabularies.UI.v1.LineItem":{
         "className": "sap.ui.core.mvc.View",
         "viewName": "STTA_MP.ext.view.ProductSalesPrice",
         "type": "XML",
         "sap.ui.generic.app": {
            "title": "Target Sales Prices",
            "enableLazyLoading": true
         }
     "ReplaceSubSection|STTA_C_MP_Product|to_ProductTextType::com.sap.vocabularies.UI.v1.LineItem":{
         "className": "sap.ui.core.mvc.View",
         "viewName": "STTA_MP.ext.view.ProductSalesPrice",
         "type": "XML",
         "sap.ui.generic.app": {
            "title": "Target Sales Prices",
            "enableLazyLoading": true
         }
      },
    .....
```

**STEP**: 3 — OData V4: Define custom subsections via manifest content (XMLFragment, positioning, localization)

**DESCRIPTION**: For OData V4, add custom subsections by extending the target's settings.content.body.sections in manifest.json. Define a custom section key and add subSections entries that reference an XMLFragment, provide a localized title, and specify placement relative to an anchor subsection using position. This pattern supports custom UI, controls not supported by default, and localized titles.

Place the JSON block under sap.ui5.routing.targets.<TargetName>.options.settings.content.body.sections.

**LANGUAGE**: JSON

**CODE**:
```json
{
	"sap.ui5": {
		"routing": {
			"targets": {
				"SalesOrderManageObjectPage": {
					"options": {
						"settings": {
							"content": {
								"body": {
									"sections": {
										"myObjectPageSection": {
											"subSections": {
												"customSubSection": {
													"type": "XMLFragment",
													"name": "SalesOrder.ext.CustomSubSection",
													"title": "{i18n>customSubSection}",
													"position": {
														"placement": "After",
														"anchor": "someSubSection"
													}
												}
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}
```

**STEP**: 4 — Notes, lazy loading, view vs fragment, and live examples

**DESCRIPTION**: 
- You may supply either a view or a fragment for the additional subsection. Do not add uxap tags (ObjectPageSection/subSections/ObjectPageSubSection) — the Object Page template already contains these.
- Lazy loading can be enabled via sap.ui.generic.app.enableLazyLoading for V2 view extensions.
- After adding extensions, display/layout/behavior and model usage for that content is your application's responsibility; avoid interacting with internal FE controls outside the extensionAPI.
- Live example and testing: see SAP Fiori development portal demo "Standard Floorplans - Extensions - Extensions for Object Pages - Custom Subsection".
- Ensure required services are available for examples (e.g., a defined LineItem service such as service.cds in the referenced example).

**LANGUAGE**: text

**CODE**:
```text
Live example: https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/topic/floorplanObjectPage/customSubSection
Note: Ensure a LineItem service exists (e.g., service.cds in the example).
```
--------------------------------

**TITLE**: Extension Points for Tables (SAP Fiori elements)

**INTRODUCTION**: Instructions and code examples to add or customize table columns in SAP Fiori elements apps (OData V2 and V4). Includes recommended extension points, fragment and manifest examples, controller extension example, configuration property reference, and sorting/filtering configuration. Use only the SAP Fiori elements extensionAPI when implementing app extensions.

**TAGS**: fiori-elements-framework, tables, extensions, OData V2, OData V4, manifest.json, fragment, controller-extension, custom-columns, responsive-table, grid-table, analytical-table, tree-table

STEP: 1 - Caution and integration guidelines

DESCRIPTION: Use app extensions only when manifest settings or annotations cannot produce the required behavior. Integrate using only the SAP Fiori elements extensionAPI. After creating an extension, display and system behavior (control placement, layout, models, busy handling) are the app's responsibility. Do not access internal objects of the framework.

LANGUAGE: Text

CODE:
```
Caution:
Use app extensions with caution and only if you cannot produce the required behavior by other means, such as manifest settings or annotations. To correctly integrate your app extension coding with SAP Fiori elements, use only the `extensionAPI` of SAP Fiori elements. After you've created an app extension, its display (control placement and layout) and system behavior (model and binding usage, busy handling) lies within the application's responsibility.
```

STEP: 2 - OData V2: Available extension points for adding columns (mapping table)

DESCRIPTION: Use these extension-points to add columns to tables in SAP Fiori elements (OData V2). `<Name of the EntitySet>` = current page entity set. `<Name of the table EntitySet>` = table entity set (use for object page table column extensions).

LANGUAGE: Text

CODE:
```
Table Type         | Floorplan     | Extension Point(s)
------------------------------------------------------------
All                | Object page   | onBeforeRebindTableExtension
Responsive table   | List report   | ResponsiveTableColumnsExtension|<Name of the EntitySet>
                   |               | ResponsiveTableCellsExtension|<Name of the EntitySet>
Responsive table   | Object page   | ResponsiveTableColumnsExtension|<Name of the table EntitySet>|<Facet ID/Annotation Path>
                   |               | ResponsiveTableCellsExtension|<Name of the table EntitySet>|<Facet ID/Annotation Path>
Grid table         | List report   | GridTableColumnsExtension|<Name of the EntitySet>
Grid table         | Object page   | GridTableColumnsExtension|<Name of the EntitySet>|<Facet ID/Annotation Path>
Analytical table   | List report   | AnalyticalTableColumnsExtension|<Name of the EntitySet>
Analytical table   | Object page   | GridTableColumnsExtension|AnalyticalTableColumnsExtension|<Name of the table EntitySet>|<Facet ID/Annotation Path>
Tree table         | List report   | TreeTableColumnsExtension|<Name of the EntitySet>

Notes:
- To replace default navigation in a responsive table (List Report) use ListReportExtension.
- To replace default navigation in a responsive table (Object Page) use DetailsExtension.
```

STEP: 3 - OData V4: Custom column key rules and ID patterns

DESCRIPTION: Keys for custom columns must use allowed characters. Understand how UI.DataField column keys and custom column IDs are formed.

LANGUAGE: Text

CODE:
```
Allowed characters for custom column keys: colon (:), underscore (_), dash (-), alphanumeric (aA-zZ,0-9)

UI.DataField column keys:
- All columns start with ...::C:: followed by the annotation type (e.g., UI.DataField), ::, and the corresponding property.
Example ID:
<sap.m.Label id="SalesOrder::SalesOrderManageList--fe::table::SalesOrderManage::LineItem::C::FieldGroup::multipleActionFields-innerColumnHeader">

Custom columns:
- ID concatenation: ...C::CustomColumn::<key>
```

STEP: 4 - Procedure: Define a fragment for the view extension (fragment XML)

DESCRIPTION: Create a fragment defining the custom column content (first define column metadata in manifest, then implement fragment for the cell UI). Example fragment contains a vertical layout with a button that calls a controller extension handler.

LANGUAGE: XML

CODE:
```xml
<!-- File: CustomColumnLRButton.fragment.xml -->
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:l="sap.ui.layout">
	<l:VerticalLayout id="myVL">
		<Button id="myButtonId" text="Custom Button" press="SalesOrder.ext.controller.LRExtend.buttonPressed" />
	</l:VerticalLayout>
</core:FragmentDefinition>
```

STEP: 5 - Procedure: Include view extensions in manifest.json (example controlConfiguration to add custom columns)

DESCRIPTION: Extend controllers and declare custom columns under controlConfiguration for list report and object page targets. Use "template" to reference the fragment path. Use "properties" to enable sorting/filtering/export behaviors. Use "availability" to control default/adaptation/hidden visibility.

LANGUAGE: JSON

CODE:
```json
{
    "sap.ui5": {
         "extends": {
               "extensions": {
                      "sap.ui.controllerExtensions": {
                            "sap.fe.templates.ListReport.ListReportController": {
                                    "controllerName": "SalesOrder.ext.controller.LRExtend"
                            },
                       "sap.fe.templates.ListReport.ObjectPageController": {
                                    "controllerName": "SalesOrder.ext.controller.OPExtend"
                            }
                      }
               }
        },
        "routing": {
            "targets": {
                "SalesOrderManageList": {
                    "options": {
                        "settings": {
                            "controlConfiguration": {
                                "@com.sap.vocabularies.UI.v1.LineItem": {
                                    "columns": {
                                        "CustomColumnRating": {
                                            "header": "{i18n>LR.Custom_Column|Button}",
                                            "width": "10em",
                                            "importance": "High",
                                            "horizontalAlign": "Center",
                                            "position": {
                                                "placement": "After",
                                                "anchor": "DataFieldForAnnotation::FieldGroup::multipleActionFields"
                                            },
                                            "template": "SalesOrder.ext.fragment.CustomColumnLRButton",
                                            "availability": "Default",
                                            "properties": [
                                                "ID",
                                                "TotalNetAmount",
                                                "_CustomerPaymentTerms/CustomerPaymentTerms",
                                                "_ShipToParty/BusinessPartner"
                                            ]
                                        },
                                        "CustomColumnWithHeaderFromMetaData": {
                                            "header": "{metaModel>/SalesOrderManage/SoldToParty@com.sap.vocabularies.Common.v1.Label}",
                                            "template": "SalesOrder.custom.CustomColumnButton",
                                            "availability": "Default",
                                            "position": {
                                                "placement": "After",
                                                "anchor": "DataFieldForAnnotation::FieldGroup::multipleActionFields"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "SalesOrderManageObjectPage": {
                    "options": {
                        "settings": {
                            "controlConfiguration": {
                                "_Item/@com.sap.vocabularies.UI.v1.LineItem": {
                                    "columns": {
                                        "CustomColumnOnObjectPage": {
                                            "header": "AnotherColumnLabel",
                                            "template": "SalesOrder.ext.fragment.CustomColumnOPButton",
                                            "availability": "Adaptation"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}
```

STEP: 6 - Controller extension: implement handlers (example LRExtend.controller.js)

DESCRIPTION: Implement fragment event handlers (e.g., press) in controller extensions. Include lifecycle overrides if needed.

LANGUAGE: JavaScript

CODE:
```javascript
// File: LRExtend.controller.js
sap.ui.define(
	[
		"sap/ui/core/mvc/ControllerExtension",
		"sap/m/MessageBox"
	],
	function (ControllerExtension, MessageToast, Messaging, Message, MessageType, Log, MessageBox) {
		"use strict";
		return ControllerExtension.extend("SalesOrder.ext.controler.LRExtend", {

			buttonPressed: function() {
				MessageBox.show("Button pressed!");
			},

			// This section allows to extend lifecycle hooks or override public methods of the base controller
			override: {
				routing: {
					onBeforeNavigation: function (oContextInfo) {
						//Custom code
					}
				},
				editFlow: {
					onBeforeDelete: function (oParameters) {
						//Custom code
					}
				}
			}
		});
	}
);
```

STEP: 7 - Custom column configuration properties (reference)

DESCRIPTION: Use these properties under controlConfiguration -> ... -> columns to configure custom columns. This reference preserves supported values and behavior.

LANGUAGE: Text

CODE:
```
Property: key
Supported values: aA-zZ, 0-9, :, _, -
Description: Identifier for the custom column; used as reference by other columns.

Property: header
Supported values: Any Unicode string, i18n text, metadata path (i18n recommended)
Description: Header text shown on table and add/remove dialog.

Property: tooltip
Supported values: Any Unicode string, i18n text
Description: Tooltip shown on column header; defaults to header text if not provided.

Property: width*
Supported values: auto | value | inherit
Description:
- auto: browser calculates width
- length: px, cm etc.
- %: percent of containing block
- inherit: inherit from parent
If omitted, SAP Fiori elements sets default values.

Property: importance
Supported values: "High" | "Medium" | "Low"
Description:
Controls responsive pop-in order: Low hidden first, then Medium, High always displayed.

Property: horizontalAlign*
Supported values: "Begin" | "Center" | "End"
Description: Aligns header and content horizontally.

Property: position
Supported values: column ID of anchor
Description: Defines placement relative to other columns. Use anchor key for "position.anchor".

Property: position.placement
Supported values: "After" | "Before"
Description: Placement relative to anchor.

Property: position.anchor
Supported values: "<key_of_referenced_column>"
Description: Key of the referenced column used as anchor. Annotation columns can be referenced by FieldId.

Property: template
Supported values: relative path to template file
Description: Path to fragment, using Fragment.load syntax.

Property: availability*
Supported values: "Default" | "Adaptation" | "Hidden"
Description:
- Default: shown in table
- Adaptation: not shown initially; available through key user adaptation
- Hidden: not available in table or adaptation

Property: properties*
Supported values: string or array of strings (annotation properties and navigation properties)
Description:
- Used by framework to enable sorting, filtering, message handling, export, copy.
- Sorting: properties appear in header sorting list; backend must support sorting (navigation properties may not be supported).
- Export: properties exported into spreadsheet or PDF. If multiple values, can split into separate columns.
- Messages: link messages to column based on properties.
- Copying: listed properties are copied during row/range copy.

Property: required
Supported values: true | false
Description: Visual indicator (asterisk) if required. No additional validation performed by framework.

(*) = optional value.
Bold formatting in original source indicated default or fallback behavior.
```

STEP: 8 - UI model binding example (editMode binding in fragment)

DESCRIPTION: Use UI model bindings inside fragments to react to UI state (e.g., edit mode). Example: enable control only when editMode is 'Editable'.

LANGUAGE: XML

CODE:
```
enabled="{= ${ui>/editMode} === 'Editable'}"
```

STEP: 9 - Sorting and filtering: properties example

DESCRIPTION: To enable sorting and filtering on a custom column, declare the "properties" array with the properties that map to annotation properties. These are used by header sort and the sorting/filtering dialog.

LANGUAGE: JSON

CODE:
```json
"properties": [
    "TotalNetAmount",
    "_CustomerPaymentTerms/CustomerPaymentTerms"
]
```

STEP: 10 - Notes, anchors, Table building block and live example link

DESCRIPTION: Important notes and links to additional resources. When using the Table building block, custom columns defined in manifest.json are not supported. Find anchors to correctly position custom elements. Live examples available.

LANGUAGE: Text

CODE:
```
Notes:
- For anchor keys: see "Finding the Right Key for the Anchor" (Finding the Right Key for the Anchor).
- When using the Table building block, defining custom columns in the manifest.json file isn't supported. See "The Table Building Block" for details.
- Live examples: SAP Fiori dev portal - Building Blocks - Table - Extensions - Custom Column
  https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/buildingBlocks/table/customColumn
```
--------------------------------

**TITLE**: Extension Points for Custom Views in Fiori Elements List Report (OData V4)

**INTRODUCTION**: This guide explains how to add custom views (custom tabs) to a Fiori elements List Report (OData V4). It shows how to configure custom tabs in the manifest, create XML fragments for custom content (table or button), attach a fragment-level handler, register a controller extension, and apply filter conditions from the filter bar to custom tabs.

**TAGS**: sapui5, fiori-elements, list-report, odata-v4, extension, manifest, xmlfragment, controller-extension, filterConditions

STEP: 1 — Add custom view entries to the List Report configuration in manifest.json

DESCRIPTION: Declare custom tabs (views) for the List Report in the app manifest. Each view in "paths" must include a unique key. For custom view fragments provide the "template" (name includes sap.app.id prefix), and optionally a localized "label". Ensure you have at least one annotation view in the list; custom views co-exist with annotation-based tabs.

LANGUAGE: JSON

CODE:
```json
"BusinessPartnersList": {
    "type": "Component",
    "id": "BusinessPartnersList",
    "name": "sap.fe.templates.ListReport",
    "options": {
        "settings": {
            "contextPath": "/BusinessPartners",
            "views": {
                "paths": [
                    {
                        "key": "tab1",
                        "annotationPath": "com.sap.vocabularies.UI.v1.SelectionPresentationVariant#All"
                    },
                    {
                        "key": "tab2",
                        "label": "Custom View with Table",
                        "template": "BusinessPartners.ext.CustomViewTable"
                    },
                    {
                        "key": "tab3",
                        "label": "{i18n>LRCustomViewWithButton}",
                        "template": "BusinessPartners.ext.CustomViewWithButton"
                    }
                ],
                "showCounts": true
            }
        }
    }
}
```

STEP: 2 — Custom view properties

DESCRIPTION: Supported properties for each custom view entry in manifest "views.paths":
- key: "<unique_tab_id>" — Unique tab identifier.
- label: "<tab_title>" — Tab title; supports localization via i18n.
- template: "<name_of_custom_xml_view>" — Fully qualified view name (sap.app.id + path in app/webapp + XML view name).

LANGUAGE: JSON

CODE:
```json
// Example structure (conceptual)
{
  "key": "<unique_tab_id>",
  "label": "<tab_title>",
  "template": "<sap.app.id>.<path>.<ViewName>"
}
```

STEP: 3 — Create custom XML fragment: table example

DESCRIPTION: Add an XML fragment (xmlfragment) that defines the content of the custom tab. This example adds a sap.m.Table bound to /BusinessPartners. Use the fragment name referenced by the manifest.template (e.g., BusinessPartners.ext.CustomViewTable).

LANGUAGE: XML

CODE:
```xml
<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:u="sap.ui.unified">
    <Table id="customViewWithTable" items="{
        path: '/BusinessPartners',
        sorter: {
            path: 'Name'
        }
    }">
        <headerToolbar>
            <OverflowToolbar>
                <content>
                    <Title text="Business partners" level="H2" />
                    <ToolbarSpacer />
                </content>
            </OverflowToolbar>
        </headerToolbar>
        <infoToolbar>
            <OverflowToolbar>
                <Label text="List of business partners" />
            </OverflowToolbar>
        </infoToolbar>
        <columns>
            <Column width="15em">
                <Text text="Partner Name" />
            </Column>
            <Column minScreenWidth="Tablet" demandPopin="true">
                <Text text="Country" />
            </Column>
            <Column minScreenWidth="Desktop" demandPopin="true" hAlign="End">
                <Text text="Region" />
            </Column>
            <Column minScreenWidth="Desktop" demandPopin="true" hAlign="Center">
                <Text text="Segment" />
            </Column>
            <Column minScreenWidth="Desktop" demandPopin="true" hAlign="Center">
                <Text text="Sales Amount" />
            </Column>
            <Column minScreenWidth="Desktop" demandPopin="true" hAlign="Center">
                <Text text="Sales Amount (local currency)" />
            </Column>
        </columns>
        <items>
            <ColumnListItem type="Active">
                <cells>
                    <ObjectIdentifier text="{Name}" />
                    <Text text="{Country}" />
                    <Text text="{Region}" />
                    <Text text="{Segment}" />
                    <u:Currency value="{SalesAmount}" currency="{Currency}" />
                    <u:Currency value="{SalesAmountLocalCurrency}" currency="{LocalCurrency}" />
                </cells>
            </ColumnListItem>
        </items>
    </Table>
</core:FragmentDefinition>
```

STEP: 4 — Create custom XML fragment: button with fragment-level handler

DESCRIPTION: Use core:require in the fragment to attach a handler/controller for fragment-level event handling (e.g., button press). The core:require points to a module path inside your app (e.g., BusinessPartners/ext/CustomButton). Ensure the module implements the handler functions you use (e.g., onPress).

LANGUAGE: XML

CODE:
```xml
<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core">
    <Panel
        headerText="Business Partners"
        class="sapUiResponsiveMargin"
        width="auto"
        core:require="{handler: 'BusinessPartners/ext/CustomButton'}"
    >
        <content>
            <Button text="IBN" id="customButton1" class="sapUiSmallMarginEnd" press="handler.onPress" />
        </content>
    </Panel>
</core:FragmentDefinition>
```

STEP: 5 — Implement fragment handler module (custom controller for fragment)

DESCRIPTION: Implement the fragment-level handler module referenced by core:require. Export functions used by the fragment (e.g., onPress). Keep logic minimal and reference UI5 modules as needed (MessageBox in example).

LANGUAGE: JavaScript

CODE:
```javascript
sap.ui.define(["sap/ui/core/Component"], function(Component) {
    "use strict";
 
    return {
        someHandler: function(oEvent) {
            // Do something here
        },
        onPress: function(oEvent) {
            MessageBox.show("You pressed the custom action");
        }
    };
});
```

STEP: 6 — Register a controller extension for the List Report in manifest.json

DESCRIPTION: To customize behavior when filter bar values change or when a custom tab needs refresh, register a controller extension that overrides methods on the List Report controller. Add the controller extension entry under sap.ui5.extends.extensions.sap.ui.controllerExtensions.

LANGUAGE: JSON

CODE:
```json
"sap.ui5": {
    "extends": {
        "extensions": {
            "sap.ui.controllerExtensions": {
                "sap.fe.templates.ListReport.ListReportController": {
                    "controllerName": "SalesOrder.ext.LRExtend"
                }
            }
        }
    }
}
```

STEP: 7 — Implement controller extension to apply filterConditions and handle pending filters

DESCRIPTION: Override onViewNeedsRefresh and onPendingFilters in a ControllerExtension to apply filter conditions from the filter bar onto custom tab bindings. Use base.getExtensionAPI().createFiltersFromFilterConditions to convert filterConditions into OData filters/search. Example shows deleting a specific Region filter value and applying combined filters and $search to a table binding. Also set overlay while filters are pending.

LANGUAGE: JavaScript

CODE:
```javascript
sap.ui.define(["sap/ui/core/mvc/ControllerExtension", "sap/ui/model/Filter"], function(ControllerExtension, Filter) {
    "use strict";
    return ControllerExtension.extend("BusinessPartners.ext.LRExtend", {
        override: {
            onViewNeedsRefresh: function(mParameters) {
                var oFilterInfo = mParameters.filterConditions;
                if (oFilterInfo) {
                    var duplicateFilterInfo = Object.assign({}, oFilterInfo);
                    if (
                        duplicateFilterInfo.Region &&
                        duplicateFilterInfo.Region.map(item => item.values).findIndex(i => i.includes("Bavaria")) !== -1
                    ) {
                        delete duplicateFilterInfo.Region;
                    }
                    var oTable = this.getView().byId("BusinessPartners::BusinessPartnersList--fe::CustomTab::tab2--customViewWithTable"),
                        oBinding = oTable.getBinding("items"),
                        oConvertedFilter = this.base.getExtensionAPI().createFiltersFromFilterConditions(duplicateFilterInfo);
                    oTable.setShowOverlay(false);
                    var oFilter = new Filter({ filters: oConvertedFilter.filters, and: true });
                    oBinding.filter(oFilter);
                    oBinding.changeParameters({$search: oConvertedFilter.search});
                }
            },
            onPendingFilters: function() {
                var oTable = this.getView().byId("BusinessPartners::BusinessPartnersList--fe::CustomTab::tab2--customViewWithTable");
                if (oTable) {
                    oTable.setShowOverlay(true);
                }
            }
        }
    });
});
```
--------------------------------

**TITLE**: SAP Fiori elements — FAQs Condensed for Code Integration

**INTRODUCTION**: Action-oriented FAQ reference for developers building SAP Fiori elements applications. Use this as a quick, code-focused checklist for setup, manifest configuration, annotations, navigation, actions, filter bar behavior, value help, tables, charts, object page behavior, extensions, and automated testing guidance.

**TAGS**: fiori-elements-framework, sapui5, annotations, odata-v4, manifest.json, navigation, actions, filter-bar, value-help, object-page, tables, charts, drafts, extensions, opa-testing

STEP: 1 — Recommended IDE and Tools
DESCRIPTION: Use SAP Fiori tools (extensions for SAP Business Application Studio and Visual Studio Code) for scaffolding, annotations, and local testing. Open the Tools tile in the Developing Apps with SAP Fiori Elements documentation for guided setup.
LANGUAGE: text
CODE:
```text
Recommended:
- SAP Business Application Studio + SAP Fiori tools extensions
- Visual Studio Code + SAP Fiori tools extension pack
```

STEP: 2 — Declare required libraries in manifest.json
DESCRIPTION: Add the Fiori elements libs to the sap.ui5.dependencies.libs section to enable floorplans or custom apps. Use sap.fe.templates for standard floorplans (list report/object page). For custom apps add sap.fe.core, and use sap.fe.macros when using building blocks.
LANGUAGE: JSON
CODE:
```json
{
  "sap.ui5": {
    "dependencies": {
      "libs": {
        "sap.fe.templates": {},
        "sap.fe.core": {},
        "sap.fe.macros": {}
      }
    }
  }
}
```

STEP: 3 — Draft handling rule
DESCRIPTION: For edit-based create/edit/delete scenarios in OData V4, ensure the back end exposes a draft-enabled service. Non-draft services are only supported for read-only UIs. Annotate and configure draft support in the service and app.
LANGUAGE: text
CODE:
```text
Note: OData V4 edit scenarios require a draft-enabled service. Use draft annotations and implement server-side draft handling.
Reference: Draft Handling documentation
```

STEP: 4 — Locate common annotations and UI elements
DESCRIPTION: Refer to the targeted docs for annotation patterns for tables, charts, filter bars, object page headers/sections, actions, field help, and navigation. Use these docs as sources for exact annotation names and example XML/EDMX/CDS fragments.
LANGUAGE: text
CODE:
```text
Key topics:
- Configuring Tables
- Configuring Charts
- Configuring Filter Bars
- Setting Up Object Page Header
- Defining and Adapting Sections
- Actions, Field Help, Navigation
```

STEP: 5 — Control visibility and enablement via annotations
DESCRIPTION: Use UI.Hidden, CreateHidden, UpdateHidden, DeleteHidden to hide standard buttons or parts of the UI. Use OperationAvailable to control whether action buttons are enabled. Apply these annotations in your annotation file (XML/EDMX) or CDS metadata.
LANGUAGE: XML
CODE:
```xml
<!-- Example UI.Hidden on a property -->
<Annotations Target="YourService.YourEntity/YourProperty">
  <Annotation Term="UI.Hidden" Bool="true"/>
</Annotations>

<!-- Example OperationAvailable on an action -->
<Annotations Target="YourService.YourEntity/Default.ActionName">
  <Annotation Term="UI.OperationAvailable" Bool="false"/>
</Annotations>
```

STEP: 6 — Implement side-effect annotations to refresh dependent fields
DESCRIPTION: Annotate server-side side effects so the front end knows which fields to refresh when a change occurs. This prevents stale UI data by letting the client request updates for influenced properties after backend operations.
LANGUAGE: XML
CODE:
```xml
<!-- Side effect annotation example -->
<Annotations Target="YourService.YourEntity">
  <Annotation Term="Org.OData.Capabilities.V1.SideEffects">
    <!-- Define SourceProperties and EffectedProperties -->
  </Annotation>
</Annotations>
```

STEP: 7 — Message handling: popover vs dialog
DESCRIPTION: Message display location (footer popover vs modal dialog) depends on message state, template (list/object page), and page mode. Ensure backend messages include types/states and review Using Messages docs for behavior.
LANGUAGE: text
CODE:
```text
Behavior depends on:
- Message type (Error/Warning/Info)
- Message state (Transient/Persistent)
- Page template and display/edit mode
```

STEP: 8 — Configure chevron (next-level) navigation and deep linking
DESCRIPTION: Use navigation annotations to configure chevron behavior for table rows. To navigate externally instead of an object page, update navigation annotations. Use Deep Linking (Inbound Navigation) to open object/subobject pages directly.
LANGUAGE: XML
CODE:
```xml
<!-- Example: Navigation to next level (semantic object/action) -->
<Annotations Target="YourService.YourEntity">
  <!-- Navigation annotations linking to semantic objects or target app -->
</Annotations>
```

STEP: 9 — Control outbound navigation and sensitive data
DESCRIPTION: Use Common.SemanticObjectUnavailableActions and semantic object mapping to hide unwanted intents and to map source/target field names. Use handling-sensitive-data guidance to avoid leaking inapplicable or confidential info in navigation contexts.
LANGUAGE: XML
CODE:
```xml
<!-- Example: Hiding actions for a semantic object -->
<Annotations Target="YourService.YourEntity">
  <Annotation Term="Common.SemanticObjectUnavailableActions">
    <!-- List of actions to exclude -->
  </Annotation>
</Annotations>
```

STEP: 10 — Define and secure actions (bound/unbound), parameters, grouping
DESCRIPTION: Use action annotations to declare bound/unbound OData V4 actions or function imports, define parameters (with default values), group actions under menu buttons, and use OperationAvailable to control enablement based on conditions.
LANGUAGE: XML
CODE:
```xml
<!-- Example: Action with parameters -->
<Annotations Target="YourService.YourEntity/ActionName">
  <Annotation Term="Org.OData.Core.V1.Action">
    <!-- Define parameters and defaults -->
  </Annotation>
</Annotations>

<!-- Grouping under menu: define action group annotations in the manifest or annotation file -->
```

STEP: 11 — Filter bar: semantic date operators, defaults, parameterized entities
DESCRIPTION: Enable semantic date/datetime operators (TODAY, TOMORROW), provide default filter values via annotations, and support parameterized entities (e.g., DisplayCurrency) to send parameters (not filters) to the back end.
LANGUAGE: text
CODE:
```text
- Enable semantic operators: annotate filterable date/datetime properties appropriately.
- Default filters: annotate default values for filter bar properties.
- Parameterized entities: declare entity parameters in service and configure filter bar binding to parameters.
```

STEP: 12 — Field value help: ensure text annotations in both field and value help entity
DESCRIPTION: Maintain text annotations on both the property used in the field and on the corresponding property in the value help entity. Avoid pointing text annotation in value help to the same property as the key — use a separate description property.
LANGUAGE: XML
CODE:
```xml
<!-- Wrong Sample Code -->
<Annotations Target="TestService.CategoryType/CatergoryId"><Annotation Term="Common.Text" Path="CategoryId"/></Annotations>

<!-- Correct Sample Code -->
<Annotations Target="TestService.CategoryType/CatergoryId"><Annotation Term="Common.Text" Path="CategoryDescription"/></Annotations>
```

STEP: 13 — Value help validation rules
DESCRIPTION: Value help does not validate arbitrary entries unless specific conditions are met: property type Edm.Guid, Common.IsUnit, Common.IsCurrency, Common.ValueHelpWithFixedValues, or Common.ValueListForValidation are present.
LANGUAGE: text
CODE:
```text
Validation enabled when:
- Edm.Guid OR
- Common.IsUnit OR
- Common.IsCurrency OR
- Common.ValueHelpWithFixedValues OR
- Common.ValueListForValidation
```

STEP: 14 — Tables: default column widths and responsive hiding
DESCRIPTION: From SAPUI5 1.87, default column width calculation and responsive resizing are enabled. Use manifest annotations to set explicit column widths. Use UI.Importance on fields to control which columns hide/move when screen size is reduced.
LANGUAGE: JSON
CODE:
```json
{
  "sap.ui5": {
    "models": { "...": "..." },
    "resources": { "...": "..." },
    "someConfig": {
      "tableColumnWidths": {
        "PropertyA": "200px",
        "PropertyB": "150px"
      }
    }
  }
}
```

STEP: 15 — Charts: OData V4 aggregation behavior
DESCRIPTION: For OData V4, the client must explicitly pass properties as dimensions or measures in chart requests. Ensure backend aggregation capability is enabled and the client sends the required measure/dimension parameters.
LANGUAGE: text
CODE:
```text
OData V2: server infers aggregations.
OData V4: client must declare dimensions/measures explicitly (enable backend aggregation support).
```

STEP: 16 — Object page: facets, dynamic hiding, lazy loading (LongRunners)
DESCRIPTION: Use annotations to add header facets, and to show/hide content. For performance, group long-loading elements under the LongRunners group to defer or separate backend calls.
LANGUAGE: XML
CODE:
```xml
<!-- Example: Add header facet annotation placeholder -->
<Annotations Target="YourService.YourEntity">
  <!-- Facet definitions for object page header -->
</Annotations>

<!-- Example: Mark a request group as LongRunners (pseudo-annotation representation) -->
<Annotations Target="YourService.YourEntity">
  <!-- Loading behavior: group certain requests under 'LongRunners' -->
</Annotations>
```

STEP: 17 — Extensions, building blocks, and key-user adaptation
DESCRIPTION: Use app extensions to inject custom logic while retaining standard behavior. Use building blocks to implement custom sections or free-style apps. Enable key-user adaptation to allow runtime UI customizations.
LANGUAGE: text
CODE:
```text
- Implement app extensions via SAP Fiori elements extension points.
- Use building blocks (sap.fe.macros) for custom-reusable UI fragments.
- Enable key-user adaptation as per Enabling an App for Key User Adaptation docs.
```

STEP: 18 — Automated testing (MockServer + OPA)
DESCRIPTION: Use the MockServer and OPA test library to create OPA tests for OData V4 apps. Mock backend responses, simulate user interactions, and validate flows in list report, object page, and custom extensions.
LANGUAGE: JavaScript
CODE:
```javascript
// Skeleton: start MockServer and OPA tests
// 1) Start mock server with recorded metadata and responses
// 2) Boot the app with mock server endpoint
// 3) Write OPA tests using opaTest, Arrangement, Action, Assertion
```


--------------------------------

**TITLE**: Feature Showcase Apps and Samples (SAP Fiori elements for OData V4)

**INTRODUCTION**: Action-oriented reference for obtaining, inspecting, and using SAP Fiori elements feature showcase apps and sample applications (CAP and RAP based). Contains exact repository links and shell commands to clone and inspect repositories. Use these steps to fetch examples, identify relevant files (CDS, annotations, manifest.json, service definitions), and open the SAP Fiori development portal for live examples.

**TAGS**: fiori-elements, OData V4, CAP, RAP, SFLIGHT, samples, feature-showcase, SAPUI5

**STEP**: 1 — Overview: Available repositories and live portal

**DESCRIPTION**: Quick list of the feature showcase and sample repositories provided by SAP-samples and the SAP Fiori development portal URL for live examples. Use these links to fetch source and documentation.

**LANGUAGE**: Shell

**CODE**:
```bash
# Feature showcase (CAP)
https://github.com/SAP-samples/fiori-elements-feature-showcase#readme

# Feature showcase (RAP)
https://github.com/SAP-samples/abap-platform-fiori-feature-showcase#readme

# Sample apps
https://github.com/SAP-samples/cap-sflight#readme
https://github.com/SAP-samples/abap-platform-refscen-flight

# Live examples and documentation
https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/topic/introduction/portal
```

**STEP**: 2 — Clone: Feature showcase based on CAP

**DESCRIPTION**: Clone the CAP-based feature showcase repository locally. After cloning, open the repository README.md for run instructions and examples. Use the following commands to clone and then list top-level files.

**LANGUAGE**: Shell

**CODE**:
```bash
git clone https://github.com/SAP-samples/fiori-elements-feature-showcase.git
cd fiori-elements-feature-showcase
# Inspect README and top-level structure
ls -la
less README.md
```

**STEP**: 3 — Clone: Feature showcase based on RAP

**DESCRIPTION**: Clone the RAP-based feature showcase repository (ABAP platform examples). Open the repository README.md to find platform-specific setup and instructions for ABAP/RAP scenarios.

**LANGUAGE**: Shell

**CODE**:
```bash
git clone https://github.com/SAP-samples/abap-platform-fiori-feature-showcase.git
cd abap-platform-fiori-feature-showcase
ls -la
less README.md
```

**STEP**: 4 — Clone: CAP SFLIGHT sample app

**DESCRIPTION**: Clone the CAP SFLIGHT sample repository. Use the README to follow local setup (CAP tooling, Node, etc.). After cloning, identify CDS models and annotation artifacts.

**LANGUAGE**: Shell

**CODE**:
```bash
git clone https://github.com/SAP-samples/cap-sflight.git
cd cap-sflight
ls -la
less README.md
```

**STEP**: 5 — Clone: RAP SFLIGHT sample app

**DESCRIPTION**: Clone the RAP SFLIGHT repository (ABAP platform reference scenario). Use the repository README for ABAP system setup or transport/import instructions.

**LANGUAGE**: Shell

**CODE**:
```bash
git clone https://github.com/SAP-samples/abap-platform-refscen-flight.git
cd abap-platform-refscen-flight
ls -la
less README.md
```

**STEP**: 6 — Inspect repositories for Fiori elements artifacts

**DESCRIPTION**: Locate key artifacts used by Fiori elements and OData V4 apps: CDS model files (*.cds), annotation files (*.annotations.xml, *.xml), manifest.json files, OData service definitions, and UI app folders. Use these commands to find and preview relevant files in any cloned repo.

**LANGUAGE**: Shell

**CODE**:
```bash
# Run from repository root
# Find CDS models, annotation xml files and manifest.json
find . -type f \( -name "*.cds" -o -name "*.annotations.xml" -o -name "manifest.json" -o -name "*.yaml" -o -name "*.yml" \) -print

# Preview manifest.json (if present)
jq . manifest.json || sed -n '1,200p' manifest.json

# Search for UI annotation or @UI usage in code
grep -R --include="*.cds" --include="*.xml" --include="*.json" -n "@UI\|sap.ui" .

# Inspect local OData service definitions (annotations or metadata)
grep -R --include="*.xml" --include="*.json" -n "<Annotation" "annotations" || true
```

**STEP**: 7 — Open SAP Fiori development portal (live examples)

**DESCRIPTION**: Use the SAP Fiori development portal to view live feature examples and documentation. Open the portal URL in a browser to explore demonstrations and interactive docs for Fiori elements.

**LANGUAGE**: URL

**CODE**:
```text
https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/topic/introduction/portal
```
--------------------------------

**TITLE**: Field Help (SAP Fiori elements for OData V4) — Code & Annotation Patterns

**INTRODUCTION**: This reference shows how to configure field help behaviors in SAP Fiori elements (OData V4): value help, dropdown lists, date picker, date/time picker, timezone handling, history of recently entered values, and type-ahead. Use the provided XML/CDS/ABAP snippets to generate correct metadata and UI behavior.

**TAGS**: fiori-elements-framework, odata-v4, annotations, value-help, dropdown, date, datetime, timezone, CAP, ABAP, XML, CDS, UI.Importance, Common.Timezone

STEP: Applicability / Quick summary
DESCRIPTION: Field help features described here apply only to SAP Fiori elements for OData V4. Fields can be associated with value help, fixed-value dropdowns, date pickers, or date/time pickers depending on type and annotations.
LANGUAGE: N/A
CODE:
```text
Applicable scenario: SAP Fiori elements for OData V4
Field help types: value help, dropdown (fixed values), date picker, date/time picker, dynamic semantic date options
```

STEP: Value Help
DESCRIPTION: Value help allows users to select a value from a value-help entity or define a condition to fetch a value. Configure value help entities and annotations to control dialog and type-ahead columns (see UI.Importance). See linked documentation for full configuration of value help entities and dialogs.
LANGUAGE: N/A
CODE:
```text
See "Value Help" topic (value-help-fccb255.md) for entity configuration, dialog layout, and usage.
```

STEP: Dropdown-Based Fields (fixed values)
DESCRIPTION: Use a dropdown list for fields with fixed values. Configure fixed-value value help in metadata so the UI renders a dropdown instead of a full value-help dialog.
LANGUAGE: N/A
CODE:
```text
Behavior: If the value help entity provides only fixed values, the field is rendered as a dropdown list.
See "Value Help as a Dropdown List" (value-help-as-a-dropdown-list-2a0a630.md) for configuration details.
```

STEP: Date Picker — Edm.Date fields
DESCRIPTION: For properties of type Edm.Date used outside a filter context, the UI renders a date picker. In filter contexts the field help depends on filter restrictions and may render a date picker, value help, or dynamic semantic date options.
LANGUAGE: XML
CODE:
```xml
<EntityType Name="SalesOrderManage">
   <Property Name="SalesOrderDate" Type="Edm.Date"/>
</EntityType>
```

LANGUAGE: CDS
CODE:
```cds
entity SalesOrderManage { 
     SalesOrderDate : Date; 
}
```

LANGUAGE: ABAP CDS
CODE:
```text
No ABAP CDS sample provided. Use DATS data type in CDS view or DB table to generate Edm.Date metadata.
```

STEP: Date/Time Picker — Edm.DateTimeOffset fields
DESCRIPTION: For Edm.DateTimeOffset fields used outside filter contexts, the UI renders a date/time picker. In filter contexts behavior depends on filter restrictions (date/time picker, value help, or semantic date options). The UI displays and converts DateTimeOffset values to the UI timezone (SAPUI5 behavior). You can also specify fixed or property-based timezone annotations to display the timezone in edit and display modes.
LANGUAGE: XML
CODE:
```xml
<EntityType Name="SalesOrderManage">
    <Property Name="LastChangedDateTime" Type="Edm.DateTimeOffset"/>
</EntityType>
```

LANGUAGE: CDS
CODE:
```cds
entity SalesOrderManage {
       SalesOrderDate : DateTime;
}
```

LANGUAGE: ABAP CDS
CODE:
```text
No ABAP CDS sample provided for Edm.DateTimeOffset. Use TIMESTAMP data type in CDS view or DB table.
```

STEP: Timezone — Fixed Timezone (Common.Timezone)
DESCRIPTION: To show a fixed IANA timezone for a DateTime field, set the Common.Timezone annotation to a fixed string. This displays the timezone in the input (edit) and text (display) fields.
LANGUAGE: XML
CODE:
```xml
<EntityType Name="SalesOrderManage">
    ...
    <Property Name="testTimeFixed" Type="Edm.DateTimeOffset"/>
    ...
</EntityType>

<Annotations Target="com.c_salesordermanage_sd.SalesOrderManagerManage/testTimeFixed">
    <Annotation Term="Common.Timezone" String="Asia/Riyadh"/>
    <Annotation Term="Common.Label" String="Timestamp with fixed timezone"/>
</Annotations>
```

LANGUAGE: CDS
CODE:
```cds
entity SalesOrderManage {
…
testTimeFixed  : DateTime @Common : { Timezone : 'Asia/Riyadh' };
…
}
```

STEP: Timezone — Timezone Based on Another Property
DESCRIPTION: To derive the timezone value dynamically from another property, set Common.Timezone to the Path of that property. In ABAP CDS use semantics annotations to link timezone reference and timezone properties.
LANGUAGE: XML
CODE:
```xml
<Annotations Target="com.c_salesordermanage_sd.SalesOrderManage/testTime">
   <Annotation Term="Common.Timezone" Path="testTimezone"/>
   <Annotation Term="Common.Label" String="Datetime Stamp with Timezone based on Property"/>
</Annotations>
  
<Annotations Target="com.c_salesordermanage_sd.SalesOrderManager/testTimezone">
   <Annotation Term="Common.Label" String="Timezone Property"/>
</Annotations>
```

LANGUAGE: ABAP CDS
CODE:
```abap
@Semantics.timeZoneReference: 'MySAPTimezone'
MyDateTime,
  
@Semantics.timeZone
MySAPTimezone,
```

LANGUAGE: CDS
CODE:
```cds
entity SalesOrderManage {
    testTime : DateTime @Common : { Timezone : testTimezone };
}
```

STEP: History of Recently Entered Values
DESCRIPTION: Enable "history of recently entered values" (saves previous entries and shows them when the field is focused). The list filters on typing and is not shown when empty. Not supported for value help based on fixed values. Enable by setting the INPUTFIELD_HISTORY parameter in the SAP Fiori launchpad configuration.
LANGUAGE: N/A
CODE:
```text
Enable in Fiori launchpad:
- Parameter name: INPUTFIELD_HISTORY
- Behavior: Stores/returns recently entered values per user; displayed on focus; filtered while typing.
- Limitation: Not available for value help based on fixed values.
```

STEP: Type-Ahead Support ($search and UI.Importance)
DESCRIPTION: Value-help-enabled fields provide type-ahead suggestions fetched from the backend using the $search parameter. Control which columns appear in the type-ahead list with UI.Importance: only properties annotated with UI.Importance = High are shown. If UI.Importance is not defined, the type-ahead list shows the same columns as the value help dialog. Type-ahead is disabled if the value help entity is configured as non-searchable.
LANGUAGE: N/A
CODE:
```text
Type-ahead mechanics:
- Client uses OData $search on the value help entity.
- Use UI.Importance annotation:
    - UI.Importance = High -> shown in type-ahead
    - No UI.Importance -> same columns as value help dialog
- Disabled if the value help entity is non-searchable (see service/entity configuration).
```
--------------------------------

**TITLE**: Finding the Right Anchor Key for SAP Fiori elements (OData V4)

**INTRODUCTION**: Identify DOM anchor keys using the browser developer tools so you can set manifest position.anchor values to place custom UI (header facets, header fields, table columns, sections/subsections) correctly in SAP Fiori elements (OData V4). Use the DOM element inspector and $metadata response to derive the exact anchor strings.

**TAGS**: fiori-elements-framework, sap, odata-v4, anchor, manifest.json, developer-tools, DOM, table, header, facet, column

**STEP**: 1 — Open browser developer tools

**DESCRIPTION**: Open the browser DevTools to inspect DOM elements and network $metadata responses.

**LANGUAGE**: Text

**CODE**:
```text
Windows:  CTRL + SHIFT + I
macOS:    CMD + OPT + I
```

**STEP**: 2 — Find anchors for the Header Facet

**DESCRIPTION**: In the DOM inspector search for the string "fe::HeaderFacetContainer" (for standard header facets) or "fe::HeaderFacetCustomContainer" (for custom header facets). The name shown immediately after that string is the facet key to use as position.anchor.

Example: derive anchor "AnchorHeaderFacetName" from the element ID.

**LANGUAGE**: HTML

**CODE**:
```html
AppName::AppNameObjectPage--fe::HeaderFacetContainer::AnchorHeaderFacetName
// position.anchor to use: "AnchorHeaderFacetName"
```

**STEP**: 3 — Find anchors for a Header Facet Field

**DESCRIPTION**: To place a custom header field inside a specific header facet, search the DOM for "fe::HeaderFacet::Form". Fields use key pattern "DataFieldAbstractType::PropertyName". Use that string as position.anchor. The key combines the field type and the property name (commonly "DataField::PropertyName").

**LANGUAGE**: HTML

**CODE**:
```html
AppName::AppNameObjectPage--fe::HeaderFacet::Form::HeaderFacetName::DataField::PropertyName::Field
// position.anchor to use: "DataField::PropertyName"
```

**STEP**: 4 — Find anchors for a Table Column (custom or standard)

**DESCRIPTION**: Two tasks: (A) locate the column element ID prefix in the DOM; (B) find the column record type in the $metadata response (UI.LineItem) to compose the key as DataFieldAbstractType::ColumnName.

- (A) DOM: search for the prefix "fe::table::AppName::LineItem::C::" (replace AppName). The full element ID appends the column name or annotation path.
- (B) Metadata: inspect the $metadata XML response and find the <Annotation Term="UI.LineItem"> section to determine the Record Type (DataField, DataFieldForAction, DataFieldForAnnotation, etc.) and property/path.

The final position.anchor pattern: DataFieldAbstractType::ColumnName (or include annotation path segments like DataFieldForAnnotation::FieldGroup::multipleFields). For custom columns defined in manifest.json columns collection, use the custom column key directly.

**LANGUAGE**: HTML

**CODE**:
```html
// DOM examples (replace AppName):
fe::table::AppName::LineItem::C::PersonName
fe::table::AppName::LineItem::C::FieldGroup::multipleFields
```

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.LineItem">
    <Collection>
        <Record Type="UI.DataField">
            <PropertyValue Property="Value" Path="PersonName"/>
        </Record>
        <Record Type="UI.DataFieldForAction">
            <PropertyValue Property="Action" String="ChangePresence"/>
        </Record>
        <Record Type="UI.DataFieldForAnnotation">
            <PropertyValue Property="Target" AnnotationPath="@UI.FieldGroup#multipleFields"/>
        </Record>
        ...
    </Collection>
</Annotation>
```

**LANGUAGE**: Text

**CODE**:
```text
// Example composed anchor keys:
DataField::PersonName
DataFieldForAction::ChangePresence
DataFieldForAnnotation::FieldGroup::multipleFields

// For custom columns: use the custom column key defined in manifest.json -> columns collection.
```

**STEP**: 5 — Find anchors for Section or Subsection

**DESCRIPTION**: In the DOM inspector search for "fe::FacetSection" (section) or "fe::FacetSubSection" (subsection). The name immediately after that string is the facet key to use as position.anchor.

**LANGUAGE**: HTML

**CODE**:
```html
AppName::AppNameObjectPage--fe::FacetSection::AnchorSectionFacetName
// position.anchor to use: "AnchorSectionFacetName"
```
--------------------------------

**TITLE**: Flexible Programming Model for SAP Fiori elements (OData V4)

**INTRODUCTION**: Practical guide for extending SAP Fiori elements OData V4 apps using the Flexible Programming Model. Covers where to place extension code, how to implement extension points, how to register controller extensions in the manifest, and how to treat pages as custom pages on the Fiori elements framework. Use these patterns when you need custom UI5 controls, controller logic, or full custom pages while retaining Fiori elements capabilities.

**TAGS**: fiori-elements, sapui5, flexible-programming-model, extension-points, controller-extensions, custom-pages, odata-v4

**STEP**: 1 — Where to add extensions

**DESCRIPTION**: Place extension fragments, controllers, and manifest changes inside your app's webapp directory. Common locations:
- webapp/manifest.json — manifest changes and controller extension registration
- webapp/ext/ — extension fragments and views
- webapp/ext/controller/ — controller extension implementations

This keeps customizations separate from generated Fiori elements artifacts and makes upgrades simpler.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "webapp/manifest.json": {
    "description": "Place manifest modifications here to register controller extensions and custom targets. Keep path webapp/ext/... for extension artifacts."
  }
}
```

**STEP**: 2 — Add an XML extension point (UI fragment)

**DESCRIPTION**: Use sap.ui.core.ExtensionPoint in the host view where Fiori elements exposes an extension point. Provide the fragment implementing UI additions in webapp/ext/. Example fragment file and how the host view will include it via an ExtensionPoint (the host view is typically provided by the framework; you supply the fragment named by the extension point).

- Create fragment at: webapp/ext/fragments/CustomActions.fragment.xml
- Use the ExtensionPoint name defined by the template (example name used below)

**LANGUAGE**: XML

**CODE**:
```xml
<!-- webapp/ext/fragments/CustomActions.fragment.xml -->
<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core">
  <Button text="Custom Action" press=".onCustomAction"/>
</core:FragmentDefinition>

<!-- Example usage in a host view (framework provides the ExtensionPoint location) -->
<!-- Host view contains something like:
<core:ExtensionPoint name="HeaderActionButtons" />
-->
```

**STEP**: 3 — Register a controller extension in manifest.json

**DESCRIPTION**: Map the Fiori elements controller you want to extend to your extension controller implementation using sap.ui.controllerExtensions. Place this mapping inside webapp/manifest.json under sap.ui5 → extends → extensions → sap.ui.controllerExtensions. This tells the framework to call your controller methods in addition to the base controller.

- Add mapping in: webapp/manifest.json
- Implement controller at: webapp/ext/controller/ObjectPageExt.controller.js (or a matching name)

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui5": {
    "extends": {
      "extensions": {
        "sap.ui.controllerExtensions": {
          "sap.fe.templates.ObjectPage.controller.ObjectPageController": {
            "controllerName": "my.app.ext.controller.ObjectPageExt"
          }
        }
      }
    }
  }
}
```

**STEP**: 4 — Implement the controller extension

**DESCRIPTION**: Implement the extension controller methods referenced by UI fragments or used to hook into lifecycle events. Export a standard UI5 controller module with your logic. Keep file under webapp/ext/controller/ and match the controllerName specified in the manifest mapping.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// webapp/ext/controller/ObjectPageExt.controller.js
sap.ui.define(["sap/ui/core/mvc/Controller"], function(Controller) {
  "use strict";
  return Controller.extend("my.app.ext.controller.ObjectPageExt", {
    onInit: function() {
      // initialization logic for your extension controller
    },

    onCustomAction: function(oEvent) {
      // handler invoked by extension fragment button press
      // implement custom navigation, data modification, or dialog opening here
    }
  });
});
```

**STEP**: 5 — Treat pages as custom pages on the Fiori elements framework

**DESCRIPTION**: If you require a fully custom page while still running on the Fiori elements framework, implement the page as a custom target in your manifest routing/targets and register it as a Component or View. Keep routing and component names consistent and place the custom page under webapp/ext/custompages/. This lets you use any UI5 controls while still using the Fiori elements shell/bootstrapping.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui5": {
    "routing": {
      "targets": {
        "CustomPage": {
          "type": "View",           /* or "Component" if you build a component-based page */
          "name": "my.app.ext.custom.CustomPage", /* namespace of the view/component */
          "viewPath": "my.app.ext.custom",
          "viewName": "CustomPage"
        }
      }
    }
  }
}
```

**STEP**: 6 — Reference resources and building blocks

**DESCRIPTION**: Use the building blocks and examples to implement common UI patterns while using extension points or controller extensions for custom behavior. See the Fiori development portal for live examples and deeper guidance. Also review local documentation file references.

**LANGUAGE**: Markdown/Links

**CODE**:
```markdown
- Live examples and introduction: https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/topic/introduction
- Local related info: webapp/docs/building-blocks-24c1304.md (Building Blocks)
```
--------------------------------

**TITLE**: Form Entry Object Page (SAP Fiori elements for OData V4)

**INTRODUCTION**: Configure a Form Entry Object Page to provide a page-only data-entry UI (no object page header or navigation bar). Includes manifest target settings, automatic startup-in-create-mode via Component.js, and single-draft-for-create behavior configuration both via manifest and via the EditFlow controller extension. Applicable only to SAP Fiori elements for OData V4.

**TAGS**: fiori-elements-framework, odata-v4, manifest.json, Component.js, singleDraftForCreate, EditFlow, object-page, form-entry

**STEP**: 1 — Configure a Form Entry Object Page target

**DESCRIPTION**: Add a target to your application descriptor (manifest) to use the Object Page component while hiding the header and anchor/navigation bar to produce a form-entry-only page. Place this under the appropriate targets section in manifest.json (for example, "sap.app"/"crossNavigation"/"inbounds" or "sap.ui5"/"routing"/"targets" depending on your project structure).

**LANGUAGE**: JSON

**CODE**:
```json
"FormRootObjectPage": {                      
    "type": "Component",                     
    "id": "FormRootObjectPage",              
    "name": "sap.fe.templates.ObjectPage",   
    "options": {                             
        "settings": {                        
            "contextPath": "/FormRoot",         
            "editableHeaderContent": false,  
            "content": {                     
                "header": {                  
                    "visible": false,        
                    "anchorBarVisible": false
                }                            
            }                                
        }                                    
    }                                        
}  
```

**STEP**: 2 — Auto-start application in creation mode (main application Component.js)

**DESCRIPTION**: If you want the app to start directly in creation mode, implement getStartupParameters in your main application Component.js to return a preferredMode of ["create"]. Add this method to your AppComponent extension. Keep this file at your Component.js path (e.g., src/Component.js).

**LANGUAGE**: JavaScript

**CODE**:
```javascript
getStartupParameters: function() {
    return Promise.resolve({      
        preferredMode: ["create"] 
    });                           
}                                 

Such as 

sap.ui.define(["sap/fe/core/AppComponent"], function(AppComponent) 
    "use strict";                                                  
                                                            
    return AppComponent.extend("FormTemplate.Component", {         
        metadata: {                                                
            manifest: "json"                                       
        },                                                         
        getStartupParameters: function() {                         
            return Promise.resolve({                               
                preferredMode: ["create"]                          
            });                                                    
        }                                                          
    });                                                            
}); 
```

**STEP**: 3 — Enable singleDraftForCreate in manifest.json

**DESCRIPTION**: Prevent users from creating multiple drafts by enabling singleDraftForCreate in the "sap.fe.app" section of manifest.json. When true, the app checks for existing drafts (entities with IsActiveEntity=false and HasActiveEntity=false). If a draft exists, it opens that draft in edit mode instead of creating a new one.

File: manifest.json — add or update the "sap.fe" -> "app" section.

**LANGUAGE**: JSON

**CODE**:
```json
"sap.fe": {
    "app": {
        "singleDraftForCreate": true
    }
}
```

**STEP**: 4 — Enable singleDraftForCreate via EditFlow controller extension

**DESCRIPTION**: As an alternative or complement to the manifest setting, enable singleDraftForCreate when creating documents via the EditFlow extension. Use editFlow.createDocument and pass the option { singleDraftForCreate: true } so the app will open an existing unsaved draft in edit mode if one exists; otherwise it creates a new entity in edit mode.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
editFlow.createDocument(ListBinding, {singleDraftForCreate: true})
```
--------------------------------

**TITLE**: Form Facet — Add a header form facet to an Object Page

**INTRODUCTION**: Use a UI.ReferenceFacet in UI.HeaderFacets to add a compact form (field group or identification) into the object page header. The ReferenceFacet's Label becomes the form title and Target points to a UI.FieldGroup or UI.Identification annotation (by qualifier). Use UI.FieldGroup entries to list UI.DataField entries and control importance/visibility via UI.Importance and UI.Hidden.

**TAGS**: fiori-elements-framework, UI.HeaderFacets, UI.ReferenceFacet, UI.FieldGroup, UI.Identification, annotations, XML, ABAP, CDS, object-page, header

**STEP**: 1 — Add a ReferenceFacet to UI.HeaderFacets (XML annotation)

**DESCRIPTION**: Add a UI.ReferenceFacet entry into the UI.HeaderFacets collection. Set Label to the visible title and Target to the annotation path of a UI.FieldGroup (use Qualifier). Define the corresponding UI.FieldGroup annotation that contains UI.DataField items. Use UI.Importance to mark fields (e.g., High) and UI.Hidden to control visibility by path.

**LANGUAGE**: XML

**CODE**:
```xml

<Annotation Term="UI.HeaderFacets">
    <Collection>
        ...
        <Record Type="UI.ReferenceFacet">
            <PropertyValue Property="Label" String="Sales Area" />
            <PropertyValue Property="Target" AnnotationPath="@UI.FieldGroup#OrgData" />
        </Record>
        ...
        ...
    </Collection>
</Annotation>

<Annotation Term="UI.FieldGroup" Qualifier="OrgData">
    <Record Type="UI.FieldGroupType">
        <PropertyValue Property="Data">
            <Collection>
                <Record Type="UI.DataField">
                    <PropertyValue Property="Value" Path="SalesOrganization"/>
                    <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
                </Record>
                <Record Type="UI.DataField">
                    <PropertyValue Property="Value" Path="DistributionChannel"/>
                    <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
                    <Annotation Term="UI.Hidden" Path="Delivered"/>
                </Record>
                <Record Type="UI.DataField">
                    <PropertyValue Property="Value" Path="OrganizationDivision"/>
                    <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

**STEP**: 2 — Define equivalent in ABAP CDS annotations

**DESCRIPTION**: For ABAP CDS models, use @UI.Facet to add a FIELDGROUP_REFERENCE facet with targetQualifier matching the field group qualifier. Apply @UI.fieldGroup to the relevant fields with importance, hidden, position, and qualifier.

**LANGUAGE**: ABAP

**CODE**:
```

@UI.Facet: [
  {
    label: '{@i18n>@SalesArea}',
    targetQualifier: 'OrgData',
    type: #FIELDGROUP_REFERENCE,
    purpose: #HEADER
  },
  ...
  ...
]
product;

@UI.fieldGroup: [
  {
    importance: #HIGH,
    position: 10 ,
    qualifier: 'OrgData'
  }
]
SALESORGANIZATION;

@UI.fieldGroup: [
  {
    importance: #HIGH,
    hidden: true,
    position: 20 ,
    qualifier: 'OrgData'
  }
]
DISTRIBUTIONCHANNEL;

@UI.fieldGroup: [
  {
    importance: #HIGH,
    position: 30 ,
    qualifier: 'OrgData'
  }
]
ORGANIZATIONDIVISION;

```

**STEP**: 3 — Define equivalent in CAP CDS annotations

**DESCRIPTION**: In CAP CDS, annotate the service with UI.HeaderFacets containing a UI.ReferenceFacet style object and define UI.FieldGroup using UI.FieldGroupType with Data entries. Use ![@UI.Importance] and ![@UI.Hidden] to set importance/visibility.

**LANGUAGE**: CDS

**CODE**:
```

annotate service.Products with @(
  UI.HeaderFacets : [
    {
        $Type : 'UI.ReferenceFacet',
        Label : '{@i18n>@SalesArea}',
        Target : '@UI.FieldGroup#OrgData'
    },
   ...
   ...
  ],
  UI.FieldGroup #OrgData : {
    $Type : 'UI.FieldGroupType',
    Data : [
        {
            $Type : 'UI.DataField',
            Value : SalesOrganization,
            ![@UI.Importance] : #High
        },
        {
            $Type : 'UI.DataField',
            Value : DistributionChannel,
            ![@UI.Importance] : #High,
            ![@UI.Hidden] : Delivered
        },
        {
            $Type : 'UI.DataField',
            Value : OrganizationDivision,
            ![@UI.Importance] : #High
        }
    ]
  }
);

```
--------------------------------

**TITLE**: Formatting Numeric Values in Fiori Elements Overview Pages

**INTRODUCTION**: Configure how numeric values are displayed (number of decimal places) in Fiori elements overview pages. The UI uses SAPUI5's sap.ui.core.format.NumberFormat. You can set decimal places either in the OData metadata (Property Scale) or in annotation documents (UI.DataPoint.ValueFormat with NumberOfFractionalDigits). Use the approach that best fits your service and annotation framework (OData metadata, XML annotations, ABAP CDS or CAP CDS).

**TAGS**: fiori-elements, numeric-formatting, OData, annotations, ui.datapoint, NumberFormat, CDS, ABAP, CAP, sap.ui.core.format.NumberFormat

**STEP**: 1 — Configure decimal places in OData metadata (EntityType Property Scale)

**DESCRIPTION**: Set the Scale attribute on Edm.Decimal properties in the OData metadata (EDMX) to control the number of fractional digits shown in overview pages. The example below sets Scale="3" so Price, Width, Depth, and Height display three decimal places. Keep sap:unit and sap:label attributes if needed for unit and label binding.

**LANGUAGE**: XML

**CODE**:
```xml
<EntityType Name="Product" sap:content-version="1">
    ...
    <Property Name="Price" Type="Edm.Decimal" Precision="16" Scale="3" sap:unit="CurrencyCode" sap:label="Unit Price"/>
    <Property Name="Width" Type="Edm.Decimal" Precision="13" Scale="3" sap:unit="DimUnit" sap:label="Dimensions"/>
    <Property Name="Depth" Type="Edm.Decimal" Precision="13" Scale="3" sap:unit="DimUnit" sap:label="Dimensions"/>
    <Property Name="Height" Type="Edm.Decimal" Precision="13" Scale="3" sap:unit="DimUnit" sap:label="Dimensions"/>
    ...
</EntityType>
```

**STEP**: 2 — Configure decimal places via UI.DataPoint annotation (XML)

**DESCRIPTION**: Use the com.sap.vocabularies.UI.v1.DataPoint annotation with a ValueFormat Record of type com.sap.vocabularies.UI.v1.NumberFormat. Set NumberOfFractionalDigits to the desired number of decimal places. Optionally use ScaleFactor when you need to scale the value (e.g., percent, per-thousand). This affects numeric display formatting for the annotated DataPoint.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="com.sap.vocabularies.UI.v1.DataPoint" Qualifier="Price">
    <Record Type="com.sap.vocabularies.UI.v1.DataPointType">
        <PropertyValue Property="Title" String="Unit Price"/>
        <PropertyValue Property="Description" Path="Name"/>
        <PropertyValue Property="Value" Path="Price"/>
        <PropertyValue Property="ValueFormat">
            <Record Type="com.sap.vocabularies.UI.v1.NumberFormat">
                <PropertyValue Property="ScaleFactor" Decimal="1000"/>
                <PropertyValue Property="NumberOfFractionalDigits" Iint="1"/>
            </Record>
        </PropertyValue>
    </Record>
</Annotation>
```

**STEP**: 3 — Configure decimal places via ABAP CDS annotation (UI.dataPoint)

**DESCRIPTION**: In ABAP CDS, add a @UI.dataPoint annotation including valueFormat.numberOfFractionalDigits (and scaleFactor if needed). This annotation sets the display formatting for the CDS element in Fiori elements overview UI.

**LANGUAGE**: ABAP CDS

**CODE**:
```
@UI.dataPoint: {
  title: 'Unit Price',
  description: 'Name',
  valueFormat: {
    scaleFactor: 1000,
	numberOfFractionalDigits: 1
  }
}
Price;
```

**STEP**: 4 — Configure decimal places via CAP CDS annotation (UI.DataPoint)

**DESCRIPTION**: In CAP CDS, declare a UI.DataPoint annotation with ValueFormat specifying UI.NumberFormat, ScaleFactor, and NumberOfFractionalDigits. This configures the numeric formatting for the DataPoint in Fiori elements.

**LANGUAGE**: CAP CDS

**CODE**:
```
UI.DataPoint #Price : {
    $Type : 'UI.DataPointType',
    Title : 'Unit Price',
    Description : Name,
    Value : Price,
    ValueFormat : {
        $Type : 'UI.NumberFormat',
        ScaleFactor : 1000,
        NumberOfFractionalDigits : 1
    }
}
```
--------------------------------

**TITLE**: Field Annotation Patterns for SAP Fiori elements (OData V4)

**INTRODUCTION**: Action-focused reference for annotating fields in SAP Fiori elements (OData V4). Contains code-ready examples for text handling, readable IDs, fiscal annotations, visibility/enablement, editability, tooltips, and disabling unit-of-measure decimal validation. Use these annotations in service metadata or CDS to control UI behavior.

**TAGS**: fiori-elements-framework, OData V4, annotations, UI.TextArrangement, Common.Text, Common.ExternalID, fiscal, UI.Hidden, FieldControl, Core.Computed, tooltip, units, decimals

STEP: Text Annotation — XML (property-level)
DESCRIPTION: Use Common.Text on a property to point to a descriptive text property and set UI.TextArrangement to control how code/ID and text are displayed. Example: set TextOnly arrangement for SalesOrganization.
LANGUAGE: XML
CODE:
```xml
<Annotations Target="com.c_salesordermanage_sd/SalesOrganization">
   …
   <Annotation Term="Common.Text" Path="SalesOrganization_Text">
      <Annotation Term="UI.TextArrangement" EnumMember="UI.TextArrangementType/TextOnly"/>
   </Annotation>
   …
</Annotations>
```

STEP: Text Annotation — ABAP CDS (property-level)
DESCRIPTION: ABAP CDS example to mark a text element and set text arrangement (#TEXT_ONLY) for SalesOrganization.
LANGUAGE: ABAP CDS
CODE:
```
…
@ObjectModel.text.element:  [ ' SalesOrganization_Text,' ]
@UI.textArrangement: #TEXT_ONLY
SalesOrganization
…
```

STEP: Text Annotation — CAP CDS (property-level)
DESCRIPTION: CAP CDS example to annotate SalesOrganization with Common.Text and TextArrangement (#TextOnly).
LANGUAGE: CDS
CODE:
```
annotate com.c_salesordermanage_sd with {
    ...
    SalesOrganization @(
             Common : {
              Text: SalesOrganization_Text,
              TextArrangement : #TextOnly
            })
    ...
};
```

STEP: Text Arrangement — XML (entity-set fallback)
DESCRIPTION: Define a fallback TextArrangement at the entity set level. Property-level TextArrangement takes precedence over entity set level.
LANGUAGE: XML
CODE:
```xml
<Annotations Target="SalesOrder"> //Main EntitySet
  <Annotation Term="com.sap.vocabularies.UI.v1.TextArrangement" EnumMember="com.sap.vocabularies.UI.v1.TextArrangementType/TextFirst"/>
</Annotations>
```

STEP: Display Readable IDs — XML (Common.ExternalID)
DESCRIPTION: For an Edm.Guid property (myGuidProperty), point Common.ExternalID to the readable identifier property (externalId). The readable ID will be shown in the UI; Common.Text/TextArrangement apply to the readable ID property.
LANGUAGE: XML
CODE:
```
      <Annotations Target="ExternalIdService.Entities/myGuidProperty">
        <Annotation Term="Common.ExternalID" Path="externalId"/>
      </Annotations>
```

STEP: Display Readable IDs — CAP CDS
DESCRIPTION: CAP CDS sample annotating myGuidProperty with Common.ExternalID to externalId.
LANGUAGE: CDS
CODE:
```
annotate ExternalIdService.Entities : myGuidProperty with @(Common: {ExternalID: externalId});
```

STEP: Fiscal Annotations — patterns and mapping
DESCRIPTION: Annotate Edm.String properties that represent fiscal dates. Use CAP CDS annotations (IsFiscal*) or ABAP CDS semantics (Semantics.fiscal.*). Patterns: YYYYPPP (yearPeriod), d (dayOfFiscalYear), PPP (period), Q (quarter), WW (week), YYYY (year), YYYYQ (yearQuarter), YYYYWW (yearWeek). Use IsDigitSequence where required.
LANGUAGE: Text
CODE:
```text
CAP CDS -> ABAP CDS mapping:
IsFiscalYearPeriod     -> Semantics.fiscal.yearPeriod      (pattern YYYYPPP)
IsDayOfFiscalYear      -> N/A                              (pattern d)
IsFiscalPeriod         -> Semantics.fiscal.period          (pattern PPP)
IsFiscalQuarter        -> Semantics.fiscal.quarter         (pattern Q)
IsFiscalWeek           -> Semantics.fiscal.week            (pattern WW)
IsFiscalYear           -> Semantics.fiscal.year            (pattern YYYY)
IsFiscalYearQuarter    -> Semantics.fiscal.yearQuarter     (pattern YYYYQ)
IsFiscalYearWeek       -> Semantics.fiscal.yearWeek        (pattern YYYYWW)
Semantics.fiscal.yearVariant -> N/A
```

STEP: Fiscal Annotations — XML (examples)
DESCRIPTION: XML examples marking multiple properties as fiscal types and adding labels.
LANGUAGE: XML
CODE:
```xml
<Annotations Target="sap.fe.manageitems.TechnicalTestingService.LineItems/fiscalYearPeriod">
  <Annotation Term="Common.IsFiscalYearPeriod" Bool="true"/>
  <Annotation Term="Common.Label" String="Fiscal Year Period"/>
</Annotations>
<Annotations Target="sap.fe.manageitems.TechnicalTestingService.LineItems/fiscalDayOfYear">
  <Annotation Term="Common.IsDayOfFiscalYear" Bool="true"/>
  <Annotation Term="Common.Label" String="Fiscal Day Of Year"/>
</Annotations>
<Annotations Target="sap.fe.manageitems.TechnicalTestingService.LineItems/fiscalPeriod">
  <Annotation Term="Common.IsFiscalPeriod" Bool="true"/>
  <Annotation Term="Common.Label" String="Fiscal Period"/>
</Annotations>
<Annotations Target="sap.fe.manageitems.TechnicalTestingService.LineItems/fiscalQuarter">
  <Annotation Term="Common.IsFiscalQuarter" Bool="true"/>
  <Annotation Term="Common.Label" String="Fiscal Quarter"/>
</Annotations>
<Annotations Target="sap.fe.manageitems.TechnicalTestingService.LineItems/fiscalWeek">
  <Annotation Term="Common.IsFiscalWeek" Bool="true"/>
  <Annotation Term="Common.Label" String="Fiscal Week"/>
</Annotations>
<Annotations Target="sap.fe.manageitems.TechnicalTestingService.LineItems/fiscalYear">
  <Annotation Term="Common.IsFiscalYear" Bool="true"/>
  <Annotation Term="Common.Label" String="Fiscal Year"/>
</Annotations>
<Annotations Target="sap.fe.manageitems.TechnicalTestingService.LineItems/fiscalYearQuarter">
  <Annotation Term="Common.IsFiscalYearQuarter" Bool="true"/>
  <Annotation Term="Common.IsDigitSequence" Bool="true"/>
  <Annotation Term="Common.Label" String="Fiscal Year Quarter"/>
</Annotations>
<Annotations Target="sap.fe.manageitems.TechnicalTestingService.LineItems/fiscalWeekYear">
  <Annotation Term="Common.IsFiscalYearWeek" Bool="true"/>
  <Annotation Term="Common.Label" String="Fiscal Week Year"/>
</Annotations>
```

STEP: Fiscal Annotations — ABAP CDS (example)
DESCRIPTION: ABAP CDS view example marking fiscal semantics on fields.
LANGUAGE: ABAP CDS
CODE:
```
DEFINE VIEW SalesOrderItemHistoryOvw as select from ... 
{
    ...
    
    @Semantics.fiscal.yearPeriod: true
    fiscalYearPeriod,
    
    @Semantics.fiscal.period: true
    fiscalPeriod,
    
    @Semantics.fiscal.year: true
    fiscalYear,
    
    ...   
}
```

STEP: Fiscal Annotations — CAP CDS (example)
DESCRIPTION: CAP CDS schema fields annotated for fiscal semantics and titles.
LANGUAGE: CDS
CODE:
```
fiscalYearPeriod  : String     @title: 'Fiscal Year Period'   @Common.IsFiscalYearPeriod : true;
fiscalDayOfYear   : String     @title: 'Fiscal Day Of Year'   @Common.IsDayOfFiscalYear  : true;
fiscalPeriod      : String     @title: 'Fiscal Period'        @Common.IsFiscalPeriod     : true;
fiscalQuarter     : String(1)  @title: 'Fiscal Quarter'       @Common.IsFiscalQuarter    : true;
fiscalWeek        : String     @title: 'Fiscal Week'          @Common.IsFiscalWeek       : true;
fiscalYear        : String     @title: 'Fiscal Year'          @Common.IsFiscalYear       : true;
fiscalYearQuarter : String(5) @title: 'Fiscal Year Quarter' @Common.IsFiscalYearQuarter: true @Common.IsDigitSequence: true;
fiscalWeekYear    : String     @title: 'Fiscal Week Year'     @Common.IsFiscalYearWeek   : true;
```

STEP: Visibility — UI.Hidden within DataField (XML)
DESCRIPTION: Control visibility per UI.DataField using UI.Hidden annotation inside the DataField record.
LANGUAGE: XML
CODE:
```xml
<Record Type="UI.DataField">
   <PropertyValue Property="Value" Path="TotalNetAmount" />
   <Annotation Term="UI.Hidden" Bool="false" />
</Record>
```

STEP: Visibility — UI.Hidden within DataField (ABAP CDS)
DESCRIPTION: ABAP CDS representation for a data field with hidden attribute.
LANGUAGE: ABAP CDS
CODE:
```
{
    value: 'TOTALNETAMOUNT',
    type: #STANDARD
}
@UI.hidden: true
TOTALNETAMOUNT;
```

STEP: Visibility — UI.Hidden within DataField (CAP CDS)
DESCRIPTION: CAP CDS JSON-like UI.DataField with UI.Hidden set.
LANGUAGE: CDS
CODE:
```
{
    $Type : 'UI.DataField',
    Value : 'TotalNetAmount',
    ![@UI.Hidden] : false
}
```

STEP: Visibility — UI.Hidden on a Property (XML)
DESCRIPTION: Hide a property across the UI by annotating the property with UI.Hidden.
LANGUAGE: XML
CODE:
```xml
<Annotations Target="com.c_salesordermanage_sd.SalesOrderManage/TotalNetAmount">
    <Annotation Term="Common.Label" String="Net Amount"/>
    <Annotation Term="Measures.ISOCurrency" Path="TransactionCurrency"/>
    <Annotation Term="UI.Hidden" Bool="true" />
</Annotations>
```

STEP: Visibility — UI.Hidden on a Property (CAP CDS)
DESCRIPTION: CAP CDS to annotate TotalNetAmount property with UI.Hidden and Measures.ISOCurrency.
LANGUAGE: CDS
CODE:
```
annotate com.c_salesordermanage_sd. SalesOrderManage with {
  TotalNetAmount
  @UI.Hidden
  @Common.Label : 'Net Amount'
  @Measures.ISOCurrency :  TransactionCurrency ;
};
```

STEP: Visibility — ProductsType ID always hidden
DESCRIPTION: Examples to always hide the property ID of ProductsType.
LANGUAGE: XML
CODE:
```xml
<Annotations Target="SAP__self.ProductsType/ID">
    <Annotation Term="SAP__UI.Hidden"/>
</Annotations>
```

STEP: Visibility — ProductsType ID always hidden (ABAP CDS)
DESCRIPTION: ABAP CDS annotation to hide id in PRODUCTSTYPE.
LANGUAGE: ABAP CDS
CODE:
```
annotate view PRODUCTSTYPE with {
@UI.hidden: true
id;
}
```

STEP: Visibility — ProductsType ID always hidden (CAP CDS)
DESCRIPTION: CAP CDS to hide ID on ProductsType.
LANGUAGE: CDS
CODE:
```
annotate ProductsType with {
  ID @UI.Hidden;
};
```

STEP: Visibility — Path-based UI.Hidden (FieldGroup qualifier)
DESCRIPTION: Use a path for UI.Hidden inside a FieldGroup to hide ModifiedAt in that FieldGroup when HasDraftEntity is true. Note: ABAP CDS does not support path-based UI.hidden; use local XML annotation there.
LANGUAGE: XML
CODE:
```xml
<Annotations Target="SAP__self.ProductsType">
    <Annotation Term="SAP__UI.FieldGroup" Qualifier="AdministrativeData">
        <Record>
            <PropertyValue Property="Data">
                <Collection>
                    <Record Type="SAP__UI.DataField">
                        <Annotation Term="SAP__UI.Hidden" Path=="HasDraftEntity"/>
                        <PropertyValue Property="Label" String="Modified at"/>
                        <PropertyValue Property="Value" Path="ModifiedAt"/>
                    </Record>
```

STEP: Visibility — Path-based UI.Hidden (CAP CDS FieldGroup)
DESCRIPTION: CAP CDS FieldGroup with UI.Hidden bound to HasDraftEntity for the specific DataField.
LANGUAGE: CDS
CODE:
```
entity ProductsType : {
    UI.FieldGroup #AdministrativeData : {
    Data : [
        {
            $Type : 'UI.DataField',
            Label : 'Modified at',
            Value : ModifiedAt,
            ![@UI.Hidden] : HasDraftEntity,
        },
    ],
},
}
```

STEP: Visibility — Always hide ModifiedAt when HasDraftEntity true (XML)
DESCRIPTION: Hide ModifiedAt property everywhere by setting UI.Hidden Path to HasDraftEntity on the property.
LANGUAGE: XML
CODE:
```xml
<Annotations Target="SAP__self.ProductsType/ModifiedAt">
    <Annotation Term="SAP__UI.Hidden" Path="HasDraftEntity"/>
</Annotations>
```

STEP: Visibility — Always hide ModifiedAt when HasDraftEntity true (CAP CDS)
DESCRIPTION: CAP CDS property-level UI.Hidden bound to HasDraftEntity.
LANGUAGE: CDS
CODE:
```
entity ProductsType :{
    ModifiedAt : {
               ![@UI.Hidden] : HasDraftEntity
    }
}
```

STEP: Enablement — FieldControl (metadata-level)
DESCRIPTION: Use common.FieldControl to set field enablement behavior. You can set static EnumMember values or point to a path (path must be Edm.Byte). Examples below show Mandatory, ReadOnly usage.
LANGUAGE: XML
CODE:
```xml
<Annotations Target="SAP__self.ArtistsType/Name">
   <Annotation Term="SAP__common.FieldControl" EnumMember="SAP__common.FieldControlType/Mandatory"/>
   ....
   ....
</Annotations>
```

STEP: Enablement — FieldControl (ABAP CDS)
DESCRIPTION: ABAP CDS uses @ObjectModel.mandatory exposed as mandatory; @ObjectModel.readOnly is not exposed via metadata extensions.
LANGUAGE: ABAP CDS
CODE:
```
@ObjectModel.mandatory: true
Name;
```

STEP: Enablement — FieldControl (CAP CDS)
DESCRIPTION: CAP CDS example to mark Name FieldControl as Mandatory.
LANGUAGE: CDS
CODE:
```
entity Artist : {
    Name : {
        FieldControl : #Mandatory
    }
}
```

STEP: FieldControl within DataField — XML
DESCRIPTION: Control enablement/read-only per UI.DataField using common.FieldControl inside the DataField record (useful to vary in table vs form).
LANGUAGE: XML
CODE:
```xml
<Record Type="UI.DataField">
   <PropertyValue Property="Value" Path="TotalNetAmount" />
   <Annotation Term=" SAP__common.FieldControl" EnumMember="SAP__common.FieldControlType/ReadOnly"/>
</Record>
```

STEP: FieldControl within DataField — CAP CDS
DESCRIPTION: CAP CDS DataField with Common.FieldControl set to #ReadOnly.
LANGUAGE: CDS
CODE:
```
{
            $Type : 'UI.DataField',
            Value : TotalNetAmount,
            ![@Common.FieldControl] : #ReadOnly,
}
```

STEP: FieldControl — Values and behaviors
DESCRIPTION: Map FieldControl enum values to behaviors and EnumMembers for metadata:
LANGUAGE: Text
CODE:
```text
Mandatory:
 - Behavior: Property must be non-null for save/update (backend validation required).
 - EnumMember: SAP__common.FieldControlType/Mandatory

Optional:
 - Behavior: Property can be null.
 - EnumMember: SAP__common.FieldControlType/Optional

ReadOnly:
 - Behavior: Property value cannot be changed (read-only in edit mode).
 - EnumMember: SAP__common.FieldControlType/ReadOnly

Inapplicable:
 - Behavior: Property has no meaning in current state and is disabled; dynamic Inapplicable renders as disabled.
 - EnumMember: SAP__common.FieldControlType/Inapplicable

Notes:
 - Path-based FieldControl must point to an Edm.Byte property.
 - Fields in Insert/Update RequiredProperties are marked mandatory only in create/update flows.
 - Static Inapplicable is ignored by Fiori elements (treat as absent).
```

STEP: Editability — Core.Computed and Core.Immutable (CreatedAt example)
DESCRIPTION: Core.Computed=true marks property always non-editable (read-only). Core.Immutable is read-only in edit mode but editable in create mode.
LANGUAGE: XML
CODE:
```xml
<Annotations Target="SAP__self.ProductsType/CreatedAt">
    <Annotation Term="SAP__Core.Computed"/>
</Annotations>
```

STEP: Editability — Core.Computed (CAP CDS)
DESCRIPTION: CAP CDS example setting CreatedAt as Core.Computed.
LANGUAGE: CDS
CODE:
```
entity ProductsType : {
    CreatedAt : {
        Core.Computed: true
    }
}
```

STEP: Editability — FieldControl ReadOnly (SupplierName example)
DESCRIPTION: Make SupplierName always read-only for this application using Common.FieldControl on the property.
LANGUAGE: XML
CODE:
```xml
<Annotations Target="SAP__self.ProductsType/SupplierName">
    <Annotation Term="SAP__Common.FieldControl" EnumMember="com.sap.vocabularies.Common.v1.FieldControl/ReadOnly"/>
</Annotations>
```

STEP: Editability — FieldControl ReadOnly (CAP CDS)
DESCRIPTION: CAP CDS example marking SupplierName as read-only using Common.FieldControl.
LANGUAGE: CDS
CODE:
```
entity ProductsType : {
    SupplierName : {
        Common.FieldControl : #ReadOnly
    }
}
```

STEP: Editability — FieldControl path-based (AvailabilityCode example)
DESCRIPTION: Make AvailabilityCode read-only when __FieldControl/AvailabilityCode_FC equals 1 by using a path for Common.FieldControl (use local XML if ABAP CDS required).
LANGUAGE: XML
CODE:
```xml
<Annotations Target="SAP__self.ReviewsType/AvailabilityCode">
    <Annotation Term=" SAP__Common.FieldControl" Path="__FieldControl/AvailabilityCode_FC"/>
</Annotations>
```

STEP: Editability — FieldControl path-based (CAP CDS)
DESCRIPTION: CAP CDS mapping of Common.FieldControl to a field path.
LANGUAGE: CDS
CODE:
```
entity ReviewsType : {
    Common.FieldControl : __FieldControl.AvailabilityCode_FC
}
```

STEP: Tooltip for a Data Point — XML
DESCRIPTION: Use Common.QuickInfo inside a UI.DataPoint record to provide a tooltip. The tooltip displays when no explicit label exists for the data point.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.DataPoint" Qualifier="Rating">
    <Record Type="UI.DataPointType">
        <Annotation Term="Common.QuickInfo" String="Rating Indicator "/>
        <PropertyValue Property="TargetValue" Int="5"/>
        <PropertyValue Property="Title" String="Rating"/>
        <PropertyValue Property="Value" Path="Rating"/>
        <PropertyValue Property="Visualization" EnumMember="UI.VisualizationType/Rating"/>
    </Record>
</Annotation>
```

STEP: Tooltip for a Data Point — ABAP CDS
DESCRIPTION: ABAP CDS dataPoint example; note Common.QuickInfo is not supported for dataPoint in ABAP CDS and qualifier is auto-generated.
LANGUAGE: ABAP CDS
CODE:
```
@UI.dataPoint: {
  title: 'Rating',
  visualization: #RATING
  targetValue: 5
}
Rating;
```

STEP: Tooltip for a Data Point — CAP CDS
DESCRIPTION: CAP CDS UI.DataPoint with Common.QuickInfo provided via ![@Common.QuickInfo].
LANGUAGE: CDS
CODE:
```
UI.DataPoint #Rating : {
    $Type : 'UI.DataPointType',
    TargetValue : 5,
    Title : 'Rating',
    Value : Rating,
    Visualization : #Rating,
    ![@Common.QuickInfo] : 'Rating Indicator ',
}
```

STEP: Decimal Validation for Units of Measure
DESCRIPTION: Use com.sap.vocabularies.UI.v1.DoNotCheckScaleOfMeasuredQuantity (Bool) to disable central validation of allowed decimal places for measured quantities (units/currencies). false => enforce central validation; true => skip central validation (allows more fractional digits). Note: field-internal max decimal places still apply and cannot be exceeded.
LANGUAGE: Text
CODE:
```text
Annotation: com.sap.vocabularies.UI.v1.DoNotCheckScaleOfMeasuredQuantity
 - Bool="true"  => skip central UoM/currency decimal validation (allows more fractional digits)
 - Bool="false" => enforce central UoM/currency decimal validation
Note: The field's own max-decimal definition is still enforced.
```
--------------------------------

**TITLE**: Further Post-Generation Steps for SAP Fiori elements Apps

**INTRODUCTION**: After generating a SAP Fiori elements application, adjust default behavior and enable features by editing the app manifest and annotations. You can also extend the generated app using SAP Fiori tools or manually. This document lists the actionable post-generation tasks and shows practical examples for manifest and annotation edits.

**TAGS**: fiori-elements-framework, sap, manifest.json, annotations, fiori-tools, extension, post-generation

**STEP**: 1 — Edit manifest.json to enable or modify default features

**DESCRIPTION**: Open the app's manifest.json and change configuration entries to enable or customize features (routing, models, annotation references, UI5 settings, extension points, etc.). Typical edits include registering annotation files as data sources and adding annotation URIs to the sap.ui5 models section. Apply changes, then test the app.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.app": {
    "id": "my.company.app",
    "applicationVersion": { "version": "1.0.0" },
    "dataSources": {
      "annotations": {
        "uri": "annotations/annotations.xml",
        "type": "ODataAnnotation"
      },
      "mainService": {
        "uri": "/sap/opu/odata/sap/ZSERVICE_SRV/",
        "type": "OData",
        "settings": { "localUri": "localService/metadata.xml" }
      }
    }
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "mainService"
      },
      "sap.fe.annotation": {
        "dataSource": "annotations",
        "settings": {
          "annotationURI": ["annotations/annotations.xml"]
        }
      }
    },
    "routing": {
      "routes": [],
      "targets": {}
    }
  }
}
```

**STEP**: 2 — Adapt and extend annotation files

**DESCRIPTION**: Locate the annotation files referenced in manifest.json (commonly under the annotations/ folder). Update or create annotation XML files to adjust UI behavior, semantic keys, facets, line items, and other metadata-driven features. Keep annotation targets and term names accurate to your OData service metadata.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations xmlns="http://docs.oasis-open.org/odata/ns/edm">
  <!-- Example: add UI.LineItem for an entity type -->
  <Annotations Target="MyNamespace.MyEntityType">
    <Annotation Term="UI.LineItem">
      <Collection>
        <Record Type="UI.DataField">
          <PropertyValue Property="Value" Path="PropertyA"/>
        </Record>
        <Record Type="UI.DataField">
          <PropertyValue Property="Value" Path="PropertyB"/>
        </Record>
      </Collection>
    </Annotation>
  </Annotations>
  <!-- Add more annotations (UI.Facets, UI.HeaderInfo, Common.SemanticKey, etc.) -->
</Annotations>
```

**STEP**: 3 — Extend the generated app using SAP Fiori tools (recommended)

**DESCRIPTION**: Use SAP Fiori tools in Visual Studio Code to scaffold extensions, add controller hooks, adapt views, and run local testing. The VS Code extension lets you configure page elements and generate extension artifacts safely, preserving the generated base.

**LANGUAGE**: Bash

**CODE**:
```bash
# In VS Code:
# 1. Install SAP Fiori tools extensions (Fiori tools - Extension Pack)
# 2. Open the generated project folder
# 3. Use Command Palette -> "Fiori: Configure App" or "Fiori: Add Extension"
# 4. Run the app locally with: npm start or the launch configuration provided
#
# Reference: https://help.sap.com/docs/SAP_FIORI_tools/17d50220bcd848aa854c9c182d65b699/047507c86afa4e96bb3d284adb9f4726.html
```

**STEP**: 4 — Manually extend SAP Fiori elements-based apps

**DESCRIPTION**: For manual extension (outside of Fiori tools), follow SAP guidance for adding custom controllers, fragments, and component overrides. Ensure changes are compatible with the Fiori elements lifecycle and the manifest configuration.

**LANGUAGE**: text

**CODE**:
```
See the manual extension guide:
- Extending SAP Fiori Elements-Based Apps: extending-sap-fiori-elements-based-apps-358cf25.md
Follow practices:
- Use extension hooks and controller fragments
- Avoid modifying generated core views; extend via fragments or controller hooks
- Keep manifest.json consistent with custom artifacts
```

**STEP**: 5 — Floorplan-specific configuration and enhancement

**DESCRIPTION**: Depending on the app floorplan, apply the corresponding post-generation adjustments and annotation patterns. Follow each floorplan guide to enable features specific to that template.

**LANGUAGE**: text

**CODE**:
```
Relevant floorplan guides:
- List Report and Object Page: list-report-and-object-page-c0eec49.md
- Worklist: worklist-d1d588f.md
- Analytical List Page: analytical-list-page-3d33684.md
- Overview Pages: overview-pages-c64ef8c.md
```
--------------------------------

**TITLE**: General Concepts for SAP Fiori Elements Framework (Developer-Focused)

**INTRODUCTION**: Practical, code-focused overview of core concepts and files when building Fiori Elements applications. Use these steps and code snippets as templates for project scaffolding, manifest configuration, annotations, OData/CDS service definitions, extensibility points, routing/pages setup, and local testing with a mock server.

**TAGS**: fiori-elements, sapui5, odata, annotations, manifest.json, cds, mockserver, routing, extensibility

STEP: 1 - Project scaffold & main files
DESCRIPTION: Create the minimal file structure and key files for a Fiori Elements app. Keep these files at the root of your UI project.
LANGUAGE: JSON
CODE:
```json
// Project structure (example)
{
  "webapp/": [
    "index.html",
    "manifest.json",
    "Component.js",
    "view/",
    "controller/",
    "model/",
    "annotations/",
    "localService/"
  ],
  "srv/": [
    "cat-service.cds" // for CAP backend
  ],
  "package.json": {}
}
```

STEP: 2 - manifest.json: register app, templates, OData models
DESCRIPTION: Configure the app-level manifest. Use sap.ui.generic.app to declare pages and templates (ListReport/ObjectPage). Define dataSources and sap.ui5 models. Replace placeholder URIs and IDs.
LANGUAGE: JSON
CODE:
```json
{
  "sap.app": {
    "id": "com.example.app",
    "applicationVersion": { "version": "1.0.0" },
    "title": "Fiori Elements App"
  },
  "sap.ui": {
    "technology": "UI5"
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "mainService",
        "settings": { "defaultBindingMode": "TwoWay" }
      },
      "i18n": {
        "type": "sap.ui.model.resource.ResourceModel",
        "settings": { "bundleName": "com.example.app.i18n.i18n" }
      }
    },
    "resources": {}
  },
  "sap.app": {},
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "Products",
        "component": {
          "name": "sap.suite.ui.generic.template.ListReport",
          "settings": {}
        }
      },
      {
        "entitySet": "Products",
        "component": {
          "name": "sap.suite.ui.generic.template.ObjectPage",
          "settings": {}
        }
      }
    ]
  },
  "sap.cloud": {},
  "sap.platform.hcp": {}
}
```

STEP: 3 - Define OData data source in manifest
DESCRIPTION: Add dataSources under manifest root to map the UI to the OData service (use annotation files if applicable).
LANGUAGE: JSON
CODE:
```json
{
  "sap.app": {},
  "sap.ui5": {},
  "dataSources": {
    "mainService": {
      "uri": "/sap/opu/odata/sap/ZMY_SRV/",
      "type": "OData",
      "settings": {
        "odataVersion": "2.0",
        "localUri": "localService/metadata.xml" // local metadata for offline/mock testing
      }
    },
    "annotations": {
      "uri": "annotations/annotations.xml",
      "type": "OData"
    }
  }
}
```

STEP: 4 - CDS model and service (SAP CAP) - define entities and exposures
DESCRIPTION: For CAP projects, define a CDS entity and service that the Fiori app consumes. Annotate for UI where needed. Activate the service in srv/cat-service.cds.
LANGUAGE: CDS
CODE:
```cds
// db/schema.cds
namespace my.bookshop;

entity Books {
  key ID   : UUID;
  title    : String(111);
  author   : String(111);
  stock    : Integer;
}

// srv/cat-service.cds
using my.bookshop as my from '../db/schema';

service CatalogService @(path:'/catalog') {
  entity Books as projection on my.Books;
}
```

STEP: 5 - OData annotations (XML) for UI (HeaderInfo, FieldGroup, LineItem)
DESCRIPTION: Provide OData annotations consumed by Fiori Elements for page layout, columns, and header. Store under webapp/annotations/ and reference in manifest (dataSources or sap.ui5 models).
LANGUAGE: XML
CODE:
```xml
<?xml version="1.0" encoding="utf-8"?>
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
  <edmx:Annotation Term="UI.HeaderInfo">
    <Record>
      <PropertyValue Property="TypeName" String="Book"/>
      <PropertyValue Property="Title" Path="title"/>
    </Record>
  </edmx:Annotation>

  <edmx:Annotation Term="UI.LineItem">
    <Collection>
      <Record Type="UI.DataField">
        <PropertyValue Property="Value" Path="title"/>
      </Record>
      <Record Type="UI.DataField">
        <PropertyValue Property="Value" Path="author"/>
      </Record>
      <Record Type="UI.DataField">
        <PropertyValue Property="Value" Path="stock"/>
      </Record>
    </Collection>
  </edmx:Annotation>
</edmx:Edmx>
```

STEP: 6 - Component.js bootstrap
DESCRIPTION: Standard Component.js for UI5/fiori elements apps; it bootstraps the UI and uses manifest.
LANGUAGE: JavaScript
CODE:
```javascript
sap.ui.define([
  "sap/ui/core/UIComponent"
], function (UIComponent) {
  "use strict";
  return UIComponent.extend("com.example.app.Component", {
    metadata: {
      manifest: "json"
    },

    init: function () {
      UIComponent.prototype.init.apply(this, arguments);
      // Additional initialization if required
    }
  });
});
```

STEP: 7 - Extensibility: controller extension registration (manifest snippet)
DESCRIPTION: Register controller or view extensions in manifest to provide custom logic or UI extensions for Fiori Elements templates.
LANGUAGE: JSON
CODE:
```json
{
  "sap.ui5": {
    "extends": {
      "extensions": {
        "sap.ui.controllerExtensions": {
          "sap.suite.ui.generic.template.ListReport.view.ListReport": {
            "controllerName": "com.example.app.ext.ListReportExtension"
          }
        }
      }
    }
  }
}
```

STEP: 8 - Local testing: UI5 MockServer setup (index.html or localService)
DESCRIPTION: Use UI5 MockServer to serve local metadata.xml and mock OData payloads during frontend development. Point manifest dataSource to localUri.
LANGUAGE: JavaScript
CODE:
```javascript
// webapp/localService/mockserver.js
sap.ui.define([
  "sap/ui/core/util/MockServer"
], function (MockServer) {
  "use strict";
  return {
    init: function () {
      var oMockServer = new MockServer({
        rootUri: "/sap/opu/odata/sap/ZMY_SRV/"
      });
      MockServer.config({
        autoRespond: true,
        autoRespondAfter: 100
      });
      oMockServer.simulate("localService/metadata.xml", "localService/mockdata");
      oMockServer.start();
      jQuery.sap.log.info("Mock server started");
    }
  };
});
```

STEP: 9 - Routing & Pages (simplified reference)
DESCRIPTION: Fiori Elements routes are primarily driven by sap.ui.generic.app pages in manifest.json. For custom navigation inside extensions, use Router and CrossApplicationNavigation if needed.
LANGUAGE: JSON
CODE:
```json
{
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "Books",
        "component": {
          "name": "sap.suite.ui.generic.template.ListReport"
        }
      },
      {
        "entitySet": "Books",
        "component": {
          "name": "sap.suite.ui.generic.template.ObjectPage"
        }
      }
    ]
  }
}
```

STEP: 10 - Debugging & common checks
DESCRIPTION: Checklist for common issues during development:
- Validate manifest.json syntax and dataSources localUri paths.
- Ensure annotations file path is referenced in manifest or metadata.
- Confirm OData metadata (metadata.xml) matches annotation target names (entity/namespace).
- Enable UI5 debug libs by appending ?sap-ui-debug=true to the URL.
LANGUAGE: JSON
CODE:
```json
// Example CLI command to run CAP + UI locally (dev setup)
{
  "scripts": {
    "start": "cds run --open && ui5 serve --config=ui5-local.yaml"
  }
}
```
--------------------------------

**TITLE**: General Concepts and Configuration (fiori-elements-framework)

**INTRODUCTION**: Central reference for general concepts and configuration points used in SAP Fiori elements applications. Use this to find focused configuration topics (actions, messages, layout, titles, variants, responsiveness, value help, images/icons, keyboard shortcuts, and table expansion) and their canonical documentation file paths for programmatic linking or automation.

**TAGS**: fiori-elements, configuration, annotations, UI, responsiveness, value-help, images, keyboard-shortcuts, variants, flexible-column-layout, messages, application-title

STEP: 1 — Overview / Related documentation index

DESCRIPTION: Use this step as the index to all related configuration topics. Each item below is the canonical documentation filename to reference or embed in generated documentation, navigation UIs, or RAG retrieval prompts.

LANGUAGE: Text

CODE:
```text
Actions: actions-cbf16c5.md
Using Messages: using-messages-239b192.md
Enabling the Flexible Column Layout: enabling-the-flexible-column-layout-e762257.md
Configuring the Application Title: configuring-the-application-title-ac70343.md
Managing Variants: managing-variants-8ce658e.md
Responsiveness Options: responsiveness-options-example-69efbe7.md
Value Help as a Dropdown List: value-help-as-a-dropdown-list-2a0a630.md
Using Images, Initials, and Icons: using-images-initials-and-icons-5760b63.md
Keyboard Shortcuts: keyboard-shortcuts-0cd318c.md
Initial Expansion Level for Tables: initial-expansion-level-for-tables-in-list-reports-analytical-list-pages-bc05d35.md
```

STEP: 2 — Actions (generic and application-specific)

DESCRIPTION: Implement generic Fiori elements actions or application-specific actions through annotations or extension points. Reference the actions documentation file for available generic actions and recommended extension patterns.

LANGUAGE: Text

CODE:
```text
Reference documentation: actions-cbf16c5.md
Usage: Use annotations or extension points as described in the file to add action handlers, configure intent/navigation, or wire custom action UI.
```

STEP: 3 — Messages (system-generated messages)

DESCRIPTION: Handle messages that the SAP system generates in response to user actions. Use the messages documentation to implement message handling, user-visible message formatting, and mapping to UI components.

LANGUAGE: Text

CODE:
```text
Reference documentation: using-messages-239b192.md
Usage: Follow the document for mapping backend messages to UI messages and for implementing message handling flows in the application.
```

STEP: 4 — Flexible Column Layout (two- or three-column pages)

DESCRIPTION: Enable and configure the flexible column layout to show two or three columns on a single page according to responsive layout needs. Use the referenced file for configuration options and integration steps.

LANGUAGE: Text

CODE:
```text
Reference documentation: enabling-the-flexible-column-layout-e762257.md
Usage: Configure routing and target aggregation for 2/3 column behavior as described in the file.
```

STEP: 5 — Application Title (SAP Fiori launchpad title configuration)

DESCRIPTION: Configure the application title generated by the SAP Fiori launchpad if customization is required. Use the provided document to adjust title configuration and fallback behavior.

LANGUAGE: Text

CODE:
```text
Reference documentation: configuring-the-application-title-ac70343.md
Usage: Adjust title configuration via manifest or launchpad settings as documented.
```

STEP: 6 — Managing Variants (filter & content area variants)

DESCRIPTION: Implement variant management that supports different structures for filters and content. Use the managing-variants document to wire variant persistence, default variants, and variant switching.

LANGUAGE: Text

CODE:
```text
Reference documentation: managing-variants-8ce658e.md
Usage: Follow the variant lifecycle and persistence patterns in the file for consistent behavior.
```

STEP: 7 — Responsiveness Options (importance-based field evaluation)

DESCRIPTION: Configure responsiveness options for pages with toolbars (list report tables, object page tables, smart chart toolbars). The system evaluates com.sap.vocabularies.UI.v1.Importance for each field; use the responsiveness options document to tune field visibility and priority.

LANGUAGE: Text

CODE:
```text
Reference documentation: responsiveness-options-example-69efbe7.md
Annotation to consider: com.sap.vocabularies.UI.v1.Importance
Usage: Annotate fields with Importance to control field rendering priority in toolbar and responsive layouts.
```

STEP: 8 — Value Help as a Dropdown List (fixed number of values)

DESCRIPTION: If a value help contains a fixed number of values, render it as a dropdown list. Refer to the value-help document to detect fixed lists and implement dropdown rendering.

LANGUAGE: Text

CODE:
```text
Reference documentation: value-help-as-a-dropdown-list-2a0a630.md
Usage: Detect fixed-value value helps and apply dropdown rendering patterns from the file.
```

STEP: 9 — Using Images, Initials, and Icons

DESCRIPTION: Support images, generated initials, and icons in UI entities. Use the linked documentation to understand supported annotation patterns, image sizes, and fallbacks.

LANGUAGE: Text

CODE:
```text
Reference documentation: using-images-initials-and-icons-5760b63.md
Usage: Use image and icon annotations and fallback rules from the document to render avatars, thumbnails, and icons.
```

STEP: 10 — Keyboard Shortcuts (basic operations)

DESCRIPTION: Implement keyboard shortcuts for basic operations in SAP Fiori elements apps. Follow the keyboard-shortcuts file to add and document shortcuts, including accessibility considerations.

LANGUAGE: Text

CODE:
```text
Reference documentation: keyboard-shortcuts-0cd318c.md
Usage: Define and register shortcut keys per the recommended patterns to enable keyboard accessibility.
```

STEP: 11 — Initial Expansion Level for Tables (List Reports & Analytical List Pages)

DESCRIPTION: Set the number of expanded levels for tables using the initialExpansionLevel property of the PresentationVariant annotation. Use the referenced file to find exact annotation usage and placement.

LANGUAGE: Text

CODE:
```text
Reference documentation: initial-expansion-level-for-tables-in-list-reports-analytical-list-pages-bc05d35.md
Annotation/property: PresentationVariant.initialExpansionLevel
Usage: Annotate the PresentationVariant with initialExpansionLevel to control tree/table expansion on initial render.
```
--------------------------------

**TITLE**: Generative AI Features for SAP Fiori elements

**INTRODUCTION**: This document describes the generative AI features available in SAP Fiori elements: AI-Assisted Easy Filter (natural-language filtering on List Reports) and AI-Assisted Smart Summarization (summaries on Object Pages). It lists prerequisites, usage examples, image references, and links to official help topics. Use the examples as direct prompts/inputs for automated test cases or UI automation that interacts with these features.

**TAGS**: fiori-elements, sap-s4hana-cloud, generative-ai, ai-assisted, easy-filter, smart-summarization, ux

**STEP**: 1 — Prerequisites and Entitlements

**DESCRIPTION**: Verify entitlements and authorizations required to enable generative AI features in SAP S/4HANA Cloud Public Edition. Confirm tenant-level settings and user role assignments before attempting to use AI-Assisted Easy Filter or AI-Assisted Smart Summarization.

- Note: Additional entitlement and authorization may be required for these generative AI features in SAP S/4HANA Cloud Public Edition.
- Keep image references available for UI validation:
  - images/AI-Assisted_Easy_Filter_6254f19.png
  - images/AI-Assisted_Smart_Summarization_e3ea9c8.png
- Official help links (use for implementation and admin guidance):
  - AI-Assisted Easy Filter: https://help.sap.com/docs/SAP_S4HANA_CLOUD/4fc8d03390c342da8a60f8ee387bca1a/804ed39a7dd34720912483ddfb847087.html
  - AI-Assisted Smart Summarization: https://help.sap.com/docs/SAP_S4HANA_CLOUD/4fc8d03390c342da8a60f8ee387bca1a/6c1bc21f01c840cba336404fb249cf95.html

**LANGUAGE**: Text

**CODE**:
```text
Prerequisites:
- Validate tenant entitlements for generative AI features in SAP S/4HANA Cloud Public Edition.
- Ensure user roles include access to AI-assisted features.
- Prepare screenshots for UI verification:
  - images/AI-Assisted_Easy_Filter_6254f19.png
  - images/AI-Assisted_Smart_Summarization_e3ea9c8.png
- Reference admin docs:
  - Easy Filter: https://help.sap.com/.../804ed39a7dd34720912483ddfb847087.html
  - Smart Summarization: https://help.sap.com/.../6c1bc21f01c840cba336404fb249cf95.html
```

**STEP**: 2 — AI-Assisted Easy Filter: Usage and Example Queries

**DESCRIPTION**: Use the AI-Assisted Easy Filter on List Reports to allow end users to enter natural-language filter queries instead of manually setting filter fields. Capture and validate example queries as integration test inputs or prompts for RAG-based agents interacting with the List Report.

- Validate UI displays suggestion/help for natural-language inputs.
- Ensure filter results match expected backend queries or OData filters.

**LANGUAGE**: Natural Language

**CODE**:
```text
Example natural-language filter queries for AI-Assisted Easy Filter:
- "Show open sales orders for customer 12345 in the last 30 days"
- "Display purchase orders with amount greater than 10,000 and status 'Pending'"
- "Show active customers in Germany with revenue above 1M in 2025"
- "Open invoices due in the next 7 days for vendor ACME"
- "List sales orders created by John Doe and not yet shipped"

Validation checklist:
- Each query returns expected records in the List Report.
- Generated filter criteria match the intended OData/$filter expressions.
- UI shows applied filters and allows toggling back to manual filter controls.
```

**STEP**: 3 — AI-Assisted Smart Summarization: Usage and Example Prompts/Outputs

**DESCRIPTION**: Use AI-Assisted Smart Summarization on Object Pages to generate concise business summaries suitable for copy/paste into collaboration tools. Use these examples to validate summarization quality, formatting, and copy/share behavior.

- Confirm summarization button or action is available on Object Pages.
- Verify summary can be copied and is shareable via external collaboration tools.

**LANGUAGE**: Natural Language

**CODE**:
```text
Example input scenarios for Smart Summarization:
- Object: Sales Order 50012345
  Prompt: "Summarize the key details and outstanding actions for Sales Order 50012345."

- Object: Customer Account 200987
  Prompt: "Provide a short executive summary of Customer 200987 including revenue trends, open issues, and recommended next steps."

Expected example summary outputs:
- "Sales Order 50012345 — Key points: Order date 2026-01-10, Total value EUR 45,000, Items: 3. Delivery status: Partially shipped (1 of 3). Outstanding actions: Confirm delivery dates for item 2; follow up with logistics. Contact: Jane Smith (+49 123 4567)."
- "Customer 200987 — Summary: Steady growth over last 4 quarters; major revenue from product line X. Current open support tickets: 2 (billing & delivery). Recommended: Schedule account review and propose 10% volume discount."

Validation checklist:
- Summary is concise (one paragraph or bullet list).
- Key business facts and actionable items are present.
- Copy action exports plain text suitable for email/Slack/Teams.
```

**STEP**: 4 — UI/Automation Artifacts and Image References

**DESCRIPTION**: Store provided image assets for UI validation and include them in test artifacts or documentation bundles.

**LANGUAGE**: Text

**CODE**:
```text
Image assets (store alongside docs/tests):
- images/AI-Assisted_Easy_Filter_6254f19.png
- images/AI-Assisted_Smart_Summarization_e3ea9c8.png

Use cases:
- Visual regression tests should compare current UI against these images.
- Include images in user guides and automated onboarding flows.
```
--------------------------------

**TITLE**: Generic Action Buttons in Object Page Tables — creatable-path and deletable-path Annotations (OData V2 & V4)

**INTRODUCTION**: This document explains how to control the display and enablement of generic Create and Delete action buttons for tables on the Object Page using annotations. It provides exact annotation snippets for SAP Fiori elements for both OData V2 and OData V4 (including CAP CDS), plus behavior notes required for correct implementation.

**TAGS**: fiori-elements, odata-v2, odata-v4, annotations, object-page, table, creatable-path, deletable-path, CAP, CDS

STEP: Create Button Display Behavior

DESCRIPTION: The Create button on a table toolbar of the Object Page is displayed only when the Object Page is in Edit mode. The creatable-path annotation controls visibility: it must point to a Boolean property on the root entity (not on the navigation target). If that property evaluates to true, the Create button is shown; if false, it is hidden. Reference image: images/CreatablePath_ObPTable_1d6a9b1.png. See also: adding-actions-to-tables-b623e0b.md

LANGUAGE: Text

CODE:
```Text
Behavior:
- Create button is displayed only in Edit mode.
- creatable-path must reference a Boolean property on the root entity.
- If the referenced property is true => Create button is visible.
- If false => Create button is hidden.
Image: images/CreatablePath_ObPTable_1d6a9b1.png
Reference: adding-actions-to-tables-b623e0b.md
```

STEP: Enable Create Button — OData V2 (creatable-path on NavigationProperty)

DESCRIPTION: Use sap:creatable-path on the NavigationProperty element. The attribute value must be the name of a Boolean property on the root entity. When that property is true, the Create button appears in the table toolbar (only in Edit mode).

LANGUAGE: XML

CODE:
```xml
<NavigationProperty Name="to_ProductText" sap:creatable-path="CanCreateProductText".../>
```

STEP: Enable Create Button — OData V4 (InsertRestrictions / NonInsertableNavigationProperties)

DESCRIPTION: For OData V4, express create restrictions using Capabilities.InsertRestrictions. Use NonInsertableNavigationProperties with conditional logic referencing a Boolean property on the root entity (CanCreateProductText). The example below marks to_ProductText as non-insertable when CanCreateProductText is false (using an If + Not + Path construct).

LANGUAGE: XML

CODE:
```xml

<Annotations Target="STTA_PROD_MAN.STTA_PROD_MAN_Entities/STTA_C_MP_Product">
    <Annotation Term="Capabilities.InsertRestrictions">
        <Record>
            <PropertyValue Property="NonInsertableNavigationProperties">
                <Collection>
                    <If>                                                      
                        <Not>
                            <Path>CanCreateProductText</Path>
                        </Not>
                        <NavigationPropertyPath>to_ProductText</NavigationPropertyPath>
                    </If>
                </Collection>
            </PropertyValue>
        </Record>
    </Annotation>
</Annotations>
```

STEP: Enable/Disable Delete Button — OData V2 (sap:deletable-path on EntitySet)

DESCRIPTION: For OData V2, set sap:deletable-path on the EntitySet element to the name of a Boolean property (Delete_mc) on the entity type. The Delete button in the table toolbar is enabled for a selected row if that property is true. If the table supports multi-selection, the Delete button is enabled when at least one selected item is deletable.

LANGUAGE: XML

CODE:
```xml

<EntitySet Name="STTA_C_MP_ProductText"
           EntityType="STTA_PROD_MAN.STTA_C_MP_ProductTextType" 
           sap:deletable-path="Delete_mc" 
           sap:content-version="1"/>
```

STEP: Enable/Disable Delete Button — OData V4 (XML Annotation)

DESCRIPTION: For OData V4, use Org.OData.Capabilities.V1.DeleteRestrictions and set Deletable to the Boolean property via PropertyValue Path. This controls whether Delete is enabled for individual items.

LANGUAGE: XML

CODE:
```xml
<Annotations Target="STTA_PROD_MAN.STTA_PROD_MAN_Entities/STTA_C_MP_ProductText">
   <Annotation Term="Org.OData.Capabilities.V1.DeleteRestrictions">
        <Record>
            <PropertyValue Property="Deletable" Path="Delete_mc"/>
        </Record>
    </Annotation>
</Annotations>
```

STEP: Enable/Disable Delete Button — OData V4 (CAP CDS Annotation)

DESCRIPTION: For CAP CDS, annotate the entity with Capabilities.DeleteRestrictions and set Deletable to the Boolean property name. This produces the equivalent OData V4 DeleteRestrictions annotation.

LANGUAGE: CDS

CODE:
```
annotate STTA_PROD_MAN.STTA_C_MP_ProductText with @(
  Capabilities.DeleteRestrictions : {
    Deletable : Delete_mc
  }
);
```

STEP: Implementation Notes and Rules

DESCRIPTION: Consolidated rules to implement and validate behavior in backend annotations:
- creatable-path must reference a Boolean property on the root entity; controls Create button visibility (only in Edit mode).
- For OData V2 use sap:creatable-path on the NavigationProperty; for OData V4 use Capabilities.InsertRestrictions / NonInsertableNavigationProperties conditionally referencing the root property.
- deletable-path (OData V2) or Deletable property (OData V4/CDS) must reference a Boolean property on the entity.
- Delete button behavior:
  - Single selection: enabled when selected item's deletable property is true.
  - Multi-selection: enabled if at least one selected item has deletable=true.
- Preserve exact target names and property names (e.g., STTA_PROD_MAN.STTA_C_MP_Product, to_ProductText, CanCreateProductText, Delete_mc).
- Related example: example-adding-custom-filter-fields-in-table-toolbar-e34f78f.md

LANGUAGE: Text

CODE:
```Text
Rules summary:
- creatable-path -> Boolean property on root entity.
- OData V2: sap:creatable-path on NavigationProperty.
- OData V4: Use Capabilities.InsertRestrictions -> NonInsertableNavigationProperties with conditional Path checks.
- deletable-path (V2) or Capabilities.DeleteRestrictions.Deletable (V4/CDS) -> Boolean property on entity.
- Delete button enabled if property true; multi-select enabled if at least one selected row is deletable.
Related files:
- adding-actions-to-tables-b623e0b.md
- example-adding-custom-filter-fields-in-table-toolbar-e34f78f.md
Image: images/CreatablePath_ObPTable_1d6a9b1.png
```
--------------------------------

**TITLE**: Grouping Fields with UI.FieldGroup and UI.ConnectedFields (Fiori Elements)

**INTRODUCTION**: This document provides concise, action-oriented examples and configuration steps to group related fields in SAP Fiori Elements apps. It covers UI.FieldGroup usage for forms and tables, linking FieldGroups in facets and line items, semantically connected fields (connected date/time or multi-field templates), OData V2/V4 differences, manifest settings for table label display and TextArea merging, and checkbox groups. Include the provided XML, ABAP CDS, CAP CDS, and manifest code snippets directly in your project metadata.

**TAGS**: fiori-elements-framework, UI.FieldGroup, UI.ConnectedFields, annotations, OData, ABAP, CAP, XML, JSON, manifest, LineItem, Facets, Table, Form, Checkbox

**STEP**: Form Implementation — Define a UI.FieldGroup
**DESCRIPTION**: Define a UI.FieldGroup to group related fields (e.g., dimensions). Use this FieldGroup in object page sections or pass it to an OData form via UI.ReferenceFacet. If all grouped fields are hidden, the container is hidden. Supported code formats: XML annotation, ABAP CDS metadata extension, CAP CDS.
**LANGUAGE**: XML
**CODE**:
```xml
<Annotation Term="UI.FieldGroup" Qualifier="Dimensions">
   <Record>
      <PropertyValue Property="Label" String="Dimensions"/>
      <PropertyValue Property="Data">
         <Collection>
            <Record Type="UI.DataField">
               <PropertyValue Property="Value" Path="BaseUnit"/>
            </Record>
            <Record Type="UI.DataField">
               <PropertyValue Property="Value" Path="Height"/>
            </Record>
            <Record Type="UI.DataField">
               <PropertyValue Property="Value" Path="Width"/>
            </Record>
            <Record Type="UI.DataField">
               <PropertyValue Property="Value" Path="Depth"/>
            </Record>
            <Record Type="UI.DataField">
               <PropertyValue Property="Value" Path="Weight"/>
            </Record>
         </Collection>
      </PropertyValue>
   </Record>
</Annotation>
```

**LANGUAGE**: ABAP CDS
**CODE**:
```
@UI.fieldGroup: [
  {
    type: #STANDARD,
    position: 1 ,
    qualifier: 'Dimensions',
    groupLabel: 'Dimensions'
  }
]
BaseUnit;

@UI.fieldGroup: [
  {
    type: #STANDARD,
    position: 2 ,
    qualifier: 'Dimensions'
  }
]
Height;

@UI.fieldGroup: [
  {
    type: #STANDARD,
    position: 3 ,
    qualifier: 'Dimensions'
  }
]
Width;

@UI.fieldGroup: [
  {
    type: #STANDARD,
    position: 4 ,
    qualifier: 'Dimensions'
  }
]
Depth;

@UI.fieldGroup: [
  {
    type: #STANDARD,
    position: 5 ,
    qualifier: 'Dimensions'
  }
]
Weight;
```

**LANGUAGE**: CAP CDS
**CODE**:
```
UI.FieldGroup #Dimensions : {
    $Type : 'UI.FieldGroupType',
    Label : 'Dimensions',
    Data : [
        {
            $Type : 'UI.DataField',
            Value : BaseUnit
        },
        {
            $Type : 'UI.DataField',
            Value : Height
        },
        {
            $Type : 'UI.DataField',
            Value : Width
        },
	{
            $Type : 'UI.DataField',
            Value : Depth
        },
	{
            $Type : 'UI.DataField',
            Value : Weight
        }
    ]
}
```

**STEP**: Reference UI.FieldGroup in UI.Facets (Object Page)
**DESCRIPTION**: Add a ReferenceFacet in UI.Facets that targets the FieldGroup qualifier. This links the FieldGroup to an object page facet (section) for forms.
**LANGUAGE**: XML
**CODE**:
```xml
<Annotation Term="UI.Facets">
   <Collection>
      <Record Type="UI.ReferenceFacet">
         <PropertyValue Property="Label" String="Dimensions" />
         <PropertyValue Property="Target"AnnotationPath="@UI.FieldGroup#Dimensions"/>
      </Record>
   </Collection>
</Annotation>
```

**LANGUAGE**: ABAP CDS
**CODE**:
```
@UI.Facet: [
  {
    label: 'Dimensions',
    targetQualifier: 'Dimensions',
    type: #FIELDGROUP_REFERENCE,
    purpose: #STANDARD
  }
]
```

**LANGUAGE**: CAP CDS
**CODE**:
```
UI.Facets : [
    {
        $Type : 'UI.ReferenceFacet',
        Label : 'Dimensions',
        Target : '@UI.FieldGroup#Dimensions'
    }
]
```

**STEP**: Table Implementation — Use UI.FieldGroup inside LineItem
**DESCRIPTION**: To display multiple fields stacked inside a table cell, reference a UI.FieldGroup from UI.LineItem via UI.DataFieldForAnnotation. Supported nested types: DataField, DataFieldForAction, DataFieldForAnnotation. Ensure Label omission on the DataFieldForAnnotation if you want to hide the column header when using multiple DataFieldForAction buttons.
**LANGUAGE**: XML
**CODE**:
```xml
<Annotation Term="UI.LineItem">
    <Collection>
        …………
        …………
        <Record Type="UI.DataFieldForAnnotation">
            <PropertyValue Property="Target" AnnotationPath="@UI.FieldGroup#FieldGroup1" />
            <PropertyValue Property="Label" String="Type Information"/>
        </Record>
        …………
        …………
    </Collection>
</Annotation>
```

**LANGUAGE**: ABAP CDS
**CODE**:
```
@UI.lineItem: [
  {
    label: 'Type Information',
    type: #AS_FIELDGROUP,
    valueQualifier: 'FieldGroup1'
  }
]
producttype;
```

**LANGUAGE**: CAP CDS
**CODE**:
```
UI.LineItem : [
    {
        $Type : 'UI.DataFieldForAnnotation',
        Target : '@UI.FieldGroup#FieldGroup1',
        Label : 'Type Information'
    }
]
```

**STEP**: Define UI.FieldGroup used in LineItem (Table cell content)
**DESCRIPTION**: Define the FieldGroup which contains DataField and DataFieldForAction entries used inside line items (table cells). Note: UI.FieldGroup is not supported in grid/tree/analytical tables.
**LANGUAGE**: XML
**CODE**:
```xml
<Annotation Term="UI.FieldGroup" Qualifier="FieldGroup1">
    <Record>
        <PropertyValue Property="Data">
            <Collection>
                <Record Type="UI.DataField">
                    <PropertyValue Property="Value" Path="ContractType"/>
                </Record>
                <Record Type="UI.DataFieldForAction">
                    <PropertyValue Property="Label" String="Dummy Button"/>
                    <PropertyValue Property="Action" String="com.sap.gateway.srvd.sadl_gw_appmusicdr_definition.v0001.SOME_ACTION_2"/>
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

**LANGUAGE**: ABAP CDS
**CODE**:
```
@UI.fieldGroup: [
  {
    type: #STANDARD,
    position: 1 ,
    qualifier: 'FieldGroup1'
  }
]
ContractType;

@UI.fieldGroup: [
  {
    label: 'Dummy Button',
    dataAction: 'com.sap.gateway.srvd.sadl_gw_appmusicdr_definition.v0001.SOME_ACTION_2',
    type: #FOR_ACTION,
    position: 2 ,
    qualifier: 'FieldGroup1'
  }
]
contractName;
```

**LANGUAGE**: CAP CDS
**CODE**:
```
UI.FieldGroup #FieldGroup1 : {
    Data : [
        {
            $Type : 'UI.DataField',
            Value : ContractType
        },
        {
            $Type : 'UI.DataFieldForAction',
            Label : 'Dummy Button',
            Action : 'com.sap.gateway.srvd.sadl_gw_appmusicdr_definition.v0001.SOME_ACTION_2'
        }
    ]
}
```

**STEP**: Semantically Connected Fields — Use UI.ConnectedFields (display side-by-side)
**DESCRIPTION**: Use UI.ConnectedFields to display related properties side-by-side and optionally render them with a template (e.g., "{OrderDate}/{DeliveryDate}"). Connected fields can be edited separately but shown under one label. ConnectedFields must be configured in form sections (not header sections). Below are OData V2 XML examples and OData V4 XML/ABAP/CAP examples.
**LANGUAGE**: XML (OData V2 example)
**CODE**:
```xml
<Annotation Term="com.sap.vocabularies.UI.v1.ConnectedFields" Qualifier="ConnectedDateTime">
    <Record >
        <PropertyValue Property="Data">
            <Record >
                <PropertyValue Property="SalesOrderDate">
                    <Record Type="com.sap.vocabularies.UI.v1.DataField">
                        <PropertyValue Property="Value" Path="SalesOrderDate"/>
                    </Record>
                </PropertyValue>
                <PropertyValue Property="SalesOrderTime">
                    <Record Type="com.sap.vocabularies.UI.v1.DataField">
                        <PropertyValue Property="Value" Path="TrialTOD"/>
                    </Record>
                </PropertyValue>
            </Record>
        </PropertyValue>
        <PropertyValue Property="Label" String="Connected DateTime"/>
        <PropertyValue Property="Template" String="{SalesOrderDate} / {SalesOrderTime}"/>
    </Record>
</Annotation>

<Annotation Term="com.sap.vocabularies.UI.v1.ConnectedFields" Qualifier="ConnectedData">
    <Record >
        <PropertyValue Property="Data">
            <Record >
                <PropertyValue Property="PurchaseOrderByCustomer">
                    <Record Type="com.sap.vocabularies.UI.v1.DataField">
                        <PropertyValue Property="Value" Path="PurchaseOrderByCustomer"/>
                    </Record>
                </PropertyValue>
                <PropertyValue Property="ShippingCondition">
                    <Record Type="com.sap.vocabularies.UI.v1.DataField">
                        <PropertyValue Property="Value" Path="ShippingCondition"/>
                    </Record>
                </PropertyValue>
            </Record>
        </PropertyValue>
        <PropertyValue Property="Label" String="Connected Data"/>
        <PropertyValue Property="Template" String="{ShippingCondition} - {PurchaseOrderByCustomer}"/>
    </Record>
</Annotation>

.....
<Annotation Term="com.sap.vocabularies.UI.v1.FieldGroup" Qualifier="OrderData">
    <Record >
        <PropertyValue Property="Data">
            <Collection>
                <Record Type="com.sap.vocabularies.UI.v1.DataFieldForAnnotation">
                    <PropertyValue Property="Target" AnnotationPath="@UI.ConnectedFields#ConnectedDateTime"/>
                    <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
                </Record>
                <Record Type="com.sap.vocabularies.UI.v1.DataFieldForAnnotation">
                    <PropertyValue Property="Target" AnnotationPath="@UI.ConnectedFields#ConnectedData"/>
                    <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

**LANGUAGE**: XML (OData V4 example)
**CODE**:
```
...
<Annotation Term="UI.FieldGroup" Qualifier="OrderData">
    <Record Type="UI.FieldGroupType">
        <PropertyValue Property="Data">
            <Collection>
                <Record Type="UI.DataFieldForAnnotation">
                    <PropertyValue Property="Target" AnnotationPath="@UI.ConnectedFields#ConnectedOrderDates"/>
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
...
<Annotation Term="SAP__UI.ConnectedFields" Qualifier="ConnectedOrderDates">
<Record>
    <PropertyValue Property="Label" String="Order / Delivery"/>
    <PropertyValue Property="Template" String="{OrderDate}/{DeliveryDate}"/>
    <PropertyValue Property="Data">
        <Record Type="Core.Dictionary">
            <PropertyValue Property="OrderDate">
                <Record Type="SAP__UI.DataField">
                    <PropertyValue Property="Value" Path="OrderDate"/>
                </Record>
            </PropertyValue>
            <PropertyValue Property="DeliveryDate">
                <Record Type="SAP__UI.DataField">
                    <PropertyValue Property="Value" Path="DeliveryDate"/>
                </Record>
            </PropertyValue>
        </Record>
    </PropertyValue>
</Record>
</Annotation>
...
```

**LANGUAGE**: ABAP CDS (OData V4 example)
**CODE**:
```
annotate view SALESORDER with {
  ...
  @UI.facet: [
    {
      id: 'idIdentification',
      type: #IDENTIFICATION_REFERENCE,
    },
    ...
  ]
  ...
  @UI: {
    identification: [
      { type: #AS_CONNECTED_FIELDS, valueQualifier: 'ConnectedOrderDates' }
    ],
    connectedFields: [
      {
        name: 'OrderDate',
        qualifier: 'ConnectedOrderDates',
        template: '{OrderDate}/{DeliveryDate}',
        groupLabel: 'Order / Delivery'
      }
    ]
  }
  OrderDate;

  @UI: {
    connectedFields: [
      { name: 'DeliveryDate', qualifier: 'ConnectedOrderDates' }
    ]
  }
  DeliveryDate;

  ...
}
```

**LANGUAGE**: CAP CDS (OData V4 example)
**CODE**:
```
annotate SalesOrderService.SalesOrder with @UI : {

  FieldGroup #OrderData : {
    Data : [
      { $Type : 'UI.DataFieldForAnnotation', Target: '@UI.ConnectedFields#ConnectedOrderDates' }
    ]
  },
  ...

  ConnectedFields #ConnectedOrderDates: {
    $Type   : 'UI.ConnectedFieldsType',
    Label   : 'Order / Delivery',
    Template: '{OrderDate}/{DeliveryDate}',
    Data    : {
      $Type        : 'Core.Dictionary',
      OrderDate    : { $Type : 'UI.DataField', Value : OrderDate },
      DeliveryDate : { $Type : 'UI.DataField', Value : DeliveryDate }
    }
  },
  ...
}
```

**STEP**: Navigation for Semantically Connected Fields
**DESCRIPTION**: To enable navigation from connected fields, define navigation on the underlying data fields. Allowed navigation types: DataFieldWithURL, DataFieldWithIntentBasedNavigation (SemanticObject or Action), DataFieldWithNavigationPath. Configure the navigation terms on each DataField inside the ConnectedFields annotation.
**LANGUAGE**: (no code snippet required)
**CODE**:
```
(Define DataFieldWithURL / DataFieldWithIntentBasedNavigation / DataFieldWithNavigationPath on the DataField elements inside ConnectedFields.)
```

**STEP**: Show Field Labels in FieldGroup Column (OData V4 Table)
**DESCRIPTION**: To render labels for fields inside a FieldGroup displayed inside a table column, set controlConfiguration → LineItem column key → showDataFieldsLabel true in manifest.json. Use the column key format DataFieldForAnnotation::FieldGroup::<qualifier>.
**LANGUAGE**: JSON
**CODE**:
```
"controlConfiguration": {
   "@com.sap.vocabularies.UI.v1.LineItem": {
      columns: {
         "DataFieldForAnnotation::FieldGroup::myFieldGroup": {
            "showDataFieldsLabel": true
         }
      }
   }
}
```

**STEP**: Merge TextArea Label with Section/Subsection Title (manifest.json)
**DESCRIPTION**: If a FieldGroup contains only a single UI.MultiLineText property and you want to hide the standalone TextArea label and show only the section title, set useSingleTextAreaFieldAsNotes true at the section-level in manifest.json. Ensure accessible labeling for screen readers. Mandatory text areas always show labels in edit mode.
**LANGUAGE**: JSON
**CODE**:
```
"sap.ui5": {
        "routing": {
            "targets": {
                "SalesOrderManageObjectPage": {
                    "options": {
                        "settings": {
                            "content": {
                                "body": {
                                    "sections": {
                                        "ReferenceFacet1": {
                                            "useSingleTextAreaFieldAsNotes": true
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
```

**STEP**: Grouping Checkboxes — Define a Checkbox Group with UI.FieldGroup
**DESCRIPTION**: Group multiple Boolean properties into a single checkbox group by defining a nested FieldGroup for the checkboxes and referencing it from a parent FieldGroup via DataFieldForAnnotation. Restrictions: only Boolean properties allowed, not supported in header forms/filter bars/tables, dynamic instantiation not supported. Define FieldControl (Common.FieldControl) in behavior/metadata as needed.
**LANGUAGE**: XML
**CODE**:
```
<Annotation Term="UI.FieldGroup" Qualifier="GeneralInformation">
    <Record Type="UI.FieldGroupType">
        <PropertyValue Property="Label" String="Line item data"/>
        <PropertyValue Property="Data">
            <Collection>
                <Record Type="UI.DataFieldForAnnotation">
                    <PropertyValue Property="Target" AnnotationPath="@UI.FieldGroup#CheckBoxGroup"/>
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
<Annotation Term="UI.FieldGroup" Qualifier="CheckBoxGroup">
    <Record Type="UI.FieldGroupType">
        <PropertyValue Property="Label" String="Standard CheckBoxGroup"/>
        <PropertyValue Property="Data">
            <Collection>
                <Record Type="UI.DataField">
                    <PropertyValue Property="Value" Path="Boolean1"/>
                    <PropertyValue Property="Label" String="Checkbox One"/>
                </Record>
                <Record Type="UI.DataField">
                    <PropertyValue Property="Value" Path="Boolean2"/>
                    <PropertyValue Property="Label" String="Checkbox Two"/>
                </Record>
                <Record Type="UI.DataField">
                    <PropertyValue Property="Value" Path="Boolean3"/>
                    <PropertyValue Property="Label" String="Checkbox Three"/>
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>

<Annotations Target="sap.fe.core.FieldGroup.Products/Boolean1">
    <Annotation Term="Common.FieldControl" Int="7"/>
</Annotations>
<Annotations Target="sap.fe.core.FieldGroup.Products/Boolean3">
    <Annotation Term="Common.FieldControl">
        <If>
                <Path>Boolean2</Path>
                <Int>0</Int>
                <Int>3</Int>
        </If>
    </Annotation>
</Annotations>
```

**LANGUAGE**: ABAP CDS
**CODE**:
```
Define the following in the metadata extension of the data definition containing the Boolean fields:
...
@UI: {
    fieldGroup: [
        { qualifier: 'GeneralInformation', type: #AS_FIELDGROUP, valueQualifier: 'CheckBoxGroup', position: 10, label: 'CheckBox Group Label' },
        { qualifier: 'CheckBoxGroup', position: 10, label: 'Checkbox One' }
    ]
}
Boolean1;
    @UI: {
        fieldGroup: [
            { qualifier: 'CheckBoxGroup', position: 20, label: 'Checkbox Two'  }
        ]
    }
Boolean2;
    @UI: {
        fieldGroup: [
            { qualifier: 'CheckBoxGroup', position: 30, label: 'Checkbox Three'  }
        ]
    }
Boolean3;
...
```

**LANGUAGE**: CAP CDS
**CODE**:
```
...
Boolean1            : Boolean @Common.FieldControl: #Mandatory;
Boolean2            : Boolean;
Boolean3            : Boolean @Common.FieldControl: (Boolean2 ? 0 : 3);
// FieldControl can also be set as path based reference to property or expression binding
...
FieldGroup #CheckBoxGroup: {
    $Type: 'UI.FieldGroupType',
    Label: 'CheckBox Group Label',
    Data : [
        {
            $Type: 'UI.DataField',
            Value: Boolean1,
            Label: 'Checkbox One'
        },
        {
            $Type: 'UI.DataField',
            Value: Boolean2,
            Label: 'Checkbox Two'
        },
        {
            $Type: 'UI.DataField',
            Value: Boolean3, 
            Label: 'Checkbox Three'
        }
    ]
},
...
FieldGroup #GeneralInformation: {
    Label: 'Line item data',
	Data : [
    {
        $Type : 'UI.DataFieldForAnnotation',
        Target: '@UI.FieldGroup#CheckBoxGroup'
    }
    ]
}
```

**STEP**: Checkbox Group Layout — Enable Horizontal Layout (manifest.json)
**DESCRIPTION**: To align checkbox group items horizontally, set horizontalLayout true for the subsection in manifest.json under the target entity/section. This setting applies to all text area controls in the section when used for TextArea merging.
**LANGUAGE**: JSON
**CODE**:
```
"options": {
    "settings": {
         "entitySet": "Products",
         "content": {
             "body": {
                 "sections": {
                     "@com.sap.vocabularies.UI.v1.FieldGroup#CheckBoxGroups": {
                         "subSections": {
                            "@com.sap.vocabularies.UI.v1.FieldGroup#CheckBoxGroupH1": {
                                "horizontalLayout": true
             }
           }
          }
         }
       }
      }
    }
  }
}
```

**STEP**: Warnings & Restrictions (quick reference)
**DESCRIPTION**: Keep these restrictions in mind when designing FieldGroups and ConnectedFields:
- UI.FieldGroup is not supported in grid tables, tree tables, and analytical tables.
- Table implementation with FieldGroup cannot show individual labels per field unless using showDataFieldsLabel (OData V4).
- ConnectedFields can only be used in form sections (not header sections).
- Checkbox groups: only Boolean properties; not supported in header forms/filter bars/tables; dynamic instantiation not supported; mandatory checkbox-group requiring at least one selection not supported (use MultiComboBox instead).
- If no HeaderFacet annotation and headerinfo has no images, expand/collapse and pin buttons are hidden in object page header.
- If subsection contains only one group and subsection title equals group title, the group title is hidden.

**STEP**: Related resources and image references
**DESCRIPTION**: Reference images and design guidelines for UI/UX:
- Example images referenced in the original documentation: images/Related_Fields_Using_a_Form_Implementation_b9b30bd.png, images/DataField_with_Dummy_Button_8c91e4e.png, images/Semantically_Connected_Fields_eb0b024.png, images/FieldGroup_Column_Sold-To_Party_with_Field_Labels_81e38b2.png, images/Display_Mode_b991a5e.png, images/Edit_Mode_459aa56.png, images/Horizontal_Layout_a9399bb.png
- Design guidelines: https://experience.sap.com/fiori-design-web/form/ and https://experience.sap.com/fiori-design-web/object-page/#forms


--------------------------------

**TITLE**: Grouping Fields with UI.FieldGroup and UI.ConnectedFields (Fiori Elements)

**INTRODUCTION**: Practical, code-focused instructions to define and reference grouped and semantically connected fields in SAP Fiori Elements object pages and tables. Includes XML, ABAP CDS, CAP CDS, and manifest.json examples for FieldGroup, LineItem integration, ConnectedFields (OData V2/V4), table label display, textarea merging, and checkbox groups. Use these snippets directly when generating annotations or manifest settings.

**TAGS**: UI.FieldGroup, UI.ConnectedFields, LineItem, FieldGroup, Fiori Elements, OData V2, OData V4, ABAP CDS, CAP CDS, XML, manifest.json

STEP: 1 — Define a UI.FieldGroup in an Object Page (form-like grouping)
DESCRIPTION: Create a FieldGroup annotation to group related properties (arranged vertically or spilling to next column in a form). If all grouped fields are hidden, the container is hidden. Typical use: group address parts or dimensions in an object page form. Keep in mind: if there is no HeaderFacet and no images in HeaderInfo, expand/collapse/pin buttons in header are hidden. If a subsection contains only one group and the subsection title equals the group title, the group title is hidden.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.FieldGroup" Qualifier="Dimensions">
   <Record>
      <PropertyValue Property="Label" String="Dimensions"/>
      <PropertyValue Property="Data">
         <Collection>
            <Record Type="UI.DataField">
               <PropertyValue Property="Value" Path="BaseUnit"/>
            </Record>
            <Record Type="UI.DataField">
               <PropertyValue Property="Value" Path="Height"/>
            </Record>
            <Record Type="UI.DataField">
               <PropertyValue Property="Value" Path="Width"/>
            </Record>
            <Record Type="UI.DataField">
               <PropertyValue Property="Value" Path="Depth"/>
            </Record>
            <Record Type="UI.DataField">
               <PropertyValue Property="Value" Path="Weight"/>
            </Record>
         </Collection>
      </PropertyValue>
   </Record>
</Annotation>
```

LANGUAGE: ABAP CDS
CODE:
```
@UI.fieldGroup: [
  {
    type: #STANDARD,
    position: 1 ,
    qualifier: 'Dimensions',
    groupLabel: 'Dimensions'
  }
]
BaseUnit;

@UI.fieldGroup: [
  {
    type: #STANDARD,
    position: 2 ,
    qualifier: 'Dimensions'
  }
]
Height;

@UI.fieldGroup: [
  {
    type: #STANDARD,
    position: 3 ,
    qualifier: 'Dimensions'
  }
]
Width;

@UI.fieldGroup: [
  {
    type: #STANDARD,
    position: 4 ,
    qualifier: 'Dimensions'
  }
]
Depth;

@UI.fieldGroup: [
  {
    type: #STANDARD,
    position: 5 ,
    qualifier: 'Dimensions'
  }
]
Weight;
```

LANGUAGE: CAP CDS
CODE:
```
UI.FieldGroup #Dimensions : {
    $Type : 'UI.FieldGroupType',
    Label : 'Dimensions',
    Data : [
        {
            $Type : 'UI.DataField',
            Value : BaseUnit
        },
        {
            $Type : 'UI.DataField',
            Value : Height
        },
        {
            $Type : 'UI.DataField',
            Value : Width
        },
	{
            $Type : 'UI.DataField',
            Value : Depth
        },
	{
            $Type : 'UI.DataField',
            Value : Weight
        }
    ]
}
```

STEP: 2 — Reference the UI.FieldGroup from UI.Facets (object page form)
DESCRIPTION: To display the FieldGroup in the object page form, add a UI.ReferenceFacet that targets the FieldGroup annotation qualifier.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.Facets">
   <Collection>
      <Record Type="UI.ReferenceFacet">
         <PropertyValue Property="Label" String="Dimensions" />
         <PropertyValue Property="Target"AnnotationPath="@UI.FieldGroup#Dimensions"/>
      </Record>
   </Collection>
</Annotation>
```

LANGUAGE: ABAP CDS
CODE:
```
@UI.Facet: [
  {
    label: 'Dimensions',
    targetQualifier: 'Dimensions',
    type: #FIELDGROUP_REFERENCE,
    purpose: #STANDARD
  }
]
```

LANGUAGE: CAP CDS
CODE:
```
UI.Facets : [
    {
        $Type : 'UI.ReferenceFacet',
        Label : 'Dimensions',
        Target : '@UI.FieldGroup#Dimensions'
    }
]
```

STEP: 3 — Table Implementation: enable UI.FieldGroup inside a LineItem column
DESCRIPTION: To display multiple related fields stacked inside a table cell, add a UI.DataFieldForAnnotation under UI.LineItem that Target-refers to a UI.FieldGroup. Supported inner types: DataField, DataFieldForAction, DataFieldForAnnotation (for nested annotations, rating/progress indicators, or contact cards). Note: UI.FieldGroup is not supported in grid/tree/analytical tables. If using multiple DataFieldForAction buttons, omit the LineItem column Label to hide the column header.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.LineItem">
    <Collection>
        …………
        …………
        <Record Type="UI.DataFieldForAnnotation">
            <PropertyValue Property="Target" AnnotationPath="@UI.FieldGroup#FieldGroup1" />
            <PropertyValue Property="Label" String="Type Information"/>
        </Record>
        …………
        …………
    </Collection>
</Annotation>
```

LANGUAGE: ABAP CDS
CODE:
```
@UI.lineItem: [
  {
    label: 'Type Information',
    type: #AS_FIELDGROUP,
    valueQualifier: 'FieldGroup1'
  }
]
producttype;
```

LANGUAGE: CAP CDS
CODE:
```
UI.LineItem : [
    {
        $Type : 'UI.DataFieldForAnnotation',
        Target : '@UI.FieldGroup#FieldGroup1',
        Label : 'Type Information'
    }
]
```

STEP: 4 — Define the UI.FieldGroup used inside a LineItem (table column group)
DESCRIPTION: Define the FieldGroup qualifier referenced from the LineItem. This example mixes a DataField and a DataFieldForAction (dummy button). Preserve action URI for ABAP/remote action strings.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.FieldGroup" Qualifier="FieldGroup1">
    <Record>
        <PropertyValue Property="Data">
            <Collection>
                <Record Type="UI.DataField">
                    <PropertyValue Property="Value" Path="ContractType"/>
                </Record>
                <Record Type="UI.DataFieldForAction">
                    <PropertyValue Property="Label" String="Dummy Button"/>
                    <PropertyValue Property="Action" String="com.sap.gateway.srvd.sadl_gw_appmusicdr_definition.v0001.SOME_ACTION_2"/>
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

LANGUAGE: ABAP CDS
CODE:
```
@UI.fieldGroup: [
  {
    type: #STANDARD,
    position: 1 ,
    qualifier: 'FieldGroup1'
  }
]
ContractType;

@UI.fieldGroup: [
  {
    label: 'Dummy Button',
    dataAction: 'com.sap.gateway.srvd.sadl_gw_appmusicdr_definition.v0001.SOME_ACTION_2',
    type: #FOR_ACTION,
    position: 2 ,
    qualifier: 'FieldGroup1'
  }
]
contractName;
```

LANGUAGE: CAP CDS
CODE:
```
UI.FieldGroup #FieldGroup1 : {
    Data : [
        {
            $Type : 'UI.DataField',
            Value : ContractType
        },
        {
            $Type : 'UI.DataFieldForAction',
            Label : 'Dummy Button',
            Action : 'com.sap.gateway.srvd.sadl_gw_appmusicdr_definition.v0001.SOME_ACTION_2'
        }
    ]
}
```

STEP: 5 — Semantically Connected Fields (OData V2) — define ConnectedFields and include in FieldGroup
DESCRIPTION: For OData V2, use com.sap.vocabularies.UI.v1.ConnectedFields to display multiple properties side-by-side under one label with a Template. Reference this ConnectedFields annotation via UI.DataFieldForAnnotation inside a FieldGroup. Action: create ConnectedFields record with Data fields, Template and Label, then reference it from FieldGroup.
LANGUAGE: XML
CODE:
```
<Annotation Term="com.sap.vocabularies.UI.v1.ConnectedFields" Qualifier="ConnectedDateTime">
    <Record >
        <PropertyValue Property="Data">
            <Record >
                <PropertyValue Property="SalesOrderDate">
                    <Record Type="com.sap.vocabularies.UI.v1.DataField">
                        <PropertyValue Property="Value" Path="SalesOrderDate"/>
                    </Record>
                </PropertyValue>
                <PropertyValue Property="SalesOrderTime">
                    <Record Type="com.sap.vocabularies.UI.v1.DataField">
                        <PropertyValue Property="Value" Path="TrialTOD"/>
                    </Record>
                </PropertyValue>
            </Record>
        </PropertyValue>
        <PropertyValue Property="Label" String="Connected DateTime"/>
        <PropertyValue Property="Template" String="{SalesOrderDate} / {SalesOrderTime}"/>
    </Record>
</Annotation>
 
<Annotation Term="com.sap.vocabularies.UI.v1.ConnectedFields" Qualifier="ConnectedData">
    <Record >
        <PropertyValue Property="Data">
            <Record >
                <PropertyValue Property="PurchaseOrderByCustomer">
                    <Record Type="com.sap.vocabularies.UI.v1.DataField">
                        <PropertyValue Property="Value" Path="PurchaseOrderByCustomer"/>
                    </Record>
                </PropertyValue>
                <PropertyValue Property="ShippingCondition">
                    <Record Type="com.sap.vocabularies.UI.v1.DataField">
                        <PropertyValue Property="Value" Path="ShippingCondition"/>
                    </Record>
                </PropertyValue>
            </Record>
        </PropertyValue>
        <PropertyValue Property="Label" String="Connected Data"/>
        <PropertyValue Property="Template" String="{ShippingCondition} - {PurchaseOrderByCustomer}"/>
    </Record>
</Annotation>
 
.....
<Annotation Term="com.sap.vocabularies.UI.v1.FieldGroup" Qualifier="OrderData">
    <Record >
        <PropertyValue Property="Data">
            <Collection>
                <Record Type="com.sap.vocabularies.UI.v1.DataFieldForAnnotation">
                    <PropertyValue Property="Target" AnnotationPath="@UI.ConnectedFields#ConnectedDateTime"/>
                    <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
                </Record>
                <Record Type="com.sap.vocabularies.UI.v1.DataFieldForAnnotation">
                    <PropertyValue Property="Target" AnnotationPath="@UI.ConnectedFields#ConnectedData"/>
                    <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

STEP: 6 — Semantically Connected Fields (OData V4) — define ConnectedFields and reference in FieldGroup (XML, ABAP CDS, CAP CDS)
DESCRIPTION: For OData V4 use SAP__UI.ConnectedFields or UI.ConnectedFieldsType and reference via UI.DataFieldForAnnotation inside UI.FieldGroup. Restriction: connected fields only allowed in sections that belong to a form (not header sections).
LANGUAGE: XML
CODE:
```
...
<Annotation Term="UI.FieldGroup" Qualifier="OrderData">
    <Record Type="UI.FieldGroupType">
        <PropertyValue Property="Data">
            <Collection>
                <Record Type="UI.DataFieldForAnnotation">
                    <PropertyValue Property="Target" AnnotationPath="@UI.ConnectedFields#ConnectedOrderDates"/>
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
...
<Annotation Term="SAP__UI.ConnectedFields" Qualifier="ConnectedOrderDates">
<Record>
    <PropertyValue Property="Label" String="Order / Delivery"/>
    <PropertyValue Property="Template" String="{OrderDate}/{DeliveryDate}"/>
    <PropertyValue Property="Data">
        <Record Type="Core.Dictionary">
            <PropertyValue Property="OrderDate">
                <Record Type="SAP__UI.DataField">
                    <PropertyValue Property="Value" Path="OrderDate"/>
                </Record>
            </PropertyValue>
            <PropertyValue Property="DeliveryDate">
                <Record Type="SAP__UI.DataField">
                    <PropertyValue Property="Value" Path="DeliveryDate"/>
                </Record>
            </PropertyValue>
        </Record>
    </PropertyValue>
</Record>
</Annotation>
...
```

LANGUAGE: ABAP CDS
CODE:
```
annotate view SALESORDER with {
  ...
  @UI.facet: [
    {
      id: 'idIdentification',
      type: #IDENTIFICATION_REFERENCE,
    },
    ...
  ]
  ...
  @UI: {
    identification: [
      { type: #AS_CONNECTED_FIELDS, valueQualifier: 'ConnectedOrderDates' }
    ],
    connectedFields: [
      {
        name: 'OrderDate',
        qualifier: 'ConnectedOrderDates',
        template: '{OrderDate}/{DeliveryDate}',
        groupLabel: 'Order / Delivery'
      }
    ]
  }
  OrderDate;

  @UI: {
    connectedFields: [
      { name: 'DeliveryDate', qualifier: 'ConnectedOrderDates' }
    ]
  }
  DeliveryDate;

  ...
}
```

LANGUAGE: CAP CDS
CODE:
```
annotate SalesOrderService.SalesOrder with @UI : {

  FieldGroup #OrderData : {
    Data : [
      { $Type : 'UI.DataFieldForAnnotation', Target: '@UI.ConnectedFields#ConnectedOrderDates' }
    ]
  },
  ...

  ConnectedFields #ConnectedOrderDates: {
    $Type   : 'UI.ConnectedFieldsType',
    Label   : 'Order / Delivery',
    Template: '{OrderDate}/{DeliveryDate}',
    Data    : {
      $Type        : 'Core.Dictionary',
      OrderDate    : { $Type : 'UI.DataField', Value : OrderDate },
      DeliveryDate : { $Type : 'UI.DataField', Value : DeliveryDate }
    }
  },
  ...
}
```

STEP: 7 — Show field labels inside table FieldGroup columns (OData V4)
DESCRIPTION: To display labels for fields inside a table column where a FieldGroup is used, add controlConfiguration in manifest.json using the LineItem key (column key). Set showDataFieldsLabel to true.
LANGUAGE: JSON
CODE:
```
"controlConfiguration": {
   "@com.sap.vocabularies.UI.v1.LineItem": {
      columns: {
         "DataFieldForAnnotation::FieldGroup::myFieldGroup": {
            "showDataFieldsLabel": true
         }
      }
   }
}
```
NOTE: Use the appropriate column key for your LineItem column (see "Finding the Right Key for the Anchor").

STEP: 8 — Merge a single TextArea label with section/subsection title (manifest.json)
DESCRIPTION: When a FieldGroup contains only one UI.MultiLineText field and no other controls, hide the TextArea label and show only the section title by setting useSingleTextAreaFieldAsNotes = true at the section level in manifest.json. Ensure the text area still has an accessible label; mandatory text areas will always show labels in edit mode.
LANGUAGE: JSON
CODE:
```
"sap.ui5": {
        "routing": {
            "targets": {
                "SalesOrderManageObjectPage": {
                    "options": {
                        "settings": {
                            "content": {
                                "body": {
                                    "sections": {
                                        "ReferenceFacet1": {
                                            "useSingleTextAreaFieldAsNotes": true
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
```

STEP: 9 — Checkbox groups inside a FieldGroup (XML, ABAP CDS, CAP CDS) and horizontal layout
DESCRIPTION: Group multiple boolean (checkbox) properties under one FieldGroup by defining an inner FieldGroup qualifier containing DataFields (Boolean). Restrictions: only Boolean properties allowed inside checkbox group; not supported in header forms, filter bars, or tables; dynamic instantiation not supported; must define FieldControl for Boolean properties in behavior/metadata. Use manifest horizontalLayout to align checkboxes horizontally.
LANGUAGE: XML
CODE:
```
<Annotation Term="UI.FieldGroup" Qualifier="GeneralInformation">
    <Record Type="UI.FieldGroupType">
        <PropertyValue Property="Label" String="Line item data"/>
        <PropertyValue Property="Data">
            <Collection>
                <Record Type="UI.DataFieldForAnnotation">
                    <PropertyValue Property="Target" AnnotationPath="@UI.FieldGroup#CheckBoxGroup"/>
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
<Annotation Term="UI.FieldGroup" Qualifier="CheckBoxGroup">
    <Record Type="UI.FieldGroupType">
        <PropertyValue Property="Label" String="Standard CheckBoxGroup"/>
        <PropertyValue Property="Data">
            <Collection>
                <Record Type="UI.DataField">
                    <PropertyValue Property="Value" Path="Boolean1"/>
                    <PropertyValue Property="Label" String="Checkbox One"/>
                </Record>
                <Record Type="UI.DataField">
                    <PropertyValue Property="Value" Path="Boolean2"/>
                    <PropertyValue Property="Label" String="Checkbox Two"/>
                </Record>
                <Record Type="UI.DataField">
                    <PropertyValue Property="Value" Path="Boolean3"/>
                    <PropertyValue Property="Label" String="Checkbox Three"/>
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>

<Annotations Target="sap.fe.core.FieldGroup.Products/Boolean1">
    <Annotation Term="Common.FieldControl" Int="7"/>
</Annotations>
<Annotations Target="sap.fe.core.FieldGroup.Products/Boolean3">
    <Annotation Term="Common.FieldControl">
        <If>
                <Path>Boolean2</Path>
                <Int>0</Int>
                <Int>3</Int>
        </If>
    </Annotation>
</Annotations>
```

LANGUAGE: ABAP CDS
CODE:
```
Define the following in the metadata extension of the data definition containing the Boolean fields:
...
@UI: {
    fieldGroup: [
        { qualifier: 'GeneralInformation', type: #AS_FIELDGROUP, valueQualifier: 'CheckBoxGroup', position: 10, label: 'CheckBox Group Label' },
        { qualifier: 'CheckBoxGroup', position: 10, label: 'Checkbox One' }
    ]
}
Boolean1;
    @UI: {
        fieldGroup: [
            { qualifier: 'CheckBoxGroup', position: 20, label: 'Checkbox Two'  }
        ]
    }
Boolean2;
    @UI: {
        fieldGroup: [
            { qualifier: 'CheckBoxGroup', position: 30, label: 'Checkbox Three'  }
        ]
    }
Boolean3;
...
```

LANGUAGE: CAP CDS
CODE:
```
...
Boolean1            : Boolean @Common.FieldControl: #Mandatory;
Boolean2            : Boolean;
Boolean3            : Boolean @Common.FieldControl: (Boolean2 ? 0 : 3);
// FieldControl can also be set as path based reference to property or expression binding
...
FieldGroup #CheckBoxGroup: {
    $Type: 'UI.FieldGroupType',
    Label: 'CheckBox Group Label',
    Data : [
        {
            $Type: 'UI.DataField',
            Value: Boolean1,
            Label: 'Checkbox One'
        },
        {
            $Type: 'UI.DataField',
            Value: Boolean2,
            Label: 'Checkbox Two'
        },
        {
            $Type: 'UI.DataField',
            Value: Boolean3, 
            Label: 'Checkbox Three'
        }
    ]
},
...
FieldGroup #GeneralInformation: {
    Label: 'Line item data',
	Data : [
    {
        $Type : 'UI.DataFieldForAnnotation',
        Target: '@UI.FieldGroup#CheckBoxGroup'
    }
    ]
}
```

LANGUAGE: JSON
CODE:
```
"options": {
    "settings": {
         "entitySet": "Products",
         "content": {
             "body": {
                "sections": {
                     "@com.sap.vocabularies.UI.v1.FieldGroup#CheckBoxGroups": {
                         "subSections": {
                              "@com.sap.vocabularies.UI.v1.FieldGroup#CheckBoxGroupH1": {
                                  "horizontalLayout": true
            }
         }
        }
       }
       }
    }
  }
}
```

STEP: 10 — Navigation and limitations for semantically connected fields
DESCRIPTION: To make connected fields navigable render them as links — you must define navigation on the individual data fields inside ConnectedFields. Allowed navigation types: DataFieldWithURL, SemanticObject on the data field, DataFieldWithIntentBasedNavigation (Action optional), DataFieldWithNavigationPath. Restriction: Connected fields can only be used in form sections (not header). Also: UI.FieldGroup is not supported in grid, tree and analytical tables; table personalization supports filtering/sorting/grouping only on the individual properties of the same entity type contained in UI.FieldGroup's Data collection.

RELATED LINKS (for UI design and form guidance)
DESCRIPTION: Use SAP Fiori design system guidelines for forms and object page forms:
LANGUAGE: URL
CODE:
https://experience.sap.com/fiori-design-web/form/
https://experience.sap.com/fiori-design-web/object-page/#forms
--------------------------------

**TITLE**: Handling Inconsistent Input in SAP Fiori Elements (Draft & Non-Draft Apps)

**INTRODUCTION**: This guide explains how to detect and handle technical input inconsistencies (e.g., entering characters into numeric fields or exceeding field length) so the system prevents saving/activating drafts or persisting objects until those errors are resolved. It covers behavior for draft-enabled apps, subobject Apply actions, and non-draft OData V2 apps, and provides actionable code examples for integrating with SAPUI5 message management and save logic.

**TAGS**: fiori-elements-framework, sapui5, validation, draft, odata-v2, message-manager, save-blocking

**STEP**: 1 — Detect technical inconsistencies via UI5 MessageManager

**DESCRIPTION**: Technical inconsistencies (parse/format/validation errors thrown by bindings or UI controls) are surfaced through the SAPUI5 MessageManager. Register the view with the MessageManager and query the message model to determine whether any Error messages exist. Use this check to control save/activate/Apply actions.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// In your controller (before save/activate/apply action)
var oMessageManager = sap.ui.getCore().getMessageManager();
// Ensure messages for controls in this view are registered
oMessageManager.registerObject(this.getView(), true);

// Retrieve flat array of messages
var oMessageModel = oMessageManager.getMessageModel();
var aMessages = oMessageModel.getData() || [];

// Check if any Error-type messages exist (technical inconsistencies)
var bHasErrors = aMessages.some(function (m) {
  return m.type === sap.ui.core.MessageType.Error;
});

// bHasErrors == true means there are technical errors that must be resolved
```

**STEP**: 2 — Block save/activate/Apply until technical errors are resolved

**DESCRIPTION**: Prevent draft activation, draft save, object save, or subobject Apply when technical Error messages exist. Inform users with a focused message instructing them to correct the inconsistent inputs. Use a modal or message toast with clear text: "Resolve technical errors before saving/activating/applying."

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Example: intercept Save/Activate/Apply button press
onSavePress: function () {
  var oMessageManager = sap.ui.getCore().getMessageManager();
  var aMessages = oMessageManager.getMessageModel().getData() || [];
  var bHasErrors = aMessages.some(function (m) {
    return m.type === sap.ui.core.MessageType.Error;
  });

  if (bHasErrors) {
    // Inform user and prevent save
    sap.m.MessageBox.error("Resolve technical errors before saving.");
    return; // block actual save/activate/apply flow
  }

  // Proceed with normal save/activate/apply logic
  this._proceedWithSave();
}
```

**STEP**: 3 — Draft-enabled apps: ensure UI equals draft before activation or when Apply is used on subobjects

**DESCRIPTION**: In draft-enabled apps, the system requires that UI content and the stored draft are identical before activating or saving the draft. The same requirement applies when using the Apply button on a subobject page — the system must align UI and draft content. Use the MessageManager check to prevent activation or Apply while technical inconsistencies exist. After the user resolves all errors, allow activation/Apply to continue.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Hook to "Activate Draft" or "Apply" events
onActivateDraft: function () {
  var oMM = sap.ui.getCore().getMessageManager();
  var aMsgs = oMM.getMessageModel().getData() || [];
  var bHasErrors = aMsgs.some(function (m) {
    return m.type === sap.ui.core.MessageType.Error;
  });

  if (bHasErrors) {
    sap.m.MessageBox.error("Correct the errors in the UI so the draft and UI match, then activate.");
    return;
  }

  // If no technical errors, proceed to activate the draft
  this._activateDraft();
}
```

**STEP**: 4 — Distinguish technical inconsistencies from logical/business validation

**DESCRIPTION**: The system message displayed to block save/activation lists only technical inconsistencies (parse/format/field-length issues). Logical or business validation errors (for example, entering a non-existent business partner) are reported as state messages during actual save operations and should be handled separately (e.g., server-side validation error handling and state message display).

**LANGUAGE**: JSON / JavaScript (example handling strategy)

**CODE**:
```javascript
// Example: After server save attempt, handle business/state messages separately
this.getModel().submitChanges({
  success: function (oResponse) {
    // handle success
  },
  error: function (oError) {
    // parse server response for business/state messages and surface as state messages
    // Do NOT treat these as the "technical inconsistencies" that block client-side save pre-checks
    this._showStateMessagesFromServer(oError);
  }.bind(this)
});
```

**STEP**: 5 — Non-draft OData V2 apps: block object save until technical errors are fixed

**DESCRIPTION**: For non-draft OData V2 apps, apply the same client-side pre-save checks. Before calling the OData model's create/update/submit operation, check the MessageManager for Error-type messages and block the call until users fix the input. After resolving errors, proceed with the save call.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Example pre-check before creating/updating an entity in OData V2 app
onSaveEntity: function () {
  var oMM = sap.ui.getCore().getMessageManager();
  var aMsgs = oMM.getMessageModel().getData() || [];
  var bHasErrors = aMsgs.some(function (m) {
    return m.type === sap.ui.core.MessageType.Error;
  });

  if (bHasErrors) {
    sap.m.MessageBox.error("Resolve the input errors before saving the object.");
    return;
  }

  // No technical errors => proceed to call OData create/update
  this.getModel().create("/EntitySet", oPayload, {
    success: function () { /* ... */ },
    error: function () { /* ... */ }
  });
}
```
--------------------------------

**TITLE**: Handling the preferredMode Parameter (SAP Fiori Elements, OData V2 & V4)

**INTRODUCTION**: Configure how an object page is launched (display, edit, create, or call an unbound action) using the preferredMode parameter. This guide provides the exact URL, manifest, metadata, and Component.js examples required to implement startup behavior and to pass prefill parameters for both OData V2 and OData V4 SAP Fiori Elements apps.

**TAGS**: fiori-elements-framework, preferredMode, manifest.json, OData V2, OData V4, create, edit, callUnboundAction, inboundParameters, NewAction

STEP: 1 — Quick reference: supported preferredMode values and behaviors

DESCRIPTION: Reference of allowed preferredMode values and their high-level behavior. Use these when building URLs, setting startup parameters, or configuring manifest defaults.

LANGUAGE: JSON

CODE:
```JSON
{
  "preferredMode values": [
    "display",                 // open object page in display (unless draft exists → edit)
    "edit",                    // open object page in edit mode, create draft if none
    "create",                  // open Create Object Page (POST or NewAction)
    "callUnboundAction",       // trigger specified unbound action on startup
    "createWith:<action>",     // (OData V4) call specified action and open create
    "autoCreateWith:<action>"  // (OData V4) same as createWith but auto-skip dialog if all params resolved
  ],
  "note": "If target app has no object page or external navigation overrides internal navigation, the list report is shown (no double navigation)."
}
```

STEP: 2 — Launching Create Mode via URL (basic examples)

DESCRIPTION: Use preferredMode=create in external navigation URLs to open the object page directly in create mode. You can append field=value pairs to prefill values.

LANGUAGE: text

CODE:
```text
#SalesOrder-manage?preferredMode=create
#Defect-displayWorklist?preferredMode=create&DefectCategory=01
```

STEP: 3 — OData V2: Allow URL parameters for create (manifest inboundParameters useForCreate)

DESCRIPTION: For POST-based create in OData V2, the target app must declare which incoming URL parameters are allowed for creation in manifest.json. Only parameters marked useForCreate are sent to the backend during the POST create call.

LANGUAGE: JSON

CODE:
```JSON
"sap.ui.generic.app": { 
   "_version": "1.2.0",
   "settings": {
      ... 
      "inboundParameters": {
         "DefectCategory": {
            "useForCreate": true
         }
      }
   },
   "pages": [
      {
         ...
```

STEP: 4 — OData V2: callUnboundAction — manifest configuration, metadata, and example URL

DESCRIPTION: Configure callUnboundAction to automatically call an unbound function import at app startup. In manifest.json map a logical action name to backend function imports using useForActionResolution. Define the function imports in service metadata (metadata.xml). The source app starts navigation with preferredMode=callUnboundAction and passes myActionName plus inbound parameter values in the URL.

LANGUAGE: JSON

CODE:
```JSON
"sap.ui.generic.app": { 
   "_version": "1.2.0",
   "settings": {
      ... 
      "inboundParameters": {
         "myActionName": {
            "useForActionResolution": {
              "myCreateWithNameAndStreet": "myCreate1",
              "myCreateWithoutNameAndStreet": "myCreate3",	
            }
         }
```

LANGUAGE: XML

CODE:
```XML
<FunctionImport Name="myCreate1" ReturnType="cds_zvd_drafts_customer_sd.CustomerType" EntitySet="Customer" m:HttpMethod="POST">
  <Parameter Name="ResultIsActiveEntity" Type="Edm.Boolean" Mode="In" Nullable="true" sap:label="Result is active"/>
  <Parameter Name="Name" Type="Edm.String" Mode="In" MaxLength="40" Nullable="true" sap:label="Customer Name"/>
  <Parameter Name="Street" Type="Edm.String" Mode="In" MaxLength="40" Nullable="true" sap:label="Customer Street"/>
</FunctionImport>
<FunctionImport Name="myCreate3" ReturnType="cds_zvd_drafts_customer_sd.CustomerType" EntitySet="Customer" m:HttpMethod="POST">
  <Parameter Name="ResultIsActiveEntity" Type="Edm.Boolean" Mode="In" Nullable="true" sap:label="Result is active"/>
</FunctionImport>
```

LANGUAGE: text

CODE:
```text
#NewActionTest-NewActionTest?preferredMode=callUnboundAction&myActionName=myCreate1&ResultIsActiveEntity=true&Name=myName
```

STEP: 5 — OData V4: Configure createWith and autoCreateWith in manifest

DESCRIPTION: For OData V4 you can set preferredMode defaults that call a specified action when the app is opened in create mode. Use createWith:<action> to always open the action dialog; use autoCreateWith:<action> to auto-skip the dialog if the navigation context supplies values for all action parameters.

LANGUAGE: JSON

CODE:
```JSON
"preferredMode": {
     "defaultValue": {
          "value": "createWith:com.c_salesordermanage_sd.CreateWithSalesOrderType",
          "format": "value"
     }
},
```

LANGUAGE: JSON

CODE:
```JSON
"preferredMode": {
     "defaultValue": {
          "value": "autoCreateWith:com.c_salesordermanage_sd.CreateWithSalesOrderType",
          "format": "value"
     }
},
```

STEP: 6 — OData V4: Rules for create parameter prefilling (POST vs NewAction)

DESCRIPTION: Behavior differs by creation method:
- POST-based create: Only URL parameters listed under inboundParameters with useForCreate=true in manifest.json are included in the backend create call.
- NewAction (NewAction()/function import) based create: Navigation context values are mapped to action parameter dialog fields by exact technical name match; manifest useForCreate is ignored. Hidden action parameters that match are still populated.

LANGUAGE: JSON

CODE:
```JSON
"options": {
    "settings": {
        "contextPath": "/SalesOrderManage", // Object Page
        ...
        "inboundParameters": {
             "SalesOrderType": {
                "useForCreate": true
             }
        }
    }
}
```

EXAMPLE (behavior):
```text
Incoming URL:
#SalesOrder-manage?preferredMode=create&SalesOrderType=OR&Supplier=ABC

Result for POST-based create:
Only SalesOrderType=OR is passed to backend (Supplier ignored unless configured useForCreate=true).

Result for NewAction-based create:
Matching action parameter fields receive values from the navigation context by exact name match; useForCreate is not used.
```

STEP: 7 — preferredMode=edit: configure via startup parameters (Component.js) or URL

DESCRIPTION: preferredMode=edit opens the object page directly in edit mode (creates a draft if none exists). You can configure it as a startup parameter in Component.js or pass it directly in the URL with the object key.

LANGUAGE: JavaScript

CODE:
```JavaScript
sap.ui.define(["sap/fe/core/AppComponent"], function(AppComponent) 
    "use strict";                                                  
 
    return AppComponent.extend("FormTemplate.Component", {         
        metadata: {                                                
            manifest: "json"                                       
        },                                                         
        getStartupParameters: function() {                         
            return Promise.resolve({                               
                preferredMode: ["edit"],
                ID: "1"                          
            });                                                    
        }                                                          
    });                                                            
);
```

LANGUAGE: text

CODE:
```text
#Manage-items?preferredMode=edit&ID=1
```

STEP: 8 — Implementation checklist (practical steps for code generation)

DESCRIPTION: Actionable checklist for implementing preferredMode behavior in your app and caller:
- Decide which preferredMode value is needed (display/edit/create/callUnboundAction/createWith/autoCreateWith).
- If using POST-based create, add inboundParameters entries with useForCreate=true in target app manifest.json for every URL parameter you want passed to backend.
- If using callUnboundAction (V2) or NewAction (V4), map logical action names in manifest to backend function imports and add corresponding FunctionImport definitions in metadata.xml.
- For V4 createWith/autoCreateWith, set preferredMode.defaultValue.value in manifest.json to "createWith:<action>" or "autoCreateWith:<action>".
- For startup parameter configuration, implement getStartupParameters in Component.js or configure startup params in FLP.
- Test external navigation URLs in the format:
  - #EntitySet-manage?preferredMode=create&Field=Value
  - #EntitySet-manage?preferredMode=callUnboundAction&myActionName=ActionLogicalName&Param=Value
  - #EntitySet-manage?preferredMode=edit&ID=<key>

CODE:
```text
// No additional code. Follow the manifest/metadata/URL examples in previous steps.
```
--------------------------------

**TITLE**: Handling Semantic Key Fields in SAP Fiori Elements

**INTRODUCTION**: How to declare semantic key fields for entity types and how SAP Fiori elements renders those fields in list report tables (responsive and grid/other tables). Includes XML, ABAP CDS, and CAP CDS annotation examples and UI behavior rules for OData V2 and V4.

**TAGS**: fiori-elements-framework, semantic-key, annotations, CDS, CAP, OData, UI5, list-report, responsive-table

**STEP**: 1 — Add SemanticKey using XML Annotation

**DESCRIPTION**: Add a Common.SemanticKey annotation to your service metadata or annotation XML file. Set Target to the entity type and include the property (DataField) name(s) used as the semantic key. This works for default DataField only.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations xmlns="http://docs.oasis-open.org/odata/ns/edm" Target="STTA_PROD_MAN.STTA_C_MP_ProductType">
    <Annotation Term="Common.SemanticKey">
        <Collection>
            <PropertyPath>ProductForEdit</PropertyPath>
        </Collection>
    </Annotation>
</Annotations>
```

**STEP**: 2 — Add SemanticKey in ABAP CDS

**DESCRIPTION**: In ABAP CDS, declare the semanticKey in the @ObjectModel annotation for the CDS view that represents your entity. Use the property name(s) as strings in the semanticKey array. This annotation is consumed by Fiori elements to identify the semantic key field.

**LANGUAGE**: ABAP CDS

**CODE**:
```
@ObjectModel: {
  semanticKey: [ 'ProductForEdit' ]
}

define view C_MP_PRODUCT {

}
```

**STEP**: 3 — Add SemanticKey in CAP CDS

**DESCRIPTION**: For SAP Cloud Application Programming Model (CAP) CDS, annotate the entity type with Common.SemanticKey and list the semantic key property name(s). Place this annotation in your CDS module where the entity is defined or in a separate annotation file.

**LANGUAGE**: CAP CDS

**CODE**:
```
annotate STTA_PROD_MAN.STTA_C_MP_ProductType @(
  Common.SemanticKey : [ ProductForEdit ]
);
```

**STEP**: 4 — Availability Note

**DESCRIPTION**: Important constraint: The semantic key setting is only available for the default DataField. Ensure the field you annotate is the default DataField used in list report tables.

**LANGUAGE**: Text

**CODE**:
```
Note: This setting is only available for the default `DataField`.
```

**STEP**: 5 — Responsive Table Rendering Logic

**DESCRIPTION**: Fiori elements renders semantic key fields in responsive tables using sap.m.ObjectIdentifier. Rendering rules (implement these or expect default behavior in list reports):

- If text and ID are available: first line is bold text; second line is ID.
- If no text available: first line is bold ID; no second line.
- If a semantic object/link is associated with the field, ObjectIdentifier is not used — the ID is displayed as a link instead.

Include images in documentation if helpful: images/Semantic_Key_Fields_in_a_Table_Text_and_ID_d58b9d9.png

**LANGUAGE**: Text

**CODE**:
```
Responsive tables:
- Use ObjectIdentifier.
- Bold first line: text (if present), otherwise ID.
- Second line: ID only when text is present.
- If the field has a semantic object/link, do not render ObjectIdentifier; render the ID as a link.
```

**STEP**: 6 — Grid/Other Table Rendering and TextArrangement Differences (OData V2 vs V4)

**DESCRIPTION**: For non-responsive (grid or other) tables, Fiori elements renders a label and displays the entire content in bold. It also reads associated text and arranges ID/text according to TextArrangement and OData version:

- OData V2 (no TextArrangement configured): display ID with text in parenthesis if text exists; if no text, display only ID.
- OData V4 (no TextArrangement configured): display only the text if available; if no text, display only ID.
- When TextArrangement is configured (e.g., TextFirst), Fiori elements combines ID and text per that arrangement.

Include example image for TextFirst arrangement: images/Semantic_Key_Fields_in_a_Table_TextFirst_40b9a46.png

**LANGUAGE**: Text

**CODE**:
```
Grid/other tables:
- Use a bold label for the semantic key content.
- Combine ID and associated text based on TextArrangement config and OData version.

Behavior when TextArrangement is not configured:
- OData V2: ID (text) if text exists; else ID only.
- OData V4: text only if exists; else ID only.

If TextArrangement is configured (e.g., TextFirst), render ID and text per that arrangement.
```

**STEP**: 7 — Linking Behavior in Non-Responsive Tables

**DESCRIPTION**: Linking behavior differs between table types:

- Responsive tables: when a semantic object is linked, show the ID as a hyperlink (ObjectIdentifier is not used).
- Other tables (grid/list): when linked, display the entire content (ID and text) as a single link; wrapping is not applied.

**LANGUAGE**: Text

**CODE**:
```
Linking behavior:
- Responsive: ID displayed as a link (no ObjectIdentifier).
- Other tables: ID + text displayed together as one link, with no wrapping.
```

**STEP**: 8 — Applicability to Object Pages and Subobject Pages

**DESCRIPTION**: The same semantic key rendering logic used in list reports applies to object pages and subobject pages within Fiori elements for OData V4. Ensure your entity annotations are available to those pages.

**LANGUAGE**: Text

**CODE**:
```
Applicability:
- Semantic key rendering rules apply to list reports, object pages, and subobject pages (OData V4).
```

**STEP**: 9 — Related Settings and Further Configuration

**DESCRIPTION**: For additional table configuration options (annotations and manifest.json settings), consult the List Report Tables settings documentation.

**LANGUAGE**: Text

**CODE**:
```
See: Settings for List Report Tables
Link: settings-for-list-report-tables-4c2d17a.md
```
--------------------------------

**TITLE**: Harvey Micro Chart Annotations (UI.Chart and UI.DataPoint)

**INTRODUCTION**: Use the Harvey (HarveyBallMicroChart) micro chart to display a single measure value against a maximum value. This guide provides required annotations and exact code examples (XML, ABAP CDS, CAP CDS). Follow the examples to implement the chart in Fiori Elements and ensure semantic coloring via Criticality if needed.

**TAGS**: fiori-elements-framework, harvey, microchart, UI.Chart, UI.DataPoint, annotations, CDS, XML, ABAP, CAP

**STEP**: 1 — UI.Chart (XML Annotation)

**DESCRIPTION**: Add a UI.Chart annotation to the metadata XML annotation file. The UI.Chart Title property maps to the chart title; Description maps to the subtitle. Ensure ChartType is set to "Pie", list your measure(s) under Measures, and set MeasureAttributes with DataPoint referencing the UI.DataPoint annotation (AnnotationPath="@UI.DataPoint").

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.Chart" Qualifier="SpecificationWidthHarveyChart">
    <Record>
        <PropertyValue EnumMember="UI.ChartType/Pie" Property="ChartType" />
        <PropertyValue Property="Title" String="Sold to Produced Harvey Chart" />
        <PropertyValue Property="Description" String="Harvey Chart" />
        <PropertyValue Property="Measures">
            <Collection>
                <PropertyPath>Sold</PropertyPath>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="MeasureAttributes">
            <Collection>
                <Record Type="UI.ChartMeasureAttributeType">
                    <PropertyValue Property="DataPoint" AnnotationPath="@UI.DataPoint" />
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

**STEP**: 2 — UI.Chart (ABAP CDS Annotation)

**DESCRIPTION**: Add the UI.Chart annotation to your ABAP CDS view. Use qualifier if needed. Ensure chartType is #PIE, measures list contains the measure property, and measureAttributes links the measure to a DataPoint (asDataPoint: true).

**LANGUAGE**: ABAP CDS

**CODE**:
```
@UI.Chart: [
  {
    title: 'Sold to Produced Harvey Chart',
    description: 'Harvey Chart',
    chartType: #PIE,
    measures: [
      'Sold'
    ],
    measureAttributes: [
      {
        measure: 'Sold',
        role: #AXIS_1,
        asDataPoint: true
      }
    ],
    qualifier: 'SpecificationWidthHarveyChart'
  }
]
annotate view STTA_C_MP_PRODUCT with {

}
```

**STEP**: 3 — UI.Chart (CAP CDS Annotation)

**DESCRIPTION**: For CAP model files, add the UI.Chart annotation syntax below. Ensure ChartType is #Pie, include Measures, and set MeasureAttributes with UI.ChartMeasureAttributeType and DataPoint referencing @UI.DataPoint.

**LANGUAGE**: CAP CDS

**CODE**:
```
UI.Chart #SpecificationWidthHarveyChart : {
    ChartType : #Pie,
    Title : 'Sold to Produced Harvey Chart',
    Description : 'Harvey Chart',
    Measures : [
        Sold
    ],
    MeasureAttributes : [
        {
            $Type : 'UI.ChartMeasureAttributeType',
            DataPoint : '@UI.DataPoint'
        }
    ]
}
```

**STEP**: 4 — UI.DataPoint (XML Annotation)

**DESCRIPTION**: Define the UI.DataPoint annotation in the annotation XML. Map Value to the measure, MaximumValue to the maximum reference, and Criticality to the property used for semantic coloring (optional). Include this DataPoint annotation where referenced by UI.Chart.MeasureAttributes.DataPoint.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.DataPoint">
    <Record>
        <PropertyValue Path="Sold" Property="Value" />
        <PropertyValue Path="Produced" Property="MaximumValue" />
        <PropertyValue Path="criticalityValue" Property="Criticality" />
    </Record>
</Annotation>
```

**STEP**: 5 — UI.DataPoint (ABAP CDS Annotation)

**DESCRIPTION**: In ABAP CDS, annotate the DataPoint details on the measure field or as a separate annotation block. Use criticality and/or maximumValue properties as shown.

**LANGUAGE**: ABAP CDS

**CODE**:
```
@UI.dataPoint: {
  criticality: 'criticalityValue',
  maximumValue: 20
}
Sold;
```

**STEP**: 6 — UI.DataPoint (CAP CDS Annotation)

**DESCRIPTION**: CAP CDS DataPoint example. Map Value, MaximumValue and Criticality to model properties. Use this DataPoint reference from UI.Chart.MeasureAttributes.DataPoint.

**LANGUAGE**: CAP CDS

**CODE**:
```
UI.DataPoint : {
    Value : Sold,
    MaximumValue : Produced,
    Criticality : criticalityValue
}
```

**STEP**: 7 — Mandatory Annotations and Semantic Coloring

**DESCRIPTION**: Ensure the following mandatory annotations and rules are applied for the Harvey micro chart to render correctly. For semantic coloring, only Criticality is supported.

**LANGUAGE**: text

**CODE**:
```
Mandatory annotations and rules:
- UI.Chart → ChartType: "Pie" (EnumMember UI.ChartType/Pie or #PIE / #Pie)
- UI.Chart → Measures: include the measure property (e.g., Sold)
- UI.Chart → MeasureAttributes → DataPoint: must reference the UI.DataPoint annotation (e.g., AnnotationPath="@UI.DataPoint" or asDataPoint in ABAP)
- UI.DataPoint → MaximumValue: must be provided (e.g., Produced)
- For semantic coloring (optional): UI.DataPoint → Criticality must be used (only Criticality is supported for coloring)

Mapping guidance:
- Title maps from UI.Chart.Title
- Subtitle maps from UI.Chart.Description
- Value (UI.DataPoint.Value) = measure property (e.g., Sold)
- MaximumValue (UI.DataPoint.MaximumValue) = maximum reference (e.g., Produced)
- Criticality (UI.DataPoint.Criticality) = property providing semantic status (e.g., criticalityValue)
```
--------------------------------

**TITLE**: Header Facets — defining and configuring object page header facets in SAP Fiori Elements

**INTRODUCTION**: Use UI.HeaderFacets to expose header facets (reference facets) in an Object Page header to show contact data, ratings, datapoints, and other header information. This document provides the exact annotation/code patterns for XML, ABAP CDS, and CAP CDS, explains desktop vs mobile behavior, shows how to enable the carousel on desktop (OData V2), and describes the stashing behavior (OData V4).

**TAGS**: fiori-elements-framework, UI.HeaderFacets, header-facets, object-page, manifest.json, showHeaderAsCarouselOnDesktop, stashing, OData V2, OData V4, CAP, ABAP, XML, CDS

STEP: 1 — UI.HeaderFacets (XML annotation)

DESCRIPTION: Use the UI.HeaderFacets annotation to define a collection of UI.ReferenceFacet entries. Each UI.ReferenceFacet targets a data point (AnnotationPath) or a navigation target with an annotation qualifier. Use PropertyValue Property="Target" with AnnotationPath values to reference @UI.DataPoint qualifiers or navigation target paths.

LANGUAGE: XML

CODE:
```XML
<Annotation Term="UI.HeaderFacets">
    <Collection>
        ...
        <Record Type="UI.ReferenceFacet">
            <PropertyValue Property="Target" AnnotationPath="@UI.DataPoint#Price" />
        </Record>
        ...
        <Record Type="UI.ReferenceFacet">
            <PropertyValue Property="Target" AnnotationPath="to_StockAvailability/@UI.DataPoint#StockAvailability" />
        </Record>
        ...
    </Collection>
</Annotation>
```

STEP: 2 — UI.HeaderFacets (ABAP CDS annotation)

DESCRIPTION: Define header facets in ABAP CDS using @UI.Facet with entries that specify targetQualifier (qualifier of a datapoint), optional targetElement for navigation targets, type (#DATAPOINT_REFERENCE), and purpose (#HEADER).

LANGUAGE: ABAP

CODE:
```ABAP
@UI.Facet: [
    {
        targetQualifier: 'Price',
        type: #DATAPOINT_REFERENCE,
        purpose: #HEADER
    },
    {
        targetQualifier: 'StockAvailability',
        targetElement: 'TO_STOCKAVAILABILITY',
        type: #DATAPOINT_REFERENCE,
        purpose: #HEADER
    }
]Test;
```

STEP: 3 — UI.HeaderFacets (CAP CDS / CAP annotation)

DESCRIPTION: In CAP (service model annotation) annotate the entity/service to add UI.HeaderFacets. Use UI.ReferenceFacet entries with $Type = 'UI.ReferenceFacet' and Target referencing @UI.DataPoint qualifiers or navigation targets plus qualifier.

LANGUAGE: CDS

CODE:
```CDS
Annotate c_salesordermanage_sd.SalesOrderManage with @(
    UI : {
        HeaderFacets : [
            {
                $Type  : 'UI.ReferenceFacet',
                Label  : 'Price',
                ID     : 'Price',
                Target : '@UI.DataPoint#Price'
            },
            {
                $Type  : 'UI.ReferenceFacet',
                Label  : 'Stock Availability',
                ID     : 'StockAvailability',
                Target : 'to_StockAvailability@UI.DataPoint#StockAvailability'
            }
        ]
    }
)
```

STEP: 4 — Desktop vs Mobile behavior (visual/layout notes)

DESCRIPTION: Default rendering:
- Desktop: dynamic/static header with responsive layout (header facets in header area).
- Mobile: header container with horizontal layout and horizontal scrolling for header facets.
Preserve visuals in UI by testing on both device types. Images referenced in the original documentation:
- images/Header_Facet_Desktop_Version_b1c531e.png
- images/Header_Facets_Mobile_Version_8abec0d.png
- images/Desktop_Carousels_for_Header_Facet_6113e92.jpg

LANGUAGE: Text

CODE:
```Text
Desktop: dynamic/static header (responsive).
Mobile: header container with horizontal scroll for header facets.
Referenced images:
- images/Header_Facet_Desktop_Version_b1c531e.png
- images/Header_Facets_Mobile_Version_8abec0d.png
- images/Desktop_Carousels_for_Header_Facet_6113e92.jpg
```

STEP: 5 — Enable carousel header on desktop (OData V2) — manifest.json

DESCRIPTION: To render header facets as a carousel on desktops (instead of default dynamic/static header), set "showHeaderAsCarouselOnDesktop": true in each ObjectPage component's settings in manifest.json. Note: this setting must be applied at every component level where you want the carousel (top-level page component and nested page components).

LANGUAGE: JSON

CODE:
```JSON
"sap.ui.generic.app": {
    ...
    "pages": [
        {
            "entitySet": "STTA_C_MP_Product",
            "component": {
                "name": "sap.suite.ui.generic.template.ObjectPage",
                "settings": {
                    "showHeaderAsCarouselOnDesktop": true,
                    ...
                }
            },
            "pages": [
                {
                    "navigationProperty": "to_ProductText",
                    "entitySet": "STTA_C_MP_ProductText",
                    "component": {
                        "name": "sap.suite.ui.generic.template.ObjectPage",
                        "settings": {
                            "showHeaderAsCarouselOnDesktop": true,
                            ...
                        }
                    }
                }
            ]
        }
    ]
}
```

STEP: 6 — Stashing header facets (OData V4) — manifest.json & key-user adaptation

DESCRIPTION: In OData V4, header facets can be marked as stashed in manifest.json so they are not initially visible and are not loaded at application start. Key users can add stashed header facets at runtime using key user adaptation; once added they become visible to end users. For details see the Adapting the UI guide: adapting-the-ui-59bfd31.md.

LANGUAGE: Text

CODE:
```Text
Stashed header facets: define in manifest.json (stashed) => not loaded initially.
Key user adaptation can add these facets at runtime.
See: adapting-the-ui-59bfd31.md
```
--------------------------------

**TITLE**: Hiding UI Elements with the UI.Hidden Annotation (Fiori Elements)

**INTRODUCTION**: Practical, code-focused reference for using the UI.Hidden annotation to hide or show UI features on Fiori Elements object pages (header facets, sections, quick views, field groups, facets, and table columns). Includes XML OData annotations, ABAP CDS and CAP CDS examples and rules for conditional hiding.

**TAGS**: UI.Hidden, annotation, Fiori Elements, OData V4, XML Annotations, ABAP CDS, CAP CDS, object page, header facets, quick view, field group, line item

STEP: 1 — UI.Hidden: semantics and conditional usage
DESCRIPTION: Use the UI.Hidden annotation to hide or show annotated properties, facets, or wrapper elements. Default behavior: UI.Hidden without explicit Bool is treated as true (hidden). You can set Bool="false" to show, Bool="true" to hide, or use Path/edmJSON for conditional hiding. When using Path, the path must reference a Boolean property. For conditional expression trees use edmJSON (SAPUI5 expression binding is not supported). Conditional edmJSON expressions apply only to SAP Fiori elements for OData V4.
LANGUAGE: XML
CODE:
```xml
<!-- Default (hidden) -->
<Annotation Term="UI.Hidden"/>

<!-- Explicit not hidden -->
<Annotation Term="UI.Hidden" Bool="false"/>

<!-- Explicit hidden -->
<Annotation Term="UI.Hidden" Bool="true"/>

<!-- Conditional based on a Boolean property -->
<Annotation Term="UI.Hidden" Path="edit_mode"/>

<!-- Conditional using expression (edmJSON) — OData V4 only -->
<Annotation Term="UI.Hidden"> 
    <If>
        <Or>
            <Eq>
                <Path>displayCriteria</Path>
                <String>value_A</String>
            </Eq>
            <Eq>
                <Path>displayCriteria</Path>
                <String>value_B</String>
            </Eq>
        </Or>
    </If>
</Annotation>
```

STEP: 2 — Hide Header Facets on Object Page (XML, ABAP CDS, CAP CDS)
DESCRIPTION: Hide specific header facets or conditionally hide them. Use UI.HeaderFacets in XML annotations, @UI.Facet in ABAP CDS, or HeaderFacets in CAP CDS. Note: You cannot hide entire UI.FieldGroup or UI.Identification by hiding the group—hide all underlying DataField records or hide the wrapper ReferenceFacet/DataFieldForAnnotation.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.HeaderFacets">
    <Collection>
        <Record Type="UI.ReferenceFacet">
            <PropertyValue Property="Label" String="Net Amount" />
            <PropertyValue Property="ID" String="NetValueDataHeader" />
            <PropertyValue Property="Target" AnnotationPath="@UI.DataPoint#NetValue" />
            <Annotation Term="UI.Hidden" Bool="true" />
        </Record>
        <Record Type="UI.ReferenceFacet">
            <PropertyValue Property="Label" String="Contact Info" />
            <PropertyValue Property="ID" String="ContactHeader" />
            <PropertyValue Property="Target" AnnotationPath="_SoldToParty/@Communication.Contact" />
             <Annotation Term="UI.Hidden" />
        </Record>
        <Record Type="UI.ReferenceFacet">
            <PropertyValue Property="Label" String="Credit Limit Consumption" />
            <PropertyValue Property="ID" String="CreditLimitChartHeader" />
            <PropertyValue Property="Target" AnnotationPath="_CreditLimitDetails/@UI.Chart#CreditLimitChart" />
             <Annotation Term="UI.Hidden" Path="editActionIsEnabled" />
        </Record>                       
    </Collection>
</Annotation>
```

LANGUAGE: ABAP CDS
CODE:
```abap
@UI.Facet: [
  {
    hidden: true,
    label: 'Net Amount',
    id: 'NetValueDataHeader',
    targetQualifier: 'NetValue',
    type: #DATAPOINT_REFERENCE,
    purpose: #HEADER
  },
  {
    hidden: true,
    label: 'Contact Info',
    id: 'ContactHeader',
    targetElement: '_SOLDTOPARTY',
    type: #CONTACT_REFERENCE,
    purpose: #HEADER
  },
  {
    hidden: #('editActionIsEnabled'),
    label: 'Credit Limit Consumption',
    id: 'CreditLimitChartHeader',
    targetQualifier: 'CreditLimitChart',
    targetElement: '_CREDITLIMITDETAILS',
    type: #CHART_REFERENCE,
    purpose: #HEADER
  }
]
Test;
```

LANGUAGE: CAP CDS
CODE:
```cds
HeaderFacets                                    : [
    {
        $Type             : 'UI.ReferenceFacet',
        Label             : 'Net Amount',
        ID                : 'NetValueDataHeader',
        Target            : '@UI.DataPoint#NetValue',
        ![@UI.Hidden] : true   
     },
    {
        $Type             : 'UI.ReferenceFacet',
        Label             : Contact Info',
        ID                : 'ContactHeader',
        Target            : '_SoldToParty/@Communication.Contact',
        ![@UI.Hidden] : true 
    },
    {
        $Type             : 'UI.ReferenceFacet',
        Label             : 'Credit Limit Consumption',
        ID                : 'CreditLimitChartHeader',
        Target            : '_CreditLimitDetails/@UI.Chart#CreditLimitChart',
        ![@UI.Hidden] : editActionIsEnabled
    }
    ]
```

STEP: 3 — Hide Sections and Subsections on Object Page
DESCRIPTION: To hide an entire section, annotate the CollectionFacet or child facet with UI.Hidden. To hide a subsection, hide the content within it (e.g., set UI.Hidden on the child facet). Examples for XML, ABAP CDS, CAP CDS below.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.Facets">
    <Collection>
        <Record Type="UI.CollectionFacet">
            <PropertyValue Property="Label" String="Header" />
            <PropertyValue Property="ID" String="HeaderInfo" />
            <PropertyValue Property="Facets">
                <Collection>
                    <Record Type="UI.CollectionFacet">
                        <PropertyValue Property="ID" String="GeneralInfo" />
                        <PropertyValue Property="Label" String="General Information" />
                        <PropertyValue Property="Facets">
                            <Collection>
                                ……..
                               …….
                            </Collection>
                        </PropertyValue>
                       <Annotation Term="UI.Hidden" Bool="true" />
                   </Record>
               </Collection>
           </PropertyValue>
       </Record>
    </Collection>
</Annotation>
```

LANGUAGE: ABAP CDS
CODE:
```abap
@UI.Facet: [
  {
    label: 'Header',
    id: 'HeaderInfo',
    type: #COLLECTION,
    purpose: #STANDARD
  },
  {
    hidden: true,
    id: 'GeneralInfo',
    label: 'General Information',
    parentId: 'HeaderInfo',
    purpose: #STANDARD
  },
  …..
  …..
]
Test;
```

LANGUAGE: CAP CDS
CODE:
```cds
Facets                                          : [
{
        $Type  : 'UI.CollectionFacet',
s
        Label  : 'Header',
        ID     : 'HeaderInfo',
        Facets : [
        {
                $Type             : 'UI.CollectionFacet',
                ID                : 'GeneralInfo',
                Label             : 'General Information',
                Facets            : [
                    ……
                   ……
                ],
                ![@UI.Hidden]     : true
        }]
}]
```

STEP: 4 — Hide Content in Quick Views
DESCRIPTION: Apply UI.Hidden to ReferenceFacet entries inside UI.QuickViewFacets to hide quick view content. Examples include static hiding and conditional hiding using Path.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.QuickViewFacets">
    <Collection>
        <Record Type="UI.ReferenceFacet">
            <PropertyValue Property="Label" String="Material" />
            <PropertyValue Property="Target" AnnotationPath="@Communication.Contact" />
            <Annotation Term="UI.Hidden" Bool="true" />
        </Record>
        <Record Type="UI.ReferenceFacet">
            <PropertyValue Property="Label" String="Address" />
            <PropertyValue Property="Target" AnnotationPath="@UI.FieldGroup#SoldToQuickView" />
            <Annotation Term="UI.Hidden" Path="edit_Ac" />
        </Record>
    </Collection>
</Annotation>
```

LANGUAGE: ABAP CDS
CODE:
```abap
@UI.Facet: [
  {
    hidden: true,
    label: 'Material',
    type: #CONTACT_REFERENCE,
    purpose: #QUICK_VIEW
  },
  {
    hidden: #('edit_Ac'),
    label: 'Address',
    targetQualifier: 'SoldToQuickView',
    type: #FIELDGROUP_REFERENCE,
    purpose: #QUICK_VIEW
  }
]
Test;
```

LANGUAGE: CAP CDS
CODE:
```cds
UI.QuickViewFacets        : [
   {
        $Type  : 'UI.ReferenceFacet',
        Label  : 'Material',
        Target : '@Communication.Contact',
        ![@UI.Hidden]     : true
    },
    {
        $Type  : 'UI.ReferenceFacet',
        Label  : 'Address',
        Target : '@UI.FieldGroup#SoldToQuickView',
        ![@UI.Hidden]     : edit_Ac
   }
]
```

STEP: 5 — Hide DataField Records in Header Facets (FieldGroup Qualifier)
DESCRIPTION: To hide specific DataField records within a FieldGroup qualifier, add UI.Hidden to each DataField entry (static Bool or Path-based). Use ABAP CDS @UI.fieldGroup or CAP CDS FieldGroup equivalents.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.FieldGroup" Qualifier="OrgData">
    <Record Type="UI.FieldGroupType">
        <PropertyValue Property="Data">
            <Collection>
                <Record Type="UI.DataField">
                    <PropertyValue Property="Value" Path="SalesOrganization" />
                    <Annotation Term="UI.Hidden" Bool="true" />
                </Record>
               <Record Type="UI.DataField">
                   <PropertyValue Property="Value" Path="DistributionChannel" />
                   <Annotation Term="UI.Hidden" Path="Delivered" />
               </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

LANGUAGE: ABAP CDS
CODE:
```abap
@UI.fieldGroup: [
  {
    hidden: true,
    value: 'SALESORGANIZATION',
    type: #STANDARD,
    qualifier: 'OrgData'
  }
]
SALESORGANIZATION;

@UI.fieldGroup: [
  {
    hidden: #('Delivered'),
    value: 'DISTRIBUTIONCHANNEL',
    type: #STANDARD,
    qualifier: 'OrgData'
  }
]
DISTRIBUTIONCHANNEL;
```

LANGUAGE: CAP CDS
CODE:
```cds
FieldGroup #OrgData                             : [
{
        Label : 'Org Data',
        Data  : [
        {
            $Type             : 'UI.DataField',
            Value             : SalesOrganization,
            ![@UI.Hidden]     : true
        }
        {
            $Type             : 'UI.DataField',
            Value             : DistributionChannel,
            ![@UI.Hidden]     : Delivered
        }]
}]
```

STEP: 6 — Hide DataField Records in Facets (OrderData example)
DESCRIPTION: Hide DataField entries inside FieldGroup qualifiers used in facets. To hide an entire FieldGroup or Identification, either hide every DataField inside or hide the wrapper ReferenceFacet/DataFieldForAnnotation.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.FieldGroup" Qualifier="OrderData">
     <Record Type="UI.FieldGroupType">
         <PropertyValue Property="Data">
            <Collection>
                <Record Type="UI.DataField">
                    <PropertyValue Property="Value" Path="SoldToParty" />
                    <Annotation Term="UI.Hidden" Bool="true" />
                </Record>
                <Record Type="UI.DataField">
                    <PropertyValue Property="Value" Path="ImageUrl" />
                    <Annotation Term="UI.Hidden" Path="edit_Ac" />
                </Record>
                 …..
                   ……
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

LANGUAGE: ABAP CDS
CODE:
```abap
@UI.fieldGroup: [
  {
    hidden: true,
    value: 'SOLDTOPARTY',
    type: #STANDARD,
    qualifier: 'OrderData'
  }
]
SOLDTOPARTY;

@UI.fieldGroup: [
  {
    hidden: #('edit_Ac'),
    value: 'IMAGEURL',
    type: #STANDARD,
    qualifier: 'OrderData'
  }
]
IMAGEURL;
```

LANGUAGE: CAP CDS
CODE:
```cds
FieldGroup #OrderData                           : {Data : [
   {
        $Type             : 'UI.DataField',
        Value             : SoldToParty,
        ![@UI.Hidden]     : true
   },
   {
        $Type             : 'UI.DataField',
        Value             : ImageUrl,
        ![@UI.Hidden]     : edit_Ac
    },
    …..
   ……
]}
```

STEP: 7 — Hide DataField Records in Tables (LineItem)
DESCRIPTION: For table columns (LineItem), a column is not rendered when the static UI.Hidden is set to true on the DataField (DataFieldForAction or other DataField types). Even if all footer-determining actions are hidden, the footer may still render to display bound backend messages.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.LineItem">
    <Collection>
        <Record Type="UI.DataFieldForAction">
            <PropertyValue Property="Label" String="Bound Action with params" />
            <PropertyValue Property="Action" String="com.c_salesordermanage_sd_aggregate.CreateWithSalesOrderType" />
            <Annotation Term="UI.Hidden" Bool="true" />
        </Record>
    </Collection>
</Annotation>
```

LANGUAGE: ABAP CDS
CODE:
```abap
@UI.lineItem: [
  {
    hidden: true,
    label: 'Bound Action with params',
    dataAction: 'com.c_salesordermanage_sd_aggregate.CreateWithSalesOrderType',
    type: #FOR_ACTION
  },
]
TEST;
```

LANGUAGE: CAP CDS
CODE:
```cds
LineItem                                        : {
        $value             : [
        {
            $Type  : 'UI.DataFieldForAction',
            Label  : 'Bound Action with params',
            Action : 'com.c_salesordermanage_sd.CreateWithSalesOrderType',
            ![@UI.Hidden] : true
        },    
]
```

STEP: 8 — Quick rules and gotchas
DESCRIPTION: Quick actionable reminders when applying UI.Hidden:
- UI.Hidden without Bool defaults to true (hidden).
- Use UI.Hidden Bool="false" to explicitly show.
- Path must point to a Boolean property (use edmJSON for expression-based conditions; SAPUI5 expression binding is not supported).
- edmJSON conditional annotations work only for SAP Fiori elements with OData V4.
- To hide a UI.FieldGroup or UI.Identification entirely, hide all DataField entries inside or hide the wrapper ReferenceFacet/DataFieldForAnnotation.
- Hiding actions in footer does not remove footer if backend-bound messages must be shown.
--------------------------------

**TITLE**: Highlight Line Items in Tables by Criticality (Fiori Elements)

**INTRODUCTION**: Add semantic highlights (row colors and optional icons) to table line items based on a criticality property. Use the UI.Criticality annotation on the entity type's LineItem to map an existing property that returns the CriticalityType values (0,1,2,3,5). This applies to regular and analytical tables (see note for OData V2).

**TAGS**: fiori-elements, annotations, criticality, LineItem, UI.Criticality, CDS, CAP, XML, OData

STEP: 1 — Criticality value mapping
DESCRIPTION: Use the property that returns a CriticalityType numeric value. Map values to semantic meanings and colors as defined by com.sap.vocabularies.UI.v1.CriticalityType.
LANGUAGE: JSON
CODE:
```json
{
  "CriticalityTypeValues": {
    "0": "Neutral",
    "1": "Negative (red)",
    "2": "Critical (orange)",
    "3": "Positive (green)",
    "5": "New Item (blue) - highlight items created outside the app"
  }
}
```

STEP: 2 — Ensure data model exposes the criticality property
DESCRIPTION: Confirm your entity/view exposes a property that returns one of the CriticalityType values. For analytical tables in SAP Fiori elements for OData V2, the criticality field must be a property (not a dimension). If needed, add a derived/computed property in the backend/CDS that returns 0/1/2/3/5.
LANGUAGE: PlainText
CODE:
```text
Action: Add/verify a numeric property on the EntityType or CDS view that returns one of {0,1,2,3,5}.
Note: For OData V2 analytical tables this must be a property (not a dimension).
```

STEP: 3 — Add UI.LineItem criticality annotation (XML)
DESCRIPTION: Add the UI.Criticality annotation pointing to the property that supplies the criticality for the LineItem. Place this annotation on the entity type used by the table (e.g., in annotations XML file or metadata annotations).
LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.LineItem">
  <Annotation Term="UI.Criticality" Path="Element_transporting_criticality_of_complete_LineItem" />         //LineItem Criticality annotation
  <Collection>
    <Record Type="UI.DataField">
      ...
    </Record>
  </Collection>
</Annotation>
```

STEP: 4 — Add UI.lineItem criticality in ABAP CDS
DESCRIPTION: In ABAP CDS, set the criticality attribute inside @UI.lineItem for the view. Use the property name that returns the criticality.
LANGUAGE: ABAP
CODE:
```
@UI.lineItem: [{criticality: 'Element_transporting_criticality_of_complete_LineItem'}] 
annotate view VIEWNAME with {

}
```

STEP: 5 — Add UI.LineItem criticality in CAP CDS
DESCRIPTION: In CAP CDS (service.cds), attach the UI.Criticality annotation to the UI.LineItem definition using the property name that supplies the criticality.
LANGUAGE: CDS
CODE:
```
UI.LineItem : {
    $value : [
        {
            $Type : 'UI.DataField'
        },
    ],
    ![@UI.Criticality] : Element_transporting_criticality_of_complete_LineItem
}
```

STEP: 6 — Icon representation and rendering behavior
DESCRIPTION: Default rendering: Fiori elements assumes DataField is marked with CriticalityRepresentationType/WithIcon and sets ObjectStatus icon automatically (for example com.sap.vocabularies.UI.v1.CriticalityType/Negative → 'sap-icon://status-negative'). If the field is marked with CriticalityRepresentationType/WithoutIcon, the field is rendered without an icon. Adjust CriticalityRepresentationType as needed in your annotations.
LANGUAGE: JSON
CODE:
```json
{
  "RepresentationBehavior": {
    "WithIcon": "Fiori sets ObjectStatus icon according to criticality (e.g., status-negative for Negative).",
    "WithoutIcon": "Field rendered without icon."
  }
}
```

STEP: 7 — Implementation checklist
DESCRIPTION: Quick actionable checklist to implement highlighting.
LANGUAGE: PlainText
CODE:
```text
1. Identify or create a property returning 0/1/2/3/5 on the EntityType/CDS view.
2. Ensure for OData V2 analytical tables the criticality is a property (not a dimension).
3. Add UI.Criticality on UI.LineItem pointing to that property (XML, ABAP CDS, or CAP CDS as applicable).
4. Verify CriticalityRepresentationType (WithIcon/WithoutIcon) if icons are required/undesired.
5. Test table UI: rows should be highlighted with corresponding semantic colors and icons (if enabled).
```
--------------------------------

**TITLE**: Highlight numeric values using DataPoint with Criticality or CriticalityCalculation (Fiori Elements)

**INTRODUCTION**: Use the com.sap.vocabularies.UI.v1.DataPoint annotation to show numeric values with visual highlighting (colors/semantics) in Fiori Elements (Overview Pages, List/Detail cards, etc.). You can set a static Criticality or compute it with a CriticalityCalculation using thresholds and improvement direction. These annotations are placed in your OData annotation file (EDMX/Annotations) or equivalent annotation source.

**TAGS**: fiori-elements-framework, annotations, DataPoint, Criticality, CriticalityCalculation, OData, EDMX, JSON

**STEP**: 1 — Static Criticality on a DataPoint

**DESCRIPTION**: Set a fixed semantic color/criticality for a numeric DataPoint by adding a DataPoint annotation with the Criticality property set to one of the enum members (Positive, Negative, Critical, Neutral). Useful when the status is stored explicitly.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- File: annotations.xml (or your service annotation file) -->
<Annotations Target="MyService.MyEntity">
  <Annotation Term="com.sap.vocabularies.UI.v1.DataPoint">
    <Record>
      <!-- Value: property containing the numeric value to display -->
      <PropertyValue Property="Value" Path="Amount"/>
      <!-- Static criticality: Positive, Negative, Critical, Neutral -->
      <PropertyValue Property="Criticality" EnumMember="com.sap.vocabularies.UI.v1.Criticality/Positive"/>
      <!-- Optional: unit, title, etc. -->
      <PropertyValue Property="ValueUnit" Path="Currency"/>
      <PropertyValue Property="Title" String="Total Amount"/>
    </Record>
  </Annotation>
</Annotations>
```

**STEP**: 2 — Compute Criticality using CriticalityCalculation (thresholds)

**DESCRIPTION**: Use CriticalityCalculation to derive Criticality from the numeric Value. Define ImprovementDirection (Maximize or Minimize) and CriticalityThresholds to map value ranges to Criticality enum members. This is applied inside the DataPoint annotation.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- File: annotations.xml -->
<Annotations Target="MyService.MyEntity">
  <Annotation Term="com.sap.vocabularies.UI.v1.DataPoint">
    <Record>
      <PropertyValue Property="Value" Path="Amount"/>
      <PropertyValue Property="ValueUnit" Path="Currency"/>
      <PropertyValue Property="Title" String="Total Amount"/>
      <PropertyValue Property="CriticalityCalculation">
        <Record Type="com.sap.vocabularies.UI.v1.CriticalityCalculationType">
          <!-- ImprovementDirection: Maximize means higher = better -->
          <PropertyValue Property="ImprovementDirection" EnumMember="com.sap.vocabularies.UI.v1.ImprovementDirection/Maximize"/>
          <!-- Thresholds: evaluate in order; map ranges to Criticality enums -->
          <PropertyValue Property="CriticalityThresholds">
            <Collection>
              <!-- Below 50 => Negative -->
              <Record Type="com.sap.vocabularies.UI.v1.CriticalityThresholdType">
                <PropertyValue Property="Value" Int="50"/>
                <PropertyValue Property="Severity" EnumMember="com.sap.vocabularies.UI.v1.Criticality/Negative"/>
              </Record>
              <!-- 50..80 => Critical -->
              <Record Type="com.sap.vocabularies.UI.v1.CriticalityThresholdType">
                <PropertyValue Property="Value" Int="80"/>
                <PropertyValue Property="Severity" EnumMember="com.sap.vocabularies.UI.v1.Criticality/Critical"/>
              </Record>
              <!-- Above 80 => Positive -->
              <Record Type="com.sap.vocabularies.UI.v1.CriticalityThresholdType">
                <PropertyValue Property="Value" Int="81"/>
                <PropertyValue Property="Severity" EnumMember="com.sap.vocabularies.UI.v1.Criticality/Positive"/>
              </Record>
            </Collection>
          </PropertyValue>
        </Record>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

**STEP**: 3 — DataPoint annotation as an Annotation Element in EDMX metadata

**DESCRIPTION**: Wrap DataPoint annotations inside the standard EDMX/Annotations structure targeting the entity (or a specific property). Place this file where your service reads annotation files (e.g., annotations.xml referenced by the SAP Fiori launchpad or UI service).

**LANGUAGE**: XML

**CODE**:
```xml
<!-- File: annotations.xml (full example inside an EDMX document's annotations section) -->
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
  <edmx:DataServices>
    <Schema xmlns="http://docs.oasis-open.org/odata/ns/edm" Namespace="MyService">
      <!-- EntityType and properties defined in the service model (not shown) -->
    </Schema>

    <!-- Annotations for the entity -->
    <Annotations Target="MyService.MyEntity">
      <Annotation Term="com.sap.vocabularies.UI.v1.DataPoint">
        <Record>
          <PropertyValue Property="Value" Path="Amount"/>
          <PropertyValue Property="ValueUnit" Path="Currency"/>
          <PropertyValue Property="Title" String="Total Amount"/>
          <PropertyValue Property="CriticalityCalculation">
            <Record Type="com.sap.vocabularies.UI.v1.CriticalityCalculationType">
              <PropertyValue Property="ImprovementDirection" EnumMember="com.sap.vocabularies.UI.v1.ImprovementDirection/Maximize"/>
              <PropertyValue Property="CriticalityThresholds">
                <Collection>
                  <Record Type="com.sap.vocabularies.UI.v1.CriticalityThresholdType">
                    <PropertyValue Property="Value" Int="50"/>
                    <PropertyValue Property="Severity" EnumMember="com.sap.vocabularies.UI.v1.Criticality/Negative"/>
                  </Record>
                  <Record Type="com.sap.vocabularies.UI.v1.CriticalityThresholdType">
                    <PropertyValue Property="Value" Int="80"/>
                    <PropertyValue Property="Severity" EnumMember="com.sap.vocabularies.UI.v1.Criticality/Critical"/>
                  </Record>
                  <Record Type="com.sap.vocabularies.UI.v1.CriticalityThresholdType">
                    <PropertyValue Property="Value" Int="81"/>
                    <PropertyValue Property="Severity" EnumMember="com.sap.vocabularies.UI.v1.Criticality/Positive"/>
                  </Record>
                </Collection>
              </PropertyValue>
            </Record>
          </PropertyValue>
        </Record>
      </Annotation>
    </Annotations>
  </edmx:DataServices>
</edmx:Edmx>
```

**STEP**: 4 — Equivalent CSDL JSON snippet (service annotations in JSON)

**DESCRIPTION**: If your service uses JSON representation of CSDL annotations, the structure mirrors the XML form. Use the same Terms, Records, PropertyValues and EnumMembers in JSON.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "$Version": "4.0",
  "MyService.MyEntity": {
    "@com.sap.vocabularies.UI.v1.DataPoint": {
      "Value": { "Path": "Amount" },
      "ValueUnit": { "Path": "Currency" },
      "Title": { "String": "Total Amount" },
      "CriticalityCalculation": {
        "Record": {
          "Type": "com.sap.vocabularies.UI.v1.CriticalityCalculationType",
          "ImprovementDirection": { "EnumMember": "com.sap.vocabularies.UI.v1.ImprovementDirection/Maximize" },
          "CriticalityThresholds": {
            "Collection": [
              {
                "Record": {
                  "Type": "com.sap.vocabularies.UI.v1.CriticalityThresholdType",
                  "Value": { "Int": 50 },
                  "Severity": { "EnumMember": "com.sap.vocabularies.UI.v1.Criticality/Negative" }
                }
              },
              {
                "Record": {
                  "Type": "com.sap.vocabularies.UI.v1.CriticalityThresholdType",
                  "Value": { "Int": 80 },
                  "Severity": { "EnumMember": "com.sap.vocabularies.UI.v1.Criticality/Critical" }
                }
              },
              {
                "Record": {
                  "Type": "com.sap.vocabularies.UI.v1.CriticalityThresholdType",
                  "Value": { "Int": 81 },
                  "Severity": { "EnumMember": "com.sap.vocabularies.UI.v1.Criticality/Positive" }
                }
              }
            ]
          }
        }
      }
    }
  }
}
```

For more information, see com.sap.vocabularies.UI.v1.DataPoint in "Annotations Used in Overview Pages" (annotations-used-in-overview-pages-65731e6.md).
--------------------------------

**TITLE**: How To Use SAP Fiori Elements

**INTRODUCTION**: Practical, code-focused guide for creating and extending SAP Fiori elements apps. Covers prerequisites (OData services), preparing UI annotations, building apps with SAP Fiori tools, and extending generated Fiori elements apps. Use the examples and file paths to implement or automate app generation and runtime customization.

**TAGS**: fiori-elements-framework, sap-fiori, odata, annotations, sap-fiori-tools, extension

**STEP**: 1 — Verify back-end OData prerequisites

**DESCRIPTION**: Ensure the back-end system exposes the required OData services (V2 or V4) and that service metadata and annotation files are accessible. Validate service endpoints and metadata before generating a Fiori elements app. Typical checks: reachable service URL, $metadata response, required entity sets, and the presence of UI annotations (inline or external).

**LANGUAGE**: Bash

**CODE**:
```bash
# Example: verify OData $metadata (basic connectivity check)
curl -I -u <USER>:<PASSWORD> "https://<BACKEND_HOST>/sap/opu/odata/sap/<SERVICE_NAME>/$metadata"

# Example: download metadata to inspect
curl -u <USER>:<PASSWORD> "https://<BACKEND_HOST>/sap/opu/odata/sap/<SERVICE_NAME>/$metadata" -o service-$metadata.xml
```

**STEP**: 2 — Prepare UI annotations for features and behavior

**DESCRIPTION**: Create or adapt OData annotation files to enable default Fiori elements features (list report, object page, quick view, etc.). You can place annotations inline in the service metadata or in external annotation files and reference them. Ensure correct Target values and UI terms (UI.LineItem, UI.FieldGroup, UI.Facets, UI.HeaderInfo). Use the appropriate annotation vocabulary (OData V2 or V4) depending on your service.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Example OData annotation snippet (OData V4-style XML) -->
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
  <edmx:DataServices>
    <Annotations Target="MyService.Product">
      <Annotation Term="UI.HeaderInfo">
        <Record>
          <PropertyValue Property="TypeName" String="Product"/>
          <PropertyValue Property="Title" Path="Name"/>
        </Record>
      </Annotation>
      <Annotation Term="UI.LineItem">
        <Collection>
          <Record Type="UI.DataField">
            <PropertyValue Property="Value" Path="ProductID"/>
            <PropertyValue Property="Label" String="ID"/>
          </Record>
          <Record Type="UI.DataField">
            <PropertyValue Property="Value" Path="Name"/>
            <PropertyValue Property="Label" String="Product Name"/>
          </Record>
        </Collection>
      </Annotation>
    </Annotations>
  </edmx:DataServices>
</edmx:Edmx>
```

**STEP**: 3 — Generate and build a Fiori elements app with SAP Fiori tools

**DESCRIPTION**: Use SAP Fiori tools (VS Code extensions or SAP Business Application Studio) or the Yeoman generator to scaffold a Fiori elements app. Confirm the generated project contains expected files: webapp/manifest.json (app descriptor), webapp/annotations/*.xml or annotations/*.json, and local test mocks when applicable. Build and run locally or deploy to your cloud/ABAP runtime.

**LANGUAGE**: Bash

**CODE**:
```bash
# Install Yeoman and the SAP Fiori generator (global install)
npm install -g yo @sap/generator-fiori

# Scaffold a new Fiori elements app (interactive)
yo @sap/generator-fiori

# Typical project structure after generation:
# my-fiori-app/
# ├─ webapp/
# │  ├─ manifest.json            <-- app descriptor (configure dataSources, annotations)
# │  ├─ annotations/             <-- local annotation files (if generated)
# │  └─ Component.js
# └─ xs-app.json (if SAP BTP Cloud Foundry setup)

# To run locally (if web server available in project)
npm install
npm start
```

**STEP**: 4 — Configure manifest.json entry points and data source references

**DESCRIPTION**: Verify and modify webapp/manifest.json to reference your OData service and annotations. Set the correct dataSource URL and annotation references so the runtime can load metadata and UI annotations.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.app": {
    "id": "my.fiori.app"
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "mainService",
        "settings": {
          "synchronizationMode": "None"
        }
      }
    }
  },
  "sap.app/dataSources": {
    "mainService": {
      "uri": "/sap/opu/odata/sap/<SERVICE_NAME>/",
      "type": "OData",
      "settings": {
        "odataVersion": "2.0",
        "localUri": "localService/metadata.xml"
      }
    }
  }
}
```

**STEP**: 5 — Extend Fiori elements apps when annotations/manifest are insufficient

**DESCRIPTION**: Use extensibility points to add custom logic: controller extensions, view fragments, or component extensions. Register controller extensions in webapp/manifest.json under sap.ui5 -> extends -> extensions to reference your custom controller. Implement custom UI logic in specific extension controller files and register fragments as needed.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui5": {
    "extends": {
      "extensions": {
        "sap.ui.controllerExtensions": {
          "sap.suite.ui.generic.template.ListReport.view.ListReport": {
            "controllerName": "my.namespace.extensions.ListReportExtension"
          }
        }
      }
    }
  }
}
```

**STEP**: 6 — Implement controller extension (example file path)

**DESCRIPTION**: Place extension controller files under webapp/ext/ or a similar namespace consistent with the manifest registration. Implement only the event handlers or lifecycle hooks you need.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// File: webapp/ext/ListReportExtension.controller.js
sap.ui.define(["sap/ui/core/mvc/Controller"], function(Controller) {
  "use strict";
  return Controller.extend("my.namespace.extensions.ListReportExtension", {
    onInit: function() {
      // custom initialization logic
    },
    onBeforeRebindTableExt: function(oEvent) {
      // example hook to modify filter/binding
    }
  });
});
```

**STEP**: 7 — References and further reading (preserve original links)

**DESCRIPTION**: Use official SAP docs and guides for deep dives and platform-specific instructions.

**LANGUAGE**: Markdown

**CODE**:
```markdown
- Prerequisites for Using SAP Fiori Elements:
  https://<SAP_DOC_HOST>/prerequisites-for-using-sap-fiori-elements-f2344b5.md

- Working With OData Annotations:
  https://<SAP_DOC_HOST>/working-with-odata-annotations-83c89cc.md

- Extending SAP Fiori Elements-Based Apps:
  https://<SAP_DOC_HOST>/extending-sap-fiori-elements-based-apps-358cf25.md

- SAP Fiori tools (extensions for Business Application Studio and VS Code):
  https://help.sap.com/viewer/product/SAP_FIORI_tools/Latest/en-US

- SAP Business Application Studio:
  https://help.sap.com/viewer/product/SAP%20Business%20Application%20Studio/Cloud/en-US
```
--------------------------------

**TITLE**: Hybrid View Configuration for Analytical List Page (ALP) in SAP Fiori Elements

**INTRODUCTION**: Configure and enable the hybrid view (chart + table) for the ALP content area. Use these steps to set the default hybrid display for OData V2 and V4 apps, and follow the UX and device constraints to ensure correct highlighting, filtering, and availability.

**TAGS**: fiori-elements-framework, analytical-list-page, ALP, hybrid-view, charttable, defaultPath, ODataV2, ODataV4, manifest

STEP: 1 — Purpose and interaction model

DESCRIPTION: The hybrid view displays analytical data (chart) and transactional data (table) simultaneously. Users can interact with the chart selection to filter and highlight related table records. Use this step to understand behavior and prerequisites before applying manifest/settings changes.

LANGUAGE: text

CODE:
```text
Purpose: Show chart at top and table at bottom. Chart dimension selection acts as a filter/highlight for table records.
```

STEP: 2 — OData V2: set default content view to chart+table

DESCRIPTION: Add the "settings.defaultContentView" property to your app configuration to make the hybrid view the default content display. Keep the code snippet exact in your manifest or settings file.

LANGUAGE: JSON

CODE:
```json
"settings": {
              "defaultContentView": "charttable",
}
```

STEP: 3 — OData V4: set defaultPath for views to both (chart + table)

DESCRIPTION: In the V4 manifest, set the views.paths[].defaultPath to "both" so the initial view loads with the chart above the table. Insert this into the existing "views" object; preserve any other properties in your paths array.

LANGUAGE: JSON

CODE:
```json
"views": {
    "paths": [{
...
        "defaultPath": "both"
    }]
},
```

STEP: 4 — Ensure chart context dimensions are visible in the table

DESCRIPTION: For accurate highlights and filtering, expose chart context dimensions as visible columns in the table's line item annotation or table configuration. If chart context dimensions are not visible, highlights and record association may be inaccurate.

LANGUAGE: text

CODE:
```text
Action: Verify UI.Chart chart context dimensions are included as visible columns in the table (UI.LineItem / table column configuration).
```

STEP: 5 — Configure and understand the auto-hide feature behavior

DESCRIPTION: The auto-hide feature controls whether the table shows only records affected by a chart selection or all records with highlights. When enabled, chart selection acts as an additional filter (table shows only affected/highlighted records). When disabled, table shows all records and highlights the ones affected by the chart selection.

LANGUAGE: text

CODE:
```text
Auto-hide ON  -> Table displays only records affected by chart selection (selection acts as filter).
Auto-hide OFF -> Table displays all records; affected records are highlighted.
```

STEP: 6 — Device, mode and resolution constraints

DESCRIPTION: Hybrid mode availability and behavior are constrained by device type, screen height, table type and mode (cozy/compact). Apply these rules when designing or enabling hybrid view:

- Not available on tablets or smartphones.
- Available on laptops with screen height > 900px.
- Disabled for analytical and grid table types in cozy mode when resolution < 900px.
- Restriction does NOT apply to responsive tables (responsive tables can still use hybrid view).

LANGUAGE: text

CODE:
```text
Constraints:
- Devices: Hybrid view disabled on tablets and smartphones.
- Screen height: Requires > 900px for hybrid view to appear on laptops.
- Table types: Analytical and Grid tables - hybrid disabled in cozy mode when resolution < 900px.
- Responsive tables: hybrid view available regardless of the above resolution restriction.
```

STEP: 7 — Related information and file references

DESCRIPTION: See the content area configuration guidance for detailed instructions on annotations and manifest configuration required to render the chart and table areas. Keep the referenced documentation path for further integration steps.

LANGUAGE: text

CODE:
```text
Related doc: configuring-the-content-area-fc7d73c.md
(Visualize data from the main entity set and define UI.Chart or UI.LineItem annotations. See "Configuring the Manifest for the Analytical List Page".)
```
--------------------------------

**TITLE**: In/Out Mappings in the Common.ValueList Annotation (OData/Fiori Elements)

**INTRODUCTION**: This document explains how to configure Common.ValueList with IN/OUT (and INOUT) parameter mappings to connect properties in the main entity with properties in the value help (value list) entity. It includes actionable examples for XML annotations, ABAP CDS, and CAP CDS. Use these mappings to:
- apply main-entity filter values to the value help dataset (IN),
- write back selected value help fields to main-entity properties (OUT),
- combine both behaviors (INOUT).

Note: In SAP Fiori elements for OData V2, IN/OUT mappings are supported only for Analytical List Page. OUT parameters are applied for filter fields only if the LocalDataProperty is visible in the filter bar.

**TAGS**: fiori-elements-framework, OData, ValueList, ValueHelp, annotation, Common.ValueList, Common.ValueListParameterIn, Common.ValueListParameterOut, CDS, CAP, ABAP

STEP: 1 — Annotation terms and definitions

DESCRIPTION: Key annotation terms used to map properties between main entity and value list entity. Use these definitions when authoring ValueList parameter records.

LANGUAGE: text

CODE:
```text
Common.ValueListParameterIn:   Determines a main-entity property taken into the filter query of the value help entity (applies main->valueHelp filters).
Common.ValueListParameterOut:  Determines which value help property sets the main-entity property when a user selects a value (applies valueHelp->main writeback).
Common.ValueListParameterInOut: Combines both IN and OUT behaviors.
LocalDataProperty:            Property in the main entity (the entity where the field is defined).
ValueListProperty:            Property in the value help entity (provides values for LocalDataProperty or is filtered by it).
Tip: OUT parameters for filter fields are applied only if the target LocalDataProperty is visible in the filter bar.
Note: OData V2 - IN/OUT supported only for Analytical List Page.
```

STEP: 2 — Define selection/filter fields on the main entity

DESCRIPTION: Declare which fields appear in the selection bar (filter fields) of the list report / ALP. Examples in XML, ABAP CDS and CAP CDS.

LANGUAGE: XML

CODE:
```xml
<Annotation Term="UI.SelectionFields">
	<Collection>
		<PropertyPath>RegionID</PropertyPath>
		<PropertyPath>CountryID</PropertyPath>
		<PropertyPath>PlantID</PropertyPath>
	</Collection>
</Annotation>
```

LANGUAGE: ABAP CDS

CODE:
```abap
@UI.SelectionField: [
  {
    position: 1 ,
    element: 'REGIONID'
  }
]
REGIONID;

@UI.SelectionField: [
  {
    position: 2 ,
    element: 'COUNTRYID'
  }
]
COUNTRYID;

@UI.SelectionField: [
  {
    position: 3 ,
    element: 'PLANTID'
  }
]
PLANTID;
```

LANGUAGE: CAP CDS

CODE:
```cds
UI.SelectionFields : [
    RegionID,
    CountryID,
    PlantID
]
```

STEP: 3 — ValueList opening / target declaration (example for CountryID)

DESCRIPTION: Start a ValueList annotation for CountryID on the Z0020 main entity. Use CollectionPath to point to the value help entity and add Parameters collection to list IN/OUT mappings.

LANGUAGE: XML

CODE:
```xml
<Annotations Target="Z0020_CDS.Z0020Type/CountryID">  
    <Annotation Term="Common.ValueList" Qualifier="0020_Country">
```

STEP: 4 — OUT parameter example (explain behavior)

DESCRIPTION: OUT parameter maps which value from the value help is written into the main-entity property when the user selects a value. LocalDataProperty is the target main-entity property; ValueListProperty is the value help property used as the displayed/selected value. The selection result (LocalDataProperty) drives subsequent filter queries on the main entity ($filter=CountryID="001").

LANGUAGE: XML

CODE:
```xml
<Record Type="Common.ValueListParameterOut">
    <PropertyValue Property="LocalDataProperty" PropertyPath="CountryID"/>
    <PropertyValue Property="ValueListProperty" String="CountryIdentifier"/>
</Record>
```

STEP: 5 — IN parameter example (explain behavior)

DESCRIPTION: IN parameter filters the value help dataset using the main-entity value. LocalDataProperty is read from the main entity and applied as a filter on ValueListProperty in the value help entity (main->valueHelp filter).

LANGUAGE: XML

CODE:
```xml
<Record Type="Common.ValueListParameterIn">
    <PropertyValue Property="LocalDataProperty" PropertyPath="RegionID"/>
    <PropertyValue Property="ValueListProperty" String="RegionIdentifier"/>
</Record>
```

STEP: 6 — Complete XML ValueList example for CountryID (XML)

DESCRIPTION: Complete ValueList annotation for CountryID on Z0020. It:
- points to value help entity Z0022,
- disables search support,
- defines an OUT mapping CountryID <- CountryIdentifier,
- defines an IN mapping RegionID -> RegionIdentifier.

LANGUAGE: XML

CODE:
```xml
<Annotations Target="Z0020_CDS.Z0020Type/CountryID">
    <Annotation Term="Common.ValueList" Qualifier="0020_Country">
        <Record>
            <PropertyValue Property="Label" String="Country"/>
            <PropertyValue Property="CollectionPath" String="Z0022"/>
            <PropertyValue Property="SearchSupported" Bool="false"/>
            <PropertyValue Property="Parameters">
                <Collection>
                    <Record Type="Common.ValueListParameterOut">
                        <PropertyValue Property="LocalDataProperty" PropertyPath="CountryID"/>
                        <PropertyValue Property="ValueListProperty" String="CountryIdentifier"/>
                    </Record>
                    <Record Type="Common.ValueListParameterIn">
                        <PropertyValue Property="LocalDataProperty" PropertyPath="RegionID"/>
                        <PropertyValue Property="ValueListProperty" String="RegionIdentifier"/>
                    </Record>
                </Collection>
            </PropertyValue>
        </Record>
    </Annotation>
</Annotations>
```

STEP: 7 — Equivalent ABAP CDS ValueHelp definition for CountryID

DESCRIPTION: ABAP CDS consumption annotation that maps CountryID (result) and RegionID (filter) for entity Z0022. usage: #RESULT corresponds to Common.ValueListParameterOut; usage: #FILTER corresponds to Common.ValueListParameterIn.

LANGUAGE: ABAP CDS

CODE:
```abap
@Consumption.valueHelpDefinition:
        [{
          entity :{
            name    : 'Z0022'
          },
            label  : 'Country',
            additionalBinding: [
              {
                localElement: 'CountryID',
                element: 'CountryIdentifier',
                usage: #RESULT // Common.ValueListParameterOut
               },
 {
                localElement: 'RegionID',
                element: 'RegionIdentifier',
                usage: #FILTER // Common.ValueListParameterIn
               }              
            ]
          }
         ]
CountryID;
```

STEP: 8 — Equivalent CAP CDS ValueList definition for CountryID

DESCRIPTION: CAP CDS annotation example that declares a Common.ValueList with an OUT parameter and an IN parameter. Useful when modeling in CAP (CDS for Node.js).

LANGUAGE: CAP CDS

CODE:
```cds
CountryID : UUID @(
    Common : {
        ValueList #0020_Country : {
            Label : 'Country',
            CollectionPath : 'Z0022',
            Parameters : [
            {
                $Type : 'Common.ValueListParameterOut',
                LocalDataProperty : CountryID,
                ValueListProperty : 'CountryIdentifier'
            },
            {
                $Type : 'Common.ValueListParameterIn',
                LocalDataProperty : RegionID,
                ValueListProperty : 'RegionIdentifier'
            }
            ]
       }
    }
);
```

STEP: 9 — ValueList for PlantID with multiple IN parameters (XML)

DESCRIPTION: Example ValueList annotation for PlantID that:
- reads plant values from Z0023 (PlantNumber),
- writes selected PlantNumber into PlantID (OUT),
- filters the plant value help by Region and Country (two IN parameters mapped to RegionNumber and CountryNumber).

LANGUAGE: XML

CODE:
```xml
<Annotations Target="Z0020_CDS.Z0020Type/PlantID">
    <Annotation Term="Common.ValueList" Qualifier="0020_Plant">
        <Record>
            <PropertyValue Property="Label" String="Plant"/>
            <PropertyValue Property="CollectionPath" String="Z0023"/>
            <PropertyValue Property="SearchSupported" Bool="false"/>
            <PropertyValue Property="Parameters">
                <Collection>
                    <Record Type="Common.ValueListParameterOut">
                        <PropertyValue Property="LocalDataProperty" PropertyPath="PlantID"/>
                        <PropertyValue Property="ValueListProperty" String="PlantNumber"/>
                    </Record>
                    <Record Type="Common.ValueListParameterIn">
                        <PropertyValue Property="LocalDataProperty" PropertyPath="RegionID"/>
                        <PropertyValue Property="ValueListProperty" String="RegionNumber"/>
                    </Record>
                    <Record Type="Common.ValueListParameterIn">
                        <PropertyValue Property="LocalDataProperty" PropertyPath="CountryID"/>
                        <PropertyValue Property="ValueListProperty" String="CountryNumber"/>
                    </Record>
                </Collection>
            </PropertyValue>
        </Record>
    </Annotation>
</Annotations>
```

STEP: 10 — Expected runtime behaviors and sample filter query

DESCRIPTION: Practical outcomes of mapping:
- OUT mapping: a value selected in the value help (ValueListProperty) is written into the main property (LocalDataProperty). Filtering on the main entity uses the LocalDataProperty (e.g., $filter=CountryID="001").
- IN mapping: if RegionID = "ABC" is present in the selection, the Country value help applies filter RegionIdentifier="ABC" and only countries for that region are shown.
- Combining INs on PlantID ensures the Plant value help shows only plants that belong to both selected Region and Country (if both present).

LANGUAGE: text

CODE:
```text
Example: user selects CountryIdentifier = "001" in the Country value help.
Result: main-entity CountryID <- "001" and main query uses $filter=CountryID="001" (not CountryIdentifier).
Example: RegionID = "ABC" in filter bar + Country value help opened:
Value help backend filter applied: $filter=RegionIdentifier eq 'ABC' (filters countries to that region).
Plant value help when both RegionID and CountryID present:
Value help backend receives both filters (RegionNumber and CountryNumber) and returns only plants matching both.
```
--------------------------------

**TITLE**: Embedding Reuse Components into an Object Page (SAP Fiori elements)

**INTRODUCTION**: This document shows how to embed reuse components as sections on an Object Page in SAP Fiori elements apps (OData V2 and OData V4). It provides actionable manifest.json examples and explains key properties you must set: id, componentUsage vs componentName, title (i18n), settings bindings, binding context, default visibility (hiddenByDefault + extensionAPI setSectionHidden), placement, and dependency declarations.

**TAGS**: fiori-elements-framework, reuse-component, manifest.json, sapui5, odata-v2, odata-v4, object-page, embeddedComponents

STEP: Embed reuse components on an Object Page (OData V2)

DESCRIPTION: Add reuse component instances in the "sap.ui.generic.app" -> "pages" -> ObjectPage entry of your app's manifest.json. Choose one of two addressing options:
- componentUsage: reference a component usage configured elsewhere (recommended when using createComponent API).
- componentName: address the fully qualified component name directly.

Key requirements:
- The property name inside embeddedComponents and the id inside that definition must be identical.
- Use "title" pointing to an i18n key for a translatable section title.
- Use "settings" to pass property bindings to the reuse component (any valid binding string, including expression bindings).
- Use "binding" to adjust the binding context for the reuse component instance; the path is relative to the page binding context.

LANGUAGE: JSON

CODE:
```json
...   
 "sap.ui.generic.app": { 
    ...  
    "pages": {
        "ListReport|myRootEntity": {    

            "entitySet": "myRootEntity",    
            "component": {      
                "name": "sap.suite.ui.generic.template.ListReport",      
                "list": true,      
                ...
            },
            "pages": {      
                "ObjectPage|myRootEntity": {       
                    "entitySet": "myRootEntity",       
                    "component": {        
                        "name": "sap.suite.ui.generic.template.ObjectPage",
                        ...
                    },        
                    "embeddedComponents": {        
                        "myFirstComponentEmbedding": {         
                            "id": "myFirstComponentEmbedding",         
                            "componentUsage": "myUsage",         
                            "title": "{{I18N_KEY_FOR_FIRST_REUSE_COMPONENT_TITLE}}",
                            "settings": {
                                "documentNumber": "{documentNumber}"
                            }                 
                        },        
                        "mySecondComponentEmbedding": {         
                            "id": "mySecondComponentEmbedding",         
                            "componentName": "theOtherReuseComponentQualifiedName",         
                            "title": "{{I18N_KEY_FOR_SECOND_REUSE_COMPONENT_TITLE}}",
                            "binding": "myNavProperty",     
                        }       
                    },
                    "pages": {
                        // add list of sub-pages of the root object page here
                    }
                }
            }
        }
    }
```

STEP: Visibility control and lifecycle (OData V2)

DESCRIPTION: Control default visibility and dynamic show/hide:
- hiddenByDefault: set on the same level as id/title/settings. If true, the section is hidden when the page opens for a new instance.
- Use the reuse component's extensionAPI method setSectionHidden(false/true) inside the reuse component implementation to unhide or hide the section at runtime based on instance data.
- Default hiddenByDefault should reflect the most common scenario; then unhide for specific instances.

LANGUAGE: JavaScript (conceptual usage)

CODE:
```javascript
// In your reuse component controller or extension code (conceptual)
this.extensionAPI.setSectionHidden(false); // show the section
this.extensionAPI.setSectionHidden(true);  // hide the section
```

STEP: Binding context behavior (OData V2)

DESCRIPTION: The embedding page's OData model binding context is inherited by the reuse component. Use the "binding" property on the embedding definition to modify the binding context for a specific reuse component instance. The binding path is relative to the page's current binding context.

LANGUAGE: JSON (example excerpt)

CODE:
```json
"mySecondComponentEmbedding": {
    "id": "mySecondComponentEmbedding",
    "componentName": "theOtherReuseComponentQualifiedName",
    "title": "{{I18N_KEY_FOR_SECOND_REUSE_COMPONENT_TITLE}}",
    "binding": "myNavProperty"
}
```

STEP: Placement and Adaptation (OData V2)

DESCRIPTION: Each embedded component instance is rendered as an Object Page section -> sub-section -> content. By default they are appended in the order defined in manifest.json. You can reposition them using the Adaptation Editor or placement APIs. For advanced placement options, consult placing-reuse-component-instances-on-the-object-page.

LANGUAGE: N/A

CODE:
```text
// Placement is controlled via Adaptation Editor or by changing the order of entries
// in the manifest. No manifest code required here beyond embeddedComponents order.
```

STEP: Declare component OData/service dependencies (OData V2)

DESCRIPTION: If the reuse component uses its own OData service or libraries, declare these dependencies in the host app manifest under both:
- "sap.ui5" -> "dependencies" -> "libs"
- "sap.ui5" -> "dependencies" -> "components"

This ensures libraries and component dependencies are loaded.

LANGUAGE: JSON (conceptual)

CODE:
```json
{
  "sap.ui5": {
    "dependencies": {
      "libs": {
        "sap.m": {}
      },
      "components": {
        "path.to.reuseComponent": {}
      }
    }
  }
}
```

STEP: Embed reuse components on an Object Page (OData V4 — preferred approach)

DESCRIPTION: For OData V4, prefer embedding via the routing target options/settings content body sections. Use "embeddedComponent" with "name" and "settings" under a section declaration. Use "position" (placement and anchor) to place the section relative to other sections. Provide title as i18n binding.

LANGUAGE: JSON

CODE:
```json
{
    "sap.ui5": {
        "routing": {
            "routes": [
                {
                    "pattern": "myEntitySet({key}):?query:",
                    "name": "myObjectPage",
                    "target": "myObjectPage"                }
            ],
            "targets": {
                "myObjectPage": {
                    "options": {
                        "settings": {
                            "content": {
                                "body": {
                                    "sections": {
                                        "customSectionReuse": {
                                            "title": "{i18n>customSectionReuse}",
                                            "embeddedComponent": {
                                                "name": "path.to.reuseComponent",
                                                "settings": {
                                                    "exampleSettings": "{somePropertyName}"                                                }
                                            },
                                            "position": {
                                                "placement": "After",
                                                "anchor": "someOtherSection"                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}
```

STEP: Embed reuse components on an Object Page (OData V4 — alternative using routing targets)

DESCRIPTION: Alternative: add a target entry of type Component for the reuse component and attach it to the Object Page target via the "target" array on the route. Use "controlId" and "controlAggregation" to place the component inside a container section. Set "clearControlAggregation" if you want to replace existing aggregation contents.

LANGUAGE: JSON

CODE:
```json
{
	"sap.ui5": {
		"routing": {
			"routes": [
				{
					"pattern": "myEntitySet({key}):?query:",
					"name": "myObjectPage",
					"target": ["myObjectPage", "ReuseComponent"]
				}
			],
			"targets": {
				"myObjectPage": {
					"type": "Component",
					"id": "myObjectPage",
					"name": "sap.fe.templates.ObjectPage",
					"options": {
						"settings": {
							"content": {
								"body": {
									"sections": {
										"ReuseComponentContainer": {
											"position": {
												"placement": "Before",
												"anchor": "GeneralInfo"
											},
											"title": "Reuse Container",
											"subSections": {
												"ReuseContainer": {
													"id": "ReuseComponentContainer"
												}
											}
										}
									}
								}
							}
						}
					}
				},
				"ReuseComponent": {
					"type": "Component",
					"id": "Reuse",
					"name": "path.to.reuseComponent",
					"options": {
						"settings": {
							"exampleSettings": "{somePropertyName}"
						}
					},
					"parent": "myObjectPage",
					"controlId": "ReuseComponentContainer",
					"controlAggregation": "blocks",
					"clearControlAggregation": true
				}
			}
		}
	}
}
```

STEP: Visibility expression for OData V4

DESCRIPTION: For OData V4 reuse components, use standard SAPUI5 visible bindings. To show a component only when a field has a value (example: SalesOrder), set visible to an expression binding.

LANGUAGE: JSON (binding example)

CODE:
```json
"visible": "{= !!${SalesOrder} }"
```
--------------------------------

**TITLE**: Influence Table Binding Requests Dynamically with beforeRebindTable (Fiori Elements OData V4)

**INTRODUCTION**: Add dynamic filters, sorters, and selected properties to table OData requests before the table rebinding occurs. Use the beforeRebindTable extension on table settings (manifest.json) and implement a controller extension to modify the CollectionBindingInfo API. Also shows how to retrieve the table row count (getCount) and update UI controls after data is received or refreshed.

**TAGS**: fiori-elements, odata-v4, beforeRebindTable, table, controller-extension, ui5, collectionBindingInfo, getCount

**STEP**: 1. Add beforeRebindTable key to table settings in manifest.json

**DESCRIPTION**: Declare the beforeRebindTable extension function for the target table in your controlConfiguration so SAP Fiori elements will call your controller extension before the table is rebound.

**LANGUAGE**: JSON

**CODE**:
```json
"controlConfiguration": {
    _Child/@com.sap.vocabularies.UI.v1.LineItem: {
        "tableSettings": {
            "beforeRebindTable": ".extension.sap.fe.core.fpmExplorer.OPExtend.onTableRefresh"
        }
    }
}
```

**STEP**: 2. Register your controller extension in manifest.json

**DESCRIPTION**: Configure sap.ui5 -> extends -> controllerExtensions to point the framework to your controller extension implementation.

**LANGUAGE**: JSON

**CODE**:
```
"sap.ui5": {
    "extends": {
        "extensions": {
            "sap.ui.controllerExtensions": {
                "sap.fe.templates.ObjectPage.ObjectPageController": {
                    "controllerName": "sap.fe.core.fpmExplorer.OPExtend"
                }
            }
        }
    }
}
```

**STEP**: 3. Implement the beforeRebindTable handler in the controller extension

**DESCRIPTION**: Implement the onTableRefresh handler in your controller extension. Obtain the CollectionBindingInfo API from the event, then add filters, sorters, and additional select properties using collectionBindingInfoAPI.addFilter/addSorter/addSelect. The sample below shows adding a boolean filter, a sorter on "ID", and selecting "TagStatus".

**LANGUAGE**: JavaScript

**CODE**:
```javascript
sap.ui.define(
    ["sap/ui/core/mvc/ControllerExtension", "sap/ui/model/Filter", "sap/ui/model/FilterOperator"],
    function (ControllerExtension, Filter, FilterOperator) {
        "use strict";

        return ControllerExtension.extend("sap.fe.core.fpmExplorer.OPExtend", {
            onTableRefresh: function (event) {
                var collectionBindingInfoAPI = event.getParameters("collectionBindingInfo");

                //Add a filter
                var filter = new Filter({
                    path: "BooleanProperty",
                    operator: FilterOperator.EQ,
                    value1: false
                });
                collectionBindingInfoAPI.addFilter(filter);

                //Add a sorter
                var sorter = new Sorter("ID", true);
                collectionBindingInfoAPI.addSorter(sorter);

                //Request an additional property to the request
                collectionBindingInfoAPI.addSelect(["TagStatus"]);                                             }
            });
    }
);
```

**STEP**: 4. Configure beforeRebindTable for retrieving row count

**DESCRIPTION**: Point the table's beforeRebindTable to a handler that will attach to collectionBindingInfo events (dataReceived and refresh) to read getCount() and update another UI control (for example, a numeric tile or data field).

**LANGUAGE**: JSON

**CODE**:
```
"controlConfiguration": {
    "@com.sap.vocabularies.UI.v1.LineItem": {
        "tableSettings": {
            "beforeRebindTable": ".extension.sap.fe.core.fpmExplorer.customListReportHeaderContent.LRExtend.beforeRebindTableLR"
        }
    }
},
```

**STEP**: 5. Implement the beforeRebindTable handler to get table row count and update UI

**DESCRIPTION**: Use collectionBindingInfoAPI.attachEvent for "dataReceived" and "refresh". In the callbacks, call getCount() on the table instance and set the value of a target control (example uses IDs shown in manifest snippet). This ensures the UI reflects the currently loaded row count.

**LANGUAGE**: JavaScript

**CODE**:
```
beforeRebindTableLR: function (event) {
     let collectionBindingInfoAPI = event.getParameter("collectionBindingInfo");
     collectionBindingInfoAPI.attachEvent(
         "dataReceived",
         () => {
             let tableCount = this.getView()
                .byId("sap.fe.core.fpmExplorer.customListReportHeaderContent::Default--fe::table::RootEntity::LineItem::Table")
                .getCount();
             this.getView().byId("sap.fe.core.fpmExplorer.customListReportHeaderContent::Default--numericId").setValue(tableCount);
         },
         this
     );
     collectionBindingInfoAPI.attachEvent(
         "refresh",
         () => {
             let tableCount = this.getView()
                .byId("sap.fe.core.fpmExplorer.customListReportHeaderContent::Default--fe::table::RootEntity::LineItem::Table")
                .getCount();
             this.getView().byId("sap.fe.core.fpmExplorer.customListReportHeaderContent::Default--numericId").setValue(tableCount);
         },
         this
     );
}
```
--------------------------------

**TITLE**: Initial Expansion Level for Tables in List Reports & Analytical List Pages

**INTRODUCTION**: Configure the number of expanded grouping levels for tables in Fiori elements List Reports and Analytical List Pages by setting the InitialExpansionLevel on the UI.PresentationVariant annotation. Applicable to SAP Fiori elements for OData V2 only. Ensure PresentationVariant annotations exist and are referenced correctly (direct or via SelectionPresentationVariant qualifiers) for the content area or tabs.

**TAGS**: fiori-elements-framework, PresentationVariant, SelectionPresentationVariant, initialExpansionLevel, annotations, OData V2, ListReport, AnalyticalListPage, tables

STEP: 1 — Expected behavior per table type

DESCRIPTION: Know the default and enforced behavior per table type and the rule that InitialExpansionLevel must not exceed the number of grouped columns. Use this to decide which value to set.

LANGUAGE: Text

CODE:
```Text
- Analytical Table: default initialExpansionLevel is 0.
- Responsive Table: expands to one level regardless of initialExpansionLevel; groups are always expanded; grouping controlled via table settings.
- Tree Table:
  - List Reports: first level is automatically expanded.
  - Analytical List Pages: default initialExpansionLevel is 0.

Rule: initialExpansionLevel must never exceed the number of grouped columns.
```

STEP: 2 — Preconditions and association rules for PresentationVariant

DESCRIPTION: Ensure PresentationVariant annotations exist for the content area in Analytical List Pages / List Reports and for multiple tabs in List Reports. If tabs are not defined, the default (unqualified) PresentationVariant is used. Content areas can be associated directly with a PresentationVariant when:
- The manifest qualifier is defined and there is no matching SelectionPresentationVariant but a matching PresentationVariant exists.
- The manifest qualifier is not defined and there is no default SelectionPresentationVariant but a default PresentationVariant exists.
For List Report tabs, the annotation path in the manifest can point directly to a PresentationVariant annotation.

LANGUAGE: Text

CODE:
```Text
Preconditions:
- PresentationVariant must be defined for the content area or tab (qualified or default).
- If using SelectionPresentationVariant that references a PresentationVariant, the PresentationVariant must be referenced by path (not inline) — see later step.

Manifest/tab rules:
- If tab annotation path points to a PresentationVariant, define the PresentationVariant as a separate annotation with the appropriate qualifier.
```

STEP: 3 — PresentationVariant sample: XML Annotation

DESCRIPTION: Use this XML PresentationVariant sample to set InitialExpansionLevel and related grouping/sort order. Use the Qualifier as required (e.g., "Default") and reference it from the manifest or SelectionPresentationVariant.

LANGUAGE: XML

CODE:
```xml
<Annotation Term="UI.PresentationVariant" Qualifier="Default">
    <Record>
        <PropertyValue Property="Visualizations">
            <Collection>
                <AnnotationPath>@UI.LineItem#DefaultLineItem</AnnotationPath>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="GroupBy">
            <Collection>
                <PropertyPath>ProductId</PropertyPath>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="InitialExpansionLevel" Int="1"/>
        <PropertyValue Property="SortOrder">
            <Collection>
                <Record>
                    <PropertyValue Property="Property" PropertyPath="ProductCategory" />
                    <PropertyValue Property="Descending" Bool="false" />
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

STEP: 4 — PresentationVariant sample: ABAP CDS Annotation

DESCRIPTION: Use this ABAP CDS presentationVariant example to set initialExpansionLevel and related properties. Apply the annotation to the CDS view and ensure qualifier matches manifest or tab configuration.

LANGUAGE: ABAP CDS

CODE:
```
@UI.presentationVariant: [
  {
    visualizations: [
      {
        type: #AS_LINEITEM,
        qualifier: 'DefaultLineItem'
      }
    ],
    groupBy: [
      'PRODUCTID'
    ],
    initialExpansionLevel: 1,
    sortOrder: [
      {
        by: 'PRODUCTCATEGORY',
        direction: #ASC
      }
    ],
    qualifier: 'Default'
  }
]
annotate view STTA_C_MP_Product with {
}
```

STEP: 5 — PresentationVariant sample: CAP CDS Annotation

DESCRIPTION: Use this CAP CDS format to define a PresentationVariant with InitialExpansionLevel. Ensure the named PresentationVariant (#Default) is referenced appropriately.

LANGUAGE: CDS

CODE:
```
UI.PresentationVariant #Default : {
    Visualizations : [
        '@UI.LineItem#DefaultLineItem',
    ],
    GroupBy : [
        ProductId
    ],
    InitialExpansionLevel : 1,
    SortOrder : [
        {
            Property : ProductCategory,
            Descending : false
        }
    ]
}
```

STEP: 6 — When using SelectionPresentationVariant: reference PresentationVariant by path

DESCRIPTION: If the content area or a tab uses UI.SelectionPresentationVariant that references a PresentationVariant, do not define the PresentationVariant inline. Reference the PresentationVariant using a path. Below are XML, ABAP CDS, and CAP CDS examples showing how to reference an external PresentationVariant by qualifier/path.

LANGUAGE: XML

CODE:
```xml
<Annotation Term="UI.SelectionPresentationVariant" Qualifier="MainContent">
    <Record>
        <PropertyValue Property="ID" String=""/>
        <PropertyValue Property="Text" String=""/>
        <PropertyValue Property="SelectionVariant" Path="@UI.SelectionVariant#Default"/>
        <PropertyValue Property="PresentationVariant" Path="@UI.PresentationVariant#Default"/>
    </Record>
</Annotation>
```

LANGUAGE: ABAP CDS

CODE:
```
@UI.selectionPresentationVariant: [{
  id: '',
  text: '',
  selectionVariantQualifier: 'Default',
  presentationVariantQualifier: 'Default',
  qualifier: 'MainContent'
}]
```

LANGUAGE: CDS

CODE:
```
UI.SelectionPresentationVariant #MainContent : {
    ID : '',
    Text : '',
    SelectionVariant : ![@UI.SelectionVariant#Default],
    PresentationVariant : ![@UI.PresentationVariant#Default]
},
```

STEP: 7 — Related links and references

DESCRIPTION: Quick links to related documentation for table configuration, table-only view, and default settings. Use these when implementing or verifying annotation behavior.

LANGUAGE: Text

CODE:
```Text
Related Information:
- Configuring Tables: configuring-tables-f4eb70f.md
- Configuring the Table-Only View as the Default Option: configuring-the-table-only-view-as-the-default-option-d074e26.md
- Configuring Default Settings (Visualizations, Sort Order, Filter Values): configuring-default-settings-visualizations-sort-order-filter-values-49a6ba5.md
```
--------------------------------

**TITLE**: Inline Edit — Enable and Configure Inline Editing in SAP Fiori elements (OData V4)

**INTRODUCTION**: Practical guide for enabling and configuring inline edit for List Report and Object Page SAP Fiori elements applications (OData V4). Includes UI behavior, restrictions, manifest configuration examples, connected-field rules, error handling, action/navigation behavior, and back-end requirements.

**TAGS**: fiori-elements, inline-edit, manifest.json, ListReport, ObjectPage, OData V4, connectedFields, disabledFields, enabledFields, CAP, ABAP

STEP: 1 — Purpose and scope

DESCRIPTION: Use inline edit to edit single fields or groups of fields in the active entity without creating a draft. Applicable only for SAP Fiori elements for OData V4 and supported from SAPUI5 1.136. Supported on pages based on sap.fe.templates.ListReport and sap.fe.templates.ObjectPage, and on building blocks used within these templates.

LANGUAGE: Text

CODE:
```Text
Purpose: Edit specific fields/field groups directly in active version (no draft created).
Scope: SAP Fiori elements for OData V4; templates: sap.fe.templates.ListReport, sap.fe.templates.ObjectPage.
SAPUI5 requirement: 1.136+
```

STEP: 2 — Restrictions and unsupported cases

DESCRIPTION: Inline edit is not available in certain scenarios. Validate these before enabling inline edit.

LANGUAGE: Text

CODE:
```Text
Restrictions:
- Not supported when Collaborative Draft is enabled.
- Not supported when using Flexible Column Layout.
- Not supported for stream property fields.
- Not supported for multi-input fields.
- If object already has a draft, inline edit is unavailable.
- Double-click activation is not supported on responsive tables.
```

STEP: 3 — Inline edit UI behavior and keyboard interactions

DESCRIPTION: Visual indicators, activation actions, and save/cancel interactions to implement or validate in UI. Reference images included in original docs for visual guidance.

LANGUAGE: Text

CODE:
```Text
UI indicators:
- Editable fields are underlined on hover and show an Edit (pencil) icon.
- Images (relative paths):
  - images/Inline_Edit_Indicators_5dec6b1.png
  - images/Inline_Editing_a_Field_24c44a4.png
  - images/Inline_Editing_a_Field_Group_644bea3.png

Activation:
- Click Edit icon, OR double-click field (not on responsive tables), OR press Enter when field has focus.

Save / Cancel:
- Save: click Save (check) icon or press Enter.
- Cancel: click Cancel (x) icon or press Esc.

Behavior:
- Editing updates the active version of the object directly (PATCH); no draft created.
- For connected field groups, changes across the group are submitted in a single request.
- Inline edit supports standard input types: value help, date/time pickers, RU values, etc.
```

STEP: 4 — Error management during inline edit

DESCRIPTION: How errors are surfaced and how users can fix them via inline edit. Explain limitations when error references off-page fields.

LANGUAGE: Text

CODE:
```Text
Error handling:
- On submit error, show message button in page footer.
- Fields related to the error are opened in edit mode so user can correct them.
- If a related field belongs to a connected field group, the entire group is opened for edit.
- If the error references a field not displayed on the page, inline edit cannot fix it; user must switch to full edit mode.

Reference image:
- images/Error_Caused_by_Inline_Editing_43ead48.png
```

STEP: 5 — Action execution and navigation during inline edit

DESCRIPTION: Behavior when triggering actions or navigation while inline edit changes are in progress. Include caution for external navigation.

LANGUAGE: Text

CODE:
```Text
Action / Navigation handling:
- Triggering an action or navigation from a table prompts user to Save or Discard ongoing inline edit change.
- After user chooses, the action executes or navigation proceeds.
Caution:
- Navigation triggered from browser navigation icons, FLP header, or intent-based navigation will occur and any inline edit changes will be lost.
Reference image:
- images/Prompt_to_Save_or_Discard_Changes_Navigation_a6b0edd.png
```

STEP: 6 — Manifest configuration overview

DESCRIPTION: Inline edit must be enabled at the page (component) level in manifest.json. Use inlineEdit settings with parameters: enabledFields, disabledFields, connectedFields. Parameter rules and behavior are described here.

LANGUAGE: Text

CODE:
```Text
Manifest settings (high-level):
- inlineEdit: {
    "enabledFields": [<property names or FieldGroup annotation references>],
    "disabledFields": [<property names or FieldGroup annotation references>],
    "connectedFields": [<arrays of property names or FieldGroup annotation references>]
  }

Rules:
- If disabledFields is an empty array ( [] ), inline edit is enabled for all fields.
- Use property names (e.g., BeginDate) or UI FieldGroup annotation references (e.g., @com.sap.vocabularies.UI.v1.FieldGroup#TripData).
- connectedFields groups fields that must be edited together and submitted as a single request.
Tip:
- Immediate side effects are NOT supported for source/target properties that are in the same connectedFields group (the side effect will not be triggered).
```

STEP: 7 — Example 1: Enable inline edit for all fields in List Report

DESCRIPTION: manifest.json configuration to enable inline edit for all fields by setting disabledFields to an empty array. Use this for list reports where inline edit should be globally available.

LANGUAGE: JSON

CODE:
```JSON
"TravelList": {
    "type": "Component",
    "name": "sap.fe.templates.ListReport",
    "id": "TravelList",
    "options": {
        "settings": {
            "inlineEdit": {
                "disabledFields": []
            },
            "contextPath": "/Travel",
            "initialLoad": "Enabled",
            "navigation": {
                "Travel": {
                    "detail": {
                        "route": "TravelObjectPage"
                    }
                }
            }
        }
    }
}
```

STEP: 8 — Example 2: Enable a subset of fields and define connected fields

DESCRIPTION: manifest.json configuration enabling specific fields and defining a connected field group (BeginDate & EndDate) to be edited together. Use property names in enabledFields and nested arrays in connectedFields.

LANGUAGE: JSON

CODE:
```JSON
"TravelList": {
    "type": "Component",
    "name": "sap.fe.templates.ListReport",
    "id": "TravelList",
    "options": {
        "settings": {
            "inlineEdit": {
                "enabledFields": ["to_Customer_CustomerID", "BeginDate","EndDate", "BookingFee"],
                "connectedFields": [["BeginDate", "EndDate"]]
            },
            "contextPath": "/Travel",
            "initialLoad": "Enabled",
            "navigation": {
                "Travel": {
                    "detail": {
                        "route": "TravelObjectPage"
                    }
                }
            }
        }
    }
}
```

STEP: 9 — Example 3: Enable fields using FieldGroup annotations and mixed connectedFields

DESCRIPTION: manifest.json for an Object Page where enabledFields references UI FieldGroup annotations and an OData navigation property field group. connectedFields mixes arrays of property names and a FieldGroup annotation reference.

LANGUAGE: JSON

CODE:
```JSON
"TravelObjectPage": {
    "type": "Component",
    "id": "TravelObjectPage",
    "name": "sap.fe.templates.ObjectPage",
    "options": {
        "settings": {
            "entitySet": "Travel",
            "inlineEdit": {
               "enabledFields": ["@com.sap.vocabularies.UI.v1.FieldGroup#TripData", "to_Booking/@com.sap.vocabularies.UI.v1.FieldGroup#Flight"],
                "connectedFields": [
                    ["BeginDate", "EndDate"],
                    "to_Booking/@com.sap.vocabularies.UI.v1.FieldGroup#Flight"
                ]
            }
        }
    }
}
```

STEP: 10 — Back-end configuration and behavior

DESCRIPTION: Inline edit issues direct PATCH to active entity (bypass draft). Ensure back-end supports direct updates and, for CAP, bypass-draft settings.

LANGUAGE: Text

CODE:
```Text
Back-end behavior:
- Inline edit patches the active version directly (no draft created).
ABAP:
- Follow ABAP RAP implementation recommendations for business objects.
- Reference: https://help.sap.com/docs/abap-cloud/abap-rap/abap-restful-application-programming-model

CAP Node.js:
- Ensure bypass draft option is configured correctly.
- Reference: https://cap.cloud.sap/docs/node.js/fiori#bypassing-the-sap-fiori-draft-flow

CAP Java:
- Ensure bypass draft option is configured correctly.
- Reference: https://cap.cloud.sap/docs/java/fiori-drafts#bypassing-draft-flow
```
--------------------------------

**TITLE**: Input Assistance (SAP Fiori elements for OData V4) — Implementation & Code Examples

**INTRODUCTION**: This document provides actionable steps and exact code examples for enabling, modeling, disabling, and handling input assistance (recommendations) in SAP Fiori elements applications using OData V4. Use these steps to model backend annotations, trigger recommendation updates, disable recommendations in the front end, and implement the onBeforeAcceptRecommendations hook to filter unaccepted recommendations.

**TAGS**: fiori-elements, OData V4, UI.Recommendations, input-assistance, annotations, side-effects, metadata, recommendations

STEP: 1 — Applicability, Notes, and Restrictions

DESCRIPTION:
- Input Assistance applies to SAP Fiori elements for OData V4 only.
- In edit mode, fields can show recommendations in a "Recommendations" section. One recommendation can be marked as suggestion and shown as a styled placeholder.
- If a field has a ValueState from backend messages, the recommendation placeholder is suppressed and backend messages are shown instead.
- Do not provide input assistance for fields with business-defined values or user-defined values (empty fields are an exception only when empty is valid).
- Avoid hiding recommendation fields (or their containers) in UI adaptation mode.
- Restrictions (recommendations are NOT available for):
  - Fields without value help (except fields with a drop-down list).
  - Fields with business-defined values (side effects).
  - Fields with multiple values.
  - Custom fields.
  - Fields whose value help entity has more than one key field.

LANGUAGE: Text

CODE:
```Text
Notes and restrictions summarized:
- Applies: SAP Fiori elements for OData V4 only.
- Recommendation placeholder suppressed when ValueState exists.
- Not supported: fields without value help (except dropdown), business-defined fields, multi-value fields, custom fields, fields whose value-help entity has >1 key.
```

STEP: 2 — Model UI.Recommendations at Entity Level (Required Backend Metadata)

DESCRIPTION:
- Add UI.Recommendations annotation at the entity level to point to a complex property (example: SAP_Recommendations).
- The complex property (SAP_Recommendations) must be defined on the entity and reference a complex type that lists recommendation-relevant properties.
- For each recommendation-relevant property, define a collection complex type describing incoming recommendation values (RecommendedFieldValue, RecommendedFieldDescription, RecommendedFieldScoreValue, RecommendedFieldIsSuggestion).
- Ensure the complex types match the backend implementation exactly so the Fiori elements framework reads recommendations properly.

LANGUAGE: XML

CODE:
```xml
<Annotations Target="com.c_salesordermanage_sd.SalesOrderManage">
    <Annotation Term="UI.Recommendations" Path="SAP_Recommendations" />
</Annotations>
```

STEP: 3 — Add Complex Property on Entity for Recommendations

DESCRIPTION:
- Add a property on the EntityType that points to the complex type used to hold recommendations (property name in examples: SAP_Recommendations).
- Keep the sample EntityType structure intact and ensure types and property names match runtime metadata.

LANGUAGE: XML

CODE:
```xml
<EntityType Name="SalesOrderManage">
    <Key>
        <PropertyRef Name="ID"/>
    </Key>
    <Property Name="ID" Type="Edm.Guid" Nullable="false"/>
    <Property Name="ShippingCondition" Type="Edm.String" MaxLength="2"/>
    <NavigationProperty Name="_ShipToParty" Type="com.c_salesordermanage_sd.HeaderShipToParty" />
    <Property Name="SAP_Recommendations" Type="com.c_salesordermanage_sd.c_salesordermanage_sd_SalesOrderRecommendations"/> // This is for the recommendations
</EntityType>
```

STEP: 4 — Define Complex Type Listing Recommendation-Relevant Properties

DESCRIPTION:
- Define a complex type that lists properties of the entity that can receive recommendations. Each listed property is typed as a Collection of a recommendation-type complex type.

LANGUAGE: XML

CODE:
```xml
// SalesOrderManage entity
<ComplexType Name="c_salesordermanage_sd_SalesOrderRecommendations">
    <Property Name="ShippingCondition" Type="Collection(com.c_salesordermanage_sd.c_salesordermanage_sd_ShippingConditionRecommendationType)" Nullable="false"/>
    <Property Name="ShipToParty" Type="Collection(com.c_salesordermanage_sd.c_salesordermanage_sd_ShipToPartyRecommendationType)" Nullable="false"/>
</ComplexType>
```

STEP: 5 — Define Recommendation Complex Types (Structure of Incoming Recommendations)

DESCRIPTION:
- For each recommendation-relevant field, define a complex type with the following properties:
  - RecommendedFieldValue: recommended value (Edm.* type)
  - RecommendedFieldDescription: display text for suggestion values
  - RecommendedFieldScoreValue: confidence score (not used by frontend)
  - RecommendedFieldIsSuggestion: boolean, true => displayed as placeholder styled suggestion
- Match MaxLength/Type/Scale to backend implementation.

LANGUAGE: XML

CODE:
```xml
<ComplexType Name="c_salesordermanage_sd_ShippingConditionRecommendationType">
    <Property Name="RecommendedFieldValue" Type="Edm.String" MaxLength="2"/>
    <Property Name="RecommendedFieldDescription" Type="Edm.String" MaxLength="20"/>
    <Property Name="RecommendedFieldScoreValue" Type="Edm.Decimal" Scale="variable"/>
    <Property Name="RecommendedFieldIsSuggestion" Type="Edm.Boolean"/>
</ComplexType>
<ComplexType Name="c_salesordermanage_sd_ShipToPartyRecommendationType">
    <Property Name="RecommendedFieldValue" Type="Edm.String" MaxLength="10"/>
    <Property Name="RecommendedFieldDescription" Type="Edm.String" MaxLength="90"/>
    <Property Name="RecommendedFieldScoreValue" Type="Edm.Decimal" Scale="variable"/>
    <Property Name="RecommendedFieldIsSuggestion" Type="Edm.Boolean"/>
</ComplexType>
```

STEP: 6 — Recommendation Field Property Meanings (Reference)

DESCRIPTION:
- Use the following properties in recommendation complex types:
  - RecommendedFieldValue: The recommended value.
  - RecommendedFieldDescription: Text description (only used when RecommendedFieldIsSuggestion=true).
  - RecommendedFieldScoreValue: Confidence score (not used by Fiori client).
  - RecommendedFieldIsSuggestion: Set true for the most fitting recommendation — displayed as placeholder suggestion.

LANGUAGE: Text

CODE:
```Text
Property descriptions:
- RecommendedFieldValue: recommended value
- RecommendedFieldDescription: description for display when IsSuggestion=true
- RecommendedFieldScoreValue: confidence score (not used by frontend)
- RecommendedFieldIsSuggestion: when true -> shown as placeholder suggestion
```

STEP: 7 — Ensure Consistent Labels for Recommended Fields

DESCRIPTION:
- When unaccepted recommendations dialog appears at save, the dialog uses the property-level label for the recommended field.
- If a UI.DataField wraps the property, the object page label may differ (comes from UI.DataField). For consistent naming, ensure the property-level label equals the UI.DataField label for recommended fields.
- Dialog groups recommendations under the entity using UI.HeaderInfo.TypeName. This group name may differ from the page field group label (UI.ReferenceFacet label).

LANGUAGE: Text

CODE:
```Text
Action items:
- Ensure property-level label = UI.DataField label for recommended fields.
- Verify UI.HeaderInfo.TypeName for correct grouping in the Unaccepted Recommendations dialog.
```

STEP: 8 — Disable Input Assistance from Front End (Feature Toggle)

DESCRIPTION:
- If metadata contains recommendation annotations but you want to disable recommendation UI and behavior, call initializeFeatureToggles() and changePageConfiguration() in your AppComponent to switch off the feature.

LANGUAGE: JavaScript

CODE:
```javascript
sap.ui.define(["sap/fe/core/AppComponent"], function (AppComponent) {
    "use strict";
    return AppComponent.extend("recommendation-disableInputAssistance.Component", {
        ...
        initializeFeatureToggles: function () {
            this.changePageConfiguration("sap.fe", "app/disableInputAssistance", true);
        }
    });
});
```

STEP: 9 — Triggers for Recommendation Calls (When Backend Is Called)

DESCRIPTION:
- Recommendations are requested when:
  - A new context is created/loaded (Create in list report or new inline table row).
  - Draft version of object is loaded (Edit).
  - A draft is restored or page refreshed/back navigation restores draft.
  - Scrolling loads more content (sections/tabs/tables).
  - A configured field value changes (field triggers recommendation update).
- Use side-effects to trigger recommendation fetches from backend when a field or action changes.

LANGUAGE: Text

CODE:
```Text
Recommendation triggers:
- On create/new row, on edit/load draft, app state restore, scroll-loading of content, and on configured field change.
- Use Common.SideEffects annotation to fetch recommendation complex property.
```

STEP: 10 — Use Side Effects to Fetch Recommendations (Sample Annotation)

DESCRIPTION:
- Model a Common.SideEffects record with SourceProperties and TargetProperties. Include the SAP_Recommendations property in TargetProperties to fetch recommendations for all recommendation-relevant fields on that entity when the side effect is fired.
- When a configured source property changes, the backend must return updated recommendations in the SAP_Recommendations complex property for the entity.

LANGUAGE: XML

CODE:
```xml
<Annotation Term="Common.SideEffects" Qualifier="SoldToChangeSalesAreaShipTo">
    <Record Type="Common.SideEffectsType">
        <PropertyValue Property="SourceProperties">
            <Collection>
                <PropertyPath>SoldToParty</PropertyPath>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="TargetProperties">
            <Collection>
                <String>DistributionChannel</String>
                <String>OrganizationDivision</String>
                <String>TotalNetAmount</String>
                <String>SAP_Recommendations</String> // This brings in recommendations for all recommendation-relevant properties in this entity
                <String>_ShipToParty/*</String>
           </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

STEP: 11 — User Notifications & Unaccepted Recommendations Dialog

DESCRIPTION:
- If user tries to Save/Create while unaccepted recommendations exist (recommendation not accepted and no alternate value entered), display an "Unaccepted Recommendations" dialog listing fields and recommended values.
- The dialog allows accept/reject all or return to edit and handle individually.
- If navigating away from a draft that contains unaccepted recommendations, the standard confirm dialog appears first; if user proceeds to Save/Create, show Unaccepted Recommendations dialog next.
- Rejected recommendations in the same editing session are not shown again unless the context changes or new recommendations are fetched.

LANGUAGE: Text

CODE:
```Text
Behavior summary:
- Unaccepted recommendations => dialog at Save/Create.
- Allows accept/reject all or individual acceptance on page.
- Rejected recommendations are suppressed for the same session until context change.
```

STEP: 12 — Recommendations for Fields Not in Current View & Hook to Filter Backend Values

DESCRIPTION:
- Recommendations are fetched for fields not visible in current view (hidden personalization, unloaded sections). These appear in the Unaccepted Recommendations dialog.
- It is the application's responsibility (backend or onBeforeAcceptRecommendations hook) to ensure recommendations returned are only for fields with non-empty backend values.
- Implement the onBeforeAcceptRecommendations application hook to inspect and filter recommendationData before the dialog processes them. Remove entries that already have a non-empty value in the backend.

LANGUAGE: JavaScript / TypeScript

CODE:
```javascript
sap.ui.define(["sap/ui/core/mvc/ControllerExtension"], function (ControllerExtension) {
    "use strict";
  
    return ControllerExtension.extend("recommendation-basic.ext.OPExtend", {
        override: {
            recommendations: {
                onBeforeAcceptRecommendations: async function (params) {
                 // Add application logic here to ensure that from the given context (params), recommendations
                 // are returned ONLY for fields that do not have a non-empty value in the back end;
                 // remove fields with a non-empty value in back end from the recommendationData structure here.
                  params.recommendationData = returnRecommendationData;
                  return;
                },
        ...
    }
}
```

LANGUAGE: TypeScript

CODE:
```typescript
export type RecommendationData = {
    context?: ODataV4Context;
    contextIdentifier?: string[];
    contextIdentifierText?: string[];
    propertyPath?: string;
    value?: string;
    text?: string;
}
```
--------------------------------

**TITLE**: Interacting with a Generated Table (Table API) in SAP Fiori elements (OData V4)

**INTRODUCTION**: Quick, actionable guide to locate and access the Table control generated by Fiori elements (annotations) so code can call the Table building block API. Includes exact ID patterns, retrieval snippets, and controller-extension tips. Applicable only to SAP Fiori elements for OData V4.

**TAGS**: fiori-elements-framework, OData V4, UI5, Table API, developer-tools, manifest.json

**STEP**: 1 — Find the Table control ID in the running app

**DESCRIPTION**: Open browser developer tools and search the DOM/UI5 control tree for the TableAPI control ID. Use the full application-scoped ID pattern shown below. The ApplicationId value is the application id from manifest.json (project root / webapp/manifest.json or equivalent). PageId is the page id. Use the entity name for list report pages or the navigation property for object/custom pages.

**LANGUAGE**: Plain text

**CODE**:
```text
"<ApplicationId>::<PageId>–fe::table::<Entity name or navigation property>::LineItem::Table"
```

**STEP**: 2 — Example full ID (concrete example)

**DESCRIPTION**: Example of how a concrete full ID can look once you replace placeholders. Note the en-dash between PageId and fe in the pattern above (as used by Fiori elements).

**LANGUAGE**: Plain text

**CODE**:
```text
"com.example.myapp::MainPage–fe::table::SalesOrder::LineItem::Table"
```

**STEP**: 3 — Short ID form usable inside controller extensions

**DESCRIPTION**: Inside controller extensions you can reference the shorter form (no application/page prefix). Use this short ID when searching in the UI5 core or from code if applicable.

**LANGUAGE**: Plain text

**CODE**:
```text
"fe::table::<Entity name or navigation property>::LineItem::Table"
```

**STEP**: 4 — Retrieve the Table control from a running app (recommended approach)

**DESCRIPTION**: Use the full ID or short ID to retrieve the Table control via the UI5 core. This snippet gets the control and logs it so you can inspect available properties/methods. After retrieval, call any Table API properties or aggregations as required (see API reference link in step 6).

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Replace with the full or short ID discovered in steps 1-3:
var sTableId = "<ApplicationId>::<PageId>–fe::table::<Entity name or navigation property>::LineItem::Table";

// Get the Table control from the UI5 core
var oTable = sap.ui.getCore().byId(sTableId);

// Inspect the control in the console, then call Table API methods/properties
console.log(oTable);

// Example: interact with the Table after inspection
// oTable.getBinding("items")   // inspect binding
// oTable.setBusy(true)        // if supported by the Table control
```

**STEP**: 5 — Retrieve the Table control inside a controller extension (use short form)

**DESCRIPTION**: In controller extensions you can use the short ID. Use sap.ui.getCore().byId for guaranteed lookup. Optionally use this.getView().byId if the ID is view-local.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Short ID inside controller extension
var sShortTableId = "fe::table::<Entity name or navigation property>::LineItem::Table";

// Prefer core lookup for the global short ID
var oTable = sap.ui.getCore().byId(sShortTableId);
console.log(oTable);

// Or attempt view-local lookup (may not resolve if global-scoped):
var oTableLocal = this.getView().byId(sShortTableId);
console.log(oTableLocal);
```

**STEP**: 6 — Use the Table API and references

**DESCRIPTION**: After you have the Table control instance (oTable), call properties, aggregations, and methods provided by the Table building block API. Inspect the retrieved object in the console to discover available members. Refer to the official API documentation and live building-block examples for the exact Table API surface and supported operations.

**LANGUAGE**: Plain text

**CODE**:
```text
API Reference: https://ui5.sap.com/#/api/sap.fe.macros.Table
Live examples (Building Blocks - Table): https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/buildingBlocks/table/tableDefault
```

**STEP**: 7 — Tips and reminders

**DESCRIPTION**: 
- The pattern and method above apply only to SAP Fiori elements for OData V4.
- ApplicationId comes from manifest.json (project root / webapp/manifest.json).
- Use console.log(oTable) to inspect runtime API before calling methods.
- If control lookup returns null, verify the exact runtime ID string and that the table has been rendered.
--------------------------------

**TITLE**: Key User Capabilities — Fiori Elements Overview Page UI Adaptation

**INTRODUCTION**: This document describes the required roles and actionable steps for key users to perform UI adaptation in Fiori elements overview page applications. It lists available adaptation features, their behavior, and annotation best practices to ensure readable labels in adaptation mode.

**TAGS**: fiori-elements-framework, sapui5, flexibility, key-user, ui-adaptation, s4hana, my-home

**STEP**: 1 — Prerequisites: Required user roles

**DESCRIPTION**: Verify the key-user role is assigned for the target deployment. Use the appropriate role below depending on your environment. See SAPUI5 Flexibility documentation at ../04_Essentials/sapui5-flexibility-adapting-uis-made-easy-a8e55aa.md for additional details.

**LANGUAGE**: json

**CODE**:
```json
{
  "SAP_BTP": {
    "requiredRole": "FlexKeyUser"
  },
  "OnPremise": {
    "requiredRole": "SAP_UI_FLEX_KEY_USER"
  }
}
```

**STEP**: 2 — Enable UI adaptation mode

**DESCRIPTION**: Enter adaptation mode from the running Fiori application. This is a UI action performed by the assigned key user.

- Open the application in the browser.
- From the User Menu, choose "Adapt UI".
- Once in adaptation mode, use the adaptation toolbar/panels (e.g., Manage Cards, Edit Card, Filters, Variants).

**LANGUAGE**: plaintext

**CODE**:
```plaintext
UI action sequence:
1. Open Fiori app (Overview Page).
2. Click User Menu (top-right).
3. Select "Adapt UI".
4. Use adaptation panels: Manage Cards, Filters, Variants, etc.
```

**STEP**: 3 — Feature: Hide Card

**DESCRIPTION**: Hide a card so it is not shown on initial load. Hidden cards remain available in the Manage Cards list and can be restored by the key user.

**LANGUAGE**: plaintext

**CODE**:
```plaintext
Action: Select card -> Choose "Hide"
Result: Card removed from initial view; appears in Manage Cards for re-add.
```

**STEP**: 4 — Feature: Add Card

**DESCRIPTION**: Add hidden/available cards back to the page from the list of available cards in Manage Cards.

**LANGUAGE**: plaintext

**CODE**:
```plaintext
Action: Open Manage Cards -> Select available card(s) -> Choose "Add"
Result: Card placed on overview page according to available layout slots.
```

**STEP**: 5 — Feature: Edit Card

**DESCRIPTION**: Modify card properties: title, subtitle, KPI header, KPI value, description, chart type, sorting, navigation. For column charts you may configure threshold values that influence semantic coloring. You can disable adding individual cards to the "Insights" section only if card generation for Insights in My Home (SAP S/4HANA Cloud Public Edition) is enabled.

**LANGUAGE**: plaintext

**CODE**:
```plaintext
Editable properties:
- title, subtitle
- KPI header, KPI value, description
- chart type, sorting, navigation (target)
- column chart: threshold values => semantic coloring
- Insights inclusion: toggle (only when My Home Insights generation is enabled)
```

**STEP**: 6 — Feature: Add/Delete Views (View Switch)

**DESCRIPTION**: Add or remove view switch fields to a card to present multiple views or datasets. Use the Add/Delete Views action to configure available views per card.

**LANGUAGE**: plaintext

**CODE**:
```plaintext
Action: Edit card -> Add/Delete Views -> Configure view keys and content bindings
Result: Card displays view switch (tab/select) to toggle views.
```

**STEP**: 7 — Feature: Modify Card Size

**DESCRIPTION**: Resize cards by adjusting rows/columns span. Use the layout controls in adaptation mode to change card dimensions.

**LANGUAGE**: plaintext

**CODE**:
```plaintext
Action: Select card -> Choose "Resize" -> Set rows/columns
Result: Card occupies configured grid cells on overview page.
```

**STEP**: 8 — Feature: Create Card

**DESCRIPTION**: Create new static cards. Supported new card types: static link list card and KPI card. Use the Create Card action in adaptation mode and provide required metadata (title, links or KPI binding).

**LANGUAGE**: plaintext

**CODE**:
```plaintext
Create options:
- Static Link List Card: define links and labels
- KPI Card: define KPI data binding, title, description
Limitations: Only static link list and KPI cards can be created via adaptation.
```

**STEP**: 9 — Feature: Basic Card Operations (Cut/Copy/Paste/Save/Cancel/Reset/Publish)

**DESCRIPTION**: Perform general card operations available in adaptation mode: cut, copy, paste, save changes, cancel edits, reset to last saved state, and publish changes (make persistent for users).

**LANGUAGE**: plaintext

**CODE**:
```plaintext
Operations:
- Cut/Copy/Paste: move or duplicate cards
- Save: persist current adaptation locally or as transport (if applicable)
- Cancel: discard unsaved changes
- Reset: revert to last persisted state
- Publish: make changes available to all users (when supported)
```

**STEP**: 10 — Feature: Adapt Filters

**DESCRIPTION**: Add or remove filter fields from the filter bar. Add specific values to filters. Changes can be saved to variants (new or existing).

**LANGUAGE**: plaintext

**CODE**:
```plaintext
Action: Enter adaptation -> Open Filter Bar -> Add/Remove fields -> Optionally set default values
Save: Save current filter configuration as a variant or overwrite an existing variant
```

**STEP**: 11 — Feature: Adapt Variants

**DESCRIPTION**: Manage view variants: rename an existing view, save the current view, save current view as a new view, and manage (delete, reorder) variants.

**LANGUAGE**: plaintext

**CODE**:
```plaintext
Actions:
- Rename variant
- Save variant (overwrite)
- Save As: create new variant from current view
- Manage: delete/reorder variants
```

**STEP**: 12 — Best Practices: Maintain property labels for annotations

**DESCRIPTION**: Ensure readable labels in UI adaptation mode by providing the recommended property labels for key annotations. This mapping helps adaptation UI display meaningful names.

**LANGUAGE**: json

**CODE**:
```json
{
  "AnnotationLabelMapping": {
    "PresentationVariant": "text",
    "SelectionVariant": "text",
    "DataPoint": "title",
    "IdentificationAnnotation": "label (based on priority in DataFieldForIntentBasedNavigation / DataFieldWithURL)",
    "chartAnnotation": "description"
  }
}
```

**STEP**: 13 — Notes and constraints

**DESCRIPTION**: Preserve these constraints when implementing or automating adaptation tasks:

- Column chart semantic coloring via threshold values applies only to column chart cards.
- Insights inclusion toggle is available only when card generation for the Insights section of My Home (SAP S/4HANA Cloud Public Edition) is enabled.
- Created cards are limited to static link list and KPI card types.
- Role names are exact and case-sensitive: "FlexKeyUser" (BTP) and "SAP_UI_FLEX_KEY_USER" (on premise).

**LANGUAGE**: plaintext

**CODE**:
```plaintext
Constraints:
- Role names: FlexKeyUser (BTP), SAP_UI_FLEX_KEY_USER (on premise)
- Column chart thresholds => semantic coloring only for column charts
- Insights toggle depends on My Home Insights generation setting
- Creation limited to static link list & KPI cards
```
--------------------------------

**TITLE**: Key Value Facet (UI.DataPoint) — Create a key/value data point and render as ReferenceFacet

**INTRODUCTION**: Show how to define a UI.DataPoint annotation (key/value) and reference it from a UI.ReferenceFacet so the title and value are rendered as a key/value facet in SAP Fiori Elements. Includes examples for XML OData annotations, ABAP CDS, and CAP CDS, plus how to color the data point using Criticality and notes about link behavior and navigation.

**TAGS**: fiori-elements-framework, UI.DataPoint, ReferenceFacet, annotations, OData V4, ABAP CDS, CAP CDS, XML, criticality, navigation

**STEP**: 1 — Define a UI.DataPoint annotation (basic title + value)

**DESCRIPTION**: Create a UI.DataPoint annotation (qualified) that provides a Title and Value. This DataPoint can then be referenced from a UI.ReferenceFacet to render a key/value facet. The image shows how a UI.DataPoint title and value are rendered: images/Key_Value_Facet_aed9f13.jpg

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.DataPoint" Qualifier="ProductCategory">
      <Record>
            <PropertyValue Property="Value" Path="ProductCategory"/>
            <PropertyValue Property="Title" String="{@i18n>ProductCategory}"/>
      </Record>
</Annotation>
```

**LANGUAGE**: ABAP CDS

**CODE**:
```abap
@UI.dataPoint: {
  title: '{@i18n>@ProductCategory}'
}
ProductCategory;
```

**LANGUAGE**: CDS

**CODE**:
```cds
UI.DataPoint #ProductCategory : {
    Value : ProductCategory,
    Title : '{@i18n>@ProductCategory}'
}
```

**STEP**: 2 — Render DataPoint as a ReferenceFacet in the UI (action)

**DESCRIPTION**: Reference the qualified UI.DataPoint from a UI.ReferenceFacet in your UI annotation manifest or OData UI annotations so the title and value are rendered as a key/value facet. (Create a UI.ReferenceFacet that targets the DataPoint qualifier created in Step 1.)

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Example: A ReferenceFacet that would reference the DataPoint qualifier -->
<!-- Ensure this is placed where facets are defined in your OData UI annotations -->
<Annotation Term="UI.Facets">
  <Collection>
    <Record Type="UI.ReferenceFacet">
      <PropertyValue Property="Target" String="UI.DataPoint#ProductCategory"/>
      <PropertyValue Property="Label" String="Product Category"/>
    </Record>
  </Collection>
</Annotation>
```

**STEP**: 3 — Color the DataPoint based on Criticality (availability example)

**DESCRIPTION**: Add a Criticality property to the UI.DataPoint to render the value with color indicating criticality. Examples for XML, ABAP CDS, and CAP CDS are provided. The Criticality property can be a path to a field that calculates criticality.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.DataPoint" Qualifier="StockAvailability">
      <Record Type="UI.DataPointType">
           <PropertyValue Property="Title" String="Availability" />
           <PropertyValue Property="Value" Path="stock/availability" />
           <PropertyValue Property="Criticality" Path="stock/availability"/>
      </Record>
</Annotation>
```

**LANGUAGE**: ABAP CDS

**CODE**:
```abap
@UI.dataPoint: {
  title: 'Availability',
  criticality: 'stock/availability'
}
stock/availability;
```

**LANGUAGE**: CDS

**CODE**:
```cds
UI.DataPoint #StockAvailability : {
    Value : stock/availability,
    Title : Availability,
    Criticality : stock/availability
}
```

**STEP**: 4 — Semantic object on DataPoint value (link behavior and limitation)

**DESCRIPTION**: If you add a semantic object annotation to the DataPoint value field, the value is shown as a link but criticality styling is not shown on that linked value. Use semantic object annotations when you need outbound navigation from the value, but be aware of this limitation.

**LANGUAGE**: (documentation reference)

**CODE**:
```text
Tip: For information about adding the semantic object annotation, see:
- Using a Link section in Navigation from an App (Outbound Navigation): navigation-from-an-app-outbound-navigation-d782acf.md
```

**STEP**: 5 — Enable navigation from DataPoint title (OData V4 additional feature)

**DESCRIPTION**: For SAP Fiori Elements on OData V4, you can enable in-page and external navigation from a DataPoint title. See the Navigation from Header Facet Title documentation for details and implementation examples.

**LANGUAGE**: (documentation reference)

**CODE**:
```text
Note: You can also enable in-page and external navigation from a data point title.
See: Navigation from Header Facet Title => navigation-from-header-facet-title-fa0ca22.md
```
--------------------------------

**TITLE**: SAP Fiori Elements — Keyboard Shortcuts Reference and Manifest Configuration Examples

**INTRODUCTION**: This document provides a concise, code-focused reference of standard keyboard shortcuts in SAP Fiori elements and concrete manifest/annotation examples to (1) redirect standard shortcuts to custom actions (OData V2), (2) define new shortcuts for custom actions, and (3) assign shortcuts to annotation-based action and navigation buttons (both OData V2 and OData V4 scenarios). Use these snippets directly in manifest.json and annotation files when implementing custom keyboard behavior.

**TAGS**: fiori-elements, keyboard-shortcuts, manifest.json, annotations, odata-v2, odata-v4, sap.ui.commands, DataFieldForAction, DataFieldForIntentBasedNavigation

STEP: Standard Keyboard Shortcuts Reference

DESCRIPTION: Use this concise mapping when implementing or testing keyboard-driven behavior. The focus/prerequisite column indicates where keyboard focus must be for the shortcut to trigger. Use this reference to ensure your UI state and focus management align with shortcut behavior.

LANGUAGE: Text

CODE:
```text
Standard keyboard shortcuts (Windows / Mac) — prerequisites and result summary:

- Cancel/Discard Draft
  - Shortcut: [Esc] / [Esc]
  - Prerequisite: Focus anywhere on the object page in edit mode.
  - Floorplan: Object page
  - Result: Same as clicking Cancel (non-draft) or Discard Draft (draft apps).

- Create
  - Shortcut: Ctrl + Enter / Cmd + Enter
  - Prerequisite: Focus on the table.
  - Floorplans: List report, Object page
  - Result: Same as choosing Create.

- Create with filters (not applicable to OData V4)
  - Shortcut: Shift + Ctrl + Enter / Shift + Cmd + Enter
  - Prerequisite: Focus on the table.
  - Floorplan: List report
  - Result: Same as Create With Filters.

- Delete (page level)
  - Shortcut: Ctrl + Del / Cmd + fn + delete (use ← if no delete key)
  - Prerequisite: Focus anywhere on the object page in display mode.
  - Floorplan: Object page
  - Result: Same as Delete on object page.

- Delete table entry
  - Shortcut: Ctrl + D / Cmd + D
  - Prerequisite: Focus on the table.
  - Floorplans: List report, Object page
  - Result: Same as Delete in a table.
  - Note: Requires selection for multi-delete or focus for single delete. Only works on read-only/display-only content.

- Edit page level
  - Shortcut: Ctrl + E / Cmd + E
  - Prerequisite: Focus anywhere on the object page.
  - Floorplan: Object page
  - Result: Same as Edit on object page.

- Export as
  - Shortcut: Shift + Ctrl + E / Shift + Cmd + E
  - Prerequisite: Focus on the table.
  - Floorplans: Analytical list page, List report, Object page
  - Result: Same as Export to Excel > Export As.

- Go (SmartFilterBar)
  - Shortcut: Enter / Enter
  - Prerequisite: Focus on SmartFilterBar input.
  - Floorplans: Analytical list page, List report, Object page
  - Result: Triggers search in SmartFilterBar.

- Go (Visual filter) — not applicable to OData V4
  - Shortcut: Ctrl + Enter / Cmd + Enter
  - Prerequisite: Focus on visual filter panel or its elements.
  - Floorplan: Analytical list page (visual filter)
  - Result: Triggers Go in visual filter.

- Open error list
  - Shortcut: Ctrl + Shift + M / Cmd + Shift + M
  - Prerequisite: Focus anywhere on object page in edit mode.
  - Floorplan: Object page
  - Result: Same as choosing Error button.

- Save page level
  - Shortcut: Ctrl + S / Cmd + S
  - Prerequisite: Page in edit mode, focus anywhere on object page.
  - Floorplan: Object page
  - Result: Same as Save on object page.

- Select row in tables
  - Shortcut: Shift + Space / Shift + Space
  - Prerequisite: Focus on a table cell.
  - Floorplans: Analytical list page, List report, Object page
  - Result: Selects entire row.

- Share (not applicable to OData V4)
  - Shortcut: Shift + Ctrl + S / Shift + Cmd + S
  - Prerequisite: Focus anywhere on list report or object page (if on filter bar opens near Share).
  - Floorplans: Analytical list page, List report, Object page
  - Result: Opens share ActionSheet.

- Table settings
  - Shortcut: Ctrl + , / Ctrl + ,
  - Prerequisite: Focus on the table.
  - Floorplans: Analytical list page, List report, Object page
  - Result: Same as Table Settings.
```

STEP: Redirect Standard Shortcuts to Custom Actions (OData V2)

DESCRIPTION: To have standard shortcuts (Create, Delete, Edit, Save) trigger your custom action handlers, add a logicalAction property to the action definition in manifest.json for the corresponding template/page. The custom action inherits general properties and overrides the standard action (shortcut, rendering position, properties) unless explicitly defined. Ensure the standard action would be rendered normally (same prerequisites).

LANGUAGE: JSON

CODE:
```json
"sap.suite.ui.generic.template.ListReport.view.ListReport": {
    "controllerName": "STTA_SO_ND.ext.controller.ListReportExtension",
    "sap.ui.generic.app": {
        "STTA_C_SO_SalesOrder_ND": {
            "EntitySet": "STTA_C_SO_SalesOrder_ND",
            "Actions": {
                "CreateExt": {
                    "id": "CreateExt",
                    "text": "Create (Ext)",
                    "press": "onCreateWithParameters",
                    "logicalAction": "Create"
                }
            }
        }
    }
}
```

LANGUAGE: JSON

CODE:
```json
 "sap.suite.ui.generic.template.ObjectPage.view.Details": {
    "controllerName": "STTA_SO_ND.ext.controller.DetailsExtension",
    "sap.ui.generic.app": {
        "STTA_C_SO_SalesOrder_ND": {
            "EntitySet": "STTA_C_SO_SalesOrder_ND",
            "Header": {
                "Actions": {
                    " MySmartTableDelete": {
                        "id": "customdelete",
                        "text": "Custom Delete",
                        "press": "fnCustomDelete",
                        "logicalAction": "Delete"
                    }
                }
            },
            "Sections": {
                "to_Item::com.sap.vocabularies.UI.v1.LineItem": {
                    "id": "to_Item::com.sap.vocabularies.UI.v1.LineItem",
                    "Actions": {
                        "MySmartTableCreate": {
                            "id": "customcreate",
                            "text": "CustomCreate",
                            "press": " fnCustomCreate",
                            "logicalAction": "Create"
                        }
                    }
                }
            }
        }
    }
},
```

STEP: Redirect Supported Shortcuts (OData V2) — Quick Reference

DESCRIPTION: Use these logicalAction names when redirecting shortcuts in the manifest (as shown above). Confirm prerequisite/focus rules before overriding.

LANGUAGE: Text

CODE:
```text
List Report:
- logicalAction "Create"  -> Ctrl + Enter
- logicalAction "CreateWithFilters" -> Shift + Ctrl + Enter
- logicalAction "Delete" -> Ctrl + D

Object Page:
- Header:
  - "Save" -> Ctrl + S
  - "Edit" -> Ctrl + E
  - "Delete" -> Ctrl + Del
- Sections:
  - "Create" -> Ctrl + Enter
  - "Delete" -> Ctrl + D
```

STEP: Define New Keyboard Shortcuts for Custom Actions (List Report example)

DESCRIPTION: Define a sap.ui.commands command in manifest.json under sap.ui5->extends->extensions->sap.ui.commands. Reference the command from your action in the sag.ui.generic.app Actions block using the "command" property. The description property becomes the label shown in the keyboard shortcuts popup.

LANGUAGE: JSON

CODE:
```json
"extends": {
    "extensions": {
        "sap.ui.commands": {
            "sap.suite.ui.generic.template.ListReport#sap.suite.ui.generic.template.ListReport::STTA_C_MP_Product": {
                "ChangePriceCommand": {
                    "shortcut": "Ctrl+G",
                    "description": "Change Price"
                }
            },
        },
        "sap.ui.controllerExtensions": {
            "sap.suite.ui.generic.template.ListReport.view.ListReport": {
                "controllerName": "STTA_MP.ext.controller.ListReportExtension",
                "sap.ui.generic.app": {
                    "STTA_C_MP_Product": {
                        "EntitySet": "STTA_C_MP_Product",
                        "Actions": {
                            "ChangePrice": {
                                "id": "ChangePrice",
                                "text": "Change price",
                                "press": "onChangePrice",
                                "command": "ChangePriceCommand"
                            },
                        }
                    }
                }
            }
        }
    }
}
```

STEP: Define Custom Shortcut for DataFieldForAction (Annotation + manifest mapping)

DESCRIPTION: For DataFieldForAction (annotation-driven action), add the action annotation referencing an OData FunctionImport and map the function to a command name in manifest under sap.ui.generic.app.pages.component.settings.annotatedActions. Then define the command shortcut under sap.ui.commands in sap.ui5->extends->extensions. This connects annotation-driven actions to keyboard shortcuts.

LANGUAGE: XML

CODE:
```xml
<Record Type="UI.DataFieldForAction">
    ...
    <PropertyValue Property="Action" String="<Schema Namespace>.<EntityContainer Name>/<FunctionImport Name>" />
</Record>
```

LANGUAGE: JSON

CODE:
```json
"sap.ui5": {
    "extends": {
        "extensions": {
            "sap.ui.commands": {
                "<Component Name>#<Component ID without app ID prefix>": {
                    "<Command Name>": {
                        "shortcut": "Ctrl+B"
                    }
                }
            }
        }
    }
},
"sap.ui.generic.app": {
    "pages": {
        "ListReport|<Entity Set Name>": {
            "component": {
                "settings": {
                    "annotatedActions": {
                        "<FunctionImport Name>": {
                            "command": "<Command Name>"
                        }
                    }
                }
            }
        }
    }
}
```

STEP: Define Custom Shortcut for DataFieldForIntentBasedNavigation (Annotation + manifest mapping)

DESCRIPTION: For DataFieldForIntentBasedNavigation, ensure a matching outbound navigation exists with the same semantic object and action. Map the outbound navigation to a command name in sap.ui.generic.app.pages.component.settings.outbounds, then define the command->shortcut mapping under sap.ui.commands in sap.ui5->extends->extensions.

LANGUAGE: XML

CODE:
```xml
<Record Type="UI.DataFieldForIntentBasedNavigation">
    <PropertyValue Property="SemanticObject" String="<Semantic Object>" />
    <PropertyValue Property="Action" String="<Action>" />
</Record>
```

LANGUAGE: JSON

CODE:
```json
"sap.app": {
    "crossNavigation": {
        "inbounds": {},
        "outbounds": {
            "<Outbound Navigation Name>": {
                "semanticObject": "<Semantic Object>",
                "action": "<Action>"
            }
        }
    }
},
"sap.ui5": {
    "extends": {
        "extensions": {
            "sap.ui.commands": {
                "<Component Name>#<Component ID without app ID prefix>": {
                    "<Command Name>": {
                        "shortcut": "Ctrl+B"
                    }
                }
            }
        }
    }
},
"sap.ui.generic.app": {
    "pages": {
        "ListReport|<Entity Set Name>": {
            "component": {
                "settings": {
                    "outbounds": {
                        "<Outbound Navigation Name>": {
                            "command": "<Command Name>"
                        }
                    }
                }
            }
        }
    }
}
```

STEP: OData V4 — Default Positive Action and Command Mapping

DESCRIPTION: For OData V4 apps, Ctrl+Enter (Windows) or Cmd+Return (Mac) triggers the default positive action (page-level) if the focus isn't on a control that uses the same keys. Standard shortcut resolution favors controls closest to focus (e.g., table create). To add custom commands or map annotation-based commands to shortcuts in Fiori Elements V4, associate a "command" in annotation settings and map that command under sap.ui5 extends sap.ui.commands. For object pages, append "#<ObjectPageID>" to the component key to scope commands to an object page instance.

LANGUAGE: JSON

CODE:
```json
"@com.sap.vocabularies.UI.v1.LineItem": {
    "actions": {
        "DataFieldForAction::com.c_salesordermanage_sd.CreateWithSalesOrderType": {
            "command": "BOUND"
        }
    }
}
```

LANGUAGE: JSON

CODE:
```json
"sap.ui5": {
    "extends": {
        "extensions": {
            "sap.ui.commands": {
                "sap.fe.templates.ListReport": {
                    "BOUND": {
                        "shortcut": "Ctrl+B"
                    }
                },
                "sap.fe.templates.ObjectPage": {
                    "IBNI": {
                        "shortcut": "Ctrl+K"
                    }
                },
                "sap.fe.templates.ObjectPage#SalesOrderManageObjectPage": {
                    "IBNI": {
                        "shortcut": "Ctrl+I"
                    }
                }
            }
        }
    }
}
```

STEP: Best Practices & Restrictions (Actionable Notes)

DESCRIPTION: Use these rules when implementing shortcuts to avoid conflicts and ensure user expectations.

LANGUAGE: Text

CODE:
```text
- Do not assign a custom shortcut that conflicts with standard Fiori Elements shortcuts.
- A shortcut is invoked only when the focus is within the control that holds the button (e.g., table toolbar actions require table focus).
- Header and footer buttons are global and will trigger irrespective of keyboard focus unless overridden by a closer control.
- Inline actions and inline navigation buttons in tables do NOT support custom keyboard shortcuts.
- For object page-scoped commands, include "#<ObjectPageID>" after the component key to scope the command to that object page instance.
- Ensure that the standard action would be rendered under current app conditions before attempting to override it with logicalAction.
```

--------------------------------

**TITLE**: Line Chart Card — Configuration Guide for Code Generation

**INTRODUCTION**: Brief, code-focused guide to implement a Line Chart Card in a Fiori Elements / UI5 card or chart component. Explains required data mapping (dimensions/measures and roles), recommended usage patterns, and enabling semantic color palette. Includes reusable JSON templates to map model properties to chart configuration.

**TAGS**: fiori-elements-framework, line-chart, chart-configuration, dimensions, measures, semantic-coloring, ui5, cards

**STEP**: 1 — Overview and requirements

**DESCRIPTION**: Summary of what a Line Chart Card displays and the minimal requirements to render it. Use this as a checklist before implementing the chart mapping.

- Line charts display information as a series of data points connected by straight-line segments.
- A line chart needs at least one measure and one dimension.
- Dimensions with role = "category" form the x-axis (category axis). If none specified, the first dimension is used.
- Dimensions with role = "series" create separate lines (different colors) per distinct series value. Multiple series-role dimensions are treated together as one composite series.
- Measures form the y-axis (value axis). Multiple measures render as multiple colored lines.
- Use time-based dimensions (day, date, quarter, year) for the category axis when visualizing trends.
- Semantic color palette is supported and can be enabled in the chart configuration.

**LANGUAGE**: Plain text

**CODE**:
```text
Checklist:
- At least 1 dimension (category)
- At least 1 measure
- Optional: 1+ series dimensions for multiple lines
- Recommended: category dimension should be time-based for trend visualization
- Optional: enable semantic color palette for coloring by value/semantic
```

**STEP**: 2 — Map dimensions and roles (JSON template)

**DESCRIPTION**: Use this JSON template to map model properties to the chart's dimensions. Assign roles explicitly: "category" for x-axis, "series" for separating lines. If you omit a category role, the chart should use the first dimension defined.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "chart": {
    "type": "Line",
    "dimensions": [
      {
        "path": "OrderDate",
        "role": "category",
        "dataType": "Date",
        "format": "yyyy-MM-dd"
      },
      {
        "path": "Region",
        "role": "series",
        "dataType": "String"
      }
    ],
    "measures": [
      {
        "path": "Revenue",
        "label": "Revenue"
      }
    ]
  }
}
```

**STEP**: 3 — Multiple measures template

**DESCRIPTION**: When multiple measures are used, each measure becomes a separate colored line. Use this JSON template to declare multiple measures. Keep dimension mapping unchanged.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "chart": {
    "type": "Line",
    "dimensions": [
      { "path": "OrderDate", "role": "category", "dataType": "Date" }
    ],
    "measures": [
      { "path": "Revenue", "label": "Revenue" },
      { "path": "Profit", "label": "Profit" },
      { "path": "Cost", "label": "Cost" }
    ]
  }
}
```

**STEP**: 4 — Composite series (multiple series dimensions)

**DESCRIPTION**: If you assign multiple dimensions the role "series", their combined values form the series key and the chart assigns a single color per combined value. Use this template to declare composite series.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "chart": {
    "type": "Line",
    "dimensions": [
      { "path": "OrderDate", "role": "category", "dataType": "Date" },
      { "path": "ProductCategory", "role": "series", "dataType": "String" },
      { "path": "SalesChannel", "role": "series", "dataType": "String" }
    ],
    "measures": [
      { "path": "Revenue", "label": "Revenue" }
    ]
  }
}
```

**STEP**: 5 — Enable semantic color palette

**DESCRIPTION**: Enable semantic coloring to map colors to semantic values (for example, good/neutral/bad). This snippet shows a generic flag and an example mapping structure. Adapt mapping keys to your charting implementation's expected properties.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "chart": {
    "type": "Line",
    "semanticColoring": true,
    "semanticPalette": {
      "Positive": "#2E7D32",
      "Neutral": "#FFC107",
      "Negative": "#D32F2F"
    },
    "dimensions": [
      { "path": "OrderDate", "role": "category" }
    ],
    "measures": [
      { "path": "Revenue" }
    ]
  }
}
```

**STEP**: 6 — Best practices and recommendations

**DESCRIPTION**: Actionable recommendations to ensure effective chart visualization and correct mapping.

- Use time-based dimensions for category axis when showing trends (day, date, quarter, year).
- Prefer a single dimension with role = "category" for clarity unless a composite category is required.
- Use role = "series" only for dimensions that should split lines; avoid unnecessary series dimensions when there are many unique values (may clutter the chart).
- When using multiple measures, ensure labels and legends are clear to distinguish lines.
- Enable semantic coloring for business-critical thresholds; otherwise use a consistent categorical palette.

**LANGUAGE**: Plain text

**CODE**:
```text
Best practices:
- Category axis: time-based dimensions recommended (day/date/quarter/year)
- Series role: use sparingly; composite series created when multiple series-role dimensions are present
- Measures: each measure becomes a separate line
- Semantic coloring: enable for value semantics (good/neutral/bad) or disable for neutral color palettes
```
--------------------------------

**TITLE**: Line Micro Chart — UI.Chart and UI.DataPoint Annotations (XML, ABAP CDS, CAP CDS)

**INTRODUCTION**: Short, action-oriented guide showing required annotations and sample code for implementing a Line Micro Chart in SAP Fiori Elements (OData V4). Includes XML, ABAP CDS, and CAP CDS examples for UI.Chart and UI.DataPoint, mandatory constraints, and support for string-based dimension fields annotated as calendar values.

**TAGS**: fiori-elements-framework, ui.chart, line-micro-chart, ui.datapoint, annotations, abap-cds, cap-cds, xml

**STEP**: 1 — Preconditions and quick rules

**DESCRIPTION**: Ensure chart data model and types meet these preconditions before adding annotations:
- Dimensions and measures cannot come from the same entity; they must be from a 1:n navigation entity.
- Dimension values must have float-based fields or be castable to float; string-based dimension fields are allowed only when annotated as calendar values (see step for calendar annotations).
- For semantic coloring only the `Criticality` annotation is supported. If `Criticality` resolves to a fixed enum, the entire line is colored accordingly. If it is a path, the last data point's criticality defines the line color.
- Units of measure must be consistent across all data points.
- Recommended measures: use 1 measure, max 3 measures if needed.
- Measure display: the smallest measure value at the first dimension value shows top-left; the largest measure value at the last dimension value shows top-right.

**LANGUAGE**: text

**CODE**:
```text
Preconditions:
- Dimensions and measures must come from a 1:n navigation entity.
- Dimension values must be float or castable to float (string allowed when annotated as calendar).
- Semantic coloring uses UI.DataPoint Criticality only.
- Units must be consistent across data points.
- Recommend 1 measure, max 3 measures.
- When multiple measures are plotted, top-left shows smallest measure at first dimension value; top-right shows largest at last dimension value.
```

**STEP**: 2 — Required annotations checklist

**DESCRIPTION**: These annotations are mandatory for a Line micro chart to be displayed and plotted correctly. Verify presence of each item when authoring metadata.

**LANGUAGE**: text

**CODE**:
```text
Mandatory annotations:
- UI.Chart → ChartType: "Line"
- UI.Chart → Dimensions
- UI.Chart → Measures
- UI.Chart → MeasureAttributes → DataPoint (each MeasureAttribute that should be plotted must reference a DataPoint)
- UI.DataPoint → Value
Notes:
- If using multiple measures, the first measure must have both UI.Chart → Measure and UI.Chart → MeasureAttribute with a DataPoint. Missing this for the first measure prevents display of the chart.
- Subsequent measures also require a Measure and MeasureAttribute with DataPoint to be plotted.
```

**STEP**: 3 — UI.Chart: XML Annotation example

**DESCRIPTION**: Use this XML UI.Chart annotation for a Line chart. Title maps to UI.Chart Title; Description maps to UI.Chart Description. Measures, Dimensions, and MeasureAttributes must be defined. Keep MeasureAttributes DataPoint references to link UI.DataPoint annotations.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.Chart" Qualifier="SpecificationWidthLineChart">
    <Record Type="UI.ChartDefinitionType">
        <PropertyValue Property="Title" String="Product Width Specification Line Chart"/>
        <PropertyValue Property="Description" String="Describe Line Chart"/>
        <PropertyValue Property="ChartType" EnumMember="UI.ChartType/Line"/>
        <PropertyValue Property="Measures">
            <Collection>
                <PropertyPath>Width</PropertyPath>
                <PropertyPath>Depth</PropertyPath>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="Dimensions">
            <Collection>
                <PropertyPath>Day</PropertyPath>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="MeasureAttributes">
             <Collection>
                  <Record Type="UI.ChartMeasureAttributeType">
                       <PropertyValue Property="Measure" PropertyPath="Width"/>
                       <PropertyValue Property="Role" EnumMember="UI.ChartMeasureRoleType/Axis2"/>
                       <PropertyValue Property="DataPoint" AnnotationPath="@UI.DataPoint#Width"/>
                  </Record>
                  <Record Type="UI.ChartMeasureAttributeType">
                      <PropertyValue Property="Measure" PropertyPath="Depth"/>
                      <PropertyValue Property="Role" EnumMember="UI.ChartMeasureRoleType/Axis2"/>
                      <PropertyValue Property="DataPoint" AnnotationPath="@UI.DataPoint#Depth"/>
                  </Record>
              </Collection>
         </PropertyValue>
    </Record>
</Annotation>
```

**STEP**: 4 — UI.Chart: ABAP CDS Annotation example

**DESCRIPTION**: ABAP CDS syntax to define the same UI.Chart configuration. Use `qualifier` to identify the chart. Include measures, dimensions, and measureAttributes with asDataPoint true to link to UI.DataPoint.

**LANGUAGE**: ABAP CDS

**CODE**:
```abap
@UI.Chart: [
  {
    title: 'Product Width Specification Line Chart',
    description: 'Describe Line Chart',
    chartType: #LINE,
    measures: [
      'WIDTH',
      'DEPTH'
    ],
    dimensions: [
      'DAY',
      'DAY'
    ],
    measureAttributes: [
      {
        measure: 'Width',
        role: #AXIS_2,
        asDataPoint: true
      },
      {
        measure: 'Depth',
        role: #AXIS_2,
        asDataPoint: true
      }
    ],
    qualifier: 'SpecificationWidthtLineChart'
  }
]
annotate view STTA_C_MP_PRODUCT with {

}
```

**STEP**: 5 — UI.Chart: CAP CDS Annotation example

**DESCRIPTION**: CAP CDS (service.cds) definition of UI.Chart. Use $Type fields and DataPoint annotation references where required.

**LANGUAGE**: CAP CDS

**CODE**:
```cap
UI.Chart #SpecificationWidthLineChart : {
    $Type : 'UI.ChartDefinitionType',
    Title : 'Product Width Specification Line Chart',
    Description : 'Describe Line Chart',
    ChartType : #Line,
    Measures : [
        Width,
        Depth
    ],
    Dimensions : [
        Day,
        Day
    ],
    MeasureAttributes : [
        {
            $Type : 'UI.ChartMeasureAttributeType',
            Measure : Width,
            Role : #Axis2,
            DataPoint : '@UI.DataPoint#Width'
        },
        {
            $Type : 'UI.ChartMeasureAttributeType',
            Measure : Depth,
            Role : #Axis2,
            DataPoint : '@UI.DataPoint#Depth'
        }
    ]
}
```

**STEP**: 6 — UI.DataPoint: XML examples

**DESCRIPTION**: Define UI.DataPoint annotations that provide Value and Criticality. Criticality can be a path (dynamic coloring based on last datapoint) or a fixed enum (entire line colored). Provide one DataPoint per measured property and reference them from UI.Chart MeasureAttributes.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.DataPoint" Qualifier="Width">
    <Record>
        <PropertyValue Property="Value" Path="Width"/>
        <PropertyValue Property="Criticality" Path="criticalityValue"/>
    </Record>
</Annotation>

<Annotation Term="UI.DataPoint" Qualifier="Depth">
    <Record>
        <PropertyValue Property="Value" Path="Depth"/>
        <PropertyValue Property="Criticality" Path="criticalityValue"/>
    </Record>
</Annotation>
```

**STEP**: 7 — UI.DataPoint: ABAP CDS example

**DESCRIPTION**: ABAP CDS style UI.DataPoint mapping. Use @UI.dataPoint to annotate elements; include criticality and targetValueElement as needed.

**LANGUAGE**: ABAP CDS

**CODE**:
```abap
@UI.dataPoint: {
  targetValueElement: 'Weight',
  criticality: 'criticalityValue'
}
Width;

@UI.dataPoint: {
  criticality: 'criticalityValue'
}
Depth;
```

**STEP**: 8 — UI.DataPoint: CAP CDS example

**DESCRIPTION**: CAP CDS syntax for UI.DataPoint definitions. Reference these DataPoints in UI.Chart MeasureAttributes (DataPoint: '@UI.DataPoint#...').

**LANGUAGE**: CAP CDS

**CODE**:
```cap
UI.DataPoint #Width : {
    Value : Width,
    Criticality : criticalityValue
},

UI.DataPoint #Depth : {
    Value : Depth,
    Criticality : criticalityValue
}
```

**STEP**: 9 — Support for string-based dimension fields annotated as calendar values

**DESCRIPTION**: If your dimension is string-based but represents calendar/time (year, quarter, month, week, yearmonth, date), annotate the dimension field with the appropriate Common.IsCalendar* annotation and ensure values follow the required format/regex.

- Common.IsCalendarYear — format yyyy
- Common.IsCalendarQuarter — format Q (1-4)
- Common.IsCalendarMonth — format MM (01-12)
- Common.IsCalendarWeek — format ww (01-53)
- Common.IsCalendarYearMonth — format yyyyMM (valid year+month)
- Common.IsCalendarDate — format yyyyMMdd (valid date)

Examples below show XML, ABAP CDS, and CAP CDS for Common.IsCalendarYear.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="com.c_salesordermanage_sd_aggregate.SalesOrderItem/OrderYear"> 
	<Annotation Term="Common.IsCalendarYear" Bool="true" /> 
</Annotations>
```

**LANGUAGE**: ABAP CDS

**CODE**:
```abap
annotate view C_SALESORDERMANAGE_SD_AGGREGATE.SALESORDERITEM with { 
 @Semantics.calendar.year: true 
 OrderYear 
} 
```

**LANGUAGE**: CAP CDS

**CODE**:
```cap
OrderYear : String(4) @(Common.IsCalendarYear : true);
```

**STEP**: 10 — References and sample visualization

**DESCRIPTION**: For UI5 component reference and sample visual behavior, consult the official LineMicroChart samples on UI5. Use these samples to verify chart rendering and measure label positions.

**LANGUAGE**: text

**CODE**:
```text
Reference:
- UI5 LineMicroChart samples: https://ui5.sap.com/1.82.5/#/entity/sap.suite.ui.microchart.LineMicroChart
- Additional Fiori Elements sample: "Additional Features in SAP Fiori Elements for OData V4" (see Line Micro Chart section)
```
--------------------------------

**TITLE**: Link List Cards — manifest.json configuration for SAP Fiori Elements OVP

**INTRODUCTION**: Practical, code-focused guidance to configure Link List Cards (static and dynamic) in the SAP OVP manifest.json. Includes how to add title/subtitle, staticContent, layout flavors (standard/carousel), sorting, annotations, and the OData V4 template change. Use these examples directly in your manifest.json card definitions.

**TAGS**: fiori-elements, ovp, linklist, sap.ovp, manifest.json, manifest, cards, carousel, standard, static-content, OData, SmartLink, QuickView

**STEP**: 1 — Supported features & navigation types

**DESCRIPTION**: Link List Cards support QuickView (contact annotation info), SmartLink (semantic object navigation), and three navigation types: Quick view links, Cross app (intent-based) links, and External URL links. Use appropriate properties in card item definitions to enable these behaviors.

**LANGUAGE**: text

**CODE**:
```text
Supported features:
- Quick view to display contact annotation information.
- SmartLink control to display semantic object information.

Supported navigation types:
- Quick view link: contact info from a collection.
- Cross app link: intent-based navigation to related apps.
- External URL link: links to external web pages or resources.
```

**STEP**: 2 — Add card title (manifest.json)

**DESCRIPTION**: Add a "title" property under the specific card's settings in sap.ovp.cards to display the card title on top of the Link List Card.

**LANGUAGE**: JSON

**CODE**:
```json
"sap.ovp": {
    "globalFilterModel": "salesOrder",
    "globalFilterEntityType": "GlobalFilters", // Deprecated since SAPUI5 1.54.
    "globalFilterEntitySet": "GlobalFilters",  // Available from SAPUI5 1.54.
    ...
    "cards": {
        "card005_RecentContacts": {
            "model": "purchaseOrder",
            "template": "sap.ovp.cards.linklist",
            "settings": {
                "title": "Recent Contacts",
                "entitySet": "SalesShare",
                ...
            }
        }
    }
}
```

**STEP**: 3 — Add card subtitle and header link (manifest.json)

**DESCRIPTION**: Add "subTitle" to display a subtitle under the title. Use "targetUri" in settings to make the header a clickable link.

**LANGUAGE**: JSON

**CODE**:
```json
"sap.ovp": {
    "globalFilterModel": "salesOrder",
    "globalFilterEntityType": "GlobalFilters", // Deprecated since SAPUI5 1.54
    "globalFilterEntitySet": "GlobalFilters", // Available from SAPUI5 1.54
    ...
    "cards": {
        "card005_RecentContacts": {
            "model": "purchaseOrder",
            "template": "sap.ovp.cards.linklist",
            "settings": {
                "title": "Recent Contacts",
                "targetUri": "https://en.abc.org/wiki/abc_2", // Link list card header link URI
                "subTitle": "by Importance of Interaction",
                "entitySet": "SalesShare",
                ...
            }
        }
    }
}
```

**STEP**: 4 — Configure staticContent (static link list card)

**DESCRIPTION**: For a static link list card, provide an array "staticContent" in settings. Each item must include properties such as title, subTitle, imageUri, imageAltText, targetUri, and openInNewWindow. The example also includes card sizing via "defaultSpan" and list configuration properties (listFlavor, sortBy, sortOrder).

**LANGUAGE**: JSON

**CODE**:
```json
"sap.ovp": {
    "globalFilterModel": "salesOrder",
    "globalFilterEntityType": "GlobalFilters", //Deprecated since SAPUI5 1.54
    "globalFilterEntitySet": "GlobalFilters",  //Available from SAPUI5 1.54
    ...
    "cards": {
        "card005_RecentContacts": {
            "model": "purchaseOrder",
            "template": "sap.ovp.cards.linklist",
            "settings": {
                "title": "Recent Contacts",
                "targetUri": "https://en.wikipedia.org/wiki/Mangalyaan_2",
                "subTitle": "by Importance of Interaction",
                "listFlavor": "standard",
                "sortBy": "Employee",
                "entitySet": "Zme_Overdue",
                "sortOrder": "ascending",
                "defaultSpan": {
                    "rows": 24,
                    "cols": 2,
                    "showOnlyHeader": true
                },
                "staticContent": [
                    {
                        "title": "Jim Smith",
                        "subTitle": "Sales",
                        "imageUri": "img/JD.png",
                        "imageAltText": "Jim Smith",
                        "targetUri": "https://google.com",
                        "openInNewWindow": true
                    },
                    {
                        "title": "Alice Wilson",
                        "subTitle": "Sales",
                        "imageUri": "img/AW.png",
                        "imageAltText": "Alice Wilson",
                        "targetUri": "https://google.com",
                        "openInNewWindow": true
                    },
                    {
                        "title": "Daniel Quote",
                        "subTitle": "Production",
                        "imageUri": "img/DQ.png",
                        "imageAltText": "Daniel Quote",
                        "targetUri": "https://google.com",
                        "openInNewWindow": true
                    },
                    {
                        "title": "Kate Holly",
                        "subTitle": "Sales",
                        "imageUri": "img/Kate.png",
                        "imageAltText": "Kate Holly",
                        "targetUri": "https://google.com",
                        "openInNewWindow": true
                    },
                    {
                        "title": "Aurora Smith",
                        "subTitle": "HR",
                        "imageUri": "img/KJ.png",
                        "imageAltText": "Aurora Smith",
                        "targetUri": "https://google.com",
                        "openInNewWindow": true
                    },
                    {
                        "title": "Wong Lee",
                        "subTitle": "Management",
                        "imageUri": "img/YM.png",
                        "imageAltText": "Wong Lee",
                        "targetUri": "https://google.com",
                        "openInNewWindow": true
                    }
                ]
            }
        }
    }
}
```

**STEP**: 5 — Configure a standard dynamic Link List Card (listFlavor: standard)

**DESCRIPTION**: For dynamic data, set "listFlavor" to "standard", configure "entitySet", "sortBy", and "sortOrder". Optionally include annotation-based paths like headerAnnotationPath and identificationAnnotationPath.

**LANGUAGE**: JSON

**CODE**:
```json
"card20": {
    "model": "salesOrder",
    "template": "sap.ovp.cards.linklist",
    "settings": {
        "title": "Dynamic Linklist Card",
        "targetUri": "https://en.abc.org/wiki/A_2",
        "subtitle": "NEW CARD",
        "listFlavor": "standard",
        "sortBy": "Name",
        "entitySet": "ProductSet",
        "sortOrder": "ascending",
        "headerAnnotationPath": "com.sap.vocabularies.UI.v1.HeaderInfo#header1",
        "identificationAnnotationPath": "com.sap.vocabularies.UI.v1.Identification#identify1",
    }
}
```

**STEP**: 6 — Configure a carousel Link List Card (listFlavor: carousel)

**DESCRIPTION**: Use "listFlavor": "carousel" to prioritize images and create a carousel-like card. Configure entitySet, sortBy, and sortOrder. Carousel supports one- or two-line items, text-only, text with icon (image control), or text with image (avatar control).

**LANGUAGE**: JSON

**CODE**:
```json
"card_20": {
    "model": "HEPM_OVP_TECH_VAL",
    "template": "sap.ovp.cards.linklist",
    "settings": {
        "title": "{{card20_title}}",
        "entitySet": "Hepmra_C_OFT_Employee",
        "listFlavor": "carousel",
        "sortBy": "Employee",
        "sortOrder": "ascending",
    }
```

**STEP**: 7 — Card types: static vs dynamic

**DESCRIPTION**: Choose card type:
- Static link list card: Provide the item list directly in manifest.json via "staticContent".
- Dynamic link list card: Bind to back-end data using "entitySet" and optional annotation paths. Use listFlavor to control layout.

**LANGUAGE**: text

**CODE**:
```text
Types:
- Static link list card: staticContent array in manifest.json.
- Dynamic link list card: reads links, images, icons from back end via entitySet.
```

**STEP**: 8 — OData V4 template note

**DESCRIPTION**: If using SAP Fiori elements with OData V4, switch the template value to "sap.ovp.cards.v4.linklist". All other manifest settings remain the same.

**LANGUAGE**: text

**CODE**:
```text
Note:
- OData V4: set template to "sap.ovp.cards.v4.linklist" instead of "sap.ovp.cards.linklist".
- All other settings in manifest.json remain the same as for OData V2.
```
--------------------------------

**TITLE**: List Cards — Configuration and Annotations for SAP Fiori Elements OVP

**INTRODUCTION**: This guide shows how to configure list cards in the application manifest and how to provide UI annotations (LineItem / DataField / DataPoint) so list cards render correctly. It covers manifest settings (including qualifiers and image support), runtime mapping/sorting, and the four list variants: Condensed/Extended × Standard/Bar. Includes manifest and annotation code examples (JSON, XML, ABAP CDS, CAP CDS).

**TAGS**: sap.fiori, ovp, list-card, LineItem, DataField, DataPoint, annotationPath, manifest, ODataV4, imageSupported

**STEP**: 1 — Configure a list card in the manifest (basic example)

**DESCRIPTION**: Add a list card entry under "sap.ovp"."cards" in your application manifest. Set the model, template, entitySet and optional settings such as sortBy, sortOrder, listFlavor and annotationPath. Use the annotationPath to point to a LineItem with a qualifier (e.g., #bar) if you need a specific annotation collection.

**LANGUAGE**: JSON

**CODE**:
```json
"sap.ovp": {
    ...
    "cards": {
        ...
        "card04": {
            "model": "ZCD204_EPM_DEMO_SRV",
            "template": "sap.ovp.cards.list",
            "settings": {
                "sortBy": "Price",
                "sortOrder": "descending",
                "listFlavor": "bar",
                "annotationPath": "com.sap.vocabularies.UI.v1.LineItem#bar",
                "category": "{{card04_category}}",
                "entitySet": "Products"
            }
        },
        ...
    }
}
```

**STEP**: 2 — Use OData V4 template

**DESCRIPTION**: When using SAP Fiori elements with OData V4, change the template value to sap.ovp.cards.v4.list. All other manifest settings remain the same as for OData V2.

**LANGUAGE**: JSON

**CODE**:
```json
"template": "sap.ovp.cards.v4.list"
```

**STEP**: 3 — Use annotationPath qualifiers to select different LineItem collections

**DESCRIPTION**: Map fields to a specific collection of DataFieldAbstract (LineItem) by setting annotationPath in the card settings. Use qualifiers to reuse different LineItem annotations for the same entity type. Example: com.sap.vocabularies.UI.v1.LineItem#Qualifier1.

**LANGUAGE**: JSON

**CODE**:
```json
"annotationPath": "com.sap.vocabularies.UI.v1.LineItem#Qualifier1"
```

**STEP**: 4 — Field mapping and runtime sorting behavior

**DESCRIPTION**: By default the card maps to com.sap.vocabularies.UI.v1.LineItem (a collection of DataFieldAbstract). At runtime:
- If DataFieldForAnnotation with a DataPoint target exists, the DataPoint is rendered (top-right or bar depending on flavor).
- DataField records are displayed left side (or where DataPoints aren’t available).
- Entries are sorted by the UI Importance annotation (com.sap.vocabularies.UI.v1.ImportanceType) and then by their annotation order.
- Up to 6 fields may be shown per list item (depending on type/flavor).

**LANGUAGE**: JSON

**CODE**:
```json
/* No additional code required — runtime behavior is based on LineItem and DataPoint annotations. */
```

**STEP**: 5 — Condensed List Type — Standard Flavor

**DESCRIPTION**: Use this flavor when you need compact items with up to three fields.
- Layout: first two DataField records displayed top-left and bottom-left.
- If a DataFieldForAnnotation targets a DataPoint, the DataPoint displays top-right and may be highlighted by criticality; otherwise the next DataField is shown top-right.
- Number of list items displayed: up to 3.

**LANGUAGE**: JSON

**CODE**:
```json
/* Set in manifest: listFlavor can be "standard" (default) and list type is "condensed" via template/config */
"settings": {
  "listFlavor": "standard",
  /* annotationPath and other settings as needed */
}
```

**STEP**: 6 — Extended List Type — Standard Flavor

**DESCRIPTION**: Use this flavor for richer items with up to six fields.
- Layout: DataField records render on the left; DataPoint records render on the right.
- If fewer than three DataPoint records exist, DataField records fill the right side.
- Number of list items displayed: up to 6.

**LANGUAGE**: JSON

**CODE**:
```json
/* Set in manifest: listFlavor "standard" and use an extended configuration via annotations for more fields */
"settings": {
  "listFlavor": "standard",
  /* annotationPath and other settings as needed */
}
```

**STEP**: 7 — Condensed List Type — Bar Flavor

**DESCRIPTION**: Use when showing a bar visualization (DataPoint) inside a condensed item.
- Layout per item: title (first DataField) top-left; first DataPoint renders as a bar beneath the title and numeric value to the right of the bar. A second DataPoint may display to the right.
- The bar can represent a percentage or any numeric value.
- Number of list items displayed: up to 3.

**LANGUAGE**: JSON

**CODE**:
```json
/* Enable bar flavor in manifest */
"settings": {
  "listFlavor": "bar",
  "annotationPath": "com.sap.vocabularies.UI.v1.LineItem#bar",
  /* other settings */
}
```

**STEP**: 8 — Extended List Type — Bar Flavor

**DESCRIPTION**: Use when showing a bar with additional DataPoints in a larger item.
- Layout per item: first DataField as title top-left; optional second DataField under the title; first DataPoint is shown as a bar beneath DataFields and numeric value to the right at the bottom; up to two additional DataPoint records can show to the right stacked vertically.
- If multiple DataPoint criticality annotations exist, only one will be highlighted by order of display.
- Number of list items displayed: up to 5.

**LANGUAGE**: JSON

**CODE**:
```json
/* Enable extended bar layout in manifest */
"settings": {
  "listFlavor": "bar",
  /* ensure your LineItem annotation provides appropriate DataField and DataPoint records */
}
```

**STEP**: 9 — Condensed List Card with Images or Icons (manifest setting + annotation examples)

**DESCRIPTION**: To render images or icons inside a condensed list card:
- Set "imageSupported": true in the card settings in the manifest.
- In the LineItem annotation, provide a DataField with IconUrl (XML) or IconUrl property (CDS) bound to an image field (for example web_address).
- In the list card, an image control is used instead of an avatar.

Examples below show three annotation formats (XML, ABAP CDS, CAP CDS). Use the same annotationPath referenced in the manifest.

**LANGUAGE**: JSON

**CODE**:
```json
/* Example: add imageSupported to manifest card settings */
"sap.ovp": {
  ...
  "cards": {
    "card04": {
      "model": "ZCD204_EPM_DEMO_SRV",
      "template": "sap.ovp.cards.list",
      "settings": {
        "imageSupported": true,
        "annotationPath": "com.sap.vocabularies.UI.v1.LineItem#WithImage",
        "entitySet": "Products"
      }
    }
  }
}
```

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="com.sap.vocabularies.UI.v1.LineItem">
  <Collection>
    <Record Type="com.sap.vocabularies.UI.v1.DataField">
      <PropertyValue Property="IconUrl" Path="web_address"/>
      <PropertyValue Property="Value" Path="MaterialName"/>
    </Record>
  </Collection>
</Annotation>
```

**LANGUAGE**: ABAP CDS

**CODE**:
```
@UI.lineItem: [{ value: 'MATERIALNAME' }]
MATERIALNAME;
```

**LANGUAGE**: CAP CDS

**CODE**:
```
UI.LineItem : [
    {
        $Type : 'com.sap.vocabularies.UI.v1.DataField',
        IconUrl : web_address,
        Value : MaterialName
    }
]
```
--------------------------------

**TITLE**: List Report + Object Page (Fiori elements, OData V2)

**INTRODUCTION**: This document gives concise, actionable configuration and code examples to create a Fiori elements app that uses the List Report and Object Page generic templates (OData V2 / Smart Templates). Use this to scaffold, configure, and connect the list report to its object page and optionally switch to the Analytical List Page.

**TAGS**: fiori-elements, odata-v2, list-report, object-page, manifest.json, annotations, sap.suite.ui.generic.template

**STEP**: 1 — Purpose and when to use
**DESCRIPTION**: Use a List Report to present and filter collections of business objects (tables or lists). Use an Object Page to display, edit, or create a single business object. Implement them together when your app needs an overview (LR) and a detail/edit screen (OP). For analytical scenarios use the Analytical List Page (ALP) instead of LR.
**LANGUAGE**: Text
**CODE**:
```text
Use List Report (sap.suite.ui.generic.template.ListReport) for sets of objects.
Use Object Page (sap.suite.ui.generic.template.ObjectPage) for working with a single object.
For analytical scenarios use Analytical List Page (sap.suite.ui.generic.template.AnalyticalListPage).
```

**STEP**: 2 — Minimal manifest configuration (webapp/manifest.json)
**DESCRIPTION**: Add the generic template pages and the OData v2 service configuration in manifest.json. The example below shows a pair of pages using the same entity set "Products". Place this snippet in webapp/manifest.json replacing your service URI and entitySet names as needed.
**LANGUAGE**: JSON
**CODE**:
```json
{
  "sap.app": {
    "id": "com.example.products",
    "applicationVersion": { "version": "1.0.0" }
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "mainService",
        "preload": true
      }
    }
  },
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "Products",
        "component": {
          "name": "sap.suite.ui.generic.template.ListReport",
          "list": true
        }
      },
      {
        "entitySet": "Products",
        "component": {
          "name": "sap.suite.ui.generic.template.ObjectPage"
        }
      }
    ]
  },
  "dataSources": {
    "mainService": {
      "uri": "/sap/opu/odata/sap/ZI_SERVICE_SRV/",
      "type": "OData",
      "settings": {
        "odataVersion": "2.0"
      }
    }
  }
}
```

**STEP**: 3 — Configure navigation from List Report to Object Page (annotations / manifest)
**DESCRIPTION**: Navigation from the List Report to the Object Page is typically driven by annotations (UI/LineItem with navigation intent) or by the entity key being passed by the framework. Ensure your entity has a navigation/key configuration in your OData metadata and provide UI annotations that define the intent-based navigation or navigation property. If using the annotation file, reference it from the manifest (local or remote). Example: reference an annotations file in manifest and ensure the service is OData v2.
**LANGUAGE**: JSON
**CODE**:
```json
{
  "sap.app": { "id": "com.example.products" },
  "sap.ui5": {
    "models": {
      "": { "dataSource": "mainService" },
      "annotations": {
        "dataSource": "annotations"
      }
    }
  },
  "dataSources": {
    "mainService": {
      "uri": "/sap/opu/odata/sap/ZI_SERVICE_SRV/",
      "type": "OData",
      "settings": { "odataVersion": "2.0" }
    },
    "annotations": {
      "uri": "localService/annotations.xml",
      "type": "ODataAnnotation"
    }
  }
}
```

**STEP**: 4 — Example annotation fragment to enable navigation (webapp/localService/annotations.xml)
**DESCRIPTION**: Provide UI annotations so the framework knows how to display line items and perform navigation. Below is a minimal UI.LineItem with a DataFieldForIntentBasedNavigation example — adapt Target and properties to your model and semantic objects. Keep this file referenced from the manifest (see previous step).
**LANGUAGE**: XML
**CODE**:
```xml
<annotations xmlns="http://docs.oasis-open.org/odata/ns/edm" 
             xmlns:edm="http://docs.oasis-open.org/odata/ns/edm"
             xmlns:ui="http://docs.oasis-open.org/odata/ns/edm">
  <Annotation Term="UI.LineItem">
    <Collection>
      <Record Type="UI.DataFieldForIntentBasedNavigation">
        <PropertyValue Property="Label" String="Product"/>
        <PropertyValue Property="SemanticObject" String="Product"/>
        <PropertyValue Property="Action" String="display"/>
      </Record>
    </Collection>
  </Annotation>
</annotations>
```

**STEP**: 5 — Switch to Analytical List Page (if analytical use case)
**DESCRIPTION**: For analytical scenarios, replace the ListReport template with the AnalyticalListPage template in the manifest pages config. The ALP uses the same entitySet but requires an analytical model/annotations (measures/dimensions).
**LANGUAGE**: JSON
**CODE**:
```json
{
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "Products",
        "component": {
          "name": "sap.suite.ui.generic.template.AnalyticalListPage",
          "list": true
        }
      },
      {
        "entitySet": "Products",
        "component": {
          "name": "sap.suite.ui.generic.template.ObjectPage"
        }
      }
    ]
  }
}
```

**STEP**: 6 — Implementation checklist for code generation
**DESCRIPTION**: Ensure these items before generating code or building the app:
- webapp/manifest.json contains sap.ui.generic.app pages for ListReport/ObjectPage (or ALP/ObjectPage).
- dataSources/mainService points to an OData V2 service (odataVersion: "2.0").
- Annotations (local or remote) are referenced in manifest and include UI.LineItem and navigation (DataFieldForIntentBasedNavigation or navigation property).
- EntitySet names in manifest match OData metadata.
- Provide UI5 & Fiori libraries compatible with Smart Templates (include sap.suite.ui.generic.template resources).
**LANGUAGE**: Text
**CODE**:
```text
Checklist:
- manifest.json: sap.ui.generic.app.pages configured
- dataSources: OData v2 service configured (odataVersion: "2.0")
- annotations referenced (localService/annotations.xml or remote)
- EntitySet names consistent with service metadata
- Add necessary libraries for smart templates in index.html / UI5 bootstrap
```
--------------------------------

**TITLE**: List Report Elements

**INTRODUCTION**: The List Report presents large lists of items with filtering and multiple display modes (table, chart, or both). Use this reference to identify UI elements to implement or configure when generating a Fiori Elements List Report view or its supporting metadata.

**TAGS**: fiori-elements-framework, list-report, SAP Fiori, UI5, design, header-toolbar, variant-management

**STEP**: 1 — Main elements overview

**DESCRIPTION**: Identify and implement the primary UI regions and components for a List Report. Use these element names and roles when mapping UI5 controls, generating manifest entries, or producing view/controller code.

- Application header: global app shell/header
- Variant Management: saved filter/variant control (filter bar)
- Header Toolbar: contains share menu and action buttons
- Content area: hosts table, chart, or both

Use these names consistently in code generation templates and in manifest/navigation documentation.

**LANGUAGE**: text

**CODE**:
```text
MainElements:
- Application header
- Variant Management
- Header Toolbar (contains Share menu)
- Content area (table | chart | table+chart)
```

**STEP**: 2 — Header Toolbar: Share menu actions

**DESCRIPTION**: Implement the header toolbar's generic Share menu with the following actions. When generating menu items, map each action to the corresponding shell service or navigation intent.

- Send Email
- Share in SAP Jam
- Save as Tile
- Share: Microsoft Teams
- Share: Collaboration Manager

Use these action keys/labels to create consistent IDs and i18n keys in generated code (e.g., share.sendEmail, share.sapJam, share.saveAsTile, share.teams, share.collabManager).

**LANGUAGE**: JSON

**CODE**:
```json
{
  "shareMenu": [
    { "id": "share.sendEmail", "label_i18n": "SHARE_SEND_EMAIL" },
    { "id": "share.sapJam", "label_i18n": "SHARE_SAP_JAM" },
    { "id": "share.saveAsTile", "label_i18n": "SHARE_SAVE_AS_TILE" },
    { "id": "share.teams", "label_i18n": "SHARE_TEAMS" },
    { "id": "share.collabManager", "label_i18n": "SHARE_COLLAB_MANAGER" }
  ]
}
```

**STEP**: 3 — Content area display modes

**DESCRIPTION**: Generate code or configuration to support the three content modes. Provide a selectable configuration option and generated UI bindings for each mode:

- Table only
- Chart only
- Table + Chart (split or toggle)

When producing manifest or view templates, expose a contentMode property and branch generation accordingly.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "listReport": {
    "contentMode": "table", // allowed values: "table", "chart", "table+chart"
    "table": { "type": "ResponsiveTable | AnalyticalTable | GridTable", "settings": {} },
    "chart": { "type": "VizFrame | Chart", "settings": {} }
  }
}
```

**STEP**: 4 — Related documentation links and files

**DESCRIPTION**: Reference the related documentation files for further feature and behavior configuration. Use these file paths when linking help or inserting documentation references in generated projects.

- Configuring List Report Features: configuring-list-report-features-3af1d03.md
- Configuring Further Common Features: configuring-further-common-features-a4d3c46.md
- Loading Behavior of Data on Initial Launch of the Application: loading-behavior-of-data-on-initial-launch-of-the-application-9f4e119.md

Include these links in README or help sections generated for the List Report module.

**LANGUAGE**: text

**CODE**:
```text
RelatedFiles:
- ./configuring-list-report-features-3af1d03.md
- ./configuring-further-common-features-a4d3c46.md
- ./loading-behavior-of-data-on-initial-launch-of-the-application-9f4e119.md
```
--------------------------------

**TITLE**: Configure Initial Data Loading Behavior for SAP Fiori Elements Apps

**INTRODUCTION**: This guide documents how to control initial data loading on application launch for SAP Fiori Elements (OData V2 and V4). It explains default behaviors, interactions with navigation context and variants, and manifest settings to force or prevent automatic data requests. Use these settings in manifest.json or component configuration to ensure charts and tables load according to business requirements.

**TAGS**: fiori-elements-framework, manifest.json, loadDataOnAppLaunch, initialLoad, OData V2, OData V4, ListReport, AnalyticalListPage, quickVariantSelectionX, enableAutoBinding

**STEP**: 1 - Loading behavior basics and recommended practice

**DESCRIPTION**: Understand when data is loaded automatically on app start and the recommended default values for filters.

- Data is loaded automatically on initial launch if a navigation context is present (including when context is added to the target URL in the SAP Fiori launchpad target mapping).
- When launched from a tile without a navigation context or only default launchpad user-specific settings:
  - If a default variant exists, that variant is launched; initial load depends on the variant's "Apply Automatically" setting.
  - If no default variant exists, the Standard variant is launched; initial load depends on manifest configuration (see V2 and V4 sections).
- Recommendation: provide default values for filter fields to avoid empty charts and tables on launch.

**LANGUAGE**: Text

**CODE**:
```text
Note:
We recommend providing default values for filter fields to avoid loading empty charts and tables when you launch the application.
```

**STEP**: 2 - OData V2: Configure loadDataOnAppLaunch in manifest.json

**DESCRIPTION**: For OData V2 ListReport apps, set the "loadDataOnAppLaunch" property under dataLoadSettings in the page/component settings of manifest.json to change initial loading behavior for the Standard variant. This setting applies to single- and multi-view apps. If a mandatory filter is missing, data load is prevented regardless of other settings and the "Apply Automatically" checkbox is deselected.

- Values:
  - "always": always load data for the Standard variant (end users may deselect Apply Automatically).
  - "never": do not load automatically; user must click Go (end users may select Apply Automatically).
  - undefined or "ifAnyFilterExist": load only if default filter values exist; default for newly generated apps.

**LANGUAGE**: JSON

**CODE**:
```json
"pages": {
                   "ListReport | < EntitySet > ": {
                                      "entitySet": < EntitySet > ,
                                       "component": {
                                                            "name": "sap.suite.ui.generic.template.ListReport",
                                                            "list": true,
                                                             "settings": {
                                                                              "dataLoadSettings": {
                                                                            "loadDataOnAppLaunch": "always" / "never"/ "ifAnyFilterExist"
                                                         }
                                       }
                   }
}
```

**STEP**: 3 - OData V2: Alternative for multi-view - enableAutoBinding (quickVariantSelectionX)

**DESCRIPTION**: For multi-view (quick variant) scenarios there is an alternative manifest setting: quickVariantSelectionX.enableAutoBinding (true/false). SAP recommends using loadDataOnAppLaunch instead, but enableAutoBinding can be used if desired.

**LANGUAGE**: JSON

**CODE**:
```json
"pages": {
          "ListReport|<EntitySet> ": {
                  "entitySet": <EntitySet>,
                  "component": {
                  "name": "sap.suite.ui.generic.template.ListReport",
                  "settings": {
                              "quickVariantSelectionX": {
                                      "enableAutoBinding":  false
                               }
                   }
             }
          }
}
```

**STEP**: 4 - OData V4: Configure initialLoad in component/options/settings

**DESCRIPTION**: For OData V4 (SAP Fiori elements FE) apps (e.g., AnalyticalListPage), set initialLoad under options.settings of the component configuration. Values:
- "Auto" (default): load only if predefined filter values exist. Apply Automatically checkbox text: "If predefined filter values are available, the content loads automatically." End users may deselect Apply Automatically.
- "Disabled": do not load on start; user must click Go (end users may select Apply Automatically).
- "Enabled": always load on start; end users may deselect Apply Automatically.

These settings apply to Standard variant launches for single- and multi-view apps.

**LANGUAGE**: JSON

**CODE**:
```json
"SalesOrderManageList": {
     "type": "Component",
     "id": "SalesOrderManageList",
     "name": "sap.fe.templates.AnalyticalListPage",
     "options": {
          "settings": {
               "contextPath": "/SalesOrderManage",
               "initialLoad": "Enabled"
          }
     }
}
```
--------------------------------

**TITLE**: Localization of UI Texts for SAP Fiori Elements (OData V2 & V4)

**INTRODUCTION**: Practical, code-focused guide to override and enhance standard UI texts in SAP Fiori Elements apps. Covers: where to place i18n resource files, how to reference i18n keys in annotations, how to configure resource models and manifest.json (including enhanceI18), and how to structure and name keys for app-specific overrides.

**TAGS**: fiori-elements-framework, i18n, localization, manifest.json, annotations, SAPUI5, SAP Fiori elements, OData V2, OData V4

STEP: 1 - Basic workflow to replace standard UI texts

DESCRIPTION:
Follow these four actions to replace framework-provided UI texts in your application:
- Locate or create a resource file (i18n properties) in your app.
- Find the framework key you want to change (see lists of overridable keys).
- Copy the exact key into your app's i18n properties file.
- Edit the value text to your desired custom text and save.

LANGUAGE: Text

CODE:
```text
1. Find or add a resource file to your application (e.g. webapp/i18n/i18n.properties).
2. Search for the text that you would like to change (use the keys listed in the Fiori elements docs).
3. Copy the corresponding key and text to your resource file.
4. Adapt the text as required.
```

STEP: 2 - Override texts referenced from annotations (XML / ABAP CDS / CAP CDS)

DESCRIPTION:
When an annotation uses an i18n reference, ensure the annotation uses an i18n key string and the application defines the @i18n resource model in manifest.json. Example annotations below show direct string and i18n key usage. Copy the key used (e.g. CopyActionText) into your application's i18n file and define the @i18n model.

LANGUAGE: XML

CODE:
```xml
<Annotation Term="UI.LineItem">
   <Collection>
      <Record Type="UI.DataFieldForAction">
         <PropertyValue Property="Label" String="Add random item"/>
         <PropertyValue Property="Action"
            String="com.c_salesordermanage_sd.AddRandomItem"/>
      </Record>
      <Record Type="UI.DataFieldForAction">
         <PropertyValue Property="Label" String="{@i18n>CopyActionText}"/>
         <PropertyValue Property="Action"
            String="com.c_salesordermanage_sd.CopyItem"/>
      </Record>
   </Collection>
</Annotation>
```

LANGUAGE: ABAP CDS

CODE:
```abap
@UI.lineItem: [
  {
    label: 'Add random item',
    dataAction: 'PUSHDOWN:com.c_salesordermanage_sd.AddRandomItem',
    type: #FOR_ACTION,
    position: 1 
  },
  {
    label: '{@i18n>CopyActionText}',
    dataAction: 'PUSHDOWN:com.c_salesordermanage_sd.CopyItem',
    type: #FOR_ACTION,
    position: 2 
  }
];
```

LANGUAGE: CAP CDS

CODE:
```javascript
LineItem                               : [
    {
        $Type  : 'UI.DataFieldForAction',
        Label  : 'Add random item',
        Action : 'com.c_salesordermanage_sd.AddRandomItem'
    },
    {
        $Type  : 'UI.DataFieldForAction',
        Label  : '{@i18n>CopyActionText}',       //i18n key referred here
        Action : 'com.c_salesordermanage_sd.CopyItem'
    },
    .
    .
    .
]
```

STEP: 3 - Define the @i18n resource model in manifest.json

DESCRIPTION:
Add a resource model entry to your app manifest.json so that the annotation i18n reference resolves. The model name must be "@i18n" and must point to the correct i18n properties file (e.g. webapp/i18n/i18n.properties). Example manifest.json snippet below.

LANGUAGE: JSON

CODE:
```json
"models": {
               …
               …
               "@i18n": {
                              "type": "sap.ui.model.resource.ResourceModel",
              "uri": "i18n/i18n.properties"
               },
               …
               …
}
```

STEP: 4 - Default folder structure and resource model mapping (file paths)

DESCRIPTION:
Standard Fiori generator creates a webapp/i18n folder and i18n.properties. You can create additional i18n files per template and entity to override template-specific keys. Map those files in manifest.json models using the naming pattern i18n|<template>|<EntitySet> to scope overrides.

LANGUAGE: text

CODE:
```text
Default generated structure:
<root-folder>
|-- webapp
|---- i18n
|----- i18n.properties

Recommended structure for scoped overrides:
- i18n/i18n.properties
- i18n/ListReport/<EntitySet>/i18n.properties
- i18n/ObjectPage/<EntitySet>/i18n.properties
- i18n/ObjectPage/<SubEntitySet>/i18n.properties
```

STEP: 5 - Example sap.ui5 models configuration mapping template-specific resource bundles

DESCRIPTION:
Register template-specific i18n resource models in manifest.json under "sap.ui5". Each model name uses pipes to identify the template and entity set — the URI points to the corresponding properties file. Add entries for ListReport and ObjectPage where you need overrides.

LANGUAGE: JSON

CODE:
```json
"sap.ui5": {
 
        ...
    "models": {
        "i18n": {                
            "type": "sap.ui.model.resource.ResourceModel",                
            "uri": "i18n/i18n.properties"           
      },

        "i18n|sap.suite.ui.generic.template.ListReport|POHeaders": {
            "type": "sap.ui.model.resource.ResourceModel",
            "uri": "i18n/ListReport/POHeaders/i18n.properties"
              },
        "i18n|sap.suite.ui.generic.template.ObjectPage|POHeaders": {
                    "type": "sap.ui.model.resource.ResourceModel",
                    "uri": "i18n/ObjectPage/POHeaders/i18n.properties"
              },
        "i18n|sap.suite.ui.generic.template.ObjectPage|POItems": {
                    "type": "sap.ui.model.resource.ResourceModel",
                    "uri": "i18n/ObjectPage/POItems/i18n.properties"
```

STEP: 6 - Override keys allowed for OData V2 (ListReport/ObjectPage examples)

DESCRIPTION:
Use the custom i18n file approach to override keys listed in the Fiori elements templates (examples include delete confirmations, create labels, no-data illustrated messages). Add only the keys you need to minimize translation scope. See the long lists in the Fiori elements docs for the full set; below are representative keys and where they are used (copy exact key names into your i18n file).

LANGUAGE: properties

CODE:
```properties
# Examples of keys you can override (List Report / Object Page)
ST_GENERIC_UNSAVED_CHANGES_CHECKBOX=Also delete objects with unsaved changes.
ST_GENERIC_DELETE_SELECTED_PLURAL=Delete the selected objects?
ST_GENERIC_DELETE_UNSAVED_CHANGES=Another user edited this object without saving the changes: {1} Delete anyway?
ST_GENERIC_DELETE_LOCKED=This object cannot be deleted. It is currently locked by {1}.
CREATE_OBJECT=Create
CREATE_DIALOG_TITLE=New Object
DIALOG_TITLE_NEW_ACTION_FOR_CREATE=Create Object
OBJECT_SAVED=Your changes have been saved
ITEM_CREATED=Item created
WAITING_SMARTTABLE=Please wait while the data is loading...
```

STEP: 7 - Illustrated messages (SAPUI5 >= 1.142) — deprecated no-data keys

DESCRIPTION:
Starting from SAPUI5 1.142, no-data keys are replaced by illustrated message title and description keys. Replace deprecated keys with their new illustrated equivalents in custom i18n files.

LANGUAGE: text

CODE:
```text
Deprecated -> New keys mapping (examples)
NOITEMS_LR_SMARTTABLE ->
  NOITEMS_LR_SMARTTABLE_ILLUSTRATION_TITLE
  NOITEMS_LR_SMARTTABLE_ILLUSTRATION_DESCRIPTION

NOITEMS_SMARTTABLE ->
  NOITEMS_SMARTTABLE_ILLUSTRATION_TITLE
  NOITEMS_SMARTTABLE_ILLUSTRATION_DESCRIPTION
```

STEP: 8 - Provide custom texts in application properties file (example)

DESCRIPTION:
Add the same key used by SAP Fiori elements into your custom resource bundle and change the value. For actions or entity-specific messages you can append entity and action qualifiers to the key (format details in next step). Example shows default keys vs application custom resource file.

LANGUAGE: properties

CODE:
```properties
# SAP Fiori elements default values (resource bundle of SAP Fiori elements):
C_OPERATIONS_ACTION_CONFIRM_MESSAGE=Confirm this action?
C_TRANSACTION_HELPER_OBJECT_PAGE_CONFIRM_DELETE_WITH_OBJECTTITLE_PLURAL=Delete the selected objects?
C_TRANSACTION_HELPER_OBJECT_PAGE_CONFIRM_DELETE_WITH_OBJECTTITLE_SINGULAR=Delete this object?

# Text values from i18n/customSalesOrderLR.properties (custom resource bundle of the application):
C_OPERATIONS_ACTION_CONFIRM_MESSAGE|SalesOrderManage|ReturnInProcess=Confirm the returns?
C_TRANSACTION_HELPER_OBJECT_PAGE_CONFIRM_DELETE_WITH_OBJECTTITLE_PLURAL|SalesOrderManage=Delete the selected Sales Orders?
C_TRANSACTION_HELPER_OBJECT_PAGE_CONFIRM_DELETE_WITH_OBJECTTITLE_SINGULAR|SalesOrderManage=Delete this Sales Order?
```

STEP: 9 - Add enhanceI18 to manifest target to enable Fiori elements to pick your custom bundle

DESCRIPTION:
When using Fiori elements templates, add the enhanceI18 setting under the target component settings to point to your custom properties file. This tells Fiori elements which custom resource bundle to load for overrides.

LANGUAGE: JSON

CODE:
```json
{
   ...
   ...
   "targets": {
    "SalesOrderManageList": {
        "type": "Component",
        "id": "SalesOrderManageList",
        "name": "sap.fe.templates.ListReport",
        "options": {
            "settings": {
                "contextPath": "/SalesOrderManage",
                "enhanceI18n": "i18n/customSalesOrderLR.properties", // This is the line to be added - it provides Fiori elements with the name of the custom resource bundle
                ...
                ...
                ...
            }
        }
    }
   }
   ...
   ...
}
```

STEP: 10 - Format rules for custom keys (global, scoped by entity, action-specific)

DESCRIPTION:
Follow these key naming rules to scope custom texts:
- Global override: use the key as-is for text shared across app (no suffix).
- Entity-scoped override: append |<EntitySet> or |<NavigationProperty> (for navigation entities) to restrict the key to that entity set.
- Action-scoped override: append |<EntityName>|<ActionName>. This is mandatory for action parameter/confirmation overrides.

LANGUAGE: text

CODE:
```text
# Global override example:
C_COMMON_DIALOG_OK=Okie?   <- overrides OK globally

# Entity-scoped example (navigation property _Items used for navigation entity sets):
C_TRANSACTION_HELPER_OBJECT_PAGE_CONFIRM_DELETE_WITH_OBJECTTITLE_SINGULAR|_Items=Delete this Sales Order Item?

# Action-scoped example (mandatory for action parameter or confirm text):
C_OPERATIONS_ACTION_CONFIRM_MESSAGE|SalesOrderManage|ReturnInProcess=Confirm the returns?
# or for navigation entity set:
C_OPERATIONS_ACTION_CONFIRM_MESSAGE|_Items|ReturnInProcess=Confirm the returns for the selected items?
```

STEP: 11 - Recommended practices and notes (action-oriented)

DESCRIPTION:
- Only copy keys you need into your custom i18n file to reduce translation workload.
- Use entity/action suffixes to scope messages and avoid unintended global replacements.
- When using curly braces & single quotes in message text, escape per UI5 formatMessage rules (use two single quotes). See UI5 API reference formatting if message formatting is needed.
- If an annotation segment is missing in the back-end, apply overrides in local annotation files and reference i18n keys there.
- For OData V4 apps, use sap.fe.templates scope and the same enhanceI18 approach.

LANGUAGE: text

CODE:
```text
Best practices summary:
- Keep custom i18n files minimal: only include keys you change.
- Use scoped keys (|Entity|Action) for action-specific or entity-specific messages.
- Add @i18n resource model entry to manifest.json for annotation-based references.
- Add enhanceI18 under the component target to register your custom bundle with Fiori elements.
- Use illustrated message title + description keys instead of deprecated no-data keys (SAPUI5 >= 1.142).
```


--------------------------------

**TITLE**: Override Standard Chart Texts via i18n (SAP Fiori elements — Charts)

**INTRODUCTION**: This guide shows how to override the default UI texts that appear when charts have no data (object pages, list reports, analytical list pages). Add or change keys in your app's i18n file (typically webapp/i18n/i18n.properties) to customize messages for SAP Fiori elements for OData V2 and OData V4.

**TAGS**: fiori-elements-framework, i18n, smartchart, localization, ODataV2, ODataV4, charts

STEP: 1 — Review default texts (reference)
DESCRIPTION: Default messages shown by the framework (preserve these texts if you want to keep current wording or use them as a baseline for overrides).
LANGUAGE: Text
CODE:
```Text
SAP Fiori elements for OData V2:
- When no filters are applied and no data is found:
  Object page chart: "No data found."
  List report chart: "To start, set the relevant filters and choose \"Go\"."

- When filters are applied and the search shows no results:
  Object page chart: "No data found. Try adjusting the search or filter parameters."
  List report chart: "There is no data for the selected filter criteria and chart view."

SAP Fiori elements for OData V4:
- Opening a list report without autoload:
  Title: "Let’s get some results"
  Description: "Start by providing your search or filter criteria."

- No filters applied and no data on list report:
  Title: "No results found"
  Description: "Start by providing your search or filter criteria."

- Filters applied and no results:
  Title: "No results found"
  Description: "Try changing your filter criteria."

- Chart used in multi-view mode and no data:
  Title: "No no results found"
  Description: "Try changing the view or filter criteria."

- Object page with no search nor filters and no data:
  Title: "No items available"
  Description: "When there are, you'll find them here."
```

STEP: 2 — Override messages for SAP Fiori elements (OData V2)
DESCRIPTION: Add the following keys to your app i18n file (webapp/i18n/i18n.properties). Use the values shown or replace them with your custom wording. The keys listed are the supported keys for SmartChart messages in OData V2 apps.
LANGUAGE: Properties
CODE:
```Properties
# File: webapp/i18n/i18n.properties

# Object page chart: no filters applied and no data found
NOITEMS_SMARTCHART=No data found.

# Object page chart: filters applied and search shows no results
NOITEMS_SMARTCHART_WITH_FILTER=No data found. Try adjusting the search or filter parameters.

# List report chart: message(s) shown in list report chart (override default wording for list report chart)
# Replace the value with your custom instruction for list report charts.
NOITEMS_LR_SMARTCHART=To start, set the relevant filters and choose "Go".
```

STEP: 3 — Override illustrated message texts for SAP Fiori elements (OData V4)
DESCRIPTION: OData V4 uses illustrated messages with title + description. The exact i18n keys are listed on the Localization of UI Texts page. Add the appropriate keys to webapp/i18n/i18n.properties and set your custom title and description values. Example template (replace the placeholder keys with the actual keys from Localization of UI Texts):
LANGUAGE: Properties
CODE:
```Properties
# File: webapp/i18n/i18n.properties
# Example placeholders — replace the keys below with exact keys from the
# "Localization of UI Texts" reference for OData V4 list report/object page charts.

# Example: List report - opening without autoload
LISTREPORT_NOAUTLOAD_TITLE=Let’s get some results
LISTREPORT_NOAUTLOAD_DESCRIPTION=Start by providing your search or filter criteria.

# Example: List report - no filters applied and no data
LISTREPORT_NORESULTS_TITLE=No results found
LISTREPORT_NORESULTS_DESCRIPTION=Start by providing your search or filter criteria.

# Example: List report - filters applied and no results
LISTREPORT_FILTER_NORESULTS_TITLE=No results found
LISTREPORT_FILTER_NORESULTS_DESCRIPTION=Try changing your filter criteria.

# Example: Multi-view mode - no data
CHART_MULTIVIEW_NORESULTS_TITLE=No no results found
CHART_MULTIVIEW_NORESULTS_DESCRIPTION=Try changing the view or filter criteria.

# Example: Object page - no search nor filters and no data
OBJECTPAGE_NOITEMS_TITLE=No items available
OBJECTPAGE_NOITEMS_DESCRIPTION=When there are, you'll find them here.
```

STEP: 4 — Implementation and verification
DESCRIPTION: Steps to apply and test the changes.
LANGUAGE: Text
CODE:
```Text
1. Open the i18n file in your app: webapp/i18n/i18n.properties
2. Add or modify the keys as shown above.
3. Save the file and rebuild / redeploy your UI (if required by your project setup).
4. Test the scenarios in the app:
   - Open list reports with/without autoload.
   - Apply filters that return no results.
   - View charts in object pages and multi-view modes.
5. If some texts did not change, consult the "Localization of UI Texts" reference for the exact key names used by your Fiori Elements version and component.
```

STEP: 5 — Reference and related information
DESCRIPTION: Links and topics to consult for full key lists and related components.
LANGUAGE: Text
CODE:
```Text
- Localization keys reference: localization-of-ui-texts-b8cb649.md
- Related topic: configuring-tables-f4eb70f.md
- i18n file typical location: webapp/i18n/i18n.properties
```
--------------------------------

**TITLE**: Maintaining Standard Texts for Tables (Fiori elements)

**INTRODUCTION**: Override the framework's default texts for tables on List Report and Object Page by adding localization keys to the page i18n file(s). This document shows where to place overrides, example i18n entries, and how to handle language variants. Use the Localization of UI Texts and Displaying An Illustrated Message When No Data Is Found documents for the exact key names the framework expects.

**TAGS**: fiori-elements-framework, i18n, localization, tables, list-report, object-page

**STEP**: 1 — Locate the i18n files

**DESCRIPTION**: Find the i18n properties files used by your Fiori elements app. Typical locations:
- webapp/i18n/i18n.properties (default)
- webapp/i18n/i18n_de.properties (German)
- webapp/i18n/i18n_en.properties (English)  
If your app uses a different structure (multiapps, modules), locate the i18n file referenced by your manifest.json.

**LANGUAGE**: Text / Paths

**CODE**:
```text
# Typical file locations
webapp/i18n/i18n.properties
webapp/i18n/i18n_de.properties
webapp/i18n/i18n_en.properties
```

**STEP**: 2 — Add/override keys in the i18n file

**DESCRIPTION**: Insert keys and translated values into the i18n properties file for the List Report or Object Page. The framework will use these values instead of defaults for table messages. Replace placeholder KEY_NAME with the exact key from the Localization of UI Texts documentation when available. Keep comments to explain usage.

**LANGUAGE**: Properties

**CODE**:
```properties
# Example overrides for table-related messages
# Replace KEY_NAME_* with the exact keys defined in the SAP Fiori elements localization docs.

# Generic example: title when a table has no data
KEY_NAME_TABLE_NO_DATA_TITLE=No items available

# Generic example: description or help text when a table has no data
KEY_NAME_TABLE_NO_DATA_DESCRIPTION=There are no entries that match your current filters. Try removing a filter or changing search criteria.

# Example: text for an action button shown in the no-data state
KEY_NAME_TABLE_NO_DATA_ACTION=Create new item

# Example: illustrated message title and description (if supported by the framework)
KEY_NAME_ILLUSTRATED_NO_DATA_TITLE=No results found
KEY_NAME_ILLUSTRATED_NO_DATA_DESCRIPTION=We could not find any data. Adjust filters or create a new record.
```

**STEP**: 3 — Add language-specific translations

**DESCRIPTION**: For each supported language, add translated entries to the corresponding i18n_<lang>.properties file (e.g., i18n_de.properties). Keep the same keys; only change the values.

**LANGUAGE**: Properties

**CODE**:
```properties
# webapp/i18n/i18n_de.properties (German translations)
KEY_NAME_TABLE_NO_DATA_TITLE=Keine Elemente vorhanden
KEY_NAME_TABLE_NO_DATA_DESCRIPTION=Es sind keine Einträge vorhanden, die Ihren aktuellen Filtern entsprechen. Entfernen Sie einen Filter oder ändern Sie die Suchkriterien.
KEY_NAME_TABLE_NO_DATA_ACTION=Neues Element erstellen
KEY_NAME_ILLUSTRATED_NO_DATA_TITLE=Keine Ergebnisse gefunden
KEY_NAME_ILLUSTRATED_NO_DATA_DESCRIPTION=Es konnten keine Daten gefunden werden. Passen Sie die Filter an oder erstellen Sie einen neuen Eintrag.
```

**STEP**: 4 — Verify and test in the app

**DESCRIPTION**: Rebuild/serve the app and navigate to the List Report and Object Page. Trigger the table no-data condition (e.g., apply filters that return zero rows) and verify that the overridden texts display correctly. If you do not see changes, confirm the key names match the framework's expected keys and that the i18n file is correctly referenced in manifest.json.

**LANGUAGE**: Text / Checklist

**CODE**:
```text
Checklist:
- Confirm i18n file path is correct.
- Confirm keys match those listed in "Localization of UI Texts".
- Rebuild and serve the app (npm run start / ui5 serve / ui5 build).
- Navigate to the page and reproduce the no-data scenario.
- Check browser console/network for loaded i18n resource bundle and values.
```

**STEP**: 5 — Reference related documentation

**DESCRIPTION**: For the exact key names and additional message types (illustrated messages, message strip texts, etc.), consult:
- Displaying An Illustrated Message When No Data Is Found
- Localization of UI Texts
- Configuring Tables

**LANGUAGE**: Text

**CODE**:
```text
Related docs:
- Displaying An Illustrated Message When No Data Is Found
- Localization of UI Texts
- Configuring Tables
```
--------------------------------

**TITLE**: Managing Variants in SAP Fiori Elements (Page-level vs Control-level)

**INTRODUCTION**: This document explains how to manage and configure variants (views) in SAP Fiori Elements for list reports, analytical list pages, object pages, and worklists. It covers the functional differences between page-level and control-level variant management, initial-load behavior, and the manifest.json settings for OData V2 and OData V4 applications. Use these steps to decide the correct variant scope and to enable or change variant management in the manifest.

**TAGS**: sapui5, fiori-elements, variants, manifest.json, odata-v2, odata-v4, smartVariantManagement, variantManagement

**STEP**: 1 — Understand variant levels and behavior

**DESCRIPTION**: Choose between page-level and control-level variant management based on the scope of personalization you need. Do not enable both simultaneously for the same page (this confuses end users). Use control-level variant management to create separate variants for filters and individual controls (table/chart). Use page-level variant management to capture the overall page state including filter selection and mode, view mode, auto-hide icon (eye icon) state, chart/table configuration (measures/dimensions), sort order, and grouping.

Key functional points to follow:
- Control-level variant management: stores filter area selections and filter mode together; can be used on list report and object page; cannot be combined with page-level management.
- Page-level variant management: captures global page settings listed above; enabled by default for many templates.
- Analytical List Page (ALP) and other templates may have different defaults—confirm manifest settings.

**LANGUAGE**: Text

**CODE**:
```text
Control-level variant management stores filter area selections and the filter mode. When you load the stored variant, both the filter area selection and filter mode appear. It is not possible to use control-level variant management and page-level variant management together.

Page-level variant management captures filter selection, filter mode, view mode, auto-hide icon state (eye-icon), chart, and table configuration (measures and dimensions), sort order, and grouping.
```

**STEP**: 2 — Initial-load behavior for which variant is applied

**DESCRIPTION**: Implement handling and expectations for which variant is loaded when the application opens:
- For table and chart control variants: always load the variant marked as the user's default.
- For the filter control variant or page variant:
  - If the app is launched via external navigation with a navigation context (URL parameters or xAppState), apply the incoming navigation context. This will override the filter values from the user's default variant; the filter bar shows the variant name as Standard* (asterisk indicates a non-clean state). Table/chart personalizations from the default variant are retained.
  - If navigation to the list report occurs with no navigation context, load the user's default variant (if configured); otherwise use the standard variant. In this fallback case, FLP user-default values are applied.

Follow these rules when designing navigation and variant initialization logic.

**LANGUAGE**: Text

**CODE**:
```text
- Table/chart controls: load the end user's default variant.
- Filter/page variant with external navigation context: apply incoming context; default filter values overridden; display "Standard*".
- No navigation context: load end user's default variant (if exists), otherwise standard variant and apply FLP user-default values.
```

**STEP**: 3 — Configure variant management for OData V2 (manifest.json)

**DESCRIPTION**: For OData V2-based Fiori Elements apps (list report, object page, worklist), the smartVariantManagement setting in manifest.json controls whether page-level or control-level variant management is used:
- smartVariantManagement: true → page-level variant enabled.
- smartVariantManagement: false → control-level variant enabled.
- If undefined → default is false (control-level).

Modify the manifest.json pages/component/settings section to change defaults. The SAP Fiori generator sets defaults: list report/object page/worklist = true; analytical list page = false (you can override).

Keep the provided code snippet intact when applying changes.

**LANGUAGE**: JavaScript

**CODE**:
```js
"sap.ui.generic.app": {
        "_version":"1.1.0",
        "pages": [You can change these default settings in the manifest.json file, as shown in the following sample code:
            {
                "entitySet": "XXXXXX_Product",
                "component": {
                    "name": "sap.suite.ui.generic.template.ListReport",
                    "list": true,
                    "settings" : {
                        "gridTable" : false,
                        "multiSelect": false,
                        "smartVariantManagement": true
```

**STEP**: 4 — Configure variant management for OData V4 (manifest.json)

**DESCRIPTION**: For OData V4-based Fiori Elements apps, control the variant management via the VariantManagement setting under routing target options → settings in manifest.json. Default is "Page". Change to "None" or other valid values to disable or alter page-level variant management for a specific target.

Edit the routing targets/options/settings/variantManagement value per target in manifest.json. You can also modify this via the Page Editor.

Preserve the JSON structure when applying changes.

**LANGUAGE**: JSON

**CODE**:
```json
{
    "sap.ui5": {
        "routing": {
            "targets": {
                "SalesOrderManageList": {
                    "options": {
                        "settings": {
                            "variantManagement": "Page"
                        }
                    }
                },
                "SalesOrderManageObject": {
                    "options": {
                        "settings": {
                            "variantManagement": "None"
                        }
                    }
                }
            }
        }
    }
}
```

**STEP**: 5 — Quick actionable checklist & references

**DESCRIPTION**: Use this checklist when implementing or troubleshooting variant management:
- Decide scope: page-level (global page state) vs control-level (filter/control-specific).
- Ensure you do not enable both page-level and control-level variant management concurrently on the same page.
- For OData V2: set smartVariantManagement in sap.ui.generic.app → pages → component → settings.
- For OData V4: set variantManagement in sap.ui5 → routing → targets → <target> → options → settings.
- Confirm defaults: generator sets smartVariantManagement true for list report/object page/worklist and false for analytical list page (OData V2). OData V4 default VariantManagement = Page.
- Use Page Editor to change settings if you prefer a UI instead of editing manifest.json.

References:
- Loading Behavior of Data on Initial Launch of the Application
- Enabling Variant Management on the Object Page
- Page Editor: Configure Page Elements (SAP Fiori tools documentation)

**LANGUAGE**: Text

**CODE**:
```text
Checklist:
- Choose page-level vs control-level and implement only one per page.
- Modify manifest.json in the appropriate location (OData V2: sap.ui.generic.app -> pages -> component -> settings -> smartVariantManagement; OData V4: sap.ui5 -> routing -> targets -> <target> -> options -> settings -> variantManagement).
- Validate initial-load behavior for incoming navigation contexts and default variants.
- Use Page Editor to change variant settings if preferred.
```
--------------------------------

**TITLE**: Micro Chart Facet — Annotations and Examples for Fiori Elements

**INTRODUCTION**: This document shows how to add a MicroChart control as a header facet on an object page in SAP Fiori Elements. It contains actionable annotation examples (XML, CDS for ABAP and CAP), guidance on mapping UI.Chart and UI.DataPoint properties, unit-of-measure annotations, sorting via PresentationVariant, and OData V2/V4 limitations. Use these snippets in your local annotations file or CDS views to create header micro charts.

**TAGS**: fiori-elements-framework, micro-chart, UI.Chart, UI.HeaderFacets, UI.DataPoint, Measures.ISOCurrency, PresentationVariant, ODataV2, ODataV4, CDS, XML, ABAP, CAP

STEP: 1 — Add a MicroChart Facet (XML Annotation, ABAP CDS, CAP CDS)

DESCRIPTION: Create a UI.Chart annotation (qualifier) for the entity that contains measures/dimensions and reference it from the header view using UI.HeaderFacets / UI.ReferenceFacet. The UI.DataPoint should be referenced in the Chart.MeasureAttributes via AnnotationPath. Use these examples (XML, ABAP CDS and CAP CDS) as templates—replace entity/field names (Booking, FlightPrice, FlightDate, TravelType, etc.) with your model names.

LANGUAGE: XML
CODE:
```xml
<Annotations Target="SAP__self.BookingType">
    <Annotation Term="SAP__UI.DataPoint" Qualifier="FlightPrice">
        <Record>
            <PropertyValue Property="Value" Path="FlightPrice"/>
        </Record>
    </Annotation>
    <Annotation Term="SAP__UI.Chart" Qualifier="FlightPrice">
        <Record Type="SAP__UI.ChartDefinitionType">
            <PropertyValue Property="ChartType" EnumMember="SAP__UI.ChartType/Column"/>
            <PropertyValue Property="Title" String="Flight Price"/>
            <PropertyValue Property="Measures">
                <Collection>
                    <PropertyPath>FlightPrice</PropertyPath>
                </Collection>
            </PropertyValue>
            <PropertyValue Property="MeasureAttributes">
                <Collection>
                    <Record Type="SAP__UI.ChartMeasureAttributeType">
                        <PropertyValue Property="DataPoint" AnnotationPath="@SAP__UI.DataPoint#FlightPrice"/>
                        <PropertyValue Property="Role" EnumMember="SAP__UI.ChartMeasureRoleType/Axis1"/>
                        <PropertyValue Property="Measure" PropertyPath="FlightPrice"/>
                    </Record>
                </Collection>
            </PropertyValue>
            <PropertyValue Property="Dimensions">
                <Collection>
                    <PropertyPath>FlightDate</PropertyPath>
                </Collection>
            </PropertyValue>
        </Record>
    </Annotation>
</Annotations>

<Annotations Target="SAP__self.TravelType">
    <Annotation Term="SAP__UI.HeaderFacets">
        <Collection>
            <Record Type="SAP__UI.ReferenceFacet">
                <PropertyValue Property="ID" String="FlightPrice"/>
                <PropertyValue Property="Target" AnnotationPath="_Booking/@SAP__UI.Chart#FlightPrice"/>
            </Record>
        </Collection>
    </Annotation>
</Annotations>
```

LANGUAGE: CDS
CODE:
```cds
//@Scope: [VIEW] ("TRAVEL")
annotate view VIEWNAME with
{
  @UI.facet: [ {
    targetElement: '_Booking',
    targetQualifier: 'FlightPrice',
    type: #CHART_REFERENCE,
    purpose: #HEADER
  } ]
  ...
}

//@Scope: [ENTITY] ("BOOKING")
@UI: {
  chart: [ {
    title: 'Flight Price',
    qualifier: 'FlightPrice', 
    chartType: #COLUMN,
    measures: [
      'FlightPrice'
    ],
    measureAttributes: [
      {
        measure: 'FlightPrice',
        role: #AXIS_1,
        asDataPoint: true
      }
    ],
    dimensions: [
      'FlightDate'
    ]
  } ]
}

//@Scope: [VIEW] ("BOOKING")
annotate view VIEWNAME with
{
  ...
  @UI.dataPoint: {
    title: 'Flight Price'
  }   
  FlightPrice;
  ...
}
```

LANGUAGE: CDS
CODE:
```cds
  annotate Booking with @(UI: {
    DataPoint #FlightPrice: {Value: FlightPrice},

    Chart #FlightPrice    : {
      $Type            : 'UI.ChartDefinitionType',
      Title            : 'Flight Price',
      ChartType        : #Column,
      Measures         : [FlightPrice],
      Dimensions       : [FlightDate],
      MeasureAttributes: [{
        $Type    : 'UI.ChartMeasureAttributeType',
        Measure  : FlightPrice,
        Role     : #Axis1,
        DataPoint: '@UI.DataPoint#FlightPrice'
      }]
    },


  });

  annotate Travel with @(UI: {HeaderFacets: [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FlightPrice',
    Target: '_Booking/@UI.Chart#FlightPrice'
  }]});
```

STEP: 2 — UI.HeaderFacets and UI.ReferenceFacet (Reference example)

DESCRIPTION: When adding a header facet in local annotations, use UI.HeaderFacets with UI.ReferenceFacet and set Target to the Chart annotation path (AnnotationPath to a UI.Chart or UI.PresentationVariant). Use these XML and CDS examples to reference the chart defined on a related entity/navigation (replace targets accordingly).

LANGUAGE: XML
CODE:
```xml
<Annotations Target="STTA_PROD_MAN.STTA_C_MP_ProductType">
    <Annotation Term="UI.HeaderFacets">
        <Collection>
            <Record Type="UI.ReferenceFacet">
                <PropertyValue Property="Target" AnnotationPath="to_ProductSalesPrice/@UI.Chart"/>
            </Record>
        </Collection>
    </Annotation>
</Annotations>
```

LANGUAGE: CDS
CODE:
```cds
annotate view STTA_C_MP_PRODUCT with {
@UI.Facet: [
  {
    targetElement: 'TO_PRODUCTSALESPRICE',
    type: #CHART_REFERENCE,
    purpose: #HEADER
  }
]

product;
}
```

LANGUAGE: CDS
CODE:
```cds
annotate STTA_PROD_MAN.STTA_C_MP_ProductType with @(
  UI.HeaderFacets : [
    {
        $Type : 'UI.ReferenceFacet',
        Target : 'to_ProductSalesPrice/@UI.Chart'
    }
  ]
);
```

STEP: 3 — UI.Chart and UI.DataPoint mapping (Field mapping and criticality)

DESCRIPTION: Map chart title and subtitle to UI.Chart.Title and UI.Chart.Description respectively. Within UI.Chart.MeasureAttributes, set DataPoint via AnnotationPath to the UI.DataPoint annotation for that measure. Micro charts support both UI.DataPoint Criticality and CriticalityCalculation. See area and bullet micro chart docs for examples.

LANGUAGE: text
CODE:
```text
Mapping:
- UI.Chart.Title  -> Chart title
- UI.Chart.Description -> Chart subtitle
- Chart.MeasureAttributes[].DataPoint -> AnnotationPath to @UI.DataPoint#Qualifier
- UI.DataPoint supports: Criticality, CriticalityCalculation

See:
- Area Micro Chart: area-micro-chart-1467f2b.md
- Bullet Micro Chart: bullet-micro-chart-b915166.md
```

STEP: 4 — Unit of Measure (Footer) Annotations

DESCRIPTION: To display unit of measure in the micro chart footer, annotate the value property with Measures.ISOCurrency (OData EDM XML) or use Semantics in CDS. Examples below annotate AreaChartPrice and Currency.

LANGUAGE: XML
CODE:
```xml
<Annotations xmlns="http://docs.oasis-open.org/odata/ns/edm" Target="STTA_PROD_MAN.STTA_C_MP_ProductSalesPriceType/AreaChartPrice">
     <Annotation Term="Measures.ISOCurrency" Path="Currency"/>
</Annotations>
```

LANGUAGE: CDS
CODE:
```cds
@Semantics.amount.currencyCode: 'Currency'
AreaChartPrice;
@Semantics.currencyCode:true
Currency;
```

LANGUAGE: CDS
CODE:
```cds
annotate STTA_PROD_MAN.STTA_C_MP_ProductSalesPriceType with {
	@Measures.ISOCurrency : Currency
	AreaChartPrice
```

STEP: 5 — OData V2 Limitation (Navigation properties)

DESCRIPTION: For SAP Fiori Elements for OData V2, the template does not support navigation properties in the UI.Chart term for micro charts. If your setup uses navigation properties in Chart definitions, the micro chart facet will not work with the V2 template.

LANGUAGE: text
CODE:
```text
Note: Template doesn't support the use of navigation properties in UI.Chart for micro charts.
Referenced image: images/Chart_Limitation_02debb6.png
```

STEP: 6 — OData V4 Features & Restrictions

DESCRIPTION: In OData V4:
- You can enable in-page and external navigation from the micro chart title (see navigation-from-header-facet-title-fa0ca22.md).
- Comparison micro charts are supported.
- Restriction: micro charts require the back end to provide aggregated data. The client will not perform aggregation for micro chart facets; ensure the service returns aggregated records (e.g., one record per grouping key).

LANGUAGE: text
CODE:
```text
OData V4 notes:
- Navigation from header facet title: navigation-from-header-facet-title-fa0ca22.md
- File reference (image): images/Navigation_Property_d2168a4.png
- Restriction: Back end must return aggregated data for micro charts; client-side aggregation is not performed.
```

STEP: 7 — Apply Sort Order to Micro Charts (PresentationVariant examples)

DESCRIPTION: Apply UI.PresentationVariant.SortOrder to the Chart via ReferenceFacet to sort micro chart data. Micro charts consider only SortOrderType (property + descending flag) and ignore other PresentationVariant properties. Use the examples below to define SortOrder and reference the PresentationVariant from the header facet.

LANGUAGE: XML
CODE:
```xml
<Annotations Target="SAP__self.BookingType">
    <Annotation Term="SAP__UI.DataPoint" Qualifier="FlightPrice">
        <Record>
            <PropertyValue Property="Value" Path="FlightPrice"/>
        </Record>
    </Annotation>
    <Annotation Term="SAP__UI.Chart" Qualifier="FlightPrice">
        <Record Type="SAP__UI.ChartDefinitionType">
            <PropertyValue Property="ChartType" EnumMember="SAP__UI.ChartType/Column"/>
            <PropertyValue Property="Title" String="Flight Price"/>
            <PropertyValue Property="Measures">
                <Collection>
                    <PropertyPath>FlightPrice</PropertyPath>
                </Collection>
            </PropertyValue>
            <PropertyValue Property="MeasureAttributes">
                <Collection>
                    <Record Type="SAP__UI.ChartMeasureAttributeType">
                        <PropertyValue Property="DataPoint" AnnotationPath="@SAP__UI.DataPoint#FlightPrice"/>
                        <PropertyValue Property="Role" EnumMember="SAP__UI.ChartMeasureRoleType/Axis1"/>
                        <PropertyValue Property="Measure" PropertyPath="FlightPrice"/>
                    </Record>
                </Collection>
            </PropertyValue>
            <PropertyValue Property="Dimensions">
                <Collection>
                    <PropertyPath>FlightDate</PropertyPath>
                </Collection>
            </PropertyValue>
        </Record>
    </Annotation>
    <Annotation Term="SAP__UI.PresentationVariant">
        <Record Type="SAP__UI.PresentationVariantType">
            <PropertyValue Property="SortOrder">
                <Collection>
                    <Record Type="SAP__Common.SortOrderType">
                        <PropertyValue Property="Property" PropertyPath="FlightPrice" />
                        <PropertyValue Property="Descending" Bool="false" />
                    </Record>
                </Collection>
            </PropertyValue>
            <PropertyValue Property="Visualizations">
                <Collection>
                    <AnnotationPath>@SAP__UI.Chart#FlightPrice</AnnotationPath>
                </Collection>
            </PropertyValue>
        </Record>
    </Annotation>
</Annotations>
<Annotations Target="SAP__self.TravelType">
    <Annotation Term="SAP__UI.HeaderFacets">
        <Collection>
            <Record Type="SAP__UI.ReferenceFacet">
                <PropertyValue Property="ID" String="FlightPrice"/>
                <PropertyValue Property="Target" AnnotationPath="_Booking/@SAP__UI.PresentationVariant"/>
            </Record>
        </Collection>
    </Annotation>
</Annotations>
```

LANGUAGE: CDS
CODE:
```cds
//@Scope: [VIEW] ("TRAVEL")
annotate view VIEWNAME with
{
  @UI.facet: [ {
    targetElement: '_Booking',
    type: #PRESENTATIONVARIANT_REFERENCE,
    purpose: #HEADER
  } ]
  ...
}

//@Scope: [ENTITY] ("BOOKING")
@UI: {
  presentationVariant: [ {
    sortOrder: [ {
      by: 'FlightPrice',
      direction: #ASC
    } ],
    visualizations: [ {
      type: #AS_CHART,
      qualifier: 'FlightPrice'
    } ]
  } ],
  chart: [ {
    title: 'Flight Price',
    qualifier: 'FlightPrice', 
    chartType: #COLUMN,
    measures: [
      'FlightPrice'
    ],
    measureAttributes: [
      {
        measure: 'FlightPrice',
        role: #AXIS_1,
        asDataPoint: true
      }
    ],
    dimensions: [
      'FlightDate'
    ]
  } ]
}

//@Scope: [VIEW] ("BOOKING")
annotate view VIEWNAME with
{
  ...
  @UI.dataPoint: {
    title: 'Flight Price'
  }   
  FlightPrice;
  ...
}
```

LANGUAGE: CDS
CODE:
```cds
  annotate Booking with @(UI: {
    DataPoint #FlightPrice: {Value: FlightPrice},

    Chart #FlightPrice    : {
      $Type            : 'UI.ChartDefinitionType',
      Title            : 'Flight Price',
      ChartType        : #Column,
      Measures         : [FlightPrice],
      Dimensions       : [FlightDate],
      MeasureAttributes: [{
        $Type    : 'UI.ChartMeasureAttributeType',
        Measure  : FlightPrice,
        Role     : #Axis1,
        DataPoint: '@UI.DataPoint#FlightPrice'
      }]
    },

    PresentationVariant   : {
      Visualizations: ['@UI.Chart#FlightPrice'],
      SortOrder     : [{
        Property  : FlightPrice,
        Descending: false
      }],
    }
  });

  annotate Travel with @(UI: {HeaderFacets: [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FlightPrice',
    Target: '_Booking/@UI.PresentationVariant'
  }]});
```

STEP: 8 — Related Resources

DESCRIPTION: Quick links to related micro chart types and additional docs for reference.

LANGUAGE: text
CODE:
```text
Related docs:
- Area Micro Chart: area-micro-chart-1467f2b.md
- Bullet Micro Chart: bullet-micro-chart-b915166.md
- Radial Micro Chart: radial-micro-chart-51eb569.md
- Line Micro Chart: line-micro-chart-e5cb2af.md
- Column Micro Chart: column-micro-chart-1a4ecb8.md
- Harvey Micro Chart: harvey-micro-chart-de4f8bf.md
- Stacked Bar Micro Chart: stacked-bar-micro-chart-9c93837.md
- Comparison Micro Chart: comparison-micro-chart-9d126f1.md
Images referenced in this topic:
- images/Micro_Chart_Facet_7e0b23a.png
- images/Chart_Limitation_02debb6.png
- images/Navigation_Property_d2168a4.png
```
--------------------------------

**TITLE**: Migrate SAP Fiori Projects from SAP Web IDE to SAP Business Application Studio or Visual Studio Code

**INTRODUCTION**: Step-by-step, action-oriented instructions to migrate SAP Fiori projects created in SAP Web IDE so they can be opened, developed, and run in SAP Business Application Studio (BAS) or Visual Studio Code (VS Code). Includes prerequisites, export/import actions, and verification steps. Use this with existing SAP Fiori projects created in SAP Web IDE.

**TAGS**: fiori-elements-framework, migration, sap-web-ide, sap-business-application-studio, visual-studio-code, sap-fiori-tools

**STEP**: 1 — Confirm access and read migration guidance

**DESCRIPTION**: Verify whether you still have access to SAP Web IDE. If you only have a trial SAP BTP account, SAP Web IDE is no longer available; consider SAP Business Application Studio instead. Read the official migration guidance before proceeding.

**LANGUAGE**: Plain text

**CODE**:
```text
References:
- Official migration guide: https://help.sap.com/docs/SAP_FIORI_tools/17d50220bcd848aa854c9c182d65b699/70d41f3ee29d453a90efab3ce025d450.html
- BAS development guide (relative doc): ../05_Developing_Apps/app-development-using-sap-business-application-studio-6bbad66.md

Caution:
- SAP Web IDE is not available on SAP BTP trial accounts.
- Only proceed if you have access to SAP Web IDE via a productive SAP BTP account.
```

**STEP**: 2 — Export project from SAP Web IDE

**DESCRIPTION**: Export the project from SAP Web IDE into a local archive (ZIP) or clone the repository if the project is stored in Git. Use the Web IDE UI: Project -> Export -> Download as ZIP, or use the project's Git URL to clone.

**LANGUAGE**: Shell

**CODE**:
```bash
# If using Web IDE UI: use Project -> Export -> Download as ZIP
# After downloading, on your local machine:
unzip ~/Downloads/my-fiori-project.zip -d ~/projects/my-fiori-project

# If the project is in Git:
git clone <git-repository-url> ~/projects/my-fiori-project
```

**STEP**: 3 — Import project into SAP Business Application Studio

**DESCRIPTION**: Open BAS, create or open a workspace, and import the exported project. Options: upload the ZIP via BAS import dialog or push the project folder into the BAS workspace. After import, install dependencies and open the project in the BAS terminal/editor.

**LANGUAGE**: Shell

**CODE**:
```bash
# Example local prep before uploading to BAS (run locally):
cd ~/projects/my-fiori-project

# Ensure package manifest exists (if a Node-based project)
ls -la package.json

# In BAS: File -> Import -> Local File System -> Upload my-fiori-project.zip
# OR connect to your Git repo in BAS and clone it via the BAS terminal:
# In BAS terminal (after opening workspace):
git clone <git-repository-url> ~/workspace/my-fiori-project
cd ~/workspace/my-fiori-project
# Install dependencies
npm install
```

**STEP**: 4 — Open project in Visual Studio Code

**DESCRIPTION**: For local development in VS Code, open the exported project folder. Install recommended extensions (e.g., SAP Fiori tools, UI5 support). Install dependencies and run local development tasks as defined in the project (npm, UI5 tooling, or configured scripts).

**LANGUAGE**: Shell

**CODE**:
```bash
# Open project in VS Code (local machine)
code ~/projects/my-fiori-project

# Inside project folder, install dependencies
cd ~/projects/my-fiori-project
npm install

# Typical dev/start commands (adjust to your project's package.json scripts)
# For UI5 Tooling based projects:
npm run start    # or: npx ui5 serve --config=ui5.yaml
# For generic Node-based projects:
npm run dev
```

**STEP**: 5 — Verify project runs and validate functionality

**DESCRIPTION**: Start the project locally, open the application in a browser, and verify that routes, OData services, and UI behavior match the original Web IDE project. Fix environment-specific configurations (e.g., destinations, proxy, neo/CF settings) and update any Web IDE-specific metadata.

**LANGUAGE**: Plain text

**CODE**:
```text
Verification checklist:
- Start application (see package.json scripts)
- Open localhost URL provided by dev server (e.g., http://localhost:8080)
- Validate OData/service connectivity and required destinations (configure proxy or local mock server)
- Check linter/build tasks and debug configuration in VS Code or BAS
- Remove or adapt any SAP Web IDE-specific configuration files if present
```

**STEP**: 6 — References and next steps

**DESCRIPTION**: Use the official SAP migration documentation and BAS development guide for deeper details and troubleshooting. After migration, consider switching continuous integration and deployment flows to tools supported by BAS or your CI system.

**LANGUAGE**: Plain text

**CODE**:
```text
Further reading:
- SAP Fiori tools migration guide:
  https://help.sap.com/docs/SAP_FIORI_tools/17d50220bcd848aa854c9c182d65b699/70d41f3ee29d453a90efab3ce025d450.html

- BAS app development doc (relative doc in repo):
  ../05_Developing_Apps/app-development-using-sap-business-application-studio-6bbad66.md
```
--------------------------------

**TITLE**: Migrating from registerControllerExtensions API (SAPUI5 / Fiori elements OData V2)

**INTRODUCTION**: This guide shows how to migrate existing controller-extension setups that used the deprecated extensionAPI.registerControllerExtensions API to the manifest-registered controllerExtensions approach available in SAPUI5 1.120+ and required from SAPUI5 version 2.0. Target: SAP Fiori elements for OData V2. Keep child controller files, remove parent registration and adapt manifest and controller code, event handler references, and access to extensionAPI.

**TAGS**: fiori-elements-framework, SAPUI5, migration, OData V2, controllerExtensions, manifest.json, ControllerExtension

STEP: Current setup
DESCRIPTION: Identify current files and roles before migration. Typical example for an Object Page with three controller extension files.
LANGUAGE: text
CODE:
```
- DetailsExtension.controller.js
  The parent controller that invokes extensionAPI.registerControllerExtensions and registers the remaining two child controllers.

- SalesOrderExtension.controller.js
  One child controller for the Sales Order view (bound to entity set C_STTA_SalesOrder_WD_20).

- SalesOrderItemExtension.controller.js
  One child controller for the Sales Order Item view (bound to entity set C_STTA_SalesOrderItem_WD_20).
```

STEP: Step 1 — Changes required in manifest.json
DESCRIPTION: Register each child controller under sap.ui.controllerExtensions using the key format <FLOOR_PLAN_NAME>#<STABLE_ID_OF_VIEW>. Copy header/section actions and other parent content into the corresponding child controller extension entries. Remove the parent controller extension entry from sap.ui.controllerExtensions.
LANGUAGE: JSON
CODE:
```json
"sap.ui.controllerExtensions": { 
    ... 
    "sap.suite.ui.generic.template.ObjectPage.view.Details#STTASOWD20::sap.suite.ui.generic.template.ObjectPage.view.Details::C_STTA_SalesOrder_WD_20": { 
        "controllerName": "STTASOWD20.ext.controller.SalesOrderExtension", 
        "sap.ui.generic.app": { 
            "C_STTA_SalesOrder_WD_20": { 
                "EntitySet": "C_STTA_SalesOrder_WD_20", 
                "Header": { 
                    "Actions": { 
                       ... 
                    } 
                }, 
                "Sections": { 
                    "Actions": { 
                       ... 
                    } 
                } 
            } 
        } 
    } 
}
```

STEP: Step 2 — Controller extension implementation changes
DESCRIPTION: Remove the parent controller extension file. Ensure each child controller extends sap.ui.core.mvc.ControllerExtension. Place all SAPUI5-provided and framework extension methods (e.g., onInit, adaptNavigationParameterExtension, beforeSaveExtension) inside the override section. Place custom helper methods after override. Examples below show structure and placement.
LANGUAGE: JavaScript
CODE:
```javascript
sap.ui.define([ 
    "sap/ui/core/mvc/ControllerExtension" 
], function (ControllerExtension) { 
    'use strict'; 
    return ControllerExtension.extend("STTASOWD20.ext.controller.SalesOrderExtension", { 
        override: { 
            // Overridden methods 
        }, 
        // Custom methods 
    }); 
});
```

LANGUAGE: JavaScript
CODE:
```javascript
sap.ui.define([ 
    "sap/ui/core/mvc/ControllerExtension" 
], function (ControllerExtension) { 
    'use strict'; 

    return ControllerExtension.extend("STTASOWD20.ext.controller.SalesOrderExtension", { 
        override: { 
            onInit: function(){ 
            }, 
            adaptNavigationParameterExtension: function (oSelectionVariant, oObjectInfo) {}, 
            onBeforeRendering: function () {}, 
            beforeDeleteExtension: function () {}, 
            beforeSaveExtension: function () {} 
        }, 
        onObjectPage1CustomAction: function () { 
        }, 
        onSalesOrderInfo: function () {}, 
        onSalesOrderItemInfo: function () {} 
    }); 
});
```

STEP: Step 3 — Update manifest declarations for press/event handlers
DESCRIPTION: Previously, custom action press handlers referenced methods by name (e.g., "onObjectPage1CustomAction"). Update these to reference the controller extension module and method using the extension.<CONTROLLER_MODULE_NAME>.<METHOD_NAME> format (note the leading dot before "extension"). Apply same format in manifest, XML views, and fragments.
LANGUAGE: JSON
CODE:
```json
"sap.ui.generic.app": { 
    "C_STTA_SalesOrder_WD_20": { 
        "EntitySet": "C_STTA_SalesOrder_WD_20", 
        "Header": { 
            "Actions": { 
                "ObjectPageCustomAction": { 
                    "id": "ObjectPageCustomAction", 
                    "text": "Custom Action 1", 
                    "press": "onObjectPage1CustomAction", 
                    "determining": true, 
                    "applicablePath": "IsActiveEntity" 
                } 
            } 
        } 
    } 
}
```

LANGUAGE: JSON
CODE:
```json
"sap.ui.generic.app": { 
    "C_STTA_SalesOrder_WD_20": { 
        "EntitySet": "C_STTA_SalesOrder_WD_20", 
        "Header": { 
            "Actions": { 
                "ObjectPageCustomAction": { 
                    "id": "ObjectPageCustomAction", 
                    "text": "Custom Action 1", 
                    "press": ".extension.STTASOWD20.ext.controller.SalesOrderExtension.onObjectPage1CustomAction", 
                    "determining": true, 
                    "applicablePath": "IsActiveEntity" 
                } 
            } 
        } 
    } 
}
```

LANGUAGE: XML
CODE:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m"> 
       <Button id="previousMemoBtn" text="{i18n>yes}"  
              press=".extension.SSTASOWD20.ext.controller.SalesOrderExtension.onPressPreviousMemo" /> 
</core:FragmentDefinition> 
```

STEP: Additional changes — Accessing extensionAPI from ControllerExtension
DESCRIPTION: Inside ControllerExtension methods, obtain the extensionAPI instance from the view controller via this.getView().getController().extensionAPI. Initialize it (for reuse) in onInit override and call extensionAPI methods from custom methods.
LANGUAGE: JavaScript
CODE:
```javascript
sap.ui.define([ 
    "sap/ui/core/mvc/ControllerExtension" 
], function (ControllerExtension) { 
    'use strict'; 

    return ControllerExtension.extend("STTASOWD20.ext.controller.SalesOrderExtension", { 
        override: { 
            onInit: function () { 
                // Initializing extensionAPI 
                this.extensionAPI = this.getView().getController().extensionAPI; 
            } 
        }, 
        onSalesOrderInfo: function () { 
            // Using extensionAPI 
            var aSelectedContexts = this.extensionAPI.getSelectedContexts("SalesOrderItemsID::responsiveTable"); 
        } 
    }); 
});
```
--------------------------------

**TITLE**: Modifying Startup Parameters with modifyStartupExtension (SAP Fiori elements, OData V2)

**INTRODUCTION**: Use the modifyStartupExtension extension method (overwrite in extension.controller.js) to modify incoming startup parameters (selectionVariant, semanticDates), choose a default tab in multi-view list reports, and adapt selection variants passed from source apps. Applicable only to SAP Fiori elements for OData V2 and invoked on initial navigation to the app.

**TAGS**: fiori-elements, OData V2, SAP Fiori, modifyStartupExtension, selectionVariant, SmartFilterBar, analytical-list-page, list-report, overview-page, extension.controller.js

**STEP**: 1 — Overview: signature and oStartupObject properties

**DESCRIPTION**: Where to implement: overwrite modifyStartupExtension in your application's extension.controller.js. Use this method to:
- Modify selectionVariant: add/remove parameters and select options (ranges or single values) so values from a source app map to your app's filter bar.
- Set semanticDates to override semantic date ranges (YESTERDAY, etc.).
- Inspect urlParameters to dynamically choose a tab in multi-view list reports.
- Set selectedQuickVariantSelectionKey to choose the default tab/key defined in manifest.
- Note: The extension is called only on initial app navigation to the analytical list page or list report (not on variant changes, filter changes, back navigation, or refresh with iAppState).

oStartupObject properties:
- selectionVariant: SelectionVariant object (modify in-place).
- urlParameters: navigation URL parameters (used to decide dynamic tab selection for list reports).
- selectedQuickVariantSelectionKey: optional manifest tab key to set default tab.
- semanticDates: semantic date-range object (modify to set semantic filters).

**LANGUAGE**: JavaScript

**CODE**:
```javascript
modifyStartupExtension: function (oStartupObject) {
    // oStartupObject.selectionVariant      // SelectionVariant (add/remove parameters/selectOptions)
    // oStartupObject.urlParameters         // URL params used to decide which tab to load (list report)
    // oStartupObject.selectedQuickVariantSelectionKey // optional tab key to set default (manifest-defined)
    // oStartupObject.semanticDates         // semantic date ranges to override defaults
}
```

**STEP**: 2 — List Report: modify selectionVariant, semanticDates, and set default tab

**DESCRIPTION**: Overwrite modifyStartupExtension in extension.controller.js to:
- Modify incoming selectionVariant: removeParameter, addParameter, addSelectOption (including range values).
- Override or add semanticDates to set semantic date filters.
- Set selectedQuickVariantSelectionKey to choose a default tab in multi-view/multi-table list reports.

Place the exact code below into your extension.controller.js (keep code intact).

**LANGUAGE**: JavaScript

**CODE**:
```javascript

modifyStartupExtension: function(oStartupObject) {
       oSelectionVariant = oStartupObject.selectionVariant;
       if (oSelectionVariant) {
           oSelectionVariant.removeParameter("TaxAmount");
              oSelectionVariant.addParameter("Product", "EPM-2365436");
        // use        oSelectionVariant.addSelectOption("Price", "I", "BT", "1000","5000" ?)  To specify a range value
             
       }

       // to override the semanticDate object
       oStartupObject.selectionVariant.addParameter ("PickingDate","");
       oStartupObject.semanticDates = {
             "Dates":[
                    {
                           "PropertyName":"PickingDate",
                          "Data": {
                                 "operation":"YESTERDAY",
                                 "value1":null,
                                 "value2":null,
                                 "key":"filterPickingDate",
                                 "calendarType":"Gregorian"
                          }
                    }
             ]
       };
  oStartupObject.selectedQuickVariantSelectionKey = "_tab2";
}

```

**STEP**: 3 — Analytical List Page: conditionally modify selectionVariant and semanticDates

**DESCRIPTION**: For analytical list pages, overwrite modifyStartupExtension in extension.controller.js to:
- Inspect selectionVariant selectOptions with getSelectOption and addSelectOption to extend filters.
- Add or override semanticDates similarly to set semantic date ranges.

Place the exact code below into your extension.controller.js (keep code intact).

**LANGUAGE**: JavaScript

**CODE**:
```javascript

modifyStartupExtension: function (oStartupObject) {
	var oSelectionVariant = oStartupObject.selectionVariant;
	if (oSelectionVariant.getSelectOption("CustomerCountry") &oSelectionVariant.getSelectOption("CustomerCountry")["0"].Low === "AR") {
		oSelectionVariant.addSelectOption("WBSElement", "I", "EQ", "BLUE PRINT VALIDATION");
		oSelectionVariant.addSelectOption("CompanyCode", "I", "EQ", "EASI");
	}
	oStartupObject.selectionVariant.addSelectOption("c","I","EQ","");
	oStartupObject.semanticDates = {
		"Dates":[
			{
				"PropertyName":"SemanticCustomDate",
				"Data": {
					"operation":"YESTERDAY",
					"value1":null,
					"value2":null,
					"key":"SemanticCustomDate",
					"calendarType":"Gregorian"
				}
			}
		]
	};
}

```

**STEP**: 4 — Overview Page: modify selectionVariant passed from source app

**DESCRIPTION**: For overview pages, overwrite modifyStartupExtension in extension.controller.js to add or modify select options on the incoming selectionVariant (here named oCustomSelectionVariant). Use addSelectOption to add new filter criteria before the app applies them to the filter bar.

Place the exact code below into your extension.controller.js (keep code intact).

**LANGUAGE**: JavaScript

**CODE**:
```javascript
modifyStartupExtension: function (oCustomSelectionVariant) {
 
    oCustomSelectionVariant.addSelectOption("SupplierName", "I", "EQ", "Talpa");
}
```
--------------------------------

**TITLE**: Multi-Selection for Intent-Based Navigation (SAP Fiori elements, OData V4)

**INTRODUCTION**: Explains how multi-selection is passed during intent-based navigation in SAP Fiori elements (OData V4). Describes default behavior, identification constraints when records lack unique key fields, how selection variants are composed, and shows the exact JSON structure passed for multi-selection. Use this when generating navigation or constructing selection variants programmatically.

**TAGS**: fiori-elements-framework, odata-v4, intent-based-navigation, selection-variant, multi-selection, sap

**STEP**: 1 — Behavior, applicability, and ambiguity risk

**DESCRIPTION**: 
- Default: multi-selection for intent-based navigation is enabled by default.
- Applicability: This behavior applies only to SAP Fiori elements for OData V4.
- Identification constraint: Records that do not include a unique key field cannot be uniquely identified across properties. When multiple selected records are transformed into a selection variant, each property becomes a set of allowed values; the navigation target interprets each property as a conjunction (AND) of properties and a disjunction (OR) of values for each property.
- Resulting logic: The target app constructs (Property1 = v11 OR Property1 = v12 OR ...) AND (Property2 = v21 OR Property2 = v22 OR ...). This may produce extra records that were not part of the original row-wise selections.
- Actionable guidance for code generation:
  - Always include the entity key (or a composite key) properties in the selection variant to preserve row-level identity.
  - If row identity cannot be expressed as key properties, consider alternative approaches (e.g., pass explicit key predicates, use a dedicated navigation parameter containing unique record identifiers, or avoid multi-selection navigation).
  - When assembling selection variants programmatically, ensure SelectOptions contain the key fields to avoid accidental cross-combinations.

**LANGUAGE**: Text

**CODE**:
```text
Example of selected records (columns P1 and P2). Row-wise intent should pass contexts:
Record | P1 | P2
1      | A  | X
2      | B  | Y
3      | A  | Y

Navigation context passed becomes:
(P1 = A OR P1 = B) AND (P2 = X OR P2 = Y)
This can result in an extra record BX which was not in the original row selections.
```

**STEP**: 2 — Structure of the selection variant passed (sample JSON)

**DESCRIPTION**: Use this exact JSON structure as the selectionVariant payload when implementing or testing multi-selection intent-based navigation. When generating selection variants, populate SelectOptions arrays for each property with Ranges entries for each selected value. Ensure key properties are included in SelectOptions to preserve record identity.

**LANGUAGE**: JSON

**CODE**:
```json
{"selectionVariant":
    "SelectOptions":[
        {"PropertyName":"SalesOrder","Ranges":[
            {"Sign":"I","Option":"EQ","Low":"2919682","High":null}, // Context from 1st record for "SalesOrder"
            {"Sign":"I","Option":"EQ","Low":"2915717","High":null}  // Context from 2nd record for "SalesOrder"
        ]},
        {"PropertyName":"SalesOrderType","Ranges":[
            {"Sign":"I","Option":"EQ","Low":"OR","High":null}, // Context from 1st record for "SalesOrderType"
            {"Sign":"I","Option":"EQ","Low":"SE","High":null}  // Context from 2nd record for "SalesOrderType"
        ]},
        {"PropertyName":"TransactionCurrency","Ranges":[
            {"Sign":"I","Option":"EQ","Low":"EUR","High":null},
            {"Sign":"I","Option":"EQ","Low":"USD","High":null}
        ]},
.....
.....
```
--------------------------------

**TITLE**: Multiple Views in the List Report (Fiori Elements)

**INTRODUCTION**: Practical, code-focused guide to configure multiple views (variants) on a Fiori Elements List Report. Covers single-table vs multiple-table modes, annotation choices, OData V2/V4 specifics, manifest configuration example, refresh APIs, and step-by-step UI actions using SAP Fiori Tools.

**TAGS**: fiori-elements-framework, list-report, views, variant-management, manifest.json, annotations, SelectionVariant, SelectionPresentationVariant, PresentationVariant, ODataV4, ODataV2

STEP: Modes and UI behavior

DESCRIPTION: Use one of two UI modes. Implementation details and behavior you must handle in code/config:
- Single table mode (one table instance):
  - Single table and toolbar, optional single variant management.
  - Switch between views via segmented button in toolbar; if > 3 views the control becomes a Select.
- Multiple table mode (one table instance per view):
  - N tables for N views; each table has its own toolbar and variant management.
  - Switching is via an icon tab bar; only the selected tab's table is visible.
- Multiple table mode can include charts on specific tabs.
- If a property used in multiple views is not listed in SelectionFields, remove it from the FilterBar so users cannot add it via Adapt Filter.
- Restriction: StandardList and ObjectList cannot be used in multiple view scenarios.

LANGUAGE: Text

CODE:
```text
Single table mode: segmented button (or Select if >3 views) in table toolbar.
Multiple table mode: icon tab bar above tables, one table instance per view.
Ensure properties used across views are in SelectionFields or removed from FilterBar.
Do not use StandardList/ObjectList in multiple view scenarios.
```

STEP: Annotations — which to use

DESCRIPTION: Choose annotation based on what you need to describe:
- SelectionVariant: describe which data to display (filter criteria). Use for both modes. (See: Defining Multiple Views on a List Report Table - Single Table Mode)
- PresentationVariant: describe only the visualization (e.g., different chart type).
- SelectionPresentationVariant: describe both which data AND how to present it (filters + presentation). Can be used only for multiple table mode and multiple table mode with charts.
- Multiple table mode supports charts on tabs in addition to tables.

LANGUAGE: Text

CODE:
```text
- Use SelectionVariant for filter-only view definitions.
- Use SelectionPresentationVariant when you need filters + presentation (only for multiple table mode).
- Use PresentationVariant for visualization-only changes.
```

STEP: OData V2 additional features

DESCRIPTION: V2-specific notes:
- Tables are displayed by default.
- Each tab can show a different entity set. To display a different entity set per tab, add the entity set to the corresponding tab in the manifest (see manifest example below).
- Restriction: StandardList and ObjectList cannot be used in multiple view scenarios.

LANGUAGE: Text

CODE:
```text
For V2: default behavior shows tables. Configure a tab's entity set in the manifest per-tab to show different entity sets.
```

STEP: OData V4 settings and manifest example

DESCRIPTION: V4-specific settings you can control in manifest.json:
- stickyMultiTabHeader: set to false to hide icon tab bar on scroll.
- views[].visible: controls visibility. Accepts:
  - Boolean
  - a path (to a singleton or record)
  - a binding expression (see Expression Binding)
- You can set view-specific contextPath and annotationPath per view.
- Use controller extensions for custom view behavior if needed.
- Use ListReport ExtensionAPI methods to control refresh behavior:
  - setTabContentToBeRefreshedOnNextOpening
  - refreshTabsCount

LANGUAGE: JSON

CODE:
```json
"targets": {
     "DraftList": { 
          "type": "Component",
          "id": "DraftList",
          "name": "sap.fe.templates.ListReport",
          "options": {
               "settings": {
                    "contextPath": "/FirstDraft",
                    "variantManagement": "Control",
                    "initialLoad": "Enabled",
                    "stickyMultiTabHeader": false,
                    "views": {
                         "paths": [
                              {
                                   "key": "tab1",
                                   "annotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant#One",
                                   "visible": "{= ${/MySingleton/IsViewAvailable} === true}"
                              },
                              {
                                   "key": "tab2",
                                   "contextPath": "/SecondDraft",
                                   "annotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant#Two"
                              }
                         ]
                    }
               }
               …
          }
     }
}
…
```

STEP: Refresh control (APIs)

DESCRIPTION: Use the following ExtensionAPI methods (ListReport) to control view content and counts:
- setTabContentToBeRefreshedOnNextOpening — mark a tab's content to be refreshed the next time it is opened.
- refreshTabsCount — refresh counts for all views/tabs.
Include these via ListReport extension API in controller extensions.

LANGUAGE: Text

CODE:
```text
ListReport.ExtensionAPI methods:
- setTabContentToBeRefreshedOnNextOpening()
- refreshTabsCount()
Refer to UI5 docs for exact signatures:
https://ui5.sap.com/#/api/sap.fe.templates.ListReport.ExtensionAPI
```

STEP: Expression binding for view visibility

DESCRIPTION: visible property in views accepts binding expressions. Use Expression Binding syntax to evaluate visibility at runtime. See Expression Binding docs for syntax and examples.

LANGUAGE: Text

CODE:
```text
Example visible binding (in manifest.json):
"visible": "{= ${/MySingleton/IsViewAvailable} === true}"
Docs: ../04_Essentials/expression-binding-daf6852.md
```

STEP: Add multiple views using SAP Fiori Tools (UI steps)

DESCRIPTION: Use SAP Fiori Tools Page Map / Page Editor to add views without editing JSON manually. Actionable UI steps:
1. Open Page Map (e.g., right-click project folder → Show Page Map).
2. Open Page Editor for your List Report (click pencil/edit icon next to List Report).
3. Click Add (+) next to Views.
4. Click Add Table View.
5. Select an Entity.
6. Click Add.
7. Expand new table view node.
8. Click Add (+) next to Columns.
9. Click Add Basic Columns.
10. Select columns to include.
11. Click Add.
12. Click the new view node.
13. Set View Label to rename view.
14. Preview via Previewing an Application.

LANGUAGE: Text

CODE:
```text
UI Steps (Fiori Tools):
- Page Map -> Page Editor -> Views -> Add Table View -> select Entity -> Add
- Expand view -> Columns -> Add Basic Columns -> select columns -> Add
- Edit View Label -> Preview app
```

STEP: Controller extension for custom views

DESCRIPTION: To implement advanced/custom view behavior programmatically, implement a controller extension and use extension points for views. See the extension points documentation.

LANGUAGE: Text

CODE:
```text
Use Extension Points:
- Extension Points for Views in the List Report: extension-points-for-views-in-the-list-report-eb37203.md
Implement ListReport controller extension to inject custom view definitions or custom tab behavior.
```

STEP: Assets, images, and linked resources (paths)

DESCRIPTION: Preserve and reference the following resources in your project:
- CSS icons: ../css/sap-icons.css
- Image assets used in documentation (for design/reference):
  - images/Single_Table_Mode_8a3bdfd.jpg
  - images/Multiple_Table_Mode_1be5a97.png
  - images/Multiple_Table_Mode_with_Charts_a0ae409.png
  - images/Multiple_Views_with_Multiple_Entity_Sets_1f20511.png

LANGUAGE: HTML

CODE:
```html
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```

STEP: References and related docs

DESCRIPTION: Keep these links for exact implementation details and vocabulary:
- OData annotation vocabulary (UI): https://github.com/SAP/odata-vocabularies/blob/main/vocabularies/UI.md
- Expression Binding: ../04_Essentials/expression-binding-daf6852.md
- Defining Multiple Views — Single Table Mode: defining-multiple-views-on-a-list-report-table-single-table-mode-0d390fe.md
- Defining Multiple Views — Multiple Table Mode: defining-multiple-views-on-a-list-report-table-multiple-table-mode-37aeed7.md
- Different Entity Sets & Table Settings: defining-multiple-views-on-a-list-report-with-different-entity-sets-and-table-settings-b6b59e4.md
- Extension Points for Views: extension-points-for-views-in-the-list-report-eb37203.md

LANGUAGE: Text

CODE:
```text
Key docs:
- OData UI vocabulary: https://github.com/SAP/odata-vocabularies/blob/main/vocabularies/UI.md
- List Report views: see related md files listed above.
```
--------------------------------

**TITLE**: Outbound Navigation for SAP Fiori Elements (URLs & Intent-Based Navigation)

**INTRODUCTION**: Practical, code-focused reference for configuring outbound navigation in SAP Fiori Elements (OData V2/V4). Covers using URLs, intent-based navigation (semantic objects) via links and buttons, semantic object mapping, control of navigation availability, exclusion of sensitive fields from navigation context, multi-entity-set/tab resolution, and SelectionVariant parameter passing. Use these snippets directly in XML annotations, ABAP CDS, CAP CDS, manifest.json, and extension controllers.

**TAGS**: fiori-elements, navigation, semantic-object, DataFieldWithUrl, DataFieldWithIntentBasedNavigation, DataFieldForIntentBasedNavigation, annotations, manifest.json, selectionvariant, CAP, ABAP, XML, JavaScript

STEP: Using a URL (path reference to a property)
DESCRIPTION: Use UI.DataFieldWithUrl to render a link where Url and Value are taken from a property path.
LANGUAGE: XML
CODE:
```xml
<Record Type="UI.DataFieldWithUrl">
    <PropertyValue Property="Label" String="Column label" />
    <PropertyValue Property="Value" Path="URL"/>
    <PropertyValue Property="Url" Path="URL"/>
</Record>
```

STEP: Using a URL (ABAP CDS example - path reference)
DESCRIPTION: ABAP CDS annotation to define a line-item/fieldGroup entry using a URL property.
LANGUAGE: ABAP CDS
CODE:
```
@UI.<lineItem/fieldGroup>: [{ type: #WITH_URL, url: 'URL' }]
URL;
```

STEP: Using a URL (CAP CDS example - path reference)
DESCRIPTION: CAP CDS JSON-style annotation for UI.DataFieldWithUrl using a property reference.
LANGUAGE: CAP CDS
CODE:
```
{
    $Type :  'UI.DataFieldWithUrl',
    Value :  URL,
    Url :    URL,
    Label :  'Column label'
},
```

STEP: Using a URL (absolute URL in XML)
DESCRIPTION: Define an absolute link target via UI.DataFieldWithUrl (hard-coded URL).
LANGUAGE: XML
CODE:
```xml
<Record Type="UI.DataFieldWithUrl">
    <PropertyValue Property="Url" String="Your URL"/><!--For example: https://www.sap.com-->
    <PropertyValue Property="Value" Path="URL"/>
    <PropertyValue Property="Label" String="Company"/>
</Record>
```

STEP: Using a URL (absolute URL in ABAP CDS)
DESCRIPTION: ABAP CDS structure for an absolute URL.
LANGUAGE: ABAP CDS
CODE:
```
{
    label: 'Company',
    type: #WITH_URL,
    url: 'Your URL' //For example: https://sap.com
}
```

STEP: Using a URL (absolute URL in CAP CDS)
DESCRIPTION: CAP CDS JSON-style element for an absolute URL.
LANGUAGE: CAP CDS
CODE:
```
{
    $Type : 'UI.DataFieldWithUrl',
    Url :   'Your URL', //For example: https://www.sap.com
    Value : 'URL',
    Label : 'Company'
}
```

STEP: Link control rendering restriction (note)
DESCRIPTION: In SAP Fiori Elements for OData V2, link control is rendered only in display mode.

STEP: Intent-Based Navigation — Global Semantic Object (XML)
DESCRIPTION: Annotate a property globally with Common.SemanticObject so it is rendered as a semantic link wherever used.
LANGUAGE: XML
CODE:
```xml
<Annotations xmlns="http://docs.oasis-open.org/odata/ns/edm" Target="ZFAR_CUSTOMER_LINE_ITEMS2_SRV.Item/CostCenter">
    <Annotation Term="com.sap.vocabularies.Common.v1.SemanticObject" String="CostCenter"/>
</Annotations>
```

STEP: Intent-Based Navigation — Global Semantic Object (ABAP CDS)
DESCRIPTION: ABAP CDS annotate view property with Consumption.semanticObject.
LANGUAGE: ABAP CDS
CODE:
```
annotate view ITEM with {
    @Consumption.semanticObject: 'CostCenter'
    costcenter;
}
```

STEP: Intent-Based Navigation — Global Semantic Object (CAP CDS)
DESCRIPTION: CAP CDS annotate with Common.SemanticObject in a service/entity context.
LANGUAGE: CAP CDS
CODE:
```
annotate ZFAR_CUSTOMER_LINE_ITEMS2_SRV.Item with {
    @Common.SemanticObject : 'CostCenter'
    CostCenter
};
```

STEP: Dynamic semantic object (XML)
DESCRIPTION: Use a Path in Common.SemanticObject to resolve the semantic object name at runtime.
LANGUAGE: XML
CODE:
```xml
<Annotations Target="myService.SalesorderManage/SoldToParty">
   <Annotation Term="Common.SemanticObject" Path="solToPartySemanticObject"/>
</Annotations>
```

STEP: Dynamic semantic object (CAP CDS)
DESCRIPTION: CAP CDS example where a property contains the semantic object name at runtime.
LANGUAGE: CAP CDS
CODE:
```
SoldToParty: String(10) @(
 Common.SemanticObject: solToPartySemanticObject
);
```

STEP: Local association — DataFieldWithIntentBasedNavigation (XML)
DESCRIPTION: Use DataFieldWithIntentBasedNavigation in LineItem/FieldGroup to render a context-specific link. Specify SemanticObject + Action to create a unique target for direct navigation.
LANGUAGE: XML
CODE:
```xml
<Record Type="UI.DataFieldWithIntentBasedNavigation">
    <PropertyValue Property="Label" String="My Link for navigation" />
    <PropertyValue Property="Value" Path="SomePath" />
    <PropertyValue Property="SemanticObject" String="MySemanticObject"/>
    <PropertyValue Property="Action" String="manage"/>
</Record>
```

STEP: Local association — DataFieldWithIntentBasedNavigation (ABAP CDS)
DESCRIPTION: ABAP CDS example for local intent-based link in a lineItem/fieldGroup.
LANGUAGE: ABAP CDS
CODE:
```
@UI.<lineItem/fieldGroup>: [ 
  {
    label: 'My Link for navigation',
    value: 'SOMEPATH',
    semanticObjectAction: 'manage',
    type: #WITH_INTENT_BASED_NAVIGATION
  }
]
@Consumption.semanticObject: 'MySemanticObject'
```

STEP: Local association — DataFieldWithIntentBasedNavigation (CAP CDS)
DESCRIPTION: CAP CDS representation for DataFieldWithIntentBasedNavigation.
LANGUAGE: CAP CDS
CODE:
```
    {
        $Type : 'UI.DataFieldWithIntentBasedNavigation',
        Label : 'My Link for navigation',
        Value : SomePath,
        SemanticObject : 'MySemanticObject',
        Action : 'manage',
    },
```

STEP: Button-based navigation — DataFieldForIntentBasedNavigation (XML)
DESCRIPTION: Annotate a property as DataFieldForIntentBasedNavigation to render a button that triggers intent-based navigation. Provide SemanticObject and Action.
LANGUAGE: XML
CODE:
```xml
<Record Type="UI.DataFieldForIntentBasedNavigation">
    <PropertyValue Property="Label" String="My Button for navigation"/>
    <PropertyValue Property="SemanticObject" String="MySemanticObject"/>
    <PropertyValue Property="Action" String="manage"/>
</Record>
```

STEP: Button-based navigation — DataFieldForIntentBasedNavigation (ABAP CDS)
DESCRIPTION: ABAP CDS example for a header/table button.
LANGUAGE: ABAP CDS
CODE:
```
@UI.<lineItem/fieldGroup>: [ 
  {
    label: 'My Button for navigation',
    semanticObjectAction: 'manage',
    type: #FOR_INTENT_BASED_NAVIGATION
  }
]
@Consumption.semanticObject: 'MySemanticObject'
```

STEP: Button-based navigation — DataFieldForIntentBasedNavigation (CAP CDS)
DESCRIPTION: CAP CDS JSON-style definition for a navigation button.
LANGUAGE: CAP CDS
CODE:
```
{
    $Type : 'UI.DataFieldForIntentBasedNavigation',
    Label : 'My Button for navigation',
    SemanticObject : 'MySemanticObject',
    Action : 'manage',
},
```

STEP: Actions triggering external navigation — RequiresContext (XML)
DESCRIPTION: Use RequiresContext Bool="true" to make the button disabled until a selection is made. Default is false.
LANGUAGE: XML
CODE:
```xml
<Record Type="UI.DataFieldForIntentBasedNavigation">
   <PropertyValue Property="SemanticObject" String="EPMProduct"/>
   <PropertyValue Property="Action" String="manage_st"/>
   <PropertyValue Property="Label" String="IBNWithContext"/>
   <PropertyValue Property="RequiresContext" Bool="true"/>
</Record>
```

STEP: Actions triggering external navigation — RequiresContext (ABAP CDS)
DESCRIPTION: ABAP CDS equivalent specifying requiresContext true.
LANGUAGE: ABAP CDS
CODE:
```
{    
    semanticObject: 'EPMProduct',
    semanticObjectAction: 'manage_st',
    label: 'IBNWithContext',
    requiresContext: true,
    type: #FOR_INTENT_BASED_NAVIGATION
}
```

STEP: Actions triggering external navigation — RequiresContext (CAP CDS)
DESCRIPTION: CAP CDS example for DataFieldForIntentBasedNavigation with RequiresContext.
LANGUAGE: CAP CDS
CODE:
```
{
   $Type: 'UI.DataFieldForIntentBasedNavigation',
   SemanticObject: 'SalesOrder',
   Action: 'manageInline',
   Label: 'IBNwithcontext',
   RequiresContext: true
}
```

STEP: Display/hide context-independent buttons (note + prerequisites)
DESCRIPTION: Context-independent buttons (RequiresContext=false) can be displayed only if the FLP navigation target is supported on current device and mandatory parameters are consistent between FLP target configuration and RequiresContext. Maintain supported devices and mandatory parameters in SAP Fiori launchpad.

STEP: Hide intent-based navigation button with UI.Hidden
DESCRIPTION: Use UI.Hidden (true/false/path) on UI.DataFieldForIntentBasedNavigation to hide the button. UI.Hidden cannot be set for inline DataFieldForIntentBasedNavigation.

STEP: Semantic Object Mapping — semantic-link mapping (XML)
DESCRIPTION: Use Common.SemanticObjectMapping to translate source property names into SemanticObjectProperty names for link-based navigation.
LANGUAGE: XML
CODE:
```xml
<Annotations Target="com.c_salesordermanage_sd.defaultParamsForSalesOrderCreate/SoldToParty">
     <Annotation Term="Common.SemanticObject" String="Customer"/>
     <Annotation Term="Common.SemanticObjectMapping">
          <Collection>
               <Record Type="Common.SemanticObjectMappingType">
                    <PropertyValue Property="LocalProperty" PropertyPath="SoldToPartyID"/>
                    <PropertyValue Property="SemanticObjectProperty" String="CustomerID"/>
               </Record>
          </Collection>
     </Annotation>
</Annotations>
```

STEP: Semantic Object Mapping — CAP CDS (link-based)
DESCRIPTION: CAP CDS adaptation using Common.SemanticObjectMapping with LocalProperty -> SemanticObjectProperty.
LANGUAGE: CAP CDS
CODE:
```
SoldToParty : String(10) @(Common : { 
    SemanticObject                : 'Customer',
    SemanticObjectMapping         : 'SoldToPartyID'[
        {
        LocalProperty           : SoldToPartyID,
        SemanticObjectProperty  : 'CustomerID'
        }
    ]
});
```

STEP: Excluding properties from navigation context (sensitive and explicit exclusion) (XML)
DESCRIPTION: Use PersonalData.IsPotentiallySensitive or UI.ExcludeFromNavigationContext in XML annotations to exclude properties from navigation context.
LANGUAGE: XML
CODE:
```xml
<Annotations Target="ZEPM_C_User.C_UserDetailsType/CreditCardNumber">
    <Annotation Term="com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive" />
</Annotations>

<Annotations Target="ZEPM_C_SALESORDERITEMQUERY_CDS.ZEPM_C_SALESORDERITEMKPIResult/BusinessPartner">
    <Annotation Term="UI.ExcludeFromNavigationContext />
</Annotations>
```

STEP: Excluding properties (ABAP CDS sensitive example)
DESCRIPTION: ABAP CDS annotate property as potentially sensitive to exclude it.
LANGUAGE: ABAP CDS
CODE:
```
annotate view C_UserDetails with {
  @Semantics.personalData.isPotentiallySensitive: true
  CreditCardNumber;
}
```

STEP: Excluding properties (CAP CDS)
DESCRIPTION: CAP CDS annotation for IsPotentiallySensitive and UI.ExcludeFromNavigationContext.
LANGUAGE: CAP CDS
CODE:
```
annotate com.c_salesordermanage_sd.SalesOrderManage {
    @PersonalData.IsPotentiallySensitive
    ID
};

annotate com.c_salesordermanage_sd.SalesOrderManage {
    @UI.ExcludeFromNavigationContext : true
    ID
};
```

STEP: Inapplicable properties — FieldControl (XML)
DESCRIPTION: Use FieldControl with a path reference. If the FieldControl resolves to Inapplicable at runtime, property is excluded.
LANGUAGE: XML
CODE:
```xml
<Annotations Target="SAP__self.ReviewsType/AvailabilityCode">
    <Annotation Term=" SAP__Common.FieldControl" Path="__FieldControl/AvailabilityCode_FC"/>
</Annotations>
```

STEP: Inapplicable properties — CAP CDS FieldControl
DESCRIPTION: CAP CDS mapping of FieldControl to property.
LANGUAGE: CAP CDS
CODE:
```
annotate SAP__self.ReviewsType {
    @Common.FieldControl : __FieldControl.AvailabilityCode_FC
    AvailabilityCode
};
```

STEP: Handling sensitive/inapplicable data (OData V4 note)
DESCRIPTION: Measures, PersonalData.IsPotentiallySensitive, UI.ExcludeFromNavigationContext, and FieldControl->Inapplicable values are removed from outbound navigation context. Sensitive properties beyond one level are not removed (caution).

STEP: Handling navigation entity set rules (summary)
DESCRIPTION: Rules for constructing merged navigation context:
- If a property name appears in only one entity set, pass as propertyName:value (no prefix).
- If property name exists in multiple entity sets (conflict), pass unprefixed property plus prefixed entitySet.propertyName entries.
- Page context vs selection context: more specific context values (e.g., selected row) take precedence; navigation entity sets’ properties are ignored for page-level context merging.
- Special handling for semantic link: when a semantic-link field is clicked, its value for that technical name is used and other values with same name are ignored.

STEP: Example scenarios for merged context (explanatory)
DESCRIPTION: See original scenarios showing how OrderType, Price, ItemNumber values are chosen and how prefixed versions are included in case of conflict. (Retain the described logic when implementing.)

STEP: Passing of parameters in an outbound context (SelectionVariant behavior)
DESCRIPTION: All parameters part of context are added into the xAppState SelectionVariant twice:
- SelectionVariant→SelectOptions with prefix "$Parameter.<ParamName>"
- SelectionVariant→SelectOptions with plain "<ParamName>"
This applies to both V2 and V4 outbound navigation.

STEP: Mapping Semantic Objects for DataFieldForIntentBasedNavigation (XML)
DESCRIPTION: Use Mapping property in DataFieldForIntentBasedNavigation to map source properties to semantic-object parameter names sent to target.
LANGUAGE: XML
CODE:
```xml
<Record Type="UI.DataFieldForIntentBasedNavigation">
   ...
    <PropertyValue Property="Mapping">
        <Collection>
            <Record>
                <PropertyValue Property="LocalProperty" PropertyPath="nameOfSourceProperty"/>
                <PropertyValue Property="SemanticObjectProperty" String="nameOfTargetProperty"/>
            </Record>                                              
            ...
        </Collection>
    </PropertyValue>
</Record>
```

STEP: Mapping Semantic Objects for DataFieldForIntentBasedNavigation (ABAP CDS)
DESCRIPTION: ABAP CDS representation of semantic object binding mapping for a navigation button.
LANGUAGE: ABAP CDS
CODE:
```
{
      type: #FOR_INTENT_BASED_NAVIGATION,
      semanticObject: 'nameOfSemanticObject',
      semanticObjectAction: 'nameOfSemanticObjectAction',
      semanticObjectBinding: [ 
       {
        localElement: 'nameOfSourceProperty',
        element: 'nameOfTargetProperty',
      } 
   ]
}
```

STEP: Mapping Semantic Objects for DataFieldForIntentBasedNavigation (CAP CDS)
DESCRIPTION: CAP CDS Mapping array for DataFieldForIntentBasedNavigation.
LANGUAGE: CAP CDS
CODE:
```
{
     $Type : 'UI.DataFieldForIntentBasedNavigation',
     Mapping : [
         {
             LocalProperty : nameOfSourceProperty,
             SemanticObjectProperty : 'nameOfTargetProperty',
         },
     ],
},
```

STEP: Empty values handling
DESCRIPTION: Empty values are not passed to the target unless the filter bar Define Conditions sets them explicitly.

STEP: LinkTarget for DataFieldWithUrl (XML with edmx reference)
DESCRIPTION: Use com.sap.vocabularies.HTML5.v1.LinkTarget to specify _self/_blank/_parent/_top for opening window/tab/frame. Include edmx reference for HTML5 vocabulary.
LANGUAGE: XML
CODE:
```xml
<edmx:Reference Uri="https://sap.github.io/odata-vocabularies/vocabularies/HTML5.xml">
      <edmx:Include Namespace="com.sap.vocabularies.HTML5.v1" Alias="SAP__HTML5"/>
</edmx:Reference>

<Record Type="UI.DataFieldWithUrl">
  <PropertyValue Property="Label" String="FLP version 6"/>
  <PropertyValue Property="Url" String="http://www.example.com"/>
  <PropertyValue Property="Value" String="Link Target"/>
  <Annotation Term="HTML5.LinkTarget" String="_blank"/>
</Record>
```

STEP: LinkTarget for DataFieldWithUrl (CAP CDS)
DESCRIPTION: CAP CDS using HTML5.LinkTarget (note: local XML preferred for ABAP).
LANGUAGE: CAP CDS
CODE:
```
{
  $Type               : 'UI.DataFieldWithUrl',
  Label               : 'FLP version 6',
  Url                 : 'http://www.example.com',
  Value               : 'Link Target',
  ![@HTML5.LinkTarget]: '_blank',
}
```

STEP: NavigationAvailable property for DataFieldForIntentBasedNavigation (XML)
DESCRIPTION: Use NavigationAvailable (true/false/path) to enable/disable a navigation button. Path can point to parent, same-level property, or 1:1 nav property. For table toolbar with path, button enabled only if at least one selected context has path evaluating to true.
LANGUAGE: XML
CODE:
```xml
<Record Type="UI.DataFieldForIntentBasedNavigation">
    <PropertyValue Property="SemanticObject" String="v4Freestyle"/>
    <PropertyValue Property="Action" String="Inbound"/>
    <PropertyValue Property="Label" String="IBN with context"/>
    <PropertyValue Property="RequiresContext" Bool="true"/>
    <PropertyValue Property="NavigationAvailable" Path="isDeletable"/>
</Record>
```

STEP: NavigationAvailable property for DataFieldForIntentBasedNavigation (CAP CDS)
DESCRIPTION: CAP CDS example using a path property for NavigationAvailable.
LANGUAGE: CAP CDS
CODE:
```
{
        $Type           : 'UI.DataFieldForIntentBasedNavigation',
        SemanticObject  : 'v4Freestyle',
        Action          : 'Inbound',
        Label           : 'IBN',
        NavigationAvailable : isDeletable,
        RequiresContext : false
}
```

STEP: Hiding unwanted actions from a semantic object (XML)
DESCRIPTION: Use Common.SemanticObjectUnavailableActions (with optional qualifier) to hide specific actions from the semantic link popover.
LANGUAGE: XML
CODE:
```xml
<Annotations Target="MyService.SalesOrderManage/SoldToParty">
    <Annotation Term="Common.SemanticObject" Qualifier="SalesOrder" String="SalesOrder"/>
    <Annotation Term="Common.SemanticObjectMapping" Qualifier="SalesOrder">
        <Collection>
            <Record Type="Common.SemanticObjectMappingType">
                <PropertyValue Property="LocalProperty" PropertyPath="SoldToParty"/>
                    <PropertyValue Property="SemanticObjectProperty" String="SoldToParty"/>
            </Record>
        </Collection>
    </Annotation>
    ...
    <Annotation Term="Common.SemanticObjectUnavailableActions" Qualifier="SalesOrder">
        <Collection>
            <String>manageVM</String>
        </Collection>
    </Annotation>
    <Annotation Term="Common.SemanticObjectUnavailableActions">
        <Collection>
            <String>manage</String>
        </Collection>
    </Annotation>
    ...
</Annotations>
```

STEP: Hiding unwanted actions (CAP CDS)
DESCRIPTION: CAP CDS notation to hide actions with and without qualifier.
LANGUAGE: CAP CDS
CODE:
```
annotate myService.SalesorderManage {
    @Common.SemanticObject : 'SalesOrder'
    @Common.SemanticObject #SalesOrder : 'SalesOrder'
    @Common.SemanticObjectUnavailableActions #SalesOrder : ['analyze']
    @Common.SemanticObjectUnavailableActions : ['manage']
    OrderID
};
```

STEP: Additional context during outbound navigation — SemanticKey & SecondaryKey (XML)
DESCRIPTION: Add Common.SemanticKey and Common.SecondaryKey annotations to include semantic/secondary keys into the navigation context. Example shows SecondaryKey on an EntityType.
LANGUAGE: XML
CODE:
```xml
<edmx:Reference Uri="https://sap.github.io/odata-vocabularies/vocabularies/Common.xml">
	<edmx:Include Alias="Common" Namespace="com.sap.vocabularies.Common.v1" />
</edmx:Reference>
...
<EntityType Name="Product">
   <Key>
       <PropertyRef Name="ProductId"/>
   </Key>
   <Property Name="ProductId" Type="Edm.Int32" Nullable="false"/>
   <Property Name="ProductCode" Type="Edm.String" Nullable="false"/>
   <Property Name="ProductName" Type="Edm.String" Nullable="false"/>

   <!-- Secondary key annotation -->
   <Annotations>
       <Annotation Term="Common.SecondaryKey">
           <Collection>
                 <PropertyPath>ProductCode</PropertyPath>
           </Collection>
       </Annotation>
   </Annotations>
</EntityType>
```

STEP: Additional context — SemanticKey (snippet)
DESCRIPTION: Example fragment defining SemanticKey in JSON-like notation.
LANGUAGE: JSON
CODE:
```
Common: {
        SemanticKey   : [SalesOrder]
    }
```

STEP: Additional context — CAP CDS for SecondaryKey
DESCRIPTION: CAP CDS example adding Common.SecondaryKey.
LANGUAGE: CAP CDS
CODE:
```
annotate c_salesordermanage_sd.Product with @(
  Common.SecondaryKey: ['ProductCode']
){}
```

STEP: Multi-Entity Set / Tabs navigation (SAP Fiori Elements V2) — source extensions
DESCRIPTION: For multi-entity target apps, add a distinguishing parameter in the source app using adaptNavigationParameterExtension in the ListReport and ObjectPage extension controllers. This parameter is consumed in the target manifest.json via useForTargetResolution.
LANGUAGE: JavaScript
CODE:
```javascript
// ListReportExtension.controller.js
adaptNavigationParameterExtension: function(oSelectionVariant, oObjectInfo) {
    if (oObjectInfo.semanticObject === "EPMSalesOrder" && oObjectInfo.action === "manage_sttasomv") {
        oSelectionVariant.addParameter("<Key>", "<Value1>");
    }
}
```

```javascript
// ObjectPageExtension.controller.js
adaptNavigationParameterExtension: function(oSelectionVariant, oObjectInfo) {
    if (oObjectInfo.semanticObject === "EPMSalesOrder" && oObjectInfo.action === "manage_sttasomv") {
        oSelectionVariant.addParameter("<Key>", "<Value2>");
    }
}
```

STEP: Multi-Entity Set / Tabs navigation (V2) — manifest.json target resolution
DESCRIPTION: In the target app manifest.json for V2, mark the inbound parameter with useForTargetResolution under sap.ui.generic.app settings to drive page selection.
LANGUAGE: JSON
CODE:
```json
"sap.ui.generic.app": {
        "settings": {
            "inboundParameters": {
                "<Key>": {
                    "useForTargetResolution": true
                }
            }
        }
}
```

STEP: Multi-Entity Set / Tabs navigation (V2) — pages example
DESCRIPTION: Use page hierarchy to map Key->Value to entitySet object pages. Use targetResolution settings per page to match incoming parameter value to the desired object page.
LANGUAGE: JSON
CODE:
```
"sap.ui.generic.app": {
        "pages": {
            "ListReport|<EntitySet1>": {
                "entitySet": "<EntitySet1>",
                "component": {
                    "name": "sap.suite.ui.generic.template.ListReport",
                    "settings": {
                        "quickVariantSelectionX": {
                            "variants": {
                                "1": {
                                    "key": "1",
                                    "entitySet": "<EntitySet1>",
                                    "annotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant#VAR1"
                                },
                                "2": {
                                    "key": "2",
                                    "entitySet": "<EntitySet2>",
                                    "annotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant#VAR2" 
                                }
                            }
                        }
                    }
                },
                "pages": {
                    "ObjectPage|<EntitySet1>": {
                        "entitySet": "<EntitySet1>",
                        "component": {
                            "name": "sap.suite.ui.generic.template.ObjectPage",
                            "settings": { 
                                "targetResolution": {
                                    "<Key>": "<Value1>"
                                }
                            }
                        }
                    },
                    "ObjectPage|<EntitySet2>": {
                        "entitySet": "<EntitySet2>",
                        "component": {
                            "name": "sap.suite.ui.generic.template.ObjectPage",
                            "settings": {
                                "targetResolution": {
                                    "<Key>": "<Value2>"
                                }
                            } 
                        } 
                    }
                }
            }
        }
    }
```

STEP: Multi-Entity Set / Tabs navigation (SAP Fiori Elements V4) — source adaptNavigationContext
DESCRIPTION: For V4, use adaptNavigationContext in extension controllers to add parameter(s) used as target resolution keys.
LANGUAGE: JavaScript
CODE:
```javascript
// ListReportExtension.controller.js
adaptNavigationContext: function (selectionVariant, targetInfo) {
    if (targetInfo.semanticObject === "SalesOrder" && targetInfo.action === "manage") {
        selectionVariant.addParameter("<Key>", "<Value1>");
    }
}
```

```javascript
// ObjectPageExtension.controller.js
adaptNavigationContext: function (selectionVariant, targetInfo) {
    if (targetInfo.semanticObject === "SalesOrder" && targetInfo.action === "manage") {
        selectionVariant.addParameter("<Key>", "<Value2>");
    }
}
```

STEP: Multi-Entity Set / Tabs navigation (V4) — manifest inboundParameterForTargetResolution
DESCRIPTION: For V4 target app, declare inboundParameterForTargetResolution in sap.fe.app settings in manifest.json.
LANGUAGE: JSON
CODE:
```json
"sap.fe": {
    "app": {
        "inboundParameterForTargetResolution": "<Key>"
    }
}
```

STEP: Multi-Entity Set / Tabs navigation (V4) — routing targetResolutionValue
DESCRIPTION: Use targetResolutionValue in UI5 routing targets to map incoming Key->Value to the right ObjectPage component.
LANGUAGE: JSON
CODE:
```json
"sap.ui5": {
    "routing": {
        "targets": {
            "ObjectPage|<EntitySet1>": {
                "type": "Component",
                "id": "ObjectPage1",
                "name": "sap.fe.templates.ObjectPage",
                "options": {
                    "settings": {
                        "targetResolutionValue": "<Value1>",
                        "entitySet": "<EntitySet1>"
                    }
                }
            },
            "ObjectPage|<EntitySet2>": {
                "type": "Component",
                "id": "ObjectPage2",
                "name": "sap.fe.templates.ObjectPage",
                "options": {
                    "settings": {
                        "targetResolutionValue": "<Value2>",
                        "entitySet": "<EntitySet2>"
                    }
                }
            }
```

STEP: Notes & precedence for multi-entity mapping
DESCRIPTION: creationEntitySet settings take priority over manifest target resolution. If navigation context cannot uniquely identify the target object page, list report opens with first tab selected.


--------------------------------

**TITLE**: Navigation from Header Facet Title (SAP Fiori elements, OData V4)

**INTRODUCTION**: Configure header facet titles (data points, rating/progress indicators, micro charts) to navigate within the same page (in-page) or to external applications (external navigation) by adding controlConfiguration entries to manifest.json and defining crossNavigation outbounds. Applicable only to SAP Fiori elements for OData V4.

**TAGS**: fiori-elements-framework, OData V4, manifest.json, controlConfiguration, in-page navigation, external navigation, crossNavigation, micro chart, data point

STEP: 1 — Enable In-Page Navigation from Header Item

DESCRIPTION: Add a controlConfiguration entry for the header item in manifest.json to render the header item's title as a link that navigates to a section or subsection in the same page. Provide sectionId and/or subSectionId under navigation.targetSections. If only sectionId is provided, the first subsection is shown. Supported header controls: data point, rating indicator, progress indicator, micro chart. An incorrect configuration shows an error that the specified section could not be found.

LANGUAGE: JSON (manifest.json)

CODE:
```json
"SalesOrderManageObjectPage":{
    "type": "Component",
    "id": "SalesOrderManageObjectPage",
    "name": "sap.fe.templates.ObjectPage",
    "options":{
        "settings":{
            "controlConfiguration":{
                "@com.sap.vocabularies.UI.v1.DataPoint#NetValue":{ // path to the header item
                    "navigation":{
                        "targetSections":{
                            "sectionId": "SalesOrder::SalesOrderManageObjectPage--fe::FacetSection::HeaderInfo", // section ID
                            "subSectionId": "SalesOrder::SalesOrderManageObjectPage--fe::FacetSubSection::SalesOrderHeaderPartner" // subsection ID
                        }
                    }
                }
            }
        }
    }
}
```

STEP: 2 — Enable External Navigation from a Header Data Point (manifest controlConfiguration)

DESCRIPTION: Configure targetOutbound in the header data point's controlConfiguration to navigate externally. The qualifier name given in targetOutbound.outbound must match the outbound key defined under crossNavigation.outbounds. When configured correctly, the data point title is rendered as a link; clicking it launches the external app with a merged page+data-point context.

LANGUAGE: JSON (manifest.json)

CODE:
```
"SalesOrderManageObjectPage" : {
    ....
    ....
    ....
    "options": {
        "settings": {
            "controlConfiguration": {
                "@com.sap.vocabularies.UI.v1.DataPoint#NetValue": {
                    "navigation": {
                        "targetOutbound": {               
                            "outbound": "ExternalNavigation"
                        }
                    }
                }
            }
        }
    }
}
```

STEP: 3 — Define the Outbound in crossNavigation (target application and parameter mappings)

DESCRIPTION: Add an outbound entry in the manifest's crossNavigation.outbounds section that matches the qualifier used in targetOutbound. Configure semanticObject, action, and parameter mappings. Use "format": "binding" and "value": {"value": "<field>", "format": "binding"} to pass fields from the current context. The example maps CustomerName to SoldToParty.

LANGUAGE: JSON (manifest.json)

CODE:
```
"crossNavigation": {          
    "outbounds": {   
        "ExternalNavigation": {           
            "semanticObject": "SalesOrder",   
            "action": "display",   
            "parameters": {              
                "SoldToParty": {                                          
                    "value": {                                                      
                        "value": "CustomerName",                                              
                        "format": "binding"                                  
                    }                           
                }                                 
            }                     
        }         
    }
}
```

STEP: 4 — Enable External Navigation from a Micro Chart

DESCRIPTION: Configure the micro chart in controlConfiguration with targetOutbound similar to the data point example. Navigation uses the x-app state: the page context is merged with the chart context and passed to the target application. For 1:n micro charts (multiple records), multiple technical IDs are passed using OR semantics. If the external app is misconfigured or lacks authorization, the chart title is rendered as plain text. Note: if both external and in-page navigation are configured for the same header data point, external navigation takes precedence. Only a single external target is supported.

LANGUAGE: JSON (manifest.json)

CODE:
```
"SalesOrderManageObjectPage" : {
    ....
    ....
    ....
    "options": {
        "settings": {
            "controlConfiguration": {
                "@com.sap.vocabularies.UI.v1.Chart#CreditLimitDetails": {                                 
                    "navigation": {
                        "targetOutbound": {               
                            "outbound": "ExternalNavigation"
                        }
                    }
                }
            }
        }
    }
}
```
--------------------------------

**TITLE**: Inbound Navigation and Deep Linking for SAP Fiori Elements (OData V2 & V4)

**INTRODUCTION**: Action-oriented reference for implementing inbound navigation, deep linking, and incoming filter handling in SAP Fiori elements apps. Includes manifest settings, annotation samples, and special FLP behaviors to enable object- and subobject-level deep links, handle incoming filter values (including navigation entity properties), configure layout behavior for Flexible Column Layout, and apply incoming sort orders.

**TAGS**: fiori-elements-framework, inbound-navigation, deep-linking, manifest.json, ODataV2, ODataV4, semantic-keys, FLP, filters, sort-order, flexible-column-layout

STEP: Handle incoming filters and FLP default values

DESCRIPTION: When a Fiori elements list report or analytical list page receives inbound navigation (except overview pages), incoming context values are applied to matching filter fields and these filter fields are made visible in the filter bar (overriding default or saved variants). FLP target mapping defaults and user default values influence incoming values as follows:
- FLP intent-based navigation: only standard FLP target mapping parameter values are considered.
- Static FLP tile with no nav context: if no user default variant exists, FLP target mapping defaults are applied.
- Dynamic tiles (e.g., SAP Smart Business) with navigation context: special handling for DisplayCurrency:
  - If a mandatory filter or parameter named DisplayCurrency or P_DisplayCurrency is not provided by the incoming context, it is set from the user's FLP default DisplayCurrency.
  - All other FLP default values (from user defaults) are ignored except those provided via standard target mapping.
Note: Applying FLP user default values marks the standard variant as dirty.

LANGUAGE: text

CODE:
```text
Behavior summary:
- Incoming context values -> applied to filter fields (become visible).
- FLP target mapping defaults -> applied depending on tile/navigation type.
- DisplayCurrency special-case for dynamic tiles.
- Applying user default values marks standard variant as dirty.
```

STEP: Deep linking overview (object page vs. list report)

DESCRIPTION: Deep linking opens an object page when the URL supplies all technical keys that uniquely identify an entity record; otherwise the list report/analytical list page opens. Object page selection between draft/active depends on the IsActiveEntity key and user access to drafts.

LANGUAGE: xml

CODE:
```xml
<EntityType Name="SalesOrderManage">
   <Key>
      <PropertyRef Name="ID"/>
      <PropertyRef Name="IsActiveEntity"/>
   </Key>  
</EntityType>
```

LANGUAGE: text

CODE:
```text
Example deep link URL (technical keys):
...?ID=11111111-aaaa-bbbb-cccc-ddddeeeeffff&IsActiveEntity=true
```

STEP: Deep linking to subobject pages (OData V2) — manifest allowDeepLinking

DESCRIPTION: To enable direct deep linking to a subobject page in OData V2 apps, set allowDeepLinking: true in the target subobject page manifest entry. To deep link to the n-th level, allowDeepLinking must be true for all levels from object page through the n-th subobject page. If multiple pages on the same level have allowDeepLinking:true, the first entry in the manifest is used. Applications configured with parameters or mandatory filters do not support deep linking.

LANGUAGE: json

CODE:
```json
"pages": {
     "navigationProperty": "to_ProductText",
     "entitySet": "STTA_C_MP_ProductText",
     "component": {
          "name": "sap.suite.ui.generic.template.ObjectPage",
          "settings": {
               "allowDeepLinking": true
          }
     }
}
```

LANGUAGE: text

CODE:
```text
Nested example (conceptual):
Object Page1: {
     allowDeepLinking:true,
     SubObjectPage1:{
          allowDeepLinking:true
          SubObjectPage2:{
               allowDeepLinking:true
               SubObjectPage3:{
                    allowDeepLinking:true
               }
          }
     }
}
```

STEP: Configure inbound sort order from xapp-state

DESCRIPTION: If the xapp-state carries sort orders during inbound navigation, the target framework:
- Reads sort parameters from xapp-state and applies them to the table.
- Merges incoming sorters with existing sort criteria; incoming sorters take priority.
Priority merging examples:
- If a default user variant exists with sorter(s): navigation sorter (priority) then variant sorter.
- Else, if PresentationVariant annotation exists: navigation sorter then PresentationVariant sorter.
- Else: only navigation sorter(s) applied.

LANGUAGE: text

CODE:
```text
Sort priority: incoming xapp-state -> user variant sorters -> PresentationVariant -> none.
```

STEP: Flexible Column Layout (FCL) — enable fullscreen on inbound navigation

DESCRIPTION: For FCL apps, to open an object in fullscreen when inbound navigation resolves to a unique object, set defaultLayoutTypeIfExternalNavigation to appropriate values for main and subobjects (e.g., MidColumnFullScreen / EndColumnFullScreen). If navigation is external and FCL is enabled, defaultLayoutTypeIfExternalNavigation is used; if launched from FLP, defaultLayout is considered.

LANGUAGE: json

CODE:
```json
"pages": {
    "ObjectPage|C_STTA_BusinessPartner": {
        "entitySet": "C_STTA_BusinessPartner",
        "defaultLayoutType": "TwoColumnsMidExpanded",
        "defaultLayoutTypeIfExternalNavigation": "MidColumnFullScreen",
        "component": {
            "name": "sap.suite.ui.generic.template.ObjectPage"
             "settings':{"allowDeepLinking": true
        }
    },
    "pages": {
.....
```

STEP: OData V4 — semantic keys for deep linking to object pages

DESCRIPTION: For OData V4, deep linking can be triggered by passing semantic keys (defined by annotations or CDS) for the list report entity set. If a draft exists for the user, the draft instance is loaded; otherwise the active object is loaded. When both semantic and technical keys are present, semantic keys take priority. Ensure manifest routing contains the key pattern for the desired level.

LANGUAGE: xml

CODE:
```xml
<Annotation Term="Common.SemanticKey">
   <Collection>
      <PropertyPath>SalesOrder</PropertyPath>
   </Collection>
</Annotation>
```

LANGUAGE: text

CODE:
```text
ABAP CDS sample:
@ObjectModel: {
  semanticKey: [ 'SalesOrder' ]
}

define view SALESORDERMANAGE {

}
```

LANGUAGE: text

CODE:
```text
CAP CDS sample:
Common.SemanticKey : [
    SalesOrder
]
```

STEP: OData V4 — manifest routing sample for object deep link

DESCRIPTION: Manifest route pattern must expose the key placeholder for object-level deep linking. Example route with pattern /yourEntity({key}) and a target component configured for ObjectPage.

LANGUAGE: json

CODE:
```json
{
...
        "routing": {
            "routes": [
                {
                    "pattern": "/yourEntity({key}):?query:",
                    "name": "default",
                    "target": "sample"
                }
            ],
            "targets": {
                "sample": {
                    "type": "Component",
                    "id": "Default",
                    "name": "sap.fe.templates.ObjectPage",
                    "level": 1,
                    "options": {
                        "settings": {
                            "contextPath": "/yourEntity"
                        }
                    }
                }
            }
        },
...
}
```

LANGUAGE: text

CODE:
```text
Example semantic key URL:
...?SalesOrder=10025
```

STEP: OData V4 — inbound deep linking to subobject pages (manifest)

DESCRIPTION: To enable deep linking to a subobject page in OData V4, set allowDeepLinking:true in the component entry for the subobject page in manifest.json. To load the n-th-level subobject page directly, include the object page semantic/technical keys plus all semantic keys for each subobject level up to n in the URL. Ensure semantic key names are unique across different entity sets to avoid ambiguity.

LANGUAGE: json

CODE:
```json
"SalesOrderManageObjectPage":{
     "type":"Component",
     "id":"SalesOrderManageObjectPage",
     "name":"sap.fe.templates.ObjectPage",
     "options":{
          "settings":{
               "contextPath":"/SalesOrderManage",
               "allowDeepLinking":true,
               ....
               ...
          }
     }
}
```

STEP: Handling incoming filters for navigation entity set properties (qualified names & P_ prefix)

DESCRIPTION: Incoming filter values with fully qualified names like "EntityNav._SubNav.Prop" are applied to the corresponding filter fields in the target app. Matching rules:
- Exact match against fully qualified property name in the target.
- Or match after discarding the leading entity set name from the incoming context.
- Also consider P_ prefix: if incoming field is "X" and target filter is "P_X", apply accordingly (prefix added or removed).
Follow this matching order when multiple possible matches exist.

LANGUAGE: text

CODE:
```text
Example incoming context: "SO._PO.Status"

Matching order applied by Fiori elements:
1) Target main entity set "SO" with navigation entity "_PO" that has "Status" filter field.
2) Target has first-level navigation entity "SO" that has a further navigation entity "_PO" with "Status" filter field.

Prefix handling:
- Incoming "Status" may match target "P_Status" (or vice versa).
```

STEP: Restrictions and notes

DESCRIPTION: Key constraints and behavior summary for implementers:
- Deep linking unsupported for apps configured with parameters or mandatory filters.
- allowDeepLinking is only required for subobject pages; object pages always deep link when URL contains all required keys.
- For FLP deep linking, ensure intent-based navigation configuration (FLP target mapping) is set up.
- When using tiles or dynamic navigation that provide context, account for special DisplayCurrency handling.

LANGUAGE: text

CODE:
```text
Restrictions:
- No deep linking for apps with mandatory filters or parameters.
- allowDeepLinking: required for each subobject level to deep link directly to that level.
- FLP configuration (target mapping) influences inbound defaults.
```
--------------------------------

**TITLE**: Configure Navigation to an Object Page in Edit Mode (SAP Fiori Elements)

**INTRODUCTION**: This document shows manifest.json settings to make object pages open directly in edit mode for SAP Fiori Elements apps. It covers OData V2 (editFlow + navToListOnSave) and OData V4 (openInEditMode). Use these settings in the app manifest to control navigation and post-save behavior.

**TAGS**: fiori-elements-framework, sap, odata-v2, odata-v4, manifest.json, edit mode, editFlow, openInEditMode, navToListOnSave

STEP: 1 — OData V2 — Enable direct edit navigation from List Report

DESCRIPTION: Set editFlow to "direct" in the manifest.json for the ListReport page to open the target Object Page directly in edit mode when navigating from the list report. Place this under your ListReport page entry in sap.ui.generic.app -> pages.

LANGUAGE: JSON

CODE:
```json
"ListReport|STTA_C_MP_Product": {
                "entitySet": "STTA_C_MP_Product",
                "component": {
                    "name": "sap.suite.ui.generic.template.ListReport",
                    "settings": {
                        "editFlow":"direct"
		….
	               }
                }
}
```

STEP: 2 — OData V2 — Control post-save navigation on the Object Page

DESCRIPTION: Prevent navigation back to the list after Save by setting navToListOnSave to false on the ObjectPage page entry in manifest.json. When set to false, after the user saves, the object page stays visible and switches to display mode instead of navigating to the list.

LANGUAGE: JSON

CODE:
```json
"pages": {
        "ObjectPage|STTA_C_MP_Product": {
            "entitySet": "STTA_C_MP_Product",
            "component": {
                "name": "sap.suite.ui.generic.template.ObjectPage",
                "settings": {
                    "navToListOnSave": false

                            }
                        }
                    }….
```

STEP: 3 — OData V2 — UI behavior when direct edit is enabled

DESCRIPTION: When editFlow = "direct" is configured, the Object Page footer adds a "Save and Next" button alongside "Save" and "Cancel". "Save and Next" saves current changes then opens the next object in edit mode. "Save" behavior depends on navToListOnSave (true by default navigates to list; false keeps the page and switches to display mode).

LANGUAGE: Text

CODE:
```text
UI behavior summary:
- editFlow: "direct"  => Object Page opens in edit mode and footer includes: Save, Cancel, Save and Next
- "Save and Next"    => saves current changes and opens next object in edit mode
- "Save" with navToListOnSave: true (default) => navigates back to the list report
- "Save" with navToListOnSave: false => stays on the object page and switches to display mode
```

STEP: 4 — OData V4 — Open object page directly in edit mode

DESCRIPTION: For OData V4-based Fiori Elements apps, set openInEditMode to true under the page/table options -> settings in manifest.json to open the target Object Page in edit mode on navigation. Note: when openInEditMode is true, the "Open in New Tab" option is removed from the table's context menu.

LANGUAGE: JSON

CODE:
```json
"options": {
     "settings": {
        "entitySet": "LineItems",
           ...
			"openInEditMode": true
      }
}
```
--------------------------------

**TITLE**: Navigation to the Next Level (List Report → Object and Subobject Pages)

**INTRODUCTION**: Configure table chevron navigation so users can navigate from a List Report (table of entity set entries) to an Object Page and from an Object Page to a Subobject Page. This document shows the manifest.json target and navigation mappings required for SAP Fiori Elements (OData V4). For OData V2 guidance, see the referenced internal navigation doc.

**TAGS**: fiori-elements-framework, navigation, manifest.json, OData V4, list-report, object-page, subobject-page, chevron

**STEP**: Configure navigation targets and mappings in manifest.json (OData V4)

**DESCRIPTION**: Add targets for the List Report and Object Page components under the manifest.json "targets" section. Define the navigation mapping so the List Report routes to the Object Page (detail) and the Object Page routes to a Subobject Page (detail). Place the mapping under each target's "options" -> "navigation" (for the List Report) and under "options" -> "settings" -> "navigation" (for the Object Page) as shown. Keep route names consistent with your routing configuration.

**LANGUAGE**: JSON

**CODE**:
```json
{
   "targets":{
      "SalesOrderManageList":{
         "type":"Component",
         "id":"SalesOrderManageList",
         "name":"sap.fe.templates.ListReport",
         "options":{
            "settings":{
               "contextPath":"/SalesOrderManage",
               "variantManagement":"Page",
               ...
               ...
            },
            "navigation":{
               "SalesOrderManage":{
                  "detail":{
                     "route":"SalesOrderManageObjectPage"
                  }
               }
            }
         }
      },
      "SalesOrderManageObjectPage":{
         "type":"Component",
         "id":"SalesOrderManageObjectPage",
         "name":"sap.fe.templates.ObjectPage",
         "options":{
            "settings":{
               "contextPath":"/SalesOrderManage",
               "navigation":{
                  "_Item":{
                     "detail":{
                        "route":"SalesOrderItemObjectPage" // For sub object page navigation
                     }
                  }
               },
               "variantManagement":"Control",
               ...
               ...
            }
         }
      }
   }
}
```

**STEP**: Use SAP Fiori Elements OData V2 internal navigation guidance

**DESCRIPTION**: If your app uses OData V2, follow the "Configuring Internal Navigation" guidance specific to OData V2 to enable table chevron navigation from list reports to object pages. This document contains the required annotations and configuration steps for OData V2.

**LANGUAGE**: Text

**CODE**:
```
See: configuring-internal-navigation-2c65f07.md (Configuring Internal Navigation) - follow OData V2 specific steps and annotations for internal navigation.
```
--------------------------------

**TITLE**: Non-Draft Apps (SAP Fiori elements — OData V2)

**INTRODUCTION**: Guidance and actionable code patterns for implementing SAP Fiori elements applications that do not use draft handling (OData V2). Covers when to use non-draft apps, required explicit save behavior, navigation and locking implications, extension-point input parameters and a reusable secured-execution pattern for extension implementations.

**TAGS**: fiori-elements-framework, odata-v2, non-draft, draft-handling, dataloss, navigation, locking, extension-points

**STEP**: 1 — Applicability and basic rules

**DESCRIPTION**: Use non-draft apps only for simple scenarios (no complex multi-object creation flows). Do not mix draft and non-draft entity sets in a single application. Exception: a draft-enabled entity set may contain a non-draft child strictly for display; do not perform actions or external navigation from the non-draft child. Examples: complex flow (creating items and subitems in a single step) — use draft apps; simple flow (occasional edits to specific fields) — non-draft acceptable. Note: This topic applies only to SAP Fiori elements for OData V2.

**LANGUAGE**: PlainText

**CODE**:
```PlainText
Rules:
- Use non-draft apps only for simple, isolated update scenarios.
- Do NOT mix draft and non-draft entity sets in one app.
- Allowed exception: draft parent -> non-draft child only for display (no actions/navigation).
- For combined value/text fields (e.g., currency + amount, text arrangement + unit),
  define a dedicated side-effect so changed values display correctly after save.
```

**STEP**: 2 — Save behavior (explicit save required)

**DESCRIPTION**: Non-draft apps do not auto-save. End users must explicitly save new or modified data before leaving a page. The UI must expose a Save action (e.g., Save button). Before performing navigation that discards changes, check the model for pending changes and show a data-loss confirmation. Use OData V2 model APIs: hasPendingChanges(), submitChanges(), resetChanges(). Provide explicit handlers for Save, Cancel, and navigation to prevent silent data loss.

**LANGUAGE**: JavaScript

**CODE**:
```JavaScript
// Example: Save handler using sap.ui.model.odata.v2.ODataModel
onSavePress: function () {
  const oModel = this.getView().getModel();
  if (oModel.hasPendingChanges()) {
    // submitChanges returns a promise in many implementations; adapt for callback style if needed
    oModel.submitChanges({
      success: function (oData, response) {
        // handle successful save (refresh UI, navigate, show toast)
      },
      error: function (oError) {
        // handle save failure
      }
    });
  }
},

// Example: Before navigation (intercept route/back) — check pending changes and confirm
onBeforeNavigate: function (fnNavigate) {
  const oModel = this.getView().getModel();
  if (oModel.hasPendingChanges()) {
    // Use sap.m.MessageBox or custom dialog to confirm
    sap.m.MessageBox.confirm("You have unsaved changes. Discard changes and continue?", {
      onClose: function (sAction) {
        if (sAction === sap.m.MessageBox.Action.OK) {
          oModel.resetChanges(); // discard
          fnNavigate(); // perform navigation
        } else {
          // keep editing
        }
      }
    });
  } else {
    fnNavigate();
  }
}
```

**STEP**: 3 — Locking and concurrency behavior

**DESCRIPTION**: Non-draft apps do not lock objects during editing. Concurrent edits can lead to lost updates (last save wins). To reduce collisions, consider explicitly refreshing data before entering edit mode to get the latest server state. Decide on a conflict resolution strategy (optimistic concurrency via ETag checking on save is recommended if back end supports it).

**LANGUAGE**: JavaScript

**CODE**:
```JavaScript
// Example: Refresh current entity before starting edit to fetch latest data
onStartEdit: function () {
  const oModel = this.getView().getModel();
  // force a read/refresh from server
  oModel.refresh(true); // true => force update of bindings from server
  // then open edit UI
},

// Example: Submit with ETag concurrency handling (backend must support ETag/If-Match)
// oModel.submitChanges will fail if ETag mismatch; handle error and prompt user to reload/merge
```

**STEP**: 4 — Navigation considerations and user actions that cause data loss

**DESCRIPTION**: In non-draft apps, several system and user actions discard entered but unsaved data. Some actions display a data-loss dialog, others do not. Implement interception where possible and warn users:

- Actions that display a data-loss message: SAP Fiori actions like Back or Home (the framework shows a data-loss message).
- Actions that do NOT display a data-loss message and cause silent data loss: SAP Fiori launchpad sign out, browser back/forward, bookmark, URL change, refresh, close tab/window.

Implement checks on route changes, window.onbeforeunload, and application-specific navigation to warn about unsaved changes. Be aware that some flows (e.g., sign out or browser close) may not allow a friendly confirmation dialog in all environments.

**LANGUAGE**: JavaScript

**CODE**:
```JavaScript
// Example: Intercept browser unload to warn about unsaved changes
window.addEventListener("beforeunload", function (e) {
  const oModel = sap.ui.getCore().getModel(); // or view controller model
  if (oModel && oModel.hasPendingChanges()) {
    // Most browsers show a generic confirmation dialog; setReturnValue for compatibility
    const confirmationMessage = "You have unsaved changes that will be lost.";
    (e || window.event).returnValue = confirmationMessage;
    return confirmationMessage;
  }
  return undefined;
});

// Example: Router attachBeforeRouteMatched or custom nav interceptor
this.getRouter().attachBeforeRouteMatched((oEvent) => {
  this.onBeforeNavigate(() => {
    this.getRouter().navTo(oEvent.getParameter("name"), oEvent.getParameter("arguments"));
  });
});
```

**STEP**: 5 — Extension points and secured execution parameters

**DESCRIPTION**: When adding extension logic (handlers or commands), use a secured-execution pattern that accepts input parameters to control busy state and data-loss handling. The common input parameters are:
- busy.set=true: show busy indicator while function executes; set false for immediate completion.
- busy.check=true: execute function only if app is not already busy. Set false when function is invoked by another function that already set busy.
- dataloss.popup=true: show data-loss confirmation before executing when model has pending changes.
- dataloss.navigation=false: indicate that the function will navigate away (changes the data-loss message wording).

Provide a reusable function to enforce these rules and call the extension logic safely.

**LANGUAGE**: JavaScript

**CODE**:
```JavaScript
// Reusable securedExecution function for extension handlers
securedExecution: function (oParams, fnAction) {
  const oModel = this.getView().getModel();
  const oBusyHelper = this._busyHelper || { setBusy: () => {}, clearBusy: () => {}, isBusy: () => false };

  // busy.check: skip if already busy
  if (oParams.busy && oParams.busy.check === true && oBusyHelper.isBusy()) {
    return; // do not execute while busy
  }

  // dataloss.popup: confirm if pending changes exist
  if (oParams.dataloss && oParams.dataloss.popup === true && oModel.hasPendingChanges()) {
    const sText = oParams.dataloss.navigation === true
      ? "You have unsaved changes. Leaving will discard them. Continue?"
      : "You have unsaved changes. Continue?";
    sap.m.MessageBox.confirm(sText, {
      onClose: (sAction) => {
        if (sAction === sap.m.MessageBox.Action.OK) {
          this._executeWithBusy(oParams, fnAction, oBusyHelper);
        }
      }
    });
    return;
  }

  // No data-loss or no pending changes -> execute immediately
  this._executeWithBusy(oParams, fnAction, oBusyHelper);
},

_executeWithBusy: function (oParams, fnAction, oBusyHelper) {
  try {
    if (oParams.busy && oParams.busy.set === true) {
      oBusyHelper.setBusy(true);
    }
    // Execute the extension logic; allow async/Promise return
    const vResult = fnAction();
    if (vResult && typeof vResult.then === "function") {
      vResult.finally(() => {
        if (oParams.busy && oParams.busy.set === true) {
          oBusyHelper.setBusy(false);
        }
      });
    } else {
      if (oParams.busy && oParams.busy.set === true) {
        oBusyHelper.setBusy(false);
      }
    }
  } catch (e) {
    if (oParams.busy && oParams.busy.set === true) {
      oBusyHelper.setBusy(false);
    }
    throw e;
  }
}
```

**STEP**: 6 — Draft features unavailable in non-draft apps

**DESCRIPTION**: The following capabilities provided by draft apps are not available for non-draft apps. Plan alternatives or avoid scenarios that require these features:

- No automatic no-data-loss protection for connectivity disruption or session time-out.
- No device switch (start on one device and continue on another).
- No start-save-continue-later (save as incomplete).
- No automatic asynchronous saving during entry.
- No navigation within the app without saving in between.
- No action/field control adjustments during data entry.
- No checks during data entry and no actions on entered (unsaved) data.
- No calculations/defaulting while entering data (server-side defaulting only after save).
- No context-dependent value helps based on unsaved entered data.
- No sorting/filtering in editable tables for data entry.

**LANGUAGE**: PlainText

**CODE**:
```PlainText
Unavailable draft features (plan alternatives if needed):
- Offline/no-data-loss handling: implement manual retry/submit strategies.
- Device handover: not supported.
- Continue-later: not supported.
- Auto-save: not supported.
- In-app navigation without saves: avoid or require explicit saves.
- Entry-time actions/defaults/value-helps based on unsaved data: cannot rely on server-side features until saved.
```
--------------------------------

**TITLE**: Object Page Elements — Implementation Checklist and Examples for Fiori Elements

**INTRODUCTION**: This document condenses the Object Page UI structure and implementation guidance into actionable steps and code examples for developers implementing SAP Fiori Elements object pages. It covers configuration points (manifest and annotations), header elements, header facets, anchor navigation, content sections, paginator visibility, and footer/draft behavior. Use the examples as starting points and adapt annotation paths and entitySet names to your project.

**TAGS**: fiori-elements-framework, object-page, annotations, manifest.json, header, facets, anchor-navigation, paginator, draft-handling, odata-v2

**STEP**: 1 — Register Object Page in manifest.json

**DESCRIPTION**: Define the object page in your app descriptor (manifest.json). Register a page using the generic Object Page template and point it at the entitySet for the object. This is the primary entry point for the Fiori Elements runtime to render an Object Page.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "mainService",
        "settings": {
          "synchronizationMode": "None"
        }
      }
    }
  },
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "SalesOrder",                     // <- set your entity set
        "component": {
          "name": "sap.suite.ui.generic.template.ObjectPage"
        }
      }
    ]
  }
}
```

**STEP**: 2 — Configure Header: Title, Description, and Image (Annotations)

**DESCRIPTION**: Use UI.HeaderInfo annotation to set the application title (TypeName), instance title (Title path), description and image URL. If an instance image is missing, the default object type image is used. These annotations typically belong to the EntityType annotations in your service metadata (EDMX) or in local annotation files.

**LANGUAGE**: XML (OData Annotations)

**CODE**:
```xml
<!-- Example OData V4 annotation for header info -->
<Annotation Term="UI.HeaderInfo">
  <Record>
    <PropertyValue Property="TypeName" String="Sales Order"/>
    <PropertyValue Property="Title" Path="OrderID"/>         <!-- display title -->
    <PropertyValue Property="Description" Path="ShortText"/> <!-- optional -->
    <PropertyValue Property="ImageUrl" Path="ImageURL"/>     <!-- optional -->
  </Record>
</Annotation>
```

**STEP**: 3 — Configure Header Toolbar Actions and Share Menu

**DESCRIPTION**: Configure header toolbar actions (Edit, Delete, related apps, share actions). Actions can be defined via annotations (Action or custom action annotations) or via manifest settings depending on project patterns. Ensure Edit/Delete actions are placed in the header toolbar for Display mode and that the generic Share menu is available (Send Email, Share in SAP Jam, Save as Tile, Share: Microsoft Teams, Share: Collaboration Manager).

**LANGUAGE**: JSON / Annotations (Example pattern)

**CODE**:
```json
// Example: declare an action in manifest (generic pattern, adapt to your project tooling)
{
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "SalesOrder",
        "component": {
          "name": "sap.suite.ui.generic.template.ObjectPage",
          "settings": {
            "header": {
              "actions": [
                { "id": "Edit", "text": "Edit" },
                { "id": "Delete", "text": "Delete" }
              ]
            }
          }
        }
      }
    ]
  }
}
```

**STEP**: 4 — Define Header Facets (Key Info & Graphical Elements)

**DESCRIPTION**: Use the UI.HeaderFacets annotation to surface up to ~5 label-field pairs and graphical elements (charts, rating indicators) in the header area. Prefer concise key data — e.g., price, availability, credit limit. Header facets are distinct from content facets and are shown in the header area.

**LANGUAGE**: XML (OData Annotations)

**CODE**:
```xml
<!-- Example header facets -->
<Annotation Term="UI.HeaderFacets">
  <Collection>
    <Record Type="UI.HeaderFacet">
      <PropertyValue Property="Label" String="Price"/>
      <PropertyValue Property="Target">
        <PropertyPath>Price</PropertyPath>
      </PropertyValue>
    </Record>
    <Record Type="UI.HeaderFacet">
      <PropertyValue Property="Label" String="Credit Limit"/>
      <PropertyValue Property="Target">
        <PropertyPath>CreditLimit</PropertyPath>
      </PropertyValue>
    </Record>
    <!-- Add graphical elements as targets (e.g. Chart or Rating) -->
  </Collection>
</Annotation>
```

**STEP**: 5 — Implement Anchor Navigation and Content Sections (Facets)

**DESCRIPTION**: Organize the page content into sections using UI.Facets or ReferenceFacet annotations. Each facet becomes an anchor navigation entry that allows quick jumping to content sections. Inside sections use FieldGroups and/or DataFieldForAnnotation to define groups of fields or embed tables.

**LANGUAGE**: XML (OData Annotations)

**CODE**:
```xml
<!-- Example content facets with referenced field groups -->
<Annotation Term="UI.Facets">
  <Collection>
    <Record Type="UI.ReferenceFacet">
      <PropertyValue Property="Label" String="General Information"/>
      <PropertyValue Property="Target" AnnotationPath="@UI.FieldGroup#Main"/>
    </Record>
    <Record Type="UI.ReferenceFacet">
      <PropertyValue Property="Label" String="Items"/>
      <PropertyValue Property="Target" AnnotationPath="@UI.LineItem#Items"/>
    </Record>
  </Collection>
</Annotation>

<!-- Example field group referenced above -->
<Annotation Term="UI.FieldGroup" Qualifier="Main">
  <Record>
    <PropertyValue Property="Data" Path="..."/>
    <!-- Define fields inside the FieldGroup -->
  </Record>
</Annotation>
```

**STEP**: 6 — Content Area: Field Groups and Tables

**DESCRIPTION**: Populate section content with FieldGroups (for grouped fields) or LineItem (table) annotations. In Fiori Elements: use FieldGroup for form-like sections (create/edit/display); use LineItem or CollectionFacet to show tables and lists.

**LANGUAGE**: XML (OData Annotations)

**CODE**:
```xml
<!-- Example line item (table) annotation -->
<Annotation Term="UI.LineItem" Qualifier="Items">
  <Collection>
    <Record Type="UI.DataFieldForAction">
      <!-- or use UI.DataField for fields shown in table -->
    </Record>
  </Collection>
</Annotation>
```

**STEP**: 7 — Paginator Buttons: Visibility and OData V2 Considerations

**DESCRIPTION**: Paginator buttons allow navigation between subitems and appear only if:
- The user is on a subobject page,
- The user navigated from a list to the current page,
- The original list had at least two entries.

Note: In SAP Fiori elements for OData V2, paginator buttons are not available on the main object page by default — you can adapt the UI to enable them if required.

**LANGUAGE**: Plain Text / Configuration Note

**CODE**:
```text
Conditions for paginator visibility:
- onSubObjectPage = true
- navigatedFromList = true
- listEntryCount >= 2

OData V2: paginator buttons not available by default on main object page; client-side UI adaptation required.
```

**STEP**: 8 — Footer Bar and Draft Handling

**DESCRIPTION**: Footer bar hosts actions and Show Messages. In draft-enabled apps, subitem object pages in create/edit modes can include an Apply button that saves the draft, concludes the create/edit flow, navigates one step up, and shows a toast message. In flexible column layout with drafts, Apply closes the subobject and returns to the main object. See the Draft Handling documentation for full lifecycle and behavior.

**LANGUAGE**: Plain Text / Link reference

**CODE**:
```text
Draft handling reference: draft-handling-ed9aa41.md
Behavior summary:
- Apply: save draft, navigate up one level, show toast
- In flexible column layout: Apply closes subobject and returns to main object
```

**STEP**: 9 — Related Documentation and Files (References)

**DESCRIPTION**: Use these internal docs for implementing controls and annotations related to object pages. Keep these file paths and links handy for deeper configuration and annotation examples.

**LANGUAGE**: Plain Text / Links

**CODE**:
```text
Controls related to object pages:
- ../10_More_About_Controls/sap-uxap-de71337.md

Annotations and feature configuration:
- configuring-object-page-features-d26d3dd.md
- configuring-further-common-features-a4d3c46.md

Draft handling:
- draft-handling-ed9aa41.md
```


--------------------------------

**TITLE**: Overriding the Horizontal Alignment of Annotation-Based Table Columns

**INTRODUCTION**: Override horizontal alignment for columns generated from UI annotations (LineItem) by adding controlConfiguration settings in manifest.json. Use this when you need column-level alignment control for annotation-based tables in SAP Fiori elements (OData V4).

**TAGS**: fiori-elements-framework, OData V4, manifest.json, controlConfiguration, horizontalAlign, LineItem, annotation, table-columns

**STEP**: 1 — Edit manifest.json to set column horizontal alignment

**DESCRIPTION**: In your app's manifest.json, add a controlConfiguration entry for the LineItem annotation of the target page/object. Map the column identifier (for example "DataField::Material") to the horizontalAlign property and set it to one of the supported values. Place this under the target page/section (example key shown: SalesOrderManageObjectPage). This snippet is the exact JSON to insert.

**LANGUAGE**: JSON

**CODE**:
```json
"SalesOrderManageObjectPage": {
    "options": {
        "settings": {
            "controlConfiguration": {
                "_Item/@com.sap.vocabularies.UI.v1.LineItem": {
                    "columns": {
                        "DataField::Material": {
                            "horizontalAlign": "Center"
                        }
                    }
                }
            }
        }
    }
}
```

**STEP**: 2 — Verify the result and reference image

**DESCRIPTION**: After updating manifest.json, deploy/run the app and confirm the column alignment is applied. Example result image file (included in repo/docs or project assets): images/Overriding_the_Horizontal_Alignment_of_Annotation-Based_Table_Columns_fc4e1b4.png

**LANGUAGE**: text

**CODE**:
```
Result image path: images/Overriding_the_Horizontal_Alignment_of_Annotation-Based_Table_Columns_fc4e1b4.png
```

**STEP**: 3 — Supported horizontalAlign values

**DESCRIPTION**: Use one of the supported alignment values for the horizontalAlign property.

**LANGUAGE**: JSON

**CODE**:
```json
[
  "Begin",
  "Center",
  "End"
]
```
--------------------------------

**TITLE**: Overview Page Card — sap.ovp manifest configuration, headers, KPI annotations, actions, and Insights

**INTRODUCTION**: Practical reference for configuring Overview Page (OVP) cards in the manifest.json (sap.ovp). Includes card registration, header rules, KPI annotation wiring, card actions availability, and how to disable adding cards to Insights. Use these snippets and rules when generating or validating application manifest entries for OVP cards.

**TAGS**: fiori-elements-framework, sap.ovp, overview-page, manifest.json, cards, KPI, Annotations, Insights, SAPUI5

STEP: 1 — Define cards in sap.ovp (manifest.json)

DESCRIPTION: Place the cards object under "sap.ovp" in the application descriptor. Each card entry uses the card ID as the property name; runtime ordering follows the descriptor order. Provide model, template, and settings per card. The sample shows global filter keys (note deprecation comment) and two sample cards (stack and table).

LANGUAGE: JSON

CODE:
```json
"sap.ovp": {
    "_version": "1.1.0",
    "globalFilterModel": "ZCD204_EPM_DEMO_SRV",
    "globalFilterEntityType": "SalesOrder", // Deprecated since SAPUI5 1.54.
    "globalFilterEntitySet": "SalesOrder", // Available from SAPUI5 1.54 onwards.
    "cards": {
        "card00": {
            "model": "ZCD204_EPM_DEMO_SRV",
            "template": "sap.ovp.cards.stack",
            "settings": {
                // Additional settings can be placed here
                "category": "{{card00_category}}",
                "title": "{{card00_title}}",
                "subTitle": "{{card00_subTitle}}"
                // More settings can be added here
            }
        },
        "card01": {
            "model": "ZCD204_EPM_DEMO_SRV",
            "template": "sap.ovp.cards.table",
            "settings": {
                "title": "{{card01_category}}"
                // Additional settings can be placed here
            }
        }
        // Additional cards can be added here
    }
}
```

STEP: 2 — Card header configuration rules

DESCRIPTION: Configure header properties inside each card's "settings": category, title (mandatory), subTitle (mandatory only for cards with data point annotations like KPI headers). Title and subtitle max two lines. Table and list cards show a counter (records shown / total) based on current filters; other card types do not show the counter.

LANGUAGE: JSON

CODE:
```json
{
    "settings": {
        "category": "{{card00_category}}",
        "title": "{{card00_title}}",
        "subTitle": "{{card00_subTitle}}"
    }
}
```

STEP: 3 — KPI header wiring using annotations

DESCRIPTION: For KPI headers use backend aggregation and OData annotation terms. Ensure the OData service supports aggregation and that KPI values come from the backend. Use these annotation terms in manifest settings: DataPoint (KPI value/title), PresentationVariant (grouping/sorting), SelectionVariant (filters). Wire annotation paths in the card settings using keys like identificationAnnotationPath, selectionAnnotationPath, chartAnnotationPath, presentationAnnotationPath, dataPointAnnotationPath.

LANGUAGE: JSON

CODE:
```json
"sap.ovp": {
    ...
    "cards": {
        ...
        "card02": {
            "model": "ZCD204_EPM_DEMO_SRV",
            "template": "sap.ovp.cards.charts.bubble",
            "settings": {
                "entitySet": "SalesOrders",
                "identificationAnnotationPath": "com.sap.vocabularies.UI.v1.Identification#bubble",
                "selectionAnnotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant#bubble",
                "chartAnnotationPath": "com.sap.vocabularies.UI.v1.Chart#bubble",
                "presentationAnnotationPath": "com.sap.vocabularies.UI.v1.PresentationVariant#bubble",
                "dataPointAnnotationPath": "com.sap.vocabularies.UI.v1.DataPoint#bubble"
            }
        },
        ...
    }
}
```

STEP: 4 — Card actions (availability and behavior)

DESCRIPTION: Card actions (available from SAPUI5 1.110) are accessed from the card header menu. Supported actions:
- Refresh: reloads card data for the bound entity.
- Add Card to Insights: shows preview and allows adding the card to My Home Insights (only if Insights service enabled).
- Manage Cards: opens Manage Cards dialog to hide/show cards.
No manifest properties are required to enable these actions (aside from Insights-related flags shown in Step 5).

LANGUAGE: text

CODE:
```text
// Actions are UI-provided (SAPUI5 >= 1.110); no specific manifest snippet required.
// Supported actions:
// - Refresh
// - Add Card to Insights (requires Insights service enabled)
// - Manage Cards
```

STEP: 5 — Insights integration and disabling Add to Insights

DESCRIPTION: Users can add analytical, list, and table cards to My Home > Insights via the card menu (More > Add Card to Insights). Limit: up to eight cards displayed in Insights. If Insights already full, added cards appear in Edit Insights. If a card uses custom navigation, Insights navigation will go to the parent overview page app. To disable the Add Card to Insights option for a specific card, set enableAddToInsights to false in the card settings.

LANGUAGE: JSON

CODE:
```json
"card01": {
    "model": "MODEL",
    "template": "sap.ovp.cards.charts.analytical",
    "settings": {
        "title": "{{card01_title}}",
        "subTitle": "{{card01_subTitle}}",
        "entitySet": "C_EntitySet",
        "enableAddToInsights": false,
        "selectionAnnotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant#SV",
        "chartAnnotationPath": "com.sap.vocabularies.UI.v1.Chart#Chart",
        "presentationAnnotationPath": "com.sap.vocabularies.UI.v1.PresentationVariant#PV",
        "dataPointAnnotationPath": "com.sap.vocabularies.UI.v1.DataPoint#DP",
        "identificationAnnotationPath": "com.sap.vocabularies.UI.v1.Identification"
    }
}
```
--------------------------------

**TITLE**: Overview Pages (SAP Fiori Elements - Overview Page)

**INTRODUCTION**: Brief, action-oriented summary for developers: Overview pages are data-driven SAP Fiori applications built with SAPUI5, OData services, and annotations. They present actionable, visual cards (charts, tables, stack/quick view cards) and use a smart filter and header. Use the SAP Fiori generator and Guided Development to scaffold and extend overview page apps. Configure application behavior in the manifest.json and extend the UI component to reuse the Overview Page base component.

**TAGS**: fiori-elements-framework, overview-page, SAPUI5, OData, annotations, manifest.json, sap-keep-alive, cards, smart-filter, generator

**STEP**: 1 — Core concept and use case

**DESCRIPTION**: Understand the purpose and primary UI building blocks of an Overview Page. Use this step to plan how many cards, which entity sets, and which annotations (UI | Chart | Presentation) to provide. Expected flow: scaffold app → configure manifest.json → define annotations → implement component extension (if needed) → deploy to Fiori Launchpad.

**LANGUAGE**: Text

**CODE**:
```text
Purpose: Display high-level, actionable business information using visual cards bound to OData entity sets and annotated metadata.
```

**STEP**: 2 — Main UI components to implement

**DESCRIPTION**: Implement these components in your application. Each bullet maps to files/configuration or annotations you must provide:
- Application header: configure title/description in manifest and support user account / card management UI.
- Smart filter: provide a SmartFilterBar bound to application-level filter fields (annotations or XML view).
- Cards: create annotation-driven cards. Each card binds to one entity set and renders a chart, table, or stack of quick view cards. Cards are responsive (up to 5 columns) and support drag & drop reorder.

Map these responsibilities to files:
- manifest.json — central application configuration (routing, app metadata, OVP configuration).
- Component extension — a UIComponent that extends the overview page application component.
- Annotations — OData service metadata + local or external annotation files.

**LANGUAGE**: Text

**CODE**:
```text
Main files:
- manifest.json                (application configuration)
- webapp/Component.js or .ts   (UIComponent extending Overview Page app component)
- webapp/annotations/*.xml     (annotation files for cards and smart filter)
- webapp/images/AnnotationOVP_faeb0bd.png  (illustrative image asset)
```

**STEP**: 3 — manifest.json: role and minimal skeleton

**DESCRIPTION**: Edit the manifest.json to declare app metadata, UI5 settings, and the OVP-related configuration. Keep application configuration centralized in manifest.json. Use the "sap.app", "sap.ui5", and an OVP-specific section (commonly "sap.ovp" or equivalent) to configure cards and app behavior. Use routing and component configuration to point to your extended UI component.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.app": {
    "id": "your.app.id",
    "title": "Your Overview Page",
    "applicationVersion": { "version": "1.0.0" }
  },
  "sap.ui5": {
    "rootView": "your.app.namespace.view.App",
    "dependencies": { "minUI5Version": "1.96.0" },
    "componentName": "your.app.namespace"
  },
  "sap.ovp": {
    "/* OVP configuration and card definitions go here */": ""
  }
}
```

**STEP**: 4 — Component extension and placement

**DESCRIPTION**: Create a UIComponent that extends the Overview Page base component (OVP). This component acts as the application entry point and can override lifecycle hooks or add custom card controllers. Register the component in manifest.json under sap.ui5/componentName/rootView as appropriate.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// webapp/Component.js (minimal skeleton)
sap.ui.define([
  "sap/ui/core/UIComponent"
], function (UIComponent) {
  "use strict";
  return UIComponent.extend("your.app.namespace.Component", {
    metadata: {
      manifest: "json"
    },
    init: function () {
      UIComponent.prototype.init.apply(this, arguments);
      // custom initialization or OVP-specific setup
    }
  });
});
```

**STEP**: 5 — Cards and annotations (binding and content)

**DESCRIPTION**: Define each card using UI annotations (or annotation files). Each card must bind to a single entity set. Cards can be types: KPI, List/Table, Chart (bar/donut), or Stack (quick-view cards). Use presentation and UI annotations to specify card title, data requests, chart properties, and navigation targets.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Example: reference to an annotation file that defines cards -->
<!-- webapp/manifest.json or annotations registration -->
<annotations>
  <annotation file="annotations/cards_annotations.xml" />
</annotations>
```

**STEP**: 6 — Development workflow and tools

**DESCRIPTION**: Use the SAP Fiori generator to scaffold an Overview Page application and Guided Development feature guides to add or modify cards. After scaffolding, add or update annotation files, update manifest.json, implement component extensions, and test in local Fiori Launchpad runtime or deploy to SAP Fiori launchpad.

**LANGUAGE**: Text

**CODE**:
```text
Recommended flow:
1. Scaffold app with SAP Fiori generator.
2. Add/modify cards using Guided Development feature guides.
3. Implement or extend webapp/Component.js and manifest.json.
4. Provide annotation XML files under webapp/annotations/.
5. Test locally and deploy to Fiori Launchpad.
```

**STEP**: 7 — Compatibility note: sap-keep-alive

**DESCRIPTION**: If you use multiple overview page applications with the sap-keep-alive mode, upgrade SAPUI5 to 1.96.0 or higher to avoid issues. Verify "minUI5Version" in manifest.json and test keep-alive behavior when switching between apps.

**LANGUAGE**: Text

**CODE**:
```text
Note: When using more than one overview page application with sap-keep-alive mode, set SAPUI5 version >= 1.96.0 in manifest.json -> sap.ui5.dependencies.minUI5Version
```

**STEP**: 8 — Assets and related documentation

**DESCRIPTION**: Keep illustrative images and internal documentation links near the app sources. Use provided assets and internal docs to guide implementation.

**LANGUAGE**: Text

**CODE**:
```text
Related files:
- images/AnnotationOVP_faeb0bd.png
- docs/building-an-app-9834a0a.md
```
--------------------------------

**TITLE**: Passing Variant IDs as URL Parameters in SAP Fiori Elements

**INTRODUCTION**: Describe how to pass variant IDs (page-level or control-level) as URL parameters when navigating between Fiori Elements apps (Analytical List Page, List Report). Includes URL parameter names, example URLs, how to obtain variant IDs, and manifest.json samples for OData V2 and V4.

**TAGS**: fiori-elements-framework, sap, variants, url-parameters, manifest.json, odata-v2, odata-v4, navigation

**STEP**: 1 — Parameter names and URL examples

**DESCRIPTION**: Use these URL parameter names to set variants on the target app. The parameter value must be the variant ID (not the variant name). Examples below show how to format the navigation URL with variant IDs.

**LANGUAGE**: text

**CODE**:
```text
Parameter names:
- sap-ui-fe-variant-id           : Page variant ID
- sap-ui-fe-filterbar-variant-id: Filter bar control variant ID
- sap-ui-fe-chart-variant-id    : Chart control variant ID
- sap-ui-fe-table-variant-id    : Table control variant ID

URL examples:
- Page variant:
  https://abc.com/ui#SalesOrder-analyze_deliv_perf?sap-ui-fe-variant-id=id_1542011587281_980_page

- Filter bar control variant:
  https://abc.com/ui#SalesOrder-analyze_deliv_perf?sap-ui-fe-filterbar-variant-id=id_1542011587281_230_page

- Chart control variant:
  https://abc.com/ui#SalesOrder-analyze_deliv_perf?sap-ui-fe-chart-variant-id=id_1574157179885_675_chart

- Table control variant:
  https://abc.com/ui#SalesOrder-analyze_deliv_perf?sap-ui-fe-table-variant-id=id_1574157179595_331_table

- Chart and table variants together:
  https://abc.com/ui#SalesOrder-analyze_deliv_perf?sap-ui-fe-chart-variant-id=id_1574157179885_675_chart&sap-ui-fe-table-variant-id=id_1574157179595_331_table
```

**STEP**: 2 — How to obtain the variant ID programmatically

**DESCRIPTION**: Locate the control instance (control-level variant) or the filter bar instance (page-level variant) and call getCurrentVariantId() on that instance to obtain the stable variant ID to use in the URL or manifest. Example shows obtaining a control instance via sap.ui.core.Element.getElementById.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Example: get variant ID from a control instance
sap.ui.require(["sap/ui/core/Element"], function(Element) {
  // Replace "stableControlId" with the control's stable ID (the stable ID used in your app/manifest)
  var control = Element.getElementById("stableControlId");
  if (control && typeof control.getCurrentVariantId === "function") {
    var variantId = control.getCurrentVariantId();
    // Use variantId in URL or manifest parameters
    console.log("Current variant ID:", variantId);
  }
});
```

**STEP**: 3 — Behavior rules and notes

**DESCRIPTION**: Important behavior when passing page and control variants and edge cases.

**LANGUAGE**: text

**CODE**:
```text
Behavior rules:
- Always pass the variant ID (do NOT pass the variant name).
- If both a page variant (sap-ui-fe-variant-id) and a control variant (e.g., sap-ui-fe-chart-variant-id) are present:
  - A page-variant-based Analytical List Page or List Report ignores the control variant ID and applies the page-level variant.
  - A control-variant-based Analytical List Page or List Report applies the control variant ID. If the control variant ID is missing, the page variant ID applies to the control.
- If the passed variant ID is invalid, the app falls back to the default/standard variant.
- Adding the variant ID to the URL overrides the user's default variant ID.
```

**STEP**: 4 — manifest.json example for SAP Fiori Elements (OData V2)

**DESCRIPTION**: To pass a variant ID during cross-application navigation in OData V2, add the parameter to the outbound definition in manifest.json. The sample below shows adding sap-ui-fe-variant-id to an outbound.

**LANGUAGE**: JSON

**CODE**:
```json
...
"crossNavigation": {
  "inbounds": {
...
  },
"outbounds": {
  "EPMProductManage": {
    "parameters": {
    "sap-ui-fe-variant-id":"id_1542011587281_980_page"
    }
  }
}
} 
```

**STEP**: 5 — manifest.json example for SAP Fiori Elements (OData V4)

**DESCRIPTION**: For OData V4, define the outbound parameter using the "value" object to pass the variant ID (format "plain"). The sample shows sap-ui-fe-variant-id configured in an outbound.

**LANGUAGE**: JSON

**CODE**:
```json
"outbounds": {
    "ProductDetails": {
        "semanticObject": "Manage",
        "action": "items",
        "parameters": {
            "sap-ui-fe-variant-id": {
                "value": {
                    "value": "id_1633600133090_222",
                    "format": "plain"
                }
            }
        }
    }
}
```

**STEP**: 6 — Related information

**DESCRIPTION**: Read about managing variants and variant structures for filter and content areas.

**LANGUAGE**: text

**CODE**:
```text
Related: Managing Variants
Path: managing-variants-8ce658e.md
Title: Allows you to manage variants with different structures in the filter and content areas.
```
--------------------------------

**TITLE**: Placing Reuse Component Instances on the Object Page (OData V2 & V4)

**INTRODUCTION**: Practical, code-focused instructions to place, group, hide, refresh, and title reuse component instances on SAP Fiori elements Object Pages for OData V2 and OData V4 apps. Includes manifest and controller examples to embed reuse components as sections or subsections, control visibility via extension APIs, and trigger refresh behavior.

**TAGS**: fiori-elements, reuse-component, object-page, manifest, routing, OData-v2, OData-v4, embeddedComponents, extensionAPI, stRefreshTrigger

STEP: 1 — Add a reuse component as a subsection to an existing section (OData V2)

DESCRIPTION: Use the manifest "embeddedComponents" entry and set "leadingSectionIdOrPath" to the target section ID or facet path. Provide "navigationProperty" or other settings under "settings". During templating the reuse component is attached as a subsection to the specified section.

LANGUAGE: JSON

CODE:
```json
"embeddedComponents": {
    "tableTest": {
        "id": "tableTest",
        "componentName": "STTA_MP.reuseComponents.tableTest",
        "title": "{{SalesPriceReuse}}",
        "leadingSectionIdOrPath": "GeneralInformation",
        "settings": {
            "navigationProperty": "to_ProductSalesPrice"
        }
    }
}
```

STEP: 2 — Group reuse components into a single section (OData V2)

DESCRIPTION: Group multiple reuse components by assigning one as the leading component (use its ID in "leadingSectionIdOrPath") and use "groupTitle" on grouped components to set the group (section) title. If grouping config is invalid (e.g., reuse component already used elsewhere), the framework falls back to separate sections.

LANGUAGE: JSON

CODE:
```json
"embeddedComponents": {
    "stateTest": {
        "id": "stateTest",
        "componentUsage": "stateTest",
        "title": "{{stateReuse}}",
        "groupTitle": "{{reuseGroupTitle}}"
    },
    "situationsTest": {
        "id": "situationsTest",
        "componentName": "STTA_MP.reuseComponents.situationsTest",
        "title": "{{situationsReuse}}",
        "settings": {
            "productKey": "{ProductForEdit}"
        },
        "leadingSectionIdOrPath": "stateTest"
    }
}
```

STEP: 3 — Hide reuse components via SetSectionHidden API (OData V2)

DESCRIPTION: Call the extension API setSectionHidden in the reuse component's component.js (or controller) to hide or unhide the section/subsection. The API accepts a single Boolean argument: true to hide, false to show. Use attachPageDataLoaded to react to page data and call setSectionHidden accordingly.

LANGUAGE: JavaScript

CODE:
```javascript
function fnRegisterOnPageDataLoaded(oExtensionAPI) {
    oExtensionAPI.attachPageDataLoaded(function (oEvent) {
        var oContextData = oEvent.context.getObject();
        // Hide section if ProductCategory !== "Notebooks"
        (oExtensionAPI.setSectionHidden || jQuery.noop)(oContextData.ProductCategory !== "Notebooks");
    });
}
```

STEP: 4 — Refresh reuse components via stRefreshTrigger (OData V2)

DESCRIPTION: Reuse components expose a stRefresh function. Trigger framework refresh by configuring "stRefreshTrigger" in the manifest component settings. Examples below show triggers for single properties, multiple properties, and combined expressions.

LANGUAGE: JSON

CODE:
```json
// Trigger refresh when changing the value of a property
"embeddedComponents": {
  "priceComponentEmbedding": {
    "id": "priceComponentEmbedding",
    "componentUsage": "priceComponentUsage",
    "title": "{{I18N_KEY_FOR_PRICE_COMPONENT_TITLE}}",
    "settings": {
      "stRefreshTrigger": "{Price}"
    }
  }
}
```

```json
// Trigger refresh when changing the values of one of the properties
"embeddedComponents": {
  "priceComponentEmbedding": {
    "id": "priceComponentEmbedding",
    "componentUsage": "priceComponentUsage",
    "title": "{{I18N_KEY_FOR_PRICE_COMPONENT_TITLE}}",
    "settings": {
      "stRefreshTrigger": "{Price}{Supplier}"
    }
  }
}
```

```json
// Trigger refresh when changing the values of a combination of properties (expression)
"embeddedComponents": {
  "priceComponentEmbedding": {
    "id": "priceComponentEmbedding",
    "componentUsage": "priceComponentUsage",
    "title": "{{I18N_KEY_FOR_PRICE_COMPONENT_TITLE}}",
    "settings": {
      "stRefreshTrigger": "{= ${Price}+${Supplier}}"
    }
  }
}
```

STEP: 5 — Set section title to the control within a reuse component: SmartTable/SmartChart scenario (OData V2)

DESCRIPTION: For table or chart inside the reuse component, define the control with an "initialise" handler and call extensionAPI.setAsTitleOwner with the SmartTable or SmartChart instance from that handler. This hides the section title and uses the control header/text as the section title.

LANGUAGE: XML

CODE:
```xml
<st:SmartTable id="SalesPriceFacetID" initialise="SalesPriceInitialise"/>
```

STEP: 6 — Set section title to the control within a reuse component: controller implementation (OData V2)

DESCRIPTION: Implement the initialise handler in the reuse component controller, get the extension API for the control, and call setAsTitleOwner(control) so the control's header becomes the section title. The control must expose header or text properties.

LANGUAGE: JavaScript

CODE:
```javascript
SalesPriceInitialise: function (oEvent) {
    var oSmartTable = oEvent.getSource();
    var oExtensionAPI = extensionAPI.getExtensionAPI(oSmartTable);
    oExtensionAPI.setAsTitleOwner(oSmartTable);
}
```

STEP: 7 — Add reuse components to Object Page via SAPUI5 routing (OData V4)

DESCRIPTION: Place reuse components into custom subsections by defining object page content sections/subSections with controlId(s), then add reuse component(s) as separate routing targets. Required manifest target properties: type=component, controlAggregation=blocks, clearControlAggregation=true, parent=object page target name, controlId=subsection controlId, options.settings contain reuse component settings.

LANGUAGE: JSON

CODE:
```json
{
  "sap.ui5": {
    "routing": {
      "routes": [
        {
          "pattern": "myEntitySet({key}):?query:",
          "name": "myObjectPage",
          "target": ["myObjectPage", "ReuseComponent", "ReuseComponent2"]
        }
      ],
      "targets": {
        "myObjectPage": {
          "type": "Component",
          "id": "myObjectPage",
          "name": "sap.fe.templates.ObjectPage",
          "options": {
            "settings": {
              "content": {
                "body": {
                  "sections": {
                    "mySection": {
                      "subSections": {
                        "ReuseContainer": {
                          "title": "{i18n>reuseTitle}",
                          "controlId": "firstReuseContainer",
                          "position": {
                            "placement": "After",
                            "anchor": "someSubSection"
                          }
                        }
                      }
                    },
                    "ReuseComponentContainer": {
                      "position": {
                        "placement": "Before",
                        "anchor": "mySubSection"
                      },
                      "title": "Reuse Container",
                      "subSections": {
                        "ReuseContainer": {
                          "controlId": "secondReuseContainer"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "ReuseComponent": {
          "type": "Component",
          "id": "Reuse",
          "name": "path/to/reuseComponent",
          "options": {
            "settings": {
              "exampleSettings": "{somePropertyName}"
            }
          },
          "parent": "myObjectPage",
          "controlId": "firstReuseContainer",
          "controlAggregation": "blocks",
          "clearControlAggregation": true
        },
        "ReuseComponent2": {
          "type": "Component",
          "id": "Reuse2",
          "name": "path/to/reuseComponent2",
          "options": {
            "settings": {
              "exampleSettings": "{somePropertyName}"
            }
          },
          "parent": "myObjectPage",
          "controlId": "secondReuseContainer",
          "controlAggregation": "blocks",
          "clearControlAggregation": true
        }
      }
    }
  }
}
```

STEP: 8 — Hide a reuse component placed in a subsection (OData V4)

DESCRIPTION: A reuse component is bound to its custom subsection. Hide the reuse component by hiding the subsection (use extension points for subsections on the object page). Implement hiding logic at the subsection level (for example: manipulate subsection visibility in an extension or via controller logic).

LANGUAGE: JavaScript

CODE:
```javascript
// Example: hide the subsection by controlling its visibility in an extension/controller
// Actual implementation depends on extension points for subsections on the object page.
oSubSection.setVisible(false); // where oSubSection is the subsection control instance
```

STEP: 9 — Refresh reuse components (OData V4)

DESCRIPTION: Reuse components refresh themselves based on exposed properties. When a page change updates a bound property, implement the corresponding setter method in the reuse component to react to property changes (e.g., refresh internal data or call relevant component methods).

LANGUAGE: JavaScript

CODE:
```javascript
// In the reuse component's control or controller, implement the setter for the bound property:
setExampleProperty: function (sValue) {
  this._exampleProperty = sValue;
  // React to change (refresh internal state, trigger re-render, call fetch, etc.)
  this._refreshComponent();
}
```
--------------------------------

**TITLE**: Plain Text Facet for Object Page Header

**INTRODUCTION**: Add a plain text facet to the object page header to display a single field/block of text with a title (e.g., a description). The facet uses UI.ReferenceFacet (Label → title) that targets a UI.FieldGroup (Data → UI.DataField.Value → description). Mark the property with UI.MultiLineText when it contains multiline content.

**TAGS**: fiori-elements, annotations, ui.referencefacet, ui.fieldgroup, ui.multilinetext, CDS, ABAP, CAP, XML, object-page, header-facet

STEP: 1A — Add UI.ReferenceFacet (XML)
DESCRIPTION: Define a UI.ReferenceFacet in the header that shows a label as title and references a FieldGroup qualifier (PlainText). Use AnnotationPath to point to the FieldGroup qualifier on the navigation property.
LANGUAGE: XML
CODE:
```xml

<Record Type="UI.ReferenceFacet">
    <PropertyValue Property="Label" String="{@i18n>@ProductDescription}"/>
    <PropertyValue Property="Target" AnnotationPath="to_ProductTextInCurrentLang/@UI.FieldGroup#PlainText"/>
</Record>
```

STEP: 1B — Add UI.ReferenceFacet (ABAP CDS)
DESCRIPTION: Define the same ReferenceFacet in ABAP CDS. Use type #FIELDGROUP_REFERENCE and targetQualifier 'PlainText' to reference the FieldGroup qualifier.
LANGUAGE: CDS
CODE:
```

 @UI.facet: [
  {
   label:        '{@i18n>@ProductDescription}',
   purpose:      #STANDARD,
   type:         #FIELDGROUP_REFERENCE,
   targetElement: '_ProductTextInCurrentLang',
   targetQualifier: 'PlainText'
  }
}

```

STEP: 1C — Add UI.ReferenceFacet (CAP CDS / JSON-like)
DESCRIPTION: Define the ReferenceFacet for CAP model JSON/annotation format. Label and Target reference the FieldGroup qualifier path.
LANGUAGE: JSON
CODE:
```

{
    $Type : 'UI.ReferenceFacet',
    Label : '{@i18n>@ProductDescription}',
    Target : 'to_ProductTextInCurrentLang/@UI.FieldGroup#PlainText'
}
```

STEP: 2A — Define UI.FieldGroup Qualifier "PlainText" (XML)
DESCRIPTION: Create a FieldGroup annotation qualifier PlainText. Put a UI.DataField in Data with Value bound to the Description property.
LANGUAGE: XML
CODE:
```xml

<Annotation Term="UI.FieldGroup" Qualifier="PlainText">
    <Record>
        <PropertyValue Property="Data">
            <Collection>
                <Record Type="UI.DataField">
                    <PropertyValue Property="Value" Path="Description"/>
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>

```

STEP: 2B — Define UI.FieldGroup Qualifier "PlainText" (ABAP CDS)
DESCRIPTION: Declare a fieldGroup qualifier named PlainText in ABAP CDS and bind Description as the field in the group.
LANGUAGE: CDS
CODE:
```

@UI.fieldGroup: [
  {
    qualifier: 'PlainText'
  }
]
DESCRIPTION;
```

STEP: 2C — Define UI.FieldGroup Qualifier "PlainText" (CAP CDS)
DESCRIPTION: Define the FieldGroup qualifier in CAP annotations. Use UI.DataField value bound to Description.
LANGUAGE: JSON
CODE:
```

UI.FieldGroup #PlainText : {
    Data : [
        {
            $Type : 'UI.DataField',
            Value : Description
        }
    ]
}
```

STEP: 3A — Annotate Description as UI.MultiLineText (XML)
DESCRIPTION: Mark the Description property with UI.MultiLineText so the framework treats it as multiline text in the plain text facet.
LANGUAGE: XML
CODE:
```xml

<Annotations Target="STTA_PROD_MAN.STTA_C_MP_ProductTextType/Description">

    <Annotation Term="UI.MultiLineText"/>

</Annotations>

```

STEP: 3B — Annotate Description as UI.MultiLineText (ABAP CDS)
DESCRIPTION: In ABAP CDS, annotate the view element or field to indicate multiLineText behavior.
LANGUAGE: CDS
CODE:
```

annotate view STTA_C_MP_PRODUCTTEXTTYPE with {
  @UI.multiLineText: true
  description;
}
```

STEP: 3C — Annotate Description as UI.MultiLineText (CAP CDS)
DESCRIPTION: Mark the Description field with @UI.MultiLineText in CAP CDS annotate block.
LANGUAGE: CDS
CODE:
```

annotate STTA_PROD_MAN.STTA_C_MP_ProductTextType with {
	@UI.MultiLineText
	Description
};
```

STEP: 4A — CDS Annotation Definition (optional reusable element)
DESCRIPTION: Define a reusable CDS annotation element for multiLineText (scope #ELEMENT). Use when creating custom annotation definitions in CDS.
LANGUAGE: XML
CODE:
```xml

//@Scope: #ELEMENT

multiLineText: Boolean default true;

```

STEP: 4B — CDS Source (optional usage example)
DESCRIPTION: Example of applying the multiLineText CDS annotation to a field in CDS source.
LANGUAGE: XML
CODE:
```xml

@UI.multiLineText

Description: String;

```
--------------------------------

**TITLE**: Prefilling Fields Using the DefaultValuesFunction

**INTRODUCTION**: Configure a DefaultValuesFunction to prefill fields when creating entities or action parameters in SAP Fiori elements apps. Includes sample OData annotation snippets for root entity create and navigation-property/item create. Applicable scenarios and multiselect behavior are noted.

**TAGS**: fiori-elements-framework, odata-v2, default-values, annotations, create, navigation, draft, inline-creation

**STEP**: Applicability and multiselect behavior

**DESCRIPTION**: Use DefaultValuesFunction only in supported application scenarios. Note multiselect behavior: when multiselect is used, only the DefaultValuesFunction without input parameters is called.

**LANGUAGE**: Text

**CODE**:
```Text
Applicable cases:
- SAP Fiori elements for OData V2 non-draft applications.
- SAP Fiori elements for OData V2 and SAP Fiori elements for OData V4 draft applications when using empty row (inline creation) mode.

Multiselect note:
- In case of multiselect only the DefaultValuesFunction without any input parameters is called.
```

**STEP**: Configure DefaultValuesFunction for create entity (root)

**DESCRIPTION**: Add a FunctionImport that returns the default-values type and annotate the entity set (or the entity container target) with the DefaultValuesFunction annotation. Place these snippets into your service metadata extension or annotations XML used by your Fiori elements application. The FunctionImport should reference the function name used in the annotation String value.

**LANGUAGE**: XML

**CODE**:
```xml
<FunctionImport Name="GetDefaultsForRoot" ReturnType="cds_zrc_dv_defaultvalues.ZRC_DV_A_Create" m:HttpMethod="GET"/> 
 
<Annotations xmlns=http://docs.oasis-open.org/odata/ns/edm Target="cds_zrc_dv_defaultvalues.cds_zrc_dv_defaultvalues_Entities/Root">
<Annotation Term="com.sap.vocabularies.Common.v1.DefaultValuesFunction" String="GetDefaultsForRoot"/>
</Annotations>
```

**STEP**: Configure DefaultValuesFunction for navigation property / item create

**DESCRIPTION**: For navigation-property/item-level creation, expose a FunctionImport that accepts the parent key as parameter (e.g., UUID) and annotate the navigation property target with DefaultValuesFunction referencing that function. Ensure sap:action-for or equivalent target mapping is used if required by your service metadata and runtime.

**LANGUAGE**: XML

**CODE**:
```xml
<FunctionImport Name="GetDefaultsForItem" ReturnType="cds_zrc_dv_defaultvalues.ZRC_DV_A_Create" m:HttpMethod="GET" sap:action-for="cds_zrc_dv_defaultvalues.RootType">
<Parameter Name="UUID" Type="Edm.Guid" Mode="In"/>
</FunctionImport>
 
<Annotations xmlns=http://docs.oasis-open.org/odata/ns/edm Target="cds_zrc_dv_defaultvalues.RootType/to_Item">
<Annotation Term="com.sap.vocabularies.Common.v1.DefaultValuesFunction" String="GetDefaultsForItem"/>
</Annotations>
```

**STEP**: Related documentation and examples

**DESCRIPTION**: Reference further how-to guides and extension point examples for prefilling fields and inline creation behavior.

**LANGUAGE**: Text

**CODE**:
```Text
See:
- prefilling-fields-when-creating-a-new-entity-11ff444.md
- prefilling-fields-when-creating-a-new-entity-using-an-extension-point-189e2d8.md
- enabling-inline-creation-mode-or-empty-row-mode-for-table-entries-cfb04f0.md
- actions-cbf16c5.md
```
--------------------------------

**TITLE**: Prefilling Fields When Creating a New Entity

**INTRODUCTION**: Describe how to prefill fields when a user creates a new entity in SAP Fiori Elements. Covers draft-enabled service-side prefilling, transferring prefill data from the front end, OData V2 UI options (extension point, DefaultValuesFunction), and OData V4 NewAction annotation sample. Includes caution about user expectations and visibility of prefilled fields.

**TAGS**: fiori-elements-framework, odata-v2, odata-v4, draft, prefilling, annotations, defaultvaluesfunction, extension-point, newaction

**STEP**: 1 — Use service implementation for draft-enabled entities

**DESCRIPTION**: For draft-enabled entities, implement server-side logic in the relevant service implementation to set default/prefill values when creating a draft. If the values depend on prior user interactions in the UI, transfer those values from the front end to the back end (for example, via navigation parameters or by including them in the create request payload). Review cross-app navigation handling of the preferredMode parameter when creation is triggered from another application.

- Important: Use prefilling carefully — do not prefill fields that are not visible to the user or that the user might not expect to be set automatically.

**LANGUAGE**: Text

**CODE**:
```Text
<!-- Implement default-value assignment in your backend service logic for draft creation.
No specific code snippet provided here because implementation is service/platform dependent. -->
```

**STEP**: 2 — OData V2: Prefilling using an extension point

**DESCRIPTION**: For SAP Fiori Elements OData V2 apps, use the provided extension point to customize UI behavior and prefill fields prior to creation. Implement the extension point in your app's extension code to set UI control values or to inject creation parameters into the payload used for new-entity creation.

- See: "Prefilling Fields When Creating a New Entity Using an Extension Point" for actionable examples and extension point names.

**LANGUAGE**: Text

**CODE**:
```Text
<!-- Implement your extension point in the app's extension file (controller/JS) and set values on controls or on the creation payload.
No single code snippet provided in the source document. -->
```

**STEP**: 3 — OData V2: Prefilling using DefaultValuesFunction

**DESCRIPTION**: For OData V2, implement the DefaultValuesFunction on the backend to compute and return default values for fields when a new entity is created. This function runs server-side and supplies values that the UI will display as initial values for the new entity.

- See: "Prefilling Fields Using the DefaultValuesFunction" for concrete backend implementation examples and bindings.

**LANGUAGE**: Text

**CODE**:
```Text
<!-- Implement DefaultValuesFunction per your OData V2 service framework conventions.
No concrete code snippet provided in the source document. -->
```

**STEP**: 4 — OData V4: Use NewAction to get parameters during creation (List Report)

**DESCRIPTION**: In OData V4 applications (List Report only), define a NewAction with parameters so end users can provide parameter values during creation. For POST-based creation, the framework will still show a dialog if there are any non-computed key fields or immutable fields. Add the NewAction in the entity annotation (Common.DraftRoot) to point to the action implementation.

- The sample below shows how to set NewAction in the Common.DraftRoot annotation. Replace the String value with your action's fully qualified name.

**LANGUAGE**: XML

**CODE**:
```XML
<Annotation Term="Common.DraftRoot">
    <Record Type="Common.DraftRootType">
        <PropertyValue Property="NewAction" String="com.sap.gateway.srvd.c_salesordermanage_sd.v0001.CreateWithSalesOrderType"/>
        ....
        ....
    </Record>
</Annotation>
```

**STEP**: 5 — Related references and cautions

**DESCRIPTION**: Related topics to consult for implementation details and examples:
- Handling of the preferredMode parameter (cross-app navigation scenarios)
- Prefilling Fields When Creating a New Entity Using an Extension Point
- Prefilling Fields Using the DefaultValuesFunction
- Actions in the List Report (for NewAction behavior)

- Caution: Do not use prefilling if fields might be hidden from the user or if automatic values would conflict with user expectations.

**LANGUAGE**: Text

**CODE**:
```Text
<!-- Reference related documentation pages and follow the referenced examples for implementation details. -->
```
--------------------------------

**TITLE**: Prefilling Fields When Creating a New Entity Using an Extension Point (Fiori elements, OData V2)

**INTRODUCTION**: This guide shows how to prefill fields when creating a new entity in a Fiori elements List Report (OData V2). It covers enabling the Create-with-Filters menu, transferring filter-bar values into the creation payload via the getPredefinedValuesForCreateExtension extension, and combining filter values with DefaultValuesFunction results.

**TAGS**: fiori-elements-framework, OData V2, list report, filter bar, manifest.json, extension point, prefill, createWithFilters, getPredefinedValuesForCreateExtension

**STEP**: 1 — Enable "Create with Filters" in manifest.json

**DESCRIPTION**: Update the List Report page configuration in manifest.json to replace the standard Create button with a menu offering "Create Object" and "Create with Filters". This enables the Create-with-Filters flow that allows transferring filter values entered by the end user to the new entity.

- File: manifest.json
- Behavior notes:
  - The standard Create button becomes a menu button with two options. The label for the main create option comes from the i18n key CREATE_NEW_OBJECT (default: "Create Object"); consider providing a domain-specific label (for example "Create New Product").
  - The second option is "Create with Filters" (do not override this label).
  - The "Create with Filters" option is enabled only when the table data corresponds to the displayed filter values. The end user might need to click "Go" to trigger the selection state.

**LANGUAGE**: JSON

**CODE**:
```json
... 
"sap.ui.generic.app": {  
    "_version": "???",   
    "settings": {   ...   },   
    "pages": {    
        "ListReport|myEntitySet": {     
            "entitySet": "myEntitySet",     
            "component": {      
                "name": "sap.suite.ui.generic.template.ListReport",
                "list": true,      
                "settings": {       
                    "createWithFilters": {        
                        "strategy": "extension"       
                    },
            ...
```

**STEP**: 2 — Implement getPredefinedValuesForCreateExtension to transfer filter-bar values

**DESCRIPTION**: Implement the extension function getPredefinedValuesForCreateExtension(oSmartFilterBar) to extract values from the SmartFilterBar selection variant and return an object of name-value pairs used during instance creation. Use this when you want to transfer explicit filter entries (only when they are unique/equality filters). Limit usage to fields that are available and editable on the object page and not modifiable via UI adaptation to avoid hidden/uneditable defaults.

- Signature: getPredefinedValuesForCreateExtension(oSmartFilterBar)
- Parameter: oSmartFilterBar — instance of sap.ui.comp.smartfilterbar.SmartFilterBar
- Return: object whose keys are property names and values are the values to prefill on the new entity

**LANGUAGE**: JavaScript

**CODE**:
```javascript
getPredefinedValuesForCreateExtension: function(oSmartFilterBar){   
    var oRet = {};   
    var oSelectionVariant = oSmartFilterBar.getUiState().getSelectionVariant();   
    var aSelectOptions = oSelectionVariant.SelectOptions;   
    var fnTransfer = function(sFieldname){    
        for (var i = 0; i < aSelectOptions.length; i++){     
            var oSelectOption = aSelectOptions[i];     
            if (oSelectOption.PropertyName === sFieldname){      
                if (oSelectOption.Ranges.length === 1){       
                    var oFilter = oSelectOption.Ranges[0];       
                    if (oFilter.Sign === "I" && oFilter.Option === "EQ"){        
                        oRet[sFieldname] = oFilter.Low;       
                    }      
                }      
                break;     
            }    
        }   
    };     
    fnTransfer("ProductCategory");   
    fnTransfer("Supplier");   
    return oRet;  
},
```

**STEP**: 3 — Combine filter values with DefaultValuesFunction results (optional)

**DESCRIPTION**: If you also support DefaultValuesFunction, implement the variant of getPredefinedValuesForCreateExtension that accepts oDefaultValues and uses those values when filters do not provide a unique value. This code extracts unique EQ filter values for specified fields; if not available, it falls back to the corresponding oDefaultValues entry.

- Signature: getPredefinedValuesForCreateExtension(oSmartFilterBar, oDefaultValues)
- Parameter: oDefaultValues — object with default name-value pairs provided by DefaultValuesFunction
- Behavior: For each field of interest, prefer a unique EQ filter value; otherwise use oDefaultValues[field] when available.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
getPredefinedValuesForCreateExtension: function(oSmartFilterBar, oDefaultValues ){   
    var oRet = {};   
    var oSelectionVariant = oSmartFilterBar.getUiState().getSelectionVariant();   
    var aSelectOptions = oSelectionVariant.SelectOptions;   
    var fnTransfer = function(sFieldname){    
        for (var i = 0; i < aSelectOptions.length; i++){     
            var oSelectOption = aSelectOptions[i];     
            if (oSelectOption.PropertyName === sFieldname){      
                if (oSelectOption.Ranges.length === 1){       
                    var oFilter = oSelectOption.Ranges[0];       
                    if (oFilter.Sign === "I" && oFilter.Option === "EQ"){        
                        oRet[sFieldname] = oFilter.Low;       
                    }      
                }      
                break;     
            }  else if (oDefaultValues && Object.keys(oDefaultValues).includes(sFieldname)) {
                oRet[sFieldname] = oDefaultValues[sFieldname];
            }
        }   
    };     
    fnTransfer("ProductCategory");   
    fnTransfer("Supplier");   
    return oRet;  
},
```

**STEP**: 4 — Additional considerations

**DESCRIPTION**: Summary of important points to apply during implementation:

- This topic applies only to SAP Fiori elements for OData V2.
- Use the createWithFilters strategy "extension" in manifest.json to activate the extension-point behavior.
- Keep prefilled fields editable on the resulting object page unless you intentionally prevent edits.
- For cross-app navigation prefilling scenarios, see Prefilling Fields When Creating a New Entity (cross-app navigation) — implement separately if required.
--------------------------------

**TITLE**: Prerequisites for Using SAP Fiori Elements (OData V4)

**INTRODUCTION**: This document lists the actionable prerequisites and checks required before building SAP Fiori elements apps (OData V4). Use this as a checklist to validate OData services, tooling, back-end compatibility, system versions, and learning resources before generating or configuring app code.

**TAGS**: fiori-elements-framework, odata-v4, sap-fiori, cap, abap, sap-fiori-tools, valuehelp, kpi, draft, security

**STEP**: 1 — Validate single service usage and OData V4 query options

**DESCRIPTION**: Ensure your Fiori elements app uses a single OData service for all data-bound controls. Exceptions: KPI tags on the analytical list page and ValueHelp annotation for OData V4. For OData V4 services (including value help services referenced via ValueListReference), verify support for the required OData query options used by Fiori elements for paging and counts.

**LANGUAGE**: Text

**CODE**:
```text
Requirements for OData V4 services:
- Use a single OData service as the data source for all controls (exceptions: KPI tags, ValueHelp annotations).
- Required OData query options (OData V4):
  - $count
  - $skip
  - $top

Notes:
- Value help services used via the ValueListReference annotation must also support the same query options.
```

**STEP**: 2 — Tooling: use SAP Fiori tools and IDE support

**DESCRIPTION**: Use SAP Fiori tools (extensions for SAP Business Application Studio and VS Code) to generate, scaffold, and maintain Fiori elements apps. Confirm edit scenarios only work with draft-enabled services for OData V4.

**LANGUAGE**: Text

**CODE**:
```text
Recommended tooling:
- SAP Fiori tools (extensions for VS Code and SAP Business Application Studio)
  - Product info: https://help.sap.com/viewer/product/SAP_FIORI_tools/Latest/en-US
- SAP Business Application Studio documentation:
  - https://help.sap.com/viewer/product/SAP%20Business%20Application%20Studio/Cloud/en-US

Important note:
- In Fiori elements (OData V4), edit scenarios require a draft-enabled service.
```

**STEP**: 3 — Back-end platforms and documentation references

**DESCRIPTION**: Use the appropriate back-end platform and implementation patterns (ABAP RAP or CAP). Verify OData protocol version compatibility and ensure back-end security configuration is compatible with your Fiori app design.

**LANGUAGE**: Text

**CODE**:
```text
Back-end resources:
- SAP S/4HANA: ABAP RESTful Application Programming Model (RAP)
  - https://help.sap.com/viewer/fc4c71aa50014fd1b43721701471913d/latest/en-US
- SAP BTP ABAP Environment: ABAP RESTful Application Programming Model
  - https://help.sap.com/viewer/923180ddb98240829d935862025004d6/Cloud/en-US/289477a81eec4d4e84c0302fb6835035.html
- SAP Cloud Application Programming Model (CAP)
  - https://cap.cloud.sap/docs/

Protocol/version notes:
- CAP defaults to OData V4. Some projects may need to fallback to OData V2 (for compatibility with existing V2-based UIs).
- If using CAP with Fiori elements (OData V4), ensure back-end security configurations are compatible with the app.
  - See: security-configuration-ba0484b.md
```

**STEP**: 4 — System requirements for draft-capable transactional apps

**DESCRIPTION**: Confirm ABAP server and release-level support for draft handling before enabling edit/draft scenarios in transactional apps.

**LANGUAGE**: Text

**CODE**:
```text
System requirements for draft capabilities:
- New transactional apps with draft capabilities require:
  - ABAP Application Server as of SAP NetWeaver AS for ABAP 7.51 innovation package SP02 or higher.
- Draft capabilities are NOT available with SAP NetWeaver AS for ABAP 7.50.
- Recommendation: download the most up-to-date versions to ensure latest features. (Reference mentions 7.5 SP01 or higher.)
- See: draft-handling-ed9aa41.md
```

**STEP**: 5 — Tutorials and example projects

**DESCRIPTION**: Use the provided tutorials and example projects to learn Fiori tools + OData V4 patterns and to bootstrap sample apps.

**LANGUAGE**: Text

**CODE**:
```text
Tutorials:
- Travel example (Fiori tools + OData V4):
  - https://developers.sap.com/group.fiori-tools-odata-v4-travel.html
- Incident example (Fiori tools + OData V4):
  - https://developers.sap.com/group.fiori-tools-odata-v4-incident.html
```
--------------------------------

**TITLE**: Progress Indicator Facet — Annotations for Object Page Header (UI.DataPoint, ReferenceFacet, UoM)

**INTRODUCTION**: Add a progress indicator to an object page header facet by annotating a ReferenceFacet that points to a UI.DataPoint with Visualization = Progress. This guide provides exact XML, ABAP CDS, and CAP CDS annotation examples for: UI.HeaderFacets (ReferenceFacet), UI.DataPoint, unit-of-measure (Measures.Unit / Measures.ISOCurrency) and Common.Label for footer. Use these snippets directly in your service metadata or CDS sources.

**TAGS**: fiori-elements-framework, UI.DataPoint, UI.HeaderFacets, ReferenceFacet, UoM, Measures.Unit, Measures.ISOCurrency, Common.Label, CDS, ABAP, CAP, XML, ODataV2, ODataV4

STEP: 1a — Add ReferenceFacet (XML)
DESCRIPTION: Add a record to UI.HeaderFacets of type UI.ReferenceFacet. Set the Target AnnotationPath to a UI.DataPoint qualifier that has Visualization = Progress. "UI" is an alias for com.sap.vocabularies.UI.v1.
LANGUAGE: XML
CODE:
```xml
<Annotations Target="STTA_PROD_MAN.STTA_C_MP_ProjectType">
   <Annotation Term="UI.HeaderFacets">
      <Collection>
         <Record Type="UI.ReferenceFacet">
            <PropertyValue Property="Target"
            AnnotationPath="to_ProgressType/@UI.DataPoint#Progress"/>
         </Record>
      </Collection>
   </Annotation>
</Annotations>
```

STEP: 1b — Add ReferenceFacet (ABAP CDS)
DESCRIPTION: In ABAP CDS, add a UI.Facet entry of type #DATAPOINT_REFERENCE pointing to the target element (navigation). Use purpose: #HEADER for header facets.
LANGUAGE: ABAP CDS
CODE:
```
annotate view STTA_C_MP_PROJECTTYPE with {
@UI.Facet: [
  {
    targetQualifier: 'Progress',
    targetElement: 'TO_PROGRESSTYPE',
    type: #DATAPOINT_REFERENCE,
    purpose: #HEADER
  }
]
test;
}
```

STEP: 1c — Add ReferenceFacet (CAP CDS)
DESCRIPTION: In CAP CDS, add UI.HeaderFacets with a UI.ReferenceFacet Target referencing the DataPoint qualifier via navigation path.
LANGUAGE: CAP CDS
CODE:
```
annotate STTA_PROD_MAN.STTA_C_MP_ProjectType @(
  UI.HeaderFacets : [
    {
        $Type : 'UI.ReferenceFacet',
        Target : 'to_ProgressType/@UI.DataPoint#Progress',
    }
  ]
);
```

STEP: 2a — Define UI.DataPoint (XML)
DESCRIPTION: Annotate the entity type (DataPoint target) with UI.DataPoint Qualifier "Progress". Provide Title, Description, Value, TargetValue, Criticality, and Visualization set to UI.VisualizationType/Progress.
LANGUAGE: XML
CODE:
```xml
<Annotations Target="STTA_PROD_MAN.STTA_C_MP_ProgressType">
   <Annotation Term="UI.DataPoint" Qualifier="Progress">
      <Record>
         <PropertyValue Property="Title" String="{@i18n>Title}"/>
         <PropertyValue Property="Description" String="{@i18n>SubTitle}"/>
         <PropertyValue Property="Value" Path="Progress"/>
         <PropertyValue Property="TargetValue" Decimal="150"/>
         <PropertyValue Property="Criticality" Path="Criticality "/>
         <PropertyValue Property="Visualization" EnumMember="UI.VisualizationType/Progress"/>
      </Record>
   </Annotation>
</Annotations>
```

STEP: 2b — Define UI.DataPoint (ABAP CDS)
DESCRIPTION: In ABAP CDS annotate the view with @UI.dataPoint including title, description, targetValue, criticality, and visualization = #PROGRESS. The property name used as qualifier will be the annotation target.
LANGUAGE: ABAP CDS
CODE:
```
annotate view STTA_C_MP_PROGRESSTYPE with {
@UI.dataPoint: {
  title: '{@i18n>Title}',
  description: '{@i18n>SubTitle}',
  targetValue: 150,
  criticality: 'Criticality ',
  visualization: #PROGRESS
}
progress;
}
```

STEP: 2c — Define UI.DataPoint (CAP CDS)
DESCRIPTION: In CAP CDS annotate the entity type with UI.DataPoint qualifier #Progress. Map Value, TargetValue, Title, Criticality, Visualization to the model fields or literals.
LANGUAGE: CAP CDS
CODE:
```
annotate STTA_PROD_MAN.STTA_C_MP_ProgressType @(
UI.DataPoint #Progress : {
    Title : '{@i18n>Title}',
    Description : '{@i18n>SubTitle}',
    Value : Progress,
    TargetValue : 150,
    Criticality : Criticality ,
    Visualization : #Progress
  }
);
```

STEP: 3a — Annotate UoM and Footer (Unit) — XML
DESCRIPTION: Annotate the Value property with Measures.Unit and Common.Label to provide a unit-of-measure and footer label. The Target path for this annotation is the Value property of the DataPoint entity type.
LANGUAGE: XML
CODE:
```xml
<Annotations Target="STTA_PROD_MAN.STTA_C_MP_ProgressType/Value">
   <Annotation Term="Measures.Unit" Path="UoM"/>
   <Annotation Term="Common.Label" String="{@i18n>Footer}"/>
</Annotations>
```

STEP: 3b — Annotate UoM and Footer (Unit) — ABAP CDS
DESCRIPTION: Mark the unit property with @Semantics.unitOfMeasure and link the Value property to that unit via @Semantics.quantity.unitOfMeasure.
LANGUAGE: ABAP CDS
CODE:
```xml
@Semantics.unitOfMeasure: true
UoM;
@Semantics.quantity.unitOfMeasure: 'UoM'
Value;
```

STEP: 3c — Annotate UoM and Footer (Unit) — CAP CDS
DESCRIPTION: In CAP CDS, annotate the entity type so Measures.Unit references the UoM property and apply Common.Label for footer. (Use the Value property annotation target.)
LANGUAGE: CAP CDS
CODE:
```
annotate STTA_PROD_MAN.STTA_C_MP_ ProgressType with {
  @Measures.Unit : UoM
  Common.Label : '{@i18n>Footer}'
  Value
};
```

STEP: 4a — Annotate UoM and Footer (ISOCurrency) — XML
DESCRIPTION: Use Measures.ISOCurrency when the unit is a currency. Annotate the Value property with Measures.ISOCurrency and apply Common.Label for footer.
LANGUAGE: XML
CODE:
```xml
<Annotations Target="STTA_PROD_MAN.STTA_C_MP_ ProgressType/Value">
   <Annotation Term="Measures.ISOCurrency" Path="UoM"/>
   <Annotation Term="Common.Label" Path="Footer/">
</Annotations>
```

STEP: 4b — Annotate UoM and Footer (ISOCurrency) — ABAP CDS
DESCRIPTION: Use @Semantics.currencyCode on the currency property and link the amount property via @Semantics.amount.currencyCode.
LANGUAGE: ABAP CDS
CODE:
```xml
@Semantics.currencyCode:true
UoM;
@Semantics.amount.currencyCode: 'UoM'
Value;
```

STEP: 4c — Annotate UoM and Footer (ISOCurrency) — CAP CDS
DESCRIPTION: In CAP CDS, annotate Measures.ISOCurrency to reference the UoM property and set Common.Label for the footer.
LANGUAGE: CAP CDS
CODE:
```
annotate STTA_PROD_MAN.STTA_C_MP_ ProgressType with {
    Measures.ISOCurrency : UoM
    @Common.Label : Footer
    Value
};
```

STEP: 5 — Rendering Rules and Mandatory Checks
DESCRIPTION: Implement these rules in model/annotation validation and UI expectations. These are functional requirements the UI relies on when rendering the progress indicator.
LANGUAGE: Text
CODE:
```
- Value and Title properties are mandatory. Without Value the progress cannot be calculated. Title is required for the DataPoint term in the UI vocabulary.
- TargetValue is mandatory when using a UoM not expressed as "%" (e.g., currency, CM, PC) or when no UoM is provided.
- Unit of Measure, Subtitle, and Footer are optional.
- If Unit of Measure is "%", Value is treated directly as a percentage.
- If Unit of Measure is not "%" or not provided, progress = Value / TargetValue.
- Division by zero => progress = 0.
- If progress < 0 => no color in progress bar (value still displayed).
- If progress > 100 => progress bar fully colored (value still displayed).
```

STEP: 6a — Additional Feature: DataPoint in ABAP CDS (OData V2)
DESCRIPTION: Example ABAP CDS style annotation for UI.DataPoint for SAP Fiori elements OData V2 within a CDS view.
LANGUAGE: ABAP CDS
CODE:
```xml
@UI.dataPoint: {   
    title:'{@i18n>Title}',   
    description: {@i18n>SubTitle},   
    targetValue: 150,   
    criticality: 'Criticality',   
    visualization: #PROGRESS   
}
ProjectProgress.Progress
```

STEP: 6b — Additional Feature: DataPoint in CAP CDS (OData V4)
DESCRIPTION: Example CAP CDS annotation for UI.DataPoint for SAP Fiori elements OData V4.
LANGUAGE: CAP CDS
CODE:
```
@UI: DataPoint #Progress              : {
        Value         : Progress,
        TargetValue   : 100,
        Title         : 'Progress',
        Visualization : #Progress
    }
```
--------------------------------

**TITLE**: Providing Editable Key Fields for Draft Applications (OData V2)

**INTRODUCTION**: This guide explains how to allow users to edit a key-like field in SAP Fiori elements draft applications by introducing an additional editable field that mirrors the real key in active instances and is transferred to the real key on draft activation. It includes applicability notes, modeling guidance, and exact annotation examples (XML and CAP CDS) needed to map navigation parameters to the editable field.

**TAGS**: fiori-elements, odata-v2, draft, annotations, EditableFieldFor, UI, model

STEP: 1 — Applicability and design considerations

DESCRIPTION:
- Use this pattern only for SAP Fiori elements with OData V2 and draft handling.
- If you control the data model from scratch, prefer an artificial key (e.g., GUID) and keep semantic fields non-key. This guide targets systems with existing databases where changing the key is impractical.
- For non-draft apps this workaround is unnecessary because saving returns the new instance.

LANGUAGE: Text

CODE:
```text
Applicability:
- SAP Fiori elements for OData V2 only.
- Relevant for applications using existing databases and draft handling.
- Not required for non-draft applications.
```

STEP: 2 — Modeling approach (add an editable surrogate field)

DESCRIPTION:
- Introduce an additional property (non-key, editable) that represents the semantic meaning of the key (e.g., SalesOrderForEdit).
- Keep the existing key property (e.g., SalesOrder) as the technical key in the persistent model.
- Behavior:
  - Active instance: editable field value == key value (synchronized).
  - Draft instance: user edits only the editable field; changes are kept in the draft.
  - On draft activation: transfer the editable field value to the real key; system navigates automatically to the active instance.
- On the UI: show only the editable field to users. Continue using the real key for navigation parameters and semantic object attributes.

LANGUAGE: Text

CODE:
```text
Modeling steps (conceptual):
1. Add non-key editable property, e.g., SalesOrderForEdit.
2. Keep SalesOrder as the key property.
3. Ensure active instances synchronize SalesOrderForEdit == SalesOrder.
4. Implement transfer on draft activation: SalesOrder := SalesOrderForEdit.
5. Display only SalesOrderForEdit in the UI; use SalesOrder for navigation parameters.
```

STEP: 3 — Map navigation parameters to the editable field using EditableFieldFor (XML annotation)

DESCRIPTION:
- When navigation parameters are not selective enough to find the object directly, set them in the List Report/Object Page filters. The framework needs to map the incoming navigation parameter value (which maps semantically to the key) to the editable field. Use the com.sap.vocabularies.Common.v1.EditableFieldFor annotation to declare this mapping for the editable property.

LANGUAGE: XML

CODE:
```xml
<Annotations Target="STTA_SALES_ORDER_WD_20_SRV.C_STTA_SalesOrderItem_WD_20Type/SalesOrderForEdit">
    <Annotation Term="com.sap.vocabularies.Common.v1..EditableFieldFor" PropertyPath="SalesOrder"/>
</Annotations>

<Annotations Target="STTA_SALES_ORDER_WD_20_SRV.C_STTA_SalesOrderItem_WD_20Type/SalesOrderItemForEdit">
    <Annotation Term="com.sap.vocabularies.Common.v1.EditableFieldFor" PropertyPath="SalesOrderItem"/>
</Annotations>
```

STEP: 4 — Map navigation parameters to the editable field using CAP CDS annotations

DESCRIPTION:
- If using CAP CDS, annotate the editable properties with @Common.EditableFieldFor pointing to the real key property. This performs the same mapping as the XML annotation, telling Fiori elements to map incoming navigation parameter values to the editable field.

LANGUAGE: CDS

CODE:
```
annotate STTA_SALES_ORDER_WD_20_SRV.C_STTA_SalesOrderItem_WD_20Type with {
  @Common.EditableFieldFor : SalesOrder
  SalesOrderForEdit
};

annotate STTA_SALES_ORDER_WD_20_SRV.C_STTA_SalesOrderItem_WD_20Type with { 
   @Common.EditableFieldFor : SalesOrderItem
   SalesOrderItemForEdit
};
```

STEP: 5 — UI and navigation implementation checklist

DESCRIPTION:
- Ensure the UI displays only the editable property (SalesOrderForEdit).
- Ensure navigation uses the real key (SalesOrder) as navigation parameter consistent with semantic object attributes.
- If users navigate into the app via non-selective parameters, set values into the filter bar; the EditableFieldFor mapping ensures the filter uses the editable field on the draft side.
- Verify activation logic transfers editable value to key and triggers navigation to the active instance.

LANGUAGE: Text

CODE:
```text
UI checklist:
- Display: SalesOrderForEdit only.
- Navigation param: SalesOrder (key).
- Semantic object attributes: align with SalesOrder navigation parameter.
- Filter behavior: map incoming param -> SalesOrderForEdit via EditableFieldFor.
- Activation: copy SalesOrderForEdit -> SalesOrder and navigate to active object.
```
--------------------------------

**TITLE**: Quick View Cards — Configuration and Manifest Examples

**INTRODUCTION**: Quick view cards display detailed information for a single record using the UI annotations HeaderInfo and Facets. This guide provides actionable configuration details and manifest.json examples for:
- mapping HeaderInfo and Facets annotations,
- exposing FieldGroup/IsSummary content,
- adding identification/actions to the card footer,
- manifest settings and qualifiers.

**TAGS**: fiori-elements-framework, quick-view-card, sap.ovp, annotations, com.sap.vocabularies.UI.v1, manifest.json, Identification, Facets

**STEP**: 1 — HeaderInfo and Facets: purpose and required properties

**DESCRIPTION**: Use these UI annotation terms to design the quick view card content and header:
- com.sap.vocabularies.UI.v1.HeaderInfo — presents entity header information (expose TypeNamePlural, ImageUrl, Title, Description).
- com.sap.vocabularies.UI.v1.Facets — presents detailed information in the content area.
- The content area displays FieldGroup records from referenceFacet items that have IsSummary set (com.sap.vocabularies.UI.v1.IsSummary).
- If you use qualifiers, reference the qualified annotation via annotationPath in the manifest; if omitted, the unqualified Facets term is used.

**LANGUAGE**: PlainText

**CODE**:
```text
HeaderInfo properties to expose:
- TypeNamePlural
- ImageUrl
- Title
- Description

Content selection:
- Use com.sap.vocabularies.UI.v1.Facets referenceFacet -> FieldGroup entries
- Mark FieldGroup items with com.sap.vocabularies.UI.v1.IsSummary to include them in the quick view card content area
```

**STEP**: 2 — How to set annotationPath (Facets) for object stream cards in manifest.json

**DESCRIPTION**: When your quick view card is used as an object stream card in a stack card, set objectStreamCardsSettings.annotationPath to point to the qualified Facets annotation. If omitted, the unqualified Facets term is used.

**LANGUAGE**: JSON

**CODE**:
```json
"sap.ovp": {
    ...
    "cards": {
        "card00": {
            "model": "ZCD204_EPM_DEMO_SRV",
            "template": "sap.ovp.cards.stack",
            "settings": {
                "category": "{{card01_category}}",
                "entitySet": "BusinessPartners",
                "objectStreamCardsSettings": {
                    "annotationPath": "com.sap.vocabularies.UI.v1.Facets#Qualifier2"
                }
            }
        },
        ...
    }
}
```

**STEP**: 3 — How to set identificationAnnotationPath (actions) for a card in manifest.json

**DESCRIPTION**: To map Identification annotations (used for footer actions and identification fields) for a specific card, set identificationAnnotationPath in the card settings to the qualified Identification annotation.

**LANGUAGE**: JSON

**CODE**:
```json
"sap.ovp": {
    ...
    "cards": {
        ...
        "card01": {
            "model": "ZCD204_EPM_DEMO_SRV",
            "template": "sap.ovp.cards.table",
            "settings": {
                ...
                "identificationAnnotationPath": "com.sap.vocabularies.UI.v1.Identification#Qualifier1",
                ...
            }
        },
        ...
    }
}
```

**STEP**: 4 — Card footer actions: annotation types, behavior, and invocation

**DESCRIPTION**: Configure footer actions via Identification annotations. Two supported annotation action types:
- com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation — intent/navigation actions
- com.sap.vocabularies.UI.v1.DataFieldForAction — OData action/function invocation

Display rules:
- 0 actions: footer is not displayed.
- 1 action: single button aligned to the right of the footer.
- 2 actions: two buttons displayed (order/importance matters; recommended: positive action on left).
- >2 actions: a single Actions button opens an ActionSheet listing defined actions in metadata order.

Invocation:
- Each OData action is translated into a request per the annotation.
- Simple actions invoke the OData service request directly.
- Complex actions open a dialog for parameters or a confirmation message before invoking.

**LANGUAGE**: PlainText

**CODE**:
```text
Footer action mapping:
- Annotation types: DataFieldForIntentBasedNavigation, DataFieldForAction
- UI behavior:
  - 0 actions => no footer
  - 1 action => right-aligned button
  - 2 actions => both buttons shown (order = importance)
  - >2 actions => Actions button => ActionSheet listing actions in metadata order
- Execution:
  - Simple => immediate OData request
  - Complex => open dialog for params or confirmation, then request
```

**STEP**: 5 — Interaction controls and layout notes

**DESCRIPTION**: Interaction buttons are rendered inside sap.m.OverflowToolbar so buttons adapt to card width. When necessary, remaining actions appear in the overflow area. Quick view card height is aligned to its content; header and footer are fixed. Content area scrolls vertically if content overflows (only content area scrolls).

**LANGUAGE**: PlainText

**CODE**:
```text
Rendering and layout:
- Buttons placed in sap.m.OverflowToolbar for responsive behavior
- If overflowed, remaining actions appear in overflow toolbar
- Card sizing:
  - Height aligns to content
  - Header and footer remain fixed
  - Only content area scrolls vertically when content exceeds visible area
```
--------------------------------

**TITLE**: Quick Views: Further Configuration Examples (Currency & Supplier Quick Views)

**INTRODUCTION**: Examples showing how to configure Quick View facets for fields used in object page tables and OData V2 services. Includes EDmx Association with referential constraint, XML UI annotations, ABAP CDS annotations, and CAP CDS annotations. Use these snippets to enable Quick View popups (UI.QuickViewFacets) for currency and supplier fields when the service or metadata lacks referential constraints or when you need to define field groups and facets.

**TAGS**: fiori-elements-framework, quick-view, UI.QuickViewFacets, annotations, OData, EDMX, XML, ABAP CDS, CAP CDS, metadata

STEP: 1 — Add missing referential constraint for Currency in EDMX

DESCRIPTION: If the OData service does not define a referential constraint for the Currency property, add an Association with a ReferentialConstraint in the EDMX (service metadata) so the Quick View can resolve the relationship. Insert this Association element into the service metadata (EDMX).

LANGUAGE: XML

CODE:
```xml
<Association Name="assoc_6D52161C1362D99A31996E5BB23202E8" sap:content-version="1">
    <End Type="STTA_PROD_MAN.STTA_C_MP_ProductSalesDataType" Multiplicity="1" Role="FromRole_assoc_6D52161C1362D99A31996E5BB23202E8"/>
    <End Type="STTA_PROD_MAN.I_CurrencyType" Multiplicity="0..1" Role="ToRole_assoc_6D52161C1362D99A31996E5BB23202E8"/>
    <ReferentialConstraint>
        <Principal Role="FromRole_assoc_6D52161C1362D99A31996E5BB23202E8">
            <PropertyRef Name="Currency"/>
        </Principal>
        <Dependent Role="ToRole_assoc_6D52161C1362D99A31996E5BB23202E8">
            <PropertyRef Name="Currency"/>
        </Dependent>
    </ReferentialConstraint>
</Association>
```

STEP: 2 — XML Annotation: QuickViewFacets for Currency

DESCRIPTION: Add UI.QuickViewFacets and field group annotations for the Currency type in the XML annotation file. This configures the Quick View facets and the fields to display (Decimals, CurrencyISOCode, AlternativeCurrencyKey). Target the Currency property on the ProductSalesDataType with a semantic object (EPMProduct).

LANGUAGE: XML

CODE:
```xml
<!-- QuickViewFacets annotation for Currency-->
<Annotations Target="STTA_PROD_MAN.STTA_C_MP_ProductSalesDataType/Currency">
    <Annotation Term="Common.SemanticObject" String="EPMProduct"/>
</Annotations>           
<Annotations Target="STTA_PROD_MAN.I_CurrencyType">           
    <Annotation Term="UI.QuickViewFacets">
        <Collection>
            <Record Type="UI.ReferenceFacet">
                <PropertyValue Property="Target" AnnotationPath="@UI.FieldGroup#CurrencyQuickViewPOC_FieldGroup_1" />
            </Record>           
        </Collection>
    </Annotation>
    <Annotation Term="UI.FieldGroup" Qualifier="CurrencyQuickViewPOC_FieldGroup_1">
        <Record>
            <PropertyValue Property="Data">
                <Collection>
                    <Record Type="UI.DataField">
                        <PropertyValue Property="Label" String="Decimals" />
                        <PropertyValue Property="Value" Path="Decimals"/>
                    </Record>
                    <Record Type="UI.DataField">
                        <PropertyValue Property="Label" String="CurrencyISOCode" />
                        <PropertyValue Property="Value" Path="CurrencyISOCode"/>
                    </Record>
                    <Record Type="UI.DataField">
                        <PropertyValue Property="Label" String="AlternativeCurrencyKey" />
                        <PropertyValue Property="Value" Path="AlternativeCurrencyKey"/>
                    </Record>                            
                </Collection>
            </PropertyValue>
        </Record>
    </Annotation>   
</Annotations>
```

STEP: 3 — ABAP CDS Annotation: Quick View Facet for Currency

DESCRIPTION: Use ABAP CDS annotations to set the semantic object on the ProductSalesData view and to define a Quick View field group and facet on the I_CURRENCYTYPE view. Apply UI.Facet with purpose #QUICK_VIEW and UI.fieldGroup entries with qualifier CurrencyQuickViewPOC_FieldGroup_1. Insert into the relevant CDS view annotations.

LANGUAGE: ABAP CDS

CODE:
```abap
annotate view STTA_C_MP_PRODUCTSALESDATA with {
  @Consumption.semanticObject: 'EPMProduct'
  currency;
}

annotate view I_CURRENCYTYPE with {
@UI.Facet: [
  {
    targetQualifier: 'CurrencyQuickViewPOC_FieldGroup_1',
    type: #FIELDGROUP_REFERENCE,
    purpose: #QUICK_VIEW
  }
]
@UI.fieldGroup: [
  {
    label: 'Decimals',
    value: 'DECIMALS',
    type: #STANDARD,
    position: 1 ,
    qualifier: 'CurrencyQuickViewPOC_FieldGroup_1'
  }
]
decimals;
@UI.fieldGroup: [
  {
    label: 'CurrencyISOCode',
    value: 'CURRENCYISOCODE',
    type: #STANDARD,
    position: 2 ,
    qualifier: 'CurrencyQuickViewPOC_FieldGroup_1'
  }
]
currencyisocode;
@UI.fieldGroup: [
  {
    label: 'AlternativeCurrencyKey',
    value: 'ALTERNATIVECURRENCYKEY',
    type: #STANDARD,
    position: 3 ,
    qualifier: 'CurrencyQuickViewPOC_FieldGroup_1'
  }
]
alternativecurrencykey;
}
```

STEP: 4 — CAP CDS Annotation: Quick View Facet for Currency

DESCRIPTION: For CAP (SAP Cloud Application Programming Model) CDS, annotate the ProductSalesDataType and I_CurrencyType to define Common.SemanticObject and UI.QuickViewFacets with a ReferenceFacet to the field group qualifier. Define UI.FieldGroup with Data entries for Decimals, CurrencyISOCode, and AlternativeCurrencyKey.

LANGUAGE: CDS

CODE:
```cds
annotate STTA_PROD_MAN.STTA_C_MP_ProductSalesDataType with {
    @Common.SemanticObject : 'EPMProduct'
    Currency
};
annotate STTA_PROD_MAN.I_CurrencyType with @(
    UI.QuickViewFacets : [
        {
            $Type : 'UI.ReferenceFacet',
            Target : '@UI.FieldGroup#CurrencyQuickViewPOC_FieldGroup_1'
        }
    ],
    UI.FieldGroup #CurrencyQuickViewPOC_FieldGroup_1 : {
        Data : [
            {
                $Type : 'UI.DataField',
                Label : 'Decimals',
                Value : Decimals
            },
            {
                $Type : 'UI.DataField',
                Label : 'CurrencyISOCode',
                Value : CurrencyISOCode
            },
            {
                $Type : 'UI.DataField',
                Label : 'AlternativeCurrencyKey',
                Value : AlternativeCurrencyKey
            }
        ]
    }
);
```

STEP: 5 — XML Annotation: QuickViewFacets and contact semantics for Supplier (OData V2)

DESCRIPTION: For Supplier quick views in OData V2, add communication semantics (IsEmailAddress, IsUrl, IsPhoneNumber) and UI.QuickViewFacets with two ReferenceFacet entries. Define two UI.FieldGroup qualifiers (SupplierQuickViewPOC_FieldGroup_1 and _2) that list the Data fields and nested navigation paths (to_Address/FormattedAddress etc.). Use the XML annotation file that targets STTA_PROD_MAN.STTA_C_MP_SupplierType and property targets. (Images referenced: images/Quick_View_Example_1_8633539.png)

LANGUAGE: XML

CODE:
```xml
<!-- QuickViewFacets annotation for Supplier-->
            <Annotations Target="STTA_PROD_MAN.STTA_C_MP_SupplierType/EmailAddress" xmlns="http://docs.oasis-open.org/odata/ns/edm">
                  <Annotation Term="com.sap.vocabularies.Communication.v1.IsEmailAddress" Bool="true"/>
            </Annotations>      

            <Annotations Target="STTA_PROD_MAN.STTA_C_MP_SupplierType/URL" xmlns="http://docs.oasis-open.org/odata/ns/edm">
                  <Annotation Term="Org.OData.Core.V1.IsUrl" Bool="true"/>
            </Annotations>
            <Annotations Target="STTA_PROD_MAN.STTA_C_MP_SupplierType/PhoneNumber" xmlns="http://docs.oasis-open.org/odata/ns/edm">
                  <Annotation Term="com.sap.vocabularies.Communication.v1.IsPhoneNumber" Bool="true"/>
            </Annotations>
            <Annotations Target="STTA_PROD_MAN.STTA_C_MP_SupplierType">                
                <Annotation Term="UI.QuickViewFacets">
                    <Collection>
                        <Record Type="UI.ReferenceFacet">
                            <PropertyValue Property="Target" AnnotationPath="@UI.FieldGroup#SupplierQuickViewPOC_FieldGroup_1" />
                        </Record>
                        <Record Type="UI.ReferenceFacet">
                            <PropertyValue Property="Target" AnnotationPath="@UI.FieldGroup#SupplierQuickViewPOC_FieldGroup_2" />
                        </Record>        

                    </Collection>
                </Annotation>
                <Annotation Term="UI.FieldGroup" Qualifier="SupplierQuickViewPOC_FieldGroup_1">
                    <Record>
                        <PropertyValue Property="Label" String="The first field group label" />
                        <PropertyValue Property="Data">
                            <Collection>
                                <Record Type="UI.DataField">
                                    <PropertyValue Property="Label" String="Supplier" />
                                    <PropertyValue Property="Value" Path="Supplier"/>
                                </Record>
                                <Record Type="UI.DataField">
                                    <PropertyValue Property="Label" String="Company Name" />
                                    <PropertyValue Property="Value" Path="CompanyName"/>
                                </Record>
                                <Record Type="UI.DataField">
                                    <PropertyValue Property="Label" String="Email Address" />
                                    <PropertyValue Property="Value" Path="EmailAddress"/>
                                </Record>
                                <Record Type="UI.DataField">
                                    <PropertyValue Property="Label" String="to_Address / FormattedAddress" />
                                    <PropertyValue Property="Value" Path="to_Address/FormattedAddress"/>
                                </Record>
                            </Collection>
                        </PropertyValue>
                    </Record>
                </Annotation>
                <Annotation Term="UI.FieldGroup" Qualifier="SupplierQuickViewPOC_FieldGroup_2">
                    <Record>
                        <PropertyValue Property="Label" String="The second field group label" />
                        <PropertyValue Property="Data">
                            <Collection>
                                <Record Type="UI.DataField">
                                    <PropertyValue Property="Label" String="Phone Number" />
                                    <PropertyValue Property="Value" Path="PhoneNumber"/>
                                </Record>
                                <Record Type="UI.DataField">
                                    <PropertyValue Property="Label" String="URL" />
                                    <PropertyValue Property="Value" Path="URL"/>
                                </Record>
                                <Record Type="UI.DataField">
                                    <PropertyValue Property="Label" String="to_Address / AddressValidityStartDate" />
                                    <PropertyValue Property="Value" Path="to_Address/AddressValidityStartDate"/>
                                </Record>
                            </Collection>
                        </PropertyValue>
                    </Record>
                </Annotation>
            </Annotations>
```

STEP: 6 — ABAP CDS Annotation: Quick View Facets for Supplier

DESCRIPTION: ABAP CDS annotations for the Supplier view to define two Quick View field group references and fieldGroup entries. Include semantical annotations for email and telephone where used. Add fieldGroup qualifiers SupplierQuickViewPOC_FieldGroup_1 and SupplierQuickViewPOC_FieldGroup_2 with positions and labels to form the Quick View content.

LANGUAGE: ABAP CDS

CODE:
```abap
annotate view STTA_C_MP_SUPPLIER with {
@UI.Facet: [
  {
    targetQualifier: 'SupplierQuickViewPOC_FieldGroup_1',
    type: #FIELDGROUP_REFERENCE,
    purpose: #QUICK_VIEW
  },
  {
    targetQualifier: 'SupplierQuickViewPOC_FieldGroup_2',
    type: #FIELDGROUP_REFERENCE,
    purpose: #QUICK_VIEW
  }
]
@UI.fieldGroup: [
  {
    label: 'Supplier',
    value: 'SUPPLIER',
    type: #STANDARD,
    position: 1 ,
    qualifier: 'SupplierQuickViewPOC_FieldGroup_1',
    groupLabel: 'The first field group label'
  }
]
supplier;
@UI.fieldGroup: [
  {
    label: 'Company Name',
    value: 'COMPANYNAME',
    type: #STANDARD,
    position: 2 ,
    qualifier: 'SupplierQuickViewPOC_FieldGroup_1'
  }
]
companyname;
@UI.fieldGroup: [
  {
    label: 'Email Address',
    value: 'EMAILADDRESS',
    type: #STANDARD,
    position: 3 ,
    qualifier: 'SupplierQuickViewPOC_FieldGroup_1'
  }
]
@Semantics:   { eMail: { address: true, type:  [ #PREF, #WORK ] } }
emailaddress;
@UI.fieldGroup: [
  {
    label: 'to_Address / FormattedAddress',
    value: 'TO_ADDRESS/FORMATTEDADDRESS',
    type: #STANDARD,
    position: 4 ,
    qualifier: 'SupplierQuickViewPOC_FieldGroup_1'
  }
]
to_address/formattedaddress;
@UI.fieldGroup: [
  {
    label: 'Phone Number',
    value: 'PHONENUMBER',
    type: #STANDARD,
    position: 5 ,
    qualifier: 'SupplierQuickViewPOC_FieldGroup_2'
  }
]
@Semantics.telephone.type: #WORK
phonenumber;
@UI.fieldGroup: [
  {
    label: 'URL',
    value: 'URL',
    type: #STANDARD,
    position: 6 ,
    qualifier: 'SupplierQuickViewPOC_FieldGroup_2'
  }
]
url;
@UI.fieldGroup: [
  {
    label: 'to_Address / AddressValidityStartDate',
    value: 'TO_ADDRESS/ADDRESSVALIDITYSTARTDATE',
    type: #STANDARD,
    position: 7 ,
    qualifier: 'SupplierQuickViewPOC_FieldGroup_2'
  }
]
to_address/addressvaliditystartdate;
}
```
--------------------------------

**TITLE**: Radial Micro Chart — UI.Chart and UI.DataPoint Annotations (XML, ABAP CDS, CAP CDS)

**INTRODUCTION**: Quick reference and actionable code examples to implement a Radial Micro Chart (single percentage value) using metadata annotations. Includes XML, ABAP CDS, and CAP CDS examples for UI.Chart and UI.DataPoint. Lists mandatory annotations and semantic coloring rules required for a valid radial micro chart.

**TAGS**: fiori-elements-framework, radial-micro-chart, UI.Chart, UI.DataPoint, annotations, CDS, ABAP, CAP, XML

**STEP**: 1 — UI.Chart Annotation (XML)

**DESCRIPTION**: Use UI.Chart to define the radial micro chart properties. Title → chart title, Description → subtitle. ChartType must be Donut for radial micro chart. Specify Measures and MeasureAttributes with a DataPoint reference. The example uses Qualifier "SpecificationWidthRadialChart" and Measure "Width".

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.Chart" Qualifier="SpecificationWidthRadialChart">
    <Record Type="UI.ChartDefinitionType">
        <PropertyValue Property="Title" String="Product Width Specification"/>
        <PropertyValue Property="Description" String="No navigation with qualifier"/>
        <PropertyValue Property="ChartType" EnumMember="UI.ChartType/Donut"/>
        <PropertyValue Property="Measures">
            <Collection>
                <PropertyPath>Width</PropertyPath>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="MeasureAttributes">
            <Collection>
                <Record Type="UI.ChartMeasureAttributeType">
                    <PropertyValue Property="Measure" PropertyPath="Width"/>
                    <PropertyValue Property="Role" EnumMember="UI.ChartMeasureRoleType/Axis1"/>
                    <PropertyValue Property="DataPoint" AnnotationPath="@UI.DataPoint#Width"/>
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

**STEP**: 2 — UI.Chart Annotation (ABAP CDS)

**DESCRIPTION**: ABAP CDS equivalent for defining the radial micro chart. Ensure chartType is #DONUT and specify measures and measureAttributes including asDataPoint or DataPoint link. Qualifier is provided for referencing.

**LANGUAGE**: ABAP CDS

**CODE**:
```
@UI.Chart: [
  {
    title: 'Product Width Specification',
    description: 'No navigation with qualifier',
    chartType: #DONUT,
    measures: [
      'WIDTH'
    ],
    measureAttributes: [
      {
        measure: 'Width',
        role: #AXIS_1,
        asDataPoint: true
      }
    ],
    qualifier: 'SpecificationWidthRadialChart'
  }
]
annotate view STTA_C_MP_PRODUCT with {

}
```

**STEP**: 3 — UI.Chart Annotation (CAP CDS)

**DESCRIPTION**: CAP CDS (Cdl) variant of the UI.Chart annotation. Use ChartType #Donut and include Measures and MeasureAttributes. Reference DataPoint with '@UI.DataPoint#Width' for semantic coloring and percentage value binding.

**LANGUAGE**: CAP CDS

**CODE**:
```
UI.Chart #SpecificationWidthRadialChart : {
    $Type : 'UI.ChartDefinitionType',
    Title : 'Product Width Specification',
    Description : 'No navigation with qualifier',
    ChartType : #Donut,
    Measures : [
        Width
    ],
    MeasureAttributes : [
        {
            $Type : 'UI.ChartMeasureAttributeType',
            Measure : Width,
            Role : #Axis1,
            DataPoint : '@UI.DataPoint#Width'
        }
    ]
}
```

**STEP**: 4 — UI.DataPoint Annotation (XML)

**DESCRIPTION**: Define the DataPoint referenced by the chart's MeasureAttributes. Provide Value (bind to measure), optional TargetValue, and Criticality (or CriticalityCalculation) for semantic coloring. Example qualifier "Width" is used and Value maps to Width.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.DataPoint" Qualifier="Width">
    <Record>
        <PropertyValue Property="Value" Path="Width"/>
        <PropertyValue Property="TargetValue" Path="Weight"/>
        <PropertyValue Property="Criticality" Path="criticalityValue"/>
    </Record>
</Annotation>
```

**STEP**: 5 — UI.DataPoint Annotation (ABAP CDS)

**DESCRIPTION**: ABAP CDS snippet showing DataPoint criticality binding. Use criticality or criticality calculation fields as needed.

**LANGUAGE**: ABAP CDS

**CODE**:
```
@UI.dataPoint: {
  criticality: 'criticalityValue'
}
Width;
```

**STEP**: 6 — UI.DataPoint Annotation (CAP CDS)

**DESCRIPTION**: CAP CDS DataPoint definition. Map Value to Width, TargetValue to Weight, and Criticality to criticalityValue. Use qualifier #Width to match the chart's DataPoint reference.

**LANGUAGE**: CAP CDS

**CODE**:
```
UI.DataPoint #Width : {
    Value : Width,
    TargetValue : Weight,
    Criticality : criticalityValue
}
```

**STEP**: 7 — Mandatory Annotations and Semantic Coloring Rules

**DESCRIPTION**: Required annotation elements and coloring precedence for radial micro chart. Follow these rules when generating metadata:

**LANGUAGE**: PlainText

**CODE**:
```
Mandatory annotations for radial micro chart:
- UI.Chart → ChartType: "Donut"
- UI.Chart → Measures
- UI.Chart → MeasureAttributes → DataPoint (reference to a UI.DataPoint)
- UI.DataPoint → Value

If using CriticalityCalculation for semantic coloring, include:
- UI.DataPoint → CriticalityCalculation
- UI.DataPoint → CriticalityCalculation/ImprovementDirection

Semantic coloring precedence:
- UI.DataPoint → Criticality overrides UI.DataPoint → CriticalityCalculation (i.e., if Criticality is present, it takes precedence).
- Both Criticality and CriticalityCalculation are supported, but do not rely on both for conflicting values.

Display behavior:
- The radial micro chart displays percentage values. The unit-of-measure label is invalid for this chart type and will not be rendered.
```

**STEP**: 8 — Implementation Notes & References

**DESCRIPTION**: Practical reminders for code generation and validation.

**LANGUAGE**: PlainText

**CODE**:
```
- Ensure ChartType is explicitly set to Donut to render a radial micro chart.
- Ensure the Measure referenced in UI.Chart Measures is the same measure used in MeasureAttributes and in UI.DataPoint → Value.
- Use the same Qualifier names to link UI.Chart MeasureAttributes DataPoint to UI.DataPoint (e.g., @UI.DataPoint#Width).
- For CAP and ABAP CDS, follow respective syntax for qualifiers and DataPoint linking.
- Reference sample and rendering details: https://ui5.sap.com/1.82.5/#/entity/sap.suite.ui.microchart.RadialMicroChart
```
--------------------------------

**TITLE**: Rating Indicator Facet for Fiori Elements Object Page Header

**INTRODUCTION**: Add a read-only rating indicator to the Object Page header using UI.ReferenceFacet that points to a UI.DataPoint with Visualization = Rating. Use aggregated (average + sample size + footer) or non-aggregated (single rating) variants depending on the use case. This document provides actionable annotation examples (XML, ABAP CDS, CAP CDS) and key properties to configure stars, subtitle, and behavior in edit mode.

**TAGS**: fiori-elements-framework, rating, UI.DataPoint, UI.Facets, annotations, XML, ABAP CDS, CAP CDS, OData V4

**STEP**: 1 — Add a rating indicator facet (overview)

**DESCRIPTION**: Use a UI.ReferenceFacet within UI.Facets that targets a UI.DataPoint qualifier whose Visualization is UI.VisualizationType/Rating. The UI.DataPoint supplies Value (rating), optional TargetValue (max stars), SampleSize (for aggregated subtitle), Description (for non-aggregated subtitle), and Title.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.Facets">
    <Record Type="UI.ReferenceFacet">
        <PropertyValue Property="Target" AnnotationPath="to_ProductRating/@UI.DataPoint#Aggregated" />
    </Record>
</Annotation>
<Annotation Term="UI.DataPoint" Qualifier="Aggregated">
    <Record>
        <PropertyValue Property="Title" String="{@i18n>@ProductAverageRating}" />
        <PropertyValue Property="Value" Path="AverageRating" />
        <PropertyValue Property="TargetValue" Int="3" />
        <PropertyValue Property="Visualization" EnumMember="UI.VisualizationType/Rating" />
        <PropertyValue Property="SampleSize" Path="ReviewCount" />
    </Record>
</Annotation>
```

**STEP**: 2 — Aggregated rating (description, subtitle, and requirements)

**DESCRIPTION**: Aggregated rating shows average rating, total number of ratings (SampleSize) as subtitle, rating stars (Value), and footer average. Use local annotations for aggregated rating (not CDS annotations). To change subtitle text, annotate SampleSize with Common.Label. Use TargetValue to set max stars statically (Int) or via a path.

**LANGUAGE**: CAP CDS

**CODE**:
```
UI.Facets : {
    $Type : 'UI.ReferenceFacet',
    Target : 'to_ProductRating/@UI.DataPoint#Aggregated'
},
UI.DataPoint #Aggregated : {
    Title : '{@i18n>@ProductAverageRating}',
    Value : AverageRating,
    TargetValue : 3,
    Visualization : #Rating,
    SampleSize : ReviewCount
}
```

**LANGUAGE**: ABAP CDS

**CODE**:
```
@UI.headerInfo: {
  typeName: 'Sales Order',
  typeNamePlural: 'Sales Orders',
  title: {
    value: 'SO_ID',
    type: #STANDARD
  }
}
annotate view STTA_C_MP_PRODUCT with {

}
```

**STEP**: 3 — Non-aggregated rating (user's single rating)

**DESCRIPTION**: Non-aggregated shows a single rating (e.g., user's own rating) with Title, Subtitle (Description), and Rating control. Can use local annotations or CDS annotations. Use TargetValue as a path to the backend MaxRating field to determine max stars dynamically.

**LANGUAGE**: XML

**CODE**:
```xml
<Record Type="UI.ReferenceFacet">
    <PropertyValue Property="Target" AnnotationPath="to_ProductRating/@UI.DataPoint#NonAggregated"/
</Record>
<!-- non aggregated rating -->
<Annotation Term="UI.DataPoint" Qualifier="NonAggregated">
   <Record>
      <PropertyValue Property="Title" String="{@i18n>@ProductUserRating}"/>
      <PropertyValue Property="Description" String="@i18n>@MyRating}"/>
      <PropertyValue Property="Value" Path="Rating"/>
      <PropertyValue Property="TargetValue" Path="MaxRating"/>
      <PropertyValue Property="Visualization" EnumMember="UI.VisualizationType/Rating"/>
   </Record>
</Annotation> 
```

**LANGUAGE**: ABAP CDS

**CODE**:
```
@UI.facet: [
 {
  id:           'rating',
  type:         #DATAPOINT_REFERENCE,
  targetElement: '_ProductRating',
  targetQualifier: 'NonAggregated'
 }
]
product;

@UI.dataPoint: {
  title: '{@i18n>@ProductUserRating}',
  description: '@i18n>@MyRating}',
  targetValueElement: 'MaxRating',
  visualization: #RATING
}
Rating;
```

**LANGUAGE**: CAP CDS

**CODE**:
```
UI.Facets : {
    $Type : 'UI.ReferenceFacet',
    Target : 'to_ProductRating/@UI.DataPoint#NonAggregated'
},

UI.DataPoint #NonAggregated : {
    Title : '{@i18n>@ProductUserRating}',
    Description : '@i18n>@MyRating}',
    Value : Rating,
    TargetValue : MaxRating,
    Visualization : #Rating
}
```

**STEP**: 4 — Set maximum number of stars (TargetValue)

**DESCRIPTION**: Configure TargetValue to set the maximum number of stars (TargetValue). You can set the max statically in the annotation (Int) or dynamically via Path to a backend field (Path/targetValueElement).

**LANGUAGE**: XML

**CODE**:
```xml
<!-- static max stars -->
<PropertyValue Property="TargetValue" Int="3" />
```

**LANGUAGE**: XML

**CODE**:
```xml
<!-- dynamic max stars from backend -->
<PropertyValue Property="TargetValue" Path="MaxRating"/>
```

**STEP**: 5 — Change subtitle text (SampleSize and Description)

**DESCRIPTION**: For aggregated ratings, set SampleSize on UI.DataPoint (path to count) and annotate that SampleSize with Common.Label to customize the text (e.g., "139 user reviews"); otherwise default text "ratings" is used. For non-aggregated ratings, set Description on UI.DataPoint to render the subtitle text.

**LANGUAGE**: XML

**CODE**:
```xml
<PropertyValue Property="SampleSize" Path="ReviewCount" />
<!-- Annotate SampleSize with Common.Label to change the trailing text (e.g., 'user reviews') -->
```

**LANGUAGE**: XML

**CODE**:
```xml
<PropertyValue Property="Description" String="@i18n>@MyRating}"/>
```

**STEP**: 6 — Edit mode behavior

**DESCRIPTION**: In Edit mode the rating indicator moves into the header facet and displays title only; aggregated ratings show the number of ratings in parentheses after the stars. The rating control stays read-only in Edit mode.

**LANGUAGE**: PlainText

**CODE**:
```text
Edit mode: rating indicator moves into header facet, shows title only; aggregated ratings show sample size in parentheses; control remains read-only.
```

**STEP**: 7 — Additional features: SAP Fiori Elements for OData V4 (CDS DataPoint example)

**DESCRIPTION**: Example DataPoint CDS annotation for OData V4 that sets Value, TargetValue, Title and Visualization = #Rating.

**LANGUAGE**: CDS

**CODE**:
```xml
@UI: DataPoint #Rating               : {
        Value         : Rating,
        TargetValue   : 5.0,
        Title         : 'Rating',
        Visualization : #Rating
    }
```
--------------------------------

**TITLE**: Read Before Extending a Generated SAP Fiori Elements App (Actionable Guide for Extension Coding)

**INTRODUCTION**: Brief, code-focused guidance for writing safe SAP Fiori elements extensions. Describes which APIs and models you may access, what to avoid, and small code snippets showing common, allowed actions inside view/controller extensions. Use this as a checklist and code reference when generating extension code.

**TAGS**: fiori-elements, extensionAPI, SAPUI5, OData, models, best-practices, manifest.json

STEP: 1 — High-level rules and caution

DESCRIPTION: Follow these rules before creating or generating an extension. Always prefer manifest settings or annotations before writing extension code. Use only the official SAP Fiori elements extensionAPI when interacting with template-provided controls and system logic. Once you add extension code, display and runtime behavior are the app's responsibility.

LANGUAGE: Plain

CODE:
```text
Caution:
- Use app extensions only when required; prefer manifest settings/annotations.
- When interacting with template/provided controls or template system logic, use the official extensionAPI only.
- Do NOT access or manipulate internal template objects (controls, models, properties) outside the scope of your view/controller extension.
```

STEP: 2 — Use the standard SAPUI5 API only within your extension scope

DESCRIPTION: You may use the SAPUI5 API in extension views/controllers, but limit access to UI elements you defined within your view extension. Access these elements by their IDs (this.byId or this.getView().byId). Do not access controls created by the template or other extensions — this risks breakage in future SAPUI5 versions.

LANGUAGE: JavaScript

CODE:
```javascript
// Allowed: access element defined in your extension view by ID
const oMyButton = this.byId("myExtensionButton");
if (oMyButton) {
  oMyButton.setVisible(false);
}

// Forbidden: DO NOT access template-only controls
// e.g., avoid calls like this.byId("templateControlId") if control is not part of your extension view
```

STEP: 3 — Accessing models (general)

DESCRIPTION: The generated app has multiple models. You can use the default OData model for data binding and the named "ui" model for read-only UI state. Never access or modify the SAP Fiori elements private model. If you attach your own models, use a unique namespace name and attach them scoped to your extension view unless absolutely necessary to use a higher level.

LANGUAGE: JavaScript

CODE:
```javascript
// Get default OData model (as defined in manifest.json)
const oODataModel = this.getView().getModel();            // default model

// Get named UI model (read-only)
const oUIModel = this.getView().getModel("ui");
const bEnabled = oUIModel.getProperty("/enabled");       // allowed (read)
 // DO NOT call oUIModel.setProperty("/enabled", false)  // forbidden (no writes)

// Attach an app-specific JSON model scoped to your extension view
const oMyJsonModel = new sap.ui.model.json.JSONModel({ foo: "bar" });
this.getView().setModel(oMyJsonModel, "com.mycompany.myModel"); // use your namespace

// Access model only within extension scope; be careful with side effects on default model
```

STEP: 4 — Rules about SAP Fiori Elements private model and application-specific models

DESCRIPTION: The SAP Fiori Elements private/internal model is forbidden to access. If you must create models, attach them to UI elements exclusive to your extension or, if attached higher, use a namespaced model name to prevent collisions.

LANGUAGE: Plain

CODE:
```text
Rules:
- Forbidden: Access any SAP Fiori Elements private model (do not call getModel() with unknown names).
- Allowed: Use default OData model and "ui" model (read-only).
- Allowed: Create JSON models for your extension and attach with a unique namespaced name:
    this.getView().setModel(new JSONModel(...), "com.mycompany.myModel");
- Prefer scoping custom models to the extension view instead of the global view.
```

STEP: 5 — OData V2: interacting with template-provided functions and function imports

DESCRIPTION: For OData V2, always use the extensionAPI to interact with template-provided functions or to invoke function imports to avoid interfering with template lifecycle and side effects. If your extension only touches controls generated within the extension, extensionAPI may not be required.

LANGUAGE: JavaScript

CODE:
```javascript
// Example: use extensionAPI to invoke actions/functionality provided by the template
// NOTE: extensionAPI is the official interface; obtain it from the controller context when available.
// Pseudocode (actual signature depends on runtime extensionAPI implementation):
if (this.extensionAPI && typeof this.extensionAPI.invokeActions === "function") {
  // Pass action description(s) according to the extensionAPI contract
  this.extensionAPI.invokeActions(/* actionParameters */)
    .then(function (result) { /* handle success */ })
    .catch(function (err) { /* handle error */ });
} else {
  // Fallback: do NOT call OData function imports directly on the template model
}
```

STEP: 6 — Avoid using internal or freestyle-only services

DESCRIPTION: Do not use services intended for freestyle SAPUI5 apps or internal template usage. Accessing these services can cause side effects or break compatibility.

LANGUAGE: Plain

CODE:
```text
Do NOT use:
- sap.ui.generic.app
- sap.fe.navigation
- sap.ui.generic.template (directly)

Reason:
- These namespaces are for freestyle apps or internal template code. Using them in extensions can create unwanted side effects or break template behavior.
```

STEP: 7 — UI model properties (for code checks and read usage)

DESCRIPTION: Read these UI model properties to adapt extension UI state or logic. Do not change these properties programmatically because the template controls when they are set/reset.

LANGUAGE: JavaScript

CODE:
```javascript
// OData V2 UI model Boolean properties (read-only)
const oUIModel = this.getView().getModel("ui");
const bEnabled = oUIModel.getProperty("/enabled");    // whether active UI elements should be enabled
const bEditable = oUIModel.getProperty("/editable");  // whether inputs are editable
const bCreateMode = oUIModel.getProperty("/createMode"); // true when creating a new entity

// OData V4 UI model properties
const sEditMode = oUIModel.getProperty("/editMode");  // "Editable" or "Display"
```

STEP: 8 — File references and manifest context

DESCRIPTION: The OData default model is the model defined in your app's manifest.json. When generating or modifying extension code, ensure you reference the correct model name and manifest configuration.

LANGUAGE: Plain

CODE:
```text
File: manifest.json
- Default OData model is configured in the manifest under "sap.app"/"dataSources" and "sap.ui5"/"models".
- Access this default model in extension controllers via:
    const oODataModel = this.getView().getModel();    // default
- Named models (e.g., "ui") are accessed by name:
    const oUIModel = this.getView().getModel("ui");
```

STEP: 9 — Summary checklist for code generation

DESCRIPTION: Quick checklist to enforce via code generation templates.

LANGUAGE: Plain

CODE:
```text
Checklist:
- Prefer manifest settings/annotations over extensions.
- Use extensionAPI for template/system interactions (invokeActions for function imports).
- Access only controls you created in your extension view (use this.byId or this.getView().byId).
- Use default OData model and "ui" model only as allowed (read-only for "ui").
- Never access SAP Fiori Elements private model.
- Avoid sap.ui.generic.app, sap.fe.navigation, sap.ui.generic.template.
- Scope custom JSON models to your extension view and use a namespaced model name.
```
--------------------------------

**TITLE**: Rebind an Object Page Table on Every Instance Change (OData V2)

**INTRODUCTION**: Rebind a table on an SAP Fiori elements object page each time the page instance changes (for example switching between records or switching modes). Applicable only for SAP Fiori elements with OData V2. The solution uses the object page section loadingBehavior settings in the manifest and the extension API events (attachPageDataLoaded, rebind, onBeforeRebindTableExtension) to trigger a rebind for a specific table ID.

**TAGS**: fiori-elements-framework, sapui5, odata-v2, object-page, table, manifest, extension-api, rebind

STEP: 1 — Confirm applicability and behavior

DESCRIPTION: This approach applies only to SAP Fiori elements for OData V2. Note: by default a table in an object page binds only the first time; switching instances triggers refresh but not rebind. To force rebinding on each instance change, configure the manifest and use the extension API to call rebind when page data is loaded.

LANGUAGE: Text

CODE:
```text
Applicable only to SAP Fiori elements for OData V2.
```

STEP: 2 — Edit the object page manifest: set loadingBehavior for the subsection containing the table

DESCRIPTION: In the manifest file, identify the subsection ID that contains the table (for example subsection1). Under the object page section settings for that subsection add the loadingBehavior properties. It is mandatory to set "waitForHeaderData" to true (prevents duplicate batch calls). Optionally set "waitForViewportEnter" true/false based on preference. These settings ensure the header data is loaded before the subsection is initialized and allow controlled rebinds.

LANGUAGE: JSON

CODE:
```json
{
  "sap.ui.generic.app": {
    "pages": {
      "ObjectPage|<EntitySet>": {
        "component": {
          "settings": {
            "sections": {
              "subsection1": {
                "loadingBehavior": {
                  "waitForHeaderData": true,
                  "waitForViewportEnter": true
                }
              }
            }
          }
        }
      }
    }
  }
}
```

STEP: 3 — Attach pageDataLoaded and call rebind in your extension controller (onInit + handler)

DESCRIPTION: In your controller extension, attach the pageDataLoaded event in onInit so your handler runs whenever page data loads (including instance changes). In the handler use the extensionAPI.rebind(tableId) to rebind the specific table. Keep the table ID exact (use the full control ID). The sample controller below demonstrates attaching attachPageDataLoaded, the rebind call, and an onBeforeRebindTableExtension hook to add filters or sorts only for the specific table.

LANGUAGE: JavaScript

CODE:
```javascript
/* Controller Implementation (CI) for the Sales Order object page */
sap.ui.define(["sap/ui/base/Object", "sap/m/MessageBox", "sap/ui/model/Filter", "sap/ui/model/FilterOperator"
], function(BaseObject, MessageBox, Filter, FilterOperator) {
    "use strict";

    var salesOrderItemTableId = "STTASOWD20::sap.suite.ui.generic.template.ObjectPage.view.Details::C_STTA_SalesOrder_WD_20--SalesOrderItemsID::Table";

    return BaseObject.extend("STTASOWD20.ext.controller.CISalesOrder", {
        
        onInit: function(oController){
            this.oController = oController;
            // Example to show attachpageDataLoaded event consumption.
             this.oController.extensionAPI.attachPageDataLoaded(this.rebindSalesorderItemTable.bind(this));

        },
        rebindSalesorderItemTable: function() {
            // Example to show how to rebind a particular table, each time when binding context changes. For example switching from
            // display to edit or edit to display mode or whenever changing the object page instance.
            // To achieve this efficiently first of all go to the manifest and do following setting under "sections" of your object page
            // "loadingBehavior":{
            //  "waitForHeaderData":true,
            //  "waitForViewportEnter":true
            // }
            // then attach a page data loaded event as we have registered above in on init
            // oApi.attachPageDataLoaded(this.rebindSalesorderItemTable.bind(this));
            // Now below lines will do the rest of the job
            // rebind the table having specific id.
            this.oController.extensionAPI.rebind(salesOrderItemTableId);
        },
        onBeforeRebindTableExtension: function (oEvent) {
            // Filter a specific table based on table id, because this method is called before
            // rebinding of every table.
            if(oEvent.getSource().getId()=== salesOrderItemTableId) {
                // You can add additional filters, remove some, add sort order etc here in the following way

                // var filter = new Filter("so_item_pos", FilterOperator.GE, "1");
                // oEvent.mParameters.bindingParams.filters.push(filter);
            }
            
        },

    });
});
```

STEP: 4 — Verify behavior and optional filtering/adaptation before rebind

DESCRIPTION: With the manifest loadingBehavior set and attachPageDataLoaded registered, the table will rebind every time the object page instance changes. Use onBeforeRebindTableExtension to programmatically add/remove filters, sorts, or other parameters for the specific table before the rebind occurs.

LANGUAGE: JavaScript

CODE:
```javascript
// Example rebind invocation (already in handler above)
this.oController.extensionAPI.rebind(salesOrderItemTableId);

// Example pre-rebind modification inside onBeforeRebindTableExtension (already shown in sample):
// var filter = new Filter("so_item_pos", FilterOperator.GE, "1");
// oEvent.mParameters.bindingParams.filters.push(filter);
```

STEP: 5 — Reference for loading behavior settings

DESCRIPTION: For more details about the manifest loadingBehavior settings for object page subsections, consult the related documentation.

LANGUAGE: Text

CODE:
```text
See: Defining the Loading Behavior of Object Page Subsections (defining-the-loading-behavior-of-object-page-subsections-6b84249.md)
```
--------------------------------

**TITLE**: Reducing Entity Sets in Metadata Using a Feature Toggle

**INTRODUCTION**: Use a backend feature toggle to exclude individual CDS entity sets from the OData V2 service metadata so that Fiori elements apps (list report tabs, object page sections) automatically hide corresponding UI parts when the toggle is deactivated.

**TAGS**: fiori-elements-framework, sap, odata-v2, cds, feature-toggle, metadata, entity-sets

**STEP**: 1 — Create the feature toggle in the backend

**DESCRIPTION**: Create a backend feature toggle (feature flag) that can be set to Activated or Deactivated. Choose a concise, unique name (example: Toggle_Name). The toggle state controls whether an annotated CDS entity is included in the generated application metadata. Ensure the toggle is available to the system where the CDS view is defined.

**LANGUAGE**: N/A

**CODE**:
```text
# Example toggle name (create in backend tooling):
Toggle_Name
```

**STEP**: 2 — Annotate the CDS view with the feature toggle

**DESCRIPTION**: In the CDS view that defines the entity set you want to hide/show, add the feature annotation. Keep the exact annotation token intact. When the feature toggle is set to Deactivated, the annotated entity will be removed from the generated application metadata; when Activated, the entity will be present.

Place the annotation at the CDS view level (above the view definition) so the service generator excludes the entire entity set when the feature is deactivated.

**LANGUAGE**: CDS

**CODE**:
```cds
@feature:'Toggle_Name'
```

**STEP**: 3 — Example CDS view with the annotation (contextual sample)

**DESCRIPTION**: Example showing where to place the feature annotation within a typical CDS view definition. Keep the @feature annotation exact (as shown in STEP 2). Replace view names and fields with your actual model.

**LANGUAGE**: CDS

**CODE**:
```cds
@AbapCatalog.sqlViewName: 'ZMYVIEW'
@EndUserText.label: 'My Entity View'
@feature:'Toggle_Name'
define view Z_I_MyEntity
  as select from ztable_my_entity
{
  key id           as ID,
      name         as Name,
      created_at   as CreatedAt
}
```

**STEP**: 4 — Expected effect on application metadata and UI

**DESCRIPTION**: After the feature toggle state is evaluated during service generation:
- If the toggle is Activated: the entity set remains in the OData V2 service metadata; list report will show tabs for related entity sets; object page will show corresponding sections.
- If the toggle is Deactivated: the annotated entity set is removed from the OData V2 service metadata; list report tabs for that entity are removed; object page sections for that entity are removed.

Applicable only to SAP Fiori elements for OData V2. If you use multiple related entities, deactivating their toggles removes the corresponding tabs/sections from the UI.

**LANGUAGE**: N/A

**CODE**:
```text
# Behavior summary:
Toggle Activated   -> Entity present in metadata -> UI shows tabs/sections
Toggle Deactivated -> Entity removed from metadata -> UI hides tabs/sections
```

**STEP**: 5 — Visual references (image file paths)

**DESCRIPTION**: Use these image assets as visual verification of behavior in example applications.

**LANGUAGE**: N/A

**CODE**:
```text
# Images demonstrating behavior
images/OP_with_all_tabs_when_feature_toggle_is_active_0ff5d08.png
images/OP_with_only_one_tab_when_other_related_entities_are_reduced_by_deactivating_the_toggle_42737b9.png
```
--------------------------------

**TITLE**: Refresh API — Use refreshBinding in Component.js for Analytical List Page (ALP)

**INTRODUCTION**: Use the Component.js API function refreshBinding to reload header, filter, and content areas of an Analytical List Page (ALP) without a browser refresh. Call refreshBinding from controller extensions or any place with access to the component instance to re-read OData V2 data while retaining user filter and personalization state.

**TAGS**: fiori-elements-framework, ALP, OData V2, refreshBinding, Component.js, controller-extension, refresh

**STEP**: 1 — When to use refreshBinding

**DESCRIPTION**: Use refreshBinding when you need to reload ALP data (header, filter, content) without a full browser refresh. Applicable only for SAP Fiori elements using OData V2. Filter selections (compact or visual filters) and personalization settings (sorting, grouping, etc.) are retained after the refresh.

**LANGUAGE**: Text

**CODE**:
```Text
- Applicable only to SAP Fiori elements for OData V2.
- Reloads data for header, filter, and content area components configured in ALP.
- Retains filter selections and personalization settings (sorting, grouping).
```

**STEP**: 2 — How to call refreshBinding from a controller extension

**DESCRIPTION**: From any controller extension method (for example, a button press handler), obtain the component instance via this.getOwnerComponent() and call refreshBinding(). The snippet below shows the exact call pattern to invoke the API.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
//By calling refreshBinding function directly .

       var component = this.getOwnerComponent();

       component.refreshBinding();
```

**STEP**: 3 — Important behavior and caveats

**DESCRIPTION**: Understand user-visible effects and limitations when using refreshBinding:
- Main chart selection is lost during the refresh.
- If the ALP uses AutoHide for filter mode, losing the main chart selection can change the table data after refresh.
- Selections in the filter bar (compact or visual filter) and personalization settings (sorting, grouping, etc.) are preserved.

**LANGUAGE**: Text

**CODE**:
```Text
- Main chart selection is lost during refresh.
- This loss may change table data when AutoHide is enabled for filter mode.
- Filter selections and personalization settings are retained.
```

**STEP**: 4 — Related documentation

**DESCRIPTION**: Link to advanced ALP extension examples and configuration guidance.

**LANGUAGE**: Text

**CODE**:
```Text
Related Information:
- Configuring Analytical List Page App Extensions:
  config/configuring-analytical-list-page-app-extensions-9504fb4.md
  (This section provides advanced configurations and extensions for your application.)
```
--------------------------------

**TITLE**: Refresh Dataset for Back Navigation When sap-keep-alive Is True

**INTRODUCTION**: When sap-keep-alive=true, an app suspended by navigating away does not automatically refresh when the user returns. Implement lifecycle extension hooks to run custom refresh logic when the app is suspended and when it is restored (back navigation).

**TAGS**: fiori-elements, sap-keep-alive, onLeaveAppExtension, onSuspend, onRestore, OData V2, OData V4, UI5, ControllerExtension

**STEP**: OData V2 — Use onLeaveAppExtension

**DESCRIPTION**: Implement onLeaveAppExtension in your controller extension to provide a reactivation function that runs when the app is restored. Place this method in the controller extension (for example, the Object Page controller extension that exposes controllerFrameworkExtensions). Use the returned function to perform any dataset refresh or UI re-initialization. See the API reference for sap.suite.ui.generic.template.ObjectPage.controllerFrameworkExtensions for details: https://ui5.sap.com/#/api/sap.suite.ui.generic.template.ObjectPage.controllerFrameworkExtensions

**LANGUAGE**: JavaScript

**CODE**:
```javascript
onLeaveAppExtension: function (bIsDestroyed) {
	Log.info("onLeaveAppExtension called!");
	var fnReactivate = function () {
		sap.m.MessageToast("onLeaveAppExtension is called here").show();
	};
	return fnReactivate;
}
```

**STEP**: OData V4 — Use onSuspend and onRestore

**DESCRIPTION**: For Fiori elements OData V4 apps running in sap-keep-alive mode, implement onSuspend and onRestore in the viewState override of a ControllerExtension. onSuspend runs when the app is suspended (external navigation); onRestore runs when the app is restored (e.g., back navigation). Add refresh logic in onRestore (or store/restore state between suspend/restore) to update specific datasets or UI state.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
return ControllerExtension.extend("SalesOrder.ext.LRExtend", {
    // this section allows to extend lifecycle hooks or override public methods of the base controller
    override: {
        viewState: {
            onSuspend: function() {
                // Applications can add their custom code here
            },
            onRestore: function() {
                // Applications can add their custom code here
            }
        }
    }  
}
```
--------------------------------

**TITLE**: Refresh Entity Sets in sap-keep-alive Mode (Fiori Elements)

**INTRODUCTION**: Configure which OData entity sets are refreshed when a SAP Fiori Elements app running with sap-keep-alive is reactivated (for example, after navigating back from an external application). Use manifest.json settings or extension APIs to override defaults, include/exclude dependents, and control behavior per outbound intent.

**TAGS**: fiori-elements-framework, sap-keep-alive, manifest.json, OData V2, OData V4, refresh, entitySets, crossNavigation, externalNavigationSettings, extensionAPI

STEP: Entity set refresh modes

DESCRIPTION: Use these tokens to specify how an entity set is refreshed when the app is restored. Use in manifest configuration blocks shown later.

LANGUAGE: JSON

CODE:
```json
{
  "EntitySet1": "self",
  "EntitySet2": "includingDependents"
}
```

- "self": refresh only the specified entity set.
- "includingDependents": refresh the specified entity set and any UI-bound dependent navigation properties (child entity sets that have UI controls bound to them). Note: dependents are refreshed only if a UI control is bound to them.

STEP: Source application behavior summary

DESCRIPTION: Action-oriented summary of default refresh behavior and where to override it.

LANGUAGE: Text

CODE:
```
- External Create Navigation:
  * Default: the entity set of the table that triggered navigation is refreshed on return.
  * Cannot be overridden in Fiori Elements OData V2.

- External Chevron Navigation:
  * Default: the entity set of the table that triggered navigation is refreshed on return.
  * Can be switched off or overridden in manifest.json.

- Other External Navigation (including navigation via extension APIs):
  * Default: no refresh.
  * Override: configure refreshStrategyOnAppRestore in manifest.json for specific outbound targets or defaultOutboundSettings.

- Navigation Using Extensions (navigateExternal):
  * The outbound target passed to navigateExternal determines which entitySets configured under refreshStrategyOnAppRestore are considered when the app is restored.
```

STEP: OData V2 — Override chevron/default refresh in manifest.json (per outbound target)

DESCRIPTION: Example manifest.json snippet that overrides refresh behavior for a specific outbound target on page-level navigation configuration. Place this under sap.ui.generic.app.pages for the relevant ListReport/ObjectPage page definition.

LANGUAGE: JSON

CODE:
```json
"sap.app": {
	...
	"crossNavigation": {
		"outbounds": {
			"<OutboundTarget>": {
				"semanticObject": "<SemanticObject>",
				"action": "<Action>"
			}
		}
	}
}

....
....

"sap.ui.generic.app": {
	...
	"pages": {
			"ListReport|<ListReportEntitySet>": {
				...
				"pages": {
					"ObjectPage|<ObjectPageEntitySet>": {
						...
						"navigation": {
							"display": {
								"path": "sap.apps.crossNavigation.outbounds",
								"target": "<OutboundTarget>",
								"refreshStrategyOnAppRestore": {
									"entitySets": {			
										"<EntitySetToRefresh>": "<self/includingDependents>",
										"<AnotherEntitySetToRefresh>": "<self/includingDependents>"
									}
								}
							}
						}
					}
				}
			}
		}
}
```

STEP: OData V2 — Default and per-outbound externalNavigationSettings

DESCRIPTION: Configure default outbound refresh strategies and per-outbound overrides under sap.ui.generic.app.settings.externalNavigationSettings. Use defaultOutboundSettings for fallback and outbounds for specific outbound targets.

LANGUAGE: JSON

CODE:
```json
"sap.app": {
   ...
   "crossNavigation": {
      "outbounds": {
         "<OutboundTarget1>": {
            "semanticObject": "<SemanticObject1>",
            "action": "<Action1>"
         },
         "<OutboundTarget2>": {
            "semanticObject": "<SemanticObject2>",
            "action": "<Action2>"
         }
      }
   }
}

....
....

"sap.ui.generic.app": {
      "_version": "1.3.0",
      "settings": {
         "externalNavigationSettings": {
            "defaultOutboundSettings": {
               "refreshStrategyOnAppRestore": {
                  "entitySets": {
                     "<EntitySetToRefresh>": "<self/includingDependents>",
                     "<AnotherEntitySetToRefresh>": "<self/includingDependents>"
                  }
               }
            },
            "outbounds": {
               "<OutboundTarget1>": {
                  "refreshStrategyOnAppRestore": {
                     "entitySets": {
                        "<EntitySetToRefresh>": "<self/includingDependents>",
                        "<AnotherEntitySetToRefresh>": "<self/includingDependents>"
                     }
                  }
               },
               "<OutboundTarget2>": {
                  "refreshStrategyOnAppRestore": {
                     "entitySets": {
                        "<EntitySetToRefresh>": "<self/includingDependents>",
                        "<AnotherEntitySetToRefresh>": "<self/includingDependents>"
                     }
                  }
               }
            }
         }
      }
      ...
      ...
   }
```

STEP: OData V2 — Navigate using extension API (controller extension)

DESCRIPTION: To trigger navigation and apply outbound refresh strategy, call navigationController.navigateExternal with the outbound target from an extension. The manifest must include the matching outbound entry under sap.app.crossNavigation.outbounds and/or sap.ui.generic.app.settings.externalNavigationSettings.outbounds.

LANGUAGE: JavaScript

CODE:
```javascript
onListNavigationExtension: function (oEvent) {
	var oNavigationController = this.extensionAPI.getNavigationController();
	oNavigationController.navigateExternal("<OutboundTarget>");
	return true;
}
```

STEP: OData V2 — Manifest sample for extension-driven outbound (manifest.json)

DESCRIPTION: Example manifest portion for an outbound target used by navigateExternal (must align with externalNavigationSettings if refresh strategies are required).

LANGUAGE: JSON

CODE:
```json
"sap.app": {
   ...
   "crossNavigation": {
      "outbounds": {
         "<OutboundTarget>": {
            "semanticObject": "<SemanticObject>",
            "action": "<Action>"
         }
      }
   }
}

....
....

"sap.ui.generic.app": {
      "settings": {
         "externalNavigationSettings": {
            "outbounds": {
               "<OutboundTarget>": {
                  "refreshStrategyOnAppRestore": {
                     "entitySets": {
                        "<EntitySetToRefresh>": "<self/includingDependents>",
                        "<AnotherEntitySetToRefresh>": "<self/includingDependents>"
                     }
                  }
               }
            }
         }
    }
      ...
      ...
   }
```

STEP: OData V2 — Reuse component: setRefreshBehaviour usage (stStart example)

DESCRIPTION: In a reuse component stStart function, set a before-navigation callback to the navigation controller’s setRefreshBehaviour so that returning from the external target refreshes the specified entity set ("EPMSalesOrder" in the example).

LANGUAGE: JavaScript

CODE:
```javascript
stStart: function(oModel, oBindingContext, oExtensionAPI) {
            var oComponentModel = this.getComponentModel();
            var oBinding = oComponentModel.bindProperty("/state");
            oBinding.attachChange(function(){
                oExtensionAPI.onCustomStateChange();
                this.setMessage();
            }.bind(this));
            this.adaptToBindingContext(oBindingContext);
            var oNavPopOverLink = this.getRootControl().getContent()[0].getContent()[7];
            var oNavigationController = oExtensionAPI.getNavigationController();
            oNavPopOverLink.setBeforeNavigationCallback(oNavigationController.setRefreshBehaviour.bind(null,"EPMSalesOrder"));
        },
```

STEP: OData V4 — Page-level refreshStrategyOnAppRestore manifest example

DESCRIPTION: V4 supports per-page defaultBehavior and per-intent overrides. The most specific match is used (semanticObject-action, then semanticObject-only, then page default). Place these under routing.targets.[Target].options.settings.refreshStrategyOnAppRestore.

LANGUAGE: JSON

CODE:
```json
{
    "sap.ui5": {
        "routing": {
            "targets": {
                "SalesOrderManageList": {
                    "type": "Component",
                    "id": "SalesOrderManageList",
                    "name": "sap.fe.templates.ListReport",
                    "options": {
                        "settings": {
                            ...
                            "refreshStrategyOnAppRestore": {
                                "defaultBehavior": {
                                    "SalesOrderManage": "self"
                                }
                            }
                        }
                    }
                },
                "SalesOrderManageObjectPage": {
                    "options": {
                        "settings": {
                            ...
                            "refreshStrategyOnAppRestore": {
                                "intents": {
                                    "v4Freestyle": { // This block is considered if the block above is NOT matched but the external navigation before we landed on this page only matches the Semantic Object specified here and NOT the action part
                                        "SalesOrderItem": "includingDependents" 
                                    },
                                    "v4Freestyle-Inbound": { // This block is considered if the external navigation before we landed on this page matches exactly the Semantic Object-Action specified here
                                        "SalesOrderItem": "includingDependents"
                                    }
                                },
                                "defaultBehavior": { // This block is used if the external navigation before we landed on this page does NOT match the above blocks. This can happen for navigations where the Semantic Object is different from what is specified above.
                                    "SalesOrderManage/_Item": "includingDependents"
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}
```

STEP: OData V4 — Switch off default chevron refresh for specific intents

DESCRIPTION: Use an empty object for an intent to prevent any refresh for that semantic-object (or semantic-object-action) when returned to via chevron/internal navigation for that intent. Note: this does not affect CREATE cases (create always triggers refresh for the table entity set).

LANGUAGE: JSON

CODE:
```json
"refreshStrategyOnAppRestore": {
    "intents": {
        "v4Freestyle-Inbound": {
            "SalesOrderItem": "includingDependents" // Due to this override, only SalesOrderItem and dependents are refreshed for V4FreeStyle-Inbound So-Action external navigation
        },
        "v4Freestyle": {} // Due to this override, for all other intents from V4FreeStyle SO other than Inbound, no refresh is done (including when going to such a target through chevron navigation which normally triggers a default refresh of the table)
    }  
}
```

STEP: Important implementation notes and gotchas

DESCRIPTION: Keep these actionable considerations when configuring refresh strategies.

LANGUAGE: Text

CODE:
```
- The refreshStrategyOnAppRestore only affects data refresh when returning from an external target while sap-keep-alive is active. Internal forward navigation (e.g., from a list to a detail page) always triggers a data request to the backend.

- Back navigation within the app uses the refresh strategy configured for the page that initiated the external navigation.

- For containment/parameterized entities, specify the full path starting with a forward slash ("/Customer/Set") when you need the full contextPath style, consistent with "contextPath" manifest usage.

- For regular non-containment entity sets do NOT start with a slash (e.g., "SalesOrderItem").

- If the backend service is NOT ETag-enabled and the List Report table is configured to be refreshed in Flexible Column Layout mode, the refresh may trigger for all of the table's dependent entity sets. To avoid unwanted refreshes, enable ETag on the backend service.

- "includingDependents" only refreshes a child navigation entity if a UI control is bound to that child entity.
```

STEP: Related reference

DESCRIPTION: Use this link for a custom refresh implementation when sap-keep-alive is true and automatic refresh is not sufficient.

LANGUAGE: Markdown/URL

CODE:
```
Refresh Dataset for Back Navigation when sap-keep-alive is Set to True:
refresh-dataset-for-back-navigation-when-sap-keep-alive-is-set-to-true-f1c2704.md
```
--------------------------------

**TITLE**: Configure Entity Set Refresh on App Restore (sap-keep-alive) for Overview Pages

**INTRODUCTION**: Use this configuration to refresh specific OData entity sets in Overview Pages (sap.ovp) when a view is restored from the SAP Fiori launchpad view cache (sap-keep-alive). This preserves view state for performance but ensures selected entity sets are refreshed when the user returns to the source application.

**TAGS**: fiori-elements-framework, sap-keep-alive, sap.ovp, manifest.json, overview-pages, refresh, entity-sets

**STEP**: 1 — Understand behavior and purpose

**DESCRIPTION**: When SAP Fiori launchpad uses sap-keep-alive, views are cached and not destroyed on navigation. To ensure data reflects changes made in other apps while the view was cached, configure which entity sets should be refreshed when the view is restored. This is done in the application's manifest.json under the sap.ovp section using refreshStrategyOnAppRestore.

**LANGUAGE**: text

**CODE**:
```text
Behavior:
- sap-keep-alive preserves the view and its state in the launchpad view cache.
- On returning to the cached (restored) view, the framework can refresh configured entity sets so cards and lists show updated data.
- Configure the entity sets to refresh in manifest.json under sap.ovp.refreshStrategyOnAppRestore.entitySets.
```

**STEP**: 2 — Add refresh configuration to manifest.json

**DESCRIPTION**: Edit the application's manifest.json. Under the "sap.ovp" section, add a "refreshStrategyOnAppRestore" object with an "entitySets" map. Specify the entity set name as the key and the value "self" to indicate that this entity set should be refreshed automatically when the view is restored.

- File path: manifest.json
- Place the property in the root sap.ovp configuration for the Overview Pages application.

**LANGUAGE**: JSON

**CODE**:
```json
"sap.ovp": {
        "globalFilterModel": "salesOrder",
        "globalFilterEntityType": "GlobalFilters",//Represents the entity used as a global filter in the smart filter bar control. Deprecated since SAPUI5 1.54.
        "globalFilterEntitySet": "ZFilterEntitySet", //Represents the entity set used as a global filter in the smart filter bar control. Available from SAPUI5 1.54 onwards.
        "smartVariantRequired": true,
        "enableLiveFilter": true,
        "containerLayout": "resizable",
        ...
        "refreshStrategyOnAppRestore": {
            "entitySets": {
                "<entitySetToRefresh>": "self"
            }
        },
        ...
        "cards": {
            ...
        }
}
```

**STEP**: 3 — Implementation notes and validation

**DESCRIPTION**: 
- Replace "<entitySetToRefresh>" with the exact name of the OData entity set you want refreshed (e.g., "SalesOrders").
- Use "self" as the value to indicate automatic refresh of that entity set on app restore.
- Keep other sap.ovp settings intact (cards, containerLayout, etc.).
- Validate the manifest.json (comments in the example are illustrative; remove or convert to proper JSON format if your tooling enforces strict JSON).
- Test by: navigating from the source app to a target app that modifies data, then return to the source app. Confirm the configured entity set's card data updates on restore.

**LANGUAGE**: text

**CODE**:
```text
Validation checklist:
- manifest.json contains sap.ovp.refreshStrategyOnAppRestore.entitySets with correct entity set names.
- Values use "self" to enable refresh on app restore.
- Remove or adapt inline comments if your build requires strict JSON compliance.
- Test in Fiori launchpad with sap-keep-alive enabled: modify data in another app, return to verify refresh.
```
--------------------------------

**TITLE**: Replace Standard Save in Mass Edit Dialog (Fiori Elements — OData V2 & V4)

**INTRODUCTION**: Enable and implement custom save logic for the mass edit dialog. Implement the provided extension functions in the list report or controller extension to replace or augment the framework’s default mass-edit save. The framework will perform cleanup (e.g., close the dialog) after the extension logic completes. For OData V4, returning true from the custom handler prevents the framework default save.

**TAGS**: fiori-elements, mass-edit, odata-v2, odata-v4, controller-extension, list-report, extensionAPI, custom-save

**STEP**: 1 — Behavior and placement
**DESCRIPTION**: Implement the custom save function in the list report or controller extension. If no extension is defined, the framework executes its default save. For OData V4, returning true from the extension prevents default save execution. The framework still performs cleanup after extension logic completes.
**LANGUAGE**: Text
**CODE**:
```text
Placement: Implement in the list report extension or controller extension.

Behavior summary:
- OData V2: Implement beforeMultiEditSaveExtension(aContextsToBeUpdated). Framework executes default behavior if not implemented.
- OData V4: Implement customMassEditSave(aParameters). If this returns true, framework default save is not executed.
- Cleanup (e.g., closing the dialog) is performed by the framework after extension logic finishes.
```

**STEP**: 2 — Implementation for OData V2
**DESCRIPTION**: Add beforeMultiEditSaveExtension to the list report or controller extension. The handler receives aContextsToBeUpdated: an array of { sContextPath, oUpdateData }. Use this.extensionAPI.invokeActions (or other APIs) to perform the save (for example, call a function import). Return a Promise so the framework waits for completion.
**LANGUAGE**: JavaScript
**CODE**:
```javascript
beforeMultiEditSaveExtension: function (aContextsToBeUpdated) {
            //aContextsToBeUpdated - The array of objects containing the contexts to be updated and the updated value.
            //aContextsToBeUpdated[].sContextPath - The context path for the child to be updated.
            //aContextsToBeUpdated[].oUpdateData - The Object with the updated values for the selected properties in the multi edit dialog.
            var oApi = this.extensionAPI;
              return new Promise(function(fnResolve,fnReject){
                var oPromise = oApi.invokeActions("STTA_SALES_ORDER_ND_SRV_01/STTA_C_SO_SalesOrder_NDSetopportunityid", [], aContextsToBeUpdated);//Your function import for save here
                oPromise.then(fnResolve,fnReject);
        });
```

**STEP**: 3 — Implementation for OData V4
**DESCRIPTION**: Define customMassEditSave in the list report or object page controller extension (inside an override of editFlow). The function receives aParameters with aContexts (array of selected contexts) and oUpdateData (dictionary of propertyPath->value). Execute your custom save (for example, invokeAction). Return true to prevent the framework default mass-edit save.
**LANGUAGE**: JavaScript
**CODE**:
```javascript
sap.ui.define(
    [
        "sap/ui/core/mvc/ControllerExtension",
        "sap/m/MessageToast"
    ],
    function (ControllerExtension, Filter, FilterOperator, IllustratedMessage, IllustratedMessageType, MessageToast) {
        "use strict";

        return ControllerExtension.extend("sap.fe.core.fpmExplorer.OPExtend", {
            override: {
                editFlow: {
                    customMassEditSave: async function (aParameters) {
                        // aParameters.aContexts: array containing the selected contexts for the mass edit
                        // aParameters.oUpdateData: a dictionary containing the propertyPath and its updated value
                        
                        //Execute the custom save action
                        await this.base.editFlow
                        .invokeAction("Service.customUpdateAction", {
                            contexts: aParameters.aContexts,
                            parameterValues: aParameters.oUpdateData
                        })
                        .catch(function (e){
                            MessageToast.show(e.toString());
                        });
    
                        //Do not execute the default mass-edit
                        return true;
                    }
                }
            }

        });
    }
);
```

**STEP**: 4 — Reference
**DESCRIPTION**: Additional documentation and examples for mass edit dialog behavior and enabling editing.
**LANGUAGE**: Text
**CODE**:
```text
Related documentation:
- Enabling Editing Using a Dialog (Mass Edit): enabling-editing-using-a-dialog-mass-edit-965ef5b.md
```
--------------------------------

**TITLE**: Responsiveness Options: Importance-Based Rendering (Fiori elements)

**INTRODUCTION**: Brief, code-focused guidance for making fields responsive in SAP Fiori elements pages (list report tables, object page tables, smart chart toolbars) by setting the com.sap.vocabularies.UI.v1.Importance annotation. The platform evaluates this annotation to decide whether a field is shown on phone, tablet, or desktop.

**TAGS**: fiori-elements-framework, annotations, responsiveness, importance, UI.v1, OData, XML

STEP: Behavior summary
DESCRIPTION: Explain how Fiori elements uses the Importance annotation to determine visibility per device type in pages that include toolbars (list report tables, object page tables, smart chart toolbars).
LANGUAGE: Text
CODE:
```text
- Fields with Importance = High -> rendered on mobile phone.
- Fields with Importance = High or Medium -> shown on tablet.
- Fields with Importance = High, Medium, or Low -> shown on desktop.
```

STEP: OData annotation example (Annotations file / XML)
DESCRIPTION: Add a UI Importance annotation to a property in an OData annotations XML file. Use the Annotations Target attribute to point to the entity type property, and set the EnumMember to the desired ImportanceType (High | Medium | Low). This is the canonical way to control visibility for Fiori elements consumers of your OData service.
LANGUAGE: XML
CODE:
```xml
<!-- Example: annotate the SalesOrderID property as High importance -->
<Annotations Target="MyService.SalesOrderType/SalesOrderID" xmlns="http://docs.oasis-open.org/odata/ns/edm">
  <Annotation Term="com.sap.vocabularies.UI.v1.Importance"
              EnumMember="com.sap.vocabularies.UI.v1.ImportanceType/High" />
</Annotations>

<!-- Example: annotate multiple properties -->
<Annotations Target="MyService.SalesOrderType" xmlns="http://docs.oasis-open.org/odata/ns/edm">
  <Annotation Term="com.sap.vocabularies.UI.v1.Importance"
              Qualifier="OrderIDImportance"
              EnumMember="com.sap.vocabularies.UI.v1.ImportanceType/High" />
  <!-- Alternatively annotate the properties individually -->
</Annotations>
```

STEP: Alternate XML snippet (Property-level annotation inside an EDMX/Annotations grouping)
DESCRIPTION: If annotating within an EDMX or grouped annotations file, use the Property/Annotation pattern or the per-Property Target pattern. The Annotation Term and EnumMember are identical.
LANGUAGE: XML
CODE:
```xml
<!-- Property-targeted annotation (grouped annotations file) -->
<Annotations Target="MyService.SalesOrderType/SalesOrderID">
  <Annotation Term="com.sap.vocabularies.UI.v1.Importance"
              EnumMember="com.sap.vocabularies.UI.v1.ImportanceType/Medium" />
</Annotations>

<!-- Or in a property block (EDMX style) -->
<Property Name="SalesOrderID" Type="Edm.String">
  <Annotation Term="com.sap.vocabularies.UI.v1.Importance"
              EnumMember="com.sap.vocabularies.UI.v1.ImportanceType/Low" />
</Property>
```

STEP: Implementation notes for code generation
DESCRIPTION: Actionable rules for code generators or template writers:
- Ensure the annotation target references the correct namespace + entity type + property path.
- Use EnumMember values: com.sap.vocabularies.UI.v1.ImportanceType/High | /Medium | /Low.
- Place these annotations in the service metadata annotations file consumed by Fiori elements (Annotations.xml) or generated metadata extension files.
- Verify that the Fiori elements page type includes a toolbar (list report table, object page table, or smart chart toolbar) because Importance is evaluated for toolbar fields.
LANGUAGE: Text
CODE:
```text
- Target format: <Annotations Target="Namespace.EntityType/Property"> ... </Annotations>
- Enum values: ImportanceType/High, ImportanceType/Medium, ImportanceType/Low
- Placement: Annotations.xml or service metadata extension consumed by the Fiori elements app
- Outcome: Controls visibility by device (phone/tablet/desktop) as described above
```
--------------------------------

**TITLE**: SAP Fiori Elements — Feature Map (Developer Reference)

**INTRODUCTION**: Concise developer reference that maps SAP Fiori Elements UI controls, features, building blocks and extension points to the exact documentation files and design guideline links. Use this reference to quickly find the manifest/annotation/extension documentation required when generating, extending, or customizing Fiori Elements apps (List Report, Object Page, Analytical List Page, Overview Page). Action-oriented: follow the linked docs to implement each feature; use the code blocks for automation (search, CLI, templates).

**TAGS**: fiori-elements-framework, features, controls, building-blocks, extension-points, OData-V2, OData-V4, manifest, annotations

STEP: 1 — Filter usage: searching supported floorplans
DESCRIPTION: Use the floorplan filter logic when searching the feature map. Examples:
- Features available for both OData versions: use the plain name (e.g., List report page, Object page).
- Features available only for OData V2: append "(OData V2)".
- Features available only for OData V4: append "(OData V4)".

LANGUAGE: PlainText
CODE:
```text
Examples:
- "List report page"                -> supported in both OData V2 and V4
- "List report page (OData V2)"     -> supported only in OData V2
- "List report page (OData V4)"     -> supported only in OData V4
```

STEP: 2 — Extending SAP Fiori Elements-based apps (extension point quick links)
DESCRIPTION: Use these extension docs to extend generated apps during creation or runtime. Follow each linked doc to implement extension points and adaptation extensions.

LANGUAGE: Markdown
CODE:
```markdown
Extending generated apps:
- Extending Generated Apps Using App Extensions
  -> extending-generated-apps-using-app-extensions-340cdb2.md

- Extending List Reports and Object Pages Using App Extensions
  -> extending-list-reports-and-object-pages-using-app-extensions-a892eb8.md

- Configuring Analytical List Page App Extensions
  -> configuring-analytical-list-page-app-extensions-9504fb4.md

- Configuring Overview Page App Extensions
  -> configuring-overview-page-app-extensions-b240f61.md
```

STEP: 3 — Building blocks (OData V4 / Flexible Programming Model)
DESCRIPTION: The Flexible Programming Model exposes building blocks for OData V4 apps. Use these docs to implement and combine building blocks in manifest or macro configurations. The code block maps each building block identifier (preserve exact names) to its documentation file.

LANGUAGE: JSON
CODE:
```json
{
  "buildingBlocks": [
    { "id": "Chart", "doc": "the-chart-building-block-52d065a.md" },
    { "id": "ConditionalSwitch", "doc": "the-conditionalswitch-building-block-ba06542.md" },
    { "id": "Field", "doc": "the-field-building-block-5260b9c.md" },
    { "id": "FilterBar", "doc": "the-filterbar-building-block-7838611.md" },
    { "id": "MicroChart", "doc": "the-microchart-building-block-74554b4.md" },
    { "id": "Paginator", "doc": "the-paginator-building-block-997292b.md" },
    { "id": "Table", "doc": "the-table-building-block-3801656.md" },
    { "id": "TreeTable", "doc": "the-treetable-building-block-667851f.md" },
    { "id": "Page", "doc": "the-page-building-block-0258650.md" },
    { "id": "MessageButton", "doc": "the-messagebutton-building-block-b365f2a.md" },
    { "id": "RichTextEditor", "doc": "the-richtexteditor-building-block-7bd2767.md" },
    { "id": "Status", "doc": "the-status-building-block-8d8d810.md" },
    { "id": "Share", "doc": "the-share-building-block-41b02df.md" },
    { "id": "VariantManagement", "doc": "the-variantmanagement-building-block-33640ff.md" },
    { "id": "FlexibleColumnLayoutActions", "doc": "the-flexiblecolumnlayoutactions-building-block-1ba680b.md" }
  ],
  "notes": "Combine building block docs for macro and manifest usage; follow Flexible Programming Model guide: flexible-programming-model-549749b.md"
}
```

STEP: 4 — Core extension and adaptation docs (quick reference)
DESCRIPTION: Central docs you will call when implementing UI adaptation, extension points, or customization hooks. Use them in sequence: (1) read capability doc, (2) open corresponding extension point doc, (3) implement extension code or manifest changes.

LANGUAGE: Markdown
CODE:
```markdown
Core extension docs:
- UI Adaptation: adapting-the-ui-list-report-and-object-page-0d2f1a9.md
- Extension Points for Tables: extension-points-for-tables-d525522.md
- Extension Point for List Report Header: extension-point-for-list-report-header-1ab83e6.md
- Extension Points for Object Page Header Facets: extension-points-for-object-page-header-facets-61cf0ee.md
- Extension Points for Sections on the Object Page: extension-points-for-sections-on-the-object-page-92ad996.md
- Extension Points for Subsections on the Object Page: extension-points-for-subsections-on-the-object-page-ce8d468.md
- Extension Points for Forms on the Object Page: extension-points-for-forms-on-the-object-page-4e49753.md
- Extension Points for Pages: extension-points-for-pages-ecdf1d6.md
- Adaptation extensions guide: extending-delivered-apps-using-adaptation-extensions-52fc48b.md
```

STEP: 5 — Table and table-related features (configuration pointers)
DESCRIPTION: Use these docs to configure table type, columns, personalization, export, inline creation, and behaviors (freeze column, row count). Each entry links to the exact doc to implement the feature.

LANGUAGE: JSON
CODE:
```json
{
  "tables": [
    { "feature": "Setting the Table Type", "doc": "setting-the-table-type-7f844f1.md" },
    { "feature": "Defining Line Items (Add column to a table)", "doc": "defining-line-items-f0e1e17.md" },
    { "feature": "Configuring Tables", "doc": "configuring-tables-f4eb70f.md" },
    { "feature": "Adding Multiple Fields to One Column", "doc": "adding-multiple-fields-to-one-column-in-responsive-tables-d318e42.md" },
    { "feature": "Enabling Table Personalization", "doc": "enabling-table-personalization-3e2b4d2.md" },
    { "feature": "Export to spreadsheet (enableExport)", "doc": "using-the-export-button-4bab6f2.md" },
    { "feature": "Empty Row Mode / Inline Creation", "doc": "enabling-inline-creation-mode-or-empty-row-mode-for-table-entries-cfb04f0.md" },
    { "feature": "Freeze the first column", "doc": "tables-c0f6592.md" },
    { "feature": "Retrieve row count (getCount)", "doc": "influencing-the-request-dynamically-2cc6c03.md" },
    { "feature": "Copy/Paste from external (Excel)", "doc": "copying-and-pasting-from-external-applications-to-tables-f6a8fd2.md" }
  ],
  "note": "For table toolbars, actions and segmented buttons see: adding-segmented-buttons-to-a-table-toolbar-5532c89.md"
}
```

STEP: 6 — Filters, FilterBar, and Visual Filters
DESCRIPTION: Configure filter bar behavior, semantic date ranges, default values, selection variants, and visual filters. Use these docs to define filter facets and value list enhancements.

LANGUAGE: JSON
CODE:
```json
{
  "filters": [
    { "feature": "Smart Filter Bar", "doc": "smart-filter-bar-7bcdffc.md" },
    { "feature": "Filter Bar configuration", "doc": "configuring-filter-bars-4bd7590.md" },
    { "feature": "Configuring the Global Filter", "doc": "configuring-the-global-filter-73d9693.md" },
    { "feature": "Enabling Semantic Operators (semantic date range)", "doc": "enabling-semantic-operators-in-the-filter-bar-fef65d0.md" },
    { "feature": "Configuring Default Filter Values", "doc": "configuring-default-filter-values-f27ad7b.md" },
    { "feature": "Enhancing ValueList Annotations for Visual Filters", "doc": "enhancing-valuelist-annotations-for-visual-filters-16d43eb.md" },
    { "feature": "Configuring the Visual Filter Bar", "doc": "configuring-the-visual-filter-bar-33f3d80.md" },
    { "feature": "History of recently entered values", "doc": "enabling-the-history-of-recently-entered-values-37dbf1f.md" },
    { "feature": "Value Help as Dropdown List / Popover", "doc": "value-help-as-a-dropdown-list-2a0a630.md" }
  ]
}
```

STEP: 7 — Charts, micro charts, and visualizations
DESCRIPTION: Use these docs to add charts (Chart, Smart Chart), configure chart-only views, add micro charts to tables/cards, and configure analytical cards.

LANGUAGE: JSON
CODE:
```json
{
  "charts": [
    { "feature": "Configuring Charts", "doc": "configuring-charts-653ed0f.md" },
    { "feature": "Configuring the Chart-Only View", "doc": "configuring-the-chart-only-view-as-the-default-option-8e6e885.md" },
    { "feature": "Analytical Cards", "doc": "analytical-cards-d7b0b42.md" },
    { "feature": "Adding a Micro Chart to a Table", "doc": "adding-a-micro-chart-to-a-table-b8312a4.md" },
    { "feature": "Micro Chart Facet", "doc": "micro-chart-facet-e219fd0.md" },
    { "feature": "Area Micro Chart", "doc": "area-micro-chart-1467f2b.md" },
    { "feature": "Bullet Micro Chart", "doc": "bullet-micro-chart-b915166.md" },
    { "feature": "Line Micro Chart", "doc": "line-micro-chart-e5cb2af.md" },
    { "feature": "Radial Micro Chart", "doc": "radial-micro-chart-51eb569.md" },
    { "feature": "Stacked Bar Micro Chart", "doc": "stacked-bar-micro-chart-9c93837.md" }
  ]
}
```

STEP: 8 — Cards and Overview Page features
DESCRIPTION: Overview Page (cards) capabilities: create card types, filters on cards, manage cards, runtime capabilities, custom cards, and card resizing.

LANGUAGE: JSON
CODE:
```json
{
  "cards": [
    { "feature": "List Cards", "doc": "list-cards-56f39e0.md" },
    { "feature": "Table Cards", "doc": "table-cards-167bf7c.md" },
    { "feature": "Chart Cards (Overview)", "doc": "chart-cards-used-in-overview-pages-68e62ad.md" },
    { "feature": "Quick View Cards", "doc": "quick-view-cards-c4bd35e.md" },
    { "feature": "Stack Cards", "doc": "stack-cards-756c49c.md" },
    { "feature": "Creating Custom Cards", "doc": "creating-custom-cards-6d260f7.md" },
    { "feature": "Configuring Overview Pages Using Runtime Capabilities", "doc": "configuring-overview-pages-using-runtime-capabilities-5b1dd11.md" },
    { "feature": "Card Filters (Card filter)", "doc": "configuring-card-filters-ecde99f.md" }
  ]
}
```

STEP: 9 — Actions, action parameter dialogs, and AI features
DESCRIPTION: Configure action placement, default values for action parameter dialogs, menus, and add AI icon/action support. Use the provided docs to create parameter dialogs, prefill values, and adapt/delete dialog texts.

LANGUAGE: JSON
CODE:
```json
{
  "actions": [
    { "feature": "Actions (annotation & manifest-based)", "doc": "actions-cbf16c5.md" },
    { "feature": "Adding Custom Actions Using Extension Points", "doc": "adding-custom-actions-using-extension-points-7619517.md" },
    { "feature": "Default Values for Action Parameters", "doc": "actions-cbf16c5.md#loiocbf16c599f2d4b8796e3702f7d4aae6c__DefaultValuesActionParameters" },
    { "feature": "Prefilling Fields Using DefaultValuesFunction", "doc": "prefilling-fields-using-the-defaultvaluesfunction-5ada91c.md" },
    { "feature": "Adding the AI Icon to Action Buttons", "doc": "adding-the-ai-icon-to-action-buttons-3ad0452.md" },
    { "feature": "Generative AI Features", "doc": "generative-ai-features-0ec03d4.md" }
  ]
}
```

STEP: 10 — Navigation, deep links, keep-alive and sap-keep-alive behaviors
DESCRIPTION: Configure internal/external navigation, preferredMode, deep linking, and view caching (sap-keep-alive). Use these docs for manifest routing and navigation modifications.

LANGUAGE: Markdown
CODE:
```markdown
Navigation & keep-alive:
- Configuring Navigation -> configuring-navigation-a424275.md
- Example: Enable Internal Navigation to Different Detail Page -> example-enable-internal-navigation-to-different-detail-page-75002b3.md
- Handling of the preferredMode Parameter (launch object page in edit mode) -> handling-of-the-preferredmode-parameter-bfaf3cc.md
- Keep alive / sap-keep-alive -> refresh-dataset-for-back-navigation-when-sap-keep-alive-is-set-to-true-f1c2704.md
- Refresh entity sets in sap-keep-alive mode -> refresh-entity-sets-in-sap-keep-alive-mode-3c65f2c.md
```

STEP: 11 — Messages, toasts, popovers and confirmations
DESCRIPTION: Use these docs for message handling and UI confirmations; relevant for error handling, server messages (412), and message popovers.

LANGUAGE: JSON
CODE:
```json
{
  "messaging": [
    { "feature": "Using Messages", "doc": "using-messages-239b192.md" },
    { "feature": "Confirmation Popups", "doc": "confirmation-popups-9a53662.md" },
    { "feature": "Adding Confirmation Popovers for Actions", "doc": "adding-confirmation-popovers-for-actions-87130de.md" },
    { "feature": "Adapting Texts in Delete Dialog (List Report)", "doc": "adapting-texts-in-the-delete-dialog-using-extensions-list-report-25885b6.md" },
    { "feature": "Adapting Texts in the Delete Dialog (Object Page Header)", "doc": "adapting-texts-in-the-delete-dialog-object-page-header-1fd8e52.md" }
  ],
  "notes": "Refer to docs for 412 handling and strict handling options (Prefer:handling=strict)"
}
```

STEP: 12 — Miscellaneous frequently-used feature docs (quick access)
DESCRIPTION: Shortlist of other important docs used in common development tasks (draft handling, save hooks, default settings, side effects, input assistance).

LANGUAGE: Markdown
CODE:
```markdown
Misc docs:
- Draft Handling -> draft-handling-ed9aa41.md
- Adapting Logic Before Save Operation -> adapting-logic-before-save-operation-6a0a050.md
- Default Settings (Visualizations, Sort Order, Filter Values) -> configuring-default-settings-visualizations-sort-order-filter-values-49a6ba5.md
- Side Effects -> side-effects-18b17bd.md
- Input Assistance -> input-assistance-1a6324d.md
- Using Custom Code Before Standard Operations -> using-custom-code-before-standard-operations-877e5ff.md
```

STEP: 13 — Search strategy for specific features
DESCRIPTION: To programmatically find the exact document for a feature:
1. Search the feature name (exact string) in the feature map.
2. If present as a building block, use the building-block doc in STEP 3.
3. For UI control specifics, open the corresponding control doc file referenced in the Developer Documentation column (manifest/annotation implementation guidance is in the linked md files).

LANGUAGE: PlainText
CODE:
```text
Search steps:
1) Exact match feature name -> read Developer Documentation link (md filename).
2) If feature has a building block identifier (e.g., "Table", "Chart"), open the corresponding 'the-*-building-block-*.md'.
3) For OData-specific behavior append "(OData V2)" or "(OData V4)" to the search term.
4) For extension implementation search "extension" + feature name (e.g., "extension points for tables").
```

Step: 14 — Quick manifest/annotation entry points (start here)
DESCRIPTION: When implementing a feature in code, open the referenced md file (see previous steps), then:
- For manifest changes: follow examples in the md for "manifest.json" entries.
- For annotations: open the md and copy required annotation snippet to your CDS/annotation file.
- For extension points: implement controller/js fragments as shown in extension docs.

LANGUAGE: PlainText
CODE:
```text
Common starting docs:
- manifest examples -> see each feature's md (search for "manifest" in the doc)
- annotation examples -> search the feature md for "annotations" or "annotation snippet"
- extension implementation -> open the "extension-points-*" docs referenced above
```

Note: Use the exact md filenames above to load the SAP Fiori Elements developer docs. Each doc contains code snippets, manifest/annotation examples and step-by-step implementation guidance.
--------------------------------

**TITLE**: SAP Fiori Elements Tutorials, Courses, and Blogs (Resource Index for Code Generation Agents)

**INTRODUCTION**:
A concise, actionable index of official SAP Fiori Elements learning resources. Use these links as authoritative sources when scaffolding, learning, or generating code for Fiori Elements apps (OData V4, RAP, CAP, mockserver, OPA tests, adaptation projects). Each step provides the resource link(s) and a short, task-oriented description an agent can follow.

**TAGS**: fiori-elements-framework, sap, tutorials, learning, odata-v4, cap, rap, mockserver, opa, sapui5

STEP: Tutorials (Primary hands-on tutorials)
DESCRIPTION: Follow these step-by-step tutorials to scaffold and implement sample Fiori Elements applications. Use each resource to obtain sample projects, commands, prerequisites, and walkthroughs for OData V4 (CAP and RAP), List Report Object Page apps, mockserver+OPA testing, and adaptation projects for SAP S/4HANA Cloud.
LANGUAGE: text
CODE:
```text
Create a Travel App with SAP Fiori Elements Based on OData V4 RAP Service
https://developers.sap.com/group.fiori-tools-odata-v4-travel.html

Create an Incident Management App with SAP Fiori Elements for OData V4
https://developers.sap.com/group.fiori-tools-odata-v4-incident.html

Create a List Report Object Page App with SAP Fiori Tools
https://developers.sap.com/group.fiori-tools-lrop.html

Use the Mockserver and OPA Test Library with SAP Fiori Elements for OData V4 Applications
https://developers.sap.com/group.fiori-elements-mockserver-opa.html

Work with SAPUI5 Adaptation Projects to Make Changes and Extend the Source Code of an Application Variant of an SAP Fiori Application in SAP S/4HANA Cloud Public Edition
https://developers.sap.com/group.sapui5-adaptation-projects.html
```

STEP: Courses and Learning Journeys (Structured curriculum)
DESCRIPTION: Enroll or reference these structured courses/learning journeys to gain broader curriculum-level knowledge about developing and extending Fiori Elements apps. Use for planning learning paths, determining required competencies, and locating official course materials.
LANGUAGE: text
CODE:
```text
Developing and Extending SAP Fiori Elements Apps
https://learning.sap.com/courses/developing-and-extending-sap-fiori-elements-apps

Developing an SAP Fiori Elements App Based on a CAP OData V4 Service
https://learning.sap.com/learning-journeys/developing-an-sap-fiori-elements-app-based-on-a-cap-odata-v4-service

Getting Started with Creating an SAP Fiori Elements App Based on an OData V4 RAP Service
https://learning.sap.com/learning-journeys/getting-started-with-creating-an-sap-fiori-elements-app-based-on-an-odata-v4-rap-service
```

STEP: Blogs (Frequently updated articles and feature showcases)
DESCRIPTION: Use blog posts for up-to-date examples, deep dives, and community-contributed patterns. If a link is stale, start from the SAP Community or search by topic/keyword. The links below include tag indexes and example feature showcase posts for CAP CDS and RAP/ABAP CDS.
LANGUAGE: text
CODE:
```text
Blog Posts Tagged with SAP Fiori Elements
https://blogs.sap.com/tags/ed5c1ef6-932f-4c19-b2ba-1be375109ff5/

The SAP Fiori elements feature showcase with CAP CDS annotations
https://blogs.sap.com/2021/12/07/the-sap-fiori-elements-feature-showcase-with-cap-cds-annotations/

The SAP Fiori Elements feature showcase with RAP and ABAP CDS annotations
https://blogs.sap.com/2022/12/19/the-sap-fiori-elements-feature-showcase-with-rap-and-abap-cds-annotations/

SAP Community main page (use to search if a blog link is stale)
https://community.sap.com/
```

STEP: Usage Guidance for Code Generation Agents
DESCRIPTION: Actionable checklist an agent should use when leveraging the above resources:
- Open the relevant tutorial or course URL to extract sample project structure, prerequisites, and CLI commands.
- Locate downloadable sample code repositories or step-by-step commands in the tutorial pages (often under “Try it” or “Download” sections).
- For tests and local simulation, follow the mockserver + OPA tutorial to configure a mock OData V4 server and run UI assertions.
- For extending standard SAP apps in S/4HANA Cloud, follow the adaptation projects tutorial for required project setup and extension points.
- Use blog posts for configuration examples, CDS annotation patterns, and migration/feature notes.
LANGUAGE: text
CODE:
```text
Checklist:
1) Open chosen tutorial/course link and extract:
   - CLI commands to scaffold app
   - Sample project Git URL (if provided)
   - Build & run instructions
2) If testing locally, follow mockserver + OPA steps to run mock OData server and tests
3) For CAP/RAP specifics, extract CDS annotation examples and expected service metadata
4) For S/4HANA Cloud variants, extract adaptation project steps and extension points
5) Cross-check blog posts for edge cases, annotation snippets, and community tips
```


--------------------------------

**TITLE**: Save and Close Navigation (navToListOnSave) for Object Page

**INTRODUCTION**: Enable the Object Page to automatically navigate back to the List Report after saving a draft or non-draft record. Applicable only to SAP Fiori elements for OData V2. Configure this in the app manifest (manifest.json) under the pages configuration for the Object Page.

**TAGS**: fiori-elements-framework, OData V2, ObjectPage, manifest.json, navToListOnSave, save, navigation, draft

**STEP**: 1 — Enable Save and Close (navToListOnSave)

**DESCRIPTION**: Edit the application manifest (typically webapp/manifest.json). Under "pages" locate the Object Page entry for the entity (pattern: "ObjectPage|<EntitySetName>"). Add or set the "navToListOnSave" property to true in the ObjectPage settings to make the Save button navigate back to the List Report after the draft is saved.

**LANGUAGE**: JSON

**CODE**:
```json
"pages": {
                                  "ObjectPage|STTA_C_MP_Product": {
                                         "entitySet": "STTA_C_MP_Product",
                                         "component": {
                                                "name": "sap.suite.ui.generic.template.ObjectPage",
                                                "settings": {
                                                       "navToListOnSave": true,
                                                       "showRelatedApps": true,
                                                       "tableType": "ResponsiveTable",
                                                       "editableHeaderContent": true,
                                                      
                                                       "sections": {
                                                              "to_ProductText::com.sap.vocabularies.UI.v1.LineItem": {
                                                                     "navigationProperty": "to_ProductText",
                                                                     "entitySet": "STTA_C_MP_ProductText",
                                                                     "multiSelect": true,
                                                                     "createMode": "inline",
                                                                     "tableType": "ResponsiveTable"
                                                              }
                                                       }
                                                }
                                         },
```

**STEP**: 2 — Behavior when disabled or omitted

**DESCRIPTION**: If "navToListOnSave" is set to false or omitted, the default behavior applies: the user remains on the Object Page after saving the draft or record. To explicitly disable the automatic navigation, set the flag to false.

**LANGUAGE**: JSON

**CODE**:
```json
"settings": {
    "navToListOnSave": false
}
```
--------------------------------

**TITLE**: Scatter Chart Card

**INTRODUCTION**: Use a Scatter Chart Card to visualize data point distributions across two measures (x and y axes). This guide explains required annotations, role-to-axis mapping, dimension/series/category rules, and provides XML, ABAP CDS, and CAP CDS examples ready for use in Fiori Elements / UI5 cards.

**TAGS**: fiori-elements-framework, scatter-chart, UI.Chart, ChartDefinitionType, CDS, XML, ABAP, CAP

**STEP**: 1 — Key rules and behavior

**DESCRIPTION**: 
- ChartType: use UI.ChartType/Scatter (XML) or #SCATTER / #Scatter (CDS).
- Measures: a scatter chart supports exactly two measures. Assign measure roles to map them to axes:
  - Use Role = Axis1 for the first measure → mapped to the valueAxis feed UID → x-axis.
  - Use Role = Axis2 for the second measure → mapped to the valueAxis feed UID → y-axis.
  - If Axis1 is missing, Axis2 maps to axis1; if Axis2 is missing, Axis3 can be used — the role resolution order is `axis1`, `axis2` (if no `axis1`), or `axis3` (if no `axis2`).
  - XML enum names: UI.ChartMeasureRoleType/Axis1, .../Axis2, .../Axis3.
- Dimensions:
  - Maximum of two dimensions supported.
  - If a dimension has no role assigned, its members are plotted as equal-sized bubbles of the same color.
  - Assign at most one dimension to the Series role — each member receives a distinct color.
  - Assign at most one dimension to the Category role — each member receives a distinct shape.
- Visual: example image path (preserve for documentation): ../01_Whats-New/images/Whats_New_140_OVP_Scatter_Chart_f264ec1.png

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.Chart" Qualifier="Eval_by_Currency_Scatter">
    <Record Type="UI.ChartDefinitionType">
        <PropertyValue Property="Title" String="Scatter Chart no role" />
        <PropertyValue Property="ChartType" EnumMember="UI.ChartType/Scatter" />
        <PropertyValue Property="MeasureAttributes">
            <Collection>
                <Record Type="UI.ChartMeasureAttributeType">
                    <PropertyValue Property="Measure" PropertyPath="salesshare" />
                    <PropertyValue Property="Role" EnumMember="UI.ChartMeasureRoleType/Axis1" />
                </Record>
                <Record Type="UI.ChartMeasureAttributeType">
                    <PropertyValue Property="Measure" PropertyPath="totalsales" />
                    <PropertyValue Property="Role" EnumMember="UI.ChartMeasureRoleType/Axis2" />
                </Record>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="DimensionAttributes">
            <Collection>
                <Record Type="UI.ChartDimensionAttributeType">
                    <PropertyValue Property="Dimension" PropertyPath="suppliercompany" />
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

**STEP**: 2 — ABAP CDS annotation example

**DESCRIPTION**: Paste this block into your ABAP CDS view annotation section. It demonstrates setting title, scatter chart type, two measures with roles, one dimension, and a qualifier.

**LANGUAGE**: ABAP CDS

**CODE**:
```

@UI.Chart: [
  {
    title: 'Scatter Chart no role',
    chartType: #SCATTER,
    measureAttributes: [
      {
        measure: 'salesshare',
        role: #AXIS_1
      },
      {
        measure: 'totalsales',
        role: #AXIS_2
      }
    ],
    dimensionAttributes: [
      {
        dimension: 'suppliercompany'
      }
    ],
    qualifier: 'Eval_by_Currency_Scatter'
  }
]
annotate view VIEWNAME with { }

```

**STEP**: 3 — CAP CDS annotation example

**DESCRIPTION**: Use this CAP CDS snippet to define a UI.Chart artifact with qualifier #Eval_by_Currency_Scatter, setting measure and dimension attributes for a scatter chart.

**LANGUAGE**: CDS

**CODE**:
```

UI.Chart #Eval_by_Currency_Scatter : {
    $Type : 'UI.ChartDefinitionType',
    Title : 'Scatter Chart no role',
    ChartType : #Scatter,
    MeasureAttributes : [
        {
            $Type : 'UI.ChartMeasureAttributeType',
            Measure : salesshare,
            Role : #Axis1
        },
        {
            $Type : 'UI.ChartMeasureAttributeType',
            Measure : totalsales,
            Role : #Axis2
        }
    ],
    DimensionAttributes : [
        {
            $Type : 'UI.ChartDimensionAttributeType',
            Dimension : suppliercompany
        }
    ]
},

```
--------------------------------

**TITLE**: Security Configuration for SAP Fiori elements (OData V4)

**INTRODUCTION**: Practical, code-focused guidance for implementing security-related annotations and extension points in SAP Fiori elements apps (OData V4). Use these steps to mark sensitive data, enable secure upload handling, redact data from outbound navigation, and align CAP/ABAP backend settings with UI behavior.

**TAGS**: fiori-elements, security, ODataV4, CAP, ABAP, annotations, PersonalData, AcceptableMediaTypes, Common.Masked, upload, navigation, extensionAPI

**STEP**: 1 — Verify back-end compatibility (CAP / ABAP)

**DESCRIPTION**: Ensure back-end security and runtime settings match your UI design choices. When using CAP:

- Verify OData batch/config limits if you use grouped invocations (InvocationGrouping: Changeset) so the back end accepts the number of batched requests.
- Ensure CAP security aspects (authentication, authorization, request limits, virus scanning for uploads) are configured.

When using ABAP:

- Follow ABAP/RAP security guidance for search and filtering in unmanaged queries.

Reference links:
- CAP Security Aspects: https://cap.cloud.sap/docs/guides/security/aspects
- Invocation grouping/security in Actions: actions-cbf16c5.md#loiocbf16c599f2d4b8796e3702f7d4aae6c__handlingWithinButtons
- ABAP guidance: https://help.sap.com/docs/abap-cloud/abap-rap/implementing-search-in-unmanaged-query and https://help.sap.com/docs/abap-cloud/abap-rap/implementing-filtering-in-unmanaged-query

**LANGUAGE**: None

**CODE**:
```none
# No code — verify runtime config/settings in your CAP/ABAP environment and adjust batch/request limits accordingly.
```

---

**STEP**: 2 — Enable upload and restrict accepted media types

**DESCRIPTION**: To securely support upload fields, annotate stream properties with Core.AcceptableMediaTypes so the UI accepts only allowed MIME types. The back end must also enforce virus scanning, maximum file size, and MIME-type checks.

Examples: CDS and OData XML annotation forms.

**LANGUAGE**: CDS

**CODE**:
```cds
entity Document {
  key ID : UUID;
  @Core.AcceptableMediaTypes : ['application/pdf', 'image/png']
  Attachment : LargeBinary; // stream property used for uploads
}
```

**LANGUAGE**: XML (Annotations metadata)

**CODE**:
```xml
<Annotations Target="my.namespace.Document/Attachment">
  <Annotation Term="Core.AcceptableMediaTypes">
    <Collection>
      <String>application/pdf</String>
      <String>image/png</String>
    </Collection>
  </Annotation>
</Annotations>
```

Reference links:
- Enabling Stream Support: enabling-stream-support-b236d32.md
- Enabling the Upload Functionality: enabling-the-upload-functionality-d59dbec.md

---

**STEP**: 3 — Mark potentially sensitive data (PersonalData vocabulary)

**DESCRIPTION**: Annotate properties that may contain sensitive personal data with PersonalData.IsPotentiallySensitive. This triggers built-in UI protections (disable history, prevent caching of last executed request with filters on these properties, avoid storing/restoring these fields in app state, etc.).

Examples: CDS and OData XML annotation forms.

**LANGUAGE**: CDS

**CODE**:
```cds
entity SalesOrder {
  key ID : UUID;
  CustomerName : String;
  @PersonalData.IsPotentiallySensitive : true
  CustomerEmail : String;
}
```

**LANGUAGE**: XML (Annotations metadata)

**CODE**:
```xml
<Annotations Target="my.namespace.SalesOrder/CustomerEmail">
  <Annotation Term="PersonalData.IsPotentiallySensitive" Bool="true"/>
</Annotations>
```

Behavior notes (from UI):
- History of recently entered values is disabled on such fields.
- Caching the last executed request is disabled if the request contains a filter on properties annotated with PersonalData.IsPotentiallySensitive.
- Store/restore of application state does not persist changes to such fields (except when used in filter context).

Reference: PersonalData Vocabulary: https://sap.github.io/odata-vocabularies/vocabularies/PersonalData.html

---

**STEP**: 4 — Mask input fields (Common.Masked)

**DESCRIPTION**: Use Common.Masked to hide values on the UI (visual masking). This only affects UI representation — the raw value is still sent to the back end unless you implement additional encryption/redaction server-side.

Examples: CDS and OData XML annotation forms.

**LANGUAGE**: CDS

**CODE**:
```cds
entity Payment {
  key ID : UUID;
  @Common.Masked : true
  CardNumber : String;
}
```

**LANGUAGE**: XML (Annotations metadata)

**CODE**:
```xml
<Annotations Target="my.namespace.Payment/CardNumber">
  <Annotation Term="Common.Masked" Bool="true"/>
</Annotations>
```

Reference: Different representations of a field: different-representations-of-a-field-c18ada4.md

---

**STEP**: 5 — Redact sensitive properties during outbound navigation (adaptNavigationContext extension)

**DESCRIPTION**: Use the SAP Fiori elements extension API to remove or redact sensitive fields from navigation context sent to external apps. Implement adaptNavigationContext in your app extension and return a pruned navigation context.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Example extension implementing adaptNavigationContext
// Place in your Fiori elements extension file (e.g., extensionController.js or relevant extension entrypoint)
sap.ui.define([], function () {
  "use strict";
  return {
    // Called before outbound navigation; remove/modify sensitive properties here
    adaptNavigationContext: function (oNavigationContext) {
      if (!oNavigationContext) {
        return oNavigationContext;
      }
      // Example: remove sensitive fields from the first-level navigation entity
      if (oNavigationContext.SalesOrder) {
        delete oNavigationContext.SalesOrder.CustomerEmail;
        delete oNavigationContext.SalesOrder.CardNumber;
      }
      return oNavigationContext;
    }
  };
});
```

Guidance:
- Use app extensions only if you cannot produce the required behavior via annotations or manifest settings.
- Use exclusively the extensionAPI of SAP Fiori elements to ensure compatibility.

Reference: Creating an extension to modify properties in the navigation context: creating-an-extension-to-modify-properties-in-the-navigation-context-199a496.md

---

**STEP**: 6 — Disable or limit export / copy-to-clipboard for sensitive data

**DESCRIPTION**: Prevent exposing sensitive fields via export or clipboard:

- Disable the export button at the table level or exclude specific columns containing sensitive data from export (use appropriate annotations or table/view configuration).
- Disable copy-to-clipboard for columns that contain sensitive data.

Action items:
- Inspect your ListReport/ObjectPage table annotations and manifest settings for export configuration.
- For column-level control, apply an export-exclusion annotation or table column metadata that your table implementation recognizes (refer to "Using the Export Button").

Reference:
- Using the Export Button: using-the-export-button-4bab6f2.md
- Tables & copy-to-clipboard: tables-c0f6592.md

**LANGUAGE**: None

**CODE**:
```none
# Implementation detail depends on the table/control used in your app.
# Use the guidance in "Using the Export Button" and table documentation to apply per-column export/exclude settings.
```

---

**STEP**: 7 — Consider Share (Microsoft Teams) and outbound transfer of data

**DESCRIPTION**: Enabling "Share: Microsoft Teams › As Card" may transfer sensitive or personal data outside the SAP system. If your app contains sensitive information, exclude those properties via annotations (e.g., PersonalData.IsPotentiallySensitive) or remove them from navigation/share payloads.

Reference: The Share: Microsoft Teams Functionality: the-share-microsoft-teams-functionality-ff89e4b.md

**LANGUAGE**: None

**CODE**:
```none
# Evaluate share configuration and annotate/remove fields to avoid leaking sensitive data.
```

---

**STEP**: 8 — Summary of UI effects for properties annotated as potentially sensitive

**DESCRIPTION**: When you apply PersonalData.IsPotentiallySensitive the UI behavior is as follows (ensure your implementation tests and documents these behaviors):

- Export: Sensitive columns can be excluded from export.
- Copy-to-clipboard: Copy actions can be disabled for sensitive columns.
- History: Recently entered values are not stored for sensitive fields.
- Caching: Last executed request is not cached if filters include sensitive fields.
- Store/Restore: App state does not persist changes to sensitive fields (except fields used in filter context).
- Outbound navigation: Sensitive data removed from navigation context (first level); deeper levels may not be removed automatically — adapt navigation context via extension if needed.

**LANGUAGE**: None

**CODE**:
```none
# No code — confirm behaviors by annotating properties and testing in UI.
```

References (full list):
- CAP security: https://cap.cloud.sap/docs/guides/security/aspects
- PersonalData Vocabulary: https://sap.github.io/odata-vocabularies/vocabularies/PersonalData.html
- Enabling Stream Support: enabling-stream-support-b236d32.md
- Enabling the Upload Functionality: enabling-the-upload-functionality-d59dbec.md
- Using the Export Button: using-the-export-button-4bab6f2.md
- Tables documentation: tables-c0f6592.md
- Enabling history: enabling-the-history-of-recently-entered-values-37dbf1f.md
- Caching the last executed request: caching-the-last-executed-request-4215eca.md
- Store/Restore app state: store-restore-the-application-state-46bf248.md
- Creating extension to modify navigation context: creating-an-extension-to-modify-properties-in-the-navigation-context-199a496.md
- Outbound navigation: navigation-from-an-app-outbound-navigation-d782acf.md
- Share (Teams): the-share-microsoft-teams-functionality-ff89e4b.md
--------------------------------

**TITLE**: Selecting Transports for Business Configuration Content (Fiori Elements)

**INTRODUCTION**: Step-by-step, code-focused reference to enable and configure the "Select Transport Request" feature for business configuration content in SAP Fiori elements. Includes manifest settings, OData/annotation prerequisites, enabling/disabling via annotations, and making transport selection mandatory.

**TAGS**: fiori-elements-framework, transport, business-configuration, manifest, annotations, OData, ABAP, select-transport

**STEP**: 1 — Enable the feature in the application manifest

**DESCRIPTION**: Add the transportSelection settings to the target page in your manifest.json. Replace placeholders with your root page id, the transport request property name, and the fully qualified action name that performs transport selection.

**LANGUAGE**: JSON

**CODE**:
```json
{
     "sap.ui5": {
          "routing": {
               "targets": {
                    "<yourRootPage>": {
                         "options": {
                              "settings": {
                                   "content": {
                                        "transportSelection": {
                                             "transportRequestProperty": "<TransportRequestProperty>",
                                             "selectTransportAction": "<Namespace>.<SelectTransportAction>"
                                        }
                                   }
                              }
                         }
                    }
               }
          }
     }
}
```

**STEP**: 2 — OData / Service prerequisites for the entity set

**DESCRIPTION**: Ensure the entity set that backs the current document includes:
- A transport request property (string) to store the selected transport request.
- An action (select transport) on the entity set that accepts a string parameter for the transport request selection.
  - The parameter must have a meaningful label.
  - The action must declare @Common.SideEffects so the UI is refreshed after selection.
  - The action parameter must have a value list annotation to provide available transport requests.

Tip: If the number of transport requests is small and static, define the value list annotation as ValueListWithFixedValues so the parameter renders as a dropdown.

**LANGUAGE**: (OData / Annotation guidance — no code)

**CODE**:
```text
(Ensure the OData action exists with:
 - a string parameter for the transport request
 - a label for the parameter
 - @Common.SideEffects on the action
 - a value list annotation (ValueListWithFixedValues if list is small))
```

**STEP**: 3 — Optionally disable the feature at runtime using Common.OperationAvailable

**DESCRIPTION**: If you enabled transportSelection in the manifest but need to disable it under certain conditions, annotate the SelectTransport action with Common.OperationAvailable that points to a boolean property/path (true = available, false = hidden/disabled).

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="Namespace.SelectTransportAction">
     <Annotation Term="Common.OperationAvailable" Path="selectTransportEnabled" />
</Annotations>
```

**STEP**: 4 — Make transport selection mandatory using Common.FieldControl

**DESCRIPTION**: Use @Common.FieldControl on the transport request property to prevent saving until a transport is selected (shows a warning in the message strip and blocks save if mandatory). Two approaches:
- Static mandatory: set EnumMember to Mandatory.
- Dynamic mandatory: point to a path property that evaluates the field control at runtime.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="Namespace.TransportRequestProperty">
     <Annotation Term="Common.FieldControl" EnumMember="Common.FieldControlType/Mandatory" />
</Annotations>
```

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="Namespace.TransportRequestProperty">
     <Annotation Term="Common.FieldControl" Path="transportRequestFieldControl" />
</Annotations>
```

**STEP**: 5 — UI behavior notes (what users see & save flow)

**DESCRIPTION**: Implementation behaviors to validate in UI tests:
- The "Select Transport Request" control is not visible in read-only mode.
- The control appears in the header toolbar when editing the object page.
- If transport selection is mandatory and no transport is chosen, a warning message strip is shown until selection.
- If the user clicks Save without a selected transport (and the property is mandatory), a dialog prompts for transport selection before proceeding.
- After successful selection, the chosen transport is displayed in the header toolbar and can be changed later.

**LANGUAGE**: Text / Image references

**CODE**:
```text
UI image references:
- images/Transport_Selection_Message_No_Transport_Request_Selected_abdf348.jpg
- images/Transport_Selection_Prompt_for_Transport_Selection_Dialog_3e81ed2.png
- images/Transport_Selection_Selected_Transport_Request_is_Displayed_412836f.png
```

**STEP**: 6 — ABAP Tooling option: Generate ABAP Repository Objects Wizard

**DESCRIPTION**: For ABAP RAP developers, use the "Enable Transport Selection Strip" option in the "Generate ABAP Repository Objects Wizard" to scaffold necessary artifacts. See the official guide for details and links.

**LANGUAGE**: Text / Link

**CODE**:
```text
Reference:
Generating a Business Configuration Maintenance Object with the Generate ABAP Repository Objects Wizard
https://help.sap.com/docs/ABAP_PLATFORM_NEW/b5670aaaa2364a29935f40b16499972d/047e01c3bcdd4303a60b61364bd5b31d.html
```
--------------------------------

**TITLE**: Setting Authorizations for Overview Page Cards (requireAppAuthorization in manifest.json)

**INTRODUCTION**: Add an intent-based authorization check to overview page cards so cards are displayed only when the current user has authorization for the target application. This uses the Cross-Application Navigation Service check (isIntentSupported) at runtime to avoid intent-based navigation errors.

**TAGS**: fiori-elements-framework, sap.ovp, manifest.json, requireAppAuthorization, isIntentSupported, cross-application-navigation

**STEP**: 1 — Add requireAppAuthorization to the card settings in manifest.json

**DESCRIPTION**: Edit your app’s manifest.json and add the requireAppAuthorization property under the specific card settings (sap.ovp.cards.<cardId>.settings). Set the value to the intent string that you want to be checked (example: "#Action-toappnavsample"). At runtime the framework uses isIntentSupported to verify authorization; the card is rendered only when that intent is supported for the current user.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ovp": {
   ...
    "cards": {
     ...
      "card01": {
        "model": "salesOrder",
        "template": "sap.ovp.cards.stack",
        "settings": {
          "title": "Stack Card Title",
          "subTitle": "Stack Card",
          "requireAppAuthorization": "#Action-toappnavsample",
          "entitySet": "SalesOrderSet"
        }
      }
    }
  ...
  }
}
```

**STEP**: 2 — Runtime behavior and service used

**DESCRIPTION**: At runtime the framework checks the provided intent using the Cross-Application Navigation Service (isIntentSupported). If isIntentSupported returns true for the intent specified in requireAppAuthorization, the card is displayed to the user. If not supported, the card will not be shown (preventing unexpected access errors when a user triggers navigation). This makes the intent check explicit and avoids runtime navigation errors.

**LANGUAGE**: text

**CODE**:
```
Runtime check:
- Service: Cross-Application Navigation Service (isIntentSupported)
- Input: value of sap.ovp.cards.<cardId>.settings.requireAppAuthorization (intent string, e.g. "#Action-toappnavsample")
- Outcome: if supported -> card displayed; if not supported -> card not displayed (no navigation attempt)
```

**STEP**: 3 — Design-time limitation

**DESCRIPTION**: The requireAppAuthorization check is performed only at runtime. It does NOT run in design time for overview page cards. Therefore it is ineffective during adaptation projects or when using UI adaptation tools (for example, creating extension projects from Business Application Studio or Visual Studio Code). Plan testing and validation accordingly (check behavior in a running environment). 

**LANGUAGE**: text

**CODE**:
```
Notes:
- Design-time (adaptation/extension projects, BAS/VSCode UI adaptation): requireAppAuthorization is NOT checked
- Always validate authorization behavior in a deployed/running app
```
--------------------------------

**TITLE**: Set Criticality on Action Buttons (UI.DataFieldForAction)

**INTRODUCTION**: Show how to mark action buttons with semantic criticality (positive/negative) using annotations. Use these annotations in XML, ABAP CDS, or CAP CDS to render semantic action buttons in lists, object pages (header/footer), and inline table rows. Criticality is applied only to UI.DataFieldForAction and influences button styling and primary-action rules.

**TAGS**: fiori-elements-framework, annotations, UI.DataFieldForAction, criticality, SAP, CDS, ABAP, CAP, XML, ODataV4

**STEP**: 1 — XML Annotation: Add Criticality to a DataFieldForAction

**DESCRIPTION**: Add a UI.DataFieldForAction record and set the Criticality property to UI.CriticalityType/Positive or UI.CriticalityType/Negative. Use Determining=true to mark the action as determining (optional). Place the annotation in the appropriate metadata file (e.g., annotations.xml) for your Fiori elements app. This renders a semantic button (green for Positive, red for Negative).

**LANGUAGE**: XML

**CODE**:
```xml
<Record Type="UI.DataFieldForAction"> 
    <PropertyValue Property="Determining" Bool="true"/> 
    <PropertyValue Property="Label" String="Positive (Dummy)"/> 
    <PropertyValue Property="Action" String="com.c_salesordermanage_sd_aggregate.DummyBoundAction"/> 
    <PropertyValue Property="Criticality" EnumMember="UI.CriticalityType/Positive"/> 
</Record> 
```

**STEP**: 2 — ABAP CDS Annotation: DataFieldForAction with Criticality (CDS)

**DESCRIPTION**: Use ABAP CDS UI annotations to mark an action as type #FOR_ACTION. Provide a label and the dataAction identifier. Criticality in ABAP CDS is indicated by the action semantics; include this as part of the UI annotations in your CDS view where applicable.

**LANGUAGE**: ABAP CDS

**CODE**:
```
@UI.<lineItem/fieldGroup>: [  
  {
    label: 'Positive (Dummy)',
    dataAction: 'PUSHDOWN:com.c_salesordermanage_sd_aggregate.DummyBoundAction',
    type: #FOR_ACTION
  }
]  
```

**STEP**: 3 — CAP CDS (JSON) Annotation: DataFieldForAction with Criticality

**DESCRIPTION**: For CAP (Core Data Services) annotations in JSON format, define a UI.DataFieldForAction object, set Determining and Criticality (#Positive or #Negative), and specify the Action string. Add this JSON snippet into the UI annotation file or service metadata where CAP annotations are consumed.

**LANGUAGE**: JSON

**CODE**:
```
{
    $Type : 'UI.DataFieldForAction',
    Determining : true,
    Label : 'Positive (Dummy)',
    Action : 'com.c_salesordermanage_sd_aggregate.DummyBoundAction',
    Criticality : #Positive
}
```

**STEP**: 4 — Supported Criticality Values (Use these exact enum members or numeric equivalents)

**DESCRIPTION**: Use one of the two supported Criticality values when annotating UI.DataFieldForAction. You can use the enum member or numeric equivalents where applicable.

**LANGUAGE**: text

**CODE**:
```
UI.CriticalityType/Positive   (or numeric value 3)  => Positive / Green (Completed/Available/On Track/Acceptable)
UI.CriticalityType/Negative   (or numeric value 1)  => Negative / Red (Attention/Overload/Alert)
```

**STEP**: 5 — Rules, Contexts, and Constraints

**DESCRIPTION**: Follow these rules when using Criticality for actions. Place critical actions only where supported. Be aware of primary-action exclusivity and OData V4 header constraints.

**LANGUAGE**: text

**CODE**:
```
- Criticality is supported only for UI.DataFieldForAction.
- Supported UI locations: table row inline actions, object page header actions, object page footer actions.
- When an action is marked as critical (semantic), previously emphasized buttons (SAVE, EDIT, APPLY) are no longer emphasized.
- Emphasized buttons and semantic (critical) buttons cannot appear together as primary actions on the same page. Only one primary action is allowed (either emphasized or semantic).
- In SAP Fiori elements for OData V4, an object page header allows a critical action only as the left-most action.
- Add annotations to the metadata/annotation files appropriate for your application type (annotations.xml for XML, CDS view for ABAP CDS, or annotation JSON for CAP).
```

**STEP**: 6 — Visual Reference

**DESCRIPTION**: The platform will render semantic action buttons with visual cues (green/red). Use the provided image reference for design verification.

**LANGUAGE**: text

**CODE**:
```
Image reference: images/Criticality_for_Actions_e60c298.png
```
--------------------------------

**TITLE**: Setting the Default Column Width in SAP Fiori Elements

**INTRODUCTION**: This document explains how to control and override the automatically calculated default column width in SAP Fiori elements tables. It covers: built-in default sizes for common controls, constraints of the automatic algorithm, using the com.sap.vocabularies.HTML5.v1.CssDefaults annotation in XML and CAP CDS, configuring widths in manifest.json, and enabling inclusion of column headers in width calculation.

**TAGS**: fiori-elements-framework, annotations, com.sap.vocabularies.HTML5.v1.CssDefaults, manifest.json, CAP CDS, XML, UI.LineItem, column-width, table-settings

**STEP**: 1 — Default width behavior and limits

**DESCRIPTION**: Understand the automatic width calculation algorithm and limits. The framework computes default column widths using metadata (type, label, referenced properties, text arrangement). You can improve the algorithm by providing precise maxLength for String or Precision for numeric types. The calculated width is clamped to a lower limit of 3rem and an upper limit of 20rem.

Default widths for controls/UI elements:
- Images: 5 rem
- Rating indicator: 6.875 rem
- Progress indicator: 6.875 rem
- Charts: 20 rem

Use em, rem or % (percentage relative to table width) when specifying widths. On mobile phones the table column widths are adjusted automatically to use the available width.

**LANGUAGE**: text

**CODE**:
```text
Lower limit: 3rem
Upper limit: 20rem

Default widths:
- Images: 5 rem
- Rating indicator: 6.875 rem
- Progress indicator: 6.875 rem
- Charts: 20 rem
```

**STEP**: 2 — Set column width using Html5.CssDefaults annotation (XML)

**DESCRIPTION**: Apply com.sap.vocabularies.HTML5.v1.CssDefaults to individual LineItem fields in XML annotations to set a specific width for a column. Use units em, rem, or %.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.LineItem">
    <Collection>
        <Record Type="UI.DataFieldWithIntentBasedNavigation">
            <PropertyValue Property="SemanticObject" String="EPMSalesOrder" />
            <PropertyValue Property="Action" String="display_sttabupa" />
            <PropertyValue Property="Value" Path="bp_id" />
                <Annotation Term="com.sap.vocabularies.HTML5.v1.CssDefaults">
                    <Record>
                        <PropertyValue Property="width" String="10rem"/>
                    </Record>
                </Annotation>
        </Record>
        <Record Type="UI.DataField">
            <PropertyValue Property="Value" Path="currency_code" />
                <Annotation Term="com.sap.vocabularies.HTML5.v1.CssDefaults">
                    <Record>
                        <PropertyValue Property="width" String="15rem"/>
                    </Record>
                </Annotation>
        </Record>
    </Collection>
</Annotation>
```

**STEP**: 3 — Set column width using Html5.CssDefaults in CAP CDS

**DESCRIPTION**: In CAP (CDS) model annotations, use the ![@HTML5.CssDefaults] inline annotation to specify width for LineItem entries. The snippet below shows two line items with widths set to 10rem and 15rem respectively.

**LANGUAGE**: CDS

**CODE**:
```
LineItem : {
	{
		$Type : 'UI.DataFieldForIntentBasedNavigation',
		SemanticObject : 'EPMSalesOrder',
		Action : 'display_sttabupa',
		Value: 'bp_id',
		Label : 'IBN',
		![@HTML5.CssDefaults] : {width : '10rem'}
	},
	{
		$Type : 'UI.DataField',
		Value : currency_code,
		![@HTML5.CssDefaults] : {width : '15rem'}
	},
}
```

**STEP**: 4 — Configure column width in manifest.json (controlConfiguration)

**DESCRIPTION**: Set column width via manifest.json using controlConfiguration for the Generic Table control. Use the column key to identify the specific column (example key: "DataField::SalesOrderItemCategory"). Width accepts values such as "10em", "15rem", or percentages.

**LANGUAGE**: JSON

**CODE**:
```json
"controlConfiguration": {
    "_Item/@com.sap.vocabularies.UI.v1.LineItem": {
        "columns": {
            "DataField::SalesOrderItemCategory": {
                "width": "10em"
		    }
        }
    }
}
```

**STEP**: 5 — Include column label in width calculation (manifest.json tableSettings)

**DESCRIPTION**: When you want the default width calculation to include the column header label, enable widthIncludingColumnHeader in table settings. You can enable it globally under settings.tableSettings, and also enable it per-column using the column's fully qualified key.

**LANGUAGE**: JSON

**CODE**:
```json
"settings": {
    "tableSettings": {
        "multiEdit": {
            "enabled": true
        },
        "widthIncludingColumnHeader": true
    },
    "columns": {
        "com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation::bp_id": {
            "widthIncludingColumnHeader": true
        },
        "com.sap.vocabularies.UI.v1.DataField::gross_amount" : {
            "widthIncludingColumnHeader": true
        }
    }
}
```

**STEP**: 6 — Practical considerations and related resources

**DESCRIPTION**: Best practices and references:
- On mobile devices, table columns are auto-adjusted to fill available width.
- Use precise metadata (maxLength for String, Precision for numeric) to improve automatic sizing.
- Units supported: em, rem, % (relative to table width).
- For finding the correct column key to use in manifest.json controlConfiguration or settings, see "Finding the Right Key for the Anchor".
- For custom columns and extension points, see "Extension Points for Tables".

**LANGUAGE**: text

**CODE**:
```text
Notes:
- Mobile: columns auto-adjust to occupy the full available width.
- Units: em, rem, %
- Improve algorithm accuracy by providing maxLength (String) or Precision (numeric).
- Column key example: "DataField::SalesOrderItemCategory"
Related docs:
- Finding the Right Key for the Anchor (finding-the-right-key-for-the-anchor-6ffb084.md)
- Extension Points for Tables (extension-points-for-tables-d525522.md)
Image reference: images/Custom_Column_Width_5538367.png
```
--------------------------------

**TITLE**: Set table header text and visibility in Fiori Elements (manifest.json)

**INTRODUCTION**: This document shows how to set or hide a table header for Fiori Elements lists/tables by configuring controlConfiguration.tableSettings in manifest.json. Use these settings to override header text and header visibility per list/table or per LineItem annotation.

**TAGS**: fiori-elements-framework, manifest.json, table header, headerVisible, controlConfiguration, LineItem, tableSettings, HeaderInfo, com.sap.vocabularies.UI.v1

STEP: 1 — Source of the table header
DESCRIPTION: The table header is defined by the UI annotation com.sap.vocabularies.UI.v1.HeaderInfo (TypeNamePlural) in the service/annotations. You can read/define header text via that annotation. In Fiori Elements you can override or control the header text and its visibility from the app manifest using controlConfiguration.tableSettings.
LANGUAGE: JSON
CODE:
```json
// Annotation source (conceptual)
// Header in OData/annotations: com.sap.vocabularies.UI.v1.HeaderInfo TypeNamePlural
// Often defined in the service annotations; manifest.json can override/replace visibility/text.
```

STEP: 2 — Configure header text and visibility in manifest.json
DESCRIPTION: Add settings under sap.ui5.routing.targets.<TargetName>.options.settings.controlConfiguration.<AnnotationPath>.tableSettings. Use:
- header: string value to display as the table header
- headerVisible: boolean to show or hide the header in the UI

Place this JSON inside your application's manifest.json. The example below shows:
- a generic LineItem table configuration for SalesOrderManageList
- per-entityset LineItem configurations for the Object Page target (overrides for _Partner and _Item)
LANGUAGE: JSON
CODE:
```json
{
	"sap.ui5": {
		"routing": {
			"targets": {
				"SalesOrderManageList": {
					"options": {
						"settings": {
							"controlConfiguration": {
								"@com.sap.vocabularies.UI.v1.LineItem": {
									"tableSettings": {
										"header": "Another header",
										"headerVisible": true
									}
								}
							}
						}
					}
				},
				"SalesOrderManageObjectPage": {
					"options": {
						"settings": {
							"controlConfiguration": {
								"_Partner/@com.sap.vocabularies.UI.v1.LineItem": {
									"tableSettings": {
										"header": "Another header for the Partners",
										"headerVisible": true
									}
								},
								"_Item/@com.sap.vocabularies.UI.v1.LineItem": {
									"tableSettings": {
										"headerVisible": false
									}
								}
							}
						}
					}
				}
			}
		}
	}
}
```
--------------------------------

**TITLE**: Configure Table Type and Table Settings in manifest.json and Annotations

**INTRODUCTION**: This guide shows how to control which table type (ResponsiveTable, GridTable, AnalyticalTable, TreeTable) is rendered in SAP Fiori elements list report and object pages by configuring manifest.json and using OData annotations. It includes device/service selection logic (OData V2/V4), popin layout configuration for responsive tables, analytical-service annotations and aggregation settings, tree-table activation, and row count controls. Use the exact manifest and annotation snippets below when implementing.

**TAGS**: manifest.json, tableSettings, tableTypes, ResponsiveTable, GridTable, AnalyticalTable, TreeTable, popinLayout, aggregation, @Aggregation.ApplySupported, ODataV2, ODataV4, sap.fe, controlConfiguration, manifest

STEP: Available Table Types
DESCRIPTION: Use one of these values in tableSettings.type to select the rendered control.
LANGUAGE: JSON
CODE:
```json
{
  "tableSettings": {
    "type": "ResponsiveTable | GridTable | AnalyticalTable | TreeTable"
  }
}
```

STEP: Selection Logic — OData V2 & OData V4 (Summary)
DESCRIPTION: Implement selection fallback and automatic selection rules per runtime and service type:
- OData V2:
  - If manifest specifies analytical but entitySet lacks analytical capabilities → use GridTable as fallback.
  - If no type in manifest: smartphone/tablet → ResponsiveTable; desktop → analytical services → AnalyticalTable, otherwise ResponsiveTable.
- OData V4:
  - If manifest specifies analytical but entitySet lacks analytical capabilities → show empty table.
  - If no type in manifest → choose automatically:
    - Analytical services with @Aggregation.ApplySupported and required transformations → AnalyticalTable
    - Hierarchical services with @Aggregation.RecursiveHierarchy and @Hierarchy.RecursiveHierarchy with shared qualifier → TreeTable
    - Otherwise → ResponsiveTable
- Restrictions:
  - Grid, Tree, Analytical tables do not support multi-line content columns (FieldGroup, multi-line text).
LANGUAGE: text
CODE:
```
OData V2 and V4 selection rules and restrictions summarized:
- V2: Analytical fallback -> GridTable; device/service defaults apply.
- V4: Analytical specified w/o support -> empty table; otherwise auto-select based on annotations.
- Grid/Tree/Analytical: no multi-line content support.
```

STEP: Set Table Type for List Report (manifest.json sap.ui.generic.app)
DESCRIPTION: Add tableSettings.type under sap.ui.generic.app > pages to enforce a GridTable on the list report page.
LANGUAGE: JavaScript
CODE:
```js
"sap.ui.generic.app": {
    "pages": [
        {
            "entitySet": "Zfarvd_Bs_Hd_Bo",
            "component": {
                "name": "sap.suite.ui.generic.template.ListReport",
                "list": true,
                "settings": {
                    "tableSettings": {
                        "type": "GridTable"
                    }
                }
            }
        }
    ]
}
	
```

STEP: Set Table Type for Object Page Section (manifest.json sap.ui.generic.app)
DESCRIPTION: Define tableSettings.type inside the object page section to use a TreeTable for a section that navigates to ProductText.
LANGUAGE: JavaScript
CODE:
```js
"sap.ui.generic.app": {
    "pages": [
        {
            "entitySet": "STTA_C_MP_Product",
            "component": {
                "name": "sap.suite.ui.generic.template.ListReport",
                "list": true
            },
            "pages": [
                {
                    "entitySet": "STTA_C_MP_Product",
                    "component": {
                        "name": "sap.suite.ui.generic.template.ObjectPage",
                        "settings": {
                            "sections": {
                                "to_ProductText::com.sap.vocabularies.UI.v1.LineItem": {
                                    "navigationProperty": "to_ProductText",
                                    "entitySet": "STTA_C_MP_ProductText",
                                    "tableSettings": {
                                        "type": "TreeTable"
                                    }
                                }
                            }
                        }
                    }
                }
            ]
        }
    ]
}
```

STEP: tableSettings in Object Page vs Sections (precedence)
DESCRIPTION: Use tableSettings at section level to override the object page-level setting. Example: ObjectPage default ResponsiveTable overridden to GridTable in a section.
LANGUAGE: JavaScript
CODE:
```js
"pages": [
    {
        "entitySet": "STTA_C_MP_Product",
        "component": {
            "name": "sap.suite.ui.generic.template.ObjectPage",
            "settings": {
                "showRelatedApps": true,
                "tableSettings": {
                    "type": "ResponsiveTable"
                },
                "sections": {
                    "to_ProductText::com.sap.vocabularies.UI.v1.LineItem": {
                        "navigationProperty": "to_ProductText",
                        "entitySet": "STTA_C_MP_ProductText",
                        "tableSettings": {
                            "type": "GridTable"
                        }
                    }
                }
            }
        }
    }
]
```

STEP: Configure Table Type in sap.fe routing targets (OData V4 List Report)
DESCRIPTION: For SAP Fiori elements V4, set controlConfiguration.tableSettings inside sap.ui5 > routing > targets options to select a ResponsiveTable for the list report page.
LANGUAGE: JSON
CODE:
```
"targets": {
    "SalesOrderManageList": {
        "type": "Component",
        "id": "SalesOrderManageList",
        "name": "sap.fe.templates.ListReport",
        "options": {
            "settings": {
                "controlConfiguration": {
                    "@com.sap.vocabularies.UI.v1.LineItem": {
                        "tableSettings": {
                            "type": "ResponsiveTable"
                        }
                    }
                }
                ...
            }
        }
    }
}
```

STEP: Configure Table Type in sap.fe routing targets (OData V4 Object Page)
DESCRIPTION: For object page in sap.ui5 routing target, set controlConfiguration.tableSettings to GridTable for the object page LineItem.
LANGUAGE: JSON
CODE:
```
"targets": {
    "SalesOrderManageObjectPage": {
        "type": "Component",
        "id": "SalesOrderManageObjectPage",
        "name": "sap.fe.templates.ObjectPage",
        "options": {
            "settings": {
                "controlConfiguration": {
                    "_Item/@com.sap.vocabularies.UI.v1.LineItem": {
                        "tableSettings": {
                            "type": "GridTable"
                        }
                    }
                }
            }
        }
    }
}
```

STEP: Configure Popin Layout for ResponsiveTable (table-level)
DESCRIPTION: Set popinLayout in tableSettings for a responsive table (supports Block, GridLarge, GridSmall). This example sets GridSmall for the LineItem control.
LANGUAGE: JSON
CODE:
```
"controlConfiguration": {
    "@com.sap.vocabularies.UI.v1.LineItem": {
        "tableSettings": {
            "type": "ResponsiveTable",
            "popinLayout": "GridSmall"
        }
    },
    ...
}
```

STEP: Configure Default Popin Layout at Application Level (sap.fe)
DESCRIPTION: Define a defaultPopinLayout at application level under sap.fe.macros.table. Table-level popinLayout overrides this setting. Example sets GridLarge as application default.
LANGUAGE: JSON
CODE:
```
"sap.fe": {
    "macros": {
        "table":{
            "defaultPopinLayout": "GridLarge"
        }
    }
}
```

STEP: Annotate Service as Analytical — XML @Aggregation.ApplySupported
DESCRIPTION: Ensure analytical services include the @Aggregation.ApplySupported annotation with supported Transformations. Example XML lists supported transformation functions.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="Aggregation.ApplySupported">
    <Record>
        <PropertyValue Property="Transformations">
            <Collection>
                <String>filter</String>
                <String>identity</String>
                <String>orderby</String>
                <String>search</String>
                <String>skip</String>
                <String>top</String>
                <String>groupby</String>
                <String>aggregate</String>
                <String>concat</String>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

STEP: Annotate Service as Analytical — ABAP CDS & CAP
DESCRIPTION: Examples to mark aggregation support in ABAP CDS and CAP CDS.
LANGUAGE: Text
CODE:
```
// ABAP CDS
@OData.applySupportedForAggregation: #FULL

// CAP CDS (entity root)
@Aggregation.ApplySupported : {
}
```

STEP: Define Groupable Properties (XML & CAP)
DESCRIPTION: To allow grouping in analytical tables, declare GroupableProperties inside Aggregation.ApplySupported. Example XML and CAP show adding Segment and Country.
LANGUAGE: XML / CAP
CODE:
```xml
<!-- XML Annotation -->
<Annotations Target="sap.fe.managepartners.ManagePartnersService.Customers">
    <Annotation Term="Aggregation.ApplySupported">
        <PropertyValue Property="GroupableProperties">
            <Collection>
                <PropertyPath>Segment</PropertyPath>
                <PropertyPath>Country</PropertyPath>
            </Collection>
        </PropertyValue>
    </Annotation>
</Annotations>
```

```
// CAP CDS
@Aggregation.ApplySupported : {
    GroupableProperties: [Segment, Country]
}
```

STEP: Define Aggregatable Properties (measures) — XML, ABAP CDS, CAP examples
DESCRIPTION: Mark measures with Aggregation.default/@Analytics.Measure and define Aggregation.CustomAggregate at entity container level. Examples show XML, ABAP CDS, and CAP declarations.
LANGUAGE: XML / ABAP CDS / CAP
CODE:
```xml
<!-- XML Annotation -->
<Annotations Target="sap.fe.managepartners.ManagePartnersService.BusinessPartners/SalesAmount">
    <Annotation Term="Aggregation.default" EnumMember="Aggregation.defaultType/SUM"/>
    <Annotation Term="Analytics.Measure" Bool="true"/>
</Annotations>
...
<Annotations Target="sap.fe.managepartners.ManagePartnersService.EntityContainer">
    <Annotation Term="Aggregation.CustomAggregate" Qualifier="SalesAmount" String="Edm.Decimal"/>
</Annotations>
```

```
// ABAP CDS
@Aggregation.default: #SUM

SalesAmount
```

```
// CAP CDS
SalesAmount @Analytics.Measure : true @Aggregation.default : #SUM; //use the aggregation function you want
// At the entity level also define Aggregation.CustomAggregate with the property name as qualifier:
@Aggregation.CustomAggregate #SalesAmount : 'Edm.Decimal'
```

STEP: Enable/Disable Search Field for Analytical Service
DESCRIPTION: Include "search" in Transformations under Aggregation.ApplySupported to enable Search field (otherwise search disabled when Transformations present but omit 'search'). Examples: XML and CAP.
LANGUAGE: XML / CAP
CODE:
```xml
<!-- XML Annotation -->
<Annotations Target="sap.fe.managepartners.ManagePartnersService.Customers">
     <Annotation Term="Aggregation.ApplySupported">
          <Record Type="Aggregation.ApplySupportedType">
               <PropertyValue Property="Transformations">
                    <Collection>
                         <String>search</String>
                         <String>topcount</String>
                         <String>bottomcount</String>
                         <String>identity</String>
                         ...
                    </Collection>
               </PropertyValue>
          </Record>
      </Annotation>
</Annotations>
```

```
// CAP CDS
@Aggregation.ApplySupported : {
   Transformations : [
      'search',
      'topcount',
      'bottomcount',
      'identity',
      ...
   ],
}
```

STEP: Request Aggregation Based on Visible Columns (aggregationOnLeafLevel)
DESCRIPTION: Configure aggregationOnLeafLevel in analyticalConfiguration inside tableSettings to request aggregation only for visible columns. When true, navigation/bound actions require all entity key properties to be visible.
LANGUAGE: JSON
CODE:
```
"controlConfiguration":
{
    "@com.sap.vocabularies.UI.v1.LineItem":
     {        "tableSettings":
        {
            "type": "AnalyticalTable",
            "analyticalConfiguration":
            {
                "aggregationOnLeafLevel": true
            },
            "personalization": true
        }
    }
}
```

STEP: Require Transformation Filters on Back End for Aggregate Controls
DESCRIPTION: Ensure back end supports transformation filters for aggregate controls; add Transformations (e.g., filter) in @Aggregation.ApplySupported for aggregate entities. Example XML and CAP snippet for Transformations with filter.
LANGUAGE: XML / CAP
CODE:
```xml
<!-- XML Annotation -->
<Annotations Target="sap.fe.managepartners.ManagePartnersService.Customers">
     <Annotation Term="Aggregation.ApplySupported">
          <Record Type="Aggregation.ApplySupportedType">
               <PropertyValue Property="Transformations">
                    <Collection>
                         <String>filter</String>
                         ...
                    </Collection>
               </PropertyValue>
          </Record>
      </Annotation>
</Annotations>
```

```
// CAP CDS
@Aggregation.ApplySupported : {
   Transformations : [
      'filter',
      ...
   ],
}
```

STEP: Activate Tree Table (manifest controlConfiguration)
DESCRIPTION: To activate TreeTable, set tableSettings.type to "TreeTable" and provide the hierarchyQualifier; personalization can be enabled.
LANGUAGE: JSON
CODE:
```
"controlConfiguration": {
                "@com.sap.vocabularies.UI.v1.LineItem": {
                  "tableSettings": {
                    "type": "TreeTable",
                    "hierarchyQualifier": "SalesOrgHierarchy",
                    "personalization": true
                  }
                }
              }
```

STEP: Define Number of Visible Rows (rowCount, rowCountMode)
DESCRIPTION: Control number of visible rows with rowCount and rowCountMode inside tableSettings. rowCountMode values: Fixed, Auto, Interactive. Example sets GridTable to 10 Fixed rows and enables personalization. Note: rowCountMode doesn't apply to ResponsiveTable. If sectionLayout is Tabs and table is sole control, rowCountMode defaults to Auto.
LANGUAGE: JSON
CODE:
```
"controlConfiguration": {
    "@com.sap.vocabularies.UI.v1.LineItem": {
        "tableSettings": {
	            "type": "GridTable",
                    "rowCount": 10,
                    "rowCountMode": "Fixed"
                    "personalization": true,
                     ...
        }
    },
    ...
}
```

STEP: Draft-Enabled Service Behavior with Analytical/Tree Tables (summary)
DESCRIPTION: When using draft-enabled services with analytical or tree tables on the list report:
- Only active entities displayed
- Editing Status not shown in filter bar
- Draft indicator shown for active record with draft
- New objects must be saved or discarded
- Saved objects: draft management unchanged
- Analytical table on object/custom page is read-only (no create/delete); tree table not affected
- Analytical/Tree table not allowed in List Report with draft service in flexible column layout
LANGUAGE: text
CODE:
```
Draft-enabled service rules for analytical/tree tables:
- Active entities only
- Editing Status hidden in filter bar
- Draft indicator visible if draft exists
- New objects require save/discard
- Analytical on OP/custom: read-only (no create/delete)
- Prohibited in FCL for list report
```

STEP: References and Next Steps
DESCRIPTION: Use these docs for deeper details and constraints:
- Tables (detailed table types)
- Settings for List Report Tables
- Enabling Standard List Items and Object List Items
- Settings for Object Page Tables
- Table Groupings
LANGUAGE: text
CODE:
```
See: tables-c0f6592.md
See: settings-for-list-report-tables-4c2d17a.md
See: enabling-standard-list-items-and-object-list-items-4ed47aa.md
See: settings-for-object-page-tables-47425bb.md
See: table-groupings-d344c5a.md
```
--------------------------------

**TITLE**: Setting Units of Measure for Numeric Properties (OData / Annotations / CAP)

**INTRODUCTION**: This document shows three ways to attach units/currency to numeric properties so UI (Fiori elements) displays the unit next to values: 1) add sap:unit and sap:semantics in the OData metadata (XML) EntityType, 2) add OData XML annotation entries using Org.OData.Measures.V1.Unit and Org.OData.Measures.V1.ISOCurrency, and 3) add CAP CDS annotations using @Measures.Unit and @Measures.ISOCurrency. Use the metadata approach when you control the service metadata; use annotation files when you cannot modify metadata; use CAP CDS in SAP CAP projects.

**TAGS**: fiori-elements-framework, odata, annotations, unit-of-measure, currency, sap, CAP, CDS, XML

**STEP**: 1 — Add sap:unit / sap:semantics in OData metadata (EntityType)
**DESCRIPTION**: In the OData metadata XML, set the sap:unit attribute on numeric (measure) properties to reference the property that holds the unit/currency code. Mark unit/currency properties with sap:semantics where appropriate (e.g., "unit-of-measure", "currency-code"). This modifies the service metadata so clients automatically render units next to numeric values.
**LANGUAGE**: XML
**CODE**:
```xml
<EntityType Name="Product" sap:content-version="1">
    <Key>
        <PropertyRef Name="ProductID"/>
    </Key>
    <Property Name="ProductID" Type="Edm.String" Nullable="false" MaxLength="10" sap:label="Product ID" sap:updatable="false"/>
    <Property Name="TypeCode" Type="Edm.String" MaxLength="2" sap:label="Prod. Type Code"/>
    <Property Name="Category" Type="Edm.String" MaxLength="40" sap:label="Prod. Cat."/>
    <Property Name="Name" Type="Edm.String" MaxLength="255" sap:label="Product Name" sap:sortable="false" sap:filterable="false"/>
    <Property Name="NameLanguage" Type="Edm.String" MaxLength="1" sap:label="Language" sap:creatable="false" sap:updatable="false" sap:sortable="false" sap:filterable="false"/>
    <Property Name="Description" Type="Edm.String" MaxLength="255" sap:label="Prod.Descrip." sap:sortable="false" sap:filterable="false"/>
    <Property Name="DescriptionLanguage" Type="Edm.String" MaxLength="1" sap:label="Language" sap:creatable="false" sap:updatable="false" sap:sortable="false" sap:filterable="false"/>
    <Property Name="SupplierID" Type="Edm.String" MaxLength="10" sap:label="Bus. Part. ID"/>
    <Property Name="SupplierName" Type="Edm.String" MaxLength="80" sap:label="Company Name" sap:creatable="false" sap:updatable="false"/>
    <Property Name="TaxTarifCode" Type="Edm.Byte" sap:label="Prod. Tax Code"/>
    <Property Name="MeasureUnit" Type="Edm.String" MaxLength="3" sap:label="Qty. Unit" sap:semantics="unit-of-measure"/>
    <Property Name="WeightMeasure" Type="Edm.Decimal" Precision="13" Scale="3" sap:unit="WeightUnit" sap:label="Wt. Measure"/>
    <Property Name="WeightUnit" Type="Edm.String" MaxLength="3" sap:label="Qty. Unit" sap:semantics="unit-of-measure"/>
    <Property Name="CurrencyCode" Type="Edm.String" MaxLength="5" sap:label="Currency" sap:semantics="currency-code"/>
    <Property Name="Price" Type="Edm.Decimal" Precision="16" Scale="3" sap:unit="CurrencyCode" sap:label="Unit Price"/>
    <Property Name="Width" Type="Edm.Decimal" Precision="13" Scale="3" sap:unit="DimUnit" sap:label="Dimensions"/>
    <Property Name="Depth" Type="Edm.Decimal" Precision="13" Scale="3" sap:unit="DimUnit" sap:label="Dimensions"/>
    <Property Name="Height" Type="Edm.Decimal" Precision="13" Scale="3" sap:unit="DimUnit" sap:label="Dimensions"/>
    <Property Name="DimUnit" Type="Edm.String" MaxLength="3" sap:label="Dim. Unit" sap:semantics="unit-of-measure"/>
    <Property Name="CreatedAt" Type="Edm.DateTime" Precision="7" sap:label="Time Stamp" sap:creatable="false" sap:updatable="false"/>
    <Property Name="ChangedAt" Type="Edm.DateTime" Precision="7" ConcurrencyMode="Fixed" sap:label="Time Stamp" sap:creatable="false" sap:updatable="false"/>
    <NavigationProperty Name="ToSalesOrderLineItems" Relationship="GWSAMPLE_BASIC.Assoc_Product_SalesOrderLineItems" FromRole="FromRole_Assoc_Product_SalesOrderLineItems" ToRole="ToRole_Assoc_Product_SalesOrderLineItems"/>
    <NavigationProperty Name="ToSupplier" Relationship="GWSAMPLE_BASIC.Assoc_BusinessPartner_Products" FromRole="ToRole_Assoc_BusinessPartner_Products" ToRole="FromRole_Assoc_BusinessPartner_Products"/>
</EntityType>
```

**STEP**: 2 — Add OData XML Annotations (annotation document)
**DESCRIPTION**: If you cannot change service metadata, add annotation entries in a separate XML annotation file. Use Term="Org.OData.Measures.V1.Unit" with Path pointing to the unit property, and Term="Org.OData.Measures.V1.ISOCurrency" with Path pointing to the currency code property. The Target must be "Namespace.EntityType/Property".
**LANGUAGE**: XML
**CODE**:
```xml
<Annotations Target="GWSAMPLE_BASIC.Product/WeightMeasure">
    <Annotation Term="Org.OData.Measures.V1.Unit" Path="WeightUnit"/>
</Annotations>
<Annotations Target="GWSAMPLE_BASIC.Product/Width">
    <Annotation Term="Org.OData.Measures.V1.Unit" Path="DimUnit"/>
</Annotations>
<Annotations Target="GWSAMPLE_BASIC.Product/Depth">
    <Annotation Term="Org.OData.Measures.V1.Unit" Path="DimUnit"/>
</Annotations>
<Annotations Target="GWSAMPLE_BASIC.Product/Height">
    <Annotation Term="Org.OData.Measures.V1.Unit" Path="DimUnit"/>
</Annotations>
<Annotations Target="GWSAMPLE_BASIC.Product/Price">
    <Annotation Term="Org.OData.Measures.V1.ISOCurrency" Path="CurrencyCode"/>
</Annotations>
```

**STEP**: 3 — Add CAP CDS annotations (SAP CAP model files)
**DESCRIPTION**: In CAP CDS model files, annotate the entity's properties using @Measures.Unit and @Measures.ISOCurrency. Each annotate block attaches the measure semantic to the target property. Place these annotate statements in the same CDS model or in a separate .cds file that augments the entity.
**LANGUAGE**: CDS
**CODE**:
```
annotate GWSAMPLE_BASIC.Product with {
  @Measures.Unit : WeightUnit
  WeightMeasure
};

annotate GWSAMPLE_BASIC.Product with {
  @Measures.Unit : DimUnit
  Width
};

annotate GWSAMPLE_BASIC.Product with {
  @Measures.Unit : DimUnit
  Depth
};

annotate GWSAMPLE_BASIC.Product with {
  @Measures.Unit : DimUnit
  Height
};

annotate GWSAMPLE_BASIC.Product with {
  @Measures.ISOCurrency : CurrencyCode
  Price
};
```

**STEP**: 4 — ABAP CDS annotation
**DESCRIPTION**: No ABAP CDS annotation sample is provided in this source. If developing on ABAP stack, use local XML annotation files (OData XML annotations) to define units and currencies as shown above.
**LANGUAGE**: PlainText
**CODE**:
```
No ABAP CDS annotation sample is available. Please use the local XML annotation.
```
--------------------------------

**TITLE**: Setting Up the Object Page Header (UI.HeaderInfo)

**INTRODUCTION**: This guide shows exactly how to define the Object Page header (UI.HeaderInfo) using OData XML annotations, ABAP CDS annotations, or CAP CDS annotations. Follow the mappings and sample snippets to set title, subtitle/description, image, type name, type image/icon, and initials. Use these annotations in your annotation files (OData annotation XML) or CDS views to render the header in Fiori Elements object pages.

**TAGS**: fiori-elements, annotations, UI.HeaderInfo, object-page, HeaderInfo, CDS, OData, CAP

**STEP**: 1 — Choose header type and reference docs

**DESCRIPTION**: Decide whether to use the dynamic header or the standard header. The object page supports the dynamic header. See the control reference for options and behavior before implementing annotations.

- Refer to: ../10_More_About_Controls/object-page-header-6e340c1.md

**LANGUAGE**: Text

**CODE**:
```text
Reference: ../10_More_About_Controls/object-page-header-6e340c1.md
```

**STEP**: 2 — Map vocabulary properties to header fields

**DESCRIPTION**: Use these vocabulary properties in the UI.HeaderInfo annotation to control header display. Apply them in OData annotation XML, ABAP CDS, or CAP CDS.

- com.sap.vocabularies.UI.v1.HeaderInfo/Title/Value  -> object title
- com.sap.vocabularies.UI.v1.HeaderInfo/Description/Value -> subtitle
- com.sap.vocabularies.UI.v1.HeaderInfo/ImageUrl -> image URL for the instance
- com.sap.vocabularies.UI.v1.HeaderInfo/TypeName -> text for link back to list report (object type)
- com.sap.vocabularies.UI.v1.HeaderInfo/TypeImageUrl -> icon for object type
- com.sap.vocabularies.UI.v1.HeaderInfo/Initials -> initials fallback

Include TypeNamePlural to show plural label where appropriate.

**LANGUAGE**: Text

**CODE**:
```text
Vocabularies to use:
- HeaderInfo.Title.Value
- HeaderInfo.Description.Value
- HeaderInfo.ImageUrl
- HeaderInfo.TypeName
- HeaderInfo.TypeImageUrl
- HeaderInfo.Initials
- HeaderInfo.TypeNamePlural
```

**STEP**: 3 — Understand the main header elements (visual mapping)

**DESCRIPTION**: The typical object page header includes:
1. Title (Object Type) — Title.Value
2. Image of object instance — ImageUrl
3. Language-dependent product text — Title.Value (localized field)
4. Product title — Description.Value or additional DataField

The sample diagram (if needed) is included as an image in the docs resources.

**LANGUAGE**: Text

**CODE**:
```text
Image file (diagram): images/Object_Page_Header_Main_Elements_698018b.png
```

**STEP**: 4 — Implement UI.HeaderInfo via OData XML annotations

**DESCRIPTION**: Add the following UI.HeaderInfo annotation to your OData annotation XML file (service annotations or local annotation file). This example maps a SalesOrder title, description, image, and type names.

Place in your annotation XML where other UI annotations live or attach to the relevant EntityType.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.HeaderInfo">
     <Record Type="UI.HeaderInfoType">
          <PropertyValue Property="Description">
               <Record Type="UI.DataField">
                    <PropertyValue Property="Value" Path="SalesOrderTypeName"/>
               </Record>
          </PropertyValue>
          <PropertyValue Property="ImageUrl" Path="ImageUrl"/>
          <PropertyValue Property="Title">
               <Record Type="UI.DataField">
                    <PropertyValue Property="Value" Path="SalesOrder"/>
               </Record>
          </PropertyValue>
          <PropertyValue Property="TypeName" String="Sales Order"/>
          <PropertyValue Property="TypeNamePlural" String="Sales Orders"/>
     </Record>
</Annotation>
```

**STEP**: 5 — Implement UI.headerInfo in ABAP CDS

**DESCRIPTION**: Add the @UI.headerInfo annotation to your ABAP CDS view. Use typeName/typeNamePlural, imageUrl column, and DataField-like structures for title and description. Annotate the view (example uses STTA_C_MP_PRODUCT).

**LANGUAGE**: ABAP

**CODE**:
```abap
@UI.headerInfo: {
  typeName: 'Product',
  typeNamePlural: 'Products',
  imageUrl: 'PRODUCTPICTUREURL',
  title: {
    value: '_PRODUCTTEXTINCURRENTLANG.NAME',
    type: #STANDARD
  },
  description: {
    value: 'PRODUCT',
    type: #STANDARD
  }
}
annotate view STTA_C_MP_PRODUCT with {

}
```

**STEP**: 6 — Implement UI.HeaderInfo in CAP CDS

**DESCRIPTION**: In CAP model or annotation file, declare UI.HeaderInfo with TypeName/TypeNamePlural, map ImageUrl to the entity element, and set Title/Description using UI.DataField ($Type: 'UI.DataField') and Value references.

**LANGUAGE**: CDS

**CODE**:
```cds
UI.HeaderInfo : {
    TypeName : 'Product',
    TypeNamePlural : 'Products',
    ImageUrl : ProductPictureURL,
    Title : {
        $Type : 'UI.DataField',
        Value : to_ProductTextInCurrentLang.Name
    },
    Description : {
        $Type : 'UI.DataField',
        Value : Product
    }
}
```

**STEP**: 7 — Optional: Images, initials, icons, and custom status

**DESCRIPTION**: Use ImageUrl, TypeImageUrl, and Initials for icons and initials behavior. For advanced display options and usage examples, consult the dedicated docs. To display a custom status message in the object page header, use extension points for header facets.

- Using images, initials, and icons doc: using-images-initials-and-icons-5760b63.md
- Extension points for object page header facets: extension-points-for-object-page-header-facets-61cf0ee.md

**LANGUAGE**: Text

**CODE**:
```text
See:
- using-images-initials-and-icons-5760b63.md
- extension-points-for-object-page-header-facets-61cf0ee.md
```
--------------------------------

**TITLE**: Configuring Display of Editing Status in List Report Tables

**INTRODUCTION**: This guide explains how to ensure draft/editing statuses (Draft, Unsaved Changes by Another User, Locked by Another User) appear correctly in Fiori Elements list report tables. It covers standard behavior (responsive vs grid tables), the OData V2 fallback rules, and the relevant annotation examples (SemanticKey, LineItem, HeaderInfo) required to control where the editing status is rendered.

**TAGS**: fiori-elements-framework, list-report, editing-status, draft, annotations, OData-v2, LineItem, SemanticKey, HeaderInfo, manifest.json

**STEP**: 1 — Verify draft support in the service

**DESCRIPTION**: Ensure the OData service supports draft handling. The application must be draft-enabled on the backend (Draft Root annotation present). Without draft support, the Fiori Elements list report will not display editing status information.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Example: mark an EntityType or EntitySet as draft-enabled using the Common DraftRoot annotation -->
<Annotations Target="YourService.YourEntityType">
  <Annotation Term="com.sap.vocabularies.Common.v1.DraftRoot" />
</Annotations>
```

**STEP**: 2 — Provide a Semantic Key for consistent placement of editing status

**DESCRIPTION**: Add com.sap.vocabularies.Common.v1.SemanticKey to the entity type. When a semantic key is present and included in the table LineItem, the editing status will be shown in the column where the first semantic key appears (responsive table: key column; grid table: separate column next to key column).

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Example: define a SemanticKey for the entity -->
<Annotations Target="YourService.YourEntityType">
  <Annotation Term="com.sap.vocabularies.Common.v1.SemanticKey">
    <Collection>
      <PropertyPath>SalesOrderID</PropertyPath>
      <PropertyPath>ItemPosition</PropertyPath>
    </Collection>
  </Annotation>
</Annotations>
```

**STEP**: 3 — Define LineItem annotation (table columns) including semantic key fields

**DESCRIPTION**: Define the LineItem annotation to list the table columns. Include the semantic key properties as DataField entries so the editing status is placed in the expected column. If the semantic key fields are in the LineItem, draft indicators are shown in that column for responsive tables or in a dedicated column for grid tables.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Example: LineItem with DataField entries; include the semantic key properties -->
<Annotations Target="YourService.YourEntityType">
  <Annotation Term="com.sap.vocabularies.UI.v1.LineItem">
    <Collection>
      <Record Type="com.sap.vocabularies.UI.v1.DataField">
        <PropertyValue Property="Label" String="Sales Order"/>
        <PropertyValue Property="Value"><PropertyPath>SalesOrderID</PropertyPath></PropertyValue>
      </Record>
      <Record Type="com.sap.vocabularies.UI.v1.DataField">
        <PropertyValue Property="Label" String="Item"/>
        <PropertyValue Property="Value"><PropertyPath>ItemPosition</PropertyPath></PropertyValue>
      </Record>
      <!-- additional DataField entries -->
    </Collection>
  </Annotation>
</Annotations>
```

**STEP**: 4 — Provide HeaderInfo (Title/Description) for OData V2 fallback behavior

**DESCRIPTION**: For OData V2 scenarios where a semantic key is not added to the LineItem, the system falls back to showing draft information in the Title or Description column. Provide HeaderInfo with Title and/or Description paths so the fallback can locate a column to display the editing status.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Example: HeaderInfo providing Title and Description for fallback -->
<Annotations Target="YourService.YourEntityType">
  <Annotation Term="com.sap.vocabularies.UI.v1.HeaderInfo">
    <Record>
      <PropertyValue Property="Title">
        <Record Type="com.sap.vocabularies.UI.v1.DataField">
          <PropertyValue Property="Value"><PropertyPath>TitleField</PropertyPath></PropertyValue>
        </Record>
      </PropertyValue>
      <PropertyValue Property="Description">
        <Record Type="com.sap.vocabularies.UI.v1.DataField">
          <PropertyValue Property="Value"><PropertyPath>DescriptionField</PropertyPath></PropertyValue>
        </Record>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

**STEP**: 5 — Understand where editing status is displayed

**DESCRIPTION**: Summary of rendering rules to implement/verify in annotations and configuration:
- Responsive table: editing status appears in the key column (where the first semantic key DataField appears).
- Grid table: editing status appears in a separate column next to the key column.
- OData V2 fallback: if no semantic key is provided in LineItem, editing status is shown in Title or Description column (the system checks HeaderInfo and then LineItem Title/Value/Path).

**LANGUAGE**: Plain text

**CODE**:
```text
Behavior summary:
- ResponsiveTable -> status displayed in key column (first semantic key column)
- GridTable      -> status displayed in a separate column next to the key column
- OData V2       -> If no LineItem semantic key: try Title (HeaderInfo) or Description; if not found, check LineItem Title/Value/Path
```

**STEP**: 6 — (Optional) Configure table type in manifest.json

**DESCRIPTION**: Configure the list report template to use a responsive or grid table. The property name depends on the template version (sap.ui.generic.app or sap.fe.templates). Use this manifest setting to control whether the app renders ResponsiveTable or GridTable (which affects placement of editing status).

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui.generic.app": {
    "settings": {
      "tableType": "ResponsiveTable" // options: "ResponsiveTable" or "GridTable"
    }
  }
}
```
--------------------------------

**TITLE**: Settings for Object Page Tables in manifest.json

**INTRODUCTION**: This guide shows where and how to configure table-related settings for Object Pages in an SAP Fiori elements application using the application's manifest.json. It provides a clear, editable JSON template to copy and adapt for specifying table behavior and appearance on Object Pages.

**TAGS**: fiori-elements-framework, object-page, manifest.json, tables, settings

**STEP**: 1 — Locate manifest.json

**DESCRIPTION**: Open the application's manifest.json at the project root. Object Page table settings belong inside the app descriptor where the Object Page (generic template) is defined. Typically this is under "sap.ui.generic.app" -> "pages" (or under the routing target that references the Object Page component). If your app uses component-based pages, similar settings live under the corresponding page/component settings.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui.generic.app": {
    "pages": {
      "YourEntitySet::ObjectPage": {
        "component": {
          "name": "sap.suite.ui.generic.template.ObjectPage",
          "settings": {
            // table settings go here
          }
        }
      }
    }
  }
}
```

**STEP**: 2 — Add table-specific settings (example template)

**DESCRIPTION**: Insert table-specific configuration inside the Object Page component's "settings" node. Adapt keys and values to your app's needs. This template shows common configurable areas: table type, selection mode, visible fields, and action enablement. Replace placeholder names and arrays with your actual entity set and field names.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui.generic.app": {
    "pages": {
      "YourEntitySet::ObjectPage": {
        "component": {
          "name": "sap.suite.ui.generic.template.ObjectPage",
          "settings": {
            "tableSettings": {
              "type": "ResponsiveTable",        // e.g., ResponsiveTable, AnalyticalTable, GridTable
              "mode": "SingleSelect",          // e.g., None, SingleSelect, MultiSelect
              "enableExport": true,            // enable/disable export actions
              "visibleFields": [               // fields/columns to show on the table
                "Field1",
                "Field2",
                "Field3"
              ],
              "preserveSelection": true,       // keep selection on navigation
              "initialSort": [                 // optional initial sort configuration
                {
                  "path": "Field1",
                  "descending": false
                }
              ],
              "filters": {                     // optional filter defaults
                "Field2": {
                  "operator": "EQ",
                  "value": "SomeValue"
                }
              },
              "customActions": [               // optional actions added to the table toolbar
                {
                  "id": "actionId",
                  "text": "Do Action",
                  "enabled": true
                }
              ]
            }
          }
        }
      }
    }
  }
}
```

**STEP**: 3 — Validate and extend

**DESCRIPTION**: After adding settings:
- Validate JSON (no trailing commas).
- Ensure the "pages" key and entity set names match your app routing and annotations.
- Extend settings with framework- or project-specific keys as required (e.g., annotation-driven keys or additional template-specific switches).
- Test in the app to confirm the Object Page table reflects the configured settings.

**LANGUAGE**: Plain text

**CODE**:
```text
Notes:
- Replace "YourEntitySet::ObjectPage" with the actual page key used in your manifest routing/pages.
- Use only keys supported by your Fiori elements/template version; consult the specific framework documentation for all supported table settings and exact key names.
```
--------------------------------

**TITLE**: Sharing Overview Pages (SAP Fiori)

**INTRODUCTION**: Describe how to share the current state of an SAP Fiori overview page either as a tile on the SAP Fiori Launchpad or by sending an email link. This is used when you need to preserve the filter-bar state for later access or distribute a direct link representing the current view.

**TAGS**: fiori-elements-framework, sap-fiori, launchpad, sharing, overview-page, email

**STEP**: Save Overview Page as Tile on SAP Fiori Launchpad

**DESCRIPTION**: Store the current filter-bar state of an overview page as a tile on the SAP Fiori Launchpad. This enables users to open the application later with the same filter settings applied. Use the exact UI flow to ensure automation scripts or documentation reference the correct labels.

- UI steps to perform:
  - On the filter bar, click "Share"
  - Select "Save As Tile"
  - Fill required fields in the tile creation dialog (title, subtitle, semantic object, etc., as applicable)
  - Click "Ok" to save the tile

- Notes for automation or code-driven flows:
  - Target the "Share" control of the filter bar.
  - Ensure the tile creation dialog is fully loaded before filling fields.
  - Validate that the saved tile reopens the application with the same filter-bar state.

**LANGUAGE**: User Actions

**CODE**:
```User Actions
# Manual/automation steps (no code required)
1. Click: Filter bar -> "Share"
2. Click: "Save As Tile"
3. Fill required fields in dialog
4. Click: "Ok"
```

**STEP**: Share Overview Page via Email Link

**DESCRIPTION**: Generate an email containing a link to the overview page that preserves the current filter-bar state. This allows recipients to open the application directly with the same view.

- UI steps to perform:
  - On the filter bar, click "Share"
  - Select "Send Email"
  - The application generates an email draft (or triggers the mail client) containing a link that encodes the current state

- Notes for automation or code-driven flows:
  - Target the "Share" control of the filter bar.
  - Confirm the generated link includes the relevant state parameters (used by the application to restore filters).
  - If validating programmatically, capture the link string from the email draft or mail client invocation.

**LANGUAGE**: User Actions

**CODE**:
```User Actions
# Manual/automation steps (no code required)
1. Click: Filter bar -> "Share"
2. Click: "Send Email"
3. Verify email draft contains link to the overview page that preserves current filter-bar state
```
--------------------------------

**TITLE**: Showing and Hiding Content in Object Page Facets (SAP Fiori Elements)

**INTRODUCTION**: Configure visibility controls on Object Page reference facets and the fields inside them. Set the UI.PartOfPreview annotation to false to enable: (1) Show More / Show Less for reference facets (additional facets in a collection) and (2) Show Details / Hide Details for fields/tables inside a visible reference facet. Includes XML, ABAP CDS and CAP CDS examples. Applicable for OData V4 Object Page floorplan.

**TAGS**: fiori-elements-framework, OData V4, UI.PartOfPreview, reference-facet, fieldgroup, object-page, SAPUI5, CDS, CAP, ABAP

STEP: 1 — Enable Show More / Show Less for Reference Facets

DESCRIPTION: Add UI.PartOfPreview = false to the UI.ReferenceFacet record to mark that facet as not part of the preview. SAP Fiori Elements will render Show More (if hidden facets exist) and Show Less (after expansion) controls. This applies when the reference facet is implemented under a collection facet and the target is a FieldGroup (form). If you do not set the annotation explicitly, the default is UI.PartOfPreview = true.

LANGUAGE: XML

CODE:
```xml
<Record Type="UI.ReferenceFacet">
    <PropertyValue Property="Label" String="{@i18n>@ShipToAddress}"/>
    <PropertyValue Property="ID" String="ShipToAddress"/>
    <PropertyValue Property="Target"
    AnnotationPath="@UI.FieldGroup#ShipToAddress"/>
    <Annotation Term="UI.PartOfPreview" Bool="false"/>
</Record>
```

LANGUAGE: ABAP CDS

CODE:
```abap
@UI.Facet: [{
        type: #FIELDGROUP_REFERENCE,
        label: 'Ship-To Address',
        targetQualifier: 'ShipToAddress',
        isPartOfPreview: false
}]
```

LANGUAGE: CAP CDS

CODE:
```cds
Facets: [{
    $Type : 'UI.ReferenceFacet',
    Label : '{@i18n>@ShipTo_NotPartOfPreview}',
    Target : '@UI.FieldGroup#ShipToAddress',
    ![@UI.PartOfPreview] : false
}]
```

STEP: 2 — Enable Show Details / Hide Details for Fields (inside a visible reference facet)

DESCRIPTION: To enable Show Details / Hide Details in the facet toolbar (for tables and data fields inside a reference facet), set UI.PartOfPreview = false on the DataField entries (or Data entries in a FieldGroup). This only works for fields/tables that are part of a reference facet that is initially visible. You cannot apply this to fields inside a facet that is initially hidden, and you cannot nest UI.PartOfPreview (i.e., you cannot make fields controllable if their parent facet is initially hidden).

LANGUAGE: XML

CODE:
```xml
<Record Type="UI.DataField">
    <PropertyValue Property="Label" String="{@i18n>@StreetName}" />
    <PropertyValue Property="Value" Path="StreetName" />
    <Annotation Term="UI.PartOfPreview" Bool="false" />
</Record>
```

LANGUAGE: CAP CDS

CODE:
```cds
FieldGroup#ShipToAddress: {
    Data: [{
            $Type                : 'UI.DataField',
            Label                : '{@i18n>@StreetName}',
            Value                : StreetName,
            ![@UI.PartOfPreview] : false
    }]
}
```

LANGUAGE: ABAP CDS

CODE:
```text
(No ABAP CDS sample available for showing/hiding fields inside reference facets — use local XML annotation.)
```

STEP: 3 — Restrictions and Notes

DESCRIPTION:
- Applicable only to reference facets with a FieldGroup target (form representation). Not applicable to reference facets that target a table or chart.
- Show More / Show Less: feature available for reference facets that are implemented under a collection facet.
- Show Details / Hide Details: available for tables and data fields included in a visible reference facet only. Cannot use for fields/tables in a reference facet that is initially hidden (no nesting).
- Default behavior: if UI.PartOfPreview is not set, it defaults to true (i.e., part of preview / always visible).
- For live examples and further exploration, see SAP Fiori development portal Global Patterns - Show/Hide Content:
  https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/topic/floorplanObjectPage/showHideContent
--------------------------------

**TITLE**: Side Effect Annotation Examples for SAP Fiori Elements (OData V2 & V4)

**INTRODUCTION**: Collection of ready-to-use side effect annotation examples (XML and ABAP/CDS) for SAP Fiori Elements. Use these snippets to annotate OData V2 services (annotation files or MPC_EXT class) and RAP/CDS models (ABAP CDS) to trigger function imports, refresh properties/entities/navigation targets, and configure action-related side effects.

**TAGS**: fiori-elements-framework, side-effects, annotations, OData V2, OData V4, XML, ABAP, CDS, TriggerAction, MPC_EXT, function-import

**STEP**: TriggerAction — Call function import to recalculate properties on source property change

**DESCRIPTION**: Add this XML SideEffects annotation to your local annotation file or service annotations. When UnitPrice or ProductQuantity is modified and validated, call the function import CalculatePriceIncludingRegionalTax to recalculate GrossPrice and NetPriceIncludingTax.

**LANGUAGE**: XML

**CODE**:
```XML
<Annotations Target="STTA_SALES_ORDER_WD_20_SRV.C_STTA_SalesOrder_WD_20Type">
    <Annotation Term="com.sap.vocabularies.Common.v1.SideEffects" Qualifier="CalculatePrice">
        <Record>
            <PropertyValue Property="SourceProperties">
                <Collection>
                    <PropertyPath>UnitPrice</PropertyPath>
                    <PropertyPath>ProductQuantity</PropertyPath>
                </Collection>
            </PropertyValue>
            <PropertyValue Property="TargetProperties">
                <Collection>
                    <String>GrossPrice</String>
                    <String>NetPriceIncludingTax</String>
                </Collection>
            </PropertyValue>
            <PropertyValue Property="TriggerAction" String="STTA_SALES_ORDER_WD_20_SRV.STTA_SALES_ORDER_WD_20_SRV_Entities/CalculatePriceIncludingRegionalTax"/>
        </Record>
    </Annotation>
</Annotations>
```

**STEP**: TriggerAction — Call function import without targets (no refresh)

**DESCRIPTION**: Configure a side effect to call a TriggerAction function import but without specifying TargetProperties/TargetEntities. Use this to execute server-side logic without triggering any UI refresh automatically.

**LANGUAGE**: XML

**CODE**:
```XML
<Annotations Target="STTA_SALES_ORDER_WD_20_SRV.C_STTA_SalesOrder_WD_20Type">
    <Annotation Term="com.sap.vocabularies.Common.v1.SideEffects" Qualifier="CalculatePrice">
        <Record>
            <PropertyValue Property="SourceProperties">
                <Collection>
                    <PropertyPath>UnitPrice</PropertyPath>
                    <PropertyPath>ProductQuantity</PropertyPath>
                </Collection>
            </PropertyValue>
            <PropertyValue Property="TriggerAction" String="STTA_SALES_ORDER_WD_20_SRV.STTA_SALES_ORDER_WD_20_SRV_Entities/CalculatePriceIncludingRegionalTax"/>
        </Record>
    </Annotation>
</Annotations>
```

**STEP**: Define Side Effects in MPC_EXT (ABAP) — create annotations programmatically in DEFINE

**DESCRIPTION**: In the DEFINE method of an MPC_EXT class, create vocabulary references, include namespaces, and build a SideEffects annotation programmatically. Example shows creating SourceProperties collection (Supplier, CompanyCode, DocumentCurrency, PurchasingGroup, PurchasingOrganization).

**LANGUAGE**: ABAP

**CODE**:
```ABAP
* define Side Effects for Purchase Order:
    DATA lo_ann_target TYPE REF TO /iwbep/if_mgw_vocan_ann_target.   " Vocabulary Annotation Target                     "#EC NEEDED
    DATA lo_annotation TYPE REF TO /iwbep/if_mgw_vocan_annotation.   " Vocabulary Annotation                            "#EC NEEDED
    DATA lo_collection TYPE REF TO /iwbep/if_mgw_vocan_collection.   " Vocabulary Annotation Collection                 "#EC NEEDED
    DATA lo_function   TYPE REF TO /iwbep/if_mgw_vocan_function.     " Vocabulary Annotation Function                   "#EC NEEDED
    DATA lo_fun_param  TYPE REF TO /iwbep/if_mgw_vocan_fun_param.    " Vocabulary Annotation Function Parameter         "#EC NEEDED
    DATA lo_property   TYPE REF TO /iwbep/if_mgw_vocan_property.     " Vocabulary Annotation Property                   "#EC NEEDED
    DATA lo_record     TYPE REF TO /iwbep/if_mgw_vocan_record.       " Vocabulary Annotation Record                     "#EC NEEDED
    DATA lo_reference  TYPE REF TO /iwbep/if_mgw_vocan_reference.    " Vocabulary Annotation Reference
  

    lo_reference = vocab_anno_model->create_vocabulary_reference( iv_vocab_id = '/IWBEP/VOC_COMMON'
                                                                  iv_vocab_version = '0001').
    lo_reference->create_include( iv_namespace = 'com.sap.vocabularies.Common.v1' ).
    lo_reference = vocab_anno_model->create_vocabulary_reference( iv_vocab_id = '/IWBEP/VOC_CORE'
                                                                  iv_vocab_version = '0001').
    lo_reference->create_include( iv_namespace = 'Org.OData.Core.V1' ).
  
    lo_ann_target = vocab_anno_model->create_annotations_target( 'MM_PUR_PO_AI_MAINTAIN.C_PurchaseOrderEnhWDType' ) ##NO_TEXT . "Add annotation term for VIPs introduced
  
    lo_annotation = lo_ann_target->create_annotation( iv_term = 'com.sap.vocabularies.Common.v1.SideEffects' ) ##NO_TEXT .
  
    lo_record     = lo_annotation->create_record( )  ##NO_TEXT.
    lo_property   = lo_record->create_property( 'SourceProperties' )   ##NO_TEXT.
    lo_collection = lo_property->create_collection( ).
  
    lo_collection->create_simple_value( )->set_property_path( 'Supplier' )  ##NO_TEXT .
    lo_collection->create_simple_value( )->set_property_path( 'CompanyCode' )  ##NO_TEXT .
    lo_collection->create_simple_value( )->set_property_path( 'DocumentCurrency' )  ##NO_TEXT .
    lo_collection->create_simple_value( )->set_property_path( 'PurchasingGroup' )  ##NO_TEXT.
    lo_collection->create_simple_value( )->set_property_path( 'PurchasingOrganization' )  ##NO_TEXT.
```

**STEP**: PriceChanged — refresh Price when Amount/Discount/multi-input source changes

**DESCRIPTION**: Add a SideEffects annotation to refresh the Price property when Amount, Discount, or a multi-input field (ProductDetail/DeliveryLocations) changes.

**LANGUAGE**: XML

**CODE**:
```XML
<Annotations Target="NAMESPACE.ENTITYTYPE">
    <Annotation Term="com.sap.vocabularies.Common.v1.SideEffects" Qualifier="PriceChanged">
        <Record>
            <PropertyValue Property="SourceProperties">
                <Collection>
                    <PropertyPath>Amount</PropertyPath>
                    <PropertyPath>Discount</PropertyPath>
                    <PropertyPath>ProductDetail/DeliveryLocations</PropertyPath>// Source property pointing to multi input field
                </Collection>
            </PropertyValue>
            <PropertyValue Property="TargetProperties">
                <Collection>
                    <String>Price</String>
                </Collection>
            </PropertyValue>
        </Record>
    </Annotation>
</Annotations>
```

**STEP**: SupplierChanged — refresh 1:1 navigation target entity

**DESCRIPTION**: When Supplier changes, refresh the 1:1 navigation property toSupplier (the associated entity).

**LANGUAGE**: XML

**CODE**:
```XML
<Annotations Target="NAMESPACE.ENTITYTYPE">
    <Annotation Term="com.sap.vocabularies.Common.v1.SideEffects" Qualifier="SupplierChanged">
        <Record>
            <PropertyValue Property="SourceProperties">
                <Collection>
                    <PropertyPath>Supplier</PropertyPath>
                </Collection>
            </PropertyValue>
            <PropertyValue Property="TargetEntities">
               <Collection>
                   <NavigationPropertyPath>toSupplier</NavigationPropertyPath>
               </Collection>
            </PropertyValue>
        </Record>
    </Annotation>
</Annotations>
```

**STEP**: Field control causing full-entity read — Status triggers entity refresh

**DESCRIPTION**: If a single property (Status) change requires reading the whole entity (due to field control), define SideEffects with an empty NavigationPropertyPath entry in TargetEntities to force a full entity read/refresh.

**LANGUAGE**: XML

**CODE**:
```XML
<Annotations Target="NAMESPACE.ENTITYTYPE">
    <Annotation Term="com.sap.vocabularies.Common.v1.SideEffects" Qualifier="PriceChanged">
        <Record>
            <PropertyValue Property="SourceProperties">
                <Collection>
                    <PropertyPath>Status</PropertyPath>
                </Collection>
            </PropertyValue>
            <PropertyValue Property="TargetEntities">
                <Collection>
                    <NavigationPropertyPath></NavigationPropertyPath>
                </Collection>
            </PropertyValue>
        </Record>
    </Annotation>
</Annotations>
```

**STEP**: Structural change on 1:n association — refresh header property when item created/deleted

**DESCRIPTION**: When child collections change (create/delete), refresh header property OverallAmount by defining a SourceEntities entry for the 1:n association (toSalesOrderItems).

**LANGUAGE**: XML

**CODE**:
```XML
<Annotations Target="NAMESPACE.ENTITYTYPE">
    <Annotation Term="com.sap.vocabularies.Common.v1.SideEffects" Qualifier="ReactOnItemCreationOrDeletion">
        <Record>
            <PropertyValue Property="SourceEntities">
                <Collection>
                    <NavigationPropertyPath>toSalesOrderItems</NavigationPropertyPath>
                </Collection>
            </PropertyValue>
            <PropertyValue Property="TargetProperties">
                <Collection>
                    <String>OverallAmount</String>
                </Collection>
            </PropertyValue>
        </Record>
    </Annotation>
</Annotations>
```

**STEP**: Action side effects — refresh associated entity properties and entities after action

**DESCRIPTION**: For action/function import calls that change associated entities or properties, declare the expected SideEffects. Example: Setcurrency action refreshes Currency_Code_Text from to_Currency and also refreshes controls associated with to_Item.

**LANGUAGE**: XML

**CODE**:
```XML
<!-- In the below example, the function import action "Setcurrency" is expected to refresh 
     the "Currency_Code_Text" which is coming from the associated entity "to_Currency" -->

<Annotations Target="STTA_SALES_ORDER_WD_20_SRV.STTA_SALES_ORDER_WD_20_SRV_Entities/Setcurrency">
    <Annotation Term="com.sap.vocabularies.Common.v1.SideEffects">
        <Record>
            <PropertyValue Property="TargetProperties">
                <Collection>
                    <PropertyPath>to_Currency/Currency_Code_Text</PropertyPath>
                </Collection>
            </PropertyValue>

            <!-- Side Effects for action annotation with an entity as a target. 
                 Here, controls associated with "to_Item" will be refreshed -->
            <PropertyValue Property="TargetEntities">
                <Collection>
                    <NavigationPropertyPath>to_Item</NavigationPropertyPath>
                </Collection>
            </PropertyValue>
        </Record>
    </Annotation>
</Annotations>
```

**STEP**: Refresh navigation target — update root navigation entity when item property changes

**DESCRIPTION**: Use SourceProperties on item-level entity to cause refresh of the navigation to the root entity (to_SalesOrder). Two variants shown: refresh the whole navigation entity, and target specific/all properties (to_SalesOrder/*).

**LANGUAGE**: XML

**CODE**:
```XML
<Annotations Target="STTA_SALES_ORDER_WD_20_SRV.C_STTA_SalesOrderItem_WD_20Type">
    <Annotation Term="com.sap.vocabularies.Common.v1.SideEffects" Qualifier="TaxAmountChanged">
        <Record>
            <PropertyValue Property="SourceProperties">
                <Collection>
                     <PropertyPath>TaxAmount</PropertyPath>
                </Collection>
            </PropertyValue>
            <PropertyValue Property="TargetEntities">
               <Collection>
                     <NavigationPropertyPath>to_SalesOrder</NavigationPropertyPath>
                </Collection>
            </PropertyValue>
        </Record>
    <Annotation>
</Annotations>
```

**LANGUAGE**: XML

**CODE**:
```XML
<Annotations Target="STTA_SALES_ORDER_WD_20_SRV.C_STTA_SalesOrderItem_WD_20Type">
    <Annotation Term="com.sap.vocabularies.Common.v1.SideEffects" Qualifier="TaxAmountChanged">
        <Record>
            <PropertyValue Property="SourceProperties">
                <Collection>
                    <PropertyPath>TaxAmount</PropertyPath>
                </Collection>
            </PropertyValue>
            <PropertyValue Property="TargetProperties">
                <Collection>
                    <String>to_SalesOrder/*</String>
                </Collection>
            </PropertyValue>
        </Record>
    </Annotation>
</Annotations>
```

**STEP**: Side effect on 1:1 associated entity set property (smart field in smart form)

**DESCRIPTION**: Add a SideEffects annotation where the SourceProperties points to a 1:1 associated navigation property property (format: to_Rating/Rating/Property). This triggers side effect when the associated smart field changes.

**LANGUAGE**: XML

**CODE**:
```XML
<Annotations Target="<Schema Namespace>.<EntityType Name>">
    <Annotation Term="com.sap.vocabularies.Common.v1.SideEffects" Qualifier="<Qualifier Name (Optional)>">
        <PropertyValue Property="SourceProperties">
            <Collection>
                <PropertyPath><1:1 Associated Navigation Property Name.Ex:to_Rating/Rating>/<Property Name></PropertyPath>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="TargetProperties">
            <Collection>
                <String><Target Property Name></String>
            </Collection>
        </PropertyValue>
    </Annotation>
</Annotations>
```

**STEP**: RAP / ABAP CDS — side effects block with fields, entities, actions, messages, permissions

**DESCRIPTION**: Use the ABAP CDS side effects block in BDEF/RAP modeling to define side effects for fields, entities, actions, and messages. This example demonstrates multiple targets, actions, and message targets. Copy this block into your CDS behavior definition (BDEF) as appropriate.

**LANGUAGE**: ABAP CDS

**CODE**:
```ABAP CDS
side effects {
    field IntegerValue affects field ProgressIntegerValue, field RadialIntegerValue;
    field Timestamp affects field IANATimestamp;
    field Supplier affects entity toSupplier;
    action changeCriticality affects field CriticalityCode;
    action resetTimesChildCreated affects field TimesChildCreated, permissions ( action resetTimesChildCreated );
    action overwriteTimezone affects $self;
    determine action validateDate executed on field ValidTo affects messages;
    $self affects permissions ( update _Child );
    determine action updateTimes executed on entity _Child affects field TotalPieces;
  }
```
--------------------------------

**TITLE**: Side Effects — SAP Fiori elements (fiori-elements-framework)

**INTRODUCTION**: Practical, code-focused reference for annotating and handling side effects in SAP Fiori elements apps (OData V2 and V4). Use this when writing annotations, extension code, manifest entries, or CDS to ensure the UI refreshes affected properties/entities after backend changes.

**TAGS**: fiori-elements, side-effects, ODataV2, ODataV4, annotations, SAPUI5, manifest.json, CAP, CDS, XML, JavaScript

STEP: 1 — Default Side Effects

DESCRIPTION: Default side effects are provided by Fiori elements and typically require no annotation. Use annotations only when you must inform the front end about additional fields/entities affected by a backend change so the UI requests fresh data.

LANGUAGE: Text

CODE:
```text
Default behaviors include:
- Creating a new entity or draft: refresh list binding of parent page to show new entity.
- Deleting an entity: refresh parent page list binding to remove entity.
- Creating a draft for an active object: refresh list report to show new draft.
- Discarding/Activating a draft: refresh list report to remove draft and show active version.
- Triggering an action: refresh collection automatically when action is bound and returned instance does not match bound instance (e.g., copy).
```

STEP: 2 — Side Effect Annotation Format (high-level)

DESCRIPTION: Use side effect annotations to declare what triggers side effects and what must be refreshed. A side effect annotation contains:
- Source: property change, action, or structural change (create/delete subitem).
- Target: properties or entities to refresh.
- TriggerAction (optional): path to a function import to execute when side effect is triggered.
Note: TriggerAction replaces PreparationAction; EffectTypes is deprecated.

LANGUAGE: Text

CODE:
```text
Elements:
- Source (SourceProperties, SourceEntities)
- Target (TargetProperties, TargetEntities)
- TriggerAction (optional)
```

STEP: 3 — Source Properties (behavior & restrictions)

DESCRIPTION: Rules for source properties and virtual field groups:
- ValueHelp, ComboBox, CheckBox, DatePicker: side effect triggers when value is set or focus leaves control.
- Virtual field groups (list of properties): side effect triggers when focus moves away from the group.
- OData V2: define single property or list of properties as source; trigger when focus leaves property or field group.
Restriction: navigation properties cannot be used as SourceProperties.

LANGUAGE: Text

CODE:
```text
OData V2:
- SourceProperties: single property or collection forming a virtual field group.
- Triggers: on focus leave of source property or field group.
Restriction: No navigation properties allowed as source.
```

STEP: 4 — Source Entities (OData V2 vs OData V4)

DESCRIPTION: Use SourceEntities to specify navigation properties that trigger side effects due to structural changes or property changes.
- OData V2: only 1:n navigation properties can be SourceEntities; side effect triggered by structural change (add/delete).
- OData V4: any navigation property (1:1 or 1:n) can be SourceEntities; side effects triggered when any property of the entity changes or structural changes.
Caution: Do not specify a 1:1 association or an empty NavigationPropertyPath as source if you intend the whole entity to be the source.

LANGUAGE: Text

CODE:
```text
OData V2: SourceEntities supports only 1:n navigation properties (structural changes).
OData V4: SourceEntities supports 1:1 and 1:n navigation properties (property & structural changes).
```

STEP: 5 — Target Properties and Entities

DESCRIPTION: Define which properties or entities must be refreshed after source change:
- TargetProperties: a property or list of properties. You may use 1:1 navigation properties; front end will issue a $expand when needed.
- TargetEntities: specify 1:1 or 1:n navigation properties or an absolute path (entity container + entity) to refresh whole entity sets. If empty target is specified, the whole entity is updated.
- If TriggerAction exists and no TargetProperties/TargetEntities are defined, only the TriggerAction is called.

LANGUAGE: Text

CODE:
```text
- Always enclose the 'type' of TargetProperties in quotes when using SideEffectsType (see OData vocab).
- TargetEntities can be absolute paths: /Namespace.EntityContainer/EntityType
```

STEP: 6 — Example: Validation prevents side-effect trigger (EntityType)

DESCRIPTION: Example EDMX EntityType where validation (MaxLength) blocks side effects until errors are resolved.

LANGUAGE: XML

CODE:
```xml
<EntityType Name="SEPMRA_I_ProductCategoryType" sap:label="Category" sap:content-version="1">
    <Key>
        <PropertyRef Name="ProductCategory"/>
    </Key>
    <Property Name="ProductCategory" Type="Edm.String" Nullable="false" MaxLength="40" sap:label="Category"/>
    <Property Name="MainProductCategory" Type="Edm.String" MaxLength="40" sap:label="Main Category" sap:value-list="fixed-values"/>
    <NavigationProperty Name="to_MainCategory" Relationship="STTA_PROD_MAN.assoc_BBDC3EA034F824A7382F8EEF561C1160" FromRole="FromRole_assoc_BBDC3EA034F824A7382F8EEF561C1160" ToRole="ToRole_assoc_BBDC3EA034F824A7382F8EEF561C1160"/>
</EntityType>
```

STEP: 7 — Example: Side Effect Annotation (entity-level sample)

DESCRIPTION: XML local annotation sample showing SourceProperties and TargetEntities for side effect when ProductCategory/MainProductCategory change.

LANGUAGE: XML

CODE:
```xml
<Annotations Target="NAMESPACE.ENTITYTYPE">
    <Annotation Term="com.sap.vocabularies.Common.v1.SideEffects" Qualifier="ProductChanged">
        <Record>
            <PropertyValue Property="SourceProperties">
                <Collection>
                    <PropertyPath>ProductCategory</PropertyPath>
                    <PropertyPath>MainProductCategory</PropertyPath>
                </Collection>
            </PropertyValue>
            <PropertyValue Property="TargetEntities">
                <Collection>
                    <NavigationPropertyPath></NavigationPropertyPath>
                </Collection>
            </PropertyValue>
        </Record>
    </Annotation>
</Annotations>
```

STEP: 8 — OData V2: Additional features — global side effects & extension APIs

DESCRIPTION:
- You can define side effects in backend or local annotation files.
- For 1:n TargetEntities on tables, binding paging is not considered — use carefully.
- Global side effects: define side effect without source properties/entities (see Using Global Side Effects).
- For extension fields in forms/tables, register custom controls with extension API in onAfterRendering; the API returns a callback you must call from the control event handler with the field name to trigger side-effect processing.

LANGUAGE: Text

CODE:
```text
Extension APIs (OData V2):
- registerCustomFieldForSideEffect(oControl, FieldName, EntitySet) -> returns callback; call callback(FieldName) from event handler.
- registerCustomColumnForSideEffect(oTable, FieldName, EntitySet) -> returns callback; call callback(FieldName) from event handler.
Notes: navigation properties are not supported for custom fields; supported table types: responsive and grid tables.
```

STEP: 9 — Example: registerCustomFieldForSideEffect (form extension, OData V2)

DESCRIPTION: JavaScript extension code. Register a custom field for side effects in onAfterRendering and invoke the callback from the control event handler.

LANGUAGE: JavaScript

CODE:
```javascript
sap.ui.define("SOwoExt.ext.controller.ObjectPageExtension", ["sap/m/MessageBox"], function (MessageBox) {
    "use strict";
    var CustomFieldGroupChangeRegister;

    return {
        onCheckBoxEvent: function (oEvent) {
            var oView = this.getView();
            var model = oView.getModel();
            var context = oView.getBindingContext();
            var sFields = "SrcgProjNotesAreForbidden";
            var data = oEvent.getParameter("selected");

            model.setProperty(context.getPath() + "/" + sFields, data);
            CustomFieldGroupChangeRegister("SrcgProjNotesAreForbidden");
        },

        onAfterRendering: function (event) {
            var oView = this.getView();
            var sEntitySet = "C_STTA_SalesOrder_WD_20";
            var sProperty = "SrcgProjNotesAreForbidden";
            var oControl = sap.ui.getCore().getElementById(
                "SOwoExt::sap.suite.ui.generic.template.ObjectPage.view.Details::C_STTA_SalesOrder_WD_20--srcgProjNotesAreForbiddenCheckBox"
            );

            CustomFieldGroupChangeRegister = this.extensionAPI.registerCustomFieldForSideEffect(oControl, sProperty, sEntitySet);
        }
    };
});
```

STEP: 10 — Example: registerCustomColumnForSideEffect (table extension, OData V2)

DESCRIPTION: JavaScript extension code. Register a custom column in a table for side effects; invoke the returned callback from the column event handler.

LANGUAGE: JavaScript

CODE:
```javascript
sap.ui.define("SOwoExt.ext.controller.ObjectPageExtension", ["sap/m/MessageBox"], function (MessageBox) {
    "use strict";
    
    var CustomFieldGroupChangeRegister;

    return {
        onSubSectionEnteredExtension: function (subSection) {
            if (subSection.getId().indexOf("C_STTA_SalesOrder_WD_20--to_Item") !== -1) {
                var sourcingProjectItemTreeTable = this.oView.byId(
                    "SOwoExt::sap.suite.ui.generic.template.ObjectPage.view.Details::C_STTA_SalesOrder_WD_20--to_Item::com.sap.vocabularies.UI.v1.LineItem::responsiveTable"
                );

                sourcingProjectItemTreeTable.addEventDelegate(
                    {
                        onAfterRendering: function (oEvent) {
                            var oControl = this.oView.byId(
                                "SOwoExt::sap.suite.ui.generic.template.ObjectPage.view.Details::C_STTA_SalesOrder_WD_20--to_Item::com.sap.vocabularies.UI.v1.LineItem::responsiveTable"
                            );

                            CustomFieldGroupChangeRegister = this.extensionAPI.registerCustomColumnForSideEffect(
                                oControl,
                                "Raiseamount_ac",
                                "C_STTA_SalesOrderItem_WD_20"
                            );
                        },
                    },
                    this
                );
            }
        },

        onCheckBoxPressed: function (event) {
            var sProperty = "Raiseamount_ac";
            CustomFieldGroupChangeRegister(sProperty);
        },
    };
});
```

STEP: 11 — OData V4: Side Effects on Unbound Actions (XML sample)

DESCRIPTION: Define side effects on unbound actions using absolute paths. This example shows action import and a SideEffects annotation targeting a RootEntity, refreshing the entire entity list.

LANGUAGE: XML

CODE:
```xml
<Schema Namespace="sap.fe.core.Service" xmlns=http://docs.oasis-open.org/odata/ns/edm>
    <EntityContainer Name="EntityContainer">
        <ActionImport Name="unBoundAction" Action="sap.fe.core.Service.unBoundAction" />
        ...
    </EntityContainer>
    ...
    <Action Name="unBoundAction" IsBound="false" />
    ...
    <Annotations Target="sap.fe.core.Service.RootEntity">
        <Annotation Term="UI.LineItem" Qualifier="sample7">
            <Collection>
                <Record Type="UI.DataFieldForAction">
                    <PropertyValue Property="Label" String="Table Refresh" />
                    <PropertyValue Property="Action" String="sap.fe.core.Service.EntityContainer/unBoundAction" />
                    <PropertyValue Property="InvocationGrouping" EnumMember="UI.OperationGroupingType/ChangeSet" />
                </Record>
                ...
            </Collection>
        </Annotation>
    </Annotations>
    <Annotations Target="sap.fe.core.Service.UnboundAction()">
        <Annotation Term="Common.SideEffects">
            <Record Type="Common.SideEffectsType">
                <PropertyValue Property="TargetEntities">
                    <Collection>
                        <NavigationPropertyPath>"/sap.fe.core.Service.EntityContainer/RootEntity"
                        </NavigationPropertyPath>
                    </Collection>
                </PropertyValue>
            </Record>
        </Annotation>
    </Annotations>
</Schema>
```

STEP: 12 — OData V4: CAP CDS Sample (unbound action + side effects)

DESCRIPTION: CAP CDS example showing LineItem with unbound action and a side effect annotation using an absolute path to refresh RootEntity.

LANGUAGE: CDS

CODE:
```cds
// LineItem annotation with an unbound action
annotate RootEntity with @(
  UI    : {
        …
            LineItem : [
                {
                    $Type             : 'UI.DataFieldForAction',
                    Label             : 'My Unbound action',
                    Action            : 'MyService.EntityContainer/unBoundAction',
                    InvocationGrouping: #ChangeSet
                },
                {
                    $Type: 'UI.DataField',
                    Value: property1,
                },
                {
                    $Type: 'UI.DataField',
                    Value: property2
      },
      {
        $Type: 'UI.DataField',
        Value: property3
      }
    ],
  },
…
);

//actions and corresponding side effects for different samples
service MyService {

//Side effect annotation using an abosolute path
@Common.SideEffects: {TargetEntities: ['/MyService.EntityContainer/RootEntity']}
    action unBoundAction();
}
```

STEP: 13 — OData V4: Value List Refresh (absolute path target)

DESCRIPTION: If a value list is backed by transactional data or expected to change by actions/users, define an absolute side effect with the value list collection as TargetEntities to force refresh despite caching.

LANGUAGE: XML

CODE:
```xml
<Annotation Term="com.sap.vocabularies.Common.v1.SideEffects" Qualifier="ChangeOfProperty">
     <Record>
          <PropertyValue Property="SourceProperties">
               <Collection>
                    <PropertyPath>PropertyName</PropertyPath>
               </Collection>
          </PropertyValue>
          <PropertyValue Property="TargetEntities">
               <Collection>
                    <NavigationPropertyPath>/Namespace.EntityContainer/ValueListCollection</NavigationPropertyPath>
               </Collection>
          </PropertyValue>
     </Record>
</Annotation>
```

STEP: 14 — OData V4: Extension field in form via manifest.json

DESCRIPTION: When using custom extension fields in OData V4 forms, declare the property in manifest.json under controlConfiguration using the property key. Side effects execute when focus leaves the extension control if SourceProperties include the property.

LANGUAGE: JSON

CODE:
```json
"targets": {
    "MyObjectPage": {
        "type": "Component",
        "id": "Default",
        "name": "sap.fe.templates.ObjectPage",
        "level": 1,
        "options": {
            "settings": {
                "contextPath": "/RootEntity",
                "editableHeaderContent": true,
                "controlConfiguration": {
                    "@com.sap.vocabularies.UI.v1.Identification": {
                        "fields": {
                            "customFormElementIdentification1": {
                                "template": "sap.fe.core.fpmExplorer.customFormElementContent.CustomFormElement1",
                                "label": "Custom FormElement 1",
                                "property": "NameProperty"
                            }
                        }
                    }
                }
            }
        }
    }
}
```

STEP: 15 — Implementation Notes & Best Practices

DESCRIPTION:
- Validation errors block sending data to back end — side effects won't trigger until validation errors are resolved.
- For non-draft apps, source-property side effects trigger after a successful Save action; structural changes to items tables configured as source are supported.
- If using text arrangement or value list + key changes, annotate side effects so the text updates when a key changes.
- Use global side effects (no source) when needed to refresh parts of UI without a specific trigger.

LANGUAGE: Text

CODE:
```text
Best practices:
- Avoid using 1:n TargetEntities on paged tables unless you handle paging implications.
- For custom fields/columns register via the extension API and call the returned callback inside the control event handler with the FieldName.
- Use absolute paths in TargetEntities to refresh entire entity sets (OData V4).
```


--------------------------------

**TITLE**: Smart Controls for SAP Fiori elements (OData V2) — Annotation-driven configuration

**INTRODUCTION**: This document explains how to control Smart Controls on a List Report page in SAP Fiori elements (OData V2) using OData annotations. It provides concise, copy-pasteable annotation examples (XML) and the manifest (JSON) wiring pattern to register annotation files. Use these examples as templates to implement Smart Table, Smart Filter Bar, Smart Field, Smart Link and Smart Form behavior via annotations.

**TAGS**: fiori-elements-framework, smart-controls, OData V2, annotations, smart-table, smart-filter-bar, smart-field, smart-link, smart-form

STEP: 1 — Confirm applicability

DESCRIPTION: Smart Controls configuration via OData annotations is supported only for SAP Fiori elements with OData V2. Before applying annotations, confirm your service and project use OData V2.

LANGUAGE: JSON

CODE:
```json
{
  "sap.app": {
    "id": "my.app.id",
    "applicationVersion": { "version": "1.0.0" }
  },
  "sap.ui5": {
    "models": {
      "": { "dataSource": "mainService" }
    }
  }
}
```

STEP: 2 — Add selection/filter annotations for Smart Filter Bar

DESCRIPTION: Use the UI.SelectionFields annotation on the entity set to describe which properties appear as selection fields in the Smart Filter Bar. Use PropertyPath entries for each filterable property.

LANGUAGE: XML

CODE:
```xml
<!-- annotations.xml (fragment) -->
<Annotations Target="MyService.ProductType">
  <Annotation Term="UI.SelectionFields">
    <Collection>
      <PropertyPath>ProductID</PropertyPath>
      <PropertyPath>Name</PropertyPath>
      <PropertyPath>Category</PropertyPath>
    </Collection>
  </Annotation>
</Annotations>
```

STEP: 3 — Define table columns for Smart Table (UI.LineItem)

DESCRIPTION: Define the columns displayed in a Smart Table using the UI.LineItem annotation on the EntityType. Use UI.DataField records for simple fields and UI.DataFieldForIntentBasedNavigation for navigation/links.

LANGUAGE: XML

CODE:
```xml
<!-- annotations.xml (fragment) -->
<Annotations Target="MyService.ProductType">
  <Annotation Term="UI.LineItem">
    <Collection>
      <Record Type="UI.DataField">
        <PropertyValue Property="Value" Path="ProductID"/>
        <PropertyValue Property="Label" String="Product ID"/>
      </Record>
      <Record Type="UI.DataField">
        <PropertyValue Property="Value" Path="Name"/>
        <PropertyValue Property="Label" String="Name"/>
      </Record>
      <Record Type="UI.DataFieldForIntentBasedNavigation">
        <PropertyValue Property="Label" String="Open Product"/>
        <PropertyValue Property="SemanticObject" String="Product"/>
        <PropertyValue Property="Action" String="display"/>
      </Record>
    </Collection>
  </Annotation>
</Annotations>
```

STEP: 4 — Create form layout and fields for Smart Form

DESCRIPTION: Use UI.FieldGroup (and nested UI.DataField records) to specify fields and groups for Smart Form layouts (Detail or Object Page). Qualifiers can distinguish multiple groups.

LANGUAGE: XML

CODE:
```xml
<!-- annotations.xml (fragment) -->
<Annotations Target="MyService.ProductType">
  <Annotation Term="UI.FieldGroup" Qualifier="General">
    <Record Type="UI.FieldGroupType">
      <PropertyValue Property="Data">
        <Collection>
          <Record Type="UI.DataField">
            <PropertyValue Property="Value" Path="Name"/>
            <PropertyValue Property="Label" String="Name"/>
          </Record>
          <Record Type="UI.DataField">
            <PropertyValue Property="Value" Path="Price"/>
            <PropertyValue Property="Label" String="Price"/>
          </Record>
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

STEP: 5 — Define navigation via Smart Link (intent-based navigation)

DESCRIPTION: Use UI.DataFieldForIntentBasedNavigation in LineItem or other annotations to enable Smart Link behavior that opens intent-based navigation targets.

LANGUAGE: XML

CODE:
```xml
<!-- annotations.xml (fragment) -->
<Annotations Target="MyService.ProductType">
  <Annotation Term="UI.LineItem">
    <Collection>
      <!-- ... other fields ... -->
      <Record Type="UI.DataFieldForIntentBasedNavigation">
        <PropertyValue Property="Label" String="Open"/>
        <PropertyValue Property="SemanticObject" String="Product"/>
        <PropertyValue Property="Action" String="display"/>
      </Record>
    </Collection>
  </Annotation>
</Annotations>
```

STEP: 6 — Register annotation files in manifest.json (local or service annotations)

DESCRIPTION: Register your service and annotation files in manifest.json so the Fiori elements runtime picks up annotations. Replace URIs and datasource names to match your project. This pattern shows OData V2 service plus a local annotation XML file referenced as an annotation data source.

LANGUAGE: JSON

CODE:
```json
{
  "sap.app": {
    "dataSources": {
      "mainService": {
        "uri": "/sap/opu/odata/sap/Z_SERVICE_SRV/",
        "type": "OData",
        "settings": { "odataVersion": "2.0" }
      },
      "annotations": {
        "uri": "annotations.xml",
        "type": "ODataAnnotation"
      }
    }
  },
  "sap.ui5": {
    "models": {
      "": { "dataSource": "mainService" },
      "annotations": { "dataSource": "annotations" }
    }
  }
}
```

STEP: 7 — Where to find more control-specific guidance

DESCRIPTION: For complete control-specific annotation reference and advanced options (e.g., variant management, personalization, table types), consult the smart control topics listed below (these are preserved file paths to the Fiori elements docs). Use these docs when you need control-specific annotation terms or UI variants.

LANGUAGE: Text/Links

CODE:
```text
- Smart Table: ../10_More_About_Controls/smart-table-bed8274.md
- Smart Filter Bar: ../10_More_About_Controls/smart-filter-bar-7bcdffc.md
- Smart Field: ../10_More_About_Controls/smart-field-4864403.md
- Smart Link: ../10_More_About_Controls/smart-link-f638884.md
- Smart Form: ../10_More_About_Controls/smart-form-99e33bd.md
```

STEP: 8 — Implementation checklist

DESCRIPTION: Quick checklist to deploy annotation-driven Smart Controls:
- Confirm OData V2 service usage.
- Add annotation XML fragments (SelectionFields, LineItem, FieldGroup, DataFieldForIntentBasedNavigation) to an annotations file.
- Register annotation file as a data source and model in manifest.json.
- Test the List Report page and Smart Filter Bar behavior in the running app.
- Consult the control-specific docs (links above) for advanced annotation terms and qualifiers.

LANGUAGE: Text

CODE:
```text
Checklist:
- OData version = 2.0
- annotations.xml added and contains UI.SelectionFields / UI.LineItem / UI.FieldGroup etc.
- manifest.json references annotation dataSource and model
- Run app and verify Smart Table, Smart Filter Bar, Smart Form, Smart Link
```
--------------------------------

**TITLE**: Smart Table Extensions for Analytical List Page (ALP) — Controller, Column, and Row Navigation Extensions

**INTRODUCTION**: This guide shows how to implement ALP table extensions for SAP Fiori elements (OData V2): add an onBeforeRebindTableExtension controller hook, add custom table columns via view fragment extensions, and implement conditional row navigation using onListNavigationExtension. All changes are made in manifest.json (controller/view extensions) and extension JS/XML fragment files inside the app namespace.

**TAGS**: fiori-elements-framework, AnalyticalListPage, ALP, manifest.json, controllerExtensions, viewExtensions, fragments, OData V2, table-extensions, navigation

STEP: 1 — Applicability and short summary
DESCRIPTION: Confirm applicability and purpose.
LANGUAGE: JSON
CODE:
```json
{
  "note": "These extensions apply only to SAP Fiori elements for OData V2.",
  "purpose": "Use onBeforeRebindTableExtension to modify table binding before render, use sap.ui.viewExtensions to add custom Analytical columns via fragments, and use onListNavigationExtension for row-specific navigation (internal or external)."
}
```

STEP: 2 — Add controller extension entry in manifest.json to extend ALP controller
DESCRIPTION: In manifest.json, add sap.ui.controllerExtensions to extend the ALP controller. Replace controllerName with your app controller path (namespace). This enables ALP to call extension hook methods such as onBeforeRebindTableExtension and onListNavigationExtension.
LANGUAGE: JSON
CODE:
```json
{
  "sap.ui5": {
    "_version": "1.1.0",
    "extends": {
      "extensions": {
        "sap.ui.controllerExtensions": {
          "sap.suite.ui.generic.template.AnalyticalListPage.controller.AnalyticalListPage": {
            "controllerName": "sap.poc.ftu.apps.alr.ext.controller.AnalyticalListPageExt",
            "sap.ui.generic.app": {
              "": "..."
            }
          }
        }
      }
    }
  }
}
```

STEP: 3 — Implement onBeforeRebindTableExtension in the extension controller
DESCRIPTION: Create the extension controller file (controller.AnalyticalListPageExt under your app namespace). Implement onBeforeRebindTableExtension(oEvent) to run app-specific logic before the table is rebound. The event object contains binding and UI control references you can use to add filters or parameters to the table query.
LANGUAGE: JavaScript
CODE:
```javascript
// File: webapp/ext/controller/AnalyticalListPageExt.js (example path)
sap.ui.define([], function() {
    return {
        onBeforeRebindTableExtension: function(oEvent) {
            // Example: simple alert to verify extension is called.
            alert('onBeforeRebindTableExtension called!');

            // Example pattern: get binding info and add custom filter parameters
            // var oBindingParams = oEvent.getParameter("bindingParams");
            // oBindingParams.filters.push(new sap.ui.model.Filter("MyProperty", sap.ui.model.FilterOperator.EQ, "Value"));
        }
    };
});
```

STEP: 4 — Add view extension in manifest.json to provide custom Analytical table columns via fragment
DESCRIPTION: In manifest.json, add sap.ui.viewExtensions for the ALP view. Provide an entry with key "AnalyticalTableColumnsExtension|<EntitySetName>". The key format: "AnalyticalTableColumnsExtension|<EntitySet>" where the second part after "|" is the entity set. Set className to "sap.ui.core.Fragment", fragmentName to your fragment XML path (app namespace), and type to "XML".
LANGUAGE: JSON
CODE:
```json
{
  "sap.ui5": {
    "_version": "1.1.0",
    "extends": {
      "extensions": {
        "sap.ui.viewExtensions": {
          "sap.suite.ui.generic.template.AnalyticalListPage.view.AnalyticalListPage": {
            "AnalyticalTableColumnsExtension|CZ_EASILINEITEMS_SADL": {
              "className": "sap.ui.core.Fragment",
              "fragmentName": "sap.poc.ftu.apps.alr.ext.fragment.CustomColumn",
              "type": "XML"
            }
          }
        }
      }
    }
  }
}
```

STEP: 5 — Create XML fragment defining the custom AnalyticalColumn
DESCRIPTION: Implement the XML fragment referenced in manifest (fragmentName). Use table:AnalyticalColumn with header Label, template control, and p13nData in core:CustomData to provide personalization metadata (columnKey and columnIndex). Keep fragment namespace matching SAPUI5 controls.
LANGUAGE: XML
CODE:
```xml
<!-- File: webapp/ext/fragment/CustomColumn.fragment.xml (example path) -->
<core:FragmentDefinition xmlns:core="sap.ui.core"
          xmlns="sap.m" xmlns:table="sap.ui.table">
    <table:AnalyticalColumn width="150px" autoResizable="true">
        <Label text="My Extended Column"/> <!-- Column header name -->
        <table:template>
            <Label text="data"/> <!-- value in each cell of the table -->
        </table:template>
        <table:customData>
            <core:CustomData key="p13nData"
                  value='{"columnKey": "Test", "columnIndex" : "1"}' />
        </table:customData>
    </table:AnalyticalColumn>
</core:FragmentDefinition>
```

STEP: 6 — Implement onListNavigationExtension for conditional row navigation
DESCRIPTION: In the same extension controller, implement onListNavigationExtension(oEvent). Use this.extensionAPI.getNavigationController() to obtain the navigation controller. Decide target based on the selected row's binding context. Use navigateExternal(target) for external navigation. Return true to prevent default navigation, or return false to allow default ALP internal navigation.
LANGUAGE: JavaScript
CODE:
```javascript
// Add to the same extension controller file
onListNavigationExtension: function(oEvent) {
    var oNavigationController = this.extensionAPI.getNavigationController();
    var oBindingContext = oEvent.getSource().getBindingContext();
    var oObject = oBindingContext.getObject();
    // for notebooks we trigger external navigation for all others we use internal navigation
    if (oObject.CostCenter == "300-1000") {
        oNavigationController.navigateExternal("ActualCostsKPIDetails");
    } else {
        // return false to trigger the default internal navigation
        return false;
    }
    // return true is necessary to prevent further default navigation
    return true;
}
```

STEP: 7 — Implementation notes and best practices
DESCRIPTION: Keep the following implementation details:
- These APIs and extension points are specific to SAP Fiori elements for OData V2.
- manifest.json keys used: sap.ui.controllerExtensions and sap.ui.viewExtensions under sap.ui5 > extends > extensions.
- Use the full fragment/application namespace in fragmentName (e.g., sap.poc.ftu.apps.alr.ext.fragment.CustomColumn).
- Provide p13nData as JSON string in core:CustomData value to enable personalization (columnKey, columnIndex).
- Prefer extensionAPI.getNavigationController().navigateExternal() for external navigation to ensure ALP handles cross-app navigation correctly.
--------------------------------

**TITLE**: Stack Cards — Configure OVP Stack Card and Object Stream

**INTRODUCTION**: Configure a Fiori Elements (OVP) stack card that aggregates up to 20 quick view cards in an object stream. This guide shows the manifest configuration keys (manifest.json) and required OData metadata (EDMX) relationships to enable navigation between primary and secondary entity sets and to control object stream behavior (placeholder, footer actions, item text).

**TAGS**: fiori-elements-framework, ovp, stack-card, object-stream, manifest.json, edmx, OData, quick-view

STEP: 1 — Add Stack Card to manifest.json

DESCRIPTION: Add a stack card entry under "sap.ovp" → "cards" in manifest.json. Configure title, subtitle, entitySet for the dominant entity, identificationAnnotationPath for quick view content, itemText for placeholder text, and objectStreamCardsSettings to control footer behavior. Keep requireAppAuthorization if navigation requires app-level authorization.

LANGUAGE: JSON

CODE:
```JSON
"sap.ovp": {
    ...
    "cards": {
        "card00": {
            "model": "salesOrder",
            "template": "sap.ovp.cards.stack",
            "settings": {
                "title": "Stack Card Title",
                "subTitle": "Stack Card",
                "requireAppAuthorization": "#Action-toappnavsample",
                "itemText": "items awaiting approval",
                "entitySet": "SalesOrderSet",
                "identificationAnnotationPath": "com.sap.vocabularies.UI.v1.Identification,com.sap.vocabularies.UI.v1.Identification#item2",
                "objectStreamCardsSettings": {
                    "showFirstActionInFooter": false
                }
            }
        },
        ...
    }
}
```

STEP: 2 — Keys and Behavior for Object Stream (Actionable Summary)

DESCRIPTION: Ensure these keys are set and understand their effects when implementing the stack card:
- entitySet: dominant entity set used to fetch stack items (e.g., SalesOrderSet).
- objectStreamCardsNavigationProperty: navigation property to fetch object-stream items from a secondary entity set (e.g., SalesOrder). Not relevant for quick view cards.
- objectStreamCardsSettings.showFirstActionInFooter (boolean, default false): 
  - true → first footer action on quick view card becomes a navigation action.
  - false → navigation action on footer is not shown; other actions are shown instead.
- itemText: custom text appended to placeholder card message.
- Placeholder card: appears only when the object stream has 20 quick view cards (it is not counted in the 20). Object stream displays up to 20 quick view cards; clicking the stack card header or "View All" opens the app or object stream.

LANGUAGE: JSON

CODE:
```JSON
{
  "entitySet": "SalesOrderSet",
  "objectStreamCardsNavigationProperty": "SalesOrder",  // not used for quick view cards
  "objectStreamCardsSettings": {
    "showFirstActionInFooter": false
  },
  "itemText": "items awaiting approval"
}
```

STEP: 3 — Quick View Cards: Actions and Navigation

DESCRIPTION: Configure quick view cards (object stream cards) so they can include actions (confirm, reject, etc.) and a navigation link. The object stream header is navigable and navigates to the same destination as the stack card header. If showFirstActionInFooter = true, the first footer action is a navigation action; otherwise the navigation action is omitted from footer.

LANGUAGE: JSON

CODE:
```JSON
{
  "objectStreamCardsSettings": {
    "showFirstActionInFooter": true   // set to true to surface navigation as first footer action
  }
}
```

STEP: 4 — Ensure OData Metadata: Navigation Property and Association

DESCRIPTION: Confirm your service metadata (EDMX) declares navigation properties and associations between entity types used by the stack card. Example metadata below demonstrates BusinessPartner -> SalesOrder via ToSalesOrders navigation property, an association Assoc_BusinessPartner_SalesOrders, and an association set Assoc_BusinessPartner_SalesOrders_AssocS. Include these definitions in your service metadata so object stream navigation and expanded queries function.

LANGUAGE: XML

CODE:
```XML
<EntityType Name="BusinessPartner" sap:content-version="1">
    <Key>
        <PropertyRef Name="BusinessPartnerID"/>
    </Key>
    <Property Name="Address" Type="GWSAMPLE_BASIC.CT_Address" Nullable="false"/>
    <Property Name="BusinessPartnerID" Type="Edm.String" Nullable="false" MaxLength="10" sap:label="Bus. Part. ID" sap:creatable="false" sap:updatable="false"/>
    <Property Name="CompanyName" Type="Edm.String" MaxLength="80" sap:label="Company Name"/>
    <Property Name="WebAddress" Type="Edm.String" sap:label="Web Address" sap:sortable="false" sap:filterable="false" sap:semantics="url"/>
    <Property Name="EmailAddress" Type="Edm.String" MaxLength="255" sap:label="E-Mail Address" sap:semantics="email"/>
    <Property Name="PhoneNumber" Type="Edm.String" MaxLength="30" sap:label="Phone No." sap:semantics="tel"/>
    <Property Name="FaxNumber" Type="Edm.String" MaxLength="30" sap:label="Fax Number"/>
    <Property Name="LegalForm" Type="Edm.String" MaxLength="10" sap:label="Legal Form"/>
    <Property Name="CurrencyCode" Type="Edm.String" MaxLength="5" sap:label="Currency" sap:semantics="currency-code"/>
    <Property Name="BusinessPartnerRole" Type="Edm.String" MaxLength="3" sap:label="Bus. Part. Role"/>
    <Property Name="CreatedAt" Type="Edm.DateTime" Precision="7" sap:label="Time Stamp" sap:creatable="false" sap:updatable="false"/>
    <Property Name="ChangedAt" Type="Edm.DateTime" Precision="7" ConcurrencyMode="Fixed" sap:label="Time Stamp" sap:creatable="false" sap:updatable="false"/>
    <NavigationProperty Name="ToSalesOrders" Relationship="GWSAMPLE_BASIC.Assoc_BusinessPartner_SalesOrders" FromRole="FromRole_Assoc_BusinessPartner_SalesOrders" ToRole="ToRole_Assoc_BusinessPartner_SalesOrders"/>
    <NavigationProperty Name="ToContacts" Relationship="GWSAMPLE_BASIC.Assoc_BusinessPartner_Contacts" FromRole="FromRole_Assoc_BusinessPartner_Contacts" ToRole="ToRole_Assoc_BusinessPartner_Contacts"/>
    <NavigationProperty Name="ToProducts" Relationship="GWSAMPLE_BASIC.Assoc_BusinessPartner_Products" FromRole="FromRole_Assoc_BusinessPartner_Products" ToRole="ToRole_Assoc_BusinessPartner_Products"/>
</EntityType>
<EntityType Name="SalesOrder" sap:content-version="1">
    <Key>
        <PropertyRef Name="SalesOrderID"/>
    </Key>
    <Property Name="SalesOrderID" Type="Edm.String" Nullable="false" MaxLength="10" sap:label="Sa. Ord. ID" sap:creatable="false" sap:updatable="false"/>
    <Property Name="SalesOrderGuid" Type="Edm.Guid" Nullable="false" sap:label="SalesOrder GUID" sap:creatable="false" sap:updatable="false"/>
    <Property Name="Note" Type="Edm.String" MaxLength="255" sap:label="Description" sap:updatable="false" sap:sortable="false" sap:filterable="false"/>
    <Property Name="NoteLanguage" Type="Edm.String" MaxLength="1" sap:label="Language" sap:creatable="false" sap:updatable="false" sap:sortable="false" sap:filterable="false"/>
    <Property Name="CustomerID" Type="Edm.String" MaxLength="10" sap:label="Bus. Part. ID" sap:updatable="false"/>
    <Property Name="CustomerName" Type="Edm.String" MaxLength="80" sap:label="Company Name" sap:creatable="false" sap:updatable="false"/>
    <Property Name="CurrencyCode" Type="Edm.String" MaxLength="5" sap:label="Currency" sap:updatable="false" sap:semantics="currency-code"/>
    <Property Name="GrossAmount" Type="Edm.Decimal" Precision="16" Scale="3" sap:unit="CurrencyCode" sap:label="Gross Amt." sap:creatable="false" sap:updatable="false"/>
    <Property Name="NetAmount" Type="Edm.Decimal" Precision="16" Scale="3" sap:unit="CurrencyCode" sap:label="Net Amt." sap:creatable="false" sap:updatable="false"/>
    <Property Name="TaxAmount" Type="Edm.Decimal" Precision="16" Scale="3" sap:unit="CurrencyCode" sap:label="Tax Amt." sap:creatable="false" sap:updatable="false"/>
    <Property Name="LifecycleStatus" Type="Edm.String" MaxLength="1" sap:label="PO Lifecycle" sap:creatable="false" sap:updatable="false"/>
    <Property Name="LifecycleStatusDescription" Type="Edm.String" MaxLength="60" sap:label="Lifecycle Descript." sap:creatable="false" sap:updatable="false" sap:sortable="false" sap:filterable="false"/>
    <Property Name="BillingStatus" Type="Edm.String" MaxLength="1" sap:label="PO Confirmation" sap:creatable="false" sap:updatable="false"/>
    <Property Name="BillingStatusDescription" Type="Edm.String" MaxLength="60" sap:label="Billing Description" sap:creatable="false" sap:updatable="false" sap:sortable="false" sap:filterable="false"/>
    <Property Name="DeliveryStatus" Type="Edm.String" MaxLength="1" sap:label="PO Ordering" sap:creatable="false" sap:updatable="false"/>
    <Property Name="DeliveryStatusDescription" Type="Edm.String" MaxLength="60" sap:label="Delivery Description" sap:creatable="false" sap:updatable="false" sap:sortable="false" sap:filterable="false"/>
    <Property Name="CreatedAt" Type="Edm.DateTime" Precision="7" sap:label="Time Stamp" sap:creatable="false" sap:updatable="false"/>
    <Property Name="ChangedAt" Type="Edm.DateTime" Precision="7" sap:label="Time Stamp" sap:creatable="false" sap:updatable="false"/>
    <NavigationProperty Name="ToBusinessPartner" Relationship="GWSAMPLE_BASIC.Assoc_BusinessPartner_SalesOrders" FromRole="ToRole_Assoc_BusinessPartner_SalesOrders" ToRole="FromRole_Assoc_BusinessPartner_SalesOrders"/>
    <NavigationProperty Name="ToLineItems" Relationship="GWSAMPLE_BASIC.Assoc_SalesOrder_SalesOrderLineItems" FromRole="FromRole_Assoc_SalesOrder_SalesOrderLineItems" ToRole="ToRole_Assoc_SalesOrder_SalesOrderLineItems"/>
</EntityType>
<Association Name="Assoc_BusinessPartner_SalesOrders" sap:content-version="1">
    <End Type="GWSAMPLE_BASIC.BusinessPartner" Multiplicity="1" Role="FromRole_Assoc_BusinessPartner_SalesOrders"/>
    <End Type="GWSAMPLE_BASIC.SalesOrder" Multiplicity="*" Role="ToRole_Assoc_BusinessPartner_SalesOrders"/>
    <ReferentialConstraint>
        <Principal Role="FromRole_Assoc_BusinessPartner_SalesOrders">
            <PropertyRef Name="BusinessPartnerID"/>
        </Principal>
        <Dependent Role="ToRole_Assoc_BusinessPartner_SalesOrders">
            <PropertyRef Name="CustomerID"/>
        </Dependent>
    </ReferentialConstraint>
</Association>
<EntityContainer Name="GWSAMPLE_BASIC_Entities" m:IsDefaultEntityContainer="true">
    <EntitySet Name="BusinessPartnerSet" EntityType="GWSAMPLE_BASIC.BusinessPartner" sap:content-version="1"/>
    <EntitySet Name="SalesOrderSet" EntityType="GWSAMPLE_BASIC.SalesOrder" sap:updatable="false" sap:content-version="1"/>
    <AssociationSet Name="Assoc_BusinessPartner_SalesOrders_AssocS" Association="GWSAMPLE_BASIC.Assoc_BusinessPartner_SalesOrders" sap:creatable="false" sap:updatable="false" sap:deletable="false" sap:content-version="1">
        <End EntitySet="BusinessPartnerSet" Role="FromRole_Assoc_BusinessPartner_SalesOrders"/>
        <End EntitySet="SalesOrderSet" Role="ToRole_Assoc_BusinessPartner_SalesOrders"/>
    </AssociationSet>
</EntityContainer>
```
--------------------------------

**TITLE**: Stacked Bar Micro Chart (UI.Chart + UI.DataPoint Annotations)

**INTRODUCTION**: Define a Stacked Bar Micro Chart for Fiori Elements by annotating your service metadata (XML) or CDS (ABAP/CAP). Use UI.Chart to configure the chart (title, description, chart type, measures, measure attributes) and UI.DataPoint to provide the measure value and criticality mapping. Measures and measure attributes must reference the same underlying property used by the DataPoint.

**TAGS**: fiori-elements-framework, stacked-bar, micro-chart, UI.Chart, UI.DataPoint, CDS, CAP, ABAP, XML

**STEP**: 1 — Add UI.Chart annotation (Stacked Bar)
**DESCRIPTION**: Create a UI.Chart annotation with ChartType set to BarStacked (BarStacked / BarStacked equivalent). Define Title and Description, list the Measure(s) (property path(s)) and configure MeasureAttributes to set Measure, Role (Axis1), and tie to the DataPoint via AnnotationPath or DataPoint reference. Use the Qualifier to reference this chart configuration from the UI.

**LANGUAGE**: XML
**CODE**:
```xml
<Annotation Term="UI.Chart" Qualifier="SalesPriceStackedBarChart">
    <Record Type="UI.ChartDefinitionType">
        <PropertyValue Property="Title" String="Sales Price"/>
        <PropertyValue Property="Description" String="Stacked BarChart"/>
        <PropertyValue Property="ChartType" EnumMember="UI.ChartType/BarStacked"/>
        <PropertyValue Property="Measures">
            <Collection>
                <PropertyPath>Width</PropertyPath>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="MeasureAttributes">
            <Collection>
                <Record Type="UI.ChartMeasureAttributeType">
                    <PropertyValue Property="Measure" PropertyPath="Width"/>
                    <PropertyValue Property="Role" EnumMember="UI.ChartMeasureRoleType/Axis1"/>
                    <PropertyValue Property="DataPoint" AnnotationPath="@UI.DataPoint#Width"/>
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

**LANGUAGE**: ABAP
**CODE**:
```
@UI.Chart: [
  {
    title: 'Sales Price',
    description: 'Stacked BarChart',
    chartType: #BAR_STACKED,
    measures: [
      'WIDTH'
    ],
    measureAttributes: [
      {
        measure: 'Width',
        role: #AXIS_1,
        asDataPoint: true
      }
    ],
    qualifier: 'SalesPriceStackedBarChart'
  }
]
annotate view STTA_C_MP_PRODUCT with {

}
```

**LANGUAGE**: CDS
**CODE**:
```
UI.Chart #SalesPriceStackedBarChart : {
    $Type : 'UI.ChartDefinitionType',
    Title : 'Sales Price',
    Description : 'Stacked BarChart',
    ChartType : #BarStacked,
    Measures : [
        Width
    ],
    MeasureAttributes : [
        {
            $Type : 'UI.ChartMeasureAttributeType',
            Measure : Width,
            Role : #Axis1,
            DataPoint : '@UI.DataPoint#Width'
        }
    ]
}
```

**STEP**: 2 — Add UI.DataPoint annotation for the measure
**DESCRIPTION**: Define a UI.DataPoint for the measure used by the chart. Ensure the DataPoint Value points to the same property as the Chart Measures and MeasureAttributes. Optionally map Criticality to enable color/criticality behavior in the micro chart. Use a Qualifier that matches DataPoint reference in the Chart (e.g., #Width).

**LANGUAGE**: XML
**CODE**:
```xml
<Annotation Term="UI.DataPoint" Qualifier="Width">
    <Record>
        <PropertyValue Property="Value" Path="Width"/>
        <PropertyValue Property="Criticality" Path="criticalityValue"/>
    </Record>
</Annotation>
```

**LANGUAGE**: ABAP
**CODE**:
```
@UI.dataPoint: {
  criticality: 'criticalityValue'
}
Width;
```

**LANGUAGE**: CDS
**CODE**:
```
UI.DataPoint #Width : {
    Value : Width,
    Criticality : criticalityValue
}
```

**STEP**: 3 — Constraints and required mappings
**DESCRIPTION**: Enforce entity and property constraints required by the Stacked Bar Micro Chart and ensure all references align.

**LANGUAGE**: Text
**CODE**:
```
- Chart dimensions and measures cannot be of the same entity; they must come from a 1:n navigation entity.
- The following properties must all point to the same property in the entityType:
  - Measures property of the UI.Chart annotation.
  - Measure property inside MeasureAttributes of the UI.Chart annotation.
  - Value property of the UI.DataPoint annotation.
- Use the Chart qualifier (e.g., SalesPriceStackedBarChart) and DataPoint qualifier (e.g., #Width) consistently so MeasureAttributes.DataPoint / DataPoint references resolve.
- Refer to SAP Samples for behavior and rendering details: https://ui5.sap.com/1.82.5/#/entity/sap.suite.ui.microchart.StackedBarMicroChart
```
--------------------------------

**TITLE**: Stacked Column Chart Card (Fiori Elements / OVP)

**INTRODUCTION**: This document explains how to implement a stacked column chart card. Use-case: show multiple measures or series stacked per category (x-axis). It includes required data-role mappings, recommended practices, and minimal JSON configuration examples for code-generation agents.

**TAGS**: fiori-elements-framework, ovp, stacked-column, chart-card, category-role, series-role, semantic-coloring, axis

**STEP**: 1 - Purpose and visual reference

**DESCRIPTION**: Use a stacked column chart when you need to display multiple values stacked on top of each other for each category on the x-axis. All measures (and/or series dimensions) are stacked. Keep stacking consistent: either stack by dimensions (series) or by measures — do not mix both.

**LANGUAGE**: TEXT

**CODE**:
```text
Example image (reference):
../01_Whats-New/images/WhatsNew_138_OVP_StackedColumn_751363a.png
```

**STEP**: 2 - Data mapping requirements

**DESCRIPTION**: Configure the card data model so that:
- At least one dimension is assigned role "category" — all category-role dimensions are rendered on the x-axis (axis category).
- Dimensions assigned role "series" (optional) are used to create stacks across the category axis (use this when stacking by dimension).
- Measures are stacked when stacking by measures (use this when stacking by measure).
- Do not mix stacking strategies: either use series dimensions OR multiple measures for stacking, not both in the same chart card.
- The chart supports semantic coloring via a color palette.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "data": {
    "path": "/YourEntitySet"
  },
  "settings": {
    "chartType": "stacked_column",
    "dimensions": [
      { "property": "CategoryProperty", "role": "category" },
      { "property": "SeriesProperty",   "role": "series" }  /* optional: use for stacking by dimension */
    ],
    "measures": [
      { "property": "Measure1", "label": "Measure 1" },
      { "property": "Measure2", "label": "Measure 2" }     /* use for stacking by measures */
    ]
  }
}
```

**STEP**: 3 - Recommended stacking strategy (explicit)

**DESCRIPTION**: Choose one of the two explicit stacking patterns and implement accordingly in the card configuration.

- Stacking by dimensions (recommended when semantic categories/labels define stacks):
  - Use one or more category-role dimensions for the x-axis.
  - Use a series-role dimension to create stacks within each category.
  - Measures provide the numeric values (typically a single measure or multiple measures aggregated per series).

**LANGUAGE**: JSON

**CODE**:
```json
{
  "settings": {
    "chartType": "stacked_column",
    "dimensions": [
      { "property": "Year",   "role": "category" },
      { "property": "Region", "role": "series" }   /* series creates stacks */
    ],
    "measures": [
      { "property": "Revenue" }                    /* numeric measure */
    ]
  }
}
```

**STEP**: 4 - Alternative: stacking by measures

**DESCRIPTION**: If stacking by measures, avoid using a series dimension. Provide multiple measures that will stack for each category value.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "settings": {
    "chartType": "stacked_column",
    "dimensions": [
      { "property": "Month", "role": "category" }   /* x-axis */
    ],
    "measures": [
      { "property": "OnlineSales" },
      { "property": "InStoreSales" },
      { "property": "PartnerSales" }               /* each measure becomes a stack segment */
    ]
  }
}
```

**STEP**: 5 - Semantic coloring and palette support

**DESCRIPTION**: Enable semantic coloring by supplying a color palette or mapping semantic values to palette entries. Chart rendering will apply the palette to series or measure stacks for consistent semantic coloring.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "settings": {
    "chartType": "stacked_column",
    "colorPalette": [
      "#0A6ED1",
      "#2A9F76",
      "#F6C85F",
      "#E4572E"
    ],
    "semanticColoring": true
  }
}
```

**STEP**: 6 - Implementation notes and validations

**DESCRIPTION**: Validate the following before generating the chart card:
- Ensure at least one dimension is marked role: "category".
- If using series stacking, ensure the series dimension contains meaningful semantic values.
- If stacking by measures, ensure measures are numeric and semantically comparable.
- Do not mix series-based and measure-based stacking in the same card.
- Confirm color palette entries match the expected number of series/measures or provide a palette large enough to cover all stacks.

**LANGUAGE**: TEXT

**CODE**:
```text
Validation checklist:
- category dimension exists -> Yes/No
- stacking strategy chosen -> "by-dimensions" or "by-measures"
- series dimension present only if stacking by-dimensions
- multiple numeric measures present only if stacking by-measures
- colorPalette provided (optional) for semantic coloring
```

--------------------------------

**TITLE**: Status Colors and Icons (UI Criticality) for SAP Fiori Elements

**INTRODUCTION**: Define and render status colors, icons, and importance for fields in LineItem, Identification and FieldGroup using a separate criticality property. This guide shows how to reference a criticality property from UI annotations (XML, ABAP CDS, CAP CDS), the allowed criticality values, default icon behavior, and OData V4 extension for "Information".

**TAGS**: fiori-elements-framework, annotations, UI.LineItem, criticality, CDS, ABAP, CAP, XML, OData V4, icons, ObjectStatus

**STEP**: 1 - Add a criticality property to your data model

**DESCRIPTION**: Create a property (typically on a related entity) that holds the criticality numeric value. This property must contain one of the values defined by com.sap.vocabularies.UI.v1.CriticalityType. The UI annotation for a field should reference that property via the Criticality Path.

**LANGUAGE**: (data model / conceptual)

**CODE**:
```text
// Conceptual: Define a property (e.g., StockCriticality) on the related entity
// The property stores numeric values derived from com.sap.vocabularies.UI.v1.CriticalityType
// Possible values:
// 0 - Neutral
// 1 - Negative (red)
// 2 - Critical (orange)
// 3 - Positive (green)
// (OData V4 additional) 5 - Information (blue)
```

**STEP**: 2 - Reference the criticality property in XML annotations (OData V2 / V4)

**DESCRIPTION**: In UI.LineItem (or Identification / FieldGroup) add a DataField record where the Criticality PropertyValue Path points to the criticality property. Also set the Value Path for the display text and optionally set UI.Importance.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.LineItem">
   <Collection>
      <Record Type="UI.DataField">
         <PropertyValue Property="Criticality" Path="to_ProductStock/StockCriticality"/>
         <PropertyValue Property="Value" Path="to_ProductStock/StockEmergencyLevel"/>
         <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High"/>
      </Record>
   </Collection>
</Annotation>
```

**STEP**: 3 - Reference the criticality property in ABAP CDS annotations

**DESCRIPTION**: In ABAP CDS UI.lineItem annotations, set criticality to point to the related property (use underscore notation to reference associations). Also set value and importance as needed.

**LANGUAGE**: ABAP CDS

**CODE**:
```
@UI.lineItem: [
  {
    criticality: '_ProductStock.StockCriticality',
    value: '_ProductStock.StockEmergencyLevel',
    importance: #HIGH
  }
]
```

**STEP**: 4 - Reference the criticality property in CAP CDS (service definition)

**DESCRIPTION**: For CAP-based services, set UI.LineItem entry with Criticality and Value pointing to the related target paths. Preserve the UI.Importance annotation if required. (Example shows CAP CDS syntax.)

**LANGUAGE**: CAP CDS

**CODE**:
```
UI.LineItem : [
    {
        $Type : 'UI.DataField',
        Criticality : to_ProductStock.StockCriticality,
        Value : to_ProductStock.StockEmergencyLevel,
        ![@UI.Importance] : #High
    }
]]
```

**STEP**: 5 - Useable criticality values, default icon behavior and representation

**DESCRIPTION**: Use these numeric values in the criticality property. The mapping is derived from com.sap.vocabularies.UI.v1.CriticalityType. SAP Fiori elements uses these values to apply colors and (by default) icons.

- Values and meanings:
  - 0 — Neutral
  - 1 — Negative (red)
  - 2 — Critical (orange)
  - 3 — Positive (green)
  - 5 — Information (blue) — supported additionally in SAP Fiori elements for OData V4

- Default icon behavior:
  - By default Fiori elements assumes DataField is represented with CriticalityRepresentationType/WithIcon and maps criticality to ObjectStatus icons (e.g., com.sap.vocabularies.UI.v1.CriticalityType/Negative => 'sap-icon://status-negative').
  - If the field is marked with CriticalityRepresentationType/WithoutIcon, ObjectStatus is rendered without the icon.

- Texts:
  - The display texts (Value) are not static — place your text value in the referenced value path (e.g., StockEmergencyLevel) so you can customize messages per criticality.

**LANGUAGE**: text

**CODE**:
```text
// Example image demonstrating status colors and icons
// images/LROP_Status_Colors_and_Icons_75aa307.png
```

**STEP**: 6 - Implementation checklist

**DESCRIPTION**: Quick checklist before deploying:
- Ensure the criticality property exists and contains valid numeric values.
- Reference the criticality property via Path in XML or the equivalent in CDS annotations.
- Verify UI.Importance if you want to influence prominence.
- Decide whether to show icons (WithIcon) or hide icons (WithoutIcon).
- For OData V4, include support for value 5 (Information) if applicable.

**LANGUAGE**: text

**CODE**:
```text
// Checklist:
// - Criticality property defined and populated (0,1,2,3[,5 for OData V4])
// - Annotations reference Criticality path correctly
// - Value path supplies the display text (customizable)
// - CriticalityRepresentationType set to WithIcon or WithoutIcon as required
// - Verify rendered ObjectStatus and icon mapping in UI
```
--------------------------------

**TITLE**: Store and Restore Application State (iAppState) — Actionable Guide for Fiori Elements

**INTRODUCTION**: This guide explains what the SAP Fiori elements iAppState mechanism stores and restores, differences between OData V2 and V4 behaviors, security considerations, scenarios where iAppState is not applied, and how changes from other flex layers are merged. Use this as a concise checklist for implementing, debugging, or instrumenting state persistence and restore in Fiori elements apps.

**TAGS**: fiori-elements, iAppState, state-persistence, OData-V2, OData-V4, variant-management, personalization, launchpad, flexibility

**STEP**: 1 — What iAppState Stores and Restores

**DESCRIPTION**: List the concrete application artifacts captured by iAppState so code and config can be verified against expectations. Use this list when validating saved state or when extending custom UI elements to participate in state persistence.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "stores_restores": [
    "Filter field values in the List Report filter bar (includes 'Go' button state when available)",
    "Chosen variant (see OData V2/V4 differences below)",
    "Object Page details: tab selection, chart/table personalization",
    "Data from custom UI elements (requires custom state handling implementation)"
  ],
  "notes": [
    "Selections in a chart/table and table scroll position are NOT stored/restored",
    "Visibility changes of filter fields in filter bar are NOT stored/restored for OData V2",
    "Order of smart filter fields is NOT stored/restored"
  ],
  "odata_variant_behavior": {
    "ODataV2": "Chosen variant restored only if stored in a 'clean' state. If variant is 'dirty', fallback to 'Standard' with 'dirty' indicator.",
    "ODataV4": "Chosen variant is always restored when available; fallback to 'Standard' only if chosen variant is unavailable at restore time."
  }
}
```

**STEP**: 2 — Security and Sensitive Fields

**DESCRIPTION**: Ensure sensitive data annotated with PersonalData.v1.IsPotentiallySensitive is excluded from iAppState. Validate filter-context exceptions and implement alternative persistence only when compliant.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sensitive_field_handling": {
    "annotation": "PersonalData.v1.IsPotentiallySensitive",
    "behavior": "Fields annotated as potentially sensitive are NOT stored/restored by iAppState",
    "exception": "If the sensitive field is used in filter context, it may be considered for storage",
    "recommendation": "Do NOT implement custom persistence for such fields unless security review permits"
  },
  "launchpad_note": "Browser refresh does NOT restore iAppState unless SAP Fiori launchpad backend is configured to persist it."
}
```

**STEP**: 3 — OData V4 Additional Restriction

**DESCRIPTION**: Be aware of the one explicit limitation for OData V4 chart drilldown filters so that UI tests or sync code can handle missing state on restore.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "odataV4_restriction": {
    "item": "Drilldown filters applied to charts via 'View By' options",
    "behavior": "These drilldown filters are NOT stored/restored"
  }
}
```

**STEP**: 4 — Handling Changes from Other Flex Layers (Merging Rules)

**DESCRIPTION**: When end-user personalization arrives in an iAppState, flex-layer changes (key-user or other layers) may be merged with it. Use these rules to implement or test merge logic in custom extensions or when debugging inconsistent UIs.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "merge_rules": {
    "general": "Changes from other flex layers are merged with user personalization coming from iAppState.",
    "merging_applies_only_if": "The variant referenced in the iAppState is available at restore time.",
    "merge_priority": {
      "single_valued_field": "End-user iAppState value has priority over other-layer value (other-layer ignored for same field)."
    },
    "not_considered_scenarios": [
      "Navigation from dynamic tiles created by user using 'Save as Tile'",
      "Navigation from integration cards (expectation: return to same app state as when card was created)"
    ],
    "in_those_scenarios": {
      "behavior": "Changes from other layers are NOT considered; user-end changes are NOT retained/restored.",
      "details_not_retained": [
        "Filter fields or table columns that were removed",
        "Changes in position of filter fields or table columns"
      ]
    },
    "fallback_behavior_if_variant_unavailable": "App loads using 'Standard' variant; the full shared page state is applied on top without merging other-layer changes."
  }
}
```

**STEP**: 5 — Practical Checklist for Implementers

**DESCRIPTION**: Use this checklist when enabling or troubleshooting state persistence, or when extending the app to include custom state.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "implementation_checklist": [
    "Confirm which artifacts must persist in your app (filters, variant, object page details, custom UI state).",
    "If adding custom UI elements, implement custom state handling to participate in iAppState (see related docs).",
    "Verify that fields annotated with PersonalData.v1.IsPotentiallySensitive are not being persisted.",
    "For OData V2 apps: verify variant 'clean' state behavior and handle the 'dirty' fallback to Standard variant.",
    "For OData V4 apps: account for missing 'View By' drilldown filter persistence.",
    "Ensure SAP Fiori launchpad is configured in the backend to persist iAppState if you expect restore after browser refresh.",
    "Test restores in scenarios with flex-layer changes; validate merge behavior when variant is available vs unavailable.",
    "When supporting dynamic tiles or integration cards, explicitly document that changes from other layers are not merged on return."
  ]
}
```

**STEP**: 6 — Related Files and Further Reading (Preserve links/file paths)

**DESCRIPTION**: Follow these related topics for implementation-level details, enablement steps, and extended scenarios. Use paths as-is to locate source docs in the repository.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "related_topics": [
    "The Share Functionality: the-share-functionality-022bf0d.md",
    "Enabling Discovery/Persistence Mode: enabling-discovery-persistence-mode-7c62084.md",
    "Custom State Handling for Extended Apps: custom-state-handling-for-extended-apps-89fa878.md",
    "Security Configuration: security-configuration-ba0484b.md",
    "Configuring Default Filter Values: configuring-default-filter-values-f27ad7b.md",
    "SAPUI5 Flexibility: Adapting UIs Made Easy: ../04_Essentials/sapui5-flexibility-adapting-uis-made-easy-a8e55aa.md",
    "This topic source: store-restore-the-application-state-46bf248.md"
  ]
}
```
--------------------------------

**TITLE**: Support for Extended OData Annotations (SAP Fiori elements for OData V4)

**INTRODUCTION**: This document describes the supported extended OData annotations and IF-expression/odata.concat usage in SAP Fiori elements for OData V4. Use these annotations to control visibility, field control, operation availability, and capability-based restrictions with conditional expressions. Includes exact XML examples you can copy into annotation files.

**TAGS**: fiori-elements-framework, odata-v4, annotations, if-expressions, odata.concat, FieldControl, UpdateRestrictions, InsertRestriction, DeleteRestriction, OperationAvailable, UI.Hidden, Capabilities

**STEP**: Applicability and supported annotations

**DESCRIPTION**: This feature is applicable only to SAP Fiori elements for OData V4. The following annotations support OData IF-expressions and related conditional constructs:
- com.sap.vocabularies.Common.v1.FieldControl (FieldControl)
- com.sap.vocabularies.UI.v1.Hidden (UI.Hidden)
- com.sap.vocabularies.Common.v1.OperationAvailable (Core.OperationAvailable)
- SAP__capabilities.UpdateRestrictions
- SAP__capabilities.InsertRestriction
- SAP__capabilities.DeleteRestriction

**LANGUAGE**: text

**CODE**:
```
Applicable only to SAP Fiori elements for OData V4.

Supported annotations:
- FieldControl (com.sap.vocabularies.Common.v1.FieldControl)
- UI.Hidden (com.sap.vocabularies.UI.v1.Hidden)
- Core.OperationAvailable (com.sap.vocabularies.Common.v1.OperationAvailable)
- SAP__capabilities.UpdateRestrictions
- SAP__capabilities.InsertRestriction
- SAP__capabilities.DeleteRestriction
```

**STEP**: Use IF-expressions with FieldControl

**DESCRIPTION**: Example XML annotation showing an IF expression for FieldControl. The IF expression evaluates Eq(Path FieldControlDynamicIfValue, Int 5) and returns EnumMember Common.FieldControlType/ReadOnly or Common.FieldControlType/Optional. Copy this block into your annotations file (e.g., Annotation XML for the entity or property).

**LANGUAGE**: xml

**CODE**:
```xml
<Annotations Target="sap.fe.core.FieldEdit.RootEntity/FieldControlDynamicIf"> 
    <Annotation Term="com.sap.vocabularies.Common.v1.FieldControl"> 
        <If> 
            <Eq> 
                <Path>FieldControlDynamicIfValue</Path> 
                <Int>5</Int> 
            </Eq> 
            <EnumMember>Common.FieldControlType/ReadOnly</EnumMember> 
            <EnumMember>Common.FieldControlType/Optional</EnumMember> 
        </If> 
    </Annotation> 
</Annotations> 
```

**STEP**: Use conditional expressions for Update/Insert restrictions (Capabilities)

**DESCRIPTION**: Example XML annotation demonstrating conditional InsertRestrictions and UpdateRestrictions inside Capabilities.NavigationRestrictions. The snippet shows:
- RestrictedProperties collection with a NavigationProperty path
- InsertRestrictions using a Path expression (owner/isVerified)
- UpdateRestrictions with an If expression that evaluates a logical Or of Eq(Null, Path owner/isVerified) and Eq(String, Path owner/isVerified) to select Bool false/true results

Use this pattern to make insert/update permissions dynamic based on entity data.

**LANGUAGE**: xml

**CODE**:
```xml
<Annotation Term="Capabilities.NavigationRestrictions"> 
    <Record Type="Capabilities.NavigationRestrictionsType"> 
        <PropertyValue Property="RestrictedProperties"> 
            <Collection> 
                <Record Type="Capabilities.NavigationPropertyRestriction"> 
                    <PropertyValue Property="NavigationProperty" NavigationPropertyPath="_Item" /> 
                    <PropertyValue Property="InsertRestrictions"> 
                        <Record Type="Capabilities.InsertRestrictionsType"> 
                            <PropertyValue Property="Insertable" Path="owner/isVerified" /> 
                        </Record> 
                    </PropertyValue> 
                    <PropertyValue Property="UpdateRestrictions"> 
                        <Record Type="Capabilities.UpdateRestrictionsType"> 
                            <PropertyValue Property="Updatable"> 
                                <If> 
                                    <Or> 
                                        <Eq> 
                                            <Null /> 
                                            <Path>owner/isVerified</Path> 
                                        </Eq> 
                                        <Eq> 
                                            <String /> 
                                            <Path>owner/isVerified</Path> 
                                        </Eq> 
                                    </Or> 
                                    <Bool>false</Bool> 
                                    <Bool>true</Bool> 
                                </If> 
                            </PropertyValue> 
                        </Record> 
                    </PropertyValue> 
                </Record> 
            </Collection> 
        </PropertyValue> 
    </Record> 
</Annotation> 
```

**STEP**: Use odata.concat for object page header title

**DESCRIPTION**: odata.concat is supported for the Title property of the object page header. Use Apply Function="odata.concat" to concatenate database field values and static strings for the header title. Example below concatenates CompanyName and LegalForm (with an empty string separator) for the BusinessPartner header.

**LANGUAGE**: xml

**CODE**:
```xml
<Annotations Target="SAP__self.BusinessPartner"> 
    <Annotation Term="com.sap.vocabularies.UI.v1.HeaderInfo"> 
        <Record Type="com.sap.vocabularies.UI.v1.HeaderInfoType"> 
            <PropertyValue Property="TypeName" String="Business Partner" /> 
            <PropertyValue Property="TypeNamePlural" String="Business Partners" /> 
            <PropertyValue Property="Title"> 
                <Record Type="com.sap.vocabularies.UI.v1.DataField"> 
                    <PropertyValue Property="Label" String="Name" /> 
                    <PropertyValue Property="Value"> 
                        <Apply Function="odata.concat"> 
                            <Path>CompanyName</Path> 
                            <String /> 
                            <Path>LegalForm</Path> 
                        </Apply> 
                    </PropertyValue> 
                </Record> 
            </PropertyValue> 
        </Record> 
    </Annotation> 
</Annotations> 
```
--------------------------------

**TITLE**: Support for Terminologies in SAP Fiori elements (OData V4)

**INTRODUCTION**: Configure and activate terminologies for SAP Fiori elements applications (OData V4) by enhancing the ResourceModel in manifest.json and registering the model or resource bundles with the template via enhanceI18n. This enables switching UI texts per scenario/industry using terminology-specific resource bundles.

**TAGS**: fiori-elements-framework, sapui5, terminologies, i18n, manifest.json, resourceModel, enhanceI18n, OData V4

**STEP**: 1 — Add terminologies to the ResourceModel in manifest.json

**DESCRIPTION**: In the manifest.json "models" section, enhance the i18n ResourceModel with a "terminologies" entry. Provide the terminology bundle URL, relation to manifest, and supported locales. This registers a terminology set (for example "travel") with the app's resource model.

**LANGUAGE**: JSON

**CODE**:
```json
"models": {
    "i18n": {
        "type": "sap.ui.model.resource.ResourceModel",
        "settings": {
            "bundleUrl": "i18n/i18n.properties",
            "supportedLocales": ["en", "de"],
            "fallbackLocale": "en",
            "terminologies": {
                "travel": {
                    "bundleUrl": "i18n/terminologies/travel/i18n.terminologies.travel.properties",
                    "bundleUrlRelativeTo": "manifest",
                    "supportedLocales": ["en", "de"]
                }
            }
        }
    },
    ...
    ...
    ...
}
```

**STEP**: 2 — Make the resource model (and any additional resource files) available to Fiori elements via enhanceI18n

**DESCRIPTION**: Adding a terminology to a ResourceModel does not automatically enable it for SAP Fiori elements templates. In the template target definition (e.g., ListReport/LineItemsList), add the resource model key and/or resource files to the "enhanceI18n" array under the template "options.settings". The template will search enhancements in array order; the last entry has priority when resolving keys.

**LANGUAGE**: JSON

**CODE**:
```json
"targets": {
    "LineItemsList": {
        "type": "Component",
        "id": "LineItemsList",
        "name": "sap.fe.templates.ListReport",
        "options": {
            "settings": {
                "contextPath": "/LineItems",
                "enhanceI18n": ["i18n/ManageItemsListReport.properties", "i18n"],
                "variantManagement": "Page",
                "initialLoad": true,
                "navigation": {
                    "LineItems": {
                        "detail": {
                            "route": "LineItemsObjectPage"
                        }
                    }
                }
        }
    }
}
```

**STEP**: 3 — Precedence, usage rules, and edge cases

**DESCRIPTION**: Implementation behavior and rules to follow:
- enhanceI18n accepts any combination of resource files (paths) and resource model keys. Example: ["i18n/ManageItemsListReport.properties", "i18n"].
- The template resolves keys by searching the enhanceI18n array from first to last; the LAST enhancement wins. In the example above, the template first checks the "i18n" model, then "i18n/ManageItemsListReport.properties", then the default texts.
- If a model included in enhanceI18n has no terminology configured, adding a terminology elsewhere does not affect UI texts for that model—terminology is effective only for models that include a "terminologies" entry.
- This configuration and terminology mechanism applies only to SAP Fiori elements for OData V4.

**LANGUAGE**: JSON

**CODE**:
```json
// Example enhanceI18n order: last wins when resolving keys
"enhanceI18n": ["i18n/ManageItemsListReport.properties", "i18n"]
```

**STEP**: 4 — Reference for deeper terminology concepts

**DESCRIPTION**: For conceptual details and advanced usage patterns (multiple terminologies, switching scenarios), consult the Terminologies documentation referenced by your project (e.g., ../04_Essentials/terminologies-eba8d25.md). This step is informational and does not require manifest edits.

**LANGUAGE**: JSON

**CODE**:
```json
// See: ../04_Essentials/terminologies-eba8d25.md for full terminology concepts and examples
```
--------------------------------

**TITLE**: Table Cards — OVP Table Card Configuration and UI Annotations

**INTRODUCTION**: Action-oriented reference for implementing OVP table cards in SAP Fiori Elements. Includes manifest settings and annotation examples (XML, ABAP CDS, CAP CDS) for title/subtitle, units, KPI, PresentationVariant, SelectionVariant, DataPoint, LineItem, smart links, contact, text arrangement, and text alignment. Use these examples directly in manifest.json, OData metadata, and annotation files.

**TAGS**: fiori-elements, ovp, table-card, annotations, UI.LineItem, DataPoint, PresentationVariant, SelectionVariant, manifest, smart-links, contact, text-arrangement

STEP: Manifest — Title sample
DESCRIPTION: Configure a table card in the application manifest to set model, template, entitySet and display a title on the card.
LANGUAGE: JSON
CODE:
```json
"sap.ovp": {
    "globalFilterModel": "salesOrder",
    "globalFilterEntityType": "GlobalFilters", // Deprecated since SAPUI5 1.54.
    "globalFilterEntitySet": "GlobalFilters",  // Available from SAPUI5 1.54.
    ...
    "cards": {
        "card014": {
            "model": "salesOrder",
            "template": "sap.ovp.cards.table",
            "settings": {
                "title": "Purchase Forecast",
                "entitySet": "SalesShare",
                ...
            }
        }
    }
}
```

STEP: Manifest — Subtitle sample
DESCRIPTION: Add a subtitle to the table card via manifest settings under the card's settings.
LANGUAGE: JSON
CODE:
```json
"sap.ovp": {
    "globalFilterModel": "salesOrder",
    "globalFilterEntityType": "GlobalFilters", // Deprecated since SAPUI5 1.54.
    "globalFilterEntitySet": "GlobalFilters",  // Available from SAPUI5 1.54.
    ...
    "cards": {
        "card014": {
            "model": "salesOrder",
            "template": "sap.ovp.cards.table",
            "settings": {
                "title": "Sales Forecast",
                "subTitle": "per Supplier",
                "entitySet": "SalesShare",
                ...
            }
        }
    }
}
```

STEP: Unit of Measure — Data sample
DESCRIPTION: Provide data containing a unit property and numeric value to be bound with sap:unit or annotation.
LANGUAGE: JSON
CODE:
```json
{
    "CurrencyCode": "KG",
    "GrossAmount": 850
}
```

STEP: Unit of Measure — Option 1: sap:unit in metadata
DESCRIPTION: Define sap:unit in OData EDMX metadata so UI displays unit next to numeric values automatically.
LANGUAGE: XML
CODE:
```xml
<Property 
    Name="CurrencyCode" 
    Type="Edm.String" 
    MaxLength="5" 
    sap:label="Currency" 
    sap:updatable="false" 
    sap:semantics="currency-code" 
/>
<Property 
    Name="GrossAmount" 
    Type="Edm.Decimal" 
    Precision="16" 
    Scale="3" 
    sap:unit="CurrencyCode" 
    sap:label="Gross Amt." 
    sap:creatable="false" 
    sap:updatable="false" 
/>
```

STEP: Unit of Measure — Option 2: ISOCurrency annotation
DESCRIPTION: Annotate the property using Org.OData.Measures.V1.ISOCurrency to bind unit by annotation instead of EDMX sap:unit.
LANGUAGE: XML
CODE:
```xml
<Annotations Target="GWSAMPLE_BASIC.SalesOrder/GrossAmount">
    <Annotation Term="Org.OData.Measures.V1.ISOCurrency" Path="CurrencyCode"/>
</Annotations> 
```

STEP: KPI — Manifest setting
DESCRIPTION: Set kpiAnnotationPath in sap.ovp manifest to reference a KPI annotation for the card.
LANGUAGE: JSON
CODE:
```json
"sap.ovp": {
    // section for ovp-specific manifest settings
    ...
    "kpiAnnotationPath": "com.sap.vocabularies.UI.v1.KPI#AllActualCosts", // Represents the KPI annotation path
    ...
}
```

STEP: KPI — XML Annotation sample
DESCRIPTION: Use UI.KPI XML annotation to define KPI with DataPoint, Detail, SelectionVariantQualifier and ID.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.KPI" Qualifier="Eval_by_Country-Generic">
    <Record>
        <PropertyValue Property="DataPoint" Path="@UI.DataPoint#Eval_by_Country-Generic"/>
        <PropertyValue Property="Detail">
            <Record Type="UI.KPIDetailType">
                <PropertyValue Property="DefaultPresentationVariant" Path="@UI.PresentationVariant#Eval_by_Currency1"/>
                <PropertyValue Property="AlternativePresentationVariants">
                    <Collection>
                        <Path>@UI.PresentationVariant#Eval_by_Currency_Column</Path>
                    </Collection>
                </PropertyValue>
                <PropertyValue String="Action" Property="SemanticObject"/>
                <PropertyValue String="toappnavsample" Property="Action"/>
            </Record>
        </PropertyValue>
        <PropertyValue String="String for KPI Annotation" Property="ID"/>
        <PropertyValue Property="SelectionVariantQualifier" Path="@UI.SelectionVariant#Eval_by_Currency_1"/>
    </Record>
</Annotation>

<Annotation Term="UI.DataPoint" Qualifier="Eval_by_Country_Generic">
    <Record>
        <PropertyValue Property="Value" Path="Currency"/>
        <PropertyValue String="test" Property="Title"/>
    </Record>
</Annotation>
```

STEP: KPI — ABAP CDS sample
DESCRIPTION: Equivalent KPI definition in ABAP CDS: declare UI.KPI with detail block, selectionVariantQualifier and dataPoint.
LANGUAGE: ABAP CDS
CODE:
```
@UI.KPI: [
    {
        detail: {
            defaultPresentationVariantQualifier: 'Eval_by_Currency1',
            alternativePresentationVariantQualifiers: [
                'Eval_by_Currency_Column'
            ],
            semanticObject: 'Action',
            semanticObjectAction: 'toappnavsample'
        },
        selectionVariantQualifier: 'Eval_by_Currency_1',
        id: 'String for KPI Annotation',
        qualifier: 'Eval_by_Country-Generic',
        dataPoint: {
            title: 'test'
        }
    }
]
```

STEP: KPI — CAP CDS sample
DESCRIPTION: CAP CDS syntax for UI.KPI with DataPoint reference and Detail presentation variants.
LANGUAGE: CAP CDS
CODE:
```
UI.KPI #AllActualCosts: {
    $Type: 'UI.KPIType',
    Detail: {
        $Type: 'UI.KPIDetailType',
        DefaultPresentationVariant: ![@UI.PresentationVariant#Eval_by_Currency1],
        AlternativePresentationVariants: [
            ![@UI.PresentationVariant#Eval_by_Currency_Column]
        ],
        SemanticObject: 'Action',
        Action: 'toappnavsample'
    },
    SelectionVariant: ![@UI.SelectionVariant#Eval_by_Currency_1],
    DataPoint: ![@UI.DataPoint#Eval_by_Country-Generic],
    ID: 'String for KPI Annotation'
}
```

STEP: PresentationVariant — XML
DESCRIPTION: Define PresentationVariant XML to control MaxItems, GroupBy, SortOrder and Visualizations for a KPI or view variant.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.PresentationVariant" Qualifier="Eval_by_Currency1">
    <Record>
        <PropertyValue Property="MaxItems" Int="5"/>
        <PropertyValue Property="GroupBy">
            <Collection>
                <PropertyPath>Country</PropertyPath>
                <PropertyPath>Currency</PropertyPath>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="SortOrder">
            <Collection>
                <Record>
                    <PropertyValue Property="Property" PropertyPath="TotalSales"/>
                    <PropertyValue Property="Descending" Bool="true"/>
                </Record>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="Visualizations">
            <Collection>
                <AnnotationPath>@UI.Chart#Eval_by_Currency_Donut</AnnotationPath>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

STEP: PresentationVariant — ABAP CDS
DESCRIPTION: PresentationVariant in ABAP CDS with groupBy, sortOrder and visualizations settings.
LANGUAGE: ABAP CDS
CODE:
```
@UI.PresentationVariant: [
    {
        maxItems: 5,
        groupBy: [
            'COUNTRY',
            'CURRENCY'
        ],
        sortOrder: [
            {
                by: 'TOTALSALES'
            }
        ],
        visualizations: [
            {
                type: '#AS_CHART',
                qualifier: 'Eval_by_Currency_Donut'
            }
        ],
        qualifier: 'Eval_by_Currency1'
    }
]

// Annotation for VIEWNAME
annotate view VIEWNAME with {}
```

STEP: PresentationVariant — CAP CDS
DESCRIPTION: CAP CDS PresentationVariant syntax for grouping, sorting, and visualization declaration.
LANGUAGE: CAP CDS
CODE:
```
UI.PresentationVariant #Eval_by_Currency1: {
    MaxItems: 5,
    GroupBy: [
        "Country",
        "Currency"
    ],
    SortOrder: [
        {
            Property: "TotalSales",
            Descending: true
        }
    ],
    Visualizations: [
        "@UI.Chart#Eval_by_Currency_Donut"
    ]
}
```

STEP: SelectionVariant — XML
DESCRIPTION: Define SelectionVariant XML for pre-filtering via SelectOptions and Parameters used by PresentationVariant or KPI.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.SelectionVariant" Qualifier="Eval_by_Currency_1">
    <Record>
        <PropertyValue Property="SelectOptions">
            <Collection>
                <Record>
                    <PropertyValue Property="PropertyName" PropertyPath="Country"/>
                    <PropertyValue Property="Ranges">
                        <Collection>
                            <Record>
                                <PropertyValue Property="Sign" EnumMember="UI.SelectionRangeSignType/I"/>
                                <PropertyValue Property="Option" EnumMember="UI.SelectionRangeOptionType/EQ"/>
                                <PropertyValue Property="Low" String="IN"/>
                            </Record>
                        </Collection>
                    </PropertyValue>
                </Record>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="Parameters">
            <Collection>
                <Record Type="UI.Parameter">
                    <PropertyValue Property="PropertyName" PropertyPath="Currency_Target"/>
                    <PropertyValue Property="PropertyValue" String="EUR"/>
                </Record>
                <Record Type="UI.Parameter">
                    <PropertyValue Property="PropertyName" PropertyPath="UoM_Target"/>
                    <PropertyValue Property="PropertyValue" String="KGM"/>
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

STEP: SelectionVariant — CAP CDS
DESCRIPTION: CAP CDS SelectionVariant example mapping SelectOptions and Parameters for pre-filters.
LANGUAGE: CAP CDS
CODE:
```
UI.SelectionVariant #Eval_by_Currency_1: {
    SelectOptions: [
        {
            PropertyName: "Country",
            Ranges: [
                {
                    Sign: "#I",
                    Option: "#EQ",
                    Low: "IN"
                }
            ]
        }
    ],
    Parameters: [
        {
            $Type: "UI.Parameter",
            PropertyName: "Currency_Target",
            PropertyValue: "EUR"
        },
        {
            $Type: "UI.Parameter",
            PropertyName: "UoM_Target",
            PropertyValue: "KGM"
        }
    ]
}
```

STEP: DataPoint — XML
DESCRIPTION: Define UI.DataPoint in XML to configure title, value, format, criticality, target and trend for KPI/DataPoint visualizations.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.DataPoint" Qualifier="Eval_by_Country_Generic">
    <Record Type="UI.DataPointType">
        <PropertyValue Property="Title" String="Sales India - Generic Card" />
        <PropertyValue Property="Value" Path="Sales" />
        <PropertyValue Property="ValueFormat">
            <Record>
                <PropertyValue Property="ScaleFactor" Decimal="2" />
                <PropertyValue Property="NumberOfFractionalDigits" Int="1" />
            </Record>
        </PropertyValue>
        <PropertyValue Property="CriticalityCalculation">
            <Record>
                <PropertyValue Property="ImprovementDirection" EnumMember="UI.ImprovementDirectionType/Minimize" />
                <PropertyValue Property="DeviationRangeHighValue" String="7300" />
                <PropertyValue Property="ToleranceRangeHighValue" String="7200" />
            </Record>
        </PropertyValue>
        <PropertyValue Property="TargetValue" String="2.000" />
        <PropertyValue Property="TrendCalculation">
            <Record>
                <PropertyValue Property="ReferenceValue" String="5201680" />
                <PropertyValue Property="DownDifference" Decimal="10000000.0" />
            </Record>
        </PropertyValue>
    </Record>
</Annotation>
```

STEP: DataPoint — ABAP CDS
DESCRIPTION: ABAP CDS DataPoint declaration showing valueFormat, criticalityCalculation and trendCalculation mapping.
LANGUAGE: ABAP CDS
CODE:
```
@UI.dataPoint: {
    title: "Sales India - Generic Card",
    valueFormat: {
        scaleFactor: 2,
        numberOfFractionalDigits: 1
    },
    criticalityCalculation: {
        improvementDirection: "#MINIMIZE",
        deviationRangeHighValue: 7300,
        toleranceRangeHighValue: 7200
    },
    targetValue: 2.000,
    trendCalculation: {
        referenceValue: "refValElement",
        downDifference: 10000000.0
    }
} Sales;
```

STEP: DataPoint — CAP CDS
DESCRIPTION: CAP CDS DataPoint example mapping UI.DataPointType properties to fields and calculations.
LANGUAGE: CAP CDS
CODE:
```
UI.DataPoint #Eval_by_Country-Generic: {
    $Type: "UI.DataPointType",
    Title: "Sales India - Generic Card",
    Value: "Sales",
    ValueFormat: {
        ScaleFactor: 2,
        NumberOfFractionalDigits: 1
    },
    CriticalityCalculation: {
        ImprovementDirection: "#Minimizing",
        DeviationRangeHighValue: "7300",
        ToleranceRangeHighValue: "7200"
    },
    TargetValue: "2.000",
    TrendCalculation: {
        ReferenceValue: "5201680",
        DownDifference: 10000000.0
    }
}
```

STEP: View Switch / Tabs — Manifest sample
DESCRIPTION: Use valueSelectionInfo and tabs[] in card settings to configure a dropdown view selector on the card. Each tab maps annotation paths and optional dataPoint/presentation/selection variants. Paste this JSON into sap.ovp.cards.<cardId>.settings.
LANGUAGE: JSON
CODE:
```json
"sap.ovp": {
    "globalFilterModel": "salesOrder",
    "globalFilterEntityType": "GlobalFilters", //Deprecated since SAPUI5 1.54.
    "globalFilterEntitySet": "GlobalFilters", //Available from SAPUI5 1.54.
    "showDateInRelativeFormat": false,
    "disableTableCardFlexibility": false,
    "considerAnalyticalParameters": true,
    "useDateRangeType": false,
    "cards": {
        "card014": {
            "model": "salesOrder",
            "template": "sap.ovp.cards.table",
            "settings": {
                "title": "Sales Forecast",
                "subTitle": "per Supplier",
                "valueSelectionInfo": "Value Selection Info",
                "entitySet": "SalesShare",
                "tabs": [
                    {
                        "dynamicSubtitleAnnotationPath": "com.sap.vocabularies.UI.v1.HeaderInfo#dynamicSubtitle",
                        "annotationPath": "com.sap.vocabularies.UI.v1.LineItem#View1",
                        "selectionAnnotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant#line1",
                        "presentationAnnotationPath": "com.sap.vocabularies.UI.v1.PresentationVariant#line",
                        "identificationAnnotationPath": "com.sap.vocabularies.UI.v1.Identification",
                        "dataPointAnnotationPath": "com.sap.vocabularies.UI.v1.DataPoint#line",
                        "value": "{{dropdown_value2}}"
                    },
                    {
                        "dynamicSubtitleAnnotationPath": "com.sap.vocabularies.UI.v1.HeaderInfo#dynamicSubtitle",
                        "annotationPath": "com.sap.vocabularies.UI.v1.LineItem#View4",
                        "identificationAnnotationPath": "com.sap.vocabularies.UI.v1.Identification#item2",
                        "dataPointAnnotationPath": "com.sap.vocabularies.UI.v1.DataPoint#line",
                        "value": "{{dropdown_value4}}"
                    }
                ]
            }
        }
    }
}
```

STEP: Table Area — LineItem annotation (XML)
DESCRIPTION: Define com.sap.vocabularies.UI.v1.LineItem to control columns: Label property is the header, Value property or Target for DataPoint provides column values.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="com.sap.vocabularies.UI.v1.LineItem" Qualifier="View4">
    <Collection>
        <Record Type="com.sap.vocabularies.UI.v1.DataField">
            <PropertyValue Property="Label" String="Order ID"/>
            <PropertyValue Property="Value" Path="SalesOrderID"/>
        </Record>
        <Record Type="com.sap.vocabularies.UI.v1.DataField">
            <PropertyValue Property="Label" String="Customer"/>
            <PropertyValue Property="Value" Path="ToBusinessPartner/EmailAddress"/>
        </Record>
        <Record Type="com.sap.vocabularies.UI.v1.DataField">
            <PropertyValue Property="Label" String="Customer"/>
            <PropertyValue Property="Value" Path="CustomerName"/>
        </Record>
        <Record Type="com.sap.vocabularies.UI.v1.DataFieldForAnnotation">
            <PropertyValue Property="Label" String="TaxAmount"/>
            <PropertyValue Property="Target" AnnotationPath="@com.sap.vocabularies.UI.v1.DataPoint#TaxAmount"/>
        </Record>
    </Collection>
</Annotation>
```

STEP: Table Area — LineItem ABAP CDS
DESCRIPTION: ABAP CDS define per-field @UI.lineItem qualifier usage to map fields to LineItem columns.
LANGUAGE: ABAP CDS
CODE:
```
@UI.lineItem: [
    {
        label: "Order ID",
        position: 10,
        qualifier: "View4"
    }
] SALESORDERID;

@UI.lineItem: [
    {
        label: "Customer",
        value: "_BUSINESSPARTNER.EMAILADDRESS",
        position: 20,
        qualifier: "View4"
    }
] _BUSINESSPARTNER;

@UI.lineItem: [
    {
        label: "Customer",
        position: 30,
        qualifier: "View4"
    }
] CUSTOMERNAME;

@UI.lineItem: [
    {
        label: "TaxAmount",
        valueQualifier: "TaxAmount",
        type: "#AS_DATAPOINT",
        position: 40,
        qualifier: "View4"
    }
] PROPERTY_NAME;
```

STEP: Table Area — LineItem CAP CDS
DESCRIPTION: Define UI.LineItem in CAP CDS with DataField and DataFieldForAnnotation entries; used by the table card for columns.
LANGUAGE: CAP CDS
CODE:
```
UI.LineItem #View4: [
    {
        $Type: "UI.DataField",
        Label: "Order ID",
        Value: "SalesOrderID"
    },
    {
        $Type: "UI.DataField",
        Label: "Customer",
        Value: "ToBusinessPartner.EmailAddress"
    },
    {
        $Type: "UI.DataField",
        Label: "Customer",
        Value: "CustomerName"
    },
    {
        $Type: "UI.DataFieldForAnnotation",
        Label: "TaxAmount",
        Target: "@UI.DataPoint#TaxAmount"
    }
]
```

STEP: DataPoint TaxAmount — XML
DESCRIPTION: DataPoint annotation for TaxAmount used as DataFieldForAnnotation target to populate and style the third column.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="com.sap.vocabularies.UI.v1.DataPoint" Qualifier="TaxAmount">
    <Record Type="com.sap.vocabularies.UI.v1.DataPointType">
        <PropertyValue Property="Title" String="TaxAmount"/>
        <PropertyValue Property="Value" Path="TaxAmount"/>
    </Record>
</Annotation>
```

STEP: DataPoint TaxAmount — ABAP CDS
DESCRIPTION: ABAP CDS DataPoint declaration for TaxAmount qualifier.
LANGUAGE: ABAP CDS
CODE:
```
@UI.dataPoint: {
    title: "TaxAmount"
} TaxAmount;
```

STEP: DataPoint TaxAmount — CAP CDS
DESCRIPTION: CAP CDS DataPoint mapping for TaxAmount to be used by DataFieldForAnnotation.
LANGUAGE: CAP CDS
CODE:
```
UI.DataPoint #TaxAmount: {
    $Type: "UI.DataPointType",
    Title: "TaxAmount",
    Value: "TaxAmount"
}
```

STEP: Manifest — annotationPath sample (use qualifier)
DESCRIPTION: Example manifest card configuration showing annotationPath with qualifier and other card settings; use when you want a qualified LineItem.
LANGUAGE: JSON
CODE:
```json
"sap.ovp": {
    ...
    "disableTableCardFlexibility": false,
    ...
    "card02": {
        "model": "salesOrder",
        "template": "sap.ovp.cards.table",
        "settings": {
            "title": "Sales Orders With Analytical Header",
            "subTitle": "Sales Orders With Analytical Header",
            "listFlavor": "bar",
            "listType": "extended",
            "entitySet": "SalesOrderSet",
            "dataPointAnnotationPath": "com.sap.vocabularies.UI.v1.DataPoint#line_without_trend",
            "selectionAnnotationPath": "com.sap.vocabularies.UI.v1.SelectionVariant#line1",
            "annotationPath": "com.sap.vocabularies.UI.v1.LineItem#View1",
            "presentationAnnotationPath": "com.sap.vocabularies.UI.v1.PresentationVariant#line"
        }
    },
    ...
}
```

STEP: Note — OData V4 template
DESCRIPTION: For OData V4 Fiori elements, use template "sap.ovp.cards.v4.table" in the manifest; all other settings remain identical to OData V2 docs.
LANGUAGE: JSON
CODE:
```json
// Use "sap.ovp.cards.v4.table" as template for OData V4
```

STEP: TableCard Flexibility behavior (actionable rules)
DESCRIPTION: Runtime behavior for disableTableCardFlexibility:
- If disableTableCardFlexibility = true: DataField records are sorted by Importance and entry order; first two DataField become first two columns; third column is DataPoint target (DataFieldForAnnotation) if present, otherwise next DataField.
- If disableTableCardFlexibility = false: columns sorted according to Importance and entry order.
- If a DataField points to a property that also exists inside a DataPoint target, the DataField is skipped to avoid duplicate display.

LANGUAGE: TEXT
CODE:
```text
Behavior rules described above apply at runtime; no code required.
```

STEP: Example — Product Weight Measure (XML)
DESCRIPTION: Full XML example that shows a DataPoint WeightMeasure and a LineItem collection. Use this to render three-column table: Product Name, Supplier, Weight Measure (DataPoint target).
LANGUAGE: XML
CODE:
```xml
<Annotation Term="com.sap.vocabularies.UI.v1.DataPoint" Qualifier="WeightMeasure">
    <Record Type="com.sap.vocabularies.UI.v1.DataPointType">
        <PropertyValue Property="Title" String="Weight"/>
        <PropertyValue Property="Description" Path="Name"/>
        <PropertyValue Property="Value" Path="WeightMeasure"/>
        <PropertyValue Property="CriticalityCalculation">
            <Record Type="com.sap.vocabularies.UI.v1.CriticalityCalculationType">
                <PropertyValue Property="ImprovementDirection" EnumMember="com.sap.vocabularies.UI.v1.CriticalityCalculationType/Maximize"/>
                <PropertyValue Property="ToleranceRangeLowValue" Int="2"/>
                <PropertyValue Property="DeviationRangeLowValue" Int="4"/>
            </Record>
        </PropertyValue>
    </Record>
</Annotation>

<Annotation Term="com.sap.vocabularies.UI.v1.LineItem">
    <Collection>
        <Record Type="com.sap.vocabularies.UI.v1.DataField">
            <PropertyValue Property="Label" String="Product ID"/>
            <PropertyValue Property="Value" Path="ProductID"/>
        </Record>
        <Record Type="com.sap.vocabularies.UI.v1.DataField">
            <PropertyValue Property="Label" String="Category"/>
            <PropertyValue Property="Value" Path="Category"/>
        </Record>
        <Record Type="com.sap.vocabularies.UI.v1.DataField">
            <PropertyValue Property="Label" String="Product Name"/>
            <PropertyValue Property="Value" Path="Name"/>
            <Annotation Term="com.sap.vocabularies.UI.v1.Importance" EnumMember="com.sap.vocabularies.UI.v1.ImportanceType/High"/>
        </Record>
        <Record Type="com.sap.vocabularies.UI.v1.DataField">
            <PropertyValue Property="Label" String="Supplier"/>
            <PropertyValue Property="Value" Path="SupplierName"/>
            <Annotation Term="com.sap.vocabularies.UI.v1.Importance" EnumMember="com.sap.vocabularies.UI.v1.ImportanceType/High"/>
        </Record>
        <Record Type="com.sap.vocabularies.UI.v1.DataField">
            <PropertyValue Property="Label" String="Unit Price"/>
            <PropertyValue Property="Value" Path="Price"/>
            <Annotation Term="com.sap.vocabularies.UI.v1.Importance" EnumMember="com.sap.vocabularies.UI.v1.ImportanceType/High"/>
        </Record>
        <Record Type="com.sap.vocabularies.UI.v1.DataFieldForAnnotation">
            <PropertyValue Property="Label" String="Weight Measure"/>
            <PropertyValue Property="Target" AnnotationPath="@com.sap.vocabularies.UI.v1.DataPoint#WeightMeasure"/>
        </Record>
    </Collection>
</Annotation>
```

STEP: Example — Product Weight Measure (ABAP CDS)
DESCRIPTION: ABAP CDS variant of the weight measure and line item mapping. Use annotate/view declarations as shown.
LANGUAGE: ABAP CDS
CODE:
```
@UI.dataPoint: {
    title: "Weight",
    description: "Name",
    valueFormat: {
        scaleFactor: 2,
        numberOfFractionalDigits: 1
    },
    criticalityCalculation: {
        improvementDirection: "#MAXIMIZE",
        deviationRangeHighValue: 4.3,
        toleranceRangeHighValue: 2.5
    }
} WeightMeasure;

@UI.lineItem: [
    {
        label: "Product ID",
        position: 10
    }
] PRODUCTID;

@UI.lineItem: [
    {
        label: "Category",
        position: 20
    }
] CATEGORY;

@UI.lineItem: [
    {
        importance: "#HIGH",
        label: "Product Name",
        position: 30
    }
] NAME;

@UI.lineItem: [
    {
        importance: "#HIGH",
        label: "Supplier",
        position: 40
    }
] SUPPLIERNAME;

@UI.lineItem: [
    {
        importance: "#HIGH",
        label: "Unit Price",
        position: 50
    }
] PRICE;

@UI.lineItem: [
    {
        label: "Weight Measure",
        valueQualifier: "WeightMeasure",
        type: "#AS_DATAPOINT",
        position: 60
    }
] PROPERTY_NAME;
```

STEP: Example — Product Weight Measure (CAP CDS)
DESCRIPTION: CAP CDS example mapping DataPoint and LineItem entries for the product weight scenario.
LANGUAGE: CAP CDS
CODE:
```
UI.DataPoint #WeightMeasure: {
    $Type: "UI.DataPointType",
    Title: "Weight",
    Description: "Name",
    Value: "WeightMeasure",
    CriticalityCalculation: {
        $Type: "UI.CriticalityCalculationType",
        ImprovementDirection: "#Maximize",
        ToleranceRangeLowValue: 2.5,
        DeviationRangeLowValue: 4.3
    }
},

UI.LineItem: [
    {
        $Type: "UI.DataField",
        Label: "Product ID",
        Value: "ProductID"
    },
    {
        $Type: "UI.DataField",
        Label: "Category",
        Value: "Category"
    },
    {
        $Type: "UI.DataField",
        Label: "Product Name",
        Value: "Name",
        "![@UI.Importance]": "#High"
    },
    {
        $Type: "UI.DataField",
        Label: "Supplier",
        Value: "SupplierName",
        "![@UI.Importance]": "#High"
    },
    {
        $Type: "UI.DataField",
        Label: "Unit Price",
        Value: "Price",
        "![@UI.Importance]": "#High"
    },
    {
        $Type: "UI.DataFieldForAnnotation",
        Label: "Weight Measure",
        Target: "@UI.DataPoint#WeightMeasure"
    }
]
```

STEP: Smart Links — Semantic Object (XML)
DESCRIPTION: Annotate an entity/set property with SemanticObject so smart links are enabled for table values.
LANGUAGE: XML
CODE:
```xml
<Annotations Target="GWSAMPLE_BASIC.SalesOrder/SalesOrderID">
    <Annotation Term="com.sap.vocabularies.Common.v1.SemanticObject" String="OVP"/>
</Annotations>
```

STEP: Smart Links — Semantic Object (ABAP CDS)
DESCRIPTION: ABAP CDS annotate view field with @Consumption.semanticObject to enable smart links.
LANGUAGE: ABAP CDS
CODE:
```
annotate view SALESORDER with {
    @Consumption.semanticObject: 'OVP'
    salesorderid;
}
```

STEP: Smart Links — Semantic Object (CAP CDS)
DESCRIPTION: CAP CDS annotate entity property with @Common.SemanticObject to enable navigation.
LANGUAGE: CAP CDS
CODE:
```
annotate GWSAMPLE_BASIC.SalesOrder with {
    @Common.SemanticObject: 'OVP'
    SalesOrderID;
}
```

STEP: Contact in LineItem — XML
DESCRIPTION: Use DataFieldForAnnotation pointing to Communication.Contact to render contact details in table card.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="com.sap.vocabularies.UI.v1.LineItem" Qualifier="NewSalesOrders">
    <Collection>
        <Record Type="com.sap.vocabularies.UI.v1.DataField">
            <PropertyValue Property="Label" String="Order ID (Company)"/>
            <PropertyValue Property="Value" Path="SalesOrderID"/>
        </Record>
        <Record Type="com.sap.vocabularies.UI.v1.DataFieldForAnnotation">
            <PropertyValue Property="Label" String="Created by (Role)" />
            <PropertyValue Property="Target" AnnotationPath="ToBusinessPartner/@com.sap.vocabularies.Communication.v1.Contact" />
        </Record>
    </Collection>
</Annotation>
```

STEP: Contact in LineItem — ABAP CDS
DESCRIPTION: ABAP CDS line item entries; use type #AS_CONTACT to render contact UI for a property.
LANGUAGE: ABAP CDS
CODE:
```
@UI.lineItem: [
    {
        label: "Order ID (Company)",
        position: 10,
        qualifier: "NewSalesOrders"
    }
] SALESORDERID;

@UI.lineItem: [
    {
        label: "Created by (Role)",
        value: "_BUSINESSPARTNER",
        type: "#AS_CONTACT",
        position: 20,
        qualifier: "NewSalesOrders"
    }
] PROPERT_NAME;
```

STEP: Contact in LineItem — CAP CDS
DESCRIPTION: CAP CDS mapping where UI.DataFieldForAnnotation Target references Communication.Contact for ToBusinessPartner.
LANGUAGE: CAP CDS
CODE:
```
UI.LineItem #NewSalesOrders: [
    {
        $Type: "UI.DataField",
        Label: "Order ID (Company)",
        Value: "SalesOrderID"
    },
    {
        $Type: "UI.DataFieldForAnnotation",
        Label: "Created by (Role)",
        Target: "ToBusinessPartner/@Communication.Contact"
    }
]
```

STEP: Communication.Contact — XML
DESCRIPTION: Define the Communication.Contact annotation (tel/email) to control contact display (phone, fax, email) used by DataFieldForAnnotation.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="com.sap.vocabularies.Communication.v1.Contact">
    <Record>
        <PropertyValue Property="tel">
            <Collection>
                <Record>
                    <PropertyValue Property="type" EnumMember="com.sap.vocabularies.Communication.v1.PhoneType/fax"/>
                    <PropertyValue Property="uri" Path="FaxNumber"/>
                </Record>
                <Record>
                    <PropertyValue Property="type" EnumMember="com.sap.vocabularies.Communication.v1.PhoneType/work com.sap.vocabularies.Communication.v1.PhoneType/preferred"/>
                    <PropertyValue Property="uri" Path="PhoneNumber"/>
                </Record>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="email">
            <Collection>
                <Record>
                    <PropertyValue Property="type" EnumMember="com.sap.vocabularies.Communication.v1.ContactInformationType/preferred com.sap.vocabularies.Communication.v1.ContactInformationType/work"/>
                    <PropertyValue Property="address" Path="EmailAddress"/>
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

STEP: Contact fields — ABAP CDS view definition
DESCRIPTION: Example ABAP CDS view fields with semantics annotations for email and telephone used by Communication.Contact.
LANGUAGE: ABAP CDS
CODE:
```
define view VIEWNAME {
    @Semantics.name.fullName: true 
    CompanyName,

    @Semantics.eMail.address: true 
    @Semantics.eMail.type: [#WORK] 
    EmailAddress,

    @Semantics.telephone.type: [#FAX] 
    FaxNumber,

    @Semantics.telephone.type: [#WORK] 
    PhoneNumber
}
```

STEP: Communication.Contact — CAP CDS
DESCRIPTION: CAP CDS representation of Communication.Contact for tel and email mappings used by UI annotations.
LANGUAGE: CAP CDS
CODE:
```
Communication.Contact: {
    tel: [
        {
            type: "#fax",
            uri: "FaxNumber"
        },
        {
            type: ["#work", "#pref"],
            uri: "PhoneNumber"
        }
    ],
    email: [
        {
            type: ["#pref", "#work"],
            address: "EmailAddress"
        }
    ]
}
```

STEP: Text Arrangement — XML
DESCRIPTION: Use Common.Text and UI.TextArrangement annotations to control text format (TextLast/TextFirst/TextOnly) for label/value composition.
LANGUAGE: XML
CODE:
```xml
<Annotations xmlns="http://docs.oasis-open.org/odata/ns/edm" Target="GWSAMPLE_BASIC.SalesOrder/CustomerID">
    <Annotation Term="com.sap.vocabularies.Common.v1.Text" Path="Supplier_Name">
        <Annotation Term="com.sap.vocabularies.UI.v1.TextArrangement" EnumMember="com.sap.vocabularies.UI.v1.TextArrangementType/TextLast"/>
    </Annotation>
</Annotations>
```

STEP: Text Arrangement — ABAP CDS
DESCRIPTION: ABAP CDS syntax to apply UI.TextArrangement on a field (TextLast/TextFirst/TextOnly).
LANGUAGE: ABAP CDS
CODE:
```
annotate view SALESORDER with {
    @UI.TextArrangement: #TEXT_LAST
    customerid;
}
```

STEP: Text Arrangement — CAP CDS
DESCRIPTION: CAP CDS annotate Common.Text and UI.TextArrangement to set text arrangement for a property.
LANGUAGE: CAP CDS
CODE:
```
annotate GWSAMPLE_BASIC.SalesOrder with {
    @Common.Text: Supplier_Name
    @UI.TextArrangement: #TextLast
    CustomerID;
}
```

STEP: Text Alignment — Table alignment rules
DESCRIPTION: Use these alignment rules while designing annotations; they are applied automatically by the table card:
- DataField or Contact annotation: Left aligned.
- DataPoint (with or without Criticality/CriticalityCalculation) OR any property of type Edm.DateTime/Edm.DateTimeOffset: Right aligned.
- DataPoint with Criticality and property of type Edm.String: Center aligned.
LANGUAGE: TEXT
CODE:
```text
Apply alignment rules when creating DataField/DataPoint annotations to ensure correct table alignment at runtime.
```
--------------------------------

**TITLE**: Table Groupings in SAP Fiori Elements (OData V2 & V4)

**INTRODUCTION**: This document explains how SAP Fiori elements handles table row grouping (automatic behavior, supported table types, restrictions) and how to control grouping and defaults for OData V2 and OData V4. It includes actionable configuration snippets (manifest.json), annotation examples (XML, CAP CDS), and implementation notes for responsive and analytical tables.

**TAGS**: fiori-elements, table-grouping, analytical-table, responsive-table, ODataV2, ODataV4, PresentationVariant, manifest.json, annotations

STEP: Supported table types and quick overview
DESCRIPTION: Identify which UI5 table types support automatic row grouping and when grouping is handled by the server vs. client.
LANGUAGE: text
CODE:
```text
- Supported table types for grouping:
  - sap.m.Table (ResponsiveTable) -> grouping supported
  - sap.ui.Table.AnalyticalTable -> grouping supported
  - Not supported: GridTable, TreeTable

- Grouping behavior:
  - Grouping is handled automatically by SAP Fiori elements.
  - For AnalyticalTable grouping takes place on the server.
  - Header formatters do NOT affect server-side grouping (groups remain separate even if formatted identically).
```

STEP: Analytical table restrictions (must-know)
DESCRIPTION: Actionable restrictions to apply when using analytical tables with grouping. Validate model/annotations against these constraints.
LANGUAGE: text
CODE:
```text
Restrictions for AnalyticalTable groupings:
- Grouping can only be activated for dimension columns.
- Grouping is server-side; header formatter does not change grouping keys.
- TextArrangement annotation is NOT supported for grouping headers. Text + property displays as: "m – Meter".
  See API reference: sap.ui.comp.smarttable.SmartTable.annotations.TextArrangement
- Displaying values with units-of-measure within grouping headers is NOT supported for analytical tables.
```

STEP: How SAP Fiori elements sets grouping header text formatters
DESCRIPTION: Use these hooks when implementing or customizing grouping header formatting for responsive and analytical tables.
LANGUAGE: text
CODE:
```text
- ResponsiveTable:
  - A grouping function is set on the sorter: fnGroup of sap.ui.model.Sorter
  - Use sorter with fnGroup to customize group header text for responsive tables.

- AnalyticalTable:
  - The property groupHeaderFormatter of sap.ui.table.AnalyticalColumn is set.
  - Customize groupHeaderFormatter to control group header text for analytical columns.
```

STEP: Grouping header types and formatting rules (OData -> formatted header examples)
DESCRIPTION: Use this mapping to predict or implement formatted grouping header text for common OData types. Keep in mind units/currencies formatting availability.
LANGUAGE: HTML
CODE:
```html
<table>
<tr>
<th valign="top">OData Type</th>
<th valign="top">SAP Display Format</th>
<th valign="top">OData Example</th>
<th valign="top">Unformatted</th>
<th valign="top">Formatted</th>
<th valign="top">Comments</th>
</tr>
<tr>
<td valign="top">Edm.DateTimeOffsetDate</td>
<td valign="top">Date</td>
<td valign="top">/Date(1485471600000 +0000)/</td>
<td valign="top">Fri Jan 27 2017 00:00:00 GMT+0100 (Central European Standard Time)</td>
<td valign="top">Jan 26, 2017</td>
<td valign="top">UTC</td>
</tr>
<tr>
<td valign="top">Edm.DateTimeOffset</td>
<td valign="top"> </td>
<td valign="top">/Date(1485471600000 +0000)/</td>
<td valign="top">Fri Jan 27 2017 00:00:00 GMT+0100 (Central European Standard Time)</td>
<td valign="top">Jan 27, 2017, 12:00:00 AM</td>
<td valign="top"> </td>
</tr>
<tr>
<td valign="top">Edm.DateTime</td>
<td valign="top">Date</td>
<td valign="top">/Date(1485471600000 +0000)/</td>
<td valign="top">Fri Jan 27 2017 00:00:00 GMT+0100 (Central European Standard Time)</td>
<td valign="top">Jan 26, 2017</td>
<td valign="top">UTC</td>
</tr>
<tr>
<td valign="top">Edm.DateTime</td>
<td valign="top"> </td>
<td valign="top">/Date(1485471600000 +0000)/</td>
<td valign="top">Fri Jan 27 2017 00:00:00 GMT+0100 (Central European Standard Time)</td>
<td valign="top">Jan 27, 2017, 12:00:00 AM</td>
<td valign="top"> </td>
</tr>
<tr>
<td valign="top">Edm.Time</td>
<td valign="top">Time</td>
<td valign="top">PT11H13M01S</td>
<td valign="top">[object Object] is: {ms: 43980000, __edmType: "Edm.Time"}</td>
<td valign="top">11:13:01 AM</td>
<td valign="top"> </td>
</tr>
<tr>
<td valign="top">Edm.String</td>
<td valign="top">Date</td>
<td valign="top">20180313</td>
<td valign="top">20180313</td>
<td valign="top">Mar 13, 2018</td>
<td valign="top"> </td>
</tr>
<tr>
<td valign="top">Edm.Boolean</td>
<td valign="top"> </td>
<td valign="top">true</td>
<td valign="top">true</td>
<td valign="top">Yes</td>
<td valign="top"> </td>
</tr>
<tr>
<td valign="top">Edm.Decimal</td>
<td valign="top"> </td>
<td valign="top">10</td>
<td valign="top">10</td>
<td valign="top">10.000 m*</td>
<td valign="top">Unit of measure</td>
</tr>
<tr>
<td valign="top">Edm.Decimal</td>
<td valign="top"> </td>
<td valign="top">2498.00</td>
<td valign="top">2498.00</td>
<td valign="top">2,498.00 EUR*</td>
<td valign="top">Currency</td>
</tr>
<tr>
<td valign="top">Edm.String</td>
<td valign="top"> </td>
<td valign="top">m</td>
<td valign="top">m</td>
<td valign="top">Meter (m)*</td>
<td valign="top">Unit of measure and TextArrangement</td>
</tr>
<tr>
<td valign="top">Edm.String</td>
<td valign="top"> </td>
<td valign="top">EUR</td>
<td valign="top">EUR</td>
<td valign="top">Euro (EUR)*</td>
<td valign="top">Currency and TextArrangement</td>
</tr>
</table>

* Units of measure or currencies in the grouping header are supported only in responsive tables.
```

STEP: Disable grouping in Responsive Table (OData V4) via manifest.json
DESCRIPTION: Disable grouping (and other personalization options) using table personalization in manifest.json under the LineItem annotation. Insert the snippet under the relevant LineItem entry in your manifest.
LANGUAGE: JSON
CODE:
```json
"_Item/@com.sap.vocabularies.UI.v1.LineItem": {
     "tableSettings": {
          "type": "ResponsiveTable",
          "condensedTableLayout": true,
          "personalization": {
               "column": true,
               "sort": false,
               "group": false
          },
          ...
     }
}
```

STEP: Define default groups and totals using PresentationVariant (OData V4)
DESCRIPTION: Define default group levels and totals at application launch by annotating entity sets with UI.PresentationVariant (PV) or SelectionPresentationVariant (SPV). Always include Visualizations in the PV/SPV so Fiori elements will consider it. Use the XML or CAP CDS code samples below.
LANGUAGE: XML
CODE:
```xml
<Annotations Target="sap.fe.managepartners.ManagePartnersService.EntityContainer/BusinessPartners">
  <Annotation Term="UI.PresentationVariant">
    <Record Type="UI.PresentationVariantType">
      <PropertyValue Property="GroupBy">
        <Collection>
          <PropertyPath>Country</PropertyPath>
        </Collection>
      </PropertyValue>
      <PropertyValue Property="Total">
        <Collection>
          <PropertyPath>SalesAmount</PropertyPath>
        </Collection>
      </PropertyValue>
      <PropertyValue Property="Visualizations">
        <Collection>
          <AnnotationPath>@UI.Chart</AnnotationPath>
          <AnnotationPath>@UI.LineItem</AnnotationPath>
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

STEP: Define default groups and totals using CAP CDS annotation (OData V4)
DESCRIPTION: CAP CDS alternative for PresentationVariant. Ensure Visualizations is present.
LANGUAGE: CDS
CODE:
```cds
UI.PresentationVariant : {
    GroupBy : [
        Country
    ],
    Total : [
        SalesAmount
    ],
    Visualizations : [
        '@UI.Chart',
        '@UI.LineItem',
    ]
}
```

STEP: Behavioral notes and restrictions for PresentationVariant / totals
DESCRIPTION: Operational rules to validate when providing PresentationVariant for analytical lists and responsive tables.
LANGUAGE: text
CODE:
```text
- You MUST provide PresentationVariant.Visualizations. Without Visualizations the PV/SPV is ignored.
  - Chart visualization renders only in the Analytical List Page (ALP) template.
  - On the List Report Page, only the LineItem visualization is rendered.

- Default totals behavior:
  - If no PresentationVariant is defined for an analytical table, totals are provided by default for all aggregatable columns.
  - If a PresentationVariant is defined and includes Total entries, totals are provided only for the listed aggregatable properties.
  - If Total is defined but empty -> no totals.
  - If Total attribute is missing -> totals provided by default for all aggregatable properties.

- Restrictions:
  - If a group contains multiple units or currencies, a direct total cannot be computed.
    - The table displays a "Show Details" link which opens a popup with totals/subtotals per unit or currency.
  - Responsive table supports only one level of grouping. If multiple levels are specified in PresentationVariant, only the first level is applied.
```

STEP: Screenshots and UI references
DESCRIPTION: Reference image file paths used in the original documentation for visual verification.
LANGUAGE: text
CODE:
```text
Screenshots referenced:
- images/Table_Grouping_b36df77.png
- images/ALP_Groupings_and_Totals_ae1b171.png
- images/ALP_Changing_Groupings_and_Totals_d94d57a.png
```
--------------------------------

**TITLE**: Tables — configuration and annotation samples for SAP Fiori elements

**INTRODUCTION**: Practical, code-focused reference for configuring table behavior and appearance in SAP Fiori elements apps. Includes actionable steps and exact code snippets for: choosing table types, controlling column visibility (UI.Importance, UI.Hidden), context-menu behavior, copy-to-clipboard, freezing columns, column-width calculation, and tuning data loading (threshold, scrollThreshold) for OData V2 and V4.

**TAGS**: fiori-elements-framework, tables, manifest.json, annotations, UI.Importance, UI.Hidden, threshold, scrollThreshold, copy, frozenColumnCount, responsive-table, grid-table, analytical-table, tree-table, ODataV2, ODataV4

STEP: 1 — Determine default table type (OData V4)
DESCRIPTION: The table type in OData V4 is determined by manifest configuration or by inspecting entity characteristics. Use these rules to decide whether to explicitly set a table type in manifest.json or rely on defaults:
- If the entity set supports analytical usage (@Aggregation.ApplySupported with transformations including filter, identity, orderby, skip, top, groupby, aggregate, concat), default is AnalyticalTable.
- If both @Aggregation.RecursiveHierarchy and @Hierarchy.RecursiveHierarchy with a common RecursiveHierarchy qualifier exist, default is TreeTable.
- Otherwise default is ResponsiveTable.
LANGUAGE: plaintext
CODE:
```plaintext
Default precedence (OData V4):
1. AnalyticalTable if @Aggregation.ApplySupported + transformation functions
2. TreeTable if @Aggregation.RecursiveHierarchy and @Hierarchy.RecursiveHierarchy (same qualifier)
3. ResponsiveTable otherwise
```

STEP: 2 — Configure custom actions and context menu entries (manifest.json)
DESCRIPTION: To expose custom actions in the context menu, define actions under sap.ui.controllerExtensions -> sap.ui.generic.app -> <EntitySet>. Set requiresSelection to true and excludeFromContextMenu false or omitted. To exclude a custom action from the context menu set excludeFromContextMenu to true.
LANGUAGE: JSON
CODE:
```json
"sap.ui.controllerExtensions": {
    "sap.suite.ui.generic.template.ListReport.view.ListReport": {
        "controllerName": "STTA_MP.ext.controller.ListReportExtension",
        "sap.ui.generic.app": {
            "STTA_C_MP_Product": {
                "EntitySet": "STTA_C_MP_Product",
                "Actions": {
                    ...
                    "CopyWithNewSupplier": {
                        "id": "CopyWithNewSupplier",
                        "text": "Copy with new Supplier",
                        "press": "onCopyWithNewSupplier",
                        "excludeFromContextMenu": false,
                        "requiresSelection": true,
                    }
                    ...
                }
            }
        }
    }
}
```

STEP: 3 — Control column visibility by screen size using UI.Importance (XML annotation)
DESCRIPTION: Use UI.Importance to control which columns are visible, pop-in, or hidden when screen width is reduced. Set EnumMember to UI.ImportanceType/High, /Medium, or /Low. High stays visible (may pop-in), Low and Medium/None are hidden progressively.
LANGUAGE: XML
CODE:
```xml
<Annotations Target="STTA_PROD_MAN.STTA_C_MP_ProductSalesPriceType">
    <Annotation Term="UI.LineItem">
        <Collection>
            <Record Type="UI.DataField">
                <PropertyValue Property="Value" Path="PriceDay" />
                <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High" />
            </Record>
            <Record Type="UI.DataField">
                <PropertyValue Property="Value" Path="TargetPrice" />
                <!-- This will be treated with default importance "None" which is the same as "Medium" -->
            </Record>
            <Record Type="UI.DataField">
                <PropertyValue Property="Value" Path="DiscountPriceTarget" />
                <Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/Low" />
            </Record>
        </Collection>
    </Annotation>
</Annotations>
```

STEP: 4 — Hide entire columns or fields using UI.Hidden (XML, ABAP CDS, CAP CDS)
DESCRIPTION: - To hide an entire column statically, set UI.Hidden to Bool="true".  
- To hide a specific field per row, set UI.Hidden with a Path; fields where the path evaluates to true are hidden. If the path-based UI.Hidden evaluates to true for all rows, only the fields are hidden, not the entire column. Avoid path-based UI.Hidden on groupable/sortable/filterable columns.
LANGUAGE: XML
CODE:
```
<Annotation Term="UI.LineItem">
    <Collection>
        <Record Type="UI.DataFieldForAnnotation">
            <PropertyValue Property="Target" AnnotationPath="@UI.FieldGroup#multipleActionFields" />
            <PropertyValue Property="Label" String="Sold-To Party" />
            <Annotation Term="UI.Hidden" Path="Delivered" />
        </Record>
    </Collection>
</Annotation>
```

LANGUAGE: ABAP CDS
CODE:
```
@UI.lineItem: [{
    type: #AS_FIELDGROUP,
    valueQualifier: 'multipleActionFields',
    label: 'Sold-To Party',
    hidden: #( 'Delivered' )
}]
TEST;
```

LANGUAGE: CAP CDS
CODE:
```
LineItem: {
    $value: [
        {
            $Type: 'UI.DataFieldForAnnotation',
            Target: '@UI.FieldGroup#multipleActionFields',
            Label: 'Sold-To Party',
            ![@UI.Hidden]: Delivered
        }
    ]
}
```

STEP: 5 — Show/hide Copy to Clipboard button (manifest.json, multiple targets)
DESCRIPTION: Configure the copy button visibility per table with tableSettings.copy in the List Report, Analytical List Page, or at section level in the Object Page. Table-level or section-level copy settings override broader settings; section-level has higher priority than object-page-level.
LANGUAGE: JSON
CODE:
```json
"sap.ui.generic.app": {
    "pages": {
        "ListReport|<EntitySetName>": {
            "entitySet": "<EntitySetName>",
            "component": {
                "name": "sap.suite.ui.generic.template.ListReport",
                "settings": {
                    "tableSettings": {
                        "copy": false
                    }
                }
            }
        }
    }
}
```

LANGUAGE: JSON
CODE:
```json
"sap.ui.generic.app": {
    "pages": {
        "ListReport|<EntitySetName>": {
            "entitySet": "<EntitySetName>",
            "component": {
                "name": "sap.suite.ui.generic.template.AnalyticalListPage",
                "settings": {
                    "tableSettings": {
                        "copy": true
                    }
                }
            }
        }
    }
}
```

LANGUAGE: JSON
CODE:
```json
"sap.ui.generic.app": {
    "pages": {
        "ListReport|<EntitySetName>": {
            ...
            ...
            "pages": {
                "ObjectPage|<EntitySetName>": {
                    "entitySet": "<EntitySetName>",
                    "component": {
                        "name": "sap.suite.ui.generic.template.ObjectPage",
                        "settings": {
                            "sections": {
                                "SalesOrderItemsID": {
                                    "navigationProperty": "<NavigationProperty>",
                                    "entitySet": "<NavigationEntitySetName>",
                                    "tableSettings": {
                                        "copy": true
                                    }
                                }
                            },
                            "tableSettings": {
                                "copy": false
                            }
                        }
                    }
                }
            }
        }
    }
}
```

STEP: 6 — Configure threshold (initial preload) — OData V2 (manifest.json, List Report / Object Page / Analytical List Page)
DESCRIPTION: Set tableSettings.threshold in the component settings to add N preloaded rows in addition to the visible rows. Example values override defaults. If threshold is 0, no preloading occurs and scrollThreshold is used instead.
LANGUAGE: JSON
CODE:
```
"component": {
    "name": "sap.suite.ui.generic.template.ListReport",
    "list": true,
    "settings": {
        "gridTable": true,
        "tableSettings": {
            "threshold": 400
        }
    }
}
```

LANGUAGE: JSON
CODE:
```
"component": {
    "name": "sap.suite.ui.generic.template.ObjectPage",
    "settings": {
        "showRelatedApps": true,
        "gridTable": true,
        "editableHeaderContent": true,

        "tableSettings": {
            "threshold": 400
        }
    }
}
```

LANGUAGE: JSON
CODE:
```
"component": {
    "name": "sap.suite.ui.generic.template.AnalyticalListPage",
    "list": true,
    "settings": {
        "tableSettings": {
            "type": "AnalyticalTable",
            "multiSelect": true,
            "selectAll": false,
            "selectionLimit": 10,
            "threshold": 400
        }
    }
}
```

STEP: 7 — Configure scrollThreshold (dynamic loading) — OData V2 (manifest.json)
DESCRIPTION: Configure tableSettings.scrollThreshold to control how many records are loaded when scrolling (default 300). For analytical and tree tables, ensure scrollThreshold > threshold to take effect.
LANGUAGE: JSON
CODE:
```
"component": {
    "name": "sap.suite.ui.generic.template.ListReport",
    "list": true,
    "settings": {
        "gridTable": true,
        "tableSettings": {
            "scrollThreshold": 600
        }
    }
}
```

LANGUAGE: JSON
CODE:
```
"component": {
    "name": "sap.suite.ui.generic.template.ObjectPage",
    "settings": {
        "showRelatedApps": true,
        "gridTable": true,
        "editableHeaderContent": true,

        "tableSettings": {
            "scrollThreshold": 600
        }
    }
}
```

LANGUAGE: JSON
CODE:
```
"component": {
    "name": "sap.suite.ui.generic.template.AnalyticalListPage",
    "list": true,
    "settings": {
        "tableSettings": {
            "type": "AnalyticalTable",
            "multiSelect": true,
            "selectAll": false,
            "selectionLimit": 10,
            "scrollThreshold": 600
        }
    }
}
```

STEP: 8 — Configure threshold and scrollThreshold — OData V4 (manifest.json examples)
DESCRIPTION: OData V4 uses manifest target/component options or controlConfiguration to set threshold/scrollThreshold. The sample below shows setting type and threshold for a target. Use controlConfiguration to scope to @com.sap.vocabularies.UI.v1.LineItem.
LANGUAGE: JSON
CODE:
```
"targets": {
                "SalesOrderManageList": {
                    "type": "Component",
                    "id": "SalesOrderManageList",
                    "name": "sap.fe.templates.ListReport",
                    "options": {
                        "settings": {
                            "contextPath": "/SalesOrderManage",
                            "controlConfiguration": {
                                "@com.sap.vocabularies.UI.v1.LineItem": {
                                    "tableSettings": {
                                        "type": "ResponsiveTable",
                                        "threshold": 100
                                    }
                                }
                            }
                        }
                    }
                }
            }
```

LANGUAGE: JSON
CODE:
```
"sap.ui5": {
    "routing": {
        "targets": {
            "SalesOrderManageList": {
                "options": {
                    "settings": {
                        "controlConfiguration": {
                            "@com.sap.vocabularies.UI.v1.LineItem": {
                                "tableSettings": {
                                    "type": "GridTable",
                                    "scrollThreshold": 200
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}
```

STEP: 9 — Freeze columns and disable freezing (manifest.json)
DESCRIPTION: Use frozenColumnCount to freeze a fixed number of first columns (not available for responsive tables). Use disableColumnFreeze to remove the *Column Settings* freezing option.
LANGUAGE: JSON
CODE:
```json
"_Item/@com.sap.vocabularies.UI.v1.LineItem": {
    "tableSettings": {
        "type": "GridTable",
        "frozenColumnCount": 3,
        …
    },
    …
}
```

LANGUAGE: JSON
CODE:
```json
"_Item/@com.sap.vocabularies.UI.v1.LineItem": {
     "tableSettings": {
          "type": "GridTable",
          "disableColumnFreeze": true,
          …
     },
     ...
}
```

STEP: 10 — Include column header when auto-calculating column width (manifest.json)
DESCRIPTION: Set widthIncludingColumnHeader at table level (controlConfiguration) or override at column level under columns definition. Column-level setting has higher priority.
LANGUAGE: JSON
CODE:
```json
"controlConfiguration": {
    "@com.sap.vocabularies.UI.v1.LineItem": {
        "tableSettings": {
            "widthIncludingColumnHeader": true
        },
        "columns": {
            "DataField::commonProperty": {
                "widthIncludingColumnHeader": false
            }
        }
    }
}
```

STEP: 11 — Disable copy-to-clipboard in OData V4 (manifest.json)
DESCRIPTION: Use disableCopyToClipboard under controlConfiguration -> @com.sap.vocabularies.UI.v1.LineItem -> tableSettings to hide the Copy to Clipboard button for responsive and grid tables in OData V4 apps.
LANGUAGE: JSON
CODE:
```
"sap.ui5": {
    "routing": {
        "targets": {
            "SalesOrderManageList": {
                "options": {
                    "settings": {
                        "controlConfiguration": {
                            "@com.sap.vocabularies.UI.v1.LineItem": {
                                "tableSettings": {
                                    "disableCopyToClipboard": true
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}
```

STEP: 12 — SearchRestrictions: define whether an entity is searchable (XML & CAP CDS)
DESCRIPTION: Use Capabilities.NavigationRestrictions on the parent entity to restrict Searchable for a navigation property (non-containment and containment scenarios). If not present at the parent, define SAP__capabilities.SearchRestrictions directly on the child entity set. For analytical or tree tables, search is enabled if the search transformation is present in @Aggregation.ApplySupported or if no Transformations are defined.
LANGUAGE: XML
CODE:
```xml
<Annotations Target="com.c_salesordermanage_sd.Container/SalesOrderManage">
    <Annotation Term="Capabilities.NavigationRestrictions">
        <Record>
            <PropertyValue Property="RestrictedProperties">
                <Collection>
                    <Record>
                        <PropertyValue Property="NavigationProperty" NavigationPropertyPath="_Items" />
                        <PropertyValue Property="SearchRestrictions">
                            <Record>
                                <PropertyValue Property="Searchable" Bool="false" />
                            </Record>
                        </PropertyValue>
                    </Record>
                </Collection>
            </PropertyValue>
        </Record>
    </Annotation>
</Annotations>
```

LANGUAGE: CAP CDS
CODE:
```
entity SalesOrderManage
    @(Capabilities: {
        NavigationRestrictions: {
            RestrictedProperties: [{
                NavigationProperty: '_Items',
                SearchRestrictions: {
                    Searchable: false
                }
            }]
        }
    })
```

LANGUAGE: XML
CODE:
```xml
<Annotations Target="com.c_salesordermanage_sd.Container/SalesOrderItem">
    <Annotation Term="SAP__capabilities.SearchRestrictions">
        <Record>
            <PropertyValue Property="Searchable" Bool="false" />
        </Record>
    </Annotation>
</Annotations>
```

LANGUAGE: CAP CDS
CODE:
```
entity SalesOrderItem
    @(Capabilities: {
        SearchRestrictions: {
            Searchable: false
        }
    })
```

LANGUAGE: XML
CODE:
```xml
<Annotation Term="SAP__aggregation.ApplySupported">
    <Record>
        <PropertyValue Property="Transformations">
            <Collection>
                <String>filter</String>
                <String>orderby</String>
                <String>search</String>
                <String>descendants</String>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

STEP: 13 — Notes and usage tips (short actionable reminders)
DESCRIPTION: - Default row selection mode is single-selection; change selection mode via selection configuration (see related docs).  
- Use extensionAPI.getSelectedContexts to get selected rows for context menu actions — call it only from synchronous code blocks.  
- Responsive tables are for small item sets (<= 200). Use GridTable/Tree/Analytical for large sets.  
- For responsive tables, UI.Importance controls pop-in/hide behavior. Columns with semantic keys and no importance are treated as High.  
LANGUAGE: plaintext
CODE:
```plaintext
Key reminders:
- Default selection: single-selection; switch to multi-selection if needed.
- Use extensionAPI.getSelectedContexts only synchronously.
- Responsive table restriction: total items <= 200.
- Columns without importance but containing a semantic key are considered High importance.
```


--------------------------------

**TITLE**: Chart Building Block — Instantiation, Personalization, and API Usage

**INTRODUCTION**: Practical, code-focused reference for instantiating and integrating the sap.fe.macros.Chart building block. Includes the required backend aggregation note, the sample XML macro, personalization configuration, linking with a FilterBar, handling selection events, and examples of using public APIs to get/set presentation and selection variants.

**TAGS**: fiori-elements-framework, chart, macros, UI5, personalization, aggregation, variant-management, filterbar, API

**STEP**: 1 — Ensure backend aggregation is enabled

**DESCRIPTION**: Charts require the referenced entity set to support aggregation on the backend. Confirm aggregation is enabled before instantiating the Chart building block. See the Configuring Charts subsection for backend configuration details.

- Reference: Enabling Aggregation in the Back End
- File path / anchor: configuring-charts-653ed0f.md#loio653ed0f4f0d743dbb33ace4f68886c4e__enabling_aggregation_subsection

**LANGUAGE**: Documentation

**CODE**:
```text
See: configuring-charts-653ed0f.md#loio653ed0f4f0d743dbb33ace4f68886c4e__enabling_aggregation_subsection
```

**STEP**: 2 — Instantiate the Chart macro (basic XML example)

**DESCRIPTION**: Use the macros:Chart XML macro to create a chart bound to an entity set or navigation property. The sample below demonstrates common properties: id, contextPath, metaPath, event handler for selections, personalization settings, and selectionMode.

- Note: contextPath is optional if metaPath is an absolute path. If metaPath is relative and contextPath is omitted, the parent binding path is used as contextPath.

**LANGUAGE**: XML

**CODE**:
```xml
<macros:Chart
    id="chartDefault"
    contextPath="/RootEntitySet"
    metaPath="@com.sap.vocabularies.UI.v1.Chart"
    dataPointsSelected=".onChartSelectionChanged"
    personalization="Sort,Type,Item"
    selectionMode="Multiple"
></macros:Chart>
```

**STEP**: 3 — Configure personalization and visible tabs

**DESCRIPTION**: Configure which personalization tabs appear using the personalization property. Example value: "Sort,Type,Item" shows only the Sort, Type and Item tabs. Enable chart personalization to use getSelectionVariant/setSelectionVariant (see Step 5). Variant management can be enabled via the page/manifest variant configuration and chart-specific personalization properties.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- personalization controls which tabs are available in the chart personalization dialog -->
<macros:Chart
    id="chartDefault"
    personalization="Sort,Type,Item"
    selectionMode="Multiple"
    metaPath="@com.sap.vocabularies.UI.v1.Chart"
    contextPath="/RootEntitySet"
/>
```

**STEP**: 4 — Handle chart selection events (JavaScript controller)

**DESCRIPTION**: Attach a handler to the dataPointsSelected event in the macro (dataPointsSelected=".onChartSelectionChanged"). In the controller, implement onChartSelectionChanged to read selected data points from the event and act on them (e.g., update other controls, call oData operations, or synchronize with a FilterBar).

**LANGUAGE**: JavaScript

**CODE**:
```javascript
onChartSelectionChanged: function (oEvent) {
    // Example event parameters depend on the macro implementation; commonly include selected data points
    const aSelectedDataPoints = oEvent.getParameter("dataPoints") || [];
    // Process selected data points
    // Example: extract keys or dimensions for downstream filtering
    const aKeys = aSelectedDataPoints.map(dp => dp.key);
    // Use or pass selection to other components
    // e.g., update a FilterBar or set selection variant on a chart/table
    // this.byId("filterBar").setSelectionVariant(oSelectionVariant);
}
```

**STEP**: 5 — Link Chart with a FilterBar (example pattern)

**DESCRIPTION**: Typical integration is to read a SelectionVariant from the FilterBar and apply it to the Chart or vice versa. The chart exposes getSelectionVariant()/setSelectionVariant() for this purpose. Ensure chart personalization is enabled if you plan to use the selection-variant APIs (see Step 6 note).

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Example: apply the current FilterBar selection to the chart
const oFilterBar = this.byId("filterBar"); // your FilterBar control id
const oChart = this.byId("chartDefault");  // chart macro id

// Read selection variant from the FilterBar (implementation depends on your FilterBar API)
const oSelectionVariantFromFilterBar = oFilterBar && oFilterBar.getSelectionVariant
    ? oFilterBar.getSelectionVariant()
    : null;

if (oSelectionVariantFromFilterBar && oChart && oChart.setSelectionVariant) {
    oChart.setSelectionVariant(oSelectionVariantFromFilterBar);
}
```

**STEP**: 6 — Use Chart public APIs: get/set PresentationVariant and SelectionVariant

**DESCRIPTION**: The Chart building block exposes public APIs to read and apply PresentationVariant and SelectionVariant objects for programmatic control and integration with variant management. Use getPresentationVariant()/setPresentationVariant() and getSelectionVariant()/setSelectionVariant().

- Note: getSelectionVariant()/setSelectionVariant() consider only variants applied directly to the chart and exclude those applied to a bound model.
- Note: The get/set selection variant methods only work if chart personalization is enabled. See enabling-table-personalization-3e2b4d2.md for personalization prerequisites.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
const oChart = this.byId("chartDefault");

// Get current presentation variant
if (oChart && oChart.getPresentationVariant) {
    const oPresentationVariant = oChart.getPresentationVariant();
    // inspect or store oPresentationVariant
}

// Set a presentation variant (object shape per OData presentation variant)
if (oChart && oChart.setPresentationVariant) {
    // oNewPresentationVariant must conform to the presentation variant structure
    oChart.setPresentationVariant(oNewPresentationVariant);
}

// Get current selection variant (only works when personalization is enabled)
if (oChart && oChart.getSelectionVariant) {
    const oSelectionVariant = oChart.getSelectionVariant();
    // use or store selection variant
}

// Apply a selection variant to the chart
if (oChart && oChart.setSelectionVariant) {
    // oNewSelectionVariant must conform to the selection variant structure
    oChart.setSelectionVariant(oNewSelectionVariant);
}
```

**STEP**: 7 — Get and set the currently visible variant ID (pattern)

**DESCRIPTION**: You can programmatically read or set the currently visible variant (variant management). The exact API names should be verified in the Chart API Reference linked below; use the chart control instance to call the appropriate get/set variant ID methods.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
const oChart = this.byId("chartDefault");

// Example pattern (confirm exact method names in the API Reference)
if (oChart) {
    // Read current visible variant ID
    if (oChart.getVisibleVariantId) {
        const sCurrentVariantId = oChart.getVisibleVariantId();
    }

    // Set the visible variant by ID
    if (oChart.setVisibleVariantId) {
        oChart.setVisibleVariantId("myVariantId");
    }
}
```

**STEP**: 8 — Add custom actions and custom header configuration

**DESCRIPTION**: Add custom actions (toolbar buttons, contextual actions) using your app extensions. Use the chart macro’s extension points or the page/header aggregations to add buttons; attach event handlers in the controller to call chart APIs or perform actions based on current selection. Configure chart title and header visibility via macro properties or host page header configuration.

**LANGUAGE**: XML / JavaScript

**CODE**:
```xml
<!-- Example: set a title and hide the standard header (property names may vary; verify in API) -->
<macros:Chart
    id="chartDefault"
    title="Sales Chart"
    headerVisible="true"
    contextPath="/RootEntitySet"
    metaPath="@com.sap.vocabularies.UI.v1.Chart"
    personalization="Sort,Type,Item"
/>
```

```javascript
// Example: custom action handler attached to a custom button
onCustomChartAction: function () {
    const oChart = this.byId("chartDefault");
    const oPV = oChart && oChart.getPresentationVariant && oChart.getPresentationVariant();
    // perform custom behavior based on current presentation/selection
}
```

**STEP**: 9 — Live examples and API reference

**DESCRIPTION**: Check the SAP Fiori development portal and API Reference for live examples, control properties, event parameter shapes, and the exact method names for variant id manipulation.

**LANGUAGE**: Documentation / Links

**CODE**:
```text
Live examples:
- Building Blocks - Chart (explorer): https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/buildingBlocks/chart/chartDefault
- Building Blocks - Chart - Extensions - Chart APIs: https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/buildingBlocks/chart/chartPublicAPIs

API Reference:
- Chart API: https://ui5.sap.com/#/api/sap.fe.macros.Chart

Personalization prerequisite reference:
- Enabling Table Personalization: enabling-table-personalization-3e2b4d2.md
```

**STEP**: 10 — Important notes and behaviors

**DESCRIPTION**: Consolidated technical points to preserve:

- contextPath is optional when metaPath is absolute; if metaPath is relative and no contextPath is provided, the parent binding path is used as contextPath.
- Chart requires backend aggregation support for the referenced entity set.
- getSelectionVariant()/setSelectionVariant() only work if chart personalization is enabled and only consider variants applied directly to the chart (not bound models).
- Use the API Reference to confirm exact method names for getting/setting the visible variant ID and other control-specific methods.

**LANGUAGE**: Documentation

**CODE**:
```text
Notes:
- contextPath behavior: optional with absolute metaPath; fallback to parent binding path if metaPath is relative and contextPath is absent.
- Backend aggregation required: configuring-charts-653ed0f.md#loio653ed0f4f0d743dbb33ace4f68886c4e__enabling_aggregation_subsection
- Selection variant APIs require personalization: enabling-table-personalization-3e2b4d2.md
- API Reference for exact method signatures: https://ui5.sap.com/#/api/sap.fe.macros.Chart
```
--------------------------------

**TITLE**: ConditionalSwitch Building Block — Use in Tables/Forms with a Factory Function

**INTRODUCTION**: Use sap.fe.macros.ConditionalSwitch to render different UI controls per row or context at runtime. Bind a set of watched properties in the XML macro and supply a lightweight factory function in the controller that returns a control (or oldControl) based on those property values and optional row context.

**TAGS**: fiori-elements, ui5, sap.fe.macros, ConditionalSwitch, table, form, factory, XML, JavaScript

**STEP**: 1 — Add ConditionalSwitch to a Table Column (XML)

**DESCRIPTION**: Insert the ConditionalSwitch building block in a table column. Provide ConditionalSwitchProperty elements for each property the factory should watch. Keep metaPath and column configuration as needed for your ListReport/ObjectPage scenario.

**LANGUAGE**: XML

**CODE**:
```xml

<macros:Table metaPath="/Products/@com.sap.vocabularies.UI.v1.LineItem">
    <macros:columns>
        <macros:Column key="My ComplexColumn" width="20rem">
            <macros:ConditionalSwitch factory=".myColumnFactory">
                <fe:ConditionalSwitchProperty key="travelID" value="{TravelID}" />
                <fe:ConditionalSwitchProperty key="price" value="{TotalPrice}" />
            </macros:ConditionalSwitch>
        </macros:Column>
    </macros:columns>
 </macros:Table>

```

**STEP**: 2 — Implement the Factory Function in the Controller (original sample)

**DESCRIPTION**: The factory receives three parameters: properties (the watched property values mapped by key), context (in table scenarios the binding context for the current row), and oldControl (the previously created control instance). Returning oldControl avoids recreating controls. This original example is preserved as-is.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
 // In the controller
 myColumnFactory: function (properties, context, oldControl) {
    if (properties.travelID) {
        if (oProps.price > 1000) {
            return new ObjectStatus({ text: "Expensive!", state:"Warning" });
        } 
		else {
            return new Button({ text: "Increase Price !" });
        }
    }
 }
 
```

**STEP**: 3 — Recommended: Lightweight, robust factory pattern (optimized example)

**DESCRIPTION**: Use a lightweight factory that:
- References properties by the provided keys (properties.price, properties.travelID).
- Uses context.getObject() or context.getProperty(...) to access additional row fields if required.
- Reuses oldControl when appropriate to avoid recreation.
- Minimizes logic and avoids expensive operations because this function runs frequently (scrolling in grids/trees triggers it).

Replace or adapt the names (e.g., TotalPrice, TravelID) to match your property keys.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// In the controller — recommended optimized implementation
myColumnFactory: function (properties, context, oldControl) {
    // Return old control when possible to avoid recreation
    if (oldControl) {
        // Optionally update existing control properties based on new values
        if (properties.price && oldControl.setText) {
            oldControl.setText(properties.price > 1000 ? "Expensive!" : "Increase Price !");
            if (oldControl.setState) {
                oldControl.setState(properties.price > 1000 ? "Warning" : "None");
            }
        }
        return oldControl;
    }

    // Create control based on watched properties
    if (properties && properties.travelID) {
        if (properties.price && properties.price > 1000) {
            return new sap.m.ObjectStatus({ text: "Expensive!", state: "Warning" });
        } else {
            return new sap.m.Button({ text: "Increase Price !" });
        }
    }

    // Fallback: return a lightweight placeholder or null
    return null;
}
```

**STEP**: 4 — Access row data from context (example)

**DESCRIPTION**: In table scenarios, use the context parameter to access additional fields beyond the watched properties. Use context.getObject() or context.getProperty("PropertyName").

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Example using context to read other fields in the row
myColumnFactory: function (properties, context, oldControl) {
    var rowData = context && context.getObject ? context.getObject() : null;
    var category = rowData ? rowData.Category : null;

    if (category === "Special") {
        return new sap.m.Label({ text: "Special Category" });
    }

    // Fallback logic...
    return null;
}
```

**STEP**: 5 — Performance tips and constraints

**DESCRIPTION**: Keep the factory function minimal:
- Avoid synchronous XHR, heavy computations, or DOM queries.
- Prefer updating and returning oldControl instead of creating new controls.
- Cache lightweight objects if necessary.
- Remember that for grid/tree/analytical tables the factory runs frequently during scrolling.

**LANGUAGE**: N/A

**CODE**:
```text
// Guidance summary (no code):
- Use properties.<key> for watched values.
- Use context.getObject()/getProperty() for row-specific data.
- Return oldControl to reuse UI elements.
- Keep logic simple and performant.
```

**STEP**: 6 — API reference

**DESCRIPTION**: Consult the official API for sap.fe.macros.ConditionalSwitch for full property and aggregation details.

**LANGUAGE**: N/A

**CODE**:
```text
https://ui5.sap.com/#/api/sap.fe.macros.ConditionalSwitch
```
--------------------------------

**TITLE**: Field Building Block — Instantiation, Configuration, and Examples

**INTRODUCTION**: Practical, code-focused guide for using the sap.fe.macros Field building block. Shows how to instantiate Fields in XML fragments and programmatically, configure behavior via manifest.json and formatOptions, and common examples (time, currency, radio buttons, JSON-binding). Use these snippets directly in fragments, controllers, or manifest files.

**TAGS**: fiori-elements-framework, Field, sap.fe.macros, manifest.json, formatOptions, XML, JavaScript, JSON, controlConfiguration, valueHelp

STEP: 1 — Basic instantiation in an XML fragment

DESCRIPTION: Use the Field building block in an XML fragment by referencing the building block namespace. This instantiates the control tree corresponding to the metadata property specified by metaPath.

LANGUAGE: XML

CODE:
```xml
<macros:Field xmlns:macro="sap.fe.macros" metaPath="MyProperty"/>
```

STEP: 2 — Create a Field programmatically inside a controller (runtime/dynamic creation)

DESCRIPTION: Instantiate Field at runtime, apply format options, add it to a Dialog, bind the dialog to an entity, and open. Use this pattern for dynamic UI creation or when needing programmatic control.

LANGUAGE: JavaScript

CODE:
```javascript
createField: function () {
    const maxLength = new FormatOptions({ textMaxLength: 10 });
    const field = new Field({ metaPath: "/Entities/singleLine", formatOptions: maxLength });

    const newDialog = new Dialog({
        title: "Dialog",
        content: [
            new Label({
                text: "My field",
                labelFor: field
            }),
            field,
        ],
        beginButton: new Button({
            text: "OK",
            press: function () {
                newDialog.close();
            }
        }),
        endButton: new Button({
            text: "Cancel",
            press: function () {
                newDialog.close();
            }
        })
    });
    newDialog.addStyleClass("sapUiContentPadding");
    newDialog.bindElement("/Entities(1)");
    this.getExtensionAPI().addDependent(newDialog);
    newDialog.open();
}
```

STEP: 3 — Configure Field via manifest.json (controlConfiguration, readOnly, semanticObject, formatOptions)

DESCRIPTION: Configure Field defaults and options per FieldGroup qualifier using controlConfiguration in the route target options. Supported settings: readOnly, semanticObject, and formatOptions parameters (textLinesEdit, textMaxLines, textMaxCharactersDisplay, textExpandBehaviorDisplay, textMaxLength). Restriction: readOnly and semanticObject apply only when the Field is used inside a field group in a standard UI, or inside a Form with an assigned field group for custom sections/pages.

LANGUAGE: JSON

CODE:
```json
"sap.ui5": {
    "routing": {
        "targets": {
            "SalesOrderManageObjectPage": {
                "options": {
                    "settings": {
                        "controlConfiguration": {
                            "@com.sap.vocabularies.UI.v1.FieldGroup#myQualifier": {
                                "fields": {
                                    "DataField::myFormTextField": {
                                        "readOnly": true
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}
```

STEP: 4 — Time data element: Field in custom section fragment (renders time picker in edit mode)

DESCRIPTION: Use Field for a Time-typed data element. Place Field in a fragment; it automatically renders an input with time picker in edit mode.

LANGUAGE: XML

CODE:
```xml
<core:FragmentDefinition
	xmlns="sap.m"
	xmlns:core="sap.ui.core"
	xmlns:macro="sap.fe.macros"
>
	<VBox width="30vw">
		<Text text="Time Data Field: " />
		<macro:Field metaPath="timeData" id="timeDataField" />
	</VBox>
</core:FragmentDefinition>
```

STEP: 5 — Numeric field with Currency: basic fragment (renders value and currency input controls)

DESCRIPTION: Use Field for a numeric value with currency (CDS Currency type). Field auto-generates numeric input and currency selection in edit mode.

LANGUAGE: XML

CODE:
```xml
<core:FragmentDefinition
	xmlns="sap.m"
	xmlns:core="sap.ui.core"
	xmlns:macro="sap.fe.macros"
>
	<VBox width="30vw">
		<Text text="Numeric Field with Currency: " />
		<macro:Field metaPath="numberWithCurrency" id="numberWithCurrencyField" />
	</VBox>
</core:FragmentDefinition>
```

STEP: 6 — Currency field: use formatOptions.measureDisplayMode to change currency input behavior

DESCRIPTION: Use formatOptions with measureDisplayMode to set the currency input to editable, read-only, or hidden. Place formatOptions as a child of Field in the fragment.

LANGUAGE: XML

CODE:
```xml
<core:FragmentDefinition
	xmlns="sap.m"
	xmlns:core="sap.ui.core"
	xmlns:macro="sap.fe.macros"
>
	<VBox width="30vw">
		<Text text="Numeric Field with Currency - no format Option: " />
		<macro:Field metaPath="numberWithCurrency" id="numberWithCurrencyField" />
		<Text text="Numeric Field with Currency - measureDisplayMode=ReadOnly: " />
		<macro:Field metaPath="numberWithCurrency" id="numberWithCurrencyFieldCurrencyReadOnly">
			<formatOptions measureDisplayMode="ReadOnly" />
		</macro:Field>
		<Text text="Numeric Field with Currency - measureDisplayMode=Hidden: " />
		<macro:Field metaPath="numberWithCurrency" id="numberWithCurrencyFieldCurrencyHidden">
			<formatOptions measureDisplayMode="Hidden" />
		</macro:Field>
	</VBox>
</core:FragmentDefinition>
```

STEP: 7 — Currency display modes: displayMode affects Value/Description presentation

DESCRIPTION: Use formatOptions.displayMode to control whether the currency field displays value and description as "ValueDescription" or "DescriptionValue".

LANGUAGE: XML

CODE:
```xml
<core:FragmentDefinition
	xmlns="sap.m"
	xmlns:core="sap.ui.core"
	xmlns:macro="sap.fe.macros"
>
	<VBox width="30vw">
		<Text text="Currency Field - displayMode=ValueDescription: " />
		<macro:Field metaPath="currencyField_code" id="currencyFieldValueDescription">
			<formatOptions displayMode="ValueDescription" />
		</macro:Field>
		<Text text="Currency Field - displayMode=DescriptionValue: " />
		<macro:Field metaPath="currencyField_code" id="currencyFieldDescriptionValue">
			<formatOptions displayMode="DescriptionValue" />
		</macro:Field>
	</VBox>
</core:FragmentDefinition>
```

STEP: 8 — Render Field as radio button group for fixed value lists (useRadioButtons + horizontal layout)

DESCRIPTION: For value lists with fixed values, set formatOptions useRadioButtons="true" to render a radio button group. By default layout is vertical. To render horizontally, set radioButtonsHorizontalLayout="true" (can be applied in the Field formatOptions or configured via manifest setting where supported).

LANGUAGE: XML

CODE:
```xml
<Text text="Field with fixed value list as radio buttons: " />
<macros:Field metaPath="FieldWithFixedValueList " id="FieldWithFixedValueListRadioButtonsHorizontal">
		<formatOptions useRadioButtons="true" 
		radioButtonsHorizontalLayout="true" />
</macros:Field>
```

STEP: 9 — Bind Field to a JSON model value (and optional description)

DESCRIPTION: Use value to bind Field to any model (e.g., JSON model). Use description together with value to bind the description shown by value help. Supported for text, date/time picker, value help, and object status. Not supported for editing rating indicator fields.

LANGUAGE: XML

CODE:
```xml
<macros:Field 
    id="myCustomField" 
    metaPath="/RootEntity/name" 
    value="{myJSONModel>/customModelBindingPath}" 
/>
```

STEP: 10 — Bind Field to JSON model value + description

DESCRIPTION: Bind both value and description properties to a JSON model to show associated description with the selected value.

LANGUAGE: XML

CODE:
```xml
<macros:Field 
    id="myCustomField" 
    metaPath="/RootEntity/name" 
    value="{myJSONModel>/customModelBindingPath}"
    description="{myJSONModel>/customModelDescriptionBindingPath}" 
/>
```

STEP: 11 — API Reference

DESCRIPTION: Use the official API reference for details on properties, events, methods, and allowed formatOptions: sap.fe.macros.Field API documentation.

LANGUAGE: URL/Reference

CODE:
```text
https://ui5.sap.com/#/api/sap.fe.macros.Field
```
--------------------------------

**TITLE**: FilterBar Building Block — Usage and APIs

**INTRODUCTION**: Practical, code-focused reference for embedding and controlling the sap.fe.macros.FilterBar building block in Fiori Elements apps. Includes XML usage snippets, programmatic control (triggerSearch, SelectionVariant APIs), and personalization behavior controls.

**TAGS**: FilterBar, Fiori Elements, SAPUI5, macros, SelectionVariant, personalization, triggerSearch

STEP: 1 — Embed FilterBar in XML view

DESCRIPTION: Add a FilterBar building block to an XML fragment or view. Use metaPath to reference selection fields, wire up event handlers (search, filtersChanged), and set an ID for programmatic access.

LANGUAGE: XML

CODE:
```xml
<macros:FilterBar
    metaPath="@com.sap.vocabularies.UI.v1.SelectionFields#SF1"
    id="FilterBar"
    search=".handlers.onSearch"
    filtersChanged=".handlers.onFiltersChanged"
/>
```

STEP: 2 — Trigger filter search programmatically

DESCRIPTION: Call triggerSearch() on the FilterBar control to validate mandatory fields and run the filter bar "Go" action. Behavior: validates mandatory fields; only triggers search if all mandatory fields have valid values; if not filled, focus is set to the first mandatory field that isn't filled (no highlight or error messages are shown).

LANGUAGE: JavaScript

CODE:
```javascript
// Get the FilterBar control by ID and trigger search
const filterBar = this.byId("FilterBar"); // from controller context
if (filterBar && typeof filterBar.triggerSearch === "function") {
  // triggerSearch() returns a Promise in the control API
  filterBar.triggerSearch().then(() => {
    // search triggered successfully
  }).catch((err) => {
    // triggered validation prevented search (mandatory fields missing)
    // or handle unexpected errors
    console.error(err);
  });
}
```

STEP: 3 — Use SelectionVariant APIs (get/set)

DESCRIPTION: Use getSelectionVariant and setSelectionVariant to read and write filter state in SelectionVariant format. Note: custom filters are NOT included in these APIs.

LANGUAGE: JavaScript

CODE:
```javascript
// Example: read SelectionVariant from FilterBar
const filterBar = this.byId("FilterBar");
if (filterBar && typeof filterBar.getSelectionVariant === "function") {
  // async/await style
  (async () => {
    const selectionVariant = await filterBar.getSelectionVariant();
    // selectionVariant: SelectionVariant object representing standard filter fields
    console.log(selectionVariant);
  })();
}

// Example: set SelectionVariant on FilterBar
if (filterBar && typeof filterBar.setSelectionVariant === "function") {
  const selectionVariant = {
    // Construct SelectionVariant object per OData V4 format expected by the control
    // Example placeholder; construct actual SelectionVariant per your app
    Parameters: [],
    SelectOptions: []
  };
  (async () => {
    await filterBar.setSelectionVariant(selectionVariant);
    // FilterBar updated with provided SelectionVariant (custom filters not included)
  })();
}
```

STEP: 4 — Ignore personalization changes (transient filter state)

DESCRIPTION: Prevent persistence of personalization (filter positions, field values, variants) by setting ignorePersonalizationChanges="true". Use a new unique ID for the control when enabling this experimental feature. When enabled, variants and iAppState-stored application states are NOT applied to the filter bar. Recommended for transient contexts (dialogs, value help).

LANGUAGE: XML

CODE:
```xml
<macros:FilterBar
    metaPath="@com.sap.vocabularies.UI.v1.SelectionFields"
    ignorePersonalizationChanges="true"
    id="FilterBarTransient"
/>
```

STEP: 5 — Important notes, restrictions and references

DESCRIPTION: Consolidated restrictions, usage notes, and links for further reference.

LANGUAGE: text

CODE:
```text
Notes and Restrictions:
- When the FilterBar is used inside a custom section or custom subsection that deals with a navigation entity,
  ensure all controls to be filtered are part of the same UI fragment as the FilterBar building block.
- The FilterBar building block does not provide a visual filter bar toggle (no built-in provision to bring up
  the visual filter bar).
- Custom filters are NOT part of getSelectionVariant / setSelectionVariant APIs.
- ignorePersonalizationChanges is experimental:
  - Do NOT use it on a FilterBar with an existing ID. Create a NEW ID when using this attribute.
  - When personalization changes are not persisted, variants and iAppState application states are NOT applied.

Links:
- FilterBar live examples and defaults:
  https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/buildingBlocks/filterBar/filterBarDefault
  https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/buildingBlocks/filterBar/filterBarDefaultValue
- FilterBar public APIs (SelectionVariant, triggerSearch):
  https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/buildingBlocks/filterBar/filterBarPublicAPIs
- FilterBar API Reference:
  https://ui5.sap.com/#/api/sap.fe.macros.FilterBar
- Add custom filter fields:
  the-filterfield-building-block-2df7837.md
- Personalization / compatibility:
  ../02_Read-Me-First/compatibility-rules-91f0873.md
  ../09_Developing_Controls/how-to-enable-personalization-for-sapui5-controls-5f215c1.md
- Variants and iAppState:
  managing-variants-8ce658e.md
  store-restore-the-application-state-46bf248.md
```
--------------------------------

**TITLE**: FilterField Building Block — Add Custom XML Fragments to a FilterBar

**INTRODUCTION**: Use the FilterField building block to insert custom XML fragments as filter controls inside a macros:FilterBar. This guide shows how to declare FilterField items in XML, how to reference fragment files, and links to examples and API documentation.

**TAGS**: SAP Fiori, UI5, fiori-elements-framework, FilterBar, FilterField, XML fragment, macros

**STEP**: 1 — Add FilterField entries to a FilterBar

**DESCRIPTION**: Declare macros:FilterField elements inside macros:filterFields of a macros:FilterBar. Set key and label (and optional attributes such as required). Use a core:Fragment element to reference an external XML fragment that contains the UI control(s) for the filter field.

**LANGUAGE**: XML

**CODE**:
```xml
<macros:FilterBar
    metaPath="@com.sap.vocabularies.UI.v1.SelectionFields#SF1"
    id="FilterBar"
    showMessages="true"
    search=".handlers.onSearch"
    filterChanged=".handlers.onFiltersChanged"
>
    <macros:filterFields>
        <macros:FilterField key="NameProperty" label="Name">
            <core:Fragment fragmentName="<ApplicationId.FolderName.NameFilterXMLFileName>" type="XML" />
        </macros:FilterField>
        <macros:FilterField key="StreetProperty" label="Street" required="true">
            <core:Fragment fragmentName="<ApplicationId.FolderName.StreetFilterXMLFileName>" type="XML" />
        </macros:FilterField>
    </macros:filterFields>
</macros:FilterBar>
```

**STEP**: 2 — Create the XML fragment file referenced by core:Fragment

**DESCRIPTION**: Implement the UI for each custom filter as an XML fragment file. The fragment file should be stored in your project under the folder path that matches the module path used in fragmentName. Use sap.ui.core.FragmentDefinition as the root, or any valid UI5 XML fragment root element for the control(s) you need.

- fragmentName mapping: use the module path / namespace with dots, e.g. ApplicationId.FolderName.NameFilterXMLFileName (omit the .xml extension when referenced in fragmentName).
- File to create: NameFilterXMLFileName.xml (placed in the folder structure matching the module path).

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Example: webapp/<folder-path>/NameFilterXMLFileName.xml -->
<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core">
    <!-- Replace with the control(s) you need for the filter -->
    <Input id="NameInput" placeholder="Enter name"/>
</core:FragmentDefinition>
```

**STEP**: 3 — Map fragmentName to file path and naming rules

**DESCRIPTION**: Ensure the fragmentName value corresponds to the fragment file location and module name:
- Use the application namespace and folder path separated by dots, matching the resource location in your project.
- Do not include the .xml extension in the fragmentName attribute.
- Example: core:Fragment fragmentName="com.mycompany.app.fragments.NameFilterXMLFileName" type="XML" corresponds to file path webapp/fragments/NameFilterXMLFileName.xml (depending on your project structure and namespace mapping).

**LANGUAGE**: Text

**CODE**:
```
fragmentName format example:
<ApplicationNamespace>.<FolderName>.<FragmentFileNameWithoutExtension>

Example:
core:Fragment fragmentName="com.mycompany.app.fragments.NameFilterXMLFileName" type="XML"
maps to file: webapp/fragments/NameFilterXMLFileName.xml
```

**STEP**: 4 — Explore live examples and API reference

**DESCRIPTION**: Use the official live examples and API documentation for reference and implementation details.

**LANGUAGE**: Text

**CODE**:
```
Live examples (Building Blocks - Filter Bar - Extensions - Custom Filter):
https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/buildingBlocks/filterBar/filterBarCustom

FilterField API Reference:
https://ui5.sap.com/#/api/sap.fe.macros.filterBar.FilterField

Guidance on creating custom filter XML templates:
Adding Custom Fields to the Filter Bar (see project documentation)
```
--------------------------------

**TITLE**: FlexibleColumnLayoutActions Building Block

**INTRODUCTION**: Use the FlexibleColumnLayoutActions building block to insert the standard top-right controls for Flexible Column Layout (FCL) apps: Close, Enter Full Screen, and Exit Full Screen. Add the building block into an XML fragment that supports building-block usage to produce the correct control tree automatically.

**TAGS**: fiori-elements-framework, building-block, FlexibleColumnLayout, FCL, sap.fe.macros, UI5, fragment, XML

**STEP**: 1 — Basic instantiation

**DESCRIPTION**: Reference the building block namespace and insert the FlexibleColumnLayoutActions macro inside a fragment configured for building-block usage. This simple invocation instantiates the actual control tree for the Close, Enter Full Screen, and Exit Full Screen buttons.

**LANGUAGE**: XML

**CODE**:
```xml
<macros:FlexibleColumnLayoutActions/>
```

**STEP**: 2 — Minimal fragment example with namespace mapping

**DESCRIPTION**: Ensure your fragment declares the macros namespace (sap.fe.macros). The following minimal fragment shows how to include the building block in an XML fragment. Place this fragment where your FCL header/action area is rendered.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Sample fragment: FragmentName.fragment.xml -->
<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:macros="sap.fe.macros">

    <!-- Insert the FlexibleColumnLayoutActions building block -->
    <macros:FlexibleColumnLayoutActions/>
</core:FragmentDefinition>
```

**STEP**: 3 — What the building block provides

**DESCRIPTION**: The macro creates the standard set of action controls for FCL applications. Use this building block when you want consistent behavior and look/feel without implementing the controls manually.

**LANGUAGE**: text

**CODE**:
```
Provides three standard actions rendered in the top-right corner of FCL apps:
- Close
- Enter Full Screen
- Exit Full Screen
```

**STEP**: 4 — API reference

**DESCRIPTION**: Consult the official API documentation for detailed properties, events, and usage notes.

**LANGUAGE**: URL

**CODE**:
```
https://ui5.sap.com/#/api/sap.fe.macros.FlexibleColumnLayoutActions
```
--------------------------------

**TITLE**: Form Building Block (sap.fe.macros.Form)

**INTRODUCTION**: Use the Form building block to instantiate a UI5 form from annotation metadata. Point the Form to a FieldGroup annotation or to a CollectionFacet that contains multiple FieldGroups. You can also add inline form elements (macros:FormElement) inside the Form to extend or override annotation-driven fields.

**TAGS**: sapui5, fiori-elements, form, FieldGroup, CollectionFacet, macros, UI5, annotations

**STEP**: 1 — Instantiate a Form from a FieldGroup annotation

**DESCRIPTION**: Create a Form macro and point the metaPath attribute to a FieldGroup annotation. Provide an id and an optional title. The metaPath value must reference the UI.v1.FieldGroup annotation (example format shown). This XML is used inside an XML view or fragment.

**LANGUAGE**: XML

**CODE**:
```xml
<macros:Form
     id="myForm"
     metaPath="@com.sap.vocabularies.UI.v1.FieldGroup#General"
     title="My Title"
></macros:Form>
```

**STEP**: 2 — Add inline FormElement(s) to a Form

**DESCRIPTION**: Place macros:FormElement elements as children of the macros:Form to add inline elements that are not driven by the referenced annotation. Use metaPath to reference the property, set id and label, and control placement and anchor to position the element relative to an annotation-driven element.

- metaPath: property name (annotation path for the element)
- placement: e.g., "After" or "Before"
- anchor: the element ID or annotation-based anchor to position relative to

**LANGUAGE**: XML

**CODE**:
```xml
<macros:Form
     id="myForm"
     metaPath="@com.sap.vocabularies.UI.v1.FieldGroup#General"
     title="My Title"
>
     <macros:FormElement
          metaPath="ID"
          id="formElementMacroID"
          label="ID Property After Number"
          placement="After"
          anchor="DataField::NumberProperty"
     />
</macros:Form>
```

**STEP**: 3 — Notes on metaPath targets (FieldGroup vs CollectionFacet)

**DESCRIPTION**: The metaPath can target:
- a single FieldGroup annotation (format shown in Step 1)
- a CollectionFacet that contains multiple FieldGroups (use the CollectionFacet annotation path in metaPath)

When using a CollectionFacet, the Form will render the FieldGroups contained in that facet. Adjust id/title and add inline FormElement children as needed.

**LANGUAGE**: Text

**CODE**:
```text
// Example metaPath formats (use in metaPath attribute):
// FieldGroup:
// @com.sap.vocabularies.UI.v1.FieldGroup#<FieldGroupID>
//
// CollectionFacet:
// @com.sap.vocabularies.UI.v1.CollectionFacet#<CollectionFacetID>
```

**STEP**: 4 — API Reference

**DESCRIPTION**: For the complete Form API and available properties/events, consult the official UI5 API reference.

**LANGUAGE**: Text

**CODE**:
```text
API Reference: https://ui5.sap.com/#/api/sap.fe.macros.Form
```
--------------------------------

**TITLE**: FormElement building block — usage and examples

**INTRODUCTION**: The FormElement building block (sap.fe.macros.FormElement) adds a label and visibility control for a field inside a Form. It can take its label from annotations or via explicit settings. Use it inside a Form's formElements aggregation; a Field is auto-created from the same metaPath, or you can configure a Field explicitly via the fields aggregation.

**TAGS**: fiori-elements-framework, sapui5, ui5, fragments, form, building-blocks, FormElement, macros, metaPath

**STEP**: Prerequisites and placement

**DESCRIPTION**: Place FormElement only inside the formElements aggregation of a FormContainer which is itself inside a Form. Also ensure the building block namespace (sap.fe.macros) is referenced within the fragment where you use building blocks.

**LANGUAGE**: XML

**CODE**:
```xml
<f:Form>
  <f:formContainers>
    <f:FormContainer>
      <f:formElements>
        <!-- Place FormElement here -->
      </f:formElements>
    </f:FormContainer>
  </f:formContainers>
</f:Form>
```

**STEP**: Basic instantiation (auto-created Field)

**DESCRIPTION**: Instantiate FormElement by referencing the building block namespace within a fragment enabled for building block usage. If you provide a metaPath on the FormElement, a Field building block is automatically created using the same metaPath.

**LANGUAGE**: XML

**CODE**:
```xml
<f:Form>
  <f:layout>
    <f:ColumnLayout columnsM="2" columnsL="3" columnsXL="4" labelCellsLarge="12" />
  </f:layout>
  <f:formContainers>
    <f:FormContainer>
      <f:formElements>
        <macros:FormElement xmlns:macro="sap.fe.macros" metaPath="MyProperty" id="myID" />
      </f:formElements>
    </f:FormContainer>
  </f:formContainers>
</f:Form>
```

**STEP**: Explicit Field configuration via fields aggregation

**DESCRIPTION**: To customize the Field that belongs to the FormElement (for example to set custom controls or attributes), define a macros:fields aggregation inside the FormElement and add a macros:Field with the desired metaPath and settings.

**LANGUAGE**: XML

**CODE**:
```xml
<f:Form xmlns:f="sap.ui.layout.form" >
  <f:layout>
    <f:ColumnLayout columnsM="2" columnsL="3" columnsXL="4" labelCellsLarge="12" />
  </f:layout>
  <f:formContainers>
    <f:FormContainer>
      <f:formElements>
        <macros:FormElement xmlns:macro="sap.fe.macros" metaPath="MyProperty" id="myID">
          <macros:fields>
            <macros:Field metaPath="MyProperty"/>
          </macros:fields>
        </macros:FormElement>
      </f:formElements>
    </f:FormContainer>
  </f:formContainers>
</f:Form>
```

**STEP**: Allowed usage contexts

**DESCRIPTION**: Use FormElement inside:
- custom header facets
- custom sections
- custom pages
- custom table columns

(Ensure the surrounding Form -> FormContainer -> formElements structure is respected.)

**LANGUAGE**: text

**CODE**:
```
Allowed contexts: custom header facets, custom sections, custom pages, custom table columns
```

**STEP**: API reference

**DESCRIPTION**: Full API details, properties, aggregations, and events for sap.fe.macros.FormElement.

**LANGUAGE**: text

**CODE**:
```
https://ui5.sap.com/#/api/sap.fe.macros.FormElement
```
--------------------------------

**TITLE**: KPITag Building Block (sap.fe.macros.KPITag)

**INTRODUCTION**: Use the KPITag building block to display a compact KPI (key performance indicator) with a numeric value, unit, and visual status in Fiori elements/App UI5 XML views. This document shows how to add the control, bind OData/model fields, and find the API reference and live examples.

**TAGS**: fiori-elements-framework, KPITag, sap.fe.macros, UI5, SAP Fiori, macros

**STEP**: 1 — Add KPITag to an XML view

**DESCRIPTION**: Add the KPITag control into your XML view. Ensure the macros namespace is declared (xmlns:macros="sap.fe.macros"). The snippet below contains the exact example usage from the documentation.

**LANGUAGE**: XML

**CODE**:
```xml
<macros:KPITag
  id="mySuccessKPI"
  number="{TotalPrice}"
  unit="{CurrencyCode_code}"
  status="Success"
/>
```

**STEP**: 2 — Minimal complete XML view example with namespace

**DESCRIPTION**: Place KPITag inside a view with the proper namespace declarations. This example shows a minimal, usable XML view wrapper that ensures the macros prefix is available.

**LANGUAGE**: XML

**CODE**:
```xml
<mvc:View
  xmlns:mvc="sap.ui.core.mvc"
  xmlns:macros="sap.fe.macros"
  controllerName="your.controller.Name">
  <macros:KPITag
    id="mySuccessKPI"
    number="{TotalPrice}"
    unit="{CurrencyCode_code}"
    status="Success" />
</mvc:View>
```

**STEP**: 3 — Data binding guidance

**DESCRIPTION**: Bind number and unit to OData or JSON model fields. Use any valid binding path for number and unit. Status can be a literal string (e.g., "Success") or bound to a model property. Example: bind status to a field named KPIStatus.

**LANGUAGE**: XML

**CODE**:
```xml
<macros:KPITag
  id="kpiBound"
  number="{/TotalPrice}"               <!-- absolute JSON path example -->
  unit="{CurrencyCode_code}"           <!-- relative binding from current context -->
  status="{KPIStatus}" />              <!-- bind status to model property -->
```

**STEP**: 4 — API Reference and live examples

**DESCRIPTION**: Use the links below to review the full API, available properties, events, and live building-block examples in the SAP Fiori development portal.

**LANGUAGE**: text

**CODE**:
```
Live examples (Building Blocks - KPI Tag - Overview):
https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/buildingBlocks/kpiTag/kpiTagDefault

API Reference (sap.fe.macros.KPITag):
https://ui5.sap.com/#/api/sap.fe.macros.KPITag
```
--------------------------------

**TITLE**: MessageButton Building Block — Embed and Extend in Fiori Elements

**INTRODUCTION**: The MessageButton building block collects and displays bound messages (non-technical) using the sap.fe.macros.MessageButton control. Use it to show aggregated message counts and criticality, and extend its behavior via controller hooks to control rendering, grouping, link behavior, and visibility of the parent container (for example the footer toolbar). This document provides concise, code-focused guidance and skeletons for embedding the control and implementing controller extension hooks and message lifecycle management.

**TAGS**: fiori-elements-framework, MessageButton, sap.fe.macros, message model, message handling, UI5, controller extension, visibilityChange, beforeShowMessageButton

STEP: 1 — Embed MessageButton in XML view

DESCRIPTION: Add the MessageButton macro to your XML view. Optionally bind the visibilityChange property to a controller method to be invoked before the control is displayed (allowing control of the parent container visibility such as a footer toolbar).

LANGUAGE: XML

CODE:
```xml
<macros:MessageButton visibilityChange=".handleMessageButtonVisibility" />
```

STEP: 2 — Implement visibilityChange handler (controller)

DESCRIPTION: Implement the handler referenced by visibilityChange to update the parent container (for example, show/hide footer toolbar) before the MessageButton is rendered. The framework invokes this handler before the control is displayed. Implementations should accept a boolean indicating the upcoming visibility state and apply it to the containing UI element.

LANGUAGE: JavaScript

CODE:
```javascript
// Controller extension snippet (UI5 controller)
handleMessageButtonVisibility: function (bVisible) {
  // bVisible: boolean indicating whether the MessageButton container will be visible
  // Example: show or hide footer toolbar that contains the MessageButton
  var oFooter = this.byId("footerToolbar");
  if (oFooter) {
    oFooter.setVisible(bVisible);
  }
  // Additional actions: adjust layout, reserve space, toggle other UI controls, etc.
}
```

STEP: 3 — Implement beforeShowMessageButton hook (controller extension)

DESCRIPTION: The framework calls the controller extension hook before showing the MessageButton when bound, non-technical messages exist. Implement this hook to:
- Decide whether the MessageButton should render messages (or render them elsewhere).
- Filter or group messages (default group is "General").
- Customize link behavior (override default focus-to-field action).
- Detect page edit mode and change behavior (for example display a dialog outside edit mode).

Do not rely on internal shape assumptions — inspect the framework hook parameters in your project if needed. Use the hook to mutate the provided messages/context or to trigger custom UI artifact rendering.

LANGUAGE: JavaScript

CODE:
```javascript
// Controller extension skeleton for beforeShowMessageButton
beforeShowMessageButton: function (oContext) {
  // oContext: framework-provided object describing messages and options.
  // Typical actions you can perform (implement based on your project hook signature):
  //
  // 1) Filter messages that you want to handle differently:
  //    const messages = (oContext && oContext.messages) || [];
  //    const nonTechnical = messages.filter(m => !m.technical);
  //
  // 2) Prevent default rendering by the MessageButton and render elsewhere:
  //    // e.g. set a flag on context or call framework method if provided:
  //    // oContext.renderByMessageButton = false;
  //    // this.showCustomMessageStrip(nonTechnical);
  //
  // 3) Group messages for custom UI:
  //    // create groups, e.g. by target section or severity
  //
  // 4) Override link click behavior:
  //    // intercept message.link click and implement navigation/focus logic
  //
  // 5) Check page edit mode and handle messages differently:
  //    if (!this.isPageInEditMode || !this.isPageInEditMode()) {
  //      // show dialog instead of message popover, and prevent popover usage
  //      // this.showMessageDialog(nonTechnical);
  //      // ensure messages do not appear in popover while not in edit mode
  //    }
  //
  // NOTE: The exact shape of oContext and the mechanism to stop default rendering is
  // provided by the framework in your version — inspect the hook signature in your
  // project or the framework docs. Use the hook to mutate messages or set flags
  // that the framework reads.
}
```

STEP: 4 — Manage message lifecycle (clear or update messages)

DESCRIPTION: Manage message lifetime in the global message model. Clear messages that are no longer relevant (for example after Save or navigation), and ensure state messages are only added at appropriate times. Use UI5 MessageManager APIs to remove or filter messages.

LANGUAGE: JavaScript

CODE:
```javascript
// Example: remove all messages (UI5 MessageManager)
var oMessageManager = sap.ui.getCore().getMessageManager();
oMessageManager.removeAllMessages();

// Example: selectively remove non-persistent messages (pseudo-pattern)
// Inspect your message objects and remove only those you want to clear.
var aMessages = oMessageManager.getMessageModel().getData() || [];
var aToRemove = aMessages.filter(function (m) {
  // decide removal criteria, e.g. !m.persistent or !m.technical
  return !m.persistent;
});
if (aToRemove.length) {
  oMessageManager.removeMessages(aToRemove);
}
```

STEP: 5 — Notes for correct behavior and API reference

DESCRIPTION: Implementation notes and references:
- Bound, non-technical messages are filtered by the macro; use the beforeShowMessageButton hook to further filter or control rendering.
- In edit mode, bound messages must appear only in the message popover. If the page is not in edit mode, use the hook to display messages in a dialog or other UI to prevent popover appearance.
- If a visibilityChange handler is bound, it is invoked before the control is displayed so you can toggle the parent container visibility (e.g., footer toolbar).
- Always ensure message lifecycle is managed (clear stale messages after actions like Save).
- API Reference: https://ui5.sap.com/#/api/sap.fe.macros.MessageButton

LANGUAGE: N/A

CODE:
```text
API Reference: https://ui5.sap.com/#/api/sap.fe.macros.MessageButton
```
--------------------------------

**TITLE**: MicroChart Building Block (fiori-elements)

**INTRODUCTION**: Use the macros:MicroChart building block as a standalone micro chart in XML views. Provide a metadata path (metaPath) and optionally a binding context (contextPath). Control appearance with size and hide labels with showOnlyChart. Use when you need compact visual summaries driven by OData metadata annotations.

**TAGS**: fiori-elements-framework, microchart, ui5, sap-fe, macros, xml

**STEP**: 1 — Basic usage (original sample)
**DESCRIPTION**: Place the MicroChart macro in any XML container. Provide id, metaPath (annotation selector), optional contextPath, and optional batchGroupId.
**LANGUAGE**: XML
**CODE**:
```xml
<macros:MicroChart
    id="bar"
    metaPath="@com.sap.vocabularies.UI.v1.Chart#BarStackedPath"
    contextPath="/RootEntity/_Item"
    batchGroupId="$auto.abc"
/>
```

**STEP**: 2 — contextPath behavior (absolute vs relative metaPath)
**DESCRIPTION**: If metaPath is an absolute annotation path, you may omit contextPath. If metaPath is relative and no contextPath is provided, the parent binding path is used as contextPath. Use an absolute metaPath when you want the macro to resolve without a separate contextPath.
**LANGUAGE**: XML
**CODE**:
```xml
<!-- Example: absolute metaPath (no contextPath required) -->
<macros:MicroChart
    id="barAbs"
    metaPath="/RootEntity/@com.sap.vocabularies.UI.v1.Chart#BarStackedPath"
/>
```

**STEP**: 3 — Control size and hide labels
**DESCRIPTION**: Configure visual size via the size attribute (e.g., "S", "M", "L") and hide labels by setting showOnlyChart="true". Provide contextPath when metaPath is relative to ensure correct binding.
**LANGUAGE**: XML
**CODE**:
```xml
<macros:MicroChart
    id="barSmall"
    metaPath="@com.sap.vocabularies.UI.v1.Chart#BarStackedPath"
    contextPath="/RootEntity/_Item"
    size="S"
    showOnlyChart="true"
/>
```

**STEP**: 4 — References and API
**DESCRIPTION**: Use the SAP Fiori development portal for live examples and the UI5 API reference for full property/method details.
**LANGUAGE**: text
**CODE**:
```
Examples / Overview:
https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/buildingBlocks/microchart/microChartDefault

API Reference:
https://ui5.sap.com/#/api/sap.fe.macros.MicroChart
```
--------------------------------

**TITLE**: Page Building Block (sap.fe.macros.Page)

**INTRODUCTION**: Use the Page building block to create a custom page with a predefined layout and correct margins/padding in SAP Fiori elements apps. This document shows how to declare a Page in an XML view, configure its main attributes, and add child Panels containing Text controls. It also links to live examples and the API reference.

**TAGS**: fiori-elements-framework, UI5, sap.fe.macros, Page, building-block, XML, UI5-macros

**STEP**: 1 — Add a Page to an XML view

**DESCRIPTION**: Declare the Page building block in your XML view. Set common properties (title, description, avatarSrc) on the Page and add child Panel controls. The following sample shows two Panels each containing a Text element. Use this snippet inside an XML view file (for example: view.xml).

**LANGUAGE**: XML

**CODE**:
```xml
<macros:Page title="Page title" description="Page description" avatarSrc="sap-icon://page">
    <Panel headerText="First content" id="firstContent">
        <Text text="This is the first content of the page" />
    </Panel>
    <Panel headerText="Second content" id="secondContent">
        <Text text="This is the second content, it is properly padded" />
    </Panel>
</macros:Page>
```

**STEP**: 2 — Configure Page properties

**DESCRIPTION**: Use these primary attributes to control page metadata and appearance:
- title: main page title (string)
- description: subtitle or short description (string)
- avatarSrc: icon URI, e.g., "sap-icon://page" (string)

Set these attributes directly on the <macros:Page> element as shown in the sample. Additional layout, margins and padding are applied by the building block automatically.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Example of setting title, description and avatar -->
<macros:Page title="My App Page" description="Overview" avatarSrc="sap-icon://account">
    <!-- child content -->
</macros:Page>
```

**STEP**: 3 — Add Panels and child controls

**DESCRIPTION**: Place Panel controls inside the Page to create content sections. Panels commonly use:
- headerText: visible header title for the panel (string)
- id: control id for referencing in code (string)

Use standard UI5 controls (Text, List, Table, Form, etc.) as children of Panel.

**LANGUAGE**: XML

**CODE**:
```xml
<Panel headerText="Details" id="detailsPanel">
    <Text text="Detailed information goes here" />
</Panel>
```

**STEP**: 4 — Links: live examples and API reference

**DESCRIPTION**: Use the live examples and API docs for more properties, methods and detailed examples.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "LiveExamples": "https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/buildingBlocks/page/pageDefault",
  "APIReference": "https://ui5.sap.com/#/api/sap.fe.macros.Page"
}
```
--------------------------------

**TITLE**: Paginator Building Block (sap.fe.macros.Paginator) — Fiori Elements Framework

**INTRODUCTION**: Use the Paginator building block to add paginator buttons for end users to traverse large lists in SAP Fiori elements applications. Place the macro in your XML view and initialize it in the controller so it is connected to the list binding and initial context.

**TAGS**: fiori-elements-framework, paginator, sap.fe.macros, building-blocks, UI5, XML, controller, pagination

**STEP**: 1 — Add the Paginator macro to your XML view

**DESCRIPTION**: Insert the Paginator building block macro into the XML view. Keep the control id to reference it from the controller for initialization.

**LANGUAGE**: XML

**CODE**:
```xml
<macros:Paginator id="paginator" />
```

**STEP**: 2 — Prepare the list control and binding to paginate

**DESCRIPTION**: Identify the list/table control in your view whose binding you want to paginate. Get its binding in the controller (items, rows, or the aggregation used by your list control). This binding is what the Paginator must be initialized with.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Example: get the list/table control and its binding in the controller
var oList = this.byId("myList"); // replace "myList" with your list control id
var oListBinding = oList.getBinding("items"); // or "rows" / aggregation used by your control
```

**STEP**: 3 — Initialize the Paginator in the controller (connect binding and context)

**DESCRIPTION**: In your controller, get the Paginator control by id and initialize it with the list binding and any initial context required (for example the starting page or skip/top parameters). Consult the Paginator API for exact initialization methods and parameters—use the control reference obtained above to pass the binding/context into the Paginator.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Example initialization skeleton in the controller
var oPaginator = this.byId("paginator");

// oListBinding: the binding obtained from your list/table (see previous step)
// oInitialContext: any initial context/options you need (page index, page size, etc.)

// Use the Paginator API to initialize/attach the list binding and context.
// Replace the following line with the actual API call(s) from the Paginator reference.
oPaginator.initialize?.(oListBinding, oInitialContext); // placeholder — see API Reference
```

**STEP**: 4 — Reference documentation and live examples

**DESCRIPTION**: Use the official resources to implement the correct initialization API calls and view live examples.

**LANGUAGE**: JSON (links)

**CODE**:
```json
{
  "examples": "https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/buildingBlocks/features/paginatorDefault",
  "apiReference": "https://ui5.sap.com/#/api/sap.fe.macros.Paginator"
}
```
--------------------------------

**TITLE**: RichTextEditor Building Block (SAP Fiori Elements)

**INTRODUCTION**: Use the RichTextEditor building block to display formatted text in display mode and enable inline editing in edit mode. The display mode renders content using sap.m.FormattedText (some formatting like images may not be supported). Configure the editor by declaring button groups and plugins the same way as in SAPUI5.

**TAGS**: fiori-elements-framework, SAPUI5, RichTextEditor, macros, XML, FormattedText, rich-text, building-blocks

**STEP**: 1 — Purpose & display-mode limitation

**DESCRIPTION**: Understand when to use the RichTextEditor and the display-mode considerations. Display mode uses sap.m.FormattedText which does not support all formatting (for example, images). Validate formatting support against the FormattedText API when designing UI that shows formatted content.

**LANGUAGE**: Text

**CODE**:
```Text
Note: The RichTextEditor building block uses sap.m.FormattedText in display mode.
Some formatting (for example, images) is not supported in display mode.
See: https://ui5.sap.com/#/api/sap.m.FormattedText%23controlProperties
```

**STEP**: 2 — Example: Add RichTextEditor to a view/fragment

**DESCRIPTION**: Copy this XML fragment into your SAPUI5 view or XML fragment. Configure value binding, id, required state, buttonGroups, and plugins. Button groups define toolbar sections; plugins enable editor features.

**LANGUAGE**: XML

**CODE**:
```XML
<macros:RichTextEditor value="{custom>/myFormattedValue}" id="myRichTextEditor" required="true">
	<macros:buttonGroups>
		<richtexteditor:ButtonGroup
			name="font-style"
			visible="true"
			priority="10"
			customToolbarPriority="10"
			buttons="bold,italic"
		/>
		<richtexteditor:ButtonGroup
			name="styleselect"
			visible="true"
			priority="10"
			customToolbarPriority="10"
			buttons="styleselect"
		/>
		<richtexteditor:ButtonGroup name="table" visible="true" priority="10" customToolbarPriority="10" buttons="table" />
	</macros:buttonGroups>
	<macros:plugins>
		<richtexteditor:Plugin name="autoresize" />
	</macros:plugins>
</macros:RichTextEditor>
```

**STEP**: 3 — ButtonGroup and Plugin configuration pattern

**DESCRIPTION**: Use these attributes when declaring button groups and plugins. - ButtonGroup attributes: name, visible (true/false), priority (number), customToolbarPriority (number), buttons (comma-separated list). - Plugin declaration: one element per plugin with name attribute.

**LANGUAGE**: XML

**CODE**:
```XML
<!-- Button group pattern -->
<richtexteditor:ButtonGroup
  name="group-name"
  visible="true"
  priority="10"
  customToolbarPriority="10"
  buttons="bold,italic,underline" />

<!-- Plugin pattern -->
<richtexteditor:Plugin name="pluginName" />
```

**STEP**: 4 — References & live examples

**DESCRIPTION**: Use the API Reference and Fiori development portal for full property/event/method details and live building-block examples.

**LANGUAGE**: Text

**CODE**:
```Text
RichTextEditor API (macros): https://ui5.sap.com/#/api/sap.fe.macros.RichTextEditor
sap.m.FormattedText API: https://ui5.sap.com/#/api/sap.m.FormattedText%23controlProperties
Live examples: https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/buildingBlocks/rte/rteDefault
```
--------------------------------

**TITLE**: The `Share` Building Block

**INTRODUCTION**: Use the SAP Fiori `Share` building block in freestyle SAPUI5 applications to provide end users with sharing actions (Send Email, Share to Microsoft Teams, Save as Tile, Share in SAP Jam). Configure visibility of the individual share actions via the shareOptions element. Defaults: showSendEmail = false, showCollaborationManager = false.

**TAGS**: fiori-elements-framework, SAPUI5, Share, building-block, macros, shareOptions, controller-extensions

**STEP**: 1 — Add the Share building block to a view

**DESCRIPTION**: Insert the Share building block into your XML view using the macros:Share control. Configure shareOptions to control which share actions are visible to end users. Example below demonstrates how to set showSendEmail and showCollaborationManager attributes (note: defaults are false).

**LANGUAGE**: XML

**CODE**:
```xml
<macros:Share id="shareWithStaticProperties">
      <macros:shareOptions showSendEmail="false" showCollaborationManager="true" />"
</macros:Share>
```

**STEP**: 2 — Behavior and defaults

**DESCRIPTION**: The shareOptions properties control visibility:
- showSendEmail: false by default. Set to true to display "Send Email".
- showCollaborationManager: false by default. Set to true to display "Share: Collaboration Manager" (e.g., SAP Jam integration).
Adjust attribute values directly in the XML (or via data binding/programmatic configuration in controllers) to enable or disable these UI options.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "shareOptions": {
    "showSendEmail": false,
    "showCollaborationManager": true
  }
}
```

**STEP**: 3 — Reference documentation and live examples

**DESCRIPTION**: Use the official SAP Fiori development portal for live examples and API references:
- Building Blocks - Share - Overview: https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/buildingBlocks/share
- Building Blocks - Share - Share Extensions: https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/controllerExtensions/shareExtensibility
- Share API Reference (macros.Share): https://ui5.sap.com/#/api/sap.fe.macros.Share
- Share Controller Extensions API Reference: https://ui5.sap.com/#/api/sap.fe.core.controllerextensions.Share

**LANGUAGE**: Text

**CODE**:
```text
See the links above for live examples and the full API:
- Overview: https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/buildingBlocks/share
- Share Extensions: https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/controllerExtensions/shareExtensibility
- API (macros.Share): https://ui5.sap.com/#/api/sap.fe.macros.Share
- API (controller extensions): https://ui5.sap.com/#/api/sap.fe.core.controllerextensions.Share
```
--------------------------------

**TITLE**: Share Functionality — Configuration and Extension for SAP Fiori Elements

**INTRODUCTION**: Practical, code-focused guidance for configuring and extending the Share menu in SAP Fiori elements apps (OData V2 and V4). Covers enabling share options (Print, Export to Spreadsheet/CSV/PDF), configuring press handlers at application and page level, modifying Send Email subject via controller extension, hiding share menu options, and enabling semantic bookmarking (annotations). Use these steps to update manifest.json and controller extension files so the Share menu behaves as required.

**TAGS**: fiori-elements-framework, share, manifest.json, controllerextensions, semantic-bookmarking, sap.fe, OData V4, OData V2, tiles, export, print

STEP: Share options overview and behavior differences (OData V2 vs OData V4)
DESCRIPTION: Summary of option availability and key behavior differences you must account for when implementing Share functionality:
- Share is available for List Report, Object Page, and Subobject Page. In flexible column layout, it appears at the highest view level.
- Not visible for newly created objects in draft mode.
- OData V2: For draft objects with an existing active instance, Share directly shares the URL of the active instance.
- OData V4: For draft objects with an existing active instance, Share uses semantic bookmarking (if semantic keys exist); otherwise it shares the active instance URL.
- OData V2 additional note: Share is hidden for creation pages of non-draft objects. You can change tile type from dynamic to static via extension (see corresponding extension docs).
LANGUAGE: text
CODE:
```text
No code required. Refer to steps below for manifest and controller extension samples.
```

STEP: Enable Print (application-level) — OData V4 sample (define press handler)
DESCRIPTION: To display the Print option globally, define a press handler at the application level inside sap.fe.app.share.print.press. Provide a reference to your custom handler function (namespace + function) in manifest.json.
LANGUAGE: JSON
CODE:
```json
"sap.fe": {
    "app": {
        "share": {
            "print": {
                "press": SalesOrder.ext.CustomHandler.print
            }
        },
        ...
    }
}
```

STEP: Enable Export to Spreadsheet (page-level) — show option only on specific page
DESCRIPTION: To display Export to Spreadsheet only on the List Report page, define the share.exportToSpreadsheet.press setting in the page target options.settings.share section of the routing target in manifest.json. Use a function reference or controller method string for the press handler.
LANGUAGE: JSON
CODE:
```json
"sap.ui5": {
    "routing": {
        "targets": {
            "SalesOrderManageList": {
                "type": "Component",
                "id": "SalesOrderManageList",
                "name": "sap.fe.templates.ListReport",
                "options": {
                    "settings": {
                        "share": {
                            "exportToSpreadsheet": {
                                "press": "SalesOrder.ext.CustomHandler.export"
                            }
                            …
                        }
                    }
                },
                …
            },
    }
}
```

STEP: Configure Send Email subject via controller extension (manifest + controller)
DESCRIPTION: To change email subject or otherwise adapt email metadata, register a controller extension in manifest.json and implement the share.adaptShareMetadata controller extension method in your controller extension JS file. The override.share.adaptShareMetadata method receives oShareMetadata — modify oShareMetadata.email.title and return the object.
LANGUAGE: JSON
CODE:
```json
"sap.ui5": {
    "extends": { 
        "extensions": {
            "sap.ui.controllerExtensions": {
                "sap.fe.templates.ObjectPage.ObjectPageController": {
                    "controllerName": "SalesOrder.ext.OPExtend"
                }
            }
        }
    },
}
```

LANGUAGE: JavaScript
CODE:
```javascript
sap.ui.define(["sap/ui/core/mvc/ControllerExtension"], 
    function(ControllerExtension) {
        "use strict";
        return ControllerExtension.extend("SalesOrder.ext.OPExtend", {
            // this section allows to extend lifecycle hooks or override public methods of the base controller
            override: {
                onInit: function() {},
                share: {
                    adaptShareMetadata: function(oShareMetadata) {
                        oShareMetadata.email.title = "test email subject"; // customize or change email subject
                        return oShareMetadata;
                    }
                }
            }
        });
    }
);
```

STEP: Display additional export/print options (OData V4 properties)
DESCRIPTION: Option names and their manifest property keys — set press handlers to show these options (either at app or page level). If press is not defined, these options are not shown.
- Print => print
- Export to Spreadsheet => exportToSpreadsheet
- Export to CSV => exportToCSV
- Export to PDF => exportToPDF
LANGUAGE: text
CODE:
```text
Share Options and Properties:
Print                  => "print"
Export to Spreadsheet  => "exportToSpreadsheet"
Export to CSV          => "exportToCSV"
Export to PDF          => "exportToPDF"

To display an option: define "press" for the option under "sap.fe". For page-only, define under routing targets -> options -> settings -> "share".
```

STEP: Hide/Show specific Share menu options (application-level)
DESCRIPTION: Control visibility of Send Email, Microsoft Teams, and Collaboration Manager globally by setting properties under sap.fe.app.share. Application-level false overrides page-level. Use expression binding where needed.
- Properties:
  - Send E-Mail => showSendEmail
  - Microsoft Teams => showMsTeamsOptions (under teams)
  - Collaboration Manager => showCollaborationManager
LANGUAGE: JSON
CODE:
```json
"sap.fe": {
    "app": {
        "share": {
            "showSendEmail": "{= !${isVerified} }",
            "teams": {
                "showMsTeamsOptions": false
            }
        },
        ...
    }
}
```

STEP: Hide/Show specific Share menu options (page-level)
DESCRIPTION: Override or configure visibility per page/target. If app-level setting is true or undefined, the page-level binding applies. If app-level is false, page-level is ignored.
LANGUAGE: JSON
CODE:
```json
"sap.ui5": {
    "routing": {
        "targets": {
            "SalesOrderManageList": {
                "type": "Component",
                "id": "SalesOrderManageList",
                "name": "sap.fe.templates.ListReport",
                "options": {
                    "settings": {
                        "share": {
                            "showSendEmail": false,
                            "teams": {
                                "showMsTeamsOptions": "{= ${Delivered} }"
                            },
                            …
                        }
                    }
                },
                …
            },
            "SalesOrderManageObjectPage": {
                "type": "Component",
                "id": "SalesOrderManageObjectPage",
                "name": "sap.fe.templates.ObjectPage",
                "options": {
                    "settings": {
                        "share": {
                            "teams": {
                                "showMsTeamsOptions": true
                            },
                        },
                        …
                    }
                },
                …
            },
            …
        }
    }
}
```

STEP: Microsoft Teams visibility note
DESCRIPTION: showMsTeamsOptions applies only when the app runs on SAP Fiori launchpad and Teams integration is available (requires ushell and Fiori launchpad configuration). Ensure platform support before enabling.

LANGUAGE: text
CODE:
```text
Note: showMsTeamsOptions works only on SAP Fiori launchpad where Share: Microsoft Teams integration exists (requires ushell + launchpad configuration).
```

STEP: Semantic bookmarking — define semantic keys (XML, ABAP CDS, CAP CDS)
DESCRIPTION: To enable semantic bookmarking (allow sharing object pages even when an object is in draft), define semantic keys in metadata for the entity set. If semantic keys exist, the URL contains semantic keys instead of technical keys, allowing recipients to open the shared URL regardless of whether the sharer is in edit (draft) or display (active) mode. If semantic keys are missing, URLs contain technical keys and drafts cannot be accessed by other users.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="Common.SemanticKey">
   <Collection>
      <PropertyPath>SalesOrder</PropertyPath>
   </Collection>
</Annotation>
```

LANGUAGE: ABAP CDS
CODE:
```

@ObjectModel: {
  semanticKey: [ 'SalesOrder' ]
}

define view SALESORDERMANAGE {

}
```

LANGUAGE: CDS
CODE:
```

Common.SemanticKey : [
    SalesOrder
],
```

STEP: Semantic bookmarking limitations and behavior
DESCRIPTION: Key limitations you must handle in code/metadata:
- Semantic bookmarking is not supported for subobject pages.
- If not all semantic keys defined for the entity set are part of the available context, semantic keys fall back to technical keys when switching to edit mode. In that case, if a user shares the URL in edit mode, another user cannot open the draft link.
LANGUAGE: text
CODE:
```text
Limitations:
- Not supported for subobject pages.
- If required semantic key values are missing from context, the URL will include technical keys when switching to edit mode -> sharing will not allow other users to open the draft.
```

STEP: OData V2 note — tile creation and static tile extension
DESCRIPTION: In OData V2:
- Share is hidden for creation pages of non-draft objects.
- During tile creation you can change tile type from dynamic to static by implementing an extension referenced in docs ("Extending the Bookmark Function to Save Static Tiles to the SAP Fiori Launchpad"). Use this extension if you need static tiles instead of dynamic tiles.
LANGUAGE: text
CODE:
```text
Note: For OData V2 list report, dynamic tiles with record count are created (filters are respected). To create static tiles instead, implement the extension described in the "Extending the Bookmark Function to Save Static Tiles to the SAP Fiori Launchpad" documentation.
```
--------------------------------

**TITLE**: Share: Microsoft Teams — SAP Fiori elements integration (developer guidance)

**INTRODUCTION**: This document summarizes the functional behavior, developer constraints, and annotation controls for the "Share: Microsoft Teams" feature in SAP Fiori elements apps. Use it to implement safe sharing, exclude sensitive data, and understand limitations for cards, header facets, and header actions when content is shared to Microsoft Teams.

**TAGS**: fiori-elements-framework, sap-s4hana, microsoft-teams, share, annotations, manifest.json, security, application-state

**STEP**: 1 — Prerequisites and admin configuration links

**DESCRIPTION**: Confirm system-level Microsoft Teams integration and security configuration before enabling or testing the feature in your app. Use these official resources for system administrator setup and security guidance.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "SAP_S4HANA_Cloud_Public": "https://help.sap.com/docs/SAP_S4HANA_CLOUD/0f69f8fb28ac4bf48d2b57b9637e81fa/257ec7408db6420682462cd1d000e744.html",
  "SAP_S4HANA_On_Premise": "https://help.sap.com/docs/SAP_S4HANA_ON-PREMISE/8308e6d301d54584a33cd04a9861bc52/849465e69b7a490a88049fe0b24fb01e.html?version=2023.000",
  "Security_Config_Guide": "security-configuration-ba0484b.md"
}
```

**STEP**: 2 — Feature behavior summary (end-user flows)

**DESCRIPTION**: The Share control exposes three Microsoft Teams options. Use this to design and test flows in your UI: Chat, Tab, and Card. Ensure proper app-state generation for link shortening and that end users are informed about cookies and incognito limitations.

**LANGUAGE**: PlainText

**CODE**:
```
Share options:
- As Chat  : share direct link to a specific application state for quick collaboration.
- As Tab   : embed the application context as a Teams tab for group collaboration.
- As Card  : share a collaborative card (object page only) with header facets and up to two header actions.

Notes:
- Application states are used to shorten long URLs and are cleaned up if not accessed for a long time.
- Incognito mode may fail with 401 Unauthorized unless third-party cookies are allowed.
- Image resource (for UI reference): images/Share_Microsoft_Teams_-_All_Options_None_Selected_f6ca832.png
```

**STEP**: 3 — Exclude sensitive and personal data from sharing (annotations)

**DESCRIPTION**: To prevent transfer of sensitive/personal data outside SAP S/4HANA when using "As Card", annotate properties so they are excluded from cards. Use the personal data vocabularies provided by SAP.

**LANGUAGE**: CDS

**CODE**:
```cds
// Use these annotation URIs on entity properties to mark data as sensitive or personal
@com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive : true
@com.sap.vocabularies.PersonalData.v1.IsPotentiallyPersonal : true
```

**STEP**: 4 — Header facets: supported visibility and known restrictions

**DESCRIPTION**: When sharing header facets as a card, visibility and presentation depend on recipient visibility and app configuration. Avoid using unsupported facet content types and be aware of formatting/currency differences.

**LANGUAGE**: PlainText

**CODE**:
```
Restrictions for Header Facets when shared "As Card":
- Unsupported facet content:
  - micro chart
  - rating indicator
  - progress indicator
  - custom facets
  - icon-based images
- If header facet visibility/position/title/subtitle is modified in manifest.json or via custom coding, the card display may differ from the object page.
- Data formatting differences:
  - Custom OData V4 formatters can change formatting inside cards.
  - DataPoint.NumberOfFractionalDigits affects precision differently in cards.
  - Currency formatting in cards may differ from object page.
```

**STEP**: 5 — Header actions on cards: supported actions, constraints, and parameter behavior

**DESCRIPTION**: Cards support up to two annotation-based header actions (annotation actions not overridden by manifest). Understand unsupported action types, parameter limitations, and confirmation behavior to implement actionable buttons correctly.

**LANGUAGE**: CDS

**CODE**:
```cds
// Annotation identifiers referenced in behavior:
DataFieldForIntentBasedNavigation
Common.IsActionCritical
DataFieldForAction

// Key behavior points:
- Cards display only the first two supported annotation-based actions.
- Bound actions receive the page context when triggered from the card.
- Buttons based on DataFieldForIntentBasedNavigation are NOT supported for sharing as card.
- Manifest-based actions are NOT supported in cards.
- Annotation-based actions overridden by manifest binding expressions/functions are NOT supported in cards.
- Confirmation-based actions using Common.IsActionCritical are supported, but the card uses the default i18n key text "C_OPERATIONS_ACTION_CONFIRM_MESSAGE" (custom i18n overrides are not shown).
```

**STEP**: 6 — Action parameter limitations inside Teams cards

**DESCRIPTION**: If your annotation-based action exposes parameters, Teams card UI presents them as simple dropdown/fields. Do not rely on advanced controls or parameter mappings.

**LANGUAGE**: PlainText

**CODE**:
```
Action parameter limitations in Teams cards:
- Unsupported UI elements:
  - Field help (value help)
  - Dropdown lists (complex value help)
  - Date pickers / Date time pickers
- No support for default values for parameter fields.
- No support for IN/OUT parameter mapping:
  - Changing one field will NOT filter or populate another (IN behavior).
  - Changing a value will NOT populate other fields (OUT behavior).
- For semantic actions, only static Criticality values for DataFieldForAction are supported on cards.
```

**STEP**: 7 — Manifest.json considerations affecting cards

**DESCRIPTION**: Any customizations applied via manifest.json or custom code can change what appears on cards (visibility, ordering, titles). If you rely on card parity with object page, validate after manifest changes.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "note": "If properties/actions are modified in webapp/manifest.json or via custom code, cards may not display same visibility, position, title, subtitle, or action set as the source object page."
}
```

**STEP**: 8 — Application state cleanup and URL shortening behavior

**DESCRIPTION**: Share uses stored application state records to shorten long URLs. These records are automatically cleaned up after inactivity; ensure long-term links are not assumed permanent.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "ApplicationStateCleanupGuide": "https://help.sap.com/docs/ABAP_PLATFORM_NEW/a7b390faab1140c087b8926571e942b7/6107ee41f89a43c9af0aa279fe039cca.html",
  "Behavior": "Application state records used for shortened URLs are cleaned up if not accessed for a long time."
}
```

**STEP**: 9 — Incognito mode and third-party cookie requirement

**DESCRIPTION**: Inform end users that sharing via Microsoft Teams in incognito/private browsing can fail due to blocked third-party cookies. Provide guidance to allow third-party cookies or avoid incognito sessions for Teams sharing.

**LANGUAGE**: PlainText

**CODE**:
```
Incognito mode behavior:
- In incognito, users may receive HTTP 401 Unauthorized authentication errors when using Share: Microsoft Teams.
- Resolution: Allow third-party cookies for the incognito session or use a normal browsing session.
```
--------------------------------

**TITLE**: Status Building Block (sap.fe.macros.Status)

**INTRODUCTION**: Use the Status building block to render an annotation-driven object status (based on SAPUI5 ObjectStatus) inside a Fiori Elements / UI5 view. Configure the displayed value and criticality via an annotation path (metaPath). Optionally attach a press handler to implement custom behavior when the status is clicked.

**TAGS**: fiori-elements-framework, sap-fe-macros, Status, ObjectStatus, SAPUI5, annotations, UI.v1.FieldGroup, press-event

**STEP**: 1 — Insert Status macro into an XML view

**DESCRIPTION**: Add the Status building block to your XML view. Set the metaPath to the annotation path that provides the status value and criticality. Set id, visual size (largeDesign), and attach a press event to delegate to a controller handler.

**LANGUAGE**: XML

**CODE**:
```xml
<macros:Status
    metaPath="@com.sap.vocabularies.UI.v1.FieldGroup#ApprovalData/Data/0"
    id="myStatus"
    largeDesign="true"
    press=".onStatusPressed"
/>
```

**STEP**: 2 — Example full XML view snippet with namespace and controller wiring

**DESCRIPTION**: Example showing the XML view root with the macros namespace and the Status macro included. Ensure you declare the macros namespace (typically sap.fe.macros) and reference the controllerName.

**LANGUAGE**: XML

**CODE**:
```xml
<mvc:View
    controllerName="my.app.controller.View"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:macros="sap.fe.macros"
    xmlns="sap.m">
    <macros:Status
        metaPath="@com.sap.vocabularies.UI.v1.FieldGroup#ApprovalData/Data/0"
        id="myStatus"
        largeDesign="true"
        press=".onStatusPressed"
    />
</mvc:View>
```

**STEP**: 3 — Implement the press handler in the controller

**DESCRIPTION**: Implement the onStatusPressed handler in the view controller. Typical tasks: inspect the event source, get the binding context, read relevant properties (for example the status text or criticality), and perform actions such as navigation or showing a message. The event object is a standard UI5 event.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
sap.ui.define([
  "sap/ui/core/mvc/Controller",
  "sap/m/MessageToast"
], function (Controller, MessageToast) {
  "use strict";

  return Controller.extend("my.app.controller.View", {
    onStatusPressed: function (oEvent) {
      // oEvent.getSource() is the Status control
      var oSource = oEvent.getSource();

      // If the Status is bound to an entity, get the binding context
      var oContext = oSource.getBindingContext();
      if (oContext) {
        // Read a property (replace 'StatusText' with your property name)
        var sStatusText = oContext.getProperty("StatusText");
        var sCriticality = oContext.getProperty("Criticality"); // if available via annotations

        // Example action: show a toast with status details
        MessageToast.show("Status: " + sStatusText + (sCriticality ? " (Criticality: " + sCriticality + ")" : ""));
      } else {
        // Fallback action if no context
        MessageToast.show("Status pressed");
      }

      // Additional actions: navigation, dialog, backend calls, etc.
    }
  });
});
```

**STEP**: 4 — Notes on metaPath and annotations

**DESCRIPTION**: The metaPath must point to an annotation that defines the object status (value and criticality). Example metaPath from the sample:
- @com.sap.vocabularies.UI.v1.FieldGroup#ApprovalData/Data/0

This indicates the Status macro reads annotations (UI.v1.FieldGroup / Data item at index 0) for display and criticality. Ensure your OData service metadata contains the corresponding UI annotations (EDMX or CDS annotations) so the macro can resolve value and criticality.

**LANGUAGE**: text

**CODE**:
```
metaPath example:
@com.sap.vocabularies.UI.v1.FieldGroup#ApprovalData/Data/0
```

**STEP**: 5 — References and live examples

**DESCRIPTION**: Use these references for API details and live examples of the Status building block.

**LANGUAGE**: text

**CODE**:
```
API Reference:
https://ui5.sap.com/#/api/sap.fe.macros.Status

Live examples (Building Blocks - Status - Overview):
https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/buildingBlocks/features/statusDefault
```
--------------------------------

**TITLE**: Table Building Block (sap.fe.macros.Table) — Usage, Extensions, and APIs

**INTRODUCTION**: This document provides concise, code-focused guidance for instantiating and extending the sap.fe.macros.Table building block in SAP Fiori elements. It covers XML instantiation, adding actions and creation options, linking a FilterBar, quick filters, mass-edit configuration, dynamic request influence (beforeRebindTable), and programmatically creating items via editFlow. Use these snippets directly in fragments, views, and controller extensions.

**TAGS**: UI5, sap.fe.macros, Table, Fiori, XML, JavaScript, FilterBar, QuickVariantSelection, MassEdit, beforeRebindTable, editFlow

**STEP**: 1 — Instantiate a Table (entitySet or navigation property)

**DESCRIPTION**: Use the Table building block to create a UI table bound to an entity set or a navigation property. Include the macros namespace declaration in the fragment or view. These minimal examples show different metaPath options.

**LANGUAGE**: XML

**CODE**:
```xml
<macros:Table xmlns:macro="sap.fe.macros" metaPath="/MyEntitySet"/>
<macros:Table xmlns:macro="sap.fe.macros" metaPath="MyNavProperty"/>
<macros:Table xmlns:macro="sap.fe.macros" metaPath="MyNavProperty/@com.sap.vocabularies.UI.v1.LineItem"/>
```

**STEP**: 2 — Add custom actions, grouped actions, and creation options

**DESCRIPTION**: Define inline creation options and custom actions (bound/unbound) inside the Table building block. Use requiresSelection="true" to require a row selection for bound actions. Use ActionGroup to create menu or grouped actions. Note: properties/aggregations defined at the manifest level are NOT supported — define them at the building-block level.

**LANGUAGE**: XML

**CODE**:
```xml
<macros:Table metaPath="@com.sap.vocabularies.UI.v1.LineItem" readOnly="true" id="LineItemTablePageCustomActions"> <creationMode name="InlineCreationRows" inlineCreationRowsHiddenInEditMode="true" />  </macros:Table>
     <macros:actions>
          <macros:Action
               key="customAction"
               text="My Custom Action"
               press=".onPressAction"
               placement="After"
               anchor="DataFieldForAction::Service.toggleBoolean"
               requiresSelection="true"
          />
          <macros:ActionGroup text="Grouped Actions" placement="After" anchor="customAction">
               <macros:Action text="Menu Action 1" press=".onPressMenuAction" />
               <macros:Action text="Menu Action 2" press=".onPressMenuAction" />
          </macros:ActionGroup>
     </macros:actions>
</macros:Table>
```

**STEP**: 3 — Use Table inside custom sections/subsections/pages

**DESCRIPTION**: The Table building block can be used in custom sections, subsections, and pages. Place the Table fragment where you need it inside your view/layout. (No extra manifest-level properties.)

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Example usage inside a Panel or any container -->
<Panel headerText="Table in a custom section">
    <macros:Table metaPath="@com.sap.vocabularies.UI.v1.LineItem" id="LineItemTableCustom" />
</Panel>
```

**STEP**: 4 — Link Table to a FilterBar (local or global ID)

**DESCRIPTION**: Reference the FilterBar ID on the Table using the filterBar attribute. The FilterBar may be defined in the same view or another view (use local or global ID).

**LANGUAGE**: XML

**CODE**:
```xml
<Panel headerText="Table in Display Mode with FilterBar">
     <macros:FilterBar metaPath="@com.sap.vocabularies.UI.v1.SelectionFields#SF1" id="FilterBar" />
     <macros:Table metaPath="@com.sap.vocabularies.UI.v1.LineItem" displayMode="true" id="LineItemTable" filterBar="FilterBar" />
</Panel>
```

**STEP**: 5 — Table public APIs (variants, messages, current variant ID)

**DESCRIPTION**: Use the Table API to manage presentation/selection variants, variant IDs, and messages.
- getPresentationVariant() / setPresentationVariant()
- getSelectionVariant() / setSelectionVariant() — works only if table personalization is enabled (these methods consider variants applied directly to the table and exclude variants applied to a bound model).
- setCurrentVariantID() / getCurrentVariantID()
- sendMessage() / removeMessage()

For API details see the sap.fe.macros.Table API Reference and Demo Kit.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Example conceptual usage (adapt to your controller/view):
// var table = this.getView().byId("LineItemTable");
// var pv = table.getPresentationVariant();
// table.setPresentationVariant(pv);
// var sv = table.getSelectionVariant();
// table.setSelectionVariant(sv);
// table.setCurrentVariantID("myVariantId");
// var currentId = table.getCurrentVariantID();
// table.sendMessage({ /* message object */ });
// table.removeMessage(messageId);
```

**STEP**: 6 — Control Search field visibility

**DESCRIPTION**: If the linked entity is searchable, the Search field appears in the table toolbar by default. Disable it by setting isSearchable="false" on the Table.

**LANGUAGE**: XML

**CODE**:
```xml
<macros:Table
    metaPath="@com.sap.vocabularies.UI.v1.LineItem"
    id="LineItemTable"
    isSearchable="false"
/>
```

**STEP**: 7 — Define Quick Variant Selection (quick filters)

**DESCRIPTION**: Define QuickVariantSelection to declare quick filters (presentation variants) with optional showCounts. Use macrosTable:QuickVariantSelection inside macros:quickVariantSelection.

**LANGUAGE**: XML

**CODE**:
```xml
<macros:Table
    metaPath="@com.sap.vocabularies.UI.v1.LineItem"
    id="LineItemTableQuickFilters"
>
    <macros:quickVariantSelection>
        <macrosTable:QuickVariantSelection
            paths="com.sap.vocabularies.UI.v1.SelectionPresentationVariant#All,com.sap.vocabularies.UI.v1.SelectionPresentationVariant#Success"
            showCounts="true"
        />
    </macros:quickVariantSelection>
</macros:Table>
```

**STEP**: 8 — Configure Mass Edit (Dialog mass-edit)

**DESCRIPTION**: Use the massEdit aggregation on the Table to declare mass-edit configuration and UI. The structure follows the Mass Edit dialog pattern; include visibleFields and any custom fragment/form content inside.

**LANGUAGE**: XML

**CODE**:
```xml
<macros:Table
    metaPath="@com.sap.vocabularies.UI.v1.LineItem"
    id="LineItemTablePageMassEdit"
>
    <massEdit>
        <macrosTable:MassEdit visibleFields="BooleanProperty,TagStatus">
            <f:FormContainer>
                <f:formElements>
                    <f:FormElement label="Custom Element">
                        <Text text="This is a custom fragment displayed in the Mass-edit dialog" />
                    </f:FormElement>
                </f:formElements>
            </f:FormContainer>
        </macrosTable:MassEdit>
    </massEdit>
</macros:Table>
```

**STEP**: 9 — Influence the table request dynamically (beforeRebindTable)

**DESCRIPTION**: Use beforeRebindTable to access CollectionBindingInfo before the table rebind. Add filters, sorters, and select additional properties. Add beforeRebindTable attribute to the Table and implement an extension point in the page controller to modify the collectionBindingInfoAPI.

**LANGUAGE**: XML

**CODE**:
```xml
<macros:Table
    metaPath="@com.sap.vocabularies.UI.v1.LineItem"
    readOnly="true"
    id="LineItemTablePageCustomActions"
    isSearchable="false"
    beforeRebindTable=".tableRefreshed"
>
```

**LANGUAGE**: JavaScript

**CODE**:
```javascript
sap.ui.define(
    ["sap/fe/core/PageController", "sap/m/MessageBox", "sap/ui/model/Filter", "sap/ui/model/FilterOperator", "sap/ui/model/Sorter"],
    function (PageController, MessageBox, Filter, FilterOperator, Sorter) {
        "use strict";

        return PageController.extend("sap.fe.core.fpmExplorer.tableCustoms.Page", {
            tableRefreshed(event) {
                var collectionBindingInfoAPI = event.getParameters("collectionBindingInfo");

                //Add a filter
                var filter = new Filter({
                    path: "BooleanProperty",
                    operator: FilterOperator.EQ,
                    value1: false
                });
                collectionBindingInfoAPI.addFilter(filter);

                //Add a sorter
                var sorter = new Sorter("ID", true);
                collectionBindingInfoAPI.addSorter(sorter);

                //Request an additional property to the request
                collectionBindingInfoAPI.addSelect(["TagStatus"]);
            }
        });
    }
);
```

**STEP**: 10 — Trigger creation of a new document (editFlow.createDocument)

**DESCRIPTION**: From the editFlow controller extension, get the table API reference and call base.editFlow.createDocument(table, options). Provide creationMode, createAtEnd, and initial data fields in options. Use the Promise to handle completion.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
//Get the table API
var table = this.getView().byId("fe::table::_Child::LineItem::Table");

//Create document 
this.base.editFlow
    .createDocument(table, {
        creationMode: coreLibrary.CreationMode.Inline,
        createAtEnd: true,
        data: {
            ChildTitleProperty: "Child Object Custom Title",
            ChildDescriptionProperty: "Child Custom Description"
        }
    })
    .then(function () {
        MessageToast.show("Custom create action successfully invoked");
    });
```

**STEP**: 11 — References and live examples

**DESCRIPTION**: Use the Demo Kit and SAP Fiori development portal for live examples and full API docs:
- Building Blocks - Table - Extensions - Custom Column: https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/buildingBlocks/table/customColumn
- Building Blocks - Table - Extensions - Custom Action: https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/buildingBlocks/table/customTableAction
- Table API Reference: https://ui5.sap.com/#/api/sap.fe.macros.Table
- Table - Usage with Filter Bar: https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/buildingBlocks/table/tableFilterBar
- Table - Mass Edit: https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/buildingBlocks/table/tableMassEdit
- Table - Extensions - Table APIs: https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/buildingBlocks/table/tablePublicAPIs

**LANGUAGE**: Markdown

**CODE**:
```text
See the links above for live examples and full API references.
```
--------------------------------

**TITLE**: The `TreeTable` Building Block

**INTRODUCTION**: Use the sap.fe.macros TreeTable building block to render tree-structured tabular data driven by OData/UI annotations. This block isolates tree-table–specific parameters (hierarchy, metadata path, read-only mode) from the main Table building block so you can insert a tree table in an XML view with minimal configuration.

**TAGS**: fiori-elements-framework, TreeTable, sap.fe.macros, UI5, SAP Fiori, building-blocks, XML view

**STEP**: 1 — Insert the TreeTable into an XML view

**DESCRIPTION**: Copy the sample XML view into your project to render a TreeTable inside a Page/Panel. Keep the XML namespaces and controllerName if you use a custom controller. Set metaPath to the annotation path for the line item and hierarchyQualifier to the qualifier of the hierarchy annotation defined in your metadata. Use readOnly="true" to render display-only rows.

**LANGUAGE**: XML

**CODE**:
```xml
<mvc:View
	xmlns="sap.m"
	xmlns:mvc="sap.ui.core.mvc"
	xmlns:macros="sap.fe.macros"
	controllerName="sap.fe.core.fpmExplorer.treeTable.TreeTable"
>
	<Page enableScrolling="true">
		<Panel headerText="Tree table in Display Mode">
			<macros:TreeTable
				metaPath="/Products/@com.sap.vocabularies.UI.v1.LineItem"
				hierarchyQualifier="ProductsHierarchy"
				readOnly="true"
				id="treeTable"
			/>
		</Panel>
	</Page>
</mvc:View>
```

**STEP**: 2 — Minimal TreeTable tag and attribute guidance

**DESCRIPTION**: Use this minimal tag as a template. Replace placeholders with your annotation path and qualifier. Key attributes:
- metaPath: metadata annotation path to the LineItem (list of columns).
- hierarchyQualifier: qualifier name that identifies the hierarchy annotation in your service metadata.
- readOnly: set to "true" when you want display-only mode.
- id: optional control id for view/controller access.
- controllerName / namespaces: include xml namespaces and controller only if needed in your view.

**LANGUAGE**: XML

**CODE**:
```xml
<macros:TreeTable
    metaPath="/<EntitySet>/@com.sap.vocabularies.UI.v1.LineItem"
    hierarchyQualifier="<HierarchyQualifier>"
    readOnly="true|false"
    id="<yourTreeTableId>"
/>
```

**STEP**: 3 — References and live examples

**DESCRIPTION**: Open these references to review API details, live examples, and related documentation for tree table usage and available properties.

**LANGUAGE**: text

**CODE**:
```
Live examples (Building Blocks - Table - Tree Table):
https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/buildingBlocks/table/treeTable

API Reference (sap.fe.macros.TreeTable):
https://ui5.sap.com/#/api/sap.fe.macros.TreeTable

Related documentation (Tree Tables):
tree-tables-7cf7a31.md
```
--------------------------------

**TITLE**: VariantManagement Building Block (SAP Fiori Elements)

**INTRODUCTION**: Enable variant management for flex-enabled controls in flexible programming model SAPUI5 applications. Use the VariantManagement building block to capture and save user personalization for linked controls (page-level) or use control-level variantManagement properties directly on Table/Chart controls when appropriate.

**TAGS**: SAPUI5, Fiori, VariantManagement, FilterBar, Table, Chart, macros, flexible-programming-model, UI5

**STEP**: 1 — Choose variant-management scope

**DESCRIPTION**: Decide whether you need page-level or control-level variant management:
- Page level: Use the VariantManagement building block to manage variants across multiple flex-enabled controls on a page (captures all personalization changes of linked controls).
- Control level: For Table or Chart controls you can skip the VariantManagement building block and instead use the control's variantManagement property (control-only scope).

**LANGUAGE**: None

**CODE**:
```text
(Decision step — no code. Use VariantManagement building block for multi-control/page-level variant management; use variantManagement property on Table/Chart for control-level variant management.)
```

**STEP**: 2 — Initialize VariantManagement and link flex-enabled controls

**DESCRIPTION**: Add the VariantManagement building block inside your XML view (for example, in the DynamicPageTitle heading). Use the `for` association to list comma-separated IDs of flex-enabled controls that should be linked. The building block automatically captures flex-relevant personalization changes on linked controls and saves them when the user saves a variant. Common attributes:
- id: control ID
- for: comma-separated control IDs to link (e.g., "FilterBar,LineItemTable")
- showSetAsDefault: adds "Set as Default" option
- headerLevel: heading level (e.g., "H2")

Place flex-enabled controls (FilterBar, Table, Chart) with matching IDs elsewhere in the same view so they can be linked.

**LANGUAGE**: XML

**CODE**:
```xml
<f:DynamicPage id="FilterBarVMWithTable" class="sapUiResponsiveContentPadding">
    <f:title>
        <f:DynamicPageTitle id="_IDGenDynamicPageTitle1">
            <f:heading>
                <macros:VariantManagement id="vm" for="FilterBar,LineItemTable" showSetAsDefault="true" headerLevel="H2" />
            </f:heading>
        </f:DynamicPageTitle>
    </f:title>
    <f:header>
        <f:DynamicPageHeader id="_IDGenDynamicPageHeader1" pinnable="true">
            <VBox id="_IDGenVBox1">
                <macros:FilterBar metaPath="@com.sap.vocabularies.UI.v1.SelectionFields" id="FilterBar" />
            </VBox>
        </f:DynamicPageHeader>
    </f:header>
    <f:content>
        <macros:Table metaPath="@com.sap.vocabularies.UI.v1.LineItem" readOnly="true" id="LineItemTable" filterBar="FilterBar" />
    </f:content>
</f:DynamicPage>
```

**STEP**: 3 — Link mechanics and runtime behavior

**DESCRIPTION**: How linking works and what to expect at runtime:
- The `for` association links the VariantManagement instance with other flex-enabled controls by ID.
- When a user creates a variant, all linked controls' personalization is captured and stored in that variant.
- Ensure linked controls are "flex-enabled" (support UI adaptation/flex) — e.g., FilterBar, Table, Chart macros.
- For Table macro, use the `filterBar` property to connect to the FilterBar control (as shown in the sample).

**LANGUAGE**: None

**CODE**:
```text
(Behavior note — no code. Ensure controls are flex-enabled and IDs match those in the VariantManagement 'for' list.)
```

**STEP**: 4 — Use control-level variant management when applicable

**DESCRIPTION**: If you only need variant management for a single control (Table or Chart), prefer the control's built-in variantManagement property over adding a separate VariantManagement building block. This simplifies the view and isolates variant persistence to that control.

**LANGUAGE**: None

**CODE**:
```text
(Recommendation — use control-level 'variantManagement' property on Table/Chart when single-control variant scope is sufficient.)
```

**STEP**: 5 — References

**DESCRIPTION**: API and live example links for further details and examples.

**LANGUAGE**: None

**CODE**:
```text
VariantManagement API Reference:
https://ui5.sap.com/#/api/sap.fe.macros.VariantManagement

Table API (macro) Reference:
https://ui5.sap.com/#/api/sap.fe.macros.Table

Live example — Filter Bar with Variant Management and Chart:
https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/buildingBlocks/filterBar/filterBarVMWithChart
```
--------------------------------

**TITLE**: Time Series Chart Card — Annotations and manifest settings for time-axis charts

**INTRODUCTION**: This guide shows the exact code snippets and configuration steps to enable time-series (time-axis) charts in SAP Fiori analytical cards. It includes OData metadata property, UI.Chart XML, ABAP CDS, CAP CDS annotations, and manifest.json examples for chart-level and tab-level timeAxis.levels configuration. Use these snippets directly in your metadata/annotations and manifest to enable correct time-axis behavior and time-granularity drill-down.

**TAGS**: fiori-elements-framework, time-series, chart, UI.Chart, annotations, manifest.json, CDS, ABAP, CAP, sap.ovp

STEP: 1 — OData metadata: declare a Date dimension property
DESCRIPTION: Add this Property element to your OData metadata to mark the Date field as a dimension (Edm.DateTime). This enables the analytical chart to recognize the field as a time axis source.
LANGUAGE: XML
CODE:
```xml
<Property Name="Date" Type="Edm.DateTime" sap:display-format="Date" sap:label="Date" sap:aggregation-role="dimension"/>
```

STEP: 2 — UI.Chart XML Annotation (example: Line chart with series)
DESCRIPTION: Add a UI.Chart annotation (XML) to define a line chart that uses Date as the Category (time) dimension and a currency dimension assigned to Series. Use the Qualifier to reference this chart in manifest or card declarations.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.Chart" Qualifier="Line-Time_-Currency">
    <Record Type="UI.ChartDefinitionType">
        <PropertyValue Property="Title" String="View1" />
        <PropertyValue Property="ChartType" EnumMember="UI.ChartType/Line"/>
        <PropertyValue Property="MeasureAttributes">
            <Collection>
                <Record Type="UI.ChartMeasureAttributeType">
                    <PropertyValue Property="Measure" PropertyPath="SalesShare" />
                    <PropertyValue Property="Role"
                                   EnumMember="UI.ChartMeasureRoleType/Axis1" />
                    <PropertyValue Property="DataPoint" AnnotationPath="@UI.DataPoint#Eval_by_CtryCurr_-SalesShare"/>
                </Record>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="DimensionAttributes">
            <Collection>
                <Record Type="UI.ChartDimensionAttributeType">
                    <PropertyValue Property="Dimension" PropertyPath="Date" />
                    <PropertyValue Property="Role"
                                   EnumMember="UI.ChartDimensionRoleType/Category" />
                </Record>
                <Record Type="UI.ChartDimensionAttributeType">
                    <PropertyValue Property="Dimension" PropertyPath="Sales_CURRENCY"/>
                    <PropertyValue Property="Role"
                                   EnumMember="UI.ChartDimensionRoleType/Series"/>
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

STEP: 3 — ABAP CDS Annotation (equivalent chart definition)
DESCRIPTION: Use this ABAP CDS annotation block to declare the same chart definition in ABAP CDS. Include qualifier and asDataPoint if you need data point evaluation.
LANGUAGE: ABAP CDS
CODE:
```
@UI.Chart: [
  {
    title: 'View1',
    chartType: #LINE,
    measureAttributes: [
      {
        measure: 'SalesShare',
        role: #AXIS_1,
		asDataPoint: true
      }
    ],
    dimensionAttributes: [
      {
        dimension: 'Date',
        role: #CATEGORY
      },
      {
        dimension: 'Sales_CURRENCY',
        role: #SERIES
      }
    ],
    qualifier: 'Line-Time-Currency'
  }
]
annotate view VIEWNAME with { }
```

STEP: 4 — CAP CDS Annotation (UI.Chart in CAP model)
DESCRIPTION: Use this CAP CDS JSON-style annotation to define the chart in CAP. Keep DataPoint annotation path formatted as in your project.
LANGUAGE: CDS
CODE:
```
UI.Chart #Line-Time-Currency : {
    $Type : 'UI.ChartDefinitionType',
    Title : 'View1',
    ChartType : #Line,
    MeasureAttributes : [
        {
            $Type : 'UI.ChartMeasureAttributeType',
            Measure : SalesShare,
            Role : #Axis1,
            DataPoint : '@UI.DataPoint#Eval_by_CtryCurr-SalesShare'
        }
    ],
    DimensionAttributes : [
        {
            $Type : 'UI.ChartDimensionAttributeType',
            Dimension : Date,
            Role : #Category
        },
        {
            $Type : 'UI.ChartDimensionAttributeType',
            Dimension : Sales_CURRENCY,
            Role : #Series
        }
    ]
}
```

STEP: 5 — Rules: when the chart uses a time axis automatically
DESCRIPTION: Verify these requirements in your chart annotation and metadata so the analytical card automatically uses a time axis:
LANGUAGE: text
CODE:
```
- ChartType must be one of: vertical bullet, stacked column, scatter, line, bubble, column, waterfall, combination, dual combination.
- Dimension counts:
  - Bubble: needs two measures.
  - Combination: needs at least two measures.
  - Line: can use two dimensions (second can be color/Series).
  - Bubble/Column/Waterfall/Combination: configured with only one dimension (except line as above).
  - Vertical bullet, stacked column, scatter: need at least one measure and one dimension. Scatter supports extra color and shape dimensions.
- Dimension data type must be edm.datetime or edm.string with OData metadata sap:semantics set to "year (YYYY)" or "yearweek (YYYYWW)" or "yearmonth (YYYYMM)" or "yearquarter (YYYYQ)".
- If using a color dimension, set its uid/color dimension role to Series.
```

STEP: 6 — manifest.json: add chartProperties.timeAxis.levels at chart-level (global for card)
DESCRIPTION: Add chartProperties.timeAxis.levels in the card settings of your manifest.json to set global time granularity levels for the chart. Replace entitySet and model names as required.
LANGUAGE: JSON
CODE:
```json
{
     "sap.ovp": {
           "cards": {
                 "cardchartsline": {
                       "model": "sales",
                       "template": "sap.ovp.cards.charts.analytical",
                       "settings": {
                             "entitySet": “salesSet",
                             "chartProperties": {
                                   "timeAxis": {
                                         "levels": ["year", "month", "day", "hour", "minute"]
                                   }
                             }
                       }
                 }
           }
     }
},
```

STEP: 7 — manifest.json: add chartProperties.timeAxis.levels at tab-level (per-tab override)
DESCRIPTION: When using tabs, define chartProperties at the tab-level to customize time-axis drill-down for individual tabs. This snippet shows a tab overriding levels to ["year","month","day","hour"].
LANGUAGE: JSON
CODE:
```json
"card_11_v4": {
     "model": "sales",
     "template": "sap.ovp.cards.v4.charts.analytical",
     "settings": {
           "title": "{{TIME_SERIES_ANALYTICAL_CARD}}",
           "subTitle": "{{COMMON_ANALYTICAL_CARD_SUBTITLE_V4}}",
           "entitySet": "salesSet",
           "tabs": [
             {
                   "chartAnnotationPath": "com.sap.vocabularies.UI.v1.Chart#year",
                   "value": "With CalenderYear"
             },
             {
                   "chartAnnotationPath": "com.sap.vocabularies.UI.v1.Chart#year",
                   "value": "With TimeAxis",
                   "chartProperties": {
                         "timeAxis": {
                             "levels": ["year", "month", "day", "hour"]
                         }
                   }
             }
         ]
     }
}
```

STEP: 8 — Best practice: dataset granularity and display recommendation
DESCRIPTION: Ensure your dataset has sufficient time granularity to avoid repeating values at the chosen timeAxis levels. Increase data granularity (e.g., include hour/minute) until the chart displays unique time points at the selected levels.
LANGUAGE: text
CODE:
```
- Use combinations of ["year","month","day","hour","minute"] based on required granularity.
- Test visualization queries at each granularity level; if values repeat at a level, increase granularity in the data source.
- For edm.string time dimensions, ensure sap:semantics metadata is present and matches the format your data uses (YYYY, YYYYWW, YYYYMM, YYYYQ).
```
--------------------------------

**TITLE**: Toggling Between Draft and Saved Values (Fiori elements)

**INTRODUCTION**: This document describes UI behavior and actionable steps for toggling between draft and saved versions in draft-enabled SAP Fiori elements applications (OData V2 and V4). Use this as a reference when implementing or testing list report and object page behaviors and when implementing UI controls that present draft vs saved versions.

**TAGS**: fiori-elements-framework, odata-v2, odata-v4, draft, editing-status, list-report, object-page, ui-behavior

**STEP**: 1 — List Report: Editing Status filter behavior

**DESCRIPTION**: When a draft-enabled application exposes the Editing Status filter, it includes the option "All (Hiding Drafts)". Selecting this option controls which entries are shown in the list report and how navigation behaves when drafts exist for objects.

- Behavior summary (for "All (Hiding Drafts)"):
  - In the list report: only saved objects (active versions) are listed with their saved data.
  - When navigating to an object page from the list: the saved version opens. If a draft exists for that object, the saved object view shows a "Return to Draft" affordance to switch to the draft.
  - When navigating back to the list: only saved objects are shown (the list does not display drafts).

**LANGUAGE**: JSON

**CODE**:
```json
{
  "EditingStatusFilterOption": "All (Hiding Drafts)",
  "InListReport": "Only saved objects with their respective data are displayed",
  "WhileNavigatingToObjectPage": "Saved object is displayed; shows 'Return to Draft' button if a draft exists",
  "NavigatingBackToList": "Only saved objects with their respective data are displayed"
}
```

**STEP**: 2 — Object Page: Saved Version / Draft toggle behavior and UI elements

**DESCRIPTION**: On the object page, when a draft exists for the current entity, a toggle control (labeled either "Saved Version / Draft" or contextually "Draft" / "Saved Version") is shown. This control opens a popover that lets the user switch between viewing/working on the saved version and the draft version. The label always indicates which version is currently active.

- UI assets (screenshots for reference are included in docs):
  - images/Toggling_Between_Draft_and_Saved_Values_1_6817734.png
  - images/Object_Page_Draft_Version_is_Shown_Including_Toggle_Popover_fbdd6a2.png
  - images/Object_Page_Saved_Version_is_Shown_4d6823f.png

- Typical interactions:
  1. Object page opens in Saved version (if navigated from "All (Hiding Drafts)"), and if a draft exists, a "Return to Draft" button or a "Saved Version / Draft" popover is available.
  2. Clicking the button opens the popover with options to switch to the Draft version.
  3. The page updates and the button label changes to reflect the active version.

**LANGUAGE**: PlainText

**CODE**:
```text
UI control: "Saved Version / Draft" (popover)
- Visible when a draft exists for the object.
- Popover contains options:
  - "Show Draft" or "Return to Draft"  -> switches page to draft version
  - "Show Saved Version"               -> switches page back to saved version
- Button label updates to indicate current version (e.g., "Draft" when showing draft)
```

**STEP**: 3 — Classic header behavior (OData V2 only)

**DESCRIPTION**: For SAP Fiori elements OData V2 apps that use the classic header, the toggle behavior is presented slightly differently: the header toolbar shows a "Display Saved Version / Return to Draft" button instead of a menu/button next to the object title. Ensure UI placement is handled accordingly when supporting the classic header layout.

**LANGUAGE**: PlainText

**CODE**:
```text
OData V2 (classic header):
- Toggle control placement: header toolbar
- Label examples: "Display Saved Version" / "Return to Draft"
- Behavior: same toggle functionality, different placement compared to object page title menu
```

**STEP**: 4 — Reference / Related information

**DESCRIPTION**: See the Draft Handling documentation for details on how drafts are created, managed, and persisted by the Fiori elements framework. Use this when implementing draft-enabled behavior or when validating business logic.

**LANGUAGE**: MarkdownLink

**CODE**:
```text
Related: Draft Handling
File: draft-handling-ed9aa41.md
Link title: Draft Handling
Description: A draft is an interim version of a business entity that has not yet been explicitly saved as an active version. SAP Fiori elements supports the creation of apps using draft handling.
```
--------------------------------

**TITLE**: Toggling the Editability of Header Fields

**INTRODUCTION**: Enable or disable editability of fields in an Object Page header by setting the manifest property editableHeaderContent. This allows header fields to become editable when the overall page mode permits, while individual fields/facets still obey their own editability rules (for example, micro chart facets are never editable; fields marked ReadOnly remain read-only). Use the appropriate manifest location for SAP Fiori elements OData V2 vs OData V4.

**TAGS**: fiori-elements-framework, sapui5, manifest.json, object-page, header-editable, odata-v2, odata-v4

**STEP**: 1 — Concept & default behavior

**DESCRIPTION**: Set the manifest property editableHeaderContent to enable or disable header editability. Note platform defaults:
- OData V2: header is NOT editable by default — set editableHeaderContent: true to enable.
- OData V4: header IS editable by default — set editableHeaderContent: false to disable.
Remember: enabling header editability does not override individual field/facet settings (ReadOnly, non-editable facets like micro charts).

**LANGUAGE**: JSON

**CODE**:
```json
{
  "settings": {
    "editableHeaderContent": true
  }
}
```

**STEP**: 2 — SAP Fiori elements for OData V2: manifest sample

**DESCRIPTION**: Place the editableHeaderContent property in manifest.json under "sap.ui.generic.app" → pages → component → settings for the ObjectPage component. This sample shows enabling editable header content for the ObjectPage component definition.

**LANGUAGE**: JSON

**CODE**:
```json
"sap.ui.generic.app": {
        "pages": [
            {
                "entitySet": "SEPMRA_C_PD_Product",
                "component": {
                    "name": "sap.suite.ui.generic.template.ListReport",
                    "list": true
                },
                "pages": [
                    {
                        "entitySet": "SEPMRA_C_PD_Product",
                        "component": {
                            "name": "sap.suite.ui.generic.template.ObjectPage",
                            "settings": {
                                "editableHeaderContent": true
                            }
                        },
                        "pages": [
                            {
                                "navigationProperty": "to_ProductText",
                                "entitySet": "SEPMRA_C_PD_ProductText",
                                "component": {
                                    "name": "sap.suite.ui.generic.template.ObjectPage"
                                }
                            }
                        ]
                    }
                ]
            }
        ]
    },
```

**STEP**: 3 — SAP Fiori elements for OData V4: manifest sample

**DESCRIPTION**: Place the editableHeaderContent property in manifest.json under "sap.ui5" → routing → targets → <target> → options → settings for the ObjectPage target. This sample shows enabling editable header content for a routing target that uses the sap.fe.templates.ObjectPage component.

**LANGUAGE**: JSON

**CODE**:
```json
"sap.ui5": {
        ...
        "routing": {
                ...
                {
                    "pattern": "SalesOrderManage({key})/_Item({key2}):?query:",
                    "name": "SalesOrderItemObjectPage",
                    "target": "SalesOrderItemObjectPage"
                }
            ],
            "targets": {
                "SalesOrderItemObjectPage": {
                    "type": "Component",
                    "id": "SalesOrderItemObjectPage",
                    "name": "sap.fe.templates.ObjectPage",
                    "options": {
                        "settings": {
                            "contextPath": "/SalesOrderItem",
                            "editableHeaderContent": true,
                            ...
                        }
                    }
                }
            }
        }
    }
```
--------------------------------

**TITLE**: Tree Tables — Configuration and Extension Examples for SAP Fiori elements (OData V4)

**INTRODUCTION**: Action-oriented reference for enabling and customizing TreeTable behavior in SAP Fiori elements (OData V4). Includes manifest.json configuration examples, controller-extension callbacks for create/drag/copy/paste handling, backend annotation examples to disable hierarchy changes, and XML annotations to prevent root reordering.

**TAGS**: TreeTable, manifest.json, OData V4, SAP Fiori elements, controller extension, drag-and-drop, copy-paste, createMode, hierarchy, annotations

STEP: Prerequisites and Behavior Notes

DESCRIPTION: Requirements and runtime behavior to keep in mind before implementing TreeTable:
- Applicable only to SAP Fiori elements for OData V4.
- Draft-enabled service behavior:
  - Only active entities displayed.
  - Editing Status field hidden in filter bar.
  - Draft indicator shown if a draft exists for an active record.
  - New objects must be saved or discarded.
  - Existing saved objects behave unchanged with drafts.
- Expansion state is not preserved when switching between edit and display mode on an object page.
- Restriction: TreeTable cannot be displayed on the list report with a draft-enabled service in flexible column layout.

LANGUAGE: Text

CODE:
```text
Prerequisites:
- SAP Fiori elements (OData V4)
Notes:
- Draft-enabled service behavior (only active entities, draft indicator shown)
- Expansion state not preserved between edit/display on object page
Restriction:
- TreeTable not supported in List Report with draft-enabled service in flexible column layout
```

STEP: Enable TreeTable in manifest.json

DESCRIPTION: Configure the page's tableSettings to use a TreeTable and reference the hierarchy qualifier matching your Hierarchy.RecursiveHierarchy annotation on the page entity set.

LANGUAGE: JSON

CODE:
```json
"tableSettings": {
     "type": "TreeTable",
     "hierarchyQualifier": "NodesHierarchy",
   ...
}
```

STEP: Supported Create Modes

DESCRIPTION: TreeTable supports these create modes: Inline, NewPage, CreationDialog. On the List Report only NewPage and CreationDialog are supported. You can define a custom create menu by providing a nodeType configuration that maps a propertyName to values (value label mapping and optional creationFields).

LANGUAGE: JSON

CODE:
```json
"tableSettings": {
    "type": "TreeTable",
    "hierarchyQualifier": "NodesHierarchy",
    "personalization": true,
    "creationMode": {
         "name": "Inline",
         "nodeType": {
            "propertyName": "nodeType",
            "values": {
                "Zone": "Create a new Zone",
                "Intermediary": "Create a new Intermediary node",
                "Line": "Create a new Line item"
             }
         },
         "isCreateEnabled": ".extension.hierarchy-edit.custom.OPExtend.enableCreate"
     }
}
```

STEP: Custom Create Mode — Create Dialog Example

DESCRIPTION: Example showing creationFields per node type. The creationFields may reference FieldGroup annotations or a comma-separated list of properties.

LANGUAGE: JSON

CODE:
```json
"tableSettings": {
    "type": "TreeTable",
    "hierarchyQualifier": "NodesHierarchy",
    "personalization": true,
    "creationMode": {
        "name": "CreationDialog",
        "creationFields": "Title",
        "nodeType": {
            "propertyName": "nodeType",
            "values": {
                "Zone": "Create a new Zone",
                "Intermediary": {
                    "label": "Create a new Intermediary node",
                    "creationFields": "Category",},
                "Line": "Create a new Line item"
            }
        },
        "isCreateEnabled": ".extension.hierarchy-edit.custom.OPExtend.enableCreate"
    }
}
```

STEP: Control Create Button Enablement with ControllerExtension

DESCRIPTION: Implement an extension callback referenced by isCreateEnabled. The callback receives (value, parentContext):
- value: the menu item value (null for standard create mode).
- parentContext: the parent binding context under which the new node would be created (undefined for root-level creation).
Use this callback to enable/disable create options per parent/node type.

LANGUAGE: JavaScript

CODE:
```javascript
sap.ui.define(["sap/ui/core/mvc/ControllerExtension"], function (ControllerExtension) {
    "use strict";
 
    return ControllerExtension.extend("hierarchy-edit.custom.OPExtend", {
        // this section allows to extend lifecycle hooks or override public methods of the base controller
 
        //Callback to enable Create actions
        enableCreate: function (value, parentContext) {
            switch (parentContext?.getProperty("nodeType")) {
                case "Zone":
                    return value !== "Zone"; // Anything but 'Zone' under 'Zone'
 
                case "Intermediary":
                    return value === "Line"; // Only 'Line' under 'Intermediary'
 
                case "Line":
                    return false; // Nothing under 'Line'
 
                default:
                    return value === "Zone"; // Only 'Zone' at root level
            }
        }
    }
}
)
```

STEP: Create In-Place (server-calculated position)

DESCRIPTION: Use createInPlace to have the backend determine the new node's position relative to siblings and sorting. If the new node is filtered out, a message toast appears (note exceptions in flexible column layout).

LANGUAGE: JSON

CODE:
```json
"tableSettings": {
    "type": "TreeTable",
    "hierarchyQualifier": "NodesHierarchy",
    "personalization": true,
    "creationMode": {
        "name": "Inline",
        "createInPlace": true,
        "nodeType": {
            "propertyName": "nodeType",
            "values": {
                "Zone": "Create a new Zone",
                "Intermediary": "Create a new Intermediary node",
                "Line": "Create a new Line item"
            }
        },
        "isCreateEnabled": ".extension.hierarchy-edit.custom.OPExtend.enableCreate"
    }
}
```

STEP: Enable Drag and Drop via manifest.json

DESCRIPTION: Reference controller-extension callbacks for:
- isMoveToPositionAllowed(sourceContext, parentContext): returns boolean whether source can be dropped under parent (parentContext === null for root).
- isNodeMovable(sourceContext): returns boolean whether node can be dragged/cut.

LANGUAGE: JSON

CODE:
```json
"tableSettings": {
    "type": "TreeTable",
    "hierarchyQualifier": "NodesHierarchy",
    "personalization": true,
    "creationMode": {...},
    "isMoveToPositionAllowed": ".extension.hierarchy-edit.custom.OPExtend.moveToPositionAllowed",
    "isNodeMovable": ".extension.hierarchy-edit.custom.OPExtend.nodeMovable"
}
```

STEP: Implement Drag-and-Drop Callbacks (ControllerExtension)

DESCRIPTION: Example callbacks implementing move-to-position and nodeMovable rules. Use context.getProperty(...) to inspect nodeType or other properties to permit/deny operations.

LANGUAGE: JavaScript

CODE:
```javascript
sap.ui.define(["sap/ui/core/mvc/ControllerExtension"], function (ControllerExtension) {
    "use strict";
 
    return ControllerExtension.extend("hierarchy-edit.custom.OPExtend", {
        // this section allows to extend lifecycle hooks or override public methods of the base controller
 
        //Callback for Drop and Paste actions
        moveToPositionAllowed: function (sourceContext, parentContext) {
            switch (parentContext?.getProperty("nodeType")) {
                case "Zone":
                    return sourceContext?.getProperty("nodeType") === "Intermediary"; //Only 'Intermediary' under a 'Zone'
 
                case "Intermediary":
                    return  sourceContext?.getProperty("nodeType") === "Line" && sourceContext?.getProperty("name") !== 'Dublin'; // Only 'Line' under 'Intermediary' AND 'Dublin' node cannot be moved
 
                case "Line":
                    return false; // Nothing under 'Line'
 
                default:
                    return false;
            }
        },
 
        //Callback for Drag and Cut actions
        nodeMovable: function (sourceContext) {
            return sourceContext?.getProperty("name") !== 'USA'; // 'USA' node cannot be moved or cut
        }
    });
});
```

STEP: Move Up / Move Down (Behavior and Restrictions)

DESCRIPTION: Move Up/Down between siblings is supported if ChangeNextSiblingAction is defined in RecursiveHierarchyActions annotation. Restrictions that disable move up/down:
- Node created without createInPlace (displayed as first child) → considered out-of-place.
- A sort is applied to the table.
- isNodeMovable or isMoveToPositionAllowed returns false.
- When using RAP, ChangeNextSiblingAction may not be set for root entities, disabling move for root-level nodes.

LANGUAGE: Text

CODE:
```text
Move Up/Down requirements:
- RecursiveHierarchyActions.ChangeNextSiblingAction must be defined.
Disabled when:
- Node is "out of place" (no createInPlace)
- Table has active sort
- isNodeMovable or isMoveToPositionAllowed returns false
- For RAP root entities ChangeNextSiblingAction might not be set (no root moves)
```

STEP: Cut and Paste (Enablement)

DESCRIPTION: Cut (move) and paste use the same extension points as drag & drop:
- isNodeMovable(sourceContext) — controls cut ability.
- isMoveToPositionAllowed(sourceContext, parentContext) — controls paste destination.

LANGUAGE: Text

CODE:
```text
Cut and Paste extension points:
- isNodeMovable(sourceContext) => boolean (controls Cut)
- isMoveToPositionAllowed(sourceContext, parentContext) => boolean (controls Paste destination)
Note: When pasting, final position under parent is determined by backend logic.
```

STEP: Copy and Paste (Enablement and manifest.json)

DESCRIPTION: Copy/paste uses dedicated extension points:
- isNodeCopyable(sourceContext): allow copying.
- isCopyToPositionAllowed(sourceContext, parentContext): allow pasting copied node under parent.

LANGUAGE: JSON

CODE:
```json
"tableSettings": {
    "type": "TreeTable",
    "hierarchyQualifier": "NodesHierarchy",
    "personalization": true,
    "creationMode": {...},
    "isNodeCopyable": ".extension.hierarchy-edit.custom.OPExtend.enableCopy",
    "isCopyToPositionAllowed": ".extension.hierarchy-edit.custom.OPExtend.enablePasteFromCopy"
}
```

STEP: Context Menu Behavior

DESCRIPTION: Context menu (right-click) shows bound actions for the selected node; other nodes are greyed out. Tree-specific actions (cut/paste/expand entire/collapse entire) are not supported with multi-selection.

LANGUAGE: Text

CODE:
```text
Context menu:
- Right-click on a node opens context menu with bound actions.
- Other nodes greyed out.
- Tree-specific actions not supported for multi-selection.
```

STEP: Disable Hierarchy Change Operations via Backend Annotations

DESCRIPTION: Use backend annotations (UpdateRestrictions and NonUpdatableNavigationProperties) on the navigation property to the parent to disable drag/drop/cut/paste reordering. Example uses CDS-like entity with a Superordinate association and annotates NonUpdatableNavigationProperties.

LANGUAGE: CDS

CODE:
```c
@odata.draft.enabled
  entity TreeTableSubEntityWithUpdateRestriction {
        @Core.Immutable: true
        @Common.Label  : 'ID'
    key ID               : String;
        parent           : String;
 
        @Common.Label  : 'Org level name'
        name             : String;
 
        @UI.Hidden     : true
        orgID            : String;
 
        @Core.Computed : true
        @UI.Hidden     : true
        DistanceFromRoot : Integer64;
 
        Superordinate    : Association to TreeTableSubEntityWithUpdateRestriction
                             on Superordinate.ID = parent;
        Organization     : Association to TreeTableEntity
                             on Organization.ID = orgID;
  }
 
  annotate TreeTableSubEntityWithUpdateRestriction with @(Capabilities: {UpdateRestrictions: {NonUpdatableNavigationProperties: [Superordinate]}});
```

STEP: Prevent Reordering of Root Nodes (XML Annotation)

DESCRIPTION: Use ChangeSiblingForRootsSupported in RecursiveHierarchyActions to prevent reordering root nodes. If set to false:
- Users cannot move root nodes up/down or drop a node as a root between other root nodes.
If not defined, defaults to true.

LANGUAGE: XML

CODE:
```xml
<edmx:Reference Uri="/sap/opu/odata/IWFND/CATALOGSERVICE;v=2/Vocabularies(TechnicalName='%2FIWBEP%2FVOC_HIERARCHY',Version='0001',SAP__Origin='LOCAL')/$value">
  <edmx:Include Namespace="com.sap.vocabularies.Hierarchy.v1" Alias="SAP__hierarchy"/>
</edmx:Reference>

<Annotations Target="SAP__self.HierarchyEntityType">
  <Annotation Term="SAP__hierarchy.RecursiveHierarchyActions" Qualifier="HierarchyNode">
    <Record>
      <PropertyValue Property="ChangeNextSiblingAction" String="SAP__self.changeNextSibling"/>
      <PropertyValue Property="CopyAction" String="SAP__self.copy"/>
      <PropertyValue Property="ChangeSiblingForRootsSupported" Bool="false"/>
    </Record>
  </Annotation>
</Annotations>
```

STEP: TreeTable Building Block Reference

DESCRIPTION: Use sap.fe.macros.TreeTable building block for advanced usages and consult the API and building-block examples for live demos.

LANGUAGE: Text

CODE:
```text
References:
- API: sap.fe.macros.TreeTable (see SAPUI5 API reference)
- Live examples: SAP Fiori development portal Building Blocks - Table - Tree Table
```
--------------------------------

**TITLE**: OVP Card Types and manifest.json Configuration (SAP Fiori Elements)

**INTRODUCTION**: Quick reference for available OVP (Overview Page) card types, when to use each, and how to configure global OVP settings (including auto-refresh) in manifest.json. Includes additional card types available for SAP Fiori Elements with OData V2.

**TAGS**: fiori-elements, ovp, cards, manifest.json, sap.ovp, OData V2, analytical-charts, refreshIntervalInMinutes

**STEP**: 1 — Core Card Types and key properties

**DESCRIPTION**: Use these card types based on the data and UX requirement. Key configuration pointers:
- Table and List cards rely on the OData UI annotation com.sap.vocabularies.UI.v1.LineItem.
  - Table: renders a 3-column table layout.
  - List: renders list items with up to six fields each.
- Analytical Chart cards support many chart formats (line, bubble, donut, column, stacked/vertical column, combination, scatter). Set template to sap.ovp.cards.charts.analytical.
- Link List displays links with an image/icon and optional subtitle.

Include these minimal properties inside a card definition:
- template — identifies the OVP card component.
- annotationPath — typically points to the LineItem annotation for transactional cards.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "cards": {
    "SalesTable": {
      "template": "sap.ovp.cards.table",
      "annotationPath": "com.sap.vocabularies.UI.v1.LineItem"
    },
    "SalesChart": {
      "template": "sap.ovp.cards.charts.analytical",
      "annotationPath": "com.sap.vocabularies.UI.v1.Chart"
    },
    "QuickLinks": {
      "template": "sap.ovp.cards.linkList"
    }
  }
}
```

**STEP**: 2 — Configure global OVP settings and auto-refresh in manifest.json

**DESCRIPTION**: Place global OVP settings under the "sap.ovp" section in manifest.json. To enable card auto-refresh, set refreshIntervalInMinutes. The minimum and default refresh interval is 1 minute. The sample manifest snippet below shows common global keys (preserve the exact property names and values as needed). Use refreshIntervalInMinutes (integer minutes) to control automatic refresh across cards.

File path: manifest.json (project root)

**LANGUAGE**: JSON

**CODE**:
```json
"sap.ovp": {
    "globalFilterModel": "salesOrder",
    "globalFilterEntityType": "GlobalFilters", // Deprecated since SAPUI5 1.54.
    "globalFilterEntitySet": "GlobalFilters", // Available from SAPUI5 1.54.
    ...
    "refreshIntervalInMinutes": 12,
    "disableTableCardFlexibility": false,
    "cards": {
        ...
    }
}
```

**STEP**: 3 — Additional card types available for SAP Fiori Elements (OData V2)

**DESCRIPTION**: When using SAP Fiori Elements for OData V2, these additional card types are supported:
- Stack: aggregates a set of cards of the same type (common topic/action). Clicking a stack can display up to 20 cards in an object stream.
- Quick View: shows detailed information for a single record (deeper than list/table item).

Include these templates in card definitions for OData V2 scenarios.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "cards": {
    "CustomerStack": {
      "template": "sap.ovp.cards.stack",
      "annotationPath": "com.sap.vocabularies.UI.v1.LineItem"
    },
    "CustomerQuickView": {
      "template": "sap.ovp.cards.quickview",
      "annotationPath": "com.sap.vocabularies.UI.v1.FieldGroup"
    }
  }
}
```
--------------------------------

**TITLE**: Using UI Controls in Object Page Header (Fiori Elements Annotations)

**INTRODUCTION**: This guide shows how to add UI controls to an Object Page header in SAP Fiori Elements by using OData annotations. It provides ready-to-use XML annotation examples for HeaderInfo (title, description, image), Identification (fields shown in header) and header-level actions (intent-based navigation). Use these snippets in your annotation file and reference it from the app manifest.

**TAGS**: fiori-elements, annotations, object-page, header, ui.headerinfo, ui.identification, xml, manifest

STEP: 1 — Define Header Info (title, description, image, type)
DESCRIPTION: Create an annotations XML that sets the header title, description, type name and image for the Object Page header using the UI.HeaderInfo annotation. Replace the Target with your service/entity type and adjust Paths to match your model properties.
LANGUAGE: XML
CODE:
```xml
<?xml version="1.0" encoding="utf-8"?>
<Annotations xmlns="http://docs.oasis-open.org/odata/ns/edm"
             Target="MyService.PurchaseOrderType">
  <!-- Header info: Title, Description, TypeName and ImageUrl -->
  <Annotation Term="UI.HeaderInfo">
    <Record>
      <PropertyValue Property="TypeName" String="Purchase Order"/>
      <PropertyValue Property="Title" Path="PurchaseOrderID"/>
      <PropertyValue Property="Description" Path="SupplierName"/>
      <PropertyValue Property="ImageUrl" Path="SupplierLogoURL"/>
      <!-- Optional: keywords for search or semantic -->
      <PropertyValue Property="Keywords">
        <Collection>
          <String>Purchase</String>
          <String>Order</String>
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

STEP: 2 — Add Identification Fields (fields shown in header block)
DESCRIPTION: Add UI.Identification to list the key data fields that appear in the object page header (the compact field list next to the title). Use UI.DataField records with Label + Value Path. Replace Path values to match your properties.
LANGUAGE: XML
CODE:
```xml
<?xml version="1.0" encoding="utf-8"?>
<Annotations xmlns="http://docs.oasis-open.org/odata/ns/edm"
             Target="MyService.PurchaseOrderType">
  <Annotation Term="UI.Identification">
    <Collection>
      <Record Type="UI.DataField">
        <PropertyValue Property="Label" String="PO Number"/>
        <PropertyValue Property="Value" Path="PurchaseOrderID"/>
      </Record>
      <Record Type="UI.DataField">
        <PropertyValue Property="Label" String="Status"/>
        <PropertyValue Property="Value" Path="Status"/>
      </Record>
      <Record Type="UI.DataField">
        <PropertyValue Property="Label" String="Ordered On"/>
        <PropertyValue Property="Value" Path="OrderDate"/>
      </Record>
    </Collection>
  </Annotation>
</Annotations>
```

STEP: 3 — Define Header Actions (intent-based navigation)
DESCRIPTION: Add action controls to the header (shown as header buttons) using UI.DataFieldForIntentBasedNavigation. This example creates an intent-based action button. Replace SemanticObject and Action with your intent values.
LANGUAGE: XML
CODE:
```xml
<?xml version="1.0" encoding="utf-8"?>
<Annotations xmlns="http://docs.oasis-open.org/odata/ns/edm"
             Target="MyService.PurchaseOrderType">
  <Annotation Term="UI.HeaderFacets">
    <Collection>
      <Record Type="UI.ReferenceFacet">
        <PropertyValue Property="Label" String="Actions"/>
        <PropertyValue Property="Target">
          <AnnotationPath>UI.HeaderActions</AnnotationPath>
        </PropertyValue>
      </Record>
    </Collection>
  </Annotation>

  <!-- Define the actions referenced above -->
  <Annotation Term="UI.HeaderActions">
    <Collection>
      <Record Type="UI.DataFieldForIntentBasedNavigation">
        <PropertyValue Property="Label" String="Manage"/>
        <PropertyValue Property="SemanticObject" String="PurchaseOrder"/>
        <PropertyValue Property="Action" String="manage"/>
      </Record>

      <!-- Example of a simple action (non-intent) -->
      <Record Type="UI.DataFieldForAction">
        <PropertyValue Property="Label" String="Approve"/>
        <PropertyValue Property="Action" String="ApprovePO"/>
        <PropertyValue Property="Inline" Bool="false"/>
      </Record>
    </Collection>
  </Annotation>
</Annotations>
```

STEP: 4 — Place the annotation file in your Fiori Elements project
DESCRIPTION: Save the XML annotation file in your UI project (e.g., webapp/annotations/Annotations.xml). Then reference it in manifest.json so the Fiori Elements app loads the annotations.
LANGUAGE: JSON
CODE:
```json
{
  "sap.app": {
    "id": "my.app.id",
    "applicationVersion": {
      "version": "1.0.0"
    }
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "mainService"
      }
    },
    "resources": {
      "js": [],
      "css": []
    }
  },
  "sap.ui5": {
    "models": {
      "i18n": {
        "type": "sap.ui.model.resource.ResourceModel",
        "settings": {
          "bundleName": "my.app.i18n.i18n"
        }
      }
    },
    "annotationFiles": [
      "annotations/Annotations.xml"
    ]
  }
}
```

STEP: 5 — Verify and adjust for your service/entity
DESCRIPTION: Ensure the Annotation Target points to the correct EntityType (namespace.EntityType). Confirm property Paths (Title, Description, ImageUrl, identification fields) match your OData metadata. If using CDS annotations, adapt the values to the CDS syntax but keep the same semantic properties (HeaderInfo, Identification, HeaderFacets / HeaderActions).


--------------------------------

**TITLE**: Using a Custom Root View (Fiori Elements / UI5)

**INTRODUCTION**: When the built-in root views (NavContainer or FlexibleColumnLayout) do not meet your app's requirements, create a custom root view and register it so it is loaded when the application starts. This document provides concrete, minimal code examples and registration options for implementing a custom root view in a UI5 / Fiori Elements app.

**TAGS**: fiori-elements-framework, ui5, root-view, custom-root-view, navcontainer, flexiblecolumnlayout, manifest

**STEP**: 1 — Create the custom root view (XML) and controller

**DESCRIPTION**: Create an XML view file and a matching controller. Place these files under your app's webapp folder (example paths shown). The XML view must be a top-level view that hosts your application layout and content.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- File: webapp/view/Root.view.xml -->
<mvc:View
  controllerName="my.app.controller.Root"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  displayBlock="true">
  <App id="app">
    <pages>
      <Page id="rootPage" title="My App Root">
        <content>
          <Text text="This is the custom root view" />
        </content>
      </Page>
    </pages>
  </App>
</mvc:View>
```

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// File: webapp/controller/Root.controller.js
sap.ui.define([
  "sap/ui/core/mvc/Controller"
], function (Controller) {
  "use strict";

  return Controller.extend("my.app.controller.Root", {
    onInit: function () {
      // Initialization logic for the custom root view
    }
  });
});
```

**STEP**: 2 — Register the custom root view via manifest (recommended for standard UI5 apps)

**DESCRIPTION**: Add a rootView entry to the sap.ui5 section of manifest.json so UI5 instantiates your view on bootstrap. Adjust viewName and type to match your view.

**LANGUAGE**: JSON

**CODE**:
```json
// File: webapp/manifest.json (snippet)
{
  "sap.ui5": {
    "rootView": {
      "viewName": "my.app.view.Root",
      "type": "XML",
      "id": "app"
    }
  }
}
```

**STEP**: 3 — Alternative registration via index.html bootstrap

**DESCRIPTION**: If you prefer to bootstrap and instantiate the view/component explicitly in index.html, create a ComponentContainer or instantiate the view in the UI5 bootstrap callback. This is an alternative to manifest-based rootView registration.

**LANGUAGE**: HTML

**CODE**:
```html
<!-- File: webapp/index.html (snippet) -->
<script id="sap-ui-bootstrap"
  src="https://sapui5.hana.ondemand.com/resources/sap-ui-core.js"
  data-sap-ui-theme="sap_fiori_3"
  data-sap-ui-resourceroots='{"my.app": "./"}'>
</script>
<script>
  sap.ui.getCore().attachInit(function () {
    // Option A: instantiate the manifest-driven component
    new sap.ui.core.ComponentContainer({
      name: "my.app",
      settings: { id: "app" },
      async: true
    }).placeAt("content");

    // Option B: instantiate the view directly (not recommended for component-based apps)
    // sap.ui.xmlview({ viewName: "my.app.view.Root" }).placeAt("content");
  });
</script>
```

**STEP**: 4 — Integrate with Fiori Elements / framework behaviour

**DESCRIPTION**: If your project uses the Fiori Elements framework or a standard shell, ensure your custom root view provides or instantiates the expected hosting container(s) and navigation handling that the app requires (for example, App/NavContainer or FCL behavior). Use the view to embed or replace NavContainer / FlexibleColumnLayout as needed.

**LANGUAGE**: Notes / Link

**CODE**:
```text
- If replacing NavContainer or FlexibleColumnLayout, make sure your custom root view offers equivalent navigation & layout controls.
- For concrete examples and patterns, see the SAP Fiori Development Portal example: 
  https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/buildingBlocks/guidance/guidanceOwnRootView
- For general app structure, see: App Overview: The Basic Files of Your App (docs)
```

**STEP**: 5 — Verify and test startup behavior

**DESCRIPTION**: Build and run the app. Confirm the custom root view is loaded on app start and that navigation, routing, and shell integration behave as expected. Inspect browser console for bootstrap/manifest/view instantiation errors and fix viewName/resource path mismatches.

**LANGUAGE**: Notes

**CODE**:
```text
- Common checks:
  - Ensure webapp/manifest.json resource paths and data-sap-ui-resourceroots match your module names.
  - Verify controller names and file paths (my.app.controller.Root -> webapp/controller/Root.controller.js).
  - Confirm the bootstrap script references the correct SAPUI5 library version.
```
--------------------------------

**TITLE**: Action Control for Context-Dependent Actions (SAP Fiori Elements)

**INTRODUCTION**: Use action control to conditionally show, enable, or disable app-specific actions based on the runtime context of an entity instance. For OData V2, add sap:action-for and sap:applicable-path to function imports/actions. For OData V4, use the OperationAvailable annotation. These annotations let the UX enable actions only when the specified Boolean condition on the entity is met.

**TAGS**: fiori-elements-framework, odata-v2, odata-v4, annotations, action-control, sap:action-for, sap:applicable-path, OperationAvailable, FunctionImport, UI.Hidden

**STEP**: 1 — Configure context-dependent actions (OData V2)

**DESCRIPTION**: Add sap:action-for and sap:applicable-path attributes to a FunctionImport (or action) in your OData V2 service metadata (EDMX). Set sap:applicable-path to the Boolean property on the entity type that controls whether the action is allowed for the selected instance. Actions annotated this way are context-dependent: users must select a list item/row for the action to be enabled.

Behavior rules:
- If the applicable-path condition (Boolean) is false, the action is:
  - Hidden when it is on a page header level or is a line-item button in a table.
  - Disabled when it is a header button in a table.
- Do NOT rely on UI.Hidden for DataFieldForAction in page headers — UI.Hidden takes precedence and can deviate from recommended UX behavior.
- If function import action parameters are dynamic and no parameter is required for the selected instance, the parameter dialog will not be shown (applies only to single-context select actions).

**LANGUAGE**: XML

**CODE**:
```xml
<FunctionImport Name="SEPMRA_C_PD_ProductCopy" 
                ReturnType="SEPMRA_PROD_MAN.SEPMRA_C_PD_ProductType" 
                EntitySet="SEPMRA_C_PD_Product" m:HttpMethod="POST"
                sap:action-for="SEPMRA_PROD_MAN.SEPMRA_C_PD_ProductType" 
                sap:applicable-path="IsActiveEntity">
    <Parameter Name="ProductDraftUUID" Type="Edm.Guid" Mode="In"/>
    <Parameter Name="ActiveProduct" Type="Edm.String" Mode="In" MaxLength="10"/>
</FunctionImport>
```

**STEP**: 2 — Configure action control (OData V4)

**DESCRIPTION**: Use the OperationAvailable annotation to control availability of custom actions in OData V4. OperationAvailable should evaluate to a Boolean expression or path on the entity type; actions are enabled/disabled based on that evaluation. If a table allows multi-select, the action is allowed when at least one selected entry fulfills the condition.

For implementation details and examples, see the "Enabling Custom Actions Defined Using Annotations" section in the Actions documentation:
- actions-cbf16c5.md#loiocbf16c599f2d4b8796e3702f7d4aae6c__subsection_xkx_gwq_nsb

**LANGUAGE**: (annotation concept) JSON/XML (use appropriate annotation syntax for OData V4)

**CODE**:
```xml
<!-- Example (conceptual) of using OperationAvailable in OData V4 annotations -->
<Annotations Target="Namespace.EntityType/SomeAction">
  <Annotation Term="Org.OData.Capabilities.V1.OperationAvailable" Path="IsAllowedProperty"/>
</Annotations>
```

```json
// Example (conceptual) using JSON annotation format (V4)
{
  "annotations": {
    "Namespace.EntityType": {
      "SomeAction": {
        "Org.OData.Capabilities.V1.OperationAvailable": {
          "Path": "IsAllowedProperty"
        }
      }
    }
  }
}
```

**STEP**: 3 — Selection and multi-select behavior (applies to V2 & V4)

**DESCRIPTION**: Actions annotated with applicable-path/OperationAvailable are context-dependent:
- Users must select an item or row to enable single-context actions.
- For multi-select tables, the action is allowed if at least one selected entry satisfies the condition defined by the applicable-path or OperationAvailable annotation.

**LANGUAGE**: N/A

**CODE**:
```text
Behavior summary:
- Single-select: action enabled only if selected instance's Boolean property (applicable-path/OperationAvailable) is true.
- Multi-select: action allowed when >=1 selected instance meets the condition.
- UI.Hidden overrides sap:applicable-path for DataFieldForAction in page headers (not recommended).
```
--------------------------------

**TITLE**: Enable and Use Back-End Analytical Parameters in SAP Fiori Elements (OData V2)

**INTRODUCTION**: Configure your Fiori Elements app to pass analytical parameters from the UI to the back end so the back end can normalize/aggregate data (for example, currency conversions). When enabled, the framework automatically exposes filters for analytical parameters in the list report and object page; those filters become mandatory and the UI data updates according to the provided values.

**TAGS**: fiori-elements-framework, odata-v2, analytical-parameters, manifest.json, sapui5, list-report, object-page

**STEP**: 1 — Understand the purpose of analytical parameters

**DESCRIPTION**: Analytical parameters are key/value pairs passed directly to the OData back end (not part of $filter) that influence back-end processing at runtime. Use them when back-end data requires a normalization step (for example currency or unit-of-measure conversions) without changing stored data. The back end receives the parameter and performs conversion/aggregation before returning results to the UI.

**LANGUAGE**: text

**CODE**:
```text
Sample OData request that passes an analytical parameter (DisplayCurrency) directly to the back end:
http://<path>/Customer(P_DisplayCurrency='EUR')/Set?$count=true
```

**STEP**: 2 — Enable analytical parameter handling in manifest.json

**DESCRIPTION**: Set the considerAnalyticalParameters flag to true inside the sap.ui.generic.app.settings section of your manifest.json. This instructs the Fiori Elements framework to create mandatory filter UI controls for analytical parameters automatically and to pass the parameter values to the back end. Update manifest.json, rebuild/deploy the app, and test the List Report or Object Page.

- File: manifest.json
- Location: root of your UI project

**LANGUAGE**: JSON

**CODE**:
```json
"sap.ui.generic.app": {
           "_version": "1.3.0",
           "settings": {
                "considerAnalyticalParameters": true,
                "forceGlobalRefresh": true,
                "inboundParameters": {
                              "Supplier": {
                                    "useForCreate": true
                                          }
                                     },
                "objectPageDynamicHeaderTitleWithVM": true
                       },
}
```

**STEP**: 3 — Expected behavior in the UI and back end

**DESCRIPTION**: After enabling considerAnalyticalParameters:
- The framework injects filters for the analytical parameters into the List Report filter bar.
- These filters are treated as mandatory by the framework.
- When a user sets a parameter value (for example, EUR for currency), the framework sends that value directly to the back end (as a parameter) in OData requests. The back end performs conversions/aggregations and returns the normalized results to the UI.

**LANGUAGE**: text

**CODE**:
```text
Behavior summary:
- UI: Mandatory filter controls are generated automatically for analytical parameters.
- Transfer: Parameter values are sent as OData parameter key/value pairs (not part of $filter).
- Back end: Receives the parameter and returns processed (e.g., converted/aggregated) data.
```

**STEP**: 4 — Testing and verification

**DESCRIPTION**: Verify end-to-end behavior:
1. Edit manifest.json to set considerAnalyticalParameters: true and deploy the app.
2. Open List Report or Object Page: confirm additional filter controls appear and are mandatory.
3. Set a parameter (e.g., DisplayCurrency = EUR) and trigger data load.
4. Inspect network/OData request to confirm parameter is sent as part of the entity call (see STEP 1 URL format).
5. Verify returned data reflects backend normalization (e.g., all amounts converted to EUR).

**LANGUAGE**: text

**CODE**:
```text
Testing checklist:
- manifest.json updated and app redeployed
- Filter controls for analytical params are visible and mandatory
- Network request contains parameter (pattern: /Entity(P_ParamName='Value')/Action?$...)
- Data in UI reflects backend conversion/aggregation
```

**STEP**: 5 — Reference / further reading

**DESCRIPTION**: See additional Fiori Elements documentation for OData V4 parameterized entities and filter bar configuration when adapting or comparing behavior across OData versions.

**LANGUAGE**: text

**CODE**:
```text
Related link:
- Supporting Parameterized Entities (Configuring Filter Bars) (OData V4)
  Refer to: configuring-filter-bars-4bd7590.md#loio4bd7590569c74c61a0124c6e370030f6__suppprting_parameterized_entities_subsection
```
--------------------------------

**TITLE**: Using Custom Code Before Standard Operations (SAP Fiori elements OData V4)

**INTRODUCTION**: Short, actionable guide for implementing onBefore extension methods in SAP Fiori elements (OData V4). Shows how to add custom code that runs before standard create/edit/save/discard/delete flows, how to wrap code with securedExecution (for messages and state-changing scenarios), and how to register controller extensions in the manifest.

**TAGS**: fiori-elements, sap-fe, odata-v4, controller-extension, onBeforeCreate, onBeforeEdit, onBeforeSave, onBeforeDiscard, onBeforeDelete, securedExecution, manifest

**STEP**: 1 — Supported onBefore extension methods and behavior

**DESCRIPTION**: Use these onBefore extension method hooks to run custom code before the framework invokes the standard flow. These hooks apply only to SAP Fiori elements for OData V4 and may return a Promise — rejecting the Promise cancels the standard flow.

- onBeforeCreate — triggered before the standard create method
- onBeforeEdit — triggered before the standard edit flow
- onBeforeSave — triggered before the standard save method
- onBeforeDiscard — triggered before the standard draft discard
- onBeforeDelete — triggered before the standard delete (object page) or invoked for each selected context (list/table)

If your custom code displays messages or changes the document state, wrap it with securedExecution and set updatesDocument: true so Fiori elements can show the confirmation popover and allow discard if user navigates away.

**LANGUAGE**: Text

**CODE**:
```text
Signature examples (each can be synchronous or return a Promise):
- onBeforeCreate(oContext) => void | Promise
- onBeforeEdit(oContext) => void | Promise
- onBeforeSave(oContext) => void | Promise
- onBeforeDiscard(oContext) => void | Promise
- onBeforeDelete(oContext | aContexts) => void | Promise

Note: Returning a rejected Promise cancels the standard operation.
```

**STEP**: 2 — Implement a controller extension with onBefore methods (JavaScript AMD module)

**DESCRIPTION**: Create a controller extension module that exports the onBefore* handlers. Use this.securedExecution when showing messages or when changing document state. Handlers must either complete (resolve) to continue the standard flow, or reject/call throw to prevent it.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// webapp/extension/ObjectPageExtension.js
sap.ui.define([], function () {
	"use strict";
	return {
		// Example: called before creating a new entity instance
		onBeforeCreate: function (oContext) {
			// synchronous check
			if (!this._isUserAllowedToCreate()) {
				// cancel create by returning a rejected Promise
				return Promise.reject(new Error("User not allowed to create"));
			}
			// async example: return a Promise that resolves when done
			return Promise.resolve();
		},

		// Example: called before edit
		onBeforeEdit: function (oContext) {
			// Example: log or set a custom flag, then continue
			this._logEditIntent(oContext);
			return Promise.resolve();
		},

		// Example: called before save
		onBeforeSave: function (oContext) {
			// Validate local fields synchronously or asynchronously
			const bIsValid = this._validateFields(oContext);
			if (!bIsValid) {
				return Promise.reject(new Error("Validation failed"));
			}
			return Promise.resolve();
		},

		// Example: called before discard (draft discard)
		onBeforeDiscard: function (oContext) {
			// Optionally perform cleanup before discard
			return Promise.resolve();
		},

		// Example: called before delete (object page) or for each selected table context
		onBeforeDelete: function (oContextOrArray) {
			// If custom logic should block deletion:
			const canDelete = this._checkBusinessRulesForDelete(oContextOrArray);
			if (!canDelete) {
				return Promise.reject(new Error("Delete blocked by business rule"));
			}
			return Promise.resolve();
		},

		/* Helper methods (illustrative) */
		_isUserAllowedToCreate: function () {
			// custom logic
			return true;
		},
		_logEditIntent: function (oContext) {
			// custom logic
		},
		_validateFields: function (oContext) {
			// custom validation
			return true;
		},
		_checkBusinessRulesForDelete: function (oContext) {
			// custom check
			return true;
		}
	};
});
```

**STEP**: 3 — Use securedExecution to show messages or change document state

**DESCRIPTION**: When your custom code displays messages or mutates the document state, wrap it with securedExecution. Set options.updatesDocument = true to let Fiori elements present a confirmation popover (discard/keep) when the user navigates away. Use options.busy to show busy indicator if needed.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Example inside the controller extension module methods
onBeforeSave: function (oContext) {
	// securedExecution provided by the framework for safe message handling and state updates
	return this.securedExecution(async () => {
		// perform async checks, set fields, show messages, etc.
		const valid = await this._asyncValidate(oContext);
		if (!valid) {
			// Throw or return a rejected Promise to cancel save
			throw new Error("Validation failed in securedExecution");
		}
		// Modify context/document fields if required
		// this.getView().getModel().setProperty("/SomeField", "value");

		// If everything is ok, resolve to continue the standard save flow
	}, {
		busy: true,
		updatesDocument: true // important if the code changes document state
	});
},

_asyncValidate: function (oContext) {
	// simulate async validation
	return new Promise(function (resolve) {
		setTimeout(function () { resolve(true); }, 100);
	});
}
```

**STEP**: 4 — Register your controller extension in manifest.json

**DESCRIPTION**: Register the controller extension(s) for the template(s) you extend (ObjectPage, ListReport, etc.). The keys under sap.ui.controllerExtensions are the Fiori elements controllers (e.g., sap.fe.templates.ObjectPage). Provide mappings to your extension module name.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui5": {
    "extends": {
      "extensions": {
        "sap.ui.controllerExtensions": {
          "sap.fe.templates.ObjectPage": {
            "controllerName": "my.app.extension.ObjectPageExtension"
          },
          "sap.fe.templates.ListReport": {
            "controllerName": "my.app.extension.ListReportExtension"
          }
        }
      }
    }
  }
}
```

**STEP**: 5 — Example: Canceling a delete operation from onBeforeDelete

**DESCRIPTION**: If you need to cancel a delete based on business logic, return a rejected Promise (or throw). The framework will not perform the delete when the Promise is rejected.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
onBeforeDelete: function (oContext) {
	// synchronous check that forbids delete
	if (oContext.getProperty("Status") === "Locked") {
		// prevent the standard delete from executing
		return Promise.reject(new Error("Cannot delete a locked record"));
	}
	// otherwise continue
	return Promise.resolve();
}
```

**STEP**: 6 — References and live examples

**DESCRIPTION**: Use the SAP Fiori development portal and Demo Kit for more examples and API details.

**LANGUAGE**: Text

**CODE**:
```text
Live examples:
- Standard Floorplans - Extensions - Overview:
  https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/controllerExtensions/guidanceControllerExtensions

API reference:
- EditFlow controller extension (Demo Kit):
  https://ui5.sap.com/#/api/sap.fe.core.controllerextensions.EditFlow
```
--------------------------------

**TITLE**: Defining Global Side Effects for Draft-enabled SAP Fiori Elements Apps

**INTRODUCTION**: This guide shows how to declare global side effects that trigger on pressing Enter in input fields for draft-enabled SAP Fiori Elements apps. Includes XML annotation for OData V2, manifest.json configuration to control refresh scope, and CAP/CDS annotation example for OData V4. Action-oriented steps to implement, optimize, and configure behavior.

**TAGS**: fiori-elements, side-effects, draft, odata-v2, odata-v4, manifest.json, cds, annotations

STEP: Prerequisites and behavior summary

DESCRIPTION: Ensure the app is draft-enabled. Global side effects have no source properties/entities and are triggered when pressing Enter on any input field of the annotated entity. For OData V2, if a TriggerAction is annotated as a global side effect, it replaces the PreparationAction call. Prefer narrow target definitions for performance. Use forceGlobalRefresh only for exceptional full-entity refresh needs.

LANGUAGE: PlainText

CODE:
```text
- Applicable only to draft-enabled applications.
- Pressing Enter on an input field triggers the global side effect annotated for that entity.
- For OData V2: TriggerAction annotated as a global side effect replaces the PreparationAction call.
- Prefer specifying TargetProperties or TargetEntities for performance.
- Use forceGlobalRefresh in manifest.json to force a full-model refresh only when required.
- If forceGlobalRefresh = true -> refresh entire model on Enter.
- If forceGlobalRefresh = false -> only annotated targets are refreshed and/or TriggerAction is called.
- Runtime default (as of SAPUI5 1.106) if not set: false.
- Design-time default for newly generated projects: "forceGlobalRefresh": false
```

STEP: Add Global Side Effect Annotation (OData V2, XML)

DESCRIPTION: Add a SideEffects annotation on the entity type with TargetProperties and TriggerAction. This triggers the specified action and refreshes the listed properties when Enter is pressed.

LANGUAGE: XML

CODE:
```xml
<Annotations Target="NAMESPACE.ENTITYTYPE">
    <Annotation Term="com.sap.vocabularies.Common.v1.SideEffects" Qualifier="GlobalSideEffect">
        <Record>
            <PropertyValue Property="TargetProperties">
                <Collection>
                    <String>TaxAmount</String>
                    <String>NetAmount</String>
                    <String>GrossAmount</String>
                </Collection>
            </PropertyValue>
          <PropertyValue Property="TriggerAction" String="NAMESPACE.MyAction"/>
        </Record>
    </Annotation>
</Annotations>
```

STEP: Configure refresh behavior in manifest.json

DESCRIPTION: Configure the global refresh behavior for the app. Set "forceGlobalRefresh": true to refresh the entire model on Enter (use only if needed). Default runtime is false (as of SAPUI5 1.106). The property belongs under "sap.ui.generic.app" -> "settings".

LANGUAGE: JSON

CODE:
```json
"sap.ui.generic.app": {
        "_version": "1.3.0",
        "settings": {
            "forceGlobalRefresh": true,
            .....
                }
            },
```

STEP: Add Global Side Effect Annotation (OData V4, CAP CDS)

DESCRIPTION: For OData V4 apps using CAP CDS, annotate the entity using Common.SideEffects with TargetProperties and TriggerAction. This will behave analogously to the XML side effect: pressing Enter triggers the action and refreshes the listed properties.

LANGUAGE: CDS

CODE:
```
annotate NAMESPACE.ENTITYTYPE @(
Common.SideEffects #GlobalSideEffect : {
    TargetProperties : [
        TaxAmount,
        NetAmount,
        GrossAmount
    ],
    TriggerAction : 'NAMESPACE.MyAction'
}
);
```

STEP: Implementation and optimization checklist

DESCRIPTION: Quick actionable checklist to ensure correct behavior and optimal performance.

LANGUAGE: PlainText

CODE:
```text
- Confirm app uses draft handling before adding global side effects.
- Annotate each entity that requires a global side effect (XML for OData V2, CDS for OData V4).
- Prefer TargetProperties or TargetEntities over full-entity refresh.
- Use TriggerAction to replace PreparationAction for OData V2 when applicable.
- Set "forceGlobalRefresh" in manifest.json only when full-model refresh is required.
- Verify runtime SAPUI5 version behavior (default forceGlobalRefresh = false as of 1.106).
- Test Enter key interactions in the UI to confirm the TriggerAction and refresh behavior.
```

Related Information (reference): draft-handling-ed9aa41.md
--------------------------------

**TITLE**: Using Images, Initials, and Icons in SAP Fiori elements (Avatar & Object Page Header)

**INTRODUCTION**: This document explains the runtime selection logic and configuration entry points for using images, initials, and icons as avatars in SAP Fiori elements applications. Use the examples to set avatar sources, shapes, and to understand fallback behavior in object page headers.

**TAGS**: fiori-elements-framework, SAPUI5, avatar, ObjectPageHeader, images, icons, ODataV2, PageEditor

**STEP**: 1 — Display selection logic overview

**DESCRIPTION**: The runtime chooses between an image, initials, or an icon for an avatar in this order:
- If an image source (src / objectImageURI) is present and resolved, the image is shown.
- If no image but initials are available, initials are shown.
- If neither image nor initials are available, a fallback icon is shown. The fallback icon depends on the avatar shape:
  - Circular avatar → person icon
  - Square avatar → product icon

Preserve the avatar asset under your app assets folder (example path below).

**LANGUAGE**: HTML

**CODE**:
```html
<!-- Example asset path used by Fiori elements / UI5 views -->
<!-- images/Avatar_e9e8ed2.jpg -->
<img src="images/Avatar_e9e8ed2.jpg" alt="avatar example" />
```

**STEP**: 2 — Change avatar display shape (OData V2 / Page Editor)

**DESCRIPTION**: For apps built with SAP Fiori elements for OData V2, change the avatar/display shape through the SAP Fiori tools Page Editor. Do not rely on runtime code changes for shape selection when using the Fiori elements page templates; prefer the Page Editor configuration.

Reference: Configure Page Elements — https://help.sap.com/docs/SAP_FIORI_tools/17d50220bcd848aa854c9c182d65b699/047507c86afa4e96bb3d284adb9f4726.html

**LANGUAGE**: JSON

**CODE**:
```json
{
  "note": "Use the SAP Fiori tools Page Editor to change the display shape for OData V2 apps.",
  "link": "https://help.sap.com/docs/SAP_FIORI_tools/17d50220bcd848aa854c9c182d65b699/047507c86afa4e96bb3d284adb9f4726.html"
}
```

**STEP**: 3 — Avatar control example (UI5 XML view)

**DESCRIPTION**: Use the sap.m.Avatar control when you need full control in a view. Provide src, initials, and icon attributes. The control will render the first available source per the selection logic above. Set shape explicitly to control fallback icon type.

**LANGUAGE**: XML

**CODE**:
```xml
<mvc:View xmlns:m="sap.m" xmlns:mvc="sap.ui.core.mvc">
  <!-- Avatar with image fallback -> initials -> icon -->
  <m.Avatar
    id="myAvatar"
    shape="Square"           <!-- "Circle" or "Square" -->
    displaySize="L"
    src="images/Avatar_e9e8ed2.jpg"
    initials="AB"
    icon="sap-icon://product" />
</mvc:View>
```

**STEP**: 4 — Object page header: objectImageURI and shape (SAP UXAP)

**DESCRIPTION**: On an Object Page, the header image is rendered by the Object Page header control (sap.uxap.ObjectPageHeader). Provide objectImageURI and objectImageShape to set the header avatar. The same fallback rules apply: image -> initials -> icon; circular shape results in person icon fallback, square shape results in product icon fallback.

**LANGUAGE**: XML

**CODE**:
```xml
<mvc:View xmlns:uxap="sap.uxap" xmlns:mvc="sap.ui.core.mvc">
  <uxap:ObjectPageHeader
    id="objectPageHeader"
    objectTitle="My Object"
    objectSubtitle="Subtitle"
    objectImageURI="images/Avatar_e9e8ed2.jpg"   <!-- use your image asset -->
    objectImageShape="Square"                     <!-- "Circle" or "Square" -->
    objectImageAlt="Object image" />
</mvc:View>
```

**STEP**: 5 — Implementation checklist for code generation

**DESCRIPTION**: When generating code or templates that include avatars or header images, ensure:
- Image assets are included in the app under a consistent path (example: images/Avatar_e9e8ed2.jpg).
- Views/components provide src/objectImageURI, initials, and icon attributes so fallback works automatically.
- Shape is explicit if you rely on a specific fallback icon (Circle => person, Square => product).
- For Fiori elements OData V2 apps, prefer Page Editor configuration for changing display shape; otherwise, set objectImageShape in generated XML or manifest extensions.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "checklist": [
    "Place image files under assets (e.g., images/Avatar_e9e8ed2.jpg)",
    "Provide src or objectImageURI in views or ObjectPageHeader",
    "Provide initials and icon attributes for deterministic fallbacks",
    "Set shape explicitly: Circle | Square",
    "For OData V2 Fiori elements apps: use Page Editor for shape changes"
  ]
}
```
--------------------------------

**TITLE**: Using Messages in SAP Fiori Elements — Actionable Implementation Guide

**INTRODUCTION**: Practical, developer-focused guidance for implementing and handling server and client messages (state and transition messages) in SAP Fiori Elements applications. Covers validation flows, OData V2/V4 specifics, side effects annotations, UI behaviors (message popover/dialog/button), special error handling (412/503), and using the ObjectPage ExtensionAPI to show/hide status messages.

**TAGS**: fiori-elements-framework, odata-v2, odata-v4, messages, annotations, side-effects, state-messages, transition-messages, validation

**STEP**: 1 — Identify Message Types and Usage

**DESCRIPTION**: Determine whether messages are state messages or transition messages and apply behavior rules accordingly:
- State messages: relate to the instance state (e.g., "Amount must not be negative"), persist in backend, shown until corrected. Not expected in list report or object page display mode. In object page edit mode, state messages appear in the message popover and include client-side validation messages.
- Transition messages: transient, refer to the last action only (e.g., "Document can't be printed"), not stored in backend, sent only in response to the request. Typically shown in message dialog; do not affect instance state.

Use this distinction to design backend responses and client handling.

**LANGUAGE**: Text

**CODE**:
```Text
// No code for this step. Conceptual guidance only.
```

**STEP**: 2 — Back-End Field Validation After Change (Draft Workflow)

**DESCRIPTION**: Implement server-side validation at these times:
- Before draft activation.
- When user presses Enter or mobile Validation button.
Return state messages for invalid fields. If any field invalid, prevent draft activation and return user to draft. After user edits a field, backend must revalidate changed fields and add/remove state messages for those fields.

Guidelines:
- Use input validation moderately to avoid poor UX and slow response times.
- Use client-side validation for immediate checks; show combined client and server state messages in the message popover (edit mode).
- Configure multiple targets in a single message only for special scenarios (e.g., inter-field dependency like start date > end date or unit-of-measure associated field). Ensure all targeted fields are visible on the same UI page.

**LANGUAGE**: Text

**CODE**:
```Text
// No code for this step. Implementation is backend and service design.
```

**STEP**: 3 — Annotate Side Effects to Request State Messages (Target specific properties)

**DESCRIPTION**: When property changes can cause message changes, annotate side effects on the entity to list SourceProperties and the message target property (SAP__Messages). This ensures the client requests the message property and refreshes the message model only when needed.

Include a SideEffects annotation with SourceProperties and TargetProperties referencing SAP__Messages.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="com.sap.vocabularies.Common.v1.SideEffects" Qualifier="CustomerChange">
    <Record>
        <PropertyValue Property="SourceProperties">
            <Collection>
                <PropertyPath>Customer</PropertyPath>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="TargetProperties">
            <Collection>
                <PropertyPath>SAP__Messages</PropertyPath>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

**STEP**: 4 — Annotate Side Effect to Always Read State Messages (All properties)

**DESCRIPTION**: If the application must read messages for all properties after updates, add a side effect with the entity as the source (empty NavigationPropertyPath) and SAP__Messages as target. This forces message property retrieval for any update on the entity.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="com.sap.vocabularies.Common.v1.SideEffects" Qualifier="AllwaysReadStateMessages">
    <Record>
        <PropertyValue Property="SourceEntities">
            <Collection>
                <NavigationPropertyPath />
            </Collection>
        </PropertyValue>
        <PropertyValue Property="TargetProperties">
            <Collection>
                <PropertyPath>SAP__Messages</PropertyPath>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

**STEP**: 5 — OData V4: Message Property and Model Behavior

**DESCRIPTION**: For OData V4:
- State messages must be sent in a complex type body. You can annotate the message property name with @com.sap.vocabularies.Common.v1.Messages, but only if the client requests messages.
- When requested, the client model removes existing state messages for the current entity and refills the message model from the backend response.
- Applications must annotate side effects with the message property in TargetProperties for each property change that may add/remove messages.
- Actions returning an entity with an annotated message property will likely change state messages. If no side effect is annotated for such actions, the message property is implicitly requested; otherwise, include the message property in the side effect target.

Refer to: ../04_Essentials/server-messages-in-the-odata-v4-model-fbe1cb5.md

**LANGUAGE**: Text

**CODE**:
```Text
// No code for this step. Refer to the linked Server Messages doc for detailed structures.
```

**STEP**: 6 — OData V2: Transition Message Behavior and Draft Operations

**DESCRIPTION**: For OData V2:
- Transition messages are always shown in the message dialog, including in object page edit mode.
- Draft operations (activate, prepare, validate) are treated like actions; avoid raising transition messages during prepare/validate operations because they display as dialogs and interrupt edit-mode UX.
- Prefer state messages for validation that should remain until corrected; use transition messages only for transient action-specific feedback.

**LANGUAGE**: Text

**CODE**:
```Text
// No code for this step. Adjust backend to avoid transition messages on prepare/validate.
```

**STEP**: 7 — Handling 412 "Precondition Failed"

**DESCRIPTION**: For 412 messages:
- Allow users to retry actions that produced 412 by offering a confirm/ignore option (see Confirmation Popups).
- Implement client behavior to surface a confirmation popup that allows the user to retry the action by ignoring the 412 warning.
- Link/reference: confirmation-popups-9a53662.md

**LANGUAGE**: Text

**CODE**:
```Text
// No code for this step. Implement a confirmation popup on receiving HTTP 412 to allow retry.
```

**STEP**: 8 — Bound vs Unbound Messages: UI Handling and Layouts

**DESCRIPTION**:
- Bound messages: associated with an instance (both state and transition). In edit mode shown in message popover; popover summarizes, groups by message group (or General), navigates to details and UI targets, and includes filter by severity. In list report / object page display mode, bound transition messages are shown in message dialog; state messages are not supported in display mode. If exactly one bound transition success message occurs, show a message toast.
- Unbound messages: not instance-specific; always considered transition messages. Show them in message dialog with details and technical info.

UI components and behavior:
- Message Button: visible only when there are bound messages; colored by highest severity; shows count of error messages.
- Message Popover components: filter (severity), group name (section/table), short description, subtitle, chevron to details (long text from backend), navigation to UI location by clicking message.
- Message Dialog components for unbound messages: filter, type, title/subtitle, long description, chevron to details (status code/text, component ID, service ID/repo, analysis, exception category, timestamp).

**LANGUAGE**: Text

**CODE**:
```Text
// No code for this step. UI behavior is provided by Fiori Elements; ensure backend supplies message grouping, long text, and navigation targets.
```

**STEP**: 9 — Special Handling of 503 "Service Unavailable"

**DESCRIPTION**: Implement client-side behavior based on "retry-after" header when backend returns HTTP 503:
- If 503 at application startup: show an error page.
- If "retry-after" provided:
  - < 5 seconds: show busy indicator.
  - 5 to 600 seconds: show dialog with error details and automatically retry when retry-after expires.
  - > 600 seconds: show error page or dialog with error details (no automatic retry).
Design client retry logic to respect these thresholds and present appropriate UI.

**LANGUAGE**: Text

**CODE**:
```Text
// No code for this step. Implement retry handling based on retry-after header values described above.
```

**STEP**: 10 — Display Status Message Strip on Object Page (Object-level messages)

**DESCRIPTION**: To show a status message relevant to the entire object on the object page:
- Backend should return object-level status information (message with criticality).
- The UI displays a message strip with color derived from message criticality.
- To programmatically hide or show a specific message, use the ObjectPage.ExtensionAPI method showMessages.
- Reference API: https://ui5.sap.com/#/api/sap.fe.templates.ObjectPage.ExtensionAPI/methods/showMessages

Implement or extend ObjectPage controllers to call ExtensionAPI.showMessages as required.

**LANGUAGE**: Text

**CODE**:
```Text
// Example usage: call ObjectPage.ExtensionAPI.showMessages(...) from controller extension to show/hide messages.
// See API reference URL for method signature and parameters.
```
--------------------------------

**TITLE**: Using SAP Fiori Elements Floorplans — Quick Reference for Code Generation

**INTRODUCTION**: This document summarizes the available SAP Fiori Elements floorplans and provides concise, actionable guidance for choosing and generating apps from these templates. Use these recommendations when scaffolding or implementing Fiori Elements applications. File paths and reference links from the original documentation are preserved for direct use in templates and code generation tooling.

**TAGS**: fiori-elements, floorplan, list-report, object-page, analytical-list-page, overview-page, worklist, sapui5

STEP: List Report and Object Page

DESCRIPTION: 
- Use this combined floorplan when you need a master-detail setup: a List Report (table/list with filters and actions) linked to an Object Page (detailed view for viewing, editing, creating objects).
- Typical usage: entity browsing, filtering, selection, and editing workflows.
- Actionable guidance for code generation:
  - Choose the "List Report" template when scaffolding apps that require filtering and tabular presentation of entities.
  - Add an "Object Page" subview for detailed object CRUD operations.
- Preserved references (use these links/paths when generating README or templates in your project).

LANGUAGE: Markdown

CODE:
```markdown
- Documentation: list-report-and-object-page-c0eec49.md
- Image (List Report): images/Using_SAP_Fiori_Elements_Floorplans_List_Report_3e93d0e.png
- Image (Object Page): images/Using_SAP_Fiori_Elements_Floorplans_Object_Page_563b849.png
```

STEP: Analytical List Page (ALP)

DESCRIPTION:
- Use the Analytical List Page when your app requires interactive data analysis: charts, KPIs, filters, and drilldowns combined with transactional actions.
- Typical usage: dashboards that allow investigation and action on data (drilldown, filter, act).
- Actionable guidance for code generation:
  - Select the "Analytical List Page" template for apps that need charting and KPI controls integrated with a list.
  - Ensure your OData/service metadata supports analytical annotations and chart configuration.
- Preserved references for templates and assets.

LANGUAGE: Markdown

CODE:
```markdown
- Documentation: analytical-list-page-3d33684.md
- Image: images/Using_SAP_Fiori_Elements_Floorplans_Analytical_List_Page_897c8d0.png
```

STEP: Overview Pages

DESCRIPTION:
- Use an Overview Page to present large amounts of data in a card-based, data-driven layout for quick insights and actions.
- Typical usage: executive or role-based landing pages displaying multiple card types (lists, charts, numeric highlights).
- Actionable guidance for code generation:
  - Choose the "Overview Page" template to scaffold a card-driven UI.
  - Map each card to an annotation or a service endpoint; group cards by intent/role.
- Preserved references for templates and assets.

LANGUAGE: Markdown

CODE:
```markdown
- Documentation: overview-pages-c64ef8c.md
- Image: images/Using_SAP_Fiori_Elements_Floorplans_Overview_Page_e83a616.png
```

STEP: Worklist

DESCRIPTION:
- Use the Worklist floorplan when users process a collection of items with minimal filtering and need to complete or delegate work items.
- Typical usage: task lists, inbox-style processing screens.
- Actionable guidance for code generation:
  - Select the "Worklist" template when building straightforward item-processing UIs.
  - Keep actions and navigation simple; prioritize item detail drilldown and quick operations.
- Preserved references for templates and assets.

LANGUAGE: Markdown

CODE:
```markdown
- Documentation: worklist-d1d588f.md
- Image: images/Using_SAP_Fiori_Elements_Floorplans_Worklist_0393ce6.png
```

STEP: General Guidance & References

DESCRIPTION:
- Generic information that applies across all Fiori Elements floorplans is available in the main How To Use SAP Fiori Elements guide.
- Consult SAPUI5 version and maintenance status when selecting runtime/library versions for your generated app.

LANGUAGE: Markdown

CODE:
```markdown
- How-to guide: how-to-use-sap-fiori-elements-20de950.md
- SAPUI5 versions overview: https://ui5.sap.com/versionoverview.html
```
--------------------------------

**TITLE**: Application Preview Generator — generate integration and adaptive cards for SAP Fiori elements object pages

**INTRODUCTION**: This guide explains how to enable and use the Application Preview Generator in SAP Business Application Studio for SAP Fiori elements projects (ABAP-based). It covers prerequisites, required configuration edits, commands to install the cards editor, how to launch the generator, the artifacts produced (files and manifest changes), and the card-dialog features you can configure.

**TAGS**: fiori-elements-framework, sap-ui5, ui5-cli, cards-editor, cards, adaptive-card, integration-card, ABAP, sap-business-application-studio

STEP: Restriction and Notes
DESCRIPTION: Quick reminder of limitations and default behavior.
LANGUAGE: text
CODE:
```
Restriction:
- Application preview cards can only be generated for object pages.
- The application preview generator is only available for ABAP-based projects.

Note:
- Integration cards are displayed by default on the UI.
- Adaptive cards are generated concurrently and can be chosen instead of the integration card.
```

STEP: Prerequisites
DESCRIPTION: Confirm the project and environment prerequisites before enabling the Application Preview Generator.
LANGUAGE: text
CODE:
```
- Project cloned inside SAP Business Application Studio.
- Project compatible with UI5 CLI v3. If not, migrate it to work in SAP Business Application Studio.

Migration references:
- UI5 CLI v3 migration: https://ui5.github.io/cli/v3/updates/migrate-v3/
- SAP Fiori project migration (Web IDE -> BAS): https://community.sap.com/t5/technology-blogs-by-sap/migrate-sap-fiori-projects-from-sap-web-ide-to-sap-business-application/ba-p/13544987
```

STEP: Optional — include SAP icons stylesheet (UI preview)
DESCRIPTION: If your local preview or card styling relies on SAP icons, include the stylesheet reference in your webapp where needed.
LANGUAGE: HTML
CODE:
```html
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```

STEP: Enable the Application Preview Generator (ui5.yaml update)
DESCRIPTION: Ensure UI5 loads from the official CDN. Update the ui5.yaml file in the project root to set the ui5 url to https://ui5.sap.com and configure the fiori-tools-proxy and sap-fe-mockserver middleware as shown. This ensures the local preview uses the latest SAP UI5 distribution.
LANGUAGE: js
CODE:
```js
specVersion: "3.1"
metadata:
  name: sales-order.wd.sample
type: application
resources:
  configuration:
    paths:
      webapp: webapp
server:
  customMiddleware:
  - name: fiori-tools-proxy
    afterMiddleware: compression
    configuration:
      ignoreCertError: false
      ui5:
        path:
        - /resources
        - /test-resources
        url: https://ui5.sap.com
  - name: sap-fe-mockserver
    mountPath: /
    afterMiddleware: compression
    configuration:
      annotations:
      - localPath: './mockserver/sap/opu/odata/sap/salesorder/annotations.xml'
        urlPath: '/sap/opu/odata/sap/salesorder;v=2/Annotations*'
      services:
      - urlPath: '/sap/opu/odata/sap/salesorder'
        metadataPath: './mockserver/sap/opu/odata/sap/salesorder/metadata.xml'
        mockdataPath: './mockserver/sap/opu/odata/sap/salesorder/data/'
```

STEP: Install the cards editor (add generator tooling)
DESCRIPTION: From a terminal in the desired project location run one of these commands to add the cards editor tool to your project. Use npx or npm init depending on your setup.
LANGUAGE: bash
CODE:
```bash
# Option 1 (npx)
npx @sap-ux/create@latest add cards-editor

# Option 2 (npm init)
npm init @sap-ux@latest add cards-editor
```

STEP: Launch the card generator (run and use in UI)
DESCRIPTION: Start the project with the card generator runtime, navigate to the object page you want to generate a card for, and use the in-app "Generate Card" action.
LANGUAGE: bash
CODE:
```bash
# Start the project with the cards generator
npm run start-cards-generator
```
DESCRIPTION (continued):
```
- If your app landing page is a list report, apply filters or search to open the target object page.
- Open the user menu and choose "Generate Card".
- Fill the dialog fields (header, content, actions, advanced settings). A live preview shows both the Integration Card and the Adaptive Card side-by-side.
- When ready, choose Save to create and persist the card artifacts in the project.
```

STEP: Artifacts created — cards folder and manifest update
DESCRIPTION: After saving a generated card the tool creates a cards folder under webapp and updates manifest.json to link the card. The generator overwrites previously generated cards with the same ID. Merge the changed files to your repository after verifying local changes.
LANGUAGE: js
CODE:
```text
# Created folder:
webapp/cards/

# Example manifest.json entry added/updated:
"sap.cards.ap": {
  "embeds": {
    "ObjectPage": {
      "default": "C_STTA_SalesOrder_WD_20",
      "manifests": {
        "C_STTA_SalesOrder_WD_20": [
          {
            "localUri": "cards/op/C_STTA_SalesOrder_WD_20"
          }
        ]
      }
    }
  }
}
```

STEP: Post-generation repository actions
DESCRIPTION: After adding/generating cards:
LANGUAGE: text
CODE:
```
- The generator overwrites an existing card with the same name if regenerated.
- Review and merge all changed files in your project repository (commit/merge) so the new 'webapp/cards' files and manifest changes are tracked and shared.
```

STEP: Card Generator Dialog — configurable features (actionable list)
DESCRIPTION: Configure these elements when editing a card in the generator dialog. Use these settings to control what the integration/adaptive cards display and how values are formatted.
LANGUAGE: text
CODE:
```
Card Header:
- Add Title, Subtitle, and Main Indicator (primary display line(s)).

Card Content:
- Add properties into groups.
- Change labels and property order.
- Format property values and select which properties appear in the card content.

Card Actions:
- Add import-based actions (footer actions) for adaptive cards.
- Recipients (e.g., in Microsoft Teams) can execute these actions from within the chat.

Advanced Panel (applies globally to selected card properties):
- Set Criticality assignments (e.g., Positive/Negative/Critical).
- Apply Units of Measure (UoM) to string or number properties.
- Configure Text Arrangements for property display.

More (per-property additional options):
- Apply Units of Measure: for string or number types.
- Apply Formatter:
  - Date Type: choose date/time formatting, date only vs date+time, enable/disable UTC, relative date formatting.
    Reference: Date Format options — https://sapui5.hana.ondemand.com/#/topic/91f2eba36f4d1014b6dd926db0e91070
  - Number Type: format as Float, Currency, Percent, or Integer.
- Apply Criticality: color/status mapping based on value.
- Apply Trend: add trend indicators for numeric or string properties.
- Apply Indicators: visual indicators for numeric/string properties.
```

STEP: Additional notes for developers
DESCRIPTION: Quick actionable reminders and links.
LANGUAGE: text
CODE:
```
- The generator is only supported for object pages in ABAP-based Fiori elements apps.
- Ensure ui5.yaml uses `url: https://ui5.sap.com` so the preview uses latest UI5.
- If you need to migrate your project for UI5 CLI v3 compatibility, follow the UI5 v3 migration guide.
```
--------------------------------

**TITLE**: Using the Condensed Table Layout in SAP Fiori Elements (manifest.json)

**INTRODUCTION**: Apply a condensed content density to grid tables (sap.ui.table) in list report and object page SAP Fiori Elements apps by setting the condensedTableLayout flag in the manifest.json for the relevant section. This reduces row height and produces a compact table rendering when the application runs in compact mode.

**TAGS**: fiori-elements-framework, condensed, table, manifest.json, sap.ui.table, grid table, OData V2, OData V4, Object Page, List Report

**STEP**: 1 — Preconditions and constraints

**DESCRIPTION**: Before applying condensedTableLayout, confirm these constraints so the setting takes effect:
- Condensed mode applies only to grid tables (sap.ui.table). It does not apply to responsive tables (sap.m.Table).
- The application must be running in compact mode. If the app runs in cozy mode, the condensed class is not applied even if the manifest key is true.
- On Object Page: the condensedTableLayout class is applied only when there is exactly one section containing a grid table (sap.ui.table), or when an icon tab bar is used for navigation between sections and each section that should be condensed contains only one table. If these conditions are not met, the class will not be applied even if the manifest key is true.

**LANGUAGE**: text

**CODE**:
```text
Notes:
- Applies only to grid tables (sap.ui.table), not to responsive tables (sap.m.table).
- Requires the application to run in compact mode; in cozy mode the class will not be set.
- On Object Page: condensedTableLayout is applied only if there is just one section with a grid table, or if an icon tab bar is used and any section has only one table. Otherwise the class is not applied.
```

**STEP**: 2 — Apply condensedTableLayout in OData V2 (Object Page)

**DESCRIPTION**: Edit the manifest.json for the Object Page entry of the target entity. Under component.settings.sections for the Object Page component, set "condensedTableLayout": true for the section that contains the grid table. The example below shows a manifest fragment for an Object Page section using condensedTableLayout.

**LANGUAGE**: JSON

**CODE**:
```json
"ObjectPage|STTA_C_MP_Product": {
                                        "entitySet": "STTA_C_MP_Product",
                                        "component": {
                                               "name": "sap.suite.ui.generic.template.ObjectPage",
                                               "settings": {
                                                     "sections": {
                                                             "to_ProductText::com.sap.vocabularies.UI.v1.LineItem": {
                                                                   "condensedTableLayout": true,
                                                            }
                                                     }
                                               }
                                        }

```

**STEP**: 3 — Apply condensedTableLayout in OData V4 (Object Page / Component descriptor)

**DESCRIPTION**: For OData V4 and SAP Fiori elements (FE) templates, set condensedTableLayout in the component options controlConfiguration for the LineItem annotation path. The snippet below shows a Component descriptor fragment where tableSettings specify a GridTable and condensedTableLayout: true.

**LANGUAGE**: JSON

**CODE**:
```json
"SalesOrderManageObjectPageCondensedTable": {
	"type": "Component",
	"id": "SalesOrderManageObjectPage",
	"name": "sap.fe.templates.ObjectPage",
	"options": {
		"settings": {
			"contextPath": "/SalesOrderManage",
			...
			},
			"controlConfiguration": {
				"_Item/@com.sap.vocabularies.UI.v1.LineItem": {
					"tableSettings": {
						"type": "GridTable",
						"condensedTableLayout": true,
					}
				}
			}
		}
}
```
--------------------------------

**TITLE**: Configure and Use the Export Button (Spreadsheet & PDF) in SAP Fiori elements (OData V4)

**INTRODUCTION**: This document explains how to enable/disable the Export button, configure spreadsheet export behavior (columns, file/sheet names, export settings), enable PDF export via service annotations, and set request-size limits for exports. Use these steps to modify manifest.json, service annotations, and table settings to control how table data is exported.

**TAGS**: fiori-elements-framework, sapui5, manifest.json, export, spreadsheet, pdf, table-settings, controlConfiguration, LineItem, exportSettings

**STEP**: 1 — Enable / Disable Export Button in manifest.json

**DESCRIPTION**: Toggle the Export button per page or per LineItem using the controlConfiguration tableSettings -> enableExport property in manifest.json. Use false to disable and true to enable. Include contextPath and the relevant target component (ListReport or ObjectPage).

**LANGUAGE**: JSON

**CODE**:
```json
"SalesOrderManageList": {
   "type": "Component",
   "id": "SalesOrderManageList",
   "name": "sap.fe.templates.ListReport",
   "options": {
      "settings": {
         "contextPath": "/SalesOrderManage",
         "controlConfiguration": {
            "@com.sap.vocabularies.UI.v1.LineItem": {
               "tableSettings": {
                  "enableExport": false
               },
            }
         }
      }
   }
},
"SalesOrderManageObjectPage": {
   "type": "Component",
   "id": "SalesOrderManageObjectPage",
   "name": "sap.fe.templates.ObjectPage",
   "options": {
      "settings": {
         "contextPath": "/SalesOrderManage",
         "controlConfiguration": {
            "_Item/@com.sap.vocabularies.UI.v1.LineItem": {
               "tableSettings": {
                  "enableExport": true
               },
            }
         }
      }
   }
},
```

**STEP**: 2 — Export Menu Behavior and Options (User Actions)

**DESCRIPTION**: The Export toolbar icon triggers export with default settings. The drop-down exposes:
- Export: exports table immediately with default settings.
- Export As...: opens dialog to configure:
  - Split cells with multiple values: exports multiple-value cells into multiple columns (cases: amount+unit, price+currency, code+description for Text annotations, DataPoint target values, FieldGroup properties, custom columns with properties).
  - Include filter settings: adds current filters on a second sheet in the export file.

Restrictions and effects to consider:
- Columns with DataFieldForAnnotation pointing to Charts or DataFieldForAction export empty.
- Not exported: multi-input (1:n) fields, stream media, binary media.
- Columns with dynamic UI.Hidden expressions are still exported.
- Numbers > 15 digits get rounded (JS limitation).
- Sensitive data annotated with PersonalData.IsPotentiallySensitive: consider disabling export to avoid unintended data exposure.

**LANGUAGE**: None

**CODE**:
```text
(No code in this step — user actions and behavior descriptions.)
```

**STEP**: 3 — Configure Export Columns: exportSettings and Column Properties

**DESCRIPTION**: Use exportSettings under controlConfiguration -> Columns in manifest.json to control how each column is exported. You can exclude columns with disableExport under columns. Set file and sheet names with tableSettings.exportFileName and tableSettings.exportSheetName (max 31 characters, truncated if longer).

Supported exportSettings properties (use in exportSettings object):

- type: data type. If omitted, treated as string. See sap.ui.export.EdmType.
- property: a field name or array of field names from the data source.
- template: formatting template with indexed placeholders (e.g., "{0} {1}").
- width: column width in characters (default 10).
- wrap: boolean for content wrapping.
- label: column header text.
- textAlign: Left, Right, Center, Begin, End (defaults based on type).
- trueValue: string representation for Boolean true.
- falseValue: string representation for Boolean false.
- valueMap: mapping object for Enumeration type; set type to "Enumeration" when using valueMap.

To exclude a column from export, set disableExport: true in the column entry.

**LANGUAGE**: None

**CODE**:
```text
(No code in this step — property reference for exportSettings.)
```

**STEP**: 4 — Example manifest.json: exportFileName, exportSheetName, column exportSettings, disableExport, custom column with properties

**DESCRIPTION**: Sample manifest fragment showing personalization and file/sheet naming, per-column exportSettings including Enumeration/valueMap, Boolean true/false mapping, disabling export for a column, and a CustomColumn that defines properties (required to export custom columns).

**LANGUAGE**: JSON

**CODE**:
```json
"controlConfiguration": {
    "@com.sap.vocabularies.UI.v1.LineItem": {
        "tableSettings": {
            "personalization": true,
            "exportFileName": "Name of the file to be exported",
            "exportSheetName": "Name of the sheet to be exported"
        },
        "columns": {
            "DataField::Shipping": {
                "exportSettings":
                {
                    "template": "{0}",
                    "width": "5",
                    "type": "Enumeration",
                    "label": "New Column header for export",
                    "textAlign": "Center",
                    "valueMap": {
                        "A":"Standard Shipping",
                        "B":"Premium Shipping",
                        "C":"Express Shipping"
                    }
                }
            },
            "DataField::Delivered": {
                "exportSettings":
                {
                    "template": "{0}",
                    "width": "5",
                    "type": "Boolean",
                    "textAlign": "Right",
                   	"trueValue": "Yes",
                   	"falseValue": "No"
                }
            },
            "DataField::Delivered": {
                "disableExport": true
            },
            "CustomColumnSorting":{
                "header": " {i18n > LRCustomColumnSorting}",
                "template": "SalesOrder.custom.CustomColumn.CustomColumnSorting",
                "properties": [
                    "ID",
                    "TotalNetAmount",
                    "_CustomerPaymentTerms/CustomerPaymentTerms",
                    "_ShipToParty/BusinessPartner"
                ],
                "exportSettings":
                {
                    "property": ["ID", "TotalNetAmount"],
                    "template": " {0} {1}",
                    "type": "String",
                    "width": "50",
                    "wrap": true
                }
            }
        }
    }
}
```

**STEP**: 5 — Export to PDF: Required Service Annotations

**DESCRIPTION**: To enable PDF export, configure service-level OData annotations. Ensure the service metadata includes these annotations:
- @Org.OData.Capabilities.V1.SupportedFormats must contain "application/pdf".
- @com.sap.vocabularies.PDF.v1.Feature must be configured as required by the PDF vocab (see GitHub vocab link).

Reference for PDF annotation vocabulary: https://github.com/SAP/odata-vocabularies/blob/main/vocabularies/PDF.md

**LANGUAGE**: None

**CODE**:
```text
(No code in this step — configure service-level annotations in OData metadata)
```

**STEP**: 6 — Set exportRequestSize (Limit for Records Per Request)

**DESCRIPTION**: Configure exportRequestSize in tableSettings (manifest.json) to set the maximum number of records fetched in a single export request. Default is 1000 for responsive and grid tables. Analytical and tree tables have no default. Adjust exportRequestSize based on data shape and performance testing.

**LANGUAGE**: JSON

**CODE**:
```json
{
	"sap.ui5": {
		"routing": {
			"targets": {
				"SalesOrderManageList": {
					"options": {
						"settings": {
							"controlConfiguration": {
								"@com.sap.vocabularies.UI.v1.LineItem": {
									"tableSettings": {
										"exportRequestSize":3000
									}
								}
							}
						}
					}
				}
			}
		}
	}
}
```

**STEP**: 7 — Important Notes and Restrictions (Security & Export Limitations)

**DESCRIPTION**: Keep these constraints in mind when implementing export features:
- Sensitive data: If model contains PersonalData.IsPotentiallySensitive, disable export to avoid uncontrolled data exfiltration.
- Not exported: multi-input (1:n) fields, stream media, binary media.
- DataFieldForAnnotation -> Charts or DataFieldForAction: exported as empty cells.
- Columns with dynamic UI.Hidden expressions are still exported.
- Number precision: numbers > 15 digits are rounded in exported spreadsheets (JavaScript limitation).
- File/sheet name length limit: 31 characters (truncated if longer).
- For custom columns to be exported, include the "properties" array in the custom column definition (these properties are exported like FieldGroup members).
- Performance: analytical/hierarchical exports do not scale linearly—test and adjust exportRequestSize.

**LANGUAGE**: None

**CODE**:
```text
(No code in this step — operational notes and restrictions.)
```
--------------------------------

**TITLE**: Using the extensionAPI (Fiori elements — List Report, Object Page, Analytical List Page)

**INTRODUCTION**: How to access and use the template-provided extensionAPI from controller extension hooks and view extension event handlers. Covers OData V2 (controller.extensionAPI) and OData V4 (this.getExtensionAPI()), warnings about private APIs, example for onAfterActivate, and usage of invokeActions including parameter details.

**TAGS**: extensionAPI, Fiori-elements, ListReport, ObjectPage, AnalyticalListPage, ODataV2, ODataV4, invokeActions, UI5

**STEP**: 1 — Access extensionAPI (OData V2)
**DESCRIPTION**: From a controller in a Fiori elements app using OData V2, use controller.extensionAPI to access template-provided services. Do not access internal controller members (names starting with '_') or manipulate framework-internal controls/models. Do not create instances of classes in the sap.suite.ui.generic.template namespace. The exact class names may change; rely on the documented methods instead.
- Typical instance names (do not rely on these names in production code; rely on methods):
  - List Report: sap.suite.ui.generic.template.ListReport.extensionAPI.ExtensionAPI
  - Object Page: sap.suite.ui.generic.template.ObjectPage.extensionAPI.ExtensionAPI
  - Analytical List Page: sap.suite.ui.generic.template.AnalyticalListPage.extensionAPI.ExtensionAPI
- Reference docs:
  - ExtensionAPI: https://ui5.sap.com/#/api/sap.suite.ui.generic.template.extensionAPI.extensionAPI
  - ListReport ExtensionAPI: https://ui5.sap.com/#/api/sap.suite.ui.generic.template.ListReport.extensionAPI.ExtensionAPI
  - ObjectPage ExtensionAPI: https://ui5.sap.com/#/api/sap.suite.ui.generic.template.ObjectPage.extensionAPI.ExtensionAPI

**LANGUAGE**: JavaScript
**CODE**:
```javascript
// Example: access extensionAPI in a controller (OData V2)
onInit: function() {
    // 'this' is the controller instance
    var oExtensionAPI = this.extensionAPI;
    // Use oExtensionAPI methods (do not access private controller members or framework internals)
}
```

**STEP**: 2 — Example: onAfterActivate handler (exact sample)
**DESCRIPTION**: Preserve sample implementation for handling activation completion. This sample uses the activationPromise provided in the event to wait for successful back-end activation before sending an email on critical price change. Keep the code intact if reused.
**LANGUAGE**: JavaScript
**CODE**:
```javascript
/*
 * Assumed use case: When the price is changed to a critical value (more than 1000), an email should be generated and sent.
 * This should not happen for changes to the draft but only after activation has been successfully processed in the
 * back-end system.
 */
				
 (function() {
	"use strict";
				
	function onAfterActivate(oEvent) {
		/*
		* AfterActivate event is raised at the end of front-end processing for activation. The object handed into the
		* handler contains a promise that is resolved after a successful response from the back-end system.
		*/
		oEvent.activationPromise.then(function(oResponse) {
			if (oResponse.data.Price > 1000) {
			sap.m.URLHelper.triggerEmail(null, "critical price change", "changed price of " + oResponse.data.Product_Text
			+ " to " + oResponse.data.Price + " " + oResponse.data.Currency);
			}
		});
	}		
```

**STEP**: 3 — invokeActions (OData V2) — parameters and example usage
**DESCRIPTION**: Use extensionAPI.invokeActions to call an action/function multiple times and submit changes. Returns a Promise. Throws an Error if function import does not exist or input params are invalid.
Parameter summary:
- sFunctionName (string): name of the function or action to call.
- vContext (array | sap.ui.model.Context): binding context(s) for actions.
- mUrlParameters (map) [optional]: URL parameters (name-value pairs) for the function/action. This parameter exists for backward compatibility outside oSettings.
- oSettings (object) [optional]: settings for invocation. Properties:
  - bInvocationGroupingChangeSet (boolean): whether to group invocations in a common or unique changeset.
- returns: Promise that resolves with the asynchronous result of the action(s).

Use-case example: invoke an action for multiple contexts, set a URL parameter, and use grouping.
**LANGUAGE**: JavaScript
**CODE**:
```javascript
// Example: invokeActions usage (OData V2)
var sActionName = "MyNamespace.MyAction"; // function/action name
var aContexts = [oContext1, oContext2]; // array of binding contexts or a single sap.ui.model.Context
var mUrlParameters = { Param1: "Value1", Param2: "Value2" };
var oSettings = {
    bInvocationGroupingChangeSet: true // or false depending on grouping requirement
};

this.extensionAPI.invokeActions(sActionName, aContexts, mUrlParameters, oSettings)
    .then(function(oResult) {
        // handle success
    })
    .catch(function(oError) {
        // handle error (e.g., function import missing or invalid params)
    });
```

**STEP**: 4 — Access extensionAPI (OData V4)
**DESCRIPTION**: For OData V4-based Fiori elements, call this.getExtensionAPI() from inside the controller to retrieve the template-provided ExtensionAPI. Do not rely on class names; rely on the methods defined in the API.
- Typical instance names (do not hard-code these names):
  - List Report: sap.fe.templates.ListReport.ExtensionAPI
  - Object Page: sap.fe.templates.ObjectPage.ExtensionAPI
- Reference docs:
  - ExtensionAPI (FE V4): https://ui5.sap.com/#/api/sap.fe.core.ExtensionAPI

**LANGUAGE**: JavaScript
**CODE**:
```javascript
// Example: access extensionAPI in a controller (OData V4)
onInit: function() {
    var oExtensionAPI = this.getExtensionAPI();
    // Use oExtensionAPI methods for the current template (ListReport, ObjectPage, etc.)
}
```

**STEP**: 5 — Warnings and best practices (combined)
**DESCRIPTION**: Combine and observe the following rules:
- Do not create instances of classes in the sap.suite.ui.generic.template namespace (not public).
- Do not access private controller members (names starting with '_') or manipulate framework-controlled controls/models.
- Do not rely on the concrete names of extensionAPI classes; method sets are stable and will be extended compatibly.
- Use documented methods on the extensionAPI object returned by controller.extensionAPI (OData V2) or this.getExtensionAPI() (OData V4).
--------------------------------

**TITLE**: Using the Multi-Input Field on the Object Page

**INTRODUCTION**: Action-oriented reference for implementing and configuring the multi-input field on SAP Fiori Elements object pages. Covers defining 1:n associations in the data model, exposing navigation properties in UI annotations, configuring field control (Mandatory/ReadOnly), supporting annotations for OData V4, value help / JSON binding notes, and usage constraints.

**TAGS**: fiori-elements-framework, multi-input, annotations, CDS, CAP, UI5, OData V4, field-control, value-help, draft

**STEP**: 1 — Define a 1:n association in the data model

**DESCRIPTION**: Define a composition/navigation property that models the one-to-many relationship. This association enables the framework to render a multi-input control automatically when used in a DataField.

**LANGUAGE**: ABAP CDS

**CODE**:
```ABAP CDS
composition [0..*] of SupportedMaterial as _SupportedMaterials
```

**LANGUAGE**: CDS

**CODE**:
```CDS
_SupportedMaterials : Composition of many SupportedMaterial on _SupportedMaterials.owner = $self;
```

**STEP**: 2 — Expose the navigation property in the UI to display values

**DESCRIPTION**: Use the navigation property in a UI.DataField to show the target-entity property values (for example, display every associated SupportedMaterial.material). Include these annotations in the LineItem or UI.FieldGroup as required.

**LANGUAGE**: XML

**CODE**:
```XML
<Annotation Term="UI.LineItem">
  <Collection>
    <Record Type="UI.DataField">
      <PropertyValue Property="Value" Path="_SupportedMaterials.Material " />
    </Record>
  </Collection>
</Annotation>
```

**LANGUAGE**: ABAP CDS

**CODE**:
```ABAP CDS
@UI: {  lineItem: [ { value: '_SupportedMaterials.Material', label: 'Supported Materials' } ] }  
@UI.fieldGroup: [{position: 10, qualifier: 'FieldgroupID', value: '_SupportedMaterials.Material'} ]
_SupportedMaterials;
```

**LANGUAGE**: CDS

**CODE**:
```CDS
LineItem : {
	{
		$Type             : 'UI.DataField',
		Label			  : 'Supported Materials',
		Value             : _SupportedMaterials.Material,
	 },
…
}
```

**STEP**: 3 — UI result and image assets

**DESCRIPTION**: The framework renders a multi-input control on the object page when the above annotations are present. Preserve image assets as references for documentation or visual verification.

**LANGUAGE**: text

**CODE**:
```
Image: images/Multi-Input_Control_on_the_Object_Page_d756a5b.png
Image (table): images/Smart_MultiInput_Control_on_the_Object_Page_Table_dcb027c.png
```

**STEP**: 4 — Enable value help and JSON binding

**DESCRIPTION**: To allow users to add or remove existing values in the multi-input, define value help on the target property. You can also bind the values entered into a multi-input field to a JSON model in UI5. Use the SAP Fiori development portal live examples for implementation references.

**LANGUAGE**: text

**CODE**:
```
Tip: Define value help on the target property to add/remove existing values.
Reference: https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/buildingBlocks/field/fieldMultiValueField
Note: Multi-input fields are only supported in draft-enabled applications.
```

**STEP**: 5 — Configure availability and requirement with Common.fieldControl

**DESCRIPTION**: Use Common.FieldControl to make the multi-input read-only or mandatory. The UI shows a red asterisk for Mandatory, but backend validation is required (UI does not enforce server-side checks automatically).

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.FieldGroup" Qualifier="AdditionalInformation">
    <Record Type="UI.FieldGroupType">
        <PropertyValue Property="Data">
            <Collection>
                <Record Type="UI.DataField">
                    <PropertyValue Property="Value" Path="ToItemAvailableColors/ColorName" />
                    <Annotation Term="Common.FieldControl" EnumMember="Common.FieldControlType/Mandatory" />
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

**LANGUAGE**: CDS

**CODE**:
```CDS
annotate RootElement with @UI: {
  FieldGroup #GeneralInformation: {
    Label: 'General Information',
    Data : [
      {Value: ID},
      {
        $Type : 'UI.DataField',
        Value: PropWithUnit,
        ![@Common.FieldControl]: #Mandatory
      }
    ]
  }
};
```

**STEP**: 6 — OData V4: Insert/Delete restrictions and field control options

**DESCRIPTION**: For more granular runtime control, add OData V4 capabilities annotations:
- Use Capabilities.InsertRestrictions on the property/navigation to specify whether new values can be inserted.
- Use Capabilities.DeleteRestrictions on the property/navigation to specify whether values can be deleted.
- Use Common.FieldControl to set ReadOnly or Mandatory as shown above.

Include these annotations on the relevant entity or property in your service metadata/annotations.

**LANGUAGE**: text

**CODE**:
```
Capabilities.InsertRestrictions: use to restrict insert/edit operations for the multi-input field.
Capabilities.DeleteRestrictions: use to restrict delete/removal operations for the multi-input field.
Common.FieldControl: set to Common.FieldControlType/ReadOnly or Common.FieldControlType/Mandatory.
(Apply annotations in your OData V4 metadata/annotation files or service implementation.)
```

**STEP**: 7 — Constraints and recommendations

**DESCRIPTION**: Observe framework constraints:
- Do not use multi-input when you must display more than 100 selected values; use a table instead.
- Multi-input fields are supported only in draft-enabled applications.
- Mandatory field marking (asterisk) does not perform server-side validation — implement required validation in backend logic.

**LANGUAGE**: text

**CODE**:
```
Restriction: Multi-input field is not suitable for >100 selected values — use a table.
Note: Multi-input fields require draft-enabled apps.
Backend: Implement server-side validation for mandatory fields; UI asterisk is visual only.
```

**STEP**: 8 — Related information

**DESCRIPTION**: Link to related documentation or local files.

**LANGUAGE**: text

**CODE**:
```
Related: Tables - tables-c0f6592.md
```
--------------------------------

**TITLE**: Using securedExecution in SAP Fiori elements extensions

**INTRODUCTION**: Use securedExecution to run asynchronous or state-changing extension code in SAP Fiori elements. securedExecution coordinates user interaction state, prevents data loss, and synchronizes operations. Use it for async work, operations that must be serialized with user actions, custom messages, title updates after quick actions, or any code that changes object state (set updatesDocument: true for OData V4).

**TAGS**: sap-fiori, fiori-elements, securedExecution, extensionAPI, odata-v2, odata-v4, async, data-loss

**STEP**: 1 — When to use securedExecution

**DESCRIPTION**: Use securedExecution for extension code that:
- Performs an asynchronous operation.
- Must be synchronized with other user-triggered operations.
- Could cause data loss (relevant to non-draft scenarios in OData V2).
- Displays custom messages to the user.
- Changes the state of the object (for OData V4 set updatesDocument to true).
- Changes the message popup title after a system quick action (OData V2).

**LANGUAGE**: N/A

**CODE**:
```text
No code. Conceptual list of use-cases for securedExecution.
```

**STEP**: 2 — Function contract and execution semantics

**DESCRIPTION**: Implement the operation as a function fnFunction that:
- Is passed to securedExecution.
- Must NOT perform user interactions (no dialogs/prompts inside fnFunction).
- Usually performs async work and therefore MUST return a Promise that resolves when the operation finishes.
- May or may not be executed depending on UI state; if not executed, securedExecution returns a rejected Promise.
- If executed, securedExecution returns the same Promise behavior as fnFunction (resolved/rejected accordingly).

Also note the conditions that may prevent execution (examples):
- Non-draft scenarios (OData V2).
- User is in edit mode.
- User has entered data but not saved.
- The user triggered an action implemented via securedExecution.
- The user clicked Cancel in the dataloss confirmation dialog.

**LANGUAGE**: N/A

**CODE**:
```text
No code. Behavioral and contract requirements for fnFunction and securedExecution.
```

**STEP**: 3 — Basic usage pattern (JavaScript/TypeScript)

**DESCRIPTION**: General pattern: pass fnFunction (returns a Promise) to securedExecution. Handle both success and failure. Do not perform user interactions inside fnFunction.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// 'extensionAPI' is the Fiori elements extension API instance available in the extension context.
// fnFunction must return a Promise and must not interact with the user.

this.extensionAPI.securedExecution(() => {
  // perform asynchronous work and return a Promise
  return new Promise((resolve, reject) => {
    someAsyncOperation()
      .then(result => {
        // process result
        resolve(result);
      })
      .catch(error => {
        // handle error
        reject(error);
      });
  });
})
.then(() => {
  // operation finished successfully
})
.catch((err) => {
  // either fnFunction failed or fnFunction was not executed (e.g., due to unsaved data)
});
```

**STEP**: 4 — OData V4: mark code that updates the document

**DESCRIPTION**: For SAP Fiori elements OData V4, if your custom code changes the object state (updates the document), set updatesDocument to true in the securedExecution call so the framework can treat the operation appropriately.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Example: securedExecution with updatesDocument flag for OData V4.
// The second parameter is an options object; include updatesDocument: true when the fnFunction changes document state.

this.extensionAPI.securedExecution(() => {
  // return a Promise representing the state-changing operation
  return oModel.submitBatch(/* ... */); // example: returns a Promise-like object
}, { updatesDocument: true })
.then(() => {
  // success: document updated
})
.catch((err) => {
  // failed or not executed
});
```

**STEP**: 5 — Important constraints and failure behavior

**DESCRIPTION**:
- fnFunction must not interact with the user (no confirmation dialogs, prompts).
- securedExecution itself returns a Promise:
  - Rejected if fnFunction is not executed for any reason (e.g., unsaved changes).
  - Behaves like fnFunction's returned Promise if fnFunction is executed.
- Use securedExecution to avoid accidental data loss and to synchronize operations with the app lifecycle.

**LANGUAGE**: N/A

**CODE**:
```text
No code. Summary of constraints and securedExecution Promise semantics.
```

**STEP**: 6 — References

**DESCRIPTION**: Official API references for details and exact signatures.

**LANGUAGE**: N/A

**CODE**:
```text
OData V2 API Reference:
https://ui5.sap.com/#/api/sap.suite.ui.generic.template.ListReport.extensionAPI.ExtensionAPI/methods/securedExecution

OData V4 API Reference (Demo Kit):
https://ui5.sap.com/#/api/sap.fe.core.controllerextensions.EditFlow/methods/securedExecution
```
--------------------------------

**TITLE**: Validation of Required Fields in Non-draft (OData V2) Fiori Elements Applications

**INTRODUCTION**: Configure OData InsertRestrictions.RequiredProperties per entity set so that during non-draft object creation the framework validates required fields before sending a create request. If any required property is empty, the framework shows an error in the message popover with a navigation link to the offending field. This applies only to SAP Fiori elements for OData V2.

**TAGS**: fiori-elements-framework, ODataV2, InsertRestrictions, RequiredProperties, annotations, validation, i18n

STEP: 1 — Configure RequiredProperties annotation for the entity set

DESCRIPTION:
- Add the Org.OData.Capabilities.V1.InsertRestrictions annotation to the target entity set in your annotation XML (or service annotations) to list properties that must be filled before create.
- Place this annotation per entity set that requires required-field validation during non-draft creation.
- The framework will validate the listed property paths and block sending the create request if any are empty, showing a message popover entry with navigation to the field.

LANGUAGE: XML

CODE:
```xml
<Annotations Target="STTA_SALES_ORDER_ND_SRV_01.STTA_SALES_ORDER_ND_SRV_01_Entities/STTA_C_SO_SalesOrder_ND">
       <Annotation Term="Org.OData.Capabilities.V1.InsertRestrictions">
                <Record Type="Org.OData.Capabilities.V1.InsertRestrictionsType">
                        <PropertyValue Property="RequiredProperties">
                             <Collection>
                                 <PropertyPath> BusinessPartnerID </PropertyPath>
                                 <PropertyPath> CurrencyCode </PropertyPath>
                             </Collection>
                        </PropertyValue>
                </Record>
        </Annotation>
</Annotations>
```

STEP: 2 — Override default message text for required-field errors

DESCRIPTION:
- To replace the framework default message for a required property, add a custom i18n entry using the pattern: CREATE_MANDATORY|PropertyName = Your custom message.
- Add these entries to your application's i18n properties file (e.g., i18n.properties) so the message popover shows your custom text for the specific property.

LANGUAGE: Properties

CODE:
```properties
# Default framework message example (left as-is or overridden):
# CREATE_MANDATORY|BusinessPartnerID = Enter a value for the Business partner ID field

# Custom message example - override for CurrencyCode
CREATE_MANDATORY|CurrencyCode = Enter a valid currency code
```

STEP: 3 — Behavioral notes and constraints

DESCRIPTION:
- This validation is executed only in non-draft create flows (i.e., standard create without draft handling).
- Required properties configured with InsertRestrictions.RequiredProperties are not validated during "create with dialog" flows.
- When validation fails, the message popover contains an entry for each empty required property and a navigation link that focuses the corresponding UI field.

LANGUAGE: text

CODE:
```
Applicable scope: SAP Fiori elements for OData V2 only.
Validation: Runs before sending the create request; empty listed properties produce message popover errors.
Limitations: No validation for create-with-dialog flows.
```
--------------------------------

**TITLE**: Value Help as a Dropdown or Radio Button List (fixed-value value help)

**INTRODUCTION**: This guide shows how to render a value help as a dropdown list (sap.m.ComboBox / sap.m.MultiComboBox) or as a radio button group in SAP Fiori Elements when the value help has a fixed, stable set of values. It includes metadata/annotation samples for OData V2, OData V4 (XML), ABAP CDS, and CAP CDS, plus FilterRestrictions and manifest.json configuration for radio buttons.

**TAGS**: fiori-elements-framework, value-help, dropdown, combobox, radiobuttons, annotations, OData V2, OData V4, ABAP CDS, CAP CDS, manifest.json

STEP: Configure fixed-value dropdown for OData V2

DESCRIPTION: On the OData V2 service metadata, mark the EntitySet with sap:semantics="fixed-values" and the Property with sap:value-list="fixed-values" to render the property as a dropdown (sap.m.ComboBox or sap.m.MultiComboBox for multi-selection).

LANGUAGE: XML

CODE:
```xml
$metadata

<EntityType Name="SMART_C_ProductType" sap:label="Product" sap:content-version="1">
    <Key>
        ...
    </Key>
    ...
    <Property 
        Name="ProductCategory" 
        Type="Edm.String" 
        Nullable="false" 
        MaxLength="40" 
        sap:label="Category" 
        sap:value-list="fixed-values" />
    ...
</EntityType>

<EntityContainer 
    Name="SMART_PROD_MAN_Entities" 
    m:IsDefaultEntityContainer="true" 
    sap:supported-formats="atom json xlsx">
    ...
    <EntitySet 
        Name="SEPMRA_I_ProductCategory" 
        EntityType="SMART_PROD_MAN.SEPMRA_I_ProductCategoryType"
        sap:creatable="false" 
        sap:updatable="false" 
        sap:deletable="false" 
        sap:searchable="true" 
        sap:content-version="1" 
        sap:semantics="fixed-values" />
</EntityContainer>
```

STEP: Configure fixed-value dropdown for OData V4 — XML Annotations (Example: currency_code)

DESCRIPTION: Use Common.ValueListWithFixedValues = true on the property annotation and supply a Common.ValueList record with CollectionPath and Parameters to bind the fixed list.

LANGUAGE: XML

CODE:
```xml
<Annotations Target="sap.fe.officesupplies.CatalogAdminService.Products/currency_code">
   <Annotation Term="Common.Label" String="Currency"/>
   <Annotation Term="Common.Text" Path="currency/name">
      <Annotation Term="UI.TextArrangement" EnumMember="UI.TextArrangementType/TextOnly"/>
   </Annotation>
   <Annotation Term="Common.ValueListWithFixedValues" Bool="true"/>
   <Annotation Term="Common.ValueList">
     <Record Type="Common.ValueListType">
       <PropertyValue Property="Label" String="Currency"/
       <PropertyValue Property="CollectionPath" String="Currencies"/>
       <PropertyValue Property="Parameters">
         <Collection>
            <Record Type="Common.ValueListParameterInOut">
               <PropertyValue Property="LocalDataProperty" PropertyPath="currency_code"/>
               <PropertyValue Property="ValueListProperty" String="code"/>
            </Record>
            <Record Type="Common.ValueListParameterDisplayOnly">
               <PropertyValue Property="ValueListProperty" String="name"/>
            </Record>
         </Collection>
      </PropertyValue>
    </Record>
   </Annotation>
   <Annotation Term="Core.Description" String="A currency code as specified in ISO 4217"/>
</Annotations>
```

STEP: Configure fixed-value dropdown — ABAP CDS annotation (currency_code)

DESCRIPTION: Use @Consumption.valueHelpDefinition and @ObjectModel.text to define the value help and text element for the property in ABAP CDS.

LANGUAGE: ABAP CDS

CODE:
```
annotate view PRODUCTS with {
	@Consumption.valueHelpDefinition:
	[{
	  entity :{
		 name    : 'Currencies',
		 element : 'code'
		},
	    label  : 'Currency'
	}]

	@ObjectModel: {
		text: {
			element: [ 'name' ]
		 }
	}
	@UI.textArrangement: #TEXT_ONLY
   currency_code;
}
```

STEP: Configure fixed-value dropdown — CAP CDS annotation (currency_code)

DESCRIPTION: In CAP CDS, annotate the service/view property with @Common.ValueListWithFixedValues:true and @Common.ValueList describing the collection and parameters.

LANGUAGE: CAP CDS

CODE:
```
annotate sap.fe.officesupplies.CatalogAdminService.Products with {
    @Common.Label : 'Currency'
    @Common : {
        Text            : currency.name,
        TextArrangement : #TextOnly
    }
    @Common.ValueListWithFixedValues : true
    @Common.ValueList : {
        $Type : 'Common.ValueListType',
        Label : 'Currency',
        CollectionPath : 'Currencies',
        Parameters : [
            {
                $Type : 'Common.ValueListParameterInOut',
                LocalDataProperty : currency_code,
                ValueListProperty : 'code'
            },
            {
                $Type : 'Common.ValueListParameterDisplayOnly',
                ValueListProperty : 'name'
            }
        ]
    }
    @Core.Description : 'A currency code as specified in ISO 4217'
    currency_code
};
```

STEP: Configure FilterRestrictions (AllowedExpressions) — XML

DESCRIPTION: Use SAP__capabilities.FilterRestrictions to restrict filter expression types (e.g., MultiValue) for a property so that dropdown multi-selection/filtering is allowed.

LANGUAGE: XML

CODE:
```xml
<Annotation Term="SAP__capabilities.FilterRestrictions">
    <Record>
       <PropertyValue Property="FilterExpressionRestrictions">
         <Collection>
            <Record>
               <PropertyValue Property="Property" PropertyPath="currency_code" />
               <PropertyValue Property="AllowedExpressions" String="MultiValue" />
            </Record>
	 </Collection>
       </PropertyValue>
    </Record> 
</Annotation>
```

STEP: Configure FilterRestrictions — ABAP CDS example

DESCRIPTION: Example showing ABAP CDS syntax related to filter capabilities (original snippet shows disabling filter for the property).

LANGUAGE: ABAP CDS

CODE:
```
@ObjectModel: { 
    filter.enabled: false 
}
currency_code;
```

STEP: Configure FilterRestrictions — CAP CDS example

DESCRIPTION: CAP CDS syntax to set FilterRestrictions and AllowedExpressions for a property (MultiValue).

LANGUAGE: CAP CDS

CODE:
```
Capabilities.FilterRestrictions : {
    FilterExpressionRestrictions : [
        {
            Property : currency_code,
            AllowedExpressions : 'MultiValue'
        }
    ]
}
```

STEP: Render value help as radio button group via XML annotation (show immediately)

DESCRIPTION: Use Common.ValueListWithFixedValues with nested Common.ValueListShowValuesImmediately true to render the fixed-value list immediately as a radio button group (vertical layout by default). Ensure ValueListParameterInOut LocalDataProperty refers to the property itself.

LANGUAGE: XML

CODE:
```
<Annotations Target="sap.fe.core.ValueHelpRadioButtons.RootElement/PropWithValueList">
  <Annotation Term="Common.Label" String="Radio button field via annotation"/>
  <Annotation Term="Common.ValueListWithFixedValues" Bool="true">
    <Annotation Term="Common.ValueListShowValuesImmediately" Bool="true"/>
  </Annotation>
  <Annotation Term="Common.ValueList">
    <Record Type="Common.ValueListType">
      <PropertyValue Property="Label" String="Value list with fixed values"/>
      <PropertyValue Property="CollectionPath" String="FixedValueListEntity"/>
      <PropertyValue Property="Parameters">
        <Collection>
          <Record Type="Common.ValueListParameterInOut">
            <PropertyValue Property="LocalDataProperty" PropertyPath="PropWithValueList"/>
            <PropertyValue Property="ValueListProperty" String="KeyProp"/>
          </Record>
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

STEP: CAP CDS sample for radio button group via annotation

DESCRIPTION: Define a field with ValueListWithFixedValues and ValueListShowValuesImmediately in CAP CDS and a backing FixedValueListEntity.

LANGUAGE: CAP CDS

CODE:
```
FieldWithRadioButtons  : String @(Common: {
		ValueListWithFixedValues                                       : true,
		ValueListWithFixedValues.@Common.ValueListShowValuesImmediately: true,
		ValueList                                                      : {
			CollectionPath: 'FixedValueListEntity',
			Parameters    : [
				{
					$Type            : 'Common.ValueListParameterInOut',
					LocalDataProperty: FieldWithRadioButtons,
					ValueListProperty: 'KeyProp'
				}
			]
		}
});

@cds.autoexpose
entity FixedValueListEntity {
		key KeyProp     : Integer @Common.Text : Description;
			Description : String
}
```

STEP: Radio button group via manifest.json (horizontal layout) — XML annotation + CAP CDS + manifest.json

DESCRIPTION: To render radio buttons using manifest configuration, add the field's ValueList annotations (ValueListWithFixedValues true) and configure controlConfiguration.formatOptions.fieldEditStyle to "RadioButtons" and radioButtonsHorizontalLayout true in the manifest.json. Use CAP CDS or local annotations for the value list data source.

LANGUAGE: XML

CODE:
```
<Annotations Target="sap.fe.core.ValueHelpRadioButtons.RootElement/PropWithValueList">
  <Annotation Term="Common.Label" String="Radio button field via annotation"/>
  <Annotation Term="Common.ValueListWithFixedValues" Bool="true">
  </Annotation>
  <Annotation Term="Common.ValueList">
    <Record Type="Common.ValueListType">
      <PropertyValue Property="Label" String="Value list with fixed values"/>
      <PropertyValue Property="CollectionPath" String="FixedValueListEntity"/>
      <PropertyValue Property="Parameters">
        <Collection>
          <Record Type="Common.ValueListParameterInOut">
            <PropertyValue Property="LocalDataProperty" PropertyPath="PropWithValueList"/>
            <PropertyValue Property="ValueListProperty" String="KeyProp"/>
          </Record>
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

LANGUAGE: CAP CDS

CODE:
```
FieldWithRadioButtonsViaManifest  : String @(Common: {
		ValueListWithFixedValues    : true,
		ValueList                   : {
			CollectionPath: 'FixedValueListEntity',
			Parameters    : [
				{
					$Type            : 'Common.ValueListParameterInOut',
					LocalDataProperty: FieldWithRadioButtonsViaManifest,
					ValueListProperty: 'KeyProp'
				}
			]
		}
});

@cds.autoexpose
entity FixedValueListEntity {
key KeyProp     : Integer @Common.Text : Description;
    Description : String
}

UI.FieldGroup #MyFieldGroup : {
    Label: 'Line item data',
    Data : [
      {Value: FieldWithRadioButtonsViaManifest}
	]
}
```

LANGUAGE: JSON

CODE:
```
...
"controlConfiguration": {
	"@com.sap.vocabularies.UI.v1.FieldGroup#MyFieldGroup": {
		"fields": {
			"DataField::FieldWithRadioButtonsViaManifest": {
				"formatOptions": {
					"fieldEditStyle"              : "RadioButtons",
					"radioButtonsHorizontalLayout": true
				}
			}
		}
	}
}
...
```

STEP: Notes, tips and restrictions (actions to follow)

DESCRIPTION: Keep these operational rules and recommendations available when implementing fixed-value dropdowns or radio buttons.

LANGUAGE: Plain Text

CODE:
```
- Use ValueListWithFixedValues : true and a proper Common.ValueList record (CollectionPath + Parameters) to render fixed-value dropdowns.
- Radio buttons:
  - Require ValueListWithFixedValues : true and a ValueList annotation.
  - ValueListParameterInOut or ValueListParameterOut must reference the property itself via LocalDataProperty.
  - Labels come from Common.Text or from ValueListParameterInOut/Out; TextArrangement is not supported.
  - Supported only for non-Boolean value lists.
  - Not recommended for non-mandatory fields (default selection behavior).
  - Recommended only for value lists with <= 8 values.
- Restrictions:
  - Radio buttons do not support multiple value lists or ValueListRelevantQualifiers.
  - Radio buttons must not be used for value lists with dependencies defined by ValueListParameterInOut or ValueListParameterIn.
  - Radio buttons ignore ValueListParameterConstant filters (all values displayed).
- Text handling and sorting for dropdowns follow the Value Help Dialog logic.
- Fixed-value value help does not show recently entered values (see Field Help > History of Recently Entered Values).
- To allow multi-value filtering behavior, set FilterRestrictions.FilterExpressionRestrictions.AllowedExpressions to 'MultiValue' (or 'SingleValue').
```
--------------------------------

**TITLE**: Value Help Dialog — Actionable Annotation Guide for Code Generation

**INTRODUCTION**: This document describes how to configure a Value Help Dialog (VHD) for Fiori Elements using annotations. It is focused on actionable, code-oriented instructions for implementing titles, multiple variants, filter fields, search behavior, table behavior (load, text handling, sorting), hierarchical display, caching, and define-conditions using XML, ABAP CDS, and CAP CDS annotations. Preserve code snippets and file references for direct use.

**TAGS**: fiori-elements-framework, annotations, Common.ValueList, Common.ValueListMapping, SelectionFields, FetchValues, Capabilities.SearchRestrictions, SearchSupported, UI.PresentationVariant, Common.Text, ValueListParameterConstant, RecursiveHierarchyQualifier, caching, DefineConditions

STEP: 1 — Title selection for Value Help Dialog
DESCRIPTION: Determine and generate the dialog title in annotation-based metadata. Follow this fallback order programmatically when generating the title:
- If DataField on the property includes label -> use it.
- Else use Common.Label annotation on the property.
- Else use label in Common.ValueList or Common.ValueListMapping.
- For context-dependent value help (Common.ValueListRelevantQualifiers) prefer the label in the Common.ValueList/Mapping; then Common.Label; then DataField label.
LANGUAGE: Annotations (usage notes)
CODE:
```text
# Use DataField.label > Common.Label (property) > Common.ValueList or Common.ValueListMapping.label
# For context-dependent value help (Common.ValueListRelevantQualifiers) use Common.ValueList/Mapping label first.
```

STEP: 2 — Multiple Value Help Definitions (variants)
DESCRIPTION: If more than one Common.ValueList or Common.ValueListMapping annotation exists for a field:
- Treat the unqualified annotation as the default variant.
- Expose other qualifiers as selectable dropdown variants in the VHD UI.
- Ensure each variant has a distinct Qualifier in metadata to allow runtime selection.
LANGUAGE: Annotations (usage notes)
CODE:
```text
# Provide multiple @Common.ValueList/@Common.ValueListMapping entries with distinct qualifiers.
# The unqualified entry will be default; other qualifiers appear as dropdown variants.
# Example file path for visuals: images/Value_Help_Variant_9903303.png
```

STEP: 3 — Filter Fields (SelectionFields and constants)
DESCRIPTION: Configure which properties appear in the filter bar of the VHD:
- Use SelectionFields on the value help entity to list filterable fields.
- If SelectionFields is omitted, all filterable properties are included by default.
- To supply default constant filters, use ValueListParameterConstant with:
  - ValueListProperty: the property name on the value list.
  - Constant: string constant used in eq comparison (same representation as property default values).
- The filter bar is collapsed by default; auto-expand if:
  - Any filter field is mandatory, OR
  - Search is disabled for the value help entity, OR
  - FetchValues = 2 (data not loaded by default).
LANGUAGE: Annotations (usage notes)
CODE:
```text
# Add SelectionFields to the value help entity to control filter panel fields.
# Use ValueListParameterConstant:
# {
#   ValueListProperty: 'PropertyName',
#   Constant: 'ConstantValue'
# }
```

STEP: 4 — Search Field Visibility
DESCRIPTION: Control search field display in VHD at two levels:
- Entity level: set Capabilities.SearchRestrictions.Searchable = false to hide search globally for the entity set.
- Value list level: set SearchSupported: false in Common.ValueList or Common.ValueListMapping to hide search for that value help definition (overrides entity-level searchable=true).
- Note: Type-ahead is disabled for VHDs configured as non-searchable.
- Reference: enabling-the-search-function-3cdebee.md and value-help-fccb255.md#...__Annotations
LANGUAGE: Annotations (usage notes)
CODE:
```text
# Entity-level:
# @Capabilities.SearchRestrictions: { Searchable: false }
#
# ValueList-level:
# @Common.ValueList: { CollectionPath: 'X', SearchSupported: false, ... }
```

STEP: 5 — Table: columns, parameters, fetch behavior, and text handling
DESCRIPTION: Configure the VHD table columns and load behavior:
- Include in table all ValueListProperty values referenced by:
  - Common.ValueListParameterInOut
  - Common.ValueListParameterOut
  - Common.ValueListParameterDisplayOnly
- Do not render columns annotated UI.Hidden.
- Ignore parameters whose values are already displayed in another column that references the same property via Common.Text.
- Default behavior: load data immediately when VHD opens.
  - To delay load until user clicks Go, set FetchValues (ValueList) accordingly (see value-help-fccb255.md).
- Text handling:
  - If no Common.Text for the ID field -> show ID only.
  - If Common.Text exists -> show text based on Common.TextArrangement:
    - property-level Common.TextArrangement
    - else entity-level Common.TextArrangement
    - else default: TextFirst
- ValueListParameterOut text values are carried to main entity properties even if the main property has a different text annotation.
LANGUAGE: Annotations (usage notes)
CODE:
```text
# Ensure ValueListProperty fields referenced in ParameterInOut/Out/DisplayOnly are present in the table.
# Use FetchValues to control load:
#   Common.ValueList: { FetchValues: 2 }  # data not loaded by default, requires Go
# TextArrangement priority: property > entity > TextFirst (default)
```

STEP: 6 — Sorting the Value Help Table (XML example)
DESCRIPTION: Use UI.PresentationVariant with a PresentationVariantQualifier referenced from Common.ValueList/Mapping to define sorting for the VHD table.
- Note: Using PresentationVariant overrides backend search ordering and can cause inconsistent ordering for search/type-ahead results.
LANGUAGE: XML
CODE:
```xml
<Annotations Target="serviceNamespace.BookingType/FlightDate">
    <Annotation Term="common.ValueList">
        <Record>
            ……
            ……
            <PropertyValue Property="PresentationVariantQualifier" String="VH_Booking_to_Flight"/>
        </Record>
    </Annotation>
</Annotations>

<Annotations Target="serviceNamespace.FlightType">
    <Annotation Term="UI.PresentationVariant" Qualifier="VH_Booking_to_Flight">
        <Record>
            <PropertyValue Property="SortOrder">
                <Collection>
                    <Record Type="common.SortOrderType">
                        <PropertyValue Property="Property" PropertyPath="FlightDate"/>
                        <PropertyValue Property="Descending" Bool="true"/>
                    </Record>
                </Collection>
            </PropertyValue>
        </Record>
    </Annotation>
</Annotations>
```

STEP: 7 — Sorting the Value Help Table (ABAP CDS example)
DESCRIPTION: ABAP CDS equivalent: annotate the consumption view with a valueHelpDefinition and apply @UI.presentationVariant with qualifier and sortOrder.
LANGUAGE: ABAP CDS
CODE:
```abap
annotate view C_BOOKINGS with
{
  @Consumption.valueHelpDefinition: [
    {
      entity: { name: 'VH_Flight', element: 'FlightDate' },
      ...
      ...
      presentationVariantQualifier: 'VH_Booking_to_Flight'
    }
  ]
  FlightDate;
  ConnectionID;
  AirlineID;
}

@UI.presentationVariant: [{
  qualifier: 'VH_Booking_to_Flight',
  sortOrder: [{ by: 'FlightDate', direction: #DESC }]
}]
define view entity VH_Flight as select from Flight {
  FlightDate;
  Connection_ID;
  Airline_ID;
}
```

STEP: 8 — Sorting the Value Help Table (CAP CDS example)
DESCRIPTION: CAP annotation example for PresentationVariantQualifier and UI.PresentationVariant configuration.
LANGUAGE: CAP CDS
CODE:
```cds
annotate TravelService.Booking {

  FlightDate @Common.ValueList: {
    CollectionPath : 'Flight',
    ……
    ……
    PresentationVariantQualifier : 'VH_Booking_to_Flight',
  };

}

annotate TravelService.Flight with @(

  UI.PresentationVariant #VH_Booking_to_Flight : {
    $Type : 'UI.PresentationVariantType',
    SortOrder : [
      {
        $Type     : 'Common.SortOrderType',
        Property  : FlightDate,
        Descending: true,
      },
    ],
  }

);
```

STEP: 9 — Hierarchical Display in Value Help (XML example)
DESCRIPTION: To display a hierarchy inside a VHD:
- Provide a PresentationVariantQualifier in Common.ValueList to reference UI.PresentationVariant.
- In UI.PresentationVariant, set RecursiveHierarchyQualifier and InitialExpansionLevel.
LANGUAGE: XML
CODE:
```xml
<Annotations Target="Self.ArtistsType/CountryOfOrigin">
    <Annotation Term="Common.ValueList">
        <Record>
            <PropertyValue Property="CollectionPath" String="myEntityName"/>
            <PropertyValue Property="SearchSupported" Bool="true"/>
            <PropertyValue Property="Parameters">
                <Collection>
                    <Record Type="Common.ValueListParameterInOut">
                        <PropertyValue Property="LocalDataProperty" PropertyPath="CountryOfOrigin"/>
                        <PropertyValue Property="ValueListProperty" String="CountryCode"/>
                    </Record>
                    <Record Type="Common.ValueListParameterDisplayOnly">
                        <PropertyValue Property="ValueListProperty" String="CountryCode_Text"/>
                    </Record>
                    <Record Type="Common.ValueListParameterDisplayOnly">
                        <PropertyValue Property="ValueListProperty" String="CountryIndicator"/>
                    </Record>
                </Collection>
            </PropertyValue>
            <PropertyValueProperty="PresentationVariantQualifier"String="Country_Pres" />
        </Record>
    </Annotation>
    <Annotation Term="UI.PresentationVariant" Qualifier="Country_Pres">
        <Record>
            <PropertyValue Property="Visualizations">
                <Collection>
                    <AnnotationPath>@UI.LineItem#DefaultLineItem</AnnotationPath>
                </Collection>
            </PropertyValue>
            <PropertyValue Property="InitialExpansionLevel" Int="2"/>
            <PropertyValue Property="RecursiveHierarchyQualifier" String="CountryHierarchy"/>
        </Record>
    </Annotation>
</Annotations>
```

STEP: 10 — Hierarchical Display (ABAP CDS example)
DESCRIPTION: ABAP CDS example showing valueHelpDefinition with presentationVariantQualifier and UI.presentationVariant with recursiveHierarchyQualifier.
LANGUAGE: ABAP CDS
CODE:
```abap
@Consumption.valueHelpDefinition: [
    {
          entity :{
            name    : ' myEntityName', // ValueList CollectionPath (The collection path points to consumption VH entity and will have the ValueListParameterDisplayOnly fields within it)
            element : ' CountryCode' // ValueListProperty of ValueListParameterInOut           
          },
          label  : 'mylabel', // ValueList label
          qualifier: 'test'
          presentationVariantQualifier: 'Country_Pres'  // value list presentvariantqualifier
          }
]
@UI.presentationVariant: [
    {
      visualizations: [
        {
          type: #AS_LINEITEM,
          qualifier: 'DefaultLineItem'
        }
      ],
      initialExpansionLevel: 2,
      recursiveHierarchyQualifier: 'CountryHierarchy',
      qualifier: 'Country_Pres'
    }
]
CountryOfOrigin, // LocalDataProperty of ValueListParameterInOut
```

STEP: 11 — Hierarchical Display (CAP CDS example)
DESCRIPTION: CAP CDS example with CountryOfOrigin value list and UI.PresentationVariant including InitialExpansionLevel and RecursiveHierarchyQualifier.
LANGUAGE: CAP CDS
CODE:
```cds
entity Artist {
    CountryOfOrigin                   : String(40)           @(Common : {
   Label        : 'Country',
    ValueList    : {
        CollectionPath : 'myEntityName',
        Parameters     : [
        {
            $Type             : 'Common.ValueListParameterInOut',
            LocalDataProperty : CountryOfOrigin,
            ValueListProperty : 'CountryCode'
        },
        {
            $Type             : 'Common.ValueListParameterDisplayOnly',
            ValueListProperty : 'CountryCode_Text'
        },
        {
            $Type             : 'Common.ValueListParameterDisplayOnly',
            ValueListProperty : 'CountryIndicator'
        }
        ],
        PresentationVariantQualifier: 'Country_Pres'
    }
    },
    UI : {
        PresentationVariant #Country_Pres : {
            Visualizations : [
                '@UI.LineItem#DefaultLineItem',
            ],
            InitialExpansionLevel : 2,
            RecursiveHierarchyQualifier: 'CountryHierarchy'
        }
    }
);
```

STEP: 12 — Caching Table Contents and Refresh
DESCRIPTION: Default VHD table behavior caches data on first open for the session:
- Subsequent opens use cached data.
- To reflect changes, trigger a refresh by defining a side effect that targets the value help entity.
- Caveats:
  - Caching is not supported for dropdown-based fields.
  - Cache invalidation only works when the VHD entity is defined in the same metadata as the main entity (e.g., CAP apps). RESTful ABAP (RAP) with separate metadata files does not support this cache invalidation.
- Reference: side-effects-18b17bd.md and https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/advancedFeatures/guidance/guidanceSideEffects
LANGUAGE: Annotations (usage notes)
CODE:
```text
# Use SideEffects annotation to target value help entity for refresh after actions:
# @Common.SideEffects: [ { PropertyPaths: ['...'], SourceProperties: ['...'] } ]
# Note: Caching not supported for dropdown-based fields; invalidation only within same metadata.
```

STEP: 13 — Define Conditions (Capabilities.FilterRestrictions.AllowedExpressions)
DESCRIPTION: Control the "Define Conditions" tab and available operators based on the property base type and Capabilities.FilterRestrictions.AllowedExpressions:
- AllowedExpressions mapping to available conditions:
  - SingleValue -> Define Conditions tab hidden (none)
  - MultiValue -> Define Conditions tab hidden (none)
  - SingleRange -> Equal To + single range operators (<=, <, >=, >, Between)
  - MultiRange -> Multiple conditions as per SingleRange
  - SearchExpression -> Contains, Starts with, Ends with
  - Not defined -> All conditions
- Additional details:
  - A negation option "Exclude" exists (e.g., not less than, does not end with).
  - Empty operator shows <empty> placeholder: for nullable fields equals "" or null; for non-nullable equals "".
  - Semantic date: Edm.Date with AllowedExpressions SingleValue or SingleRange, and Edm.DateTimeOffset with SingleRange, show semantic date options (see enabling-semantic-operators-in-the-filter-bar-fef65d0.md).
LANGUAGE: Annotations (usage notes)
CODE:
```text
# Example:
# @Capabilities.FilterRestrictions: { AllowedExpressions: 'SingleRange' }
# Results in: Equal To, <=, <, >=, >, Between, plus Exclude equivalents
```

STEP: 14 — References and Live Examples
DESCRIPTION: Use official SAP Fiori dev portal and in-repo images for live UI references and examples:
- Multi-input hierarchy example: https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/buildingBlocks/field/fieldMultiValueField
- Tree table in value help: https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/buildingBlocks/filterBar/filterBarDefault
- Image assets referenced in metadata: images/Value_Help_Variant_9903303.png and images/Define_Conditions_cf810ef.png
LANGUAGE: Links/resources
CODE:
```text
# Refer to the links above and local image paths for UI examples and screenshots.
# Keep image file paths unchanged when bundling documentation or UI assets.
```
--------------------------------

**TITLE**: Value Help Annotations for fiori-elements Framework

**INTRODUCTION**: Concise reference for implementing value help (value list and mapping) and client-side validation in fiori-elements apps. Includes XML, CAP CDS, and ABAP CDS examples for: Common.ValueList, Common.ValueListMapping, Common.ValueListReference, Common.ValueListForValidation, Common.ValueListRelevantQualifiers, and InitialValueIsSignificant. Use these snippets as drop-in annotation definitions in service metadata (XML) or CDS files.

**TAGS**: value-help, annotations, Common.ValueList, Common.ValueListMapping, ValueListForValidation, ValueListReference, InitialValueIsSignificant, CAP, ABAP, XML, fiori-elements

STEP: 1 - ValueList annotation (entity defined in main metadata, CAP apps)
DESCRIPTION: Use Common.ValueList when the value help entity is present in the same service metadata (typical for CAP model). Apply this annotation on the target property to provide CollectionPath, Label, SearchSupported, FetchValues, and Parameters mappings (IN/OUT/DisplayOnly/Constant). Place XML in the service metadata file or use CAP CDS annotate syntax in CDS files.
LANGUAGE: XML
CODE:
```XML
<Annotations Target="MyService.Travel/AgencyId">
    <Annotation Term="Common.ValueList">
        <Record>
            <PropertyValue Property="CollectionPath" String="TravelAgency" />
            <PropertyValue Property="Label" String="Travel Agency" />
            <PropertyValue Property="SearchSupported" Bool="true" />
            <PropertyValue Property="FetchValues" Int="2" />
            <PropertyValue Property="Parameters">
                <Collection>
                    <Record Type="Common.ValueListParameterInOut">
                        <PropertyValue Property="LocalDataProperty" PropertyPath="AgencyId" />
                        <PropertyValue Property="ValueListProperty" String="Agency_Id" />
                        <PropertyValue Property="Importance" EnumMember="Common.ImportanceType/High" />
                    </Record>
                    <Record Type="Common.ValueListParameterInOut">
                        <PropertyValue Property="LocalDataProperty" PropertyPath="_TourOperator/RegionId" />
                        <PropertyValue Property="ValueListProperty" String="Region_Id" />
                        <PropertyValue Property="InitialValueIsSignificant" Bool="true" />
                    </Record>
                    <Record Type="Common.ValueListParameterDisplayOnly">
                        <PropertyValue Property="ValueListProperty" String="AgencyName" />
                        <PropertyValue Property="Importance" EnumMember="Common.ImportanceType/High" />
                    </Record>
                    <Record Type="Common.ValueListParameterOut">
                        <PropertyValue Property="LocalDataProperty" PropertyPath="CountryIndicator" />
                        <PropertyValue Property="ValueListProperty" String="Country_Flag" />
                    </Record>
                    <Record Type="Common.ValueListParameterConstant">
                        <PropertyValue Property="Constant" String="001" />
                        <PropertyValue Property="ValueListProperty" String="PredefinedField" />
                    </Record>
                </Collection>
            </PropertyValue>
        </Record>
    </Annotation>
</Annotations>
```

LANGUAGE: CAP CDS
CODE:
```CAP CDS
annotate MyService.Travel with 
{
    AgencyId @Common.ValueList: {
        CollectionPath : 'TravelAgency',
        Label          : 'Travel Agency',
        SearchSupported,
        FetchValues    : 2,
        Parameters     : [
            {
                $Type             : 'Common.ValueListParameterInOut',
                LocalDataProperty : AgencyId,
                ValueListProperty : 'Agency_Id',
                ![@UI.Importance] : #High,
            },
            {
                $Type                    : 'Common.ValueListParameterInOut',
                LocalDataProperty        : to_TourOperator.RegionId,
                ValueListProperty        : 'Region_Id',
                InitialValueIsSignificant
            },
            {
                $Type             : 'Common.ValueListParameterDisplayOnly',
                ValueListProperty : 'AgencyName',
                ![@UI.Importance] : #High,
            },
            {
                $Type             : 'Common.ValueListParameterOut',
                LocalDataProperty : CountryIndicator,
                ValueListProperty : 'Country_Flag'
            }
            {
                $Type            : 'Common.ValueListParameterConstant',
                Constant: '001',
                ValueListProperty: 'PredefinedField'
            }
        ]
    };
};
```

STEP: 2 - ValueListMapping annotation (external value help metadata, RAP/RESTful ABAP)
DESCRIPTION: Use Common.ValueListMapping when the value help entity metadata is external to the main service (RAP model). Behavior and parameters mirror Common.ValueList. Apply in local XML metadata that references external service metadata.
LANGUAGE: XML
CODE:
```XML
<Annotations Target="MyService.Travel/AgencyId">
    <Annotation Term="Common.ValueListMapping">
        <Record>
            <PropertyValue Property="CollectionPath" String="TravelAgency" />
            <PropertyValue Property="Label" String="Travel Agency" />
            <PropertyValue Property="SearchSupported" Bool="true" />
            <PropertyValue Property="FetchValues" Int="2" />
            <PropertyValue Property="Parameters">
                <Collection>
                    <Record Type="Common.ValueListParameterInOut">
                        <PropertyValue Property="LocalDataProperty" PropertyPath="AgencyId" />
                        <PropertyValue Property="ValueListProperty" String="Agency_Id" />
                        <PropertyValue Property="Importance" EnumMember="Common.ImportanceType/High" />
                    </Record>
                    <Record Type="Common.ValueListParameterInOut">
                        <PropertyValue Property="LocalDataProperty" PropertyPath="_TourOperator/RegionId" />
                        <PropertyValue Property="ValueListProperty" String="Region_Id" />
                        <PropertyValue Property="InitialValueIsSignificant" Bool="true" />
                    </Record>
                    <Record Type="Common.ValueListParameterDisplayOnly">
                        <PropertyValue Property="ValueListProperty" String="AgencyName" />
                        <PropertyValue Property="Importance" EnumMember="Common.ImportanceType/High" />
                    </Record>
                    <Record Type="Common.ValueListParameterOut">
                        <PropertyValue Property="LocalDataProperty" PropertyPath="CountryIndicator" />
                        <PropertyValue Property="ValueListProperty" String="Country_Flag" />
                    </Record>
                    <Record Type="Common.ValueListParameterConstant">
                        <PropertyValue Property="Constant" String="001" />
                        <PropertyValue Property="ValueListProperty" String="PredefinedField" />
                    </Record>
                </Collection>
            </PropertyValue>
        </Record>
    </Annotation>
</Annotations>
```

STEP: 3 - ValueListReference (referencing external metadata path)
DESCRIPTION: When using Common.ValueListMapping, reference the external service metadata via Common.ValueListReferences on the same target. The string is the path relative to the main metadata file that contains the reference.
LANGUAGE: XML
CODE:
```XML
<Annotations Target="Self.TravelType/AgencyId">
  <Annotation Term="Common.ValueListReferences">
    <Collection>
      <String>../../../../srvd_f4/sap/myentityname/0001;ps='srvd-sadl_gw_apptravel_definition-0001';va='com.sap.gateway.srvd.sadl_gw_apptravel_definition.v0001.et-c_mdbu_v4_travel.agencyid'/$metadata</String>
    </Collection>
  </Annotation>
</Annotations>
```

STEP: 4 - Common ValueList properties (quick reference)
DESCRIPTION: Use these properties when defining Common.ValueList or Common.ValueListMapping.
- Label: dialog title (used by value help dialog).
- CollectionPath: entity set used as value help data source.
- SearchSupported: show/hide search bar in the value help dialog.
- Parameters: define IN, OUT, INOUT mappings and display-only or constant fields (control how value help interacts with local fields).
- FetchValues: controls data loading in value help table:
  - 1 = load immediately when dialog opens (default).
  - 2 = load after user applies filters.
- Importance: marks fields for type-ahead suggestion.

STEP: 5 - Note: default behavior and drafts
DESCRIPTION: Implementation notes to include in metadata:
- Value help for draft-enabled entities shows only active documents.
- Value help appears in filter fields even if Common.ValueList or Common.ValueListMapping are not defined; in that case only the "Define Conditions" tab is shown.

STEP: 6 - Client validation using ValueListForValidation (hard-coded mapping)
DESCRIPTION: Configure client-side validation against a value help by adding Common.ValueListForValidation on the target property. To validate against the default (unqualified) ValueList use an empty string (""). To validate against a qualified value list supply qualifier string.
LANGUAGE: XML
CODE:
```XML
<Annotations Target="serviceNamespace.BookingType/FlightDate">
    …….
    <Annotation Term="Common.ValueListForValidation" String=""/>
    <Annotation Term="Common.ValueList">
        ...Definition of ValueList...
    </Annotation>
</Annotations>
```

LANGUAGE: ABAP CDS
CODE:
```ABAP CDS
annotate schema.Booking {
  @Common.ValueListForValidation : ''
  @Common.ValueList : {
      $Type : 'Common.ValueListType',
      CollectionPath : 'Flight',
  }
  FlightDate;
}
```

LANGUAGE: CAP CDS
CODE:
```CAP CDS
annotate schema.Booking {
  @Common.ValueListForValidation : ''
  @Common.ValueList : {
      $Type : 'Common.ValueListType',
      CollectionPath : 'Flight',
  }
  FlightDate;
}
```

STEP: 7 - Client validation using conditional settings (runtime qualifier selection)
DESCRIPTION: Use a conditional expression in Common.ValueListForValidation to return a qualifier at runtime. The expression must evaluate to a single valid ValueList or ValueListMapping qualifier (or empty string). Place the conditional expression in XML or CDS as shown.
LANGUAGE: XML
CODE:
```XML
<Annotations Target="com.c_salesordermanage_sd.HeaderPartner/BusinessPartner">
    <Annotation Term="com.sap.vocabularies.Common.v1.ValueListForValidation">
        <If>
            <Eq>
                <Path>PartnerFunction</Path>
                <String>WE</String>
            </Eq>
            <String>BusinessPartnerQualifier</String>
            <String />
        </If>
    </Annotation>
</Annotations>
```

LANGUAGE: CAP CDS
CODE:
```CAP CDS
annotate schema.HeaderPartner { 
  @Common.ValueListForValidation: {$edmJson: {$If: [ 
    {$Eq: [ 
      {$Path: 'PartnerFunction'}, 
      'WE' 
    ]}, 
    'BusinessPartnerQualifier', 
    '' 
  ]}} 
  BusinessPartner; 
} 

OR 

annotate schema.HeaderPartner with { 
   @Common.ValueListForValidation :  
    (PartnerFunction = 'WE' ? 'BusinessPartnerQualifier' : '') 
   BusinessPartner; 
};
```

STEP: 8 - Context-dependent value help (ValueListRelevantQualifiers)
DESCRIPTION: Use Common.ValueListRelevantQualifiers to choose valid qualifiers based on another property value. Provide a collection of qualifier strings and conditional If elements. Define both the unqualified Common.ValueList and any qualified Common.ValueList#Qualifier entries.
LANGUAGE: XML
CODE:
```XML
<Annotations Target="com.c_salesordermanage_sd.HeaderPartner/BusinessPartner">
    <Annotation Term="com.sap.vocabularies.Common.v1.ValueListRelevantQualifiers">
        <Collection>
            <String/>
            <If>
                <Eq>
                    <Path>PartnerFunction</Path>
                    <String>WE</String>
                </Eq>
                <String>BusinessPartnerQualifier</String>
            </If>
        </Collection>
    </Annotation>
    <Annotation Term="Common.ValueList" Qualifier="BusinessPartnerQualifier">
        ...Definition of ValueList...
    </Annotation>
    <Annotation Term="Common.ValueList">
        ...Definition of ValueList w/o qualifier...
    </Annotation>
</Annotations>
```

LANGUAGE: CAP CDS
CODE:
```CAP CDS
annotate schema.HeaderPartner with {
  @Common.ValueListRelevantQualifiers:
    (PartnerFunction = 'WE' ? 'BusinessPartnerQualifier' : '')
  @Common.ValueList: {
    $Type: 'Common.ValueListType',
    . . .
  }
  @Common.ValueList#BusinessPartnerQualifier: {
    $Type: 'Common.ValueListType',
    . . .
  }
  BusinessPartner;
};
```

STEP: 9 - InitialValueIsSignificant (treat empty/null as significant IN filter)
DESCRIPTION: Use InitialValueIsSignificant on an IN parameter (Edm.String only) to treat initial empty values as a meaningful filter value. Restriction: supported only on object page and only for Edm.String parameters. This causes value help to filter for records where the corresponding value help property is "" or null (if nullable).
LANGUAGE: XML
CODE:
```XML
<Annotations Target="com.c_salesordermanage_sd.SalesOrderManage/ShippingCondition"> 
    <Annotation Term="Common.ValueList">
        <Record Type="Common.ValueListType">
            <PropertyValue Property="CollectionPath" String="ShippingCondition"/>
            <PropertyValue Property="Label" String="Shipping Condition"/>
            <PropertyValue Property="Parameters">
                <Collection>
                    <Record Type="Common.ValueListParameterInOut">
                        <PropertyValue Property="LocalDataProperty" PropertyPath="ShippingCondition"/>
                        <PropertyValue Property="ValueListProperty" String="ShippingCondition"/>
                    </Record>
                    <Record Type="Common.ValueListParameterIn">
                        <PropertyValue Property="LocalDataProperty" PropertyPath="SoldToParty"/>
                        <PropertyValue Property="ValueListProperty" String="SoldToParty"/>
                        <PropertyValue Property="InitialValueIsSignificant" Bool="true"/>
                    </Record>
                    <Record Type="Common.ValueListParameterDisplayOnly">
                        <PropertyValue Property="ValueListProperty" String="ShippingCondition_Text"/>
                    </Record>
                </Collection>
            </PropertyValue>
        </Record>
    </Annotation>
</Annotations>
```

LANGUAGE: CAP CDS
CODE:
```CAP CDS
Context-dependent value help doesn't support individual In/Out parameters for the different ShippingCondition            

    ValueList       : {
        Label          : 'Shipping Condition',
        CollectionPath : 'ShippingCondition',
        Parameters     : [
        {
            $Type             : 'Common.ValueListParameterInOut',
            LocalDataProperty : ShippingCondition,
            ValueListProperty : 'ShippingCondition'
        },
        {
            $Type             : 'Common.ValueListParameterIn',
            LocalDataProperty : SoldToParty,
            ValueListProperty : 'SoldToParty',
            InitialValueIsSignificant: true
        },
        {
            $Type             : 'Common.ValueListParameterDisplayOnly',
            ValueListProperty : 'ShippingCondition_Text'
        }
        ]
    }
}); 
```

STEP: 10 - Restrictions and final notes
DESCRIPTION: Implementation constraints and behaviors to enforce in code:
- InitialValueIsSignificant: only on object page; only Edm.String parameters.
- Parameterized value help service is not supported.
- If ValueListForValidation is not specified for filter fields, the default (unqualified) ValueList is used for validation.
- Value help for draft-enabled entities shows only active documents.
- If Common.ValueList or Common.ValueListMapping is absent for filter fields, the Define Conditions tab is shown (no selection list).
--------------------------------

**TITLE**: Vertical Bullet Chart Card (Fiori Elements / OVP)

**INTRODUCTION**: Use a Vertical Bullet Chart Card to display one or more measures against a dimension — typically to compare actual values (columns) to a target (line). This card requires at least one dimension and one measure. Configure dimension(s) with the axis category and measures with roles axis1 (actual) and axis2 (target).

**TAGS**: fiori-elements-framework, OVP, vertical-bullet-chart, card, chart, measure, dimension, axis, axis1, axis2

**STEP**: 1 — Minimum data requirements

**DESCRIPTION**: Ensure the payload/model contains at least one dimension and one measure. All dimensions are assigned to the axis category. Measures must include at least one axis1 (actual value) and optionally an axis2 (target value).

**LANGUAGE**: text

**CODE**:
```text
Minimum requirements:
- At least 1 dimension (assigned to "axis")
- At least 1 measure
  - axis1: actual value (rendered as solid-colored column)
  - axis2: target value (rendered as solid black line, optional)
```

**STEP**: 2 — Conceptual mapping example (dimension and measures)

**DESCRIPTION**: Map your model properties to the dimension and measure roles. Use the axis role for dimensions. Assign the actual measure to axis1 and the target measure to axis2.

**LANGUAGE**: json

**CODE**:
```json
{
  "dimension": {
    "path": "ProductCategory",
    "role": "axis"
  },
  "measures": [
    {
      "path": "SalesActual",
      "role": "axis1"   // rendered as solid-colored column (actual)
    },
    {
      "path": "SalesTarget",
      "role": "axis2"   // rendered as solid black line (target)
    }
  ]
}
```

**STEP**: 3 — Visual rendering rules

**DESCRIPTION**: Implement UI logic or card template settings to render:
- axis1 measures as solid-colored vertical columns (actual values)
- axis2 measures as a solid black line (target values)
If multiple axis1 measures exist, they appear as separate solid columns; axis2 is a single-line overlay.

**LANGUAGE**: text

**CODE**:
```text
Rendering rules:
- axis1 -> solid-colored columns (actual)
- axis2 -> solid black line (target)
- All dimensions -> axis category (x-axis grouping)
- Card requires >= 1 dimension and >= 1 measure
```

**STEP**: 4 — Example conceptual card configuration (for manifest/OVP)

**DESCRIPTION**: Example structure to include in a card manifest or card-settings object. Adapt keys to your framework's card schema; primary purpose is to show how to wire dimension/measure roles to the card.

**LANGUAGE**: json

**CODE**:
```json
{
  "card": {
    "template": "verticalBulletChart", // adapt to actual OVP/template key
    "settings": {
      "title": "Sales vs Target",
      "dimensions": [
        { "path": "ProductCategory", "role": "axis" }
      ],
      "measures": [
        { "path": "SalesActual", "role": "axis1" },
        { "path": "SalesTarget", "role": "axis2" }
      ]
    },
    "data": {
      "dataModelPath": "/SalesData"
    }
  }
}
```

**STEP**: 5 — Reference assets

**DESCRIPTION**: Include visual example and internal comment reference for documentation or asset linking.

**LANGUAGE**: text

**CODE**:
```text
Documentation comment: <!-- loiof4a899fec55246578a3387625f0a9fb3 -->
Example image path: ../01_Whats-New/images/WhatsNew_138_OVP_VerticalBullet_f2d9418.png
```
--------------------------------

**TITLE**: Visual Filters — Annotation and Configuration Cookbook for Code Generation

**INTRODUCTION**: Action-oriented reference for implementing visual filters in SAP Fiori elements (OData V2/V4). Includes annotated code snippets (XML, ABAP CDS, CAP CDS, manifest.json, and JavaScript extension) for configuring ValueList, PresentationVariant, Chart, DataPoint, SelectionVariant, SelectionFields, TextArrangement, lazy loading, grouping, UoM text, semantic coloring, and number formatting. Use these snippets directly when generating or modifying metadata/annotations and controller extensions.

**TAGS**: visual-filter, valueList, presentationVariant, chart, dataPoint, selectionVariant, textArrangement, lazyLoad, manifest.json, CAP, ABAP, ODataV2, ODataV4, semantic-coloring, uom

STEP: Configure ValueList Annotation for Visual Filter
DESCRIPTION: Enhance the ValueList annotation on the filter field to enable visual filters. Ensure the value help entity set used here returns the same records as the regular filter field value help for sync. Map IN/OUT parameters so the chart dimension matches the ValueListProperty. Set PresentationVariantQualifier and SelectionVariantQualifier to point to chart and selection configuration.
LANGUAGE: XML
CODE:
```xml
<Annotations xmlns="http://docs.oasis-open.org/odata/ns/edm" Target="SEPMRA_ALP_SO_ANA_SRV.SEPMRA_C_ALP_SlsOrdItemCubeALPResult/SalesOrderOverallStatus">
   <Annotation Term="Common.ValueList" Qualifier="VisualFilter">
      <Record>
         <PropertyValue Property="Label" String="Overall Status" />
         <PropertyValue Property="CollectionPath" String="SEPMRA_C_ALP_SlsOrdItemCubeALPResults" />
         <PropertyValue Property="SearchSupported" Bool="false" />
         <PropertyValue Property="PresentationVariantQualifier" String="FilterNumberOfSalesOrdersByStatus" />
         <PropertyValue Property="SelectionVariantQualifier" String="SVForStatus" />
         <PropertyValue Property="Parameters">
            <Collection>
               <Record Type="Common.ValueListParameterInOut">
                  <PropertyValue Property="LocalDataProperty" PropertyPath="SalesOrderOverallStatus" />
                  <PropertyValue Property="ValueListProperty" String="SalesOrderOverallStatus" />
               </Record>
               <Record Type="Common.ValueListParameterInOut">
                  <PropertyValue Property="LocalDataProperty" PropertyPath="MainProductCategory" />
                  <PropertyValue Property="ValueListProperty" String="MainProductCategory" />
               </Record>
               <Record Type="Common.ValueListParameterInOut">
                  <PropertyValue Property="LocalDataProperty" PropertyPath="ProductCategory" />
                  <PropertyValue Property="ValueListProperty" String="ProductCategory" />
               </Record>
            </Collection>
         </PropertyValue>
      </Record>
   </Annotation>
</Annotations>
```

LANGUAGE: CAP CDS
CODE:
```cds
annotate SEPMRA_ALP_SO_ANA_SRV.SEPMRA_C_ALP_SlsOrdItemCubeALPResult with {
  @Common.ValueList #VisualFilter : {
    Label : 'Overall Status',
    CollectionPath : 'SEPMRA_C_ALP_SlsOrdItemCubeALPResults',
    SearchSupported : false,
    PresentationVariantQualifier : 'FilterNumberOfSalesOrdersByStatus',
    SelectionVariantQualifier : 'SVForStatus',
    Parameters : [
        {
            $Type : 'Common.ValueListParameterInOut',
            LocalDataProperty : SalesOrderOverallStatus,
            ValueListProperty : 'SalesOrderOverallStatus'
        },
        {
            $Type : 'Common.ValueListParameterInOut',
            LocalDataProperty : MainProductCategory,
            ValueListProperty : 'MainProductCategory'
        },
        {
            $Type : 'Common.ValueListParameterInOut',
            LocalDataProperty : ProductCategory,
            ValueListProperty : 'ProductCategory'
        }
    ]
  }
  SalesOrderOverallStatus
};
```

STEP: Define PresentationVariant Qualifier (chart definition entry point)
DESCRIPTION: Create a PresentationVariant with qualifier referenced from ValueList.PresentationVariantQualifier. PresentationVariant.SortOrder controls visual filter sorting. PresentationVariant.Visualizations points to UI.Chart annotation (@UI.Chart#Qualifier); the visual filter picks the first chart in Visualizations.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.PresentationVariant" Qualifier="FilterNumberOfSalesOrdersByStatus">
   <Record>
      <PropertyValue Property="Text" String="Filter: Number of Sales Order by Status" />
      <PropertyValue Property="SortOrder">
         <Collection>
            <Record Type="Common.SortOrderType">
               <PropertyValue Property="Property" PropertyPath="NumberOfSalesOrders" />
               <PropertyValue Property="Descending" Bool="true" />
            </Record>
         </Collection>
      </PropertyValue>
      <PropertyValue Property="Visualizations">
         <Collection>
            <AnnotationPath>@UI.Chart#FilterNumberOfSalesOrdersByStatus</AnnotationPath>
         </Collection>
      </PropertyValue>
   </Record>
</Annotation>
```

LANGUAGE: ABAP CDS
CODE:
```abap
@UI.PresentationVariant: [
  {
    text: 'Filter: Number of Sales Order by Status',
    sortOrder: [
      {
        by: 'NUMBEROFSALESORDERS',
        direction: #DESC
      }
    ],
    visualizations: [
      {
        type: #AS_CHART,
        qualifier: 'FilterNumberOfSalesOrdersByStatus'
      }
    ],
    qualifier: 'FilterNumberOfSalesOrdersByStatus'
  }
]
annotate view VIEWNAME with {

}
```

LANGUAGE: CAP CDS
CODE:
```cds
UI.PresentationVariant #FilterNumberOfSalesOrdersByStatus : {
    Text : 'Filter: Number of Sales Order by Status',
    SortOrder : [
        {
            $Type : 'Common.SortOrderType',
            Property : NumberOfSalesOrders,
            Descending : true
        },
    ],
    Visualizations : [
        '@UI.Chart#FilterNumberOfSalesOrdersByStatus'
    ]
},
```

STEP: Define Chart Annotation (first chart in PresentationVariant is used)
DESCRIPTION: Define UI.Chart with ChartType, Dimensions (first dimension is used), Measures (first measure is used), DimensionAttributes, and MeasureAttributes. Link measure to a DataPoint using AnnotationPath/DataPoint to enable formatting, scale, and semantic coloring.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.Chart" Qualifier="FilterNumberOfSalesOrdersByStatus">
   <Record Type="UI.ChartDefinitionType">
      <PropertyValue Property="Title" String="Sales Orders by Status" />
      <PropertyValue Property="Description" String="Number of Sales Orders by Status" />
      <PropertyValue Property="ChartType" EnumMember="UI.ChartType/Donut" />
      <PropertyValue Property="Dimensions">
         <Collection>
            <PropertyPath>SalesOrderOverallStatus</PropertyPath>
         </Collection>
      </PropertyValue>
      <PropertyValue Property="DimensionAttributes">
         <Collection>
            <Record Type="UI.ChartDimensionAttributeType">
               <PropertyValue Property="Dimension" PropertyPath="SalesOrderOverallStatus" />
               <PropertyValue Property="Role" EnumMember="UI.ChartDimensionRoleType/Category" />
            </Record>
         </Collection>
      </PropertyValue>
      <PropertyValue Property="Measures">
         <Collection>
            <PropertyPath>NumberOfSalesOrders</PropertyPath>
         </Collection>
      </PropertyValue>
      <PropertyValue Property="MeasureAttributes">
         <Collection>
            <Record Type="UI.ChartMeasureAttributeType">
               <PropertyValue Property="Measure" PropertyPath="NumberOfSalesOrders" />
               <PropertyValue Property="Role" EnumMember="UI.ChartMeasureRoleType/Axis1" />
               <PropertyValue Property="DataPoint" AnnotationPath="@UI.DataPoint#NumberOfSalesOrders" />
            </Record>
         </Collection>
      </PropertyValue>
   </Record>
</Annotation>
```

LANGUAGE: ABAP CDS
CODE:
```abap
@UI.Chart: [
  {
    title: 'Sales Orders by Status',
    description: 'Number of Sales Orders by Status',
    chartType: #DONUT,
    dimensions: [
      'SALESORDEROVERALLSTATUS'
    ],
    dimensionAttributes: [
      {
        dimension: 'SalesOrderOverallStatus',
        role: #CATEGORY
      }
    ],
    measures: [
      'NUMBEROFSALESORDERS'
    ],
    measureAttributes: [
      {
        measure: 'NumberOfSalesOrders',
        role: #AXIS_1,
		asDataPoint: true
      }
    ],
    qualifier: 'FilterNumberOfSalesOrdersByStatus'
  }
]
annotate view VIEWNAME with {

}
```

LANGUAGE: CAP CDS
CODE:
```cds
UI.Chart #FilterNumberOfSalesOrdersByStatus : {
    $Type : 'UI.ChartDefinitionType',
    Title : 'Sales Orders by Status',
    Description : 'Number of Sales Orders by Status',
    ChartType : #Donut,
    Dimensions : [
        SalesOrderOverallStatus
    ],
    DimensionAttributes : [
        {
            $Type : 'UI.ChartDimensionAttributeType',
            Dimension : SalesOrderOverallStatus,
            Role : #Category
        }
    ],
    Measures : [
        NumberOfSalesOrders
    ],
    MeasureAttributes : [
        {
            $Type : 'UI.ChartMeasureAttributeType',
            Measure : NumberOfSalesOrders,
            Role : #Axis1,
            DataPoint : '@UI.DataPoint#NumberOfSalesOrders'
        }
    ]
}
```

STEP: DataPoint: ScaleFactor and ValueFormat (affects chart title and scale)
DESCRIPTION: Define UI.DataPoint with Value.Path and ValueFormat.ScaleFactor to control chart title unit (K, M) and scaling. Avoid hard-coded scale unless fixed value ranges are guaranteed.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.DataPoint" Qualifier="LineChartTimeDataPoint">
    <Record Type="UI.DataPointType">
        <PropertyValue Property="Criticality" EnumMember="UI.CriticalityType/Positive"/>
        <PropertyValue Property="Title" String="Total Pricing"/>
        <PropertyValue Property="Value" Path="totalPricing"/>
        <PropertyValue Property="ValueFormat">
            <Record Type="UI.NumberFormat">
                <PropertyValue Property="ScaleFactor" Decimal="1000"/> 
            </Record>
        </PropertyValue>
    </Record>
</Annotation>
```

STEP: SelectionFields (control visual filter order)
DESCRIPTION: Define UI.SelectionFields on the main entity to determine the ordering of filters displayed in the visual filter bar. Mandatory filter fields not included appear first automatically.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.SelectionFields">
  <Collection>
    <PropertyPath>DeliveryCalendarYear</PropertyPath>
    <PropertyPath>SoldToParty</PropertyPath>
    <PropertyPath>Product</PropertyPath>
    <PropertyPath>MainProductCategory</PropertyPath>
    <PropertyPath>DeliveryCalendarQuarter</PropertyPath>
  </Collection>
</Annotation>
```

LANGUAGE: ABAP CDS
CODE:
```abap
@UI.SelectionField: [{ position: 10 }]
DELIVERYCALENDARYEAR;

@UI.SelectionField: [{ position: 20 }]
SOLDTOPARTY;

@UI.SelectionField: [{ position: 30 }]
PRODUCT;

@UI.SelectionField: [{ position: 40 }]
MAINPRODUCTCATEGORY;

@UI.SelectionField: [{ position: 50 }]
DELIVERYCALENDARQUARTER;
```

LANGUAGE: CAP CDS
CODE:
```cds
UI.SelectionFields : [
    DeliveryCalendarYear,
    SoldToParty,
    Product,
    MainProductCategory,
    DeliveryCalendarQuarter
]
```

STEP: SelectionVariant (default/fixed filter values and parametrized collection paths)
DESCRIPTION: Provide default SelectOptions/Parameters via UI.SelectionVariant and reference it from ValueList.SelectionVariantQualifier. For date values in SelectionVariant use UTC format (e.g., "2018-10-15T00:00:00Z"). When using parametrized collection paths, provide parameter values here; values in smart filter bar override SelectionVariant.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.SelectionVariant" Qualifier="SVForStatus">
   <Record>
      <PropertyValue Property="Parameters">
         <Collection>
            <Record Type="UI.Parameter">
               <PropertyValue Property="PropertyName" PropertyPath="CompanyCurrency" />
               <PropertyValue Property="PropertyValue" String="EUR" />
            </Record>
         </Collection>
      </PropertyValue>
      <PropertyValue Property="SelectOptions">
         <Collection>
            <Record Type="UI.SelectOptionType">
               <PropertyValue Property="PropertyName" PropertyPath="SalesOrderOverallStatus" />
               <PropertyValue Property="Ranges">
                  <Collection>
                     <Record Type="UI.SelectionRangeType">
                        <PropertyValue EnumMember="UI.SelectionRangeSignType/E" Property="Sign" />
                        <PropertyValue EnumMember="UI.SelectionRangeOptionType/EQ" Property="Option" />
                        <PropertyValue Property="Low" String="D" />
                     </Record>
                  </Collection>
               </PropertyValue>
            </Record>
            <Record Type="UI.SelectOptionType">
               <PropertyValue Property="PropertyName" PropertyPath="Product" />
               <PropertyValue Property="Ranges">
                  <Collection>
                     <Record Type="UI.SelectionRangeType">
                        <PropertyValue EnumMember="UI.SelectionRangeSignType/E" Property="Sign" />
                        <PropertyValue EnumMember="UI.SelectionRangeOptionType/EQ" Property="Option" />
                        <PropertyValue Property="Low" String="HT-1502" />
                     </Record>
                  </Collection>
               </PropertyValue>
            </Record>
         </Collection>
      </PropertyValue>
   </Record>
</Annotation>
```

LANGUAGE: ABAP CDS
CODE:
```abap
@UI.selectionVariant: [
  {
    qualifier: 'SVForStatus',
	parameters: [{name: 'PropertyName', value: 'CompanyCurrency' },{ name: 'PropertyValue', value: 'EUR'}]
  }
]
```

LANGUAGE: CAP CDS
CODE:
```cds
UI.SelectionVariant #SVForStatus : {
    Parameters : [
        {
            $Type : 'UI.Parameter',
            PropertyName : CompanyCurrency,
            PropertyValue : 'EUR'
        }
    ],
    SelectOptions : [
        {
            $Type : 'UI.SelectOptionType',
            PropertyName : SalesOrderOverallStatus,
            Ranges : [
                {
                    $Type : 'UI.SelectionRangeType',
                    Sign : #E,
                    Option : #EQ,
                    Low : 'D'
                }
            ]
        },
        {
            $Type : 'UI.SelectOptionType',
            PropertyName : Product,
            Ranges : [
                {
                    $Type : 'UI.SelectionRangeType',
                    Sign : #E,
                    Option : #EQ,
                    Low : 'HT-1502'
                }
            ]
        }
    ]
}
```

STEP: Chart Type Behavior and AccumulativeMeasure for V2
DESCRIPTION: Chart selection behavior: Bar shows top/bottom 3, Line shows first/last 6 points, Donut (V2 only) shows top/bottom 2. For Donut overlay behavior when measures have negative values in OData V2, set Analytics.AccumulativeMeasure to false on measure.
LANGUAGE: XML
CODE:
```xml
<Annotations Target="SEPMRA_ALP_SO_ANA_SRV.Z_SEPMRA_C_ALP_QUARTERVHType/DifferenceAmount">
    <Annotation Term="Analytics.Measure" Bool="true" />
    <Annotation Term="Analytics.AccumulativeMeasure" Bool="false" />
</Annotations>
```

STEP: TextArrangement (format visual filter labels)
DESCRIPTION: Use UI.TextArrangement on the main entity set to control how sap:text and ID are shown in visual filters: TextFirst, TextLast, TextOnly, TextSeparate.
LANGUAGE: XML
CODE:
```xml
<Annotations Target="ProductType"> 
  <Annotation Term="com.sap.vocabularies.UI.v1.TextArrangement" EnumMember="com.sap.vocabularies.UI.v1.TextArrangementType/TextFirst"/> 
</Annotations>
```

LANGUAGE: ABAP CDS
CODE:
```abap
@UI.textArrangement: #TEXT_FIRST
annotate view ProductType with {

}
```

LANGUAGE: CAP CDS
CODE:
```cds
annotate ProductType @(
  UI.TextArrangement : #TextFirst
);
```

STEP: Lazy Loading of Visual Filters (manifest.json)
DESCRIPTION: Enable lazyLoadVisualFilter in manifest.json for OData V2 to defer batch call until user switches to visual filter bar. OData V4: lazy loading enabled by default and cannot be disabled.
LANGUAGE: JSON
CODE:
```json
"settings": {
              "qualifier": "MainContent",
              "defaultContentView": "charttable",
              "smartVariantManagement": true,
              "showGoButtonOnFilterBar": true,
              "multiSelect": true,
              "lazyLoadVisualFilter":true,
              "tableType": "AnalyticalTable"
}
```

STEP: Grouping Visual Filter Calls (controller extension for batch grouping)
DESCRIPTION: Implement onBeforeRebindVisualFilterExtension in controller to assign oContext.groupId for grouping visual filter OData calls into batches. groupId values must be keys in oContext and are string identifiers for grouping.
LANGUAGE: JavaScript
CODE:
```javascript
onBeforeRebindVisualFilterExtension: function(sEntityType, sDimension, sMeasure, oContext){
    'use strict';
    var Log = sap.ui.require("sap/base/Log");
    if (sDimension === "Product") {
        oContext.groupId = "Group1";
    }
    if (sDimension === "DeliveryCalendarMonth" || sDimension === "DeliveryCalendarQuarter") {
        oContext.groupId = "Group2";
    }
    Log.info("onBeforeRebindVisualFilterExtension called!");
}
```

STEP: Unit of Measure Text Lookup (main entity vs value list)
DESCRIPTION: If unit (e.g., currency) has sap:text, that text is displayed next to the unit in visual filter. Preference: main entity sap:text is used first; if missing and a value list entity set defines sap:text, the value list text is fetched and shown.
LANGUAGE: XML
CODE:
```xml
<!-- Main Entity Set: DisplayCurrency doesn't contain sap:text -->
<EntityType Name="ZEPM_C_SALESORDERITEMQUERYResult" sap:semantics="aggregate" sap:content-version="1">
    <Key>
        <PropertyRef Name="ID"/>
    </Key> 
    <Property Name="DisplayCurrency" Type="Edm.String" MaxLength="5" sap:aggregation-role="dimension" sap:creatable="false" sap:label="Display Currency" sap:updatable="false" sap:semantics="currency-code"/>  
</EntityType> 

<!-- Value List Entity Set: DisplayCurrency contains sap:text mapping -->
<EntityType Name="ZEPM_C_SALESORDERITEMQUERYValueHelpResult" sap:semantics="aggregate" sap:content-version="1">
    <Key>
        <PropertyRef Name="ID"/>
    </Key> 
    <Property Name="DisplayCurrency" Type="Edm.String" MaxLength="5" sap:aggregation-role="dimension" sap:creatable="false" sap:label="Display Currency" sap:updatable="false" sap:semantics="currency-code" sap:text="DisplayCurrencyText"/>
    <Property Name="DisplayCurrencyText" Type="Edm.String" MaxLength="60" sap:filterable="false"/>
</EntityType>
```

STEP: Number Formatting (NumberOfFractionalDigits via DataPoint.ValueFormat)
DESCRIPTION: Control fractional digits shown in visual filters using UI.DataPoint.ValueFormat.NumberOfFractionalDigits. Rules: decimals not shown by default; annotations can request 1 or 2 digits. V2/V4 behavior differences noted (V4 caps to 2 digits).
LANGUAGE: XML
CODE:
```xml
<Annotation Term="com.sap.vocabularies.UI.v1.DataPoint" Qualifier="Price">
    <Record Type="com.sap.vocabularies.UI.v1.DataPointType">
        <PropertyValue Property="Value" Path="Price"/>
        <PropertyValue Property="ValueFormat">
            <Record Type="com.sap.vocabularies.UI.v1.NumberFormat">
                <PropertyValue Property="NumberOfFractionalDigits" Int="1"/>
            </Record>
        </PropertyValue>
    </Record>
</Annotation>
```

LANGUAGE: ABAP CDS
CODE:
```abap
@UI.dataPoint: { 
   valueFormat.numberOfFractionalDigits: 1  
}
price;
```

LANGUAGE: CAP CDS
CODE:
```cds
UI.DataPoint #Price : {
    $Type : 'UI.DataPointType',
    Value : Price,
    ValueFormat : {
        $Type : 'UI.NumberFormat',
        NumberOfFractionalDigits : 1
    }
}
```

STEP: Semantic Coloring for Visual Filters (dimension and measure)
DESCRIPTION: Use ValueCriticality (for dimension values) or DataPoint.Criticality/CriticalityCalculation (for measures) to apply semantic coloring. Measure coloring takes precedence over dimension coloring. For OData V4 only hard-coded criticality values are supported for measures—ensure DataPoint exists and criticality is configured.
LANGUAGE: XML
CODE:
```xml
<Annotation Term="UI.Chart" Qualifier="BarChartSoldToParty">
     <Record Type="UI.ChartDefinitionType">
          <PropertyValue Property="Title" String="Bar Chart"/>
          <PropertyValue Property="Description" String="Testing Bar Chart"/>
          <PropertyValue Property="ChartType" EnumMember="UI.ChartType/Bar"/>
          <PropertyValue Property="Measures">
               <Collection>
                    <PropertyPath>totalPricing</PropertyPath>
               </Collection>
          </PropertyValue>
          <PropertyValue Property="Dimensions">
               <Collection>
          <PropertyPath>SoldToParty</PropertyPath>
               </Collection>
          </PropertyValue>
          <PropertyValue Property="MeasureAttributes">
               <Collection>
                    <Record Type="UI.ChartMeasureAttributeType">
                         <PropertyValue Property="Measure" PropertyPath=" totalPricing"/>
                         <PropertyValue Property="Role" EnumMember="UI.ChartMeasureRoleType/Axis1"/>
                         <PropertyValue Property="DataPoint" AnnotationPath="@UI.DataPoint#LineChartTimeDataPoint"/>
                    </Record>
               </Collection>
          </PropertyValue>
          <PropertyValue Property="DimensionAttributes">
               <Collection/>
          </PropertyValue>
     </Record>
</Annotation>

<Annotation Term="UI.DataPoint" Qualifier="LineChartTimeDataPoint">
     <Record Type="UI.DataPointType">
          <PropertyValue Property="Value" Path="totalPricing"/>
          <PropertyValue Property="Title" String="Total Pricing"/>
          <PropertyValue Property="Criticality" EnumMember="UI.CriticalityType/Positive"/>
     </Record>
</Annotation>
```

LANGUAGE: ABAP CDS
CODE:
```abap
@UI.chart: [
  {
    chartType: #BAR,
    title: 'Bar Chart',
    description: 'Testing Bar Chart',
    dimensions: [
      'SoldToParty'
    ],
    measures: [
      'totalPricing'
    ],
    measureAttributes: [{measure: 'totalPricing', role: #AXIS_1, asDataPoint: true }],
  }
]

@UI.dataPoint: { 
     title: 'Total Pricing',
     criticalityValue: #POSITIVE   
 }
totalPricing;
```

LANGUAGE: CAP CDS
CODE:
```cds
Chart #BarChartSoldToParty               : {
            $Type             : 'UI.ChartDefinitionType',
            Title             : 'Bar Chart',
            Description       : 'Testing Bar Chart',
            ChartType         : #Bar,
            Measures          : [totalPricing],
            Dimensions        : [SoldToParty],
            MeasureAttributes : [{
                $Type     : 'UI.ChartMeasureAttributeType',
                Measure   : totalPricing,
                Role      : #Axis1,
                DataPoint : '@UI.DataPoint#LineChartTimeDataPoint'
            }],
DimensionAttributes: []
        },
DataPoint #LineChartTimeDataPoint              : {
            Value       : totalPricing,
            Title       : 'Total Pricing',
            Criticality : #Positive,
            ValueFormat : {
                ScaleFactor: 1000
            }
```

STEP: OData V4 Specifics and Guidelines
DESCRIPTION: Ensure a manifest property exists per visual filter (required in V4). Line charts in V4 render only for time-based dimensions (Edm.Date, Edm.Time, Edm.DateTimeOffset). Date/time handling: Edm.Date is not converted to local timezone; other date/time formats are converted to local timezone. Follow guideline: show each filter dimension with exactly one measure in visual filter; do not show the same dimension with multiple measures simultaneously.

CODE:
```text
- Ensure manifest.json contains entries for each visual filter (see Configuring the Visual Filter Bar documentation).
- Use only one representation per dimension in visual filter bar to keep sync with regular filter bar.
- Line charts: dimension types must be Edm.Date, Edm.Time, or Edm.DateTimeOffset in OData V4.
```

Related Information: Configuring the Visual Filter Bar and Enhancing ValueList Annotations for Visual Filters should be consulted for full end-to-end implementation patterns and service-side requirements.
--------------------------------

**TITLE**: Waterfall Chart Card (Fiori Elements) — Annotation Examples and Requirements

**INTRODUCTION**: Use the Waterfall Chart Card to visualize cumulative value changes (initial to final state). This guide provides concise, action-oriented annotation rules and three concrete code examples (XML UI annotation, ABAP CDS, CAP CDS) to implement waterfall charts in Fiori Elements. Includes required roles, allowed waterfallType values, legend behavior, and semantic coloring notes.

**TAGS**: fiori-elements, UI.Chart, Waterfall, chart, CDS, CAP, ABAP, XML, annotation, criticality, waterfallType

STEP: 1 — Requirements & Dimension/Measure Roles

DESCRIPTION: Implement a waterfall chart only if you map at least one measure and one dimension. Assign dimension and measure roles explicitly to determine axes and cumulative groups. Follow these rules when authoring annotations:

- Waterfall charts require at least one measure and one dimension.
- Dimension roles:
  - Category role => used for x-axis (category axis). If no role specified, the first dimension becomes the x-axis.
  - Series role => used to create cumulative data points. Only one dimension per role is allowed.
  - waterfallType UID mapping => use to mark intermediate totals and subtotals. Valid values:
    - null
    - subtotal:2 (combines the previous two datapoints and shows a subtotal column)
    - total (combines all datapoints and shows a total column)
- Measure role:
  - Measures map to the y-axis (value axis).
- Chart types supported:
  - Waterfall without time dimension
  - Waterfall with time dimension (represents cumulative change over time)
- Semantic coloring:
  - Use datapoint annotations com.sap.vocabularies.UI.v1.CriticalityCalculation or com.sap.vocabularies.UI.v1.Criticality to enable semantic coloring.

LANGUAGE: text

CODE:
```text
Rules Summary:
- At least 1 measure and 1 dimension required.
- Dimensions with Role=Category -> x-axis (first dimension used if none specified).
- Dimensions with Role=Series -> cumulative data points (only one per role).
- waterfallType UID valid values: null, subtotal:2, total.
- Measures -> y-axis.
- Semantic coloring via datapoint annotations: com.sap.vocabularies.UI.v1.CriticalityCalculation or com.sap.vocabularies.UI.v1.Criticality.
```

STEP: 2 — Legend Behavior and Semantic Waterfall Notes

DESCRIPTION: Understand legend defaults and semantic waterfall behavior before adding annotations:

- Legend default: shows the measure name mapped to the chart and two fixed groups "<0" and ">0".
- If more than one measure is provided, the legend displays all measures (instead of the measure name).
- Semantic waterfall charts use criticality annotations on datapoints (CriticalityCalculation or Criticality) to determine coloring of positive/negative/subtotal/total bars.
- Use time dimension if you must represent cumulative changes over time.

LANGUAGE: text

CODE:
```text
Legend & Semantic Notes:
- Default legend: [MeasureName] with groups "<0" and ">0".
- Multiple measures -> legend lists measures individually.
- Semantic coloring: apply datapoint Criticality/Calculation annotations per data point.
- Use a time-dimension as the Category dimension to show changes over time.
```

STEP: 3 — XML Annotation Example (UI.Chart)

DESCRIPTION: Copy this XML annotation into your OData service metadata extensions/annotations XML (or manifest annotation file) to define a Waterfall chart with one measure (Finances) and two dimensions (SpendType as Category, Type as Series). Adjust PropertyPath, Qualifier, Title, roles, and measure names to your data model.

LANGUAGE: XML

CODE:
```xml
<Annotation Term="UI.Chart" Qualifier="Waterfall_Eval_by_Country">
    <Record Type="UI.ChartDefinitionType">
        <PropertyValue Property="Title" String="Revenue Waterfall" />
        <PropertyValue Property="ChartType" EnumMember="UI.ChartType/Waterfall"/>
        <PropertyValue Property="MeasureAttributes">
            <Collection>
                <Record Type="UI.ChartMeasureAttributeType">
                    <PropertyValue Property="Measure" PropertyPath="Finances" />
                    <PropertyValue Property="Role" EnumMember="UI.ChartMeasureRoleType/Axis2" />
                </Record>
            </Collection>
        </PropertyValue>
        <PropertyValue Property="DimensionAttributes">
            <Collection>
                <Record Type="UI.ChartDimensionAttributeType">
                    <PropertyValue Property="Dimension" PropertyPath="SpendType" />
                    <PropertyValue Property="Role" EnumMember="UI.ChartDimensionRoleType/Category" />
                </Record>
                <Record Type="UI.ChartDimensionAttributeType">
                    <PropertyValue Property="Dimension" PropertyPath="Type" />
                    <PropertyValue Property="Role" EnumMember="UI.ChartDimensionRoleType/Series" />
                </Record>
            </Collection>
        </PropertyValue>
    </Record>
</Annotation>
```

STEP: 4 — ABAP CDS Annotation Example (@UI.Chart)

DESCRIPTION: Add this @UI.Chart annotation to your ABAP CDS view to declare a Waterfall chart. Replace VIEWNAME and field names as needed. The qualifier is Waterfall_Eval_by_Country; the annotation maps Finances to AXIS_2, SpendType to CATEGORY and Type to SERIES.

LANGUAGE: ABAP

CODE:
```abap
@UI.Chart: [
  {
    title: 'Revenue Waterfall',
	chartType: #WATERFALL,
    measureAttributes: [
      {
        measure: 'Finances',
        role: #AXIS_2
      }
    ],
    dimensionAttributes: [
      {
        dimension: 'SpendType',
        role: #CATEGORY
      },
      {
        dimension: 'Type',
        role: #SERIES
      }
    ],
    qualifier: 'Waterfall_Eval_by_Country'
  }
]
annotate view VIEWNAME with { }
```

STEP: 5 — CAP CDS Annotation Example (Service Model)

DESCRIPTION: Use this CAP CDS snippet in your service-level annotations file to define the same Waterfall chart for a CAP-based project. Adjust entity field names (Finances, SpendType, Type) and the qualifier as required.

LANGUAGE: CDS

CODE:
```cds
UI.Chart #Waterfall_Eval_by_Country : {
    $Type : 'UI.ChartDefinitionType',
    Title : 'Revenue Waterfall',
    ChartType : #Waterfall,
    MeasureAttributes : [
        {
            $Type : 'UI.ChartMeasureAttributeType',
            Measure : Finances,
            Role : #Axis2
        },
    ],
    DimensionAttributes : [
        {
            $Type : 'UI.ChartDimensionAttributeType',
            Dimension : SpendType,
            Role : #Category
        },
        {
            $Type : 'UI.ChartDimensionAttributeType',
            Dimension : Type,
            Role : #Series
        }
    ]
}
```
--------------------------------

**TITLE**: Why Use SAP Fiori Elements?

**INTRODUCTION**: Brief summary of the benefits and recommended use cases for SAP Fiori Elements. Use this as guidance when generating apps: choose Fiori Elements to accelerate UI development with metadata-driven templates, maintain consistent UX, and deliver enterprise-ready applications with minimal custom UI code.

**TAGS**: fiori-elements, sapui5, ui5, annotations, odata, developer-productivity, ux-consistency, enterprise-readiness

**STEP**: 1 — Developer Productivity

**DESCRIPTION**: Use SAP Fiori Elements to minimize manual UI coding and focus on backend/business logic. Actionable guidance for code generation:
- Prefer metadata-driven UI: design OData service and annotations (CDS/annotation files) first.
- Use Fiori Elements templates (ListReport, ObjectPage, OverviewPage) instead of freestyle SAPUI5 views.
- Generate apps from templates (SAP Business Application Studio / Yeoman generator) to bootstrap projects.
- Create reusable annotation models and shared libraries for common patterns to reduce per-app effort.
- Automate repetitive tasks (scaffolding, tests, CI) so developers can concentrate on service logic and custom actions.

**LANGUAGE**: Markdown

**CODE**:
```markdown
![](images/StopWatch_f6dd642.png)
- Focus on **business logic** and back-end services
- Write **less UI code**
- **Reduce** development and maintenance **costs**
```

**STEP**: 2 — UX Consistency

**DESCRIPTION**: Rely on Fiori Elements to automatically enforce SAP Fiori design guidelines across apps. Actionable recommendations for generated code:
- Drive UI layout and features through annotations to ensure uniform behavior (search, filtering, table/list behavior).
- Use centralized theming and design tokens; integrate apps in Fiori Launchpad for unified navigation and role-based access.
- Keep UI customizations minimal and implement extensibility through extension points or controller extensions when necessary to preserve consistency.

**LANGUAGE**: Markdown

**CODE**:
```markdown
![](images/Data_Consistency_ba4b763.png)
- Comply with the **latest SAP Fiori design** specification
- Deliver a **centrally managed** user experience
- Include **uniform** layout, navigation, search, filtering, and more
```

**STEP**: 3 — Enterprise Readiness

**DESCRIPTION**: Use the framework to deliver production-quality applications with built-in enterprise features. Actionable implementation notes:
- Leverage built-in accessibility, mobile responsiveness, and translation (i18n) support — configure during generation.
- Choose optimized templates to get stable, performant UI code out-of-the-box (ListReport/ObjectPage).
- Integrate testing (unit, e2e), performance checks, and CI/CD pipelines at project generation to enforce enterprise standards.

**LANGUAGE**: Markdown

**CODE**:
```markdown
![](images/GrothUpArrows_5d9c969.png)
- Deliver **high-quality** SAPUI5 applications to end users
- Ensure **stable, optimized** UI code out of the box
- Include **standard enterprise features** (accessibility, mobile, translation support, and more)
```

**STEP**: 4 — Note on Initial Effort and Long-term Benefits

**DESCRIPTION**: Acknowledge initial investment required and provide actionable steps to amortize that cost across projects:
- Expect a higher initial setup (annotation modeling, service design, template selection).
- Reuse metadata models, create an internal catalog of templates, and automate app generation to reduce per-app overhead.
- Once patterns and automation are in place, new apps inherit framework benefits immediately.

**LANGUAGE**: Text

**CODE**:
```
Note:
The initial effort for creating an app using SAP Fiori elements might be higher than creating a freestyle SAPUI5 app. However, you will be richly rewarded for this effort after you've created more apps this way because your apps will benefit from using the framework and the included features.
```
--------------------------------

**TITLE**: Working With OData Annotations

**INTRODUCTION**: Practical reference for defining and managing OData annotations used by SAP Fiori elements to generate UI automatically. Includes XML, ABAP CDS, and CAP CDS examples for common annotation tasks (labels, list columns), guidance on vocabularies, and rules for back-end vs front-end annotation placement and override behavior.

**TAGS**: fiori-elements-framework, odata, annotations, CDS, CAP, ABAP, UI.LineItem, Common.Label, manifest.json, sap-fiori-tools

STEP: Vocabularies

DESCRIPTION: Use standard vocabularies to define OData annotation terms. Reference the official SAP and OASIS collections to ensure correct terms and semantics.

LANGUAGE: text

CODE:
```text
SAP defined vocabularies: https://github.com/sap/odata-vocabularies
OASIS vocabularies: https://github.com/oasis-tcs/odata-vocabularies
```

STEP: 1 — Specify a Label for the Name Property (XML annotation)

DESCRIPTION: Add a Common.Label annotation in an annotation XML to set the UI label for the Name property of the Products entity.

LANGUAGE: XML

CODE:
```xml
<Annotations Target="namespace.ServiceName.Products/Name">
  <Annotation Term="Common.Label" String="Name"/>
</Annotations>
```

STEP: 2 — Specify a Label for the Name Property (ABAP CDS annotation)

DESCRIPTION: In ABAP CDS, add an @EndUserText.label to provide the UI label for the Name field in the CDS view.

LANGUAGE: ABAP CDS

CODE:
```
@EndUserText.label: 'Name'
name          as Name,
```

STEP: 3 — Specify a Label for the Name Property (CAP CDS annotation)

DESCRIPTION: In CAP CDS, annotate the model property with @title to set the UI label.

LANGUAGE: CAP CDS

CODE:
```
Name: String(100) @title: 'Name';
```

STEP: 4 — Define Which Columns Are Shown in a Table (XML annotation using UI.LineItem)

DESCRIPTION: Use UI.LineItem in XML annotations to declare which properties appear as columns in list/table UIs. Each Record of type UI.DataField references the property via PropertyValue/Path.

LANGUAGE: XML

CODE:
```xml
<Annotation Term="UI.LineItem">
    <Collection>
        <Record Type="UI.DataField">
            <PropertyValue Property="Value" Path="Name"/>
        </Record>
        <Record Type="UI.DataField">
            <PropertyValue Property="Value" Path="Category"/>
        </Record>
        <Record Type="UI.DataField">
            <PropertyValue Property="Value" Path="Price"/>
        </Record>
        <Record Type="UI.DataField">
            <PropertyValue Property="Value" Path="Availability"/>
        </Record>
    </Collection>
</Annotation>
```

STEP: 5 — Define Which Columns Are Shown in a Table (ABAP CDS UI.lineItem)

DESCRIPTION: Annotate each field with @UI.lineItem in ABAP CDS to specify positions and include fields in the table LineItem.

LANGUAGE: ABAP CDS

CODE:
```
@UI.lineItem: [{ position: 10 }]
Name;

@UI.lineItem: [{ position: 20 }]
Category;

@UI.lineItem: [{ position: 30 }]
Price;

@UI.lineItem: [{ position: 40 }]
Availability;
```

STEP: 6 — Define Which Columns Are Shown in a Table (CAP CDS UI.LineItem)

DESCRIPTION: Use CAP CDS annotate syntax to attach a UI.LineItem collection to the service entity. Each entry is a UI.DataField with Value referencing the model property.

LANGUAGE: CAP CDS

CODE:
```
annotate ServiceName.Products with @(UI.LineItem: [
    {
        $Type: 'UI.DataField',
        Value: Name,
    },
    {
        $Type: 'UI.DataField',
        Value: Category
    },
    {
        $Type: 'UI.DataField',
        Value: Price,
    },
    {
        $Type: 'UI.DataField',
        Value: Availability,
    }
]);
```

STEP: 7 — Back-End vs Front-End Annotations — placement, use cases, and override behavior

DESCRIPTION: Guidelines for where to maintain annotations and when to use front-end annotation files.

- Maintain annotations in the back end (CDS) whenever possible to keep data model and semantics together and enable reuse across UIs.
- Back ends that support CDS-based annotations: CAP, RAP (including metadata extensions), ABAP Programming Model for SAP Fiori.
- Front-end annotations: provide additional `.xml` files in the UI application and register them as additional annotation sources in the app's manifest.json.
- Override rules:
  - When an annotation term (for example, UI.LineItem) exists in an additional front-end annotation source, it overwrites the same term defined in the back end (CDS).
  - When using both back-end and front-end annotations simultaneously, front-end annotations override back-end annotations on a term-by-term basis.
- When to use front-end annotations:
  - Annotation not available in the back end (only applicable to RAP).
  - No back-end access to maintain annotations.
  - Need to override annotations for a single UI without changing the back end.
- Disadvantages of front-end annotations: risk of discrepancies between front-end annotations and the data model (e.g., after renaming properties), which can cause errors.

LANGUAGE: text

CODE:
```text
These `.xml` files for front-end annotations are maintained in the `manifest.json` file of the UI application as additional annotation sources.
Note: When an annotation term, such as `UI.LineItem`, is defined in an additional annotation source on the front end, it overwrites the annotation term which is defined in the back end (CDS), if one exists.
Tip: It is recommended to maintain annotations in the back end. This keeps the data model definition and semantic information in the same place and enables reuse.
```

STEP: 8 — SAP Fiori Tools Support

DESCRIPTION: Use SAP Fiori tools extensions in VS Code or Business Application Studio to create, edit, and validate local annotations. Tools provide Page Map, Guided Development, and editors for CAP CDS and XML annotation files. For ABAP CDS, use Guided Development.

LANGUAGE: text

CODE:
```text
SAP Fiori Tools Documentation: https://help.sap.com/docs/SAP_FIORI_tools/17d50220bcd848aa854c9c182d65b699/55bfb91591d84f658e6c9474a3c657c4.html?locale=en-US
Feature Showcase Apps and Samples: https://ui5.sap.com/#/topic/521405cc719e4e699a25366461a516cb
RESTful Application Programming Model: https://help.sap.com/docs/abap-cloud/abap-rap/abap-restful-application-programming-model
CAP Annotation Documentation: https://cap.cloud.sap/docs/advanced/fiori#fiori-annotations
```

STEP: 9 — Quick Implementation Checklist

DESCRIPTION: Action-oriented checklist to implement annotations in a project.

LANGUAGE: text

CODE:
```text
- Choose vocabulary/term from SAP or OASIS vocabularies (links above).
- Prefer back-end CDS annotations where possible.
- If front-end annotation required:
  - Add XML annotation file to UI project.
  - Register the XML file as an annotation source in manifest.json.
  - Verify that front-end annotations override back-end terms as intended.
- Use SAP Fiori Tools for editing and validation.
- Test UI behavior and metadata ($metadata) to ensure annotations appear and are applied.
```
--------------------------------

**TITLE**: Worklist (Fiori Elements) — Quick Implementation and Manifest Configuration

**INTRODUCTION**: This document provides concise, code-focused instructions to create a Fiori Elements Worklist app and to configure key manifest flags required by Worklist floorplan behavior. It highlights generator usage and manifest.json settings for variant management (table-level and page-level). Use these snippets when scaffolding or modifying a Worklist app.

**TAGS**: fiori, fiori-elements, worklist, odata, manifest.json, variants, smart-table, generator

**STEP**: 1 — Generate a Worklist App using the SAP Fiori generator

**DESCRIPTION**: Use the SAP Fiori application generator (Yeoman generator) to scaffold a Worklist Page. When prompted by the generator, select the Worklist Page template. This creates the project structure and initial manifest.json for a Worklist floorplan.

**LANGUAGE**: Shell

**CODE**:
```bash
# Install generator if not present
npm install -g @sap/generator-fiori

# Run the generator and choose 'Worklist Page' at Template Selection
yo @sap/generator-fiori
```

**STEP**: 2 — Enable table-level variant management (manifest.json)

**DESCRIPTION**: To provide variant management at the table level only (default: hidden), set variantManagementHidden to false in the Worklist page component settings in manifest.json. Place this in the Worklist page entry inside "sap.ui.generic.app" -> "pages" -> corresponding page -> "component" -> "settings". This enables the table's variant UI without enabling smartVariantManagement at page level.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "YourEntitySet",
        "component": {
          "name": "sap.suite.ui.generic.template.ListReport.view.ListReport", 
          "settings": {
            "variantManagementHidden": false
          }
        }
      }
    ]
  }
}
```

**STEP**: 3 — Enable page-level variant management (manifest.json)

**DESCRIPTION**: To enable page-level variant management (shared variants across the page), set smartVariantManagement to true and ensure variantManagementHidden is false in the Worklist page component settings in manifest.json.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "YourEntitySet",
        "component": {
          "name": "sap.suite.ui.generic.template.ListReport.view.ListReport",
          "settings": {
            "smartVariantManagement": true,
            "variantManagementHidden": false
          }
        }
      }
    ]
  }
}
```

**STEP**: 4 — Understand Worklist floorplan behavior (no manifest change required)

**DESCRIPTION**: Use these behavior notes as constraints when implementing UI or customizing the app:
- Worklist is a simplified List Report without a Smart Filter Bar; search field is in the table toolbar.
- Execute on Select action is not available.
- Multiselect is enabled by default for tables. If a table only has line item actions, the table can be configured as a no-selection table.
- Export to Microsoft Excel is not available in Worklist.
- Default table type is responsive; table title shows the row count. Table content defaults to fixed layout and scroll-to-load behavior.
- To implement category worklists, define multiple views within a single table (multiple views / single table mode).

No additional manifest snippet is required for these behaviors unless specific custom settings are added for your implementation.

**STEP**: 5 — Notes for OData V4 and further configuration

**DESCRIPTION**: For OData V4 the Worklist is still a simplified List Report without a filter bar. Use the generator to create a V4-compatible Worklist. For advanced table, filtering, navigation, and extension options, consult the corresponding Fiori Elements configuration and extension documentation (Configuring Filter Bars, Configuring Tables, Configuring Navigation, App Extensions). No code snippet is provided here; adjust manifest and component settings as needed for your OData version and required extensions.
--------------------------------
