
--------------------------------

**TITLE**: Deploying an SAP Fiori Application (ABAP and Cloud Foundry)

**INTRODUCTION**: This guide shows the exact CLI and shell steps to build, package, and deploy an SAP Fiori tools project to ABAP (SAPUI5 Repository) or Cloud Foundry (HTML5 Repository). It includes generation prerequisites, packaging instructions, deployment entry points, debug logging commands, and SAP backend troubleshooting actions.

**TAGS**: fiori-tools, sapui5, abap, cloud-foundry, deployment, cli, troubleshooting

**STEP**: 1 — Build the application

**DESCRIPTION**: Install dependencies and produce a distributable `dist` folder. The exact build command depends on the project (often `npm run build` or `ui5 build`). Ensure the `dist` output contains the application root (index.html, Component.js, manifest.json, webapp folder, etc.).

**LANGUAGE**: Shell

**CODE**:
```bash
# Install dependencies
npm install

# Common build commands (use one that matches your project)
npm run build
# or (if using UI5 Tooling)
npx ui5 build --include-dependency=none
```

**STEP**: 2 — Package the ABAP deployment artifact

**DESCRIPTION**: For ABAP deployment, the artifact is a zipped `dist` folder (the SAP Fiori application). Create a ZIP archive preserving the `dist` contents at the archive root.

**LANGUAGE**: Shell

**CODE**:
```bash
# From project root: create archive with dist/ files at the archive root
# macOS / Linux
cd dist
zip -r ../app-dist.zip ./*
cd ..

# Windows PowerShell
Compress-Archive -Path .\dist\* -DestinationPath .\app-dist.zip
```

**STEP**: 3 — Generate deployment configuration files (ABAP or Cloud Foundry)

**DESCRIPTION**: Before deploying, generate the deployment configuration files required by SAP Fiori tools for the chosen target (ABAP or Cloud Foundry). Use the SAP Fiori tools generator workflows or the documentation references below. These files control where and how `npx fiori deploy` uploads the artifact.

- Generate Deployment Configuration ABAP: generate-deployment-configuration-abap-c06b9cb.md
- Generate Deployment Configuration Cloud Foundry: generate-deployment-configuration-cloud-foundry-41e63bd.md
- SAP Fiori Launchpad configuration: sap-fiori-launchpad-configuration-bc3cb89.md
- Deployment of Application: deployment-of-application-607014e.md

**LANGUAGE**: None

**CODE**:
```text
# Action items:
# - Run the SAP Fiori tools generator UI or follow the linked docs to create the deployment config files.
# - Confirm config contains ABAP or CF target details (host, credentials, HTML5 repo service instance, etc.).
```

**STEP**: 4 — Deploy using SAP Fiori tools CLI (entry points)

**DESCRIPTION**: Use the SAP Fiori tools CLI to deploy. The project may expose an npm script (e.g., `npm run deploy`) that invokes the deployment flow; alternatively use `npx fiori deploy`. The selected deployment target (ABAP or Cloud Foundry) is determined by the generated deployment configuration files.

**LANGUAGE**: Shell

**CODE**:
```bash
# If the project provides an npm deploy script
npm run deploy

# Or invoke the Fiori CLI directly (reads your deployment configuration)
npx fiori deploy

# Get deploy command help
npx fiori deploy help
```

**STEP**: 5 — Enable verbose/debug logs during deployment

**DESCRIPTION**: For detailed logs from the backend and the archive/deploy steps, set the DEBUG environment variable when running the deploy command. Use the exact environment syntax for your OS/terminal.

**LANGUAGE**: Shell

**CODE**:
```bash
# macOS / Linux (detailed backend and archiving logs)
DEBUG=ux-odata-client npm run deploy
# or if using npx directly
DEBUG=ux-odata-client npx fiori deploy

# Windows (Command Prompt)
set DEBUG=ux-odata-client & npm run deploy

# Windows (PowerShell)
$env:DEBUG='ux-odata-client'; npm run deploy
```

**STEP**: 6 — ABAP-specific prerequisites and troubleshooting actions

**DESCRIPTION**: Ensure ABAP backend prerequisites and common troubleshooting steps:

- SAP_UI component must be version 7.53 or newer.
- The SAPUI5 Repository service must be activated and reachable.
- If deploy returns "Request failed with status code 400", check server logs and virus-scan configuration.

Actionable checks:
- Open SAP GUI transaction /IWFND/ERROR_LOG to read server-side error details.
- Open SAP GUI transaction /IWFND/VIRUS_SCAN to verify and configure virus-scan profiles (commonly missed during setup).
- If repository service appears inactive, activate it per SAP UI5/ABAP docs.

**LANGUAGE**: None

**CODE**:
```text
# Troubleshooting checklist (manual actions in SAP GUI):
# - Log into ABAP system and run transaction: /IWFND/ERROR_LOG
# - Inspect errors related to SAPUI5 repository uploads
# - Run transaction: /IWFND/VIRUS_SCAN and configure a virus-scan profile if missing
# - Verify component version: SAP_UI >= 7.53
```

**STEP**: 7 — Cloud Foundry (HTML5 Repository) deployment notes

**DESCRIPTION**: For Cloud Foundry deployment, create an instance of the HTML5 repository service in your BTP subaccount/space. Ensure other required services (authentication, destination, xsuaa, etc.) are provisioned if your app needs them. Use the generated Cloud Foundry deployment configuration and then run the same CLI deploy entry point.

**LANGUAGE**: None

**CODE**:
```text
# Action items for CF:
# - Create HTML5 Repository service instance in BTP (via cockpit or cf/bx CLI)
# - Ensure service instance names and credentials are inserted into deployment config
# - Run: npx fiori deploy   (CLI will use the CF deployment config to upload to the HTML5 repo)
```

**STEP**: 8 — SAP Fiori tools CLI general help

**DESCRIPTION**: Use the CLI help to list all available commands and to inspect options for the deploy command.

**LANGUAGE**: Shell

**CODE**:
```bash
# List all available fiori CLI commands
npx fiori help

# Get detailed help for the deploy command
npx fiori deploy help
```

**STEP**: 9 — When to open an SAP support incident

**DESCRIPTION**: If issues cannot be resolved by the above troubleshooting steps and debugging output, create an incident in the SAP Support Portal for component CA-UX-IDE and include the debug logs captured with DEBUG=ux-odata-client.

**LANGUAGE**: None

**CODE**:
```text
# Prepare for support:
# - Attach collected terminal logs (DEBUG=ux-odata-client output)
# - Attach ABAP /IWFND/ERROR_LOG entries and any virus-scan config screenshots
# - Open SAP Support Portal incident for component: CA-UX-IDE
```
--------------------------------

**TITLE**: Deployment configuration for ui5-deploy (ui5-deploy.yaml + .env)

**INTRODUCTION**: Quick reference and ready-to-use code examples for configuring ui5-deploy via ui5-deploy.yaml (and ui5.yaml defaults). Covers target connection, credentials (CI/CD and local), app metadata, exclude rules, MTA directory discovery, destination/prefix usage, and .env environment variable injection (env:VAR_NAME).

**TAGS**: ui5-deploy, ui5, deployment, ABAP, BTP, ci-cd, yaml, dotenv, .env

**STEP**: 1 — Minimal ui5-deploy.yaml using environment variables

**DESCRIPTION**: Minimal, secure deployment config that references environment variables for credentials. Use this file at project root as ui5-deploy.yaml. Replace placeholder env variable names with your CI/CD secrets.

**LANGUAGE**: YAML

**CODE**:
```yaml
# ui5-deploy.yaml
target:
  url: env:TARGET_URL          # required, pattern: <protocol>://<hostname>[:<port>]
  client: env:TARGET_CLIENT    # optional numeric client -> sap-client parameter
  params: env:TARGET_PARAMS    # optional string of additional query params, e.g. "sap-language=EN"
  scp: env:TARGET_SCP          # optional boolean; set true for ABAP on SAP BTP (default: false)
  service: env:TARGET_SERVICE  # optional path to ABAP repository OData service (default: /sap/opu/odata/UI5/ABAP_REPOSITORY_SRV)

credentials:
  username: env:DEPLOY_USER    # required for CI/CD; use env vars, do not store plain passwords
  password: env:DEPLOY_PASS    # required for CI/CD; prefer env vars

app:
  name: my.example.app         # required: unique application name (used for URL and ABAP object)
  package: Z_MY_PACKAGE        # required for creating new apps in ABAP backend
  transport: Z123456           # optional transport request
  description: "Fiori app deployed via ui5-deploy"
  exclude:
    - ".*\\.map$"              # array of regex strings: files matching these are excluded
    - "^test/.*"
  index: true                  # optional: generate and deploy additional index.html (default false)
```

**STEP**: 2 — target field details and examples

**DESCRIPTION**: Use these patterns and examples for target properties. client maps to URL parameter sap-client. params is appended as URL query string. Use scp=true for ABAP on SAP BTP to use SAP Cloud Platform auth flow.

**LANGUAGE**: YAML

**CODE**:
```yaml
# target field examples
target:
  url: "https://sap.example.com:443"       # required
  client: 100                              # optional -> translates to ?sap-client=100
  params: "sap-language=EN"                # optional -> appended to URL as query params
  scp: true                                # set when target is ABAP Environment on BTP
  service: "/sap/bc/ui5_ui5/sap/ABAP_REPO" # override default service path if exposed differently
```

**STEP**: 3 — credentials object (CI/CD) and local usage note

**DESCRIPTION**: Provide credentials only for CI/CD pipelines. Use env:VAR references. For local usage, prefer OS secure credential storage (no credentials object). Never commit plain passwords.

**LANGUAGE**: YAML

**CODE**:
```yaml
# credentials for CI/CD pipelines
credentials:
  username: env:CI_DEPLOY_USER
  password: env:CI_DEPLOY_PASSWORD
# Local (non CI/CD) usage: omit credentials; the deployment task will use OS secure storage / prompt the user.
```

**STEP**: 4 — app object specifics, exclude regex behavior, index

**DESCRIPTION**: Configure the backend application object created/updated during deployment. package is required only when creating a new app. exclude expects an array of regex strings evaluated via JavaScript string.match(). index:true causes an additional index.html to be created and deployed.

**LANGUAGE**: YAML

**CODE**:
```yaml
# app configuration
app:
  name: ZUI5_MYAPP            # required
  package: Z_DEV_PACKAGE      # required when creating new ABAP objects
  transport: Z200345          # optional transport request (if package requires it)
  description: "My app deployed by CI"
  exclude:
    - ".*\\.map$"             # excludes source map files
    - "^tests/.*"             # excludes all files under tests/
  index: false                # default false; set true to deploy a standalone index.html
```

**STEP**: 5 — Example: deployment for ABAP on SAP BTP (scp=true) with params and service override

**DESCRIPTION**: Full example for ABAP Environment on SAP BTP where scp=true. Show service override, params, and env-based credentials.

**LANGUAGE**: YAML

**CODE**:
```yaml
# ABAP on SAP BTP example
target:
  url: env:BTP_ABAP_URL
  client: env:BTP_CLIENT
  params: "sap-language=EN"
  scp: true
  service: "/sap/opu/odata/UI5/ABAP_REPOSITORY_SRV" # explicit or overridden alias path

credentials:
  username: env:BTP_DEPLOY_USER
  password: env:BTP_DEPLOY_PASS

app:
  name: ZBTP_FIORI_APP
  package: ZBTP_PACKAGE
  description: "Deployed to ABAP on BTP"
  index: true
```

**STEP**: 6 — .env file (root) usage and sample

**DESCRIPTION**: Store environment variables in a root-level .env file for local or CI testing (dotenv is supported). Do not commit real credentials. Use the pattern env:VAR_NAME inside ui5-deploy.yaml to reference these values.

**LANGUAGE**: text

**CODE**:
```
# .env (place at project root, keep out of version control)
TARGET_URL=https://sap.example.com
TARGET_CLIENT=100
TARGET_SCP=false
TARGET_SERVICE=/sap/opu/odata/UI5/ABAP_REPOSITORY_SRV

DEPLOY_USER=my_deploy_user
DEPLOY_PASS=S3cr3tP@ssw0rd

# Example BTP variables
BTP_ABAP_URL=https://btp-abap.example.com
BTP_CLIENT=001
BTP_DEPLOY_USER=ci_user
BTP_DEPLOY_PASS=ci_password
```

**STEP**: 7 — MTA directory, destination, and prefix behavior

**DESCRIPTION**: The tool locates the MTA directory by searching parent directories for mta.yaml; if none found, it defaults to the parent directory of the application. Destination for Cloud Foundry can be configured here or picked from ui5.yaml defaults. Prefix defaults to the app namespace or "test" when none found; choose a unique prefix to avoid service name collisions.

**LANGUAGE**: YAML

**CODE**:
```yaml
# Example of destination and prefix usage in ui5-deploy.yaml or ui5.yaml defaults
deployment:
  mtaDirectory: env:MTA_DIR        # optional override; otherwise nearest parent with mta.yaml is used
  destination: "MY_CF_DESTINATION" # Cloud Foundry destination (if used)
  prefix: "myteam"                 # optional prefix for MTA/service IDs; defaults to app namespace or "test"
```
--------------------------------

**TITLE**: Deployment of Application (fiori-tools)

**INTRODUCTION**: Practical, code-focused instructions for deploying SAP Fiori applications using fiori-tools. Covers deployments to ABAP (interactive and archive), Cloud Foundry (mta), and ABAP Test Mode. Includes exact CLI commands, package.json snippets, required files, and troubleshooting notes (telemetry and SAPUI5 version warnings).

**TAGS**: fiori-tools, ABAP, Cloud Foundry, deploy, npm, mta, ui5, archive, test-mode, telemetry, package.json

**STEP**: Deploy to ABAP (interactive via Command Palette or CLI)

**DESCRIPTION**: Use the VS Code / SAP Business Application Studio Command Palette entry "Fiori: Deploy Application" or run the npm deploy script inside your project folder. Follow interactive prompts (deployment configuration, username/password if backend auth required). After success, copy the application URL from the generated logs. If the target system has a lower SAPUI5 version, test more thoroughly (see Use Run Control).

**LANGUAGE**: shell

**CODE**:
```bash
# From the project root (where package.json is located)
npm run deploy

# Example output (search logs for "App available at"):
# ...info builder:custom deploy-to-abap * Done *
# ...info builder:custom deploy-to-abap App available at https://host:port/sap/bc/ui5_ui5/sap/app/index.html
# ...info builder:custom deploy-to-abap Deployment Successful.
# ...info builder:builder Build succeeded in 18 s
```

**STEP**: Deploy an Archive to ABAP (archive file or URL)

**DESCRIPTION**: Deploy a pre-built ABAP-compatible archive (.zip) using npx fiori deploy. You can provide an archive file path or an accessible archive URL. Add standard deployment parameters (destination, client, transport, package, description, ui5-deploy.yaml path) when needed.

**LANGUAGE**: shell

**CODE**:
```bash
# Deploy local archive file
npx fiori deploy --archive-path 'somefile.zip'

# Deploy archive by URL (URL must be accessible without authentication)
npx fiori deploy --archive-url 'https://someurl.com/archive.zip'

# Deploy with additional parameters (example):
npx fiori deploy \
  --archive-path 'somefile.zip' \
  -d 'MY_DESTINATION' \
  -u 'https://host:port' \
  -l '100' \
  -t 'TRANSPORT_REQUEST' \
  -n 'MyAppName' \
  -p 'Z_PACKAGE' \
  -e 'Deployment from fiori-tools' \
  -c '/path/to/ui5-deploy.yaml'
```

**STEP**: ABAP deployment parameters reference

**DESCRIPTION**: Parameter names you can pass to the deploy command (keys shown as they map to CLI options).

**LANGUAGE**: JSON

**CODE**:
```json
{
  "-d": "destination",
  "-u": "url",
  "-l": "client",
  "-t": "transport",
  "-n": "name",
  "-p": "package",
  "-e": "description",
  "-c": "/path/to/ui5-deploy.yaml"
}
```

**STEP**: Telemetry and environment validation notes

**DESCRIPTION**: Validate saved system/destination with the SAP Fiori environment check if you get deployment issues. A telemetry error may appear if there is no Internet connection during deploy — it is safe to ignore. To disable telemetry, set the environment variable before running deploy.

**LANGUAGE**: shell

**CODE**:
```bash
# Disable fiori-tools telemetry for current command:
export SAP_UX_FIORI_TOOLS_DISABLE_TELEMETRY=true
# then run deploy, e.g.
npm run deploy
```

**STEP**: Deploy to Cloud Foundry (build and deploy mta)

**DESCRIPTION**: For Cloud Foundry (SAP BTP) deploys, build the multi-target archive (MTA) from a folder containing mta.yaml, then run the deploy script. Note: using "Build MTA Project" in SAP Business Application Studio may produce an artifact not deployable via npm run deploy — always use npm run build to create the correct multi-target archive.

**LANGUAGE**: shell

**CODE**:
```bash
# Navigate to the root folder that contains mta.yaml
cd /path/to/project-root  # or "cd .." if currently inside a subfolder

# Build the multitarget archive (creates the deployable MTA)
npm run build

# Deploy the built MTA using the project's deploy script
npm run deploy
# The deploy process may take several minutes.
```

**STEP**: Preview and retrieve deployed URL on Cloud Foundry (Standalone Approuter)

**DESCRIPTION**: Use the SAP BTP Cockpit to find the deployed app route for standalone approuter deployments.

**LANGUAGE**: plain
**CODE**:
```text
1. Open SAP BTP Cockpit -> select target Space.
2. Applications tab -> search for your router name.
3. Open the router Overview page -> Application Routes shows the deployed URL.
4. Click the route to open the HTML5 application.
```

**STEP**: Preview and retrieve deployed URL on Cloud Foundry (Managed Approuter / HTML5 deployments)

**DESCRIPTION**: Use the HTML5 Applications tab in SAP BTP Cockpit or the Cloud Foundry CLI html5-list plugin to list and locate deployed HTML5 applications and their routes. If you do not have access to mta.yaml, run cf html5-list to list all HTML5 apps for the space.

**LANGUAGE**: shell

**CODE**:
```bash
# Install html5 plugin if not already installed (requires CF-Community repo)
cf install-plugin -r CF-Community "html5-plugin"

# Example command to list HTML5 apps and retrieve deployed URL:
# Replace <mta-id> with the ID field in mta.yaml and use the destination resource name:
cf html5-list -u -di <mta-id>-destination-service --runtime launchpad

# If you don't have mta.yaml or mta-id, list all HTML5 apps:
cf html5-list
```

**STEP**: ABAP Deployment in Test Mode (Test-only dry run)

**DESCRIPTION**: Configure and run a test-mode deployment that simulates create/read/update/delete operations without actual upload. Ensure @sap/ux-ui5-tooling >= 1.3.5. Add a deploy-test script in package.json and run npm run deploy-test from the project folder.

**LANGUAGE**: JSON

**CODE**:
```json
// package.json snippet: add or update the scripts section
{
  "scripts": {
    "deploy": "fiori deploy --config ui5-deploy.yaml",
    "deploy-test": "fiori deploy --config ui5-deploy.yaml --testMode true"
  },
  "devDependencies": {
    "@sap/ux-ui5-tooling": "^1.3.5"
  }
}
```

**LANGUAGE**: shell

**CODE**:
```bash
# Ensure tooling is up-to-date (run in project folder)
npm i @sap/ux-ui5-tooling@latest --save-dev

# Run test-mode deployment (dry run)
npm run deploy-test

# Notes:
# - Test Mode shows the operations that would be executed (create/read/update/delete) per file.
# - A successful test-mode run is not a guaranteed successful upload; use it to validate config.
```
--------------------------------

**TITLE**: Expose Fiori Application to Central Application Router (cFLP) on SAP BTP

**INTRODUCTION**: Step-by-step, code-focused instructions to expose an SAP Fiori application to the central application router by creating subaccount-level destinations for XSUAA and HTML5 Repository services, and enabling integration into the central Fiori Launchpad (cFLP). Includes exact destination property names, example values, and the manifest.json change required before rebuilding and deploying the MTA.

**TAGS**: fiori-tools, sap-btp, xsuaa, html5-repo, destinations, cFLP, mta, sap.cloud

**STEP**: Prerequisites / Context
**DESCRIPTION**: You must have Organization Manager authorizations to create subaccount-level destinations. Open the SAP BTP Cockpit for your subaccount and confirm you can access Service Instances, Instances and Subscriptions, Connectivity > Destinations, and HTML5 Applications.
**LANGUAGE**: Shell
**CODE**:
```Shell
# Cockpit URL (example - replace with your global/subaccount path)
https://account.int.sap.eu2.hana.ondemand.com/cockpit#/globalaccount/<GLOBAL_ACCOUNT_ID>/subaccount/<SUBACCOUNT_ID>
```

**STEP**: Prepare XSUAA (Authorization & Trust Management) service instance
**DESCRIPTION**: In Service Instances locate the XSUAA service created by your MTA, open its details, and copy (or create and copy) the service key name. You will use this service key name when creating a destination.
**LANGUAGE**: Shell
**CODE**:
```Shell
# UI path & image reference
# Cockpit -> Service Instances -> Authorization & Trust Management
# Image: images/FIORI_TOOLS_SERVICE_INSTANCE_280d554.png

# Example identifiers (replace <something_unique>)
XSUAA service instance name: test-<something_unique>-uaa
Service key name to copy: test-<something_unique>-uaa-service-key
```

**STEP**: Expose XSUAA as a destination (Connectivity > Destinations)
**DESCRIPTION**: Create a new destination of type Service Instance that points to your XSUAA service. Add two properties: ServiceKeyName (value = copied service key name) and sap.cloud.service (value = your MTA service name, e.g., test-<something_unique>).
**LANGUAGE**: Shell
**CODE**:
```Shell
# Cockpit -> Connectivity -> Destinations
# Image: images/FIORI_TOOLS_DESTINATION_8ce6980.png

# New Destination settings (example values)
Type: Service Instance
Service Instance: test-<something_unique>-uaa
Name: test-<something_unique>-uaa

# Destination Properties (add via "New Property")
ServiceKeyName = test-<something_unique>-uaa-service-key
sap.cloud.service = test-<something_unique>

# Save destination
```

**STEP**: Prepare HTML5 Application Repository service instance
**DESCRIPTION**: In Instances and Subscriptions locate the HTML5 Application Repository service (plan app-host), open its details, and copy (or create and copy) the service key name for the HTML5 repo deployer credentials.
**LANGUAGE**: Shell
**CODE**:
```Shell
# Cockpit -> Instances and Subscriptions -> HTML5 Application Repository
# Image: images/FIORI_TOOLS_SERVICE_INSTANCE_280d554.png

# Example identifiers (replace <something_unique>)
HTML5 repo service instance name: test-<something_unique>-html5-repo-host
Service key name to copy: test-<something_unique>-deployer-<something_unique>-html5-repo-host-credentials
```

**STEP**: Expose HTML5 Repository as a destination (Connectivity > Destinations)
**DESCRIPTION**: Create a new destination of type Service Instance for the HTML5 repo service. Set ServiceKeyName to the repo service key you copied and set sap.cloud.service to the same MTA service identifier used for XSUAA (test-<something_unique>).
**LANGUAGE**: Shell
**CODE**:
```Shell
# Cockpit -> Connectivity -> Destinations
# Image: images/FIORI_TOOLS_DESTINATION_8ce6980.png

# New Destination settings (example values)
Type: Service Instance
Service Instance: test-<something_unique>-html5-repo-host
Name: test-<something_unique>-html5-repo-host

# Destination Properties
ServiceKeyName = test-<something_unique>-deployer-<something_unique>-html5-repo-host-credentials
sap.cloud.service = test-<something_unique>    # MUST match the sap.cloud.service value used for the XSUAA destination

# Save destination
```

**STEP**: Test deployed HTML5 application in Cockpit
**DESCRIPTION**: Verify the application appears in HTML5 Applications and can be opened. This confirms repository/destination configuration is visible.
**LANGUAGE**: Shell
**CODE**:
```Shell
# Cockpit -> HTML5 Applications
# Image: images/FIORI_TOOLS_HTML5_1862c54.png

# Search & open your app (example)
Search: test-<something_unique>
Open application: test<something_unique>ztravel
```

**STEP**: Enable integration into central Fiori Launchpad (manifest.json change)
**DESCRIPTION**: Add the sap.cloud block to the root of your application's manifest.json to make the app public and associate it with the MTA service name. Rebuild and deploy your MTA after this change.
**LANGUAGE**: JSON
**CODE**:
```JSON
// In your application's manifest.json (root node)
"sap.cloud": {
  "public": true,
  "service": "test-<something_unique>"
}
```

**STEP**: Build and deploy MTA
**DESCRIPTION**: After editing manifest.json, rebuild your MTA archive and deploy to the subaccount so changes are applied and destinations are honored for cFLP integration.
**LANGUAGE**: Shell
**CODE**:
```Shell
# Example build & deploy commands (adjust per your toolchain)
mbt build
cf deploy mta_archives/<your-mta>.mtar    # or use Multi-Target Application deployment in BTP cockpit
```

**STEP**: Important note / failure mode
**DESCRIPTION**: If you skip the manifest.json sap.cloud configuration and destination setup above, the application can be configured in the cFLP but will fail at runtime when loaded.
**LANGUAGE**: Shell
**CODE**:
```Shell
# Reminder
# Ensure both destinations (XSUAA and HTML5 repo) exist at subaccount level and sap.cloud.service values match your MTA service name.
```
--------------------------------

**TITLE**: Generate Deployment Configuration for ABAP (ui5-deploy.yaml)

**INTRODUCTION**: Create or update a ui5-deploy.yaml for deploying SAP Fiori apps to an ABAP system using the SAPUI5 Repository OData service. This guide covers prerequisites, CLI/VS Code wizard commands, interactive prompt options, transport handling behavior, SSL handling, and two ready-to-use example YAML configurations (basic and with additional params).

**TAGS**: fiori-tools, ABAP, SAPUI5, ui5-deploy.yaml, deployment, vscode, npx, npm

**STEP**: 1 — ABAP prerequisites and limitations

**DESCRIPTION**: Verify ABAP-side prerequisites and understand task limitations before generating deployment configuration. Required actions:
- Ensure SAP component SAP_UI 7.53 or higher is installed (for systems <7.53 use the manual upload approach).
- Enable and expose the SAPUI5 Repository OData service and make it accessible from your dev environment.
- Ensure your user has S_DEVELOP authorization for repository operations.
- Note authentication support: Basic Auth (username/password) supported for all back-ends; OAuth2 supported for ABAP on SAP BTP.
- Understand limitations: the deployment task does not create ABAP transports for target packages that require one; a transport must exist unless you use the wizard options that try to create one (see transport options step).

**LANGUAGE**: text

**CODE**:
```text
Prerequisites:
- SAP_UI >= 7.53 installed in target system (else use manual upload)
- SAPUI5 Repository OData service enabled and reachable
- User has S_DEVELOP authorization

Authentication:
- Basic auth supported (username/password)
- OAuth2 supported for ABAP on SAP BTP

Limitations:
- Deployment task itself does not create ABAP transports; ensure a transport exists if target package requires one.
```

**STEP**: 2 — Launch the deployment configuration wizard (VS Code) or CLI

**DESCRIPTION**: Generate ui5-deploy.yaml interactively. Actions:
- From VS Code command palette: run "Fiori: Add Deployment Configuration" and choose the SAP Fiori project.
- Or from the project folder CLI: run "npx fiori add deploy-config".
- The wizard prompts for required data and writes ui5-deploy.yaml based on your inputs and existing ui5.yaml (used for preview).
- The command also updates package.json to add an npm deploy script (so you can run npm run deploy after generating config).

**LANGUAGE**: bash

**CODE**:
```bash
# From VS Code: Command Palette -> "Fiori: Add Deployment Configuration"
# Or from project root (CLI)
npx fiori add deploy-config

# After generation, use:
# build with deploy config
ui5 build --config ui5-deploy.yaml

# after package.json is updated you can run:
npm run deploy
```

**STEP**: 3 — Wizard prompts and transport options (interactive choices)

**DESCRIPTION**: Provide values for these prompts when running the wizard. Use the described behavior for each option (action-oriented).

- Please choose the target: ABAP
- Select Target System: choose a saved SAP system or enter a target system URL (VS Code only)
- Destination (SAP Business Application Studio only): choose from saved destinations
- Enter client: add a new client or accept default
- SAPUI5 ABAP Repository: name for the deployed application (repository path)
- Deployment Description: optional description
- Package: valid ABAP package name
- How do you want to enter Transport Request: choose one:
  - Enter manually: you will type the transport request
  - Choose from existing: wizard fetches applicable transports from target system; select one
  - Create new: wizard attempts to create a new transport automatically. If creation fails, you must provide manually. Generated TR description: "Created by SAP Fiori tools for ABAP repository <repository name>"
  - Create during deployment: transport is created automatically at first deployment. If creation fails, deployment fails. Generated TR description: "Created by SAP Open UX Tools for ABAP repository <repository name>"
- Transport Request: choose or enter a valid transport request when prompted

**LANGUAGE**: text

**CODE**:
```text
Wizard prompts (provide values interactively):
- target: ABAP
- target system: saved system or URL (VS Code)
- destination: (Business Application Studio only)
- client: e.g. 200
- repository/app name: e.g. /TEST/SAMPLE_APP
- description: optional
- package: e.g. /TEST/UPLOAD
- transport entry mode: Enter manually | Choose from existing | Create new | Create during deployment
- transport: select or enter TR ID
```

**STEP**: 4 — SSL certificate temporary bypass (only if necessary)

**DESCRIPTION**: If SSL certificate validation fails (expired/wrong host/unverifiable leaf signature) and you need a temporary bypass for development/testing, set NODE_TLS_REJECT_UNAUTHORIZED=0. Recommended: fix certificate instead of bypassing.

**LANGUAGE**: bash

**CODE**:
```bash
# Temporary bypass on macOS / Linux
export NODE_TLS_REJECT_UNAUTHORIZED=0
# run your command, e.g.:
ui5 build --config ui5-deploy.yaml

# Temporary bypass on Windows (cmd)
set NODE_TLS_REJECT_UNAUTHORIZED=0
# then run the command
```

**STEP**: 5 — Example configuration: basic ABAP deploy (ui5-deploy.yaml)

**DESCRIPTION**: Drop this ui5-deploy.yaml into your project root to deploy the dist folder (excludes *.test.js and internal.md). Authentication reads username/password from environment variables XYZ_USER / XYZ_PASSWORD. Target system URL is https://XYZ.sap-system.corp:44311, client 200. App is created/updated at /TEST/SAMPLE_APP in package /TEST/UPLOAD and recorded in transport XYZQ300582. Use ui5 build --config ui5-deploy.yaml to deploy.

**LANGUAGE**: yaml

**CODE**:
```yaml
builder:
  customTasks:
  - name: deploy-to-abap
    afterTask: replaceVersion
    configuration:
      target:
        url: https://XYZ.sap-system.corp:44311
        client: 200
        auth: basic
      credentials:
        username: env:XYZ_USER
        password: env:XYZ_PASSWORD
      app:
        name: /TEST/SAMPLE_APP
        package: /TEST/UPLOAD
        transport: XYZQ300582
      exclude:
      - .*\.test.js
      - internal.md
```

**STEP**: 6 — Example configuration: add additional params (sap-language)

**DESCRIPTION**: Add request parameters such as sap-language under target.params. Sample shown below adds "sap-language: en".

**LANGUAGE**: yaml

**CODE**:
```yaml
builder:
  customTasks:
  - name: deploy-to-abap
    afterTask: replaceVersion
    configuration:
      target:
        url: https://XYZ.sap-system.corp:44311
        client: 200
        auth: basic
        params:
          sap-language: en
      credentials:
        username: env:XYZ_USER
        password: env:XYZ_PASSWORD
      app:
        name: /TEST/SAMPLE_APP
        package: /TEST/UPLOAD
        transport: XYZQ300582
      exclude:
      - .*\.test.js
      - internal.md
```
--------------------------------

**TITLE**: Generate Deployment Configuration for Cloud Foundry (SAP Fiori tools)

**INTRODUCTION**: Step-by-step, code-focused instructions to create and prepare an MTA-based deployment configuration for SAP Fiori projects targeting Cloud Foundry. Includes prerequisites (MTA, CF CLI, MultiApps plugin), commands to generate/update mta.yaml, build and deploy, and SAP Business Application Studio-specific generation steps.

**TAGS**: fiori-tools, cloud-foundry, mta, deployment, sap-business-application-studio, cf-cli, multiapps

STEP: Prerequisites — Install MTA (multitarget application tool)
DESCRIPTION: Install MTA globally (required to explore/validate mta.yaml and build MTA archives). If permission errors occur on macOS, adjust folder ownership. On Windows, ensure GNU Make 4.2.1 is installed to build MTA archives.
LANGUAGE: Bash
CODE:
```bash
# Install MTA globally (npm)
npm i -g mta

# macOS permission fix (if error: EACCES: permission denied, mkdir bin)
sudo chown -R $(whoami) FOLDER-NAME

# Windows: ensure GNU Make 4.2.1 is installed separately (required for building MTA archives)
# See Cloud MTA Build Tool Makefile documentation for details
```

STEP: Prerequisites — Install Cloud Foundry CLI (cf) and login
DESCRIPTION: Install CF CLI to access SAP BTP. After installation, log in to the target CF API endpoint. On Windows, create CF_HOME environment variable with write permissions.
LANGUAGE: Bash / PowerShell
CODE:
```bash
# Example CF login command (adjust api endpoint per landscape)
cf login -a https://api.cf.sap.hana.ondemand.com

# Windows: create CF_HOME environment variable via System > Environment Variables:
# 1) New User Variable: CF_HOME
# 2) Point to a directory and set write permissions
# 3) Close all command windows to apply
```

STEP: Prerequisites — Install MultiApps Cloud Foundry plugin
DESCRIPTION: Install the MultiApps CF CLI plugin to enable MTA operations (deploy, remove, list, etc.).
LANGUAGE: Bash
CODE:
```bash
cf install-plugin -r CF-Community "multiapps"
```

STEP: Ensure runtime requirements before deployment
DESCRIPTION: Verify you have a correctly configured destination to the back-end system and CF user authorization to deploy. If deploying from a project, you will run build and deploy commands from the MTA directory.
LANGUAGE: Bash
CODE:
```bash
# After generating/updating mta.yaml, run from the MTA directory:
npm run build   # builds the deployable MTA archive (mta.yaml/mta archive)
npm run deploy  # deploys the built MTA archive to Cloud Foundry
```

STEP: Generate Deployment Configuration (command-line or VS Code Command Palette)
DESCRIPTION: Run the Fiori tools generator to create or update an MTA configuration (mta.yaml). You can launch the wizard from VS Code (Command Palette) or via npx in the project folder. Follow prompts to choose Cloud Foundry and select/enter the destination name. If no mta.yaml exists, the generator can create one for you.
LANGUAGE: Bash
CODE:
```bash
# From the project folder (CLI):
npx fiori add deploy-config

# From VS Code: Command Palette -> "Fiori: Add Deployment Configuration"
# Follow prompts:
# - Choose Target: Cloud Foundry
# - Destination Name: <enter destination name if not auto-detected>

# Note: Instance-based destinations defined in an existing mta.yaml appear labeled:
# "<destination-name> (Instance Based Destination)"
```

STEP: Resulting artifacts & configuration (project layout)
DESCRIPTION: After successful generation, the project tree will include MTA project files and UI5 deployment config. This is the typical resulting directory structure and filenames to expect.
LANGUAGE: text
CODE:
```
mta_directory
|_ application_directory
   |_ ...
   |_ webapp
      |_ ...
      |_ manifest.json
   |_ ui5-deploy.yaml
   |_ ui5.yaml
   |_ xs-app.json
...
|_ package.json
|_ mta.yaml
|_ xs-security.json
```

STEP: SAP Business Application Studio — Create Basic MTA project
DESCRIPTION: If you lack an MTA file in SAP Business Application Studio, generate a Basic Multitarget Application workspace and then add modules (app router and SAP Fiori app) using the provided templates. The UI actions update mta.yaml automatically.
LANGUAGE: Instructions (IDE)
CODE:
```text
1. File > New Project from Template
2. Select "Basic Multitarget Application"
3. Enter project name > Finish
# Workspace opens with MTA as root

# To add App Router:
1. Right-click mta.yaml > Create MTA Module from Template
2. Select "Approuter Configuration" > provide details > Next
# mta.yaml is updated with destination-content module

# To add SAP Fiori app:
1. Right-click mta.yaml > Create MTA Module from Template
2. Choose "SAP Fiori application" generator
3. Provide application details
# Deployment configuration is enabled and appended to existing mta.yaml by default
```

STEP: Notes and tips
DESCRIPTION: Consolidated operational notes to avoid common issues.
LANGUAGE: text
CODE:
```text
- If no mta.yaml exists at project or CAP root folder, the generator offers to create one.
- On macOS: use `sudo chown -R $(whoami) FOLDER-NAME` to fix EACCES errors during npm global installs.
- On Windows: install GNU Make 4.2.1 to build MTA archives and set CF_HOME environment variable with write permissions.
- After generator completes, run `npm run build` in the generated MTA directory to produce a deployable archive and then `npm run deploy` to deploy to Cloud Foundry.
```
--------------------------------

**TITLE**: Add SAP Fiori Launchpad Configuration (manifest.json)

**INTRODUCTION**: This guide shows how to add the inbound navigation configuration required to register a UI5 application with the SAP Fiori Launchpad (FLP). It covers using the VS Code command palette wizard, the exact manifest.json snippet to add, and how to launch the interactive creator from the terminal (@sap-ux/create). Use these steps to create the semantic object/action mapping that FLP needs to open your app via intent-based navigation.

**TAGS**: fiori-tools, sap, flp, manifest.json, launchpad, sap-ux, ui5

**STEP**: 1 — Use VS Code wizard to add FLP configuration

**DESCRIPTION**: In VS Code, run the provided Fiori wizard which updates webapp/manifest.json automatically. The wizard prompts for the required inbound fields:
- Semantic Object (unique name)
- Action (typically "display")
- Title (tile title)
- Subtitle (optional)

The wizard will create an inbound entry under sap.app.crossNavigation.inbounds in your manifest.json. Recommended inbound key format: "<SemanticObject>-<action>" (e.g., "MyObject-display").

**LANGUAGE**: CLI / VS Code

**CODE**:
```text
# In VS Code:
# 1. Open Command Palette (Ctrl/Cmd+Shift+P)
# 2. Run: Fiori: Add Fiori Launchpad Configuration
# 3. Fill prompts: Semantic Object, Action (display), Title, Subtitle (optional)
# The wizard updates: <project-root>/webapp/manifest.json
```

**STEP**: 2 — Manual manifest.json example (add or verify)

**DESCRIPTION**: If you prefer to edit the manifest manually or to see what the wizard adds, insert an inbound object under sap.app.crossNavigation.inbounds in webapp/manifest.json. Ensure the inbound id (key) is unique within the file. Include a signature object (parameters) even if empty.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.app": {
    "id": "your.app.namespace",
    "applicationVersion": {
      "version": "1.0.0"
    },
    "title": "{{appTitle}}",
    "crossNavigation": {
      "inbounds": {
        "MySemanticObject-display": {
          "semanticObject": "MySemanticObject",
          "action": "display",
          "title": "Title of the application",
          "subTitle": "Optional subtitle for the tile",
          "signature": {
            "parameters": {}
          }
        }
      }
    }
  }
}
```

Notes:
- File path: <project-root>/webapp/manifest.json
- Inbound key example: "MySemanticObject-display" — must be unique.
- Use "semanticObject" and "action" to register the intent that FLP uses to launch your app.
- Add required additional properties (e.g., parameters in signature) according to your app routing needs.

**STEP**: 3 — Example: add route signature parameter (optional)

**DESCRIPTION**: If your app expects URL parameters, declare them in the inbound signature.parameters object to document and enforce expected parameters.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.app": {
    "crossNavigation": {
      "inbounds": {
        "MySemanticObject-display": {
          "semanticObject": "MySemanticObject",
          "action": "display",
          "title": "Title of the application",
          "signature": {
            "parameters": {
              "productId": {
                "required": true
              },
              "mode": {
                "defaultValue": {
                  "value": "display"
                }
              }
            }
          }
        }
      }
    }
  }
}
```

**STEP**: 4 — Add FLP configuration from terminal with @sap-ux/create

**DESCRIPTION**: Use the @sap-ux/create package to launch an interactive creator from the terminal. This runs a guided flow similar to the VS Code wizard and updates manifest.json. Use npx to avoid global install.

**LANGUAGE**: Shell

**CODE**:
```bash
# Run the interactive creator (recommended: use npx so you don't need a global install)
npx @sap-ux/create

# Follow the interactive prompts and choose the option to add a Fiori Launchpad configuration.
# The tool will update <project-root>/webapp/manifest.json with the inbound entry.
```

Tip: If you need help/options for the package, run:
```bash
npx @sap-ux/create --help
```

**STEP**: 5 — Verification and deployment notes

**DESCRIPTION**: After adding the inbound:
- Verify manifest.json is valid JSON.
- Ensure the inbound id is unique across the application.
- Deploy to your target (Cloud Foundry or ABAP) using your normal deployment steps. FLP will use the semanticObject/action to link tiles/target mappings to your app.
- If you add tiles in an FLP site, use the same semanticObject and action when creating target mappings or tiles.

**LANGUAGE**: Text

**CODE**:
```text
# Checklist:
# - <project-root>/webapp/manifest.json contains sap.app.crossNavigation.inbounds with your inbound
# - inbound key is unique (recommended: <SemanticObject>-<action>)
# - signature.parameters declared for any required route/query params
# - Deploy and configure FLP site (Cloud Foundry or ABAP) target mappings/tiles using the same Semantic Object and Action
```
--------------------------------

**TITLE**: SAP Fiori Tools — Security Checklist and Integration for SAPUI5 Apps

**INTRODUCTION**: Short, actionable guidance for integrating SAPUI5 security guidance into a Fiori tooling project. Use this to add project-level documentation, a CI job placeholder, and a local script entry so developers and CI pipelines run the required security checks before deployment. Always follow the official "Securing Apps" guide for the exact checks and tool recommendations.

**TAGS**: fiori-tools, sapui5, security, deployment, ci, checklist, documentation

STEP: 1 — Reference official Securing Apps guidance

DESCRIPTION: Link to the official SAPUI5 "Securing Apps" documentation. Use this link as the authoritative source for which security scans, checks, and mitigations you must apply to SAPUI5 applications prior to deployment.

LANGUAGE: text

CODE:
```
https://ui5.sap.com/sdk/#/topic/91f3d8706f4d1014b6dd926db0e91070
```

STEP: 2 — Add project SECURITY.md with checklist and instructions

DESCRIPTION: Create a top-level documentation file (e.g., ./SECURITY.md or ./documentation/SECURITY.md) listing the security checklist and pointing developers to the official guide. Keep the checklist actionable: dependency checks, static analysis, SAPUI5-specific checks, and deployment-time checks.

LANGUAGE: markdown

CODE:
```markdown
# Security Checklist for SAPUI5 / Fiori Tools Projects

Authoritative guidance: https://ui5.sap.com/sdk/#/topic/91f3d8706f4d1014b6dd926db0e91070

Minimum project checklist (update per official guide):
- Dependency scanning (e.g., npm audit, SCA tool)
- Static code analysis for JS/CSS/HTML
- SAPUI5-specific checks (XSS, CSP, resource exposure)
- Verify manifest and descriptor security settings
- Validate server-side controls (CORS, auth, session handling)
- Run final packaging verification before deploy

How to run locally:
1. Install or configure the security tools referenced by the official guide.
2. Run the project's security script: `npm run security` (see package.json)

CI integration:
- Ensure a CI job runs the same security script and fails the pipeline on issues.
- Record the results/artifacts for audit purposes.

Contact:
- Add the security owner or team responsible for fixes and reviews.
```

STEP: 3 — Add a package.json script placeholder to centralize security execution

DESCRIPTION: Provide a single NPM script entry point that CI and developers call. Replace the placeholder commands with actual security tool commands recommended by the official SAPUI5 guidance.

LANGUAGE: JSON

CODE:
```json
{
  "name": "your-fiori-app",
  "version": "1.0.0",
  "scripts": {
    "build": "ui5 build --include-task=generateManifestBundle",
    "test": "npm run lint && npm run unit",
    "security": "echo \"Run SAPUI5 security checks per https://ui5.sap.com/sdk/#/topic/91f3d8706f4d1014b6dd926db0e91070\" && exit 0"
  }
}
```

STEP: 4 — Add a CI job that invokes the security script (example: GitHub Actions)

DESCRIPTION: Add a CI job to call the centralized security script. Replace echo/placeholder with actual tool invocations after selecting tools from the official guide. Ensure the job fails on non-zero exit codes.

LANGUAGE: yaml

CODE:
```yaml
# .github/workflows/security.yml
name: Security checks

on:
  pull_request:
  push:
    branches: [ main ]

jobs:
  security:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Use Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18'
      - name: Install dependencies
        run: npm ci
      - name: Run security script (placeholder)
        run: npm run security
        # Replace the npm run security content with the concrete checks recommended by:
        # https://ui5.sap.com/sdk/#/topic/91f3d8706f4d1014b6dd926db0e91070
```

STEP: 5 — Document where to update and how to enforce

DESCRIPTION: Keep the SECURITY.md, package.json script, and CI job aligned. When you adopt specific tools (SAST, dependency scanners, SAPUI5 analyzers), update:
- ./SECURITY.md with run instructions and expected outputs
- package.json "security" script to invoke the real toolchain
- CI job to persist results/artifacts and fail builds on issues

LANGUAGE: text

CODE:
```
Paths to update:
- ./SECURITY.md
- package.json -> "scripts.security"
- CI config -> .github/workflows/security.yml (or .gitlab-ci.yml, etc.)

Required action:
- Replace placeholders with concrete commands per the SAPUI5 "Securing Apps" guide.
- Verify and enforce in CI before deployment to target system.
```
--------------------------------

**TITLE**: Undeploy an Application (SAP Fiori tools)

**INTRODUCTION**: Instructions and runnable commands to undeploy SAP Fiori applications from ABAP systems and from Cloud Foundry (CF) on SAP BTP. Includes in-project and out-of-project commands, required flags, and package.json script to enable undeploy via npm.

**TAGS**: fiori-tools, undeploy, ABAP, Cloud Foundry, CF, @sap/ux-ui5-tooling, ui5-deploy.yaml, npm, npx

**STEP**: Undeploy from ABAP (within project)

**DESCRIPTION**: Run the undeploy script from your project root. When prompted, review the undeployment configuration and confirm by pressing Y.

**LANGUAGE**: Shell

**CODE**:
```bash
# From your project directory
npm run undeploy

# When prompted: check configuration and press 'Y' to confirm
```

**STEP**: Add undeploy script to package.json (if missing)

**DESCRIPTION**: If package.json does not contain an undeploy script, update your project to use @sap/ux-ui5-tooling and add the undeploy script. This enables "npm run undeploy" to call the fiori undeploy command with the ui5-deploy.yaml configuration file.

**LANGUAGE**: JSON

**CODE**:
```json
// package.json (add inside "scripts")
{
  "scripts": {
    "undeploy": "fiori undeploy --config ui5-deploy.yaml"
  }
}
```

**STEP**: Undeploy from ABAP from outside a project — VS Code / local shell

**DESCRIPTION**: Run npx with explicit connection parameters when you are not in the project directory or do not want to use the project config. Replace placeholders with values from your ui5-deploy.yaml (target URL, app name, transport request, client number). Use --noConfig to skip loading local config files.

**LANGUAGE**: Shell

**CODE**:
```bash
# Replace placeholders: <Target_ABAP_system_url>, <Application_name>, <Transport_request>, <Client_number>
npx @sap/ux-ui5-tooling fiori undeploy \
  --url <Target_ABAP_system_url> \
  --name <Application_name> \
  --transport <Transport_request> \
  --client <Client_number> \
  --noConfig
```

**STEP**: Undeploy from ABAP from outside a project — SAP Business Application Studio

**DESCRIPTION**: Use npx with a destination defined in your BAS environment. Replace placeholders with values from your ui5-deploy.yaml (destination name, app name, transport request, client number). Use --noConfig to skip local config.

**LANGUAGE**: Shell

**CODE**:
```bash
# Replace placeholders: <Destination_name>, <Application_name>, <Transport_request>, <Client_number>
npx @sap/ux-ui5-tooling fiori undeploy \
  --destination <Destination_name> \
  --name <Application_name> \
  --transport <Transport_request> \
  --client <Client_number> \
  --noConfig
```

**STEP**: Locate values needed by the commands

**DESCRIPTION**: Find the correct values for --url / --destination / --name / --transport / --client in your project's ui5-deploy.yaml file.

**LANGUAGE**: YAML

**CODE**:
```yaml
# ui5-deploy.yaml (example location and keys to inspect)
# Inspect this file in your application to retrieve deployment/undeploy parameters
# (Exact keys depend on your project configuration)
```

**STEP**: Undeploy from Cloud Foundry (CF)

**DESCRIPTION**: Log in to Cloud Foundry and undeploy the multi-target application (MTA) by mta-id. Use flags to delete bound services and service keys along with the application.

**LANGUAGE**: Shell

**CODE**:
```bash
# Log in to Cloud Foundry
cf login -a

# Undeploy the MTA, replace <mta-id> with your application's mta id
cf undeploy <mta-id> --delete-services --delete-service-keys
```

**STEP**: Reference for CF API (optional)

**DESCRIPTION**: Use this CF API endpoint for documentation or environment-specific login if needed.

**LANGUAGE**: URL

**CODE**:
```
https://api.cf.sap.hana.ondemand.com/
```
--------------------------------

**TITLE**: Fiori Elements — Defining and Grouping Form Actions (UI.DataFieldForAction, UI.DataFieldForIntentBasedNavigation, UI.DataFieldForActionGroup)

**INTRODUCTION**: Practical, code-focused examples for adding in-app actions, external navigation actions, grouping actions into menus, and manifest-based actions for SAP Fiori Elements object/page forms. Use these XML/JSON snippets in your annotation files and manifest.json to implement form actions, move them to header/footer, and group them into action menus. Note restrictions (criticality, manifest grouping) are highlighted where relevant.

**TAGS**: fiori-tools, annotations, UI.DataFieldForAction, UI.DataFieldForIntentBasedNavigation, UI.DataFieldForActionGroup, manifest, objectpage, form

STEP: 1 — Add an in-application form action (UI.DataFieldForAction) to a form section

DESCRIPTION: Use an OData UI annotation file (XML) to add a UI.DataFieldForAction in the form section for an entity. The Action property references the bound OData action/function name. Place this in your annotations file (e.g., annotations/annotations.xml) targeting the entity type used by the form.

LANGUAGE: XML

CODE:
```xml
<!-- File: annotations/annotations.xml -->
<Annotations Target="MyService.MyEntityType" xmlns="http://docs.oasis-open.org/odata/ns/edm">
  <!-- Add action inside a FieldGroup for a form section -->
  <Annotation Term="UI.FieldGroup">
    <Record>
      <PropertyValue Property="Data">
        <Collection>
          <Record Type="UI.DataFieldForAction">
            <!-- OData action/function name (bound action) -->
            <PropertyValue Property="Action" String="MyService.MyEntityType/MyAction"/>
            <PropertyValue Property="Label" String="Perform My Action"/>
            <!-- Optional: whether action requires the current entity context -->
            <PropertyValue Property="RequiresContext" Bool="true"/>
          </Record>
          <!-- Add other fields as needed -->
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

STEP: 2 — Add an external navigation action (UI.DataFieldForIntentBasedNavigation)

DESCRIPTION: Use UI.DataFieldForIntentBasedNavigation for intent-based navigation (launchpad navigation to a target app). Provide SemanticObject and Action properties. This belongs in the same annotation file and can be placed in form sections, header actions, or footer as needed.

LANGUAGE: XML

CODE:
```xml
<!-- File: annotations/annotations.xml -->
<Annotations Target="MyService.MyEntityType" xmlns="http://docs.oasis-open.org/odata/ns/edm">
  <Annotation Term="UI.FieldGroup">
    <Record>
      <PropertyValue Property="Data">
        <Collection>
          <Record Type="UI.DataFieldForIntentBasedNavigation">
            <PropertyValue Property="SemanticObject" String="Customer"/>
            <PropertyValue Property="Action" String="displayFactSheet"/>
            <PropertyValue Property="Label" String="Open Customer"/>
            <!-- Note: RequiresContext can be set, but it is generally not relevant for form actions in the editor -->
          </Record>
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

STEP: 3 — Move actions to the page header (HeaderInfo Actions) using annotations

DESCRIPTION: To show form actions in the page header, add the same UI.DataFieldForAction or UI.DataFieldForIntentBasedNavigation records inside the UI.HeaderInfo Actions collection. This is an annotation-level change — the editor/tools will render these actions in the header.

LANGUAGE: XML

CODE:
```xml
<!-- File: annotations/annotations.xml -->
<Annotations Target="MyService.MyEntityType" xmlns="http://docs.oasis-open.org/odata/ns/edm">
  <Annotation Term="UI.HeaderInfo">
    <Record>
      <PropertyValue Property="TypeName" String="My Entity"/>
      <PropertyValue Property="Title" Path="Name"/>
      <PropertyValue Property="Actions">
        <Collection>
          <!-- In-application action -->
          <Record Type="UI.DataFieldForAction">
            <PropertyValue Property="Action" String="MyService.MyEntityType/MyAction"/>
            <PropertyValue Property="Label" String="Do Something"/>
            <PropertyValue Property="RequiresContext" Bool="true"/>
          </Record>

          <!-- Intent-based navigation action -->
          <Record Type="UI.DataFieldForIntentBasedNavigation">
            <PropertyValue Property="SemanticObject" String="Customer"/>
            <PropertyValue Property="Action" String="displayFactSheet"/>
            <PropertyValue Property="Label" String="Open Customer"/>
          </Record>
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

STEP: 4 — Group annotation-based actions into an action menu (UI.DataFieldForActionGroup)

DESCRIPTION: Create an action menu using UI.DataFieldForActionGroup with an inner Data collection of UI.DataFieldForAction records. You can add annotation-based actions to existing menus or move annotation-based actions into them. Important: actions with criticality cannot be moved into action menus (criticality is not supported in menus).

LANGUAGE: XML

CODE:
```xml
<!-- File: annotations/annotations.xml -->
<Annotations Target="MyService.MyEntityType" xmlns="http://docs.oasis-open.org/odata/ns/edm">
  <!-- Example: an "More Actions" action group in header -->
  <Annotation Term="UI.HeaderInfo">
    <Record>
      <PropertyValue Property="Actions">
        <Collection>
          <Record Type="UI.DataFieldForActionGroup">
            <PropertyValue Property="Label" String="More Actions"/>
            <PropertyValue Property="Data">
              <Collection>
                <Record Type="UI.DataFieldForAction">
                  <PropertyValue Property="Action" String="MyService.MyEntityType/Action1"/>
                  <PropertyValue Property="Label" String="Action 1"/>
                </Record>
                <Record Type="UI.DataFieldForAction">
                  <PropertyValue Property="Action" String="MyService.MyEntityType/Action2"/>
                  <PropertyValue Property="Label" String="Action 2"/>
                </Record>
              </Collection>
            </PropertyValue>
          </Record>
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

STEP: 5 — Declare manifest-based actions (webapp/manifest.json) and note Page Editor restriction

DESCRIPTION: You can also define header/footer actions in the manifest.json (sap.ui.generic.app pages component settings). However, manifest-based actions cannot be grouped into menus using the Page Editor. Use manifest actions for custom client implementations or runtime-only actions; prefer annotations if you need Page Editor support.

LANGUAGE: JSON

CODE:
```json
// File: webapp/manifest.json (partial)
{
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "MyEntitySet",
        "component": {
          "name": "sap.suite.ui.generic.template.ObjectPage",
          "settings": {
            "actions": [
              {
                "id": "customAction1",
                "type": "Action",
                "text": "Custom Action",
                "icon": "sap-icon://action",
                "press": "onCustomActionPress"
              }
            ]
          }
        }
      }
    ]
  }
}
```

STEP: 6 — Implementation pointers and constraints (short checklist)

DESCRIPTION: Quick action-oriented checklist for code generation and editor behavior.

LANGUAGE: JSON

CODE:
```json
{
  "checklist": [
    "Use UI.DataFieldForAction for in-app actions and reference a bound OData action (Action property).",
    "Use UI.DataFieldForIntentBasedNavigation for external launchpad navigation (SemanticObject + Action).",
    "To render actions in the header, add them under UI.HeaderInfo -> Actions.",
    "To group annotation-based actions, use UI.DataFieldForActionGroup with a Data collection of UI.DataFieldForAction records.",
    "Do NOT add actions with criticality to action groups (criticality not supported in menus).",
    "Manifest-defined actions (webapp/manifest.json) cannot be grouped into menus via the Page Editor."
  ]
}
```
--------------------------------

**TITLE**: Analytical Chart (List Report — Add/Configure UI.Chart for SAP Fiori Tools)

**INTRODUCTION**: Quick developer reference for adding, deleting, and maintaining an Analytical Chart (a List Report "flavor" in OData V4) in a Fiori tools Page Editor. Includes safe, actionable annotation/manifest/CDS examples to generate chart UI, measures, dimensions, and presentation variant (sorting). Use these snippets as templates to generate or modify project files.

**TAGS**: fiori-tools, list-report, analytical-chart, UI.Chart, annotations, ODataV4, CDS, manifest, sapui5

**STEP**: Prerequisites
**DESCRIPTION**: Ensure the project and entity meet requirements before adding an Analytical Chart.
- The List Report must not use Multiple Views.
- The main entity must expose aggregable and groupable properties (aggregations/groupable annotations).
- If using transformation aggregations, run with SAPUI5 >= 1.106 (supports @Analytics.AggregatedProperty). @Analytics.AggregatedProperties is deprecated—use @Analytics.AggregatedProperty.
- Asset references used by Page Editor:
  - CSS used by Page Editor UI: ../css/sap-icons.css
  - Example images referenced in editor: images/Fiori_tools_List_Report_Analytical_Chart_not_enabled_48ed87b.png, images/Fiori_Tools_Chart_Properties_c4705fa.png

**LANGUAGE**: Text/Checklist
**CODE**:
```text
Prerequisites:
- No Multiple Views in List Report (remove extra views so only main-entity table remains).
- Main entity exposes aggregable properties and groupable properties (required to enable Add Chart).
- For transformation aggregations: SAPUI5 >= 1.106.
```

**STEP**: Add Analytical Chart (Page Editor quick flow)
**DESCRIPTION**: Use Page Editor to create the minimal chart (chart type, one dimension, one measure). After generation, manifest and annotation artifacts are created. Use these steps to automate or reproduce changes manually.
1. Click "Add Chart" in Page Editor header.
2. Choose chart Type (e.g., Column, Bar, Line), one Dimension (groupable property) and one Measure (existing or create new).
   - Use existing measure: select an available measure defined with custom or transformation aggregations.
   - Create new measure: pick an aggregable property and an aggregation method (Sum, Avg, Count, etc.). Page Editor will generate a dynamic measure entry and a technical name.
3. Click Add.
4. Page Editor generates annotation entries and updates manifest (basic chart displayed above the table).

**LANGUAGE**: manifest.json (example)
**CODE**:
```json
{
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "Sales",
        "component": {
          "name": "sap.suite.ui.generic.template.ListReport"
        },
        "settings": {
          "chart": {
            "enabled": true,
            "chartType": "Column",       // Column, Bar, Line, etc.
            "dimensions": ["Country"],   // list of default dimension property names
            "measures": ["Revenue"]      // list of default measure names (technical)
          }
        }
      }
    ]
  }
}
```

**STEP**: Annotation: declare measures/dimensions and UI.Chart (annotation file template)
**DESCRIPTION**: Add/modify the OData annotation file to define UI.Chart, measures and dimensions. The exact syntax depends on your annotation format (XML/JSON). Example below is a minimal, illustrative XML-like template showing where UI.Chart and PresentationVariant connect. Replace ExampleService with your service and entity type names and property names with your fields.
**LANGUAGE**: XML (annotation file)
**CODE**:
```xml
<!-- annotations.xml (illustrative template) -->
<Annotations Target="ExampleService.Sales">
  <!-- Define a Chart on the entity -->
  <Annotation Term="UI.Chart">
    <Record>
      <PropertyValue Property="ChartType" String="Column"/>
      <PropertyValue Property="Title" String="Sales by Country"/>
      <PropertyValue Property="Dimensions">
        <Collection>
          <Record Type="UI.ChartDimension">
            <PropertyValue Property="PropertyPath" String="Country"/>
            <PropertyValue Property="Label" String="Country"/>
          </Record>
        </Collection>
      </PropertyValue>
      <PropertyValue Property="Measures">
        <Collection>
          <Record Type="UI.ChartMeasure">
            <PropertyValue Property="PropertyPath" String="Revenue"/>
            <PropertyValue Property="Label" String="Revenue"/>
            <PropertyValue Property="IsDefault" Bool="true"/>
          </Record>
        </Collection>
      </PropertyValue>
      <!-- Optional: reference a PresentationVariant for sorting -->
      <PropertyValue Property="PresentationVariant" AnnotationPath="@UI.PresentationVariant#ChartSort"/>
    </Record>
  </Annotation>

  <!-- PresentationVariant example (sorting) referenced above -->
  <Annotation Term="UI.PresentationVariant" Qualifier="ChartSort">
    <Record>
      <PropertyValue Property="SortOrder">
        <Collection>
          <Record Type="UI.SortProperty">
            <PropertyValue Property="Property" String="Revenue"/>
            <PropertyValue Property="Descending" Bool="true"/>
          </Record>
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

**STEP**: CDS / Domain model: mark aggregable / groupable properties & labels
**DESCRIPTION**: In CAP CDS (or equivalent domain model), mark properties used by charts for aggregation, grouping, and labeling. Example uses @title (CAP) and Common.Label (OData/Common) as label sources and shows an illustrative aggregation annotation. Ensure your service metadata includes the aggregation annotations your Page Editor expects (custom aggregation or Analytics vocabularies).
**LANGUAGE**: CDS
**CODE**:
```cds
namespace my.service;

using { cuid } from '@sap/cds/common';

entity Sales {
  key ID     : UUID;
  Country    : String(3)  @Common.Label : 'Country';
  Revenue    : Decimal(15,2) @Common.Label : 'Revenue'
            // transformation aggregation support requires SAPUI5 >= 1.106
            @Analytics.AggregatedProperty : true;   // illustrative: mark as aggregable
}
```

**STEP**: Create dynamic measure (Page Editor / generated artifact pattern)
**DESCRIPTION**: When you "Create new measure" the tool generates a dynamic measure entity entry. Use this example pattern to generate a dynamic measure entry and wire it into the UI.Chart measures collection.
**LANGUAGE**: manifest.json / annotations (example pattern)
**CODE**:
```json
// Generated pattern (conceptual)
// 1) A technical dynamic measure id is added to annotations
// 2) UI.Chart measures list contains that id as a ChartMeasure.PropertyPath
{
  "annotations": {
    "Sales": {
      "measures": [
        {
          "id": "DM_Revenue_Sum",
          "property": "Revenue",
          "aggregationMethod": "Sum",
          "label": "Revenue (Sum)",
          "isDynamic": true
        }
      ],
      "chart": {
        "measures": ["DM_Revenue_Sum"]
      }
    }
  }
}
```

**STEP**: Delete Analytical Chart
**DESCRIPTION**: Remove the chart via Page Editor or manually revert artifacts. UI action: select layout node → click Delete (wastebasket). Manual cleanup:
- Remove UI.Chart annotation for the entity.
- Remove chart settings from manifest (sap.ui.generic.app -> pages -> settings.chart).
- Optionally run annotation cleanup to remove unreferenced PresentationVariant / SelectionPresentationVariant entries.
**LANGUAGE**: Text / Checklist
**CODE**:
```text
To delete:
1) Page Editor: select chart layout node -> click Delete (wastebasket).
2) Manual:
   - Remove UI.Chart annotation from annotations file.
   - Remove "chart" settings block from manifest.json for the page.
   - If PresentationVariant/SelectionPresentationVariant become unreferenced, run cleanup tool to remove them.
```

**STEP**: Maintain Chart Properties — Measures
**DESCRIPTION**: Post-generation tasks that you can automate:
- Ensure at least one default measure exists (IsDefault true).
- Add additional measures only if the entity exposes more aggregable properties.
- For transformation-based dynamic measures: allow delete only if measure is app-defined and at least one measure remains default.
- Label behavior:
  - Use Common.Label or @title (CAP) if defined; otherwise set Label in chart measure entry.
  - Changing measure label affects all usages (global) unless overridden elsewhere.
- When mixing custom and transformation-based default measures: do not mix sequence (UI.Chart limitation).

**LANGUAGE**: XML/manifest illustrative
**CODE**:
```xml
<!-- Example Measure row in UI.Chart (conceptual) -->
<Record Type="UI.ChartMeasure">
  <PropertyValue Property="PropertyPath" String="DM_Revenue_Sum"/>
  <PropertyValue Property="Label" String="Revenue (Sum)"/>
  <PropertyValue Property="IsDefault" Bool="true"/>
</Record>
```

**STEP**: Maintain Chart Properties — Dimensions
**DESCRIPTION**: Post-generation tasks for dimensions:
- Ensure at least one default dimension exists.
- Set Label via Common.Label / @title or override in the Dimension entry.
- Set Text / TextArrangement for dimension values when needed (text must come from the same entity as the dimension).
- Reorder dimensions (drag/drop or update sequence in annotation/manifest).
**LANGUAGE**: XML illustrative
**CODE**:
```xml
<Record Type="UI.ChartDimension">
  <PropertyValue Property="PropertyPath" String="Country"/>
  <PropertyValue Property="Label" String="Country"/>
  <!-- Optional text annotation reference (example) -->
  <PropertyValue Property="Text" String="CountryName"/>
</Record>
```

**STEP**: Presentation Variant (Sort Order)
**DESCRIPTION**: Use PresentationVariant (UI.SelectionPresentationVariant or UI.PresentationVariant) to define chart sort order. Options in Page Editor:
- New: generate new PresentationVariant and reference it from UI.Chart.
- From Table: reuse the PresentationVariant used by the List Report table (sort applied to both).
- None: remove PresentationVariant reference (chart will not use sorting defined by those annotations; this deletes the manifest reference and may delete the annotation if unreferenced).
When PresentationVariant is present, add SortProperty entries to define the order and direction.
**LANGUAGE**: XML illustrative
**CODE**:
```xml
<!-- PresentationVariant example (qualifier referenced by UI.Chart) -->
<Annotation Term="UI.PresentationVariant" Qualifier="ChartSort">
  <Record>
    <PropertyValue Property="SortOrder">
      <Collection>
        <Record Type="UI.SortProperty">
          <PropertyValue Property="Property" String="Revenue"/>
          <PropertyValue Property="Descending" Bool="true"/>
        </Record>
      </Collection>
    </PropertyValue>
  </Record>
</Annotation>
```

**STEP**: Notes & Versioning
**DESCRIPTION**:
- Transformation aggregation: require SAPUI5 >= 1.106 to support @Analytics.AggregatedProperty.
- @Analytics.AggregatedProperties is deprecated; prefer @Analytics.AggregatedProperty.
- Custom aggregations: ensure service exposes @Aggregation.CustomAggregate annotations for custom aggregates.
- When cleaning up, remove unreferenced PresentationVariant or SelectionPresentationVariant annotations using a cleanup procedure or tooling provided by Fiori tools.

**LANGUAGE**: Text
**CODE**:
```text
Important:
- Use SAPUI5 >= 1.106 for transformation aggregation support with @Analytics.AggregatedProperty.
- Do not use deprecated @Analytics.AggregatedProperties.
- If Add Chart button in Page Editor is disabled, hover the button to read the tooltip explaining missing annotations or presence of Multiple Views.
```
--------------------------------

**TITLE**: Annotation file selection and modification rules for Page Editor (CAP and non-CAP)

**INTRODUCTION**: This document describes the deterministic rules Page Editor uses to locate or create the top-level local annotation file and how it applies annotation changes. Use these rules when writing automation or code that integrates with the Fiori Tools Page Editor to ensure annotations are placed, overridden, and registered correctly.

**TAGS**: fiori-tools, annotations, CAP, CDS, manifest.json, ui5, page-editor

**STEP**: 1 — Determine top-level annotation file for CAP projects

**DESCRIPTION**: Page Editor modifies a single top-level .cds annotation file in the app folder. Implement the following logic to identify or create that file:
- Search for .cds files in the application directory that are NOT referenced in index.cds or service.cds.
- If none found, create webapp/annotations.cds (top-level) with a using directive referencing the service.
- If index.cds does not exist, create index.cds and add a using directive that points to the new annotations file.
- If multiple candidate files exist, determine the top-level file by analyzing existing using directives; if multiple files are on the same top level, choose the first found file on that level.

**LANGUAGE**: TypeScript (algorithm pseudo-code)

**CODE**:
```TypeScript
// Pseudocode: find or create top-level .cds for CAP
function getTopLevelCds(appDir: string): string {
  const cdsFiles = findFiles(appDir, '*.cds');
  const referenced = parseReferencedFiles(['index.cds', 'service.cds']);
  // candidates: files not referenced by index.cds or service.cds
  const candidates = cdsFiles.filter(f => !referenced.includes(f));
  if (candidates.length === 0) {
    const annotationsPath = path.join(appDir, 'annotations.cds');
    createFileIfMissing(annotationsPath, `using from './service.cds';\n`); // add appropriate using
    ensureIndexCdsReferences(appDir, annotationsPath);
    return annotationsPath;
  }
  // if multiple, use using-directives-based hierarchy to select top-level
  return selectTopLevelByUsingDirectives(candidates);
}
```

**STEP**: 2 — Example CDS: create annotations.cds and index.cds using directive

**DESCRIPTION**: When creating the top-level .cds file, add a using directive that references the service file. When index.cds is absent, create it and register the new annotation file with a using directive.

**LANGUAGE**: CDS

**CODE**:
```CDS
// webapp/annotations.cds
using { YourService as Service } from './service.cds';

annotate Service.Entity with {
  // annotation examples
};

// index.cds (created if missing)
using from './annotations.cds';
```

**STEP**: 3 — Override rules for CAP layering

**DESCRIPTION**: Apply these rules when requested annotation edits target a different file:
- If the annotation resides in a base layer (lower in the hierarchy), create/modify the top-level file to override it.
  - Note: some property values (e.g., measures and currencies) defined in the base layer may be non-overridable to preserve project consistency.
- If the annotation is in a different .cds file within the same app and on the same hierarchy level, override it in the Page Editor’s top-level file and add a using directive referencing the overridden file to establish layering.
- If the annotation is defined in a different app’s .cds file, do not modify it from the current app to avoid cross-app references. Open Page Editor for the original app instead.

**LANGUAGE**: CDS

**CODE**:
```CDS
// Example: top-level override references an existing file to maintain layering
// top-level annotations.cds (created/modified by Page Editor)
using { Service } from './service.cds';
using from './otherFile.cds'; // added to establish layering with overridden file

annotate Service.Entity with {
  // overrides for annotations defined in otherFile.cds
};
```

**STEP**: 4 — Determine top-level annotation file for non-CAP projects

**DESCRIPTION**: For non-CAP projects, Page Editor modifies the local annotation file at the top of the annotation source hierarchy. Determine the top by reading the annotations list registered in the manifest.json for the target datasource: the last entry in the datasource's annotations array has the highest precedence. If a change requires editing a lower-layer annotation, copy that annotation file into the top-level local annotation file (placed under webapp/annotations/) and edit there to override the lower layer.

**LANGUAGE**: JSON

**CODE**:
```JSON
// manifest.json snippet: last entry in "annotations" array has highest precedence
{
  "sap.app": { /* ... */ },
  "sap.ui5": {
    "models": { /* ... */ },
    "dataSources": {
      "mainService": {
        "uri": "/odata/service/",
        "type": "OData",
        "settings": {
          "annotations": [
            { "uri": "annotations/base-annotations.xml" },
            { "uri": "annotations/local-annotations.xml" } // highest precedence (last)
          ]
        }
      }
    }
  }
}
```

**STEP**: 5 — Create and register local annotation files for non-CAP

**DESCRIPTION**: If the top-level local annotation file does not exist, Page Editor will create it on first change and register it in manifest.json under the appropriate datasource annotations array. Place new files under webapp/annotations/.

**LANGUAGE**: shell + JSON

**CODE**:
```bash
# create annotation file path
mkdir -p webapp/annotations
# example file
echo '<Annotations xmlns="http://www.sap.com/edm">...</Annotations>' > webapp/annotations/local-annotations.xml
```

```JSON
// After creation: update manifest.json by appending to the annotations array
{
  "sap.ui5": {
    "dataSources": {
      "mainService": {
        "settings": {
          "annotations": [
            { "uri": "annotations/base-annotations.xml" },
            { "uri": "annotations/local-annotations.xml" } // appended by Page Editor
          ]
        }
      }
    }
  }
}
```

**STEP**: 6 — Tools and utilities

**DESCRIPTION**: To view or change annotation file precedence or hierarchy programmatically or manually, use the Annotation File Manager command in the editor.

**LANGUAGE**: Plain text command

**CODE**:
```text
Command: "Fiori: Open Annotation File Manager"
```

**STEP**: 7 — Important constraints and checks to implement

**DESCRIPTION**: When implementing tooling/code that modifies annotations, enforce these checks:
- Prevent cross-app modification: do not modify annotations defined in another app.
- Honor non-overridable properties from base layers (e.g., measures, currencies).
- When copying a lower-layer annotation to top-level for editing, ensure the top-level file is properly registered in manifest.json (non-CAP) or referenced via using/index.cds (CAP).
- When multiple candidate top-level files exist, use using-directives hierarchy to pick the top-level file; if equal level, pick the first found.

**LANGUAGE**: TypeScript (validation pseudocode)

**CODE**:
```TypeScript
function validateEditTarget(targetFile: string, currentApp: string): boolean {
  if (isDefinedInDifferentApp(targetFile, currentApp)) {
    throw new Error('Cannot modify annotations defined in a different app. Open the original app.');
  }
  if (isNonOverridableProperty(targetFile, annotationPath)) {
    throw new Error('Property is defined in base layer and cannot be overridden.');
  }
  return true;
}
```
--------------------------------

**TITLE**: Appendix — Fiori Tools: UI Annotations & Page Editor Quick Reference

**INTRODUCTION**: Short, actionable reference for mapping UI elements in the Page Editor to service model properties and the typical CDS/annotation snippets produced or required (Contacts, Addresses, Images, Value Help, Text/TextArrangement, Measures, Criticality, Micro-charts). Use these code examples when generating or editing CAP/CDS services and annotations for SAP Fiori Elements apps.

**TAGS**: fiori-tools, annotations, CAP, CDS, value-help, criticality, measures, UI.IsImageURL, Common.Text

STEP: Contact and Core Contact Properties
DESCRIPTION: Map a contact column/field in the Page Editor to the Communication.Contact properties. The Contact property maps to fn (full name) and cannot be swapped in-place — delete+add if you want a different contact property. Use these property names in your service/CDS model: fn, title, photo, role, department, adr (addresses), tel (phone collection), email (email collection). Example CDS types sketch the expected fields.
LANGUAGE: CDS
CODE:
```CDS
// Example CAP/CDS model sketch for Communication.Contact usage
namespace demo.communication;

type AddressType : composition {
  street   : String;
  locality : String; // City
  region   : String; // State/Province
  code     : String; // Postal Code
  country  : String;
}

type PhoneNumberType : composition {
  uri  : String; // Phone number/uri
  type : String; // enum values expected: 'work', 'cell', 'fax'
}

type EmailAddressType : composition {
  email : String;
}

entity CommunicationContact {
  key ID        : UUID;
  fn            : String;   // Contact name (used as Contact property)
  title         : String;   // Job Title
  photo         : String;   // Photo (URL) — can be annotated as image
  role          : String;   // Role
  department    : String;   // Department
  adr           : Composition of many AddressType;
  tel           : Composition of many PhoneNumberType;
  email         : Composition of many EmailAddressType;
}
```

STEP: Address / Phone / Email — field mapping details
DESCRIPTION: Use these mappings when building UI columns/tables for contact addresses, phones and emails. Addresses are a collection (each row = one address) with fields street, locality (city), region (state), code (postal), country. Phone entries are a collection with uri and type; map 'work'|'cell'|'fax' to Work/Mobile/Fax UI types. Email entries are a collection with the email property.
LANGUAGE: None
CODE:
```text
Address row fields:
- Street  -> Communication.AddressType.street
- City    -> Communication.AddressType.locality
- State   -> Communication.AddressType.region
- Postal  -> Communication.AddressType.code
- Country -> Communication.AddressType.country

Phone row fields:
- Phone -> Communication.PhoneNumberType.uri
- Type  -> Communication.PhoneNumberType.type  (enum: work / cell / fax)

Email row fields:
- Email -> Communication.EmailAddressType.email
```

STEP: Display as Image (UI.IsImageURL)
DESCRIPTION: If a property is a string containing an image URL, enable Display as Image in the Page Editor to apply @UI.IsImageURL: true. This affects all uses of the property across the project. If the annotation is defined in the service or a lower layer it becomes read-only in the Page Editor.
LANGUAGE: CDS
CODE:
```CDS
// Annotate a property to be treated as an image URL
annotate demo.communication.CommunicationContact with {
  photo @UI.IsImageURL: true;   // Page Editor toggles this annotation
};
```

STEP: Text and Text Arrangement (Common.Text + UI.TextArrangement)
DESCRIPTION: When a property represents a code/ID and a descriptive text property (human readable) exists, set the Text property in Page Editor to the descriptive property. This creates Common.Text on the source property; UI.TextArrangement controls how code and description are combined (TextFirst, TextLast, TextOnly, IDOnly). Example below shows the annotate forms created/edited by Page Editor.
LANGUAGE: CDS
CODE:
```CDS
// Example: field value uses a text description property with TextArrangement
annotate service.Capex with {
    type @(
        Common.Text : type.typedescription,
        Common.Text.@UI.TextArrangement : #TextOnly
    );
};

// Example: same annotation applied on the referenced entity (value help source)
annotate service.CapexType with {
    type @(
        Common.Text : typedescription,
        Common.Text.@UI.TextArrangement : #TextOnly
    );
};
```

STEP: Value Help — model prerequisites and CAP examples
DESCRIPTION: To enable Value Help in Page Editor set the field Display Type to Value Help and provide the Value Source Entity and Value Source Property. For CAP projects, ensure the entity set exists (e.g., CapexType). Configure Value Description Property, External ID, Result List columns, dependent filtering (None/In/Out/InOut) and Sort Order in the dialog. Page Editor generates annotations such as Common.ValueList, Common.ValueListWithFixedValues, Common.Text and a UI.PresentationVariant qualifier referenced by Common.ValueList.
LANGUAGE: CDS
CODE:
```CDS
// Service entity used as value help list (example from docs)
entity CapexType : managed {
  key type            : String;
      typedescription : String;
}

// Example: main entity with association to CapexType
entity CapexBase : managed {
  type : Association to CapexType;
}
```

STEP: Measures and Currencies (Measures.ISOCurrency)
DESCRIPTION: To display numeric values together with units/currencies, choose Measures and Currencies in the Page Editor and pick Currency Unit or Measure Unit. You can specify a Path (property) or a String (plain text like "%"). The Page Editor applies Measures.ISOCurrency (or other Measures annotations) to the field. Example shows how a price property can be linked to a currency property.
LANGUAGE: CDS
CODE:
```CDS
// Example: price with a currency property
entity Product {
  key ID        : UUID;
  price         : Decimal(9,2);
  currencyCode  : String;   // e.g. "EUR", "USD"
}

// Annotate price to reference currencyCode as ISO currency unit
annotate Product with {
  price @Measures.ISOCurrency: 'currencyCode';
};
```

STEP: Criticality (Basic fields/columns + Micro Charts) and Criticality Representation
DESCRIPTION: To present semantic coloring and optional icons, select the target column/field in the outline and choose a property that carries criticality info in the Properties pane (Criticality). Page Editor adds Criticality to the UI.DataField record. Optionally set Criticality Representation to None / With Icon / Without Icon to override template defaults. For micro charts and progress indicators choose Criticality Source (Property or Calculation). If Criticality Source = Property, select Criticality Value property; if Calculation, define Improvement Direction and thresholds (Deviation/Tolerance values). Example illustrates the conceptual annotation added by the Page Editor.
LANGUAGE: CDS
CODE:
```CDS
// Conceptual example: Page Editor adds UI DataField criticality configuration
annotate service.MyEntity with {
  // data field referencing the value property (conceptual)
  SomeValue @UI.DataField : [
    { Value: SomeValue, Criticality: someCriticalityProperty, CriticalityRepresentation: #WithIcon }
  ];
};

// For micro charts when Criticality Source = Property, choose a criticality property:
annotate service.MyEntity with {
  MeasureValue @UI.DataPoint : [
    { Value: MeasureValue, Criticality: measureCriticalityProperty }
  ];
}
```

STEP: Improvement Direction (Calculation-based criticality)
DESCRIPTION: When Criticality Source = Calculation you must choose Improvement Direction (Minimize, Maximize, Target). The required threshold properties depend on the direction:
- Minimize: Deviation High Value, Tolerance High Value
- Maximize: Deviation Low Value, Tolerance Low Value
- Target: Deviation Low, Tolerance Low, Deviation High, Tolerance High (Target not applicable to radial micro charts)
Define these values in the Page Editor for chart criticality calculations (the editor will generate corresponding annotations).
LANGUAGE: None
CODE:
```text
Required parameters when using Calculation as Criticality Source:

If ImprovementDirection = Minimize:
- DeviationHighValue (highest neutral)
- ToleranceHighValue (highest positive)

If ImprovementDirection = Maximize:
- DeviationLowValue (lowest neutral)
- ToleranceLowValue (lowest positive)

If ImprovementDirection = Target:
- DeviationLowValue, ToleranceLowValue, DeviationHighValue, ToleranceHighValue
```

STEP: Label, Hidden, Hide by Property, Importance, Tooltip — short actionable notes
DESCRIPTION: Quick editor behaviors to implement in code or Page Editor:
- Label on ReferenceFacet (Form/Table/Identification/Chart) becomes ReferenceFacet.Label in Facet annotation; translatable (use i18n).
- Hidden toggles add a boolean property selection for Hide by Property -> apply UI.Hidden behavior (choose boolean property; true hides).
- Importance controls responsive visibility (High = phone; High/Medium = tablet).
- Tooltip: supported on specific columns/header sections; choose String or Property as Tooltip Source. String tooltips are translatable.
LANGUAGE: None
CODE:
```text
- Labels: stored on ReferenceFacet.Label (translatable via i18n)
- Hidden: toggle -> choose boolean property for hiding condition (Hide by Property)
- Importance: set enum for rendering priority on small devices
- Tooltip: select Source = String | Property in Page Editor (String supports i18n)
```

STEP: File references and assets
DESCRIPTION: Keep asset and reference paths when documenting or generating UI views. Examples in the docs reference CSS and image assets used by Page Editor and screenshots.
LANGUAGE: None
CODE:
```text
- CSS referenced in docs: ../css/sap-icons.css
- Images used in docs: images/*.png or images/*.jpg
- Cross-references: appendix-457f2e9.md (e.g., Improvement Direction link)
```
--------------------------------

**TITLE**: Automatic generation of UI annotations for List Report and Object Page

**INTRODUCTION**: When you enable Automatic Generation during the entity selection step in the Fiori Tools generator, the tool creates default UI annotations (UI.LineItem, UI.FieldGroup, UI.Facets with UI.ReferenceFacet) for the main entity type and saves them to a local annotation file. These generated annotations are used to automatically add page elements such as List Report tables and Object Page sections. Generation occurs only if the corresponding annotation terms are not already defined.

**TAGS**: fiori-tools, annotations, UI.LineItem, UI.FieldGroup, UI.Facets, UI.ReferenceFacet, UI.DataField, OData, XML

**STEP**: 1 — Enable automatic generation

**DESCRIPTION**: Select the Automatic Generation option when prompted during the entity selection step of the application generator.

**LANGUAGE**: text

**CODE**:
```text
During entity selection, set:
Automatic Generation: Yes
```

**STEP**: 2 — Generation rules and exclusions

**DESCRIPTION**: The generator applies the following deterministic rules when creating annotations for the chosen main entity type. Use this as executable logic in code that post-processes or validates generated annotations.

- Generate UI.LineItem, UI.FieldGroup, and UI.Facets (with UI.ReferenceFacet entries) only if these terms are not already defined for the main entity type.
- UI.LineItem: create a collection of UI.DataField records referencing the first properties of the main entity type.
  - Exclude: properties marked Hidden and properties of type UUID.
- UI.FieldGroup: create a FieldGroup record containing UI.DataField records for all direct (non-nested) properties of the main entity type.
  - Exclude: properties marked Hidden.
- UI.Facets: create a UI.ReferenceFacet entry that references the generated UI.FieldGroup.

**LANGUAGE**: TypeScript (pseudocode)

**CODE**:
```typescript
// Pseudocode for selecting properties to include in generated annotations
const visibleProps = entity.properties.filter(p => !p.hidden && p.isDirectProperty);
const listReportProps = visibleProps.filter(p => p.type !== 'UUID').slice(0, DEFAULT_COLUMNS);
const fieldGroupProps = visibleProps; // all direct, non-hidden properties

// Guard: only generate if annotations do not already exist
if (!hasAnnotation(entity, 'UI.LineItem')) {
  generateLineItem(entity, listReportProps);
}
if (!hasAnnotation(entity, 'UI.FieldGroup')) {
  generateFieldGroup(entity, fieldGroupProps);
}
if (!hasAnnotation(entity, 'UI.Facets')) {
  generateFacetsReferencingFieldGroup(entity);
}
```

**STEP**: 3 — Example: generated annotations (XML)

**DESCRIPTION**: Example of the local annotation file content that the generator writes for a main entity type. Save to your local annotation file (common location: webapp/annotations/local.annotations.xml). This example shows a UI.LineItem for the list report, a UI.FieldGroup for form/object page fields, and UI.Facets referencing the FieldGroup via a ReferenceFacet.

**LANGUAGE**: XML

**CODE**:
```xml
<?xml version="1.0" encoding="utf-8"?>
<Annotations xmlns="http://docs.oasis-open.org/odata/ns/edm" Target="MyService.MainEntityType">
  <!-- List Report: UI.LineItem -->
  <Annotation Term="UI.LineItem">
    <Collection>
      <!-- Example: references the first visible properties (UUIDs and hidden excluded) -->
      <Record Type="UI.DataField">
        <PropertyValue Property="Value"><Path>Name</Path></PropertyValue>
      </Record>
      <Record Type="UI.DataField">
        <PropertyValue Property="Value"><Path>Price</Path></PropertyValue>
      </Record>
      <Record Type="UI.DataField">
        <PropertyValue Property="Value"><Path>Description</Path></PropertyValue>
      </Record>
    </Collection>
  </Annotation>

  <!-- Object Page / Form: UI.FieldGroup (contains DataField records for direct properties) -->
  <Annotation Term="UI.FieldGroup" Qualifier="GeneratedDefault">
    <Record>
      <PropertyValue Property="Label" String="General"/>
      <PropertyValue Property="Data">
        <Collection>
          <Record Type="UI.DataField">
            <PropertyValue Property="Value"><Path>ID</Path></PropertyValue>
          </Record>
          <Record Type="UI.DataField">
            <PropertyValue Property="Value"><Path>Name</Path></PropertyValue>
          </Record>
          <Record Type="UI.DataField">
            <PropertyValue Property="Value"><Path>Price</Path></PropertyValue>
          </Record>
          <Record Type="UI.DataField">
            <PropertyValue Property="Value"><Path>Description</Path></PropertyValue>
          </Record>
          <!-- Hidden properties are not included -->
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>

  <!-- Object Page: UI.Facets referencing the generated FieldGroup via ReferenceFacet -->
  <Annotation Term="UI.Facets">
    <Collection>
      <Record Type="UI.ReferenceFacet">
        <PropertyValue Property="Label" String="General"/>
        <PropertyValue Property="Target">
          <!-- Reference to the FieldGroup annotation created above -->
          <AnnotationPath>@UI.FieldGroup#GeneratedDefault</AnnotationPath>
        </PropertyValue>
      </Record>
    </Collection>
  </Annotation>
</Annotations>
```

**STEP**: 4 — Validation notes for code generators or CI checks

**DESCRIPTION**: When implementing automated generation or CI validation, enforce these checks:

- Do not overwrite existing UI.LineItem, UI.FieldGroup, or UI.Facets annotations if they exist for the target entity type.
- Ensure properties in generated UI.DataField entries are direct properties of the entity (no navigation or complex path).
- Exclude properties where Hidden = true or type = UUID from UI.LineItem; exclude only Hidden from UI.FieldGroup.
- Persist generated annotations into the local annotation file used by the project (e.g., webapp/annotations/local.annotations.xml) and ensure the application manifest references that file if required.

**LANGUAGE**: JSON (example validator rules)

**CODE**:
```json
{
  "rules": {
    "skipExistingAnnotations": true,
    "lineItemExcludes": ["Hidden", "UUID"],
    "fieldGroupExcludes": ["Hidden"],
    "allowedDataFieldPath": "directProperty"
  }
}
```
--------------------------------

**TITLE**: Basic Columns (Fiori Tools) - How to Add, Configure, Move, and Delete

**INTRODUCTION**: Short, developer-focused guidance and configuration examples for creating and managing Basic Columns in a Fiori Tools Page Editor table. Includes asset references, a JSON configuration schema for Basic Columns (covering all documented properties), and actionable steps for adding, moving, and deleting columns programmatically or via the Page Editor UI.

**TAGS**: fiori-tools, ui5, basic-column, table, page-editor, configuration, metadata

**STEP**: 1 - Include UI assets (CSS and sample image)

**DESCRIPTION**: Add required CSS for SAP icons and reference the example image used in the docs. Keep the relative paths as in the original doc.

**LANGUAGE**: HTML

**CODE**:
```HTML
<!-- Include SAP icon font (relative path preserved) -->
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>

<!-- Example inline reference to the screenshot used in documentation -->
<img src="images/Basic_Column_8c30f41.png" alt="Basic Column example screenshot" />
```

**STEP**: 2 - Page Editor UI steps to add Basic Columns

**DESCRIPTION**: Exact UI actions performed in the Page Editor to add Basic Columns to a table in a section. Use these steps when scripting UI automation or writing a guide for automation.

**LANGUAGE**: Text

**CODE**:
```text
1. Click the + (Add) icon next to the "Columns" node.
2. Click "Add Basic Columns".
3. In the "Columns" dropdown, select one or multiple values. (You can type to filter.)
4. Click "Add".

Note: You cannot add the same value twice to a table.
```

**STEP**: 3 - Basic Column configuration schema (JSON)

**DESCRIPTION**: JSON schema-style example representing all documented Basic Column properties. Use as a template when generating metadata, page fragments, or automated column creation payloads. All technical properties from the docs are present — keep placeholders for values and specify applicability comments for each property.

**LANGUAGE**: JSON

**CODE**:
```JSON
{
  "columnId": "<unique-column-id>",
  "valueProperty": "<data-model-property-name>",
  "label": "<Label text>",                                /* See: appendix-457f2e9.md#loiod44832d99bdf4f73ba14cdbb16dc9301 */
  "importance": "<Importance>",                           /* See: appendix-457f2e9.md#loio7fe32a215209419da6d6c19da0f69ccb */
  "hidden": false,                                        /* boolean - see: appendix-457f2e9.md#loiof7ad71792a0044d6b6172f078827bdc0 */
  "externalId": "<External ID>",                         /* See: appendix-457f2e9.md#loio13f6d7fd6c6c4f60908cefa7d4260e49 */
  "textBinding": "{path: '<binding-path>'}",             /* for all value types except Boolean - appendix-457f2e9.md#loio5d1cc16e80ce48de8a47f2835a42cc47 */
  "textArrangement": "<TextArrangement>",                 /* for all value types except Boolean - appendix-457f2e9.md#loioecd5568919bf43c5a04dd6b5e8e173f6 */
  "displayType": "<DisplayType>",                         /* for string values - appendix-457f2e9.md#loio6544398b07024f4faff4bad25949b64d */
  "restrictions": {                                       /* See: appendix-457f2e9.md#loio58fec66ebb1f48fbbd3092d3a1b27fda */
    "readOnly": false,
    "maxLength": null
  },
  "criticality": "<Criticality>",                         /* for string and numeric values - appendix-457f2e9.md#loio19d82b5d8bc940738afcb49b51a48bed */
  "criticalityRepresentation": "<Representation>",        /* for string and numeric values - appendix-457f2e9.md#loiof2b7486cb4644441979d818802b79940 */
  "displayAsImage": false,                                /* See: appendix-457f2e9.md#loio344568c1e4014621905d78857cf66401 */
  "measuresAndCurrencies": {                              /* for numeric values - appendix-457f2e9.md#loio8ad2438ea4ed4a52ab530ff104530f98 */
    "unitProperty": "<unit-property-name>",
    "currencyProperty": "<currency-property-name>"
  },
  "semanticObjectName": "<Semantic Object>",              /* See: appendix-457f2e9.md#loio90e03983431d4bfd927b51593a937955 */
  "semanticObjectPropertyMapping": {                      /* See: appendix-457f2e9.md#loio7726cb0d97194461973e3ec176c8a888 */
    "targetProperty": "<target>",
    "sourceProperty": "<source>"
  }
}
```

**STEP**: 4 - Example: Add multiple Basic Columns payload (JSON array)

**DESCRIPTION**: Example payload for adding multiple basic columns at once. Populate valueProperty for each selected model property.

**LANGUAGE**: JSON

**CODE**:
```JSON
{
  "tableId": "SalesOrdersTable",
  "addColumns": [
    {
      "columnId": "col-SO_Number",
      "valueProperty": "SalesOrderID",
      "label": "Sales Order",
      "textBinding": "{SalesOrderID}",
      "displayType": "Text"
    },
    {
      "columnId": "col-Total",
      "valueProperty": "TotalAmount",
      "label": "Total Amount",
      "textBinding": "{TotalAmount}",
      "measuresAndCurrencies": {
        "currencyProperty": "CurrencyCode"
      },
      "displayType": "Number",
      "criticality": "Neutral"
    }
  ]
}
```

**STEP**: 5 - Move columns (UI and automation cues)

**DESCRIPTION**: Two methods supported in Page Editor. Use these instructions for UI automation or keyboard/mouse interaction scripting.

**LANGUAGE**: Text

**CODE**:
```text
Drag and Drop:
- Hover over the column outline in the table.
- Press and hold the mouse button, move to the target position (eligible positions highlight in green), release to drop.
- To move multiple columns at once with drag-and-drop, use Ctrl + + while selecting columns (as described in UI).

Arrow Icons (single column move):
- Click the Move Up icon () or Move Down icon () next to the column name to move one column at a time.
```

**STEP**: 6 - Delete a Basic Column (UI and payload)

**DESCRIPTION**: Steps and an example deletion payload for removing a column. Use confirmation in UI or send deletion in automation.

**LANGUAGE**: Text / JSON

**CODE**:
```text
UI Steps:
1. Navigate to the column in the Page Editor.
2. Click the Delete (wastebasket) icon to open the Delete Confirmation popup.
3. Click Delete to confirm.

Example deletion payload:
{
  "tableId": "SalesOrdersTable",
  "deleteColumn": "col-SO_Number"
}
```

**STEP**: 7 - Quick reference: property applicability and appendix links

**DESCRIPTION**: Compact mapping of properties to appendix anchors for quick lookup when implementing or generating properties programmatically.

**LANGUAGE**: Text

**CODE**:
```text
Property -> Appendix anchor:
- Label: appendix-457f2e9.md#loiod44832d99bdf4f73ba14cdbb16dc9301
- Importance: appendix-457f2e9.md#loio7fe32a215209419da6d6c19da0f69ccb
- Hidden: appendix-457f2e9.md#loiof7ad71792a0044d6b6172f078827bdc0
- External ID: appendix-457f2e9.md#loio13f6d7fd6c6c4f60908cefa7d4260e49
- Text: appendix-457f2e9.md#loio5d1cc16e80ce48de8a47f2835a42cc47
- Text Arrangement: appendix-457f2e9.md#loioecd5568919bf43c5a04dd6b5e8e173f6
- Display Type: appendix-457f2e9.md#loio6544398b07024f4faff4bad25949b64d
- Restrictions: appendix-457f2e9.md#loio58fec66ebb1f48fbbd3092d3a1b27fda
- Criticality: appendix-457f2e9.md#loio19d82b5d8bc940738afcb49b51a48bed
- Criticality Representation: appendix-457f2e9.md#loiof2b7486cb4644441979d818802b79940
- Display as Image: appendix-457f2e9.md#loio344568c1e4014621905d78857cf66401
- Measures and Currencies: appendix-457f2e9.md#loio8ad2438ea4ed4a52ab530ff104530f98
- Semantic Object Name: appendix-457f2e9.md#loio90e03983431d4bfd927b51593a937955
- Semantic Object Property Mapping: appendix-457f2e9.md#loio7726cb0d97194461973e3ec176c8a888
```

--------------------------------

**TITLE**: Manage Basic Fields (Add / Move / Delete / Maintain) for Fiori Tools

**INTRODUCTION**: Practical, code-focused guide to programmatically add, move, delete, and maintain basic fields in an object page by editing OData annotation files used by Fiori tools. Examples show XML and JSON annotation fragments for UI.FieldGroup / UI.DataField manipulation, and cover section label and restriction handling. Use these snippets to automate or generate annotation changes.

**TAGS**: fiori-tools, annotations, UI.FieldGroup, UI.DataField, OData, XML, JSON, object-page, Fiori

**STEP**: 1 — Add a Basic Field (XML)

**DESCRIPTION**: Add a UI.DataField record to a UI.FieldGroup in your annotation file. Place this fragment under the appropriate EntityType / Annotation target (typical file: annotations/YourService.annotation.xml or similar). Ensure the property you add is not of type Edm.Guid, not draft-specific, not already referenced in any section, and is defined on the same entity as the FieldGroup.

**LANGUAGE**: XML

**CODE**:
```XML
<!-- File: annotations/YourService.annotation.xml -->
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>

<!-- Add a field to a FieldGroup for EntityType 'YourEntity' -->
<Annotations Target="YourService.YourEntity">
  <Annotation Term="UI.FieldGroup">
    <Record Type="UI.FieldGroupType">
      <!-- Optional: Label for the section -->
      <PropertyValue Property="Label" String="Basic Information" />
      <PropertyValue Property="Data">
        <Collection>
          <!-- New field -->
          <Record Type="UI.DataField">
            <PropertyValue Property="Value">
              <PropertyPath>PropertyName</PropertyPath>
            </PropertyValue>
            <PropertyValue Property="Label" String="Property Label" />
            <!-- Examples of additional editable properties -->
            <!-- Hidden example -->
            <PropertyValue Property="Hidden" Bool="false" />
            <!-- Text association (if there is a text property) -->
            <PropertyValue Property="Text">
              <PropertyPath>PropertyNameText</PropertyPath>
            </PropertyValue>
          </Record>
          <!-- Other existing UI.DataField records -->
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

**STEP**: 2 — Add a Basic Field (JSON)

**DESCRIPTION**: Equivalent add operation using the JSON representation of OData annotations (annotations/YourService.annotation.json). Use this when your toolchain consumes JSON annotations.

**LANGUAGE**: JSON

**CODE**:
```JSON
{
  "Annotations": {
    "YourService.YourEntity": {
      "UI.FieldGroup": [
        {
          "Label": {
            "String": "Basic Information"
          },
          "Data": [
            {
              "$Type": "UI.DataField",
              "Value": {
                "$Path": "PropertyName"
              },
              "Label": {
                "String": "Property Label"
              },
              "Hidden": {
                "Bool": false
              },
              "Text": {
                "$Path": "PropertyNameText"
              }
            }
            /* other UI.DataField records */
          ]
        }
      ]
    }
  }
}
```

**STEP**: 3 — Move / Reorder Fields (XML)

**DESCRIPTION**: Moving a field within a section or to another section is implemented by reordering / moving the UI.DataField record between UI.FieldGroup.Data collections. Repositioning is done by placing the Record element in the desired index or by copying it to another FieldGroup of the same entity. You cannot move a field into a section whose FieldGroup/Identification is on a different entity or if the field already exists in that target section.

**LANGUAGE**: XML

**CODE**:
```XML
<!-- BEFORE: Field order A, B, C -->
<PropertyValue Property="Data">
  <Collection>
    <Record Type="UI.DataField"> <!-- A --> </Record>
    <Record Type="UI.DataField"> <!-- B --> </Record>
    <Record Type="UI.DataField"> <!-- C --> </Record>
  </Collection>
</PropertyValue>

<!-- AFTER: Move C to position 2 => A, C, B -->
<PropertyValue Property="Data">
  <Collection>
    <Record Type="UI.DataField"> <!-- A --> </Record>
    <Record Type="UI.DataField"> <!-- C (moved) --> </Record>
    <Record Type="UI.DataField"> <!-- B --> </Record>
  </Collection>
</PropertyValue>

<!-- To move to another section (same entity): remove the Record from source Data collection and insert into target FieldGroup Data collection -->
```

**STEP**: 4 — Move Multiple Fields (XML/JSON)

**DESCRIPTION**: To move multiple fields together, copy consecutive UI.DataField records as a group and paste them at the desired location (maintain order). When generating code, collect the records to move and insert them in the target collection, then remove them from the source collection.

**LANGUAGE**: XML

**CODE**:
```XML
<!-- Example: moving two consecutive fields -->
<!-- Extract these two records -->
<Record Type="UI.DataField"> <!-- FieldX --> </Record>
<Record Type="UI.DataField"> <!-- FieldY --> </Record>

<!-- Insert them at the new location inside target FieldGroup Data collection -->
<PropertyValue Property="Data">
  <Collection>
    <!-- ...existing records... -->
    <Record Type="UI.DataField"> <!-- FieldX (moved) --> </Record>
    <Record Type="UI.DataField"> <!-- FieldY (moved) --> </Record>
    <!-- ...remaining records... -->
  </Collection>
</PropertyValue>
```

**STEP**: 5 — Delete a Basic Field (XML)

**DESCRIPTION**: Remove the specific UI.DataField record from the UI.FieldGroup.Data collection. Deleting removes the UI.DataField annotation reference only; entity properties and other annotations on that property remain in the backend metadata or other annotations.

**LANGUAGE**: XML

**CODE**:
```XML
<!-- BEFORE: UI.DataField present -->
<PropertyValue Property="Data">
  <Collection>
    <Record Type="UI.DataField"> <!-- FieldToDelete --> </Record>
    <!-- other fields -->
  </Collection>
</PropertyValue>

<!-- AFTER: UI.DataField removed -->
<PropertyValue Property="Data">
  <Collection>
    <!-- other fields only -->
  </Collection>
</PropertyValue>
```

**STEP**: 6 — Change Section Label (XML)

**DESCRIPTION**: Change the section label by editing the FieldGroup Record's Label property. This label appears in the page editor and in the preview/application.

**LANGUAGE**: XML

**CODE**:
```XML
<PropertyValue Property="Label" String="New Section Label" />
```

**STEP**: 7 — Define Restrictions and Display Type (Guidance + Mapping)

**DESCRIPTION**: The Fiori Tools property panel maps UI controls to the underlying annotations or OData facets. Use these approaches when generating annotations or backing metadata to achieve restriction behaviors:

- Optional / None: no mandatory annotation applied (default optional).
- Mandatory: set backend OData property facet Nullable="false" or annotate with an application-specific "IsMandatory" annotation in your annotation profile.
- ReadOnly: annotate UI.DataField with an appropriate field control annotation (or set it read-only in UI by a consumer-specific annotation).
- Display Type is only relevant for draft-enabled entities; if the entity is read-only (not draft), Display Type and Restrictions are disabled.

Example (XML) - mark a field hidden and associate a text property:
**LANGUAGE**: XML

**CODE**:
```XML
<Record Type="UI.DataField">
  <PropertyValue Property="Value">
    <PropertyPath>PropertyName</PropertyPath>
  </PropertyValue>

  <!-- Hide the field in the UI -->
  <PropertyValue Property="Hidden" Bool="true" />

  <!-- Associate a text property (if exists) -->
  <PropertyValue Property="Text">
    <PropertyPath>PropertyNameText</PropertyPath>
  </PropertyValue>

  <!-- If backend property is non-nullable (mandatory) set in EDMX:
       <Property Name="PropertyName" Type="Edm.String" Nullable="false" ... />
       or set an annotation recognizable by your runtime as mandatory -->
</Record>
```

**STEP**: 8 — Maintain Field Properties (List + Links)

**DESCRIPTION**: The following field properties are editable via the UI or by editing annotations. When generating or updating annotations, ensure you set the corresponding annotation properties consistently.

- Criticality — map to the app’s Criticality annotation (UI or app-specific).
- Display as Image — set the field as an image URL (UI.ImageUrl or app-specific).
- External ID — mark identifiers used externally (app-specific annotation).
- Hidden — UI.DataField Hidden property (Bool).
- Hide by Property — conditional hide using a property path expression (consumer-specific).
- Label — UI.DataField Label property.
- Restrictions — mapped via backend facets (Nullable) or consumer field-control annotations.
- Semantic Object Name — set semantic object mapping for navigation (UI.DataField with SemanticObject / SemanticObjectProperty mapping).
- Semantic Object Property Mapping — map properties for semantic object.
- Text — associate text property via UI.DataField Text.
- Text Arrangement — specify text arrangement (if supported).
- Display Type — set per consumer rules (only for draft-enabled entities).

See Appendix (links preserved in UI) for exact property semantics:
- Label: basic-fields-2953503.md#loio2953503145dd428194c6dff252744ac1__label
- Restrictions: basic-fields-2953503.md#loio2953503145dd428194c6dff252744ac1__restrictions
- Other properties: appendix-457f2e9.md

**STEP**: 9 — Important Constraints & Notes (Preserved)

**DESCRIPTION**: Keep these constraints when generating or editing annotations:

- Do not add properties of type Edm.Guid to sections via FieldGroup UI.
- Do not add draft-specific properties (IsActiveEntity, HasActiveEntity, HasDraftEntity) or draft navigation properties (SiblingEntity, DraftAdministrativeData).
- Do not add a field twice to the same section; avoid duplicate UI.DataField records for the same PropertyPath in the same FieldGroup.
- When deleting a UI.DataField, only the UI.DataField record is removed from the UI.FieldGroup annotation. Annotations applied directly to the entity property (or the property definition) are not deleted.
- If the object page entity is not draft-enabled (read-only), Display Type and Restrictions are not available in the property panel.

**LANGUAGE**: N/A

**CODE**:
```text
Notes:
- CSS icon reference used by UI editor: ../css/sap-icons.css
- Example annotation target: YourService.YourEntity
- File paths: annotations/YourService.annotation.xml or annotations/YourService.annotation.json
```
--------------------------------

**TITLE**: Guided Code Changes (Copy / Insert Snippet) for Fiori Tools

**INTRODUCTION**: Practical, code-focused guidance for using the guided "Copy" and "Insert Snippet" features in Fiori Tools. Includes examples of snippet templates and parameter definitions, how dependent parameters and prefilled values work, and how to generate i18n keys from guide inputs. Use these examples to implement snippet templates, client-side validation, or automated insertion logic.

**TAGS**: fiori-tools, guided-development, snippets, i18n, parameters, annotations, insert-snippet, copy-snippet

STEP: 1 — Add icon stylesheet (example)
DESCRIPTION: Add SAP icon font stylesheet to a page or layout. Preserve the relative path to the css folder as used in the project.
LANGUAGE: HTML
CODE:
```html
<!-- Add to your HTML or fragment where you need SAP icons -->
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```

STEP: 2 — Snippet template with placeholders (example)
DESCRIPTION: Example of a code snippet template containing placeholders that guided development will prompt the user to fill. Use placeholder tokens (e.g. ${Param}) in templates so the tool can substitute user values before insertion.
LANGUAGE: JSON
CODE:
```json
{
  "id": "addCriticalityHighlight",
  "description": "Add semantic highlight for line items based on criticality",
  "targetFile": "webapp/view/ObjectPage.view.xml",
  "template": "<Table:Row>\n  <Text text=\"${Label}\" />\n  <ObjectStatus state=\"{= ${Criticality} === 'High' ? 'Error' : ${Criticality} === 'Medium' ? 'Warning' : 'Success'}\" />\n</Table:Row>",
  "parameters": [
    { "name": "Entity", "type": "entity", "required": true },
    { "name": "NavigationProperty", "type": "navigationProperty", "required": true, "dependsOn": "Entity" },
    { "name": "Label", "type": "string", "required": true },
    { "name": "Criticality", "type": "annotationPath", "required": true }
  ]
}
```

STEP: 3 — Parameter definitions and validation rules (example)
DESCRIPTION: Define parameters with metadata that drives UI behavior in the guided tool: dropdown vs text, context-populated vs static, required flags, inline validation, and dependency pointers.
LANGUAGE: JSON
CODE:
```json
{
  "parameters": [
    {
      "name": "Entity",
      "uiType": "dropdown",
      "valuesSource": "projectModel.entities",
      "required": true
    },
    {
      "name": "NavigationProperty",
      "uiType": "dropdown",
      "valuesSource": "projectModel.navigationProperties",
      "required": true,
      "dependsOn": "Entity",
      "validation": {
        "onMissingValues": "error",
        "message": "Select an entity first to populate navigation properties"
      }
    },
    {
      "name": "Label",
      "uiType": "text",
      "required": true,
      "validation": { "pattern": ".{1,128}", "message": "Label must not be empty" }
    }
  ]
}
```

STEP: 4 — Prefill values across steps (example)
DESCRIPTION: Example mapping where values selected in step 1 are prefilling defaults in step 2. Store previous selections and mark prefilled values (tooltip "1") so users can change them manually.
LANGUAGE: JSON
CODE:
```json
{
  "step1": { "Entity": "SalesOrder" },
  "step2": {
    "Entity": { "default": "${step1.Entity}", "prefilledTooltip": "1" },
    "NavigationProperty": { "default": "", "dependsOn": "Entity" }
  }
}
```

STEP: 5 — Handling dependent selection errors and reactivation of Insert Snippet
DESCRIPTION: Inline validation occurs when dependent parameter values are missing or invalid. Provide UI feedback and disable "Insert Snippet" until validation passes. Example shows typical error response object to surface to the UI.
LANGUAGE: JSON
CODE:
```json
{
  "validationResponse": {
    "isValid": false,
    "errors": [
      { "field": "NavigationProperty", "message": "No navigation properties available for selected Entity 'SalesOrder'." }
    ],
    "action": "disableInsertButton"
  }
}
```

STEP: 6 — Qualifier-based annotation update (example)
DESCRIPTION: When the guide accepts an existing annotation qualifier, populate parameter values from that qualifier, allow edits, and insert updated annotation snippet on confirmation. Example shows qualifier input and resulting annotation payload to be written to annotation file (e.g., annotations.xml or manifest annotations section).
LANGUAGE: JSON
CODE:
```json
{
  "input": { "annotationQualifier": "LineItem#MyQualifier" },
  "resolvedAnnotation": {
    "target": "com.example.Service.SalesOrderType/LineItem",
    "qualifier": "MyQualifier",
    "properties": {
      "CriticalityPath": "Criticality",
      "LabelPath": "Name"
    }
  },
  "updateSnippet": "<Annotation Target=\".../LineItem\" Qualifier=\"MyQualifier\">\n  <!-- updated properties here -->\n</Annotation>"
}
```

STEP: 7 — Generate i18n key from guide input (example)
DESCRIPTION: Demonstrates how entering a label in a guide and clicking the Internationalization icon results in an i18n.properties entry and usage in views. The guide creates a key in i18n.properties and inserts the i18n binding in the snippet.
LANGUAGE: properties
CODE:
```properties
# webapp/i18n/i18n.properties
MY_LABEL_KEY=Order total
```

LANGUAGE: XML
CODE:
```xml
<!-- Example usage in an XML view after snippet insertion -->
<Text text="{i18n>MY_LABEL_KEY}" />
```

STEP: 8 — Common reasons Insert Snippet is disabled (checklist)
DESCRIPTION: Quick checks to perform when "Insert Snippet" is disabled: project selection, OData version mismatch, page type mismatch, or missing context for parameters. Example commands/paths to inspect project configuration.
LANGUAGE: JSON
CODE:
```json
{
  "checks": [
    { "name": "ProjectSelected", "action": "Verify IDE has an active project open" },
    { "name": "ODataVersion", "path": "webapp/manifest.json > sap.app > dataSources", "action": "Confirm OData version matches guide expected version" },
    { "name": "PageType", "path": "webapp/manifest.json > sap.ui5 > routing", "action": "Confirm routed page type matches guide (ObjectPage/ListReport/etc.)" },
    { "name": "ContextAvailable", "action": "Ensure entity/navigation properties exist in the project to populate dropdowns" }
  ]
}
```

STEP: 9 — After Insert Snippet confirmation (success message)
DESCRIPTION: After successful automatic insertion, highlight modified lines and present a confirmation message. Example response for the UI to display.
LANGUAGE: JSON
CODE:
```json
{
  "insertResult": {
    "success": true,
    "message": "Code snippet has been successfully applied",
    "modifiedFile": "webapp/view/ObjectPage.view.xml",
    "modifiedRange": { "startLine": 120, "endLine": 132 }
  }
}
```
--------------------------------

**TITLE**: Chart Column — Add, Configure, Move, Delete, and Sort (UI.Chart + UI.DataPoint + PresentationVariant)

**INTRODUCTION**: Quick, code-focused guide to programmatically create and configure Chart Columns for Fiori list report or object page sections. Includes annotation templates (XML and JSON), required manifest setting for sorting, and step-by-step UI actions that the Page Editor performs. Use these templates to generate or update annotation files and manifest.json when adding chart columns.

**TAGS**: fiori-tools, chart-column, UI.Chart, UI.DataPoint, UI.PresentationVariant, annotations, manifest.json, micro-chart, sorting, minUI5Version

STEP: 1 — Page Editor: Add Chart Column (UI steps, prerequisites)
DESCRIPTION: UI actions performed in the Fiori Tools Page Editor to add a Chart Column and notes on prerequisites. The Page Editor creates UI.Chart and UI.DataPoint annotations automatically when a chart column is added. The Add Chart Column option is disabled if the entity has no numeric properties.
LANGUAGE: text
CODE:
```text
1. In Page Editor: Expand the table node in a section.
2. Click the + (Add) icon in the Columns node.
3. Click "Add Chart Column".
   - Note: Option disabled if table entity has no numeric properties.
4. In the chart-type tree control, choose a Chart Type (Area, Bullet, Column, Line, Radial, Comparison, Harvey, StackedBar).
   - Depending on chart type, fill in mandatory properties.
5. Click "Add".
Result: Page Editor generates a UI.Chart and a UI.DataPoint annotation (annotation file) for the new chart column.
Files affected:
- Annotation file (XML or JSON) — contains UI.Chart and UI.DataPoint entries.
- Optionally manifest.json if you must set minUI5Version for sorting capabilities.
Other assets referenced in UI:
- CSS for icons (example path): ../css/sap-icons.css
- Screenshot example path: images/Chart_Column_b8ccb9a.png
```

STEP: 2 — Chart types and mandatory properties (reference for code generation)
DESCRIPTION: For each supported chart type list the mandatory properties you must set when generating UI.Chart and UI.DataPoint annotations. Use these fields in the annotation templates below.
LANGUAGE: text
CODE:
```text
Area Chart (area)
- Value Source / Value (Path): numeric property representing chart data
- Measure(s): property representing a value
- Dimension(s): property for x-axis
- Optional DataPoint fields: Label, Importance, Hidden, Dimension, Target Value, Criticality Source

Bullet Chart (bullet)
- Value (Path): numeric property representing chart data
- Maximum Value (Path) / Maximum value: fixed number or property path
- Optional: Label, Importance, Hidden, Target Value, Maximum Value Type, Minimum Value Type, Forecast Value, Criticality Source

Column Chart (column)
- Value Source / Value (Path)
- Measure(s)
- Dimension(s)
- Optional: Label, Importance, Hidden, Dimension, Criticality Source

Line Chart (line)
- Value Source / Value (Path)
- Measure(s)
- Dimension(s)
- Optional: Label, Importance, Hidden, Measures collection, Dimension

Radial Chart (radial)
- Value (Path)
- Target Value (Path)
- Optional: Label, Importance, Hidden, Target Value, Criticality Source

Comparison Chart (comparison)
- Value Source / Value (Path)
- Measure(s)
- Dimension(s)
- Optional: Label, Importance, Hidden, Dimension, Criticality for micro charts

Harvey Chart (harvey)
- Value (Path)
- Maximum Value (Path) or property
- Optional: Label, Importance, Hidden, Maximum Value, Criticality for micro charts

Stacked Bar Chart (stackedbar)
- Value Source / Value (Path)
- Measure(s)
- Optional: Label, Importance, Hidden, Criticality for micro charts
```

STEP: 3 — Annotation template: UI.Chart and UI.DataPoint (XML)
DESCRIPTION: Copy-and-fill XML templates into your annotation file to add a chart column and associated datapoint. Use Qualifier to link UI.Chart and UI.DataPoint (same qualifier). Replace Namespace.EntityType, property names, and qualifier string.
LANGUAGE: XML
CODE:
```xml
<!-- Annotation file: annotations.xml -->
<Annotations Target="Namespace.EntityType">
  <!-- Chart annotation: replace Qualifier="MyChart" and values -->
  <Annotation Term="UI.Chart" Qualifier="MyChart">
    <Record Type="UI.ChartType">
      <!-- ChartType: Area, Column, Line, Bullet, Radial, Comparison, Harvey, StackedBar -->
      <PropertyValue Property="ChartType" String="Line" />
      <!-- Measures: one or more measure property paths -->
      <PropertyValue Property="Measures">
        <Collection>
          <PropertyPath>SalesAmount</PropertyPath>
        </Collection>
      </PropertyValue>
      <!-- Dimensions: one or more dimension property paths -->
      <PropertyValue Property="Dimensions">
        <Collection>
          <PropertyPath>Month</PropertyPath>
        </Collection>
      </PropertyValue>
      <!-- Optional: Value shorthand (single measure) -->
      <PropertyValue Property="Value">
        <Path>SalesAmount</Path>
      </PropertyValue>
    </Record>
  </Annotation>

  <!-- DataPoint annotation: same qualifier links it to the chart -->
  <Annotation Term="UI.DataPoint" Qualifier="MyChart">
    <Record Type="UI.DataPointType">
      <PropertyValue Property="Value" Path="SalesAmount" />
      <!-- Optional: target, criticality, title/label -->
      <PropertyValue Property="TargetValue" Path="TargetSales" />
      <PropertyValue Property="Criticality" Path="Criticality" />
      <PropertyValue Property="Title" String="Sales" />
    </Record>
  </Annotation>
</Annotations>
```

STEP: 4 — Annotation template: UI.Chart and UI.DataPoint (JSON)
DESCRIPTION: JSON equivalent for annotation files (annotations.json). Replace EntityName, property paths, and qualifier string. Use when using JSON annotation format.
LANGUAGE: JSON
CODE:
```json
{
  "Annotations": {
    "Namespace.EntityType": {
      "UI.Chart#MyChart": {
        "ChartType": "Line",
        "Measures": [ "SalesAmount" ],
        "Dimensions": [ "Month" ],
        "Value": { "Path": "SalesAmount" }
      },
      "UI.DataPoint#MyChart": {
        "Value": { "Path": "SalesAmount" },
        "TargetValue": { "Path": "TargetSales" },
        "Criticality": { "Path": "Criticality" },
        "Title": { "String": "Sales" }
      }
    }
  }
}
```

STEP: 5 — PresentationVariant for sorting micro charts (XML)
DESCRIPTION: Create a UI.PresentationVariant annotation and reference it for the chart column to enable Sort Order in the Page Editor. Requires minUI5Version >= 1.130.0 in manifest.json. Define SortOrder collection with SortProperty entries (Property and Descending boolean). Link the PV to the chart column by using the same qualifier or referencing the presentation variant on the micro chart configuration.
LANGUAGE: XML
CODE:
```xml
<!-- Annotation file: presentation-annotations.xml -->
<Annotations Target="Namespace.EntityType">
  <!-- PresentationVariant defines sorting for micro charts -->
  <Annotation Term="UI.PresentationVariant" Qualifier="MyChartPV">
    <Record Type="UI.PresentationVariantType">
      <PropertyValue Property="SortOrder">
        <Collection>
          <Record Type="UI.SortPropertyType">
            <PropertyValue Property="Property" PropertyPath="Month" />
            <PropertyValue Property="Descending" Bool="false" />
          </Record>
          <Record Type="UI.SortPropertyType">
            <PropertyValue Property="Property" PropertyPath="SalesAmount" />
            <PropertyValue Property="Descending" Bool="true" />
          </Record>
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>

  <!-- Example: reference PresentationVariant on the chart (qualifier linking) -->
  <!-- Some Page Editor setups will reference the PV qualifier in the chart column config -->
</Annotations>
```

STEP: 6 — PresentationVariant for sorting micro charts (JSON)
DESCRIPTION: JSON PresentationVariant example for annotation files.
LANGUAGE: JSON
CODE:
```json
{
  "Annotations": {
    "Namespace.EntityType": {
      "UI.PresentationVariant#MyChartPV": {
        "SortOrder": [
          {
            "Property": { "PropertyPath": "Month" },
            "Descending": false
          },
          {
            "Property": { "PropertyPath": "SalesAmount" },
            "Descending": true
          }
        ]
      }
    }
  }
}
```

STEP: 7 — manifest.json: set minUI5Version for PresentationVariant-based sorting
DESCRIPTION: Sorting micro charts requires SAPUI5 >= 1.130. Set minUI5Version in manifest.json under sap.ui5 to enable the Page Editor to expose Sort Order for micro charts.
LANGUAGE: JSON
CODE:
```json
{
  "sap.ui5": {
    "minUI5Version": "1.130.0"
  }
}
```

STEP: 8 — Move Chart Column (UI actions)
DESCRIPTION: UI-only actions for reordering columns in Page Editor. Provide both Drag-and-Drop and Arrow button methods. Include multi-select move (Ctrl++).
LANGUAGE: text
CODE:
```text
Drag and Drop:
1. Hover over the table column outline.
2. Press and hold mouse button and drag to a new position (eligible positions highlight in green).
3. Release to drop.
- Multi-column move: select multiple columns, press CTRL + + while dragging.

Arrow Icons:
1. Click Move Up (icon) or Move Down (icon) next to the column name to move one column at a time.
```

STEP: 9 — Delete Chart Column (UI actions)
DESCRIPTION: UI steps to delete a column in Page Editor. The operation removes the column and the Page Editor will open a Delete Confirmation. Clean up unreferenced annotations (PresentationVariant etc.) if desired.
LANGUAGE: text
CODE:
```text
1. Select the column in Page Editor.
2. Click the Delete (trash) icon.
3. In Delete Confirmation popup, click Delete to confirm.
Post-delete cleanup:
- Remove unreferenced UI.PresentationVariant annotations or other unreferenced annotations from the annotation file (Page Editor provides a cleanup procedure to remove unreferenced PresentationVariant annotations).
```

STEP: 10 — Notes and Best Practices for Code Generation
DESCRIPTION: Consolidated implementation notes to follow when generating or modifying chart column annotations and manifest entries.
LANGUAGE: text
CODE:
```text
- The Page Editor generates UI.Chart and UI.DataPoint annotations automatically when adding chart columns; if generating programmatically, keep a consistent Qualifier to link the two.
- Ensure target entity has numeric properties before creating chart columns (otherwise Add Chart Column is disabled).
- For sorting micro charts (area, line, column, comparison, stacked bar), ensure sap.ui5.minUI5Version >= 1.130.0 in manifest.json.
- When creating PresentationVariant annotations for sorting, reference them consistently (qualifier or annotation reference) from the micro chart configuration used by the Page Editor.
- After deleting chart columns via Page Editor, run cleanup to remove unreferenced UI.PresentationVariant annotations to keep annotation files clean.
- Use PropertyPath names exactly as your OData/CDS property names (case-sensitive).
- Optional datapoint fields: Label/Title, Importance, Hidden, TargetValue, Criticality — add them to UI.DataPoint when needed.
```
--------------------------------

**TITLE**: Adding, Deleting, and Maintaining a Chart Section (UI.Chart / UI.ReferenceFacet) for Object Pages

**INTRODUCTION**: Practical, code-focused instructions and ready-to-use annotation snippets for adding a Chart section to an Object/Form Entry Page in Fiori tools. Includes the UI steps and the exact annotation fragments you will add, modify, or remove (XML and CAP CDS examples). Use these snippets when generating or updating annotation files programmatically.

**TAGS**: fiori-tools, annotations, UI.Chart, UI.Facets, UI.ReferenceFacet, Analytics.AggregatedProperty, CAP, CDS, XML

STEP: 1 — Include required UI icon stylesheet (optional visual)
DESCRIPTION: Ensure the sap-icons stylesheet reference is present in your editor preview or local docs if needed. This is not required in annotation files but preserved from the original documentation.
LANGUAGE: HTML
CODE:
```html
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```

STEP: 2 — UI workflow: Add Chart Section (interactive steps)
DESCRIPTION: Use the Page Editor to add a Chart section. This describes the user actions that trigger code changes (annotations added/overridden).
LANGUAGE: Text
CODE:
```text
1. Open Object/Form Entry Page in Page Editor.
2. In the Outline, select the section (or subsection inside a group) and click Add (+).
3. Choose "Add Chart Section".
4. In the popup, fill:
   - Label
   - Entity
   - Type (chart type)
   - Dimension (path to dimension)
   - Measure (choose existing or create new dynamic measure)
5. Click Add.

Resulting code changes (automated):
- Add a UI.Chart annotation (qualified) and a UI.ReferenceFacet record in UI.Facets pointing via annotationPath to the created UI.Chart.
- If creating a new measure, add Analytics.AggregatedProperty to the selected aggregable property with chosen aggregation method.
- Create or override UI.Facets annotation under the entity for the Object Page.
- For CAP CDS, add a 'using' statement in the overridden file if missing.
```

STEP: 3 — XML: Example UI.Chart + UI.Facets + UI.ReferenceFacet (add)
DESCRIPTION: Example OData V4 XML annotation fragments to add a chart and reference it from UI.Facets. Use the Qualifier value (#MyChart) for annotationPath linking.
LANGUAGE: XML
CODE:
```xml
<!-- Define a qualified UI.Chart annotation -->
<Annotation Term="UI.Chart" Qualifier="MyChart">
  <Record>
    <PropertyValue Property="Title" String="Sales Chart"/>
    <!-- ChartType EnumMember values: UI.ChartType/Column, UI.ChartType/Bar, etc. -->
    <PropertyValue Property="ChartType" EnumMember="UI.ChartType/Column"/>
    <PropertyValue Property="Measure" Path="SalesAmount"/>
    <PropertyValue Property="Dimension" Path="Country"/>
  </Record>
</Annotation>

<!-- Add a ReferenceFacet in UI.Facets that references the qualified chart -->
<Annotation Term="UI.Facets">
  <Collection>
    <Record Type="UI.ReferenceFacet">
      <PropertyValue Property="Label" String="Sales Chart"/>
      <!-- Reference the qualified chart by prepending '#' -->
      <PropertyValue Property="AnnotationPath" String="#MyChart"/>
    </Record>
    <!-- ...other facets... -->
  </Collection>
</Annotation>
```

STEP: 4 — XML: Example Analytics.AggregatedProperty (create dynamic measure)
DESCRIPTION: If creating a new dynamic measure, annotate the property with Analytics.AggregatedProperty. This example uses sum aggregation.
LANGUAGE: XML
CODE:
```xml
<!-- Apply aggregated property to an existing aggregable property -->
<Annotation Term="Analytics.AggregatedProperty" Target="Namespace.EntityType/SalesAmount">
  <Record>
    <PropertyValue Property="AggregationMethod" EnumMember="Analytics.AggregationMethod/Sum"/>
    <!-- Optionally list ApplicableFilters -->
    <PropertyValue Property="ApplicableFilters">
      <Collection>
        <Path>Country</Path>
      </Collection>
    </PropertyValue>
  </Record>
</Annotation>
```

STEP: 5 — CAP CDS: Add using statement + annotated snippet (if using CDS)
DESCRIPTION: When working with CAP CDS annotation files, add a using statement if missing and annotate the entity with UI.Facets and an inline UI.Chart (CDS annotation style). Use this template to programmatically inject or override CDS annotations.
LANGUAGE: CDS
CODE:
```cds
using { UI, Analytics } from '@sap/cds/common';

entity Sales {
  key ID : UUID;
  SalesAmount : Decimal(13,2);
  Country : String;
}

/* Add UI facets and a qualified chart annotation (CDS annotation style) */
annotate Sales with {
  @UI.facet: [
    {
      $Type : 'UI.ReferenceFacet',
      Label : 'Sales Chart',
      AnnotationPath : '#MyChart'
    }
  ]
}

annotate Sales with {
  @UI.Chart : {
    Title : 'Sales Chart',
    ChartType : 'Column',  /* implementation-specific enum mapping */
    Measure : ['SalesAmount'],
    Dimension : ['Country']
  } as MyChart
}

/* Add aggregated property example in CDS style */
annotate Sales with {
  SalesAmount @Analytics.AggregatedProperty {
    AggregationMethod : 'Sum'
  };
}
```

STEP: 6 — Deleting Chart Section (UI steps + programmatic cleanup)
DESCRIPTION: If the section is deleted in the editor, the generator should remove the UI.ReferenceFacet record from UI.Facets. UI.Chart annotations are cleaned up by a cleanup procedure — show the programmatic removal snippet for UI.Facets.
LANGUAGE: XML
CODE:
```xml
<!-- To delete chart section: remove the ReferenceFacet record from UI.Facets -->
<!-- BEFORE: -->
<Annotation Term="UI.Facets">
  <Collection>
    <Record Type="UI.ReferenceFacet">
      <PropertyValue Property="Label" String="Sales Chart"/>
      <PropertyValue Property="AnnotationPath" String="#MyChart"/>
    </Record>
    <!-- other facets -->
  </Collection>
</Annotation>

<!-- AFTER: the Sales Chart ReferenceFacet entry is removed -->
<Annotation Term="UI.Facets">
  <Collection>
    <!-- other facets remain, the ReferenceFacet entry above is deleted -->
  </Collection>
</Annotation>

<!-- Note: UI.Chart annotation identified by qualifier '#MyChart' should be removed by cleanup -->
```

STEP: 7 — Maintain Chart Properties (update individual UI.Chart fields)
DESCRIPTION: Examples for programmatically updating chart properties such as Label, ChartType, Measure, and Dimension. Use the UI.Chart annotation record to modify values.
LANGUAGE: XML
CODE:
```xml
<!-- Update chart title, type, measure, or dimension by editing the UI.Chart record -->
<Annotation Term="UI.Chart" Qualifier="MyChart">
  <Record>
    <PropertyValue Property="Title" String="Updated Sales Chart Title"/>
    <PropertyValue Property="ChartType" EnumMember="UI.ChartType/Bar"/>
    <PropertyValue Property="Measure" Path="SalesAmount"/>
    <PropertyValue Property="Dimension" Path="Region"/>
  </Record>
</Annotation>
```

STEP: 8 — Mark Chart / Section Hidden
DESCRIPTION: To hide the chart section or the related property, add UI.Hidden at the facet or property level. This snippet shows both approaches.
LANGUAGE: XML
CODE:
```xml
<!-- Hide a ReferenceFacet (section) -->
<Annotation Term="UI.Facets">
  <Collection>
    <Record Type="UI.ReferenceFacet">
      <PropertyValue Property="Label" String="Sales Chart"/>
      <PropertyValue Property="AnnotationPath" String="#MyChart"/>
      <PropertyValue Property="Hidden" Bool="true"/>
    </Record>
  </Collection>
</Annotation>

<!-- Or hide a property used by the chart -->
<Annotation Term="UI.Hidden" Target="Namespace.EntityType/SalesAmount">
  <Bool>true</Bool>
</Annotation>
```

STEP: 9 — References to other maintenance tasks & cleanup
DESCRIPTION: When programmatically changing labels or other section metadata, update the corresponding property panel values and ensure cleanup runs to remove orphaned UI.Chart annotations. Links in the original docs reference:
- Change Form Section Label
- Maintain Analytical Chart Properties
- Hidden appendix
LANGUAGE: Text
CODE:
```text
- When label is changed in the Property Panel, update UI.ReferenceFacet Label.
- When creating a dynamic measure, ensure Analytics.AggregatedProperty is applied.
- Ensure cleanup step removes UI.Chart annotations that no longer have a ReferenceFacet referring to them.
- See related documents (maintain analytical chart properties, change form section label, hidden) for UI-level field mappings you might need to replicate in code.
```
--------------------------------

**TITLE**: Code Completion for XML Annotation Language Server

**INTRODUCTION**: This guide describes how to use the XML annotation language server's code completion features while editing OData annotations in XML. It covers keyboard shortcuts to trigger completion, how to accept suggestions, filtering results, and using "/" to accept a path segment and continue completing the next segment. Use these steps when authoring annotation files (.xml) or manifest fragments to speed up and avoid typos in terms, targets, attributes, and values.

**TAGS**: fiori-tools, xml, annotations, odata, language-server, code-completion, micro-snippets

**STEP**: Trigger code completion (keyboard shortcuts)

**DESCRIPTION**: Use the editor's code completion trigger to show context-aware suggestions (terms, annotation targets, attributes, values). These suggestions are generated from project metadata, OData vocabularies, and analysis of the project structure.

- Windows/Linux: press Ctrl + Space
- macOS: press CMD + Space

You can navigate suggestions with arrow keys or the mouse and accept with Enter or a click.

**LANGUAGE**: plaintext

**CODE**:
```plaintext
# Trigger completion
# Windows/Linux: Ctrl + Space
# macOS:     CMD + Space

# Accept suggestion
# Enter or click with mouse
```

**STEP**: Example — Completing an annotation property value (Path)

**DESCRIPTION**: Example XML that shows where to invoke completion for a Path value. Place the caret inside the Path attribute value and trigger completion to get properties/navigation properties from the target entity type.

- File: annotations.xml (or any .xml annotation fragment)
- Action: Trigger code completion inside Path="" to get property names.

**LANGUAGE**: XML

**CODE**:
```xml
<?xml version="1.0" encoding="utf-8"?>
<Annotations Target="MyService.MyEntityType" xmlns="http://docs.oasis-open.org/odata/ns/edm">
  <Annotation Term="com.sap.vocabularies.UI.v1.HeaderInfo">
    <Record>
      <!-- Place caret between the quotes below and press Ctrl/CMD + Space -->
      <PropertyValue Property="TypeName" Path=""/>
    </Record>
  </Annotation>
</Annotations>
```

**STEP**: Example — Completing target/path segments and using "/" to advance segments

**DESCRIPTION**: For complex path values (navigation-property chains), complete segment-by-segment. Use "/" to accept the current segment and re-open completion for the next segment. This is useful for values like navigation paths: Entity/NavigationProperty/Property.

- Type the first segment (or trigger completion immediately).
- Select a suggestion and press "/" to accept it and open suggestions for the next segment.
- Continue until the full path is built.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="MyService.MyEntitySet" xmlns="http://docs.oasis-open.org/odata/ns/edm">
  <Annotation Term="com.sap.vocabularies.Common.v1.SomeTerm">
    <Collection>
      <!-- Example: type "ToOrders" then press Ctrl/CMD+Space to select a navigation property,
           press "/" to accept and immediately get suggestions for the next segment. -->
      <Path>ToOrders/</Path>
    </Collection>
  </Annotation>
</Annotations>
```

**STEP**: Filtering and scope of suggestions

**DESCRIPTION**: Filter suggestions by typing additional characters. The suggestion list is context-aware: it depends on the location of the caret (term, attribute, target, or annotation value) and the project metadata and OData vocabularies. Use typed characters to narrow down results quickly.

**LANGUAGE**: plaintext

**CODE**:
```plaintext
# Example interaction:
# 1. Inside Path="", type "Prod" then press Ctrl/CMD+Space
# 2. The list is filtered to completions beginning with "Prod" (e.g., ProductID, ProductName)
```

**STEP**: Additional notes and resources

**DESCRIPTION**: Behavior summary and further reference.

- Use Enter or mouse click to accept completion.
- Use arrow keys to navigate the suggestion list.
- Use "/" to accept the current path segment and trigger completion for the next segment.
- For code blocks and reusable snippets, see Micro-Snippets (micro-snippets-addf811.md).

**LANGUAGE**: plaintext

**CODE**:
```plaintext
# Summary
# - Trigger: Ctrl/Cmd + Space
# - Accept segment and continue: use "/"
# - Accept suggestion: Enter or mouse click
# - Filter: type more characters
# - Reference: micro-snippets-addf811.md
```
--------------------------------

**TITLE**: Configure Page Elements with Page Editor (SAP Fiori tools)

**INTRODUCTION**: This guide explains how to prepare and use the Page Editor in SAP Fiori tools to configure Fiori elements applications. It covers installing the @sap/ux-specification module (matching your UI5 version), verifying manifest minUI5version, locating configuration sources, and using the Page Editor and Application Modeler tree view to edit manifest settings and UI5 flexibility changes.

**TAGS**: fiori-tools, sapui5, ux-specification, page-editor, manifest, flexibility, odata, annotations, application-modeler

**STEP**: 1 — Install @sap/ux-specification (pick version matching UI5)
**DESCRIPTION**: Install the @sap/ux-specification package in the application root. Select the package version that corresponds to your target UI5 version (check UI5-* tags on the npm page or use the npm view command to list versions). Use --save-dev for developer tooling.
**LANGUAGE**: Shell
**CODE**:
```bash
# List available versions (JSON) to choose the matching version
npm view @sap/ux-specification versions --json

# Example: install a specific version that matches your UI5 version
npm install --save-dev @sap/ux-specification@<matching-version>

# Typical location after install:
# <your-app-root>/node_modules/@sap/ux-specification
ls -la node_modules/@sap/ux-specification
```

**STEP**: 2 — Check and set manifest minUI5version
**DESCRIPTION**: Verify the application's minimum UI5 version in the manifest.json so you can choose the correct @sap/ux-specification module version. The manifest is typically at webapp/manifest.json (or root manifest in your app folder).
**LANGUAGE**: JSON
**CODE**:
```json
// webapp/manifest.json (excerpt)
{
  "sap.ui5": {
    "dependencies": {
      "minUI5Version": "1.88.0"
    }
  }
}
```

**STEP**: 3 — Reference and open the Configuration Documentation
**DESCRIPTION**: The list of configurable properties for UI-based maintenance is provided by the installed @sap/ux-specification module. Open the Configuration Documentation in the Application Modeler by right-clicking your project in the tree view and selecting the Configuration Documentation entry to view manifest and UI5 flexibility properties available for the current module version.
**LANGUAGE**: Text
**CODE**:
```text
# In the Application Modeler tree view:
# 1. Right-click the project root
# 2. Select "Configuration Documentation"
# This document is generated from the installed node_modules/@sap/ux-specification
```

**STEP**: 4 — Open and use the Page Editor (outline + Property Panel)
**DESCRIPTION**: Use the Page Editor to view an outline of configurable elements for the selected page and edit properties via the Property Panel. The Property Panel supports search filters, info tooltips, and direct edits in the associated file (manifest or flexibility change files). Supported template types include List Report, Worklist, Analytical List Page, Overview Page (OData V2/V4), Form Entry Object Page (OData V4), and Custom Page (OData V4).
**LANGUAGE**: Text
**CODE**:
```text
# Ways to open Page Editor:
# - In Explorer: right-click the app root or any folder -> "Show Page Map"
# - Select the page and click the ✏️ (Configure Page) icon
# - From the Application Modeler sidebar: click the page node in the tree view
# - In the virtual JSON page editor: click the "Show Page Editor" icon in the Editor Title menu

# Once open:
# - Click nodes in the outline to expose properties in the Property Panel
# - Use search/filter inside the Property Panel to find properties
# - Use the "edit in file" action to open and edit the underlying manifest or flexibility change file
```

**STEP**: 5 — Create and maintain annotation-based elements (OData V4)
**DESCRIPTION**: For List Report, Object Page, and Form Entry Page on OData V4, the Page Editor supports creating and maintaining annotation-based UI elements. Use the "Maintaining Annotation-Based Elements" feature in the Application Modeler to add or update annotation-driven controls.
**LANGUAGE**: Text
**CODE**:
```text
# Workflow:
# 1. Open the Page Editor for the target page
# 2. In the outline, create or select the annotation-based element (e.g., field, facet)
# 3. Use the Property Panel to configure annotation properties
# 4. Save changes to generate or update annotation files and manifest entries
```

**STEP**: 6 — Enable JSON schemas in the Application Modeler tree view
**DESCRIPTION**: Switch the tree view from simplified to technical (show generated JSON schema files) by enabling the JSON schema display option in the Application Modeler settings. This reveals the virtual JSON schema files generated for pages and lets you inspect the full generated structure.
**LANGUAGE**: Text
**CODE**:
```text
# In the Application Modeler:
# 1. Open Settings (Application Modeler -> Settings)
# 2. Enable the "Show JSON Schemas" checkbox
# Result: The Application Modeler tree view updates with generated JSON schema files
```

**STEP**: 7 — Include required UI stylesheet in your app (optional)
**DESCRIPTION**: If your configuration or previews require the SAP icons stylesheet, include it in your pages or index HTML.
**LANGUAGE**: HTML
**CODE**:
```html
<!-- Example: include SAP icons stylesheet in your app's HTML -->
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```
--------------------------------

**TITLE**: Connected Fields — Annotation examples and manipulation for Object Page (Form / Identification Sections)

**INTRODUCTION**: This document provides concise, actionable annotation examples and code snippets for adding, moving, deleting, and maintaining "Connected Fields" in SAP Fiori Object Page content (Form Section / Identification Section). Use the XML/JSON/JS snippets to generate or update UI annotations programmatically and to implement cleanup logic for orphaned annotations.

**TAGS**: fiori-tools, UI.ConnectedFields, UI.DataField, UI.FieldGroup, UI.Identification, annotations, ObjectPage

STEP: Add Connected Fields (annotation XML example)

DESCRIPTION: Add a connected fields node that groups two semantically related properties under the same label. Use this annotation inside a UI.FieldGroup (Form Section) or UI.Identification (Identification Section). Set an optional delimiter. Do not reuse a property that is already part of another connected fields node in the same section.

LANGUAGE: XML

CODE:
```xml
<!-- file: annotations.xml (fragment) -->
<Annotations Target="YourService.YourEntityType">
  <Annotation Term="UI.FieldGroup"> <!-- use UI.Identification instead for the Identification section -->
    <Collection>
      <Record Type="UI.FieldGroupType">
        <PropertyValue Property="Label" String="General Information"/>
        <PropertyValue Property="Data">
          <Collection>
            <!-- Connected fields node -->
            <Record Type="UI.ConnectedFields">
              <PropertyValue Property="Label" String="Full name"/>
              <PropertyValue Property="Delimiter" String=":"/>  <!-- optional; if omitted, space is used -->
              <PropertyValue Property="Value">
                <Collection>
                  <Record Type="UI.DataField">
                    <PropertyValue Property="Value" PropertyPath="FirstName"/>
                  </Record>
                  <Record Type="UI.DataField">
                    <PropertyValue Property="Value" PropertyPath="LastName"/>
                  </Record>
                </Collection>
              </PropertyValue>
            </Record>
            <!-- other fields... -->
          </Collection>
        </PropertyValue>
      </Record>
    </Collection>
  </Annotation>
</Annotations>
```

STEP: Add Connected Fields (annotation JSON example)

DESCRIPTION: Equivalent JSON representation if you manage annotation files in JSON format. The "Value" array contains two UI.DataField entries that reference properties by PropertyPath.

LANGUAGE: JSON

CODE:
```json
{
  "Annotations": {
    "YourService.YourEntityType": {
      "UI.FieldGroup": [
        {
          "Label": "General Information",
          "Data": [
            {
              "$Type": "UI.ConnectedFields",
              "Label": "Full name",
              "Delimiter": ":",
              "Value": [
                {
                  "$Type": "UI.DataField",
                  "Value": { "Path": "FirstName" }
                },
                {
                  "$Type": "UI.DataField",
                  "Value": { "Path": "LastName" }
                }
              ]
            }
          ]
        }
      ]
    }
  }
}
```

STEP: Move Connected Fields (annotation reordering)

DESCRIPTION: Programmatic move = reorder the entries inside the containing collection (UI.FieldGroup.Data or UI.Identification.Data). When moving within an Object Page content area in the tooling UI, use drag-and-drop or arrow icons; programmatically achieve the same by changing array order. Note: connected fields cannot be moved to the Header Section.

LANGUAGE: JavaScript (reorder array)

CODE:
```javascript
// Reorder connected fields entries inside a FieldGroup.Data array (annotations.json loaded as JS object)
function moveEntryUp(fieldGroup, index) {
  if (index <= 0) return;
  const data = fieldGroup.Data;
  [data[index - 1], data[index]] = [data[index], data[index - 1]];
}

// Example usage
const fieldGroup = annotations["YourService.YourEntityType"]["UI.FieldGroup"][0];
moveEntryUp(fieldGroup, 2); // move the element at index 2 up by one
// then serialize annotations back to file
```

STEP: Swap fields inside a Connected Fields node (sequence change)

DESCRIPTION: Swap the two UI.DataField items inside the UI.ConnectedFields.Value collection to change display order.

LANGUAGE: JavaScript

CODE:
```javascript
// Swap two fields inside a connected fields node
function swapConnectedFields(connectedNode) {
  const value = connectedNode.Value;
  if (!Array.isArray(value) || value.length < 2) return;
  [value[0], value[1]] = [value[1], value[0]];
}

// Example usage
const connected = fieldGroup.Data[0]; // the connected fields node
swapConnectedFields(connected);
```

STEP: Delete Connected Fields

DESCRIPTION: Delete the entire connected fields node from the containing collection. Deleting individual fields inside a connected fields node is not supported — you must delete the whole node and re-add if needed. Note: Removing the connected fields node removes its UI.DataField records from UI.FieldGroup or UI.Identification; property-level annotations on entity properties are not deleted.

LANGUAGE: JavaScript

CODE:
```javascript
// Remove connected fields node at index from a FieldGroup.Data array
function deleteConnectedFields(fieldGroup, index) {
  const item = fieldGroup.Data[index];
  if (item && item["$Type"] === "UI.ConnectedFields") {
    fieldGroup.Data.splice(index, 1);
  }
}

// Example usage
deleteConnectedFields(fieldGroup, 0); // remove first connected fields node
```

STEP: Cleanup orphaned UI.ConnectedFields annotations

DESCRIPTION: After manual edits or deletions, orphaned UI.ConnectedFields annotations may remain. Run a cleanup that removes UI.ConnectedFields entries not referenced by any FieldGroup or Identification, or that reference non-existing properties. Example Node.js script scans a JSON annotation file and removes unreferenced connected fields. Adapt to your project layout (annotations.json / annotations.xml).

LANGUAGE: JavaScript (Node.js)

CODE:
```javascript
// cleanup-annotations.js (simple example for annotations.json)
const fs = require('fs');
const path = './annotations.json'; // adapt path
const annotations = JSON.parse(fs.readFileSync(path, 'utf8'));

function isConnectedFields(obj) {
  return obj && obj["$Type"] === "UI.ConnectedFields";
}

function validateConnectedFields(cf) {
  if (!Array.isArray(cf.Value)) return false;
  // ensure both DataField.Value.Path exist (basic check)
  return cf.Value.every(df => df && df["$Type"] === "UI.DataField" && df.Value && df.Value.Path);
}

// iterate service/entity annotations and clean orphaned UI.ConnectedFields occurrences
for (const serviceEntity in annotations.Annotations) {
  const entityAnno = annotations.Annotations[serviceEntity];
  ["UI.FieldGroup", "UI.Identification"].forEach(section => {
    const groups = entityAnno[section];
    if (!Array.isArray(groups)) return;
    groups.forEach(group => {
      if (!Array.isArray(group.Data)) return;
      group.Data = group.Data.filter(item => {
        if (!isConnectedFields(item)) return true; // keep non-connected items
        return validateConnectedFields(item); // keep only valid connected fields
      });
    });
  });
}

fs.writeFileSync(path, JSON.stringify(annotations, null, 2), 'utf8');
console.log('Cleanup complete');
```

STEP: Maintain Connected Fields properties (label, delimiter, hidden)

DESCRIPTION: Update label, delimiter, or Hidden (static or dynamic) at the connected fields node level. You cannot change the properties used as connected fields — to change properties remove the node and add a new one. The delimiter is not translatable. Hidden can be a boolean or bound to a boolean property path.

LANGUAGE: XML

CODE:
```xml
<!-- Examples of property updates inside a UI.ConnectedFields record -->
<Record Type="UI.ConnectedFields">
  <!-- label (string) -->
  <PropertyValue Property="Label" String="Full name"/>

  <!-- delimiter (string, not translatable) -->
  <PropertyValue Property="Delimiter" String=" - "/>

  <!-- static hidden (boolean) -->
  <PropertyValue Property="Hidden" Bool="true"/>

  <!-- dynamic hidden (based on entity boolean property 'IsHiddenFlag') -->
  <PropertyValue Property="Hidden">
    <Path>IsHiddenFlag</Path>
  </PropertyValue>

  <!-- Value with the two fields remains the same -->
  <PropertyValue Property="Value">
    <Collection>
      <Record Type="UI.DataField"><PropertyValue Property="Value" PropertyPath="FirstName"/></Record>
      <Record Type="UI.DataField"><PropertyValue Property="Value" PropertyPath="LastName"/></Record>
    </Collection>
  </PropertyValue>
</Record>
```

STEP: References and UI constraints

DESCRIPTION: Operational and UI constraints to apply when generating or manipulating annotations:

- You cannot add a property to a connected fields node if that property is already used by another connected fields node in the same section.
- You cannot move connected fields to the Header Section.
- Deleting a connected fields node removes its UI.DataField record(s) from UI.FieldGroup or UI.Identification, but does not delete annotations applied to the entity properties themselves.
- To remove orphaned UI.ConnectedFields annotation entries, run an explicit cleanup procedure (example script above).

LANGUAGE: HTML (asset reference)

CODE:
```html
<!-- UI icon stylesheet referenced in original docs; include in tooling UI if needed -->
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```
--------------------------------

**TITLE**: Contact Column — Add, Configure, Move, and Delete (Fiori Tools)

**INTRODUCTION**: This guide shows how to add a Communication.Contact contact column to a table in a Fiori elements list report or an object page section using the Page Editor (UI) and how to represent the same column in OData annotation XML. It also documents UI actions to move or delete the column. Use the XML snippet to edit annotation files directly (annotations.xml) or to understand what the Page Editor creates.

**TAGS**: fiori-tools, contact, Communication.Contact, annotations, list report, object page, UI.Table, LineItem

STEP: Add a Contact Column (Page Editor UI)
DESCRIPTION: Use the Page Editor to insert a Contact column into a table (list report or object page section). The Page Editor will create a Communication.Contact annotation instance by default; you can change its Label and other properties in the Property Panel.
LANGUAGE: UI (Page Editor)
CODE:
```text
1. In Page Editor, expand the table node and select Columns.
2. Click the + (Add) icon and choose "Add Contact Column".
3. In the tree control choose the Contacts navigation or annotation entry you want to bind (e.g., Contacts).
4. Click Add.
5. Select the new column and edit properties in the Property Panel:
   - Label: default "Contact Name" (changeable)
   - Importance: [Low|Medium|High]
   - Hidden: [true|false]
   - Contact: binding target (navigation property or annotation)
```

STEP: Example Annotation — define Contact annotation and reference it in LineItem
DESCRIPTION: Example XML for annotations.xml showing a Communication.Contact annotation (qualifier "Contacts") and a UI.LineItem column that uses DataFieldForAnnotation to display the contact. Adjust Target, property paths, and qualifier to match your service and entity model. Place in webapp/annotations/<service>.xml or your project's annotation file.
LANGUAGE: XML
CODE:
```xml
<!-- File: webapp/annotations/annotations.xml -->
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
  <edmx:DataServices>
    <!-- Replace MyService.MyEntityType with your entity type -->
    <Annotations Target="MyService.MyEntityType">
      <!-- LineItem: adds a column that references the Contact annotation instance -->
      <Annotation Term="UI.LineItem">
        <Collection>
          <Record Type="UI.DataFieldForAnnotation">
            <PropertyValue Property="Label" String="Contact Name"/>
            <!-- Reference the Contact annotation instance by qualifier -->
            <!-- Adjust AnnotationPath syntax to match your annotation qualifier usage -->
            <PropertyValue Property="AnnotationPath" String="@com.sap.vocabularies.Communication.v1.Contact#Contacts"/>
          </Record>
        </Collection>
      </Annotation>
    </Annotations>

    <!-- Define the Contact annotation instance (qualifier "Contacts"). -->
    <!-- Replace ContactName, PhoneNumber, EmailAddress with your entity property names -->
    <Annotations Target="MyService.MyEntityType">
      <Annotation Term="com.sap.vocabularies.Communication.v1.Contact" Qualifier="Contacts">
        <Record>
          <PropertyValue Property="ContactName" Path="ContactName"/>
          <PropertyValue Property="Telephone" Path="PhoneNumber"/>
          <PropertyValue Property="Email" Path="EmailAddress"/>
        </Record>
      </Annotation>
    </Annotations>
  </edmx:DataServices>
</edmx:Edmx>
```

STEP: Moving a Contact Column (UI)
DESCRIPTION: Move a column inside the table using drag-and-drop or the column arrow icons in the Page Editor.
LANGUAGE: UI (Page Editor)
CODE:
```text
Options:
- Drag and Drop:
  1. Hover over the table column outline.
  2. Press and hold the mouse button and move the column to a new highlighted position (eligible positions highlight in green).
  3. Release to place the column.
  - To move multiple columns at once, select multiple columns first (CTRL+click or multi-select) then drag.

- Arrow Icons:
  1. Click the Move Up (icon) or Move Down (icon) next to the column name in the Columns list.
  2. Note: Arrow icons move one column at a time.
```

STEP: Deleting a Contact Column (UI)
DESCRIPTION: Remove the contact column from the table using the Page Editor's delete action. This deletes the column definition (and the UI line item reference). If you directly edited annotation files, remove the LineItem DataFieldForAnnotation (and optionally the Contact annotation instance).
LANGUAGE: UI (Page Editor)
CODE:
```text
1. In the Page Editor, navigate to the column entry to delete.
2. Click the Delete (trash) icon to open the Delete Confirmation dialog.
3. Click Delete to confirm.

If editing annotations.xml manually:
- Remove the <Record Type="UI.DataFieldForAnnotation"> ... </Record> entry from the UI.LineItem collection.
- Optionally remove the com.sap.vocabularies.Communication.v1.Contact annotation instance (Qualifier) if it is no longer used.
```

STEP: Project assets and file paths to keep
DESCRIPTION: Keep these project assets and paths when referencing the documentation image and icon font.
LANGUAGE: text/HTML
CODE:
```html
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
<!-- Example image asset path used in docs -->
images/FIORI_TOOLS_CONTACT_COLUMN_0e0431c.png
```

STEP: Notes and quick tips
DESCRIPTION: Quick, code-oriented reminders when implementing contact columns.
LANGUAGE: text
CODE:
```text
- The Page Editor creates a Communication.Contact annotation instance with a default label "Contact Name".
- When creating annotations manually, use Qualifier to disambiguate multiple Contact annotations on the same entity.
- Ensure property paths (ContactName, PhoneNumber, EmailAddress) match exact entity property names.
- After editing annotation files, rebuild/redeploy the annotations or refresh the metadata in the Fiori tools to see UI changes.
```
--------------------------------

**TITLE**: Contact Field — Add/Move/Delete Communication.Contact Annotation for Object Page Sections

**INTRODUCTION**: This document describes how to add, move, and delete a Contact Field on an SAP Fiori Object Page (Form Section or Identification Section) by creating or editing the com.sap.vocabularies.Communication.v1.Contact annotation. It includes exact UI steps and example annotation files (XML, JSON, CDS-style) you can drop into your annotation repository. Use these snippets as templates; replace placeholder targets and property paths with your service/entity/property names.

**TAGS**: fiori-tools, contact-field, annotations, Communication.Contact, ObjectPage, UI5, SAP Fiori

STEP: 1 — Add Contact Field using Page Editor (UI)
DESCRIPTION: Use Page Editor to add a Contact Field to a Form or Identification section. This creates a Communication.Contact annotation entry that you must supply/modify in your annotation files if not auto-generated.
LANGUAGE: None
CODE:
```text
UI Steps:
1. Open Page Editor and expand the Object Page.
2. Under the Form or Identification node click the + (Add) icon and choose "Add Contact Field".
3. In the tree control select "Contact".
4. Click "Add" — this creates a new Communication.Contact annotation reference (or a placeholder you should implement in your annotations file).
```

STEP: 2 — Annotation file path and icon stylesheet inclusion
DESCRIPTION: Typical file location for annotation files and optional icon stylesheet reference used by examples.
LANGUAGE: None
CODE:
```text
Common file path:
- annotations/Contact.annotation.xml
- annotations/Contact.annotation.json

HTML icon stylesheet (if used in local demo pages):
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```

STEP: 3 — XML example: Add Communication.Contact for a property
DESCRIPTION: XML annotation snippet. Replace YourService.YourEntityType and ContactProperty/Phone/Email with your actual OData namespace, entity type, and property paths. Use Target with a property path (EntityType/Property) so UI5 can render the Contact Field in the Object Page section.
LANGUAGE: XML
CODE:
```xml
<!-- File: annotations/Contact.annotation.xml -->
<Annotations xmlns="http://docs.oasis-open.org/odata/ns/edm">
  <!-- Target a property on an entity type -->
  <Annotations Target="YourService.YourEntityType/ContactProperty">
    <Annotation Term="com.sap.vocabularies.Communication.v1.Contact">
      <Record>
        <!-- map properties to existing properties in your entity -->
        <PropertyValue Property="Telephone" Path="Phone"/>
        <PropertyValue Property="Email" Path="Email"/>
        <PropertyValue Property="WebURL" Path="Website"/>
        <PropertyValue Property="Fax" Path="FaxNumber"/>
        <!-- optional Purpose -->
        <PropertyValue Property="Purpose" String="Work"/>
      </Record>
    </Annotation>
  </Annotations>
</Annotations>
```

STEP: 4 — JSON example: Add Communication.Contact (OData JSON annotation style)
DESCRIPTION: JSON-style annotation snippet. Adjust the target and paths to your entity/property names. Use this if your toolchain consumes JSON annotation files.
LANGUAGE: JSON
CODE:
```json
// File: annotations/Contact.annotation.json
{
  "annotations": [
    {
      "target": "YourService.YourEntityType/ContactProperty",
      "annotations": [
        {
          "term": "com.sap.vocabularies.Communication.v1.Contact",
          "record": {
            "Telephone": { "Path": "Phone" },
            "Email": { "Path": "Email" },
            "WebURL": { "Path": "Website" },
            "Fax": { "Path": "FaxNumber" },
            "Purpose": { "String": "Work" }
          }
        }
      ]
    }
  ]
}
```

STEP: 5 — CDS-style example (annotation on a property/entity)
DESCRIPTION: CDS/annotation-style example for reference. Some toolchains can translate CDS annotations to OData annotations. Replace entity and property names as needed. This is a conceptual template — adapt to your CDS dialect/tooling.
LANGUAGE: CDS
CODE:
```cds
// File: db/src/YourEntity.cds
entity YourEntity {
  key ID : UUID;
  Phone   : String;
  Email   : String;
  Website : String;
  FaxNumber : String;

  // Annotate the Contact property (example syntax, adjust per CDS tooling)
  @com.sap.vocabularies.Communication.v1.Contact: {
    Telephone: { Path: 'Phone' },
    Email:     { Path: 'Email' },
    WebURL:    { Path: 'Website' },
    Fax:       { Path: 'FaxNumber' },
    Purpose:   'Work'
  }
  ContactProperty : String; // property used as annotation target
}
```

STEP: 6 — Move Contact Field between sections (code-level action)
DESCRIPTION: To move a Contact Field between sections, update the Target path for the Contact annotation so it remains reachable from the new section. If the UI tool enforces relative path constraints, ensure the annotation target's path is valid relative to the base annotations for the target section.
LANGUAGE: XML
CODE:
```xml
<!-- Example: change target from SectionA to SectionB by switching the annotation target -->
<!-- ORIGINAL -->
<Annotations Target="YourService.YourEntityType/ContactProperty">
  ...
</Annotations>

<!-- NEW TARGET (moved) -->
<Annotations Target="YourService.YourEntityType/ContactPropertyInOtherSection">
  ...
</Annotations>
```

STEP: 7 — Delete Contact Field (UI and code options)
DESCRIPTION: Two deletion methods: UI and code. UI: navigate to the field in Page Editor and click the trash icon, then confirm. Code: remove the Communication.Contact annotation block from your annotation file. After deletion, refresh UI metadata to reflect changes.
LANGUAGE: None
CODE:
```text
UI Deletion:
1. Navigate to the field in Page Editor.
2. Click the trash (Delete) icon.
3. Confirm Delete in the popup.

Code Deletion:
1. Open annotations/Contact.annotation.xml (or JSON) and remove the <Annotations> block (or the JSON entry) that contains the com.sap.vocabularies.Communication.v1.Contact annotation.
2. Save and refresh your app or metadata cache.
```

STEP: 8 — Validation checklist before deploying Contact Field
DESCRIPTION: Quick checklist to ensure Contact Field works in runtime.
LANGUAGE: None
CODE:
```text
- Ensure annotation target exists and paths (Phone, Email, etc.) are valid properties in the OData service.
- Ensure the annotation file is referenced by manifest or annotation loader and included in build/deployment.
- If using Page Editor, verify the section allows fields at the annotation path (relative path constraints).
- After changes, clear UI metadata cache or restart Fiori preview to reflect annotations.
```
--------------------------------

**TITLE**: Currently Available Guided Development Guides (Actionable Code Snippets)

**INTRODUCTION**: This document lists the currently available guided-development guides and provides concise, actionable guidance and minimal code snippets for automating or implementing each change in an SAP Fiori project (UI5/FPM, CAP, OData V2/V4, ABAP CDS). Use the snippets as starter templates to generate code changes programmatically (RAG agents, codemods, or generators).

**TAGS**: fiori-tools, guided-development, UI5, CAP, ODataV2, ODataV4, CDS, ABAP, TypeScript, XML, Manifest, ExtensionPoint, PageConfig

STEP: Add a chart building block
DESCRIPTION: Add a chart building block to an overview or object page. Update XML view and bind to OData V4/CAP CDS entity. Include chart library and dimensions/measures.
LANGUAGE: XML
CODE:
```XML
<!-- view.fragment.xml -->
<Chart id="myChart" chartType="bar" rows="{path: '/MyEntity'}">
  <Dimension>
    <Label>Category</Label>
    <Value>{Category}</Value>
  </Dimension>
  <Measure>
    <Label>Amount</Label>
    <Value>{Amount}</Value>
  </Measure>
</Chart>
```

STEP: Add a custom action to a page using extensions
DESCRIPTION: Create an extension controller hook and register an action button in manifest for OData V2/V4 using TypeScript extension.
LANGUAGE: TypeScript
CODE:
```TypeScript
// webapp/ext/CustomActions.controller.ts
import Controller from "sap/ui/core/mvc/Controller";
export default class CustomActions extends Controller {
  public onCustomAction() {
    // custom action handler
    const sel = this.getView().byId("myTable").getSelectedItems();
    // implement action logic
  }
}
```
```json
// manifest.json (fragment)
"extends": {
  "extensions": {
    "sap.ui5": {
      "routing": { /* ... */ }
    }
  }
},
"sap.ui5": {
  "controllers": {
    "CustomActions": "ext/CustomActions.controller"
  },
  "contentDensities": {}
}
```

STEP: Add a custom card to an overview page
DESCRIPTION: Add a UI card XML definition and register it in the page configuration. Use Page Configuration Change to include the card.
LANGUAGE: XML
CODE:
```XML
<!-- cards/myCustomCard.xml -->
<Card id="customCard">
  <header>
    <title>Custom Links</title>
  </header>
  <content>
    <List>
      <items>
        <StandardListItem title="Item 1" />
      </items>
    </List>
  </content>
</Card>
```

STEP: Add a custom filter to the filter bar
DESCRIPTION: Add a filter field entry in the filter bar fragment and implement value help via extension point if needed.
LANGUAGE: XML
CODE:
```XML
<!-- fragments/FilterBar.fragment.xml -->
<SmartFilterBar id="smartFilterBar">
  <controlConfiguration>
    <ControlConfiguration key="MyField">
      <label>My Field</label>
      <group>Default</group>
    </ControlConfiguration>
  </controlConfiguration>
</SmartFilterBar>
```

STEP: Add a custom section to an object page using extensions
DESCRIPTION: Use extension points to inject a section fragment into the object page for OData V2/V4.
LANGUAGE: XML
CODE:
```XML
<!-- ext/CustomSection.fragment.xml -->
<Section title="Custom Section" id="customSection">
  <SubSection>
    <Form>
      <Label text="Info"/>
      <Input value="{MyEntity/MyField}"/>
    </Form>
  </SubSection>
</Section>
```

STEP: Add a field group to an object page
DESCRIPTION: Add a field group block to the object page XML and annotate CAP/ABAP CDS if needed to expose fields.
LANGUAGE: XML
CODE:
```XML
<!-- objectPage/FieldGroup.fragment.xml -->
<Section title="Details">
  <SubSection>
    <Form>
      <Group>
        <Label text="Group Title"/>
        <fields>
          <Field>
            <Label text="Field 1"/>
            <Text text="{MyEntity/Field1}"/>
          </Field>
        </fields>
      </Group>
    </Form>
  </SubSection>
</Section>
```

STEP: Add a filter bar building block
DESCRIPTION: Add a filter bar building block definition for Flexible Programming Model pages; wire to CDS or OData source.
LANGUAGE: XML
CODE:
```XML
<!-- fragments/FilterBarBB.fragment.xml -->
<FilterBar id="filterBar">
  <filterItems>
    <FilterItem name="Status"><control><Select items="{...}"/></control></FilterItem>
  </filterItems>
</FilterBar>
```

STEP: Add a header facet to an object page using data points
DESCRIPTION: Add data point annotations or XML to display KPI/data point header facets on the object page (CAP/ABAP CDS).
LANGUAGE: XML
CODE:
```XML
<!-- objectPage/HeaderDataPoint.fragment.xml -->
<header>
  <dataPoints>
    <DataPoint id="dpSales" value="{MyEntity/Sales}" title="Sales"/>
  </dataPoints>
</header>
```

STEP: Add a link list card to an overview page
DESCRIPTION: Create an XML link-list card and register it in the overview page container.
LANGUAGE: XML
CODE:
```XML
<!-- cards/LinkList.card.xml -->
<Card id="linkListCard">
  <header><title>Quick Links</title></header>
  <content>
    <List>
      <StandardListItem title="Link A" />
      <StandardListItem title="Link B" />
    </List>
  </content>
</Card>
```

STEP: Add a list card to an overview page
DESCRIPTION: Add an XML list card bound to an entity set and configure navigation targets.
LANGUAGE: XML
CODE:
```XML
<!-- cards/List.card.xml -->
<Card id="listCard" entitySet="/MyEntity">
  <list><items><StandardListItem title="{Name}" /></items></list>
</Card>
```

STEP: Add a new contact view column to a table
DESCRIPTION: Extend table XML to add a contact view column with icon and phone/email bindings (CAP/ABAP CDS).
LANGUAGE: XML
CODE:
```XML
<!-- fragments/TableColumns.fragment.xml -->
<Column id="colContact" header="Contact">
  <template>
    <HBox>
      <Avatar src="{Contact/Avatar}" />
      <Link text="{Contact/Name}" press="onOpenContact"/>
    </HBox>
  </template>
</Column>
```

STEP: Add a new section to an object page
DESCRIPTION: Add a new Section/SubSection with form or table to object page XML and bind to CDS entity/projection.
LANGUAGE: XML
CODE:
```XML
<!-- objectPage/NewSection.fragment.xml -->
<Section title="New Section">
  <SubSection>
    <Form>
      <Label text="New Field"/>
      <Text text="{MyEntity/NewField}"/>
    </Form>
  </SubSection>
</Section>
```

STEP: Add a new visual filter to the filter bar
DESCRIPTION: Add a visual filter control fragment (e.g., chart or value-based) and bind to CDS measures.
LANGUAGE: XML
CODE:
```XML
<!-- fragments/VisualFilter.fragment.xml -->
<VisualFilter id="vfStatus" entitySet="/MyEntity">
  <FilterItem property="Status"/>
</VisualFilter>
```

STEP: Add a progress indicator column to a table
DESCRIPTION: Add a column with progress indicator control and bind percentage value from entity (CAP/ABAP CDS).
LANGUAGE: XML
CODE:
```XML
<Column id="colProgress" header="Progress">
  <template>
    <ProgressIndicator percentValue="{ProgressPercent}" displayValue="{ProgressPercent}%"/>
  </template>
</Column>
```

STEP: Add a rating indicator column to a table
DESCRIPTION: Add a rating control column with value bound to an entity property.
LANGUAGE: XML
CODE:
```XML
<Column header="Rating">
  <template>
    <RatingIndicator value="{Rating}" maxValue="5"/>
  </template>
</Column>
```

STEP: Add a smart chart facet to an object page
DESCRIPTION: Insert a SmartChart facet and add manifest change to enable SmartChart metadata.
LANGUAGE: XML
CODE:
```XML
<!-- objectPage/SmartChart.fragment.xml -->
<SmartChart id="smartChart" chart="{path:'/MyEntity'}">
  <P13nMode>ChartType</P13nMode>
</SmartChart>
```
```json
// manifest.json (snippet)
"sap.ui5": {
  "models": { /* smart chart model config */ }
}
```

STEP: Add a smart micro chart column to a table
DESCRIPTION: Add an XML column containing a SmartMicroChart bound to CDS values.
LANGUAGE: XML
CODE:
```XML
<Column header="Trend">
  <template>
    <SmartMicroChart value="{TrendValue}" />
  </template>
</Column>
```

STEP: Add a stack card to an overview page
DESCRIPTION: Add XML definition for a stack card and include in card container.
LANGUAGE: XML
CODE:
```XML
<!-- cards/Stack.card.xml -->
<Card id="stackCard">
  <content>
    <Stack>
      <items><Text text="{ItemTitle}"/></items>
    </Stack>
  </content>
</Card>
```

STEP: Add a static link list card to an overview page
DESCRIPTION: Add a page configuration change to register a static link list card (no OData).
LANGUAGE: JSON
CODE:
```json
// page-config/cards.json
{
  "cards": {
    "staticLinkCard": {
      "type": "StaticLinkList",
      "title": "Resources",
      "links": [{"text":"Doc","href":"https://..."}]
    }
  }
}
```

STEP: Add a table card to an overview page
DESCRIPTION: Create XML table card bound to entity set and configure columns.
LANGUAGE: XML
CODE:
```XML
<Card id="tableCard">
  <Table>
    <columns>
      <Column><Text text="Name"/></Column>
    </columns>
    <items>
      <ColumnListItem>
        <cells><Text text="{Name}"/></cells>
      </ColumnListItem>
    </items>
  </Table>
</Card>
```

STEP: Add a table building block
DESCRIPTION: Add a table building block definition (CAP CDS / OData V4) and bind to entity set, include column config.
LANGUAGE: XML
CODE:
```XML
<Table id="myTable" items="{path:'/MyEntity'}">
  <columns>
    <Column header="Name"><Text text="Name"/></Column>
  </columns>
  <items>
    <ColumnListItem>
      <cells><Text text="{Name}"/></cells>
    </ColumnListItem>
  </items>
</Table>
```

STEP: Add an action button
DESCRIPTION: Add an action button in XML (toolbar or header) and hook event handler to controller.
LANGUAGE: XML
CODE:
```XML
<Toolbar>
  <Buttons>
    <Button text="Approve" press="onApprove"/>
  </Buttons>
</Toolbar>
```

STEP: Add a value help to a field in the filter bar
DESCRIPTION: Attach a value help dialog/value help controller to filter field and register in XML.
LANGUAGE: XML
CODE:
```XML
<Input id="inputVH" value="{MyEntity/Customer}" showValueHelp="true" valueHelpRequest="onValueHelp"/>
```

STEP: Add an analytical card to an overview page
DESCRIPTION: Add an XML analytical card binding to CDS measures/dimensions and register in cards config.
LANGUAGE: XML
CODE:
```XML
<Card id="analyticalCard">
  <AnalyticalChart dataset="{path:'/MyEntity'}">
    <Measure name="Revenue" value="{Revenue}"/>
    <Dimension name="Region" value="{Region}"/>
  </AnalyticalChart>
</Card>
```

STEP: Add and edit filter fields
DESCRIPTION: Add or modify filter fields in SmartFilterBar XML and ensure corresponding CDS annotations exist.
LANGUAGE: XML
CODE:
```XML
<SmartFilterBar>
  <FilterGroupItem groupName="g1" name="Status" label="Status">
    <control><Select items="{...}"/></control>
  </FilterGroupItem>
</SmartFilterBar>
```

STEP: Add and edit table columns
DESCRIPTION: Add or adjust columns in table XML and map to CDS properties or annotations.
LANGUAGE: XML
CODE:
```XML
<Column id="colNew" header="New Column">
  <template><Text text="{NewProp}"/></template>
</Column>
```

STEP: Add custom columns to the table using extensions
DESCRIPTION: Use extension points to inject custom column XML into existing table definitions.
LANGUAGE: Extension Point
CODE:
```XML
<!-- ext/CustomColumn.fragment.xml -->
<Column id="customCol" header="Custom">
  <template><Text text="{CustomField}"/></template>
</Column>
```

STEP: Add an interactive chart to a list page
DESCRIPTION: Insert an interactive chart fragment into the list page XML and bind to CDS/OData entity.
LANGUAGE: XML
CODE:
```XML
<Chart id="interactiveChart" chartType="line" rows="{/MyEntity}">
  <Dimension><Value>{Month}</Value></Dimension>
  <Measure><Value>{Revenue}</Value></Measure>
</Chart>
```

STEP: Add a key performance indicator (KPI) tag to a page
DESCRIPTION: Add KPI data point fragment using CDS annotation or XML data point control and add to header or facet.
LANGUAGE: XML
CODE:
```XML
<DataPoint id="kpi1" value="{MyEntity/KPIValue}" title="KPI"/>
```

STEP: Add multiple fields to a column in responsive tables
DESCRIPTION: Configure ColumnListItem to include multiple controls (HBox/VBox) inside a single responsive column.
LANGUAGE: XML
CODE:
```XML
<ColumnListItem>
  <cells>
    <HBox>
      <Text text="{Field1}"/><Text text="{Field2}"/>
    </HBox>
  </cells>
</ColumnListItem>
```

STEP: Add semantic colors to visual filters
DESCRIPTION: Configure semantic color mapping for visual filters via XML and CDS value lists. Works for OData V2/V4/CAP CDS.
LANGUAGE: XML
CODE:
```XML
<FilterFacet id="statusFilter" property="Status" semanticColorPath="StatusColor"/>
```

STEP: Add semantic highlights to line items in a table
DESCRIPTION: Add conditional formatting bindings to table cells to set CSS class or semantic color based on entity fields.
LANGUAGE: XML
CODE:
```XML
<Text text="{Name}" class="{= ${Status} === 'Delayed' ? 'sapUiHighlight' : '' }"/>
```

STEP: Add status colors and icons to a column in a table
DESCRIPTION: Add ObjectStatus or Icon control with semanticColor and icon binding from CDS.
LANGUAGE: XML
CODE:
```XML
<ObjectStatus text="{StatusText}" state="{StatusState}"/>
```

STEP: Configure flexible column layout
DESCRIPTION: Add or modify manifest routing targets and FCL layout settings in manifest.json.
LANGUAGE: JSON
CODE:
```json
// manifest.json snippet
"routing": {
  "config": {
    "routerClass": "sap.f.routing.Router",
    "viewType": "XML",
    "controlId": "fcl",
    "controlAggregation": "layout",
    "bypassed": { "target": "notFound" }
  }
}
```

STEP: Configure inbound navigation
DESCRIPTION: Update page configuration or routing definitions to accept inbound navigation parameters (Page Configuration Change).
LANGUAGE: JSON
CODE:
```json
// page-config/navigation.json
{
  "inbound": {
    "semanticObject": "Product",
    "action": "display"
  }
}
```

STEP: Configure multiple selection for a table
DESCRIPTION: Enable multi selectionMode in table XML/manifest for OData V2/V4 and adjust controller logic.
LANGUAGE: XML
CODE:
```XML
<Table id="myTable" selectionMode="MultiToggle"/>
```

STEP: Configure multiple views for tables
DESCRIPTION: Add table view variants (personalization) and configure p13n/view aggregation for OData V2/V4.
LANGUAGE: XML
CODE:
```XML
<Table id="myTable">
  <customData>
    <CustomData key="views" value='[{"key":"compact","label":"Compact"},{"key":"detailed","label":"Detailed"}]'/>
  </customData>
</Table>
```

STEP: Configure mass edit via dialog
DESCRIPTION: Add Page Configuration Change to register mass edit action and dialog configuration.
LANGUAGE: JSON
CODE:
```json
// page-config/actions.json
{
  "massEdit": {
    "enabled": true,
    "dialog": { "fields": ["Status", "Owner"] }
  }
}
```

STEP: Configure object page header
DESCRIPTION: Update object page header XML to include title, subtitle, actions and data point bindings (CAP/ABAP CDS).
LANGUAGE: XML
CODE:
```XML
<header>
  <title><Text text="{MyEntity/Title}"/></title>
  <actions>
    <Button text="Edit" press="onEdit"/>
  </actions>
</header>
```

STEP: Configure outbound navigation
DESCRIPTION: Add outbound navigation definitions and navigation targets in XML or manifest for the page.
LANGUAGE: XML
CODE:
```XML
<Button text="Open Details" press="onNavigateToDetails"/>
```

STEP: Configure selection of all rows in a table
DESCRIPTION: Set table's selectAll property or implement select all via controller. Represented as Manifest Change if supported.
LANGUAGE: JSON
CODE:
```json
// manifest.json snippet
"sap.ui5": {
  "models": {}
},
"tableSettings": {
  "selectAll": true
}
```

STEP: Configure side effects
DESCRIPTION: Declare side effects in XML or manifest referencing navigation properties so UI updates on changes (CAP CDS).
LANGUAGE: XML
CODE:
```XML
<entitySet name="MyEntity" sideEffects="true"/>
```

STEP: Configure spreadsheet export
DESCRIPTION: Add Page Configuration Change to enable export settings and mapping for table columns.
LANGUAGE: JSON
CODE:
```json
// page-config/export.json
{
  "spreadsheetExport": {
    "enabled": true,
    "columns": ["Name","Status","Amount"]
  }
}
```

STEP: Configure variant management for controls and pages
DESCRIPTION: Enable variant management in table/filterbar; add manifest/model configuration for personalization.
LANGUAGE: JSON
CODE:
```json
// manifest.json snippet
"sap.ui5": {
  "models": {
    "variant": {}
  }
},
"settings": {
  "variantManagement": true
}
```

STEP: Configure default grouping in a table
DESCRIPTION: Add default groupBy property in table configuration and optional OData V2 grouping annotation.
LANGUAGE: XML
CODE:
```XML
<Table id="myTable" growing="true">
  <customData><CustomData key="defaultGroup" value="Category"/></CustomData>
</Table>
```

STEP: Configure auto load for a table
DESCRIPTION: Set auto loading behavior in table configuration for OData V2/V4 (autoBind/autoLoad flag).
LANGUAGE: JSON
CODE:
```json
// manifest.json snippet
"models": {
  "": {
    "settings": {
      "autoLoad": true
    }
  }
}
```

STEP: Configure table type
DESCRIPTION: Set table control type (ResponsiveTable, AnalyticalTable) in XML or manifest for OData V2/V4.
LANGUAGE: XML
CODE:
```XML
<Table class="sap.m.Table" id="myResponsiveTable"/>
<!-- or AnalyticalTable -->
<AnalyticalTable id="myAnalyticalTable"/>
```

STEP: Define a filter facet
DESCRIPTION: Add a FilterFacet fragment to the filter bar XML describing grouping and property bindings.
LANGUAGE: XML
CODE:
```XML
<FilterFacet id="fFacet" label="My Facet">
  <FilterItem name="Category" label="Category"/>
</FilterFacet>
```

STEP: Enable a Show Related Apps button
DESCRIPTION: Add Page Configuration Change to enable "Show Related Apps" button in object page header actions.
LANGUAGE: JSON
CODE:
```json
// page-config/header.json
{
  "showRelatedApps": true
}
```

STEP: Enable condensed table layout
DESCRIPTION: Add manifest change to set compact content density or condensed table layout configuration.
LANGUAGE: JSON
CODE:
```json
// manifest.json snippet
"sap.ui": {
  "contentDensities": {
    "compact": true
  }
}
```

STEP: Enable data label in analytical charts
DESCRIPTION: Configure analytical chart settings in page configuration to show data labels.
LANGUAGE: JSON
CODE:
```json
// page-config/chart.json
{
  "analyticalChart": { "showDataLabel": true }
}
```

STEP: Enable data label in smart charts and KPI cards
DESCRIPTION: Enable data label rendering for SmartChart and KPI cards via page config.
LANGUAGE: JSON
CODE:
```json
// page-config/smartchart.json
{
  "smartChart": { "dataLabel": "value" }
}
```

STEP: Enable draft toggle buttons
DESCRIPTION: Add Page Configuration Change to place draft toggle buttons on pages and hook to draft-supported entities.
LANGUAGE: JSON
CODE:
```json
// page-config/draft.json
{
  "draftToggle": true
}
```

STEP: Enable inline creation of table entries
DESCRIPTION: Configure table to allow inline creation (editable rows) via page configuration and OData create support.
LANGUAGE: JSON
CODE:
```json
// page-config/inlineCreate.json
{
  "inlineCreate": { "enabled": true }
}
```

STEP: Enable object creation in a table via dialog
DESCRIPTION: Add manifest change to enable creation dialog mapping and view fragment for new object.
LANGUAGE: JSON
CODE:
```json
// manifest.json snippet
"createDialog": { "enabled": true, "fragment": "fragments/CreateDialog.fragment.xml" }
```

STEP: Enable semantic date range on smart filter bar
DESCRIPTION: Configure SmartFilterBar to add semantic date range options (e.g., LastWeek, LastMonth) via page config.
LANGUAGE: JSON
CODE:
```json
// page-config/filter.json
{
  "smartFilterBar": { "semanticDateRange": true }
}
```

STEP: Extend forms in sections
DESCRIPTION: Use Extension Point to add controls into existing Form sections via fragment injection.
LANGUAGE: Extension Point
CODE:
```XML
<!-- ext/FormExtension.fragment.xml -->
<FormElement>
  <Label text="Extra Field"/>
  <Input value="{MyEntity/Extra}"/>
</FormElement>
```

STEP: Extend object page headers using extensions
DESCRIPTION: Use extension points to add custom header buttons or facets into the object page header.
LANGUAGE: Extension Point
CODE:
```XML
<!-- ext/HeaderExtension.fragment.xml -->
<Button text="Custom" press="onCustomHeaderAction"/>
```

STEP: Set default filter values for the filter bar
DESCRIPTION: Preconfigure default values for SmartFilterBar fields using XML or CDS annotations for CAP.
LANGUAGE: XML
CODE:
```XML
<SmartFilterBar>
  <initialValue key="Status" value="Open"/>
</SmartFilterBar>
```

STEP: Set selection limit for tables
DESCRIPTION: Add page configuration change or manifest flag to set maximum selection limit in table controls.
LANGUAGE: JSON
CODE:
```json
// page-config/table.json
{
  "selectionLimit": 500
}
```

STEP: Specify layout for the card container
DESCRIPTION: Configure card container layout (grid/stack) via page configuration and register card placement.
LANGUAGE: JSON
CODE:
```json
// page-config/cards-layout.json
{
  "layout": "grid",
  "columns": 3
}
```

STEP: Specify refresh interval for cards
DESCRIPTION: Add refresh interval setting for cards (ms) in page configuration.
LANGUAGE: JSON
CODE:
```json
// page-config/cards.json
{
  "cards": {
    "myCard": { "refreshInterval": 300000 }
  }
}
```

STEP: Add an interactive chart to a list page
DESCRIPTION: (duplicate entry handled) Add interactive chart and bind to list page dataset for drilldown interactions.
LANGUAGE: XML
CODE:
```XML
<Chart id="interactiveChart" chartType="pie" rows="{/MyEntity}">
  <Dimension><Value>{Category}</Value></Dimension>
  <Measure><Value>{Count}</Value></Measure>
</Chart>
```

STEP: Add a key performance indicator (KPI) tag to a page
DESCRIPTION: (duplicate handled) Use DataPoint or KPI card to annotate page with KPI values.
LANGUAGE: XML
CODE:
```XML
<DataPoint id="kpi" value="{MyEntity/Metric}" title="Uptime"/>
```

STEP: Add multiple fields to a column in responsive tables
DESCRIPTION: (duplicate handled) Use compound controls inside a single column to display multiple fields.
LANGUAGE: XML
CODE:
```XML
<HBox><Text text="{FieldA}"/><Text text="{FieldB}"/></HBox>
```

STEP: Add semantic colors to visual filters
DESCRIPTION: (duplicate handled) Map values to semantic colors either via formatter or annotation.
LANGUAGE: XML
CODE:
```XML
<VisualFilter property="Priority" semanticColor="{= ${Priority} === 'High' ? 'Negative' : 'Neutral' }"/>
```

STEP: Add semantic highlights to line items in a table
DESCRIPTION: (duplicate handled) Apply formatting/semantic class based on field values.
LANGUAGE: XML
CODE:
```XML
<Text text="{Name}" highlight="{= ${Priority} === 'High' ? 'High' : 'None' }"/>
```

STEP: Add status colors and icons to a column in a table
DESCRIPTION: (duplicate handled) Use ObjectStatus or IconTab to present status with icons/colors bound to entity.
LANGUAGE: XML
CODE:
```XML
<Icon src="{StatusIcon}" color="{StatusColor}"/>
```

STEP: Configure flexible column layout
DESCRIPTION: (duplicate handled) Manifest routing and FCL mapping changes (see earlier snippet).
LANGUAGE: JSON
CODE:
```json
// manifest.json (repeat)
"routing": { "config": { "routerClass": "sap.f.routing.Router", "controlId": "fcl" } }
```

STEP: Configure inbound navigation
DESCRIPTION: (duplicate handled) Add intent/inbound definitions to page config or manifest for deep links.
LANGUAGE: JSON
CODE:
```json
{ "inbound": { "semanticObject": "Order", "action": "display" } }
```

STEP: Configure multiple selection for a table
DESCRIPTION: (duplicate handled) Set selectionMode/multiToggle in table definitions.
LANGUAGE: XML
CODE:
```XML
<Table selectionMode="MultiToggle"/>
```

STEP: Configure multiple views for tables
DESCRIPTION: (duplicate handled) Define views configuration for table personalization (p13n).
LANGUAGE: XML
CODE:
```XML
<customData><CustomData key="views" value='[{"key":"v1"}]'/></customData>
```

STEP: Configure mass edit via dialog
DESCRIPTION: (duplicate handled) Enable mass edit action and include dialog fragment.
LANGUAGE: JSON
CODE:
```json
{ "massEdit": { "dialogFragment": "fragments/MassEdit.fragment.xml" } }
```

STEP: Configure object page header
DESCRIPTION: (duplicate handled) Add header actions and data points.
LANGUAGE: XML
CODE:
```XML
<header><actions><Button text="Share"/></actions></header>
```

STEP: Configure outbound navigation
DESCRIPTION: (duplicate handled) Implement navigation handlers and manifest targets.
LANGUAGE: XML
CODE:
```XML
<Button text="Go" press="onNavigateOutbound"/>
```

STEP: Configure selection of all rows in a table
DESCRIPTION: (duplicate handled) Enable selectAll and implement controller method for select/deselect all.
LANGUAGE: JavaScript
CODE:
```JavaScript
onSelectAll: function() {
  this.byId("myTable").selectAll();
}
```

STEP: Configure side effects
DESCRIPTION: (duplicate handled) Add OData side effect declarations or annotations so UI updates relevant bindings on field changes.
LANGUAGE: XML
CODE:
```XML
<Annotation Term="UI.SideEffects" Qualifier="MySideEffects">...</Annotation>
```

STEP: Configure spreadsheet export
DESCRIPTION: (duplicate handled) Add export mapping and button configuration; provide export handler in controller.
LANGUAGE: TypeScript
CODE:
```TypeScript
onExport() {
  const settings = { fileName: "Export.xlsx", columns: ["Name","Amount"] };
  // call export util with table binding
}
```

STEP: Configure variant management for controls and pages
DESCRIPTION: (duplicate handled) Enable variant management on SmartFilterBar/Table and add model support.
LANGUAGE: XML
CODE:
```XML
<SmartFilterBar useToolbar="true" showVariantManagement="true"/>
```

STEP: Configure default grouping in a table
DESCRIPTION: (duplicate handled) Use p13n or group property setting for default grouping.
LANGUAGE: JSON
CODE:
```json
{ "defaultGrouping": { "property": "Category" } }
```

STEP: Configure auto load for a table
DESCRIPTION: (duplicate handled) Enable or disable auto load, used by OData models.
LANGUAGE: JSON
CODE:
```json
{ "table": { "autoLoad": true } }
```

STEP: Configure table type
DESCRIPTION: (duplicate handled) Switch table control class and update view accordingly.
LANGUAGE: XML
CODE:
```XML
<!-- use AnalyticalTable or sap.m.Table depending on requirement -->
```

STEP: Define a filter facet
DESCRIPTION: (duplicate handled) Add FilterFacet entry to smart filter bar configuration.
LANGUAGE: XML
CODE:
```XML
<FilterFacet id="f1" label="Region">
  <FilterItem name="Region"/>
</FilterFacet>
```

STEP: Enable a Show Related Apps button
DESCRIPTION: (duplicate handled) Register UI action to retrieve related apps and present them in header actions.
LANGUAGE: JSON
CODE:
```json
{ "showRelatedApps": true }
```

STEP: Enable condensed table layout
DESCRIPTION: (duplicate handled) Set content density/compact in manifest or CSS.
LANGUAGE: JSON
CODE:
```json
{ "contentDensity": "compact" }
```

STEP: Enable data label in analytical charts
DESCRIPTION: (duplicate handled) Toggle data label option in chart config.
LANGUAGE: JSON
CODE:
```json
{ "chart": { "dataLabels": true } }
```

STEP: Enable data label in smart charts and KPI cards
DESCRIPTION: (duplicate handled) Set dataLabel property in card/chart config.
LANGUAGE: JSON
CODE:
```json
{ "smartChart": { "dataLabel": "value" } }
```

STEP: Enable draft toggle buttons
DESCRIPTION: (duplicate handled) Add draft toggle button definitions and connect to draft-enabled service.
LANGUAGE: JSON
CODE:
```json
{ "draftToggleButton": { "enabled": true } }
```

STEP: Enable inline creation of table entries
DESCRIPTION: (duplicate handled) Configure table to allow inline creation and map create properties.
LANGUAGE: JSON
CODE:
```json
{ "table": { "inlineCreate": true } }
```

STEP: Enable object creation in a table via dialog
DESCRIPTION: (duplicate handled) Provide create dialog fragment and register in manifest.
LANGUAGE: XML
CODE:
```XML
<!-- fragments/CreateDialog.fragment.xml -->
<Dialog title="Create">
  <content><Input value="{/new/Name}"/></content>
  <buttons><Button text="Save" press="onSaveNew"/></buttons>
</Dialog>
```

STEP: Enable semantic date range on smart filter bar
DESCRIPTION: (duplicate handled) Add settings to SmartFilterBar to expose semantic ranges.
LANGUAGE: XML
CODE:
```XML
<SmartFilterBar semanticDateRanges="true"/>
```

STEP: Extend forms in sections
DESCRIPTION: (duplicate handled) Use extension points to augment Form UIs with custom fragment controls.
LANGUAGE: Extension Point
CODE:
```XML
<!-- ext/SectionFormExt.fragment.xml -->
<FormElement><Label text="Added"/><Text text="{MyEntity/Added}"/></FormElement>
```

STEP: Extend object page headers using extensions
DESCRIPTION: (duplicate handled) Add header extensions via extension fragment to include more buttons/controls.
LANGUAGE: Extension Point
CODE:
```XML
<!-- ext/HeaderExt.fragment.xml -->
<Button text="Extra Action" press="onExtra"/>
```

STEP: Set default filter values for the filter bar
DESCRIPTION: (duplicate handled) Pre-set values in SmartFilterBar configuration or controller initialization.
LANGUAGE: XML
CODE:
```XML
<SmartFilterBar>
  <initialValue name="Country" value="US"/>
</SmartFilterBar>
```

STEP: Set selection limit for tables
DESCRIPTION: (duplicate handled) Enforce a selection limit programmatically or via page config.
LANGUAGE: TypeScript
CODE:
```TypeScript
onSelectionChange(e) {
  const table = this.byId("myTable");
  if (table.getSelectedItems().length > 100) {
    table.removeSelectionInterval(100, table.getSelectedItems().length-1);
  }
}
```

STEP: Specify layout for the card container
DESCRIPTION: (duplicate handled) Choose grid or list layout and set columns/responsive settings via page config.
LANGUAGE: JSON
CODE:
```json
{ "cardContainer": { "layout": "responsiveGrid", "minColumnWidth": 320 } }
```

STEP: Specify refresh interval for cards
DESCRIPTION: (duplicate handled) Set refreshInterval property for cards in page configuration.
LANGUAGE: JSON
CODE:
```json
{ "cards": { "salesCard": { "refreshInterval": 600000 } } }
```

Note: Use these snippets as minimal templates. For each guide, adapt the snippet to your project file paths (webapp/fragment, manifest.json, page-config/*) and the entity/field names of your CDS/OData service. Use extension points by placing fragment files under ext/ and registering controller modules under webapp/ext/.
--------------------------------

**TITLE**: Define Application Structure with SAP Fiori Tools Page Map

**INTRODUCTION**: Quick, code-focused reference for automating or scripting work that replicates what the SAP Fiori Tools Page Map (Application Modeler) does in VS Code: launching the Page Map, editing application-wide settings (title, description, UI Adaptation / Flex), adding/removing pages (ObjectPage and CustomPage for OData V4), and where those changes land in webapp/manifest.json and project files (views). Includes reproducible manifest.json and view file examples.

**TAGS**: fiori-tools, page-map, manifest.json, sapui5, fe-fpm-writer, objectpage, custompage, odata-v4, vscode

STEP: 1 — Launch Page Map (VS Code)
DESCRIPTION: Open the Page Map UI for a selected SAP Fiori elements project in your workspace. Use Command Palette, the Application Info view, or the folder context menu.
LANGUAGE: text
CODE:
```text
# Command Palette
# Press: Cmd/Ctrl + Shift + P
# Type and run:
Fiori: Show Page Map

# Folder context menu
# In VS Code Explorer:
# Right-click project folder -> Show Page Map

# Application Info
# Open Project -> Application Information -> Show Page Map
```

STEP: 2 — Application Settings (Title, Description, Flex Enabled)
DESCRIPTION: Update app title, description and UI Adaptation (Flex) from the Page Map UI. These settings are stored in webapp/manifest.json. "Flex Enabled" may be undefined (absent) or set to true/false.
LANGUAGE: JSON
CODE:
```json
// webapp/manifest.json (before/after examples)
// Example: set application title/description and enable UI Adaptation (flexEnabled).

{
  "sap.app": {
    "id": "your.app.namespace",
    "title": "My Application Title",        // updated via Page Map Title field
    "description": "Short app description"  // updated via Page Map Description field
  },
  "sap.ui5": {
    "flexEnabled": true                     // Flex Enabled = true | false | (absent)
  }
}
```

STEP: 3 — Add New Page: ObjectPage (Fiori elements)
DESCRIPTION: Use Page Map Add New Page → Select "ObjectPage" → Add. Choose Navigation entity (entity set) and Page ID. Page Map inserts routing + target information into webapp/manifest.json.
LANGUAGE: JSON
CODE:
```json
// Example manifest.json changes: routing entry + target for new ObjectPage
{
  "sap.ui5": {
    "routing": {
      "routes": [
        {
          "name": "objectPageRoute",
          "pattern": "ObjectPage/{EntitySet}",
          "target": "objectPageTarget"
        }
      ],
      "targets": {
        "objectPageTarget": {
          "type": "Component",
          "id": "objectPageId",
          "name": "your.app.namespace.ext.pages.ObjectPage", // component or view reference
          "options": {
            "settings": {
              "entitySet": "YourEntitySet"
            }
          }
        }
      }
    }
  }
}
```

STEP: 4 — Add New Page: CustomPage (OData V4)
DESCRIPTION: For OData V4 projects Page Map lets you add a CustomPage and either create a new view or reuse an existing sample view. Page Map creates a view file and wiring in webapp/manifest.json routing + target. Use the Page Map UI to pick Create New View or Use Existing View and specify View Name.
LANGUAGE: JSON, XML
CODE:
```json
// Manifest: routing target that references a custom XML view
{
  "sap.ui5": {
    "routing": {
      "routes": [
        {
          "name": "customPageRoute",
          "pattern": "CustomPage/{EntitySet}",
          "target": "customPageTarget"
        }
      ],
      "targets": {
        "customPageTarget": {
          "type": "View",                    // or Component depending on template
          "viewName": "my.app.view.CustomPageView",
          "viewType": "XML",
          "id": "customPageView",
          "options": {
            "settings": {
              "entitySet": "YourEntitySet"
            }
          }
        }
      }
    }
  }
}
```

```xml
<!-- webapp/view/CustomPageView.view.xml (created when choosing Create a New View) -->
<mvc:View
  controllerName="my.app.controller.CustomPageView"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m">
  <Page id="customPage">
    <content>
      <!-- Custom UI content goes here -->
    </content>
  </Page>
</mvc:View>
```

STEP: 5 — File locations created/modified by Page Map
DESCRIPTION: Typical files and paths that Page Map will create or update when you add/configure pages.
LANGUAGE: text
CODE:
```text
# Files modified/created by Page Map:
webapp/manifest.json                # routing + targets + sap.app + sap.ui5.flexEnabled
webapp/view/YourView.view.xml       # if Create a New View for CustomPage
webapp/controller/YourView.controller.js  # controller for a new view (if applicable)
# For ObjectPage scaffolding (Fiori elements) the Page Map may update component extension files or reference generated components/views.
```

STEP: 6 — Configure Page (edit properties)
DESCRIPTION: Click Configure Page (pencil icon) in Page Map to open the Configure Page Elements outline. Edits change page properties in the UI and persist into webapp/manifest.json and the SAPUI5 flexibility changes (UI Adaptation) are updated.
LANGUAGE: JSON
CODE:
```json
// Example: change target settings (partial)
{
  "sap.ui5": {
    "routing": {
      "targets": {
        "objectPageTarget": {
          "options": {
            "settings": {
              "entitySet": "YourEntitySet",
              "navigation": {
                "toSubList": {
                  "routeName": "subListRoute"
                }
              }
            }
          }
        }
      }
    }
  }
}
```

STEP: 7 — Delete Page
DESCRIPTION: Use Delete Page (trash icon) in Page Map to remove a page. This removes or updates routing/target entries in webapp/manifest.json and may remove related view/controller files created for CustomPage.
LANGUAGE: JSON
CODE:
```json
// Example: delete route and target entries in webapp/manifest.json
{
  "sap.ui5": {
    "routing": {
      "routes": [
        // removed "objectPageRoute"
      ],
      "targets": {
        // removed "objectPageTarget" entry
      }
    }
  }
}
```

STEP: 8 — Tips, links, and implementation note
DESCRIPTION: Implementation details and useful links needed if automating or inspecting Page Map behavior.
LANGUAGE: text
CODE:
```text
# Tip: For OData V4 projects, templates used by Page Map are published in @sap-ux/fe-fpm-writer
# GitHub / package:
https://github.com/SAP/open-ux-tools/tree/main/packages/fe-fpm-writer

# Icon CSS referenced by documentation pages:
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>

# Notes:
# - Page Map UI changes are reflected in webapp/manifest.json and SAPUI5 flexibility layer (if flexEnabled is set).
# - Flex Enabled values: true (enable UI Adaptation), false (disable), or absent (undefined/default).
# - Page Map supports SAPUI5 freestyle apps as experimental: you can view settings but adding/deleting pages may be limited.
```
--------------------------------

**TITLE**: Implement the "Develop with a Guide" UI and interactions

**INTRODUCTION**: This document converts the "Develop with a Guide" feature description into actionable implementation steps, with minimal, copy-ready code snippets. Use these steps to implement a side-by-side guide UI, resizable divider, expand/full-view toggle, guide modes (wizard/full view, show/hide descriptions), annotation term tooltips, parameter table with add/reorder behavior, and required assets.

**TAGS**: fiori-tools, UI, guide, split-view, resizable, accessibility, keyboard, annotation, snippets, images

**STEP**: 1 — Include SAP icon stylesheet

**DESCRIPTION**: Add the SAP icons stylesheet to the guide pages so icon classes (e.g., SAP-icons-V5) render correctly. Preserve the same relative path used by the original assets.

**LANGUAGE**: HTML

**CODE**:
```html
<!-- Place this in the <head> of the Guide host page -->
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```

**STEP**: 2 — Basic HTML structure for side-by-side Guide and Guides list with resizable divider

**DESCRIPTION**: Implement the split view: a left pane for the list of guides, a vertical draggable divider, and a right pane for the selected Guide content. By default, open in side-by-side mode. Include the image assets referenced in the docs at the given paths.

**LANGUAGE**: HTML/CSS

**CODE**:
```html
<!-- HTML -->
<div id="guides-app" class="split-view">
  <div id="guides-list" class="pane">
    <!-- List of guides -->
  </div>

  <div id="divider" role="separator" aria-orientation="vertical" tabindex="0"></div>

  <div id="guide-window" class="pane">
    <!-- Guide header and steps -->
    <header class="guide-header">
      <button id="guide-info" class="icon-btn" aria-label="Guide information">
        <span class="SAP-icons-V5"></span>
      </button>
      <button id="guide-expand" class="icon-btn" aria-label="Expand view">
        <span class="SAP-icons-V5"></span>
      </button>
    </header>

    <main id="guide-content"></main>
  </div>
</div>

<!-- CSS (core for layout and divider) -->
<style>
  .split-view { display:flex; height:100vh; overflow:hidden; }
  .pane { overflow:auto; }
  #guides-list { width: 36%; min-width: 240px; }
  #guide-window { flex:1; min-width: 320px; }
  #divider {
    width: 6px; cursor: col-resize; background: transparent;
  }
  #divider::after {
    content: ''; display:block; width:2px; height:100%; margin:auto; background:#e0e0e0;
  }
  /* full-view toggle */
  .full-view #guides-list { display:none; }
</style>
```

**STEP**: 3 — Resizable divider drag & keyboard support

**DESCRIPTION**: Enable pointer drag to resize panes and keyboard accessibility for the divider (arrow keys adjust width). On small viewports, the guides list should hide automatically (mobile behavior).

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// JavaScript: Resizable divider + keyboard handling
(function () {
  const divider = document.getElementById('divider');
  const left = document.getElementById('guides-list');
  const root = document.getElementById('guides-app');

  // Pointer dragging
  let dragging = false;
  divider.addEventListener('pointerdown', (e) => {
    dragging = true;
    divider.setPointerCapture(e.pointerId);
  });
  window.addEventListener('pointermove', (e) => {
    if (!dragging) return;
    const rect = root.getBoundingClientRect();
    const newLeftWidth = Math.max(200, Math.min(rect.width - 200, e.clientX - rect.left));
    left.style.width = newLeftWidth + 'px';
  });
  window.addEventListener('pointerup', (e) => {
    dragging = false;
  });

  // Keyboard support for accessibility
  divider.addEventListener('keydown', (e) => {
    const step = 20;
    const currentWidth = left.getBoundingClientRect().width;
    if (e.key === 'ArrowLeft') {
      left.style.width = Math.max(200, currentWidth - step) + 'px';
      e.preventDefault();
    } else if (e.key === 'ArrowRight') {
      left.style.width = Math.min(root.clientWidth - 200, currentWidth + step) + 'px';
      e.preventDefault();
    }
  });

  // Responsive: hide list on small viewports
  const mq = window.matchMedia('(max-width: 800px)');
  function updateResponsive() {
    if (mq.matches) {
      left.style.display = 'none';
    } else {
      left.style.display = '';
    }
  }
  mq.addListener(updateResponsive);
  updateResponsive();
})();
```

**STEP**: 4 — Expand (single/full-view) toggle behavior

**DESCRIPTION**: Implement the Expand view (icon in guide header) that exits split view into a single guide window. Toggle classes to switch between side-by-side and full-view. Pressing again restores split view.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Expand toggle
const expandBtn = document.getElementById('guide-expand');
const appRoot = document.getElementById('guides-app');
expandBtn.addEventListener('click', () => {
  appRoot.classList.toggle('full-view'); // .full-view hides the list pane (see CSS earlier)
  // Update aria-pressed for accessibility
  const pressed = appRoot.classList.contains('full-view');
  expandBtn.setAttribute('aria-pressed', String(pressed));
});
```

**STEP**: 5 — Guide modes: Wizard vs Full view and Show/Hide descriptions settings

**DESCRIPTION**: Implement settings toggles to switch between Wizard (default) and Full view, and Show Descriptions (default) vs Hide Descriptions. Provide state toggles and UI class toggles. Wizard mode controls whether only one step displays at a time; Full view shows all steps in a scrollable screen. Show/Hide descriptions toggles visibility of step and parameter descriptions.

**LANGUAGE**: JavaScript/CSS

**CODE**:
```html
<!-- Minimal Settings UI -->
<div id="guide-settings" class="settings">
  <label><input type="checkbox" id="toggle-wizard" checked> Wizard mode</label>
  <label><input type="checkbox" id="toggle-descriptions" checked> Show descriptions</label>
</div>

<style>
  /* When wizard-mode class is present, only one step is visible */
  #guide-content.wizard-mode .guide-step { display:none; }
  #guide-content.wizard-mode .guide-step.active { display:block; }

  /* When hide-descriptions class is present, hide description elements */
  #guide-content.hide-descriptions .step-description,
  #guide-content.hide-descriptions .param-description { display:none; }
</style>

<script>
  const toggleWizard = document.getElementById('toggle-wizard');
  const toggleDesc = document.getElementById('toggle-descriptions');
  const guideContent = document.getElementById('guide-content');

  // Initialize classes based on defaults
  guideContent.classList.add('wizard-mode');

  toggleWizard.addEventListener('change', (e) => {
    guideContent.classList.toggle('wizard-mode', e.target.checked);
    // If switched to wizard-mode ensure a single active step (implementation-specific)
  });

  toggleDesc.addEventListener('change', (e) => {
    guideContent.classList.toggle('hide-descriptions', !e.target.checked);
  });
</script>
```

**STEP**: 6 — Parameters table: add rows, dropdown options, keyboard reorder, and loading indicator while snippet updates

**DESCRIPTION**: Implement the parameter-table used in some guides: it must support adding rows (Add column / Add selection field), optional dropdown choices per new row that change row parameters, reorder rows by drag and drop and keyboard, and show a loading indicator when the code snippet is being updated. Rows represent order of elements in the generated code.

**LANGUAGE**: HTML/CSS/JavaScript

**CODE**:
```html
<!-- Parameters table skeleton -->
<div class="parameters">
  <div class="table-controls">
    <button id="add-row">Add column</button>
    <select id="add-row-type">
      <option value="dataField">Add Data Field</option>
      <option value="dataFieldAnnotation">Add Data Field for Annotation</option>
    </select>
  </div>

  <div id="params-list" role="list" tabindex="0" aria-label="Parameters list">
    <!-- Each row -->
    <!-- Example row structure -->
    <div class="param-row" draggable="true" data-index="0" tabindex="-1">
      <div class="reorder-handle" aria-hidden="true">☰</div>
      <div class="param-content">
        <input class="param-name" value="CustomerName" />
        <div class="param-description">Column showing customer name</div>
      </div>
    </div>
  </div>

  <div id="loading-indicator" aria-hidden="true" style="display:none;">Updating snippet...</div>
</div>

<style>
  .param-row { display:flex; align-items:center; padding:6px; border-bottom:1px solid #eee; }
  .reorder-handle { cursor: grab; margin-right:8px; }
  #loading-indicator { padding:8px; color:#666; font-style:italic; }
</style>

<script>
  // Basic add row + drag/drop + keyboard move + loading indicator skeleton
  const addRowBtn = document.getElementById('add-row');
  const addRowType = document.getElementById('add-row-type');
  const paramsList = document.getElementById('params-list');
  const loading = document.getElementById('loading-indicator');

  function showLoading(show = true) {
    loading.style.display = show ? '' : 'none';
    loading.setAttribute('aria-hidden', String(!show));
  }

  // Add new row with type dependent parameter set
  addRowBtn.addEventListener('click', () => {
    const type = addRowType.value;
    const index = paramsList.children.length;
    const row = document.createElement('div');
    row.className = 'param-row';
    row.draggable = true;
    row.dataset.index = index;
    row.innerHTML = `
      <div class="reorder-handle" draggable="false">☰</div>
      <div class="param-content">
        <input class="param-name" value="${type === 'dataField' ? 'NewField' : 'AnnotationField'}" />
        <div class="param-description">${type === 'dataField' ? 'Data field added as column' : 'Data field using annotation'}</div>
      </div>
    `;
    paramsList.appendChild(row);
    triggerSnippetUpdate();
  });

  // Drag and drop reordering
  let dragSrc = null;
  paramsList.addEventListener('dragstart', (e) => {
    const row = e.target.closest('.param-row');
    dragSrc = row;
    e.dataTransfer.effectAllowed = 'move';
  });
  paramsList.addEventListener('dragover', (e) => {
    e.preventDefault();
    const row = e.target.closest('.param-row');
    if (!row || row === dragSrc) return;
    const rect = row.getBoundingClientRect();
    const after = (e.clientY - rect.top) > (rect.height / 2);
    row.parentNode.insertBefore(dragSrc, after ? row.nextSibling : row);
  });
  paramsList.addEventListener('dragend', () => {
    triggerSnippetUpdate();
  });

  // Keyboard reorder: focus to params-list, then Tab to arrows or controls. Example: left/right to choose up/down arrow and Enter to move
  paramsList.addEventListener('keydown', (e) => {
    const focused = document.activeElement.closest('.param-row');
    if (!focused) return;
    if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') {
      // toggle a mode (not fully implemented) — map to selecting move-up or move-down
      // Placeholder: use ArrowUp/ArrowDown to move for simplicity
      e.preventDefault();
    } else if (e.key === 'Enter') {
      // Enter could trigger move based on selected direction (implement as needed)
    }
  });

  // Example snippet update trigger (simulates request and shows loading indicator)
  function triggerSnippetUpdate() {
    showLoading(true);
    // Here you would construct the code snippet from params and call backend or local generator
    setTimeout(() => {
      // snippet updated
      showLoading(false);
    }, 700);
  }
</script>
```

**STEP**: 7 — Annotation Terms tooltip and annotation parameter behavior

**DESCRIPTION**: Show tooltips for Annotation Terms on hover. If a guide involves annotations, provide a data attribute that tools can use to show more information in a tooltip. Use accessible tooltip patterns.

**LANGUAGE**: HTML/JavaScript

**CODE**:
```html
<!-- Example Annotation Term element -->
<button class="annotation-term" data-term="com.sap.vocabularies.UI.v1.LineItem" aria-describedby="tooltip-lineitem">
  LineItem
</button>

<div id="tooltip-lineitem" role="tooltip" class="tooltip" hidden>
  Annotation: com.sap.vocabularies.UI.v1.LineItem — used for table column definitions.
</div>

<style>
  .tooltip { position:absolute; background:#fff; border:1px solid #ccc; padding:8px; box-shadow:0 2px 6px rgba(0,0,0,0.12); }
</style>

<script>
  // Simple hover/focus tooltip
  document.querySelectorAll('.annotation-term').forEach(btn => {
    const id = btn.getAttribute('aria-describedby');
    const tooltip = document.getElementById(id);
    function show() { tooltip.hidden = false; }
    function hide() { tooltip.hidden = true; }
    btn.addEventListener('mouseenter', show);
    btn.addEventListener('mouseleave', hide);
    btn.addEventListener('focus', show);
    btn.addEventListener('blur', hide);
  });
</script>
```

**STEP**: 8 — Preserve referenced images and paths

**DESCRIPTION**: Ensure the UI assets used in the original documentation are available at the same relative paths. These images are used in the Guide details and parameter UX.

**LANGUAGE**: Files / Assets

**CODE**:
```text
Place image files at these relative paths from the guide host page:
- images/FioriTools_DevelopwithGuide_141af07.png
- images/FT_Moving_Columns_fd5f702.png
- images/SettingsMenu_1bd394c.png
```


--------------------------------

**TITLE**: Using SAP Fiori Tools — Application Modeler to Preview and Customize a Generated Application

**INTRODUCTION**: This guide explains how to use the SAP Fiori Tools — Application Modeler extension after generating an SAP Fiori elements application. It covers how to enable icons, open the Application Modeler views (Page Map, Page Editor, Property Panel), make changes that are persisted to project artifacts or UI flexibility, and generate mock data with AI. Use these steps when writing automation or tooling that interacts with a generated Fiori project or when generating sample code that integrates with the Application Modeler workflow.

**TAGS**: fiori-tools, application-modeler, sap-fiori-elements, preview, page-map, page-editor, property-panel, mock-data, ai, sap-icons

**STEP**: 1 — Include SAP icon stylesheet in your project (if missing)

**DESCRIPTION**: Ensure your project includes the SAP icon stylesheet reference for UI icon rendering. Place the stylesheet reference in an HTML file (for example index.html) or include it in your build pipeline/static assets. Keep the relative path consistent with the project structure.

**LANGUAGE**: HTML

**CODE**:
```html
<!-- Add this to your application's HTML (e.g., index.html) -->
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```

**STEP**: 2 — Open the Application Modeler views

**DESCRIPTION**: Open the Application Modeler extension in your IDE (VS Code). Use the Page Map view to visually inspect application pages, navigations, and service entities. From the Page Map you can add/delete pages, add navigations, and jump to the Page Editor. Use these paths to reference documentation and preview flows in automation or tooltips.

**LANGUAGE**: Markdown

**CODE**:
```markdown
Documentation & preview references:
- Generated app docs: ../Generating-an-Application/SAP-Fiori-Elements/sap-fiori-elements-1488469.md
- Preview docs: ../Previewing-an-Application/previewing-an-application-b962685.md
```

**STEP**: 3 — Use Page Map to configure structure

**DESCRIPTION**: In the Page Map view:
- Visualize pages, navigations, and linked service entities.
- Click the pencil (Configure Page) icon to open Page Editor for a selected page.
- Add or delete pages and navigations from the Page Map.
- Inspect and apply global page settings that affect the whole project.

**LANGUAGE**: Markdown

**CODE**:
```markdown
Example image reference for Page Map:
- images/FIORI_TOOLS_PAGE_MAP_96cfbae.png
(Use this path when embedding UI snapshots in docs or tests)
```

**STEP**: 4 — Edit page content with the Page Editor and Property Panel

**DESCRIPTION**: Use the Page Editor to select configurable page nodes (controls, sections, lists). When you select a node:
- The Property Panel opens to edit properties for that node.
- Save changes to persist them as project artifacts or as UI flexibility changes in the project folder.
- Saving automatically triggers a refresh of the preview.

Keep automation scripts aware that edits are saved into the project's artifacts/ui5 flexibility folders. Use the preview refresh event to detect completion.

**LANGUAGE**: Markdown

**CODE**:
```markdown
Example image references:
- Page Editor: images/FIORI_TOOLS_PAGE_EDITOR_f3232a4.png
- Property Panel: images/FIORI_TOOLS_PROPERTY_PANE_257df73.png

Notes for automation:
- Edit via the UI (Application Modeler) -> saved changes are written under your project's folder (artifact or UI flexibility files).
- After save, preview refresh is triggered: ../Previewing-an-Application/previewing-an-application-b962685.md
```

**STEP**: 5 — Generate mock data with AI

**DESCRIPTION**: Use the Application Modeler feature to generate mock data for entities. The tool uses entity property names to produce contextually relevant mock values with AI. Include generated mock data when bootstrapping local previews or tests.

**LANGUAGE**: Markdown

**CODE**:
```markdown
Mock data docs & image reference:
- Generating Mock Data with AI doc: ../Previewing-an-Application/generating-mock-data-with-ai-815c310.md
- Screenshot: images/Generate_Mock_Data_with_AI_34759c0.png

Usage tip:
- Trigger "Generate Mock Data with AI" from Application Modeler.
- Use generated mock JSON to seed mock server or local OData mock responses for preview.
```

**STEP**: 6 — Integrate into code-generation or automation workflows

**DESCRIPTION**: When generating or modifying Fiori elements projects programmatically:
- Ensure the generated project layout matches the Application Modeler expectations (pages, navigations, entity configurations).
- Add or update sap-icons stylesheet if needed (see Step 1).
- After programmatic changes to artifact/UI flexibility files, trigger a preview refresh or restart the local preview to reflect updates.
- When implementing tests, use the image paths and documentation links above for references or assertions in docs/tests.

**LANGUAGE**: Markdown

**CODE**:
```markdown
Key artifacts and references to monitor in project folder:
- UI artifacts and UI flexibility files (written by Application Modeler)
- CSS: ../css/sap-icons.css
- Documentation anchors:
  - ../Generating-an-Application/SAP-Fiori-Elements/sap-fiori-elements-1488469.md
  - ../Previewing-an-Application/previewing-an-application-b962685.md
  - ../Previewing-an-Application/generating-mock-data-with-ai-815c310.md
- UI snapshot files (for docs/tests):
  - images/FIORI_TOOLS_PAGE_MAP_96cfbae.png
  - images/FIORI_TOOLS_PAGE_EDITOR_f3232a4.png
  - images/FIORI_TOOLS_PROPERTY_PANE_257df73.png
  - images/Generate_Mock_Data_with_AI_34759c0.png
```
--------------------------------

**TITLE**: Diagnostics for XML Annotation Files (Fiori Tools)

**INTRODUCTION**: This document explains how the XML Annotation Language Server validates annotation files against project metadata, annotation vocabularies, and the OData specification. It shows how to view diagnostics, use code completion and Quick Fixes to resolve issues, and highlights restrictions and local-copy behavior.

**TAGS**: fiori-tools, diagnostics, annotations, language-server, LSP, XML, OData, code-completion, quick-fix, Problems-panel

**STEP**: 1 — Validation behavior and limitations

**DESCRIPTION**: The Annotation LSP validates annotation files when you open them and every time an annotation file, metadata, or project structure changes. It produces error, warning, and info diagnostics. Note that annotations embedded in service metadata and dynamic expressions are not supported by the Diagnostics feature.

**LANGUAGE**: HTML

**CODE**:
```html
<!-- Include project stylesheet (preserve file path) -->
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```

**STEP**: 2 — Example: a diagnostic produced by invalid annotation content

**DESCRIPTION**: Example annotation snippet that will be validated. If the annotation references a non-existing property or an incorrect value, the LSP will surface a diagnostic. Use this pattern to reproduce or test diagnostics.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- annotations.xml -->
<Annotations Target="MyService.Product">
  <Annotation Term="UI.LineItem">
    <Collection>
      <Record Type="UI.DataField">
        <!-- This Path references a property that does not exist in metadata -->
        <PropertyValue Property="Value" Path="NonExistingProperty"/>
      </Record>
    </Collection>
  </Annotation>
</Annotations>
```

**STEP**: 3 — Viewing diagnostics in editor and Problems panel

**DESCRIPTION**: View diagnostics by hovering over highlighted markup in the annotation file to see inline messages. Open the editor's Problems panel to list all diagnostics. Click any message in the Problems panel to navigate to the corresponding location in the annotation file.

**LANGUAGE**: text

**CODE**:
```text
Actions:
- Hover over the underlined/marked XML to view the diagnostic tooltip.
- Open Problems panel (e.g., View > Problems) to list all issues.
- Click a problem entry to jump to the annotation file location.
```

**STEP**: 4 — Fixing diagnostics with code completion (recommended for value/element fixes)

**DESCRIPTION**: Use editor code completion when the issue is an incorrect element or value. Trigger completion and select a correct suggestion to fix the annotation. Shortcuts differ by OS.

**LANGUAGE**: text

**CODE**:
```text
Code completion shortcuts:
- Windows/Linux: Ctrl + Space
- macOS: Cmd + Space

Workflow:
1. Place cursor inside the attribute or element value (e.g., inside Path="...").
2. Press the completion shortcut.
3. Choose a suggested, metadata-backed property or value.
```

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Before: invalid Path -->
<PropertyValue Property="Value" Path="NonExistingProperty"/>

<!-- After: corrected with code completion -->
<PropertyValue Property="Value" Path="ExistingProperty"/>
```

**STEP**: 5 — Applying Quick Fixes (Light Bulb actions)

**DESCRIPTION**: When available, Quick Fixes suggest automated repairs (rename, add missing imports, change term, etc.). Click the light bulb icon shown near the diagnostic or press the editor action shortcut to view and apply fixes.

**LANGUAGE**: text

**CODE**:
```text
Quick Fix usage:
- Click the light bulb icon near the diagnostic in the editor gutter.
- Or use the editor's Quick Fix shortcut (varies by editor).
- Choose one of the suggested actions to apply the change automatically.
```

**STEP**: 6 — Manual fixes and scope of diagnostics

**DESCRIPTION**: You can always edit the annotation file manually to resolve issues. Note diagnostics for annotations inside local copies of metadata or backend annotation files are informational only — fixes must be applied in the original service metadata for effects on deployed apps or previews against the real service.

**LANGUAGE**: text

**CODE**:
```text
Important notes:
- Annotations embedded in service metadata and dynamic expressions are NOT supported by Diagnostics.
- Diagnostics on local copies of metadata/backend annotation files are informational.
- To make production changes, edit the original service metadata on the backend/service.
```
--------------------------------

**TITLE**: XML Annotation Language Server — Quick Info (Fiori Tools)

**INTRODUCTION**: Brief, actionable reference for enabling and using the XML Annotation Language Server quick info feature in editors (hover tooltips and expanded documentation for completion suggestions). Use this when editing OData annotation XML files to surface term/record/property descriptions, targets, type, and deprecation/mandatory status retrieved from OData vocabularies.

**TAGS**: fiori-tools, odata, xml, language-server, quick-info, hover, code-completion, vscode

**STEP**: 1 — Include SAP icons stylesheet for annotation UI
**DESCRIPTION**: Add the provided stylesheet to your documentation or editor webview to ensure SAP icon fonts render correctly when showing annotation-related UI. Keep the relative path as in project structure.
**LANGUAGE**: HTML
**CODE**:
```html
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```

**STEP**: 2 — Hover to view quick info in the editor
**DESCRIPTION**: In an annotation XML file, hover the mouse cursor over an annotation term, record type, or property identifier to open the quick info hover window. The hover shows the term purpose, type, applicable targets, experimental/deprecated state, and optional/mandatory status when available from the OData vocabularies.
Use the example below to test hover behavior: place your cursor over the Term value (e.g., UI.HeaderInfo) to see quick info populated from the vocabulary.
**LANGUAGE**: XML
**CODE**:
```xml
<!-- Example OData annotation snippet to test hover quick info -->
<Annotations Target="MyService.MyEntityType">
  <Annotation Term="UI.HeaderInfo">
    <Record>
      <PropertyValue Property="TypeName" Path="Name" />
    </Record>
  </Annotation>
</Annotations>
```

**STEP**: 3 — Expand quick info for completion suggestions
**DESCRIPTION**: When the editor shows code completion suggestions, open the quick info panel for each suggestion to read its documentation. Use the keyboard shortcut or the information icon in the completion UI. The expanded documentation remains visible and updates as you navigate suggestions.
- Windows: press Ctrl + Space to open suggestions and use the information (i) icon or hover the suggestion to expand docs.
- macOS: press Cmd + Space to open suggestions (if not used by OS shortcut) and use the information (i) icon or hover the suggestion to expand docs.
The expanded panel updates as you move through the list and shows the same vocabulary-sourced details as the hover.
**LANGUAGE**: Text
**CODE**:
```text
Open suggestions:
  - Windows: Ctrl + Space
  - macOS: Command + Space (ensure OS shortcut doesn't block)

Actions in completion UI:
  - Click the information (i) icon to expand documentation for the selected suggestion
  - Navigate suggestions with arrow keys; the documentation panel updates automatically
```

**STEP**: 4 — Close the expanded documentation panel
**DESCRIPTION**: Close the quick info panel shown beside the completion list by toggling the suggestions shortcut again or by clicking the panel Close icon.
**LANGUAGE**: Text
**CODE**:
```text
Close expanded documentation:
  - Press the suggestions shortcut again (Ctrl + Space on Windows, Command + Space on macOS)
  - Or click the Close (×) icon in the expanded documentation panel
```

**STEP**: 5 — Troubleshooting: missing quick info content
**DESCRIPTION**: Quick info content is retrieved from OData vocabularies. If hover or completion documentation is empty:
- Ensure the editor/language server can access the required OData vocabulary files (local or network).
- Confirm the vocabulary includes documentation metadata for the term/record/property.
- Check editor/network settings, proxy, or workspace configuration that may block vocabulary access.
- The exact content depends on availability in the vocabularies; absence means no documentation is available to display.
**LANGUAGE**: Text
**CODE**:
```text
Checklist if quick info is empty:
  - Verify OData vocabulary files are present and reachable
  - Confirm the vocabulary contains documentation fields for terms/records/properties
  - Check editor/network/proxy settings that might block downloads
  - No vocabulary doc = no quick info available
```
--------------------------------

**TITLE**: Edit in Source Code — Fiori Tools (Property Panel)

**INTRODUCTION**: This document explains how the "Edit in source code" feature in the Fiori tools Property Panel maps a UI property to its annotation definition(s) in annotation files. It shows how to locate the icon/link in the Property Panel, how multiple definitions are presented (VS Code vs SAP Business Application Studio), and examples of annotation fragments and UI markup so agents can generate code to support or test this behavior.

**TAGS**: fiori-tools, annotations, SAP Fiori, VS Code, Business Application Studio, Property Panel, edit-in-source, UI annotations

**STEP**: 1 — Include SAP icons stylesheet

**DESCRIPTION**: Ensure the SAP icons stylesheet is available to render the "Edit in source code" icon. Reference the stylesheet from the app hosting the Property Panel.

**LANGUAGE**: HTML

**CODE**:
```html
<!-- File: webapp/index.html or Property Panel host -->
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```

**STEP**: 2 — Property Panel UI markup (icon and fallback link)

**DESCRIPTION**: Example markup for a Property Panel entry: display an input field for the property and an "Edit in source code" icon. When the Page Editor cannot interpret a control (complex config), use a fallback link with the same functionality.

**LANGUAGE**: HTML

**CODE**:
```html
<!-- Editable property with icon (rendered when Page Editor can interpret the annotation) -->
<div class="property-row">
  <label for="productName">Product Name</label>
  <input id="productName" type="text" value="{ProductName}" />
  <!-- Icon uses SAP icon font class; title/aria for accessibility -->
  <span class="SAP-icons-TNT-V3" title="Edit in source code" role="button" aria-label="Edit in source code"></span>
</div>

<!-- Fallback when Page Editor cannot interpret the configuration -->
<div class="property-row">
  <label for="complexProp">Complex Property</label>
  <input id="complexProp" type="text" value="..." />
  <!-- Link behaves like the icon: opens the source file at the annotation location -->
  <a class="edit-in-source-link" href="#" data-source-file="app/annotations/Complex.annotation.xml">
    Edit in source code
  </a>
</div>
```

**STEP**: 3 — Annotation fragment example (OData V4 XML annotation)

**DESCRIPTION**: Provide a minimal annotation XML example showing where the Page Editor will navigate. Use this format to generate tests or implement the "jump to source" behavior.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- File: app/annotations/Product.annotations.xml -->
<Annotations Target="MyService.ProductType" xmlns="http://docs.oasis-open.org/odata/ns/edm">
  <Annotation Term="UI.LineItem">
    <Collection>
      <Record Type="UI.DataField">
        <PropertyValue Property="Value" Path="ProductName"/>
      </Record>
    </Collection>
  </Annotation>
</Annotations>
```

**STEP**: 4 — Multiple annotation definitions (VS Code shows selection; BAS shows first match)

**DESCRIPTION**: If multiple annotation files define the same annotation/target, VS Code presents a popup allowing the user to choose which file/definition to open. SAP Business Application Studio (BAS) shows only the first annotation. Use these file examples to reproduce multiple-definition behavior.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- File: app/annotations/Product.annotations.xml -->
<Annotations Target="MyService.ProductType" xmlns="http://docs.oasis-open.org/odata/ns/edm">
  <Annotation Term="UI.LineItem">
    <Collection>
      <Record Type="UI.DataField">
        <PropertyValue Property="Value" Path="ProductName"/>
      </Record>
    </Collection>
  </Annotation>
</Annotations>

<!-- File: app/annotations/ProductExtension.annotations.xml -->
<Annotations Target="MyService.ProductType" xmlns="http://docs.oasis-open.org/odata/ns/edm">
  <Annotation Term="UI.LineItem">
    <Collection>
      <!-- Another definition referencing same property -->
      <Record Type="UI.DataField">
        <PropertyValue Property="Value" Path="DisplayedProductName"/>
      </Record>
    </Collection>
  </Annotation>
</Annotations>
```

**STEP**: 5 — Example: VS Code popup representation (for UI automation)

**DESCRIPTION**: Represent the multiple-definition selection as a simple array suitable for UI automation or testing to simulate the popup selection in VS Code. Each entry should include the file path and annotation fragment location.

**LANGUAGE**: JSON

**CODE**:
```json
[
  {
    "label": "Product.annotations.xml",
    "description": "app/annotations/Product.annotations.xml",
    "annotationPath": "Annotations[0]/Annotation[0]/Collection/Record[0]"
  },
  {
    "label": "ProductExtension.annotations.xml",
    "description": "app/annotations/ProductExtension.annotations.xml",
    "annotationPath": "Annotations[0]/Annotation[0]/Collection/Record[0]"
  }
]
```

**STEP**: 6 — Complex annotation example that prevents interpretation (fallback behavior)

**DESCRIPTION**: Show an annotation using a complex expression or extension that the Page Editor cannot interpret. The Property Panel should render the "Edit in source code" link instead of the icon next to the field.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- File: app/annotations/Complex.annotation.xml -->
<Annotations Target="MyService.ProductType" xmlns="http://docs.oasis-open.org/odata/ns/edm">
  <!-- Complex expression or custom qualifier that Page Editor cannot parse -->
  <Annotation Term="UI.LineItem">
    <Collection>
      <Record Type="UI.DataField">
        <PropertyValue Property="Value">
          <!-- Example: an expression or complex dynamic binding the editor cannot interpret -->
          <Path>$apply=aggregate(ProductName with sum as Total)</Path>
        </PropertyValue>
      </Record>
    </Collection>
  </Annotation>
</Annotations>
```

**STEP**: 7 — Reference image and example asset paths

**DESCRIPTION**: Keep asset paths intact for UI screenshots or documentation rendering and to help automated tooling locate resources.

**LANGUAGE**: HTML

**CODE**:
```html
<!-- Screenshot used in documentation -->
<img src="images/EditinSource_675234e.png" alt="Edit in Source Code screenshot"/>

<!-- CSS (already referenced in Step 1) -->
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```
--------------------------------

**TITLE**: Adding, Moving, Deleting, and Maintaining Filter Fields (Compact & Visual) for Fiori Elements List Report

**INTRODUCTION**: Quick, code-focused guide for programmatically adding or editing filter fields (compact filters) and visual filters (charts) for a Fiori Elements List Report. Shows the exact annotation changes to make in the local annotation file and the manifest.json control configuration. Use these snippets when automating project changes, writing generator scripts, or implementing a RAG-based code generation step.

**TAGS**: fiori-tools, annotations, UI.SelectionFields, UI.Chart, UI.PresentationVariant, Common.ValueList, manifest.json, filter-bar, visual-filter

STEP: Add a compact filter field (UI.SelectionFields)

DESCRIPTION: Add a property path to the List Report page selection fields. This creates or updates the UI.SelectionFields annotation in your local annotation file so the property appears in the Filter Bar as a compact filter.

LANGUAGE: XML

CODE:
```XML
<!-- File: webapp/annotations/annotations.xml (or your local annotation file) -->
<Annotations Target="YourService.YourEntityType">
  <!-- If UI.SelectionFields does not exist, add this annotation -->
  <Annotation Term="UI.SelectionFields">
    <Collection>
      <!-- Add the PropertyPath(s) for the filters in the order you want them displayed -->
      <PropertyPath>PropertyA</PropertyPath>
      <PropertyPath>PropertyB</PropertyPath>
      <!-- Add new filter field here -->
      <PropertyPath>NewFilterProperty</PropertyPath>
    </Collection>
  </Annotation>
</Annotations>
```

LANGUAGE: JSON

CODE:
```JSON
// Alternate JSON representation (annotations.json) - same effect: update UI.SelectionFields
{
  "Annotations": {
    "YourService.YourEntityType": {
      "UI.SelectionFields": [
        { "PropertyPath": "PropertyA" },
        { "PropertyPath": "PropertyB" },
        { "PropertyPath": "NewFilterProperty" } // newly added compact filter
      ]
    }
  }
}
```

STEP: Add a visual filter (UI.Chart + UI.PresentationVariant + Common.ValueList)

DESCRIPTION: Create a visual filter (bar/line chart) by adding a UI.Chart annotation (qualifier), reference it from a UI.PresentationVariant, and register a Common.ValueList referencing that presentation variant (qualifier). Also ensure the corresponding property is included in UI.SelectionFields so a compact filter exists for the same property.

LANGUAGE: XML

CODE:
```XML
<!-- File: webapp/annotations/annotations.xml -->
<Annotations Target="YourService.YourAnalyticsEntityType">
  <!-- 1) Chart definition (qualifier: Chart_Qual1) -->
  <Annotation Term="UI.Chart" Qualifier="Chart_Qual1">
    <Record>
      <PropertyValue Property="ChartType" String="Bar"/> <!-- or "Line" for time-based -->
      <PropertyValue Property="Measures">
        <Collection>
          <PropertyPath>SalesAmount</PropertyPath> <!-- measure -->
        </Collection>
      </PropertyValue>
      <PropertyValue Property="Dimensions">
        <Collection>
          <PropertyPath>SalesRegion</PropertyPath> <!-- dimension -->
        </Collection>
      </PropertyValue>
      <!-- Optional: define SortOrder for the chart measure -->
      <PropertyValue Property="SortOrder">
        <Collection>
          <Record>
            <PropertyValue Property="By" Path="SalesAmount"/>
            <PropertyValue Property="Descending" Bool="true"/>
          </Record>
        </Collection>
      </PropertyValue>
      <!-- Optional: reference a UI.DataPoint for scale/formatting -->
      <PropertyValue Property="DataPoint" AnnotationPath="@UI.DataPoint#ChartDP1"/>
    </Record>
  </Annotation>

  <!-- 2) PresentationVariant referencing the chart (qualifier: PV_ChartRef) -->
  <Annotation Term="UI.PresentationVariant" Qualifier="PV_ChartRef">
    <Record>
      <PropertyValue Property="Visualizations">
        <Collection>
          <AnnotationPath>#Chart_Qual1</AnnotationPath>
        </Collection>
      </PropertyValue>
      <!-- Optional: set SortOrder or MaxItems -->
    </Record>
  </Annotation>

  <!-- 3) Common.ValueList referencing the PresentationVariant (qualifier used here) -->
  <Annotation Term="Common.ValueList" Qualifier="VL_FromPV">
    <Record>
      <!-- ValueList annotation fields depend on your value list design.
           Use this ValueList to link the List Report control to the presentation variant -->
      <PropertyValue Property="Label" String="Visual Filter Value List"/>
      <PropertyValue Property="PresentationVariant" String="#PV_ChartRef"/>
    </Record>
  </Annotation>

  <!-- 4) Ensure the filter property is present in UI.SelectionFields for the list report entity -->
  <Annotation Term="UI.SelectionFields">
    <Collection>
      <PropertyPath>NewFilterProperty</PropertyPath>
      <!-- other selection fields -->
    </Collection>
  </Annotation>
</Annotations>
```

STEP: Update manifest.json controlConfiguration to reference the visual filter's ValueList (where applicable)

DESCRIPTION: Add or update the List Report page controlConfiguration to point to the generated Common.ValueList qualifier for the selection field. Place this entry in the matching page entry under sap.ui.generic.app/pages[].component.settings.controlConfiguration.

LANGUAGE: JSON

CODE:
```JSON
// File: webapp/manifest.json
{
  "sap.ui5": {
    "models": { /* ... */ },
    "extends": { /* ... */ }
  },
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "YourEntitySet",
        "component": {
          "name": "sap.suite.ui.generic.template.ListReport",
          "settings": {
            "controlConfiguration": {
              // For the selection field, reference the generated Common.ValueList qualifier
              "com.sap.vocabularies.UI.v1.SelectionFields": {
                "NewFilterProperty": {
                  "valueList": "Annotations/YourService.YourAnalyticsEntityType@Common.ValueList#VL_FromPV"
                }
              }
            }
          }
        }
      }
    ]
  }
}
```

STEP: Re-order filter fields (move compact filters)

DESCRIPTION: Change display order by reordering the PropertyPath entries in UI.SelectionFields. The runtime Filter Bar order follows the sequence in this annotation. Drag/drop in editor or programmatically reorder the Collection entries.

LANGUAGE: XML

CODE:
```XML
<!-- File: webapp/annotations/annotations.xml -->
<Annotation Term="UI.SelectionFields">
  <Collection>
    <!-- New desired order -->
    <PropertyPath>PropertyB</PropertyPath>
    <PropertyPath>NewFilterProperty</PropertyPath>
    <PropertyPath>PropertyA</PropertyPath>
  </Collection>
</Annotation>
```

STEP: Delete a filter field (compact and visual)

DESCRIPTION: Removing a compact filter: remove its PropertyPath from UI.SelectionFields. Removing a visual filter: remove controlConfiguration entry in manifest.json and remove UI.Chart, UI.PresentationVariant, and Common.ValueList entries from the local annotation file. Note: Common.Label/@title for the property is intentionally NOT removed (may be used elsewhere).

LANGUAGE: XML

CODE:
```XML
<!-- File: webapp/annotations/annotations.xml -->
<!-- Remove the PropertyPath entry -->
<Annotation Term="UI.SelectionFields">
  <Collection>
    <PropertyPath>PropertyA</PropertyPath>
    <!-- PropertyPath>NewFilterProperty</PropertyPath> removed -->
  </Collection>
</Annotation>

<!-- Remove visual filter annotations by deleting these blocks:
     UI.Chart (#Chart_Qual1), UI.PresentationVariant (#PV_ChartRef), Common.ValueList (#VL_FromPV) -->
```

LANGUAGE: JSON

CODE:
```JSON
// File: webapp/manifest.json
{
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "YourEntitySet",
        "component": {
          "settings": {
            "controlConfiguration": {
              "com.sap.vocabularies.UI.v1.SelectionFields": {
                // Remove the controlConfiguration entry for the property linking to the ValueList
                // "NewFilterProperty": { "valueList": "Annotations/YourService...#VL_FromPV" }
              }
            }
          }
        }
      }
    ]
  }
}
```

STEP: Maintain visual filter properties (labels, scale factor, fractional digits, sort, fixed filters)

DESCRIPTION: Map UI properties to annotation edits:
- Label -> Common.Label or @title on the measure/dimension property.
- Scale Factor and Fractional Digits -> define UI.DataPoint and reference it from the UI.Chart via DataPoint annotation.
- Sort Order -> use SortOrder inside UI.Chart (see earlier SortOrder example).
- Fixed Values (limit chart values) -> add filter criteria in the backend OData or create a PresentationVariant with SelectionVariant to constrain results (then reference that PresentationVariant).

LANGUAGE: XML

CODE:
```XML
<!-- Example: UI.DataPoint for measure formatting (qualifier: ChartDP1) -->
<Annotation Term="UI.DataPoint" Qualifier="ChartDP1">
  <Record>
    <PropertyValue Property="Value" Path="SalesAmount"/>
    <PropertyValue Property="ScaleFactor" String="3"/> <!-- explicit scale factor or omit for auto -->
    <PropertyValue Property="NumberOfFractionalDigits" Int="2"/>
    <PropertyValue Property="Unit" Path="CurrencyCode"/>
  </Record>
</Annotation>

<!-- Reference DataPoint from UI.Chart:
     <PropertyValue Property="DataPoint" AnnotationPath="@UI.DataPoint#ChartDP1"/> -->
```

STEP: Notes and constraints for automation

DESCRIPTION: Important constraints to consider when generating or modifying annotations:
- Properties annotated with UI.Hidden, UI.HiddenFilter, or listed as NonFilterableProperties in Capabilities.FilterRestrictions are not selectable/usable for filters — do not add them to UI.SelectionFields.
- Visual filters require analytically enabled entities and groupable properties for the chosen dimension.
- Time-based properties (Edm.Date, Edm.Time, Edm.DateTime, Edm.DateTimeOffset) may permit line charts; other types use bar charts.
- Creating a new aggregated measure: only allowed for aggregable properties and supported aggregation methods; avoid duplicating an existing measure based on the same source+aggregation.
- Deleting a visual filter from the manifest removes only the controlConfiguration entry — remove annotations from the local annotation file to fully delete them.

LANGUAGE: N/A

CODE:
```text
File locations referenced:
- Local annotation file (XML/JSON): webapp/annotations/annotations.xml (or annotations.json)
- App descriptor: webapp/manifest.json
- List Report page config: sap.ui.generic.app.pages[].component.settings.controlConfiguration
```


--------------------------------

**TITLE**: Configuring Object Page Footer Actions (UI.DataFieldForAction)

**INTRODUCTION**: This guide shows how to surface actions as buttons in the Fiori Object Page footer by using UI.DataFieldForAction entries in the UI.Identification annotation applied to the main entity. It includes example annotation XML for adding actions, shows properties that affect footer behavior (Determining, Criticality), and demonstrates which action types are not eligible for the footer (intent-based navigation).

**TAGS**: fiori-tools, annotations, UI.DataFieldForAction, ObjectPage, footer, OData, XML

STEP: 1 — Add an action to appear in the Object Page footer

DESCRIPTION: Define a UI.DataFieldForAction record inside the UI.Identification annotation on the main entity type. Set Determining="true" to include the action in the footer. Use the Action property to reference the bound action (ServiceNamespace.ActionName). Criticality controls ordering and visual emphasis; RequiresContext and Importance are included in the annotation but are not relevant for header actions.

LANGUAGE: XML

CODE:
```xml
<!-- file: annotations.xml -->
<Annotations Target="MyService.MyEntityType">
  <Annotation Term="UI.Identification">
    <Collection>
      <Record Type="UI.DataFieldForAction">
        <!-- Fully qualified action (bound/action) -->
        <PropertyValue Property="Action" String="MyService.DoSomething"/>
        <PropertyValue Property="Label" String="Do Something"/>
        <!-- Ensure it is included as a determining action (appears in footer) -->
        <PropertyValue Property="Determining" Bool="true"/>
        <!-- Context requirement: when true the action expects the current entity/context -->
        <PropertyValue Property="RequiresContext" Bool="true"/>
        <!-- Importance has no effect for header actions, but can be set -->
        <PropertyValue Property="Importance" EnumMember="UI.ImportanceType/High"/>
        <!-- Criticality influences the sequence of actions in the footer -->
        <PropertyValue Property="Criticality" EnumMember="UI.CriticalityType/Positive"/>
      </Record>
    </Collection>
  </Annotation>
</Annotations>
```

STEP: 2 — Example: multiple footer actions with varied criticality (ordering behavior)

DESCRIPTION: When you change Criticality between None/Positive/Negative the Page Editor outline will reorder action nodes automatically. The example below shows three footer actions with different criticalities.

LANGUAGE: XML

CODE:
```xml
<!-- file: annotations.xml -->
<Annotations Target="MyService.MyEntityType">
  <Annotation Term="UI.Identification">
    <Collection>
      <Record Type="UI.DataFieldForAction">
        <PropertyValue Property="Action" String="MyService.Approve"/>
        <PropertyValue Property="Label" String="Approve"/>
        <PropertyValue Property="Determining" Bool="true"/>
        <PropertyValue Property="Criticality" EnumMember="UI.CriticalityType/Positive"/>
      </Record>
      <Record Type="UI.DataFieldForAction">
        <PropertyValue Property="Action" String="MyService.Reject"/>
        <PropertyValue Property="Label" String="Reject"/>
        <PropertyValue Property="Determining" Bool="true"/>
        <PropertyValue Property="Criticality" EnumMember="UI.CriticalityType/Negative"/>
      </Record>
      <Record Type="UI.DataFieldForAction">
        <PropertyValue Property="Action" String="MyService.SaveDraft"/>
        <PropertyValue Property="Label" String="Save Draft"/>
        <PropertyValue Property="Determining" Bool="true"/>
        <PropertyValue Property="Criticality" EnumMember="UI.CriticalityType/None"/>
      </Record>
    </Collection>
  </Annotation>
</Annotations>
```

STEP: 3 — Do NOT use intent-based navigation actions for footer buttons

DESCRIPTION: External (intent-based) navigation actions use UI.DataFieldForIntentBasedNavigation and are not eligible for the Object Page footer regardless of Determining. Keep intent-based navigation entries separate (they are used for navigation, not footer action buttons).

LANGUAGE: XML

CODE:
```xml
<!-- file: annotations.xml -->
<Annotations Target="MyService.MyEntityType">
  <Annotation Term="UI.Identification">
    <Collection>
      <!-- This type is for navigation (semantic object + action) and cannot be placed in the footer -->
      <Record Type="UI.DataFieldForIntentBasedNavigation">
        <PropertyValue Property="SemanticObject" String="Contact"/>
        <PropertyValue Property="Action" String="displayFactSheet"/>
        <PropertyValue Property="Label" String="Display Fact Sheet"/>
        <!-- Determining here does NOT place intent-based navigation into the footer -->
        <PropertyValue Property="Determining" Bool="true"/>
      </Record>
    </Collection>
  </Annotation>
</Annotations>
```

STEP: 4 — Move actions between Footer, Header, and Form sections via Page Editor

DESCRIPTION: In the Fiori tools Page Editor you can move non-semantically highlighted actions between the Object Page footer, page header, and form sections of the main-entity-bound form. Semantically highlighted actions (Determining/semantic actions) may be restricted. Changing Criticality can trigger reordering in the Page Editor outline.

LANGUAGE: JSON

CODE:
```json
{
  "workflow": [
    "Open Page Editor for the Object Page",
    "Identify the action node in the Outline view (derived from UI.Identification entries)",
    "Drag and drop the action node between Footer, Header, or Form sections",
    "Save annotations.xml — changes are persisted in the annotation file"
  ]
}
```

STEP: 5 — Validation checklist for footer actions

DESCRIPTION: Quick checks to ensure actions appear and behave correctly in the footer.

LANGUAGE: JSON

CODE:
```json
{
  "validation": [
    "Annotation target points to the main entity: Annotations Target=\"MyService.MyEntityType\"",
    "Action record type is UI.DataFieldForAction",
    "Determining Bool must be true to list in footer",
    "Intent-based navigation (UI.DataFieldForIntentBasedNavigation) is NOT used for footer buttons",
    "Criticality set to Positive/Negative/None affects order in Page Editor",
    "RequiresContext / Importance do not affect header placement"
  ]
}
```
--------------------------------

**TITLE**: Fiori Object Page (Form, Identification, Table, Group, Footer) — UI5 Code Templates

**INTRODUCTION**: This document provides compact, production-ready UI5 code patterns to implement a Fiori Object Page using sap.uxap.ObjectPageLayout with the supported sections: Header (Identification), Form Section, Table Section, Group Section, and Footer. Use the XML view, controller, sample model data, and manifest routing snippets to scaffold an Object Page in a fiori-tools project.

**TAGS**: fiori-tools, UI5, ObjectPage, ObjectPageLayout, SimpleForm, Table, XMLView, manifest, routing, sample-data

**STEP**: 1 — Supported elements & anchor references

**DESCRIPTION**: Supported Object Page elements and reference anchors (preserve links for design guidance and further reading).

**LANGUAGE**: Text/Links

**CODE**:
```text
Supported elements:
- Header (ObjectPageHeader) - reference: header-a05d7fc.md#loioa05d7fc1bbbf42a0ade9fb50f6b58b56
- Form Section - reference: form-section-4102b3d.md
- Table Section - reference: table-section-fc59378.md
- Identification Section - reference: identification-section-b83f501.md
- Group Section - reference: group-section-1894c47.md
- Footer - reference: footer-1b391bd.md

SAP Design Guidelines for Object Page:
https://experience.sap.com/fiori-design-web/object-page/
```

**STEP**: 2 — XML View: ObjectPageLayout skeleton with Header, Identification, Form, Group, Table, Footer

**DESCRIPTION**: Create a UI5 XML view file that composes the Object Page. Place in: webapp/view/ObjectPage.view.xml (or src/view/ObjectPage.view.xml depending on project layout).

**LANGUAGE**: XML

**CODE**:
```xml
<mvc:View
  controllerName="my.app.controller.ObjectPage"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns:core="sap.ui.core"
  xmlns="sap.m"
  xmlns:uxap="sap.uxap">
  <uxap:ObjectPageLayout id="objectPage">
    <!-- Header: Identification / Title -->
    <headerTitle>
      <uxap:ObjectPageHeader
        title="{/Product/ProductName}"
        objectTitle="{/Product/ProductID}"
        intro="{/Product/Category}">
        <!-- headerContent: key identification attributes -->
        <headerContent>
          <FlexBox alignItems="Center">
            <Text text="Supplier:" />
            <Text class="sapUiTinyMarginBegin" text="{/Product/Supplier}" />
          </FlexBox>
        </headerContent>
      </uxap:ObjectPageHeader>
    </headerTitle>

    <!-- Optional header content area (images, badges, actions) -->
    <headerContent>
      <VBox>
        <Image src="{/Product/ImageUrl}" width="120px" />
      </VBox>
    </headerContent>

    <!-- Section: Identification (attributes / key info) -->
    <sections>
      <uxap:ObjectPageSection id="identificationSection" title="Identification">
        <uxap:ObjectPageSubSection>
          <SimpleForm editable="false" class="sapUiSmallMargin">
            <Label text="Product ID" />
            <Text text="{/Product/ProductID}" />
            <Label text="Name" />
            <Text text="{/Product/ProductName}" />
            <Label text="Category" />
            <Text text="{/Product/Category}" />
            <Label text="Supplier" />
            <Text text="{/Product/Supplier}" />
          </SimpleForm>
        </uxap:ObjectPageSubSection>
      </uxap:ObjectPageSection>

      <!-- Section: Form (detailed attributes in groups) -->
      <uxap:ObjectPageSection id="formSection" title="Details">
        <uxap:ObjectPageSubSection title="Specifications">
          <SimpleForm editable="true" columnsL="2" columnsM="1" class="sapUiSmallMargin">
            <!-- Group 1 -->
            <Label text="Dimensions" />
            <Text text="{/Product/Dimensions}" />
            <Label text="Weight" />
            <Text text="{/Product/Weight}" />

            <!-- Group 2 (Group Section example) -->
            <Label text="Manufacturer" />
            <Text text="{/Product/Manufacturer}" />
            <Label text="Warranty" />
            <Text text="{/Product/Warranty}" />
          </SimpleForm>
        </uxap:ObjectPageSubSection>
      </uxap:ObjectPageSection>

      <!-- Section: Table (list of related items) -->
      <uxap:ObjectPageSection id="tableSection" title="Sales Orders">
        <uxap:ObjectPageSubSection>
          <Table inset="false" items="{/SalesOrders}">
            <columns>
              <Column>
                <Text text="Order ID" />
              </Column>
              <Column>
                <Text text="Customer" />
              </Column>
              <Column>
                <Text text="Quantity" />
              </Column>
              <Column>
                <Text text="Status" />
              </Column>
            </columns>
            <items>
              <ColumnListItem>
                <cells>
                  <ObjectIdentifier title="{OrderID}" text="{OrderDate}" />
                  <Text text="{Customer}" />
                  <Text text="{Quantity}" />
                  <Text text="{Status}" />
                </cells>
              </ColumnListItem>
            </items>
          </Table>
        </uxap:ObjectPageSubSection>
      </uxap:ObjectPageSection>
    </sections>

    <!-- Footer: toolbar with actions (button examples) -->
    <footer>
      <Bar>
        <contentLeft>
          <Button text="Edit" press=".onEdit" type="Emphasized" />
          <Button text="Save" press=".onSave" />
        </contentLeft>
        <contentRight>
          <Button text="Delete" press=".onDelete" type="Reject" />
        </contentRight>
      </Bar>
    </footer>
  </uxap:ObjectPageLayout>
</mvc:View>
```

**STEP**: 3 — Controller: bind model, implement simple action handlers

**DESCRIPTION**: Create controller to set model (JSON) and provide handlers for Edit/Save/Delete buttons. Place in: webapp/controller/ObjectPage.controller.js (or src/controller/ObjectPage.controller.js).

**LANGUAGE**: JavaScript

**CODE**:
```javascript
sap.ui.define([
  "sap/ui/core/mvc/Controller",
  "sap/ui/model/json/JSONModel",
  "sap/m/MessageToast"
], function (Controller, JSONModel, MessageToast) {
  "use strict";

  return Controller.extend("my.app.controller.ObjectPage", {
    onInit: function () {
      // Load sample data (inline or via model file)
      var oModel = new JSONModel();
      oModel.loadData("model/data.json"); // path: webapp/model/data.json
      this.getView().setModel(oModel);
    },

    onEdit: function () {
      MessageToast.show("Edit action triggered");
      // Example: toggle form editable property or navigate to edit route
    },

    onSave: function () {
      MessageToast.show("Save action triggered");
      // Example: collect form values and send to backend
    },

    onDelete: function () {
      MessageToast.show("Delete action triggered");
      // Example: call delete endpoint then navigate away
    }
  });
});
```

**STEP**: 4 — Sample JSON model data (for local prototyping)

**DESCRIPTION**: Provide minimal JSON file to populate the view. Place at: webapp/model/data.json (or src/model/data.json).

**LANGUAGE**: JSON

**CODE**:
```json
{
  "Product": {
    "ProductID": "PRD-1001",
    "ProductName": "Contoso Widget",
    "Category": "Widgets",
    "Supplier": "Contoso Supplies",
    "Dimensions": "10x20x5 cm",
    "Weight": "0.5 kg",
    "Manufacturer": "Contoso Manufacturing",
    "Warranty": "2 years",
    "ImageUrl": "images/product-1001.png"
  },
  "SalesOrders": [
    { "OrderID": "SO-2001", "OrderDate": "2025-01-10", "Customer": "Alpha Corp", "Quantity": 10, "Status": "Open" },
    { "OrderID": "SO-2002", "OrderDate": "2025-01-15", "Customer": "Beta LLC", "Quantity": 5, "Status": "Shipped" }
  ]
}
```

**STEP**: 5 — manifest.json snippet: routing and view target

**DESCRIPTION**: Add a route and target for the ObjectPage view. Insert into your webapp/manifest.json under "sap.ui5".

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui5": {
    "rootView": {
      "viewName": "my.app.view.App",
      "type": "XML",
      "id": "app"
    },
    "models": {
      "": {
        "dataSource": "mainService"
      }
    },
    "routing": {
      "config": {
        "routerClass": "sap.m.routing.Router",
        "viewType": "XML",
        "viewPath": "my.app.view",
        "controlId": "app",
        "controlAggregation": "pages",
        "bypassed": {
          "target": "notFound"
        }
      },
      "routes": [
        {
          "name": "object",
          "pattern": "object/{productId}",
          "target": "object"
        }
      ],
      "targets": {
        "object": {
          "viewName": "ObjectPage",
          "viewLevel": 2
        }
      }
    }
  }
}
```

**STEP**: 6 — Recommended file paths and project layout

**DESCRIPTION**: Use these recommended locations when scaffolding files in a fiori-tools project.

**LANGUAGE**: Text/Paths

**CODE**:
```text
Recommended file layout:
- webapp/view/ObjectPage.view.xml          (XML view with ObjectPageLayout)
- webapp/controller/ObjectPage.controller.js
- webapp/model/data.json                   (sample JSON data)
- webapp/manifest.json                     (routing and target configuration)
- webapp/i18n/i18n.properties              (UI texts)
- webapp/images/product-1001.png           (sample image referenced by model)
```

**STEP**: 7 — Quick integration notes

**DESCRIPTION**: Action-oriented tips for code generation and extension.

**LANGUAGE**: Text

**CODE**:
```text
- For forms with complex groups, use SimpleForm with Label/Text or Input bound to entity properties.
- Put tables inside ObjectPageSubSection; use sap.m.Table or sap.ui.table.Table depending on dataset size and features.
- Use ObjectPageHeader for Identification and important attributes (title, objectTitle, intro).
- Bind data via JSONModel for prototyping; switch to ODataModel for backend integration (update manifest dataSource accordingly).
- Implement navigation using the router pattern defined in manifest.json; extract productId from route in controller by implementing onRouteMatched.
- Preserve accessibility attributes and i18n keys in i18n/i18n.properties for translatable labels.
```

--------------------------------

**TITLE**: Form Section — Add, Move, Delete, and Maintain UI.FieldGroup / UI.ReferenceFacet Annotations

**INTRODUCTION**: This document shows exact annotation changes and code examples used when adding, moving, deleting, and maintaining Form Sections in a Fiori Object Page. The examples use OData annotation XML and the CAP/CDS using statement that the tooling adds when overriding annotations. Use these snippets when generating or editing annotation files programmatically.

**TAGS**: fiori-tools, annotations, UI.FieldGroup, UI.ReferenceFacet, UI.Facets, UI.PartOfPreview, object-page, CDS, XML

STEP: Add Form Section

DESCRIPTION: Create a new UI.FieldGroup (empty Data collection) and add a UI.ReferenceFacet record into the UI.Facets collection on the target entity. The ReferenceFacet.Target points to the FieldGroup qualifier, Label contains the user-entered title, and ID is auto-generated (typically a normalized string). If UI.Facets does not exist on this layer, add it. If UI.Facets exists on a lower layer, the tool will override it in the local annotation file. For CAP/CDS overrides, a using statement is added.

LANGUAGE: XML

CODE:
```xml
<!-- File: annotations.xml (OData V4 annotation file) -->
<Annotations Target="MyService.MyEntityType">
  <!-- Add the ReferenceFacet to UI.Facets -->
  <Annotation Term="UI.Facets">
    <Collection>
      <!-- existing facets ... -->

      <!-- New ReferenceFacet added by the tool -->
      <Record Type="UI.ReferenceFacet">
        <!-- AnnotationPath uses annotation qualifier syntax -->
        <PropertyValue Property="Target" AnnotationPath="UI.FieldGroup#MySection"/>
        <PropertyValue Property="Label" String="My Section"/>
        <PropertyValue Property="ID" String="MySection"/>
      </Record>
    </Collection>
  </Annotation>

  <!-- Add the FieldGroup qualifier record -->
  <Annotation Term="UI.FieldGroup" Qualifier="MySection">
    <Record>
      <PropertyValue Property="Data">
        <Collection/> <!-- empty Data collection: fields will be added later -->
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

LANGUAGE: CDS

CODE:
```sql
-- File: my-entity-annotations.cds (when overriding annotations in CAP)
using { UI } from '@sap/cds/common'; -- tooling adds this using statement when needed

annotate MyService.MyEntityType with {
  @UI.Facets: [
    { $Type: 'UI.ReferenceFacet', Target: '@UI.FieldGroup:MySection', Label: 'My Section', ID: 'MySection' }
    /* other facets... */
  ]
};

annotate MyService.MyEntityType with {
  @UI.FieldGroup: {
    '#MySection': {
      Data: [] /* empty array; fields are added later */
    }
  }
};
```

STEP: Move Form Section (Reorder)

DESCRIPTION: Change the section order by reordering the records inside the UI.Facets collection. The runtime displays sections in the sequence of UI.Facet / UI.HeaderFacets records. To move multiple sections, select multiple ReferenceFacet records and reorder as a group.

LANGUAGE: XML

CODE:
```xml
<!-- Before: UI.Facets order -->
<Annotation Term="UI.Facets">
  <Collection>
    <Record Type="UI.ReferenceFacet">
      <PropertyValue Property="ID" String="SectionA"/>
      <PropertyValue Property="Label" String="Section A"/>
      <PropertyValue Property="Target" AnnotationPath="UI.FieldGroup#SectionA"/>
    </Record>
    <Record Type="UI.ReferenceFacet">
      <PropertyValue Property="ID" String="SectionB"/>
      <PropertyValue Property="Label" String="Section B"/>
      <PropertyValue Property="Target" AnnotationPath="UI.FieldGroup#SectionB"/>
    </Record>
    <Record Type="UI.ReferenceFacet">
      <PropertyValue Property="ID" String="SectionC"/>
      <PropertyValue Property="Label" String="Section C"/>
      <PropertyValue Property="Target" AnnotationPath="UI.FieldGroup#SectionC"/>
    </Record>
  </Collection>
</Annotation>

<!-- After: move SectionC to the top (tool reorders the records) -->
<Annotation Term="UI.Facets">
  <Collection>
    <Record Type="UI.ReferenceFacet"> <!-- SectionC now first -->
      <PropertyValue Property="ID" String="SectionC"/>
      <PropertyValue Property="Label" String="Section C"/>
      <PropertyValue Property="Target" AnnotationPath="UI.FieldGroup#SectionC"/>
    </Record>
    <Record Type="UI.ReferenceFacet">
      <PropertyValue Property="ID" String="SectionA"/>
      <PropertyValue Property="Label" String="Section A"/>
      <PropertyValue Property="Target" AnnotationPath="UI.FieldGroup#SectionA"/>
    </Record>
    <Record Type="UI.ReferenceFacet">
      <PropertyValue Property="ID" String="SectionB"/>
      <PropertyValue Property="Label" String="Section B"/>
      <PropertyValue Property="Target" AnnotationPath="UI.FieldGroup#SectionB"/>
    </Record>
  </Collection>
</Annotation>
```

STEP: Delete Form Section

DESCRIPTION: Remove the corresponding UI.ReferenceFacet record from UI.Facets on the entity. The UI.FieldGroup qualifier remains in the annotation file as an unreferenced annotation — run the cleanup procedure to delete unreferenced UI.FieldGroup records.

LANGUAGE: XML

CODE:
```xml
<!-- Before: UI.Facets contains the ReferenceFacet to delete -->
<Annotation Term="UI.Facets">
  <Collection>
    <Record Type="UI.ReferenceFacet">
      <PropertyValue Property="ID" String="MySection"/>
      <PropertyValue Property="Label" String="My Section"/>
      <PropertyValue Property="Target" AnnotationPath="UI.FieldGroup#MySection"/>
    </Record>
    <!-- other facets ... -->
  </Collection>
</Annotation>

<!-- After deletion: the UI.ReferenceFacet record is removed -->
<Annotation Term="UI.Facets">
  <Collection>
    <!-- other facets remain; MySection record removed -->
  </Collection>
</Annotation>

<!-- NOTE: UI.FieldGroup qualifier still exists and must be cleaned up -->
<Annotation Term="UI.FieldGroup" Qualifier="MySection">
  <Record>
    <PropertyValue Property="Data">
      <Collection/>
    </PropertyValue>
  </Record>
</Annotation>

<!-- Cleanup: remove the unreferenced UI.FieldGroup qualifier record entirely -->
<!-- Delete the entire Annotation Term="UI.FieldGroup" Qualifier="MySection" block -->
```

STEP: Change Form Section Label

DESCRIPTION: Update the Label property value in the corresponding UI.ReferenceFacet record. The tool updates the page editor and preview; ID normally remains unchanged unless explicitly regenerated.

LANGUAGE: XML

CODE:
```xml
<!-- Update the Label string -->
<Annotation Term="UI.Facets">
  <Collection>
    <Record Type="UI.ReferenceFacet">
      <PropertyValue Property="ID" String="MySection"/>
      <PropertyValue Property="Label" String="New Section Title"/> <!-- updated -->
      <PropertyValue Property="Target" AnnotationPath="UI.FieldGroup#MySection"/>
    </Record>
  </Collection>
</Annotation>
```

STEP: Display On Demand (Show More / collapsed by default)

DESCRIPTION: When a Form Section is inside a Group Section as a sub-section, toggling Display On Demand adds or removes an embedded UI.PartOfPreview annotation on the UI.ReferenceFacet record with boolean false to collapse it under "Show More" by default. If toggled off or the section moves out of a Group Section, the embedded annotation is removed.

LANGUAGE: XML

CODE:
```xml
<!-- Add UI.PartOfPreview embedded annotation to collapse section under "Show More" -->
<Annotation Term="UI.Facets">
  <Collection>
    <Record Type="UI.ReferenceFacet">
      <PropertyValue Property="ID" String="MySection"/>
      <PropertyValue Property="Label" String="My Section"/>
      <PropertyValue Property="Target" AnnotationPath="UI.FieldGroup#MySection"/>

      <!-- Embedded annotation indicating Display On Demand -->
      <Annotation Term="UI.PartOfPreview">
        <Bool>false</Bool>
      </Annotation>
    </Record>
  </Collection>
</Annotation>

<!-- Remove the <Annotation Term="UI.PartOfPreview"> block to disable Display On Demand -->
```

STEP: Hidden Property (Reference)

DESCRIPTION: The Hidden property for a section is represented by an annotation — update the corresponding annotation entry per your project's Hidden convention. See your project's annotation reference or appendix for exact term and usage.

LANGUAGE: XML

CODE:
```xml
<!-- Example pattern: set the UI.Hidden annotation (check your project appendix for exact term usage) -->
<Annotation Term="UI.Facets">
  <Collection>
    <Record Type="UI.ReferenceFacet">
      <PropertyValue Property="ID" String="MySection"/>
      <PropertyValue Property="Label" String="My Section"/>
      <PropertyValue Property="Target" AnnotationPath="UI.FieldGroup#MySection"/>

      <!-- Example hidden annotation (verify term for your project/stack) -->
      <Annotation Term="UI.Hidden">
        <Bool>true</Bool>
      </Annotation>
    </Record>
  </Collection>
</Annotation>
```


--------------------------------

**TITLE**: Group Section — Add, Edit, Move, and Delete UI.Facets (UI.CollectionFacet) Annotations

**INTRODUCTION**: Practical, code-focused guide to programmatically add, edit, move, and delete Fiori Group Sections (UI.CollectionFacet) and subsections in annotation files. Includes XML and JSON annotation examples and a Node.js script to delete a Group Section from a JSON annotation file. Use these snippets when generating or modifying annotation files for Fiori tools or automation scripts.

**TAGS**: fiori-tools, annotations, UI.Facets, UI.CollectionFacet, GroupSection, ReferenceFacet, UI.ReferenceFacet, XML, JSON, Node.js, i18n

STEP: 1 — Create a Group Section (UI.CollectionFacet) in annotations

DESCRIPTION: Add a new Group Section by inserting a UI.CollectionFacet record into UI.Facets. Example shows the XML annotation fragment and equivalent JSON fragment. The new facet must include a Label and an initially empty Facets collection. Keep IDs unique (use stable string or guid).

LANGUAGE: XML

CODE:
```XML
<!-- Add this fragment under the EntityType or Schema annotations where UI.Facets is defined -->
<Annotation Term="UI.Facets">
  <Collection>
    <!-- existing facets ... -->

    <!-- New Group Section -->
    <Record Type="UI.CollectionFacet">
      <PropertyValue Property="ID" String="GroupSection_MyGroup_001"/>
      <PropertyValue Property="Label" String="My Group Section"/>
      <!-- Facets initially empty; add subsections into this collection later -->
      <PropertyValue Property="Facets">
        <Collection/>
      </PropertyValue>
    </Record>

    <!-- more facets ... -->
  </Collection>
</Annotation>
```

LANGUAGE: JSON

CODE:
```JSON
{
  "Annotations": {
    "MyService.MyEntityType": {
      "UI.Facets": [
        /* existing facets ... */,
        {
          "Record": {
            "Type": "UI.CollectionFacet",
            "ID": "GroupSection_MyGroup_001",
            "Label": { "String": "My Group Section" },
            "Facets": []
          }
        }
        /* more facets ... */
      ]
    }
  }
}
```

STEP: 2 — Add a Subsection (e.g., Form Section) under a Group Section

DESCRIPTION: Insert a subselection into the Group Section's Facets collection. Typical approach: add a UI.ReferenceFacet referencing a Form annotation or another facet. Example shows adding a ReferenceFacet with Label and Target pointing to an annotation path (adjust Target.Path to reference the correct annotation).

LANGUAGE: XML

CODE:
```XML
<!-- Inside the GroupSection's Facets PropertyValue collection -->
<PropertyValue Property="Facets">
  <Collection>
    <!-- Subsection as ReferenceFacet -->
    <Record Type="UI.ReferenceFacet">
      <PropertyValue Property="ID" String="GroupSection_MyGroup_Form_001"/>
      <PropertyValue Property="Label" String="Subsection - Details"/>
      <PropertyValue Property="Target">
        <!-- Target can be an AnnotationPath to a UI.Form or other definition -->
        <Record Type="UI.AnnotationPath">
          <PropertyValue Property="Path" String="@UI.LineItem"/> <!-- example target -->
        </Record>
      </PropertyValue>
    </Record>
    <!-- other subsections ... -->
  </Collection>
</PropertyValue>
```

LANGUAGE: JSON

CODE:
```JSON
{
  "Record": {
    "Type": "UI.CollectionFacet",
    "ID": "GroupSection_MyGroup_001",
    "Label": { "String": "My Group Section" },
    "Facets": [
      {
        "Record": {
          "Type": "UI.ReferenceFacet",
          "ID": "GroupSection_MyGroup_Form_001",
          "Label": { "String": "Subsection - Details" },
          "Target": {
            "Record": {
              "Type": "UI.AnnotationPath",
              "Path": "@UI.LineItem"  /* replace with your annotation path or @UI.Form/... */
            }
          }
        }
      }
    ]
  }
}
```

STEP: 3 — Change Section Label (including i18n-ready label)

DESCRIPTION: Edit the Label property for a UI.CollectionFacet or UI.ReferenceFacet. For translation, use an i18n key placeholder in your project convention (example uses a string token that your i18n pipeline replaces). Update annotation files accordingly.

LANGUAGE: XML

CODE:
```XML
<!-- Update Label inline string -->
<PropertyValue Property="Label" String="New Group Label"/>

<!-- OR use a convention for i18n keys if supported by your build: -->
<PropertyValue Property="Label" String="{i18n>GROUP_SECTION_MYGROUP}"/>
```

LANGUAGE: JSON

CODE:
```JSON
/* Update label in JSON annotations */
"Label": { "String": "New Group Label" }

/* OR i18n token convention (depends on toolchain) */
"Label": { "String": "{i18n>GROUP_SECTION_MYGROUP}" }
```

STEP: 4 — Move Sections (reorder UI.Facets entries)

DESCRIPTION: Reorder facets by changing their order inside the UI.Facets collection. Programmatic code generation should preserve desired order by writing facets in the target sequence. Example shows reordering by moving a Record element to a new index.

LANGUAGE: XML

CODE:
```XML
<!-- Reorder: move the GroupSection_MyGroup_001 Record earlier or later inside the UI.Facets Collection -->
<Collection>
  <!-- desired new order of Record elements -->
  <Record Type="UI.CollectionFacet" ... ID="AnotherFacet" .../>
  <Record Type="UI.CollectionFacet" ... ID="GroupSection_MyGroup_001" .../>
  <Record Type="UI.CollectionFacet" ... ID="SomeOtherFacet" .../>
</Collection>
```

LANGUAGE: JSON

CODE:
```JSON
/* Reorder by changing the array order under UI.Facets */
"UI.Facets": [
  { "Record": { "Type": "UI.CollectionFacet", "ID": "AnotherFacet", ... } },
  { "Record": { "Type": "UI.CollectionFacet", "ID": "GroupSection_MyGroup_001", ... } },
  { "Record": { "Type": "UI.CollectionFacet", "ID": "SomeOtherFacet", ... } }
]
```

STEP: 5 — Delete Group Section and cleanup unreferenced annotations (safe removal)

DESCRIPTION: Remove the UI.CollectionFacet record from UI.Facets. After deletion, run a cleanup to remove unreferenced annotation fragments. Example Node.js script removes a CollectionFacet by ID from a JSON annotation file and writes the result back. Use this when automating deletion in toolchains that store annotations as JSON.

LANGUAGE: JavaScript (Node.js)

CODE:
```JavaScript
// removeGroupFacet.js
// Usage: node removeGroupFacet.js <annotations.json> <GroupFacetID>
const fs = require("fs");
const path = require("path");

if (process.argv.length < 4) {
  console.error("Usage: node removeGroupFacet.js <annotations.json> <GroupFacetID>");
  process.exit(1);
}

const filePath = path.resolve(process.argv[2]);
const facetId = process.argv[3];

const data = JSON.parse(fs.readFileSync(filePath, "utf8"));

/* Adjust this path to the location of UI.Facets in your JSON structure:
   Example structure: data.Annotations["MyService.MyEntityType"]["UI.Facets"]
*/
const annotationsRoot = data.Annotations;
for (const entityKey of Object.keys(annotationsRoot || {})) {
  const entity = annotationsRoot[entityKey];
  const facets = entity["UI.Facets"];
  if (!Array.isArray(facets)) continue;

  const filtered = facets.filter(item => {
    const rec = item.Record || item;
    const id = rec && rec.ID;
    return id !== facetId;
  });

  if (filtered.length !== facets.length) {
    entity["UI.Facets"] = filtered;
    console.log(`Removed facet '${facetId}' from ${entityKey}`);
    fs.writeFileSync(filePath, JSON.stringify(data, null, 2), "utf8");
    process.exit(0);
  }
}

console.warn(`Facet '${facetId}' not found in any UI.Facets collection.`);
process.exit(2);
```

STEP: 6 — Notes & file references

DESCRIPTION: Quick references and notes preserved from UI documentation.

LANGUAGE: Text

CODE:
```text
- CSS icon file referenced in docs: ../css/sap-icons.css
- Internally: Group Section => UI.CollectionFacet record in UI.Facets.
- Deleting a group section removes the UI.CollectionFacet record and its content.
- After deletion, run a cleanup procedure to remove unreferenced annotation fragments.
- For moving sections, use drag-and-drop in editor or reorder records programmatically in the UI.Facets collection.
- For subsections: use UI.ReferenceFacet (or appropriate facet type) inside the CollectionFacet.Facets collection.
- See UI5 docs for Defining and Adapting Sections: https://ui5.sap.com/#/topic/facfea09018d4376acaceddb7e3f03b6
```

--------------------------------

**TITLE**: Object Page Header — Annotation examples and tasks (UI.HeaderInfo, header sections, actions, micro charts, sorting, manifest)

**INTRODUCTION**: Quick actionable examples and code snippets to programmatically configure an SAP Fiori Elements Object Page header. Includes creating UI.HeaderInfo properties (TypeName, Title, Image, Initials, Icon), header actions (annotation-based), adding/removing/reordering header sections (UI.Facets / ReferenceFacet), micro chart PresentationVariant with SortOrder, and required manifest.json minUI5Version. Use these snippets in annotation files (.xml/.json) or in the annotation sections of your application.

**TAGS**: fiori-tools, annotations, UI.HeaderInfo, UI.Facets, UI.Identification, UI.PresentationVariant, micro-chart, manifest.json, sapui5

STEP: 1 — Define Header properties (UI.HeaderInfo)

DESCRIPTION: Create or update the UI.HeaderInfo annotation to set TypeName, TypeNamePlural, Title (entity property path), Description, ImageUrl (Image), Initials, and TypeImageUrl (SAP icon URL). Use the OData annotation XML or JSON example below and add it to your annotation file.

LANGUAGE: XML

CODE:
```xml
<!-- annotations.xml -->
<Annotations Target="MyService.MyEntityType" xmlns="http://docs.oasis-open.org/odata/ns/edm">
  <Annotation Term="com.sap.vocabularies.UI.v1.HeaderInfo">
    <Record>
      <PropertyValue Property="TypeName"><String>Product</String></PropertyValue>
      <PropertyValue Property="TypeNamePlural"><String>Products</String></PropertyValue>
      <PropertyValue Property="Title"><Path>Name</Path></PropertyValue>
      <PropertyValue Property="Description"><Path>Description</Path></PropertyValue>
      <PropertyValue Property="ImageUrl"><Path>ImageUrl</Path></PropertyValue>
      <PropertyValue Property="Initials"><Path>OwnerInitials</Path></PropertyValue>
      <PropertyValue Property="TypeImageUrl"><String>sap-icon://accept</String></PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

LANGUAGE: JSON

CODE:
```json
{
  "annotations": {
    "MyService.MyEntityType": {
      "com.sap.vocabularies.UI.v1.HeaderInfo": {
        "TypeName": { "String": "Product" },
        "TypeNamePlural": { "String": "Products" },
        "Title": { "Path": "Name" },
        "Description": { "Path": "Description" },
        "ImageUrl": { "Path": "ImageUrl" },
        "Initials": { "Path": "OwnerInitials" },
        "TypeImageUrl": { "String": "sap-icon://accept" }
      }
    }
  }
}
```

STEP: 2 — Hide standard actions and apply Update/Delete hidden annotations

DESCRIPTION: When hiding standard header actions (Edit/Delete) you must apply the corresponding UI.UpdateHidden or UI.DeleteHidden annotation to the entity set. Below is an OData XML example that marks update and delete as hidden.

LANGUAGE: XML

CODE:
```xml
<!-- annotations.xml: apply on the EntitySet -->
<Annotations Target="MyService.MyEntitySet">
  <Annotation Term="com.sap.vocabularies.UI.v1.UpdateHidden"><Bool>true</Bool></Annotation>
  <Annotation Term="com.sap.vocabularies.UI.v1.DeleteHidden"><Bool>true</Bool></Annotation>
</Annotations>
```

STEP: 3 — Define annotation-based header actions (UI.Identification / DataFieldForAction)

DESCRIPTION: Add DataFieldForAction and DataFieldForIntentBasedNavigation records to the UI.Identification annotation on the main entity to render header buttons. Use Determining=false for in-app actions and DataFieldForIntentBasedNavigation for external navigation. Example XML shows both kinds.

LANGUAGE: XML

CODE:
```xml
<!-- annotations.xml -->
<Annotations Target="MyService.MyEntityType">
  <Annotation Term="com.sap.vocabularies.UI.v1.Identification">
    <Collection>
      <!-- Application action -->
      <Record Type="com.sap.vocabularies.UI.v1.DataFieldForAction">
        <PropertyValue Property="Action"><String>MyService_Approve</String></PropertyValue>
        <PropertyValue Property="Label"><String>Approve</String></PropertyValue>
        <PropertyValue Property="Determining"><Bool>false</Bool></PropertyValue>
      </Record>

      <!-- Intent-based navigation -->
      <Record Type="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation">
        <PropertyValue Property="SemanticObject"><String>PurchaseOrder</String></PropertyValue>
        <PropertyValue Property="Action"><String>displayFactSheet</String></PropertyValue>
        <PropertyValue Property="Label"><String>Open Fact Sheet</String></PropertyValue>
      </Record>
    </Collection>
  </Annotation>
</Annotations>
```

STEP: 4 — Add a header section (ReferenceFacet in UI.Facets) and micro chart facet

DESCRIPTION: Add a ReferenceFacet (points to FieldGroup or PresentationVariant) into the UI.Facets collection to create header sections. For micro charts that need sorting define a UI.PresentationVariant referenced by the facet (see next step for PresentationVariant SortOrder). Example: a ReferenceFacet pointing to a FieldGroup and a micro chart facet.

LANGUAGE: JSON

CODE:
```json
{
  "annotations": {
    "MyService.MyEntityType": {
      "com.sap.vocabularies.UI.v1.Facets": [
        {
          "Record": {
            "Type": { "String": "com.sap.vocabularies.UI.v1.ReferenceFacet" },
            "Label": { "String": "Overview" },
            "Target": { "AnnotationPath": "@com.sap.vocabularies.UI.v1.FieldGroup#ProductHeader" }
          }
        },
        {
          "Record": {
            "Type": { "String": "com.sap.vocabularies.UI.v1.ReferenceFacet" },
            "Label": { "String": "Sales Sparkline" },
            "Target": { "AnnotationPath": "@com.sap.vocabularies.UI.v1.PresentationVariant#SalesTrendPV" }
          }
        }
      ]
    },

    "MyService.MyEntityType#SalesTrendPV": {
      "com.sap.vocabularies.UI.v1.PresentationVariant": {
        "Visualizations": [
          {
            "AnnotationPath": "@com.sap.vocabularies.UI.v1.Chart#SalesSparkline"
          }
        ]
      }
    }
  }
}
```

STEP: 5 — PresentationVariant: sort micro chart data (SortOrder)

DESCRIPTION: Define a UI.PresentationVariant with a SortOrder collection (Property + Direction) and reference that PV from your micro chart facet. Only available if manifest.json "minUI5Version" is >= 1.130.0. Example shows SortOrder by CreatedAt desc then Amount asc.

LANGUAGE: XML

CODE:
```xml
<!-- annotations.xml -->
<Annotations Target="MyService.MyEntityType#SalesTrendPV">
  <Annotation Term="com.sap.vocabularies.UI.v1.PresentationVariant">
    <Record>
      <PropertyValue Property="SortOrder">
        <Collection>
          <Record>
            <PropertyValue Property="Property" Path="CreatedAt"/>
            <PropertyValue Property="Descending"><Bool>true</Bool></PropertyValue>
          </Record>
          <Record>
            <PropertyValue Property="Property" Path="Amount"/>
            <PropertyValue Property="Descending"><Bool>false</Bool></PropertyValue>
          </Record>
        </Collection>
      </PropertyValue>
      <PropertyValue Property="Visualizations">
        <Collection>
          <!-- reference the micro chart (annotation or visualization) -->
          <AnnotationPath>@com.sap.vocabularies.UI.v1.Chart#SalesSparkline</AnnotationPath>
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

STEP: 6 — Enable required UI5 version in manifest.json

DESCRIPTION: Set minUI5Version (manifest.json) to at least 1.130.0 to enable PresentationVariant SortOrder functionality for micro charts.

LANGUAGE: JSON

CODE:
```json
{
  "sap.ui5": {
    "dependencies": {
      "minUI5Version": "1.130.0"
    }
  }
}
```

STEP: 7 — Reorder header sections (UI.Facets order) and delete a header section

DESCRIPTION: The display order in the object page header follows the sequence of records in the UI.Facets collection. To move sections, reorder the array elements. To delete a header section remove the corresponding ReferenceFacet record from UI.Facets. After removal, run annotation cleanup to remove unreferenced UI.FieldGroup or UI.PresentationVariant annotations.

LANGUAGE: JSON

CODE:
```json
{
  "annotations": {
    "MyService.MyEntityType": {
      "com.sap.vocabularies.UI.v1.Facets": [
        /* New order: Sales Sparkline moved before Overview */
        {
          "Record": {
            "Type": { "String": "com.sap.vocabularies.UI.v1.ReferenceFacet" },
            "Label": { "String": "Sales Sparkline" },
            "Target": { "AnnotationPath": "@com.sap.vocabularies.UI.v1.PresentationVariant#SalesTrendPV" }
          }
        },
        {
          "Record": {
            "Type": { "String": "com.sap.vocabularies.UI.v1.ReferenceFacet" },
            "Label": { "String": "Overview" },
            "Target": { "AnnotationPath": "@com.sap.vocabularies.UI.v1.FieldGroup#ProductHeader" }
          }
        }
      ]
    }
  }
}
```

STEP: 8 — Static resources and icon stylesheet links (optional)

DESCRIPTION: Include the standard SAP icon stylesheet or image assets in your project pages if you reference local CSS or images. Example link tag and image example paths used in docs.

LANGUAGE: HTML

CODE:
```html
<!-- include SAP icons stylesheet in an HTML template or dev page -->
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>

<!-- example image asset path used by ImageUrl properties -->
<!-- images/Fiori_tools_Object_Page_Header_Section_329d536.png -->
<img src="images/Fiori_tools_Object_Page_Header_Section_329d536.png" alt="Object Page Header Section">
```

Step: 9 — Notes and cleanup commands (procedural)

DESCRIPTION: Action reminders for implementers:
- If UI.HeaderInfo is absent and you set a header property, create the UI.HeaderInfo record locally (annotation file).
- Values defined in a lower layer (service/base) may show "(base layer)" in the editor; to override, set the property locally — the full annotation is copied to the local annotation file.
- After deleting facets or PVs that are no longer referenced, run your project annotation cleanup task (Fiori Tools annotation cleanup) to remove unreferenced UI.FieldGroup and UI.PresentationVariant annotations. No code required here — run your IDE/project cleanup command.

LANGUAGE: JSON

CODE:
```json
{
  "notes": [
    "Create UI.HeaderInfo locally when adding any header property",
    "Override base-layer values by adding local annotation",
    "Run Fiori Tools annotation cleanup to remove unreferenced annotations"
  ]
}
```
--------------------------------

**TITLE**: Identification Section — Add, Move, Delete, and Maintain (Fiori Tools)

**INTRODUCTION**: This document provides concise, code-focused instructions and annotated examples for managing an Identification Section in SAP Fiori pages (Object/Form Entry Page) using annotation files. It covers the UI actions (Add / Move / Delete / Edit label) and the exact annotation changes produced or required in your annotations.xml and i18n files. Use these snippets when generating or editing code via tooling or scripts.

**TAGS**: fiori-tools, identification, UI.Identification, UI.Facets, annotations, i18n, ReferenceFacet

STEP: Add Identification Section (UI steps + annotation example)

DESCRIPTION: Use the Page Editor to add an Identification Section. If UI.Identification does not exist for the page entity, the tool generates a UI.Identification annotation (no qualifier) and adds a UI.ReferenceFacet record to UI.Facets. If UI.Identification already exists it will only add a reference in UI.Facets.

LANGUAGE: text

CODE:
```text
UI steps:
1. Open the Object/Form Entry Page in the Page Editor.
2. In the outline, select the section node and click the Add (+) icon.
3. Choose "Add Identification Section".
4. In the "Add Identification Section" popup, enter a Label and click Add.

Result: A UI.ReferenceFacet entry is added to the UI.Facets collection and a UI.Identification annotation is created (if missing).
```

LANGUAGE: XML

CODE:
```xml
<!-- annotations.xml: Example added when creating an Identification section (entity: MyService.Customer) -->
<Annotations Target="MyService.Customer">
  <!-- UI.Facets collection: a ReferenceFacet pointing to the identification annotation -->
  <Annotation Term="UI.Facets">
    <Collection>
      <Record Type="UI.ReferenceFacet">
        <PropertyValue Property="Label" String="Identification" />
        <!-- Target references the UI.Identification annotation (no qualifier) -->
        <PropertyValue Property="Target">
          <AnnotationPath>UI.Identification</AnnotationPath>
        </PropertyValue>
      </Record>
      <!-- other facets... -->
    </Collection>
  </Annotation>

  <!-- Generated UI.Identification annotation (only created if it did not exist already) -->
  <Annotation Term="UI.Identification">
    <Record Type="UI.IdentificationType">
      <PropertyValue Property="Title" String="Business Partner" />
      <PropertyValue Property="Fields">
        <Collection>
          <PropertyPath>BPID</PropertyPath>
          <PropertyPath>CompanyName</PropertyPath>
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

STEP: Prepare Section Label for Translation (i18n)

DESCRIPTION: Use i18n key in the annotation Label/Title so the section label is translatable. Update annotations.xml to reference i18n keys and maintain i18n.properties.

LANGUAGE: XML

CODE:
```xml
<!-- annotations.xml: Reference an i18n key for the section title -->
<Annotation Term="UI.Identification">
  <Record Type="UI.IdentificationType">
    <PropertyValue Property="Title" String="{i18n>identSectionTitle}" />
    <PropertyValue Property="Fields">
      <Collection>
        <PropertyPath>BPID</PropertyPath>
        <PropertyPath>CompanyName</PropertyPath>
      </Collection>
    </PropertyValue>
  </Record>
</Annotation>
```

LANGUAGE: properties

CODE:
```properties
# i18n.properties (application/i18n/i18n.properties)
identSectionTitle=Identification
```

STEP: Move Identification Section (reorder facets)

DESCRIPTION: The display order of sections in the rendered Fiori app is determined by the sequence of records in UI.Facets. Drag-and-drop in the Page Editor reorders the collection. To reorder programmatically, change the order of the ReferenceFacet records inside UI.Facets.

LANGUAGE: text

CODE:
```text
UI steps to move:
1. In the Page Editor outline, drag the required section to the desired position.
2. To move multiple sections: Ctrl+Click to multi-select, then drag to new position.

Result: The UI.Facets collection record order is updated. The app renders sections in the same sequence.
```

LANGUAGE: XML

CODE:
```xml
<!-- annotations.xml BEFORE moving: Identification is first -->
<Annotation Term="UI.Facets">
  <Collection>
    <Record Type="UI.ReferenceFacet">
      <PropertyValue Property="Label" String="Identification" />
      <PropertyValue Property="Target">
        <AnnotationPath>UI.Identification</AnnotationPath>
      </PropertyValue>
    </Record>
    <Record Type="UI.ReferenceFacet">
      <PropertyValue Property="Label" String="Contact" />
      <PropertyValue Property="Target">
        <AnnotationPath>UI.Contact</AnnotationPath>
      </PropertyValue>
    </Record>
  </Collection>
</Annotation>

<!-- annotations.xml AFTER moving Identification below Contact: order changed -->
<Annotation Term="UI.Facets">
  <Collection>
    <Record Type="UI.ReferenceFacet">
      <PropertyValue Property="Label" String="Contact" />
      <PropertyValue Property="Target">
        <AnnotationPath>UI.Contact</AnnotationPath>
      </PropertyValue>
    </Record>
    <Record Type="UI.ReferenceFacet">
      <PropertyValue Property="Label" String="Identification" />
      <PropertyValue Property="Target">
        <AnnotationPath>UI.Identification</AnnotationPath>
      </PropertyValue>
    </Record>
  </Collection>
</Annotation>
```

STEP: Delete Identification Section (UI steps + annotation removal)

DESCRIPTION: Deleting the section from the Page Editor removes the corresponding UI.ReferenceFacet record from the UI.Facets collection. If the UI.Identification annotation is not referenced by other facets it remains (tooling may or may not remove it automatically depending on settings). To delete by code, remove the ReferenceFacet element from UI.Facets.

LANGUAGE: text

CODE:
```text
UI steps:
1. In the Page Editor outline, select the Identification section.
2. Click the Delete (trash) icon.
3. Confirm in the Delete Confirmation popup.

Effect: The UI.ReferenceFacet record referencing UI.Identification is removed from UI.Facets.
```

LANGUAGE: XML

CODE:
```xml
<!-- annotations.xml BEFORE deletion: Identification facet exists -->
<Annotation Term="UI.Facets">
  <Collection>
    <Record Type="UI.ReferenceFacet"> ... (Identification) ... </Record>
    <Record Type="UI.ReferenceFacet"> ... (Contact) ... </Record>
  </Collection>
</Annotation>

<!-- annotations.xml AFTER deletion: Identification ReferenceFacet removed -->
<Annotation Term="UI.Facets">
  <Collection>
    <Record Type="UI.ReferenceFacet"> ... (Contact) ... </Record>
  </Collection>
</Annotation>
```

STEP: Maintain Identification Section Properties — Change Label

DESCRIPTION: To update the visible Label of the section, edit the Label property of the UI.ReferenceFacet in UI.Facets or change the Title in UI.Identification. Update to use an i18n key if the label should be translated.

LANGUAGE: XML

CODE:
```xml
<!-- Change the Label directly on the ReferenceFacet (visible in Page Editor and app) -->
<Annotation Term="UI.Facets">
  <Collection>
    <Record Type="UI.ReferenceFacet">
      <PropertyValue Property="Label" String="New Identification Label" />
      <PropertyValue Property="Target">
        <AnnotationPath>UI.Identification</AnnotationPath>
      </PropertyValue>
    </Record>
  </Collection>
</Annotation>

<!-- Or set an i18n key in the Identification Title -->
<Annotation Term="UI.Identification">
  <Record Type="UI.IdentificationType">
    <PropertyValue Property="Title" String="{i18n>newIdentLabelKey}" />
    ...
  </Record>
</Annotation>
```

STEP: Include Icons / CSS for Preview (optional)

DESCRIPTION: The Page Editor preview may include the sap-icons stylesheet. Ensure the relative path matches your project structure.

LANGUAGE: HTML

CODE:
```html
<!-- Example include used in previews -->
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```

STEP: References for Display on Demand / Hidden

DESCRIPTION: Display on Demand and Hidden behaviors are controlled by other UI annotations (refer to the relevant docs). Use UI.Hidden on properties to hide fields. For Display on Demand related settings consult "Display on Demand" documentation and apply the appropriate facet/property-level annotations.

LANGUAGE: text

CODE:
```text
- For property hide: add UI.Hidden annotation on the property in annotations.xml (or property annotations in CDS).
- For Display on Demand: follow the "Display on Demand" section in the Fiori tools docs; apply the display-specific annotations to the facet or properties.
(Links: see project documentation / appendix for exact annotation patterns.)
```
--------------------------------

**TITLE**: Internationalization (i18n) — configuring and generating translation keys for Fiori projects

**INTRODUCTION**: Practical reference for configuring i18n resource bundles and using the Fiori Tools UI actions to generate or link translation keys for UI text. Includes exact file locations, JSON snippets, example i18n property entries, and the three behaviors of the inline i18n action (generate, add missing key, reuse existing key). Use these code examples when writing tooling or automation that interacts with i18n files or when generating annotation/view changes programmatically.

**TAGS**: i18n, internationalization, fiori-tools, UI5, CAP, manifest.json, .cdsrc.json, package.json, properties

STEP: Configure resource bundle locations

DESCRIPTION: For non-CAP projects, the UI5 resource bundle is declared in webapp/manifest.json. For CAP projects the tool reads .cdsrc.json or package.json for configured i18n folders. Default CAP folder names: ['_i18n','i18n','assets/i18n'].

LANGUAGE: JSON

CODE:
```json
// Non-CAP: webapp/manifest.json snippet
{
  "sap.app": {
    "id": "my.app",
    "i18n": "i18n/i18n.properties"
  }
}
```

LANGUAGE: JSON

CODE:
```json
// CAP: .cdsrc.json or package.json (automation/configuration uses this array of possible folders)
// Default value recognized by the tool
{
  "fiori-tools": {
    "i18n": ["_i18n", "i18n", "assets/i18n"]
  }
}
```

STEP: Static HTML/CSS reference (preserve example resource)

DESCRIPTION: Example of including SAP icon font CSS in a static page. Preserve path and usage when generating HTML scaffolding.

LANGUAGE: HTML

CODE:
```html
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```

STEP: Enable translation for a page (globe icon)

DESCRIPTION: In the Fiori Tools Page Editor, enable translation for the page (mass or single) by clicking the globe icon. Confirm the action in the confirmation dialog using Apply. The editor will update references to use i18n keys or create/merge keys in the resource bundle file (i18n properties).

LANGUAGE: Plaintext

CODE:
```
// User flow
1. Click the 🌐 (Internationalization) icon (page-level or top-of-screen).
2. When the confirmation dialog appears, click "Apply".
3. Changes will be written to the i18n resource bundle file(s) in the configured folder.
```

STEP: Inline i18n action — behavior when label is not yet internationalized

DESCRIPTION: When a label is plain text (not an i18n reference), the inline i18n icon prompts to generate a new key and replace the label with an i18n reference. The generated replacement uses binding syntax {i18n>key}. For non-CAP projects the generated key uses camelCase; for CAP projects PascalCase.

LANGUAGE: Plaintext

CODE:
```
// Dialog shown
Generate a text key <uniquekey> in the i18n file and substitute <actual text> by {i18n>uniquekey}.

// Example transformation (XML view or annotation reference)
// Before: plain text label in view/annotation
<label text="My sample label" />

// After: replaced with i18n reference
<label text="{i18n>mySampleLabel}" />

// New i18n file entry (i18n/i18n.properties)
mySampleLabel=My sample label
```

STEP: Inline i18n action — behavior when label is a reference but key missing in i18n file

DESCRIPTION: When the page contains a reference to an i18n key but the key is not present in the resource bundle(s), the action adds the missing key to the i18n file with the key as the default value.

LANGUAGE: Plaintext

CODE:
```
// Dialog shown
Generate a text key <uniqueKey> with value <uniqueKey> in i18n file.

// Example scenario
// View/annotation contains reference but key is missing:
<label text="{i18n>MissingKey}" />

// After Apply: i18n/i18n.properties will contain
MissingKey=MissingKey
```

STEP: Inline i18n action — behavior when plain text already exists as a value in i18n file

DESCRIPTION: If the plain text value already exists in the i18n file as some key, the action offers to replace the plain text with the existing key reference to avoid duplicates.

LANGUAGE: Plaintext

CODE:
```
// Dialog shown
Text key <uniqueKey> for value <sample text> is available in i18n file. Substitute <sample text> by {@i18n>uniqueKey}.

// Example transformation:
// i18n/i18n.properties already contains:
ExistingKey=Sample text

// Before in view:
<label text="Sample text" />

// After Apply:
<label text="{i18n>ExistingKey}" />
```

STEP: Annotation case — labels defined in lower layers via @title or @Common.Label

DESCRIPTION: If a Field/Column label originates from lower-layer annotations such as @title or @Common.Label, the editor creates a UI.DataField record in the application layer that references the i18n text. The original low-layer annotations are not modified.

LANGUAGE: CDS / Annotation (JSON-like example)

CODE:
```
// Example: lower-layer annotation left unchanged
// Lower layer (CDS) contains:
@Common.Label: 'Customer Name'
entity Customer {
  key ID : UUID;
  Name : String;
}

// After inline i18n action in the application layer, the UI.DataField record will reference the i18n key:
// Application layer annotations (JSON-style view)
"UI": {
  "DataField": [
    {
      "Value": "{path: 'Name'}",
      "Label": "{i18n>customerName}"
    }
  ]
}

// And i18n/i18n.properties contains:
customerName=Customer Name
```

STEP: UI.FieldGroup / UI.Facet in lower layer

DESCRIPTION: If UI.FieldGroup or UI.Facet annotations are defined in the lower layer, the editor will first copy them into the application layer before adding i18n references so changes do not modify the lower layer directly.

LANGUAGE: Plaintext

CODE:
```
// Behavior: copy lower-layer UI.FieldGroup / UI.Facet into application layer, then create i18n references on that copied annotation.
```

STEP: Key naming conventions and best practices

DESCRIPTION: Key naming: non-CAP projects => camelCase; CAP projects => PascalCase. To avoid redundant/untranslated keys, prefer performing mass i18n generation or finalize labels near the end of development. The inline i18n action will create a new entry each time a text changes, which may create unused keys.

LANGUAGE: Plaintext

CODE:
```
// Naming guidance (used by tooling)
Non-CAP generated key example: myFieldLabel
CAP generated key example: MyFieldLabel

// Best practice:
1. Use inline i18n to create keys while designing UI, but prefer a final pass (mass generation) before sending files for translation.
2. Remove unused keys from i18n properties to reduce translation effort.
```

STEP: Mass i18n creation (top-of-screen globe icon)

DESCRIPTION: The editor provides a top-level "mass i18n generation" icon to bulk-generate i18n keys for multiple UI texts on the page. Use this when you have many plain-text labels on a page to prepare them for translation in one operation.

LANGUAGE: Plaintext

CODE:
```
// User flow for mass generation
1. Click the top-of-screen 🌐 (mass i18n generation) icon.
2. Tool analyzes page UI texts and suggests/creates i18n keys for all relevant texts.
3. Confirm (Apply) to write all entries to the i18n resource bundle(s).
```

STEP: Example i18n properties file format

DESCRIPTION: Typical key=value entries for i18n resource bundles. Preserve this format when writing files programmatically.

LANGUAGE: Properties

CODE:
```properties
// i18n/i18n.properties
mySampleLabel=My sample label
ExistingKey=Sample text
MissingKey=MissingKey
customerName=Customer Name
```
--------------------------------

**TITLE**: Internationalization (i18n) Support for XML Annotation Files

**INTRODUCTION**: This doc explains how the XML Annotation Language Server (Annotation LSP) validates, suggests, and generates i18n entries for language-dependent strings in annotation XML files. Use it to (a) detect language-dependent values, (b) reuse existing i18n keys via Code Completion, (c) generate new i18n keys via Quick Fix, and (d) jump from annotation references to the i18n.properties entries for editing.

**TAGS**: fiori-tools, i18n, internationalization, annotations, XML, sapui5, manifest.json, i18n.properties, language-server, quick-fix

STEP: 1 — Understand which annotation properties are language-dependent

DESCRIPTION: Annotation LSP treats a string value as language-dependent if the annotation vocabulary marks that property with IsLanguageDependent. For example, UI.Label is marked as language dependent in the UI vocabulary; ID is not. Only properties tagged with IsLanguageDependent are checked against your i18n resource bundle.

LANGUAGE: JSON / Notes

CODE:
```json
// Vocabulary rule (conceptual): properties marked with IsLanguageDependent are internationalized.
// Example: com.sap.vocabularies.UI.v1.Label  <-- IsLanguageDependent = true
// Example: com.sap.vocabularies.Common.v1.ID  <-- IsLanguageDependent = false
```

STEP: 2 — Confirm project i18n model (manifest.json)

DESCRIPTION: Annotation LSP uses the resource bundle referenced by the i18n model in your project manifest.json. If the model or referenced file is missing, the LSP shows a warning. Ensure manifest.json contains an i18n model (commonly named "i18n").

LANGUAGE: JSON

CODE:
```json
// manifest.json (relevant snippet)
{
  "sap.ui5": {
    "models": {
      "i18n": {
        "type": "sap.ui.model.resource.ResourceModel",
        "settings": {
          "bundleName": "my.app.i18n.i18n" // bundleName maps to webapp/i18n/i18n.properties
        }
      }
    }
  }
}
```

STEP: 3 — Location and sample of i18n.properties

DESCRIPTION: The bundle file referenced above is typically at webapp/i18n/i18n.properties. The LSP reads keys/values from this file for completion and validation.

LANGUAGE: Properties

CODE:
```properties
# webapp/i18n/i18n.properties
MY_LABEL=Customer
MY_LABEL_COMMENT=Label for the Customer field
```

STEP: 4 — Example annotation XML before i18n conversion

DESCRIPTION: A language-dependent property (Label) with a literal string is flagged by the Annotation LSP if it has no valid i18n reference.

LANGUAGE: XML

CODE:
```xml
<!-- annotations.xml (before) -->
<Annotation Term="com.sap.vocabularies.UI.v1.Field">
  <Record>
    <PropertyValue Property="Label">
      <String>Customer</String>
    </PropertyValue>
    <PropertyValue Property="ID">
      <String>CUST_01</String> <!-- Not language-dependent; not validated for i18n -->
    </PropertyValue>
  </Record>
</Annotation>
```

STEP: 5 — Reuse existing i18n keys with Code Completion

DESCRIPTION: Inside the String value of a language-dependent property, trigger Code Completion to show existing keys and their values from i18n.properties. Choose an item to insert an i18n reference. Typical triggers:
- VS Code / Windows: Ctrl + Space
- macOS: Cmd + Space

LANGUAGE: Instructions

CODE:
```text
1. Place cursor inside <String>...</String> value of a language-dependent property.
2. Trigger completion:
   - Windows: Ctrl + Space
   - macOS: Cmd + Space
3. Select an entry; the LSP inserts the project's i18n reference for that key.
```

STEP: 6 — Create new i18n keys via Quick Fix

DESCRIPTION: If the string value does not match an existing i18n key, Annotation LSP shows a warning with a Quick Fix (light bulb). Use Quick Fix to generate a new key in i18n.properties and replace the literal with the i18n reference. Quick Fix can be invoked via the light bulb UI or keyboard shortcuts.

LANGUAGE: Instructions

CODE:
```text
1. Enter a literal string in a language-dependent property (e.g., "New Label").
2. Annotation LSP detects missing i18n key and shows a warning with a light bulb.
3. Apply Quick Fix:
   - Click the light bulb and choose "Add i18n key" (or similar).
   - Or use keyboard:
     - VS Code (Windows): Ctrl + .
     - VS Code (macOS): Cmd + .
4. Result:
   - i18n.properties: a new key is added with the string as value and default attributes/comments.
   - Annotation file: the literal string is replaced with the i18n reference supported by your project model.
```

STEP: 7 — Typical before/after after Quick Fix (conceptual examples)

DESCRIPTION: After Quick Fix, the literal string is replaced by a reference to the i18n key. Annotation LSP uses your project’s i18n reference syntax (project-dependent). Examples below show conceptual forms you may see—actual syntax depends on your annotation format / binding conventions.

LANGUAGE: XML / Properties / Notes

CODE:
```xml
<!-- annotations.xml (after Quick Fix; conceptual) -->
<PropertyValue Property="Label">
  <!-- Some projects use @i18n>KEY, others use {i18n>KEY} binding; Annotation LSP will use the project's expected syntax -->
  <String>@i18n>MY_LABEL</String>
</PropertyValue>
```

```properties
# webapp/i18n/i18n.properties (new entry added)
MY_LABEL=New Label
```

STEP: 8 — Highlighting and fixing missing references in bulk

DESCRIPTION: Open your annotation XML file. The LSP flags missing references with warnings. Use Quick Fix on each warning to either link to an existing key or create a new key. This fixes all language-dependent strings that lack i18n references.

LANGUAGE: Instructions

CODE:
```text
1. Open annotation file(s).
2. Look for warning decorations (squiggles / light bulb).
3. Use Quick Fix per warning to:
   - Reference existing i18n key, or
   - Create a new i18n key and replace the literal.
```

STEP: 9 — Jump from annotation reference to i18n entry (Go To / Peek Definition)

DESCRIPTION: To view or edit the i18n entry referenced from an annotation, use Go To Definition or Peek Definition. This opens or previews the i18n.properties file and the key/value/attributes.

LANGUAGE: Instructions

CODE:
```text
Go To Definition:
- Place cursor on the i18n reference path in the annotation.
- VS Code: press F12 (Windows) or use Ctrl+Click (Windows) / Cmd+Click (macOS).
- SAP Business Application Studio: press Ctrl + F11.

Peek Definition:
- Place cursor on the i18n reference path.
- VS Code (Windows): Alt + F12
- macOS: Option + F12
- Or right-click and choose "Peek Definition"
```

STEP: 10 — Troubleshooting & notes

DESCRIPTION: Key points to avoid issues and ensure correct LSP behavior.

LANGUAGE: Notes

CODE:
```text
- Ensure manifest.json contains the i18n model referenced by the Annotation LSP (commonly model name "i18n").
- The Annotation LSP validates only properties marked IsLanguageDependent in the vocabulary.
- If the i18n model or file is missing, the LSP will show warnings indicating the missing model/file.
- The exact i18n reference syntax inserted by the LSP depends on your project's binding/annotation conventions; validate and adjust if necessary.
```
--------------------------------

**TITLE**: List Report Page (Fiori Elements) — Implementation Guide

**INTRODUCTION**: This document explains how to implement a Fiori Elements List Report page. It shows required manifest configuration and common OData/CDS annotation patterns for filter fields, report table (line items), multiple views, and an analytical chart. Use these examples as copy-paste-ready templates and adapt entity/set names, property names, and qualifier names to your project.

**TAGS**: fiori-tools, fiori-elements, list-report, annotations, manifest, CDS, OData, filter-fields, table, analytical-chart, multiple-views

**STEP**: 1 — Add List Report page entry to manifest.json

**DESCRIPTION**: Register a List Report target in your app manifest so the Fiori Elements runtime loads the List Report template for a specific entitySet. Put the manifest at webapp/manifest.json.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "SalesOrders",                 // <-- OData entitySet name
        "component": {
          "name": "sap.suite.ui.generic.template.ListReport",
          "settings": {
            "smartVariantManagement": true,        // optional: enable variant mgmt
            "tableType": "ResponsiveTable"        // e.g. ResponsiveTable, AnalyticalTable
          }
        }
      }
    ]
  }
}
```

**STEP**: 2 — Define Filter Fields (SelectionFields) using OData V2 XML annotations

**DESCRIPTION**: Add selection fields to your entity by annotating the entity type or EntitySet. Place XML annotations in webapp/annotations/annotations.xml (or your OData annotations file).

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="DemoService.SalesOrder">
  <!-- Filter fields (SelectionFields) -->
  <Annotation Term="UI.SelectionFields">
    <Collection>
      <PropertyPath>CustomerID</PropertyPath>
      <PropertyPath>OrderDate</PropertyPath>
      <PropertyPath>Status</PropertyPath>
    </Collection>
  </Annotation>
</Annotations>
```

**STEP**: 3 — Define Filter Fields (SelectionFields) using CDS annotations (alternative)

**DESCRIPTION**: If you use CDS for backend annotations, mark properties with @UI.selectionField on your CDS view.

**LANGUAGE**: CDS

**CODE**:
```sql
@AbapCatalog.sqlViewName: 'ZV_SALESORD'
@EndUserText.label: 'Sales Orders'
define view ZC_SalesOrder as select from sepm_sddl_so_header {
  key SalesOrderID,
  CustomerID,
  @UI.selectionField.position: 10
  OrderDate,
  @UI.selectionField.position: 20
  Status,
  TotalAmount
}
```

**STEP**: 4 — Configure Report Table (LineItem) using OData V2 XML annotations

**DESCRIPTION**: Configure which columns appear in the List Report table by adding UI.LineItem annotations. Use DataField/DataFieldForAction as needed.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="DemoService.SalesOrder">
  <Annotation Term="UI.LineItem">
    <Collection>
      <Record Type="UI.DataField">
        <PropertyValue Property="Label" String="Sales Order"/>
        <PropertyValue Property="Value" Path="SalesOrderID"/>
      </Record>
      <Record Type="UI.DataField">
        <PropertyValue Property="Label" String="Customer"/>
        <PropertyValue Property="Value" Path="CustomerID"/>
      </Record>
      <Record Type="UI.DataField">
        <PropertyValue Property="Label" String="Order Date"/>
        <PropertyValue Property="Value" Path="OrderDate"/>
      </Record>
      <Record Type="UI.DataField">
        <PropertyValue Property="Label" String="Total Amount"/>
        <PropertyValue Property="Value" Path="TotalAmount"/>
      </Record>
    </Collection>
  </Annotation>
</Annotations>
```

**STEP**: 5 — Configure Report Table (LineItem) using CDS annotations (alternative)

**DESCRIPTION**: Use @UI.lineItem in CDS to control table columns.

**LANGUAGE**: CDS

**CODE**:
```sql
@UI.lineItem: [
  { position: 10, label: 'Sales Order',      value: SalesOrderID },
  { position: 20, label: 'Customer',         value: CustomerID },
  { position: 30, label: 'Order Date',       value: OrderDate },
  { position: 40, label: 'Total Amount',     value: TotalAmount }
]
define view ZC_SalesOrder as select from sepm_sddl_so_header {
  key SalesOrderID,
  CustomerID,
  OrderDate,
  TotalAmount
}
```

**STEP**: 6 — Add Multiple Views using PresentationVariant / SelectionPresentationVariant (OData V2 XML)

**DESCRIPTION**: Define multiple presentation variants (different column sets, sorts, or visualizations) as qualifiers and reference them via SelectionPresentationVariant. This enables view switches (e.g., default list vs. grouped view / chart view). Use distinct qualifier names and annotate the EntitySet.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="DemoService.SalesOrder">
  <!-- Presentation variant #1 (default list + sort) -->
  <Annotation Term="UI.PresentationVariant" Qualifier="DefaultList">
    <Record>
      <PropertyValue Property="Visualizations">
        <Collection>
          <AnnotationPath>@UI.LineItem</AnnotationPath>
        </Collection>
      </PropertyValue>
      <PropertyValue Property="SortOrder">
        <Collection>
          <Record Type="UI.SortOrder">
            <PropertyValue Property="Property" PropertyPath="OrderDate"/>
            <PropertyValue Property="Descending" Bool="true"/>
          </Record>
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>

  <!-- Presentation variant #2 (alternative view) -->
  <Annotation Term="UI.PresentationVariant" Qualifier="ByCustomer">
    <Record>
      <PropertyValue Property="Visualizations">
        <Collection>
          <AnnotationPath>@UI.LineItem:ByCustomer</AnnotationPath> <!-- qualifier usage -->
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>

  <!-- SelectionPresentationVariant links a selection + presentation (can be referenced by the List Report) -->
  <Annotation Term="UI.SelectionPresentationVariant" Qualifier="DefaultSPV">
    <Record>
      <PropertyValue Property="PresentationVariant" AnnotationPath="@UI.PresentationVariant:DefaultList" />
      <PropertyValue Property="SelectionVariant" AnnotationPath="@UI.SelectionVariant:DefaultSelection" />
    </Record>
  </Annotation>
</Annotations>
```

**STEP**: 7 — Add Analytical Chart to the List Report (OData V2 XML)

**DESCRIPTION**: Annotate a chart visualization and reference it in a presentation variant or visualizations collection. This enables the analytical chart (if chart support is enabled in the List Report settings).

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="DemoService.SalesOrder">
  <!-- Define a chart -->
  <Annotation Term="UI.Chart" Qualifier="SalesByCategory">
    <Record>
      <PropertyValue Property="ChartType" EnumMember="UI.ChartType/Column"/>
      <PropertyValue Property="Title" String="Sales by Category"/>
      <PropertyValue Property="Measures">
        <Collection>
          <PropertyPath>TotalAmount</PropertyPath>
        </Collection>
      </PropertyValue>
      <PropertyValue Property="Dimensions">
        <Collection>
          <PropertyPath>Category</PropertyPath>
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>

  <!-- Reference the chart from a PresentationVariant to add it as a view -->
  <Annotation Term="UI.PresentationVariant" Qualifier="ChartView">
    <Record>
      <PropertyValue Property="Visualizations">
        <Collection>
          <AnnotationPath>@UI.Chart:SalesByCategory</AnnotationPath>
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

**STEP**: 8 — Enable chart & multiple views in manifest (optional runtime switches)

**DESCRIPTION**: Turn on chart and multi-view settings in the List Report component via manifest settings.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "SalesOrders",
        "component": {
          "name": "sap.suite.ui.generic.template.ListReport",
          "settings": {
            "chart": {
              "enable": true,              // enable analytical chart
              "qualifier": "SalesByCategory"
            },
            "multiViews": {
              "enable": true
            }
          }
        }
      }
    ]
  }
}
```

References:
- Fiori Design Guidelines — List Report: https://experience.sap.com/fiori-design-web/list-report-floorplan-sap-fiori-element/
- Place manifest: webapp/manifest.json
- Place annotation files: webapp/annotations/*.xml or annotate on backend CDS views (srv or db packages)

Use these snippets as templates—replace entitySet, property names, qualifiers, and paths with your actual OData service and model specifics.
--------------------------------

**TITLE**: Maintaining Annotation-Based Elements (Fiori Tools — Page Editor, OData V4)

**INTRODUCTION**: Step-by-step, code-focused guidance for how the Page Editor in Fiori Tools creates and updates annotation records (UI.Facets, UI.FieldGroup, UI.DataField, etc.) in the local annotation file for list reports, object pages, and form entry object pages (OData V4). Includes concrete XML examples of the generated annotations and example edits you can perform in the "Edit in Source Code" view.

**TAGS**: fiori-tools, annotations, OData V4, UI.Facets, UI.FieldGroup, Page Editor, annotations.xml

**STEP**: Support and behavior summary
**DESCRIPTION**: Quick facts about when the editor will generate annotations and where they are stored.
**LANGUAGE**: text
**CODE**:
```text
- Supported editors: Page Editor for list reports, object pages, and form entry object pages (OData V4 only).
- Behavior: Add/modify/remove operations in the structured outline create or update corresponding annotations automatically in the local annotation file.
- If UI.Facets or a referenced annotation record does not exist, the Page Editor creates it.
- You can open the generated annotation file with "Edit in Source Code" to inspect or manually edit the annotations.
- Typical local file path (project-dependent): webapp/annotations/annotations.xml
```

**STEP**: Example — Add a Section (creates UI.FieldGroup and references it from UI.Facets)
**DESCRIPTION**: When you add a section in the Page Editor (Object Page or Form Entry Object Page), the Page Editor adds a UI.FieldGroup annotation record and references it from UI.Facets. The example below shows a generated local annotations.xml fragment with a Facets entry referencing a FieldGroup qualifier "Group1".
**LANGUAGE**: XML
**CODE**:
```xml
<!-- webapp/annotations/annotations.xml -->
<Annotations Target="MyService.MyEntityType">
  <!-- UI.Facets is created/updated to reference the new field group -->
  <Annotation Term="UI.Facets">
    <Collection>
      <Record Type="UI.ReferenceFacet">
        <PropertyValue Property="Target" AnnotationPath="@UI.FieldGroup#Group1"/>
        <PropertyValue Property="Label" String="General"/>
      </Record>
    </Collection>
  </Annotation>

  <!-- UI.FieldGroup with Qualifier="Group1" is created -->
  <Annotation Term="UI.FieldGroup" Qualifier="Group1">
    <Record Type="UI.FieldGroup">
      <PropertyValue Property="Label" String="General"/>
      <PropertyValue Property="Data">
        <Collection>
          <!-- Initially empty or with default fields -->
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

**STEP**: Example — Add Fields to a Section (UI.DataField entries inside UI.FieldGroup.Data)
**DESCRIPTION**: When you add fields to the new section, the Page Editor appends DataField (or PropertyPath) entries inside the FieldGroup.Data collection. Below shows adding FirstName, LastName, and a DataField with a PropertyPath for BirthDate.
**LANGUAGE**: XML
**CODE**:
```xml
<!-- webapp/annotations/annotations.xml (FieldGroup.Data updated) -->
<Annotation Term="UI.FieldGroup" Qualifier="Group1">
  <Record Type="UI.FieldGroup">
    <PropertyValue Property="Label" String="General"/>
    <PropertyValue Property="Data">
      <Collection>
        <!-- Simple property paths -->
        <PropertyPath>FirstName</PropertyPath>
        <PropertyPath>LastName</PropertyPath>

        <!-- Explicit DataField record for custom configuration (e.g., Date formatting) -->
        <Record Type="UI.DataField">
          <PropertyValue Property="Value" PropertyPath="BirthDate"/>
        </Record>
      </Collection>
    </PropertyValue>
  </Record>
</Annotation>
```

**STEP**: Edit in Source Code — Example modifications you can perform manually
**DESCRIPTION**: Use "Edit in Source Code" to change labels, move fields between groups, rename qualifiers, or add UI hints. Below examples show: 1) renaming the label, 2) moving LastName into a new FieldGroup with qualifier "Group2" and updating UI.Facets to add a second ReferenceFacet.
**LANGUAGE**: XML
**CODE**:
```xml
<!-- 1) Rename label of existing FieldGroup -->
<Annotation Term="UI.FieldGroup" Qualifier="Group1">
  <Record Type="UI.FieldGroup">
    <PropertyValue Property="Label" String="Personal Information"/> <!-- changed -->
    ...
  </Record>
</Annotation>

<!-- 2) Create a new FieldGroup#Group2 and move LastName into it, then reference from UI.Facets -->
<Annotation Term="UI.Facets">
  <Collection>
    <Record Type="UI.ReferenceFacet">
      <PropertyValue Property="Target" AnnotationPath="@UI.FieldGroup#Group1"/>
      <PropertyValue Property="Label" String="Personal Information"/>
    </Record>
    <Record Type="UI.ReferenceFacet">
      <PropertyValue Property="Target" AnnotationPath="@UI.FieldGroup#Group2"/>
      <PropertyValue Property="Label" String="Name Details"/>
    </Record>
  </Collection>
</Annotation>

<Annotation Term="UI.FieldGroup" Qualifier="Group2">
  <Record Type="UI.FieldGroup">
    <PropertyValue Property="Label" String="Name Details"/>
    <PropertyValue Property="Data">
      <Collection>
        <PropertyPath>LastName</PropertyPath>
      </Collection>
    </PropertyValue>
  </Record>
</Annotation>
```

**STEP**: Remove a Section or Field (what gets deleted)
**DESCRIPTION**: Deleting a section in the Page Editor removes the corresponding UI.ReferenceFacet from UI.Facets and deletes the associated UI.FieldGroup annotation (if it is only referenced by that facet). Deleting a field removes the PropertyPath or DataField entry from the FieldGroup.Data collection. When editing in source, ensure consistency: if you remove a FieldGroup record manually, also remove its references in UI.Facets.
**LANGUAGE**: XML
**CODE**:
```xml
<!-- Example: UI.Facets before deletion -->
<Annotation Term="UI.Facets">
  <Collection>
    <Record Type="UI.ReferenceFacet">
      <PropertyValue Property="Target" AnnotationPath="@UI.FieldGroup#Group1"/>
      <PropertyValue Property="Label" String="General"/>
    </Record>
    <!-- Other facets -->
  </Collection>
</Annotation>

<!-- After deleting the section (remove the ReferenceFacet and the FieldGroup annotation) -->
<Annotation Term="UI.Facets">
  <Collection>
    <!-- ReferenceFacet for Group1 removed -->
  </Collection>
</Annotation>

<!-- Remove the FieldGroup annotation with Qualifier="Group1" as well -->
<!-- (delete the <Annotation Term="UI.FieldGroup" Qualifier="Group1"> element) -->
```

**STEP**: File location and editing tips
**DESCRIPTION**: How to locate and safely modify the local annotation file(s) used by Page Editor.
**LANGUAGE**: text
**CODE**:
```text
- Typical file path: webapp/annotations/annotations.xml (project-specific).
- Use "Edit in Source Code" from the Page Editor to open the exact file the editor maintains.
- When editing manually:
  - Keep Annotation Term and Qualifier consistent with references (UI.Facets -> AnnotationPath "@UI.FieldGroup#Qualifier").
  - Use <PropertyPath> for simple bound properties; use <Record Type="UI.DataField"> for additional configuration.
  - After manual edits, validate XML and refresh the Page Editor to ensure the UI reflects changes.
- Backup the annotation file before major manual edits.
```

**STEP**: Example — Minimal end-to-end annotations.xml fragment
**DESCRIPTION**: Complete minimal example demonstrating a Facet referencing one FieldGroup with three fields.
**LANGUAGE**: XML
**CODE**:
```xml
<!-- webapp/annotations/annotations.xml -->
<Annotations Target="MyService.MyEntityType">
  <Annotation Term="UI.Facets">
    <Collection>
      <Record Type="UI.ReferenceFacet">
        <PropertyValue Property="Target" AnnotationPath="@UI.FieldGroup#Group1"/>
        <PropertyValue Property="Label" String="General"/>
      </Record>
    </Collection>
  </Annotation>

  <Annotation Term="UI.FieldGroup" Qualifier="Group1">
    <Record Type="UI.FieldGroup">
      <PropertyValue Property="Label" String="General"/>
      <PropertyValue Property="Data">
        <Collection>
          <PropertyPath>FirstName</PropertyPath>
          <PropertyPath>LastName</PropertyPath>
          <Record Type="UI.DataField">
            <PropertyValue Property="Value" PropertyPath="BirthDate"/>
          </Record>
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```
--------------------------------

**TITLE**: Maintain OData Annotations with SAP Fiori Language Servers (XML & CDS)

**INTRODUCTION**: This guide gives actionable, code-focused instructions to enable and use SAP Fiori language servers for maintaining OData annotations in XML annotation files and CAP CDS files. It includes required file locations, minimal example files (metadata, manifest, annotation, CDS), extension names, and constraints you must enforce for proper code completion and validation.

**TAGS**: fiori-tools, annotations, language-server, xml, cds, odata, manifest, metadata, i18n, sap

STEP: 1 — Install / Enable Language Server Extensions

DESCRIPTION: Install or enable the required VS Code extensions (or ensure they are available in your environment). The CDS OData language server is provided by the @sap/ux-cds-odata-language-server-extension packaged in the SAP CDS Language Support VS Code extension. The XML annotation language server is part of SAP Fiori tools.

LANGUAGE: Bash

CODE:
```bash
# VS Code CLI: install SAP CDS Language Support (includes CDS OData LS)
code --install-extension SAPSE.vscode-cds

# Note: the CDS OData language server package: @sap/ux-cds-odata-language-server-extension
# SAP Business Application Studio dev space may NOT include the CDSODataLanguage Server extension.
# For SAP Fiori XML annotation language server, use SAP Fiori tools extension (install via VS Code Marketplace).
```

STEP: 2 — Ensure local metadata exists and meets OData CSDL requirements

DESCRIPTION: Place a local copy of the service metadata in your project. The language server uses this local metadata file for code completion and diagnostics. Ensure:
- metadata XML contains an <edmx:Edmx> root with <edmx:DataServices>.
- one or more <Schema> definitions exist inside <edmx:DataServices>.
- there is a single EntityContainer defined (per OData CSDL requirements).
- the service namespace must not contain slashes ("/"); use dot-separated SimpleIdentifiers.

LANGUAGE: XML

CODE:
```xml
<?xml version="1.0" encoding="utf-8"?>
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
  <edmx:DataServices>
    <Schema Namespace="My.Service" xmlns="http://docs.oasis-open.org/odata/ns/edm">
      <!-- EntityType definition -->
      <EntityType Name="MyEntity">
        <Key><PropertyRef Name="ID"/></Key>
        <Property Name="ID" Type="Edm.String" Nullable="false"/>
        <Property Name="Name" Type="Edm.String"/>
      </EntityType>

      <!-- Single EntityContainer (required) -->
      <EntityContainer Name="Container">
        <EntitySet Name="MyEntities" EntityType="My.Service.MyEntity"/>
      </EntityContainer>
    </Schema>
  </edmx:DataServices>
</edmx:Edmx>
```

STEP: 3 — Create a local XML annotation file under /webapp/annotations and reference metadata

DESCRIPTION: Create an annotation XML file in /webapp/annotations/<filename>.xml. The annotation file must include edmx:Reference (to the local metadata file) and an edmx:DataServices/Schema node whose Namespace matches the metadata. Open this file in the editor to get language-server features: code completion, validation, navigation, and vocabulary info.

LANGUAGE: XML

CODE:
```xml
<?xml version="1.0" encoding="utf-8"?>
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
  <!-- Reference to local metadata (localUri path is relative to manifest.json location) -->
  <edmx:Reference Uri="localService/metadata.xml">
    <edmx:Include Namespace="My.Service" Alias="Svc"/>
  </edmx:Reference>

  <edmx:DataServices>
    <Schema Namespace="My.Service" xmlns="http://docs.oasis-open.org/odata/ns/edm">
      <!-- Example: add annotation for an entity -->
      <Annotations Target="My.Service.MyEntity">
        <Annotation Term="UI.DisplayName">
          <String xml:lang="en">My Entity</String>
        </Annotation>
      </Annotations>
    </Schema>
  </edmx:DataServices>
</edmx:Edmx>
```

STEP: 4 — Add local service metadata and annotation references to manifest.json

DESCRIPTION: Configure manifest.json so the language server knows where the service metadata and annotation files are. Provide:
- data source with Uri and settings.localUri pointing to the local metadata file
- annotation sources with localUri paths to annotation XML files
- @i18n model entry containing the uri to the i18n.properties file
All paths in annotation XML are resolved relative to the manifest.json location.

LANGUAGE: JSON

CODE:
```json
{
  "sap.app": {
    "id": "my.app"
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "mainService"
      },
      "i18n": {
        "type": "sap.ui.model.resource.ResourceModel",
        "settings": {
          "bundleName": "i18n.i18n",
          "uri": "i18n/i18n.properties"
        }
      }
    }
  },
  "sap.ui5": {
    "dataSources": {
      "mainService": {
        "uri": "/sap/opu/odata/sap/ZMY_SERVICE_SRV/",
        "type": "OData",
        "settings": {
          "localUri": "localService/metadata.xml"
        }
      },
      "annotations": {
        "uri": "annotations/annotations.xml",
        "type": "ODataAnnotation",
        "settings": {
          "localUri": "webapp/annotations/annotations.xml"
        }
      }
    }
  }
}
```

STEP: 5 — (CAP CDS) Maintain annotations in .cds files using CDS OData language server

DESCRIPTION: In CAP CDS files (.cds), the CDS OData language server provides annotation code completion and validation for annotations in CDS syntax. Ensure you have the SAP CDS Language Support extension installed. Example: annotate entity and properties using CAP CDS annotation syntax. Open the .cds file to receive language-server assistance.

LANGUAGE: CDS

CODE:
```cds
namespace my.bookshop;

using { UI, Core } from '@sap/ux/cds/annotations';

entity Books {
  key ID   : UUID;
  Title     : String @(Core.Label : 'Title', UI.LineItem : [{ Value : Title }]);
  Author    : String @(Core.Description : 'Author of the book');
}
```

STEP: 6 — Editor usage: how to open files for language-server assistance

DESCRIPTION: Open the annotation file in the code editor to activate language-server capabilities. You can:
- Single- or double-click the file in the Explorer: /webapp/annotations/<filename>.xml
- Open annotation files via Service Modeler (if available)
- Open .cds files in the editor to get CDS annotation completions

LANGUAGE: Plaintext

CODE:
```text
# Example file paths in your project
/webapp/annotations/annotations.xml
/localService/metadata.xml
/webapp/i18n/i18n.properties
/src/schema.cds
```

STEP: 7 — Supported vocabularies and limitations to preserve during automation

DESCRIPTION: Language servers support official OASIS OData vocabularies and SAP vocabularies (OData v4.0). Use vocabulary terms listed below when generating annotations. Be aware of limitations: embedded annotations in metadata (inline) and dynamic expressions are not supported by the XML annotation language server.

LANGUAGE: Plaintext

CODE:
```text
Supported vocabularies (selected):
- Org.OData.Aggregation.V1
- Org.OData.Authorization.V1
- Org.OData.Capabilities.V1
- Org.OData.Core.V1
- Org.OData.JSON.V1
- Org.OData.Measures.V1
- Org.OData.Repeatability.V1
- Org.OData.Temporal.V1
- Org.OData.Validation.V1

SAP vocabularies (selected):
- Analytics, CodeList, Common, Communication, DataIntegration, Direct-Edit,
  Graph, Hierarchy, HTML5, ODM, PDF, PersonalData, Session, UI
```

STEP: 8 — Important notes & sync behavior (operational constraints)

DESCRIPTION: Key operational constraints to keep in code automation and CI checks:
- Local metadata and backend must be kept in sync manually; language server uses local copy only for completion and diagnostics.
- The metadata file must not use "/" characters in the Namespace; use dot-separated identifiers.
- Your metadata must include a single EntityContainer.
- Annotations embedded directly in the metadata (inline) are not supported by the XML annotation language server.
- Dynamic expressions in annotations are not supported.

LANGUAGE: Plaintext

CODE:
```text
# Operational checklist to enforce in automation:
- Verify existence: localService/metadata.xml (contains edmx:DataServices and Schema)
- Validate: metadata contains a single EntityContainer
- Ensure manifest.json references localUri paths correctly (relative to manifest.json)
- Ensure annotation files are located at: webapp/annotations/<filename>.xml
- Ensure i18n model uri in manifest.json points to webapp/i18n/i18n.properties
- Run language-server validation in developer or CI environment (open files or use supported LSP client)
```
--------------------------------

**TITLE**: Maintaining Building Blocks for Fiori elements (OData V4) — Page Editor examples

**INTRODUCTION**: This document gives concise, action-oriented code examples and file locations for adding and maintaining SAP Fiori elements building blocks (OData V4) using the Page Editor. It shows how to register an OData V4 service and local annotation files in the app descriptor and provides XML annotation fragments for common building blocks you will add or edit in the Page Editor: Table (LineItem), Filter Bar (SelectionFields), Chart skeleton, and Object Page facets (custom pages/sections). Use these snippets as starting points that the Page Editor will show and let you modify via its XML and annotation property panels.

**TAGS**: fiori-tools, fiori-elements, annotations, ODataV4, manifest, LineItem, SelectionFields, Chart, ObjectPage, Page Editor

**STEP**: 1 — Register OData V4 service and local annotation file in manifest.json

**DESCRIPTION**: Add your OData V4 service data source and a local annotation file as a dataSource in webapp/manifest.json. This makes annotations available to the Page Editor (and the Fiori app). Ensure you set odataVersion to 4.0.

**LANGUAGE**: JSON

**CODE**:
```json
// File: webapp/manifest.json (snippet)
// Add these entries to the top-level manifest structure.

{
  "sap.app": {
    "id": "com.example.myapp",
    "type": "application"
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "mainService"
      }
    },
    "dataSources": {
      "mainService": {
        "uri": "/sap/opu/odata4/sap/your_service/",
        "type": "OData",
        "settings": {
          "odataVersion": "4.0"
        }
      },
      "localAnnotations": {
        "uri": "annotations/annotations.xml",
        "type": "ODataAnnotation"
      }
    }
  }
}
```

**STEP**: 2 — Table building block: LineItem annotation (object list / table)

**DESCRIPTION**: Define a LineItem annotation for an entity to render a table. Place the XML in webapp/annotations/annotations.xml (or the annotation file you referenced in the manifest). The Page Editor will surface these properties under the Table building block.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- File: webapp/annotations/annotations.xml (snippet) -->
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
  <edmx:DataServices>
    <!-- Replace Namespace.EntityType with your actual entity namespace and name -->
    <Annotations Target="Namespace.EntityType">
      <Annotation Term="com.sap.vocabularies.UI.v1.LineItem">
        <Collection>
          <!-- Column 1: ID -->
          <Record Type="com.sap.vocabularies.UI.v1.DataField">
            <PropertyValue Property="Label" String="ID"/>
            <PropertyValue Property="Value">
              <Path>ID</Path>
            </PropertyValue>
          </Record>

          <!-- Column 2: Name -->
          <Record Type="com.sap.vocabularies.UI.v1.DataField">
            <PropertyValue Property="Label" String="Name"/>
            <PropertyValue Property="Value">
              <Path>Name</Path>
            </PropertyValue>
          </Record>

          <!-- Add more DataField Records to model additional columns -->
        </Collection>
      </Annotation>
    </Annotations>
  </edmx:DataServices>
</edmx:Edmx>
```

**STEP**: 3 — Filter Bar building block: SelectionFields annotation

**DESCRIPTION**: Add SelectionFields annotation so the Page Editor can bind a Filter Bar to the entity's properties. Put this in the same annotation file referenced by the manifest.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- File: webapp/annotations/annotations.xml (snippet) -->
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
  <edmx:DataServices>
    <Annotations Target="Namespace.EntityType">
      <Annotation Term="com.sap.vocabularies.UI.v1.SelectionFields">
        <Collection>
          <!-- Simple selection field by property path -->
          <PropertyPath>Category</PropertyPath>
          <PropertyPath>Status</PropertyPath>

          <!-- For advanced configuration, use DataField or DataFieldForAnnotation -->
        </Collection>
      </Annotation>
    </Annotations>
  </edmx:DataServices>
</edmx:Edmx>
```

**STEP**: 4 — Chart building block: Chart annotation skeleton

**DESCRIPTION**: Provide a Chart annotation skeleton. Chart vocabularies can vary; below is a minimal chart-like annotation pattern as an annotation placeholder. The Page Editor will allow you to configure chart semantics and mappings. Replace contents with your chart vocabulary details if required by your project.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- File: webapp/annotations/annotations.xml (snippet - chart skeleton) -->
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
  <edmx:DataServices>
    <Annotations Target="Namespace.EntityType">
      <!-- Use the chart term your project supports; this is a skeleton placeholder -->
      <Annotation Term="com.sap.vocabularies.UI.v1.Chart">
        <Record>
          <!-- Example properties you will configure in the Page Editor -->
          <PropertyValue Property="Title" String="Sales by Category"/>
          <PropertyValue Property="ChartType" String="Column"/>
          <PropertyValue Property="Measures">
            <Collection>
              <PropertyPath>Revenue</PropertyPath>
            </Collection>
          </PropertyValue>
          <PropertyValue Property="Dimensions">
            <Collection>
              <PropertyPath>Category</PropertyPath>
            </Collection>
          </PropertyValue>
        </Record>
      </Annotation>
    </Annotations>
  </edmx:DataServices>
</edmx:Edmx>
```

**STEP**: 5 — Object Page: Facets for custom sections and pages

**DESCRIPTION**: Use UI Facets to define sections on an object page (the Page Editor can add custom sections and custom pages). The Page Editor supports adding a custom "Page" (custom page only) and a "Rich Text Editor" (custom section only). Use Facets annotations to add a section that references an annotation path (for example, to include a LineItem/table or a DataFieldForAnnotation).

**LANGUAGE**: XML

**CODE**:
```xml
<!-- File: webapp/annotations/annotations.xml (snippet - facets and custom section) -->
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
  <edmx:DataServices>
    <Annotations Target="Namespace.EntityType">
      <Annotation Term="com.sap.vocabularies.UI.v1.Facets">
        <Collection>
          <!-- Standard facet/section referencing a target annotation (e.g., a LineItem) -->
          <Record Type="com.sap.vocabularies.UI.v1.Facet">
            <PropertyValue Property="Label" String="Overview"/>
            <PropertyValue Property="Target">
              <AnnotationPath>com.sap.vocabularies.UI.v1.LineItem</AnnotationPath>
            </PropertyValue>
          </Record>

          <!-- Custom section placeholder: Page Editor will map custom content here -->
          <Record Type="com.sap.vocabularies.UI.v1.Facet">
            <PropertyValue Property="Label" String="Custom Section"/>
            <!-- The Target can point to a DataFieldForAnnotation or a custom annotation path -->
            <PropertyValue Property="Target">
              <AnnotationPath>com.example.customAnnotations.CustomSection</AnnotationPath>
            </PropertyValue>
          </Record>
        </Collection>
      </Annotation>
    </Annotations>
  </edmx:DataServices>
</edmx:Edmx>
```

**STEP**: 6 — How the Page Editor surfaces these items

**DESCRIPTION**: When the annotation files above are present and referenced in manifest.json:
- The Page Editor will list building block options (Chart, Filter Bar, Table, Page, Rich Text Editor) when you add a custom page or section to an Object Page.
- The Page Editor property panel exposes both XML properties and annotation properties for each building block. Use the XML panel for precise annotation edits and the annotation property panel for higher-level configuration.
- Files referenced: manifest.json (webapp/manifest.json) and annotation files (e.g., webapp/annotations/annotations.xml). Screenshots and UI views in the Page Editor are handled by fiori-tools; you edit and save these files and the Page Editor updates the visual preview accordingly.

**LANGUAGE**: Text

**CODE**:
```text
Files to edit:
- webapp/manifest.json            // register OData v4 service and annotation file
- webapp/annotations/annotations.xml  // add LineItem, SelectionFields, Chart, Facets, etc.

Building blocks supported by the Page Editor (OData V4):
- Chart
- Filter Bar
- Table
- Page (Custom page only)
- Rich Text Editor (Custom section only)
```
--------------------------------

**TITLE**: Extension-Based Elements: Code Templates and File Locations for Custom Columns, Sections, Fields, Actions, Views, and Controller Extensions

**INTRODUCTION**: Practical, code-focused templates and file-location examples for implementing extension-based UI elements created by the Page Editor (List Report, Object Page) for OData V2/V4 SAP Fiori tools. Use these code snippets as the files the Page Editor would generate in your project's ext folder, or to create/modify them manually.

**TAGS**: sapui5, fiori-tools, extensions, custom-column, custom-section, custom-field, custom-action, custom-view, controller-extension, manifest, ext-folder, ODataV2, ODataV4, @sap-ux/fe-fpm-writer, @sap/ux-specification

STEP: Reference and compatibility
DESCRIPTION: Keep these references and version requirements handy. The Page Editor uses open templates published in the @sap-ux/fe-fpm-writer package. Custom action and custom view features require specific @sap/ux-specification versions.
LANGUAGE: JSON
CODE:
```json
{
  "references": {
    "feFpmWriter": "https://github.com/SAP/open-ux-tools/tree/main/packages/fe-fpm-writer",
    "uxSpecificationPackage": "https://www.npmjs.com/package/@sap/ux-specification"
  },
  "notes": {
    "customActionAvailability": "OData V4 only; requires @sap/ux-specification >= 1.96",
    "customViewAvailability": "OData V4 only; requires @sap/ux-specification >= 1.96.29 or 1.102.14"
  }
}
```

STEP: Custom Column (OData V2) — Column fragment + Responsive Cell fragment + leadingProperty metadata
DESCRIPTION: Create two artifacts in webapp/ext: one fragment for the column header/column control and one fragment for the responsive cell. Include leadingProperty as CustomData so the framework knows which entity property is the leading property.
LANGUAGE: XML
CODE:
```xml
<!-- File: webapp/ext/fragments/CustomColumn.fragment.xml -->
<core:FragmentDefinition
  xmlns="sap.m"
  xmlns:core="sap.ui.core"
  xmlns:layout="sap.m"
>
  <!-- Column header/control (example using sap.m.Column as host) -->
  <Column>
    <header>
      <Text text="Custom Column Header"/>
    </header>
    <!-- Add customData with leadingProperty so FE tools can recognize property usage -->
    <customData>
      <core:CustomData key="leadingProperty" value="Price"/>
    </customData>
  </Column>
</core:FragmentDefinition>
```

```xml
<!-- File: webapp/ext/fragments/CustomColumnCell.fragment.xml -->
<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core">
  <!-- Responsive table cell template (e.g., ColumnListItem content) -->
  <HBox>
    <Text text="{Price}" />
    <!-- You can add controls, bindings, formatters or IDs here -->
  </HBox>
</core:FragmentDefinition>
```

STEP: Custom Column (OData V4) — Column fragment + optional controller handler
DESCRIPTION: For OData V4 create the fragment for the new column. If "Generate Event Handler" is selected, create a controller module in webapp/ext/controllers with the handler function referenced by the fragment (use data binding or .onPress event).
LANGUAGE: XML
CODE:
```xml
<!-- File: webapp/ext/fragments/CustomColumnV4.fragment.xml -->
<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core">
  <!-- Example using sap.m.Column with a Button in the header or cell -->
  <Column>
    <header>
      <Text text="V4 Custom Column"/>
    </header>
  </Column>
  <!-- Example cell (ColumnListItem) content -->
  <HBox>
    <Button text="Action" press=".onCustomColumnAction"/>
    <Text text="{Price}"/>
  </HBox>
</core:FragmentDefinition>
```

```javascript
// File: webapp/ext/controllers/CustomColumnV4.controller.js
sap.ui.define([], function() {
  "use strict";
  return {
    onInit: function() {
      // optional initialization
    },
    onCustomColumnAction: function(oEvent) {
      // Handler for the custom column button (oEvent is a sap.ui.base.Event)
      const oSource = oEvent.getSource();
      // access binding context or model here
      // const oContext = oSource.getBindingContext();
      // implement your logic
    }
  };
});
```

STEP: Custom Section (Object Page) — Fragment (or View) + optional controller
DESCRIPTION: Create the custom section fragment or view in webapp/ext. The Page Editor may place the fragment into a region of the Object Page. For V2 you can choose fragment, for V4 you can also generate a demo controller.
LANGUAGE: XML
CODE:
```xml
<!-- File: webapp/ext/fragments/CustomSection.fragment.xml -->
<core:FragmentDefinition xmlns="sap.uxap" xmlns:core="sap.ui.core" xmlns:m="sap.m">
  <!-- Example Object Page Section using uxap:Section -->
  <Section id="extCustomSection">
    <header>
      <Title text="My Custom Section" />
    </header>
    <content>
      <m:VBox>
        <m:Text text="Custom content goes here" />
        <m:Button text="Section Action" press=".onSectionAction"/>
      </m:VBox>
    </content>
  </Section>
</core:FragmentDefinition>
```

```javascript
// File: webapp/ext/controllers/CustomSection.controller.js
sap.ui.define([], function() {
  "use strict";
  return {
    onInit: function() {
      // optional initialization
    },
    onSectionAction: function(oEvent) {
      // implementation for demo controller action
    }
  };
});
```

STEP: Custom Field (Object Page) — Fragment + optional controller
DESCRIPTION: Create a fragment representing the custom field placed inside a FieldGroup or facet in the Object Page. Place file under webapp/ext/fragments and optional controller under webapp/ext/controllers.
LANGUAGE: XML
CODE:
```xml
<!-- File: webapp/ext/fragments/CustomField.fragment.xml -->
<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core">
  <VBox>
    <Label text="Custom Field Label" />
    <Input value="{/SomeEntity/CustomProperty}" id="extCustomFieldInput"/>
  </VBox>
</core:FragmentDefinition>
```

```javascript
// File: webapp/ext/controllers/CustomField.controller.js
sap.ui.define([], function() {
  "use strict";
  return {
    onInit: function() {
      // initialization for custom field if needed
    },
    onSomeFieldAction: function(oEvent) {
      // optional behavior
    }
  };
});
```

STEP: Custom Action (OData V4) — Button fragment + handler file (new or existing)
DESCRIPTION: For List Report or Object Page (OData V4), add a button control in an action area and implement the handler method in a JS module. You can add to an existing file or create a new handler file in webapp/ext/actions or webapp/ext/controllers.
LANGUAGE: XML
CODE:
```xml
<!-- File: webapp/ext/fragments/CustomAction.fragment.xml -->
<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core">
  <!-- Example action button -->
  <Button id="extCustomActionBtn" text="My Custom Action" press=".onMyCustomAction"/>
</core:FragmentDefinition>
```

```javascript
// File: webapp/ext/actions/MyCustomActionHandler.js
sap.ui.define([], function() {
  "use strict";
  return {
    onMyCustomAction: function(oEvent) {
      // oEvent is a sap.ui.base.Event - implement selection checks, OData calls, etc.
      // Example: get selected contexts from table or event source
      // const oTable = this.byId("myTableId");
      // const aSelectedContexts = oTable.getSelectedContexts();
      // Implement action logic here
    }
  };
});
```

STEP: Custom View (OData V4) — XMLView + Controller
DESCRIPTION: Create a custom XML view placed under webapp/ext/views and an optional demo controller. This is intended for full-view additions (List Report variant without a chart).
LANGUAGE: XML, JavaScript
CODE:
```xml
<!-- File: webapp/ext/views/CustomView.view.xml -->
<mvc:View controllerName="my.app.ext.CustomViewController"
          xmlns:mvc="sap.ui.core.mvc"
          xmlns="sap.m">
  <Page title="Custom View">
    <content>
      <VBox>
        <Text text="This is a custom view."/>
        <Button text="Do Something" press="onDoSomething"/>
      </VBox>
    </content>
  </Page>
</mvc:View>
```

```javascript
// File: webapp/ext/controllers/CustomView.controller.js
sap.ui.define([
  "sap/ui/core/mvc/Controller"
], function(Controller) {
  "use strict";
  return Controller.extend("my.app.ext.CustomViewController", {
    onInit: function() {
    },
    onDoSomething: function() {
      // demo handler code
    }
  });
});
```

STEP: Controller Extension (Page Map) — Module + manifest registration
DESCRIPTION: When adding controller extensions via the Page Map, the tool creates an extension controller module (webapp/ext/controllers/...) and registers it in manifest.json under sap.ui5.controllerExtensions so the extension is executed for the target base controller.
LANGUAGE: JSON, JavaScript
CODE:
```json
// Snippet to add to webapp/manifest.json (sap.ui5 section)
{
  "sap.ui5": {
    "controllerExtensions": {
      "sap.fe.templates.ObjectPage.controller.ObjectPageController": {
        "controllerName": "my.app.ext.ObjectPageExtension"
      }
    }
  }
}
```

```javascript
// File: webapp/ext/controllers/ObjectPageExtension.controller.js
sap.ui.define([
  "sap/ui/core/mvc/Controller"
], function(Controller) {
  "use strict";
  return Controller.extend("my.app.ext.ObjectPageExtension", {
    onInit: function() {
      // Called during original controller lifecycle; use to attach logic to the page
    },
    // Add methods to be invoked or lifecycle hooks that the base controller calls
    onAfterRendering: function() {
      // extension logic
    }
  });
});
```

STEP: File/Folder conventions created by Page Editor
DESCRIPTION: Use these recommended ext folder paths. The Page Editor writes fragments, views, and controllers into these locations. Keep names consistent with references (fragment name, controller name) shown in Page Editor dialogs.
LANGUAGE: JSON
CODE:
```json
{
  "extFolder": "webapp/ext",
  "recommendedStructure": {
    "fragments": "webapp/ext/fragments/*.fragment.xml",
    "views": "webapp/ext/views/*.view.xml",
    "controllers": "webapp/ext/controllers/*.controller.js",
    "actions": "webapp/ext/actions/*.js"
  }
}
```

STEP: Practical tips and implementation notes
DESCRIPTION: Actionable points to follow when creating or editing extension artifacts.
LANGUAGE: JSON
CODE:
```json
{
  "tips": [
    "When the Page Editor asks for 'Generate Event Handler', it will create a controller module with a handler stub in webapp/ext/controllers.",
    "For custom columns that use entity properties (e.g., {Price}) add a leadingProperty entry via Core CustomData (key = 'leadingProperty') in the column fragment so FE tooling recognizes the property.",
    "Custom Actions (OData V4) can be written into a new handler file or appended to an existing one — ensure the function name matches the press handler referenced by the fragment.",
    "Controller extension registration must be added to webapp/manifest.json under sap.ui5.controllerExtensions for the base controller you are extending.",
    "You can reorder controller extensions using Page Map or manually change the order of entries in the controllerExtensions object if required.",
    "The Page Editor writes all generated artifacts to the ext folder; modify or commit them to source control as needed."
  ]
}
```

STEP: Example minimal end-to-end: add button action to a column (files & wiring)
DESCRIPTION: Full minimal example showing a column fragment that includes a button wired to a handler in ext controllers and manifest registration if needed.
LANGUAGE: XML, JavaScript
CODE:
```xml
<!-- File: webapp/ext/fragments/ColumnWithButton.fragment.xml -->
<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core">
  <Column>
    <header>
      <Text text="Action Column"/>
    </header>
  </Column>
  <HBox>
    <Button text="Run" press=".onColumnButtonPress"/>
  </HBox>
</core:FragmentDefinition>
```

```javascript
// File: webapp/ext/controllers/ColumnWithButton.controller.js
sap.ui.define([], function() {
  "use strict";
  return {
    onColumnButtonPress: function(oEvent) {
      // Typical handler signature
      // Implement business logic or call OData actions here
      const sId = oEvent.getSource().getId();
      // Example: show message toast (require sap/m/MessageToast when used)
      // sap.m.MessageToast.show("Column action executed: " + sId);
    }
  };
});
```

**END**
--------------------------------

**TITLE**: Micro-snippets for XML Annotation LSP (fiori-tools) — Quick Coding Patterns

**INTRODUCTION**: Short, code-focused guide demonstrating how to use micro-snippets provided by the XML Annotation Language Server (LSP) to quickly insert annotation targets, terms, records, and property values inside <Schema> elements. Includes exact snippet templates (VS Code / LSP snippet syntax) and concrete XML examples for inserting minimal vs full record variants.

**TAGS**: fiori-tools, xml, annotations, micro-snippets, lsp, code-completion, snippets

**STEP**: 1 — Context: basic Schema with insertion point

**DESCRIPTION**: Show a typical <Schema> context where micro-snippets are used. Use this context as the insertion target for all examples below.

**LANGUAGE**: XML

**CODE**:
```xml
<Schema Namespace="MyService.V1" xmlns="http://docs.oasis-open.org/odata/ns/edm">
    <!-- cursor is here: insert annotations/terms/records/property values -->
</Schema>
```

**STEP**: 2 — Insert <Annotations> manually, with word-based completion, and with micro-snippet

**DESCRIPTION**: Three ways to create an <Annotations Target="..."></Annotations> block inside <Schema>. The micro-snippet option inserts the whole block and places the caret inside the Target quotes for immediate typing.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- 1) Manual typing -->
<Annotations Target=""></Annotations>

<!-- 2) Word-based completion (example flow; user types then accepts completions)
   - Type '<' ➜ select 'Annotations'
   - Type ' ' ➜ accept 'Target'
   - Continue completion to fill attributes / values
-->
<Annotations Target=""></Annotations>

<!-- 3) Micro-snippet (final inserted result) -->
<Annotations Target=""></Annotations>

<!-- Micro-snippet template (VS Code/LSP snippet syntax) to insert the block with focus on Target -->
<Annotations Target="${1:}">${0}</Annotations>
```

**STEP**: 3 — Insert an Annotation with a Record: minimal vs full record snippets

**DESCRIPTION**: Annotation records often have two snippet variants:
- Minimal variant: contains only mandatory properties (properties with nullable=false in the vocabulary).
- Full variant: contains every property defined for the record.

Below are example insertion results and snippet templates. Replace names (Term, Property names, values) with vocabulary-specific names.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Example: Insert an Annotation with a minimal Record (only mandatory properties) -->
<Annotations Target="MyService.MyEntity">
    <Annotation Term="My.Vocab.ExampleTerm">
        <Record>
            <!-- mandatory property only -->
            <PropertyValue Property="PropRequired">REQUIRED_VALUE</PropertyValue>
        </Record>
    </Annotation>
</Annotations>

<!-- Minimal record snippet template -->
<Annotation Term="${1:My.Vocab.ExampleTerm}">
    <Record>
        <PropertyValue Property="${2:PropRequired}">${3:}</PropertyValue>
    </Record>
</Annotation>

<!-- Example: Insert an Annotation with a full Record (all properties) -->
<Annotations Target="MyService.MyEntity">
    <Annotation Term="My.Vocab.ExampleTerm">
        <Record>
            <!-- mandatory property -->
            <PropertyValue Property="PropRequired">REQUIRED_VALUE</PropertyValue>
            <!-- optional properties -->
            <PropertyValue Property="PropOptional1">OPTIONAL_VALUE_1</PropertyValue>
            <PropertyValue Property="PropOptional2">OPTIONAL_VALUE_2</PropertyValue>
        </Record>
    </Annotation>
</Annotations>

<!-- Full record snippet template -->
<Annotation Term="${1:My.Vocab.ExampleTerm}">
    <Record>
        <PropertyValue Property="${2:PropRequired}">${3:}</PropertyValue>
        <PropertyValue Property="${4:PropOptional1}">${5:}</PropertyValue>
        <PropertyValue Property="${6:PropOptional2}">${7:}</PropertyValue>
    </Record>
</Annotation>
```

**STEP**: 4 — PropertyValue micro-snippets (common value types)

**DESCRIPTION**: Micro-snippets also exist for property values — provide correct value formats for strings, booleans, enums, numbers, and nested records/collections. Use the appropriate snippet variant to insert the value placeholder with proper XML element.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- String -->
<PropertyValue Property="Label">DISPLAY_TEXT</PropertyValue>

<!-- Boolean -->
<PropertyValue Property="IsVisible">true</PropertyValue>

<!-- Enum (example) -->
<PropertyValue Property="Importance">com.sap.vocabularies.UI.v1.ImportanceType/High</PropertyValue>

<!-- Number -->
<PropertyValue Property="MaxLength">42</PropertyValue>

<!-- Nested Record -->
<PropertyValue Property="Value">
    <Record>
        <PropertyValue Property="InnerProp">INNER_VALUE</PropertyValue>
    </Record>
</PropertyValue>
```

**STEP**: 5 — How to preview snippet docs in the editor

**DESCRIPTION**: In the completion list, highlight a micro-snippet entry and open the documentation/Quick Info pane to view the snippet contents and description. See the documentation quick-info feature for more details.

**LANGUAGE**: Markdown / Reference

**CODE**:
```text
Reference: Documentation (Quick Info)
File: documentation-quick-info-8728bd7.md
Note: XML Annotation LSP provides micro-snippets for:
 - annotation targets
 - terms
 - records (minimal and full variants)
 - property values
```

**STEP**: 6 — Best practice notes for code generation / automation

**DESCRIPTION**: Practical tips to generate correct XML with micro-snippets programmatically or via automated completion:
- Choose the minimal record snippet when you only need required properties; easier to maintain and reduces noise.
- Choose the full record snippet if you want a template to fill all possible properties.
- Use snippet templates (examples above) with placeholder indices (${1}, ${2}, ${0}) to emulate editor tab stops for automated insertion.
- Always validate final XML against the vocabulary/schema to avoid semantic errors.

**LANGUAGE**: Markdown

**CODE**:
```text
Best practices:
- Minimal snippet -> insert and then add additional PropertyValue elements as needed.
- Full snippet -> use when generating a comprehensive template for manual editing.
- Use the snippet templates above in editor automation or code that populates snippet placeholders.
```
--------------------------------

**TITLE**: Multiple Views for List Report — Add/Configure Table & Chart Views (Fiori Tools)

**INTRODUCTION**: Instructions and code examples to add, configure, move, and remove additional table or chart views for a List Report in SAP Fiori tools. Includes the manifest.json changes, example annotation XML (UI.LineItem, UI.Chart, UI.SelectionPresentationVariant), and how to create a transformation aggregation measure (@Analytics.AggregatedProperty). Use these snippets when your code generator must modify project files to add multi-view support.

**TAGS**: fiori-tools, list-report, views, manifest.json, annotations, UI.LineItem, UI.Chart, UI.SelectionPresentationVariant, Analytics.AggregatedProperty, aggregation, SAPUI5

STEP: 1 — Add Table or Chart View (Page Editor actions & required artifacts)
DESCRIPTION: When adding a Table or Chart View in the Page Editor, the tool generates/updates three areas: an annotation file (UI.LineItem or UI.Chart with a qualifier), an Analytics aggregation annotation if you create a dynamic measure, and the manifest.json Views/Paths entry pointing to a UI.SelectionPresentationVariant. The following are concrete examples to apply programmatically.

LANGUAGE: HTML

CODE:
```html
<!-- Keep this icon font available in your project (path relative to docs/examples) -->
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```

LANGUAGE: JSON

CODE:
```json
// manifest.json snippet — add or append the Views/Paths entry under the page settings
{
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "SalesOrders",
        "component": {
          "name": "sap.suite.ui.generic.template.ListReport"
        },
        "settings": {
          "views": {
            "paths": [
              {
                "entitySet": "SalesOrders",
                "annotationPath": "SalesService.SalesOrder@UI.SelectionPresentationVariant#Default"
              },
              {
                "entitySet": "Products",
                "annotationPath": "ProductService.Product@UI.SelectionPresentationVariant#ProductView"
              }
            ]
          }
        }
      }
    ]
  }
}
```

LANGUAGE: XML

CODE:
```xml
<!-- Annotation file example: UI.SelectionPresentationVariant generated for the new view -->
<Annotations Target="ProductService.ProductType" xmlns="http://docs.oasis-open.org/odata/ns/edm">
  <Annotation Term="UI.SelectionPresentationVariant" Qualifier="ProductView">
    <Record>
      <!-- PresentationVariant controls sorting, etc. -->
      <PropertyValue Property="PresentationVariant">
        <Record Type="UI.PresentationVariant">
          <PropertyValue Property="SortOrder">
            <Collection>
              <Record Type="UI.SortOrder">
                <PropertyValue Property="Property" String="ReleaseDate"/>
                <PropertyValue Property="Descending" Bool="true"/>
              </Record>
            </Collection>
          </PropertyValue>
        </Record>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

STEP: 2 — Generate UI.LineItem (table) or UI.Chart (chart) annotation with qualifier
DESCRIPTION: The Page Editor generates a UI.LineItem or UI.Chart annotation targeting the EntityType referenced by the selected EntitySet. Use these examples to create the correct annotation entries with a qualifier that matches the manifest "annotationPath" qualifier.

LANGUAGE: XML

CODE:
```xml
<!-- Example: UI.LineItem for a table view (qualifier ProductView) -->
<Annotations Target="ProductService.ProductType" xmlns="http://docs.oasis-open.org/odata/ns/edm">
  <Annotation Term="UI.LineItem" Qualifier="ProductView">
    <Collection>
      <Record Type="UI.DataField">
        <PropertyValue Property="Value" Path="ProductID"/>
      </Record>
      <Record Type="UI.DataField">
        <PropertyValue Property="Value" Path="Name"/>
      </Record>
      <Record Type="UI.DataField">
        <PropertyValue Property="Value" Path="Category"/>
      </Record>
    </Collection>
  </Annotation>
</Annotations>

<!-- Example: UI.Chart for a chart view (qualifier ProductViewChart) -->
<Annotations Target="ProductService.ProductType" xmlns="http://docs.oasis-open.org/odata/ns/edm">
  <Annotation Term="UI.Chart" Qualifier="ProductViewChart">
    <Record>
      <PropertyValue Property="ChartType" EnumMember="UI.ChartType/Bar"/>
      <PropertyValue Property="Dimensions">
        <Collection>
          <PropertyPath>Category</PropertyPath>
        </Collection>
      </PropertyValue>
      <PropertyValue Property="Measures">
        <Collection>
          <!-- Reference an aggregated measure (existing or generated) -->
          <PropertyPath>RevenueSum</PropertyPath>
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

STEP: 3 — Create a new dynamic measure (transformation aggregation)
DESCRIPTION: If the user chooses "Create new measure" while adding a chart view, Page Editor generates a transformation aggregation annotation for the selected aggregable property. Transformation aggregation requires SAPUI5 >= 1.106. Below is an example of how a generated aggregated property annotation can look in your annotation file. Use this pattern when programmatically adding a measure.

LANGUAGE: XML

CODE:
```xml
<!-- Example: create a transformation aggregated property on NetAmount (qualifier RevenueSum).
     This is a generated aggregated measure that the chart references as 'RevenueSum'. -->
<Annotations Target="SalesService.SalesOrderType" xmlns="http://docs.oasis-open.org/odata/ns/edm">
  <!-- Qualifier name RevenueSum is referenced in UI.Chart Measures -->
  <Annotation Term="Analytics.AggregatedProperty" Qualifier="RevenueSum">
    <Record>
      <!-- Property that is aggregated -->
      <PropertyValue Property="Property" String="NetAmount"/>
      <!-- Aggregation function: Sum -->
      <PropertyValue Property="Aggregate" String="Sum"/>
      <!-- Optional: Label -->
      <PropertyValue Property="Label" String="Revenue (Sum)"/>
    </Record>
  </Annotation>
</Annotations>

<!-- NOTE: If your service exposes @Aggregation.CustomAggregate or transformation aggregations,
     reference the defined aggregated property name in UI.Chart Measures. -->
```

STEP: 4 — Update manifest.json when views are removed or when converting back to a plain List Report
DESCRIPTION: When deleting views, tools must update the manifest accordingly:
- Remove the Views/Paths entry when only the default table view remains.
- If Views/Paths is removed, ensure defaultTemplateAnnotationPath points to the main UI.SelectionPresentationVariant.

LANGUAGE: JSON

CODE:
```json
// Example: manifest.json fallback when converting from multi-view to plain List Report
{
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "SalesOrders",
        "component": {
          "name": "sap.suite.ui.generic.template.ListReport"
        },
        "settings": {
          // Views/Paths removed; add defaultTemplateAnnotationPath to reference UI.SelectionPresentationVariant
          "defaultTemplateAnnotationPath": "SalesService.SalesOrder@UI.SelectionPresentationVariant#Default"
        }
      }
    ]
  }
}
```

STEP: 5 — Reordering views (affects view sequence only)
DESCRIPTION: The order of items in Views/Paths controls the icon-tab bar sequence. When moving a view up/down, reorder entries in Views/Paths array accordingly. No annotations change, only the order of the manifest views/paths.

LANGUAGE: JSON

CODE:
```json
// Reorder the "paths" array to change view sequence displayed in the UI
{
  "views": {
    "paths": [
      { "entitySet": "Products",    "annotationPath": "ProductService.Product@UI.SelectionPresentationVariant#ProductView" },
      { "entitySet": "SalesOrders", "annotationPath": "SalesService.SalesOrder@UI.SelectionPresentationVariant#Default" }
    ]
  }
}
```

STEP: 6 — Presentation Variant and view-specific sorting
DESCRIPTION: PresentationVariant is stored in the UI.SelectionPresentationVariant annotation for each view. You cannot reuse the same PresentationVariant for different entity views (because views might use different EntityTypes). Programmatically create or update PresentationVariant for each view qualifier.

LANGUAGE: XML

CODE:
```xml
<!-- Example: PresentationVariant inside UI.SelectionPresentationVariant for chart view -->
<Annotations Target="ProductService.ProductType" xmlns="http://docs.oasis-open.org/odata/ns/edm">
  <Annotation Term="UI.SelectionPresentationVariant" Qualifier="ProductView">
    <Record>
      <PropertyValue Property="SelectionVariant">
        <!-- SelectionVariant content omitted for brevity -->
        <Record/>
      </PropertyValue>
      <PropertyValue Property="PresentationVariant">
        <Record Type="UI.PresentationVariant">
          <PropertyValue Property="SortOrder">
            <Collection>
              <Record Type="UI.SortOrder">
                <PropertyValue Property="Property" String="Name"/>
                <PropertyValue Property="Descending" Bool="false"/>
              </Record>
            </Collection>
          </PropertyValue>
        </Record>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

STEP: 7 — Notes and constraints to enforce in code generation
DESCRIPTION: Important checks your code generator must enforce:
- Chart views require service-level groupable/aggregable properties flagged with @Aggregation.ApplySupported; otherwise, do not offer chart view generation.
- Creating a new measure uses transformation aggregation: ensure SAPUI5 runtime >= 1.106.
- If all possible transformation aggregated measures already exist, disable "Create new measure" option.
- You cannot add multiple views if an Analytical Chart is configured above or as alternative to the main List Report table — delete that Analytical Chart first.
- Do not allow deletion of the last table view that is based on the List Report main entity set.

LANGUAGE: plaintext

CODE:
```text
Checks to implement:
- Require @Aggregation.ApplySupported on service for chart generation.
- Require SAPUI5 >= 1.106 for transformation aggregation creation (@Analytics.AggregatedProperty).
- If an Analytical Chart annotation exists as the main report, block multi-view creation until removed.
- Prevent deletion of the last main-entity table view.
```


--------------------------------

**TITLE**: Navigate References for XML Annotation & Metadata in Editor

**INTRODUCTION**: This guide explains how to find and inspect all references to annotation terms/qualifiers and metadata elements (entity types, properties, actions) in an XML annotation codebase using editor reference features. Use the examples to position the cursor and trigger the editor actions to list or peek references before refactoring annotations or metadata.

**TAGS**: fiori-tools, xml, annotations, metadata, references, editor, vscode, navigation

**STEP**: Find All References

**DESCRIPTION**: Locate every reference (including definitions for metadata elements) across the workspace and open them in the References pane. Use this when you want a full list to review or batch-edit occurrences.

- Trigger options:
  - Keyboard (Windows): Alt + Shift + F12
  - Keyboard (macOS): Option + F12
  - Mouse: Right-click → Find All References
  - Command Palette: type "Find All References"
- Result: References pane opens with a list of files/locations including definitions (when run on metadata elements). Select entries to open files.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Example: annotations.xml -->
<Annotations Target="MyService.Product">
  <Annotation Term="UI.LineItem">
    <Collection>
      <Record Type="UI.DataField">
        <PropertyValue Property="Value" Path="Name" />
      </Record>
    </Collection>
  </Annotation>

  <!-- If you place the cursor on UI.LineItem or Product (in Target),
       trigger Find All References to list all files that reference them. -->
</Annotations>
```

**LANGUAGE**: JSON

**CODE**:
```json
// Optional: VS Code keybinding examples to trigger Find All References programmatically
[
  {
    "key": "alt+shift+f12",
    "command": "editor.action.referenceSearch.trigger",
    "when": "editorTextFocus"
  },
  {
    "key": "option+f12",
    "command": "editor.action.referenceSearch.trigger",
    "when": "editorTextFocus && isMac"
  }
]
```

---

**STEP**: Go To References (Peek References)

**DESCRIPTION**: Open a peek view of references inline (editable) so you can inspect and make quick changes without leaving the current file.

- Trigger options:
  - Keyboard: Shift + F12
  - Mouse: Right-click → Go To References
  - Command Palette: type "Go To References"
- Result: Inline peek editor shows references; you can edit directly in the peeked results.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Example: metadata.xml -->
<Schema Namespace="MyService" xmlns="http://docs.oasis-open.org/odata/ns/edm">
  <EntityType Name="Product">
    <Key>
      <PropertyRef Name="ID" />
    </Key>
    <Property Name="ID" Type="Edm.String" Nullable="false" />
    <Property Name="Name" Type="Edm.String" />
  </EntityType>
</Schema>

<!-- Place the cursor on Product or Name and trigger Go To References (Shift+F12)
    to open peeked references (annotations that reference Product or property Name). -->
```

**LANGUAGE**: JSON

**CODE**:
```json
// Optional: VS Code keybinding for Go To References
[
  {
    "key": "shift+f12",
    "command": "editor.action.goToReferences",
    "when": "editorTextFocus"
  }
]
```
--------------------------------

**TITLE**: Overriding Back-End Annotations and Creating Local Annotation Files (Fiori Tools)

**INTRODUCTION**: Instructions and code examples for overriding back-end OData annotations into local annotation files, creating additional local annotation files, and wiring local annotation files into manifest.json. Use these steps when you need to extend or customize backend annotations in a Fiori Elements application.

**TAGS**: fiori-tools, annotations, odata, manifest.json, xml, local-annotations, sapui5

**STEP**: 1 — Copy a back-end annotation to a local annotation file using Fiori Tools UI

**DESCRIPTION**: Use the Fiori Tools annotation viewer to copy a back-end annotation entry into a local annotation file as the starting point for extension/customization.
- Open the annotation viewer and locate the back-end annotation.
- Click the Copy icon (SAP Icons V5 copy: <span class="SAP-icons-V5"></span>) opposite the back-end annotation.
- Behavior:
  - If the project has exactly one local annotation file associated with the service, the annotation is copied automatically into that file.
  - If multiple local annotation files are associated to the same service, a selection dropdown appears to choose the destination local annotation file.
- Constraints:
  - You can add multiple local annotation files to your project.
  - You can copy annotations between backend and local annotation files; you cannot copy a local annotation into a backend annotation file.
- UI path: Right-click manifest.json → Open Annotation File Manager (see Step 2 to create files if needed).
- Image reference used in original docs: images/Overriding_annotations_64a3f74.png

**LANGUAGE**: none

**CODE**:
```none
# UI action; no code
# Use the Annotation Viewer in Fiori Tools and click the Copy icon (SAP Icons V5 copy).
```

**STEP**: 2 — Create an additional local annotation file via the Annotation File Manager

**DESCRIPTION**: Steps to create a local annotation file in your project using the Annotation File Manager UI (needed when multiple local annotation files are required for an OData service).
- Right-click on webapp/manifest.json in the project tree.
- Select "Open Annotation File Manager".
- Click "Create Local Annotation File".
- Enter:
  - File name (e.g., Z_MY_ANNOTATION.xml)
  - Schema/namespace (e.g., Z_MY_ANNOTATIONS)
  - Folder location (commonly webapp/annotations or webapp/localAnnotations)
- Click "Create".

Note: Additional local annotation files can only be created for an OData service (not for CAP CDS).

**LANGUAGE**: none

**CODE**:
```none
# UI action; no code
# Files will typically be created under: <project-root>/webapp/annotations/<your-file>.xml
```

**STEP**: 3 — Manifest.json: reference local annotation files for an OData dataSource

**DESCRIPTION**: Add or update the manifest.json dataSources entry to reference local annotation files so the app picks up the copied/created annotations. Example shows the recommended pattern: declare dataSource, attach annotations in settings, then map the dataSource to the default model.

- Place local annotation files under webapp/annotations/ (or another folder you selected).
- Update manifest.json "sap.app" -> "dataSources" and "sap.ui5" -> "models" accordingly.

**LANGUAGE**: JSON

**CODE**:
```JSON
{
  "sap.app": {
    "dataSources": {
      "mainService": {
        "uri": "/sap/opu/odata/sap/Z_MY_SERVICE_SRV/",
        "type": "OData",
        "settings": {
          "annotations": [
            {
              "namespace": "com.sap.vocabularies.UI.v1",
              "localUri": "annotations/Z_MY_ANNOTATION.xml"
            }
          ]
        }
      }
    }
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "mainService"
      }
    }
  }
}
```

**STEP**: 4 — Example local annotation XML skeleton (paste copied backend annotation into this file)

**DESCRIPTION**: Use this XML skeleton for a local annotation file. Replace Namespace, Target values, and include copied backend annotations inside <Annotations>. Ensure the file encoding and EDmx root are present.

**LANGUAGE**: XML

**CODE**:
```XML
<?xml version="1.0" encoding="utf-8"?>
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
  <edmx:Reference Uri="http://docs.oasis-open.org/odata/odata/v4.0/">
    <!-- Optionally include vocabulary references as needed -->
  </edmx:Reference>
  <edmx:DataServices>
    <Schema Namespace="Z_MY_ANNOTATIONS" xmlns="http://docs.oasis-open.org/odata/ns/edm">
      <Annotations Target="Namespace.EntitySet">
        <!-- Paste copied backend annotation fragments here.
             Example:
        <Annotation Term="UI.HeaderInfo">
          <Record>
            <PropertyValue Property="Type" String="Header"/>
          </Record>
        </Annotation>
        -->
      </Annotations>
    </Schema>
  </edmx:DataServices>
</edmx:Edmx>
```

**STEP**: 5 — Create local annotation file manually (alternative to UI)

**DESCRIPTION**: If you prefer to create files manually, add the XML file under webapp/annotations/ and then add the localUri entry in manifest.json as shown in Step 3. This achieves the same effect as using the Annotation File Manager.

**LANGUAGE**: Shell / none

**CODE**:
```bash
# Example folder and file creation (run from project root)
mkdir -p webapp/annotations
cat > webapp/annotations/Z_MY_ANNOTATION.xml <<'XML'
<?xml version="1.0" encoding="utf-8"?>
<!-- paste XML skeleton from Step 4 here -->
XML
# Then update webapp/manifest.json to reference annotations/Z_MY_ANNOTATION.xml as shown in Step 3
```

**STEP**: 6 — Important constraints and notes

**DESCRIPTION**: Preserve operational constraints and tips for implementers.
- You can add multiple local annotation files to your project and choose which one receives copied annotations in the UI.
- You can copy backend annotations to local annotation files and copy local annotations to other local files; you cannot copy local annotations back to backend annotation files.
- Additional annotation files can only be created for OData services (not CAP CDS).
- The UI copy icon is the SAP Icons V5 copy glyph (referenced in docs as <span class="SAP-icons-V5"></span>).
- Original image reference: images/Overriding_annotations_64a3f74.png

**LANGUAGE**: none

**CODE**:
```none
# No code. Read and follow constraints while using the Annotation Viewer / Annotation File Manager.
```
--------------------------------

**TITLE**: Overview of Features for Generated SAP Fiori Projects

**INTRODUCTION**: This document lists and summarizes the features automatically applied to generated SAP Fiori projects by fiori-tools. Use the linked feature documents for implementation details; the snippets below show the most common configuration points to include in your project (manifest.json, i18n files, npm scripts, etc.) so code-generation tools can produce ready-to-run projects.

**TAGS**: fiori-tools, sap, ui5, annotations, i18n, taskbar, project-cleanup, code-edit

**STEP**: 1 — Annotation Support

**DESCRIPTION**: Ensure your generated manifest.json includes annotation data source entries and model references so OData annotations are loaded by UI5 at runtime. Place annotation XML/JSON files under webapp/annotations or serve them from your OData service. Code-generation should create the dataSources and model configuration shown below.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.app": {
    "id": "your.app.id",
    "applicationVersion": {
      "version": "1.0.0"
    }
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "mainService",
        "settings": {
          "synchronizationMode": "None"
        }
      }
    },
    "dataSources": {
      "mainService": {
        "uri": "/sap/opu/odata/sap/MAIN_SRV/",
        "type": "OData",
        "settings": {
          "odataVersion": "2.0",
          "annotations": [
            {
              "name": "annotations",
              "uri": "annotations/annotations.xml"
            }
          ]
        }
      }
    }
  }
}
```

**STEP**: 2 — Taskbar Notification

**DESCRIPTION**: Generated projects can trigger taskbar/desktop notifications for long-running background tasks or important events. Code-generation should include a small wrapper utility (e.g., webapp/utils/notifications.js) that checks for and requests Notification permission and exposes a simple API used by controllers.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// webapp/utils/notifications.js
export function notify(title, options = {}) {
  if (!("Notification" in window)) return;
  if (Notification.permission === "granted") {
    new Notification(title, options);
  } else if (Notification.permission !== "denied") {
    Notification.requestPermission().then(permission => {
      if (permission === "granted") new Notification(title, options);
    });
  }
}
```

**STEP**: 3 — Edit in Source Code

**DESCRIPTION**: Generated projects should enable developers to open and edit view/controller files directly in the source. Include a clear project layout (webapp/{controller,view,model,i18n}) and configure recommended editor settings. Provide a reference doc in the project for "Edit in Source Code" workflow.

**LANGUAGE**: text

**CODE**:
```
./edit-in-source-code-7d8e942.md
(webapp structure must include controllers, views, models, i18n; include README describing how to edit)
```

**STEP**: 4 — Automatic Generation

**DESCRIPTION**: The project generator applies file templates and wiring automatically (models, routing, i18n, annotations, tests). Ensure generation scripts or tool integration points are included (for CI or local regeneration). Provide a reference doc and a visible entry point for regeneration.

**LANGUAGE**: text

**CODE**:
```
./automatic-generation-576f9fe.md
(Include generator metadata: template versions, input descriptors, and command hook for regeneration)
```

**STEP**: 5 — Internationalization (i18n)

**DESCRIPTION**: Generated apps must include i18n resources and manifest references. Place language bundles under webapp/i18n and configure sap.app to reference the default bundle. Code-generation should create sample keys and at least one locale file.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.app": {
    "i18n": {
      "bundleUrl": "i18n/i18n.properties"
    }
  }
}
```

**LANGUAGE**: Properties

**CODE**:
```properties
# webapp/i18n/i18n.properties
appTitle=My Fiori App
welcome=Welcome to the app
```

**STEP**: 6 — Project Cleanup

**DESCRIPTION**: Include cleanup scripts and guidance to remove generated/artifact files (dist, temp builds, node_modules when needed). Code-generation should add npm scripts and a README describing cleanup steps.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "scripts": {
    "clean": "rimraf dist .tmp && echo \"cleaned build artifacts\""
  }
}
```

**LANGUAGE**: text

**CODE**:
```
./project-cleanup-2640899.md
(Describe what files/directories to remove after generation and before committing: dist/, .tmp/, coverage/, build artifacts)
```
--------------------------------

**TITLE**: Peek and Go to Definition for Fiori Tools (Annotations)

**INTRODUCTION**: Quick, actionable guide for using Peek Definition and Go To Definition in Fiori Tools editors (VS Code / SAP Business Application Studio). Includes exact keyboard/mouse triggers and concrete code examples showing where to place the cursor to invoke each feature. Shows single-source and multi-source annotation examples and expected behavior.

**TAGS**: fiori-tools, annotations, peek-definition, go-to-definition, vscode, bas, xml, cds

**STEP**: Peek Definition — basic usage

**DESCRIPTION**: Place the text cursor inside an annotation term or inside the annotation value (e.g., a <String> value or translatable string). Use Peek Definition to preview and edit the referenced annotation without switching tabs. Peek opens an inline editor listing the annotation source(s). Annotation layering is not considered.

- Triggers:
  - Windows: Alt + F12
  - macOS: Option + F12
  - Mouse: Right-click → Peek Definition

**LANGUAGE**: XML

**CODE**:
```xml
<!-- File: webapp/annotations/annotations.xml -->
<?xml version="1.0" encoding="utf-8"?>
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
  <edmx:DataServices>
    <Schema Namespace="MyService" xmlns="http://docs.oasis-open.org/odata/ns/edm">
      <Annotations Target="MyService.Product">
        <Annotation Term="com.sap.vocabularies.Common.v1.Label">
          <!-- Place cursor inside the <String> value to trigger Peek Definition -->
          <String>Product</String>
        </Annotation>
      </Annotations>
    </Schema>
  </edmx:DataServices>
</edmx:Edmx>
```

**STEP**: Peek Definition — reference from a view or consumer file

**DESCRIPTION**: When your view or other file references an annotation term, place the cursor inside the term name or string value and use Peek Definition to open/edit the source inline.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- File: webapp/view/ProductList.fragment.xml -->
<Annotation Term="UI.LineItem">
  <Collection>
    <Record Type="UI.DataField">
      <PropertyValue Property="Value" Path="Name"/>
      <!-- Place cursor inside the Term attribute value or inside the nested <String> to Peek the definition -->
      <Annotation Term="com.sap.vocabularies.Common.v1.Label">
        <String>Product</String>
      </Annotation>
    </Record>
  </Collection>
</Annotation>
```

**STEP**: Go To Definition — basic usage

**DESCRIPTION**: Navigate to the annotation source file and open it in a new tab at the exact location of the annotation. Place your text cursor inside the annotation term segment or translatable string value and trigger Go To Definition.

- Triggers:
  - VS Code:
    - Keyboard: F12
    - Ctrl + mouse click (Windows)
    - CMD + mouse click (macOS)
  - SAP Business Application Studio:
    - Keyboard: Ctrl + F11
  - Mouse: Right-click → Go To Definition

**LANGUAGE**: XML

**CODE**:
```xml
<!-- From a consumer file (cursor inside Term or String) -->
<!-- After triggering Go To Definition (F12), the editor will open the source file such as: -->
<!-- File opened: webapp/annotations/annotations.xml -->
<Annotation Term="com.sap.vocabularies.Common.v1.Label">
  <String>Product</String>
</Annotation>
```

**STEP**: Multiple source definitions — behavior and example

**DESCRIPTION**: If an annotation is defined in multiple sources (for example, an XML annotation file and a CDS-based annotation file), Peek Definition will display a listing of all sources to choose from. Go To Definition, when invoked and multiple sources exist, will show the same multi-source listing (i.e., fallback to the Peek listing). Annotation layering is not considered by these navigation actions.

**LANGUAGE**: File tree + XML + CDS

**CODE**:
```text
# Example project locations with the same annotation defined in multiple files:
/webapp/annotations/annotations.xml
/srv/annotations/ProductAnnotations.cds
```

```xml
<!-- File: webapp/annotations/annotations.xml -->
<Annotations Target="MyService.Product">
  <Annotation Term="com.sap.vocabularies.Common.v1.Label">
    <String>Product (XML)</String>
  </Annotation>
</Annotations>
```

```cds
// File: srv/annotations/ProductAnnotations.cds
using my.namespace as Common;
annotate MyService.Product with {
  @Common.Label : 'Product (CDS)'
}
```

**STEP**: Quick checklist for automation/testing

**DESCRIPTION**: Use this checklist when writing integration tests or automation that validates editor navigation behavior.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "actions": [
    {"action": "openFile", "path": "webapp/view/ProductList.fragment.xml"},
    {"action": "setCursor", "pattern": "com.sap.vocabularies.Common.v1.Label"},
    {"action": "invoke", "command": "peekDefinition", "keys": "Alt+F12 or Option+F12"},
    {"expect": "inlinePaneOpened", "contains": "annotations.xml"},
    {"action": "invoke", "command": "goToDefinition", "keys": "F12"},
    {"expect": "editorOpened", "file": "annotations.xml", "cursorAt": "Label annotation"}
  ],
  "notes": "If multiple sources exist, goToDefinition should surface the multi-source listing (Peek behavior)."
}
```
--------------------------------

**TITLE**: Progress Column — Add, Configure, Move, and Delete (Fiori Tools)

**INTRODUCTION**: This document shows the exact annotation XML snippets and UI steps to add a Progress indicator column to an SAP Fiori list report table or object page section. It includes examples for adding the UI.DataPoint annotation, referencing it from UI.LineItem using UI.DataFieldForAnnotation, and setting related properties (Label, Importance, Hidden, Target Type/Value, Criticality, Tooltip Source). Also includes UI-only steps for moving and deleting the column.

**TAGS**: sap, fiori-tools, annotations, UI.DataPoint, UI.LineItem, progress, column, XML

STEP: Add stylesheet reference (UI icons)
DESCRIPTION: Add the SAP icons stylesheet reference if your project needs the icon font used in the editor/preview. Place this in the HTML shell or developer preview environment where needed.
LANGUAGE: HTML
CODE:
```HTML
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```

STEP: Add Progress Column — annotation XML (create DataPoint + LineItem reference)
DESCRIPTION: Add a com.sap.vocabularies.UI.v1.DataPoint annotation qualified (example: "ProgressDP") for the numeric property you want to visualize. Then add a UI.LineItem entry using UI.DataFieldForAnnotation that references the DataPoint via AnnotationPath. Default TargetValue is set to 100 and Visualization is Progress.
LANGUAGE: XML
CODE:
```XML
<!-- File: annotations/annotations.xml (or your service annotation file) -->
<Annotations Target="YourServiceNamespace.YourEntityType" xmlns="http://docs.oasis-open.org/odata/ns/edm"
             xmlns:ui="http://docs.oasis-open.org/odata/ns/edm">
  <!-- DataPoint qualifier that defines the progress visualization -->
  <Annotation Term="com.sap.vocabularies.UI.v1.DataPoint" Qualifier="ProgressDP">
    <Record Type="com.sap.vocabularies.UI.v1.DataPointType">
      <!-- Numeric property that provides the current progress value -->
      <PropertyValue Property="Value" Path="CompletedPercent" />
      <!-- Default target value (100 = 100%) -->
      <PropertyValue Property="TargetValue" Int="100" />
      <!-- Visualization set to Progress -->
      <PropertyValue Property="Visualization" EnumMember="com.sap.vocabularies.UI.v1.VisualizationType/Progress" />
      <!-- Optional: tooltip source property -->
      <!-- <PropertyValue Property="Tooltip" Path="ProgressTooltip" /> -->
    </Record>
  </Annotation>

  <!-- LineItem entry referencing the DataPoint via a DataFieldForAnnotation -->
  <Annotation Term="com.sap.vocabularies.UI.v1.LineItem">
    <Collection>
      <Record Type="com.sap.vocabularies.UI.v1.DataFieldForAnnotation">
        <!-- Label shown in the table column header -->
        <PropertyValue Property="Label" String="Completion" />
        <!-- Reference DataPoint by annotation qualifier -->
        <PropertyValue Property="Data" AnnotationPath="@com.sap.vocabularies.UI.v1.DataPoint#ProgressDP" />
      </Record>

      <!-- other line items... -->
    </Collection>
  </Annotation>
</Annotations>
```

STEP: Set additional properties for the Progress Column (Label, Importance, Hidden)
DESCRIPTION: Set column-level metadata such as Label (for header), Importance (controls visibility in responsive), and Hidden (explicit hide). Importance and Hidden are properties of the DataField or DataFieldForAnnotation within UI.LineItem. Importance uses com.sap.vocabularies.UI.v1.ImportanceType enum values (High/Medium/Low).
LANGUAGE: XML
CODE:
```XML
<!-- Extend the DataFieldForAnnotation used in LineItem -->
<Record Type="com.sap.vocabularies.UI.v1.DataFieldForAnnotation">
  <PropertyValue Property="Label" String="Completion" />
  <PropertyValue Property="Data" AnnotationPath="@com.sap.vocabularies.UI.v1.DataPoint#ProgressDP" />
  <!-- Importance controls responsiveness (example: High) -->
  <PropertyValue Property="Importance" EnumMember="com.sap.vocabularies.UI.v1.ImportanceType/High" />
  <!-- Hidden set to true to hide the column by default -->
  <!-- <PropertyValue Property="Hidden" Bool="true" /> -->
</Record>
```

STEP: Configure Target Type, Target value expression, and Criticality
DESCRIPTION: If your target is not a fixed numeric constant, set Target and TargetType. Add Criticality for color/semantic status. Criticality can be added as an annotation on the DataPoint (e.g., use CriticalityCalculation or fixed Criticality). Below examples show fixed Target type (Percent) and a simple Criticality enum.
LANGUAGE: XML
CODE:
```XML
<!-- DataPoint with TargetType and Target property and Criticality -->
<Annotation Term="com.sap.vocabularies.UI.v1.DataPoint" Qualifier="ProgressDP">
  <Record Type="com.sap.vocabularies.UI.v1.DataPointType">
    <PropertyValue Property="Value" Path="CompletedPercent" />
    <!-- TargetValue numeric fallback -->
    <PropertyValue Property="TargetValue" Int="100" />
    <!-- Optional explicit Target and TargetType (example: Percent) -->
    <!-- Note: Target and TargetType usage depends on your OData vocab and consumer -->
    <PropertyValue Property="Target" Path="TargetPercent" />
    <PropertyValue Property="TargetValueType" EnumMember="com.sap.vocabularies.UI.v1.ValueType/Percent" />
    <PropertyValue Property="Visualization" EnumMember="com.sap.vocabularies.UI.v1.VisualizationType/Progress" />

    <!-- Simple fixed Criticality (None/Low/Medium/High -> Positive/Negative/...) -->
    <PropertyValue Property="Criticality" EnumMember="com.sap.vocabularies.UI.v1.CriticalityType/Neutral" />
    <!-- Or use CriticalityCalculation record here for dynamic criticality rules -->
  </Record>
</Annotation>
```

STEP: Add Tooltip Source for Progress indicator
DESCRIPTION: Provide a Tooltip annotation value for the DataPoint or reference a property that contains tooltip text. This will be shown when hovering over the progress indicator.
LANGUAGE: XML
CODE:
```XML
<!-- Add Tooltip on the DataPoint -->
<Annotation Term="com.sap.vocabularies.UI.v1.DataPoint" Qualifier="ProgressDP">
  <Record Type="com.sap.vocabularies.UI.v1.DataPointType">
    <PropertyValue Property="Value" Path="CompletedPercent" />
    <PropertyValue Property="TargetValue" Int="100" />
    <PropertyValue Property="Visualization" EnumMember="com.sap.vocabularies.UI.v1.VisualizationType/Progress" />
    <!-- Tooltip source: reference a property or provide literal -->
    <PropertyValue Property="Tooltip" Path="ProgressTooltip" />
    <!-- OR -->
    <!-- <PropertyValue Property="Tooltip" String="Completed {0}% of target" /> -->
  </Record>
</Annotation>
```

STEP: Note about availability and editor behavior
DESCRIPTION: The "Add Progress Column" option in the Page Editor is disabled when the table entity and associated entities do not have numeric properties or all numeric properties are already used in the table. Use a numeric property (integer/decimal) as DataPoint.Value.

STEP: Move Progress Column (UI)
DESCRIPTION: Use the Page Editor to reorder table columns:
- Drag and drop: hover the column outline, press and hold mouse, drag to highlighted position. Use CTRL + + to move multiple selected columns.
- Arrow icons: use Move Up / Move Down icons next to the column name to shift by one position.

STEP: Delete Progress Column (UI)
DESCRIPTION: Remove the column through the Page Editor:
1. Navigate to the column inside the Columns node.
2. Click the Delete (trash) icon to open the Delete Confirmation popup.
3. Confirm by clicking Delete. This will remove the UI.DataFieldForAnnotation from UI.LineItem (and can remove the DataPoint annotation if no longer used).
--------------------------------

**TITLE**: Project Cleanup — Remove orphaned UI annotations in Fiori annotations files

**INTRODUCTION**: This procedure programmatically finds and removes orphaned UI annotations from Fiori annotation files in a project. It:
- Removes UI.FieldGroup and UI.LineItem annotations that are not referenced as targets by any UI.ReferenceFacet.
- Removes property-level annotations with terms UI.MultiLineText, Common.ValueListWithFixedValues, Common.Text, Common.ValueList, Common.FieldControl when the annotated property is not mentioned in any referenced annotations.

Use this to tidy annotation files (XML or JSON) before build/publish.

**TAGS**: fiori-tools, annotations, cleanup, UI.FieldGroup, UI.LineItem, UI.ReferenceFacet, Common.ValueList, Node.js, TypeScript

**STEP**: 1 — Scan project for annotation files and collect referenced targets

**DESCRIPTION**: Recursively read annotation files (XML or JSON). Parse each file and collect all target entity/property references that appear in UI.ReferenceFacet annotations. The output is a Set of referenced targets used to determine orphans.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
// tools/collectReferenceTargets.ts
// Usage: ts-node collectReferenceTargets.ts ./annotations
import * as fs from 'fs';
import * as path from 'path';
import * as util from 'util';
import * as glob from 'glob';
import { parseStringPromise } from 'xml2js';

const readFile = util.promisify(fs.readFile);

async function parseFile(filePath: string) {
  const content = await readFile(filePath, 'utf8');
  if (filePath.endsWith('.json')) {
    return JSON.parse(content);
  } else if (filePath.endsWith('.xml')) {
    return await parseStringPromise(content, { explicitArray: false, ignoreAttrs: false });
  }
  return null;
}

function recurseFindReferenceFacet(obj: any, collector: Set<string>) {
  if (!obj || typeof obj !== 'object') return;
  for (const k of Object.keys(obj)) {
    const v = obj[k];
    if (k === 'Annotation' || k === 'Annotations' || k === 'Term' || k === 'Record' || k === 'Collection') {
      // dive deeper
      recurseFindReferenceFacet(v, collector);
    }
    // JSON/EDMX-XML patterns: find objects with Term === 'UI.ReferenceFacet'
    if (k === 'Term' && (v === 'UI.ReferenceFacet' || v === 'UI.ReferenceFacet' /*lower/upper: same*/)) {
      // In different formats, target might be in a child element 'Record/PropertyPath' or 'Annotation/Record/PropertyPath' etc.
      // Walk siblings/parent object for a 'Target' or a 'Record' with 'PropertyPath' elements.
      const parent = obj; // obj is the annotation object containing Term
      // Common patterns: parent['Annotation'] or parent['Record']
      if (parent && parent['Target']) {
        collector.add(parent['Target']);
      } else {
        // collect nested targets/property paths
        function collectPropertyPath(n: any) {
          if (!n) return;
          if (typeof n === 'string') {
            collector.add(n);
            return;
          }
          if (Array.isArray(n)) {
            n.forEach(collectPropertyPath);
            return;
          }
          if (typeof n === 'object') {
            if (n['PropertyPath']) {
              if (typeof n['PropertyPath'] === 'string') collector.add(n['PropertyPath']);
              else if (Array.isArray(n['PropertyPath'])) n['PropertyPath'].forEach((p: any) => collector.add(p));
            }
            for (const kk of Object.keys(n)) collectPropertyPath(n[kk]);
          }
        }
        collectPropertyPath(parent);
      }
    } else {
      recurseFindReferenceFacet(v, collector);
    }
  }
}

export async function collectReferenceFacetTargets(folder: string): Promise<Set<string>> {
  const files = glob.sync('**/*.+(xml|json)', { cwd: folder, absolute: true });
  const targets = new Set<string>();
  for (const f of files) {
    try {
      const parsed = await parseFile(f);
      recurseFindReferenceFacet(parsed, targets);
    } catch (e) {
      console.warn(`Skipping ${f}: ${e.message}`);
    }
  }
  return targets;
}

// CLI
if (require.main === module) {
  const folder = process.argv[2] || '.';
  collectReferenceFacetTargets(folder).then(set => {
    console.log('Collected reference targets:');
    console.log(Array.from(set).join('\n'));
  });
}
```

**STEP**: 2 — Identify orphaned UI.FieldGroup and UI.LineItem annotations

**DESCRIPTION**: Using the collected Set of targets, locate annotation nodes with Term UI.FieldGroup or UI.LineItem that reference a target or refer to an annotation qualifier. If the referenced target/qualifier is not in the Set of UI.ReferenceFacet targets, mark it as orphaned.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
// tools/findOrphans.ts
import * as fs from 'fs';
import * as util from 'util';
import * as glob from 'glob';
import { parseStringPromise, Builder } from 'xml2js';

const readFile = util.promisify(fs.readFile);
const writeFile = util.promisify(fs.writeFile);

function isTerm(obj: any, term: string) {
  if (!obj || typeof obj !== 'object') return false;
  return (obj['Term'] === term) || (obj['term'] === term);
}

function recurseFindTerms(obj: any, terms: string[], collector: Array<{path: string[], node: any, file: string}>, file: string, currentPath: string[] = []) {
  if (!obj || typeof obj !== 'object') return;
  for (const k of Object.keys(obj)) {
    const v = obj[k];
    const newPath = currentPath.concat(k);
    if (typeof v === 'object') {
      // Check if this object has a Term property matching one of the terms
      const termProp = v['Term'] || v['term'];
      if (termProp && terms.includes(termProp)) {
        collector.push({ path: newPath, node: v, file });
      }
      recurseFindTerms(v, terms, collector, file, newPath);
    }
  }
}

export async function findFieldGroupAndLineItemNodes(folder: string) {
  const files = glob.sync('**/*.+(xml|json)', { cwd: folder, absolute: true });
  const nodes: Array<{path: string[], node: any, file: string}> = [];
  for (const f of files) {
    try {
      const content = await readFile(f, 'utf8');
      const parsed = f.endsWith('.json') ? JSON.parse(content) : await parseStringPromise(content, { explicitArray: false, ignoreAttrs: false });
      recurseFindTerms(parsed, ['UI.FieldGroup', 'UI.LineItem'], nodes, f);
    } catch (e) {
      console.warn(`Skipping ${f}: ${e.message}`);
    }
  }
  return nodes;
}

// CLI quick run example
if (require.main === module) {
  (async () => {
    const folder = process.argv[2] || '.';
    const nodes = await findFieldGroupAndLineItemNodes(folder);
    console.log(`Found ${nodes.length} UI.FieldGroup/UI.LineItem candidates`);
    for (const n of nodes) {
      console.log(`${n.file} -> ${n.path.join('.')}`);
    }
  })();
}
```

**STEP**: 3 — Remove orphaned annotations and write cleaned files back

**DESCRIPTION**: For each file, remove nodes identified as orphans (from Step 2) if their referenced target/qualifier is not in the reference Set (Step 1). Also remove property-level annotations with the terms UI.MultiLineText, Common.ValueListWithFixedValues, Common.Text, Common.ValueList, Common.FieldControl when the property is not referenced by any referenced annotations. Preserve formatting by reconstructing XML with xml2js Builder or JSON stringify.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
// tools/cleanupAnnotations.ts
import * as fs from 'fs';
import * as util from 'util';
import * as glob from 'glob';
import { parseStringPromise, Builder } from 'xml2js';
import { collectReferenceFacetTargets } from './collectReferenceTargets';
import { findFieldGroupAndLineItemNodes } from './findOrphans';

const readFile = util.promisify(fs.readFile);
const writeFile = util.promisify(fs.writeFile);

function removeNodeByPath(obj: any, path: string[]) {
  if (!obj || path.length === 0) return;
  const [head, ...rest] = path;
  if (!(head in obj)) return;
  if (rest.length === 0) {
    // delete the property or remove from array
    if (Array.isArray(obj[head])) {
      // Heuristic: remove entire array entries that have Term UI.FieldGroup or UI.LineItem
      obj[head] = obj[head].filter((entry: any) => !(entry && (entry['Term'] === 'UI.FieldGroup' || entry['Term'] === 'UI.LineItem')));
    } else {
      delete obj[head];
    }
  } else {
    removeNodeByPath(obj[head], rest);
  }
}

function propertyIsReferenced(propertyName: string, referencedProps: Set<string>) {
  return referencedProps.has(propertyName);
}

async function cleanup(folder: string, dryRun = true) {
  const referencedTargets = await collectReferenceFacetTargets(folder);
  // Also build property reference set by searching inside referenced annotations for PropertyPath values
  const referencedProperties = new Set<string>();
  // For simplicity re-run collection and search for PropertyPath inside files referencedTargets mentions
  // (This can be optimized by scanning parsed objects directly)
  const files = glob.sync('**/*.+(xml|json)', { cwd: folder, absolute: true });
  for (const f of files) {
    const content = await readFile(f, 'utf8');
    const parsed = f.endsWith('.json') ? JSON.parse(content) : await parseStringPromise(content, { explicitArray: false, ignoreAttrs: false });
    // Flatten and collect PropertyPath values per file
    (function collectProps(obj: any) {
      if (!obj || typeof obj !== 'object') return;
      for (const k of Object.keys(obj)) {
        const v = obj[k];
        if (k === 'PropertyPath') {
          if (typeof v === 'string') referencedProperties.add(v);
          else if (Array.isArray(v)) v.forEach(p => referencedProperties.add(p));
        } else {
          collectProps(v);
        }
      }
    })(parsed);
  }

  // find fieldgroup/lineitem nodes to consider deletion
  const nodes = await findFieldGroupAndLineItemNodes(folder);
  const removedMap: Record<string, string[]> = {};

  for (const filePath of files) {
    try {
      const content = await readFile(filePath, 'utf8');
      let parsed = filePath.endsWith('.json') ? JSON.parse(content) : await parseStringPromise(content, { explicitArray: false, ignoreAttrs: false });
      // find nodes in this file
      const localNodes = nodes.filter(n => n.file === filePath);
      for (const n of localNodes) {
        // Simple heuristics: if node contains a qualifier or a Target not in referencedTargets -> remove
        const nodeObj = n.node;
        let maybeTarget = nodeObj['Target'] || nodeObj['Qualifier'] || nodeObj['QualifierName'] || null;
        // If node contains nested PropertyPath entries, check if any property present in referencedProperties
        let containsReferencedProperty = false;
        function collectPropertyPath(nobj: any) {
          if (!nobj) return;
          if (typeof nobj === 'string') return;
          if (nobj['PropertyPath']) {
            const p = nobj['PropertyPath'];
            if (typeof p === 'string' && referencedProperties.has(p)) containsReferencedProperty = true;
            else if (Array.isArray(p)) p.forEach((pp: any) => { if (referencedProperties.has(pp)) containsReferencedProperty = true; });
          }
          for (const kk of Object.keys(nobj)) collectPropertyPath(nobj[kk]);
        }
        collectPropertyPath(nodeObj);

        const isOrphan = (!maybeTarget || !referencedTargets.has(maybeTarget)) && !containsReferencedProperty;
        if (isOrphan) {
          removeNodeByPath(parsed, n.path.slice(0, -1)); // remove the parent container that holds this annotation
          removedMap[filePath] = removedMap[filePath] || [];
          removedMap[filePath].push(n.path.join('.'));
        }
      }

      // Also remove property-level annotation terms for properties not referenced
      const propertyTerms = ['UI.MultiLineText', 'Common.ValueListWithFixedValues', 'Common.Text', 'Common.ValueList', 'Common.FieldControl'];

      (function prunePropertyAnnotations(obj: any, parentKey?: string) {
        if (!obj || typeof obj !== 'object') return;
        for (const k of Object.keys(obj)) {
          const v = obj[k];
          if (typeof v === 'object') {
            // if this object is an Annotation with Term in propertyTerms and Parent references a PropertyPath not in referencedProperties -> delete
            const term = v['Term'] || v['term'];
            if (term && propertyTerms.includes(term)) {
              // attempt to determine the property name from context
              // common layout: PropertyValue/PropertyPath or Attribute 'Property'
              let propName = null;
              if (v['PropertyPath']) propName = v['PropertyPath'];
              if (!propName && parentKey && parentKey !== 'Annotation' && parentKey !== 'Annotations') propName = parentKey;
              if (propName && !propertyIsReferenced(propName, referencedProperties)) {
                // delete this annotation entry
                delete obj[k];
                removedMap[filePath] = removedMap[filePath] || [];
                removedMap[filePath].push(`${k} (term ${term})`);
              }
            } else {
              prunePropertyAnnotations(v, k);
            }
          }
        }
      })(parsed);

      if (!dryRun) {
        if (filePath.endsWith('.json')) {
          await writeFile(filePath, JSON.stringify(parsed, null, 2), 'utf8');
        } else {
          const builder = new Builder();
          const xmlOut = builder.buildObject(parsed);
          await writeFile(filePath, xmlOut, 'utf8');
        }
      }
    } catch (e) {
      console.warn(`Failed to process ${filePath}: ${e.message}`);
    }
  }

  return removedMap;
}

// CLI
if (require.main === module) {
  (async () => {
    const folder = process.argv[2] || '.';
    const dry = process.argv.includes('--apply') ? false : true;
    console.log(`Scanning ${folder} (dryRun=${dry})`);
    const removed = await cleanup(folder, dry);
    console.log('Removals summary:');
    console.log(JSON.stringify(removed, null, 2));
    if (dry) console.log('Run with --apply to persist changes.');
  })();
}
```

**STEP**: 4 — Example annotation snippets (before/after)

**DESCRIPTION**: Reference formats you will encounter. Use the scripts above to parse and modify these structures.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- annotations/Product.xml (example before) -->
<Annotations Target="MyService.Product">
  <Annotation Term="UI.ReferenceFacet">
    <Record>
      <PropertyValue Property="Target">
        <Annotation Term="Common.Label" String="Main"/>
      </PropertyValue>
      <PropertyValue Property="Target" String="MyService.Product#MainFacet"/>
    </Record>
  </Annotation>

  <!-- Orphaned FieldGroup (no ReferenceFacet points to qualifier MainGroup) -->
  <Annotation Term="UI.FieldGroup" Qualifier="MainGroup">
    <Record>
      <PropertyValue Property="Label" String="Group A"/>
      <PropertyValue Property="Data">
        <Collection>
          <Record Type="UI.DataField">
            <PropertyValue Property="Value"><PropertyPath>SomeProp</PropertyPath></PropertyValue>
          </Record>
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

**LANGUAGE**: JSON

**CODE**:
```json
// annotations/EntityType.annotations.json (example before)
{
  "MyService.Product": {
    "Annotations": {
      "UI.ReferenceFacet": {
        "Record": {
          "Target": "MyService.Product#MainFacet"
        }
      },
      "UI.FieldGroup#Orphan": {
        "Record": {
          "Label": { "String": "Orphan Group" },
          "Data": {
            "Collection": [
              { "Type": "UI.DataField", "Value": { "PropertyPath": "UnreferencedProp" } }
            ]
          }
        }
      },
      "UI.MultiLineText": {
        "Property": "UnreferencedProp",
        "String": "Some multiline text"
      }
    }
  }
}
```

**STEP**: 5 — Run and verify

**DESCRIPTION**: Run scripts in order:
1. collectReferenceTargets (to inspect collected references)
2. findOrphans (to list candidate nodes)
3. cleanupAnnotations (dry run to see removals)
4. cleanupAnnotations --apply (to persist changes)

Example CLI commands:
- ts-node tools/collectReferenceTargets.ts ./annotations
- ts-node tools/findOrphans.ts ./annotations
- node -r ts-node/register tools/cleanupAnnotations.ts ./annotations        (dry run)
- node -r ts-node/register tools/cleanupAnnotations.ts ./annotations --apply  (apply)

**LANGUAGE**: Shell

**CODE**:
```bash
# from project root
ts-node tools/collectReferenceTargets.ts ./annotations
ts-node tools/findOrphans.ts ./annotations
node -r ts-node/register tools/cleanupAnnotations.ts ./annotations          # dry run
node -r ts-node/register tools/cleanupAnnotations.ts ./annotations --apply  # persist
```

Notes:
- Scripts use heuristics and recursive traversal to support common JSON and EDmx XML annotation shapes. Adjust path/term extraction logic for custom annotation formats.
- Always run dry-run first and keep source control snapshots before applying changes.
--------------------------------

**TITLE**: Rating Column — Add, Move, Delete (Fiori Tools / UI.DataPoint)

**INTRODUCTION**: This document shows how to add a rating column to a list report table or object page section using a UI.DataPoint annotation (Visualization = Rating), how to move the column in the Page Editor, and how to delete it. Includes ready-to-use XML annotation examples and file references for Fiori elements projects.

**TAGS**: fiori-tools, rating-column, UI.DataPoint, annotations, UI.LineItem, list-report, object-page, SAP Fiori

**STEP**: Include SAP icon font (optional)
**DESCRIPTION**: Ensure the SAP icon font is available in the editor preview so icon glyphs (Move Up/Down, Delete) render correctly. Add the sap-icons.css reference to the editor or preview HTML if not already present.
**LANGUAGE**: HTML
**CODE**:
```HTML
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```

**STEP**: Add Rating Column — UI actions
**DESCRIPTION**: In the Page Editor (Fiori tools):
- Open the Page Editor → select the table section → Columns node → click Add (+) → choose "Add Rating Columns".
- Select the backing property to be used for the rating value.
Outcome: A UI.DataPoint annotation is created with Value set to the chosen property, TargetValue set to 5, and Visualization set to Rating. The column will be added to the UI.LineItem collection (table columns) as a DataFieldForAnnotation referencing the DataPoint.

**LANGUAGE**: Text
**CODE**:
```text
UI Actions (Page Editor):
1. Columns node → Add (+) → Add Rating Columns.
2. Select property to use as value (e.g. CustomerRating).
3. A UI.DataPoint annotation is created and a UI.LineItem DataFieldForAnnotation entry is added that references this DataPoint.
```

**STEP**: Add Rating Column — Example annotations (XML)
**DESCRIPTION**: Example XML annotations to (A) create a DataPoint with Rating visualization and (B) add a column to the table (UI.LineItem) that renders the DataPoint as a rating column. Replace YourService.YourEntityType, CustomerRating, and RatingTooltip with your actual service, entity type, property and tooltip property names. Qualifier "Rating" is used for the DataPoint so it can be referenced by annotation path.
**LANGUAGE**: XML
**CODE**:
```XML
<!-- Define a DataPoint (qualifier = Rating) for the entity -->
<Annotations Target="YourService.YourEntityType">
  <Annotation Term="UI.DataPoint" Qualifier="Rating">
    <Record>
      <!-- The numeric property used for the rating display -->
      <PropertyValue Property="Value" Path="CustomerRating" />
      <!-- Maximum rating displayed (default 5) -->
      <PropertyValue Property="TargetValue" Int="5" />
      <!-- Render as rating visualization -->
      <PropertyValue Property="Visualization" EnumMember="UI.VisualizationType/Rating" />
      <!-- Optional additional properties -->
      <PropertyValue Property="Label" String="Rating" />
      <PropertyValue Property="Importance" EnumMember="UI.ImportanceType/Medium" />
      <PropertyValue Property="Hidden" Bool="false" />
      <!-- Tooltip source (optional) -->
      <PropertyValue Property="Tooltip" Path="RatingTooltip" />
    </Record>
  </Annotation>
</Annotations>

<!-- Add a column to the table (UI.LineItem) that references the DataPoint qualifier -->
<Annotations Target="YourService.YourEntityType">
  <Annotation Term="UI.LineItem">
    <Collection>
      <!-- Other columns here -->
      <Record Type="UI.DataFieldForAnnotation">
        <PropertyValue Property="Label" String="Rating" />
        <!-- Reference the DataPoint using @ UI.DataPoint#Rating -->
        <PropertyValue Property="Target" AnnotationPath="@UI.DataPoint#Rating" />
      </Record>
      <!-- Other columns here -->
    </Collection>
  </Annotation>
</Annotations>
```

**STEP**: Supported column properties (mapping)
**DESCRIPTION**: Properties you can set on the rating DataPoint or column and their intent. Use these in the DataPoint Record or in the LineItem record as shown above.
**LANGUAGE**: Text
**CODE**:
```text
Common properties to configure:
- Label        : UI display label for the column (PropertyValue Label).
- Importance   : UI.ImportanceType (Low / Medium / High).
- Hidden       : Bool to hide the column (PropertyValue Hidden).
- TargetValue  : Int for max rating (PropertyValue TargetValue e.g. 5).
- Tooltip Source: Path to a text property (PropertyValue Tooltip).
```

**STEP**: Move Rating Column in the Page Editor
**DESCRIPTION**: Two supported UI operations to reorder the column inside the table: drag & drop multiple columns or move single columns with arrows in the Page Editor. No code changes are required when using the Page Editor reorder controls.
**LANGUAGE**: Text
**CODE**:
```text
Drag & Drop:
- Hover column outline, press and hold mouse, move to desired position (eligible positions highlighted).
- To move multiple columns at once: hold CTRL while selecting and dragging.

Arrow Icons:
- Use Move Up (↑) or Move Down (↓) icon next to the column name to shift a single column up or down.
```

**STEP**: Delete Rating Column (Page Editor)
**DESCRIPTION**: Delete the column via the Page Editor or remove the annotation entries in your annotations file if you prefer manual editing.
**LANGUAGE**: Text
**CODE**:
```text
Page Editor:
1. Navigate to the column in Columns node.
2. Click the Delete (wastebasket) icon.
3. Confirm Delete in the dialog.

Manual removal (XML): remove the UI.LineItem DataFieldForAnnotation record referencing the DataPoint and optionally remove the UI.DataPoint annotation (qualifier) if unused.
```

**STEP**: Delete Rating Column — XML removal example
**DESCRIPTION**: Example showing the XML fragments to remove from your annotation file. Delete the DataFieldForAnnotation record inside UI.LineItem and (optionally) delete the UI.DataPoint qualifier block.
**LANGUAGE**: XML
**CODE**:
```XML
<!-- Remove the DataFieldForAnnotation entry referencing the DataPoint -->
<Annotations Target="YourService.YourEntityType">
  <Annotation Term="UI.LineItem">
    <Collection>
      <!-- Remove this Record (or delete the whole Record block) -->
      <Record Type="UI.DataFieldForAnnotation">
        <PropertyValue Property="Label" String="Rating" />
        <PropertyValue Property="Target" AnnotationPath="@UI.DataPoint#Rating" />
      </Record>
    </Collection>
  </Annotation>
</Annotations>

<!-- Optionally remove the DataPoint qualifier if no longer used -->
<!-- Remove this entire Annotation block -->
<Annotations Target="YourService.YourEntityType">
  <Annotation Term="UI.DataPoint" Qualifier="Rating">
    ...
  </Annotation>
</Annotations>
```
--------------------------------

**TITLE**: Request a New Guide (Fiori Tools – Guided Development)

**INTRODUCTION**: Instructions and actionable steps to open and submit a "Request Guide" for the Fiori Tools Guided Development extension. Includes UI entry points, the form workflow, example payload for automation, and relevant file paths and assets.

**TAGS**: fiori-tools, guided-development, request-guide, SAP-Fiori, VSCode, documentation

**STEP**: Ways to open the Request Guide UI

**DESCRIPTION**: Use one of the supported entry points in the Guided Development extension to open the Request Guide form.

**LANGUAGE**: plaintext

**CODE**:
```plaintext
Available entry points:
1. Scroll to the bottom of the guides list and click "Request Guide" in the "Don't have what you are looking for?" section.
2. Enter "request guide" into the "Search guides" field.
3. Click the Help icon and choose "Request New Guide":
   HTML snippet for Help icon:
   <span class="SAP-icons-V5"></span>  (renders the Help icon)
4. From the Command Palette: run command "Fiori: Request New Guide".
5. From the INFORMATION panel under USEFUL LINKS: choose "Guide Requests for Guided Development".
```

**STEP**: Include SAP icon stylesheet (asset reference)

**DESCRIPTION**: If you need to render the SAP icon used by the extension in custom documentation or local previews, include the provided stylesheet path.

**LANGUAGE**: HTML

**CODE**:
```html
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```

**STEP**: Open the Guide Requests page from INFORMATION panel (image asset)

**DESCRIPTION**: Visual reference shown in the extension INFORMATION panel; use the image path for docs or tests.

**LANGUAGE**: Markdown

**CODE**:
```markdown
![Guide Requests screenshot](images/Fiori_Tools_Guide_Requests_for_Guided_Development_4f9571c.png)
```

**STEP**: Fill and submit the Request Guide form (manual workflow)

**DESCRIPTION**: Complete the form fields and submit. Submission opens the default email client with a prefilled message; verify and send the email to complete the request.

**LANGUAGE**: plaintext

**CODE**:
```plaintext
Form fields (fill before clicking Submit):
- Your name
- Your email
- Title for the new guide
- Description (what you need)

Steps:
1. Fill all required fields.
2. Click "Submit".
3. An email client will open with a prefilled message. Check content and click "Send".
```

**STEP**: Example form payload (machine-readable)

**DESCRIPTION**: Example JSON payload representing the Request Guide form. Useful for automation, tests, or generating prefilled mail content.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "requester": {
    "name": "Jane Doe",
    "email": "jane.doe@example.com"
  },
  "guide": {
    "title": "Create a Custom OData V4 List Report with Complex Filters",
    "description": "Step-by-step guide to implement a Fiori elements list report using OData V4 with multi-field filtering, custom filter operators, and performance best practices."
  },
  "submission": {
    "method": "open-email-client",
    "emailSubject": "Request: New Guided Development Guide - Create a Custom OData V4 List Report",
    "emailBodyTemplate": "Name: Jane Doe\nEmail: jane.doe@example.com\nTitle: Create a Custom OData V4 List Report with Complex Filters\nDescription:\nStep-by-step guide to implement a Fiori elements list report using OData V4 with multi-field filtering, custom filter operators, and performance best practices."
  }
}
```

**STEP**: Reference: official SAP Fiori elements documentation

**DESCRIPTION**: Consult the comprehensive SAP Fiori elements feature documentation when describing the requested guide content.

**LANGUAGE**: plaintext

**CODE**:
```plaintext
Developing Apps with SAP Fiori elements:
https://ui5.sap.com/#/topic/03265b0408e2432c9571d6b3feb6b1fd
```
--------------------------------

**TITLE**: Search for a Guide — Guided Development: data model and UI behavior

**INTRODUCTION**: This document defines the data model, UI elements, and code behaviors for the "Search for a Guide" view in guided development. Use the types, functions, and markup to implement grouping, filtering, project-scoped view, tag filtering, and real-time search. Includes exact UI messages and icon class references.

**TAGS**: guided-development, search, filter, grouping, OData, annotations, UI, TypeScript, HTML, messages

**STEP**: 1 — Include SAP icon stylesheet

**DESCRIPTION**: Add the SAP icon CSS to enable icon classes used by the UI (SAP-icons-V5). Path as used in docs is relative: ../css/sap-icons.css

**LANGUAGE**: HTML

**CODE**:
```html
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```

**STEP**: 2 — Guide data model (TypeScript)

**DESCRIPTION**: Use this TypeScript interface for a guide object. Includes categories, tags, annotation types, and metadata required for compatibility checks and searching. Preserve fields used by UI behavior and messages.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
type PageType = 'ObjectPage' | 'ListReport' | 'OverviewPage' | string;
type ODataVersion = 'V2' | 'V4' | string;
type ApplicationArtifact = 'Manifest Change' | 'Flex Change' | 'Annotations';
type AnnotationCategory = 'XML Annotation' | 'CAP CDS Annotation' | 'ABAP CDS Annotation' | string;

interface Guide {
  id: string;
  title: string;
  description: string;
  samplePreviewUrl?: string;
  categories: {
    pageTypes: PageType[];            // Page types this guide targets
    odataVersions: ODataVersion[];    // Supported OData versions
    applicationArtifacts: ApplicationArtifact[]; // Manifest/Flex/Annotations
    annotationCategories?: AnnotationCategory[]; // For annotation guides
  };
  tags: string[];                     // Predefined tags used by filter
  annotationTerms?: string[];         // e.g., ['UI.LineItem']
  infoLinks?: string[];               // Links included in search
  sapui5VersionRange?: { min?: string; max?: string };
}
```

**STEP**: 3 — Default project scoping and compatibility check

**DESCRIPTION**: By default, display only guides relevant to the current project. Use these rules for compatibility checks: pageType includes project's page type; odataVersions includes project's OData version; guide's template and SAPUI5 version must be compatible if provided. Return boolean for UI to show/hide and to show warnings.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
interface ProjectContext {
  name: string;
  pageType: PageType;
  odataVersion: ODataVersion;
  sapui5Version?: string;
  template?: string;
}

function isGuideCompatible(guide: Guide, project: ProjectContext): boolean {
  if (!guide.categories.pageTypes.includes(project.pageType)) return false;
  if (!guide.categories.odataVersions.includes(project.odataVersion)) return false;
  if (guide.sapui5VersionRange && project.sapui5Version) {
    const { min, max } = guide.sapui5VersionRange;
    // Implement semver compare or simple string compare depending on versioning used
    if (min && project.sapui5Version < min) return false;
    if (max && project.sapui5Version > max) return false;
  }
  // Add additional compatibility checks as needed (template, annotation types)
  return true;
}
```

**STEP**: 4 — Group by logic (Page Type, OData Version, Application Artifacts)

**DESCRIPTION**: Implement grouping of guides by the selected Group by dropdown option. For Application Artifacts, further group annotation guides by annotation categories: XML Annotation, CAP CDS Annotation, ABAP CDS Annotation.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
type GroupByOption = 'Page Type' | 'OData Version' | 'Application Artifacts';

function groupGuides(guides: Guide[], groupBy: GroupByOption) {
  const groups: Record<string, Guide[]> = {};
  for (const g of guides) {
    if (groupBy === 'Page Type') {
      for (const pt of g.categories.pageTypes) {
        groups[pt] = groups[pt] || [];
        groups[pt].push(g);
      }
    } else if (groupBy === 'OData Version') {
      for (const v of g.categories.odataVersions) {
        groups[v] = groups[v] || [];
        groups[v].push(g);
      }
    } else if (groupBy === 'Application Artifacts') {
      for (const a of g.categories.applicationArtifacts) {
        const key = a === 'Annotations' && g.categories.annotationCategories
          ? `Annotations - ${g.categories.annotationCategories.join(', ')}`
          : a;
        groups[key] = groups[key] || [];
        groups[key].push(g);
      }
    }
  }
  return groups;
}
```

**STEP**: 5 — View filter behavior and exact messages

**DESCRIPTION**: Implement View dropdown behavior with two modes: All Guides and Project Guides. Default behavior: show only project-compatible guides. When switching to All Guides, display an information bar with the exact message and show warning icons for incompatible guides. Provide the exact strings used in the UI.

- Info message when All Guides selected:
  "Not all guides are applicable to [project name]. Click here to see all project guides."
- Warning shown inside a guide opened but incompatible:
  "This guide isn’t compatible with the current project and will not work as intended."

**LANGUAGE**: TypeScript / UI pseudocode

**CODE**:
```typescript
type ViewMode = 'Project Guides' | 'All Guides';

function getGuidesForView(allGuides: Guide[], project: ProjectContext, view: ViewMode) {
  if (view === 'Project Guides') {
    return allGuides.filter(g => isGuideCompatible(g, project));
  } else {
    // All Guides: still mark incompatible guides for UI
    return allGuides.map(g => ({ guide: g, compatible: isGuideCompatible(g, project) }));
  }
}

/*
UI display notes:
- When view === 'All Guides', display info bar with text:
  "Not all guides are applicable to [project name]. Click here to see all project guides."
  Replace [project name] with project.name.
- For incompatible guide entries (compatible === false), show a warning icon next to title.
- When user opens an incompatible guide, show the warning text:
  "This guide isn’t compatible with the current project and will not work as intended."
*/
```

**STEP**: 6 — Tag filter behavior (multiple tags, AND semantics)

**DESCRIPTION**: Filter guides by one or more selected tags. The filter should keep only guides that have all selected tags (logical AND).

**LANGUAGE**: TypeScript

**CODE**:
```typescript
function filterByTags(guides: Guide[], selectedTags: string[]) {
  if (!selectedTags || selectedTags.length === 0) return guides;
  return guides.filter(g => selectedTags.every(t => g.tags.includes(t)));
}
```

**STEP**: 7 — Real-time search logic (titles, descriptions, annotation terms, info links)

**DESCRIPTION**: Implement the search-as-you-type behavior. The search must match across title, description, annotationTerms, and infoLinks. Each additional character further filters results. Use case-insensitive includes matching; adapt to fuzzy search if required.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
function guideMatchesSearch(guide: Guide, query: string): boolean {
  if (!query || query.trim() === '') return true;
  const q = query.toLowerCase();
  if (guide.title.toLowerCase().includes(q)) return true;
  if (guide.description.toLowerCase().includes(q)) return true;
  if (guide.annotationTerms && guide.annotationTerms.some(a => a.toLowerCase().includes(q))) return true;
  if (guide.infoLinks && guide.infoLinks.some(l => l.toLowerCase().includes(q))) return true;
  return false;
}

function searchGuides(guides: Guide[], query: string) {
  return guides.filter(g => guideMatchesSearch(g, query));
}
```

**STEP**: 8 — UI elements: Filter icon, Search field, Group by dropdown example markup

**DESCRIPTION**: Example minimal HTML structure for the controls. Icons use class "SAP-icons-V5" (characters used in original doc). The Filter icon opens a tag multi-select; Group by is a dropdown with the described options.

**LANGUAGE**: HTML

**CODE**:
```html
<!-- Filter icon (opens tag multi-select) -->
<button id="filterBtn" aria-label="Filter">
  <span class="SAP-icons-V5"></span> <!-- Filter icon -->
</button>

<!-- Group by dropdown -->
<select id="groupBySelect" aria-label="Group by">
  <option>Page Type</option>
  <option>OData Version</option>
  <option>Application Artifacts</option>
</select>

<!-- View dropdown -->
<select id="viewSelect" aria-label="View">
  <option>Project Guides</option>
  <option>All Guides</option>
</select>

<!-- Search input (real-time) -->
<input id="searchGuides" type="search" placeholder="Search guides" aria-label="Search guides" />

<!-- Example info icon used in the info bar -->
<span class="SAP-icons-V5"></span> <!-- Information icon -->
```

**STEP**: 9 — Annotation-specific grouping note

**DESCRIPTION**: When Application Artifacts grouping yields "Annotations," split those guides further into the annotation categories: XML Annotation, CAP CDS Annotation, and ABAP CDS Annotation. Some guides are available for multiple annotation types — treat them as members of each matching annotation category.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
function expandAnnotationGroups(guides: Guide[]) {
  const result: Record<string, Guide[]> = {};
  for (const g of guides) {
    if (g.categories.applicationArtifacts.includes('Annotations') && g.categories.annotationCategories) {
      for (const ac of g.categories.annotationCategories) {
        result[ac] = result[ac] || [];
        result[ac].push(g);
      }
    }
  }
  return result;
}
```

**STEP**: 10 — Display rules summary (UI behavior checklist)

**DESCRIPTION**: Checklist to enforce in UI code:
- Default: show only compatible (Project Guides).
- View dropdown toggles between Project Guides and All Guides.
- When All Guides selected: show info bar with text:
  "Not all guides are applicable to [project name]. Click here to see all project guides."
- Mark incompatible guides with a warning icon next to title.
- On opening incompatible guide display:
  "This guide isn’t compatible with the current project and will not work as intended."
- Grouping supports Page Type, OData Version, and Application Artifacts; annotation guides further grouped by XML/CAP CDS/ABAP CDS.
- Filter icon allows multi-select tags; selected tags apply AND logic.
- Search operates in real-time on title, description, annotation terms, and info links.

**LANGUAGE**: Plain text (checklist)

**CODE**:
```text
- Default: Project-scoped list (compatible guides only)
- View: 'All Guides' shows all guides and info bar:
  "Not all guides are applicable to [project name]. Click here to see all project guides."
- Incompatible guide warning on open:
  "This guide isn’t compatible with the current project and will not work as intended."
- Group by: Page Type, OData Version, Application Artifacts (Annotations subdivided)
- Tag filter: multi-select, AND semantics
- Search: real-time, case-insensitive, searches title, description, annotationTerms, infoLinks
- Icons: include ../css/sap-icons.css and use class "SAP-icons-V5"
```
--------------------------------

**TITLE**: Sections (Form and Object Page) — create, modify, delete

**INTRODUCTION**: This document lists the section types you can add to a Fiori form or Object Page and provides ready-to-use code snippets and file templates to create, modify, or delete them. Use the XML snippets inside views or component fragments for UI5, and use the file templates to organize section metadata or documentation files.

**TAGS**: fiori-tools, sections, object-page, form, ui5, xml, manifest, custom-section

**STEP**: 1 — Available section types and file targets

**DESCRIPTION**: Use these files (already present in the project or to be created) to store each section’s configuration/documentation. These are the canonical filenames referenced by the documentation set.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sections": {
    "formSection": "form-section-4102b3d.md",
    "tableSection": "table-section-fc59378.md",
    "identificationSection": "identification-section-b83f501.md",
    "groupSection": "group-section-1894c47.md",
    "customSection": "custom-section-<your-id>.md"
  }
}
```

**STEP**: 2 — Create a Form Section (SimpleForm inside an Object Page subsection)

**DESCRIPTION**: Add an ObjectPageSection / ObjectPageSubSection that contains a SimpleForm. Use this for grouped editable fields rendered as a form. Place this XML in a fragment or view used by your Object Page.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- fragments/FormSection.fragment.xml -->
<core:FragmentDefinition xmlns="sap.m"
                         xmlns:core="sap.ui.core"
                         xmlns:uxap="sap.uxap"
                         xmlns:form="sap.ui.layout.form">
  <uxap:ObjectPageSection id="FormSection">
    <uxap:ObjectPageSubSection id="FormSubSection">
      <form:SimpleForm id="MySimpleForm" editable="true" layout="ResponsiveGridLayout">
        <!-- Group title -->
        <form:label>General</form:label>
        <!-- Controls: Label followed by Input/Control -->
        <Label text="First Name"/>
        <Input value="{/FirstName}"/>

        <Label text="Last Name"/>
        <Input value="{/LastName}"/>

        <Label text="Start Date"/>
        <DatePicker value="{/StartDate}"/>
      </form:SimpleForm>
    </uxap:ObjectPageSubSection>
  </uxap:ObjectPageSection>
</core:FragmentDefinition>
```

**STEP**: 3 — Create a Table Section (sap.m.Table inside an Object Page subsection)

**DESCRIPTION**: Use when you need a table representation of line items. Add this as a subsection fragment and bind items to a collection in your model.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- fragments/TableSection.fragment.xml -->
<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:uxap="sap.uxap">
  <uxap:ObjectPageSection id="TableSection">
    <uxap:ObjectPageSubSection id="TableSubSection">
      <Table id="LineItemsTable" inset="false" headerText="Line Items" items="{/LineItems}">
        <headerToolbar>
          <Toolbar>
            <Title text="Line Items"/>
            <ToolbarSpacer/>
            <Button text="Add" press="onAddItem"/>
          </Toolbar>
        </headerToolbar>
        <columns>
          <Column>
            <Text text="Item"/>
          </Column>
          <Column>
            <Text text="Quantity"/>
          </Column>
          <Column>
            <Text text="Price"/>
          </Column>
        </columns>
        <items>
          <ColumnListItem>
            <cells>
              <Text text="{Item}"/>
              <Text text="{Quantity}"/>
              <Text text="{Price}"/>
            </cells>
          </ColumnListItem>
        </items>
      </Table>
    </uxap:ObjectPageSubSection>
  </uxap:ObjectPageSection>
</core:FragmentDefinition>
```

**STEP**: 4 — Create an Identification Section (object identifiers / key-values)

**DESCRIPTION**: Use for read-only identifying data (IDs, status, key values). Can be in the Object Page header or in an ObjectPageSection. Example uses ObjectIdentifier and a simple KeyValuePair layout inside a subsection.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- fragments/IdentificationSection.fragment.xml -->
<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:uxap="sap.uxap">
  <uxap:ObjectPageSection id="IdentificationSection">
    <uxap:ObjectPageSubSection id="IdentificationSubSection">
      <VBox>
        <!-- Primary object identifier -->
        <ObjectIdentifier title="{/DisplayName}" text="{/InternalId}"/>
        <!-- key/value pairs -->
        <HBox>
          <Text text="Status:" class="sapUiSmallMarginEnd"/>
          <Text text="{/Status}" design="Bold"/>
        </HBox>
        <HBox>
          <Text text="Category:" class="sapUiSmallMarginEnd"/>
          <Text text="{/Category}"/>
        </HBox>
      </VBox>
    </uxap:ObjectPageSubSection>
  </uxap:ObjectPageSection>
</core:FragmentDefinition>
```

**STEP**: 5 — Create a Group Section (Form.Group / GroupElement)

**DESCRIPTION**: Use for grouping related fields inside a Form (logical grouping inside SimpleForm or Form control). The example uses sap.ui.layout.form.Form with Group and GroupElement.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- fragments/GroupSection.fragment.xml -->
<core:FragmentDefinition xmlns="sap.ui.core" xmlns:form="sap.ui.layout.form" xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m">
  <form:Form id="GroupedForm">
    <form:layout>
      <form:ResponsiveGridLayout/>
    </form:layout>
    <form:formContainers>
      <form:FormContainer>
        <form:title>
          <Title text="Contact Details"/>
        </form:title>
        <form:formElements>
          <form:FormElement>
            <form:label>
              <Label text="Email"/>
            </form:label>
            <form:fields>
              <Input value="{/Email}"/>
            </form:fields>
          </form:FormElement>

          <form:FormElement>
            <form:label>
              <Label text="Phone"/>
            </form:label>
            <form:fields>
              <Input value="{/Phone}"/>
            </form:fields>
          </form:FormElement>
        </form:formElements>
      </form:FormContainer>
    </form:formContainers>
  </form:Form>
</core:FragmentDefinition>
```

**STEP**: 6 — Add a Custom Section (custom control or extension fragment)

**DESCRIPTION**: When none of the standard sections fit your needs, implement a custom control / fragment and register it. Place the fragment under a predictable filename and reference it from the view or extension point. Example shows a custom control fragment and how to include it in an Object Page view.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- fragments/CustomSection.fragment.xml -->
<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:uxap="sap.uxap" xmlns:custom="my.custom.controls">
  <uxap:ObjectPageSection id="CustomSection">
    <uxap:ObjectPageSubSection id="CustomSubSection">
      <!-- Custom control usage -->
      <custom:MyCustomWidget id="MyCustomWidget" someProperty="{/CustomData}" />
    </uxap:ObjectPageSubSection>
  </uxap:ObjectPageSection>
</core:FragmentDefinition>
```

**STEP**: 7 — File / Folder organization example and deletion

**DESCRIPTION**: Keep section fragments and documentation files in one folder. Delete a section by removing the fragment file and removing any references in the parent view or manifest.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "project": {
    "webapp": {
      "fragments": {
        "FormSection.fragment.xml": "<!-- ... -->",
        "TableSection.fragment.xml": "<!-- ... -->",
        "IdentificationSection.fragment.xml": "<!-- ... -->",
        "GroupSection.fragment.xml": "<!-- ... -->",
        "CustomSection.fragment.xml": "<!-- ... -->"
      },
      "sections-docs": {
        "form-section-4102b3d.md": "# Form Section ...",
        "table-section-fc59378.md": "# Table Section ...",
        "identification-section-b83f501.md": "# Identification Section ...",
        "group-section-1894c47.md": "# Group Section ...",
        "custom-section-yourid.md": "# Custom Section ..."
      }
    }
  }
}
```

Notes:
- To add a section to an existing Object Page view, include the fragment with <core:Fragment fragmentName="fragments/FormSection.fragment" type="XML" /> or by aggregating the fragment content into the ObjectPage sections aggregation.
- To delete a section: remove the fragment file, remove any view/manifest references, and update routing/controllers that reference it.
--------------------------------

**TITLE**: Supported Elements in Page Editor

**INTRODUCTION**: This document lists the annotation-based UI elements that the "Configure Page Elements" editor supports for Fiori tools. Use this reference when generating code or implementing editor tooling: allow edits in the page editor only for the supported elements; all other UI elements must be updated directly in the annotation files (EDMX/annotations or JSON annotations).

**TAGS**: fiori-tools, annotations, UI5, list-report, object-page, configure-page-elements, page-editor

**STEP**: 1 — Supported elements (quick machine-readable reference)

**DESCRIPTION**: Programmatically use this list to decide which elements to expose inside the Configure Page Elements UI. If an element is not in these groups, surface a link or an "Edit annotations file" action instead.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "supportedElements": {
    "listReport": [
      "FilterFields (UI.SelectionFields)",
      "Table (UI.LineItem)"
    ],
    "objectPage": [
      "Header (UI.HeaderInfo)",
      "Form Section (UI.Facets -> FieldGroup / CollectionFacet / ReferenceFacet)",
      "Table Section (UI.LineItem referenced inside Facets)",
      "Identification Section (UI.Identification / FieldGroup)",
      "Group Section (UI.FieldGroup)",
      "Adding Custom Section (extension-based sections)",
      "Footer (page-level footer elements)"
    ]
  },
  "notes": {
    "primary": "Only the elements above are supported by Configure Page Elements. All other elements must be edited directly in the annotation files.",
    "links": {
      "configurePageElementsDoc": "configure-page-elements-047507c.md",
      "maintainAnnotations": "maintaining-annotations-with-language-server-6fc93f8.md",
      "addCustomSection": "maintaining-extension-based-elements-02172d2.md#loiode514dafa2364693baeabbb40d564006",
      "listReportUi5Topic": "https://ui5.sap.com/#/topic/1cf5c7f5b81c4cb3ba98fd14314d4504",
      "objectPageUi5Topic": "https://ui5.sap.com/#/topic/645e27ae85d54c8cbc3f6722184a24a1"
    }
  }
}
```

**STEP**: 2 — List Report: actionable annotation examples

**DESCRIPTION**: To enable editing Filter Fields and Table in the page editor, wire the editor to the following annotation terms on the target EntityType. Use these annotation locations to read/modify filter and table definitions.

- Filter fields: UI.SelectionFields (SelectionFields lists properties used in the filter bar)
- Table: UI.LineItem (LineItem defines the columns for the list table)

Use the following minimal EDMX-style XML snippets as templates for reading or producing annotations. When your generator updates these, persist back to the annotation model (EDMX or JSON annotations) used in the project.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Minimal example: SelectionFields for filters -->
<Annotations Target="YourService.YourEntityType">
  <Annotation Term="UI.SelectionFields">
    <Collection>
      <PropertyPath>FilterProperty1</PropertyPath>
      <PropertyPath>FilterProperty2</PropertyPath>
    </Collection>
  </Annotation>
</Annotations>

<!-- Minimal example: LineItem for table columns -->
<Annotations Target="YourService.YourEntityType">
  <Annotation Term="UI.LineItem">
    <Collection>
      <Record Type="UI.DataField">
        <PropertyValue Property="Value">
          <PropertyPath>ColumnProperty1</PropertyPath>
        </PropertyValue>
      </Record>
      <Record Type="UI.DataFieldForAnnotation">
        <PropertyValue Property="Target">
          <AnnotationPath>@UI.SomeAnnotation</AnnotationPath>
        </PropertyValue>
      </Record>
    </Collection>
  </Annotation>
</Annotations>
```

**STEP**: 3 — Object Page & Form Entry Page: actionable annotation mapping and examples

**DESCRIPTION**: The Object Page exposes multiple sections and header content that the page editor can modify. Map your editor features to these annotation terms and concepts:

- Header -> UI.HeaderInfo (title, subtitle, etc.)
- Sections -> UI.Facets (Collection of facets; facets point to FieldGroup / CollectionFacet / ReferenceFacet annotations)
- Form sections (field layout) -> FieldGroup / CollectionFacet inside Facets
- Table sections -> UI.LineItem referenced inside a Facet (for embedded tables)
- Identification section -> identification-area annotations (often represented as a FieldGroup)
- Group section -> UI.FieldGroup (grouped fields inside a facet)
- Adding custom section -> extension-based custom sections (use extension points, see link)
- Footer -> page-level footer actions or custom footer facets

The editor should read the UI.HeaderInfo and UI.Facets annotations and allow mutation of labels, ordering, and references when permitted.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Example: HeaderInfo for the Object Page header -->
<Annotations Target="YourService.YourEntityType">
  <Annotation Term="UI.HeaderInfo">
    <Record>
      <PropertyValue Property="TypeName" String="Product"/>
      <PropertyValue Property="Title" String="{Name}"/>
      <PropertyValue Property="Description" String="{Description}"/>
    </Record>
  </Annotation>
</Annotations>

<!-- Example: Facets collection (conceptual template) -->
<Annotations Target="YourService.YourEntityType">
  <Annotation Term="UI.Facets">
    <Collection>
      <!-- ReferenceFacet referencing an annotation path (e.g. FieldGroup) -->
      <Record Type="UI.ReferenceFacet">
        <PropertyValue Property="Label" String="Identification"/>
        <PropertyValue Property="Target">
          <AnnotationPath>@YourService.YourEntityType/Identification</AnnotationPath>
        </PropertyValue>
      </Record>

      <!-- CollectionFacet that may contain nested field groups or line items -->
      <Record Type="UI.CollectionFacet">
        <PropertyValue Property="Label" String="Sales Data"/>
        <PropertyValue Property="Target">
          <AnnotationPath>@YourService.YourEntityType/SalesSection</AnnotationPath>
        </PropertyValue>
      </Record>
    </Collection>
  </Annotation>
</Annotations>
```

**STEP**: 4 — Adding custom sections and where to edit manually

**DESCRIPTION**: If a page requires custom/extension-based sections or elements that are not listed in the supported elements above, implement them via extension-based elements or edit the annotation files directly. Provide the editor a link to the relevant documentation and open the annotation file when the user chooses to modify an unsupported element.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "manualEditGuidance": {
    "whenToEditAnnotationsDirectly": [
      "Any UI element not listed in supportedElements (STEP 1).",
      "Complex custom layouts or custom controls in Object Page sections.",
      "Annotations that the editor doesn't parse (multi-level complex facet definitions)."
    ],
    "links": {
      "configurePageElements": "configure-page-elements-047507c.md",
      "addingCustomSection": "maintaining-extension-based-elements-02172d2.md#loiode514dafa2364693baeabbb40d564006",
      "maintainAnnotationsWithLS": "maintaining-annotations-with-language-server-6fc93f8.md"
    },
    "recommendedAction": "Open the annotation file (EDMX/annotation JSON). Apply changes and then refresh the page editor to reflect updated annotations."
  }
}
```
--------------------------------

**TITLE**: Table (List Report) — Configure PresentationVariant and SelectionVariant Annotations

**INTRODUCTION**: This guide shows how to configure table sorting (PresentationVariant) and default filtering (SelectionVariant) for a Fiori Elements List Report table. It provides actionable annotation examples (XML + JSON), manifest binding examples, and step-by-step actions to create, update, detach, and clean up annotation definitions used by the Page Editor.

**TAGS**: fiori-tools, list-report, annotations, UI.SelectionPresentationVariant, UI.PresentationVariant, UI.SelectionVariant, UI.LineItem, manifest, annotations.xml, cleanup

**STEP**: 1 — Keep UI icon stylesheet
**DESCRIPTION**: Ensure the SAP icon stylesheet used by the editor/UI is included in the project (relative path shown in original docs).
**LANGUAGE**: HTML
**CODE**:
```html
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```

**STEP**: 2 — Add or update a SelectionPresentationVariant annotation (XML example)
**DESCRIPTION**: Create a UI.SelectionPresentationVariant annotation that contains a PresentationVariant (SortOrder list) and a SelectionVariant (default SelectOptions). Place this in your annotation file (example path: webapp/annotations/annotations.xml). Use Qualifier to reference the variant from Page Editor (Presentation Variant property).
**LANGUAGE**: XML
**CODE**:
```xml
<!-- File: webapp/annotations/annotations.xml -->
<Annotations Target="MyService.EntityType">
  <!-- Qualifier "MyTableVariant" is referenced from the Page Editor Presentation Variant property -->
  <Annotation Term="UI.SelectionPresentationVariant" Qualifier="MyTableVariant">
    <Record Type="UI.SelectionPresentationVariant">
      <!-- PresentationVariant: define SortOrder entries -->
      <PropertyValue Property="PresentationVariant">
        <Record Type="UI.PresentationVariant">
          <PropertyValue Property="SortOrder">
            <Collection>
              <!-- Primary sort by LastName ascending -->
              <Record Type="UI.SortOrder">
                <PropertyValue Property="Property" String="LastName"/>
                <PropertyValue Property="Descending" Bool="false"/>
              </Record>
              <!-- Secondary sort by CreatedAt descending -->
              <Record Type="UI.SortOrder">
                <PropertyValue Property="Property" String="CreatedAt"/>
                <PropertyValue Property="Descending" Bool="true"/>
              </Record>
            </Collection>
          </PropertyValue>
        </Record>
      </PropertyValue>

      <!-- SelectionVariant: define default filters (SelectOptions) -->
      <PropertyValue Property="SelectionVariant">
        <Record Type="UI.SelectionVariant">
          <PropertyValue Property="SelectOptions">
            <Collection>
              <Record Type="UI.SelectOption">
                <PropertyValue Property="PropertyName" String="Status"/>
                <PropertyValue Property="Ranges">
                  <Collection>
                    <Record Type="UI.Range">
                      <PropertyValue Property="Sign" EnumMember="UI.SignType/I"/>
                      <PropertyValue Property="Option" EnumMember="UI.SimpleType/EQ"/>
                      <PropertyValue Property="Low" String="Active"/>
                    </Record>
                  </Collection>
                </PropertyValue>
              </Record>
              <!-- You can add additional SelectOption records or repeat the same PropertyName -->
            </Collection>
          </PropertyValue>
        </Record>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

**STEP**: 3 — Add or update a SelectionPresentationVariant annotation (JSON example)
**DESCRIPTION**: JSON representation of the same annotation for projects using JSON-formatted annotations. Place in webapp/annotations/annotations.json or other configured annotation file.
**LANGUAGE**: JSON
**CODE**:
```json
{
  "Annotations": {
    "MyService.EntityType@UI.SelectionPresentationVariant#MyTableVariant": {
      "PresentationVariant": {
        "SortOrder": [
          { "Property": "LastName", "Descending": false },
          { "Property": "CreatedAt", "Descending": true }
        ]
      },
      "SelectionVariant": {
        "SelectOptions": [
          {
            "PropertyName": "Status",
            "Ranges": [
              { "Sign": "I", "Option": "EQ", "Low": "Active" }
            ]
          }
        ]
      }
    }
  }
}
```

**STEP**: 4 — Reference annotation file in manifest.json
**DESCRIPTION**: Ensure your annotation file is registered in manifest.json so Fiori Tools and the runtime can resolve your annotations. The Page Editor will reference the SelectionPresentationVariant by qualifier (e.g., "MyTableVariant").
**LANGUAGE**: JSON
**CODE**:
```json
{
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "mainService",
        "settings": {
          "annotations": [
            "annotations/annotations.xml"  /* or annotations/annotations.json */
          ]
        }
      }
    }
  }
}
```

**STEP**: 5 — Link the Presentation Variant in the Page Editor
**DESCRIPTION**: In the Page Editor Layout tree, select the Table node for the List Report. Set the "Presentation Variant" property to the annotation qualifier, for example:
- UI.SelectionPresentationVariant#MyTableVariant
Or choose New to generate a variant via the Page Editor.
This exposes the Sort Order editor (Add Sort Property) to add, reorder or remove sort properties.

**LANGUAGE**: Text
**CODE**:
```text
Presentation Variant property value example:
UI.SelectionPresentationVariant#MyTableVariant
```

**STEP**: 6 — Editing sort order programmatically (annotation change)
**DESCRIPTION**: Reorder or add entries in the PresentationVariant SortOrder collection. The collection order defines precedence (first entry = highest precedence). Example: move "CreatedAt" to be primary by reordering list.
**LANGUAGE**: XML
**CODE**:
```xml
<!-- Updated SortOrder with CreatedAt primary -->
<PropertyValue Property="PresentationVariant">
  <Record Type="UI.PresentationVariant">
    <PropertyValue Property="SortOrder">
      <Collection>
        <Record Type="UI.SortOrder">
          <PropertyValue Property="Property" String="CreatedAt"/>
          <PropertyValue Property="Descending" Bool="true"/>
        </Record>
        <Record Type="UI.SortOrder">
          <PropertyValue Property="Property" String="LastName"/>
          <PropertyValue Property="Descending" Bool="false"/>
        </Record>
      </Collection>
    </PropertyValue>
  </Record>
</PropertyValue>
```

**STEP**: 7 — Add default filters (SelectionVariant: Default Filters) via annotations
**DESCRIPTION**: To configure default filters, add SelectOption entries in the SelectionVariant.SelectOptions collection. You can add multiple filters and multiple ranges for the same property.
**LANGUAGE**: XML
**CODE**:
```xml
<!-- Add default filter for Country = 'DE' and Amount >= 1000 -->
<PropertyValue Property="SelectionVariant">
  <Record Type="UI.SelectionVariant">
    <PropertyValue Property="SelectOptions">
      <Collection>
        <Record Type="UI.SelectOption">
          <PropertyValue Property="PropertyName" String="Country"/>
          <PropertyValue Property="Ranges">
            <Collection>
              <Record Type="UI.Range">
                <PropertyValue Property="Sign" EnumMember="UI.SignType/I"/>
                <PropertyValue Property="Option" EnumMember="UI.SimpleType/EQ"/>
                <PropertyValue Property="Low" String="DE"/>
              </Record>
            </Collection>
          </PropertyValue>
        </Record>
        <Record Type="UI.SelectOption">
          <PropertyValue Property="PropertyName" String="Amount"/>
          <PropertyValue Property="Ranges">
            <Collection>
              <Record Type="UI.Range">
                <PropertyValue Property="Sign" EnumMember="UI.SignType/I"/>
                <PropertyValue Property="Option" EnumMember="UI.SimpleType/GE"/>
                <PropertyValue Property="Low" String="1000"/>
              </Record>
            </Collection>
          </PropertyValue>
        </Record>
      </Collection>
    </PropertyValue>
  </Record>
</PropertyValue>
```

**STEP**: 8 — Constraints and selection limitations
**DESCRIPTION**: When adding default filters, do not pick properties that:
- Are annotated with UI.Hidden or UI.HiddenFilter
- Are listed in Capabilities.FilterRestrictions -> NonFilterableProperties
Also: if your List Report is configured with Analytical Chart, you cannot maintain the SelectionVariant in the Page Editor; instead reuse the chart's Presentation Variant if required.

**LANGUAGE**: Text
**CODE**:
```text
Do not set default filters for:
- Properties annotated with UI.Hidden or UI.HiddenFilter
- Properties listed in Capabilities.FilterRestrictions -> NonFilterableProperties

If List Report uses Analytical Chart:
- SelectionVariant may not be editable from Page Editor
- You can reuse the chart's PresentationVariant for both chart and table
```

**STEP**: 9 — Detach (set to None) and cleanup
**DESCRIPTION**: To remove the PresentationVariant or SelectionVariant reference from the table:
1. In Page Editor, set "Presentation Variant" or "Selection Variant: Annotation" to None.
   - Note: You cannot detach PresentationVariant when using Multiple Views.
2. This action removes the reference from the manifest/Page Editor configuration (for SelectionPresentationVariant may also remove manifest reference).
3. The actual annotation element (UI.SelectionPresentationVariant / UI.SelectionVariant) may remain in the annotation file. Remove unreferenced annotations manually from webapp/annotations/annotations.xml (delete the <Annotation ... Qualifier="..."> block) or run your project's annotation cleanup procedure/tooling to delete unreferenced annotations.

**LANGUAGE**: Text
**CODE**:
```text
Detach steps:
- Page Editor -> select Table -> set Presentation Variant = None
- Page Editor -> select Table -> set Selection Variant: Annotation = None
- Remove annotation element from annotations/annotations.xml if no longer used
- Optionally run Fiori Tools annotation cleanup (if available) to remove unreferenced UI.SelectionPresentationVariant and UI.PresentationVariant entries
```

**STEP**: 10 — Image references (editor screenshots)
**DESCRIPTION**: Screenshots referenced in the original docs used by docs/UI:
- images/Fiori_Tools_Presentation_Variant_Table_d2a0977.png
- images/Default_Filter_Table_4308a97.png
Include these paths if you replicate docs or UI help assets.
**LANGUAGE**: Text
**CODE**:
```text
Images:
- webapp/docs/images/Fiori_Tools_Presentation_Variant_Table_d2a0977.png
- webapp/docs/images/Default_Filter_Table_4308a97.png
```


--------------------------------

**TITLE**: Table Actions — Annotation and Page Editor Configuration for Fiori Elements

**INTRODUCTION**: Practical reference showing how to add, configure, move, and delete table actions and action menus for Fiori Elements List Report and Object Page tables. Contains concrete annotation examples (CDS and XML) and manifest snippet for cross-application navigation (semantic object/inbound) so code-generation agents can produce correct annotation records and manifest entries. Preserve inline column behavior via Inline = true.

**TAGS**: Fiori, annotations, UI.DataFieldForAction, UI.DataFieldForIntentBasedNavigation, CDS, XML, manifest.json, cross-application navigation, action menu

STEP: Add a table inline action (UI.DataFieldForAction) in CDS (CAP) and toggling Inline
DESCRIPTION: Create a DataFieldForAction entry for UI.LineItem so the action appears as a table column (Inline = true). If moved to toolbar set Inline = false (or remove Inline).
LANGUAGE: CDS
CODE:
```CDS
// Service-level CDS annotation: add DataFieldForAction to LineItem
// Replace MyService, MyEntity, and Approve with your names
service MyService {

  entity MyEntity as projection on my.MyEntity;

  // Define a bound action in your service (server OData action)
  action Approve(ID: UUID) returns Boolean;

  // Annotate the entity to add an inline action column
  annotate MyService.MyEntity with {
    @UI.LineItem: [
      // existing fields...
      { type: #DataFieldForAction,
        Action: 'Approve',        // server action name
        Inline: true,             // true => shows as table column (inline per-row action)
        Label: 'Approve',
        Criticality: #Positive    // optional: #Positive or #Negative or #None
      }
    ]
  };
}
```

STEP: Add a toolbar action (UI.DataFieldForAction) in CDS (CAP)
DESCRIPTION: Create a toolbar action by adding the DataFieldForAction with Inline = false (or omit Inline). Toolbar actions run in-app and do not support semantic criticality.
LANGUAGE: CDS
CODE:
```CDS
annotate MyService.MyEntity with {
  @UI.LineItem: [
    // toolbar actions are typically placed in a ToolBar configuration in Page Editor;
    // when represented as DataFieldForAction without Inline true it will be treated as a toolbar button.
    { type: #DataFieldForAction,
      Action: 'MassApprove',
      // Inline omitted or set to false => toolbar button
      Label: 'Mass Approve'
    }
  ]
};
```

STEP: Add an external navigation action (intent-based) as inline or toolbar (CDS)
DESCRIPTION: Add UI.DataFieldForIntentBasedNavigation to enable cross-app navigation using a semantic object and action. Inline true => shows per-row (column). Use Mapping to map local properties to target semantic object parameters. Use RequiresContext in toolbar actions to control whether selection is required.
LANGUAGE: CDS
CODE:
```CDS
annotate MyService.MyEntity with {
  @UI.LineItem: [
    { type: #DataFieldForIntentBasedNavigation,
      SemanticObject: 'Customer',     // target semantic object
      Action: 'display',              // target action
      Label: 'Display Customer',
      Inline: true,                   // true => inline (column); omit or false => toolbar
      // RequiresContext only meaningful for toolbar actions (controls if selection required)
      RequiresContext: false,
      // Optional mapping: map target parameter name to local property
      Mapping: [ { LocalProperty: 'CustomerID', TargetProperty: 'CustomerId' } ]
    }
  ]
};
```

STEP: Equivalent XML annotation for DataFieldForAction and DataFieldForIntentBasedNavigation
DESCRIPTION: Provide the same annotation snippets in XML form for tools that consume annotation XML files (Annotations.xml).
LANGUAGE: XML
CODE:
```XML
<!-- Annotations.xml snippet for UI.LineItem -->
<Annotations Target="MyService.MyEntity">
  <Annotation Term="UI.LineItem">
    <Collection>
      <!-- Inline row action column -->
      <Record Type="UI.DataFieldForAction">
        <PropertyValue Property="Action" String="Approve" />
        <PropertyValue Property="Inline" Bool="true" />
        <PropertyValue Property="Label" String="Approve" />
        <PropertyValue Property="Criticality" EnumMember="UI.CriticalityType/Positive" />
      </Record>

      <!-- Intent-based navigation -->
      <Record Type="UI.DataFieldForIntentBasedNavigation">
        <PropertyValue Property="SemanticObject" String="Customer" />
        <PropertyValue Property="Action" String="display" />
        <PropertyValue Property="Label" String="Display Customer" />
        <PropertyValue Property="Inline" Bool="true" />
        <!-- Mapping example -->
        <PropertyValue Property="Mapping">
          <Collection>
            <Record Type="UI.DataFieldForIntentBasedNavigation/Mapping">
              <PropertyValue Property="LocalProperty" String="CustomerID" />
              <PropertyValue Property="TargetProperty" String="CustomerId" />
            </Record>
          </Collection>
        </PropertyValue>
      </Record>
    </Collection>
  </Annotation>
</Annotations>
```

STEP: Configure target application manifest.json inbound entry (required for cross-app navigation)
DESCRIPTION: Add inbound definition(s) in the target application's manifest.json so the semantic object and action resolve in the Fiori Launchpad. This demonstrates structure (replace placeholders).
LANGUAGE: JSON
CODE:
```JSON
{
  "sap.app": {
    "id": "com.example.targetApp",
    "crossNavigation": {
      "inbounds": {
        "Customer-display": {
          "semanticObject": "Customer",
          "action": "display",
          "title": "Display Customer",
          "signature": {
            "parameters": {
              "CustomerId": { "required": false }
            }
          }
        }
      }
    }
  }
}
```

STEP: Page Editor steps — add action or function via UI
DESCRIPTION: Steps to create actions in the Page Editor (no code):
LANGUAGE: Text
CODE:
```text
1. In Page Editor, select the Table node -> Columns or Tool Bar node.
2. Click Add (+) and choose:
   - Action or Function for in-app OData action (bound to the same entity type as the table)
   - External Navigation for intent-based navigation (enter Semantic Object and Action)
3. Click Add. Tool updates: UI.DataFieldForAction or UI.DataFieldForIntentBasedNavigation record added.
   - When added as a table column, Inline = true is set.
```

STEP: Create an Action Menu in the toolbar (Page Editor)
DESCRIPTION: Action menus group multiple actions under a toolbar dropdown; actions cannot be in two menus or both inside and outside a menu.
LANGUAGE: Text
CODE:
```text
1. In Page Editor, Table node -> Tool Bar -> click Add Actions icon.
2. Click "Add Action Menu".
3. Provide a Label for the menu.
4. Select actions to include (an action can only be in one menu and cannot simultaneously be inside and outside a menu).
5. Click Add. The action menu annotation is created and persisted.
```

STEP: Properties that can be set and their annotation impact
DESCRIPTION: Mapping of UI properties to annotation fields. Use these fields in the CDS or XML examples above.
LANGUAGE: Text
CODE:
```text
Label:
 - Derived from Common.Label or @title if present; otherwise stored in UI.DataFieldForAction.Label.

Importance:
 - Set when action added as a table column (maps to UI.Importance for the column, see Table Columns/Importance).

Hidden:
 - Use UI.Hidden or hide-by-property logic (annotation-based) to hide actions.

Criticality (inline only):
 - Use UI.CriticalityType/Positive or /Negative or /None for inline actions.
 - Toolbar buttons cannot be semantically highlighted; criticality is not supported for toolbar actions.

Semantic Object Name & Action (intent-based):
 - Required for external navigation. Must match the target app and FLP configuration.

Mapping:
 - Use Mapping entries to map local properties to target semantic object parameters (one mapping per external nav action in Page Editor).

RequiresContext (toolbar only):
 - If true, user must select a table row for navigation; default false (no selection required).
```

STEP: Move actions between toolbar and columns (annotation change)
DESCRIPTION: Moving an action within the same table toggles Inline property. Ensure the action remains bound to the same entity type. Do not move the last action out of a menu if it would leave the menu empty.
LANGUAGE: Text
CODE:
```text
// Example: change inline behavior via CDS annotation
// Move column action to toolbar: set Inline = false or remove Inline
{ type: #DataFieldForAction, Action: 'Approve', Inline: false, Label: 'Approve' }

// Move toolbar to column: set Inline = true
{ type: #DataFieldForAction, Action: 'Approve', Inline: true, Label: 'Approve' }
```

STEP: Delete actions or action menus
DESCRIPTION: Deleting an action removes the UI.DataFieldForAction / UI.DataFieldForIntentBasedNavigation record; Common.Label or @title annotations for the action are not automatically deleted.
LANGUAGE: Text
CODE:
```text
// Deletion (Page Editor): click Delete (🗑) on the action or action menu.
// Result: corresponding UI.DataFieldForAction or UI.DataFieldForIntentBasedNavigation annotation entry is removed.
```

STEP: Supporting files and assets (file paths referenced)
DESCRIPTION: Keep these file references when generating UI assets or docs.
LANGUAGE: Text
CODE:
```text
Stylesheet (used in developer docs):
  ../css/sap-icons.css

Illustration used in original docs:
  images/Table_Toolbar_Actions_10ff824.png

Manifest file (target application):
  manifest.json (add crossNavigation/inbounds entries)
```

STEP: Implementation checklist for code generators
DESCRIPTION: Minimal validation checklist to ensure actions work as expected.
LANGUAGE: Text
CODE:
```text
- Confirm bound action/function exists and is bound to the same entity type as UI.LineItem.
- For intent navigation:
  - Verify semanticObject and action names match FLP target app manifest inbound definition.
  - Update target app manifest.json with corresponding "inbounds" (semanticObject/action).
- When requiring selection (RequiresContext), set the property only for toolbar actions.
- For inline column appearance, ensure Inline = true is present in the UI.DataFieldForAction or
  UI.DataFieldForIntentBasedNavigation annotation.
- Ensure action labels are present or add UI.DataFieldForAction.Label if Common.Label/@title missing.
```
--------------------------------

**TITLE**: Table Columns (Fiori tools) — Add / Configure Table Columns and Generated Annotations

**INTRODUCTION**: Short reference for programmatically reproducing the effects of the Fiori Tools Page Editor when adding, configuring, or removing table columns in an Object Page. Includes the exact annotation records the editor creates or modifies (UI.DataField in UI.LineItem), how labels are determined (Common.Label and CAP @title), how importance is added/removed, and how a boolean property can be used to hide a column.

**TAGS**: fiori-tools, annotations, UI.DataField, UI.LineItem, Common.Label, @title, CAP, CDS, Importance, Hidden, Table

STEP: 1 — Page assets referenced by Page Editor

DESCRIPTION: The Page Editor references UI icon CSS in the UI. Preserve the same path for local tooling or previews.

LANGUAGE: HTML

CODE:
```html
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```

STEP: 2 — Add a column (what the editor does / where annotation is added)

DESCRIPTION: When you add a column via the Page Editor (Columns node → Add → choose column type → Add), a UI.DataField record is added into the UI.LineItem annotation of the target entity. The editor:
- sets Value.Path to the property selected,
- uses existing Common.Label or CAP @title where available (see Step 3),
- sets Importance to None (no annotation) by default,
- optionally adds a Hidden/Hide-by-Property reference if you enable the Hidden toggle and select a boolean property.

LANGUAGE: XML

CODE:
```xml
<!-- Example: annotations.xml entry added by the Page Editor under UI.LineItem -->
<Annotations Target="MyService.MyEntityType">
  <Annotation Term="UI.LineItem">
    <Collection>
      <Record Type="UI.DataField">
        <!-- Value is set to the selected property -->
        <PropertyValue Property="Value">
          <Path>MyProperty</Path>
        </PropertyValue>
        <!-- Label is only added here if the editor created a local override.
             Otherwise the editor uses Common.Label or @title from the model (see Step 3). -->
        <!-- <PropertyValue Property="Label" String="Overridden Column Label"/> -->

        <!-- Importance is added only when changed from None (see Step 4) -->
        <!-- <PropertyValue Property="Importance" EnumMember="UI.Importance/High"/> -->

        <!-- Hidden: illustrative example of how the editor references a boolean property
             as a hide condition when the Hidden toggle is used -->
        <!-- <PropertyValue Property="Hidden" Path="IsHidden"/> -->
      </Record>
      <!-- other DataField records -->
    </Collection>
  </Annotation>
</Annotations>
```

STEP: 3 — Label resolution and generated records (Common.Label vs CAP @title vs local Label)

DESCRIPTION: The editor checks for Common.Label or CAP @title on the selected property:
- If Common.Label or @title exists, the editor generates a UI.DataField without a Label property. The UI shows the existing Common.Label/@title value as the column title.
- If you edit the column Label in the Property Panel, the editor will create a local Label property in the generated UI.DataField record (to avoid changing the shared annotation).
- If no Common.Label/@title exists, the editor will create a UI.DataField with an auto-generated Label that you can change in the Property Panel.

LANGUAGE: CDS

CODE:
```cds
// CAP/CDS example: property annotated with @title (used by the Page Editor)
entity Product {
  key ID   : UUID;
  Name     : String @title : 'Product Name';  // CAP @title is used by Page Editor as column title
  Price    : Decimal(9,2);
}
```

LANGUAGE: XML

CODE:
```xml
<!-- If property had @title/Common.Label: the editor generates UI.DataField WITHOUT Label (uses shared annotation) -->
<Annotations Target="MyService.Product">
  <Annotation Term="UI.LineItem">
    <Collection>
      <Record Type="UI.DataField">
        <PropertyValue Property="Value"><Path>Name</Path></PropertyValue>
        <!-- No Label property here because @title/Common.Label is used -->
      </Record>
    </Collection>
  </Annotation>
</Annotations>

<!-- If user edits the column label in the Property Panel: the editor adds a local override -->
<Annotations Target="MyService.Product">
  <Annotation Term="UI.LineItem">
    <Collection>
      <Record Type="UI.DataField">
        <PropertyValue Property="Value"><Path>Name</Path></PropertyValue>
        <PropertyValue Property="Label" String="Custom Product Title"/> <!-- local override -->
      </Record>
    </Collection>
  </Annotation>
</Annotations>
```

STEP: 4 — Importance: default behavior, local change, and deletion

DESCRIPTION: By default a newly added column has Importance = None (no UI.Importance annotation is written). If you set Importance in the Property Panel, the editor writes a PropertyValue Importance with an EnumMember under the UI.DataField record. If you change Importance back to None, the editor removes the UI.Importance property from the local annotation file. When Importance is defined in a lower/base layer, the drop-down shows e.g. "High (base layer)".

LANGUAGE: XML

CODE:
```xml
<!-- Importance not set (default): no Importance property emitted -->
<Record Type="UI.DataField">
  <PropertyValue Property="Value"><Path>Price</Path></PropertyValue>
</Record>

<!-- Importance set to High in local layer: editor writes Importance EnumMember -->
<Record Type="UI.DataField">
  <PropertyValue Property="Value"><Path>Price</Path></PropertyValue>
  <PropertyValue Property="Importance" EnumMember="UI.Importance/High"/>
</Record>

<!-- If set back to None: the editor deletes the Importance property from the local annotation file -->
```

STEP: 5 — Hidden: configure hide-by-boolean-property (toggle + property path)

DESCRIPTION: When you enable the Hidden feature in the Property Panel, the editor allows you to pick a boolean property that determines whether the column is hidden at runtime. The editor stores this as a PropertyValue on the UI.DataField record that references the chosen boolean property path. (The Page Editor UI field called "Hide by Property" is the boolean property selector.)

LANGUAGE: XML

CODE:
```xml
<!-- Illustrative: editor writes a reference to a boolean property used to hide the column.
     The exact Property/Term name in your project may vary; the Page Editor stores the chosen
     boolean property's path as a PropertyValue on the generated UI.DataField record. -->
<Record Type="UI.DataField">
  <PropertyValue Property="Value"><Path>StockKeeping</Path></PropertyValue>

  <!-- This is the hide-by-property reference created by the editor when Hidden is enabled -->
  <!-- Example: Path points to a boolean property "IsHidden" in the same entity -->
  <PropertyValue Property="Hidden" Path="IsHidden"/>
</Record>
```

STEP: 6 — Delete column: what is removed vs preserved

DESCRIPTION: When a column is deleted in the Page Editor:
- any locally maintained UI.DataField record (the one created in the local annotation file) is removed completely.
- shared annotations on the model (Common.Label, CAP @title) are NOT removed by the editor.
- if the column had a locally added Label or Importance property, those local properties are removed when the record is deleted.

LANGUAGE: XML

CODE:
```xml
<!-- Before deletion: local UI.DataField exists -->
<Annotations Target="MyService.Product">
  <Annotation Term="UI.LineItem">
    <Collection>
      <Record Type="UI.DataField">
        <PropertyValue Property="Value"><Path>Name</Path></PropertyValue>
        <PropertyValue Property="Label" String="Custom Product Title"/>
      </Record>
    </Collection>
  </Annotation>
</Annotations>

<!-- After deletion: the local Record is removed; shared @title/Common.Label (in CDS or shared annotations) remains untouched -->
<Annotations Target="MyService.Product">
  <Annotation Term="UI.LineItem">
    <Collection>
      <!-- Record removed -->
    </Collection>
  </Annotation>
</Annotations>
```


--------------------------------

**TITLE**: Table Section — Add, Move, Delete, and Maintain Properties (UI.Facets / UI.LineItem)

**INTRODUCTION**: Action-oriented reference for programmatically adding, moving, deleting, and updating Fiori table sections. Includes the exact annotation changes created by the editor: creation of a UI.LineItem annotation (empty collection), addition or update of UI.Facets with a reference facet that points to the created UI.LineItem, and behavior notes for layered annotations and CAP CDS overrides.

**TAGS**: fiori, annotations, UI.Facets, UI.LineItem, table-section, CAP, CDS, SAP Fiori

**STEP**: Add Table Section

**DESCRIPTION**: Use the Page Editor to add a table section. The editor creates a UI.LineItem annotation (empty collection) and a UI.Facets entry referencing that UI.LineItem. If UI.Facets did not exist it will be created. If UI.Facets exists in an underlying layer it will be overridden. For CAP/ CDS, the editor will add a using statement to the overridden CDS file if it is missing.

Technical result (example annotation XML fragments). Replace MyService.MyEntityType and Qualifier with your entity and qualifier names.

**LANGUAGE**: HTML

**CODE**:
```html
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Example: add an empty UI.LineItem annotation with a qualifier -->
<Annotations Target="MyService.MyEntityType">
  <!-- Named/qualified LineItem that will be populated later by the Table Section -->
  <Annotation Term="UI.LineItem" Qualifier="MyTableSection">
    <Collection/>
  </Annotation>

  <!-- Ensure UI.Facets exists and add a ReferenceFacet pointing to the qualified LineItem -->
  <Annotation Term="UI.Facets">
    <Collection>
      <Record Type="UI.ReferenceFacet">
        <PropertyValue Property="Label" String="My Table Section Label"/>
        <!-- annotationPath uses the qualified UI.LineItem created above -->
        <PropertyValue Property="Target" AnnotationPath="@UI.LineItem#MyTableSection"/>
      </Record>
      <!-- other facets... -->
    </Collection>
  </Annotation>
</Annotations>
```

**LANGUAGE**: CDS

**CODE**:
```cds
// For CAP CDS: the editor will insert a using statement in the overridden file if missing.
// Example (placeholder): add any required using/import lines to the CDS file:
using { SomeAspect } from '@sap/cds/common';
```

---

**STEP**: Move Table Section

**DESCRIPTION**: Reorder facets (sections) in the UI.Facets collection using drag-and-drop in the Page Editor. The editor reorders the UI.Facets collection records; the runtime renders sections in the order of the UI.Facets collection. To move multiple sections, Ctrl+Click to multi-select then drag.

**LANGUAGE**: Text

**CODE**:
```text
UI.Facets collection before (order):
1) ReferenceFacet -> @UI.LineItem#A
2) ReferenceFacet -> @UI.LineItem#B
3) ReferenceFacet -> @UI.LineItem#C

After dragging element 3 to position 1, UI.Facets collection becomes:
1) ReferenceFacet -> @UI.LineItem#C
2) ReferenceFacet -> @UI.LineItem#A
3) ReferenceFacet -> @UI.LineItem#B
```

---

**STEP**: Delete Table Section

**DESCRIPTION**: Delete the facet record from UI.Facets. This removes the ReferenceFacet entry from the UI.Facets annotation in the layer where the deletion is performed. Orphaned UI.LineItem annotations are not automatically removed — you must run the cleanup procedure to delete unreferenced UI.LineItem annotations.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Delete the ReferenceFacet record (example: remove the matching Record from UI.Facets) -->
<Annotations Target="MyService.MyEntityType">
  <Annotation Term="UI.Facets">
    <Collection>
      <!-- Remove the Record that references @UI.LineItem#MyTableSection -->
      <!-- Remaining facets stay intact -->
    </Collection>
  </Annotation>

  <!-- Note: UI.LineItem#MyTableSection may still exist; run cleanup to remove unreferenced annotations -->
</Annotations>
```

**LANGUAGE**: Text

**CODE**:
```text
Delete steps:
1. Open Page Editor and switch to the section layer.
2. Click Delete (wastebasket) on the section -> Confirm Delete.
3. Editor removes the ReferenceFacet record from UI.Facets in that layer.
4. Run explicit cleanup to remove orphaned @UI.LineItem annotations (not deleted automatically).
```

---

**STEP**: Maintain Table Section Properties — Label

**DESCRIPTION**: Update the section's label via the properties pane. This updates the Label property of the ReferenceFacet in UI.Facets. The change is reflected in the Page Editor and the application preview.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Update the ReferenceFacet Label -->
<Annotations Target="MyService.MyEntityType">
  <Annotation Term="UI.Facets">
    <Collection>
      <Record Type="UI.ReferenceFacet">
        <PropertyValue Property="Label" String="Updated Section Label"/>
        <PropertyValue Property="Target" AnnotationPath="@UI.LineItem#MyTableSection"/>
      </Record>
      <!-- other facets -->
    </Collection>
  </Annotation>
</Annotations>
```

---

**STEP**: Maintain Table Section Properties — Hidden

**DESCRIPTION**: Toggle the Hidden property for a section using the properties pane. The Hidden property is stored as an annotation property on the facet (or in a visibility-related annotation). See the referenced Hidden documentation for rules and evaluation.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Example: add a boolean or expression-based visibility annotation for the facet -->
<Annotations Target="MyService.MyEntityType">
  <Annotation Term="UI.Facets">
    <Collection>
      <Record Type="UI.ReferenceFacet">
        <PropertyValue Property="Label" String="My Table Section"/>
        <PropertyValue Property="Target" AnnotationPath="@UI.LineItem#MyTableSection"/>
        <!-- Example Hidden usage: a boolean literal or path/expression as supported -->
        <PropertyValue Property="Hidden" Bool="false"/>
      </Record>
    </Collection>
  </Annotation>
</Annotations>
```

---

**STEP**: Related Files and Links

**DESCRIPTION**: Preserve file paths and reference pages for troubleshooting or deeper reading. Use these links and file paths in code editors or documentation lookup.

**LANGUAGE**: Text

**CODE**:
```text
Related documentation pages:
- Add/Move/Delete/Label reference: table-section-fc59378.md#loiofc593789991c46348b31c1bc3b9d9182__section_g5r_hpb_zrb
- Move: table-section-fc59378.md#loiofc593789991c46348b31c1bc3b9d9182__section_udp_pxx_xrb
- Label: table-section-fc59378.md#loiofc593789991c46348b31c1bc3b9d9182__section_yn2_2qb_zrb
- Delete: table-section-fc59378.md#loiofc593789991c46348b31c1bc3b9d9182__section_cwh_qxx_xrb
- Appendix Label: appendix-457f2e9.md#loiod44832d99bdf4f73ba14cdbb16dc9301
- Appendix Hidden: appendix-457f2e9.md#loiof7ad71792a0044d6b6172f078827bdc0

Related topics:
- Table Actions: table-actions-da1931b.md
- Table Columns: table-columns-a80d603.md
```
--------------------------------

**TITLE**: Taskbar Notification for Annotation File Updates in Fiori Tools

**INTRODUCTION**: Brief guidelines and code examples to detect annotation-file updates originating from the Page Editor and show a taskbar-style notification only for those editor-originated updates. Includes event handling, writing the annotation file, and three platform-ready notification implementations (Browser/Desktop, VS Code extension, SAP UI5 in-app).

**TAGS**: fiori-tools, annotations, page-editor, notification, taskbar, vscode, sapui5, browser

**STEP**: 1 — Detect annotation updates and distinguish origin

**DESCRIPTION**: In the Page Editor integration, emit or listen for a structured event when the annotation file is updated programmatically by user actions in the Page Editor. The event payload must indicate the origin so the notification logic can show a taskbar notification only when origin === "page-editor". If origin === "file-system" (direct edits to the file), do not show the notification.

**LANGUAGE**: TypeScript

**CODE**:
```TypeScript
// Define a minimal event payload interface
interface AnnotationUpdateEvent {
  filePath: string;                // full path to the annotation file
  updatedBy: 'page-editor' | 'file-system'; // source of the change
  changes?: any;                   // optional details about changes
  timestamp?: number;
}

// Example: Page Editor emits an event when it updates the annotation file.
// The consumer (notification manager) subscribes to this emitter.
import { EventEmitter } from 'events';

const annotationEvents = new EventEmitter();

// Page Editor: when performing an update, emit event with updatedBy = 'page-editor'
async function pageEditorUpdateAnnotation(filePath: string, newContents: string) {
  // write annotation file (example shown later)
  await writeAnnotationFile(filePath, newContents);

  // emit update event for consumers
  const evt: AnnotationUpdateEvent = {
    filePath,
    updatedBy: 'page-editor',
    timestamp: Date.now(),
  };
  annotationEvents.emit('annotationUpdated', evt);
}

// File-system watcher: when file changes are detected directly (e.g. external editor),
// the watcher should emit with updatedBy = 'file-system'.
function onFileSystemChangeDetected(filePath: string) {
  const evt: AnnotationUpdateEvent = {
    filePath,
    updatedBy: 'file-system',
    timestamp: Date.now(),
  };
  annotationEvents.emit('annotationUpdated', evt);
}

// Notification consumer: only show notification for page-editor updates
annotationEvents.on('annotationUpdated', (evt: AnnotationUpdateEvent) => {
  if (evt.updatedBy === 'page-editor') {
    // Call platform-specific notification function (examples below)
    showTaskbarNotification(`Annotations updated: ${path.basename(evt.filePath)}`, evt.filePath);
  } else {
    // Do not show taskbar notification for direct file edits
    console.debug('Annotation file changed directly on disk; skip taskbar notification.');
  }
});
```

**STEP**: 2 — Write annotation file reliably from the Page Editor

**DESCRIPTION**: Use atomic write operations to update the annotation file to avoid race conditions. After writing, emit the annotationUpdated event with updatedBy = 'page-editor'.

**LANGUAGE**: TypeScript (Node.js)

**CODE**:
```TypeScript
import * as fs from 'fs/promises';
import * as path from 'path';

async function writeAnnotationFile(filePath: string, contents: string): Promise<void> {
  // Ensure directory exists
  await fs.mkdir(path.dirname(filePath), { recursive: true });

  // Atomic write pattern: write to temp file then rename
  const tmpPath = `${filePath}.tmp-${Date.now()}`;
  await fs.writeFile(tmpPath, contents, { encoding: 'utf8' });
  await fs.rename(tmpPath, filePath);
}
```

**STEP**: 3 — Platform implementations of showTaskbarNotification

**DESCRIPTION**: Provide small, focused implementations for different target platforms. Call one of these from the annotationUpdated handler above depending on environment.

**LANGUAGE**: JavaScript/TypeScript (Browser/Desktop Notification API)

**CODE**:
```TypeScript
// Browser / Desktop Notification API (for web or electron-hosted Page Editor)
async function showTaskbarNotification_Browser(title: string, filePath?: string) {
  if (typeof Notification === 'undefined') {
    console.warn('Notification API not available in this environment.');
    return;
  }

  if (Notification.permission === 'granted') {
    new Notification(title, { body: filePath || '' });
    return;
  }

  if (Notification.permission !== 'denied') {
    const permission = await Notification.requestPermission();
    if (permission === 'granted') {
      new Notification(title, { body: filePath || '' });
    }
  }
}
```

**LANGUAGE**: TypeScript (VS Code extension API)

**CODE**:
```TypeScript
// For a VS Code extension host: use the vscode API to set a message in the status bar
import * as vscode from 'vscode';

function showTaskbarNotification_VSCode(message: string, filePath?: string) {
  // Quick info popup
  vscode.window.showInformationMessage(message, 'Open').then(selection => {
    if (selection === 'Open' && filePath) {
      vscode.workspace.openTextDocument(filePath).then(doc => vscode.window.showTextDocument(doc));
    }
  });

  // Optional: short status bar message as "taskbar" style feedback
  const statusMessage = vscode.window.setStatusBarMessage(message, 5000); // auto-hide after 5s
  // statusMessage is disposable if you want to clear early: statusMessage.dispose();
}
```

**LANGUAGE**: JavaScript (SAP UI5 in-app simple feedback)

**CODE**:
```javascript
// In-app fallback using sap.m.MessageToast for Page Editor embedded in SAP UI5
// (use when integrating Page Editor into a UI5 shell)
sap.ui.require(["sap/m/MessageToast"], function(MessageToast) {
  function showTaskbarNotification_UI5(message, filePath) {
    MessageToast.show(message, { duration: 4000, at: "center center" });
    // Optionally open a side panel or navigate to the annotation editor view
  }
  // Export or wire showTaskbarNotification_UI5 for use by the event handler
});
```

**STEP**: 4 — Choose and wire the correct notification implementation

**DESCRIPTION**: Detect the runtime and call the appropriate showTaskbarNotification_* helper from the annotationUpdated event handler. Keep the condition that direct file edits (updatedBy = 'file-system') do not trigger taskbar notifications.

**LANGUAGE**: TypeScript

**CODE**:
```TypeScript
function showTaskbarNotification(message: string, filePath?: string) {
  // Runtime detection (examples)
  if (typeof vscode !== 'undefined') {
    // Running as VS Code extension
    showTaskbarNotification_VSCode(message, filePath);
    return;
  }

  if (typeof window !== 'undefined' && typeof Notification !== 'undefined') {
    // Browser or Electron
    showTaskbarNotification_Browser(message, filePath);
    return;
  }

  // Fallback (e.g. UI5 embedded)
  if (typeof sap !== 'undefined') {
    // call UI5 MessageToast implementation
    // @ts-ignore
    showTaskbarNotification_UI5(message, filePath);
    return;
  }

  // Last-resort: console log
  console.info('Notification fallback:', message, filePath);
}
```
--------------------------------

**TITLE**: Guided Development for SAP Fiori elements — Launching, Project Management, and Accessibility

**INTRODUCTION**: Practical, code-focused reference for launching and using Guided Development in SAP Fiori tools (VS Code). Includes exact commands, keyboard sequences, file paths, UI actions, project data structure, refresh actions, and accessibility keyboard mappings. Use this to script or automate interactions, implement extension integrations, or guide users programmatically.

**TAGS**: fiori-tools, guided-development, sap-fiori-elements, vscode, commands, accessibility, project-management

**STEP**: Launch Guided Development — Command Palette

**DESCRIPTION**: Open Guided Development from VS Code's Command Palette. Use the keyboard shortcut to open the palette, then run one of the provided Fiori commands. "Open Guided Development" opens in the current editor region (or a new tab if none). "Open Guided Development to the Side" opens it in a split column to the side.

**LANGUAGE**: Text

**CODE**:
```text
1) Open Command Palette:
   macOS: ⌘ + ⇧ + P
   Windows/Linux: Ctrl + ⇧ + P

2) Type and select one of:
   - Fiori: Open Guided Development
   - Fiori: Open Guided Development to the Side

3) Then select your SAP Fiori elements project from the Project list in the Guided Development UI.
```

**STEP**: Launch Guided Development — Folder Context Menu

**DESCRIPTION**: Open Guided Development by right-clicking an existing SAP Fiori elements project folder in the Explorer and selecting the context menu action. This opens Guided Development to the side of the current editor.

**LANGUAGE**: Text

**CODE**:
```text
1) In VS Code Explorer, right-click the project folder that contains your SAP Fiori elements app.
2) Choose: SAP Fiori tools - Open Guided Development
   (This opens Guided Development in a new column, side-by-side with the current file.)
```

**STEP**: Project Context and What Guided Development Uses

**DESCRIPTION**: Guided Development operates on a single selected project. The tab header shows the selected project name. The following project-specific data is sourced from that project and used across guides. You can add annotations from services other than mainService.

- Entities (Entity list)
- Data sources (Model list)
- Pages (Page list)
- Annotation terms defined in the service

Provide or validate this JSON-like structure in extension integrations or automation to ensure Guided Development receives the expected project data.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "projectName": "my-fiori-app",
  "entities": [
    "SalesOrder",
    "Customer",
    "Product"
  ],
  "dataSources": [
    {
      "name": "mainService",
      "url": "/sap/opu/odata/sap/MAIN_SRV/"
    },
    {
      "name": "analyticsService",
      "url": "/sap/opu/odata/sap/ANALYTICS_SRV/"
    }
  ],
  "pages": [
    "ListReport",
    "ObjectPage"
  ],
  "annotationTerms": [
    "com.sap.vocabularies.UI.v1.LineItem",
    "com.sap.vocabularies.UI.v1.HeaderInfo"
  ],
  "note": "Annotations from services other than mainService are supported."
}
```

**STEP**: Select or Change the Project (UI Steps)

**DESCRIPTION**: Change the active project used by Guided Development via the toolbar's "Select Project" control.

**LANGUAGE**: Text

**CODE**:
```text
1) In Guided Development toolbar, click: Select Project
2) Pick the desired project from the Project list.

Optional: If you need a visual asset reference, the documentation uses:
images/SelectProject_9ea63e4.png
```

**STEP**: Refresh Guided Development (When and How)

**DESCRIPTION**: Refresh Guided Development when projects in the workspace change, or when the current project changes outside Guided Development (new pages, updated services). Use the Refresh icon inside the Project list or toolbar.

**LANGUAGE**: HTML

**CODE**:
```html
<!-- Refresh icon example (class used by the UI): -->
<span class="SAP-icons-V5"></span>  <!-- (Refresh) -->

<!-- Actions to perform programmatically or via UI automation: -->
1) Click Refresh icon inside the Project list when a new project is added to the workspace.
2) Click Refresh icon on the toolbar next to the Project list when the current project changed outside Guided Development.
```

**STEP**: Accessibility — Keyboard Navigation and High Contrast

**DESCRIPTION**: Keyboard-first navigation supported. Use these key mappings to navigate and operate within Guided Development (for accessibility testing, automation, or documentation for users).

**LANGUAGE**: Text

**CODE**:
```text
Navigation keys:
- Arrow Up / Arrow Down: move focus between items within a section
- Tab: move focus to the next focusable section or control
- Shift + Tab: move focus to the previous section or control
- Enter: activate the focused control (open guide, select project, expand/collapse)
- High Contrast: Guided Development supports VS Code/OS high contrast themes
```

**STEP**: Preserve Included Stylesheet (Documentation Assets)

**DESCRIPTION**: The documentation references a stylesheet for SAP icons. Preserve this path when copying or embedding the documentation HTML in tools or extensions.

**LANGUAGE**: HTML

**CODE**:
```html
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```
--------------------------------

**TITLE**: Visualizing and Managing OData/CAP Annotations with Service Modeler

**INTRODUCTION**: Quick, code-focused guide for using SAP Fiori Tools — Service Modeler to view, search, open source, override, edit, and delete OData or CAP annotation files. Includes exact commands, file locations, and minimal XML examples showing local override behavior.

**TAGS**: fiori-tools, service-modeler, annotations, odata, cap, xml, vscode, fiori

**STEP**: Supported services & annotation scope

**DESCRIPTION**: Clarify what annotations are supported and where annotation metadata lives in a Fiori project. Use this when generating tooling or scripts that inspect or edit annotations.

**LANGUAGE**: plaintext

**CODE**:
```plaintext
Supported annotation sources:
- OData service annotations (backend $metadata)
- CAP service annotations

Local annotation file location (Fiori project):
/webapp/annotations/<filename>.xml

Note:
- Annotations are associated with entity types, entity sets, and properties.
- Local annotation entries (same Target, Term, Qualifier) override backend annotations.
- Backend annotations are read-only in Service Modeler; edit local files to override.
```

**STEP**: Launch Service Modeler (VS Code)

**DESCRIPTION**: Exact ways to open Service Modeler from VS Code. Use these command strings or UI actions in generated instructions.

**LANGUAGE**: plaintext

**CODE**:
```plaintext
1) Command Palette:
   - Open Command Palette (Ctrl+Shift+P / Cmd+Shift+P)
   - Run: "Fiori: Service Modeler: Open Service Modeler"
   - Select the SAP Fiori elements project folder in the workspace.

2) Folder context menu:
   - Right-click any folder in the Fiori project
   - Click: "Override Annotations" (context menu provided by Fiori Tools)

3) From an open metadata file:
   - Open <project>/webapp/metadata.xml in editor
   - Click the "Annotations" icon in the editor gutter to open Service Modeler
```

**STEP**: View annotations & open source

**DESCRIPTION**: Actions to select an entity/property in the Service Modeler tree and open the source annotation file with highlighting. Useful for tools that automate navigation or UI testing.

**LANGUAGE**: plaintext

**CODE**:
```plaintext
1) In Service Modeler tree, expand a service and select an entity type or property.
2) The Annotation panel lists annotations for the selected target.
3) Click "Show in Source" (Show in Source icon) next to an annotation:
   - If the annotation is in a local file: opens /webapp/annotations/<filename>.xml and highlights the annotation fragment.
   - If the annotation is only backend: opens backend $metadata (read-only).
```

**STEP**: Local annotation XML — minimal example & override behavior

**DESCRIPTION**: Provide a minimal local annotation XML that overrides a backend annotation. Use this example when generating or editing local annotation files programmatically.

**LANGUAGE**: xml

**CODE**:
```xml
<?xml version="1.0" encoding="utf-8"?>
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
  <edmx:DataServices>
    <Schema xmlns="http://docs.oasis-open.org/odata/ns/edm" Namespace="MyAnnotations">
      <!-- Target must match the backend target (EntityType or EntitySet) -->
      <Annotations Target="MyService.Product">
        <!-- Annotation with a qualifier; local file overrides a backend annotation with same Target+Term+Qualifier -->
        <Annotation Term="com.sap.vocabularies.UI.v1.HeaderInfo" Qualifier="LocalQ">
          <Record>
            <PropertyValue Property="Type" String="LocalHeaderType"/>
          </Record>
        </Annotation>
      </Annotations>
    </Schema>
  </edmx:DataServices>
</edmx:Edmx>
```

**STEP**: Edit local annotations via XML Code Editor

**DESCRIPTION**: Steps to open the local annotation file in XML Code Editor, edit, and save. Include keyboard shortcuts for automation-friendly instructions.

**LANGUAGE**: plaintext

**CODE**:
```plaintext
1) In Service Modeler tree select target entity/property to highlight annotation.
2) In Annotation panel click "Show in Source" for the local annotation entry.
   - This opens /webapp/annotations/<filename>.xml in the XML Code Editor.
3) Edit the XML fragment as needed.
4) Save the file: Ctrl+S (Windows/Linux) or Cmd+S (macOS).
5) Local changes take precedence over backend annotations with identical Target+Term+Qualifier.
```

**STEP**: Delete a local annotation (UI & manual)

**DESCRIPTION**: Two ways to remove a local annotation: use the Service Modeler Delete icon (UI) or remove the <Annotation> element in the local XML file (text edit). Use this when generating scripts or UI instructions.

**LANGUAGE**: plaintext

**CODE**:
```plaintext
UI method:
1) Select the entity/property in tree.
2) In the Annotation panel, click the "Delete" (wastebasket) icon next to the local annotation.
   - This removes the local <Annotation> entry.

Manual method:
1) Open /webapp/annotations/<filename>.xml in editor.
2) Remove the <Annotation ...>...</Annotation> element for the target/qualifier.
3) Save the file (Ctrl+S / Cmd+S).

Example removal (XML): delete the entire <Annotation ...> element shown in the previous XML example.
```

**STEP**: Search annotations in Service Modeler

**DESCRIPTION**: How to filter annotations and the tree using the search box. Use this to implement test cases or automate annotation discovery.

**LANGUAGE**: plaintext

**CODE**:
```plaintext
1) Open Service Modeler.
2) Enter search text in the search box (upper-right of Service Modeler).
3) Results:
   - The Annotation panel shows matching annotations.
   - The tree view filters to entities/properties associated with the results.
4) Use exact term names, qualifiers, or partial text (annotation values) to filter.
```

**STEP**: Helpful files & assets (paths & icons)

**DESCRIPTION**: Key file paths, icon identifiers and image assets referenced by Service Modeler for tooling or UI tests.

**LANGUAGE**: plaintext

**CODE**:
```plaintext
Project files:
- Local annotations folder: /webapp/annotations/
- Local annotation file: /webapp/annotations/<filename>.xml
- Service metadata file: /webapp/metadata.xml

VS Code command:
- "Fiori: Service Modeler: Open Service Modeler"

Icons referenced:
- Annotations icon (editor gutter): "Annotations" (SAP icon)
- Show in Source icon: images/show_source_icon_dd4bbff.png
- Delete icon (wastebasket): used in Annotation panel

Stylesheet (UI reference):
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```
--------------------------------

**TITLE**: Working with Local Annotation Files in SAP Fiori Tools

**INTRODUCTION**: Practical reference for locating, creating, registering, and overriding OData annotations in an SAP Fiori project generated by Fiori tools. Shows file locations, manifest.json registration examples, an annotation XML example for overrides, and how annotation ordering is configured.

**TAGS**: fiori-tools, annotations, manifest.json, OData, localService, webapp, override

**STEP**: 1 — Locate annotation and local service folders

**DESCRIPTION**: Verify the files generated by Fiori tools. Local annotation files live under webapp/annotations and metadata / backend copies are placed under webapp/localService during project generation.

**LANGUAGE**: text

**CODE**:
```
Project root
├─ webapp/
│  ├─ annotations/            <-- local annotation files (e.g. annotations.xml, custom-annotations.xml)
│  └─ localService/           <-- copied backend metadata and annotation files (metadata.xml, annotations.xml)
└─ manifest.json              <-- registration of dataSources and annotation files
```

**STEP**: 2 — Example manifest.json registration (dataSource with localUri + model with annotations list)

**DESCRIPTION**: Register the backend OData service with a local copy of the metadata (localUri) and list local annotation files to be applied to the model. Edit manifest.json to add or update these entries.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.app": {
    "dataSources": {
      "mainService": {
        "uri": "/sap/opu/odata/sap/Z_MY_SERVICE_SRV/",
        "type": "OData",
        "settings": {
          "localUri": "localService/metadata.xml"
        }
      }
    }
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "mainService",
        "settings": {
          "annotations": [
            "annotations/annotations.xml",
            "annotations/custom-annotations.xml"
          ]
        }
      }
    }
  }
}
```

**STEP**: 3 — Create a new local annotation file

**DESCRIPTION**: Add a local annotation file in webapp/annotations, using the OData annotation XML structure. This file can add new terms or override backend annotations by repeating Target and Qualifier.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- File: webapp/annotations/custom-annotations.xml -->
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
  <edmx:DataServices>
    <Schema Namespace="MyService" xmlns="http://docs.oasis-open.org/odata/ns/edm">
      <!-- Define or override annotations for a target (entity, property, etc.) -->
      <Annotations Target="MyService.Product">
        <Annotation Term="UI.HeaderInfo" Qualifier="CustomHeader">
          <!-- Annotation content here -->
        </Annotation>
      </Annotations>
    </Schema>
  </edmx:DataServices>
</edmx:Edmx>
```

**STEP**: 4 — Register the new annotation file in manifest.json

**DESCRIPTION**: After creating the annotation file, add it to the annotations array under the model settings so the framework loads it. The file path is relative to webapp.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "mainService",
        "settings": {
          "annotations": [
            "annotations/annotations.xml",
            "annotations/custom-annotations.xml",  // newly added local file
            "annotations/another-annotation.xml"
          ]
        }
      }
    }
  }
}
```

**STEP**: 5 — Override backend annotations (copy target + qualifier)

**DESCRIPTION**: To change an annotation that exists in backend sources, copy the annotation element (with the same Target and Qualifier) into a local annotation file and adjust its contents. Local definitions take precedence over backend sources.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Example: override backend UI.LineItem defined for MyService.Product -->
<Annotations Target="MyService.Product" xmlns="http://docs.oasis-open.org/odata/ns/edm">
  <Annotation Term="UI.LineItem" Qualifier="Default">
    <!-- New/modified LineItem content that overrides the backend definition -->
  </Annotation>
</Annotations>
```

**STEP**: 6 — Control annotation file application order

**DESCRIPTION**: The sequence of local annotation files is defined in the manifest.json annotations array. Change the order of entries in that array to adjust the application sequence of local annotation files (the manifest defines which files are loaded and in what sequence).

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui5": {
    "models": {
      "": {
        "settings": {
          "annotations": [
            "annotations/01-base.xml",
            "annotations/02-customizations.xml",
            "annotations/03-overrides.xml"
          ]
        }
      }
    }
  }
}
```

**STEP**: 7 — Tools for editing annotations

**DESCRIPTION**: You can edit local annotation files either:
- Using the XML annotation language server (edit raw XML files directly).
- Using the Page Editor / annotation manager in Fiori tools for a schematic UI to view and reorder annotations.

Note: Service Modeler (annotation manager) support is available for OData services only. CAP CDS annotations are not maintained via Service Modeler.

**LANGUAGE**: text

**CODE**:
```
Edit options:
- Raw XML: webapp/annotations/*.xml (use XML language server/editor)
- Schematic view: Page Editor / Annotation Manager in Fiori tools (OData only)
```
--------------------------------

**TITLE**: Add SAP Fiori Application to an MTA Deployment File with the SAP Fiori Application Generator

**INTRODUCTION**: Instructions and code templates for updating or creating an MTA (mta.yaml) deployment file when generating an SAP Fiori application with the SAP Fiori Application Generator. Covers the two scenarios: updating an existing MTA file and creating a new MTA file during generation. Includes safe, annotated mta.yaml templates and actionable steps to ensure required services are present for Cloud Foundry deployment.

**TAGS**: fiori-tools, mta, mta.yaml, cloud-foundry, sap-fiori, sap-btp, deployment, generator

**STEP**: 1 — Generator updates an existing MTA file

**DESCRIPTION**: When you point the SAP Fiori Application Generator at a project folder that already contains an mta.yaml, the generator will automatically enable adding deployment configuration and update that existing mta.yaml with the new module/resource entries for your generated application. You must verify that the mta.yaml already contains the required services (for example, XSUAA, destination, HTML5 repo or application router) depending on whether you deploy with a managed Application Router or a standalone application router.

Action checklist:
- Select the project folder containing the existing mta.yaml in the generator UI.
- Confirm the generator sets "Add deployment configuration" to Yes.
- After generation, open mta.yaml and verify the required service resources are present.
- If required services are missing, add them using the MTA generator or the Application Router generator (recommended), or manually add them using the templates below.
- For local CAP projects: decide whether to generate an instance-based destination (added as a resource) or reuse an existing destination resource in mta.yaml.

**LANGUAGE**: YAML

**CODE**:
```yaml
# Minimal example to add a Fiori frontend module and required resources
ID: com.example.myproject
_schema-version: "3.2"

modules:
  - name: <fiori-front-end-module>
    type: html5  # or nodejs/html5 depending on your project
    path: <relative/path/to/generated/app>  # e.g., "app"
    requires:
      - name: <xsuaa-service>
      - name: <destination-service>   # if your app uses destinations
      - name: <html5-repo>            # if using SAP HTML5 repo (managed hosting)

resources:
  - name: <xsuaa-service>
    type: com.sap.xs.uaa
    properties:
      service-plan: application
      parameters:
        path: ./xs-security.json

  - name: <destination-service>
    type: org.cloudfoundry.managed-service
    parameters:
      service: destination
      service-plan: lite

  - name: <html5-repo>
    type: org.cloudfoundry.managed-service
    parameters:
      service: html5-apps-repo-rt
      service-plan: standard
```

**STEP**: 2 — Create a new MTA file during generation (Cloud Foundry)

**DESCRIPTION**: If the project folder has no mta.yaml, instruct the generator to create one by selecting Cloud Foundry as the target landscape and enabling "Add deployment configuration." The generator will place the generated MTA file in the same folder as the newly generated SAP Fiori application (useful for single-app projects). Note: this MTA is created inside the app folder and is not suited for multi-application reuse. Recommended practice for multi-app projects: create a top-level MTA and generate each Fiori app into its own subfolder.

Action checklist:
- In the generator UI, select:
  - Target landscape: Cloud Foundry
  - Add deployment configuration: Yes
- Verify the generated mta.yaml location and contents after generation.
- For shared/multi-app deployments: create the MTA at project root first, then generate the app in a subfolder so the MTA can be extended to include multiple modules.

**LANGUAGE**: YAML

**CODE**:
```yaml
# Example mta.yaml generated for a single Fiori app (created in the app folder)
ID: com.example.singleapp
_schema-version: "3.2"

modules:
  - name: my-fiori-app
    type: html5
    path: .
    requires:
      - name: my-xsuaa
      - name: my-destination

resources:
  - name: my-xsuaa
    type: com.sap.xs.uaa
    properties:
      service-plan: application
      parameters:
        path: ./xs-security.json

  - name: my-destination
    type: org.cloudfoundry.managed-service
    parameters:
      service: destination
      service-plan: lite
```

**STEP**: 3 — Recommended workflow and troubleshooting

**DESCRIPTION**: Best practices to avoid deployment issues and to ensure service dependencies are correct.

Action checklist:
- Use the SAP Fiori tools MTA generator or the Application Router generator (in SAP Business Application Studio) to create a complete mta.yaml with correct resource types and parameters.
- For CAP projects:
  - Option A: Generate an instance-based destination resource as part of the CF deployment configuration (adds a managed destination resource to mta.yaml).
  - Option B: Reuse an existing instance-based destination resource already defined in mta.yaml (ensure you reference the correct resource name in module requires).
- After generation, open mta.yaml and:
  - Confirm module names and paths point to the generated application folder.
  - Confirm resources include XSUAA, destination, and any other managed services required by your deployment model (e.g., html5-apps-repo or custom DB containers).
- If deploying multiple apps, restructure:
  - Create a top-level mta.yaml (project root).
  - Generate each app into its own subfolder.
  - Add each app as a separate module in the top-level mta.yaml.

**LANGUAGE**: None

**CODE**:
```text
Troubleshooting tips:
- If "Add deployment configuration" is not enabled automatically, ensure the selected folder path contains or can contain an mta.yaml.
- If the generator updates mta.yaml but deployment fails, check:
  - Module path and type are correct.
  - Required resources (xsuaa, destination, html5 repo) are present and correctly configured.
  - For destination usage, ensure the destination resource name matches what your app expects.
- Use the MTA or Application Router generator to avoid manual errors.
```
--------------------------------

**TITLE**: Add JavaScript Code Assist (SAPUI5) to an existing Fiori project

**INTRODUCTION**: Add JavaScript code completion / assist for SAPUI5 (requires SAPUI5 1.76+) by adding TypeScript type definitions and an ESLint plugin. This enables editor IntelliSense for SAPUI5 when editing .js files.

**TAGS**: fiori-tools, sapui5, javascript, eslint, typescript, code-assist, devDependencies

**STEP**: 1 — Update package.json devDependencies

**DESCRIPTION**: Add the required devDependencies to your project's package.json (root). Merge these entries into your existing "devDependencies" section or add a new section if missing. Versions shown are recommended ranges.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "devDependencies": {
    "eslint": "5.16.x",
    "@sap/eslint-plugin-ui5-jsdocs": "2.0.x",
    "@sapui5/ts-types": "1.92.x"
  }
}
```

**STEP**: 2 — Add tsconfig.json to project root

**DESCRIPTION**: Create a tsconfig.json in the project root to enable JS type checking and include the @sapui5/ts-types definitions. This tells editors/TypeScript language service to check JavaScript files and load the SAPUI5 type package.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "compilerOptions": {
    "module": "none",
    "noEmit": true,
    "checkJs": true,
    "allowJs": true,
    "types": ["@sapui5/ts-types"]
  }
}
```

**STEP**: 3 — Add .eslintrc to project root

**DESCRIPTION**: Create a .eslintrc file in the project root to enable the SAP ESLint plugin for UI5 JSDoc recommendations. Merge with existing ESLint config if present.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "plugins": ["@sap/ui5-jsdocs"],
  "extends": ["plugin:@sap/ui5-jsdocs/recommended", "eslint:recommended"]
}
```

**STEP**: 4 — Reinstall dependencies

**DESCRIPTION**: Remove the existing node_modules folder to ensure the new devDependencies are installed cleanly, then run npm install. Use the appropriate command for your platform.

**LANGUAGE**: Bash

**CODE**:
```bash
# POSIX (macOS, Linux, WSL)
rm -rf node_modules
npm install

# Windows (Command Prompt)
rmdir /s /q node_modules
npm install
```

**STEP**: 5 — Verify code completion in an editor

**DESCRIPTION**: Open a project .js file (for example, a controller) in your editor (e.g., VS Code). The TypeScript language service and the added @sapui5/ts-types definitions will provide SAPUI5 code completion and JSDoc-based assists. If IntelliSense does not appear, restart the editor/TypeScript server.

**LANGUAGE**: Bash

**CODE**:
```bash
# Example: open the controller file in VS Code
code webapp/controller/App.controller.js
# If IntelliSense is missing, restart the TypeScript server in VS Code:
# Command Palette -> TypeScript: Restart TS server
```
--------------------------------

**TITLE**: SAP Fiori Tools — Additional Configuration (Deployment, FLP, Advanced Options)

**INTRODUCTION**: This document describes the actionable configuration options exposed by the SAP Fiori launchpad wizard when creating a Fiori application with fiori-tools. Use these structured configuration examples to generate code, CI tasks, or automated project setup scripts. Includes ABAP and Cloud Foundry deployment parameters, FLP tile mapping settings, and advanced project options (themes, linting, code assist, npm workspaces, TypeScript).

**TAGS**: fiori-tools, sap, abap, cloud-foundry, flp, sapui5, eslint, typescript, cap, npm-workspaces, themes

STEP: 1 — Add Deployment Configuration

DESCRIPTION: Enable and configure deployment settings. Select target: ABAP or Cloud Foundry. When enabled, populate the required deployment fields exactly as shown. Respect the applicability notes: some fields are not relevant for Steampunk (SAP Cloud Platform) or SAP Business Application Studio (BAS) contexts.

- Required top-level prompt: "Add Deployment Configuration?" -> Yes/No
- Choose target: "ABAP" or "CloudFoundry"

ABAP-specific prompts and rules:
- Destination name (required): ABAP destination to backend.
- Is this an SAP Cloud Platform system? -> Only for Steampunk detection (Yes/No).
- Target System URL: pre-filled from project; Not applicable in BAS.
- Client: options:
  - "Use project defined client - <value>"
  - "Enter client" (provide clientNumber)
  - "Use default system client"
  - Not applicable for Steampunk and in BAS.
- Is this an SAP S/4HANA Cloud system? -> Yes/No. Not applicable if isCloudPlatformSystem is true.
- SAPUI5 ABAP Repository (required): technical application name in ABAP repo.
- Package: ABAP package (use "$TMP" for local/non-transportable; not applicable for S/4HANA Cloud).
- Fetch Transport Request list from target system? -> Yes/No. If Yes, attempt to retrieve transport requests remotely; if retrieval fails, allow manual entry.
- Transport Request number: transport container ID; not applicable for S/4HANA Cloud.

Cloud Foundry-specific prompts:
- Destination name (required): Cloud Foundry destination to backend.

LANGUAGE: Plaintext

CODE:
```json
{
  "deployment": {
    "enabled": true,
    "target": "ABAP",                 /* or "CloudFoundry" */
    "abap": {
      "destinationName": "ABAP_DST",
      "isCloudPlatformSystem": false, /* Steampunk? true/false */
      "targetSystemUrl": "https://abap.example.com", /* Not applicable in BAS */
      "clientOption": "projectDefined", /* "projectDefined" | "enterClient" | "defaultSystemClient" */
      "projectDefinedClient": "xxx",
      "clientNumber": null,            /* required if clientOption == "enterClient" */
      "isS4HANACloud": false,          /* Not applicable when isCloudPlatformSystem==true */
      "sapui5AbapRepository": "Z_MY_FIORI_APP",
      "package": "$TMP",                /* Not applicable for S/4HANA Cloud */
      "fetchTransportRequestList": true,
      "transportRequestNumber": "I2019K12345" /* Not applicable for S/4HANA Cloud */
    },
    "cloudFoundry": {
      "destinationName": "CF_DST"
    }
  }
}
```

Notes:
- For ABAP transport details and concepts, see: https://help.sap.com/viewer/8b923a2175be4939816f0981b73856c7/7.2.12/en-US/60264ffa451548f9857f46423afdd1f1.html
- If "fetchTransportRequestList" is true and retrieval fails, tooling must allow manual "transportRequestNumber" entry.

STEP: 2 — Add FLP Configuration

DESCRIPTION: Add SAP Fiori launchpad (FLP) mapping for the application. Select "Yes" to add an FLP configuration step. If an FLP configuration already exists, present existing values and allow modifications.

Prompts:
- Semantic Object (string): business entity identifier (e.g., "PurchaseOrder").
- Action (string): operation on the semantic object (e.g., "display" or "approve").
- Title (string): tile title shown on the launchpad.
- Subtitle (optional string): extra description for the tile.

LANGUAGE: Plaintext

CODE:
```json
{
  "flpConfiguration": {
    "enabled": true,
    "semanticObject": "PurchaseOrder",
    "action": "display",
    "title": "Purchase Order Manager",
    "subtitle": "Approve and review POs" /* optional */
  }
}
```

STEP: 3 — Configure Advanced Options

DESCRIPTION: Configure advanced project options. Select "Yes" to expose these prompts. All options are optional unless specified. Preserve version constraints for themes and CAP/workspace interactions.

Options:
- SAPUI5 theme selection (choose one):
  - "Quartz Light" (no minimum) — https://help.sap.com/.../bf53ad16229e4e438dc0ea5c42064cff.html?q=-%09SAP%20Quartz%20Light%20
  - "Belize" (deprecated since 1.120; removed in 1.136+) — https://help.sap.com/.../977672c6940f48578d08d770bee236f2.html?q=SAP%20Belize
  - "Quartz Dark" (available in SAPUI5 >= 1.72) — https://help.sap.com/.../ed83b3029c724c9cb267cc4c6eff1068.html?q=SAP%20quartz%20dark
  - "Morning Horizon" (visible if min SAPUI5 version >= 1.102; default) — https://experience.sap.com/fiori-design-web/theming/
  - "Evening Horizon" (visible if min SAPUI5 version >= 1.102) — https://experience.sap.com/fiori-design-web/theming/
- Add ESLint configuration to project: includes eslint-plugin-fiori-custom; run npm run lint to check.
  - Plugin: https://www.npmjs.com/package/eslint-plugin-fiori-custom
- Add JavaScript code assist libraries: include ui5 code completion and recommended eslint/jsdoc settings.
  - More: Adding JavaScript Code Assist documentation (internal link path: adding-javascript-code-assist-5c561ed.md)
- Update project to use NPM Workspaces (CAP only): move UI app deps into app folder; prerequisite for TypeScript in CAP projects.
- Enable TypeScript (Experimental): only available if NPM Workspaces enabled in CAP; experimental.

Constraints and notes:
- Belize theme deprecated: avoid new projects that target SAPUI5 >= 1.136.
- Quartz Dark requires SAPUI5 >= 1.72.
- Morning/Evening Horizon shown only if SAPUI5 >= 1.102; Morning Horizon selected by default.
- TypeScript in CAP requires npmWorkspaces=true.

LANGUAGE: Plaintext

CODE:
```json
{
  "advancedOptions": {
    "enabled": true,
    "sapui5": {
      "minVersion": "1.102.0",
      "theme": "Morning Horizon", /* options: "Quartz Light" | "Belize" | "Quartz Dark" | "Morning Horizon" | "Evening Horizon" */
      "notes": {
        "Belize": "Deprecated since SAPUI5 1.120; removed in 1.136+",
        "QuartzDark": "Requires SAPUI5 >= 1.72",
        "Horizon": "Morning/Evening Horizon visible if minVersion >= 1.102; Morning is default"
      }
    },
    "eslint": {
      "add": true,
      "plugin": "eslint-plugin-fiori-custom",
      "lintCommand": "npm run lint"
    },
    "jsCodeAssist": {
      "add": true,
      "purpose": "Provides ui5 code completion, eslint rules, recommended jsdoc rules",
      "docLink": "adding-javascript-code-assist-5c561ed.md"
    },
    "capOptions": {
      "updateToNpmWorkspaces": false, /* CAP only */
      "notes": "Enabling npmWorkspaces allows app-local npm deps and is required for TypeScript support in CAP"
    },
    "typescript": {
      "enable": false,
      "status": "experimental",
      "requires": {
        "capNpmWorkspaces": true
      }
    }
  }
}
```


--------------------------------

**TITLE**: Generating an MTA Deployment File and App Router Project for SAP Fiori Apps

**INTRODUCTION**: This guide shows how to generate an Application Router configuration project (including mta.yaml) and add multiple SAP Fiori elements apps under a single root directory. It includes the exact VS Code command to launch the generator, expected project structure, and example configuration files (mta.yaml, package.json, .gitignore). Use these templates when creating or programmatically generating projects.

**TAGS**: fiori-tools, mta, approuter, cloud-foundry, sap-fiori, deployment, mta.yaml, generator

**STEP**: 1 — Launch the App Router Generator in VS Code

**DESCRIPTION**: Open the VS Code Command Palette and run the Fiori app router generator. This creates a root directory containing the router configuration and mta.yaml. Use the generated project as the host for multiple SAP Fiori apps.

**LANGUAGE**: Shell

**CODE**:
```shell
# In VS Code:
# Open Command Palette and run:
#   Fiori: Open CF Application Router Generator
# Shortcut: Cmd/Ctrl + Shift + P
```

**STEP**: 2 — Expected project root and file layout

**DESCRIPTION**: Verify or create the following files at the app router configuration project root. The router folder name can vary (example: router or configurable). Place each generated Fiori app into the root (or a subfolder) and update mta.yaml accordingly.

**LANGUAGE**: plaintext

**CODE**:
```
<project-root>/
├─ router/                # folder containing the app router configuration (name can vary)
├─ .gitignore             # files to ignore in source control
├─ mta.yaml               # MTA descriptor for the multi-target application
├─ package.json           # npm package definition for the router
├─ package-lock.json      # auto-generated after npm install or package changes
└─ projects/              # recommended location for generated SAP Fiori apps
   ├─ app1/
   └─ app2/
```

**STEP**: 3 — Minimal example mta.yaml template (place in project root)

**DESCRIPTION**: Template for mta.yaml that declares an approuter module and placeholder HTML5 modules for multiple Fiori apps. Adjust module names, types, paths and resources to match your environment and deployment target. Add required resources (e.g., html5-apps-repo, destination, xsuaa) as needed by your landscape.

**LANGUAGE**: YAML

**CODE**:
```yaml
_schema-version: "3.2"
ID: my.multitarget.app
version: 1.0.0

modules:
  - name: approuter
    type: nodejs
    path: router
    build-parameters:
      builder: npm
    properties:
      # adjust properties for your environment
      port: 8080
    requires:
      - name: html5-apps-repo  # example requirement: adjust/remove as needed

  - name: app1-html5
    type: html5
    path: projects/app1
    provides:
      - name: app1-content
        properties:
          url: /app1
    requires:
      - name: approuter
      - name: html5-apps-repo

  - name: app2-html5
    type: html5
    path: projects/app2
    provides:
      - name: app2-content
        properties:
          url: /app2
    requires:
      - name: approuter
      - name: html5-apps-repo

resources:
  - name: html5-apps-repo
    type: com.sap.html5-apps-repo
    properties: {}
```

**STEP**: 4 — Example package.json for the app router (in project root)

**DESCRIPTION**: Typical package.json for an Application Router using @sap/approuter. Update dependencies and scripts to match your project and build pipeline.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "name": "my-approuter",
  "version": "1.0.0",
  "description": "Application Router for multiple SAP Fiori apps",
  "scripts": {
    "start": "node node_modules/@sap/approuter/approuter.js",
    "build": "echo \"no build step\""
  },
  "dependencies": {
    "@sap/approuter": "^8.0.0"
  },
  "engines": {
    "node": ">=14"
  }
}
```

**STEP**: 5 — Example .gitignore (project root)

**DESCRIPTION**: Minimal .gitignore entries for the router project. Extend as needed for OS/editor-specific files.

**LANGUAGE**: plaintext

**CODE**:
```
node_modules/
dist/
.DS_Store
npm-debug.log
package-lock.json
```

**STEP**: 6 — Add new SAP Fiori apps into the router root

**DESCRIPTION**: After generating the router, create/add Fiori apps under the project root (recommended: projects/). Use the SAP Fiori application generator (VS Code extension or Yeoman generator) and point its target location to the project root or a subfolder. Then update mta.yaml to include each app module entry (module name, path, type, and requires).

**LANGUAGE**: Shell

**CODE**:
```shell
# Example workflow (choose VS Code generator or Yeoman):
# 1) In VS Code: Command Palette -> Fiori: Open Application Generator
#    - When prompted, set project location to <project-root>/projects/app1
#
# OR using Yeoman (if using generator CLI):
# npm install -g yo @sap/generator-fiori
# yo @sap/generator-fiori
#    # Choose project location: <project-root>/projects/app1
```

**STEP**: 7 — Router types and references

**DESCRIPTION**: There are different router deployment models: managed approuter (BTP service), Application Frontend Service, and standalone approuter. Choose the appropriate model and adapt mta.yaml and resources accordingly. Refer to the links below when selecting the router type and required resources.

**LANGUAGE**: plaintext

**CODE**:
```
References:
- SAP Tech Bytes: FAQ Managed Approuter vs. Standalone Approuter
  https://blogs.sap.com/2021/05/17/sap-tech-bytes-faq-managed-approuter-vs.-standalone-approuter/
- Developing HTML5 Applications in the Cloud Foundry Environment
  https://help.sap.com/products/BTP/65de2977205c403bbc107264b8eccf4b/11d77aa154f64c2e83cc9652a78bb985.html
```

**STEP**: 8 — Notes about package-lock.json and source control

**DESCRIPTION**: package-lock.json is generated automatically whenever npm modifies node_modules or package.json. Commit package-lock.json for reproducible installs, unless your policy excludes lock files.

**LANGUAGE**: plaintext

**CODE**:
```
# Guidance:
# - Keep package-lock.json in source control for deterministic builds (recommended).
# - If you intentionally exclude it, ensure CI provides deterministic dependency resolution.
```
--------------------------------

**TITLE**: Data Source Configuration for SAP Fiori Tools (VS Code & Business Application Studio)

**INTRODUCTION**: Step-by-step, code-focused instructions to configure data sources for SAP Fiori application generation using SAP Fiori tools in Visual Studio Code (VS Code) and SAP Business Application Studio (BAS). Covers connecting to SAP systems (ABAP & BTP), using OData endpoints (direct, destination/.dest, metadata XML), SAP Business Accelerator Hub (deprecated), and local CAP projects (Node.js and Java), with commands and file paths required during generation.

**TAGS**: fiori-tools, data-source, SAP, OData, CAP, ABAP, BTP, VS Code, BAS, metadata, destination, Node.js, Java

**STEP**: 1 — Connect to an SAP System (VS Code)

**DESCRIPTION**: Add or select a saved SAP system in VS Code for OData service discovery. Provide system name, system type (SAP ABAP), connection URL, optional client, and select authentication type (Service Key or Reentrance Ticket for SAP BTP-hosted ABAP; username/password or other scheme for on-premise). Save credentials to OS secure storage to avoid repeated authentication. If saved credentials expire, reauthenticate when prompted.

- Authentication types for SAP BTP-hosted ABAP:
  - Service Key: supply service key (admin provides). A browser tab will open for authentication.
  - Reentrance Ticket: provide SAP S/4HANA Cloud URL and log in via browser. Requires SAP S/4HANA Cloud 2408+.
- Save system credentials to:
  - Windows: Credential Manager
  - macOS: Keychain
- To update connection: delete saved system in SAP Systems view and recreate in generator.

**LANGUAGE**: Text

**CODE**:
```Text
Example system URL and client:
https://someurl:12345, client: 010
```

---

**STEP**: 2 — Connect to an SAP System (SAP Business Application Studio)

**DESCRIPTION**: In BAS, the SAP Fiori application generator lists configured destinations for the BAS instance. Select a destination to retrieve ODataV2/V4 services from the destination’s catalog. If access to a destination endpoint is missing, an error occurs. For BTP ABAP environment in BAS, account roles required: OrgManager, SpaceManager, SpaceDeveloper.

**LANGUAGE**: Text

**CODE**:
```Text
Note: Destinations must expose a catalog service listing available ODataV2 and ODataV4 services.
```

---

**STEP**: 3 — Connect to an OData Service with a Customized URL (Destination -> .dest)

**DESCRIPTION**: When the OData endpoint is reachable only through a destination in BAS, reference it using the destination name followed by `.dest`. The generator routes the request through the destination name.

**LANGUAGE**: Text

**CODE**:
```Text
If Destination host: https://someurl.com/someservice
and Destination name: MyDestination

Use URL in generator:
https://MyDestination.dest/someservice
```

---

**STEP**: 4 — Connect to an OData Service (Direct OData Endpoint)

**DESCRIPTION**: Provide the OData endpoint URL (authenticated or unauthenticated). Ensure endpoint protocol version matches the project template (OData V4 endpoint for an OData V4 template, etc.). The generator will validate the OData protocol version and prompt for credentials if necessary.

**LANGUAGE**: Text

**CODE**:
```Text
Ensure OData version matches template:
- OData V4 template -> provide OData V4 endpoint
- OData V2 template -> provide OData V2 endpoint
```

---

**STEP**: 5 — Upload a Metadata Document (metadata.xml / EDMX)

**DESCRIPTION**: Upload an EDMX-format metadata XML (metadata.xml) to generate an application without a backend. The generator validates the EDMX file, then enables entity selection. Generated app will use only mock data.

**LANGUAGE**: XML

**CODE**:
```XML
File: metadata.xml
Format supported: EDMX (EDMX/metadata XML format)
Note: Using metadata.xml => app uses mock data only
```

---

**STEP**: 6 — Connect to SAP Business Accelerator Hub (Deprecated)

**DESCRIPTION**: (Deprecated) Use SAP Business Accelerator Hub as a sandbox data source for development only. Log into https://api.sap.com at least once before connecting. In the generator, choose Connect to SAP Business Accelerator Hub, select a predefined service, supply username/password, and proceed. Not recommended for production or SAP Fiori UI development. Use BAS Service Center instead.

**LANGUAGE**: Text

**CODE**:
```Text
Steps:
1. Data Source: Connect to SAP Business Accelerator Hub
2. Select predefined service (industry-specific)
3. Enter Username and Password
4. Click Next to generate (sandbox only)

Caution: Deprecated in future releases. Not for production.
```

---

**STEP**: 7 — Use a Local CAP Project (Overview & Notes)

**DESCRIPTION**: Select a detected local SAP CAP project or manually browse to its folder. The generator reads services defined in the CAP project and lists OData services to use. Limitations:
- Local CAP Project support: List Report Object Page and Analytical List Page templates based on OData V4 only (not available for Worklist or Overview Page).
- CAP defaults to OData V4. If you require OData V2 you can use CAP OData V2 support, but avoid mixing V2 and V4 apps inside the same app folder in the CAP project.

**LANGUAGE**: Text

**CODE**:
```Text
Note: If generator cannot find a compatible @sap/cds major version matching the CAP project,
app generation will be blocked (invalid @sap/cds version).
```

---

**STEP**: 8 — SAP CAP Node.js Project (Prereqs & Generator Steps)

**DESCRIPTION**: Prepare Node.js CAP project and generate app using the generator.

Prerequisites:
- Node.js installed
- If using sample projects, set workspace root to cloned repo and run npm install

Generator steps (condensed):
1. Start SAP Fiori Elements generator.
2. Data Source: select Use a Local CAP Project (auto-selected if single CAP project found).
3. If multiple/no projects detected: choose detected project or Manually select CAP project folder path.
4. OData service: choose service from dropdown and click Next.
5. Entity Selection: select main entity (properties used for List Report).
6. Navigation Entity: keep None; click Next.
7. Project Attributes: set required attributes (module name, title, namespace).
8. Click Finish to generate.

**LANGUAGE**: Shell

**CODE**:
```bash
# If using sample CAP Node.js project (example):
# 1. clone repository, set workspace root to cloned repo
npm install
# After generation, follow generator prompts described above.
```

Example Project Attributes:
```Text
Module name: incidents
Application title: My Incidents
Application namespace: sap.fe.demo
```

---

**STEP**: 9 — SAP CAP Java Project (Prereqs, Run & Generator Steps)

**DESCRIPTION**: Prepare CAP Java project, run service, and generate app using the generator.

Prerequisites (confirm versions installed):
- cds CLI, Java, Maven

Commands to check:
- cds --version
- java --version
- mvn --version

Generator steps (condensed):
1. Start SAP Fiori Elements generator.
2. Data Source: select Use a Local CAP Project (auto-selected if single CAP project found).
3. Choose detected CAP project or manually select CAP project folder path.
4. OData service: select service (e.g., CatalogService) and click Next.
5. Entity Selection: select main entity (properties used for List Report).
6. Navigation Entity: keep None; click Next.
7. Project Attributes: set required attributes (module name, title).
8. Click Finish.
9. In terminal, run spring-boot:
   mvn spring-boot:run
10. Open generated README link: app/books/README.md -> find application link (e.g., http://localhost:8080/books/webapp/index.html).
11. Open link and log in when prompted (credentials displayed in terminal, commonly user/user or admin/admin).

**LANGUAGE**: Shell

**CODE**:
```bash
# Verify prerequisites
cds --version
java --version
mvn --version

# Run CAP Java sample (from project root)
cd cloud-cap-samples-java
mvn spring-boot:run
# After app is running, open link found in:
# app/books/README.md -> e.g. http://localhost:8080/books/webapp/index.html
```

Example Project Attributes:
```Text
Module name: books
Application title: Books
Generated app path: app/books/webapp/index.html
```


--------------------------------

**TITLE**: Floorplan Properties — manifest.json settings for Fiori elements (List/Worklist/Analytical pages)

**INTRODUCTION**: This document collects actionable manifest.json snippets and property names you will set when customizing Fiori elements floorplans (list report, worklist, analytical list page). Use these exact JSON keys to enable/disable variant management, choose table types, configure hierarchical/tree tables, control analytical list behavior, and set selection modes for OData V2 and V4 floorplans.

**TAGS**: fiori-tools, fiori-elements, manifest.json, OData V2, OData V4, list-report, worklist, analytical-list-page, variant-management, table-type, selection-mode, hierarchy

STEP: 1 — Basic floorplan properties (concepts and common keys)

DESCRIPTION:
- Main entity: the entity set used to populate the main content area. In manifest pages use the entitySet value for the page entry.
- Navigation entity: the association used to navigate from the main entity to related apps/pages (use your OData associations in navigation configuration).
- Table type: the type of table to use (possible values depend on template and OData support; examples below).

LANGUAGE: JSON

CODE:
```json
{
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "MainEntitySetName",
        "component": {
          "name": "sap.suite.ui.generic.template.ListReport",
          "settings": {
            "tableType": "Analytical",   /* Example values: "Analytical", "Tree", "ResponsiveTable", "GridTable" */
            "hierarchyQualifier": "HierarchyQualifierIfApplicable"
          }
        }
      }
    ]
  }
}
```

STEP: 2 — Worklist page: enable variant management (OData V2)

DESCRIPTION:
- To show variant management at the table level set variantManagementHidden to false.
- To enable page-level variant management set smartVariantManagement to true and variantManagementHidden to false.

LANGUAGE: JSON

CODE:
```json
/* Table-level variant management (Worklist / List Report table) */
{
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "MainEntitySet",
        "component": {
          "name": "sap.suite.ui.generic.template.Worklist", /* or ListReport if applicable */
          "settings": {
            "variantManagementHidden": false
          }
        }
      }
    ]
  }
}

/* Page-level variant management */
{
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "MainEntitySet",
        "component": {
          "name": "sap.suite.ui.generic.template.Worklist",
          "settings": {
            "smartVariantManagement": true,
            "variantManagementHidden": false
          }
        }
      }
    ]
  }
}
```

STEP: 3 — Analytical List Page: OData V2 properties (table type, multi-select, auto hide, page-level variants)

DESCRIPTION:
- tableType: set supported table types for the analytical list page.
- allowMultiSelect: true to enable checkboxes for multi-selection (works when actions are defined via annotations or manifest).
- autoHide: true = chart acts as a filter for the table; false = matching rows are highlighted but not filtered.
- smartVariantManagement: enable page-level variant management.

LANGUAGE: JSON

CODE:
```json
{
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "MainEntitySet",
        "component": {
          "name": "sap.suite.ui.generic.template.AnalyticalListPage",
          "settings": {
            "tableType": "Analytical",         /* e.g. "Analytical", "ResponsiveTable" */
            "allowMultiSelect": true,
            "autoHide": true,                  /* true => chart filters table; false => highlights rows */
            "smartVariantManagement": true
          }
        }
      }
    ]
  }
}
```

STEP: 4 — Analytical List Page: OData V4 properties (selection mode)

DESCRIPTION:
- selectionMode: configure row selection behavior for generated tables in OData V4 based floorplans. Typical values: "None", "Single", "Multi". Put this under the page component settings.

LANGUAGE: JSON

CODE:
```json
{
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "MainEntitySet",
        "component": {
          "name": "sap.suite.ui.generic.template.AnalyticalListPage",
          "settings": {
            "selectionMode": "Multi"   /* options: "None", "Single", "Multi" */
          }
        }
      }
    ]
  }
}
```

STEP: 5 — Defaulting behavior and hierarchy (tips)

DESCRIPTION:
- If the OData V4 service supports the Analytical table type and the selected main entity supports analytical tables, tableType may default to "Analytical" for list report and worklist floorplans.
- If the OData V4 service supports hierarchical usage and the selected main entity supports a tree table, tableType may default to "Tree" and hierarchyQualifier may be populated automatically. You can still override by setting tableType and hierarchyQualifier explicitly in the manifest.

LANGUAGE: JSON

CODE:
```json
{
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "MainEntitySet",
        "component": {
          "name": "sap.suite.ui.generic.template.ListReport",
          "settings": {
            "tableType": "Tree",
            "hierarchyQualifier": "MyHierarchyQualifier"
          }
        }
      }
    ]
  }
}
```

STEP: 6 — Example: Combined manifest.json page settings (practical configuration)

DESCRIPTION:
- A combined example showing common settings together for a ListReport or AnalyticalListPage. Adapt entitySet, component.name and values to your application and OData support.

LANGUAGE: JSON

CODE:
```json
{
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "Books",
        "component": {
          "name": "sap.suite.ui.generic.template.ListReport",
          "settings": {
            "tableType": "Analytical",
            "hierarchyQualifier": "BookHierarchy",
            "variantManagementHidden": false,
            "smartVariantManagement": true
          }
        }
      },
      {
        "entitySet": "Sales",
        "component": {
          "name": "sap.suite.ui.generic.template.AnalyticalListPage",
          "settings": {
            "tableType": "Analytical",
            "allowMultiSelect": true,
            "autoHide": true,
            "selectionMode": "Multi",
            "smartVariantManagement": true
          }
        }
      }
    ]
  }
}
```
--------------------------------

**TITLE**: SAP Fiori Elements — Guided Project Generation Steps and Project Attributes Template

**INTRODUCTION**: This document summarizes the step-by-step actions and required attribute values needed to generate an SAP Fiori Elements application. It is optimized for use by AI code generators and automation scripts to populate project-generation UIs or template files. Includes a JSON template for project attributes to feed into generators or automation tooling.

**TAGS**: sap, fiori, sap-fiori-elements, sapui5, odata, cap, mta, flp, project-generation, automation

**STEP**: 1 — Select Floorplan

**DESCRIPTION**: Choose one floorplan for the application. The chosen floorplan determines page templates, component wiring and required annotations. Use this value to preconfigure templates, routing, and required metadata/entity selection in subsequent steps.

**LANGUAGE**: UI

**CODE**:
```UI
# Allowed floorplans (choose one)
- List Report Object Page
- Worklist
- Analytical List Page
- Overview Page

# Reference: supported-floorplans-2b2b12e.md
```

**STEP**: 2 — Select Data Source

**DESCRIPTION**: Choose the data source type for the application. This determines how metadata is fetched and which authentication method is required. Validate connectivity and, if credentials are required, prompt for username/password and perform login. If credentials are provided, the generator should use the login icon workflow (person with an arrow) to authenticate.

Supported data source options:
- Connect to an SAP System
- Connect to an OData Service with a customized URL
- Connect to an OData service
- Upload a Metadata Document
- Connect to SAP Business Accelerator Hub
- Use a Local CAP Project

Include UI hint to display login icon image when prompting for credentials:
images/Login_button_App_Gen_fb8dd99.png

**LANGUAGE**: UI

**CODE**:
```UI
# Data source options (choose one)
dataSourceType: "ABAP" | "ODataCustomUrl" | "OData" | "MetadataUpload" | "SAPBAH" | "LocalCAP"

# If authentication required
auth:
  required: true
  method: "Basic" | "OAuth"
  promptLoginIcon: "images/Login_button_App_Gen_fb8dd99.png"

# Reference: data-source-9906181.md
```

**STEP**: 3 — Select Associated Floorplan Properties

**DESCRIPTION**: Configure floorplan-specific properties such as the main entity and any navigation entities required by the chosen floorplan. These determine OData entity sets and navigation properties wired into the generated pages.

**LANGUAGE**: UI

**CODE**:
```UI
# Example selections
floorplanProperties:
  mainEntity: "MainEntitySetName"
  navigationEntity: "NavigationEntitySetName" # optional based on floorplan

# Reference: floorplan-properties-745ae0c.md
```

**STEP**: 4 — Configure Project Attributes (required)

**DESCRIPTION**: Provide main project attributes. These fields populate application metadata, folder names, package names and generation options. Validate constraints (alpha-numeric, namespace rules, folder availability) before generation.

Field requirements and constraints:
- Module name (required): alpha-numeric, no spaces, URL-friendly characters only. Used as package name, folder name, and Node.js package name.
- Application title: shown in launchpad tile and app header.
- Application namespace: SAPUI5 project namespace; must start with a letter and only contain letters, digits and periods.
- Description: free text describing the app.
- Project folder path (required): parent folder where new app folder (module name) is created. Must not contain an existing SAP Fiori application. If you need to create the app inside a CAP project, select "Local CAP Project" as Data Source in Step 2.
- Minimum SAPUI5 version: choose from dropdown grouped by maintenance status; default is the current recommended SAPUI5 version. For ABAP on Premise source systems, default equals the system's SAPUI5 version where possible. Note: OData V4 data sources are limited to the most recent SAPUI5 versions.
- Add to MTA deployment: if generating inside an app router configuration project with an MTA file, deployment configuration is used by default. Optionally select No to skip deployment configuration.
- Add deployment configuration: default No.
- Add FLP configuration: default No.
- Configure virtual endpoints for local preview: default Yes. When enabled, virtual endpoints files for local preview are used and do not need to be created during generation. (See: ../../Previewing-an-Application/convert-a-project-to-use-virtual-endpoints-630ddec.md)
- Configure advanced options: default No.

Provide values and run generation after validation.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "moduleName": "my-fiori-app",              // required, alpha-numeric, no spaces, URL-friendly
  "applicationTitle": "My Fiori App",
  "applicationNamespace": "com.example.app", // must start with a letter; letters, digits, periods only
  "description": "Generated by SAP Fiori Elements generator",
  "projectFolderPath": "/path/to/parent/folder", // parent folder; generator will create /my-fiori-app
  "minimumSAPUI5Version": "1.116.0",         // pick from grouped dropdown; may be limited for OData V4
  "floorplan": "List Report Object Page",
  "dataSource": {
    "type": "OData",
    "serviceUrl": "https://example.com/odata/$metadata"
  },
  "floorplanProperties": {
    "mainEntity": "MainEntitySet",
    "navigationEntity": "NavEntitySet"
  },
  "deploymentConfig": {
    "addToMTA": true,         // If inside app router project with mta.yaml, this will be used by default
    "addDeploymentConfig": false
  },
  "flpConfiguration": {
    "addFLP": false
  },
  "virtualEndpoints": {
    "configureForLocalPreview": true
  },
  "advancedOptions": {
    "configureAdvanced": false
  }
}
```

**STEP**: 5 — Finalize Generation

**DESCRIPTION**: Click Finish to start generation. The generator will create a new folder named after moduleName inside projectFolderPath and scaffold the SAPUI5/Fiori Elements project with selected floorplan, data source wiring, and optional deployment/FLP/virtual-endpoint configurations. If a folder with the same module name already exists, prompt to choose a new module name.

**LANGUAGE**: UI

**CODE**:
```UI
# Final action
action: "Finish"
# Post-generation checks:
# - Verify new folder: {projectFolderPath}/{moduleName}
# - Verify package.json uses moduleName
# - Verify selected minimumSAPUI5Version in manifest/config
# - Verify OData connectivity (if applicable)
```

**REFERENCES**:
- supported-floorplans-2b2b12e.md
- data-source-9906181.md
- floorplan-properties-745ae0c.md
- Additional config: ../Additional-Configuration/additional-configuration-9bea64e.md
- Add MTA deployment file: ../Additional-Configuration/adding-an-sap-fiori-application-to-an-mta-deployment-file-with-5a17ba6.md
- Virtual endpoints: ../../Previewing-an-Application/convert-a-project-to-use-virtual-endpoints-630ddec.md
--------------------------------

**TITLE**: Supported SAP Fiori Elements Floorplans (fiori-tools)

**INTRODUCTION**: Quick reference for selecting and configuring SAP Fiori elements floorplans when generating applications with fiori-tools. Each step gives a concise purpose, when to use it, OData / SAPUI5 version constraints (if any), and a machine-friendly JSON snippet to use in code-generation workflows.

**TAGS**: fiori-tools, floorplans, SAPUI5, OData V4, List Report, Object Page, Worklist, Analytical List Page, Overview Page, Custom Page, Form Entry

**STEP**: List Report Page

**DESCRIPTION**: Use the List Report when users need to view and act on large datasets and then navigate to item details on an Object Page. Recommended for search, filtering, and bulk actions. Link to design docs: https://experience.sap.com/fiori-design-web/list-report-floorplan-sap-fiori-element/ and Object Page docs: https://experience.sap.com/fiori-design-web/object-page/

- Use when primary goal is discovery and action on many records.
- Combine with Object Page for detail views.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "id": "listReport",
  "name": "List Report",
  "useCase": "View and act on large datasets; entry point to Object Page",
  "recommendedCombine": ["Object Page"],
  "docs": [
    "https://experience.sap.com/fiori-design-web/list-report-floorplan-sap-fiori-element/",
    "https://experience.sap.com/fiori-design-web/object-page/"
  ]
}
```

**STEP**: Worklist Page

**DESCRIPTION**: Use the Worklist for processing items that require user action (review, complete, delegate). Focus is on handling a queue of tasks rather than discovery. You can configure a Worklist using any List Report + Object Page. Note SAPUI5 requirement for OData V4: SAPUI5 >= 1.99.

- Use when users must work through pending tasks.
- For OData V4 sources ensure SAPUI5 is >= 1.99.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "id": "worklist",
  "name": "Worklist Page",
  "useCase": "Process and act on a queue of work items; review and take actions",
  "composition": ["List Report", "Object Page"],
  "odataV4_sapui5_minVersion": "1.99",
  "docs": [
    "https://experience.sap.com/fiori-design-web/work-list/",
    "./floorplan-properties-745ae0c.md"
  ],
  "notes": "For OData V2 see floorplan-properties-745ae0c.md"
}
```

**STEP**: Analytical List Page

**DESCRIPTION**: Use the Analytical List Page when you need in-page analytics with charts, visual filters (KPIs), hybrid table/chart views, drilldown and the ability to take transactional action from the same page. Targeted at users combining analysis with transactional work. For OData V4 sources ensure SAPUI5 >= 1.90.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "id": "analyticalList",
  "name": "Analytical List Page",
  "useCase": "Analyze data using charts and visual filters; drilldown and act on transactional items in one page",
  "features": ["KPIs", "Visual Filter", "Hybrid View (chart/table)", "Drilldown"],
  "odataV4_sapui5_minVersion": "1.90",
  "docs": [
    "https://experience.sap.com/fiori-design-web/analytical-list-page/"
  ]
}
```

**STEP**: Overview Page

**DESCRIPTION**: Use the Overview Page for a role- or domain-specific dashboard composed of cards or content containers. Ideal for surfacing prioritized tasks and information on one page using annotated views and various card types.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "id": "overview",
  "name": "Overview Page",
  "useCase": "Data-driven dashboard composed of cards for role/domain-specific information",
  "features": ["Annotated card views", "Multiple card types", "Role/domain tailoring"],
  "docs": [
    "https://experience.sap.com/fiori-design-web/overview-page/"
  ]
}
```

**STEP**: Form Entry Object Page

**DESCRIPTION**: Use this floorplan to generate an Object Page together with a generated form for data entry. Use when the application must allow users to create or edit objects via a form integrated into an Object Page.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "id": "formEntryObject",
  "name": "Form Entry Object Page",
  "useCase": "Generate an Object Page with forms for creating/editing objects",
  "docs": [
    "https://experience.sap.com/fiori-design-web/object-page/"
  ]
}
```

**STEP**: Custom Page

**DESCRIPTION**: Use the Custom Page floorplan to extend SAP Fiori elements apps for OData V4 with custom SAPUI5 code and controls. Ideal when you need full control over UI implementation inside extension points while still using FE building blocks. See live examples and docs.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "id": "customPage",
  "name": "Custom Page",
  "useCase": "Extend Fiori elements apps with arbitrary SAPUI5 code/controls (OData V4)",
  "notes": "Use extension points and FE building blocks; good for advanced custom UI",
  "docs": [
    "https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/controllerExtensions/customPage"
  ]
}
```

**STEP**: Example generator configuration (suggested JSON payload)

**DESCRIPTION**: Example JSON payload to feed a fiori-tools or custom generator. Set the "floorplan" field to one of the supported IDs above. Include OData version and SAPUI5 version to validate floorplan constraints (e.g., Analytical List or Worklist requiring specific SAPUI5 versions for OData V4).

**LANGUAGE**: JSON

**CODE**:
```json
{
  "appName": "my-fiori-app",
  "floorplan": "listReport",
  "odataVersion": "V4",
  "sapui5Version": "1.100.0",
  "backend": {
    "service": "https://example.com/odata/service",
    "modelType": "OData"
  },
  "notes": "Set floorplan to one of: listReport, worklist, analyticalList, overview, formEntryObject, customPage"
}
```
--------------------------------

**TITLE**: Basic SAPUI5 Template (standalone)

**INTRODUCTION**: A minimal, standalone SAPUI5/Fiori basic app scaffold. Use this to start coding immediately with a recommended file structure and example unit tests (formatters + controller). This template is standalone (no Node.js tooling) — open webapp/index.html in a browser to run. To convert to a launchpad/FLP tile you must add launchpad-specific features (not included here).

**TAGS**: sapui5, fiori-tools, template, standalone, sap.m, unit-tests, QUnit

STEP: 1 — Create folder structure and index.html

DESCRIPTION: Create the top-level files and a bootstrap index.html in the webapp folder. The index.html boots SAPUI5 from the CDN, maps the resource root to the local app namespace, and instantiates the XML view located at view/App.view.xml.

LANGUAGE: HTML

CODE:
```html
<!-- File: webapp/index.html -->
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Basic Template</title>
    <!-- SAPUI5 bootstrap (uses CDN) -->
    <script
      id="sap-ui-bootstrap"
      src="https://ui5.sap.com/resources/sap-ui-core.js"
      data-sap-ui-theme="sap_belize"
      data-sap-ui-libs="sap.m"
      data-sap-ui-resourceroots='{"basic.app": "./"}'
      data-sap-ui-async="true">
    </script>
    <script>
      // instantiate the root XML view after bootstrap
      sap.ui.getCore().attachInit(function () {
        sap.ui.xmlview({
          viewName: "basic.app.view.App"
        }).placeAt("content");
      });
    </script>
    <style>html, body, #content { height:100%; margin:0; }</style>
  </head>
  <body class="sapUiBody">
    <div id="content"></div>
  </body>
</html>
```

STEP: 2 — Add the main XML view

DESCRIPTION: Create a simple XML view with sap.m.Page, a header and a title. This is the starting UI where you will add controls and content.

LANGUAGE: XML

CODE:
```xml
<!-- File: webapp/view/App.view.xml -->
<mvc:View
  controllerName="basic.app.controller.App"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  displayBlock="true">
  <App>
    <pages>
      <Page id="mainPage" title="Basic Template">
        <content>
          <VBox class="sapUiSmallMargin">
            <Text text="A blank canvas to start developing your SAPUI5 app." />
            <Button text="Press me" press=".onPressSample" />
          </VBox>
        </content>
      </Page>
    </pages>
  </App>
</mvc:View>
```

STEP: 3 — Add the controller

DESCRIPTION: Implement a controller with an onInit and a sample event handler. Keep controller logic minimal and extend later.

LANGUAGE: JavaScript

CODE:
```javascript
// File: webapp/controller/App.controller.js
sap.ui.define([
  "sap/ui/core/mvc/Controller",
  "basic/app/model/formatter"
], function (Controller, formatter) {
  "use strict";

  return Controller.extend("basic.app.controller.App", {
    formatter: formatter,

    onInit: function () {
      // initialization logic, e.g. set models
      // this.getView().setModel(...);
    },

    onPressSample: function () {
      sap.m.MessageToast.show("Sample button pressed");
    }
  });
});
```

STEP: 4 — Add a minimal manifest.json

DESCRIPTION: Provide a minimal manifest.json to keep metadata bundled with the app (optional for standalone but recommended).

LANGUAGE: JSON

CODE:
```json
// File: webapp/manifest.json
{
  "sap.app": {
    "id": "basic.app",
    "type": "application",
    "applicationVersion": { "version": "1.0.0" },
    "title": "Basic Template"
  },
  "sap.ui": {
    "technology": "UI5",
    "icons": {}
  },
  "sap.ui5": {
    "rootView": {
      "viewName": "basic.app.view.App",
      "type": "XML",
      "async": true,
      "id": "app"
    }
  }
}
```

STEP: 5 — Add a formatter utility and sample formatter function

DESCRIPTION: Place reusable formatting functions under model/formatter.js and reference them in views/controllers.

LANGUAGE: JavaScript

CODE:
```javascript
// File: webapp/model/formatter.js
sap.ui.define([], function () {
  "use strict";
  return {
    uppercase: function (s) {
      return s ? s.toUpperCase() : "";
    }
  };
});
```

STEP: 6 — Add unit test runner HTML

DESCRIPTION: Provide a simple QUnit test runner that loads SAPUI5 and your tests. Open this file in a browser to run tests.

LANGUAGE: HTML

CODE:
```html
<!-- File: webapp/test/unitTests.html -->
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Unit Tests - Basic Template</title>
    <link rel="stylesheet" href="https://ui5.sap.com/resources/sap/ui/core/themes/base/library.css">
    <script id="sap-ui-bootstrap"
        src="https://ui5.sap.com/resources/sap-ui-core.js"
        data-sap-ui-theme="sap_belize"
        data-sap-ui-libs="sap.m"
        data-sap-ui-resourceroots='{"basic.app": "../"}'
        data-sap-ui-async="true">
    </script>

    <script>
      sap.ui.getCore().attachInit(function () {
        // load QUnit (SAPUI5 provides QUnit support via its test resources if required)
        // Here we dynamically load our test modules
        sap.ui.require([
          "basic/app/test/unit/formatter.qunit",
          "basic/app/test/unit/controller.qunit"
        ], function () {
          // tests executed when modules are loaded
        });
      });
    </script>
  </head>
  <body class="sapUiBody">
    <div id="qunit"></div>
    <div id="qunit-fixture"></div>
  </body>
</html>
```

STEP: 7 — Add a formatter unit test (QUnit)

DESCRIPTION: Unit test for the formatter.uppercase function. Place under webapp/test/unit.

LANGUAGE: JavaScript

CODE:
```javascript
// File: webapp/test/unit/formatter.qunit.js
sap.ui.define([
  "basic/app/model/formatter"
], function (formatter) {
  "use strict";

  QUnit.module("Formatter tests");

  QUnit.test("uppercase: transforms string to uppercase", function (assert) {
    assert.strictEqual(formatter.uppercase("abc"), "ABC", "lowercase to uppercase");
    assert.strictEqual(formatter.uppercase(""), "", "empty string returns empty");
    assert.strictEqual(formatter.uppercase(null), "", "null returns empty string");
  });
});
```

STEP: 8 — Add a controller unit test (QUnit)

DESCRIPTION: Basic controller test to ensure controller loads and contains sample methods. Use sap.ui.require to load controller and call method.

LANGUAGE: JavaScript

CODE:
```javascript
// File: webapp/test/unit/controller.qunit.js
sap.ui.define([
  "sap/ui/core/mvc/Controller",
  "basic/app/controller/App.controller"
], function (Controller, AppController) {
  "use strict";

  QUnit.module("App.controller");

  QUnit.test("Controller can be instantiated and has handler", function (assert) {
    var oController = new AppController();
    assert.ok(oController, "Controller instance created");
    assert.strictEqual(typeof oController.onPressSample, "function", "onPressSample exists and is a function");
  });
});
```

STEP: 9 — Notes on usage and running

DESCRIPTION: How to run the app and tests.

LANGUAGE: Text

CODE:
```text
- Run the app: open webapp/index.html in a browser (no Node.js required).
- Run unit tests: open webapp/test/unitTests.html in a browser.
- File locations referenced above:
  - webapp/index.html
  - webapp/manifest.json
  - webapp/view/App.view.xml
  - webapp/controller/App.controller.js
  - webapp/model/formatter.js
  - webapp/test/unit/formatter.qunit.js
  - webapp/test/unit/controller.qunit.js
  - webapp/test/unitTests.html
- Notes:
  - This template is standalone. To convert to an FLP launchpad app, add launchpad-specific features (Save as Tile, Group, etc.) and Node/tooling as needed.
  - For larger apps, switch to a Component-based bootstrap and add proper models, routing and i18n resources in manifest.json.
```
--------------------------------

**TITLE**: Data Source Configuration for SAP Fiori Application Generator

**INTRODUCTION**: This document describes programmatic and UI-driven steps to configure data sources when generating SAP Fiori applications. Covers: connecting to SAP systems (VS Code and Business Application Studio), referencing destinations (.dest), connecting directly to OData services, uploading metadata.xml (EDMX), using SAP Business Accelerator Hub (deprecated), and selecting a local CAP project. Includes example payloads, validation commands, and minimal file examples for automation or agent-driven code generation.

**TAGS**: sap, fiori-tools, odata, sap-btp, abap, business-application-studio, cap, metadata, edmx

**STEP**: 1 — Connect to an SAP System (VS Code)

**DESCRIPTION**: Add or select a saved SAP system in VS Code for the generator. Required inputs: system name, system URL, SAP ABAP system type, authentication type (Service Key or Reentrance Ticket) or on-premise credentials. Optionally persist connection details in OS secure storage.

- Enter a unique system name.
- Select SAP ABAP system type.
- Choose authentication:
  - Service Key: paste the service key JSON provided by the administrator. A browser window will open to complete authentication.
  - Reentrance Ticket: provide the SAP S/4HANA Cloud URL and authenticate in the browser. (Requires S/4HANA Cloud 2408+.)
- On-premise: provide system URL and optional client ID and authentication details.
- The generator stores system details in secure storage so you don't re-enter them when generating or running locally.

OS secure storage (as listed by the generator):
- Microsoft Windows: Keychain.
- macOS: Credential Manager.

Example system configuration object (for automation or saved config file):

**LANGUAGE**: JSON

**CODE**:
```json
{
  "systemName": "MyABAPSystem",
  "systemType": "SAP_ABAP",
  "url": "https://someurl:12345",
  "client": "010",
  "auth": {
    "type": "SERVICE_KEY", 
    "serviceKey": {
      "clientid": "abc123",
      "clientsecret": "secret",
      "url": "https://<auth-host>/oauth/token",
      "uaa": { "url": "https://<uaa-host>" }
    }
  },
  "secureStorage": true
}
```

**STEP**: 2 — Connect to an SAP System (Business Application Studio)

**DESCRIPTION**: When running the generator in SAP Business Application Studio, the generator lists configured destinations for the workspace/instance. Select a destination from the list. If the destination is inaccessible or you lack permissions, the generator will return an error.

Example runtime metadata showing available destinations (for diagnostics):

**LANGUAGE**: JSON

**CODE**:
```json
{
  "availableDestinations": [
    { "name": "MyDestination", "type": "HTTP", "url": "https://someurl.com" },
    { "name": "SAPBackend", "type": "HTTP", "url": "https://s4hana.example.com" }
  ],
  "selectedDestination": "MyDestination"
}
```

**STEP**: 3 — Connect to an OData Service with a Customized URL (.dest)

**DESCRIPTION**: When the OData endpoint is routable only via a Cloud destination, use the destination name suffixed with .dest in the data source URL field. Business Application Studio routes requests to the destination automatically.

- In Business Application Studio, choose "Connect to an OData Service".
- Set the data source URL to: https://<DestinationName>.dest/<service-path>

Example mapping and input:

**LANGUAGE**: text

**CODE**:
```
# Generator input field (Data Source URL)
https://MyDestination.dest/someservice

# Resolution:
# MyDestination → destination configured in Business Application Studio
# Final route: https://MyDestination.dest/someservice  (BAS resolves to actual https://someurl.com/someservice)
```

**STEP**: 4 — Connect to an OData Service (Direct URL + Authentication)

**DESCRIPTION**: Provide the OData endpoint URL directly for basic auth or unauthenticated services. The generator validates the OData version against the selected template (e.g., OData V2 template requires OData V2 endpoint).

Use these diagnostic commands to validate the endpoint and version before feeding to the generator.

- Fetch $metadata to verify OData version and service entities.
- Test basic authentication if required.

**LANGUAGE**: Bash

**CODE**:
```bash
# Fetch $metadata (no auth)
curl -sS "https://example.com/odata/$metadata" | sed -n '1,20p'

# Fetch $metadata with Basic Auth
curl -sS -u "USERNAME:PASSWORD" "https://example.com/odata/$metadata" | sed -n '1,20p'

# Inspect returned EDMX root to determine OData version (v2 vs v4)
# Look for xmlns="http://schemas.microsoft.com/ado/2007/06/edmx" (OData V2/EDMX) or OData V4 EDMX namespace
```

**STEP**: 5 — Upload a Metadata Document (metadata.xml / EDMX)

**DESCRIPTION**: To generate an application without a live backend, upload an EDMX metadata.xml file. The generator validates the file format (EDMX only). Generated apps with metadata.xml use mock data only.

- Ensure metadata.xml is in EDMX format.
- Upload in the generator UI; wait for validation success.
- After validation, select entities and proceed.

Minimal EDMX header example to validate format:

**LANGUAGE**: XML

**CODE**:
```xml
<?xml version="1.0" encoding="utf-8"?>
<edmx:Edmx Version="1.0"
  xmlns:edmx="http://schemas.microsoft.com/ado/2007/06/edmx">
  <!-- EntityModel and Schema elements follow here -->
</edmx:Edmx>
```

**STEP**: 6 — Connect to SAP Business Accelerator Hub (Deprecated)

**DESCRIPTION**: SAP Business Accelerator Hub is deprecated as a data source and will be removed in a future release. It can be used for local development only (not for deployment). The generator shows a list of predefined industry services. Provide username and password fields to proceed.

Example selection payload (for local development only):

**LANGUAGE**: JSON

**CODE**:
```json
{
  "dataSource": "SAP_Business_Accelerator_Hub",
  "service": "Just-In-Time Calls",
  "credentials": {
    "username": "devuser",
    "password": "password123"
  },
  "note": "Deprecated - replace with a real data source before going live"
}
```

**STEP**: 7 — Use a Local CAP Project

**DESCRIPTION**: Select a local SAP Cloud Application Programming Model (CAP) Node.js project folder. The generator validates the folder to confirm it is a supported CAP project and lists the services defined in that project.

Typical validation hints:
- package.json present with @sap/cds dependency
- srv/ or srv/index.js service implementation or srv/*.cds definitions
- cds configuration files (.cdsrc.json or cds.config.js) may be present

Minimal package.json and a CDS service example for validation:

**LANGUAGE**: JSON

**CODE**:
```json
{
  "name": "my-cap-app",
  "version": "1.0.0",
  "dependencies": {
    "@sap/cds": "^5.0.0"
  },
  "scripts": {
    "start": "cds run"
  }
}
```

**LANGUAGE**: CDS

**CODE**:
```cds
namespace my.bookshop;

service CatalogService {
  entity Books {
    key ID   : UUID;
        title: String;
        stock: Integer;
  }
}
```
--------------------------------

**TITLE**: Generate a Freestyle SAPUI5 Application with the SAP Fiori Generator

**INTRODUCTION**: Step-by-step, code-focused instructions for generating a freestyle SAPUI5 application using the SAP Fiori generator. Includes required inputs, validation rules, example values, resulting project layout, and example configuration snippets for manifest and MTA deployment. Useful for automating project scaffolding or integrating generation steps into scripts/tools.

**TAGS**: SAPUI5, Fiori, generator, freestyle, scaffold, mta, manifest, project-structure

**STEP**: 1 — Select template (Freestyle-capable)

**DESCRIPTION**: In the SAP Fiori generator UI, pick a template that supports freestyle SAPUI5 applications and proceed to the next screen. See supported templates for details.

**LANGUAGE**: Text

**CODE**:
```text
UI action:
- Open SAP Fiori generator
- Select a template that supports "Freestyle SAPUI5"
- Click Next
Reference: Supported Templates - https://<docs>/supported-templates-20d1146.md
```

**STEP**: 2 — Select Data Source

**DESCRIPTION**: Choose the data source for your application (OData, local mock, or other). Proceed to template properties.

**LANGUAGE**: Text

**CODE**:
```text
UI action:
- In Data Source step select the appropriate source (e.g., OData V2/V4, Mock)
- Click Next
Reference: Data Source - https://<docs>/data-source-37a0fcf.md
```

**STEP**: 3 — Enter view name / template properties

**DESCRIPTION**: Provide the view name and any template-specific properties. These values are used by the scaffolded UI5 view/controller files.

**LANGUAGE**: Text

**CODE**:
```text
Example:
- View name: MainView
- Controller name: MainController (if required by template)
Reference: Template Properties - https://<docs>/template-properties-c2a3c82.md
```

**STEP**: 4 — Configure project attributes (required fields, validation, and examples)

**DESCRIPTION**: Fill in project-level attributes. Mandatory fields are prefilled with defaults in the generator. Validation rules and examples below map generator fields to expected project artifacts (folder, namespace, manifest entries).

- Module name (Required)
  - Purpose: folder and package name for the generated app
  - Validation: alphanumeric, no spaces
  - Example: myApp123

- Application title (Required)
  - Purpose: visible header title in the generated application
  - Example: My Freestyle App

- Application namespace (Required)
  - Purpose: SAPUI5 project namespace; used in manifest "sap.app/id" and module URIs
  - Validation: must start with a letter; characters allowed: letters, digits, periods
  - Example: com.example.app

- Description
  - Purpose: human-readable description used in manifest and metadata
  - Example: A freestyle SAPUI5 demo application

- Project folder (Required)
  - Purpose: parent directory where the new app folder (module name) is created
  - Behavior: generator creates <project-folder>/<module-name>
  - Example: ~/projects/ui5

- Minimum SAPUI5 version
  - Purpose: minimum ui5 version required by the app
  - Notes:
    - Dropdown groups versions by maintenance status; default is preselected.
    - If the source system is ABAP on-premise, the default equals the SAPUI5 version on the ABAP system.
  - Reference: SAPUI5 Versions Maintenance Status - https://ui5.sap.com/versionoverview.html

- Add deployment configuration to MTA project
  - Purpose: if an mta.yaml already exists in the project folder path, integrate generated app into that MTA (use existing deployment config)
  - Behavior: generator will add module entries to the existing mta.yaml when enabled
  - Reference: Adding to existing MTA - https://<docs>/../Additional-Configuration/adding-an-sap-fiori-application-to-an-mta-deployment-file-with-5a17ba6.md#loio5a17ba6b62b2462aa0e25ffae7b8d728

- Add deployment configuration
  - Purpose: enable/disable generation of deployment settings
  - Reference: Add Deployment Configuration - https://<docs>/../Additional-Configuration/additional-configuration-9bea64e.md#loio9bea64e63b824261932d90037ce3c5ae__section_itv_dk5_t4b

- Add FLP configuration
  - Purpose: add SAP Fiori Launchpad configuration artifacts
  - Reference: Add FLP configuration - https://<docs>/../Additional-Configuration/additional-configuration-9bea64e.md#loio9bea64e63b824261932d90037ce3c5ae__section_hbd_gzy_t4b

- Configure virtual endpoints for local preview
  - Purpose: enable virtual endpoints so preview uses virtual endpoints instead of generating preview files
  - Note: when enabled, preview files are not created during generation

- Configure advanced options
  - Purpose: show advanced generator options
  - Reference: Configure advanced options - https://<docs>/../Additional-Configuration/additional-configuration-9bea64e.md#loio9bea64e63b824261932d90037ce3c5ae__section_uhj_l2z_t4b

**LANGUAGE**: JSON

**CODE**:
```json
{
  "generatorInputs": {
    "moduleName": "myApp123",
    "appTitle": "My Freestyle App",
    "appNamespace": "com.example.app",
    "description": "A freestyle SAPUI5 demo application",
    "projectFolder": "/home/user/projects/ui5",
    "minSapUi5Version": "1.96.0",
    "addToExistingMta": true,
    "addDeploymentConfiguration": true,
    "addFLPConfiguration": false,
    "useVirtualEndpoints": false,
    "showAdvancedOptions": false
  }
}
```

**STEP**: 5 — Example scaffolding results: folder layout and manifest mapping

**DESCRIPTION**: After clicking Finish, the generator produces the application folder and files. The Module name becomes the top-level folder name. The Application namespace and module name are used to form the application id (sap.app/id) in manifest.json.

Example folder layout (Linux/macOS path notation):

**LANGUAGE**: Bash

**CODE**:
```bash
# Example generated project tree
/home/user/projects/ui5/myApp123/
├─ webapp/
│  ├─ controller/
│  │  └─ Main.controller.js
│  ├─ view/
│  │  └─ Main.view.xml
│  ├─ i18n/
│  │  └─ i18n.properties
│  ├─ index.html
│  └─ manifest.json
├─ package.json
└─ ui5.yaml  # if generator created UI5 tooling config
```

Example mapping in manifest.json: sap.app/id is namespace + module (dot-separated). The generator may set "sap.ui5/dependencies/minUI5Version" based on the selected Minimum SAPUI5 version.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.app": {
    "id": "com.example.app.myApp123",
    "title": "My Freestyle App",
    "description": "A freestyle SAPUI5 demo application"
  },
  "sap.ui5": {
    "dependencies": {
      "minUI5Version": "1.96.0"
    }
  }
}
```

**STEP**: 6 — Example: Add generated app to an existing mta.yaml (when enabled)

**DESCRIPTION**: If "Add deployment configuration to MTA project" is selected and an mta.yaml exists, the generator will append a module section for your app. Below is an example fragment showing how an application module can be declared inside mta.yaml. Adjust the build and parameters to your environment.

**LANGUAGE**: YAML

**CODE**:
```yaml
ID: my-mta
_version: 3.2.0

modules:
  - name: com_example_app_myApp123
    type: html5
    path: myApp123
    requires:
      - name: myDestService  # example resource
    parameters:
      build-params:
        builder: npm
        commands:
          - npm install
          - npm run build
```

**STEP**: 7 — Virtual endpoints for local preview (optional)

**DESCRIPTION**: If "Configure virtual endpoints for local preview" is enabled, preview files are not generated and the project is configured to use virtual endpoints during preview. Use this when you want the local preview to route calls to configured virtual endpoints instead of local preview files.

**LANGUAGE**: Text

**CODE**:
```text
Behavior:
- Generator will skip creating preview artifacts
- Local preview tooling will route UI and service calls to virtual endpoints
- Use when your backend is mocked/virtualized at run-time
```

**STEP**: 8 — Finalize generation

**DESCRIPTION**: Click Finish in the generator to create the project. Open the generated folder in your editor or SAP Business Application Studio (use an SAP Fiori dev space in BAS). Verify manifest.json, ui5.yaml, and mta.yaml (if applicable) and run the local preview or build/deploy pipeline.

**LANGUAGE**: Bash

**CODE**:
```bash
# Open project (example)
cd /home/user/projects/ui5/myApp123

# Run local UI5 preview (if ui5 tooling installed)
ui5 serve --config=ui5.yaml

# Build for deployment (if npm script provided)
npm install
npm run build
```

Note: If using SAP Business Application Studio, ensure you use an SAP Fiori dev space.
--------------------------------

**TITLE**: Supported Templates for Freestyle SAPUI5 Applications (fiori-tools)

**INTRODUCTION**: List of templates provided by fiori-tools to scaffold freestyle SAPUI5 applications. Use these templates as starting points for coding, adhering to the minimum SAPUI5 runtime version requirement.

**TAGS**: fiori-tools, sapui5, sap-fiori, templates, freestyle, fpm

**STEP**: 1 — Basic template

**DESCRIPTION**: Use the Basic template to scaffold a minimal freestyle SAPUI5 application with a recommended file structure and minimal configuration. The Basic template provides a blank canvas and sets up best-practice files (index.html, manifest.json, Component.js, views). See source doc: basic-template-14fdcc0.md

**LANGUAGE**: JSON

**CODE**:
```json
// manifest.json (minimal manifest for Basic template)
{
  "sap.app": {
    "id": "my.basic.app",
    "type": "application",
    "i18n": "i18n/i18n.properties",
    "applicationVersion": { "version": "1.0.0" }
  },
  "sap.ui5": {
    "dependencies": {
      "minUI5Version": "1.65",
      "libs": {
        "sap.m": {}
      }
    },
    "rootView": {
      "viewName": "my.basic.app.view.App",
      "type": "XML",
      "async": true
    },
    "models": {
      "i18n": {
        "type": "sap.ui.model.resource.ResourceModel",
        "settings": { "bundleName": "my.basic.app.i18n.i18n" }
      }
    }
  }
}
```

**LANGUAGE**: HTML

**CODE**:
```html
<!-- index.html (bootstrap SAPUI5 for a Basic template app) -->
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>My Basic SAPUI5 App</title>
    <script
      id="sap-ui-bootstrap"
      src="https://sapui5.hana.ondemand.com/1.65.0/resources/sap-ui-core.js"
      data-sap-ui-theme="sap_fiori_3"
      data-sap-ui-libs="sap.m"
      data-sap-ui-async="true"
      data-sap-ui-resourceroots='{"my.basic.app": "./"}'>
    </script>
    <script>
      sap.ui.getCore().attachInit(function () {
        sap.ui.require(["my/basic/app/Component"], function (Component) {
          new Component().placeAt("content");
        });
      });
    </script>
  </head>
  <body id="content"></body>
</html>
```

**STEP**: 2 — Custom Page template (Flexible Programming Model)

**DESCRIPTION**: Use the Custom Page template to create an SAP Fiori elements application that includes a custom page built on the flexible programming model (FPM). The template can add a Page building block as the default layout. For live examples and details, consult the SAP Fiori development portal.

**LANGUAGE**: URL

**CODE**:
```text
SAP Fiori development portal - Custom Page examples:
https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/controllerExtensions/customPage
```

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Example XML view implementing a simple custom Page (sap.m.Page) used within a Custom Page template -->
<mvc:View controllerName="my.custom.app.controller.CustomPage"
          xmlns:mvc="sap.ui.core.mvc"
          xmlns="sap.m">
  <Page id="customPage" title="Custom Page">
    <content>
      <!-- Insert your UI controls here -->
      <Text text="This is a custom page (FPM custom page example)." />
    </content>
  </Page>
</mvc:View>
```

**STEP**: 3 — Minimum SAPUI5 version (Caution)

**DESCRIPTION**: All fiori-tools templates (freestyle and Fiori elements) require a minimum SAPUI5 runtime version of 1.65. Ensure your bootstrap and manifest configuration reflect this requirement.

**LANGUAGE**: JSON

**CODE**:
```json
// manifest.json snippet to enforce minimum SAPUI5 version
{
  "sap.ui5": {
    "dependencies": {
      "minUI5Version": "1.65"
    }
  }
}
```
--------------------------------

**TITLE**: Template Properties — Set SAPUI5 View Name for Generated Fiori App

**INTRODUCTION**: Provide the unique SAPUI5 view name used by a generator (fiori-tools or similar) so the generator creates the view file and wiring correctly. The view name must be unique across the project and follow namespace conventions so generated files map to correct folders and manifest entries.

**TAGS**: fiori-tools, sapui5, view-name, template-properties, generator, manifest, routing

**STEP**: 1 — Provide view name in template properties (generator input)

**DESCRIPTION**: Supply the View name as part of the template input JSON used by your generator. Use a dot-separated namespace and final view name (e.g., my.app.view.Main). The generator uses this value to create the view file under webapp/view and to populate manifest/routing targets.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "dataSource": "YourDataSourceIdentifier",
  "viewName": "my.app.view.Main"
}
```

**STEP**: 2 — Resulting file location and naming convention

**DESCRIPTION**: The generator maps the final segment of the viewName to the filename and the namespace segments to folder structure. For viewName "my.app.view.Main" the generated XML view file should be placed at webapp/view/Main.view.xml and its XML should declare the same name.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- File: webapp/view/Main.view.xml -->
<mvc:View
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  controllerName="my.app.controller.Main"
  displayBlock="true"
  viewName="my.app.view.Main">
  <App>
    <pages>
      <Page title="Main">
        <!-- page content -->
      </Page>
    </pages>
  </App>
</mvc:View>
```

**STEP**: 3 — Reference the generated view in manifest routing targets

**DESCRIPTION**: Ensure manifest.json routing targets or any code that references the view uses the matching viewName (or viewPath + viewName). This ties routing and navigation to the generated view.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui5": {
    "routing": {
      "routes": [
        {
          "name": "app",
          "pattern": "",
          "target": "main"
        }
      ],
      "targets": {
        "main": {
          "viewName": "Main",
          "viewPath": "my.app.view",
          "viewLevel": 1
        }
      }
    }
  }
}
```

**STEP**: 4 — Instantiate the view in Component or code (example)

**DESCRIPTION**: When instantiating views programmatically or in component lifecycle, use the full viewName or viewPath/viewName consistent with the template property provided.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Example: in Component.js or a controller
sap.ui.define([
  "sap/ui/core/mvc/XMLView"
], function(XMLView) {
  "use strict";

  // Create by full viewName
  XMLView.create({
    viewName: "my.app.view.Main"
  }).then(function(oView) {
    oView.placeAt("content");
  });

  // Or if you use viewPath + viewName in manifest, UI5 routing will resolve automatically
});
```

**STEP**: 5 — Naming rules and best practices

**DESCRIPTION**: Guidelines to follow when choosing the view name:
- Use dot-separated namespace: <company>.<project>.<layer>.<ViewName> (e.g., my.app.view.Main)
- Final segment becomes filename: Main.view.xml under webapp/view
- Ensure the name is unique in the project to prevent collisions
- Keep manifest routing targets consistent with the viewName or viewPath + viewName combination

**LANGUAGE**: JSON

**CODE**:
```json
{
  "rules": {
    "namespacePattern": "<company>.<project>.<layer>.<ViewName>",
    "fileMapping": "webapp/view/<ViewName>.view.xml",
    "manifestRouting": "viewPath = namespace up to 'view', viewName = <ViewName>"
  }
}
```
--------------------------------

**TITLE**: Generating an SAP Fiori Application (VS Code / SAP Business Application Studio)

**INTRODUCTION**: Step-by-step actions to create an SAP Fiori (SAPUI5) application using the SAP Fiori application generator in Visual Studio Code or SAP Business Application Studio. Includes UI commands, Service Center usage, the generated project structure, and differences when using a local CAP Node.js project.

**TAGS**: fiori-tools, sap, sapui5, sap-fiori, sap-business-application-studio, vscode, generator

**STEP**: 1 — Launch the Application Generator

**DESCRIPTION**: Open the Fiori application generator from VS Code or BAS. In BAS you may also start from the template wizard using the workspace "Start from template" action.

**LANGUAGE**: Shell / UI

**CODE**:
```bash
# VS Code (Open Command Palette)
# Press Ctrl+Shift+P (Windows/Linux) or Cmd+Shift+P (macOS)
# Type and execute:
Fiori: Open Application Generator

# SAP Business Application Studio
# Use "Start from template" from the workspace or Command Palette equivalent.
```

**STEP**: 2 — Choose Template Type

**DESCRIPTION**: In the Template Wizard's Template Selection page choose the Template Type. Default is "SAP Fiori". If you need older SAPUI5 templates choose "Deprecated templates".

**LANGUAGE**: Text

**CODE**:
```text
Template Type (dropdown):
- SAP Fiori           # default, uses Fiori elements or freestyle SAPUI5 approach
- Deprecated templates # includes deprecated SAPUI5 templates
```

**STEP**: 3 — Continue and Open Application Information

**DESCRIPTION**: Click Next to proceed through the wizard. After project generation the Application Information page opens automatically. To reopen at any time use the Application Info command.

**LANGUAGE**: Shell / UI

**CODE**:
```bash
# To relaunch the Application Information page from VS Code:
# Open Command Palette and run:
Fiori: Open Application Info
```

**STEP**: 4 — Use Service Center in SAP Business Application Studio (optional)

**DESCRIPTION**: In BAS Service Center, explore and expose services from:
- subaccount destinations
- SAP Business Accelerator Hub
Use an exposed service as a data source when generating the SAP Fiori application.

**LANGUAGE**: Text

**CODE**:
```text
# Service Center sources:
- Subaccount destinations
- SAP Business Accelerator Hub

# Action:
# Open Service Center in BAS -> select a service -> use as data source in Template Wizard
```

**STEP**: 5 — Review Generated Project Structure

**DESCRIPTION**: After generation, the project contains the following files and folders (root-level). Use this structure to locate UI5 source, config, and local tooling files.

**LANGUAGE**: bash

**CODE**:
```bash
<project-root>/
├─ webapp/                # Root folder for SAPUI5 web application (sources)
├─ .npmrc                 # npm registry configuration updates required for the generated project
├─ .gitignore             # files/folders excluded from source control (e.g., node_modules)
├─ package-lock.json      # locks node dependency versions
├─ package.json           # main node project configuration
├─ README.md              # details on generation options chosen
├─ ui5-local.yaml         # supports local development in preview mode
├─ ui5.yaml               # config to connect to supplied data source and update SAPUI5 version
├─ node_modules/          # installed node modules (not version-controlled)
```

**STEP**: 6 — Local CAP Node.js Project Option (differences)

**DESCRIPTION**: If you select "Use a Local CAP Node.js Project" during generation, the generator produces a different structure:
- Preview and deployment handled by local CAP project (not local UI5 tooling)
- package.json is shorter
- ui5.yaml and .npmrc may not be generated
- Annotations are generated as annotation.cds (CAP CDS syntax) instead of annotation.xml (EDMX)

**LANGUAGE**: Text

**CODE**:
```text
# Differences when "Use a Local CAP Node.js Project" is selected:
- No ui5.yaml (preview/deploy handled by CAP)
- No .npmrc (fewer generated files)
- annotation.cds  # annotations in CAP CDS syntax
# vs
- annotation.xml  # (default) annotations in OData EDMX/annotation XML
```

**STEP**: 7 — Related packages and documentation references

**DESCRIPTION**: The generator references and produces projects that use open-source writers and npm tooling. Use these package names or docs for additional customization or automation.

**LANGUAGE**: Text

**CODE**:
```text
# npm packages / repositories referenced by the generator:
- @sap/generator-fiori      # generator npm package
- @sap/ux-ui5-tooling       # UI5 tooling npm package

# Open-source writer libraries used by the generator (for reference):
- Fiori elements writer:  open-ux-tools/packages/fiori-elements-writer
- Fiori freestyle writer: open-ux-tools/packages/fiori-freestyle-writer

# Troubleshooting:
- Guided Answers Extension by SAP can be launched from generator UI when common errors appear.

# MTA deployment:
- See: Additional-Configuration/generating-an-mta-deployment-file-9c41152.md
```
--------------------------------

**TITLE**: Install and configure a local CA certificate for SAP Fiori tools (VS Code and Yeoman)

**INTRODUCTION**: This guide shows how to install a local certificate authority (CA) certificate into the operating system trust store (so VS Code accepts the certificate) and how to configure Node.js/Yeoman to use the certificate via NODE_EXTRA_CA_CERTS. It includes GUI and command-line examples for Windows and macOS and a temporary fallback (NODE_TLS_REJECT_UNAUTHORIZED) for quick testing. Ensure Node.js is installed locally before following these steps.

**TAGS**: fiori-tools, certificate, nodejs, vs-code, yeoman, macos, windows, security

**STEP**: 1 — Obtain the local CA certificate file
**DESCRIPTION**: Export or download the local CA certificate from the server or browser and save it to a known local folder. Use a descriptive filename and record the full path for later steps (e.g., C:\certs\local-ca.crt or /Users/alice/certs/local-ca.crt).
**LANGUAGE**: Text
**CODE**:
```Text
Example local paths:
Windows: C:\certs\local-ca.crt
macOS:   /Users/<you>/certs/local-ca.crt
```

**STEP**: 2 — Import certificate into the OS trust store (VS Code trust)
**DESCRIPTION**: Import the CA certificate into the OS certificate store so VS Code and other system apps trust it. Use the GUI steps below or the CLI alternatives for automation.
**LANGUAGE**: Text
**CODE**:
```Text
Windows (GUI):
1. Right-click the CA certificate file -> Install Certificate.
2. Choose store location (Current user or Local machine) -> Next.
3. Select "Place all certificates in the following store" -> Trusted Root Certification Authorities.
4. Finish and confirm.

Windows (CLI - run as Administrator):
# Import to Local Machine Trusted Root (replace path)
certutil -addstore -f "ROOT" "C:\certs\local-ca.crt"

macOS (GUI):
1. Right-click the certificate -> Open With -> Keychain Access.
2. Select keychain: System.
3. Import the certificate and set Trust -> Always Trust for the certificate.

macOS (CLI - run as root or with sudo):
# Add certificate to System keychain as a trusted root
sudo security add-trusted-cert -d -r trustRoot -k /Library/Keychains/System.keychain "/Users/<you>/certs/local-ca.crt"
```

**STEP**: 3 — Configure Node.js / Yeoman (NODE_EXTRA_CA_CERTS) — session and persistent options
**DESCRIPTION**: Point Node.js to the downloaded CA certificate file with NODE_EXTRA_CA_CERTS so Yeoman and other Node-based tools use the CA. Below are session-only and persistent approaches for Windows (CMD and PowerShell) and macOS (bash/zsh). Replace placeholder paths with the certificate file path from Step 1.
**LANGUAGE**: Bash
**CODE**:
```bash
# macOS / Linux (session only) - run before starting the Yeoman generator:
export NODE_EXTRA_CA_CERTS="/Users/<you>/certs/local-ca.crt"
# then run your generator, e.g.:
yo @sap/generator-fiori

# macOS / Linux (persist) - add to ~/.bashrc or ~/.zshrc:
echo 'export NODE_EXTRA_CA_CERTS="/Users/<you>/certs/local-ca.crt"' >> ~/.zshrc
# then source the file or open a new terminal:
source ~/.zshrc
```

**LANGUAGE**: PowerShell
**CODE**:
```powershell
# PowerShell (session only):
$env:NODE_EXTRA_CA_CERTS = 'C:\certs\local-ca.crt'
# then run your generator:
yo @sap/generator-fiori

# PowerShell (persistent for current user):
setx NODE_EXTRA_CA_CERTS "C:\certs\local-ca.crt"
# Note: New terminals will see the persistent value; current session sees the $env change only.
```

**LANGUAGE**: CMD
**CODE**:
```bat
:: Windows CMD (persistent):
setx NODE_EXTRA_CA_CERTS "C:\certs\local-ca.crt"

:: Windows CMD (session only):
set NODE_EXTRA_CA_CERTS=C:\certs\local-ca.crt
:: then run:
yo @sap/generator-fiori
```

**STEP**: 4 — Quick temporary workaround: ignore TLS verification (not recommended)
**DESCRIPTION**: For temporary testing only, you can disable TLS certificate verification for Node.js processes. This is insecure — use only for short troubleshooting and never in production.
**LANGUAGE**: Bash
**CODE**:
```bash
# macOS / Linux (temporary, session only):
NODE_TLS_REJECT_UNAUTHORIZED=0 yo @sap/generator-fiori
```

**LANGUAGE**: PowerShell
**CODE**:
```powershell
# PowerShell (temporary, session only):
$env:NODE_TLS_REJECT_UNAUTHORIZED = "0"
yo @sap/generator-fiori
# To clear:
Remove-Item Env:\NODE_TLS_REJECT_UNAUTHORIZED
```

**LANGUAGE**: CMD
**CODE**:
```bat
:: Windows CMD (temporary):
set NODE_TLS_REJECT_UNAUTHORIZED=0
yo @sap/generator-fiori
:: To clear in the same session:
set NODE_TLS_REJECT_UNAUTHORIZED=
```

**STEP**: 5 — Verification and troubleshooting
**DESCRIPTION**: After installing the CA and configuring NODE_EXTRA_CA_CERTS, verify the generator runs without certificate errors. If you still get certificate errors, confirm:
- The certificate file path used by NODE_EXTRA_CA_CERTS is correct and accessible.
- VS Code was restarted after importing the certificate into the OS trust store.
- For Windows, import was to Trusted Root Certification Authorities and you used the correct store (Local Machine vs Current User).
**LANGUAGE**: Text
**CODE**:
```Text
Checks:
- Restart VS Code after import.
- Open a new terminal after setx or after editing shell rc files.
- Ensure certificate file permissions allow reading by the user running the generator.
```
--------------------------------

**TITLE**: ABAP Development Tools (ADT) → SAP Fiori Tools Integration and Download Workflow

**INTRODUCTION**: Quick, actionable reference for configuring ADT (Eclipse) to launch SAP Fiori tools (SAP Business Application Studio or Visual Studio Code), launching the SAP Fiori Generator from ADT, and directly downloading ADT-deployed SAPUI5 apps into your IDE workspace.

**TAGS**: fiori-tools, ADT, ABAP, VS Code, SAP Business Application Studio, SAP Fiori Generator, SAPUI5

**STEP**: 1 — Configure ADT to launch target IDE (one-time per ABAP system)

**DESCRIPTION**: In ADT (Eclipse) configure the ABAP system to launch either SAP Business Application Studio or Visual Studio Code. This is required once per ABAP system you want integrated.

**LANGUAGE**: Text

**CODE**:
```Text
ADT (Eclipse) UI steps:
1. In the Project Explorer / ABAP Systems view, right-click the ABAP system you want to integrate.
2. Select: Properties
3. Navigate to: ABAP Development > IDE Configuration
4. Check: Configure the target IDE
5. Choose target IDE: 
   - SAP Business Application Studio
   - OR Visual Studio Code (VS Code)
6. Save/Apply changes
```

**STEP**: 2 — Launch SAP Fiori Generator from ADT using "Create Fiori Project"

**DESCRIPTION**: After configuring the target IDE, ADT displays a new button near service details called Create Fiori Project. Clicking it opens the chosen IDE and automatically starts the SAP Fiori Generator using the selected system/service details. When launched this way:
- Data source selection is skipped (ADT already provided it).
- The main entity is pre-selected based on your ADT selection.

**LANGUAGE**: Text

**CODE**:
```Text
From ADT:
1. Open the OData/service details or the ABAP service you are working with.
2. Click: Create Fiori Project (button shown alongside service details)
Result:
- Your chosen IDE (SAP BAS or VS Code) launches.
- SAP Fiori Generator starts automatically with system and main entity pre-filled.
```

**STEP**: 3 — Download an already-deployed app from ADT into SAP Fiori tools (after Quick Fiori Application generator)

**DESCRIPTION**: If you used ADT's Quick Fiori Application generator to deploy an app, use Create Fiori Project to launch SAP Fiori tools and download that deployed application into your workspace. After download, the app is updated to support SAP Fiori tools' capabilities.

**LANGUAGE**: Text

**CODE**:
```Text
1. In ADT, locate the service/app that was deployed with the Quick Fiori Application generator.
2. Click: Create Fiori Project
3. SAP Fiori tools will:
   - Download the deployed application into your IDE workspace
   - Update the project to be compatible with SAP Fiori tools
```

**STEP**: 4 — Directly download ADT-deployed SAPUI5 app from VS Code (no ADT launch required)

**DESCRIPTION**: From VS Code, run the command to list and download applications that were deployed from ADT. Select the system from the dropdown and choose an application to download.

**LANGUAGE**: Command Palette

**CODE**:
```Command Palette
In VS Code:
1. Open Command Palette: Ctrl+Shift+P (Windows/Linux) or Cmd+Shift+P (macOS)
2. Run: Fiori: Download ADT Deployed App from SAPUI5 ABAP Repository
3. Steps in the dialog:
   - Select your target ABAP system from the dropdown
   - Select the SAP Fiori application you want to download (list shows apps deployed from ADT)
   - Confirm download; the app is added to your workspace
```

**STEP**: 5 — Ensure VS Code saved ABAP system URL matches ADT (matching rules and SAP Systems view)

**DESCRIPTION**: For seamless matching when ADT launches VS Code, the ABAP system saved in VS Code must use the same system URL as ADT. Check or manage saved systems from the SAP Fiori extension view. If the saved system cannot be matched automatically, you can select any existing saved system in the dialog. If a workspace already contains SAP Fiori projects using the same system and main entity, you will be offered to reuse an existing project or create a new one.

**LANGUAGE**: Text

**CODE**:
```Text
Check saved ABAP systems in VS Code:
1. In VS Code Activity Bar (left), click: SAP Fiori (Wrench/Pencil icon)
   - Image reference (extension UI): images/SAP_Fiori_tools_Wrench_Pencil_9d6b0f8.png
2. Click: SAP Systems
3. Verify the saved system's URL matches the ADT system URL you configured in Eclipse.
If mismatch:
- When launching from ADT, pick any existing saved system from the dropdown dialog.
Notes:
- If a matching project (same system + main entity) exists in workspace, you can:
  - Select the existing project, OR
  - Create a new SAP Fiori project via the SAP Fiori Generator
```

--------------------------------

**TITLE**: SAP Fiori Tools — Capabilities & Commands (Developer Reference)

**INTRODUCTION**: Quick, actionable reference of SAP Fiori Tools commands, npm scripts, file paths and small examples you can use in VS Code or SAP Business Application Studio. Use these commands for building, previewing, deploying, mock-server setup, annotations, adaptation projects, validation and accessibility tasks.

**TAGS**: fiori-tools, sapui5, sap-fiori, vscode, build, deploy, mockserver, annotations, adaptation, linter, scripts

**STEP**: 1 — Open Application Information
**DESCRIPTION**: Open the Application Info pane (shows available features, commands and project summary). From VS Code or Business Application Studio run the command by name or via its command id.
**LANGUAGE**: Bash
**CODE**:
```bash
# In VS Code / Business Application Studio:
# Press Cmd/Ctrl + Shift + P then run:
Fiori: Open Application Info

# Command id (for extensions or automation that can trigger VS Code commands):
sap.ux.appGenerator.openApplicationInfo

# Reference to detailed documentation inside the project docs:
../Project-Functions/application-information-c3e0989.md
```

**STEP**: 2 — Build the Application
**DESCRIPTION**: Build the application artifacts. The build results are stored in the dist folder. Use npm scripts for reproducible builds.
**LANGUAGE**: Bash
**CODE**:
```bash
# Run the project's build script
npm run build

# Output folder:
# ./dist
```

**STEP**: 3 — Example package.json scripts (standard scripts referenced in docs)
**DESCRIPTION**: Add or verify these scripts in package.json to match common SAP Fiori tooling tasks referenced by the tools.
**LANGUAGE**: JSON
**CODE**:
```json
{
  "scripts": {
    "build": "npm run ui5-build",                 /* placeholder: populate with your ui5 build command */
    "deploy-test": "npm run ui5-deploy -- --test",/* project-specific deploy test */
    "undeploy": "npm run ui5-undeploy",           /* remove deployed artifacts */
    "start-variants-management": "node ./variants-server.js", /* start variants config UI */
    "start": "ui5 serve"                          /* preview server (adjust to your project) */
  }
}
```

**STEP**: 4 — Deploy / Add Deploy Config / Fiori Launchpad Config
**DESCRIPTION**: Create deployment configuration and deploy using UI5 deploy settings (ui5-deploy.yaml). Tools expose VS Code commands to add or launch deploy workflows.
**LANGUAGE**: Bash
**CODE**:
```bash
# Add a deploy configuration via VS Code command
# Run in Command Palette:
# "Add Deploy Config"
# Command id:
sap.ux.appGenerator.launchDeployConfig

# Add Fiori Launchpad config (Command Palette)
sap.ux.appGenerator.launchFlpConfig

# Deploy according to ui5-deploy.yaml (Command Palette)
sap.ux.appGenerator.launchDeploy

# CLI-style reference (project-specific):
# Ensure ui5-deploy.yaml exists at project root (example minimal)
cat > ui5-deploy.yaml <<'YAML'
deploy:
  - name: default
    src: dist
    dest: /deploy/path
YAML

# Use npm script variants to test deploy
npm run deploy-test
npm run undeploy
```

**STEP**: 5 — Create Project Archive (exclude node_modules)
**DESCRIPTION**: Zip the project for sharing or support while excluding the node_modules folder.
**LANGUAGE**: Bash
**CODE**:
```bash
# Create a zip excluding node_modules
zip -r project-archive.zip . -x "node_modules/*"

# Or trigger the VS Code command:
# Command id:
sap.ux.environmentcheck.archiveProject
```

**STEP**: 6 — Setup Mockserver Configuration & Maintain Mock Data
**DESCRIPTION**: Add mockserver middleware config to enable local mock endpoints and open the mock data editor to maintain sample data.
**LANGUAGE**: Bash
**CODE**:
```bash
# Add mockserver configuration using the SAP UX create helper
npx --yes @sap-ux/create@latest add mockserver-config

# Open Data / Mock Editor via Command Palette:
# "Maintain Mockdata" or "Open Data Editor"
# Command id:
sap.ux.dataEditor.open

# Preview the application with available start scripts:
# Trigger from Command Palette:
# "Preview Application"
# Command id:
sap.ux.pageEditor.previewExternal
```

**STEP**: 7 — Service Models & Annotations (EDMX / metadata.xml / local XML annotations)
**DESCRIPTION**: Inspect and sync OData service metadata, manage local XML annotation files and copy remote annotations into local files. Use service modeler commands.
**LANGUAGE**: Bash
**CODE**:
```bash
# Open service with annotations (Command Palette)
# Command id:
sap.ux.serviceModeler.openFile

# Open Service Manager to sync metadata.xml with backend:
sap.ux.serviceModeler.openServiceMgr
# Typical service metadata file path:
# ./webapp/localService/edmx/metadata.xml

# Manage local XML annotations (choose/create):
sap.ux.serviceModeler.openAnnotationFileMgr

# Add a local annotation file to an adaptation project:
sap.ux.adp.addAnnotationFile
```

**STEP**: 8 — Adaptation Projects (add components, inbound changes, replace OData service)
**DESCRIPTION**: Commands to manage adaptation projects: add SAPUI5 component usages, inbound changes, open adaptation editor and deployment wizard, and replace OData service.
**LANGUAGE**: Bash
**CODE**:
```bash
# Add SAPUI5 components to adaptation project (Command Palette)
sap.ux.adp.addSAPUI5ComponentUsages

# Add inbound change to adaptation project:
sap.ux.adp.changeInbound

# Open Adaptation Editor (Command Palette)
sap.ux.adp.openAdaptationEditor

# Open Deployment Wizard to deploy adaptation project:
sap.ux.adp.openDeploymentWizard

# Replace OData service used by the adaptation project:
sap.ux.adp.replaceODataService
```

**STEP**: 9 — Variants, Page Map, Guided Development, and Documentation
**DESCRIPTION**: Configure variants, view the page map, run guided development tasks and open UI5/flexibility documentation from the tools.
**LANGUAGE**: Bash
**CODE**:
```bash
# Add variants configuration (Command Palette)
sap.ux.applicationModeler.addVariantsConfig

# Start variants management (npm script)
npm run start-variants-management

# Show Page Map (Command Palette)
sap.ux.pageMap.showMap

# Open Guided Development help:
sap.ux.help.openGuidedDevelopmentFromExplorer

# Open documentation of manifest and flexibility properties:
sap.ux.applicationModeler.showDocu
```

**STEP**: 10 — Run Linter, Validate Project, and Check Dependencies
**DESCRIPTION**: Run UI5 linter via the tools, validate the project producing a report, and check outdated node modules with npm.
**LANGUAGE**: Bash
**CODE**:
```bash
# Run UI5 linter (via Command Palette)
sap.ux.applicationModeler.runUI5Linter
# See: https://github.com/UI5/linter

# Validate the project and generate a report (Command Palette)
sap.ux.applicationModeler.validate

# Check node modules for newer versions:
npm outdated
```

**STEP**: 11 — Preview Configuration Conversion (virtual endpoints)
**DESCRIPTION**: Convert preview configuration to use virtual endpoints for previewing the app with configured virtual services.
**LANGUAGE**: Bash
**CODE**:
```bash
# Convert configuration for preview with virtual endpoints (Command Palette)
sap.ux.applicationModeler.convertPreview
```

**STEP**: 12 — Page Editor Preview Options & Start Scripts
**DESCRIPTION**: The preview command lets you select from configured start scripts. Ensure your project's start scripts are defined and adjusted for previewing in the workspace.
**LANGUAGE**: Bash
**CODE**:
```bash
# Example start scripts (adjust to actual project tooling)
npm run start                # run dev server / ui5 serve
npm run start-local          # start with mock backend
npm run start-variants-management

# Use "Preview Application" (Command Palette) to choose among these
sap.ux.pageEditor.previewExternal
```

**STEP**: 13 — Accessibility & Usability Notes
**DESCRIPTION**: Keyboard navigation and high contrast theme support. Use keyboard only navigation inside tools and switch VS Code theme to high contrast for accessibility testing.
**LANGUAGE**: Text
**CODE**:
```text
# Keyboard navigation tips (use in the UI):
- Arrow keys: navigate within controls and lists
- Tab: move forward to next focusable control
- Shift + Tab: move backward
- Enter: activate selection

# Switch to high contrast theme in VS Code / Business Application Studio:
- Preferences > Color Themes  (or press Ctrl/Cmd+K then Ctrl/Cmd+T)
```
--------------------------------

**TITLE**: SAP Fiori Tools — Command Palette Reference for Automation and Extensions

**INTRODUCTION**: This reference groups SAP Fiori Tools command-palette actions into actionable items for automation and extension development. Use these steps to (A) run commands from the VS Code Command Palette, (B) call them programmatically via the VS Code API (replace placeholder command IDs with the actual IDs from the extension's package.json), and (C) locate relevant files and configuration (file names and doc links preserved).

**TAGS**: fiori-tools, vscode, commands, automation, preview, deploy, generator, sapui5, sap, cap

**STEP**: Configuration & Deployment Commands

**DESCRIPTION**: Commands to add configuration, change project settings, migrate, archive, validate, and deploy projects. Deployment settings default to ui5-deploy.yaml in the workspace root.

**LANGUAGE**: text

**CODE**:
```text
Command Palette:
  - Open: Ctrl+Shift+P (Cmd+Shift+P on macOS)
  - Run one of:
    "Fiori: Add Configuration for Variants Creation"
    "Fiori: Add Deployment Configuration"
    "Fiori: Add SAP Fiori Launchpad Configuration"
    "Fiori: Add SAP Fiori Launchpad Embedded Configuration"
    "Fiori: Change the Minimum SAPUI5 Version"
    "Fiori: Change Telemetry Settings"
    "Fiori: Migrate Project for use in SAP Fiori Tools"
    "Fiori: Archive Project"
    "Fiori: Validate Project"
    "Fiori: Deploy Application"  (uses ui5-deploy.yaml by default)

Notes:
  - Deployment file: ui5-deploy.yaml (workspace root). Ensure this file exists and is configured before running "Fiori: Deploy Application".
  - Reference docs:
    - Reuse Library Support: ../Project-Functions/reuse-library-support-6e99fbb.md
    - Migration: migration-70d41f3.md
    - Telemetry: telemetry-837c231.md
```

**LANGUAGE**: TypeScript

**CODE**:
```typescript
// Programmatic invocation pattern — replace <command-id> with the extension's registered command id.
import * as vscode from 'vscode';

// Example: programmatically start a deployment command
await vscode.commands.executeCommand('<command-id>.deployApplication'); // replace with actual id

// Example: add a configuration for launchpad embedding
await vscode.commands.executeCommand('<command-id>.addLaunchpadEmbeddedConfig'); // replace with actual id
```

---

**STEP**: System Connections (SAP Systems)

**DESCRIPTION**: Commands to add/import SAP systems (ABAP On-Premises or ABAP Environment with a service key) and to view saved system details. See Managing SAP System Connections for details.

**LANGUAGE**: text

**CODE**:
```text
Command Palette:
  - "Fiori: Add SAP System"                (Add new ABAP on-prem or ABAP environment w/ service key)
  - "Fiori: Import SAP System"             (Import and save ABAP On-Premise system)
  - "Fiori: Show SAP System Details"       (Open details for a saved system)

Reference:
  - Managing SAP System Connections: ../Project-Functions/managing-sap-system-connections-78a82b6.md
```

**LANGUAGE**: TypeScript

**CODE**:
```typescript
// Pattern to call SAP system commands programmatically.
// Replace <command-id> placeholders with actual commands from package.json
await vscode.commands.executeCommand('<command-id>.addSapSystem');
await vscode.commands.executeCommand('<command-id>.importSapSystem');
await vscode.commands.executeCommand('<command-id>.showSapSystemDetails', { systemId: 'MY_SYSTEM_ID' });
```

---

**STEP**: Generators, Editors, and Guided Development

**DESCRIPTION**: Commands that launch generators, editors, guided development, and information pages for creating or modifying apps and libraries.

**LANGUAGE**: text

**CODE**:
```text
Command Palette:
  - "Fiori: Open Application Generator"                (Launch application generator)
  - "Fiori: Open Reusable Library Generator"           (Launch reusable library generator)
  - "Fiori: Open CF Application Router Generator"      (Generate app router config for MTA)
  - "Fiori: Open Application Info"                     (Open Application Information page)
  - "Fiori: Open Guided Development"                   (Launch guided development feature guides)
  - "Fiori: Open Guided Development to the Side"       (Launch guides to side)
  - "Fiori: Open Annotation File Manager"              (Launch annotation file manager)
  - "Fiori: Open Run Configurations"                   (Open run configuration editor)
  - "Fiori: Open Data Editor"                          (Launch Data Editor)
  - "Fiori: Open Service Manager"                      (Launch Service Manager)
  - Documentation:
      - Generating an Application: ../Generating-an-Application/generating-an-application-db44d45.md
      - Generating an MTA Deployment File: ../Generating-an-Application/Additional-Configuration/generating-an-mta-deployment-file-9c41152.md
      - Use Feature Guides: ../Developing-an-Application/use-feature-guides-0c9e518.md
      - Use Run Control: ../Previewing-an-Application/use-run-control-09171c8.md
```

**LANGUAGE**: TypeScript

**CODE**:
```typescript
// Launch the application generator programmatically (placeholder id)
await vscode.commands.executeCommand('<command-id>.openApplicationGenerator');

// Open run configurations programmatically
await vscode.commands.executeCommand('<command-id>.openRunConfigurations');
```

---

**STEP**: Preview, Navigation & Run Control

**DESCRIPTION**: Commands to preview apps, configure run options, and enable cross-app navigation previews.

**LANGUAGE**: text

**CODE**:
```text
Command Palette:
  - "Fiori: Preview Application"                          (Choose start script to run preview)
  - "Fiori: Enable App-to-App Navigation Preview"        (Save config to preview navigation between apps in same workspace)
  - "Fiori: Add SAP Fiori Launchpad Embedded Configuration"  (Preview app in target environment without redeploy)
  - "Fiori: Open Run Configurations"                     (Configure preview options)
  - App-to-App Navigation Preview docs:
      ../Previewing-an-Application/app-to-app-navigation-preview-543675f.md
  - Preview on external Launchpad docs:
      ../Previewing-an-Application/preview-an-application-on-external-sap-fiori-launchpad-c789692.md
```

**LANGUAGE**: TypeScript

**CODE**:
```typescript
// Example: Start a preview using run configuration command id (placeholder)
await vscode.commands.executeCommand('<command-id>.previewApplication', { runConfigId: 'default' });

// Enable app-to-app navigation preview
await vscode.commands.executeCommand('<command-id>.enableAppToAppPreview');
```

---

**STEP**: Modelers, Page Tools & UI Structure

**DESCRIPTION**: Commands for visualizing and editing application models, pages, annotations, and navigation maps.

**LANGUAGE**: text

**CODE**:
```text
Command Palette:
  - "Fiori: Open Service Modeler"                  (Visualize OData service model & annotations)
  - "Fiori: Open Service Modeler to the Side"     (Open modeler to the side)
  - "Fiori: Refresh Application Modeler View"     (Refresh modeler view)
  - "Fiori: Show Page Editor"                     (Outline view for configurable page elements)
  - "Fiori: Show Page Map"                        (Shows application pages and navigation paths)
  - "Fiori: Open Annotation File Manager"         (Manage annotation files)
  - Viewing service metadata docs:
      ../Project-Functions/viewing-service-metadata-e369c2c.md
  - Configure page elements docs:
      ../Developing-an-Application/configure-page-elements-047507c.md
  - Define application structure docs:
      ../Developing-an-Application/define-application-structure-bae38e6.md
```

**LANGUAGE**: TypeScript

**CODE**:
```typescript
// Open the Service Modeler to the side (placeholder id)
await vscode.commands.executeCommand('<command-id>.openServiceModelerToSide');

// Refresh modeler view
await vscode.commands.executeCommand('<command-id>.refreshApplicationModelerView');
```

---

**STEP**: Diagnostics, Linting, Output & Support Tools

**DESCRIPTION**: Commands to check the environment, run linters, restart services, view outputs and release notes, and launch Joule AI (requires SAP Build Code subscription).

**LANGUAGE**: text

**CODE**:
```text
Command Palette:
  - "Fiori: Open Environment Check"                 (Check and create environment reports)
  - "Fiori: Restart XML Annotation Language Server" (Restart language server if failed)
  - "Fiori: Run UI5 Linter"                         (Static analysis for SAPUI5 best practices)
      - UI5 linter: https://github.com/UI5/linter
  - "Fiori: Show Output Channel"                    (Open Application Modeler Output channel)
  - "Fiori: Show Release Notes"                     (Show SAP Fiori tools release notes)
  - "Fiori tools AI: Show Fiori Tools Joule"        (Launch Joule in BAS, requires SAP Build Code subscription)
```

**LANGUAGE**: TypeScript

**CODE**:
```typescript
// Restart the XML Annotation Language Server
await vscode.commands.executeCommand('<command-id>.restartXmlAnnotationLanguageServer');

// Run UI5 linter command programmatically
await vscode.commands.executeCommand('<command-id>.runUi5Linter');
```

---

**STEP**: Project-Level Operations (CAP & Multi-app Projects)

**DESCRIPTION**: Commands for CAP multi-application projects and project-scoped operations (delete application, archive, validate).

**LANGUAGE**: text

**CODE**:
```text
Command Palette:
  - "Fiori: Delete Application from CAP Project"   (Delete an application from a multi-application CAP project)
  - "Fiori: Archive Project"                       (Archive a project)
  - "Fiori: Validate Project"                      (Validate a project)

Reference:
  - Deleting an Application in CAP Project: ../Project-Functions/deleting-an-application-in-cap-project-709f838.md
```

**LANGUAGE**: TypeScript

**CODE**:
```typescript
// Delete an application from a CAP project (placeholder id + payload)
await vscode.commands.executeCommand('<command-id>.deleteAppFromCapProject', { appName: 'my-app' });

// Archive a project
await vscode.commands.executeCommand('<command-id>.archiveProject');
```


--------------------------------

**TITLE**: Getting Started with SAP Fiori Tools — Quick Developer Actions

**INTRODUCTION**: Short, actionable guide for developers to set up SAP Fiori tools in SAP Business Application Studio (BAS) or Visual Studio Code, generate a Fiori elements application, view and edit application structure with Application Modeler, inspect OData services with Service Modeler, maintain annotations with the Language Server, and run the Environment Check. Includes minimal required configuration snippets (manifest and annotation examples) and links to documentation pages from the original content.

**TAGS**: fiori-tools, sap-fiori, sapui5, fiori-elements, application-wizard, application-modeler, service-modeler, annotations, language-server, environment-check, bas, vscode

STEP: 1 — Install or enable SAP Fiori tools extensions

DESCRIPTION: Install or enable the SAP Fiori tools extension set in your IDE (SAP Business Application Studio or Visual Studio Code). In BAS most extensions are pre-installed; in VS Code use the Extensions view to search for and install by name. The key extensions (use these names in the Extensions view or the BAS extension catalog):

- Application Wizard
- SAP Fiori Tools – Application Modeler
- Guided Development
- Service Modeler
- Maintaining Annotations with Language Server
- SAP Fiori tools Environment Check

LANGUAGE: Bash (example CLI install for VS Code)

CODE:
```bash
# Example: install core SAP Fiori tools extensions in VS Code (replace <extension-id> with marketplace ID if known)
# Use the Extensions view in VS Code for exact names if marketplace IDs are not available.
code --install-extension "SAP.application-wizard"
code --install-extension "SAP.fiori-tools-application-modeler"
code --install-extension "SAP.fiori-tools-guided-development"
code --install-extension "SAP.fiori-tools-service-modeler"
code --install-extension "SAP.fiori-tools-annotations-language-server"
code --install-extension "SAP.fiori-tools-environment-check"
```

STEP: 2 — Generate a new SAP Fiori elements application with Application Wizard

DESCRIPTION: Launch the Application Wizard from the command palette (or from the Application Wizard extension panel). Choose project template (Fiori elements ListReport + ObjectPage or freestyle SAPUI5), select data source (OData V2/V4), provide main entity, choose SAPUI5 version (minimum 1.65), and generate the project into your workspace.

LANGUAGE: Instructions / JSON (manifest snippet to ensure minimum UI5)

CODE:
```json
// manifest.json snippet — ensure minimum SAPUI5 version >= 1.65
{
  "sap.ui5": {
    "dependencies": {
      "minUI5Version": "1.65.0",
      "libs": {
        "sap.m": {},
        "sap.ui.core": {}
      }
    },
    "models": {
      "": {
        "dataSource": "mainService",
        "preload": true,
        "settings": {
          "synchronizationMode": "None"
        }
      }
    }
  },
  "sap.app": {
    "id": "my.fiori.app",
    "type": "application",
    "applicationVersion": {
      "version": "0.0.1"
    }
  }
}
```

STEP: 3 — Visualize and modify pages/navigation with Application Modeler

DESCRIPTION: Open the SAP Fiori Tools – Application Modeler to view the Page Map and Page Editor. Use it to add pages, edit navigation targets, and map entities to pages. Changes made in the Modeler will update manifest routing configuration and page definitions; you can then validate and run the app.

LANGUAGE: JSON (routing + target example to add a new page)

CODE:
```json
// manifest.json routing example — add a new ObjectPage route and target
{
  "sap.ui5": {
    "routing": {
      "config": {
        "routerClass": "sap.m.routing.Router",
        "viewType": "XML",
        "viewPath": "my.fiori.app.view",
        "controlId": "app",
        "controlAggregation": "pages"
      },
      "routes": [
        {
          "name": "ListReport",
          "pattern": "",
          "target": "ListReport"
        },
        {
          "name": "ObjectPage",
          "pattern": "Object/{entityId}",
          "target": "ObjectPage"
        }
      ],
      "targets": {
        "ListReport": {
          "viewName": "ListReport",
          "viewLevel": 1
        },
        "ObjectPage": {
          "viewName": "ObjectPage",
          "viewLevel": 2
        }
      }
    }
  }
}
```

STEP: 4 — Browse OData service metadata with Service Modeler

DESCRIPTION: Open your local OData $metadata XML file in the Service Modeler view to visualize entities, properties, associations, and navigation paths. Use it to identify the main entity and properties to include in UI annotations or list columns.

LANGUAGE: XML (snippet showing typical OData entity in $metadata)

CODE:
```xml
<!-- Example $metadata entityType snippet -->
<EntityType Name="Product">
  <Key>
    <PropertyRef Name="ProductID"/>
  </Key>
  <Property Name="ProductID" Type="Edm.String" Nullable="false" MaxLength="10"/>
  <Property Name="Name" Type="Edm.String"/>
  <Property Name="Category" Type="Edm.String"/>
  <NavigationProperty Name="ToSupplier" Type="Namespace.Supplier"/>
</EntityType>
```

STEP: 5 — Maintain annotations using the Annotations Language Server

DESCRIPTION: Create or edit annotation XML files and rely on the Language Server for code completion, micro-snippets, diagnostics, and i18n support. Place annotation files under e.g. webapp/annotations/ and reference them in manifest -> sap.app -> dataSources.

LANGUAGE: XML (sample annotations.xml for UI.LineItem and UI.Facets)

CODE:
```xml
<?xml version="1.0" encoding="utf-8"?>
<edmx:Edmx Version="4.0" xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx">
  <edmx:Reference Uri="http://docs.oasis-open.org/odata/odata/v4.0/cs02/vocabularies/Org.OData.Core.V1.xml"/>
  <edmx:DataServices>
    <Schema Namespace="my.annotations" xmlns="http://docs.oasis-open.org/odata/ns/edm">
      <Annotations Target="Namespace.Product">
        <Annotation Term="UI.LineItem">
          <Collection>
            <Record Type="UI.DataField">
              <PropertyValue Property="Label" String="Product ID"/>
              <PropertyValue Property="Value">
                <PropertyPath>ProductID</PropertyPath>
              </PropertyValue>
            </Record>
            <Record Type="UI.DataField">
              <PropertyValue Property="Label" String="Name"/>
              <PropertyValue Property="Value">
                <PropertyPath>Name</PropertyPath>
              </PropertyValue>
            </Record>
          </Collection>
        </Annotation>
      </Annotations>
    </Schema>
  </edmx:DataServices>
</edmx:Edmx>
```

STEP: 6 — Run SAP Fiori tools Environment Check

DESCRIPTION: Use the Environment Check extension to validate your local environment and configured BTP destinations. Launch it from the command palette (or the extension view) to run the suite of checks; inspect the output for missing prerequisites, required versions, or connectivity issues.

LANGUAGE: Bash / Example (no strict CLI; run from IDE)

CODE:
```bash
# Example: open Command Palette (Ctrl+Shift+P) and run:
# "Fiori tools: Environment Check"
# The extension will provide a report in the IDE output panel or a generated report file.

# If you prefer a manual local check, verify Node and UI5 tooling versions:
node --version
npm --version
ui5 --version  # if using UI5 CLI
```

STEP: 7 — Notes, Supported Landscapes, and Support

DESCRIPTION: Key compatibility notes and where to get help.

LANGUAGE: Plain text / JSON (metadata)

CODE:
```text
Supported Deployment Landscapes:
- SAP S/4HANA
- SAP S/4HANA Cloud
- SAP BTP (ABAP and Cloud Foundry Environments)

Data source details: see Data Source page:
../Generating-an-Application/SAP-Fiori-Elements/data-source-9906181.md

If you encounter issues:
- Create an incident in the SAP Support Portal for component: CA-UX-IDE

Documentation links from source:
- Application Wizard: ../Generating-an-Application/SAP-Fiori-Elements/sap-fiori-elements-1488469.md
- Application Modeler: ../Developing-an-Application/developing-an-application-a9c0043.md
- Page Editor: ../Developing-an-Application/configure-page-elements-047507c.md
- Page Map: ../Developing-an-Application/define-application-structure-bae38e6.md
- Guided Development: ../Developing-an-Application/use-feature-guides-0c9e518.md
- Service Modeler: ../Project-Functions/viewing-service-metadata-e369c2c.md
- Annotations Language Server: ../Developing-an-Application/maintaining-annotations-with-language-server-6fc93f8.md
- Environment Check: ../Project-Functions/environment-check-75390cf.md
```

STEP: 8 — Cautions and minimum requirements

DESCRIPTION: Ensure your app and environment meet these minimum requirements to avoid runtime or tooling issues.

LANGUAGE: Plain text

CODE:
```text
Caution:
- SAP Fiori tools supports development of SAP Fiori elements and freestyle SAPUI5 applications with minimum SAPUI5 version 1.65 or higher.
- Ensure manifest.json contains "sap.ui5".dependencies.minUI5Version >= "1.65.0"
```
--------------------------------

**TITLE**: Import an SAP Fiori Application from the SAPUI5 ABAP Repository into BAS or VS Code

**INTRODUCTION**: Step-by-step code-focused instructions to download a BSP/SAPUI5 application from an ABAP back-end, restore it to a workspace folder structure, create the required package.json, perform migration for Fiori tools, and handle common cleanup (minified vs debug sources) prior to running UI5 CLI builds.

**TAGS**: SAPUI5, ABAP, BSP, Fiori, Business Application Studio, VS Code, migration, ui5, package.json, manifest.json

**STEP**: 1 — Prepare workspace folders
**DESCRIPTION**: Create the two required folders in your workspace:
- restore-from-exported/  -> contains the restored app root
- restore-from-exported/webapp  -> contains extracted zip/tgz contents (app web resources)
Create these folders in SAP Business Application Studio or VS Code workspace root.
**LANGUAGE**: bash
**CODE**:
```bash
# from workspace root (BAS or VS Code)
mkdir -p restore-from-exported/webapp
```

**STEP**: 2 — Download the application from the ABAP back-end
**DESCRIPTION**: In the SAP GUI for your ABAP system, use transaction SE80 and run the report /UI5/UI5_REPOSITORY_LOAD to locate and download the SAPUI5 application. Save the downloaded archive (.zip) to an empty local folder.
- Report: /UI5/UI5_REPOSITORY_LOAD
- In the report UI: provide the application name → Download → choose empty download folder → click "Click here to Download"
**LANGUAGE**: text
**CODE**:
```text
SAP GUI steps:
1. Open SE80.
2. Execute report: /UI5/UI5_REPOSITORY_LOAD
3. Enter the SAPUI5 application name (e.g. sap.fe.demo.awesomeapp).
4. Click Download -> choose an empty folder -> Click here to Download (save .zip).
```

**STEP**: 3 — Extract the downloaded archive into webapp
**DESCRIPTION**: Extract the .zip file contents into restore-from-exported/webapp. Ensure manifest.json ends up at restore-from-exported/webapp/manifest.json.
**LANGUAGE**: bash
**CODE**:
```bash
# Example: unzip into the webapp folder
unzip /path/to/downloaded-app.zip -d restore-from-exported/webapp

# Verify manifest.json is present
test -f restore-from-exported/webapp/manifest.json && echo "manifest.json found" || echo "manifest.json NOT found"
```

**STEP**: 4 — Inspect manifest.json to get the application id
**DESCRIPTION**: Read the application id (namespace) from manifest.json. The id must be used as the package.json "name" field.
**LANGUAGE**: bash
**CODE**:
```bash
# Print the sap.app.id from manifest.json (requires jq)
jq -r '.["sap.app"].id' restore-from-exported/webapp/manifest.json

# Fallback using grep/sed if jq not available:
grep -o '"id"[[:space:]]*:[[:space:]]*".*"' restore-from-exported/webapp/manifest.json | head -1
```

**STEP**: 5 — Create package.json in restore-from-exported
**DESCRIPTION**: Create a package.json at restore-from-exported/package.json. The "name" value must match the application id from manifest.json (e.g. sap.fe.demo.awesomeapp). Minimal package.json is sufficient for migration.
**LANGUAGE**: JSON
**CODE**:
```json
{
  "name": "sap.fe.demo.awesomeapp"
}
```

**STEP**: 6 — Start the Fiori tools migration in BAS or VS Code
**DESCRIPTION**: In SAP Business Application Studio or VS Code, run the migration command "Fiori: Migrate Project for use in Fiori tools" (via Command Palette). The tool should detect the project in restore-from-exported and list it for migration. Choose appropriate options and complete the migration to make the project compatible with Fiori tools.
**LANGUAGE**: text
**CODE**:
```text
Command Palette -> "Fiori: Migrate Project for use in Fiori tools"
Select project: ./restore-from-exported
Follow prompts and choose options for migration.
```

**STEP**: 7 — Handle minified code and optional debug sources (-dbg.js)
**DESCRIPTION**: BSP-deployed code is often minified. The package may include debug/unminified files with suffix -dbg.js (e.g. Component-dbg.js). If you need readable source:
- Copy contents of Component-dbg.js into Component.js to restore readable code.
- Remove -dbg.js, -preload.js and .js.map files before running ui5 build to avoid them being copied into dist and recreated.
Provide shell commands to copy or remove files in bulk.
**LANGUAGE**: bash
**CODE**:
```bash
# Example: replace .js files with -dbg.js contents if present (careful: overwrite)
find restore-from-exported/webapp -name '*-dbg.js' -print0 | while IFS= read -r -d '' dbg; do
  js="${dbg%-dbg.js}.js"
  if [ -f "$js" ]; then
    # Overwrite the minified .js with the readable -dbg.js content
    cp "$dbg" "$js"
  fi
done

# Remove debug, preload and source map files prior to ui5 build
find restore-from-exported/webapp -type f \( -name '*-dbg.js' -o -name '*-preload.js' -o -name '*.js.map' \) -delete
```

**STEP**: 8 — Build with UI5 CLI (after cleanup)
**DESCRIPTION**: After migration and cleanup, run UI5 CLI build. Ensure that debug/preload/map files were removed before building to avoid undesired artifacts in dist.
**LANGUAGE**: bash
**CODE**:
```bash
# From project root (restore-from-exported)
# Ensure you have @ui5/cli installed or use npx
npx ui5 build --include-dependencies --clean-dest
# or
ui5 build
```

**STEP**: 9 — Verify migrated project
**DESCRIPTION**: Confirm the project is migrated and compatible with SAP Fiori tools (project appears in workspace, manifest.json present, package.json name matches manifest id, and build completes).
**LANGUAGE**: text
**CODE**:
```text
Checks:
- restore-from-exported/manifest.json exists
- restore-from-exported/package.json name === manifest sap.app.id
- Migration completed without errors in Output/Terminal
- ui5 build produced dist/ folder successfully
```
--------------------------------

**TITLE**: Installation (fiori-tools) — open environment-specific installation docs

**INTRODUCTION**: This document points to environment-specific installation instructions for fiori-tools. Use the commands below to open the exact markdown files in this repository or extract the specific anchor section for Visual Studio Code.

**TAGS**: fiori-tools, installation, sap, sap-business-application-studio, vscode, docs

**STEP**: 1 — Open SAP Business Application Studio installation doc

**DESCRIPTION**: Open the SAP Business Application Studio installation instructions file (sap-business-application-studio-b011040.md) in your editor or print to terminal. Use the examples below depending on whether you prefer an editor (VS Code) or a terminal viewer.

**LANGUAGE**: Bash

**CODE**:
```bash
# Open in Visual Studio Code (if installed)
code sap-business-application-studio-b011040.md

# Print the file to the terminal (useful in CI or remote shells)
cat sap-business-application-studio-b011040.md

# Page through the file in the terminal
less sap-business-application-studio-b011040.md
```

**STEP**: 2 — Open Visual Studio Code installation doc and jump to anchor

**DESCRIPTION**: Open the Visual Studio Code installation file (visual-studio-code-17efa21.md). The relevant installation section is referenced by the anchor "#loio17efa217f7f34a9eba53d7b209ca4280". Use the examples below to open the file and locate or extract the anchored section.

**LANGUAGE**: Bash

**CODE**:
```bash
# Open the full file in VS Code
code visual-studio-code-17efa21.md

# Print the file to the terminal
cat visual-studio-code-17efa21.md

# Find the line number of the anchor text (adjust the search string if the anchor is stored as a comment)
grep -n "loio17efa21" -n visual-studio-code-17efa21.md || grep -n "loio17efa217f7f34a9eba53d7b209ca4280" visual-studio-code-17efa21.md

# Example: display 200 lines starting from the anchor line number (replace <LINE> with the grep output)
# sed -n '<LINE>,<LINE+200>p' visual-studio-code-17efa21.md

# If the anchor is a Markdown header (e.g., "## ..."), open from that header to the next header (example using awk).
# This prints from the header that contains "loio17efa21" until the next top-level header starting with '# ':
awk '/loio17efa21/{flag=1} flag{print} /^# / && flag && NR!=FNR{exit}' visual-studio-code-17efa21.md
```
--------------------------------

**TITLE**: Migrate SAP Fiori projects to SAP Fiori tools (VS Code / Business Application Studio)

**INTRODUCTION**: Quick, actionable instructions to migrate SAP Fiori projects (SAP Fiori elements v2/v4, freestyle SAPUI5, UI5 Adaptation/Extensibility) from SAP Web IDE to Visual Studio Code or SAP Business Application Studio using the SAP Fiori tools migration utility. Includes required prerequisites, exact UI commands, required file checks, post-migration steps, and verification commands.

**TAGS**: fiori-tools, migration, sapui5, sap-fiori, vs-code, business-application-studio, neo-app, manifest

**STEP**: 1 — Prerequisites and supported project types

**DESCRIPTION**: Verify environment and project type. Install the SAP Fiori tools extensions (latest). Confirm project runs in SAP Web IDE and is one of the supported types.

- Supported project types: SAP Fiori elements V2, SAP Fiori elements V4, freestyle SAPUI5, Extension project.
- Migration requires the project to have the main data source defined in manifest.appdescr_variant.
- Migration does not update deployment configuration; run npm run deploy-config after migration.
- If migrating to BAS, define a destination in the workspace that matches the original target system (neo-app.json destination). If not defined, live-data preview will not work.
- For VS Code, know the target hostname and optional SAP client number.

**LANGUAGE**: Shell / Notes

**CODE**:
```bash
# Clone repository locally (example)
git clone https://your.git.repo/your-fiori-app.git
cd your-fiori-app

# Open project in VS Code
code .

# Or open specific folder/workspace
code path/to/your/project
```

---

**STEP**: 2 — Import project from SAP Web IDE (export/unzip) or clone and open workspace

**DESCRIPTION**: Export project from SAP Web IDE to local machine, unzip, and add it to your VS Code or BAS workspace. You may also use drag-and-drop in the editor UI or use File > Open Workspace in VS Code.

**LANGUAGE**: Shell / UI

**CODE**:
```bash
# If you exported a ZIP from SAP Web IDE
unzip your-fiori-project.zip -d /path/to/workspace/

# Refresh workspace in VS Code if needed (UI).
# Or add a folder to workspace:
# File > Add Folder to Workspace... (VS Code)
```

---

**STEP**: 3 — Start the migration tool (UI and command)

**DESCRIPTION**: Open the Migration view and start migrating projects. You can trigger the migration view from the UI pop-up or via Command Palette.

**LANGUAGE**: UI / Command

**CODE**:
```text
# Open Command Palette
# macOS: CMD + Shift + P
# Windows/Linux: CTRL + Shift + P

# Run this command exactly:
Fiori: Migrate Project for use in Fiori tools
```

- The Migration view lists detected projects in the workspace and displays the project type.
- If no projects are auto-detected, click Add Project to manually add a folder that contains an application.

---

**STEP**: 4 — Select projects and supply migration fields

**DESCRIPTION**: In the Migration view select the checkbox for each project to migrate. For each project, ensure these fields are filled/validated:

- Application Identifier: from manifest.json or pom.xml.
- Project Path: file path in workspace.
- SAP System: choose from saved systems (VS Code) or destinations (BAS). Selecting this sets hostname and client automatically.
- Destination (BAS only): defaults from neo-app.json; provide a front-end destination name (should point to front-end server with SAPUI5 libs).
- Hostname (VS Code only): backend host URL (or blank).
- SAP Client: optional numeric field if not default.
- SAPUI5 Version: dropdown; defaults to neo-app.json or manifest.json minUI5Version. (Extensibility projects require >= 1.71.0)

Example neo-app.json destination route (used to infer destination name):
```json
{
  "routes": [
    {
      "path": "/sap/opu/odata/sap/ZMY_SERVICE_SRV/",
      "destination": "MY_BACKEND_DEST"
    }
  ]
}
```

Example manifest.appdescr_variant mainService (required):
```json
{
  "mainService": {
    "url": "/sap/opu/odata/sap/ZMY_SERVICE_SRV/",
    "settings": {
      "mocked": false
    }
  }
}
```

Also confirm application identifier in manifest.json:
```json
{
  "sap.app": {
    "id": "com.example.myfioriapp",
    "applicationVersion": { "version": "1.0.0" }
  },
  "sap.ui5": {
    "dependencies": {
      "minUI5Version": "1.71.0"
    }
  }
}
```

---

**STEP**: 5 — Execute migration

**DESCRIPTION**: Click Start Migration in the Migration view. The tool applies changes and installs required dependencies. After a successful migration, view Application Information for each migrated SAP Fiori elements project (View Info action).

**LANGUAGE**: UI / Shell

**CODE**:
```bash
# After migration, update deployment configuration manually:
npm run deploy-config
```

Notes:
- To migrate additional projects, click Back in the results view.
- For Adaptation Projects (adaptation tooling >= 1.1.60) you can re-migrate to enable the Adaptation Editor in BAS.

---

**STEP**: 6 — Files modified/added during migration (review and commit)

**DESCRIPTION**: The migration updates or creates the following files. Review and commit changes to version control. If the source project had no webapp folder, migration will create one and move HTML/JS there.

- .gitignore — new/updated
- package-lock.json — recreated
- package.json — removes Web IDE libraries, adds sapux:true and ui5-tooling scripts/dependencies
- ui5-local.yaml — new (offline local ui5 libs and mock)
- ui5.yaml — updated (removes Web IDE builder tasks, adds proxy/live reload support)
- index.html — new (stand-alone preview without FLP)
- manifest.json — populated
- changes_loader.js — new (live reload)
- changes_preview.js — new (handles .changes files)
- flpSandbox.html — updated (proxied UI5 paths + recommended config)
- locate-reuse-libs.js — new (registers reuse libs at runtime)
- flpSandboxMockServer.html — updated (mock server support)

**LANGUAGE**: Shell / Git

**CODE**:
```bash
# Inspect changes
git status
git diff

# Example: Stage and commit migration changes
git add .
git commit -m "Migrate project to SAP Fiori tools: update ui5 tooling and configs"
```

---

**STEP**: 7 — Verify the migrated project and sync OData services

**DESCRIPTION**: Verify UI and tooling integration.

- Review file changes in Source Control and resolve any project-specific conflicts or customizations.
- Launch SAP Fiori tools commands to validate integration, e.g., Page Map, Open Application Generator, Guided Development, and preview the app.
- Sync OData service (if missing files such as metadata.xml were not present before migration) using the Service Manager to restore metadata and annotations required by some tools.

**LANGUAGE**: UI / Shell

**CODE**:
```text
# Useful Command Palette commands to run (open with CMD/CTRL+Shift+P):
Fiori: Open Application Generator
Fiori: Open Guided Development
Fiori: Page Map
# (Also open Service Manager in the UI to sync OData services and annotations)
```

---

**STEP**: 8 — Post-migration recommendations

**DESCRIPTION**: Best practices after migration.

- Put the migrated project under version control if not already.
- Ensure BAS destination points to a front-end server with SAPUI5 libraries (not directly to back-end OData server).
- If using VS Code, verify Hostname and SAP Client settings for preview and proxy.
- Test local preview with live data (BAS destination or VS Code hostname).
- Reapply any project-specific customizations that were overwritten by migration.

**LANGUAGE**: Notes

**CODE**:
```text
# Re-run or test the app preview via Fiori tools preview options in the editor UI.
# If issues with missing metadata, open Service Manager and "Sync services/annotations".
```

**RELATED LINKS**:
- Getting started: https://help.sap.com/docs/SAP_FIORI_tools/17d50220bcd848aa854c9c182d65b699/2d8b1cb11f6541e5ab16f05461c64201.html
- Extensibility: https://help.sap.com/docs/bas/developing-sap-fiori-app-in-sap-business-application-studio/extending-sap-fiori-application
- Blog: Migrate SAP Fiori projects from SAP Web IDE to BAS — https://blogs.sap.com/2022/01/06/migrate-sap-fiori-projects-from-sap-web-ide-to-sap-business-application-studio/
--------------------------------

**TITLE**: Report Issues and Apply Security Best Practices for SAP Fiori tools

**INTRODUCTION**: Quick, actionable checklist and code examples for reporting issues and applying security best practices when developing SAP Fiori applications with SAP Fiori tools. Includes commands to verify environment integrity, configure a trusted npm registry, run local/mock OData services instead of production, and Git steps for source control. Use these steps in developer environments or CI pipelines.

**TAGS**: SAP Fiori tools, security, OData, npm, PATH, troubleshooting, CA-UX-IDE, support, CDS, mockserver, git

**STEP**: 1 — Reference resources and raise SAP Support incidents

**DESCRIPTION**: Check official resources first. If unresolved, create a SAP Support incident under component CA-UX-IDE. Use community and FAQ links for troubleshooting before filing issues.

**LANGUAGE**: Text/URLs

**CODE**:
```text
SAP Fiori tools FAQ:
https://help.sap.com/viewer/42532dbd1ebb434a80506113970f96e9/Latest/en-US

SAP Fiori tools Community:
https://answers.sap.com/tags/73555000100800002345

Create an incident in SAP Support Portal (component: CA-UX-IDE):
https://help.sap.com/viewer/1bb01966b27a429ebf62fa2e45354fea/Latest/en-US
```

**STEP**: 2 — Verify PATH and executable locations (Linux/macOS)

**DESCRIPTION**: Ensure commands like node and cds resolve to trusted binaries. Check PATH and the resolving path for executables.

**LANGUAGE**: Bash

**CODE**:
```bash
# Print PATH
echo $PATH

# Show which node, npm, cds are being used
which node
node -v

which npm
npm -v

which cds    # If installed
cds --version

# Show full file path for Node binary
readlink -f $(which node) || true
```

**STEP**: 3 — Verify PATH and executable locations (Windows / PowerShell)

**DESCRIPTION**: Equivalent checks for Windows/PowerShell environments.

**LANGUAGE**: PowerShell

**CODE**:
```powershell
# Print PATH
$env:PATH

# Show command location and version for Node and npm
Get-Command node
node --version

Get-Command npm
npm --version

# For CDS (if installed)
Get-Command cds
cds --version
```

**STEP**: 4 — Use a trusted npm registry and validate packages

**DESCRIPTION**: Configure npm to use a trusted registry, force strict SSL, and run audits to detect vulnerabilities.

**LANGUAGE**: Bash / .npmrc

**CODE**:
```bash
# Set registry to official npmjs registry
npm config set registry https://registry.npmjs.org/

# Verify current registry
npm config get registry

# Enable strict SSL (recommended)
npm config set strict-ssl true

# Run a package audit
npm audit

# Update vulnerable packages (example)
npm audit fix
```

```text
# ~/.npmrc (example) - pin a trusted registry and enforce SSL
registry=https://registry.npmjs.org/
strict-ssl=true
```

**STEP**: 5 — Avoid using production OData services during development: run a local/mock OData service

**DESCRIPTION**: Do not use production OData endpoints for development. Use a local mock or a development OData endpoint. For CAP projects, run the CDS mock OData server locally and point the UI app's manifest to the local service.

**LANGUAGE**: Bash, JSON

**CODE**:
```bash
# Install CDS locally (if using SAP Cloud Application Programming Model)
npm install --save-dev @sap/cds

# Start CDS in watch mode (serves local OData at default http://localhost:4004)
npx cds watch
```

```json
// manifest.json (UI5/webapp) - example dataSource pointing to local OData mock
{
  "sap.app": {
    "id": "my.app"
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "mainService"
      }
    },
    "dataSources": {
      "mainService": {
        "uri": "http://localhost:4004/",
        "type": "OData",
        "settings": {
          "odataVersion": "v4"
        }
      }
    }
  }
}
```

**STEP**: 6 — Ensure separate credentials for development and production

**DESCRIPTION**: Do not reuse production user credentials for development. Use dedicated development accounts or mock authentication. Rotate secrets and use environment-appropriate credentials in dev/test pipelines.

**LANGUAGE**: Text

**CODE**:
```text
Best practices:
- Use environment variables or a secrets manager for credentials in local/CI.
- Never commit credentials into source control or manifest files.
- Configure separate dev/test SAP systems and user accounts for OData consumption.
```

**STEP**: 7 — Use source control and regular commits

**DESCRIPTION**: Always use a VCS (Git) and commit frequently. Share example commands to initialize repository and push changes.

**LANGUAGE**: Bash (Git)

**CODE**:
```bash
# Initialize a repo (if not present)
git init

# Add all files
git add .

# Create a descriptive commit
git commit -m "Initial commit: project scaffold and local mock configuration"

# Add remote and push (example)
git remote add origin git@github.com:your-org/your-repo.git
git branch -M main
git push -u origin main

# Create feature branch workflow
git checkout -b feat/add-local-mock
# make changes...
git add .
git commit -m "Add local mockserver config"
git push -u origin feat/add-local-mock
```

**STEP**: 8 — Verify package provenance and integrity

**DESCRIPTION**: Use package integrity checks and lockfiles to ensure reproducible installs. Include commands to generate lockfiles and check signatures where applicable.

**LANGUAGE**: Bash

**CODE**:
```bash
# Generate or update lockfile (npm)
npm ci       # in CI, installs exactly from package-lock.json
npm install  # updates package-lock.json when adding/removing packages

# Check package integrity / vulnerabilities
npm audit
npm audit fix

# For yarn users:
yarn install --frozen-lockfile
yarn audit
```

**STEP**: 9 — Additional security references

**DESCRIPTION**: Follow organizational software security guidance and SAP Fiori tools security documentation for deployment-time security details.

**LANGUAGE**: Text/URLs

**CODE**:
```text
SAP Fiori tools security guidance:
../Deploying-an-Application/security-8a147c6.md
(Also see the links below from STEP 1.)

Related links:
- SAP Fiori tools FAQ: https://help.sap.com/viewer/42532dbd1ebb434a80506113970f96e9/Latest/en-US
- SAP Fiori tools Community: https://answers.sap.com/tags/73555000100800002345
- Contact SAP Support: https://help.sap.com/viewer/1bb01966b27a429ebf62fa2e45354fea/Latest/en-US
```

--------------------------------

**TITLE**: SAP Business Application Studio — Dev Space and Extension Setup for SAP Fiori Tools

**INTRODUCTION**: This guide explains how to create a workspace in SAP Business Application Studio (BAS), which dev space types include SAP Fiori tools by default, how to verify required extensions are present, and how to manually install missing language-server extensions (for example, the CDS OData Language Server). Use these steps in automation scripts or onboarding documentation for developer workspaces.

**TAGS**: SAP Business Application Studio, BAS, fiori-tools, extensions, dev-space, UI5, CDS, OData, setup

**STEP**: 1 — Create your BAS workspace

**DESCRIPTION**: Create a BAS workspace (dev space) using the official onboarding tutorial. Follow the steps in the linked tutorial to provision your cloud dev space prior to verifying or installing extensions.

**LANGUAGE**: None

**CODE**:
```text
Follow: https://developers.sap.com/tutorials/appstudio-onboarding.html
After provisioning, continue with project generation if needed:
https://developers.sap.com/tutorials/fiori-tools-generate-project.html
```

**STEP**: 2 — Choose the correct dev space type

**DESCRIPTION**: Select one of the dev space types that include SAP Fiori tools preinstalled. Choose based on project needs:

- SAP Fiori Dev Space — includes SAP Fiori tools out of the box.
- Full Stack Cloud Application Dev Space — includes SAP Fiori tools and is intended for CAP (Cloud Application Programming Model) projects.

**LANGUAGE**: None

**CODE**:
```text
Dev space options in BAS:
- "SAP Fiori Dev Space"          -> Recommended for Fiori frontend development.
- "Full Stack Cloud Application Dev Space" -> Use for CAP backend + Fiori frontend.
```

**STEP**: 3 — Verify preinstalled Fiori tooling and UI5 Language Assistant

**DESCRIPTION**: Confirm SAP Fiori tools are loaded in the dev space and that UI5 Language Assistant is present (it is a mandatory extension installed automatically in SAP Fiori dev spaces). Use the Extensions view in BAS or run the VS Code CLI to list extensions.

**LANGUAGE**: bash

**CODE**:
```bash
# List installed extensions (run in the BAS terminal if 'code' CLI is available):
code --list-extensions

# Quick grep to check for UI5 or Fiori tools (example):
code --list-extensions | grep -i 'ui5\|fiori\|sap'

# Verify UI5 Language Assistant extension id:
# Expected extension id: SAPOSS.vscode-ui5-language-assistant
code --list-extensions | grep SAPOSS.vscode-ui5-language-assistant
```

**STEP**: 4 — Install the CDS OData Language Server (if required)

**DESCRIPTION**: BAS SAP Fiori dev spaces do NOT include the CDS OData Language Server by default. If your project requires CDS/OData language features, install the appropriate extension manually via the Extensions view or CLI. Refer to the Visual Studio Code "SAP CDS Language Support" documentation for the correct extension identifier and detailed instructions.

**LANGUAGE**: bash

**CODE**:
```bash
# Install via CLI (replace <cds-extension-id> with the actual extension id found in the VS Code doc):
code --install-extension <cds-odata-language-server-extension-id>

# Example check after install:
code --list-extensions | grep -i 'cds\|odata'
```

**STEP**: 5 — Useful links and references

**DESCRIPTION**: Quick-reference links for onboarding, getting started, and extension details.

**LANGUAGE**: None

**CODE**:
```text
Onboarding / setup:
- Set Up SAP Business Application Studio for Development:
  https://developers.sap.com/tutorials/appstudio-onboarding.html

- Set Up and Generate a New SAP Fiori App Project:
  https://developers.sap.com/tutorials/fiori-tools-generate-project.html

BAS product docs:
- Set Up SAP Business Application Studio - Getting Started:
  https://help.sap.com/docs/bas/sap-business-application-studio/getting-started?version=Cloud

UI5 Language Assistant (marketplace:
- UI5 Language Assistant overview & extension id:
  https://marketplace.visualstudio.com/items?itemName=SAPOSS.vscode-ui5-language-assistant&ssr=false#overview
  Extension id: SAPOSS.vscode-ui5-language-assistant

SAP CDS Language Support (reference inside VS Code docs):
- Visual Studio Code section (SAP CDS Language Support):
  visual-studio-code-17efa21.md#loio17efa217f7f34a9eba53d7b209ca4280
```
--------------------------------

**TITLE**: Enable / Disable Telemetry for SAP Fiori tools (VS Code)

**INTRODUCTION**: Short instructions to enable or disable telemetry collection for the SAP Fiori tools VS Code extension. Use this when you want to control whether non-personally-identifiable usage data is sent to help improve the product.

**TAGS**: fiori-tools, telemetry, vscode, analytics, settings, command-palette

**STEP**: 1 — Open the Command Palette

**DESCRIPTION**: Open the VS Code Command Palette to run the Fiori telemetry command.

**LANGUAGE**: text

**CODE**:
```text
Mac:    ⌘ (CMD) + ⇧ (Shift) + P
Windows/Linux: Ctrl + Shift + P
```

**STEP**: 2 — Run the telemetry command

**DESCRIPTION**: Execute the Fiori telemetry command from the Command Palette. This command presents the option to enable or disable collection of non-personally-identifiable analytics for SAP Fiori tools.

**LANGUAGE**: text

**CODE**:
```text
Type and execute:
Fiori: Change Telemetry Settings
```

**STEP**: 3 — Choose Enable or Disable

**DESCRIPTION**: When prompted by the command, select the appropriate action (Enable telemetry or Disable telemetry). This immediately updates the extension's telemetry behavior.

**LANGUAGE**: text

**CODE**:
```text
Example choices you will see after running the command:
- Enable telemetry
- Disable telemetry
```

**STEP**: 4 — Verify via VS Code Settings (optional)

**DESCRIPTION**: Confirm the telemetry setting in VS Code Settings UI if you want to review or change it later.

**LANGUAGE**: text

**CODE**:
```text
1. Open Settings: ⌘ , (Mac) or Ctrl , (Windows/Linux)
2. Search for "Fiori" or "Telemetry"
3. Locate the Fiori Tools telemetry setting and verify it is set to Enabled or Disabled
```
--------------------------------

**TITLE**: Visual Studio Code setup for SAP Fiori tools (VS Code + prerequisites + extensions + auth)

**INTRODUCTION**: Step-by-step, actionable setup for developers to prepare Visual Studio Code for SAP Fiori tools development. Includes system checks, Node.js installation instructions (Windows/macOS), MTA and Cloud Foundry CLI installation, npm registry checks and fixes, VS Code extension installation (including extension pack, SAP CDS and UI5 assistant), and the supported authentication matrix and OData service paths to consider.

**TAGS**: Visual Studio Code, SAP Fiori, fiori-tools, Node.js, MTA, Cloud Foundry, extensions, SAP CDS, UI5 Language Assistant, authentication, OData

**STEP**: 1 — Verify system prerequisites and Node/npm versions

**DESCRIPTION**: Check Node.js and npm versions (use LTS Node). If missing, install Node.js per next steps. Verify npm registry scope for @sap is not incorrectly set.

**LANGUAGE**: Bash / PowerShell

**CODE**:
```bash
# Check Node and npm versions
node -v
npm -v

# Check npm registry for @sap scope
npm config get @sap:registry
```

**STEP**: 2 — Install Node.js (Windows: installer or standalone zip)

**DESCRIPTION**: Recommended: use installer (requires admin). If installer is not allowed, extract standalone zip and set NODE_PATH and update user PATH. Use setx on Windows to persist variables for your user account. Replace placeholders <your_user> and <your_node_folder>.

**LANGUAGE**: PowerShell

**CODE**:
```powershell
# Option A: Recommended - run the Windows installer from:
# https://nodejs.org/en/download/

# Option B: Standalone zip (manual) - steps after extracting to:
# C:\Users\<your_user>\AppData\Local\Programs\<your_node_folder>

# Persist NODE_PATH for current user (replace placeholders)
setx NODE_PATH "C:\Users\<your_user>\AppData\Local\Programs\<your_node_folder>"

# Append NODE_PATH to user PATH (reads current PATH and appends)
# Note: setx truncates PATH if extremely long; verify result after running.
$oldPath = [Environment]::GetEnvironmentVariable("Path", "User")
$newPath = $oldPath + ";" + "%NODE_PATH%"
setx Path $newPath
```

**STEP**: 3 — Install Node.js (macOS: Homebrew or nvm)

**DESCRIPTION**: Use Homebrew or nvm to install and manage LTS Node.js versions. nvm is recommended when switching Node versions.

**LANGUAGE**: Bash

**CODE**:
```bash
# Homebrew (recommended if using Homebrew)
brew update
brew install node

# OR install nvm (Node Version Manager) and install LTS Node
# Install nvm (first-time only)
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.5/install.sh | bash
# Then restart shell or source ~/.nvm/nvm.sh and install LTS Node
nvm install --lts
nvm use --lts
```

**STEP**: 4 — Install MTA tool (required by SAP Fiori application generator)

**DESCRIPTION**: Install the mta Node.js package globally (version 1.0+ required).

**LANGUAGE**: Bash

**CODE**:
```bash
npm install -g mta
# Verify installation
mta --version
```

**STEP**: 5 — Install Cloud Foundry CLI (CF CLI)

**DESCRIPTION**: Download and install the latest Cloud Foundry CLI to access Cloud Foundry services on SAP BTP. Use the official instructions or Homebrew/Cargo where appropriate.

**LANGUAGE**: Bash

**CODE**:
```bash
# Official installer and platform-specific instructions:
# https://docs.cloudfoundry.org/cf-cli/install-go-cli.html

# macOS (Homebrew)
brew tap cloudfoundry/tap
brew install cloudfoundry/tap/cf-cli

# Verify installation
cf --version
```

**STEP**: 6 — Fix npm @sap registry entries (prerequisite for SAP packages)

**DESCRIPTION**: Ensure npm @sap scope is not set to a private registry. If it returns '@sap' or an incorrect value, remove the entry from the user's .npmrc file.

**LANGUAGE**: Bash / PowerShell

**CODE**:
```bash
# Check current value
npm config get @sap:registry

# If it returns something like "https://registry.npmjs.org" or "undefined" -> OK
# If it returns a custom value (e.g., set incorrectly to @sap), remove that entry.

# Unix/macOS: remove lines that start with '@sap=' from ~/.npmrc
sed -i.bak '/^@sap=/d' ~/.npmrc

# Windows PowerShell: remove lines that start with '@sap=' from %USERPROFILE%\.npmrc
(Get-Content $env:USERPROFILE\.npmrc) | Where-Object { $_ -notmatch '^@sap=' } | Set-Content $env:USERPROFILE\.npmrc
```

**STEP**: 7 — Download and open Visual Studio Code

**DESCRIPTION**: Download VS Code and choose user install if no admin rights. Launch VS Code and confirm it can run Node-based tools in your environment (some corporate security policies may block node).

**LANGUAGE**: None

**CODE**:
```text
# Download URL:
https://code.visualstudio.com/download

# After installation, open VS Code from OS UI or via command:
code .
```

**STEP**: 8 — Install SAP Fiori tools extension pack (recommended) via VS Code marketplace or CLI

**DESCRIPTION**: Install the SAP Fiori tools - Extension Pack to add Application Wizard, Application Modeler, Guided Development, Service Modeler, XML Annotation Language Server, and XML Toolkit. Use the VS Code UI or the `code` CLI for scripted installs.

**LANGUAGE**: Bash

**CODE**:
```bash
# Install the Extension Pack (marketplace id)
code --install-extension SAPSE.sap-ux-fiori-tools-extension-pack

# Optional: install SAP CDS editor (optional for CAP/CDS support)
code --install-extension SAPSE.vscode-cds

# Optional: install UI5 Language Assistant (optional)
code --install-extension SAPOSS.vscode-ui5-language-assistant
```

**STEP**: 9 — Install SAP CDS Language Support (CAP projects)

**DESCRIPTION**: For CAP/CDS projects, install SAP CDS Language Support (marketplace id SAPSE.vscode-cds) to enable annotation LSP and CDS editor features.

**LANGUAGE**: Bash

**CODE**:
```bash
# Marketplace:
# https://marketplace.visualstudio.com/items?itemName=SAPSE.vscode-cds

# CLI install:
code --install-extension SAPSE.vscode-cds
```

**STEP**: 10 — Install UI5 Language Assistant (optional, for control ID checks and suggestions)

**DESCRIPTION**: Install UI5 Language Assistant to get control ID checks when manifest.json has flexEnabled=true and additional suggestion improvements.

**LANGUAGE**: Bash

**CODE**:
```bash
# Marketplace:
# https://marketplace.visualstudio.com/items?itemName=SAPOSS.vscode-ui5-language-assistant

# CLI install:
code --install-extension SAPOSS.vscode-ui5-language-assistant
```

**STEP**: 11 — Authentication types supported by SAP Fiori tools in VS Code (matrix)

**DESCRIPTION**: Reference matrix of supported authentication methods per backend target. Use this matrix to decide where to develop locally vs. use SAP Business Application Studio.

**LANGUAGE**: None

**CODE**:
```text
Authentication support matrix (summary):
- OAuth 2.0 (Client Credentials)
  - SAP On Premise: No
  - SAP BTP, ABAP Environment: No (Updated to use Reentrance Ticket; existing saved connections still supported for deployment)
  - SAP BTP, Cloud Foundry: No
  - SAP S/4HANA Cloud: No

- Basic Authentication
  - SAP On Premise: Yes
  - SAP BTP, ABAP Environment: No
  - SAP BTP, Cloud Foundry: Yes
  - SAP S/4HANA Cloud: No

- Reentrance Ticket
  - SAP On Premise: No
  - SAP BTP, ABAP Environment: Yes
  - SAP BTP, Cloud Foundry: Yes
  - SAP S/4HANA Cloud: Yes

Recommendation: Use SAP Business Application Studio for broader authentication support.
Reference note: SAP Note 0002577263
```

**STEP**: 12 — OData services and paths to consider (disable SAML if required)

**DESCRIPTION**: If SAML must be disabled for selected OData services used by Fiori tools, ensure these service paths are available and SAML is disabled.

**LANGUAGE**: None

**CODE**:
```text
Common OData service paths (example):
- OData V2 catalog:
  /sap/opu/odata/IWFND/CATALOGSERVICE;v=2

- OData V4 catalog (dev):
  /sap/opu/odata4/iwfnd/config/default/iwfnd/catalog/0001

- OData V4 catalog (prod):
  /sap/opu/odata4/iwfnd/config/default/iwfnd/catalog/0002

- ATO Catalog:
  /sap/bc/adt/ato/settings

- SAPUI5 repository service (deploy & undeploy):
  /sap/opu/odata/UI5/ABAP_REPOSITORY_SRV
```

**STEP**: 13 — Quick troubleshooting checklist

**DESCRIPTION**: Quick checks if tools/extensions behave unexpectedly.

**LANGUAGE**: Bash / PowerShell

**CODE**:
```bash
# Verify Node and npm in VS Code integrated terminal
node -v
npm -v

# Verify mta
mta --version

# Verify CF CLI
cf --version

# Reinstall extensions via CLI if issues occur:
code --uninstall-extension SAPSE.sap-ux-fiori-tools-extension-pack
code --install-extension SAPSE.sap-ux-fiori-tools-extension-pack
```
--------------------------------

**TITLE**: App-to-App Navigation Preview (fiori-tools)

**INTRODUCTION**: Use the VS Code command "Fiori: Enable App-to-App Navigation Preview" to generate a local FLP sandbox config that resolves external (cross-application) navigation between applications in the same workspace. The command creates appconfig/fioriSandboxConfig.json and updates ui5.yaml so the previewed source app can resolve target app intents (semanticObject/action). You can add multiple target navigations to the same source by adding multiple inbound entries.

**TAGS**: fiori-tools, ui5, fiori, app-to-app-navigation, fioriSandboxConfig, ui5.yaml, preview

**STEP**: 1 — Run the enable command from VS Code

**DESCRIPTION**: Open the VS Code Command Palette and run the fiori-tools command to enable App-to-App Navigation Preview. Select the source app (where navigation originates) and the target app (destination). The command will create or update both appconfig/fioriSandboxConfig.json and ui5.yaml in the source application folder.

**LANGUAGE**: text

**CODE**:
```text
# In VS Code: open Command Palette (Ctrl/Cmd + Shift + P)
# Execute:
Fiori: Enable App-to-App Navigation Preview
# Follow the interactive selection:
# 1) Select source application (workspace folder)
# 2) Select target application (workspace folder)
# Expected confirmation message:
App-to-App Navigation enabled.
```

**STEP**: 2 — What the command generates (file paths)

**DESCRIPTION**: The command generates or updates these files in the source application folder:
- appconfig/fioriSandboxConfig.json — contains the local FLP (sap-ushell-config) inbounds that resolve semanticObject/action to the local target app URL or component.
- ui5.yaml — updated to register the fiori-tools sandbox middleware so the generated fioriSandboxConfig.json is used when running the local preview.

Provide these exact file locations relative to the source app root:
- ./appconfig/fioriSandboxConfig.json
- ./ui5.yaml

**LANGUAGE**: text

**CODE**:
```text
# Files created/updated (relative to source application root)
appconfig/fioriSandboxConfig.json
ui5.yaml
```

**STEP**: 3 — Example fioriSandboxConfig.json for one target (JSON)

**DESCRIPTION**: Sample appconfig/fioriSandboxConfig.json created for a target app. This example shows a ClientSideTargetResolution inbound that maps a semantic object/action to a local URL (relative path to target app webapp). Replace "TargetApp" and URL with your real semanticObject/action and target webapp path.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap-ushell-config": {
    "services": {
      "ClientSideTargetResolution": {
        "adapter": {
          "config": {
            "inbounds": {
              "TargetApp-display": {
                "semanticObject": "TargetApp",
                "action": "display",
                "title": "Target App",
                "signature": {
                  "parameters": {}
                },
                "resolutionResult": {
                  "applicationType": "URL",
                  "additionalInformation": "SAPUI5.Component=your.target.component",
                  "url": "../target-app/webapp"
                }
              }
            }
          }
        }
      }
    }
  }
}
```

**STEP**: 4 — Example fioriSandboxConfig.json for multiple targets (JSON)

**DESCRIPTION**: To add multiple target navigations to the same source application, add additional inbounds in the same inbounds object. Each inbound key must be unique.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap-ushell-config": {
    "services": {
      "ClientSideTargetResolution": {
        "adapter": {
          "config": {
            "inbounds": {
              "TargetAppA-display": {
                "semanticObject": "TargetAppA",
                "action": "display",
                "title": "Target App A",
                "signature": { "parameters": {} },
                "resolutionResult": {
                  "applicationType": "URL",
                  "additionalInformation": "SAPUI5.Component=target.app.a",
                  "url": "../target-app-a/webapp"
                }
              },
              "TargetAppB-display": {
                "semanticObject": "TargetAppB",
                "action": "display",
                "title": "Target App B",
                "signature": { "parameters": {} },
                "resolutionResult": {
                  "applicationType": "URL",
                  "additionalInformation": "SAPUI5.Component=target.app.b",
                  "url": "../target-app-b/webapp"
                }
              }
            }
          }
        }
      }
    }
  }
}
```

**STEP**: 5 — Example ui5.yaml snippet that registers the sandbox config

**DESCRIPTION**: The command updates ui5.yaml so the local preview server picks up the generated appconfig/fioriSandboxConfig.json. If you need to edit or reproduce this manually, add (or confirm) middleware configuration similar to the snippet below. Adjust paths and middleware names to match your project or fiori-tools version.

**LANGUAGE**: YAML

**CODE**:
```yaml
# ui5.yaml (excerpt)
specVersion: '2.0'
type: application
metadata:
  name: source.app

server:
  middleware:
    - name: fiori-tools/fioriSandbox
      after: ["compression", "static"]
      configuration:
        configFile: "appconfig/fioriSandboxConfig.json"
```

**STEP**: 6 — Run the preview and validate navigation

**DESCRIPTION**: Start the local preview of the source application and trigger the configured external navigation. You can run preview via VS Code Fiori preview commands or using your project's start script that runs the UI5 tooling server (ui5 serve or npm start). The preview server uses ui5.yaml and the fioriSandboxConfig.json to resolve semanticObject/action to the local target app implementation.

**LANGUAGE**: text

**CODE**:
```text
# Typical ways to start preview:
# Option A: VS Code Fiori/Preview command (e.g., "Fiori: Preview Application" or "Fiori: Run Application")
# Option B: CLI (project dependent—example):
#   npm start
#   # or, if using ui5 CLI directly:
#   npx ui5 serve --config=ui5.yaml --open index.html

# Validate:
# 1) In the source app UI, perform the action that triggers external navigation (semanticObject/action).
# 2) The local sandbox should open the target application according to the fioriSandboxConfig.json inbound mapping.
```

**STEP**: 7 — Manual edits and troubleshooting

**DESCRIPTION**: If the generated navigation doesn't resolve:
- Confirm the inbound semanticObject/action exactly matches the one used by the source app.
- Ensure "url" in resolutionResult is a correct relative path from source app to target app webapp folder.
- Ensure ui5.yaml includes the fiori-tools sandbox middleware and configFile path points to appconfig/fioriSandboxConfig.json.
- Add multiple inbounds under the same inbounds object for additional targets.

**LANGUAGE**: text

**CODE**:
```text
# Common checks:
# - appconfig/fioriSandboxConfig.json contains an inbound for the semanticObject/action used.
# - resolutionResult.url => relative path to target app's webapp (e.g., ../target-app/webapp)
# - ui5.yaml server.middleware configuration references appconfig/fioriSandboxConfig.json
```
--------------------------------

**TITLE**: Convert a Fiori Project to Use Virtual Endpoints (sap-ux converter)

**INTRODUCTION**: Use the sap-ux converter to replace local preview artifacts with virtual endpoints. The converter renames or removes local HTML preview files, deletes preview-related JS/TS/test files, and configures virtual endpoints and preview middleware. This guide covers prerequisites, CLI/VS Code actions, answers to interactive prompts, and post-conversion checks and recommendations.

**TAGS**: fiori-tools, sap-ux, virtual-endpoints, ui5, ui5-tooling, ui5-middleware, fe-mockserver, migration

**STEP**: 1 — Verify prerequisites

**DESCRIPTION**: Confirm you have the required tooling versions and required middleware packages installed before running the converter.

**LANGUAGE**: Shell

**CODE**:
```bash
# Check UI5 CLI version (must be >= 3.0.0)
ui5 --version

# Check installed @sap/ux-ui5-tooling version (must be >= 1.15.4)
npm ls @sap/ux-ui5-tooling --depth=0

# Check for installed mock middleware packages
npm ls @sap-ux/ui5-middleware-fe-mockserver --depth=0 || echo "ui5-middleware-fe-mockserver not found"
npm ls cds-plugin-ui5 --depth=0 || echo "cds-plugin-ui5 not found"

# If you currently use old middleware, verify it (then plan migration)
npm ls @sap/ux-ui5-fe-mockserver-middleware --depth=0 || echo "old FE mockserver middleware not found"
npm ls @sap/grunt-sapui5-bestpractice-build --depth=0 || echo "old grunt build not found"
```

**STEP**: 2 — Install or upgrade required packages

**DESCRIPTION**: Install or update required packages. Use these commands to ensure versions meet the prerequisites. Adjust --save-dev or --save depending on your project preferences.

**LANGUAGE**: Shell

**CODE**:
```bash
# Install or update UI5 CLI (global or as dev dependency)
npm install --save-dev @ui5/cli@^3.0.0

# Ensure @sap/ux-ui5-tooling is at least 1.15.4
npm install --save-dev @sap/ux-ui5-tooling@^1.15.4

# Install recommended preview middleware (one of these as required)
npm install --save-dev @sap-ux/ui5-middleware-fe-mockserver
# or (if using CDS)
npm install --save-dev cds-plugin-ui5
```

**STEP**: 3 — Launch the sap-ux converter (VS Code)

**DESCRIPTION**: Run the converter from VS Code (preferred for typical Fiori development flows). This launches an interactive conversion that renames/deletes preview files and configures virtual endpoints.

**LANGUAGE**: Text

**CODE**:
```text
# In VS Code:
# 1. Open Command Palette: Ctrl/Cmd + Shift + P
# 2. Run command: "Fiori: Convert Preview Config"

# OR from the Application Info view inside the Fiori extension:
# Click "Convert Preview Config"
```

**STEP**: 4 — Launch the sap-ux converter (CLI alternative)

**DESCRIPTION**: If you prefer a terminal, run the converter command provided by sap-ux. Use the exact converter command name as documented by the sap-ux package.

**LANGUAGE**: Shell

**CODE**:
```bash
# Run the sap-ux converter command (as documented)
# Note: the converter will run interactively and prompt for confirmation
sap-ux convert preview-config
```

**STEP**: 5 — Respond to interactive prompts during conversion

**DESCRIPTION**: The converter uses short interactive prompts. Read them carefully and answer according to whether you want a dry-run or to commit the conversion and whether to convert test runners.

**LANGUAGE**: Text

**CODE**:
```text
# Typical prompts you will see (exact wording in your environment may vary):
# - "Simulate the conversion? (Y/N)"
#   Press Y to simulate (dry-run) OR N to perform the conversion.
# - "Convert the test runners? (Y/N)"
#   Press Y to convert test runners OR N to decline conversion of test runners.
```

**STEP**: 6 — What the converter changes (verification)

**DESCRIPTION**: After conversion, verify renamed/deleted preview files and configured virtual endpoints. Use git or shell commands to inspect changes and find any local HTML preview files you modified.

**LANGUAGE**: Shell

**CODE**:
```bash
# Inspect git changes created by the converter
git status
git diff

# Search for local preview HTML files that may have been renamed or removed
# Common filenames: flpSandbox.html, index.html variants used for preview
rg "flpSandbox|preview" || true

# If you did not modify local HTML files, you can safely remove them:
# Example (adjust path to your project):
rm -f webapp/flpSandbox.html
```

**STEP**: 7 — If you modified local preview HTML files: migrate custom content

**DESCRIPTION**: If you previously customized local HTML preview files (for example flpSandbox.html), move the modifications into a custom init script for the preview middleware. If you did not customize them, you can delete the files.

**LANGUAGE**: Text

**CODE**:
```text
# Recommended process (manual):
# 1. Inspect the original local HTML file you modified (e.g. webapp/flpSandbox.html).
# 2. Copy any custom inline scripts or markup you need into a middleware init script
#    used by your preview middleware (the exact API depends on the middleware you use).
# 3. Register the init script according to your preview middleware documentation.
# 4. Remove the original local HTML file if it is no longer needed.

# Example placeholders (create a migration note file):
echo "/* MIGRATED: custom flpSandbox modifications moved into preview middleware init script */" > preview-migration-note.txt
```

**STEP**: 8 — Post-conversion validation and troubleshooting

**DESCRIPTION**: Start your preview/server and validate that virtual endpoints work and your app loads in preview. Review terminal output produced by the converter for specific migration details.

**LANGUAGE**: Shell

**CODE**:
```bash
# Start your local preview (example for ui5 server)
ui5 serve --config=ui5.yaml

# Open browser to the preview URL provided by the server
# If issues arise, check the converter output in your terminal and your project's ui5.yaml and package.json for updated middleware configuration.
```
--------------------------------

**TITLE**: Create a New Run Configuration in SAP Business Application Studio (Fiori tools)

**INTRODUCTION**: Step-by-step, code-oriented reference for creating and configuring a run configuration in SAP Business Application Studio (BAS). Includes GUI actions and example JSON snippets for programmatic/manual creation or editing of run configuration properties. Call-outs for required @sap/ux-ui5-tooling versions and behavior (e.g., local SAPUI5 sources auto-select mock mode).

**TAGS**: SAP, BAS, fiori-tools, run-configuration, SAPUI5, mock-server, launch, preview, @sap/ux-ui5-tooling

**STEP**: 1 — Preconditions and version requirements

**DESCRIPTION**: Ensure your project uses the required tooling versions before creating run configurations.

**LANGUAGE**: Text

**CODE**:
```Text
- Run Configuration Wizard requires @sap/ux-ui5-tooling >= 1.5.3.
- Enable remote access (see step 4 below) requires @sap/ux-ui5-tooling >= 1.19.1.
```

**STEP**: 2 — Create a new run configuration using the BAS UI

**DESCRIPTION**: GUI steps to create a run configuration in SAP Business Application Studio.

**LANGUAGE**: Text

**CODE**:
```Text
1. From the left-side toolbar in BAS click "Run Configurations".
2. In the Run Configurations pane click the + (Add) icon.
3. In the dialog "What would you like to run?" select the project.
4. Fill in mandatory fields and optional features:
   - Name (mandatory): editable default.
   - Endpoint (mandatory): select the HTML file used to start the app (e.g., webapp/index.html).
   - Mock Data: enable to run a mock OData server.
   - Support Assistant: enable best-practice checks for the app.
   - Enable Remote Access: allows devices on your network to connect (requires @sap/ux-ui5-tooling >= 1.19.1). Terminal will show connecting URL / QR code.
   - URL Components: define query parameters and hash fragment for Fiori Launchpad intent navigation.
   - Advanced Settings:
       - Choose SAPUI5 runtime version.
       - Change destinations used by the app.
       - Use local SAPUI5 sources: download SAPUI5 libraries for preview (when set, "Run with mock data" is automatically selected).
5. Click Save. The new configuration appears in "Run and Debug" and the Run Configurations table.
6. Start the configuration:
   - Click the play [>] icon under Actions in the Run Configurations table; or
   - In Run and Debug pane, choose the configuration and click "Start Debugging".
```

**STEP**: 3 — Quick actions in the Run Configuration pane

**DESCRIPTION**: Context menu and quick actions available for a run configuration.

**LANGUAGE**: Text

**CODE**:
```Text
Available actions (right-click or quick action icons):
- Bind/Unbind SAPUI5 Version: change SAPUI5 version bound to the configuration.
- Bind/Unbind Data Source: change destination used by the configuration.
- Rename: right-click -> Rename to change the configuration name.
- Show in File: right-click -> Show File to open the JSON file that stores this configuration (name highlighted).
- Delete: right-click -> Delete to remove the configuration.
```

**STEP**: 4 — Example: run configuration JSON (canonical fields)

**DESCRIPTION**: Example JSON structure for a run configuration. Use this as a template when creating or editing the configuration file that the Run Configuration UI saves. Field names are explicit and self-descriptive for code generation and automation. Adapt values to your project, endpoint file path, destinations, SAPUI5 versions, and parameters.

**LANGUAGE**: JSON

**CODE**:
```JSON
{
  "name": "My Fiori App - Preview",
  "endpoint": "webapp/index.html",
  "mock": {
    "enabled": true,
    "metadataFile": "localService/metadata.xml",
    "mockDataFolder": "localService/mockdata"
  },
  "supportAssistant": {
    "enabled": false
  },
  "enableRemoteAccess": {
    "enabled": false,
    "host": "0.0.0.0",
    "port": 8080
  },
  "urlComponents": {
    "params": {
      "sap-ui-xx": "featureToggle"
    },
    "hash": "MyApp-display"
  },
  "sapui5": {
    "version": "1.96.0",
    "useLocalSources": false
  },
  "destinations": [
    {
      "name": "ERP_API",
      "url": "https://my-erp.example.com",
      "type": "HTTP"
    }
  ],
  "advanced": {
    "additionalSettings": {}
  }
}
```

**STEP**: 5 — Notes on behavior and constraints (automation hints)

**DESCRIPTION**: Important automated behaviors and constraints to apply in scripts or tools that generate/edit run configuration JSON.

**LANGUAGE**: Text

**CODE**:
```Text
- If sapui5.useLocalSources is true, the tooling typically auto-enables mock.enabled for preview.
- Remote access will expose the preview server to all hosts on the network; do not enable in productive environments.
- Validate @sap/ux-ui5-tooling version before enabling features:
  - Minimal wizard support: >= 1.5.3
  - Remote access: >= 1.19.1
- When programmatically creating the configuration file, follow the structure shown above. Keep endpoint paths relative to the workspace root (e.g., webapp/index.html).
- Use "Show File" in the UI to locate the exact JSON file path used by your BAS workspace if needed for automation; do not assume a fixed file path across environments/extensions.
```
--------------------------------

**TITLE**: Create a New Run Configuration in Visual Studio Code (SAP Fiori Tools)

**INTRODUCTION**: This guide shows how to create and run a new Fiori run configuration in VS Code using the Fiori Run Configuration Wizard. It includes prerequisites, exact command names, what each wizard field means, how to run the configuration, and commands to verify required package versions.

**TAGS**: fiori-tools, vscode, sapui5, run-configuration, ux-ui5-tooling

**STEP**: 1 — Open the Run Configuration Wizard

**DESCRIPTION**: Launch the Fiori Run Configuration Wizard from the VS Code Command Palette to create or edit run configurations for a selected project/workspace folder.

**LANGUAGE**: Shell / VS Code

**CODE**:
```bash
# Open the Command Palette and run this command:
# (Press CMD/CTRL + Shift + P then type & execute)
Fiori: Open Run Configurations
```

**STEP**: 2 — Select the Project (Workspace Folder)

**DESCRIPTION**: Choose the project (workspace folder) you want to add a run configuration for. If your workspace contains multiple folders, the wizard will list them; press Enter to confirm the selection.

**LANGUAGE**: None

**CODE**:
```text
# In the interactive prompt:
# Select the target project/folder from the list and press Enter
```

**STEP**: 3 — Create a New Run Configuration (Wizard Fields)

**DESCRIPTION**: Click Create in the displayed list of existing run configurations, then fill in the wizard fields. Below are field names, whether they are mandatory, and their behavior/constraints.

- Name (mandatory): user-visible name of the configuration; you can change the default.
- Endpoint (mandatory): select the HTML entry page used to start the app (e.g., index.html or Component-preload.html).
- Mock Data: enables a mock server to simulate OData requests during preview.
- Support Assistant: runs static checks against SAPUI5 best practices/rules.
- Enable Remote Access: makes the preview server accessible from other devices on the same network (NOT for production). Requires @sap/ux-ui5-tooling >= 1.19.1.
  - When enabled, the terminal prints connection info (URL and optional QR code).
- URL Components: define additional URL query parameters and the hash fragment for Fiori launchpad intent-based navigation.
- Advanced Setting: choose runtime SAPUI5 version and change application destinations.
  - Use local SAPUI5 sources: the wizard can download and use local SAPUI5 libraries for the preview. When selected, "Run with mock data" is automatically enabled.

**LANGUAGE**: None

**CODE**:
```text
# After clicking Create, fill fields in the wizard UI:
Name: <string>               # mandatory
Endpoint: <path/to/html>     # mandatory, e.g., webapp/index.html
Mock Data: [ ] / [x]         # checkbox
Support Assistant: [ ] / [x] # checkbox
Enable Remote Access: [ ] / [x]  # requires @sap/ux-ui5-tooling >= 1.19.1
URL Components: ?param=value#hash
Advanced Setting:
  - SAPUI5 Version: e.g., 1.100.0
  - Use local SAPUI5 sources: [ ] / [x]  # auto-enables mock data
Click Save to persist the run configuration.
```

**STEP**: 4 — Save and Locate the Run Configuration

**DESCRIPTION**: After Save, find the new configuration in two places: the Run and Debug pane on the left and the Run Configurations table (provided by the Fiori extension). Use the table Actions column to run or manage the configuration.

**LANGUAGE**: None

**CODE**:
```text
# To run:
# 1) In Run and Debug pane, select the Run Configuration from the dropdown, then click Start Debugging (F5) or the play icon.
# 2) Or, in the Run Configurations table, click the > icon under the Actions column.
```

**STEP**: 5 — Verify @sap/ux-ui5-tooling Version (Prerequisite Check)

**DESCRIPTION**: The Run Configuration Wizard requires @sap/ux-ui5-tooling >= 1.5.3. The "Enable Remote Access" feature requires >= 1.19.1. Use these commands to check installed versions and to add/upgrade the package in your project.

**LANGUAGE**: Shell / JSON

**CODE**:
```bash
# Check installed version in the project (run in the project root)
npm ls @sap/ux-ui5-tooling

# Or check package.json directly
cat package.json | jq '.dependencies["@sap/ux-ui5-tooling"], .devDependencies["@sap/ux-ui5-tooling"]'
```

**CODE**:
```json
// Example package.json dependency snippets
{
  "devDependencies": {
    "@sap/ux-ui5-tooling": "^1.19.1"
  }
}
```

**CODE**:
```bash
# To install or upgrade to a version that supports all features:
npm install --save-dev @sap/ux-ui5-tooling@^1.19.1
```

**STEP**: 6 — Example Remote Access Terminal Output

**DESCRIPTION**: When "Enable Remote Access" is enabled, the preview server prints connection details. Use the URL or QR code information to open the running app on another device.

**LANGUAGE**: None

**CODE**:
```text
# Example terminal output after starting the run configuration with remote access enabled:
Server started at:
  Local:  http://localhost:8080/webapp/index.html
  On Your Network: http://192.168.1.42:8080/webapp/index.html
Scan the QR code below with a mobile device to open the URL:
[QR CODE IMAGE]
# Note: server accepts connections from all hosts on your network. Do NOT use in production.
```

**STEP**: 7 — Troubleshooting & Tips

**DESCRIPTION**: Quick actionable tips if you encounter problems.

**LANGUAGE**: Shell / Text

**CODE**:
```bash
# If the wizard command is not available, ensure the SAP Fiori Tools extension is installed in VS Code:
# 1) Open Extensions (Ctrl/Cmd+Shift+X)
# 2) Search for "SAP Fiori tools" and install

# If preview fails to start, check the server log and verify endpoints:
#  - Confirm Endpoint HTML path exists (e.g., webapp/index.html)
#  - Verify port is not in use
#  - Confirm @sap/ux-ui5-tooling version meets requirements (see Step 5)
```

--------------------------------

**TITLE**: Developer Variant Creation (SAP Fiori tools)

**INTRODUCTION**: Create developer variants (views) for SAP Fiori applications using the SAP Fiori tools preview. Variants are saved as SAPUI5 flexibility changes under webapp/changes and packaged with the app. Use this guide for the UI adaptation flow, where to find generated change files, and how to replace static texts with i18n keys.

**TAGS**: fiori-tools, sapui5, ux-ui5-tooling, variants, flexibility, i18n, ABAP, preview

**STEP**: 1 — Prerequisites and compatibility

**DESCRIPTION**: Confirm SAPUI5 version and project type compatibility before using developer variant creation.

**LANGUAGE**: text

**CODE**:
```
Supported SAPUI5 versions:
- OData V2 based applications: SAPUI5 >= 1.90
- OData V4 based applications: SAPUI5 >= 1.84

Notes:
- The feature is provided by the @sap/ux-ui5-tooling module (preview feature).
- @sap/ux-ui5-tooling supports ABAP service–based projects only.
```

**STEP**: 2 — Entry point: "Preview Application" -> start-variants-management

**DESCRIPTION**: Start the variant creation workflow from the Preview Application context menu. The command to execute is the "start-variants-management" preview script. If that script is missing, add the configuration via the Fiori command in the Command Palette.

**LANGUAGE**: text

**CODE**:
```
Action:
1. Open your project in VS Code.
2. Open the Preview Application context menu and run "start-variants-management".

If the script is not present:
- Open the Command Palette:
  macOS: ⌘ + Shift + P
  Windows/Linux: Ctrl + Shift + P
- Run the command:
  Fiori: Add Configuration for Variants Creation
```

**STEP**: 3 — Work in UI adaptation (browser) and create variants

**DESCRIPTION**: After starting the script, a browser tab opens with the app in UI adaptation mode. Use the adaptation UI to create views/variants (filter settings, table views, control parameters). Save your changes via Save & Exit in the adaptation UI.

**LANGUAGE**: text

**CODE**:
```
Result:
- New browser tab opens in UI adaptation mode (preview).
- Use the adaptation controls to create or adapt views/variants.
- Click "Save & Exit" to persist changes (creates SAPUI5 flexibility change files).
```

**STEP**: 4 — Location of generated change files

**DESCRIPTION**: After saving, one or more SAPUI5 change files are created and stored in the project folder webapp/changes. Verify and inspect these files in your project.

**LANGUAGE**: bash

**CODE**:
```bash
# From the project root, list generated change files:
ls -la webapp/changes

# Example: open a change file with your editor
code webapp/changes/changes-<timestamp>.change
```

**STEP**: 5 — Replace static texts in change files with i18n keys

**DESCRIPTION**: Open each generated change file and replace static texts with i18n bindings (recommended) so your variant text is translatable. Maintain the corresponding entries in your i18n properties file.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Example: in an XML view or in generated change content, replace a static text like:
     text="My Button"
   with an i18n binding:
-->
<Button text="{i18n>myButtonText}" />
```

**LANGUAGE**: properties

**CODE**:
```
# i18n.properties
myButtonText=My Button
```

**STEP**: 6 — Packaging and limitations

**DESCRIPTION**: During the application build step, the webapp/changes folder contents are packaged with the application. Developer variants do not support visibility and role assignment. For technical details see the preview tooling documentation.

**LANGUAGE**: text

**CODE**:
```
Packaging:
- webapp/changes/*.change are packaged with the app during build.

Limitations:
- Visibility and role assignment are NOT supported for developer variants.

References:
- Creating and Adapting Views: https://help.sap.com/viewer/DRAFT/6583b46f6c164aad818a3891bc91d8d8/dev_internal/en-US/91ae3492323b42a79ca66fbfaf5af3f9.html
- @sap/ux-ui5-tooling preview info: https://www.npmjs.com/package/@sap/ux-ui5-tooling#4-preview
```
--------------------------------

**TITLE**: Generating Mock Data with AI (Fiori Tools)

**INTRODUCTION**: Use the Page Editor's "Generate Mock Data with AI" feature to produce contextually meaningful mock records for OData entities by leveraging entity property names in your service metadata. This is intended for UI prototyping and local testing in SAP Build Code / Fiori tooling projects.

**TAGS**: fiori-tools, SAP Build Code, mock-data, AI, EDMX, metadata.xml, OData

**STEP**: Prerequisites

**DESCRIPTION**: Verify subscription and project requirements before generating mock data. Ensure your project includes an OData metadata file (metadata.xml) describing the service entity types and properties that the AI will use to create meaningful mock values.

**LANGUAGE**: Text

**CODE**:
```
Prerequisites:
- Have a subscription to SAP Build Code or sign up for SAP Build Code Test Drive:
  https://developers.sap.com/mission.sap-build-code-test-drive.html

- Ensure your project contains the OData EDMX metadata file: metadata.xml
  (The Page Editor uses property names from this file to generate mock data.)
```

**STEP**: Include icon stylesheet in Page Editor (UI assets)

**DESCRIPTION**: The Page Editor UI uses SAP icons. Keep the icons stylesheet reference in your project or page header to render the "Generate Mock Data with AI" icon correctly.

**LANGUAGE**: HTML

**CODE**:
```html
<!-- Ensure this stylesheet is available and referenced where the Page Editor is rendered -->
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>

<!-- Example icon markup used by the Page Editor for "Generate Mock Data with AI" -->
<!-- The icon glyph class: SAP-icons-TNT-V3 -->
<span class="SAP-icons-TNT-V3" title="Generate Mock Data with AI"></span>
```

**STEP**: Example metadata.xml snippet (context for AI)

**DESCRIPTION**: Provide a minimal example of the metadata.xml entity type structure. The AI reads entity and property names to create contextually relevant mock values. Keep property names descriptive (e.g., FirstName, Email, BirthDate) to improve generated content.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Example <edmx:Edmx> metadata.xml excerpt showing an entity with properties -->
<edmx:Edmx Version="1.0" xmlns:edmx="http://schemas.microsoft.com/ado/2007/06/edmx">
  <edmx:DataServices>
    <Schema Namespace="MyService" xmlns="http://schemas.microsoft.com/ado/2008/09/edm">
      <EntityType Name="Customer">
        <Key>
          <PropertyRef Name="CustomerID"/>
        </Key>
        <Property Name="CustomerID" Type="Edm.String" Nullable="false"/>
        <Property Name="FirstName" Type="Edm.String"/>
        <Property Name="LastName" Type="Edm.String"/>
        <Property Name="Email" Type="Edm.String"/>
        <Property Name="BirthDate" Type="Edm.DateTime"/>
        <Property Name="IsActive" Type="Edm.Boolean"/>
        <Property Name="Balance" Type="Edm.Decimal"/>
      </EntityType>
    </Schema>
  </edmx:DataServices>
</edmx:Edmx>
```

**STEP**: Generate mock data using the Page Editor

**DESCRIPTION**: In the Page Editor, invoke the "Generate Mock Data with AI" action. Click the icon labeled "Generate Mock Data with AI" (icon uses class SAP-icons-TNT-V3), then click the Generate button. The feature produces three mock records per entity. Generation may take some time depending on service complexity.

**LANGUAGE**: Text

**CODE**:
```
Procedure:
1. Open the Page Editor for your Fiori/UI5 page.
2. Locate the "Generate Mock Data with AI" icon (SAP-icons-TNT-V3) in the Page Editor toolbar.
3. Click the icon to open the mock-data generator dialog.
4. Click Generate.
5. The tool will produce three mock records for each entity found in metadata.xml.
   Note: Generation time may vary based on metadata size and complexity.
```

**STEP**: Sample generated mock data output (three records)

**DESCRIPTION**: Example JSON that demonstrates the structure and type of mock records produced for the Customer entity shown in metadata.xml. Use this format to wire mock data into UI controls or local mock servers.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "d": {
    "results": [
      {
        "CustomerID": "C001",
        "FirstName": "Emma",
        "LastName": "Müller",
        "Email": "emma.mueller@example.com",
        "BirthDate": "1988-04-12T00:00:00",
        "IsActive": true,
        "Balance": "1234.56"
      },
      {
        "CustomerID": "C002",
        "FirstName": "Luca",
        "LastName": "Schneider",
        "Email": "luca.schneider@example.org",
        "BirthDate": "1992-10-30T00:00:00",
        "IsActive": false,
        "Balance": "0.00"
      },
      {
        "CustomerID": "C003",
        "FirstName": "Sofia",
        "LastName": "Garcia",
        "Email": "sofia.garcia@example.net",
        "BirthDate": "1979-06-22T00:00:00",
        "IsActive": true,
        "Balance": "542.00"
      }
    ]
  }
}
```
--------------------------------

**TITLE**: Install and Configure Mock Server for SAP Fiori Tools Projects

**INTRODUCTION**: Instructions and code examples to add, remove, verify, and run the Fiori mock server configuration for SAP Fiori projects created or maintained with fiori-tools. Use either the Visual Studio Code Fiori extension command or the CLI (npx @sap-ux/create). After installation, verify package.json entries and ui5-mock.yaml in the project root.

**TAGS**: fiori-tools, mockserver, ui5, sap-ux, ui5-middleware-fe-mockserver, npm, cli, vscode

**STEP**: Install mock server using VS Code Fiori extension

**DESCRIPTION**: In VS Code open the Fiori tooling UI for the current project and add the mock server configuration. This updates package.json and adds ui5-mock.yaml and dependencies.

**LANGUAGE**: Shell

**CODE**:
```bash
# 1. Open VS Code command palette
# - Press Ctrl/Cmd+Shift+P
# - Run: "Fiori: Open Application Info"

# 2. In the Application Info view:
# - Under "What you can do" click "Add Mock server Config"
# This will add/update the mock server configuration in the project.
```

**STEP**: Install mock server using CLI (npx)

**DESCRIPTION**: Run the create helper from the project root to add the mock server configuration. This is suitable for CI or non-VS Code editors.

**LANGUAGE**: Shell

**CODE**:
```bash
# From the project root:
npx @sap-ux/create add mockserver-config

# To remove the mock server config:
npx @sap-ux/create remove mockserver-config

# To see available helper commands:
npx @sap-ux/create help
```

**STEP**: What changes to expect (files and package.json)

**DESCRIPTION**: After installing the mock server the project will include:
- ui5-mock.yaml in the project root (UI5 server config for mock middleware)
- package.json updated with a "start-mock" script
- package.json devDependency and dependency entries for @sap-ux/ui5-middleware-fe-mockserver and UI5

Verify or edit these entries as needed.

**LANGUAGE**: JSON

**CODE**:
```json
// Example package.json fragments added/updated by the mockserver installer.
// Exact content may vary depending on project template.
{
  "scripts": {
    "start": "ui5 serve --config=ui5.yaml",
    "start-mock": "ui5 serve --config=ui5-mock.yaml"
  },
  "dependencies": {
    "@ui5/cli": "^3.0.0" /* example UI5 dependency inserted by generator */
  },
  "devDependencies": {
    "@sap-ux/ui5-middleware-fe-mockserver": "^X.Y.Z"
  }
}
```

**STEP**: Example minimal ui5-mock.yaml

**DESCRIPTION**: The installer creates a ui5-mock.yaml that configures the UI5 server to use the FE Mockserver middleware. Edit paths and configuration fields to match your app (root, metadata, mock data folders, port, etc.).

**LANGUAGE**: YAML

**CODE**:
```yaml
# Example ui5-mock.yaml (minimal). The actual file created by the installer may contain more fields.
specVersion: "4.0"
server:
  customMiddleware:
    - name: "@sap-ux/ui5-middleware-fe-mockserver"
      after: ["compression"]
      configuration:
        root: "webapp"                    # adjust to your webapp folder
        metadata: "localService/metadata.xml"  # path to OData metadata (or metadataUri)
        mocks: "localService"             # folder with mock data
        open: true
```

**STEP**: Start the mock server

**DESCRIPTION**: Use the script added to package.json or the ui5 CLI directly to serve the app with mock middleware enabled.

**LANGUAGE**: Shell

**CODE**:
```bash
# From the project root: start the UI5 server configured for mock data
npm run start-mock

# Alternatively, call the UI5 CLI directly if you have a ui5 serve script:
ui5 serve --config=ui5-mock.yaml --open index.html
```

**STEP**: Update or repair mock server config

**DESCRIPTION**: If the mock server configuration is outdated or missing, re-run the VS Code "Add Mock server Config" action or the CLI add command to update files and dependencies.

**LANGUAGE**: Shell

**CODE**:
```bash
# Repair or update via CLI:
npx @sap-ux/create add mockserver-config

# Or from VS Code re-run:
# "Fiori: Open Application Info" -> "Add Mock server Config"
```
--------------------------------

**TITLE**: Preview a UI5 Application on an External SAP Fiori Launchpad (FLP Embedded)

**INTRODUCTION**: This guide shows the exact steps to preview a UI5 application on an external SAP Fiori launchpad without redeploying on every change. It's intended for use with the Fiori Tools VS Code extension ("Fiori: Add FLP Embedded Configuration") and assumes the application was deployed once and configured on the target launchpad. Note: SAP Launchpad service on SAP BTP does not support this preview feature.

**TAGS**: fiori-tools, ui5, preview, flp, sap, vscode, bsp, ui5.yaml

**STEP**: Preconditions and constraints

**DESCRIPTION**: Confirm the application has been deployed once and is visible/configured on the target SAP Fiori launchpad. The FLP Embedded preview requires an initial deployment and the BSP name in lowercase.

**LANGUAGE**: Plaintext

**CODE**:
```text
Prerequisites:
- App deployed at least once and configured on the target launchpad.
- BSP identifier must be provided in lowercase (e.g., z_demo_app).
- Usually uses ui5.yaml for backend/proxy configuration.
Note: SAP Launchpad service on SAP BTP does not support FLP Embedded preview.
```

**STEP**: Open VS Code Command Palette

**DESCRIPTION**: Open the Command Palette to run the Fiori Tools command that adds the FLP embedded configuration.

**LANGUAGE**: Shell

**CODE**:
```bash
# macOS
⌘ + ⇧ + P

# Windows / Linux
Ctrl + Shift + P
```

**STEP**: Run "Fiori: Add FLP Embedded Configuration"

**DESCRIPTION**: Execute the command that creates the FLP Embedded configuration for your project. Type the command name and press Enter.

**LANGUAGE**: Plaintext

**CODE**:
```text
Type: Fiori: Add FLP Embedded Configuration
# Follow the interactive prompts that appear after running the command
```

**STEP**: Provide BSP name (lowercase)

**DESCRIPTION**: When prompted, enter the BSP (ABAP package) name of the deployed application. MUST be lowercase.

**LANGUAGE**: Plaintext

**CODE**:
```text
Example BSP input (lowercase):
z_demo_app
```

**STEP**: Provide backend configuration (ui5.yaml)

**DESCRIPTION**: When prompted to enter the YAML containing backend/proxy configuration, point to your ui5.yaml (or paste the contents). Provide a ui5.yaml that configures proxy or server middleware to reach backend services used by the app.

**LANGUAGE**: YAML

**CODE**:
```yaml
# Example ui5.yaml (minimal, adjust baseUri to your backend)
specVersion: '2.1'
metadata:
  name: z_demo_app
type: application
builder:
  resources:
    excludes:
      - test/**
server:
  customMiddleware:
    - name: ui5-middleware-simpleproxy
      mountPath: /sap
      configuration:
        baseUri: https://my.sap.system.example
```

**STEP**: Provide the relative FLP launchpad URL

**DESCRIPTION**: Enter the relative path to the target SAP Fiori launchpad shell on the ABAP server (path relative to host). Common path example shown below.

**LANGUAGE**: Plaintext

**CODE**:
```text
Example relative link:
sap/bc/ui5_ui5/ui2/ushell/shells/abap/Fiorilaunchpad.html
```

**STEP**: Build the application before preview

**DESCRIPTION**: Build the application assets (production or configured build) so the external launchpad can load the built artifacts. Run the project's build script.

**LANGUAGE**: Shell

**CODE**:
```bash
# From project root
npm install
npm run build
```

**STEP**: Start the preview on the external launchpad (start-embedded)

**DESCRIPTION**: Start the FLP Embedded preview. Right-click the project folder or any subfolder in VS Code, choose "Preview Application", then select the "start-embedded" action created by the extension. The extension will open the external launchpad URL and embed the local app using the configuration provided.

**LANGUAGE**: Plaintext

**CODE**:
```text
Right-click project folder -> Preview Application -> start-embedded
# Or use the Preview Application command from the Fiori Tools context menu
```

**STEP**: Expected behavior and rebuild workflow

**DESCRIPTION**: Initial load of the application on the external launchpad is slower because resources are fetched and cached. After the first load, subsequent loads are faster. When source changes are made:
- They are NOT reflected automatically.
- Re-run `npm run build` to produce updated artifacts.
- After the build completes the external launchpad instance will automatically refresh the running app (the extension triggers a reload).

**LANGUAGE**: Plaintext

**CODE**:
```text
Notes:
- Initial load slower due to caching of UI5 resources.
- To apply changes: run `npm run build` -> external FLP auto-refreshes the app.
- Ensure BSP remains deployed and configuration on the target FLP still points to the BSP.
```
--------------------------------

**TITLE**: Preview an Application with the SAP Horizon Theme

**INTRODUCTION**: Ensure your SAPUI5 application uses a SAPUI5 version that includes the Horizon visual theme (included from SAPUI5 1.93.3 and 1.96.0 or higher). This doc shows how to verify or pin the SAPUI5 version and how to preview the app with the Horizon theme using common project entry points (ui5.yaml and index.html bootstrap). Use these steps when creating new projects with the Fiori generator or updating existing projects.

**TAGS**: fiori-tools, sapui5, horizon, theme, ui5.yaml, index.html, generator

**STEP**: 1 — Verify or Pin the SAPUI5 Version (recommended)
**DESCRIPTION**: Confirm which SAPUI5 version your app uses. If your project bootstraps SAPUI5 from the CDN in index.html, update the CDN URL to a compatible version (>= 1.93.3 or >= 1.96.0). If your project relies on a ui5.yaml configuration that references a specific SAPUI5 version, edit that file. If no version is specified in ui5.yaml, the project will use the latest available SAPUI5 version (no update required).
**LANGUAGE**: HTML
**CODE**:
```html
<!-- Example: Explicitly pin SAPUI5 version in index.html bootstrap (CDN) -->
<script
  id="sap-ui-bootstrap"
  src="https://sapui5.hana.ondemand.com/1.96.0/resources/sap-ui-core.js"
  data-sap-ui-libs="sap.m, sap.ui.core"
  data-sap-ui-theme="sap_fiori_3"
  data-sap-ui-compatVersion="edge"
  data-sap-ui-bindingsyntax="complex">
</script>
```

**STEP**: 2 — Update ui5.yaml if your project uses it to declare the SAPUI5 version
**DESCRIPTION**: Some projects or toolchains use ui5.yaml for build/runtime configuration. If your toolchain or deployment expects a SAPUI5 version defined in ui5.yaml, edit the file to reflect a compatible version. If you do not have a UI5 version declaration in ui5.yaml, the latest SAPUI5 will be used and typically supports Horizon.
**LANGUAGE**: YAML
**CODE**:
```yaml
# ui5.yaml (example metadata and a comment indicating where to control SAPUI5 version)
specVersion: '2.3'
metadata:
  name: my.app.namespace
# NOTE:
# The ui5.yaml itself does not always directly declare the CDN framework version.
# If your toolchain supports setting the framework version here, follow your toolchain docs.
# Alternative: pin the SAPUI5 CDN version in index.html (see previous step) or configure your build/pipeline accordingly.
```

**STEP**: 3 — Choose SAPUI5 version at project creation (Fiori generator)
**DESCRIPTION**: When creating a new SAP Fiori application with the SAP Fiori application generator (yo @sap/generator-fiori), on the Project Attributes step choose a minimum SAPUI5 version compatible with Horizon. This ensures the generated project scaffolding references a compatible SAPUI5 version by default.
**LANGUAGE**: Text
**CODE**:
```text
# During `yo @sap/generator-fiori`:
# - When prompted for "SAPUI5 version" or "minimum UI5 version", select 1.96.0 (or >=1.96.0) or 1.93.3 (or >=1.93.3) as required.
```

**STEP**: 4 — Preview the application with the Horizon theme
**DESCRIPTION**: After ensuring a compatible SAPUI5 version is used, enable the Horizon theme for preview. Set the bootstrap attribute that controls the UI5 theme (data-sap-ui-theme) to the Horizon theme identifier supported by your SAPUI5 release. Replace the placeholder with the exact Horizon theme id from SAP documentation or the linked blog.
**LANGUAGE**: HTML
**CODE**:
```html
<!-- Example: Update data-sap-ui-theme to the Horizon theme identifier (replace placeholder with actual theme name) -->
<script
  id="sap-ui-bootstrap"
  src="https://sapui5.hana.ondemand.com/1.96.0/resources/sap-ui-core.js"
  data-sap-ui-libs="sap.m"
  data-sap-ui-theme="REPLACE_WITH_HORIZON_THEME_ID"
></script>

<!-- Common approach: toggle the theme at runtime (client-side) using the Core API -->
<script>
  // Replace 'REPLACE_WITH_HORIZON_THEME_ID' with the actual Horizon theme name from SAP docs
  sap.ui.getCore().applyTheme("REPLACE_WITH_HORIZON_THEME_ID");
</script>
```

**STEP**: 5 — Validation and custom control checks
**DESCRIPTION**: Standard SAP Fiori elements and SAPUI5 controls should render with Horizon without technical adoption. If your app contains custom controls, visually validate them against Horizon and update styles or tokens if required. Refer to SAP documentation for details on adapting custom controls for Horizon.
**LANGUAGE**: Text
**CODE**:
```text
# Validation checklist (manual):
# - Run the app locally (e.g., via UI5 tooling or Fiori preview) after pinning the SAPUI5 version.
# - Verify standard controls and Fiori elements render correctly.
# - Inspect custom controls for spacing, typography, shadows, and token usage; update CSS or theming tokens as needed.
```

**NOTE**: For background and the exact Horizon theme IDs to use, consult SAP’s documentation and the blog "SAP’s UI Technologies supporting the new Horizon visual theme of SAP Fiori":
https://blogs.sap.com/2021/11/17/saps-ui-technologies-supporting-the-new-Horizon-visual-theme-of-SAP-Fiori/
--------------------------------

**TITLE**: Previewing an Application (fiori-tools)

**INTRODUCTION**: This guide shows how to preview a generated Fiori application locally using terminal npm scripts, VS Code / SAP Business Application Studio Run Control, and the context menu Preview Application option. It includes sample package.json scripts, example VS Code launch configurations, and troubleshooting for localhost HTTPS/HSTS issues.

**TAGS**: fiori-tools, preview, npm, run-configuration, vscode, sap-business-application-studio, sapui5, mock-data, local-debug

**STEP**: 1 — Start a preview from the terminal

**DESCRIPTION**: Use the predefined npm scripts to start the local preview. Run these commands in the project root. The common scripts provided by fiori-tools projects map to different preview behaviors (real OData service, mock data, local SAPUI5 resources, no FLP sandbox).

- npm start / start -> real backend service (use-live-data)
- npm run start-mock -> mock OData services (use-mock-data)
- npm run start-local -> mock data + local SAPUI5 resources for offline work (use-local-sources)
- npm run start-noflp -> start without Fiori Launchpad sandbox (use-noflp)

Use these commands in the terminal:

**LANGUAGE**: Shell

**CODE**:
```bash
# Start with real backend data
npm start
# Start with mock data
npm run start-mock
# Start with mock data and local SAPUI5 resources (offline)
npm run start-local
# Start without Fiori Launchpad sandbox
npm run start-noflp
```

Provide these scripts in package.json if they are missing. Example package.json "scripts" section used by fiori-tools previews:

**LANGUAGE**: JSON

**CODE**:
```json
{
  "scripts": {
    "start": "fiori-tools-preview --start",
    "start-mock": "fiori-tools-preview --start --mock",
    "start-local": "fiori-tools-preview --start --mock --local-ui5",
    "start-noflp": "fiori-tools-preview --start --noflp"
  }
}
```

**STEP**: 2 — Start a preview using Run Control (VS Code or SAP Business Application Studio)

**DESCRIPTION**: Create or reuse a Run / Launch configuration to start your app from the editor. Use a launch.json entry that runs the npm script for the desired preview. Example launch.json entries for VS Code to run the "start" and "start-mock" scripts:

- Place this file at .vscode/launch.json or add to your project's existing launch.json.
- Use "preLaunchTask"/"console" options as needed to integrate with your workflow.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Preview: start (live data)",
      "type": "node",
      "request": "launch",
      "runtimeExecutable": "npm",
      "runtimeArgs": ["run", "start"],
      "cwd": "${workspaceFolder}",
      "console": "integratedTerminal"
    },
    {
      "name": "Preview: start-mock",
      "type": "node",
      "request": "launch",
      "runtimeExecutable": "npm",
      "runtimeArgs": ["run", "start-mock"],
      "cwd": "${workspaceFolder}",
      "console": "integratedTerminal"
    }
  ]
}
```

Note: In SAP Business Application Studio use the Run Control panel to create a Run Configuration equivalent to the VS Code launch configuration. See linked docs for BAS-specific UI steps: create-a-new-run-configuration-in-sap-business-application-studio-05f2a9e.md

**STEP**: 3 — Start a preview from the context menu (VS Code / BAS)

**DESCRIPTION**: Right-click the project folder or any application-related subfolder in the Explorer and select "Preview Application". The default preview options map to the npm scripts:

- start       — starts the application with real service data
- start-local — starts the application with mock data and local SAPUI5 resources (offline)
- start-noflp — starts the application without the SAP Fiori launchpad sandbox
- start-mock  — starts the application with mock data

Automatic SAPUI5 resource download is supported only for SAPUI5 versions 1.76 and higher.

**LANGUAGE**: Text

**CODE**:
```text
Context menu -> Preview Application -> choose:
  - start
  - start-local
  - start-noflp
  - start-mock
```

**STEP**: 4 — Troubleshoot HTTPS / SSL / HSTS issues when using localhost proxy

**DESCRIPTION**: Many corporate domain security policies include localhost in HSTS/HTTPS rules. If a redirect forces HTTPS and you see an SSL protocol error when the preview proxy redirects to the OData backend, inspect your browser's HSTS configuration and clear entries for localhost.

Chrome HSTS diagnostic URL:

**LANGUAGE**: Text

**CODE**:
```text
Open in Chrome:
  chrome://net-internals/#hsts
```

If you see SSL errors after redirection, clear or adjust the HSTS entries for localhost or check your browser / corporate security policy.

**STEP**: 5 — Enable App-to-App Navigation preview

**DESCRIPTION**: To preview App-to-App navigation scenarios, follow the dedicated guidance for enabling the App-to-App Navigation Preview. This integrates with the preview environment.

**LANGUAGE**: Text

**CODE**:
```text
See documentation: app-to-app-navigation-preview-543675f.md
```

**STEP**: 6 — Reference links (local doc files)

**DESCRIPTION**: Quick reference to related local documentation files mentioned in the project documentation. Use these when you need detailed instructions for each mode or to create Run Configurations in VS Code / BAS.

**LANGUAGE**: Text

**CODE**:
```text
Related docs:
  - use-live-data-497aee2.md
  - use-mock-data-bda83a4.md
  - use-local-sources-6d3a210.md
  - use-custom-middlewares-dce5315.md
  - use-run-control-09171c8.md
  - create-a-new-run-configuration-in-visual-studio-code-3b1f37e.md
  - create-a-new-run-configuration-in-sap-business-application-studio-05f2a9e.md
  - app-to-app-navigation-preview-543675f.md
```
--------------------------------

**TITLE**: Previewing an SAP Fiori Elements CAP Project (VS Code & Business Application Studio)

**INTRODUCTION**: Quick, code-focused instructions to preview a generated SAP Fiori Elements CAP project locally. Steps cover starting the CAP server (cds run), opening the app URL from the terminal, and stopping the server. Includes VS Code and SAP Business Application Studio-specific terminal shortcuts and troubleshooting commands.

**TAGS**: fiori-tools, CAP, sap-fiori-elements, preview, cds-run, vscode, business-application-studio

STEP: Common — Start preview server, open app, stop server

DESCRIPTION: From your project root, start the CAP application server with cds run, open the application HTML link shown in the terminal (e.g., /incidents/webapp/index.html), then stop the server with Ctrl-C. If cds is not installed or errors occur, install global packages shown below.

LANGUAGE: bash

CODE:
```bash
# Ensure you are in the project root:
cd /path/to/your/cap-project

# Start the CAP server:
cds run
```

CODE:
```text
# Example terminal output after 'cds run':
server listening on { url: 'http://localhost:4004' }

# In the terminal, use Ctrl + Click (or Cmd + Click on macOS) to open the printed URL list in a browser.
# In the browser, click the HTML link for your Fiori app, e.g.:
# /incidents/webapp/index.html

# Stop the running server in the terminal:
# Press Ctrl-C
```

CODE:
```bash
# Troubleshooting: if 'cds run' errors, install/update CDS tools globally:
npm i -g @sap/cds
npm i -g @sap/cds-dk --force
```

STEP: Visual Studio Code — Open integrated terminal and preview

DESCRIPTION: Open the integrated terminal in VS Code, run cds run in the project root, then open the app link from the terminal using Ctrl/Cmd + Click and stop the server with Ctrl-C.

LANGUAGE: text

CODE:
```text
# Open the VS Code integrated terminal (choose one):
# 1) Keyboard: Ctrl + `  (backtick)  [Windows/Linux]
#    Keyboard: Cmd + `  (backtick)  [macOS]
# 2) Menu: View > Terminal
# 3) Command Palette: Ctrl/Cmd + Shift + P  -> "View: Toggle Integrated Terminal"

# In the terminal:
# cd /path/to/your/cap-project
# cds run

# Click the printed URL in the terminal (Ctrl/Cmd + Click). In the opened browser,
# select the HTML link such as:
# /incidents/webapp/index.html

# When finished, return to VS Code and stop the server with Ctrl-C.
```

STEP: SAP Business Application Studio — Open terminal and preview

DESCRIPTION: Open a terminal in SAP Business Application Studio, run cds run in the project root, open the HTML app link from the printed URL list (use the upper HTML link), and stop the server with Ctrl-C.

LANGUAGE: text

CODE:
```text
# Open terminal in Business Application Studio:
# Menu: Terminal > New Terminal

# In the terminal:
# cd /path/to/your/cap-project
# cds run

# Click the printed URL in the terminal (Ctrl/Cmd + Click). In the opened browser,
# click the upper HTML link (e.g., /incidents/webapp/index.html) to open the app on the launchpad.

# When finished, return to Business Application Studio and stop the server with Ctrl-C.
```
--------------------------------

**TITLE**: Run Configuration (launch.json) Behavior and Workspace Merging in VS Code

**INTRODUCTION**: This guide explains how VS Code/Dev Environments (including SAP Business Application Studio / Fiori Tools) discover run/debug configurations from <workspace_root>/.vscode/launch.json, the limitation that VS Code does not traverse nested folders for launch.json, and how to merge configurations by creating a multi-root workspace (.code-workspace). Includes concrete file examples you can copy into your project.

**TAGS**: fiori-tools, vscode, launch.json, run-configuration, workspace, debug

**STEP**: 1 — Behavior summary

**DESCRIPTION**: Actionable summary of how VS Code locates launch.json files and how run/debug configurations are resolved when opening a single folder vs a multi-root workspace.

**LANGUAGE**: text

**CODE**:
```text
- VS Code looks only for <workspace_root>/.vscode/launch.json
- It does NOT traverse nested subfolders to find launch.json
- When you open a single folder as the workspace root, only that root's .vscode/launch.json is used
- To combine configurations from multiple folders, create a multi-root workspace (.code-workspace) or "Add Folder to Workspace"
- You may add a subfolder of an existing root as an independent workspace root to include its .vscode/launch.json
```

**STEP**: 2 — Example repository layout

**DESCRIPTION**: Create a sample project structure to reproduce the behavior. Use this exact layout in your filesystem.

**LANGUAGE**: text

**CODE**:
```text
project-root/
├─ Folder_One/
│  └─ .vscode/
│     └─ launch.json   <-- contains "Config One"
├─ Folder_Two/
│  └─ .vscode/
│     └─ launch.json   <-- contains "Config Two"
└─ Folder_One/
   └─ Subfolder/
      └─ .vscode/
         └─ launch.json   <-- contains "Config Subfolder"
```

**STEP**: 3 — Sample launch.json for Folder_One (Config One)

**DESCRIPTION**: Place this file at Folder_One/.vscode/launch.json. When you open Folder_One as the workspace root, the Run and Debug view shows "Config One".

**LANGUAGE**: JSON

**CODE**:
```json
{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Config One",
      "type": "node",
      "request": "launch",
      "program": "${workspaceFolder}/app-one/index.js",
      "cwd": "${workspaceFolder}"
    }
  ]
}
```

**STEP**: 4 — Sample launch.json for Folder_Two (Config Two)

**DESCRIPTION**: Place this file at Folder_Two/.vscode/launch.json. When you open Folder_Two as the workspace root, Run and Debug shows "Config Two".

**LANGUAGE**: JSON

**CODE**:
```json
{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Config Two",
      "type": "node",
      "request": "launch",
      "program": "${workspaceFolder}/app-two/server.js",
      "cwd": "${workspaceFolder}"
    }
  ]
}
```

**STEP**: 5 — Sample launch.json for Subfolder (Config Subfolder)

**DESCRIPTION**: Place this at Folder_One/Subfolder/.vscode/launch.json. If you open Subfolder directly as the workspace root, Run and Debug shows "Config Subfolder". Note: If Subfolder is nested under Folder_One and Folder_One is the workspace root, Subfolder/.vscode/launch.json will NOT be discovered unless Subfolder is added as a separate workspace root.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Config Subfolder",
      "type": "node",
      "request": "launch",
      "program": "${workspaceFolder}/sub-app/index.js",
      "cwd": "${workspaceFolder}"
    }
  ]
}
```

**STEP**: 6 — Create a multi-root workspace (.code-workspace) to combine configurations

**DESCRIPTION**: Create a workspace file at project-root/project.code-workspace (or any path). Add multiple folder entries to include their .vscode/launch.json files together. When this workspace is opened, Run and Debug shows configurations from each root folder's .vscode/launch.json.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "folders": [
    {
      "path": "Folder_One"
    },
    {
      "path": "Folder_Two"
    }
  ],
  "settings": {
    // optional workspace settings
  }
}
```

**STEP**: 7 — Add a nested subfolder as its own workspace root

**DESCRIPTION**: To include Folder_One/Subfolder/.vscode/launch.json alongside Folder_One and Folder_Two, add the subfolder as another folder entry in the .code-workspace file (you can also use "Add Folder to Workspace" in the UI). This will display configurations from all three launch.json files in Run and Debug.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "folders": [
    { "path": "Folder_One" },
    { "path": "Folder_Two" },
    { "path": "Folder_One/Subfolder" }
  ]
}
```

**STEP**: 8 — Quick checks and troubleshooting

**DESCRIPTION**: Use these checks if a configuration does not appear in Run and Debug.

**LANGUAGE**: text

**CODE**:
```text
- Ensure the launch.json is located at <workspace_root>/.vscode/launch.json for each workspace root
- If a nested folder's launch.json is missing, either open that nested folder directly or add it as a workspace root
- Use a .code-workspace file or "Add Folder to Workspace" to combine multiple roots
- Refer to official docs: https://code.visualstudio.com/docs/editor/debugging#_launch-configurations
```
--------------------------------

**TITLE**: Configure fiori-tools Custom Middlewares (appreload, proxy, servestatic)

**INTRODUCTION**: This document shows how to enable and configure the three fiori-tools custom middlewares in ui5.yaml (application reload, proxy, and serve static). Use these middlewares to auto-reload the app during development, proxy requests to backends or swap SAPUI5 versions, and serve local static resources (for example a locally downloaded SAPUI5 SDK).

**TAGS**: fiori-tools, ui5, ui5.yaml, middleware, fiori-tools-appreload, fiori-tools-proxy, fiori-tools-servestatic, proxy, servestatic, appreload

STEP: 1 — Application Reload Middleware

DESCRIPTION: Enable the application reload middleware to automatically refresh the browser when files change. Add the middleware entry to ui5.yaml under server.customMiddleware and run the dev server with npx fiori run. Optional configuration parameters (path, ext, port, debug) can be provided to customize watched folder, file extensions, port, and debug logging.

LANGUAGE: YAML

CODE:
```yaml
# File: ui5.yaml
server:
  customMiddleware:
    - name: fiori-tools-appreload
      afterMiddleware: compression
      # Optional configuration block (uncomment and edit as needed)
      # configuration:
      #   path: webapp                    # <string> Default: "webapp" - path to watch
      #   ext: "html, js, json, xml, properties, change" # <string> Default: all listed - file extensions to watch
      #   port: 35729                     # <int> Default: 35729 - port for change notifications
      #   debug: false                    # <boolean> Default: false - enable debug logging
```

STEP: 2 — Proxy Middleware: Basic Backend Forwarding

DESCRIPTION: Use fiori-tools-proxy to forward requests from a local path prefix to a remote backend URL. Each backend entry has path and url. Place under server.customMiddleware and start with npx fiori run.

LANGUAGE: YAML

CODE:
```yaml
# File: ui5.yaml
server:
  customMiddleware:
    - name: fiori-tools-proxy
      afterMiddleware: compression
      configuration:
        backend:
          - path: /sap
            url: https://my.backend.com:1234
```

STEP: 3 — Proxy Middleware: Destination and Multiple Backends

DESCRIPTION: Add destination name for destination-based routing and list multiple backend entries to proxy different path prefixes to different targets.

LANGUAGE: YAML

CODE:
```yaml
# File: ui5.yaml
server:
  customMiddleware:
    - name: fiori-tools-proxy
      afterMiddleware: compression
      configuration:
        backend:
          - path: /sap
            url: https://my.backend.com:1234
            destination: my_backend    # optional: use named destination
          - path: /northwind
            url: https://my.backend_2.com:1234
```

STEP: 4 — Proxy Middleware: ABAP Environment on BTP (scp) and API Hub (apiHub)

DESCRIPTION: Set scp: true to enable ABAP Environment on SAP BTP behavior, or apiHub: true when targeting the SAP Business Accelerator Hub (api.sap.com).

LANGUAGE: YAML

CODE:
```yaml
# File: ui5.yaml
server:
  customMiddleware:
    - name: fiori-tools-proxy
      afterMiddleware: compression
      configuration:
        backend:
          - path: /sap
            url: https://my.steampunk.com:1234
            scp: true                 # optional: set to true for ABAP Environment on SAP BTP
          - path: /s4hanacloud
            url: https://api.sap.com
            apiHub: true             # optional: set to true for API Hub
```

STEP: 5 — Proxy Middleware: WebSockets and Path Remapping

DESCRIPTION: Enable WebSocket proxying with ws: true. Remap incoming request path to a different entry path on the backend using pathPrefix.

LANGUAGE: YAML

CODE:
```yaml
# File: ui5.yaml
server:
  customMiddleware:
    - name: fiori-tools-proxy
      afterMiddleware: compression
      configuration:
        backend:
          - path: /sap
            url: https://my.backend.com:1234
            ws: true                  # optional: enable WebSocket proxying
          - path: /services/odata
            pathPrefix: /my/entry/path # optional: send requests at /services/odata to /my/entry/path on backend
            url: https://my.backend.com:1234
            destination: my_backend
```

STEP: 6 — Proxy Middleware: Override SAPUI5 Resources and Version

DESCRIPTION: Use the ui5 configuration inside the proxy middleware to serve SAPUI5 resources from a different host or version (useful to preview different SAPUI5 versions).

LANGUAGE: YAML

CODE:
```yaml
# File: ui5.yaml
server:
  customMiddleware:
    - name: fiori-tools-proxy
      afterMiddleware: compression
      configuration:
        ui5:
          path:
            - /resources
            - /test-resources
          url: https://sapui5.hana.ondemand.com
          version: 1.78.0   # select SAPUI5 version used by the preview
```

STEP: 7 — Serve Static Middleware: Serve Local SAPUI5 SDK

DESCRIPTION: Serve a locally downloaded and extracted SAPUI5 SDK from your filesystem. Provide local SDK path in src for each path prefix. Start server with npx fiori run.

LANGUAGE: YAML

CODE:
```yaml
# File: ui5.yaml
# Preconditions: Download and extract SAPUI5 SDK locally (e.g., from https://tools.hana.ondemand.com/#sapui5)
server:
  customMiddleware:
    - name: fiori-tools-servestatic
      afterMiddleware: compression
      configuration:
        paths:
          - path: /resources
            src: "Path/To/SAPUI5-SDK"      # replace with actual local path to SDK/resources
          - path: /test-resources
            src: "Path/To/SAPUI5-SDK"      # replace with actual local path to SDK/test-resources
```

STEP: 8 — Serve Static Middleware: Serve Arbitrary Local Resources

DESCRIPTION: Serve any local static folders (images, libs, etc.) by mapping URL path prefixes to local dirs.

LANGUAGE: YAML

CODE:
```yaml
# File: ui5.yaml
server:
  customMiddleware:
    - name: fiori-tools-servestatic
      afterMiddleware: compression
      configuration:
        paths:
          - path: /images
            src: "Path/To/images"    # replace with actual local path
          - path: /libs
            src: "Path/To/libs"      # replace with actual local path
```

STEP: 9 — Start the Dev Server

DESCRIPTION: After editing ui5.yaml, start the development server and apply the configured middlewares.

LANGUAGE: Shell

CODE:
```bash
# From your project root (where ui5.yaml resides)
npx fiori run
```
--------------------------------

**TITLE**: Use Live Data — Start Fiori App with Live OData

**INTRODUCTION**: Start the Fiori application locally to preview it and connect to a live OData service. Use this guide to run the dev server, open the preview, and handle environment-specific terminal actions (VS Code / SAP Business Application Studio). The app typically serves on http://localhost:8080 and will prompt for credentials if the OData endpoint requires authentication.

**TAGS**: fiori-tools, odata, npm, local-development, preview, vscode, sap-business-application-studio

**STEP**: 1 — Start the application (development server)

**DESCRIPTION**: From the root of your project, run the start script to launch the dev server. The server will open a browser preview and connect to the configured OData endpoint. If port 8080 is occupied, the server will choose the next available port; check terminal output for the actual URL.

**LANGUAGE**: Bash

**CODE**:
```bash
# From your project root directory
npm start

# Expected terminal behavior (example):
# > my-app@x.y.z start /path/to/project
# > fiori-tools-preview-server ...
#
#  Dev server running at: http://localhost:8080
#  (If 8080 is in use, the server will pick the next available port, e.g. http://localhost:8081)
#
# Browser preview opens automatically.
# If the configured OData endpoint requires authentication, the browser will prompt for credentials.
```

**STEP**: 2 — Ensure you are in the project root

**DESCRIPTION**: Verify or change to the project root directory before running npm start.

**LANGUAGE**: Bash

**CODE**:
```bash
# Print current directory
pwd

# List files to confirm project root (should show package.json)
ls -la

# If needed, change directory to your project root:
cd /path/to/your/project
```

**STEP**: 3 — Open the integrated terminal in Visual Studio Code

**DESCRIPTION**: Use one of these methods to open the terminal in VS Code before running npm start.

**LANGUAGE**: Bash

**CODE**:
```bash
# VS Code options to open the integrated terminal:
# - Keyboard shortcut: Ctrl+`   (backtick)
# - Menu: View > Terminal
# - Command Palette: (Cmd/Ctrl)+Shift+P  then run: "View: Toggle Integrated Terminal"
```

**STEP**: 4 — Open the terminal in SAP Business Application Studio

**DESCRIPTION**: Use the Studio menu to open a new terminal to run npm start.

**LANGUAGE**: Bash

**CODE**:
```bash
# SAP Business Application Studio:
# - Menu: Terminal > New Terminal
# Then run:
npm start
```

**STEP**: 5 — Confirm server URL and handle port conflicts

**DESCRIPTION**: After starting, inspect terminal output for the exact server URL (port may differ from 8080 if occupied). Use that URL to open the app preview.

**LANGUAGE**: Bash

**CODE**:
```bash
# Example terminal output showing chosen port:
# Dev server running at: http://localhost:8081
#
# Action:
# - Open the URL shown in the terminal (copy/paste into browser) if a browser preview did not open automatically.
```
--------------------------------

**TITLE**: Start Fiori Application with Local Sources and Mock OData

**INTRODUCTION**: Start the Fiori application using a local development server that uses a mock OData service and a locally cached SAPUI5 library. Useful for offline development or when no backend is available. The local SAPUI5 library is downloaded from npm if required. You can change the SAPUI5 version in the project ui5-local.yaml file.

**TAGS**: fiori-tools, SAPUI5, local-dev, mock-server, npm, ui5-local

**STEP**: 1 — Start the local preview (root of project)

**DESCRIPTION**: From the project root start the local preview. This launches a mock OData server and serves the app on http://localhost:8080. Use one of these commands depending on your environment (VS Code typically uses the npm "run" form).

**LANGUAGE**: Bash

**CODE**:
```bash
# Recommended (VS Code / npm scripts)
npm run start-local

# Alternative (some environments / direct npm invocation)
npm start-local
```

**STEP**: 2 — Verify the server is running

**DESCRIPTION**: Confirm the preview is available at http://localhost:8080. You can open this URL in a browser or use curl to check the HTTP response.

**LANGUAGE**: Bash

**CODE**:
```bash
# Check with curl
curl -I http://localhost:8080

# Expected: HTTP/1.1 200 OK (or similar response headers)
```

**STEP**: 3 — Location and purpose of ui5-local.yaml

**DESCRIPTION**: The file ui5-local.yaml in the project root controls the local SAPUI5 library used by the local server. Update the SAPUI5 version there to download a different library version from npm. The automatic download feature requires SAPUI5 version 1.76 or higher.

**LANGUAGE**: YAML

**CODE**:
```yaml
# Path: ./ui5-local.yaml
# Edit the SAPUI5 version value to the desired release.
# Example placeholder (replace with your project's keys if different):
version: "1.96.0"
```

**STEP**: 4 — Open terminal in Visual Studio Code

**DESCRIPTION**: Open the integrated terminal in VS Code, ensure you are in the project root, then run the start command.

**LANGUAGE**: Text

**CODE**:
```text
# Open terminal in VS Code:
# - Shortcut: Ctrl + `  (backtick)
# - Menu: View > Terminal
# - Command Palette: View: Toggle Integrated Terminal (Ctrl/Cmd+Shift+P)

# After opening terminal:
cd /path/to/your/project
npm run start-local
```

**STEP**: 5 — Open terminal in SAP Business Application Studio

**DESCRIPTION**: Open a new terminal in SAP Business Application Studio, change to the project root, and run the start command.

**LANGUAGE**: Text

**CODE**:
```text
# Open terminal in SAP Business Application Studio:
# - Menu: Terminal > New Terminal

# After opening terminal:
cd /path/to/your/project
npm start-local
```

**STEP**: 6 — Notes and constraints

**DESCRIPTION**: Important operational notes:
- The app is served at http://localhost:8080 and uses a mock OData endpoint provided by the local server.
- A local copy of the SAPUI5 library will be downloaded from npm if missing.
- Automatic SAPUI5 download is only supported for SAPUI5 versions 1.76 and higher. Adjust ui5-local.yaml accordingly before starting if you need a specific version.

**LANGUAGE**: Text

**CODE**:
```text
# Summary:
# - Serve app locally: npm run start-local  (or npm start-local)
# - App URL: http://localhost:8080
# - Change SAPUI5 version: edit ./ui5-local.yaml
# - Auto-download requires SAPUI5 >= 1.76
```
--------------------------------

**TITLE**: Start the Fiori App with Mock Data (npm run start-mock)

**INTRODUCTION**: Instructions to run a Fiori application locally using the mock server (npm run start-mock). This lets you develop and preview the app without a live OData backend, and optionally generate JSON mock data files with the Data Editor.

**TAGS**: fiori-tools, mockserver, mock-data, odata, sap, vscode, business-application-studio, npm

**STEP**: Prerequisites — Install MockServer and confirm docs
**DESCRIPTION**: Ensure MockServer is installed before you run the mock start script. See the installation guide and Data Editor reference for generating .json mock files.
**LANGUAGE**: text
**CODE**:
```text
See: installing-mockserver-2538055.md
See: ../Project-Functions/data-editor-18e43b5.md  # (generate .json mock data)
```

**STEP**: Ensure you are in the project root
**DESCRIPTION**: Open a terminal (VS Code, Business Application Studio, or plain shell) and confirm you are in the application root directory containing package.json. Use these commands to verify and change directory as needed.
**LANGUAGE**: bash
**CODE**:
```bash
# move to project root (example)
cd /path/to/your/project

# verify you are in the root (package.json should exist)
pwd
ls -la
test -f package.json && echo "package.json found" || echo "Not in project root"
```

**STEP**: Open an integrated terminal in VS Code
**DESCRIPTION**: In VS Code open the integrated terminal then run the start-mock script. Shortcuts and UI options to open the terminal are listed below.
**LANGUAGE**: text
**CODE**:
```text
Open terminal in VS Code:
- Shortcut: CTRL + ` (backtick)
- Menu: View > Terminal
- Command Palette: View: Toggle Integrated Terminal (Ctrl/Cmd+Shift+P)

Then run:
npm run start-mock
```

**STEP**: Open a terminal in SAP Business Application Studio
**DESCRIPTION**: In SAP Business Application Studio open a new terminal and run the start-mock script.
**LANGUAGE**: text
**CODE**:
```text
Open terminal in Business Application Studio:
- Menu: Terminal > New Terminal

Then run:
npm run start-mock
```

**STEP**: Start the application with mock server
**DESCRIPTION**: Run the npm script to start the app. The app launches a development server (default localhost:8080) and starts the mock server to emulate the OData endpoint. The preview opens automatically in a new browser tab.
**LANGUAGE**: bash
**CODE**:
```bash
npm run start-mock
```

**STEP**: Behavior and troubleshooting
**DESCRIPTION**: Notes on port selection and mock data files.
- If port 8080 is in use, the dev server selects the next available port automatically.
- To generate persistent .json mock data files, use the Data Editor (see ../Project-Functions/data-editor-18e43b5.md).
- If the app does not open automatically, open your browser and navigate to the server URL printed in the terminal (e.g., http://localhost:8080 or the alternate port).
**LANGUAGE**: bash
**CODE**:
```bash
# If automatic opening fails, check terminal for the actual URL and open manually:
# Example URL format (port may vary): http://localhost:8080
```
--------------------------------

**TITLE**: Use Run Control (VS Code & SAP Business Application Studio)

**INTRODUCTION**: How to use Run Control to run your SAPUI5 application in Visual Studio Code and SAP Business Application Studio. Covers available run options (including mock and local runs), keyboard shortcuts, workspace scope, and sample run configurations for automation.

**TAGS**: fiori-tools, run-control, VS Code, Business Application Studio, SAPUI5, mock, npm, launch.json

**STEP**: Assets / icon styles

**DESCRIPTION**: Include SAP icons stylesheet if your documentation or app references it. Keep the relative path as provided by the project structure.

**LANGUAGE**: HTML

**CODE**:
```html
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```

**STEP**: Use Run Control in Visual Studio Code

**DESCRIPTION**: Open the Run Control view in VS Code (Ctrl+Shift+D) to access pre-defined run options. Typical built-in run options generated by the Fiori tools or templates:

- Start <project name> — runs the app using the SAPUI5 version selected during generation.
- Start <project name> with SAPUI5 Version — prompts to select an SAPUI5 version from a list; after selection the app starts automatically.
- Start <project name> Mock — runs the app with mock data by invoking the npm script npm run start-mock (available for OData V2 services).
- Start <project name> Mock with SAPUI5 Version — (mock + version selector).
- Start <project name> Local — runs the app using a local copy of the SAPUI5 library selected during generation.

Notes:
- Run options are workspace-scoped. If you change the open workspace/folder in VS Code, the run options are not preserved.
- You can add custom run configurations in .vscode/launch.json (example below).
- Use the VS Code Run view keyboard shortcut: Ctrl + Shift + D.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Start <project name>",
      "type": "pwa-node",
      "request": "launch",
      "cwd": "${workspaceFolder}",
      "runtimeExecutable": "npm",
      "runtimeArgs": ["run", "start"],
      "console": "integratedTerminal"
    },
    {
      "name": "Start <project name> (with SAPUI5 Version)",
      "type": "pwa-node",
      "request": "launch",
      "cwd": "${workspaceFolder}",
      "runtimeExecutable": "npm",
      "runtimeArgs": ["run", "start-with-version"],
      "console": "integratedTerminal"
    },
    {
      "name": "Start <project name> Mock",
      "type": "pwa-node",
      "request": "launch",
      "cwd": "${workspaceFolder}",
      "runtimeExecutable": "npm",
      "runtimeArgs": ["run", "start-mock"],
      "console": "integratedTerminal"
    },
    {
      "name": "Start <project name> Local",
      "type": "pwa-node",
      "request": "launch",
      "cwd": "${workspaceFolder}",
      "runtimeExecutable": "npm",
      "runtimeArgs": ["run", "start-local"],
      "console": "integratedTerminal"
    }
  ]
}
```

**STEP**: Run Control in SAP Business Application Studio (BAS)

**DESCRIPTION**: Use the Run Configuration pane in BAS to run your application. Steps:
1. Open Run Configuration:
   - Left toolbar: click the Run Configuration icon ().
   - Or main menu: View > Run Configuration.
2. Available run options (examples generated by Fiori tools):
   - Start <project name> — runs using the SAPUI5 version selected during generation.
   - Start <project name> Mock — runs with mock data by executing npm run start-mock (available for OData V2 services).
   - Start <project name> Local — uses a local SAPUI5 library copy selected during generation.
3. Select the desired option and click the Run Module icon () to start.

Notes:
- BAS supports creating additional run configurations; see the guide "Create a New Run Configuration in SAP Business Application Studio".
- Mock runs invoke: npm run start-mock — ensure your package.json defines this script.

**LANGUAGE**: CLI / JSON

**CODE**:
```bash
# Start mock data server (example invocation)
npm run start-mock
```

```json
// package.json scripts (example placeholders — ensure these match your project)
{
  "scripts": {
    "start": "npm run ui5-serve",                // runs the app with selected SAPUI5 version
    "start-with-version": "npm run ui5-serve",   // wrapper to allow selecting a SAPUI5 version
    "start-mock": "npm run ui5-serve -- --mock", // run app with mock data (OData V2)
    "start-local": "npm run ui5-serve -- --local"// run app against selected local SAPUI5 lib
  }
}
```

**STEP**: Important Notes & Links

**DESCRIPTION**:
- "Start <project name> with SAPUI5 Version" prompts a version selection UI and then starts the app automatically.
- Mock runs are typically available only for OData V2 services.
- Run configurations are workspace-specific in VS Code.
- For details on creating new run configurations:
  - VS Code: see "Create a New Run Configuration in Visual Studio Code"
  - BAS: see "Create a New Run Configuration in SAP Business Application Studio"
--------------------------------

**TITLE**: Application Information — SAP Fiori tools (project overview and utilities)

**INTRODUCTION**: Use the Application Information page that opens after generating a SAP Fiori elements project to inspect project metadata, dependencies, links to relevant commands, and help topics. This guide shows how to include SAP icons in your app, use an icon glyph, open the Application Information page from VS Code, and run project validation.

**TAGS**: fiori-tools, sapui5, fiori-elements, vscode, application-info, icons

**STEP**: 1 — Add SAP icons stylesheet to the app

**DESCRIPTION**: Add the SAP icons CSS to your app's HTML (typically index.html) so SAP icon glyphs are available in the UI. Preserve the relative file path used by the generated project.

**LANGUAGE**: HTML

**CODE**:
```html
<!-- Add this to the <head> of your index.html (or equivalent) -->
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```

**STEP**: 2 — Use a SAP icon glyph in markup

**DESCRIPTION**: Use the SAP icon glyph by including the appropriate class and glyph character. The snippet below shows the "Page" icon used in the Application Information Project Detail section (the repository uses a glyph character inside the span).

**LANGUAGE**: HTML

**CODE**:
```html
<!-- Example icon usage in a generated Fiori elements page -->
<span class="SAP-icons-V5"></span> <!-- Page icon (used to open Configure Page Elements) -->
<!-- Link in docs points to: ../Developing-an-Application/configure-page-elements-047507c.md -->
```

**STEP**: 3 — Understand the Application Information page sections

**DESCRIPTION**: The Application Information page contains four actionable sections. Use this summary to locate actions and links programmatically or from UI tests.

**LANGUAGE**: text

**CODE**:
```
Sections:
- Project Detail
  - Shows project type, SAPUI5 version, backend, and pages included.
  - Includes a "Page" icon that launches Configure Page Elements.
  - Configure Page Elements doc: ../Developing-an-Application/configure-page-elements-047507c.md

- Status
  - Summarizes project dependencies and provides links to fix issues.

- What you can do
  - Quick links to relevant SAP Fiori tools commands for the project.

- What you can learn
  - Links to help topics and support contact information.
```

**STEP**: 4 — Open Application Information from VS Code

**DESCRIPTION**: Relaunch the Application Information page any time via the VS Code command palette. Use the exact command name below to automate or script an instruction for users.

**LANGUAGE**: text

**CODE**:
```
Command palette:
- Run "Fiori: Open Application Info"

Keyboard (open palette):
- Windows/Linux: Ctrl+Shift+P
- macOS: Command+Shift+P
Type the command name and press Enter.
```

**STEP**: 5 — Run Project Validation

**DESCRIPTION**: Run project validation at any time after generating the project to check configuration and dependency issues. The generated project references the Project Validation documentation for details.

**LANGUAGE**: text

**CODE**:
```
To run validation:
- In VS Code, open the command palette and run "Project Validation" (or search "Validation" under Fiori commands).
- Project Validation docs: project-validation-6f3c737.md
```
--------------------------------

**TITLE**: Application SAPUI5 Version — Set Minimum, Preview, and Deployed Versions for Fiori Apps

**INTRODUCTION**: Actions and code examples for controlling which SAPUI5 version a Fiori application requires at runtime (minimum), uses for previewing in development, and uses when deployed to ABAP or Cloud Foundry. Includes manifest.json, index.html, xs-app.json, and mta.yaml examples and the VS Code command used to update the minimum version and related @sap/ux-specification module.

**TAGS**: fiori-tools, sapui5, manifest.json, minUI5Version, preview, deployment, xs-app.json, mta.yaml, index.html, ABAP, Cloud-Foundry

**STEP**: 1 — Set Minimum SAPUI5 Version in manifest.json

**DESCRIPTION**: Declare the minimum SAPUI5 version required at runtime by adding or updating the minUI5Version property under sap.ui5 -> dependencies in your application's manifest.json. This ensures deployment checks and tools use the correct feature set.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui5": {
    "dependencies": {
      "minUI5Version": "1.120.4"
    }
  }
}
```

**STEP**: 2 — Change Minimum Version via VS Code command (updates manifest and @sap/ux-specification)

**DESCRIPTION**: Use the VS Code command "Fiori: Change Minimum SAPUI5 Version" to update the manifest.json minUI5Version. The command also updates the installed @sap/ux-specification module if a different module version is required to match the new minimum SAPUI5 version.

**LANGUAGE**: Text

**CODE**:
```
Open Command Palette (Ctrl/Cmd+Shift+P) -> Fiori: Change Minimum SAPUI5 Version -> select target version
```

**STEP**: 3 — Preview SAPUI5 Version behavior and override via run configuration / tooling

**DESCRIPTION**: By default the app preview uses the application's minimum SAPUI5 version. Preview resources are fetched from https://ui5.sap.com; if the requested version is not available, the next higher available version is used. To override the source or default preview version, configure the UI5 tooling used by your project (for example, via @sap/ux-ui5-tooling settings or a custom run configuration).

**LANGUAGE**: Text

**CODE**:
```
Default preview source: https://ui5.sap.com
Behavior: requested version -> if not found -> next higher available version is used
Override: configure @sap/ux-ui5-tooling or a run configuration in your IDE to change source/version
```

**STEP**: 4 — Control SAPUI5 version for standalone apps via index.html bootstrap src (ABAP and general standalone)

**DESCRIPTION**: For standalone deployments (deployed index.html), the SAPUI5 version loaded depends on the bootstrap src path. A relative path loads the backend-installed version (common for ABAP-deployed apps embedded in Fiori Launchpad). To force a specific UI5 version or to load from the public CDN, set an absolute URL to the desired version.

**LANGUAGE**: HTML

**CODE**:
```html
<!-- Load SAPUI5 from the backend (relative path) - uses backend SAPUI5 version -->
<script id="sap-ui-bootstrap" src="resources/sap-ui-core.js"></script>

<!-- Load a specific SAPUI5 version from ui5.sap.com (explicit version) -->
<script id="sap-ui-bootstrap" src="https://ui5.sap.com/1.114.12/resources/sap-ui-core.js"></script>
```

**STEP**: 5 — ABAP Environment behavior (Fiori Launchpad and standalone)

**DESCRIPTION**: When deployed to an ABAP environment:
- Embedded in SAP Fiori launchpad: the app uses the SAPUI5 version deployed in the backend (match your project minUI5Version to backend).
- Standalone via deployed index.html: the loaded version depends on the index.html bootstrap src (see Step 4).

**LANGUAGE**: Text

**CODE**:
```
Embedded in Fiori Launchpad -> uses backend SAPUI5 version
Standalone with relative src -> uses backend SAPUI5 version
Standalone with absolute src -> uses specified ui5.sap.com or version URL
```

**STEP**: 6 — Cloud Foundry: Configure SAPUI5 resources routing (xs-app.json) and destination (mta.yaml)

**DESCRIPTION**: For Cloud Foundry standalone deployments, Fiori: Add Deployment Configuration adds a route in xs-app.json to map /resources/* to an SAPUI5 resources destination and adds an instance-based destination entry in mta.yaml that points to https://ui5.sap.com. By default this uses the latest SAPUI5 version; change the destination or mta configuration to use a specific version or account-level destination.

**LANGUAGE**: JSON

**CODE**:
```json
// .xs-app.json (route added by Fiori: Add Deployment Configuration)
{
  "routes": [
    {
      "source": "^/resources/(.*)$",
      "target": "/resources/$1",
      "authenticationType": "none",
      "destination": "ui5"
    }
  ]
}
```

**LANGUAGE**: YAML

**CODE**:
```yaml
# mta.yaml (instance based destination added by Fiori: Add Deployment Configuration)
instance:
  destinations:
    - Authentication: NoAuthentication
      Name: ui5
      ProxyType: Internet
      Type: HTTP
      URL: https://ui5.sap.com
```

**STEP**: 7 — Notes and operational tips

**DESCRIPTION**: Quick operational guidance to avoid runtime/version mismatches:
- Ensure manifest.json minUI5Version reflects features used by your app.
- For ABAP deployments embedded in launchpad, align project minUI5Version with the backend UI5 version.
- For Cloud Foundry standalone apps, change the xs-app.json/mta.yaml destination or configure SAP BTP destinations to pin a specific UI5 version.
- Changing minUI5Version via the VS Code command may update @sap/ux-specification to provide matching feature support in development tools.

**LANGUAGE**: Text

**CODE**:
```
Checklist:
- Update manifest.json minUI5Version when using new UI5 features.
- Use Fiori: Change Minimum SAPUI5 Version to update tooling and @sap/ux-specification.
- For standalone apps, control bootstrap src in index.html to load a specific UI5 version or the backend.
- For Cloud Foundry, review xs-app.json and mta.yaml destinations to control the SAPUI5 source/version.
```
--------------------------------

**TITLE**: Data Editor — Generating and Editing Mock Data for Fiori Tools

**INTRODUCTION**: Practical, code-focused instructions to generate, store, edit, and serve mock OData data using the Fiori Tools Data Editor. Includes manifest and ui5-mock.yaml snippets, file locations, example Entity.json mock data, and commands for running and stopping the mock server.

**TAGS**: fiori-tools, mockserver, data-editor, ui5, mockdata, manifest, ui5-mock

**STEP**: 1 — Prerequisite: Configure Mock Server
**DESCRIPTION**: Ensure the UI5 mock server is configured for your project before using the Data Editor or running `npm run start-mock`. The manifest.json must include a dataSource entry that points to the service metadata (metadata.xml) via localUri in settings.
**LANGUAGE**: JSON
**CODE**:
```json
{
  "sap.app": {
    "id": "your.app.id",
    "applicationVersion": {
      "version": "1.0.0"
    }
  },
  "sap.ui5": {
    "models": {},
    "dataSources": {
      "mainService": {
        "uri": "/sap/opu/odata/sap/YOUR_SERVICE_SRV/",
        "type": "OData",
        "settings": {
          "localUri": "localService/metadata.xml"
        }
      }
    }
  }
}
```

**STEP**: 2 — Start the mock server (development)
**DESCRIPTION**: Run the project using the standard script that starts the mock server and serves mock data. Stop the running mock server with Ctrl+C in the terminal.
**LANGUAGE**: Shell
**CODE**:
```bash
# start the mock server (serves mock data generated on the fly)
npm run start-mock

# stop the mock server (press in terminal where server is running)
# Ctrl+C
```

**STEP**: 3 — Open Data Editor and generate persistent .json mock data
**DESCRIPTION**: Right-click the project in your editor (Fiori Tools support) → Open Data Editor. Generating mock data in the Data Editor saves JSON files under /webapp/localService/mockdata. Use this when you want persistent sample records instead of in-memory mock data.
**LANGUAGE**: None
**CODE**:
```text
Output path for generated mock data:
  <project-root>/webapp/localService/mockdata/

Example generated files:
  webapp/localService/mockdata/Products.json
  webapp/localService/mockdata/Orders.json
  webapp/localService/metadata.xml    <-- read by Data Editor via manifest.json
```

**STEP**: 4 — Example Entity mock file (Products.json)
**DESCRIPTION**: Example of the JSON structure produced/edited by the Data Editor. Each file represents an entity collection with array "value".
**LANGUAGE**: JSON
**CODE**:
```json
{
  "d": {
    "results": [
      {
        "ProductID": "P1000",
        "Name": "Laptop",
        "Category": "Electronics",
        "Price": 1499.99,
        "Stock": 25
      },
      {
        "ProductID": "P1001",
        "Name": "Monitor",
        "Category": "Electronics",
        "Price": 299.99,
        "Stock": 120
      }
    ]
  }
}
```

**STEP**: 5 — Edit mock data using Data Editor (UI actions and behavior)
**DESCRIPTION**: Use the Data Editor UI to modify or generate mock data. Details:
- Double-click a cell to edit (primary keys and foreign keys are not editable).
- Add Row: click Add Row to append a record. Rows will be added automatically for related entities with foreign keys.
- Delete Row: select a row and click Delete Row. Deletions cascade automatically to related entities with foreign keys.
- Search: click the Search input in the header, type criteria, and select the matching record in the dropdown to highlight it.
- Show/Hide Properties: click Show Properties in the header → toggle properties → Save. Some property groups are hidden by default.
**LANGUAGE**: None
**CODE**:
```text
UI interactions summary:
  - Edit cell: double-click cell
  - Add row: button "Add Row"
  - Delete row: select row -> button "Delete Row"
  - Search: header "Search" input -> select entry from drop-down
  - Show/Hide properties: "Show Properties" -> check/uncheck -> Save
```

**STEP**: 6 — When mock server is not running: sync behavior
**DESCRIPTION**: If the mock server is stopped:
- Changes made in the Data Editor automatically update the .json files under /webapp/localService/mockdata.
- If you edit the .json files manually, click the Data Editor Refresh button to reload the canvas and reflect changes.
**LANGUAGE**: None
**CODE**:
```text
Manual edit workflow:
  1. Edit file: webapp/localService/mockdata/Products.json
  2. In Data Editor: click "Refresh" to reload table view
```

**STEP**: 7 — When mock server is running: enable live updates (watch)
**DESCRIPTION**: If you want the running mock server to reflect changes in the mock JSON files without restarting the server, add watch: true to ui5-mock.yaml. This enables the canvas and served mock data to auto-update when files change.
**LANGUAGE**: YAML
**CODE**:
```yaml
# ui5-mock.yaml (placed in project root or where your UI5 tooling expects it)
# Add or set the watch parameter to true
watch: true

# Minimal example of a ui5-mock.yaml that may exist alongside watch
server:
  port: 8080
mock:
  metadata: webapp/localService/metadata.xml
  mockdata: webapp/localService/mockdata
```

**STEP**: 8 — Multi-service templates and metadata selection
**DESCRIPTION**: For templates (e.g., Overview Page) with multiple services, Data Editor shows a metadata file dropdown. Select the desired metadata.xml to view/edit the corresponding mock entities and data files.
**LANGUAGE**: None
**CODE**:
```text
If multiple services are declared:
  - Open Data Editor
  - Use metadata dropdown (top) to choose the metadata.xml (data source)
  - Data Editor will load entities defined by the selected metadata
```

**STEP**: 9 — Useful file references and paths
**DESCRIPTION**: Quick reference of key files and locations for automation or code generation tasks.
**LANGUAGE**: None
**CODE**:
```text
Project file references:
  - manifest.json (declare dataSources -> settings.localUri -> localService/metadata.xml)
    <project-root>/webapp/manifest.json

  - service metadata:
    <project-root>/webapp/localService/metadata.xml

  - mock data directory (JSON files generated/edited by Data Editor):
    <project-root>/webapp/localService/mockdata/*.json

  - ui5-mock.yaml (enable watch: true for live reload):
    <project-root>/ui5-mock.yaml
```
--------------------------------

**TITLE**: Delete a SAP Fiori Application from a CAP Project (VS Code / Extension Implementation)

**INTRODUCTION**: This document shows (A) how to invoke the built-in user action "Fiori: Delete Application from CAP project" from VS Code and (B) a compact, production-ready TypeScript implementation pattern for a VS Code extension command that deletes a Fiori application folder inside a CAP project and reverts related global-file references (for example, invalid annotation references). The code examples use the VS Code Extension API and Node.js fs utilities and are ready to be adapted into an extension or automation script.

**TAGS**: fiori-tools, CAP, SAPUI5, SAP Fiori, vscode-extension, delete, application, annotations

**STEP**: Invoke built-in command from VS Code

**DESCRIPTION**: How to run the command as an end user in VS Code.

**LANGUAGE**: Text

**CODE**:
```text
1. Open the Command Palette: CMD/CTRL + Shift + P
2. Run: Fiori: Delete Application from CAP project
3. Select the application from the dropdown list.
4. Confirm the dialog "Do you really want to delete application <application_name>?" (Yes / No / Cancel).
   - Click Yes to delete the application folder and revert changes in global files.
```

**STEP**: Register the command in package.json (VS Code extension)

**DESCRIPTION**: Add command metadata so the command shows up in the Command Palette.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "contributes": {
    "commands": [
      {
        "command": "fiori.deleteApplicationFromCAPProject",
        "title": "Fiori: Delete Application from CAP project"
      }
    ]
  }
}
```

**STEP**: Implementation — command registration and handler (TypeScript)

**DESCRIPTION**: Minimal but complete VS Code extension handler that:
- Discovers candidate Fiori app folders by finding manifest.json files.
- Prompts user to pick an application.
- Shows a confirmation dialog with Yes/No/Cancel.
- Performs safe deletion (creates a backup).
- Reverts global references by scanning files and removing annotation references.

Adapt the helper patterns (discovery, deletion, revert) to your project's file-layout and reference patterns.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
// src/extension.ts
import * as vscode from 'vscode';
import * as path from 'path';
import * as fs from 'fs/promises';
import { existsSync } from 'fs';
import * as os from 'os';

export function activate(context: vscode.ExtensionContext) {
  const disposable = vscode.commands.registerCommand(
    'fiori.deleteApplicationFromCAPProject',
    async () => {
      const candidates = await discoverFioriApplications();
      if (candidates.length === 0) {
        vscode.window.showInformationMessage('No Fiori applications found in the workspace.');
        return;
      }

      const quickPick = await vscode.window.showQuickPick(
        candidates.map(c => ({ label: c.name, description: c.folder })),
        { placeHolder: 'Select the application to delete' }
      );

      if (!quickPick) { return; }

      const confirmed = await vscode.window.showWarningMessage(
        `Do you really want to delete application ${quickPick.label}?`,
        { modal: true },
        'Yes',
        'No',
        'Cancel'
      );

      if (confirmed !== 'Yes') {
        vscode.window.showInformationMessage('Deletion canceled.');
        return;
      }

      const chosen = candidates.find(c => c.name === quickPick.label);
      if (!chosen) {
        vscode.window.showErrorMessage('Selected application not found.');
        return;
      }

      try {
        await backupFolder(chosen.folder);
        await deleteFolder(chosen.folder);
        await revertGlobalFiles(vscode.workspace.workspaceFolders?.[0].uri.fsPath || '', chosen);
        vscode.window.showInformationMessage(`Application ${chosen.name} deleted and global references reverted.`);
      } catch (err) {
        vscode.window.showErrorMessage(`Failed to delete application: ${err}`);
      }
    }
  );

  context.subscriptions.push(disposable);
}

/**
 * Find candidate application folders by locating webapp/manifest.json or manifest.json files.
 * Returns array of { name, folder } where folder is the application root to remove.
 */
async function discoverFioriApplications(): Promise<Array<{ name: string, folder: string }>> {
  const candidates: Array<{ name: string, folder: string }> = [];

  // Look for common manifest.json locations
  const manifestUris = await vscode.workspace.findFiles('**/webapp/manifest.json', '**/node_modules/**', 50);
  const rootManifests = await vscode.workspace.findFiles('**/manifest.json', '**/node_modules/**', 50);

  const all = [...manifestUris, ...rootManifests];

  for (const uri of all) {
    try {
      const manifestText = (await vscode.workspace.fs.readFile(uri)).toString();
      // folder resolution: if manifest is under webapp, appRoot = parent of webapp, else parent of manifest
      const manifestPath = uri.fsPath;
      const segments = manifestPath.split(path.sep);
      const webappIndex = segments.lastIndexOf('webapp');
      const appRoot = webappIndex >= 0 ? segments.slice(0, webappIndex).join(path.sep) : path.dirname(manifestPath);
      const name = path.basename(appRoot);
      candidates.push({ name, folder: appRoot });
    } catch {
      // ignore unreadable manifests
    }
  }

  // Deduplicate by folder
  const unique = new Map<string, { name: string, folder: string }>();
  for (const c of candidates) unique.set(c.folder, c);
  return Array.from(unique.values());
}

async function backupFolder(folderPath: string): Promise<void> {
  // Create a compressed or plain copy under OS temp dir
  const backupRoot = path.join(os.tmpdir(), 'fiori-delete-backups');
  await fs.mkdir(backupRoot, { recursive: true });
  const backupTarget = path.join(backupRoot, `${path.basename(folderPath)}-${Date.now()}`);
  await copyDirectory(folderPath, backupTarget);
}

/** Recursively copy a directory (simple implementation) */
async function copyDirectory(src: string, dest: string): Promise<void> {
  await fs.mkdir(dest, { recursive: true });
  const entries = await fs.readdir(src, { withFileTypes: true });
  for (const entry of entries) {
    const srcPath = path.join(src, entry.name);
    const destPath = path.join(dest, entry.name);
    if (entry.isDirectory()) {
      await copyDirectory(srcPath, destPath);
    } else {
      await fs.copyFile(srcPath, destPath);
    }
  }
}

async function deleteFolder(folderPath: string): Promise<void> {
  // Use recursive delete (Node 12+ supports rm with recursive; fallback to rimraf if needed)
  if (!existsSync(folderPath)) {
    throw new Error('Folder does not exist: ' + folderPath);
  }
  await fs.rm(folderPath, { recursive: true, force: true });
}

/**
 * Revert global files by removing references to the deleted application.
 * This is an example: adjust regex and file globs to match your project's global files and annotation references.
 */
async function revertGlobalFiles(workspaceRoot: string, app: { name: string, folder: string }): Promise<void> {
  if (!workspaceRoot) return;

  // Example patterns to scan: CDS files, YAML, XML or any files that may reference the app name or annotation files.
  const patterns = ['**/*.cds', '**/*.xml', '**/*.yaml', '**/*.yml', '**/*.json'];
  // Exclude node_modules and backup folders
  const exclude = '**/node_modules/**';

  for (const pat of patterns) {
    const uris = await vscode.workspace.findFiles(pat, exclude, 200);
    for (const uri of uris) {
      try {
        const bytes = await vscode.workspace.fs.readFile(uri);
        const text = bytes.toString();

        // Example: remove lines that reference annotations/<appName> or similar paths.
        // Customize these regexps to your project's reference patterns.
        const regexes = [
          new RegExp(`annotations\\/.*${escapeRegExp(app.name)}.*`, 'gi'),
          new RegExp(`["']\\.\\/.+${escapeRegExp(app.name)}.*["']`, 'gi'),
          new RegExp(`\\b${escapeRegExp(app.name)}\\b`, 'gi') // conservative: use with care
        ];

        let newText = text;
        for (const r of regexes) {
          newText = newText.replace(r, '');
        }

        if (newText !== text) {
          // Write back the modified file
          const encoder = new TextEncoder();
          await vscode.workspace.fs.writeFile(uri, encoder.encode(newText));
        }
      } catch {
        // ignore read/write errors for files we can't access
      }
    }
  }
}

function escapeRegExp(s: string) {
  return s.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
}

// export deactivate if needed
export function deactivate() {}
```

**STEP**: Patterns and safety options to customize

**DESCRIPTION**: Example configuration snippets you should add or adapt:
- Which files to scan for references (adjust extensions and globs)
- Exact regex patterns to remove/replace references (to avoid accidental removals)
- Optional dry-run and explicit backup location

**LANGUAGE**: JSON

**CODE**:
```json
{
  "fioriDeleteSettings": {
    "scanFileGlobs": ["**/*.cds", "**/src/**/*.cds", "**/*.xml", "**/*.yaml", "**/*.yml", "**/*.json"],
    "excludeGlobs": ["**/node_modules/**", "**/.git/**"],
    "backupLocation": "${os.tmpdir()}/fiori-delete-backups",
    "dryRun": false
  }
}
```

**STEP**: Notes & tips for reliable operation

**DESCRIPTION**:
- Always perform a backup before deleting: the example code creates a folder copy to OS temp.
- Tailor discovery logic: many CAP/Fiori apps place manifests in webapp/manifest.json — adapt discovery rules if your layout differs.
- Reverting global files requires project-specific patterns for annotation and manifest references; test regexes in a dry-run first.
- For larger repos, limit search scope to workspace folders to avoid timeouts.

**LANGUAGE**: Text

**CODE**:
```text
Tip: See CAP docs for project structure: https://cap.cloud.sap/docs/about/
```
--------------------------------

**TITLE**: SAP Fiori Tools — Environment Check (Destination & Dev Environment Diagnostics)

**INTRODUCTION**: Use the SAP Fiori tools Environment Check from SAP Business Application Studio (BAS) or Visual Studio Code (VS Code) to diagnose destination-related issues and gather development environment details. This guide gives concise, actionable steps for automation-friendly usage (commands, UI actions, expected outputs, and report sections). Use the exported .zip to share with SAP Product Support.

**TAGS**: fiori-tools, sap-business-application-studio, visual-studio-code, environment-check, destinations, diagnostics

**STEP**: Destination Checks — SAP Business Application Studio

**DESCRIPTION**: Run the Environment Check in BAS to create a destination diagnostic report. This checks connectivity, destination parameters, and collects raw destination logs. You can view the results in the UI or save a .zip report for SAP Product Support. If prompted, provide destination credentials. The generated report contains these sections: Environment, Destination Details, All Destination Details, Messages.

- Environment: Dev Space type, Node version, and environment metadata.
- Destination Details: Selected destination parameters and properties.
- All Destination Details: All destinations and properties available in the current subaccount.
- Messages: Raw log messages for the chosen destination (useful for SAP Product Support).

**LANGUAGE**: text

**CODE**:
```text
# In SAP Business Application Studio (BAS)

# 1. Open the Command Palette
# Windows / Linux: Ctrl + Shift + P
# macOS: Cmd + Shift + P

# 2. Run the command:
Fiori: Open Environment Check

# 3. In the Environment Check UI:
#   - Click "Create destination"
#   - Select a destination from the dropdown
#   - If prompted, enter your credentials
#   - Click "View the results" to inspect in the UI
#   - OR click "View and Save results" to export a .zip report for SAP Product Support

# Output:
# - A diagnostic report window with the sections: Environment, Destination Details,
#   All Destination Details, Messages
# - Optional: a ZIP file containing the full report for sharing
```

**STEP**: Gather Environment Information — BAS and Visual Studio Code

**DESCRIPTION**: Run Environment Check to gather development-environment metadata (SAP Fiori application generator version, installed npm packages, Node version, etc.). Useful for troubleshooting generator or build issues. Results can be copied to the clipboard for quick sharing or saved to a .zip for SAP Product Support.

**LANGUAGE**: text

**CODE**:
```text
# In Visual Studio Code or SAP Business Application Studio

# 1. Open the Command Palette
# Windows / Linux: Ctrl + Shift + P
# macOS: Cmd + Shift + P

# 2. Run the command:
Fiori: Open Environment Check

# 3. In the Environment Check UI:
#   - Click "Gather environment information"
#   - Click "View and Copy results" to copy the details to your clipboard
#   - OR click "View and Save results" to export a .zip report for SAP Product Support

# Typical collected details (visible in results):
# - SAP Fiori application generator version
# - List of installed npm packages and versions
# - Node.js version
# - Other development-environment metadata relevant for support
```

**STEP**: Notes for Automation and Support

**DESCRIPTION**: Use the exported .zip from either flow when opening an SAP Product Support incident. Copying results to the clipboard is suitable for quick sharing in chat or email. Always include the report sections (Environment, Destination Details, All Destination Details, Messages) when reporting destination issues.

**LANGUAGE**: text

**CODE**:
```text
# Best practices:
# - Use "View and Save results" to create a .zip for SAP Product Support
# - Use "View and Copy results" for quick paste into issue trackers or chats
# - Provide destination credentials only as requested by support and follow security guidelines
# - Attach the .zip when creating support incidents for destination-related failures
```
--------------------------------

**TITLE**: Access the SAP Fiori Tools Information Panel

**INTRODUCTION**: This document describes how to open the SAP Fiori Tools information panel in Visual Studio Code. The information panel provides release notes, learning links, tutorials, and support information. Use these steps for manual interaction or to generate UI automation that opens and expands the panel.

**TAGS**: fiori-tools, sap, vscode, information-panel, release-notes, ui-automation

**STEP**: 1 — Open the SAP Fiori activity view

**DESCRIPTION**: From the VS Code Activity Bar (left side), click the SAP Fiori activity icon (wrench/pencil). This opens the SAP Fiori view where the information panel lives. If the SAP Fiori icon is not visible, ensure the SAP Fiori Tools extension is installed and enabled in VS Code.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "step": 1,
  "action": "click",
  "target": {
    "type": "activity_bar_icon",
    "label": "SAP Fiori",
    "icon_path": "../Getting-Started-with-SAP-Fiori-Tools/images/SAP_Fiori_tools_Wrench_Pencil_9d6b0f8.png"
  },
  "notes": [
    "If the icon is not present: install/enable the SAP Fiori Tools extension in VS Code.",
    "Intended result: SAP Fiori activity view opens in the Side Bar."
  ]
}
```

**STEP**: 2 — Expand the Information Panel

**DESCRIPTION**: Within the SAP Fiori activity view, locate and expand the information panel. Expanding reveals release notes, helpful links (learning, tutorials), and customer support information.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "step": 2,
  "action": "expand",
  "target": {
    "type": "side_panel_section",
    "view": "SAP Fiori",
    "section_label": "Information",
    "expected_contents": [
      "Release notes",
      "Learning links",
      "Tutorials",
      "Support information"
    ]
  },
  "notes": [
    "Result: Information panel contents become visible/accessible.",
    "Use this step when automating UI tests or creating scripts to surface release/support info to users."
  ]
}
```

**STEP**: Helpful file path reference

**DESCRIPTION**: Reference to the SAP Fiori Tools activity icon image used in documentation.

**LANGUAGE**: plaintext

**CODE**:
```text
Image path: ../Getting-Started-with-SAP-Fiori-Tools/images/SAP_Fiori_tools_Wrench_Pencil_9d6b0f8.png
```
--------------------------------

**TITLE**: Managing SAP System Connections in VS Code (SAP Systems Extension)

**INTRODUCTION**: Save and manage connection details for remote SAP systems in Visual Studio Code using the SAP Systems extension. This guide covers installing the extension, adding/updating/removing system entries (via UI and settings.json), connecting, and recommended practices for securing credentials.

**TAGS**: fiori-tools, sap, vscode, sap-systems, connection, abap

**STEP**: 1 — Install the SAP Systems extension

**DESCRIPTION**: Install the SAP Systems extension from the Marketplace. You can install from the Marketplace link or via the VS Code CLI. Installation adds the "SAP Systems" view and commands to the Command Palette.

**LANGUAGE**: Shell

**CODE**:
```shell
# VS Code CLI install (recommended for automation)
code --install-extension SAPOSS.sap-ux-sap-systems-ext

# Marketplace URL (open in browser)
# https://marketplace.visualstudio.com/items?itemName=SAPOSS.sap-ux-sap-systems-ext
```

**STEP**: 2 — Add a system via the SAP Systems view (UI)

**DESCRIPTION**: Use the extension's SAP Systems view to add a new connection interactively. Open the view: View -> Explorer -> SAP Systems (or use the Command Palette). Click "Add System" or "New Connection" and fill in host, system number, client, user, and optional description. Prefer not to store plaintext passwords; use environment variables or OS keychain when possible.

**LANGUAGE**: none

**CODE**:
```none
# UI steps (no code)
1. Open Command Palette: Ctrl/Cmd+Shift+P
2. Run: "SAP Systems: Show View" (or open "SAP Systems" side panel)
3. Click "Add System" or the plus icon
4. Fill fields: Description, Host, System Number, Client, User, Auth Method, etc.
5. Save the connection
```

**STEP**: 3 — Add/edit connections using settings.json

**DESCRIPTION**: You can store connection entries in VS Code settings.json for reproducible configuration. Edit the User or Workspace settings.json file (paths below). The extension accepts an array of connection objects — example fields shown below are commonly used: id, description, host, systemNumber, client, user, authMethod, and optional useSSL. For credentials, reference environment variables instead of storing passwords.

- User settings.json paths:
  - Windows: %APPDATA%\Code\User\settings.json
  - macOS: ~/Library/Application Support/Code/User/settings.json
  - Linux: ~/.config/Code/User/settings.json

**LANGUAGE**: JSON

**CODE**:
```json
{
  // Example key used by the extension — adjust if your extension uses a different key
  "sapSystems.connections": [
    {
      "id": "DEV01",
      "description": "Development System DEV01",
      "host": "dev01.sap.example.com",
      "systemNumber": "00",
      "client": "100",
      "user": "DEVELOPER",
      "authMethod": "password",         // "password" | "sso" | "none"
      "useSSL": true
      // DO NOT store "password" here; use environment variables or OS keychain
    },
    {
      "id": "QA01",
      "description": "QA System QA01",
      "host": "qa01.sap.example.com",
      "systemNumber": "01",
      "client": "200",
      "user": "QAUSER",
      "authMethod": "sso",
      "useSSL": false
    }
  ]
}
```

**STEP**: 4 — Use environment variables for passwords (recommended)

**DESCRIPTION**: Reference environment variables in your workflow to avoid plaintext passwords in settings.json. Use VS Code's variable substitution pattern in tasks/launch or use the extension’s support for reading env vars. Example below shows how to document credentials without embedding them.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sapSystems.connections": [
    {
      "id": "DEV01",
      "description": "Dev system (password from env)",
      "host": "dev01.sap.example.com",
      "systemNumber": "00",
      "client": "100",
      "user": "DEVELOPER",
      "authMethod": "password",
      "passwordEnv": "SAP_DEV01_PASSWORD"   // instruct the extension / scripts to read this env var
    }
  ]
}
```

**STEP**: 5 — Connect and authenticate

**DESCRIPTION**: After adding the system, connect from the SAP Systems view or the Command Palette. If using environment-based credentials, ensure the environment variable is set in the shell that launches VS Code or configured in your OS keychain integration.

**LANGUAGE**: none

**CODE**:
```none
# Connect using Command Palette
1. Ctrl/Cmd+Shift+P -> "SAP Systems: Connect"
2. Select the target system (e.g., DEV01)
3. Enter password if prompted (or use SSO if configured)
```

**STEP**: 6 — Update or remove a saved connection

**DESCRIPTION**: Edit the connection entry in the SAP Systems view (right-click -> Edit / Remove) or update/remove the object from settings.json and reload VS Code. Removing sensitive data from settings.json is recommended after use.

**LANGUAGE**: none

**CODE**:
```none
# To remove via settings.json:
1. Open settings.json
2. Remove the corresponding object from "sapSystems.connections"
3. Save file and reload VS Code

# To remove via UI:
1. Open SAP Systems view
2. Right-click the connection -> Remove
```

**STEP**: 7 — References and best practices

**DESCRIPTION**: Use the Marketplace page for extension-specific instructions, updates, and exact configuration keys. Prefer SSO or the OS keychain over storing passwords. Keep workspace settings under source control only when they do not include secrets.

**LANGUAGE**: none

**CODE**:
```none
# Official extension page:
https://marketplace.visualstudio.com/items?itemName=SAPOSS.sap-ux-sap-systems-ext

# Best practices:
- Use SSO / OS keychain for authentication where supported
- Use environment variables for passwords in automation
- Store non-sensitive connection metadata in settings.json
```
--------------------------------

**TITLE**: Manage OData Service and Annotation Files for SAP Fiori Tools (Add / Refresh / Delete / Annotation Manager)

**INTRODUCTION**: Practical, code-focused instructions and examples for managing local copies of OData service metadata and annotation files in SAP Fiori tools projects. Includes manifest.json examples, local folder layout, sample metadata/annotation XML snippets, and ui5 YAML examples for routing and mockserver entries. Use these examples to script, validate, or programmatically update project files when adding, refreshing, deleting services or managing annotation file hierarchy and activation.

**TAGS**: fiori-tools, odata, annotations, manifest.json, ui5, metadata.xml, annotation-manager, mockserver

STEP: Add a Service to the Project (UI flow + manifest.json example)

DESCRIPTION: Use Service Manager (right-click manifest.json → Service Manager → Add Service) and then add the service. The UI will add a dataSources entry in manifest.json and local files: metadata.xml and backend annotation files into the project folder. This snippet shows how the service appears in manifest.json and where local files should be stored.

LANGUAGE: JSON

CODE:
```json
{
  "sap.app": { "id": "my.app" },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "Z_MY_SERVICE"
      }
    },
    "dataSources": {
      "Z_MY_SERVICE": {
        "uri": "/sap/opu/odata/sap/Z_MY_SERVICE_SRV/",
        "type": "OData",
        "settings": {
          "odataVersion": "2.0",
          "annotations": [
            "annotations/backend_annotations.xml",
            "annotations/local_annotations.xml"
          ]
        }
      }
    }
  }
}
```

CODE:
```text
Recommended local file layout (created by Service Manager):
webapp/
  localService/
    metadata.xml                    <-- service metadata copy
    mockdata/                        <-- mock data (if generated)
  annotations/
    backend_annotations.xml         <-- backend annotations fetched
    local_annotations.xml           <-- local annotation file created in project
```

STEP: Refresh a Service from the Server (UI flow + effect on files)

DESCRIPTION: Use Service Manager (right-click manifest.json → Service Manager → pencil icon → Refresh or Refresh & Save). Refresh updates webapp/localService/metadata.xml and backend annotations. Use Refresh to update only metadata/annotations. Use Refresh & Save to update metadata/annotations and also update UI5 YAML files (routing/mockserver) and generated UI YAML artifacts.

LANGUAGE: XML

CODE:
```xml
<!-- webapp/localService/metadata.xml (EDMX header example) -->
<?xml version="1.0" encoding="utf-8"?>
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
  <edmx:DataServices>
    <!-- EntityTypes, EntitySets, ComplexTypes, etc. -->
  </edmx:DataServices>
</edmx:Edmx>
```

STEP: Delete a Service (UI flow + manifest/ui5.yaml cleanup example)

DESCRIPTION: Use Service Manager (right-click manifest.json → Service Manager → Delete icon). This deletes webapp/localService/metadata.xml, related annotation XML files (if flagged by tool), mockdata, and removes backend routing / mockserver entries from ui5*.yaml files. After deletion, ensure manifest.json.dataSources entry and any model referencing it are removed.

LANGUAGE: JSON, YAML

CODE:
```json
// Before deletion: dataSources entry (remove this whole block when deleting service)
{
  "sap.ui5": {
    "dataSources": {
      "Z_MY_SERVICE": {
        "uri": "/sap/opu/odata/sap/Z_MY_SERVICE_SRV/",
        "type": "OData",
        "settings": { "annotations": ["annotations/backend_annotations.xml"] }
      }
    }
  }
}
```

CODE:
```yaml
# Example ui5.yaml entries that a tool removes when deleting a service:
# Remove backend routing and mockserver entries that point to the service metadata:
dev:
  backend:
    - path: /sap/opu/odata/sap/Z_MY_SERVICE_SRV
      localDir: webapp/localService
  mockserver:
    - source: webapp/localService/metadata.xml
      route: /sap/opu/odata/sap/Z_MY_SERVICE_SRV
```

STEP: Open the Annotation File Manager (UI flow + manifest annotation reference example)

DESCRIPTION: Open Annotation File Manager (right-click manifest.json → Annotation File Manager) and select target service. Annotation Manager edits the annotations list referenced in manifest.json (dataSources[].settings.annotations). You can also open Annotation Hierarchy from Annotation List View.

LANGUAGE: JSON

CODE:
```json
// manifest.json annotations reference: Annotation File Manager updates this array
{
  "sap.ui5": {
    "dataSources": {
      "Z_MY_SERVICE": {
        "settings": {
          "annotations": [
            "annotations/backend_annotations.xml",
            "annotations/local_annotations.xml",
            "annotations/extra_local.xml"
          ]
        }
      }
    }
  }
}
```

STEP: Create a Local Annotation File (UI flow + file example)

DESCRIPTION: Use Annotation File Manager (right-click manifest.json → Annotation File Manager → Create Local Annotation File). Fill in the required metadata and create the file. The new annotation file is added to webapp/annotations and referenced in manifest.json.settings.annotations.

LANGUAGE: XML

CODE:
```xml
<!-- webapp/annotations/local_annotations.xml (minimal annotation example) -->
<?xml version="1.0" encoding="UTF-8"?>
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
  <edmx:DataServices>
    <Schema xmlns="http://docs.oasis-open.org/odata/ns/edm" Namespace="Z_MY_SERVICE">
      <Annotations Target="Z_MY_SERVICE.Product">
        <!-- Example: add UI.SelectionFields or FieldGroup -->
        <Annotation Term="UI.HeaderInfo">
          <Record>
            <PropertyValue Property="TypeName" String="Product"/>
          </Record>
        </Annotation>
      </Annotations>
    </Schema>
  </edmx:DataServices>
</edmx:Edmx>
```

STEP: Change the Hierarchy (Ordering) of Local Annotation Files

DESCRIPTION: Use Move Up / Move Down in Annotation File Hierarchy. The Annotation File Manager shows the highest-ranked file at the bottom to mimic manifest.json precedence rules. The manifest annotations array order determines precedence: later entries override earlier ones.

LANGUAGE: JSON

CODE:
```json
// Example: manifest.json annotations order - last item has highest precedence (overrides earlier entries)
{
  "sap.ui5": {
    "dataSources": {
      "Z_MY_SERVICE": {
        "settings": {
          "annotations": [
            "annotations/ann_global.xml",   // lower precedence
            "annotations/ann_local.xml"     // higher precedence (applies last)
          ]
        }
      }
    }
  }
}
```

STEP: Activate or Deactivate Local Annotation Files

DESCRIPTION: In Annotation File Manager, toggle the Active checkbox. Activated files are included in manifest.json (in settings.annotations). Deactivated files remain in the project folder but are removed from manifest.json and are not part of the annotation hierarchy.

LANGUAGE: JSON, Shell

CODE:
```json
// Active annotation files are referenced in manifest.json:
{
  "sap.ui5": {
    "dataSources": {
      "Z_MY_SERVICE": {
        "settings": {
          "annotations": [
            "annotations/ann_global.xml",
            "annotations/ann_local.xml"
          ]
        }
      }
    }
  }
}
```

CODE:
```bash
# Deactivating an annotation (example manual step): remove reference from manifest.json annotations array
# File still present in project:
ls webapp/annotations
# webapp/annotations/ann_local.xml
# webapp/annotations/ann_global.xml
```

STEP: Delete an Annotation File (UI flow + manual deletion example)

DESCRIPTION: Select the active checkbox in Annotation File Manager and click Delete (wastebasket). This removes the annotation file from the project and removes its reference from manifest.json.settings.annotations. If you prefer to delete manually, delete the file from webapp/annotations and remove its manifest.json reference.

LANGUAGE: Shell, JSON

CODE:
```bash
# Manual deletion example (project root):
rm webapp/annotations/ann_local.xml
```

CODE:
```json
// After deletion: remove reference from manifest.json annotations array
{
  "sap.ui5": {
    "dataSources": {
      "Z_MY_SERVICE": {
        "settings": {
          "annotations": [
            "annotations/ann_global.xml"
          ]
        }
      }
    }
  }
}
```

STEP: Important Notes & Limitations (preserve constraints)

DESCRIPTION: Quick reminders to preserve correct behavior and avoid confusion:
- Adding, refreshing, and deleting services via Service Manager is supported only for SAP Fiori elements overview page floorplan and freestyle SAPUI5 projects.
- Managing annotations via Annotation File Manager applies to OData services only. Not applicable to CAP CDS.
- Always refresh local metadata and annotation files after backend changes to avoid discrepancies in Application Modeler and Annotation LSP.
- When refreshing with "Refresh & Save", UI YAML files (ui5*.yaml) are updated to reflect new backend routing or mockserver changes.

LANGUAGE: text

CODE:
```text
Notes:
- Refresh local metadata after backend schema/annotation changes to avoid missing properties in Application Modeler.
- The highest-ranked file in the Annotation File Manager UI appears at the bottom of the list (manifest.json precedence).
```
--------------------------------

**TITLE**: Project Functions (SAP Fiori tools) — Manifest + Integration Examples

**INTRODUCTION**: This document lists the SAP Fiori tools "Project Functions" and provides code-focused, reusable examples for integrating, exposing, and automating access to their documentation files (markdown). Use the manifest and snippets to build VS Code commands, Node.js utilities, CLI scripts, or static site generators that surface these project functions to users or other tools.

**TAGS**: fiori-tools, SAP, vscode, nodejs, docs, automation, cap, metadata

STEP: Create a manifest mapping project functions to documentation files

DESCRIPTION: Create a single JSON manifest that enumerates the available project functions and the corresponding markdown filenames. Store this manifest in your repository (e.g., docs/project-functions-manifest.json). This manifest is the canonical source used by subsequent examples.

LANGUAGE: JSON

CODE:
```json
{
  "projectFunctions": [
    { "id": "informationPanel", "title": "Information Panel", "doc": "information-panel-a9a6c4b.md" },
    { "id": "applicationInformation", "title": "Application Information", "doc": "application-information-c3e0989.md" },
    { "id": "reuseLibrarySupport", "title": "Reuse Library Support", "doc": "reuse-library-support-6e99fbb.md" },
    { "id": "dataEditor", "title": "Data Editor", "doc": "data-editor-18e43b5.md" },
    { "id": "deleteCapApplication", "title": "Deleting an Application in CAP Project", "doc": "deleting-an-application-in-cap-project-709f838.md" },
    { "id": "environmentCheck", "title": "Environment Check", "doc": "environment-check-75390cf.md" },
    { "id": "managingSapSystemConnections", "title": "Managing SAP System Connections", "doc": "managing-sap-system-connections-78a82b6.md" },
    { "id": "managingServiceAndAnnotationFiles", "title": "Managing Service and Annotation Files", "doc": "managing-service-and-annotation-files-8182ff3.md" },
    { "id": "projectValidation", "title": "Project Validation", "doc": "project-validation-6f3c737.md" },
    { "id": "viewingServiceMetadata", "title": "Viewing Service Metadata", "doc": "viewing-service-metadata-e369c2c.md" },
    { "id": "uiServiceGeneration", "title": "UI Service Generation", "doc": "ui-service-generation-1a7aad3.md" }
  ]
}
```

STEP: Node.js utility — open a doc by function id

DESCRIPTION: Read the manifest, resolve the markdown path (relative to the docs folder), and open the file in the default editor or print its path. Replace "docs" with your docs folder path.

LANGUAGE: JavaScript (Node.js)

CODE:
```javascript
// scripts/openProjectFunction.js
const fs = require('fs');
const path = require('path');
const { exec } = require('child_process');

const MANIFEST_PATH = path.join(__dirname, '..', 'docs', 'project-functions-manifest.json'); // update if needed
const DOCS_DIR = path.join(__dirname, '..', 'docs');

const functionId = process.argv[2];
if (!functionId) {
  console.error('Usage: node openProjectFunction.js <functionId>');
  process.exit(1);
}

const manifest = JSON.parse(fs.readFileSync(MANIFEST_PATH, 'utf8'));
const entry = manifest.projectFunctions.find(f => f.id === functionId);
if (!entry) {
  console.error('Function id not found:', functionId);
  process.exit(2);
}

const docPath = path.join(DOCS_DIR, entry.doc);
if (!fs.existsSync(docPath)) {
  console.error('Doc file not found:', docPath);
  process.exit(3);
}

// Cross-platform open command; adjust as necessary
const openCommand = process.platform === 'win32' ? `start "" "${docPath}"` : process.platform === 'darwin' ? `open "${docPath}"` : `xdg-open "${docPath}"`;
exec(openCommand, err => {
  if (err) console.error('Failed to open:', err);
});
```

STEP: Add VS Code commands (package.json) that map to each project function

DESCRIPTION: Add command definitions to package.json for a VS Code extension. Commands use stable ids and titles. Use activationEvents to activate on command call. This snippet is minimal — ensure you have the rest of the extension scaffold.

LANGUAGE: JSON

CODE:
```json
// package.json (fragment)
{
  "contributes": {
    "commands": [
      {
        "command": "fioriTools.openFunction.informationPanel",
        "title": "Fiori Tools: Open Information Panel"
      },
      {
        "command": "fioriTools.openFunction.applicationInformation",
        "title": "Fiori Tools: Open Application Information"
      }
      // ... repeat for other functions or generate dynamically from manifest
    ]
  },
  "activationEvents": [
    "onCommand:fioriTools.openFunction.informationPanel",
    "onCommand:fioriTools.openFunction.applicationInformation"
    // ... add others
  ]
}
```

STEP: VS Code extension command handler — open markdown from manifest

DESCRIPTION: Register commands in your extension entry (extension.ts) that read the manifest and open the associated markdown file in the editor. This example shows pattern for any command; register one per function or write a generic dispatcher.

LANGUAGE: TypeScript

CODE:
```typescript
// src/extension.ts
import * as vscode from 'vscode';
import * as fs from 'fs';
import * as path from 'path';

type Manifest = { projectFunctions: { id: string; title: string; doc: string }[] };

export function activate(context: vscode.ExtensionContext) {
  const manifestPath = path.join(context.extensionPath, 'docs', 'project-functions-manifest.json');
  const manifest: Manifest = JSON.parse(fs.readFileSync(manifestPath, 'utf8'));

  function registerFunctionCommand(funcId: string) {
    const disposable = vscode.commands.registerCommand(`fioriTools.openFunction.${funcId}`, async () => {
      const entry = manifest.projectFunctions.find(f => f.id === funcId);
      if (!entry) {
        vscode.window.showErrorMessage(`Project function not found: ${funcId}`);
        return;
      }
      const docPath = path.join(context.extensionPath, 'docs', entry.doc);
      try {
        const doc = await vscode.workspace.openTextDocument(docPath);
        await vscode.window.showTextDocument(doc, { preview: false });
      } catch (err) {
        vscode.window.showErrorMessage(`Failed to open ${entry.title}: ${err}`);
      }
    });
    context.subscriptions.push(disposable);
  }

  // Register commands for all functions from manifest
  for (const f of manifest.projectFunctions) {
    registerFunctionCommand(f.id);
  }
}

export function deactivate() {}
```

STEP: Bash / CLI listing script (prints available functions)

DESCRIPTION: Use jq to parse the manifest and print a simple list. Useful for CI or simple shell tooling.

LANGUAGE: Bash

CODE:
```bash
#!/usr/bin/env bash
MANIFEST="docs/project-functions-manifest.json"
if ! command -v jq >/dev/null 2>&1; then
  echo "jq is required. Install jq: https://stedolan.github.io/jq/"
  exit 1
fi

jq -r '.projectFunctions[] | "- \(.id): \(.title) -> \(.doc)"' "$MANIFEST"
```

STEP: Static HTML index generator from manifest

DESCRIPTION: Generate a simple HTML index file that links to each markdown doc (useful when serving docs as static site). Adapt the link path if your static site generator expects different routes.

LANGUAGE: JavaScript (Node.js)

CODE:
```javascript
// scripts/generateDocsIndex.js
const fs = require('fs');
const path = require('path');

const docsDir = path.join(__dirname, '..', 'docs');
const manifestPath = path.join(docsDir, 'project-functions-manifest.json');
const outPath = path.join(docsDir, 'index.html');

const manifest = JSON.parse(fs.readFileSync(manifestPath, 'utf8'));
const rows = manifest.projectFunctions.map(f =>
  `<li><a href="./${f.doc}" target="_blank" rel="noopener noreferrer">${f.title}</a></li>`
).join('\n');

const html = `<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Project Functions</title>
</head>
<body>
  <h1>SAP Fiori tools — Project Functions</h1>
  <ul>
    ${rows}
  </ul>
</body>
</html>`;

fs.writeFileSync(outPath, html, 'utf8');
console.log('Generated', outPath);
```

STEP: Reference — Canonical list of project function filenames

DESCRIPTION: Keep this exact list in your repo (docs folder) so automation or UI code can load the files. Filenames must match.

LANGUAGE: JSON

CODE:
```json
{
  "files": [
    "information-panel-a9a6c4b.md",
    "application-information-c3e0989.md",
    "reuse-library-support-6e99fbb.md",
    "data-editor-18e43b5.md",
    "deleting-an-application-in-cap-project-709f838.md",
    "environment-check-75390cf.md",
    "managing-sap-system-connections-78a82b6.md",
    "managing-service-and-annotation-files-8182ff3.md",
    "project-validation-6f3c737.md",
    "viewing-service-metadata-e369c2c.md",
    "ui-service-generation-1a7aad3.md"
  ]
}
```
--------------------------------

**TITLE**: Project Validation for SAP Fiori Tools

**INTRODUCTION**: This document describes how to run and reproduce the "Fiori: Validate Project" checks that the Fiori Tools extension performs after project generation. It lists each validation step, required files, how to run the checks manually or programmatically, and example snippets to run/extend the validations and produce the markdown report and VS Code Problems diagnostics.

**TAGS**: fiori-tools, validation, vscode, eslint, ux-specification, annotations, manifest, package.json, ui5.yaml

**STEP**: 1 — Invoke validation (interactive in VS Code)

**DESCRIPTION**: Run the built-in command "Fiori: Validate Project" from the VS Code Command Palette. If multiple projects exist in the workspace, use the quick pick to select a project root for validation.

**LANGUAGE**: Text

**CODE**:
```text
Open Command Palette: (Windows/Linux) Ctrl+Shift+P  (macOS) CMD+Shift+P
Type and run: Fiori: Validate Project
Select the project from the quick pick list if multiple projects are in the workspace.
```

**STEP**: 2 — Programmatic invocation from an extension (optional)

**DESCRIPTION**: Trigger the validation command from a VS Code extension programmatically. Use vscode.commands.executeCommand with the extension command id. Replace the command id below with the actual id if different in your environment.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
import * as vscode from 'vscode';

export function activate(context: vscode.ExtensionContext) {
  // Example: programmatically open the command palette or execute the validation command
  // Replace 'fiori-tools.validateProject' with the actual command id if required.
  vscode.commands.executeCommand('fiori-tools.validateProject')
    .then(() => console.log('Triggered Fiori: Validate Project'))
    .catch(err => console.error('Failed to invoke validation:', err));
}
```

**STEP**: 3 — Project step: verify required files and mandatory fields

**DESCRIPTION**: Validate presence of required project files and that mandatory fields are present in JSON/YAML files. Typical required files: package.json, manifest.json, ui5.yaml, changes/ (change files). This example implements a configurable Node.js check that asserts file existence and presence of required JSON keys.

**LANGUAGE**: JavaScript (Node.js)

**CODE**:
```javascript
// scripts/validate-project-files.js
const fs = require('fs');
const path = require('path');

function fileExists(projectRoot, relativePath) {
  return fs.existsSync(path.join(projectRoot, relativePath));
}

function readJson(projectRoot, relativePath) {
  const p = path.join(projectRoot, relativePath);
  return JSON.parse(fs.readFileSync(p, 'utf8'));
}

function validateProjectFiles(projectRoot) {
  const requiredFiles = ['package.json', 'manifest.json', 'ui5.yaml'];
  const missing = requiredFiles.filter(f => !fileExists(projectRoot, f));

  if (missing.length) {
    return { valid: false, errors: missing.map(f => `Missing file: ${f}`) };
  }

  // Example mandatory fields check (customize per project requirements)
  const pkg = readJson(projectRoot, 'package.json');
  const manifest = readJson(projectRoot, 'manifest.json');

  const errors = [];
  if (!pkg.name) errors.push('package.json: missing "name"');
  if (!pkg.version) errors.push('package.json: missing "version"');

  // Example: manifest.specific mandatory checks (adjust to your spec)
  if (!manifest['sap.app'] || !manifest['sap.app'].id) {
    errors.push('manifest.json: missing sap.app/id');
  }
  if (!manifest['sap.app'] || !manifest['sap.app'].applicationVersion) {
    errors.push('manifest.json: missing sap.app/applicationVersion');
  }

  return { valid: errors.length === 0, errors };
}

// Usage:
const projectRoot = process.argv[2] || process.cwd();
const result = validateProjectFiles(projectRoot);
if (!result.valid) {
  console.error('Project validation failed:', result.errors);
  process.exit(1);
}
console.log('Project files validation passed.');
```

**STEP**: 4 — Annotation step: validate XML annotation files

**DESCRIPTION**: Locate annotation XML files (commonly under webapp/annotations or app-specific folders) and validate them using an XML parser/validator. The Fiori Tools validation uses the same modules as the XML annotation language server extension — here is an example validation using a robust XML parser to parse and report syntax errors. For schema-based validation, wire in your XSD or language-server validator.

**LANGUAGE**: JavaScript (Node.js)

**CODE**:
```javascript
// scripts/validate-annotations.js
const fs = require('fs');
const path = require('path');
const { XMLParser } = require('fast-xml-parser');

function findAnnotationFiles(dir, out = []) {
  if (!fs.existsSync(dir)) return out;
  for (const entry of fs.readdirSync(dir)) {
    const full = path.join(dir, entry);
    if (fs.statSync(full).isDirectory()) {
      findAnnotationFiles(full, out);
    } else if (full.endsWith('.annotation.xml') || full.endsWith('.xml')) {
      out.push(full);
    }
  }
  return out;
}

function validateXml(filePath) {
  const xml = fs.readFileSync(filePath, 'utf8');
  const parser = new XMLParser({ ignoreAttributes: false, allowBooleanAttributes: true });
  try {
    parser.parse(xml);
    return { file: filePath, valid: true };
  } catch (err) {
    return { file: filePath, valid: false, error: err.message };
  }
}

const projectRoot = process.argv[2] || process.cwd();
const annotationFiles = findAnnotationFiles(path.join(projectRoot, 'webapp'));
const results = annotationFiles.map(validateXml);
const errors = results.filter(r => !r.valid);
if (errors.length) {
  console.error('Annotation validation errors:', errors);
  process.exit(1);
}
console.log('All annotation XML files are syntactically valid.');
```

**STEP**: 5 — Specification step: validate manifest.json and change files with @sap/ux-specification

**DESCRIPTION**: Use the @sap/ux-specification module to import the project and retrieve configuration/structure validation messages. The module is used by Fiori Tools to detect invalid configuration entries in manifest.json and the changes folder. Install the module and run an import/validation routine. Adjust API calls to reflect the module's exported functions if they differ.

**LANGUAGE**: JavaScript (Node.js)

**CODE**:
```bash
# Install the specification package
npm install --save-dev @sap/ux-specification
```

```javascript
// scripts/validate-specification.js
const path = require('path');
const projectRoot = process.argv[2] || process.cwd();

async function run() {
  // Example usage pattern: importProject is used in the Fiori tools doc.
  // Verify the real API in @sap/ux-specification and adapt accordingly.
  const uxSpec = require('@sap/ux-specification');

  // Hypothetical API: importProject(projectPath) => { messages: [] }
  // Replace importProject with the actual method from the package.
  if (typeof uxSpec.importProject === 'function') {
    const result = await uxSpec.importProject(projectRoot);
    // result.messages array contains parsed configuration errors/warnings
    const errors = (result.messages || []).filter(m => m.severity === 'error');
    if (errors.length) {
      console.error('Specification validation errors:', errors);
      process.exit(1);
    }
    console.log('Specification validation passed.');
  } else {
    console.warn('Check @sap/ux-specification API and adapt the call accordingly.');
    process.exit(0);
  }
}

run().catch(err => {
  console.error('Specification validation failed:', err);
  process.exit(1);
});
```

**STEP**: 6 — ESLint step: run eslint if installed and configured

**DESCRIPTION**: If eslint exists as a dependency in package.json, the validation runs eslint against the project using the project's configuration and the eslint-plugin-fiori-custom rules. You can enable eslint support in the SAP Fiori application generator via Advanced Options. Example scripts and package.json snippets to ensure eslint runs and includes eslint-plugin-fiori-custom.

**LANGUAGE**: JSON, JavaScript

**CODE**:
```json
// Example package.json partial (devDependencies & scripts)
{
  "devDependencies": {
    "eslint": "^8.0.0",
    "eslint-plugin-fiori-custom": "^1.0.0"
  },
  "scripts": {
    "lint": "eslint \"webapp/**/*.{js,xml,json}\" --ext .js,.xml,.json"
  }
}
```

```bash
# Run eslint via npm script or npx
npm run lint
# or
npx eslint "webapp/**/*.{js,xml,json}" --ext .js,.xml,.json
```

**STEP**: 7 — Generate Markdown report and publish Problems

**DESCRIPTION**: After all checks, produce a Markdown (.md) report and create VS Code diagnostics to show issues in the Problems tab. Below is an example that writes a report to .sap/fiori-tools/validation-report.md and posts diagnostics via the VS Code API.

**LANGUAGE**: TypeScript / JavaScript

**CODE**:
```typescript
// scripts/write-report-and-diagnostics.ts (run as part of your validation flow)
import * as vscode from 'vscode';
import * as fs from 'fs';
import * as path from 'path';

function writeMarkdownReport(projectRoot: string, summary: string, details: string[]) {
  const reportDir = path.join(projectRoot, '.sap', 'fiori-tools');
  fs.mkdirSync(reportDir, { recursive: true });
  const reportPath = path.join(reportDir, 'validation-report.md');
  const content = `# Project Validation Report\n\n${summary}\n\n## Details\n\n${details.map(d => `- ${d}`).join('\n')}\n`;
  fs.writeFileSync(reportPath, content, 'utf8');
  return reportPath;
}

function publishDiagnostics(reportPath: string, issues: { file: string; message: string; line?: number }[]) {
  const diagnosticsCollection = vscode.languages.createDiagnosticCollection('fiori-validation');
  issues.forEach(issue => {
    const uri = vscode.Uri.file(issue.file);
    const range = new vscode.Range(
      new vscode.Position((issue.line || 1) - 1, 0),
      new vscode.Position((issue.line || 1) - 1, 1000)
    );
    const diag = new vscode.Diagnostic(range, issue.message, vscode.DiagnosticSeverity.Error);
    diagnosticsCollection.set(uri, [diag]);
  });

  // Optionally open the generated report in the editor
  vscode.workspace.openTextDocument(vscode.Uri.file(reportPath)).then(doc => {
    vscode.window.showTextDocument(doc, { preview: false });
  });
}

// Example usage:
const projectRoot = vscode.workspace.rootPath || process.cwd();
// summary/details would be produced by previous validation steps
const reportPath = writeMarkdownReport(projectRoot, 'Validation completed with errors', ['manifest.json: missing sap.app/id']);
publishDiagnostics(reportPath, [{ file: path.join(projectRoot, 'manifest.json'), message: 'Missing sap.app/id', line: 1 }]);
```

**STEP**: 8 — Enable ESLint support in generated projects

**DESCRIPTION**: To ensure future projects include eslint and eslint-plugin-fiori-custom rules, enable the ESLint option in the SAP Fiori application generator Advanced Options. For generated projects, confirm the package.json devDependencies include eslint and eslint-plugin-fiori-custom as shown above.

**LANGUAGE**: Text

**CODE**:
```text
Follow generator: Advanced Options -> Enable ESLint support
See generator docs: Additional Configuration (link in the generator docs)
```

**NOTES / FILES / PATHS**:
- Files validated: package.json, manifest.json, ui5.yaml, webapp/ (annotations, changes), changes/ folder.
- Report file example path: <projectRoot>/.sap/fiori-tools/validation-report.md
- ESLint plugin: eslint-plugin-fiori-custom (used by the eslint validation step)
- Specification module: @sap/ux-specification (used to import project and produce invalid configuration messages)
--------------------------------

**TITLE**: Reuse Library Support — Create, Reference, and Deploy SAP Fiori Reusable Libraries

**INTRODUCTION**: This document explains how to create a reusable UI5 library in your workspace, add a reference to that library from an SAP Fiori application (so the app can consume the library), and prepare the library project for deployment using SAP Fiori tools. It contains exact command names, file paths updated by the tooling, and safe example snippets to include in your project files.

**TAGS**: fiori-tools, reuse, reusable-library, ui5, sapui5, manifest, ui5.yaml, ui5-local.yaml, ABAP, VSCode, BAS

STEP: Create a new reusable library with the Fiori Reusable Library Generator

DESCRIPTION: Use the Fiori Tools generator to scaffold a new reusable UI5 library in your workspace. The generator asks for module name, namespace, UI5 minimum version, and library folder path. Optionally create the library together with an OData service.

LANGUAGE: N/A

CODE:
```text
Command (VS Code or Business Application Studio):
1) Open Command Palette: (CMD/CTRL + Shift + P)
2) Run: Fiori: Open Reusable Library Generator

Inputs required by the generator:
- Library module name (e.g. mylib)
- Namespace (e.g. mycompany)
- Minimum SAPUI5 version (e.g. 1.96)
- Library Folder Path (select a folder in workspace; the generator creates <namespace>/<module> folder)
- Optionally: generate with OData service
```

STEP: Example resulting library folder structure

DESCRIPTION: Example layout created by the generator. Use this as the expected workspace path to reference the library from applications.

LANGUAGE: N/A

CODE:
```text
Workspace structure (example):
/workspace
  /mycompany
    /mylib            <-- generated library folder (namespace + module)
      ui5.yaml        <-- library project file created by generator
      package.json
      src/
      library.js
      controls/
      test/
```

STEP: Library project ui5.yaml (recommended minimal example)

DESCRIPTION: Example minimal ui5.yaml for a library project. This file is created by the generator and identifies the project as a UI5 library.

LANGUAGE: YAML

CODE:
```yaml
specVersion: '2.1'
type: library
metadata:
  name: mycompany.mylib
```

STEP: Add a reference to reuse a library (VS Code command)

DESCRIPTION: Add a workspace reference so an SAP Fiori application consumes the reusable library. The Fiori Tools command updates these files in your app project: ui5.yaml, ui5-local.yaml, manifest.json.

LANGUAGE: N/A

CODE:
```text
Command (VS Code or Business Application Studio):
1) Open Command Palette: (CMD/CTRL + Shift + P)
2) Run: Fiori: Add Reference to SAP Fiori Reusable Libraries

Prompts and selections:
- Project Folder Path: select the SAP Fiori application project in your workspace
- Reusable Library Source: choose "Workspace"
- Select one or more reusable libraries/components from the presented list
- Click Finish

Files that will be updated by the tool:
- ui5.yaml
- ui5-local.yaml
- manifest.json
```

STEP: manifest.json — add library dependency (example)

DESCRIPTION: The Fiori Tools will update your application's manifest.json to declare the library as a dependency. This is the manifest fragment the application requires to load the library at runtime.

LANGUAGE: JSON

CODE:
```json
// manifest.json (partial)
{
  "sap.ui5": {
    "dependencies": {
      "libs": {
        "mycompany.mylib": {}
      }
    }
  }
}
```

STEP: ui5-local.yaml — map the local library project (example)

DESCRIPTION: The tooling adds a local mapping for the reusable library so the UI5 tooling can resolve the workspace library during development. This example shows the typical project mapping entry that points to the library folder in your workspace.

LANGUAGE: YAML

CODE:
```yaml
# ui5-local.yaml (partial example)
projects:
  mycompany.mylib:
    path: ../mycompany/mylib    # relative path from the application project to the library project
    type: library
```

STEP: ui5.yaml (application) — workspace/local project reference (example)

DESCRIPTION: The application ui5.yaml may get a project reference or local dependency entry so build/tools include the library. The exact entry may vary by project and tooling version; this example shows a safe pattern: a referenced local project entry pointing to the library.

LANGUAGE: YAML

CODE:
```yaml
# ui5.yaml (application - partial example)
specVersion: '2.1'
type: application
metadata:
  name: mycompany.myapp
# The tooling will add/maintain a local project reference to allow use of the library during build and serve.
projects:
  - name: mycompany.mylib
    path: ../mycompany/mylib
    type: library
```

STEP: Deploying a Reuse Library Project using SAP Fiori Tools — prepare and migrate

DESCRIPTION: Steps to prepare a reusable library project for deployment to an ABAP environment using SAP Fiori tools. After migration and dependency installation, generate the ABAP deployment configuration and deploy.

LANGUAGE: N/A

CODE:
```text
Deployment preparation steps:
1) Add the Reuse Library project to your workspace (clone/import).
2) If a migration pop-up appears, click Start Migration.
3) Select the project(s) to migrate from the presented list, then click Start Migration again.
4) Wait for dependencies to install.

Next steps for ABAP deployment:
- Generate deployment configuration using: Generate Deployment Configuration ABAP
  (See docs: ../Deploying-an-Application/generate-deployment-configuration-abap-c06b9cb.md)
- Deploy the project to ABAP:
  (See docs: ../Deploying-an-Application/deployment-of-application-607014e.md#loio607014e278d941fda4440f92f4a324a6__abap)

Notes:
- The migration step and dependency installation are required before generating deployment configuration.
- The tooling will generate the files and metadata needed to deploy the library to an ABAP system.
```

STEP: Verification checklist after adding a library reference

DESCRIPTION: Quick checks to confirm the reference succeeded.

LANGUAGE: N/A

CODE:
```text
Verify:
- manifest.json contains the library under sap.ui5.dependencies.libs (see example above).
- ui5-local.yaml contains a projects entry mapping the library folder.
- ui5.yaml (application) reflects the local project reference (or the tool-managed setting).
- The library project (folder) exists in the workspace at the path referenced (e.g. ../mycompany/mylib).
- Start the app locally (Fiori: Serve or npm start) and confirm no 404s for library resources.
```

--------------------------------

**TITLE**: Generate a UI Service for an SAP Fiori Project (Fiori: Generate UI Service)

**INTRODUCTION**: Use the Fiori Tools UI Service Generator to create a UI service for your SAP Fiori project. This guide lists explicit, step-by-step UI actions and exact prompt text you must choose. Use this when automating or scripting IDE actions or when writing code that drives the generator.

**TAGS**: fiori-tools, ui-service, SAP Fiori, ABAP, CDS, Business Object Interface, VSCode, Business Application Studio, generator

**STEP**: 1 — Open the generator command

**DESCRIPTION**: Open the Command Palette in your IDE and run the Fiori Tools generator command.

**LANGUAGE**: Command

**CODE**:
```Command
// Open Command Palette
Keyboard shortcut (macOS): ⌘ + ⇧ + P
Keyboard shortcut (Windows/Linux): Ctrl + Shift + P

// Run the generator command
Command: "Fiori: Generate UI Service"
```

**STEP**: 2 — Select SAP system or destination

**DESCRIPTION**: Choose the backend connection source depending on your IDE. This determines where the generator queries business objects or CDS views.

**LANGUAGE**: text

**CODE**:
```text
If using Visual Studio Code:
  - Prompt: "Select a saved SAP system"
  - Action: Pick one of your saved SAP systems

If using SAP Business Application Studio:
  - Prompt: "Select a destination"
  - Action: Pick the configured destination
```

**STEP**: 3 — Choose service source type

**DESCRIPTION**: Select the type of object that defines the UI service surface.

**LANGUAGE**: text

**CODE**:
```text
Prompt: "Select source type"
Options:
  - "Business Object Interface"
  - "ABAP Core Data Service"
Action: Choose one of the two options
```

**STEP**: 4 — Select the object

**DESCRIPTION**: From the presented dropdown list, choose the specific Business Object Interface or CDS object to generate the UI service for.

**LANGUAGE**: text

**CODE**:
```text
Prompt: "Select an object"
Action: Pick the desired object from the dropdown list
```

**STEP**: 5 — Proceed to next screen

**DESCRIPTION**: Confirm the selected object and continue the generator flow.

**LANGUAGE**: text

**CODE**:
```text
UI element: "Next" button
Action: Click "Next"
```

**STEP**: 6 — Choose package

**DESCRIPTION**: Select the ABAP package where the generated service objects should be assigned.

**LANGUAGE**: text

**CODE**:
```text
Prompt: "Select a Package"
Action: Choose the target package for the UI service
```

**STEP**: 7 — Select transport request

**DESCRIPTION**: Choose the transport request that will contain the generated artifacts.

**LANGUAGE**: text

**CODE**:
```text
Prompt: "Select a Transport Request"
Action: Choose the transport request to use
```

**STEP**: 8 — (Optional) Enable Draft

**DESCRIPTION**: If the selected business object supports drafts, you will be prompted to enable draft support for the generated UI service. Only available when supported.

**LANGUAGE**: text

**CODE**:
```text
Prompt: "Draft Enabled"
Options: "Yes" or "No"
Note: This prompt appears only if the selected business object supports drafts.
Action: Select "Yes" to enable drafts (optional)
```

**STEP**: 9 — (Optional) Create an SAP Fiori application using the new service

**DESCRIPTION**: Optionally instruct the generator to scaffold an SAP Fiori application that consumes the newly created UI service. If chosen, the SAP Fiori Generator will launch automatically using the new service.

**LANGUAGE**: text

**CODE**:
```text
Prompt: "Do you want to create an SAP Fiori application with the newly generated service?"
Options: "Yes" or "No"
Action: Select "Yes" to automatically launch the SAP Fiori Generator and use the created service (optional)
```

**STEP**: 10 — Finish generation

**DESCRIPTION**: Complete the wizard to start the UI service generation process.

**LANGUAGE**: text

**CODE**:
```text
UI element: "Finish" button
Action: Click "Finish"
```

**STEP**: Result — Generated artifacts and behavior

**DESCRIPTION**: The generator creates the UI service artifacts in the selected package/transport. Generation can take time. If you chose to create an SAP Fiori application, the SAP Fiori Generator launches and binds the new service to the generated application.

**LANGUAGE**: text

**CODE**:
```text
Outcome:
  - UI service generated in the selected package/transport (may take several minutes)
  - If "Yes" for application creation: SAP Fiori Generator launches and creates an application using the newly generated service
```
--------------------------------

**TITLE**: Viewing Service Metadata with SAP Fiori tools - Service Modeler

**INTRODUCTION**: Instructions and actionable UI/keyboard steps to open and use the SAP Fiori tools Service Modeler in VS Code to visualize OData V2/V4 (.xml/.edmx) and CAP CDS services, inspect entities/properties, view annotations, manage services and local annotation files, and use search and settings.

**TAGS**: fiori-tools, service-modeler, odata-v2, odata-v4, edmx, metadata.xml, cds, annotations, vscode, fiori-elements

**STEP**: Launch Service Modeler — Command Palette

**DESCRIPTION**: Open the Service Modeler via VS Code Command Palette and select the SAP Fiori elements project and (if required) the specific service to visualize.

**LANGUAGE**: plaintext

**CODE**:
```plaintext
1. Press:
   - macOS: ⌘ (CMD) + ⇧ (Shift) + P
   - Windows/Linux: Ctrl + ⇧ (Shift) + P

2. Run the command:
   SAP Fiori tools: Service Modeler: Open Service Modeler

3. When prompted, select the SAP Fiori elements project in your workspace.
   - Note: If the project contains multiple services, select the desired service to visualize.
```

**STEP**: Launch Service Modeler — Folder Context Menu

**DESCRIPTION**: Open the Service Modeler from the Explorer by right-clicking inside an SAP Fiori elements project folder and using the Override Annotations context action.

**LANGUAGE**: plaintext

**CODE**:
```plaintext
1. In VS Code Explorer, right-click any folder within your SAP Fiori elements project.
2. Select: Override Annotations
   - This launches the Service Modeler for the service(s) in that project folder.
```

**STEP**: Launch Service Modeler — From metadata.xml Editor

**DESCRIPTION**: Open a service metadata file (metadata.xml / .edmx) in the editor and click the Annotations icon in the editor toolbar to open the Service Modeler for that metadata file.

**LANGUAGE**: HTML

**CODE**:
```html
<!-- Include SAP icons (used by UI elements in docs/examples) -->
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>

<!-- Example: annotation icon shown in editor toolbar -->
<span class="SAP-icons-V5"></span>  <!-- "Annotations" icon in editor -->
```

**STEP**: Files and Service Types Supported

**DESCRIPTION**: Supported service and metadata sources that the Service Modeler can visualize. Use these file patterns to detect services in a project.

**LANGUAGE**: plaintext

**CODE**:
```plaintext
Supported metadata sources:
- OData V2 / V4 metadata XML files: *.xml, *.edmx
  Common filename: metadata.xml
- CAP CDS services: *.cds (CAP service definitions)
- Local annotation files associated with services (annotations managed per service)

Typical paths in a project:
- <project-root>/webapp/metadata.xml
- <project-root>/srv/<service>.cds
- Local annotation files: <project-root>/webapp/annotations/*.xml
```

**STEP**: Visualize a Service — UI Behavior and Actions

**DESCRIPTION**: How to read and interact with the Service Modeler UI: entities, complex types, entity containers, keys, annotations, and namespace toggle.

**LANGUAGE**: plaintext

**CODE**:
```plaintext
UI expectations and actions:
- Entities and properties displayed in a list; expand an entity node to view its properties.
- Complex Types and Entity Containers sections can be expanded to view types and entity sets.
- Primary key properties show a Key icon.
- Targets (entities/properties) with annotations show an Annotations icon.
- Click a node to show related annotations in the side panel:
  - The side panel lists annotation files and the specific annotations that target the selected metadata node.
- Toggle namespace visibility: click the Settings (gear) icon in the Service Modeler toolbar to show/hide the namespace.
- Manage services:
  - Add new services to a project
  - Sync existing services to update metadata
- Manage annotations:
  - Add, override, or associate local annotation files to OData services in the project
```

**STEP**: Search — Find Entities, Properties, or Annotations

**DESCRIPTION**: Use the Service Modeler search in the toolbar to filter metadata and annotations. Search results behave differently depending on whether the match is a metadata target or an annotation term.

**LANGUAGE**: plaintext

**CODE**:
```plaintext
Search behavior:
- Enter a search phrase in the Service Modeler toolbar search input.
- If the search matches an entity name:
  - The entity and all child properties are displayed.
  - The annotation side panel is filtered to show annotations related to the displayed metadata.
- If the search matches an annotation term:
  - All metadata targets associated with that annotation are displayed and filtered in the list.
Examples:
- Searching "Country" matches entity "Country" -> expands entity and shows its properties + related annotations.
- Searching "UI.LineItem" matches annotation targets with that annotation term -> displays affected entities/properties.
```

**STEP**: Visual References (images)

**DESCRIPTION**: Image file references used in documentation and debugging UI positioning.

**LANGUAGE**: plaintext

**CODE**:
```plaintext
Documentation images (relative paths):
- images/Fiori_Tools_Service_Modeler_-_Toggle_Namespace_2864d9a.png
- images/Screenshot_Service_Modeler_Country_search_2b1e728.png
```
--------------------------------

**TITLE**: Adapt the UI with the SAPUI5 Adaptation Editor (fiori-tools)

**INTRODUCTION**: Use the Adaptation Editor to edit SAPUI5 adaptation projects at design time: change properties, add/remove fields/groups/sections, rename, move, combine, and preview changes. Includes instructions to switch SAPUI5 runtime version used by the editor.

**TAGS**: fiori-tools, SAPUI5, Adaptation Editor, ui5.yaml, manifest.appdescr_variant, adaptation, preview

**STEP**: 1 — Project files and editor entry point

**DESCRIPTION**: Locate the adaptation entry file and open the Adaptation Editor from your workspace (IDE). The adaptation entry file is in webapp/manifest.appdescr_variant. In supported IDEs (for example VS Code), right-click this file and choose "Open Adaptation Editor".

**LANGUAGE**: text

**CODE**:
```
Path: <project-root>/webapp/manifest.appdescr_variant
Action (VS Code): Right-click -> Open Adaptation Editor
```

**STEP**: 2 — Change SAPUI5 version used by the Adaptation Editor

**DESCRIPTION**: To preview your project in a different SAPUI5 version inside the Adaptation Editor, update the ui5.version property in the ui5.yaml at the project root. Change the version before launching the Adaptation Editor again.

**LANGUAGE**: YAML

**CODE**:
```yaml
# <project-root>/ui5.yaml
specVersion: '2.3'
metadata:
  name: your-project
ui5:
  version: "1.110.0"   # change this to desired SAPUI5 version before launching the Adaptation Editor
```

**STEP**: 3 — Editor layout and toolbar modes

**DESCRIPTION**: The Adaptation Editor contains: Outline pane (left), Canvas (center preview), Properties pane (right). Use toolbar modes:
- Navigation: preview and navigate the application
- Adaptation (Edit): select UI elements to modify properties
Switch device format (smartphone/tablet/desktop) to test responsive layout. Changes persist to the workspace when switching devices.

**LANGUAGE**: text

**CODE**:
```
Toolbar:
- Navigation (preview)
- Adaptation (edit) -> select elements -> Properties pane shows configurable properties
Device switch: Smartphone | Tablet | Desktop (changes saved to workspace)
```

**STEP**: 4 — Quick Actions (List Report / Object Page)

**DESCRIPTION**: For Fiori elements list report or object page floorplans, a Quick Actions list appears above Properties pane with common adaptation tasks. Available actions depend on floorplan and SAPUI5 version.

**LANGUAGE**: text

**CODE**:
```
Quick Actions: visible for List Report / Object Page floorplans
See: Quick Actions Availability Matrix (project docs)
```

**STEP**: 5 — Change properties of a UI element

**DESCRIPTION**: In Adaptation mode, select a UI element on Canvas or Outline. Edit editable properties in the Properties pane. Note: not all properties are editable at design time.

**LANGUAGE**: text

**CODE**:
```
1. Switch to Adaptation mode
2. Click element on Canvas (or select in Outline)
3. Edit properties in the Properties pane
```

**STEP**: 6 — Add new fields to a group/form

**DESCRIPTION**: Use the context menu (Canvas or Outline) to Add Field to a group or form. Select fields from the available-fields list (search/sort by label or tooltip), then click OK to apply.

**LANGUAGE**: text

**CODE**:
```
1. Hover/select a group or field -> Right-click -> Add Field
2. In dialog: search/select fields -> OK
Note: Context menu available in Canvas and Outline (SAPUI5 >= 1.84)
```

**STEP**: 7 — Add a new group

**DESCRIPTION**: Add a new group inside a form via context menu. Default title "New Group" — rename as needed. Press Enter or select another element to commit.

**LANGUAGE**: text

**CODE**:
```
1. Hover/select a group or its containing form -> Right-click -> Add Group
2. Rename: double-click group title or use Rename context action -> Enter to confirm
```

**STEP**: 8 — Add sections to an Object Page

**DESCRIPTION**: Add object page sections via context menu. If all available sections are already on the page the action is disabled. Choose sections in dialog, then OK.

**LANGUAGE**: text

**CODE**:
```
1. Hover/select a section -> Right-click -> Add Section
2. Select sections from dialog (search/sort) -> OK
Note: Option grayed out if no available sections remain
```

**STEP**: 9 — Rename fields and groups

**DESCRIPTION**: Rename by double-clicking the label/title or using Rename Field / Rename Group from the context menu. Press Enter to commit or ESC to cancel.

**LANGUAGE**: text

**CODE**:
```
1. Double-click field/group label OR Right-click -> Rename Field/Rename Group
2. Edit label/title -> Enter to save, ESC to cancel
```

**STEP**: 10 — Drag & drop reordering

**DESCRIPTION**: Drag fields, groups, or sections and drop to new location. Drop targets are highlighted; you can place fields above/below highlighted fields, or into any group marked with a dashed box.

**LANGUAGE**: text

**CODE**:
```
1. Click and hold element -> drag
2. Drop where highlighted (in group, above/below field)
```

**STEP**: 11 — Cut & paste fields/groups/sections

**DESCRIPTION**: Cut an element via context menu; valid paste targets highlight with dashed boxes. Paste via context menu on a highlighted target. Press ESC to cancel paste mode.

**LANGUAGE**: text

**CODE**:
```
1. Right-click element -> Cut (element becomes highlighted)
2. Navigate to highlighted target -> Right-click -> Paste
3. Press ESC to exit paste/highlight mode
```

**STEP**: 12 — Combine and split fields

**DESCRIPTION**: Combine up to three fields into one line: select the first field, hold CTRL, select additional fields, then use Combine from the context menu of the target field. To split, select the combined fields and choose Split.

**LANGUAGE**: text

**CODE**:
```
Combine:
1. Select primary field
2. Hold CTRL and select up to 2 more fields
3. Right-click -> Combine (on the chosen target field)
Split:
1. Select combined fields -> Right-click -> Split
```

**STEP**: 13 — Remove fields, groups, or sections

**DESCRIPTION**: Remove elements from the UI (not permanently delete). Use context menu Remove Field/Remove Group/Remove Section or press DEL. Mandatory fields will prompt confirmation and cannot be accidentally removed.

**LANGUAGE**: text

**CODE**:
```
1. Select element -> Right-click -> Remove Field/Remove Group/Remove Section OR press DEL
Note: Removed elements remain in the available-fields/sections list and can be re-added
```

**STEP**: 14 — Context menu availability note

**DESCRIPTION**: The Outline pane context menu is available for projects running on maintained SAPUI5 versions >= 1.84.

**LANGUAGE**: text

**CODE**:
```
Context menu in Outline pane: supported for SAPUI5 versions >= 1.84
```

**STEP**: 15 — Embed custom content (reference)

**DESCRIPTION**: Embedding content follows the key user scenario procedure. Use SAP Help documentation for step-by-step embedding instructions.

**LANGUAGE**: text

**CODE**:
```
Embedding documentation:
https://help.sap.com/viewer/0f8b49c4dfc94bc0bda25a19aa93d5b2/latest/en-US/bfdf15154f16419fb60ce598b21fe515.html
```

**STEP**: 16 — Preview in a separate browser tab

**DESCRIPTION**: You can preview the adaptation project in a separate browser tab. See project preview docs for details.

**LANGUAGE**: text

**CODE**:
```
See: Previewing an Adaptation Project (project docs)
```
--------------------------------

**TITLE**: Adapting the UI with the SAPUI5 Adaptation Editor

**INTRODUCTION**: Action-oriented guide for launching and using the Adaptation Editor to modify SAPUI5/Fiori applications in an adaptation project. Includes exact file paths, settings to change the SAPUI5 preview version, keyboard shortcuts, and concise step-by-step editing actions (add, rename, move, combine, remove, save, embed).

**TAGS**: fiori-tools, adaptation-editor, sapui5, ui5, vs-code, manifest.appdescr_variant, ui5.yaml, ui-adaptation

**STEP**: 1 — Launch the Adaptation Editor from VS Code

**DESCRIPTION**: Open the Adaptation Editor for your adaptation project. The file you must open is manifest.appdescr_variant inside your webapp folder. Keep VS Code running while the Adaptation Editor is open; the editor runs in a browser and depends on the VS Code workspace server.

**LANGUAGE**: Text

**CODE**:
```text
Project file to open in VS Code Explorer:
<project-root>/webapp/manifest.appdescr_variant

Action:
- In VS Code Explorer, expand the webapp folder.
- Right-click manifest.appdescr_variant -> "Open Adaptation Editor".
- The Adaptation Editor launches in a browser window.

Note:
- VS Code must remain running for the editor to work.
```

**STEP**: 2 — Change SAPUI5 preview version used by the Adaptation Editor

**DESCRIPTION**: To preview the project in a different SAPUI5 version, edit ui5.yaml in the project root and change the ui5.version property. Only change this version field — changing other ui5.yaml settings can alter project behavior.

**LANGUAGE**: YAML

**CODE**:
```yaml
# File: <project-root>/ui5.yaml
# Change the ui5.version property to the desired SAPUI5 version.
# Example: switch from 1.88.0 to 1.110.0

specVersion: '2.2'
metadata:
  name: my-adaptation-project

# Update only the version value under the ui5 node
ui5:
  dependencies:
    - name: sap.ui.core
  version: '1.110.0'   # <-- change this to the SAPUI5 version you want the Adaptation Editor to use
```

**STEP**: 3 — Modes, toolbar actions, and device formats

**DESCRIPTION**: Use the toolbar to switch between Navigation and Adaptation modes, and to change canvas device format (smartphone/tablet/desktop). Switching device formats saves changes to the workspace. Navigation mode lets you navigate between views; Adaptation mode enables selection, property editing, and UI modifications.

**LANGUAGE**: Text

**CODE**:
```text
Toolbar actions:
- Navigation mode: Navigate and preview pages.
- Adaptation mode: Select UI elements in Canvas -> highlighted in Outline; Properties pane shows configurable properties.
- Device format: Switch between smartphone / tablet / desktop (changes are saved to the workspace).

Tip:
- If you need to change view before editing, switch to Navigation, navigate to the target view, then switch back to Adaptation.
```

**STEP**: 4 — Keyboard shortcuts and quick notes

**DESCRIPTION**: Common keyboard shortcuts and behavior while editing in the Adaptation Editor.

**LANGUAGE**: Text

**CODE**:
```text
Keyboard shortcuts and quick behavior:
- Enter      : Apply rename (when renaming field/group) or confirm certain dialogs.
- Esc        : Cancel rename or exit paste/highlight mode.
- DEL        : Remove selected field / group / section from UI (not permanently deleted).
- Ctrl (hold): Multi-select fields for combining (select first field, hold Ctrl and click additional fields).
- Note       : Combined fields can contain up to three fields displayed in a single line.

Availability:
- Quick Actions list appears for Fiori elements list/object page floorplans.
- Outline-pane context menu is available for SAPUI5 versions >= 1.84.
```

**STEP**: 5 — Edit properties and basic UI operations (action recipes)

**DESCRIPTION**: Action-oriented recipes to perform common UI adaptations (change properties, add fields/groups/sections, rename, drag-and-drop, cut/paste, combine/split, remove).

**LANGUAGE**: Text

**CODE**:
```text
Change properties:
1. Select UI element in Canvas or Outline.
2. Edit configurable properties in Properties pane.
Note: Not all control properties are editable.

Add new fields:
1. Hover or select a group or field -> context menu -> "Add Field".
   - Context menu available in Canvas and Outline (Outline context menu requires SAPUI5 >= 1.84).
2. In dialog, search/sort fields by label or tooltip and select fields.
3. Click OK to apply.

Add a new group:
1. Hover/select a group or the containing form -> context menu -> "Add Group".
2. Default title = "New Group" (rename as needed).
3. Press Enter or select another element to apply.

Add sections to an object page:
1. Hover/select a section -> context menu -> "Add Section".
2. If all available sections are already present, "Add Section" is disabled.
3. Search/sort and select sections -> click OK to apply.

Rename fields/groups:
1. Double-click the field/group label OR context menu -> "Rename Field"/"Rename Group".
2. Enter new label/title -> press Enter to apply, Esc to cancel.

Drag and drop:
1. Drag a field/group/section.
2. Drop into highlighted target position (above/below fields or into groups marked with dashed boxes).

Cut and paste:
1. Hover/select field/group -> context menu -> "Cut" (cut item is highlighted).
2. Highlighted drop targets appear.
3. Hover/select target -> context menu -> "Paste".
4. Press Esc to cancel paste and clear highlights.

Combine fields (up to 3 fields inline):
1. Select first field.
2. Hold Ctrl and select additional fields to combine.
3. Context menu on one selected field -> "Combine".

Split combined fields:
1. Hover/select combined fields -> context menu -> "Split".

Remove fields/groups/sections:
1. Hover/select target -> context menu -> "Remove Field/Group/Section" OR press DEL.
Note: Removal is only from UI presentation; items remain available to re-add. Mandatory fields require confirmation and cannot be removed accidentally.
```

**STEP**: 6 — Quick Actions availability and table modification caution

**DESCRIPTION**: Links and cautions for advanced actions: quick actions vary by floorplan and SAPUI5 version; table type modifications may not be compatible across all scenarios—test thoroughly.

**LANGUAGE**: Text

**CODE**:
```text
References:
- Quick Actions availability: quick-actions-availability-matrix-5d3d94b.md (project docs)
- Embedding content details: https://help.sap.com/viewer/0f8b49c4dfc94bc0bda25a19aa93d5b2/latest/en-US/bfdf15154f16419fb60ce598b21fe515.html

Caution:
- Table type modifications via adaptation projects may behave differently depending on application, OData version, and configuration. Thoroughly test before production usage.
```

**STEP**: 7 — Save changes and embed content

**DESCRIPTION**: Save adaptations and perform embedding if required. Saving is done from the Adaptation Editor toolbar. Embedding follows the key user scenario; use the SAP Help link for the embedding workflow.

**LANGUAGE**: Text

**CODE**:
```text
Save:
- Click "Save" in the toolbar above the Canvas to persist changes to your workspace files.

Embed content:
- Embedding content uses the key user scenario. See:
  https://help.sap.com/viewer/0f8b49c4dfc94bc0bda25a19aa93d5b2/latest/en-US/bfdf15154f16419fb60ce598b21fe515.html
```
--------------------------------

**TITLE**: Add Fragments to an Aggregation or Extension Point (Adaptation Editor)

**INTRODUCTION**: Step-by-step, code-oriented instructions for adding UI5 XML fragments to a control aggregation or to an extension point using the Adaptation Editor. Includes file locations, fragment template, creation/edit/save workflow, limitations, and cleanup instructions for adaptation projects.

**TAGS**: fiori-tools, SAPUI5, Adaptation Editor, fragments, extension-point, aggregation, changes, webapp

**STEP**: Prerequisites (general)
**DESCRIPTION**: Ensure you have an adaptation project and can open the Adaptation Editor for your app. For extension-point additions, the base app must be a freestyle SAPUI5 application that exposes extension points.
**LANGUAGE**: text
**CODE**:
```
Preconditions:
- Project is in workspace and supports Adaptation Editor context menu.
- For extension-point use: base app is freestyle SAPUI5 with extension points.
```

**STEP**: Open Adaptation Editor and enter Edit mode
**DESCRIPTION**: From the project context menu, open Adaptation Editor. The app loads in preview. Click Edit in the editor header to enable UI selection and context menu actions.
**LANGUAGE**: text
**CODE**:
```
Context menu: Project > Adaptation Editor
Editor: Click "Edit" in the header to enable layout modifications.
```

**STEP**: Add a fragment to an aggregation (visual flow)
**DESCRIPTION**: Select a control on the UI (e.g., SmartFilterBar, OverflowToolbar). From its context menu choose "Add Fragment". The dialog defaults to the control's target aggregation and shows available fragments and index positions. You can choose an existing fragment or create a new one. You cannot reuse the same fragment multiple times. After add/create, Save and Reload to see results in the canvas.
**LANGUAGE**: text
**CODE**:
```
Dialog options:
- Target aggregation: defaulted from selected control
- Index: choose insertion index (note: disabled for controlConfiguration aggregation on SmartFilterBar)
- Fragment list: select existing or choose "Create New"
Quick actions (top-right): Add Custom Page Action, Add Custom Table Action, Add Custom Table Column, Add Header Field, Add Custom Section
```

**STEP**: Create a new fragment (aggregation or extension point)
**DESCRIPTION**: When creating a fragment, enter a name. A fragment XML file is created at: <YourProject>/webapp/changes/fragments/<YourFragmentName>.fragment.xml and opened in the editor. Define the fragment XML (include proper namespaces and stable unique IDs), Save and close. An associated change descriptor addXML.change is created in <YourProject>/webapp/changes referencing the fragment, target aggregation/extension point, and index.
**LANGUAGE**: text
**CODE**:
```
Created files:
- <YourProject>/webapp/changes/fragments/<YourFragmentName>.fragment.xml
- <YourProject>/webapp/changes/addXML.change (one per fragment, contains reference + target + index)
```

**STEP**: Example minimal fragment.xml template (use this as starting point)
**DESCRIPTION**: Use this XML template and adjust namespaces, control types, and IDs. Always add the necessary xmlns declarations for controls you use and assign stable, unique IDs.
**LANGUAGE**: XML
**CODE**:
```xml
<!-- file: webapp/changes/fragments/MyFragment.fragment.xml -->
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns:uxap="sap.uxap">
  <!-- Use stable and unique IDs, e.g., app prefix -->
  <uxap:ObjectPageSection id="myApp.section.SampleSection" title="Title">
    <!-- Add inner controls here -->
  </uxap:ObjectPageSection>
</core:FragmentDefinition>
```

**STEP**: Edit an existing fragment from the list
**DESCRIPTION**: Select an existing fragment in the Add Fragment dialog and click Add. Then open the fragment file from the workspace (double-click), modify properties or inner controls, Save, and close. Reload the Adaptation Editor preview to apply edits.
**LANGUAGE**: text
**CODE**:
```
Steps:
1. Dialog: select fragment > Add
2. Workspace: webapp/changes/fragments/<FragmentName>.fragment.xml
3. Edit XML, Save
4. Editor: Save and Reload to refresh preview
```

**STEP**: Add a fragment at an extension point (outline flow)
**DESCRIPTION**: Expand the outline tree to find extension points. Select the extension point node (its parent is highlighted in the visual canvas). Right-click the highlighted element and choose "Add fragment at extension point". The dialog defaults to the selected extension point; choose/create fragment and index. Creation and file locations match the aggregation flow.
**LANGUAGE**: text
**CODE**:
```
Extension point flow:
- Outline tree: locate extension point
- Select node: parent highlighted in canvas
- Right-click > Add fragment at extension point
- Choose existing or Create New (same file paths used)
```

**STEP**: Index limitation and notes
**DESCRIPTION**: The insertion index may be disabled for certain aggregations (example: controlConfiguration aggregation on SmartFilterBar does not support positioning by index). You cannot reuse the same fragment multiple times in the adaptation project.
**LANGUAGE**: text
**CODE**:
```
Limitations:
- controlConfiguration aggregation (SmartFilterBar): index disabled
- Reuse: Same fragment file cannot be added multiple times
```

**STEP**: Namespace & ID rules (must-follow)
**DESCRIPTION**: Always declare all XML namespaces for the controls used inside the fragment. Use stable, unique IDs for controls defined in fragments. Follow each control's definition rules (properties, allowed aggregations).
**LANGUAGE**: XML
**CODE**:
```xml
<!-- Example showing namespace + stable ID -->
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns:m="sap.m">
  <m:Button id="myApp.button.Save" text="Save" />
</core:FragmentDefinition>
```

**STEP**: Deleting fragments (cleanup)
**DESCRIPTION**: To remove a fragment from the adaptation project: first delete the associated change descriptor(s) in <YourProject>/webapp/changes, then delete the fragment file in <YourProject>/webapp/changes/fragments. If you do not delete the change files first, you may be prevented from adding further fragments.
**LANGUAGE**: text
**CODE**:
```
Cleanup order:
1. Delete addXML.change entries in: <YourProject>/webapp/changes/
2. Delete fragment file(s) in: <YourProject>/webapp/changes/fragments/
Note: If change descriptors remain, adaptation editor may block further fragment adds.
```

**STEP**: Final validation
**DESCRIPTION**: After adding or editing fragments, reload the Adaptation Editor preview (Save and Reload) and confirm the fragment appears in the target aggregation or extension point. Verify that IDs are unique and controls render as expected.
**LANGUAGE**: text
**CODE**:
```
Validation:
- Click "Save and Reload" in Adaptation Editor toolbar
- Check canvas for visual placement
- Open webapp/changes/addXML.change to confirm reference, target and index
```
--------------------------------

**TITLE**: Add Fragments to an Aggregation or Extension Point (UI Adaptation Mode)

**INTRODUCTION**: This document gives exact, code-focused steps to add XML fragments to a control aggregation or to an extension point using UI Adaptation mode (Fiori tools). It covers starting the editor, creating the fragment XML file, required file locations, and the associated change file that registers the fragment in the adaptation project.

**TAGS**: fiori-tools, ui-adaptation, fragments, sapui5, extension-point, aggregation, addXML, webapp, changes

**STEP**: 1 — Start UI Adaptation Mode and open the editor

**DESCRIPTION**: Open the adaptation editor and preview the application so you can add fragments in the visual canvas.

**LANGUAGE**: Text

**CODE**:
```text
1. In your project explorer, right-click the project root folder, the webapp folder, or manifest.appdescr_variant.
2. Click "Preview Application".
3. In the preview, click "start-editor" to open the UI Adaptation editor (canvas).
4. The application opens in the canvas in UI Adaptation mode. Proceed to select controls or outline elements for adding fragments.
```

**STEP**: 2 — Add a fragment to an aggregation (visual/context-menu)

**DESCRIPTION**: Use the visual canvas or control context menu to add a fragment into a selected control aggregation. This creates a fragment XML file under webapp/changes/fragments and an associated change file under webapp/changes.

**LANGUAGE**: Text

**CODE**:
```text
1. In the canvas, select a control (e.g., SmartFilterBar, OverflowToolbar).
2. Right-click the control and choose "Add Fragment".
3. In the dialog:
   - Select the target aggregation from the list (default aggregation is preselected).
   - Select the insertion index (last index is default). Note: index is disabled for SmartFilterBar.controlConfiguration.
   - You cannot reuse the same fragment multiple times.
4. Enter a fragment name and click "Create".
   - A file is created: <project>/webapp/changes/fragments/<yourFragmentName>.fragment.xml
   - The fragment file opens in the editor for you to define controls.
5. Save the fragment XML. An associated change file is created:
   - <project>/webapp/changes/<someId>-addXML.change
   - This change references the fragment, target aggregation, and index.
6. Reload the adaptation editor or preview tab to see the fragment applied.
```

**STEP**: 3 — Quick actions (create common fragment types)

**DESCRIPTION**: Use the top-right quick actions in the editor for common fragment types. These auto-generate fragment XML with dummy content so you can Save and Reload to preview immediately.

**LANGUAGE**: Text

**CODE**:
```text
Available quick actions (examples):
- Add Custom Page Action
- Add Custom Table Action
- Add Custom Table Column
- Add Header Field
- Add Custom Section

Workflow:
1. Click the quick action.
2. Enter a file name for the fragment.
3. Click "Create".
4. Edit the generated fragment XML if needed, then Save and Reload.
```

**STEP**: 4 — Fragment XML: required namespace and stable IDs (example)

**DESCRIPTION**: Fragments must declare namespaces for the controls they use and use stable, unique IDs. Example fragment template for ObjectPageSection using sap.uxap.

**LANGUAGE**: XML

**CODE**:
```xml
<?xml version="1.0" encoding="UTF-8"?>
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns:uxap="sap.uxap">
  <uxap:ObjectPageSection id="sample.Id" title="Title"/>
</core:FragmentDefinition>
```

**STEP**: 5 — Example template for the associated addXML.change (registration)

**DESCRIPTION**: Each fragment has an associated change file that registers the fragment addition. The change contains a reference to the fragment file, target aggregation (or extension point), and index. Use this template as a reference — replace placeholders with actual values created by the editor.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "fileType": "change",
  "changeType": "addXML",
  "fileName": "<someId>-addXML.change",
  "reference": "<your.application.namespace>",
  "selector": {
    "id": "<controlIdOrComponentId>",
    "type": "ctrl"
  },
  "content": {
    "fragmentPath": "changes/fragments/<yourFragmentName>.fragment.xml",
    "targetAggregation": "<aggregationName or extensionPointName>",
    "index": <indexNumber>
  },
  "texts": {},
  "support": {}
}
```

**STEP**: 6 — Add fragment to an extension point (outline + context menu)

**DESCRIPTION**: For freestyle apps that expose extension points, add fragments at an extension point via the outline tree. Prerequisites: SAPUI5 >= 1.78 and SAP_UI >= 7.55.

**LANGUAGE**: Text

**CODE**:
```text
Prerequisites:
- SAPUI5 version 1.78 or above
- SAP_UI version 7.55 or above
- Freestyle application with extension points

Procedure:
1. In the adaptation editor, expand the outline tree and locate a possible extension point.
2. Select the element; its parent is highlighted in the visual canvas.
3. Right-click the highlighted element and choose "Add fragment at extension point".
4. In the dialog:
   - Choose the extension point (default is preselected).
   - Choose insertion index.
   - Enter a name and click "Create".
5. A fragment is created at: <project>/webapp/changes/fragments/<yourFragmentName>.fragment.xml
6. The editor creates an associated addXML.change under <project>/webapp/changes referencing the fragment and extension point.
7. Save fragment XML and reload the editor/preview to apply changes.
```

**STEP**: 7 — Delete fragments safely

**DESCRIPTION**: To remove a fragment from the adaptation project, always delete the change file(s) first, then delete the fragment XML file. If you delete the fragment first, you may not be able to add further fragments until the change is removed.

**LANGUAGE**: Text

**CODE**:
```text
1. In your project explorer, remove the corresponding change file from <project>/webapp/changes (the addXML.change for the fragment).
2. Then remove the fragment XML from <project>/webapp/changes/fragments/<yourFragmentName>.fragment.xml
3. Reload the adaptation editor and preview to ensure the removal is applied.
```
--------------------------------

**TITLE**: Adding App Descriptor Changes (SAP Fiori / UI5)

**INTRODUCTION**: This guide shows concrete, code-focused steps to add and test app descriptor changes for a SAP Fiori (UI5) application by editing webapp/manifest.json. It covers updating metadata, adding Launchpad inbounds, wiring OData data sources and models, configuring routing, and validating locally with ui5-cli or the Fiori Tools editor.

**TAGS**: fiori-tools, ui5, manifest.json, sap.app, routing, odata, launchpad, app-descriptor

**STEP**: 1 — Locate the app descriptor file

**DESCRIPTION**: Find the UI5 app descriptor file to edit. Typical path for a Fiori app is webapp/manifest.json. Open it in your editor (VS Code is recommended).

**LANGUAGE**: Plain text

**CODE**:
```text
File path: <project-root>/webapp/manifest.json
Open this file to add descriptor changes.
```

**STEP**: 2 — Add or update app metadata (sap.app)

**DESCRIPTION**: Add basic app metadata such as id, title, applicationVersion, and optional Launchpad crossNavigation inbounds used by the SAP Launchpad to navigate to your app.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.app": {
    "id": "com.example.myapp",
    "type": "application",
    "i18n": "i18n/i18n.properties",
    "applicationVersion": {
      "version": "1.0.0"
    },
    "title": "{{appTitle}}",
    "crossNavigation": {
      "inbounds": {
        "comexamplemyapp-display": {
          "semanticObject": "MyApp",
          "action": "display",
          "title": "My App",
          "signature": {
            "parameters": {}
          },
          "deviceTypes": {
            "desktop": true,
            "tablet": true,
            "phone": true
          }
        }
      }
    }
  }
}
```

Note: Integrate this snippet with your existing manifest root rather than replacing unrelated sections.

**STEP**: 3 — Add OData data source and model mappings (sap.ui5 -> dataSources, models)

**DESCRIPTION**: Declare backend OData services under sap.ui5.dataSources and connect them to models so controllers/views can consume the service.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui5": {
    "dataSources": {
      "mainService": {
        "uri": "/sap/opu/odata/sap/ZMY_SERVICE/",
        "type": "OData",
        "settings": {
          "odataVersion": "2.0",
          "localUri": "localService/metadata.xml"
        }
      }
    },
    "models": {
      "": {
        "dataSource": "mainService",
        "settings": {
          "defaultCountMode": "None"
        }
      },
      "i18n": {
        "type": "sap.ui.model.resource.ResourceModel",
        "settings": {
          "bundleName": "com.example.myapp.i18n.i18n"
        }
      }
    }
  }
}
```

If you use OData V4, change type and settings accordingly (type: "OData", settings.odataVersion: "4.0" and model configuration per V4).

**STEP**: 4 — Configure routing (sap.ui5.routing)

**DESCRIPTION**: Add routes and targets for navigation inside your app (home, detail, notFound). Ensure rootView or Component metadata matches your component/view names.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui5": {
    "rootView": {
      "viewName": "com.example.myapp.Component",
      "type": "JS",
      "async": true,
      "id": "app"
    },
    "routing": {
      "config": {
        "routerClass": "sap.m.routing.Router",
        "viewType": "XML",
        "viewPath": "com.example.myapp.view",
        "controlId": "app",
        "controlAggregation": "pages",
        "bypassed": {
          "target": "notFound"
        }
      },
      "routes": [
        {
          "name": "home",
          "pattern": "",
          "target": "home"
        },
        {
          "name": "detail",
          "pattern": "detail/{id}",
          "target": "detail"
        }
      ],
      "targets": {
        "home": {
          "viewName": "Home",
          "viewLevel": 1
        },
        "detail": {
          "viewName": "Detail",
          "viewLevel": 2
        },
        "notFound": {
          "viewName": "NotFound"
        }
      }
    }
  }
}
```

Merge this routing config with existing sap.ui5 content. Keep viewPath, viewName, and controlId aligned with your project.

**STEP**: 5 — Use SAP Fiori Tools Application Descriptor editor (optional interactive editing)

**DESCRIPTION**: Use the VS Code Fiori Tools Application Descriptor editor for a structured UI to edit manifest.json without manual JSON merge errors.

**LANGUAGE**: Plain text

**CODE**:
```text
1. Install VS Code extension: "SAP Fiori tools - Application Descriptor" (or search "Application Descriptor" in SAP Fiori Tools).
2. In VS Code open: <project-root>/webapp/manifest.json
3. Right-click -> "Open With" -> "Application Descriptor" (or use the editor tab).
4. Edit metadata, inbounds, data sources, models, routing via the form, then Save.
```

**STEP**: 6 — Test changes locally with ui5-cli

**DESCRIPTION**: Run a local UI5 server and open the app to validate manifest changes (routing, models, inbounds only visible when running in Launchpad).

**LANGUAGE**: Shell

**CODE**:
```bash
# Install UI5 CLI if not available
npm install --global @ui5/cli

# From project root, serve the app
ui5 serve --open index.html

# Open browser: http://localhost:8080/index.html
# Verify:
# - Routes navigate to views (use URL fragments like #/detail/1)
# - OData model requests in browser Network tab point to dataSources.uri
```

For Launchpad inbound testing, deploy to a Fiori Launchpad or use a local launchpad sandbox that consumes the manifest app descriptor.

**STEP**: 7 — Best practices and cautions

**DESCRIPTION**: Keep these practical rules to avoid issues.

**LANGUAGE**: Plain text

**CODE**:
```text
- Always merge new snippets into the existing manifest.json root; do not replace unrelated keys.
- Use i18n placeholders (e.g., "{{appTitle}}") for user-facing strings and add translations under webapp/i18n/.
- For Launchpad inbounds: semanticObject/action must be unique across your FLP catalog.
- For OData changes, confirm CORS/proxy settings or use relative URIs and backend destinations during deployment.
- Keep backups or use source control before changing manifest.json.
```

End of guide.
--------------------------------

**TITLE**: App Descriptor Changes for Adaptation Projects (manifest.json examples)

**INTRODUCTION**: Short, code-first reference showing common app descriptor (manifest.json) changes performed in adaptation projects for SAP Fiori elements / SAPUI5 apps. Use these snippets to:
- Replace OData services
- Add local annotation files
- Add a new OData service + new SAPUI5 model
- Add SAPUI5 component usages
- Add/modify FLP inbound (intent) definitions

Apply edits in your adaptation project's manifest (webapp/manifest.json or manifest.json at project root). Each step shows the minimal JSON fragment to add or modify.

**TAGS**: fiori-tools, manifest, manifest.json, SAPUI5, annotations, OData, app-descriptor, adaptation-project, componentUsages, inbound

STEP: Replacing OData Service

DESCRIPTION: Replace an existing OData service referenced in manifest.json. Update the dataSources entry and the corresponding model to point to the new service URL or new dataSource name. Use "dataSource" reference inside the model to decouple URL details.

LANGUAGE: JSON

CODE:
```json
// File: webapp/manifest.json (partial)
// Replace existing dataSources.myService.uri with new URI
{
  "sap.app": {
    "dataSources": {
      "myService": {
        "uri": "/sap/opu/odata/sap/NEW_SERVICE_SRV/", // <- NEW service endpoint
        "type": "OData",
        "settings": {
          "odataVersion": "2.0"
        }
      }
    }
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "myService",
        "settings": {
          "synchronizationMode": "None"
        }
      }
    }
  }
}
```

STEP: Adding Local Annotation Files

DESCRIPTION: Add local annotation XML files into the project (e.g., webapp/annotations/Annotations.xml). Register the file in manifest.json and reference it from the OData model using annotationURI. This keeps annotations bundled with the app variant.

LANGUAGE: JSON

CODE:
```json
// File: webapp/manifest.json (partial)
// 1) Add dataSource for annotation (local file path under webapp/)
{
  "sap.app": {
    "dataSources": {
      "localAnnotations": {
        "uri": "annotations/Annotations.xml",   // path relative to webapp/
        "type": "ODataAnnotation",
        "settings": {
          "localUri": "annotations/Annotations.xml"
        }
      }
    }
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "myService",
        "settings": {
          "annotationURI": [
            "annotations/Annotations.xml"  // or "/webapp/annotations/Annotations.xml"
          ]
        }
      }
    }
  }
}
```

STEP: Adding OData Service and New SAPUI5 Model

DESCRIPTION: Add a completely new OData dataSource and register a named UI5 model in sap.ui5/models that uses that dataSource. Use a named model key to access the model in controllers and XML views (e.g., this.getView().getModel("newModel")).

LANGUAGE: JSON

CODE:
```json
// File: webapp/manifest.json (partial)
// Add new OData service dataSource and named UI5 model "newModel"
{
  "sap.app": {
    "dataSources": {
      "NewService": {
        "uri": "/sap/opu/odata/sap/NEW_SERVICE_SRV/",
        "type": "OData",
        "settings": {
          "odataVersion": "2.0"
        }
      }
    }
  },
  "sap.ui5": {
    "models": {
      "newModel": {
        "dataSource": "NewService",
        "preload": true,
        "settings": {
          "synchronizationMode": "None"
        }
      }
    }
  }
}
```

STEP: Adding SAPUI5 Component Usages

DESCRIPTION: Register a reused UI5 component in componentUsages to enable embedding external UI5 components or micro frontends. Use an alias to reference the component programmatically or in XML fragment/component usage.

LANGUAGE: JSON

CODE:
```json
// File: webapp/manifest.json (partial)
// Add component usage with alias "MyReusedComponent"
{
  "sap.ui5": {
    "componentUsages": {
      "MyReusedComponent": {
        "name": "vendor.reused.Component",   // component namespace + name
        "settings": {
          // component-specific settings passed to the component constructor
          "someSetting": "value"
        }
      }
    }
  }
}
```

STEP: Change Inbound (FLP Intent / Navigation)

DESCRIPTION: Add or modify FLP inbound (intent) definitions so the app variant is reachable via a semantic object and action. Inbounds are defined under sap.app/crossNavigation/inbounds for Fiori Launchpad intent handling.

LANGUAGE: JSON

CODE:
```json
// File: webapp/manifest.json (partial)
// Add inbound intent mapping to enable navigation to this app variant
{
  "sap.app": {
    "crossNavigation": {
      "inbounds": {
        "MyEntity-display": {
          "semanticObject": "MyEntity",
          "action": "display",
          "title": "Display My Entity",
          "signature": {
            "parameters": {
              "ID": {
                "required": true
              }
            }
          }
        }
      }
    }
  }
}
```

STEP: Implementation Notes and File Locations

DESCRIPTION: Quick practical notes to apply the above changes:
- Primary manifest location: webapp/manifest.json (or manifest.json at project root for adaptation projects).
- Local annotation files: place under webapp/annotations/ (e.g., webapp/annotations/Annotations.xml).
- Use dataSource + model pattern to avoid hardcoding URLs in views.
- For OData V4, adjust model type and settings (use sap.ui.model.odata.v4.ODataModel and V4-specific settings).
- After changing manifest.json in an adaptation project, redeploy or rebuild the app variant so the runtime (or FLP) picks up the changes.

LANGUAGE: JSON

CODE:
```json
// Example: V4 model skeleton (if required)
{
  "sap.app": {
    "dataSources": {
      "MyODataV4": {
        "uri": "/odata/v4/NEW_SRV/",
        "type": "OData",
        "settings": {
          "odataVersion": "4.0"
        }
      }
    }
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "MyODataV4",
        "settings": {
          "synchronizationMode": "None",
          "operationMode": "Server"
        }
      }
    }
  }
}
```
--------------------------------

**TITLE**: Adding Local OData Annotation Files to a Fiori Elements Project

**INTRODUCTION**: Instructions and code examples to add local OData annotation XML files to a Fiori Elements / UI5 project. Includes where to place files (webapp), how to register them in the manifest (manifest.json or manifest.appdescr_variant), and two common ways to reference annotations (model settings or sap.ui.generic.app settings). Use these snippets when programmatically updating a project or generating manifest changes.

**TAGS**: fiori-tools, annotations, OData, manifest, ui5, webapp, manifest.appdescr_variant, local-annotations, ABAP

**STEP**: Prerequisite
**DESCRIPTION**: For adaptation projects that target an On-Premise ABAP backend, ensure the ABAP Platform version is compatible.
**LANGUAGE**: Text
**CODE**:
```text
Prerequisite: For adaptation projects for an On-Premise System, ensure ABAP Platform 2020 SP00 is installed.
```

**STEP**: Create a local annotation XML file under webapp/annotations
**DESCRIPTION**: Create a new annotation file in the project under webapp/annotations. Use the correct Edmx/Edm namespaces for OData V4 (example). Replace Target and Namespace with real service/entity names. Filename convention: <ServiceName>.annotation.xml or <ServiceName>.annotations.xml.
**LANGUAGE**: XML
**CODE**:
```xml
<?xml version="1.0" encoding="utf-8"?>
<edmx:Edmx Version="4.0" xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx">
  <edmx:DataServices>
    <Schema xmlns="http://docs.oasis-open.org/odata/ns/edm" Namespace="Annotations">
      <!-- Replace Target with actual EntityType or EntitySet in your service -->
      <Annotations Target="YourServiceNamespace.YourEntityType">
        <!-- Add annotation elements here, e.g. UI.LineItem, UI.HeaderInfo, etc. -->
      </Annotations>
    </Schema>
  </edmx:DataServices>
</edmx:Edmx>
```

**STEP**: Register the annotation file in manifest.appdescr_variant or manifest.json (dataSources)
**DESCRIPTION**: Add a dataSource entry for the annotation file. Place the file in webapp/annotations and reference it via the localUri. This example registers the backend service and its local annotation file.
**LANGUAGE**: JSON
**CODE**:
```json
{
  "sap.app": {
    "dataSources": {
      "MyService": {
        "uri": "/sap/opu/odata/sap/MY_SERVICE_SRV/",
        "type": "OData",
        "settings": { "odataVersion": "2.0" }
      },
      "MyService.annotations": {
        "uri": "annotations/MyService.annotation.xml",
        "type": "ODataAnnotation",
        "settings": {
          "localUri": "annotations/MyService.annotation.xml"
        }
      }
    }
  }
}
```

**STEP**: Option A — Attach annotation file to the service model via sap.ui5 models (common for UI5 apps)
**DESCRIPTION**: Link the annotation dataSource to the OData model in sap.ui5.models by adding the annotation entry under model settings. This tells UI5 to load the local annotation file for the service model at runtime.
**LANGUAGE**: JSON
**CODE**:
```json
{
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "MyService",
        "settings": {
          "annotations": [
            "MyService.annotations"
          ]
        }
      }
    }
  }
}
```

**STEP**: Option B — Declare local annotations for Fiori Elements via sap.ui.generic.app settings
**DESCRIPTION**: Alternative approach used by some Fiori Elements templates: specify localAnnotations in sap.ui.generic.app.settings. Map entity sets or the whole app to a list of annotation dataSource keys.
**LANGUAGE**: JSON
**CODE**:
```json
{
  "sap.ui.generic.app": {
    "settings": {
      "localAnnotations": {
        "Products": [
          "MyService.annotations"
        ],
        "Orders": [
          "MyService.annotations"
        ]
      }
    }
  }
}
```

**STEP**: Where to place files and UI/IDE action (manual / tool-driven)
**DESCRIPTION**: The Fiori tools command in the IDE (right-click project root / webapp / manifest.appdescr_variant -> Add Local Annotation File) will:
- Show a Target OData Service dropdown populated from existing manifest dataSources.
- Let you create an empty annotation file (webapp/annotations/<name>.annotation.xml) or pick an existing workspace file.
- Update manifest (dataSources and model/settings or sap.ui.generic.app settings) automatically if you let the tool finish the dialog.
If you perform the changes manually, ensure:
- File path: webapp/annotations/<ServiceName>.annotation.xml
- manifest entries are added exactly as shown in the examples above.

**STEP**: Example minimal project structure after adding a local annotation
**DESCRIPTION**: Use this file layout in code generation or when validating the result of the IDE action.
**LANGUAGE**: Text
**CODE**:
```text
project-root/
└─ webapp/
   ├─ annotations/
   |  └─ MyService.annotation.xml
   ├─ manifest.json            // or manifest.appdescr_variant + manifest.json
   └─ index.html
```

**STEP**: Finish and verify
**DESCRIPTION**: Save manifest changes. Run the application (local sandbox or dev server). Verify that the annotation file is requested and applied for the chosen OData service (check browser network tab for annotations/MyService.annotation.xml and application of annotation-based UI changes).
**LANGUAGE**: Text
**CODE**:
```text
Verification steps:
1. Start local dev server (e.g., npm start / ui5 serve).
2. Open app in browser and check DevTools Network tab for the annotation XML file request.
3. Confirm UI changes driven by the annotation (list columns, header info, etc.).
```
--------------------------------

**TITLE**: Adding Local Annotation Files to an Adaptation Project (SAP Fiori Tools)

**INTRODUCTION**: This guide shows how to add local annotation files to an Adaptation Project using either the Adaptation Project wizard or the Adaptation Editor. It also shows where the generated files are placed in the workspace and how to enable annotation editing assistance via the XML Annotation LSP extension.

**TAGS**: fiori-tools, adaptation-project, annotations, local-annotations, manifest, sap-business-application-studio, xml, lsp

**STEP**: 1 — Add Local Annotation File (Project Wizard)

**DESCRIPTION**: Use the Adaptation Project wizard to create a new local annotation file or select an existing annotation file from your workspace and register it for a target OData service defined in the base application's manifest.

**LANGUAGE**: text

**CODE**:
```text
Procedure (wizard):
1. In your adaptation project, right-click the file: manifest.appdescr_variant
2. Choose: Adaptation Project > Add Local Annotation File
3. If requested, enter credentials for the system used to create the adaptation project
4. In the wizard:
   - Select Target OData Service (choose a service listed in the base application's manifest)
   - Choose one of:
     • Create an empty annotation file (new file generated)
     • Select an existing annotation file from the workspace
5. Click Finish to save changes. The manifest/app descriptor will be updated to reference the annotation where applicable.
```

**STEP**: 2 — Add Local Annotation File (Adaptation Editor)

**DESCRIPTION**: Add a local annotation file directly from the Adaptation Editor while working in UI Adaptation mode. Save and reload the editor to generate and persist the file in the adaptation project.

**LANGUAGE**: text

**CODE**:
```text
Procedure (Adaptation Editor):
1. Open Adaptation Editor and switch to mode: UI Adaptation
2. From Object Page Quick Actions select: Add Local Annotation File
3. Use the header button: Save and reload to apply and persist the change
4. The new local annotation file is generated in the adaptation project workspace (see file location below)
```

**STEP**: 3 — Resulting File Location and Example Skeleton

**DESCRIPTION**: After creation, local annotation files are stored in the Adaptation Project workspace under the changes/annotations folder. Use the skeleton below as a starting point for an empty annotation file.

**LANGUAGE**: text

**CODE**:
```text
Typical workspace layout (adaptation project):
- <adaptation-project>/
  - manifest.appdescr_variant
  - changes/
    - annotations/
      - annotations_<ServiceName>_<timestamp>.xml
```

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Example: new local annotation file skeleton -->
<Annotations Target="YourService.EntityType" xmlns="http://docs.oasis-open.org/odata/ns/edm">
  <!-- Add Term/Annotation/Record elements here per OData annotation syntax -->
</Annotations>
```

**STEP**: 4 — Enable Annotation LSP (Editing Assistance)

**DESCRIPTION**: Use the SAP Fiori Tools – XML Annotation LSP extension to get code-assist features (autocomplete, validation, hover, go-to-definition) when editing local annotation files in the adaptation project. Install the extension into SAP Business Application Studio or VS Code as appropriate.

**LANGUAGE**: text

**CODE**:
```text
Recommendation:
1. Install extension: "SAP Fiori Tools – XML Annotation LSP"
   - In SAP Business Application Studio or VS Code, open Extensions view and search for the extension name
2. Open the generated annotation file under changes/annotations in the workspace to activate LSP features
3. See documentation: Maintaining Annotations with Language Server for advanced usage and details
```
--------------------------------

**TITLE**: Add OData V2 Service and SAPUI5 Model (manifest.json / manifest.appdescr_variant)

**INTRODUCTION**: This guide shows the exact manifest.json edits to add an OData V2 service and a SAPUI5 model (and optionally an annotation data source). Use these snippets when automating or generating code/configuration for Fiori apps (webapp/manifest.json or manifest.appdescr_variant).

**TAGS**: fiori-tools, sapui5, odata, manifest.json, annotations, webapp

**STEP**: 1 — Edit the manifest file

**DESCRIPTION**: Open the application manifest at webapp/manifest.json (or webapp/manifest.appdescr_variant) to add dataSources and models for the new OData service and optional annotations.

**LANGUAGE**: JSON

**CODE**:
```json
// File: webapp/manifest.json (open for editing)
{
  // ... existing manifest sections ...
}
```

**STEP**: 2 — Add the OData service dataSource

**DESCRIPTION**: Add a dataSources entry under "sap.app". The dataSource key is the OData Service name you choose in the wizard. Set uri and type = "OData". For OData V2 set settings.odataVersion = "2.0".

**LANGUAGE**: JSON

**CODE**:
```json
// Add to "sap.app": { "dataSources": { ... } }
"dataSources": {
  "MyODataService": {
    "uri": "/sap/opu/odata/sap/Z_MY_SERVICE_SRV/",
    "type": "OData",
    "settings": {
      "odataVersion": "2.0"
    }
  }
}
```

**STEP**: 3 — Add the SAPUI5 OData model that uses the dataSource

**DESCRIPTION**: Under "sap.ui5" → "models", add a model with the SAPUI5 Model name you entered in the wizard. Reference the dataSource key from Step 2 via the "dataSource" property. If you specified model settings in the wizard, place them in "settings". For an OData V2 model use type "sap.ui.model.odata.v2.ODataModel".

**LANGUAGE**: JSON

**CODE**:
```json
// Add to "sap.ui5": { "models": { ... } }
"models": {
  "myModel": {
    "dataSource": "MyODataService",
    "type": "sap.ui.model.odata.v2.ODataModel",
    "preload": true,
    "settings": {
      "useBatch": true,
      "defaultBindingMode": "TwoWay"
    }
  }
}
```

**STEP**: 4 — (Optional) Add an annotation data source

**DESCRIPTION**: If you selected "add an annotation" in the wizard, add an annotation dataSource entry under "sap.app" with type "ODataAnnotation". The annotation data source name in the wizard becomes the dataSources key. Use uri (remote or local) and optional settings such as localUri.

**LANGUAGE**: JSON

**CODE**:
```json
// Add to "sap.app" -> "dataSources"
"dataSources": {
  "MyODataServiceAnnotations": {
    "uri": "annotations/MyODataService.annotations.xml",
    "type": "ODataAnnotation",
    "settings": {
      "localUri": "annotations/MyODataService.annotations.xml"
    }
  }
}
```

**STEP**: 5 — (Optional) Example: include annotation dataSource and reference pattern

**DESCRIPTION**: Commonly you will add the annotation data source as above. How you reference annotations in runtime depends on framework usage (e.g., Smart Controls, Generic Template). At minimum, ensure the annotation file/dataSource exists. The UI or framework tooling will consume the annotation dataSource by its key.

**LANGUAGE**: JSON

**CODE**:
```json
// Example combined minimal manifest additions (merge into existing manifest)
{
  "sap.app": {
    "dataSources": {
      "MyODataService": {
        "uri": "/sap/opu/odata/sap/Z_MY_SERVICE_SRV/",
        "type": "OData",
        "settings": { "odataVersion": "2.0" }
      },
      "MyODataServiceAnnotations": {
        "uri": "annotations/MyODataService.annotations.xml",
        "type": "ODataAnnotation",
        "settings": { "localUri": "annotations/MyODataService.annotations.xml" }
      }
    }
  },
  "sap.ui5": {
    "models": {
      "myModel": {
        "dataSource": "MyODataService",
        "type": "sap.ui.model.odata.v2.ODataModel",
        "preload": true,
        "settings": {
          "useBatch": true,
          "defaultBindingMode": "TwoWay"
        }
      }
    }
  }
}
```

**STEP**: 6 — Mapping wizard fields to manifest keys

**DESCRIPTION**: Use this mapping when generating manifest entries programmatically from wizard inputs.

**LANGUAGE**: JSON

**CODE**:
```json
// Mapping (pseudo)
{
  "OData Service name"         : "sap.app.dataSources.<serviceKey>",
  "OData Service URI"          : "sap.app.dataSources.<serviceKey>.uri",
  "OData version"              : "sap.app.dataSources.<serviceKey>.settings.odataVersion",
  "SAPUI5 Model name"          : "sap.ui5.models.<modelName>",
  "SAPUI5 Model dataSource"    : "sap.ui5.models.<modelName>.dataSource = <serviceKey>",
  "SAPUI5 Model type"          : "sap.ui5.models.<modelName>.type (e.g. sap.ui.model.odata.v2.ODataModel)",
  "SAPUI5 Model settings"      : "sap.ui5.models.<modelName>.settings (JSON object)",
  "Annotation chosen?"         : "Add sap.app.dataSources.<annotationKey> with type = ODataAnnotation"
}
```

**STEP**: 7 — Example format for optional settings in the wizard

**DESCRIPTION**: When the wizard asks for optional settings (single-line input), accept a JSON-style object string and inject it into the manifest under the model or dataSource "settings". Example strings and parsed equivalent are shown.

**LANGUAGE**: JSON

**CODE**:
```json
// Wizard single-line input example (user types)
"useBatch":true,"defaultBindingMode":"TwoWay"

// Parsed into manifest:
"settings": {
  "useBatch": true,
  "defaultBindingMode": "TwoWay"
}
```

**STEP**: 8 — Save and verify

**DESCRIPTION**: Save manifest.json (or manifest.appdescr_variant). Rebuild/serve the app and verify the model is available (e.g., check console for model load or use sap.ui.getCore().getModel("myModel")).

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Example runtime verification in browser console
const model = sap.ui.getCore().getModel("myModel");
console.log("OData model present:", !!model);
```
--------------------------------

**TITLE**: Add OData Service and SAPUI5 Model to manifest.appdescr_variant

**INTRODUCTION**: This guide shows the exact wizard inputs and the resulting manifest.appdescr_variant changes when adding an OData service and a new SAPUI5 model. It includes examples for OData V2 (with optional annotation data source) and OData V4 (no annotation data source required). Use the examples to implement the same changes programmatically or via the wizard.

**TAGS**: fiori-tools, sapui5, odata, manifest, manifest.appdescr_variant, annotations, model, example

**STEP**: 1 — Launch wizard
**DESCRIPTION**: In your adaptation project locate the manifest.appdescr_variant file and launch the Add OData Service And SAPUI5 Model wizard.
- File path: <project-root>/manifest.appdescr_variant
- Action: Right-click manifest.appdescr_variant -> Adaptation Project > Add OData Service And SAPUI5 Model
**LANGUAGE**: n/a
**CODE**:
```text
# No code for this step — UI action
Right click <project-root>/manifest.appdescr_variant -> Adaptation Project > Add OData Service And SAPUI5 Model
```

**STEP**: 2 — Provide basic OData service information
**DESCRIPTION**: Enter the service name, service URI, OData version, and the SAPUI5 model name you want to add.
- Inputs:
  - OData Service name: unique identifier used in dataSources (e.g. "MyService")
  - OData Service URI: service root (e.g. "/sap/opu/odata/sap/MY_SERVICE_SRV/")
  - OData version: "V2" or "V4"
  - SAPUI5 Model name: model key for sap.ui5/models (e.g. "" for default, or "myModel" for named)
**LANGUAGE**: n/a
**CODE**:
```text
# Example wizard inputs
OData Service name: MyService
OData Service URI: /sap/opu/odata/sap/MY_SERVICE_SRV/
OData version: V2
SAPUI5 Model name: ""   # use empty string to register default unnamed model
```

**STEP**: 3 — Optional: Model settings (wizard accepts CSV of key:value pairs)
**DESCRIPTION**: Provide optionalSAPUI5 model settings as a CSV-like string. Wizard accepts pairs in the format:
  "key1":"value1","key2":"value2",
Convert them to a proper JSON object in the manifest under the model's settings property.
**LANGUAGE**: JSON
**CODE**:
```json
// Wizard input example (as accepted)
"operationMode":"Server","preload":true,

// Equivalent JSON to place under the model settings in the manifest
{
  "operationMode": "Server",
  "preload": true
}
```

**STEP**: 4 — Optional (OData V2 only): Add annotation data source
**DESCRIPTION**: If adding annotations for an OData V2 service, choose to add an annotation. Provide:
  - OData Annotation Data Source name (e.g. "MyServiceAnnotations")
  - Annotation Data Source URI (e.g. "annotations/annotations.xml" or full URI)
  - Optional annotation settings in the wizard format: "key1":"value1","key2":"value2",
Convert them into an ODataAnnotation dataSource entry in the manifest.
**LANGUAGE**: JSON
**CODE**:
```json
// Wizard input example (as accepted)
OData Annotation Data Source name: MyServiceAnnotations
OData Annotation Data Source URI: annotations/annotations.xml
Annotation settings: "localUri":"annotations/annotations.xml",

// Equivalent manifest snippet for the annotation data source
"MyServiceAnnotations": {
  "uri": "annotations/annotations.xml",
  "type": "ODataAnnotation",
  "settings": {
    "localUri": "annotations/annotations.xml"
  }
}
```

**STEP**: 5 — Resulting manifest changes (OData V2 with annotation) — complete example
**DESCRIPTION**: Example manifest.appdescr_variant snippet that shows:
- dataSources: OData service and ODataAnnotation
- sap.ui5/models: new SAPUI5 model referencing the OData dataSource
Replace names, URIs, and settings with values from your wizard inputs.
**LANGUAGE**: JSON
**CODE**:
```json
{
  "sap.app": {
    "id": "com.example.app",
    "dataSources": {
      "MyService": {
        "uri": "/sap/opu/odata/sap/MY_SERVICE_SRV/",
        "type": "OData",
        "settings": {
          "odataVersion": "2.0"
        }
      },
      "MyServiceAnnotations": {
        "uri": "annotations/annotations.xml",
        "type": "ODataAnnotation",
        "settings": {
          "localUri": "annotations/annotations.xml"
        }
      }
    }
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "MyService",
        "preload": true,
        "settings": {
          "operationMode": "Server"
        }
      }
    }
  }
}
```

**STEP**: 6 — Resulting manifest changes (OData V4, no annotation) — complete example
**DESCRIPTION**: For OData V4 services, do not add an annotation data source. The model references the OData V4 dataSource and uses odataVersion 4.0 in the dataSource settings.
**LANGUAGE**: JSON
**CODE**:
```json
{
  "sap.app": {
    "id": "com.example.app",
    "dataSources": {
      "MyServiceV4": {
        "uri": "/sap/opu/odata4/sap/MY_SERVICE_SRV/;v=4/",
        "type": "OData",
        "settings": {
          "odataVersion": "4.0"
        }
      }
    }
  },
  "sap.ui5": {
    "models": {
      "myV4Model": {
        "dataSource": "MyServiceV4",
        "preload": false,
        "settings": {
          "synchronizationMode": "None"
        }
      }
    }
  }
}
```

**STEP**: 7 — Finalize
**DESCRIPTION**: After entering inputs and/or editing the manifest, click Finish in the wizard to persist changes, or save your edited manifest.appdescr_variant file. Validate JSON syntax and that dataSource names used in sap.ui5/models match keys defined under sap.app.dataSources.
**LANGUAGE**: n/a
**CODE**:
```text
# Validation checklist
- Ensure dataSource key (e.g., "MyService") exists under sap.app.dataSources
- Ensure model.dataSource references match those keys
- For V2 + annotations: verify ODataAnnotation entry exists and URI is correct
- Save manifest.appdescr_variant and test the app
```
--------------------------------

**TITLE**: Add SAPUI5 Component Usages to manifest.appdescr_variant

**INTRODUCTION**: Quick, code-focused guide showing how to manually add SAPUI5 component usages and optional library references to an adaptation project's manifest.appdescr_variant. Use these examples to programmatically modify the manifest or to implement the same values that the "Add SAPUI5 Component Usages" wizard would produce.

**TAGS**: fiori-tools, sapui5, component-usage, manifest, adaptation, manifest.appdescr_variant, JSON

**STEP**: 1 — File location and JSON context

**DESCRIPTION**: Edit the adaptation project's manifest.appdescr_variant file. Component usages live under the "sap.ui5" section. Ensure the file is valid JSON (no trailing commas).

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.app": {
    "id": "your.app.id",
    "type": "application"
  },
  "sap.ui5": {
    "componentUsages": {
      /* component usage entries go here */
    },
    "dependencies": {
      "libs": {
        /* optional library references go here */
      }
    }
  }
}
```

**STEP**: 2 — Minimal component usage

**DESCRIPTION**: Add a simple component usage entry with an ID and the component's name. "lazy" is optional (defaults to false if omitted).

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui5": {
    "componentUsages": {
      "MyComponentUsageId": {
        "name": "my.namespace.Component"
      }
    }
  }
}
```

**STEP**: 3 — Component usage with settings and componentData

**DESCRIPTION**: Provide runtime settings and additional componentData as JSON objects (use JSON objects, not comma-separated strings). These map to the component's settings and componentData as passed during instantiation.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui5": {
    "componentUsages": {
      "MyComponentUsageWithSettings": {
        "name": "my.namespace.Component",
        "settings": {
          "key1": "value1",
          "flag": true,
          "nested": {
            "subKey": 123
          }
        },
        "componentData": {
          "custom": "data"
        }
      }
    }
  }
}
```

**STEP**: 4 — Mark component usage as lazy

**DESCRIPTION**: To load the component lazily, set "lazy": true on the component usage entry.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui5": {
    "componentUsages": {
      "MyLazyComponent": {
        "name": "my.namespace.LazyComponent",
        "lazy": true
      }
    }
  }
}
```

**STEP**: 5 — Add a library reference (optional) with lazy flag

**DESCRIPTION**: If the component requires a UI5 library, add it under "sap.ui5.dependencies.libs". Each library name is a property; set "lazy": true/false per library.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui5": {
    "dependencies": {
      "libs": {
        "sap.m": {
          "lazy": false
        },
        "sap.ui.core": {
          "lazy": true
        }
      }
    }
  }
}
```

**STEP**: 6 — Full combined example

**DESCRIPTION**: Combined example showing component usage (including settings, componentData and lazy) plus library references. Use this as a template to add one or more componentUsages and libraries.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.app": {
    "id": "your.app.id",
    "type": "application"
  },
  "sap.ui5": {
    "componentUsages": {
      "HeaderComponent": {
        "name": "com.example.Header",
        "lazy": false,
        "settings": {
          "title": "My App",
          "showLogo": true
        },
        "componentData": {
          "contextInfo": {
            "tenant": "T01"
          }
        }
      },
      "SidePanel": {
        "name": "com.example.SidePanel",
        "lazy": true
      }
    },
    "dependencies": {
      "libs": {
        "sap.m": {
          "lazy": false
        },
        "sap.ui.unified": {
          "lazy": true
        }
      }
    }
  }
}
```

**STEP**: 7 — Mapping wizard fields to manifest keys

**DESCRIPTION**: When reproducing wizard input programmatically:
- Component Usage ID -> property name under sap.ui5.componentUsages (e.g., "HeaderComponent")
- Component name -> componentUsages.<id>.name
- Lazy checkbox -> componentUsages.<id>.lazy (true/false)
- Settings input -> componentUsages.<id>.settings (JSON object)
- Additional Component Data input -> componentUsages.<id>.componentData (JSON object)
- Library reference checkbox -> add entry under sap.ui5.dependencies.libs with library name as key and optional "lazy" flag

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui5": {
    "componentUsages": {
      "<ComponentUsageId>": {
        "name": "<component.name>",
        "lazy": <true|false>,
        "settings": { /* JSON */ },
        "componentData": { /* JSON */ }
      }
    },
    "dependencies": {
      "libs": {
        "<library.name>": {
          "lazy": <true|false>
        }
      }
    }
  }
}
```
--------------------------------

**TITLE**: Manually Adding SAPUI5 Component Usages in manifest (webapp/manifest.json or manifest.appdescr_variant)

**INTRODUCTION**: This guide shows how to manually add SAPUI5 component usages and optional library references by editing the app manifest file (webapp/manifest.json or manifest.appdescr_variant). Use these snippets to programmatically create or update componentUsages, include component settings and componentData, and declare dependent libraries (with optional lazy loading).

**TAGS**: sapui5, manifest, componentUsages, manifest.json, webapp, library, lazy-loading, fiori-tools

**STEP**: 1 — Locate manifest file and JSON root

**DESCRIPTION**: Open the manifest file for your app. This is typically webapp/manifest.json or manifest.appdescr_variant depending on your project. Component usages are added under the "sap.ui5" object. If "sap.ui5" does not exist, add it as the root container for these keys.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.app": {
    "id": "your.app.namespace"
  },
  "sap.ui5": {
    /* componentUsages and dependencies go here */
  }
}
```

**STEP**: 2 — Minimal component usage entry

**DESCRIPTION**: Add a minimal component usage entry with an ID and component name. Use the component usage ID as the key under "sap.ui5.componentUsages". The "name" property is the component's module/namespace path.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui5": {
    "componentUsages": {
      "MyComponentUsageId": {
        "name": "my.namespace.Component"
      }
    }
  }
}
```

**STEP**: 3 — Add lazy loading for the component

**DESCRIPTION**: To load the component lazily, set "lazy": true inside the usage entry. This defers component loading until it is requested.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui5": {
    "componentUsages": {
      "MyComponentUsageId": {
        "name": "my.namespace.Component",
        "lazy": true
      }
    }
  }
}
```

**STEP**: 4 — Add settings and componentData (optional)

**DESCRIPTION**: Provide initialization settings for the component under "settings" and pass runtime data under "componentData". Use JSON objects for both; the wizard accepts string-keyed JSON. These are merged into the component on instantiation.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui5": {
    "componentUsages": {
      "MyComponentUsageId": {
        "name": "my.namespace.Component",
        "lazy": true,
        "settings": {
          "key1": "value1",
          "key2": "value2"
        },
        "componentData": {
          "startupParam": {
            "foo": "bar"
          },
          "anotherKey": 123
        }
      }
    }
  }
}
```

**STEP**: 5 — Add a library dependency (optional) and mark library lazy

**DESCRIPTION**: If the component requires a library, declare it under "sap.ui5.dependencies.libs". You can set a library-level lazy load by including a "lazy": true flag on the library entry. This ensures the library is not preloaded.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui5": {
    "dependencies": {
      "libs": {
        "my.custom.library": {
          "lazy": true
        },
        "sap.m": {}
      }
    },
    "componentUsages": {
      "MyComponentUsageId": {
        "name": "my.namespace.Component",
        "lazy": true,
        "settings": {
          "key1": "value1"
        },
        "componentData": {
          "example": "data"
        }
      }
    }
  }
}
```

**STEP**: 6 — Complete example (manifest fragment)

**DESCRIPTION**: Full manifest fragment showing component usage with settings, componentData, and a library dependency. Paste or merge this into webapp/manifest.json (or manifest.appdescr_variant) under the top-level object.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.app": {
    "id": "your.app.namespace",
    "applicationVersion": {
      "version": "1.0.0"
    }
  },
  "sap.ui5": {
    "dependencies": {
      "libs": {
        "my.custom.library": { "lazy": true },
        "sap.m": {}
      }
    },
    "componentUsages": {
      "MyComponentUsageId": {
        "name": "my.namespace.Component",
        "lazy": true,
        "settings": {
          "theme": "sap_fiori_3",
          "mode": "compact"
        },
        "componentData": {
          "startupParameters": {
            "userId": "42"
          }
        }
      }
    }
  }
}
```

**STEP**: 7 — Save and test

**DESCRIPTION**: Save the manifest file, rebuild or serve your app, and verify the component is instantiated when referenced (or loaded lazily when requested). Use browser console or network traces to confirm lazy loading behavior and that dependent libraries are loaded as configured.

**LANGUAGE**: None

**CODE**:
```text
# No code block—manual steps:
# 1. Save manifest file (webapp/manifest.json or manifest.appdescr_variant).
# 2. Run or rebuild your app (e.g., npm start / ui5 serve).
# 3. Inspect network/console to confirm component and library loading.
```
--------------------------------

**TITLE**: Change Inbound (Fiori Tools - Adaptation Project)

**INTRODUCTION**: How to change the title, subtitle and icon for an existing inbound intent in a Fiori Tools adaptation project. Covers the GUI flow (right-click command) and manual / programmatic edits to manifest.appdescr_variant.

**TAGS**: fiori-tools, adaptation, inbound, manifest.appdescr_variant, SAP Fiori, UI5, manifest, json

**STEP**: 1 — Open adaptation command

**DESCRIPTION**: In the Fiori Tools Adaptation Project, locate the manifest.appdescr_variant file in the adaptation project. Right-click the file and choose "Adaptation Project - Change Inbound" to start the interactive change-inbound wizard.

**LANGUAGE**: bash

**CODE**:
```bash
# example: open the adaptation file in your editor (file name must be manifest.appdescr_variant)
ls -l manifest.appdescr_variant
```

**STEP**: 2 — Select the inbound ID

**DESCRIPTION**: The wizard will present a list of inbound IDs defined in the adaptation project. Pick the inbound (intent) you want to update (example inbound id: DisplayObject-display).

**LANGUAGE**: text

**CODE**:
```text
# Example inbound id shown in the wizard:
DisplayObject-display
```

**STEP**: 3 — Enter new title, subtitle, and icon using the wizard

**DESCRIPTION**: In the dialog, enter the new title, subtitle and icon path (e.g. sap-icon://action). Click Finish to apply changes. The tool will update manifest.appdescr_variant accordingly.

**LANGUAGE**: JSON

**CODE**:
```json
// BEFORE (excerpt from manifest.appdescr_variant)
{
  "sap.app": {
    "crossNavigation": {
      "inbounds": {
        "DisplayObject-display": {
          "semanticObject": "DisplayObject",
          "action": "display",
          "title": "Old Title",
          "subTitle": "Old Subtitle",
          "icon": "sap-icon://old-icon"
        }
      }
    }
  }
}
```

**LANGUAGE**: JSON

**CODE**:
```json
// AFTER (the wizard updates these fields)
{
  "sap.app": {
    "crossNavigation": {
      "inbounds": {
        "DisplayObject-display": {
          "semanticObject": "DisplayObject",
          "action": "display",
          "title": "New Title",
          "subTitle": "New Subtitle",
          "icon": "sap-icon://new-icon"
        }
      }
    }
  }
}
```

**STEP**: 4 — Finish and generate project

**DESCRIPTION**: Click Finish to let the adaptation tool generate the updated project artifacts. The manifest.appdescr_variant file will be updated with the new title/subtitle/icon values.

**LANGUAGE**: text

**CODE**:
```text
# No code: finish the wizard. Confirm manifest.appdescr_variant contains your changes.
cat manifest.appdescr_variant | sed -n '1,200p'
```

**STEP**: 5 — Optional: Manual edit in manifest.appdescr_variant

**DESCRIPTION**: If you prefer to edit the file directly, open manifest.appdescr_variant and update the target inbound's title, subTitle (or subTitle key name you use), and icon values exactly as shown in the JSON structure.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.app": {
    "crossNavigation": {
      "inbounds": {
        "YourInboundID": {
          "semanticObject": "YourObject",
          "action": "yourAction",
          "title": "Your new title",
          "subTitle": "Your new subtitle",
          "icon": "sap-icon://your-icon"
        }
      }
    }
  }
}
```

**STEP**: 6 — Optional: Programmatic update (Node.js)

**DESCRIPTION**: Update manifest.appdescr_variant programmatically (e.g., in a script or generator). Example Node.js script reads the JSON, updates the chosen inbound, and writes the file back.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// update-inbound.js
const fs = require('fs').promises;
const filePath = './manifest.appdescr_variant';
const inboundId = 'DisplayObject-display';

async function updateInboundTitle(newTitle, newSubTitle, newIcon) {
  const raw = await fs.readFile(filePath, 'utf8');
  const manifest = JSON.parse(raw);

  const inbounds =
    manifest?.['sap.app']?.crossNavigation?.inbounds;

  if (!inbounds || !inbounds[inboundId]) {
    throw new Error(`Inbound ID ${inboundId} not found in ${filePath}`);
  }

  inbounds[inboundId].title = newTitle;
  inbounds[inboundId].subTitle = newSubTitle;
  inbounds[inboundId].icon = newIcon;

  await fs.writeFile(filePath, JSON.stringify(manifest, null, 2), 'utf8');
  console.log(`Updated inbound ${inboundId} in ${filePath}`);
}

// Usage example:
updateInboundTitle('New Title', 'New Subtitle', 'sap-icon://add')
  .catch(err => { console.error(err); process.exit(1); });
```
--------------------------------

**TITLE**: Check Consistency of Release State (SAPUI5 Component Consistency ATC CI_UI5_COMP)

**INTRODUCTION**: Verify that the release state declared in your UI5 app (manifest.json) matches the deployed BSP/ABAP back-end and that the app and its OData services have consistent release contracts (Extend = C0, Use System Internally = C1). Use the ATC check CI_UI5_COMP to detect mismatches before release.

**TAGS**: SAPUI5, ATC, CI_UI5_COMP, manifest.json, C0, C1, BSP, ABAP, release-state, cloudDevAdaptationStatus

STEP: 1 — Inspect local manifest.json for release state

DESCRIPTION: Confirm the local UI5 app manifest.json declares the release state under sap.fiori/cloudDevAdaptationStatus and that OData services used by the app are declared under sap.app/dataSources and sap.ui5/models. Typical location: webapp/manifest.json.

LANGUAGE: JSON

CODE:
```json
{
  "sap.app": {
    "id": "com.example.myapp",
    "type": "application",
    "applicationVersion": { "version": "1.0.0" },
    "dataSources": {
      "mainService": {
        "uri": "/sap/opu/odata/sap/Z_MY_SERVICE_SRV/",
        "type": "OData",
        "settings": { "odataVersion": "2.0" }
      }
    }
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "mainService",
        "settings": {
          "useBatch": true
        }
      }
    }
  },
  "sap.fiori": {
    "cloudDevAdaptationStatus": "C0"   /* Allowed values: "C0" (Extend), "C1" (Use System Internally) */
  }
}
```

STEP: 2 — Verify intended contract values and meanings

DESCRIPTION: Use these rules when setting cloudDevAdaptationStatus:
- "C0" = Extend (app is released for adaptation projects)
- "C1" = Use System Internally (service stable, no extension)
Ensure your app is released with C0 when you intend it to be adapted in S/4HANA Cloud and Cloud Foundry scenarios; ensure backend OData services remain C1 (stable).

LANGUAGE: plain

CODE:
```text
Rules:
- App release: sap.fiori/cloudDevAdaptationStatus = "C0" for Extend (apps intended for adaptation)
- Service contract: OData services used by the app must be stable ("C1") in the back-end
```

STEP: 3 — Compare local manifest.json with deployed BSP/ABAP manifest.json

DESCRIPTION: Fetch the deployed manifest.json from the BSP repository (or from your ABAP repository) and compare it with the local file to detect deployment or manual-edit issues. Typical approaches:
- If using git-based workflow, compare commits or branches.
- If accessing BSP via SAP GUI: open the BSP application and inspect the webapp/manifest.json.
- Use a file diff tool or git diff to highlight mismatches.

LANGUAGE: Shell / CLI

CODE:
```bash
# Example: compare local file with a file exported from BSP
# 1) Export deployed manifest.json to ./deployed/manifest.json (method depends on your environment)
# 2) Run a diff locally
git diff --no-index webapp/manifest.json deployed/manifest.json

# Or a plain diff
diff -u webapp/manifest.json deployed/manifest.json
```

STEP: 4 — Run the ATC check CI_UI5_COMP in ABAP

DESCRIPTION: Execute the SAPUI5 Component Consistency ATC check (CI_UI5_COMP) on the ABAP system that hosts your BSP repository to validate:
- cloudDevAdaptationStatus in the BSP app equals the back-end app/service settings
- consistency between UI5 app and OData service release states
You can run ATC interactively in SAP GUI or integrate it into your CI pipeline (ABAP CI or scheduled ATC run).

LANGUAGE: plain (SAP GUI steps)

CODE:
```text
SAP GUI (manual):
1. Open transaction ATC
2. Choose "Run Checks" -> "Execute"
3. Select object/package that contains the BSP application or specify target system
4. Choose or create a Check Variant that includes the check ID: CI_UI5_COMP
5. Execute and inspect results for CI_UI5_COMP findings

Result: The ATC check will report inconsistencies such as:
- Mismatch between manifest.json in BSP and back-end
- App set to C0 but used services are not C1 (or vice versa)
```

STEP: 5 — Interpret ATC findings and remediate

DESCRIPTION: For each CI_UI5_COMP finding:
- If manifest.json in BSP differs from source: redeploy the correct webapp (BSP) or update the deployed manifest via transport.
- If app is C0 but services are not C1: coordinate with backend owners to ensure those services are declared/kept stable (C1), or change app release if appropriate.
- If the back-end metadata or registration is wrong, update the back-end configuration or service contract accordingly.

LANGUAGE: plain

CODE:
```text
Common remediations:
- Update local webapp/manifest.json to desired value and redeploy to BSP.
- Re-deploy UI5 app to ABAP (BSP) ensuring manifest.json isn't modified during build/deployment.
- For OData contract issues, update service contract in back-end or register a stable service version (C1).
- Re-run ATC CI_UI5_COMP to confirm issues are resolved.
```

STEP: 6 — Add CI gate (recommended)

DESCRIPTION: Add CI_UI5_COMP to your ABAP/ATC CI pipeline so that every deployment or transport triggers CI_UI5_COMP and fails the build if inconsistencies are detected.

LANGUAGE: plain

CODE:
```text
CI pipeline recommendations:
- Include an ATC run step that executes the Check Variant containing CI_UI5_COMP.
- Fail the pipeline on ATC findings of type "Error" or "High".
- Export ATC report (XML/HTML) for traceability.
```

STEP: 7 — References and further reading

DESCRIPTION: Official docs and deeper references for release contracts, manifest.json, and CI_UI5_COMP details. Use these to implement organization-specific rules and to understand contractual semantics.

LANGUAGE: plain

CODE:
```text
References:
- ATC Check SAPUI5 Component Consistency: https://ui5.sap.com/#/topic/a71400bc82284449bb6c680a4516cc63
- Extend (C0) contract: https://help.sap.com/docs/SAP_S4HANA_CLOUD/... (Extend C0)
- Use System Internally (C1) contract: https://help.sap.com/docs/SAP_S4HANA_CLOUD/... (C1)
- manifest.json descriptor: https://ui5.sap.com/#/topic/be0cf40f61184b358b5faedaec98b2da
- Deploy UI5 to S/4HANA Cloud guide: https://help.sap.com/docs/SAP_S4HANA_CLOUD/6aa39f1a...
```
--------------------------------

**TITLE**: Check Whether an Adaptation Project Is Up-To-Date with Base App Upgrades (ATC check UI5_BASE_APP_VERS)

**INTRODUCTION**: Use the ABAP Test Cockpit (ATC) check UI5_BASE_APP_VERS to detect adaptation projects that use an older version of their SAP Fiori base app. Create an ATC variant including this check, run it for your packages, and act on the reported messages (upgrade, redeploy, or migrate to successor app).

**TAGS**: fiori-tools, atc, abap, ui5, adaptation, base-app, upgrade, sap-btp

**STEP**: 1 — Create ATC check variant and add the UI5_BASE_APP_VERS check

**DESCRIPTION**: In ABAP Development Tools (ADT) create an ATC check variant and add the check with ID UI5_BASE_APP_VERS (Compare Used and Current Version of Base App). This variant will be used to scan packages containing adaptation projects.

**LANGUAGE**: text

**CODE**:
```text
Example ATC variant creation (ADT GUI steps):
1. In Eclipse (ADT) open: ABAP → Utilities → ATC → Configure ATC Checks (or use ATC Administration).
2. Create new Check Variant:
   - Variant Name: Z_UI5_BASE_APP_VERS_CHECK
   - Description: Check that adaptation projects use the latest base app version
3. Add Check by ID:
   - Search/Add check: UI5_BASE_APP_VERS
   - Ensure the check is enabled in the variant
4. Save and transport variant if required
```

**STEP**: 2 — Run the ATC check for your packages

**DESCRIPTION**: Execute ATC using the created variant for all packages that may contain adaptation projects. Use ADT/ATC run dialog and specify package(s) or runs on request.

**LANGUAGE**: text

**CODE**:
```text
Running ATC in ADT (GUI steps):
1. In Eclipse (ADT) open: ABAP → Utilities → ATC → Run ATC
2. Select Check Variant: Z_UI5_BASE_APP_VERS_CHECK
3. Define Scope:
   - Object Selection: Packages (list your adaptation project packages)
   - Example packages: ZUI5_ADAPT_01, ZUI5_ADAPT_02
4. Start run and wait for results
```

**STEP**: 3 — Interpret messages and take actions (new base app version available)

**DESCRIPTION**: If ATC reports "For the used base app <base app ID> a new version is available, please update", identify changes and then update the adaptation project. Use the What’s New viewer to inspect changes by app ID, test changes in Business Application Studio (Visual Editor), and redeploy when ready.

**LANGUAGE**: text

**CODE**:
```text
Inspect what's changed:
1. Open What's New Viewer:
   - https://help.sap.com/whats-new/
2. Filter:
   - Category = App
   - Technical Objects Name = <base app ID> (example: F3331)
3. Review release notes and impact

Update adaptation project:
1. In SAP Business Application Studio (BAS):
   - Open your adaptation project in the Visual Editor
   - Visual Editor automatically fetches the latest base app version
   - Test all UI functionality and customizations against the new base app
2. If tests pass:
   - Re-deploy the adaptation project
   - Optionally refresh your IAM app after deployment
```

**STEP**: 4 — Interpret messages and take actions (base app deleted / successor app)

**DESCRIPTION**: If ATC reports "The base app <base app ID> was deleted, please check the successor app", you should plan migration to the successor. You can keep the current adaptation project running (error does not block runtime) but SAP recommends creating a new adaptation based on the successor app.

**LANGUAGE**: text

**CODE**:
```text
If base app deleted:
1. Note: Running adaptations are not immediately affected if you don't redeploy.
2. Recommended action:
   - Identify successor app (check What's New or SAP release notes)
   - Create a new adaptation project based on the successor app in BAS
   - Re-implement or migrate customizations as required
3. Test and deploy the new adaptation project
```

**STEP**: 5 — References and compatibility rules

**DESCRIPTION**: Use the provided SAP documentation links for detailed procedures and follow upgrade-safe compatibility rules to avoid conflicts during upgrades.

**LANGUAGE**: text

**CODE**:
```text
Important references:
- ATC check description and usage: https://help.sap.com/docs/SAP_S4HANA_CLOUD/25cf71e63940453397a32dc2b7676947/438842e71bfa4ff09443562f5ce2282d.html
- ATC quality checking: https://help.sap.com/docs/SAP_S4HANA_CLOUD/25cf71e63940453397a32dc2b7676947/4ec1a1126e391014adc9fffe4e204223.html
- Checking quality of ABAP code with ATC: https://help.sap.com/docs/SAP_S4HANA_CLOUD/25cf71e63940453397a32dc2b7676947/4ec5711c6e391014adc9fffe4e204223.html
- Upgrade Safe Compatibility Rules (local doc reference): upgrade-safe-compatibility-rules-53706e2.md
```
--------------------------------

**TITLE**: Create and Use a Controller Extension (SAP Fiori / SAPUI5)

**INTRODUCTION**: Step-by-step, code-focused instructions and examples to create a controller extension for SAP Fiori / SAPUI5 applications, where to place files, how to override lifecycle methods, add new methods, wire fragment XML event handlers to the extension, and important constraints about project structure.

**TAGS**: fiori-tools, controller-extension, SAPUI5, Fiori-elements, changes, webapp, coding

**STEP**: Prerequisites & constraints

**DESCRIPTION**: Verify the application type and view loading mode required for controller extensions. Do not change the required folder structure.

**LANGUAGE**: Text

**CODE**:
```text
- Controller extensions are supported only for:
  - SAP Fiori elements-based applications OR freestyle SAPUI5 applications
  - Applications using asynchronous views (XMLView with async loading)

- Important filesystem constraint:
  - All custom controller extension JS files must be placed in:
    <project-root>/webapp/changes/coding/
  - An associated change descriptor file is created in:
    <project-root>/webapp/changes/
  - Do NOT create additional folders at higher levels. Doing so invalidates the project structure and prevents deployment.
```

**STEP**: Create controller extension via UI adaptation editor

**DESCRIPTION**: Open the UI Adaptation editor and generate a controller extension file. This step describes where the editor creates files.

**LANGUAGE**: Text

**CODE**:
```text
1. Right-click the project main folder, the webapp folder, or manifest.appdescr_variant and select:
   - Preview Application -> start-editor
2. In the canvas (UI Adaptation mode):
   - Select the view or element to extend
   - Choose "Extend with Controller" (or use "Add Controller to Page" quick action for page-level extension)
3. In the dialog, provide a name for the controller extension.

Resulting files and locations created by the editor:
- Controller extension JS:
  <project-root>/webapp/changes/coding/<YourControllerExtension>.js
- Associated change descriptor:
  <project-root>/webapp/changes/<YourControllerExtension>.controllerExtension.change
```

**STEP**: Controller extension JS structure and examples

**DESCRIPTION**: Implement override lifecycle methods inside the override block and put new methods outside the override block. Example shows typical sap.ui.define-based controller extension structure.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// File: webapp/changes/coding/MyControllerExtension.js
sap.ui.define([
  "sap/ui/core/mvc/ControllerExtension"
], function (ControllerExtension) {
  "use strict";

  return ControllerExtension.extend("my.app.controller.extensions.MyControllerExtension", {
    // Methods that override base controller lifecycle hooks or lifecycle callbacks
    override: {
      onInit: function () {
        // Called before/after base controller onInit (depending on usage).
        // Put override logic here.
      },
      onExit: function () {
        // Optional lifecycle override
      }
    },

    // New custom methods MUST be defined outside the override block.
    // These methods are visible to views/fragments when referenced using the .extension.<namespace> prefix.
    onCustomAction: function (oEvent) {
      // Custom handler logic
      // Use oEvent.getSource(), etc.
    }
  });
});
```

**STEP**: Example of associated change descriptor (created by the editor)

**DESCRIPTION**: The adaptation editor generates a change descriptor that references the controller extension script. The file name and exact content may vary based on the editor/generator; below is a representative minimal example to show the reference pattern and expected location.

**LANGUAGE**: JSON

**CODE**:
```json
// File: webapp/changes/MyControllerExtension.controllerExtension.change
{
  "fileName": "MyControllerExtension.controllerExtension.change",
  "layer": "CUSTOMER",
  "support": {
    "generator": "sap.ui.rta"
  },
  "content": {
    "controllerExtension": "changes/coding/MyControllerExtension.js"
  }
}
```

**STEP**: Wire fragment XML event handlers to the controller extension

**DESCRIPTION**: To assign event handlers from an .xml fragment to the controller extension, prefix the handler name in the fragment with .extension.<controller extension namespace>. Then save the fragment XML. Example shows a button press event wired to the extension method.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Example fragment: webapp/fragments/MyFragment.fragment.xml -->
<m:FragmentDefinition xmlns="sap.ui.core" xmlns:m="sap.m">
  <m:Button text="Do Action"
            press=".extension.my.app.controller.extensions.MyControllerExtension.onCustomAction" />
</m:FragmentDefinition>
```

**STEP**: Implementing/overriding template-provided methods (Fiori elements)

**DESCRIPTION**: For List Report, Object Page and Overview Page templates, the created .js often contains generated methods from the template. Use the override block to override lifecycle methods and add custom methods outside override for template hook usage.

**LANGUAGE**: Text

**CODE**:
```text
- For List Report/Object Page/Overview Page:
  - The generated .js file may include template-specific methods you can reuse or override.
  - Put your overrides inside override: { ... }.
  - Add additional helper/event methods outside override: they are used by fragments and UI elements.

- For Analytical List Page:
  - The generated .js file typically contains only lifecycle overrides; add any extra methods outside the override block.
```

**STEP**: Reloading to load changes

**DESCRIPTION**: After adding or modifying extension files, reload the adaptation editor and application preview to load the added change.

**LANGUAGE**: Text

**CODE**:
```text
- Reload the browser tab running:
  - The adaptation project editor, and
  - The application preview (if opened in a separate tab).
- This ensures the editor and the app pick up the new controller extension and its change descriptor.
```

**STEP**: Best practices and reminders

**DESCRIPTION**: Quick reminders to avoid deployment problems and name clashes.

**LANGUAGE**: Text

**CODE**:
```text
- Controller extensions delivered by an adaptation project are added to the reserved .extension namespace of the controller to avoid name clashes.
- Keep all custom business logic files in: webapp/changes/coding/
- Do not create additional folders above 'changes' or 'coding'.
- Use the .extension.<fully-qualified-controller-extension-namespace>.<methodName> prefix in fragments/XML to call extension methods.
```
--------------------------------

**TITLE**: Controller Extensions — Fiori Tools (SAPUI5 / Adaptation Editor)

**INTRODUCTION**: Instructions and ready-to-use code examples for creating controller extensions in an SAP Fiori / SAPUI5 project using the Adaptation Editor. Shows file locations, a JavaScript skeleton for controller extensions (with override section), how the associated change file is referenced, and how to wire fragment event handlers to the extension methods.

**TAGS**: fiori-tools, sapui5, controller-extension, adaptation, webapp, changes, coding, fragment, manifest.appdescr_variant

**STEP**: 1 — Preconditions and where to start

**DESCRIPTION**: Ensure your project and view are compatible before creating a controller extension. Open the Adaptation Editor from the manifest descriptor file.

- Requirements:
  - Application type: SAP Fiori elements based application or freestyle SAPUI5 application
  - Views: Must use asynchronous views
- Open Adaptation Editor:
  - File: webapp/manifest.appdescr_variant
  - Right-click → Open Adaptation Editor (opens canvas preview)

**LANGUAGE**: Text

**CODE**:
```
No code. Preconditions:
- App type: Fiori elements or freestyle SAPUI5
- Views must be asynchronous
- Open: webapp/manifest.appdescr_variant -> Right-click -> Open Adaptation Editor
```

**STEP**: 2 — Create controller extension via Adaptation Editor

**DESCRIPTION**: From the Adaptation Editor canvas, select the view or element to extend and choose "Extend with Controller" (or use "Add Controller to Page" quick action). Provide a name for the controller extension. The editor will create the JavaScript file and an associated change file.

- Created files (example):
  - JavaScript extension file -> webapp/changes/coding/<yourName>.ControllerExtension.js
  - Associated change file -> webapp/changes/<yourName>.codeExt.change (references the .js file)

**LANGUAGE**: Text

**CODE**:
```
Adaptation Editor UI steps:
1. Canvas preview -> select view or element
2. Project context menu -> Extend with Controller (or Add Controller to Page)
3. Enter controller extension name -> file created at:
   - webapp/changes/coding/<YourControllerExtension>.js
   - webapp/changes/<YourControllerExtension>.codeExt.change
```

**STEP**: 3 — Controller extension JavaScript skeleton (place new methods outside override; lifecycle overrides inside override)

**DESCRIPTION**: Use this skeleton for a controller extension file. New public methods must be defined outside the override section. Lifecycle and base-method overrides must be placed inside the override object. Save this file to webapp/changes/coding/.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// File: webapp/changes/coding/my.sample.ControllerExtension.js
sap.ui.define([], function () {
  "use strict";

  return {
    // Public methods added by this extension.
    // These are callable from fragments using:
    //   .extension.<namespace>.<methodName>
    publicMethod: function (oEvent) {
      // Example handler implementation
      console.log("publicMethod called", oEvent);
      // Add your extension logic here
    },

    // Methods that override base controller lifecycle or template methods.
    // Place lifecycle overrides here. Each override replaces the base method.
    override: {
      onInit: function () {
        // Initialization logic for the extension
        console.log("Controller extension onInit");
        // Note: if you need to call the original/base method, do so only if supported by your base controller
      },

      onBeforeRendering: function () {
        // Optional override
      },

      onAfterRendering: function () {
        // Optional override
      },

      onExit: function () {
        // Optional override
      }
    }
  };
});
```

**STEP**: 4 — Example of the associated change file (conceptual)

**DESCRIPTION**: When the adaptation editor creates a controller extension, it also creates a change metadata file that references the created .js file. The exact properties vary by project/tooling; below is a minimal conceptual example to illustrate the reference relationship. Keep change/coding as the folder for code files — do not move them to upper-level folders.

**LANGUAGE**: JSON

**CODE**:
```json
// File (example): webapp/changes/my.sample.ControllerExtension.codeExt.change
{
  "fileName": "changes/coding/my.sample.ControllerExtension.js",
  "type": "codeExt",
  "reference": "your.app.namespace.Component",
  "module": "changes/coding/my.sample.ControllerExtension.js"
}
```

**STEP**: 5 — Assign fragment event handlers to controller extension methods (XML fragment example)

**DESCRIPTION**: Manually wire fragment event handlers to the controller extension by prefixing with .extension.<controller extension namespace>. Save the fragment XML in your project (e.g., webapp/fragment/).

**LANGUAGE**: XML

**CODE**:
```xml
<!-- File: webapp/fragment/MyFragment.fragment.xml -->
<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core">
  <!-- Call extension method 'publicMethod' in namespace 'my.sample.ControllerExtension' -->
  <Button text="Execute" press=".extension.my.sample.ControllerExtension.publicMethod" />
</core:FragmentDefinition>
```

**STEP**: 6 — Rules and best practices

**DESCRIPTION**: Important rules to follow after creating controller extensions.

**LANGUAGE**: Text

**CODE**:
```
- Lifecycle override methods must live in the 'override' section of the extension file.
- New methods (event handlers, helpers) must be defined outside 'override' so they can be called from fragments.
- All custom code files for controller extensions and any helper/business logic MUST be placed in:
    webapp/changes/coding/
  Do NOT create additional folders at upper levels (this can invalidate the project structure and block deployment).
- For list report, object page, and overview page templates: the generated .js may include template-specific methods you can override.
- For analytical list page templates: .js typically contains lifecycle methods only.
```

**STEP**: 7 — Apply changes and reload

**DESCRIPTION**: After saving extension files and fragment changes, return to the Adaptation Editor canvas. You will be prompted to reload the project for controller extension changes to be applied. A loading indicator appears with the message:
"Loading Adaptation Editor with Controller Extension changes".

**LANGUAGE**: Text

**CODE**:
```
1. Save files:
   - webapp/changes/coding/<YourControllerExtension>.js
   - webapp/fragment/<YourFragment>.fragment.xml
2. Switch back to Adaptation Editor canvas
3. Confirm reload when prompted
   Loading message: "Loading Adaptation Editor with Controller Extension changes"
```
--------------------------------

**TITLE**: Create and Use Control Variants (Views) with VariantManagement / SmartVariantManagement

**INTRODUCTION**: This guide shows how to include VariantManagement and SmartVariantManagement controls in an SAPUI5 XML view, attach simple event handlers in the controller, and how these controls interact with the Adaptation Editor for creating, loading, changing, and saving variants (views). Use this as a code-focused reference to prepare an app for UI adaptation and to react to variant selection in code.

**TAGS**: sapui5, variants, VariantManagement, SmartVariantManagement, UI adaptation, adaptation-editor, XML, JavaScript

**STEP**: 1 — Prerequisites and version requirements

**DESCRIPTION**: Verify SAPUI5 version compatibility and ensure the app is enabled for UI adaptation. Minimum versions:
- sap.ui.fl.variants.VariantManagement — SAPUI5 1.73+
- sap.ui.comp.smartvariants.SmartVariantManagement — SAPUI5 1.90+

Enable your app for UI adaptation (follow SAP guidance: "Enable Your App for UI Adaptation"). Make sure the view that will be adapted contains the VariantManagement or SmartVariantManagement control(s).

**LANGUAGE**: Plain text

**CODE**:
```text
Minimum SAPUI5 versions:
- sap.ui.fl.variants.VariantManagement: 1.73 or higher
- sap.ui.comp.smartvariants.SmartVariantManagement: 1.90 or higher

Enable UI adaptation for your app per SAP documentation:
- "Enable Your App for UI Adaptation" (UI5 docs / Fiori tools)
- Ensure you include the VariantManagement or SmartVariantManagement control in the XML view you will adapt.
```

**STEP**: 2 — Add sap.ui.fl.variants.VariantManagement to an XML view

**DESCRIPTION**: Place the VariantManagement control in your XML view. Use the sap.ui.fl.variants namespace and an explicit id so you can obtain the control in the controller.

File path example: webapp/view/Main.view.xml

**LANGUAGE**: XML

**CODE**:
```xml
<mvc:View
  controllerName="my.app.controller.Main"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  xmlns:fl="sap.ui.fl.variants">
  <App>
    <Page id="page">
      <headerContent>
        <!-- VariantManagement for controlling view variants -->
        <fl:VariantManagement id="variantMgmt" />
      </headerContent>

      <content>
        <!-- Page content to be varied -->
        <Panel id="panel">
          <Text text="Main content area" />
        </Panel>
      </content>
    </Page>
  </App>
</mvc:View>
```

**STEP**: 3 — Add sap.ui.comp.smartvariants.SmartVariantManagement (optional)

**DESCRIPTION**: If you use the SmartVariantManagement control (common with SmartControls), include it similarly. Use an id and namespace to reference it from the controller.

File path example: webapp/view/Main.view.xml (same view or specific control area)

**LANGUAGE**: XML

**CODE**:
```xml
<mvc:View
  controllerName="my.app.controller.Main"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  xmlns:sv="sap.ui.comp.smartvariants">
  <App>
    <Page id="page2">
      <headerContent>
        <!-- SmartVariantManagement for smart controls -->
        <sv:SmartVariantManagement id="smartVariantMgmt" />
      </headerContent>
      <content>
        <!-- Smart control(s) associated with the SmartVariantManagement -->
      </content>
    </Page>
  </App>
</mvc:View>
```

**STEP**: 4 — Attach a variant selection handler in the controller

**DESCRIPTION**: Use the controller to react when users select a variant. Attach to the VariantManagement 'select' event and read the selected key parameter. This allows you to run custom code whenever the active view/variant changes.

File path example: webapp/controller/Main.controller.js

**LANGUAGE**: JavaScript

**CODE**:
```javascript
sap.ui.define([
  "sap/ui/core/mvc/Controller"
], function (Controller) {
  "use strict";

  return Controller.extend("my.app.controller.Main", {
    onInit: function () {
      // Get VariantManagement by view id and attach select handler
      var oVariantMgmt = this.byId("variantMgmt");
      if (oVariantMgmt) {
        oVariantMgmt.attachSelect(this.onVariantSelected.bind(this));
      }

      // If using SmartVariantManagement, you can attach to events similarly
      var oSmartVariantMgmt = this.byId("smartVariantMgmt");
      if (oSmartVariantMgmt) {
        oSmartVariantMgmt.attachExecute(this.onSmartVariantExecute.bind(this));
      }
    },

    onVariantSelected: function (oEvent) {
      // 'key' parameter contains the selected variant key
      var sKey = oEvent.getParameter && oEvent.getParameter("key");
      // Implement logic to react to the selected variant
      console.log("Variant selected:", sKey);
      // e.g., load variant-specific UI state, enable/disable controls, etc.
    },

    onSmartVariantExecute: function (oEvent) {
      // SmartVariantManagement may raise events such as 'execute' (behavior may differ)
      console.log("SmartVariantManagement event:", oEvent.getId());
    }
  });
});
```

**STEP**: 5 — Use the Adaptation Editor to create/load/change/save variants (manual step)

**DESCRIPTION**: The Adaptation Editor UI is used to create and manage control variants (views). The process is the same as the key user scenario. Differences:
- You do not need to publish changes; variants are saved as ordinary changes inside the current adaptation project.
- The Adaptation Editor will discover VariantManagement / SmartVariantManagement controls in the view and provide UI flows to create, load, and save variants.

Action:
- Open the Adaptation Editor in your Fiori launchpad / development environment.
- Locate your control (the VariantManagement or SmartVariantManagement control).
- Create a new variant, switch variants, and save changes. The control will persist the current selection and associated UI changes as a variant.

**LANGUAGE**: Plain text

**CODE**:
```text
Procedure summary:
1. Open Adaptation Editor.
2. Select the UI control whose variants you want to define (the view must contain VariantManagement or SmartVariantManagement).
3. Create / edit / save variants (called "views" in the UI).
4. Changes are stored as ordinary changes in the adaptation project (no publish required).
Reference: Follow "Creating and Adapting Views" key user scenario for step-by-step UI guidance.
```

**STEP**: 6 — Notes and references

**DESCRIPTION**: Keep these references and compatibility notes for implementation and further details.

**LANGUAGE**: Plain text

**CODE**:
```text
Notes:
- VariantManagement API and SmartVariantManagement API details:
  - VariantManagement: SAPUI5 docs (sap.ui.fl.variants.VariantManagement) — requires SAPUI5 1.73+
  - SmartVariantManagement: SAPUI5 docs (sap.ui.comp.smartvariants.SmartVariantManagement) — requires SAPUI5 1.90+

- For enabling flexibility / UI adaptation in your application, consult:
  - "SAPUI5 Flexibility: Enable Your App for UI Adaptation" (UI5 documentation)
  - "Creating and Adapting Views" (key user scenario) for Adaptation Editor workflow

- File examples used in this guide:
  - webapp/view/Main.view.xml
  - webapp/controller/Main.controller.js
```
--------------------------------

**TITLE**: Create Control Variants (Views) — UI Adaptation with VariantManagement / SmartVariantManagement

**INTRODUCTION**: Show required setup and minimal code examples to enable UI adaptation for control variants (views) in an SAPUI5 application. Includes bootstrap/manifest configuration and XML view examples for sap.ui.fl.variants.VariantManagement and sap.ui.comp.smartvariants.SmartVariantManagement. Use the Adaptation Editor to create, load, change, and save variants; no publish step is required for adaptation-project changes.

**TAGS**: sapui5, fiori-tools, ui-adaptation, variants, VariantManagement, SmartVariantManagement, xml, manifest

**STEP**: Prerequisites — enable flexibility libraries in bootstrap and manifest

**DESCRIPTION**: Ensure the application loads the required libraries (sap.ui.fl and sap.ui.comp) so the Adaptation Editor and Variant controls are available. Add library declarations in index.html bootstrap and manifest.json dependencies.

**LANGUAGE**: HTML

**CODE**:
```html
<!-- File: webapp/index.html -->
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Variant Demo</title>
    <script
      id="sap-ui-bootstrap"
      src="https://sapui5.hana.ondemand.com/resources/sap-ui-core.js"
      data-sap-ui-theme="sap_fiori_3"
      data-sap-ui-libs="sap.m,sap.ui.comp,sap.ui.fl"
      data-sap-ui-resourceroots='{"my.app": "./"}'>
    </script>
  </head>
  <body class="sapUiBody" id="content">
    <div data-sap-ui-component data-name="my.app" data-settings='{}'></div>
  </body>
</html>
```

**LANGUAGE**: JSON

**CODE**:
```json
// File: webapp/manifest.json (excerpt)
// Ensure sap.ui.fl and sap.ui.comp are in dependencies so tooling and runtime know the libs are used.
{
  "sap.ui5": {
    "dependencies": {
      "minUI5Version": "1.88.0",
      "libs": {
        "sap.m": {},
        "sap.ui.comp": {},
        "sap.ui.fl": {}
      }
    },
    "rootView": {
      "viewName": "my.app.view.Main",
      "type": "XML",
      "id": "app"
    }
  }
}
```

**STEP**: Add VariantManagement control to an XML view

**DESCRIPTION**: Add the VariantManagement control to the XML view. This registers a Variant container that the Adaptation Editor can adapt and that end users can use to switch or maintain variants (views). Use the sap.ui.fl.variants.VariantManagement control (XML namespace prefix fl).

**LANGUAGE**: XML

**CODE**:
```xml
<!-- File: webapp/view/Main.view.xml -->
<mvc:View
  controllerName="my.app.controller.Main"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  xmlns:fl="sap.ui.fl.variants">
  <App>
    <pages>
      <Page title="Variant Demo">
        <!-- VariantManagement control shown in the page header / toolbar -->
        <customHeader>
          <Toolbar>
            <Title text="Demo List with Variants" />
            <ToolbarSpacer />
            <fl:VariantManagement
              id="variantMgmt"
              visible="true" />
          </Toolbar>
        </customHeader>

        <!-- Example content: a Table or any control to which variants apply -->
        <content>
          <List id="demoList">
            <items>
              <StandardListItem title="Item 1" />
              <StandardListItem title="Item 2" />
            </items>
          </List>
        </content>
      </Page>
    </pages>
  </App>
</mvc:View>
```

**STEP**: Add SmartVariantManagement and connect it to a control (optional)

**DESCRIPTION**: For controls that support Smart Variant Management (for example SmartTable or SmartFilterBar), declare sap.ui.comp.smartvariants.SmartVariantManagement and assign it to the control via its smartVariantKey/smartVariantManagement property. This enables the Adaptation Editor and runtime variant handling for these controls.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- File: webapp/view/Main.view.xml (fragment showing SmartVariantManagement usage) -->
<mvc:View
  controllerName="my.app.controller.Main"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  xmlns:smart="sap.ui.comp.smartvariants"
  xmlns:table="sap.ui.table">
  <App>
    <pages>
      <Page title="Smart Variant Example">
        <!-- SmartVariantManagement instance -->
        <smart:SmartVariantManagement id="smartVariantMgmt" />

        <!-- Example: a Table that can be associated with SmartVariantManagement -->
        <table:Table
          id="mySmartTable"
          rows="{/rows}"
          smartVariantManagement="mySmartTableVariant"
          smartVariantId="mySmartTableVariant">
          <!-- table columns & cells -->
        </table:Table>
      </Page>
    </pages>
  </App>
</mvc:View>
```

**STEP**: Controller: access VariantManagement control (for programmatic tasks)

**DESCRIPTION**: Use the controller only when you need to manipulate the VariantManagement control programmatically (e.g., read current selection or react to events). The Adaptation Editor creates and persists variants; no extra code is required to enable it.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// File: webapp/controller/Main.controller.js
sap.ui.define([
  "sap/ui/core/mvc/Controller"
], function(Controller) {
  "use strict";

  return Controller.extend("my.app.controller.Main", {
    onInit: function() {
      // Example: get the VariantManagement control by ID
      var oVariantMgmt = this.byId("variantMgmt");
      // You can attach to events or read properties if needed
      // oVariantMgmt.attachManage(function(){ ... });
    },

    onSomeAction: function() {
      var oVariantMgmt = this.byId("variantMgmt");
      // Read currently selected variant key
      var sCurrent = oVariantMgmt.getVariantId && oVariantMgmt.getVariantId();
      // Note: API methods differ between VariantManagement and SmartVariantManagement.
    }
  });
});
```

**STEP**: Using the Adaptation Editor — create / change / save variants

**DESCRIPTION**: Open the Adaptation Editor (via SAP Fiori tools / the in-app adaptation UI) and create or edit control variants (views). The procedure is identical to the key user scenario; the only difference for adaptation-project editing is that you do not have to publish changes. Changes are saved as ordinary changes in your adaptation project (persisted as FL changes). Follow the Adaptation Editor actions to create, load, change, and save control variants.

**LANGUAGE**: Text

**CODE**:
```text
Procedure summary:
1. Ensure the app loads sap.ui.fl and (if needed) sap.ui.comp.
2. Add a VariantManagement (sap.ui.fl.variants.VariantManagement) control to your XML view.
3. (Optional) Add SmartVariantManagement (sap.ui.comp.smartvariants.SmartVariantManagement) and connect it to supporting controls.
4. Open the Adaptation Editor (Fiori tools / in-app) and create or edit variants.
5. Save changes — they are stored in your adaptation project (no publish step required for adaptation-project changes).
```

--------------------------------

**TITLE**: Create an SAPUI5 Adaptation Project (S/4HANA Cloud Public Edition)

**INTRODUCTION**: Step-by-step, code-focused instructions to create an Adaptation Project from an existing SAP Fiori elements or freestyle SAPUI5 application using Visual Studio Code and the SAPUI5 Adaptation Project Yeoman wizard in an SAP BTP dev space.

**TAGS**: fiori-tools, sapui5, adaptation, s4hana, abap, yeoman, vscode, sap

**STEP**: 1 — Prepare dev space and prerequisites

**DESCRIPTION**: Ensure you are using VS Code inside a dev space that contains the SAPUI5 Adaptation Project extension (predefined or manually added during dev space creation). You must have access to the ABAP backend system where the target application is deployed.

**LANGUAGE**: Text

**CODE**:
```text
Prerequisites:
- Visual Studio Code (in SAP Business Application Studio / dev space)
- Dev space must include the "SAPUI5 Adaptation Project" extension
- Access to the target ABAP system (CloudReady / S/4HANA Cloud Public Edition)
```

**STEP**: 2 — Open the workspace folder for generated projects

**DESCRIPTION**: Open the local folder where generated projects are stored. By convention, select the "projects" folder in your workspace root.

**LANGUAGE**: Text

**CODE**:
```text
VS Code: File > Open Folder...
Select folder: <workspace-root>/projects
Click: OK
```

**STEP**: 3 — Launch the Template Wizard (Yeoman generator) in VS Code

**DESCRIPTION**: Start the Yeoman-based Template Wizard from the VS Code Command Palette, then select the Adaptation Project tile and start the generator UI.

**LANGUAGE**: Text

**CODE**:
```text
1. View > Command Palette...
2. Enter: Open Template Wizard
3. Select the "Open Template Wizard" entry
4. In the wizard: click the "Adaptation Project" tile
5. Click: Start
```

**STEP**: 4 — Configure project: Select target environment and name

**DESCRIPTION**: Configure core project properties in the wizard. For S/4HANA Cloud Public Edition you must choose ABAP as the Target Environment. Provide a globally unique project name and a human-readable application title.

**LANGUAGE**: Text

**CODE**:
```text
Wizard Step: Select Environment
- Target Environment: ABAP

Wizard Step: Project Name / Title
- Project Name: <unique-project-name>   # must be unique in the system
- Title: <Application Title>
```

**STEP**: 5 — Configure namespace

**DESCRIPTION**: The project namespace must start with the literal prefix "customer.". Enter your project-specific suffix after that prefix.

**LANGUAGE**: Text

**CODE**:
```text
Namespace field:
- Format: customer.<yourProjectName>
- Example: customer.myAdaptationApp
```

**STEP**: 6 — Select system and authenticate (optional basic auth)

**DESCRIPTION**: Choose the target system to connect to from the list shown by the wizard. If required, enter username and password and initiate login from the password field. The wizard supports basic authentication. The system type will be auto-detected (CloudReady for S/4HANA Cloud Public Edition).

**LANGUAGE**: Text

**CODE**:
```text
Wizard Step: Select System
- Choose an available system from the list

Optional: Enter credentials
- Username: <your-username>
- Password: <your-password>
- Click: Login  (login button is inside the password field)
Authentication: Basic authentication supported
System type detection: CloudReady  (auto-detected)
```

**STEP**: 7 — Choose the application to adapt

**DESCRIPTION**: The wizard lists applications that are extensible via adaptation projects. Select the desired application to generate an adaptation project scaffold for that application.

**LANGUAGE**: Text

**CODE**:
```text
Wizard Step: Choose Application
- Only applications extensible by adaptation projects appear in the list
- Select the target application to adapt
```

**STEP**: 8 — Finish generation and wait for notification

**DESCRIPTION**: Complete the wizard by choosing Finish. The project generation runs and, when complete, a notification will appear that the project has been generated and saved for future use.

**LANGUAGE**: Text

**CODE**:
```text
Wizard: Click Finish
- Wait for generator to create files under: <workspace-root>/projects/<unique-project-name>
- Notification appears when generation completes
```

**STEP**: 9 — Preview and continue development

**DESCRIPTION**: After generation you can preview the adaptation project or continue development. Reference the provided documentation for previewing and making runtime adaptations.

**LANGUAGE**: Text

**CODE**:
```text
Previewing: see previewing-an-adaptation-project-64cc15b.md
Further development: see making-adaptations-6d2cfea.md
```
--------------------------------

**TITLE**: Create an Adaptation Project (on-premise)

**INTRODUCTION**: Step-by-step actions to create an Adaptation Project for an on-premise SAP system using the Fiori Tools extension in Visual Studio Code. Use these exact commands and example values when automating or scripting user guidance for code generation tools.

**TAGS**: fiori-tools, adaptation, sapui5, vscode, abap, project-generator

**STEP**: 1 — Open Visual Studio Code

**DESCRIPTION**: Start VS Code in the folder where you want to create the adaptation project. If running from a terminal, use the VS Code CLI.

**LANGUAGE**: Shell

**CODE**:
```Shell
# open current folder in VS Code
code .

# or open VS Code normally from the OS launcher
# (No code required for a direct GUI launch)
```

**STEP**: 2 — Open Adaptation Project Generator (first time only)

**DESCRIPTION**: If this is the first adaptation project you create, open the Fiori Adaptation Project Generator. This registers scaffolding and template resources required by the template wizard.

**LANGUAGE**: Text

**CODE**:
```Text
Command Palette -> "Fiori: Open Adaptation Project Generator"
```

**STEP**: 3 — Open the Template Wizard

**DESCRIPTION**: Launch the Fiori Template Wizard to access project templates.

**LANGUAGE**: Text

**CODE**:
```Text
Command Palette -> "Fiori: Open Template Wizard"
```

**STEP**: 4 — Select the Adaptation Project template

**DESCRIPTION**: In the Template Wizard UI, click the "Adaptation Project" tile to start the project configuration dialog.

**LANGUAGE**: Text

**CODE**:
```Text
Template Wizard UI -> Click "Adaptation Project"
```

**STEP**: 5.1 — Enter Project Name and Application Title

**DESCRIPTION**: Provide a unique project name and a human-readable application title. These values will be used in generated files and manifest metadata.

**LANGUAGE**: Text

**CODE**:
```Text
Example:
Project name: my-adaptation-project
Application title: My Customer Adaptations
```

**STEP**: 5.2 — Set Namespace (customer.*)

**DESCRIPTION**: The wizard pre-fills the namespace prefix "customer.". After that prefix, enter a name that identifies your project. This becomes the XML/JS namespace and package identifier.

**LANGUAGE**: Text

**CODE**:
```Text
Namespace prefix: customer.
Example full namespace: customer.myCompanyAdaptations
# Resulting namespace value used in manifest and generated files:
customer.myCompanyAdaptations
```

**STEP**: 5.3 — Choose SAPUI5 version

**DESCRIPTION**: Select the target SAPUI5 version from the dropdown. Choose the version compatible with your on-premise system.

**LANGUAGE**: Text

**CODE**:
```Text
Template Wizard -> SAPUI5 Version -> select appropriate version (e.g., 1.84, 1.96, etc.)
```

**STEP**: 5.4 — Select ABAP system

**DESCRIPTION**: Choose the on-premise ABAP system where the original application is deployed. This selection is used to read metadata and present target application options.

**LANGUAGE**: Text

**CODE**:
```Text
Template Wizard -> System -> select your ABAP system (RFC / configured destination)
```

**STEP**: 5.5 — Choose the target application

**DESCRIPTION**: From the list of applications available in the selected system, choose the SAPUI5 application you want to adapt. The generator uses this to scaffold adaptation artifacts linked to that application.

**LANGUAGE**: Text

**CODE**:
```Text
Template Wizard -> Application -> select the SAPUI5 application to adapt
```

**STEP**: 5.6 — Finish generation

**DESCRIPTION**: Click Finish to generate the adaptation project. The wizard scaffolds project folders, manifest entries, and adaptation-specific artifacts.

**LANGUAGE**: Text

**CODE**:
```Text
Template Wizard -> Click "Finish" -> Project is generated in the selected workspace folder
```

**STEP**: 5.7 — (Optional) Add Deployment Configuration

**DESCRIPTION**: Optionally add deployment configuration to enable deployment to the ABAP repository from VS Code. By default this is set to No. If you choose Yes, you will be prompted for deployment settings (transport request, package, target package/namespace, etc.).

**LANGUAGE**: Text

**CODE**:
```Text
Template Wizard -> "Add Deployment Configuration?" -> Yes/No (default: No)

# For details, see:
# Deploying an Adaptation Project to the ABAP Repository
# deploying-an-adaptation-project-to-the-abap-repository-febf0d9.md
```

**STEP**: Result — Project generated and next steps

**DESCRIPTION**: The adaptation project has been generated. Use the preview and development guides to continue.

**LANGUAGE**: Text

**CODE**:
```Text
Preview your adaptation project:
- Previewing an Adaptation Project: previewing-an-adaptation-project-8701335.md

Continue development:
- Making Adaptations: making-adaptations-2a076dd.md
- Create New SAPUI5 Extensions: https://help.sap.com/docs/bas/developing-sap-fiori-app-in-sap-business-application-studio/create-new-sapui5-extensions?locale=en-US
```
--------------------------------

**TITLE**: Delete an Adaptation Project (undeploy) via CLI

**INTRODUCTION**: Use the CLI in SAP Business Application Studio to remove an adaptation project (app variant) from the back-end system by running the undeploy npm script from the project workspace.

**TAGS**: fiori-tools, adaptation, undeploy, CLI, sap-business-application-studio, npm

**STEP**: 1 — Open a terminal in SAP Business Application Studio

**DESCRIPTION**: Open a terminal in your SAP Business Application Studio workspace so you can run CLI commands in the adaptation project folder. Ensure the terminal's current working directory is the root of the adaptation project you want to delete.

**LANGUAGE**: Shell

**CODE**:
```bash
# In SAP Business Application Studio: Main menu → Terminal → New Terminal
# Ensure the terminal is in the adaptation project root folder
pwd   # optional: verify current directory
ls    # optional: verify project files
```

**STEP**: 2 — Run the undeploy command

**DESCRIPTION**: Execute the npm script named "undeploy" to delete the adaptation project from the back-end system. This runs the undeploy logic defined in the project's package.json.

**LANGUAGE**: Shell

**CODE**:
```bash
npm run undeploy
```
--------------------------------

**TITLE**: Deleting an Adaptation Project (Fiori tools / ABAP)

**INTRODUCTION**: Step-by-step, actionable instructions to delete an adaptation project (app variant) from your ABAP system using the Deployment Wizard (Fiori tools) or the ABAP report. Includes prerequisites, exact file locations, and the manifest ID extraction example.

**TAGS**: fiori-tools, adaptation, undeploy, undeploy-wizard, ABAP, SE38, SAP_UI_FLEX_DEVELOPER, SAP_UI_7.55, manifest.appdescr_variant, transport

**STEP**: Caution & prerequisites

**DESCRIPTION**: Important warnings and prerequisites you must check before deleting an adaptation project.

**LANGUAGE**: Text

**CODE**:
```
Caution:
- If a key user has created app variants based on the app variant you delete, those app variants will also be deleted.

Prerequisites:
- You have previously deployed the app variant (created from an adaptation project) to the ABAP system.
- You have the SAP_UI_FLEX_DEVELOPER role assigned for the user performing the deletion.
- For the ABAP report method, ensure backend minimum software component version: SAP_UI 7.55.
```

**STEP**: Using the Deployment Wizard (Fiori tools)

**DESCRIPTION**: Undeploy the adaptation project from the ABAP system using the Fiori Tools Deployment Wizard in your project (GUI steps). Applicable when you can access the deployed project in your workspace.

**LANGUAGE**: Text

**CODE**:
```
1. In your project workspace, right-click one of the following:
   - the main project folder
   - the webapp folder
   - the file manifest.appdescr_variant

2. Select: Open Deployment Wizard

3. In the wizard:
   - Choose the ABAP system to undeploy from (the system used to create the project is preselected).
   - Click Next
   - Click Undeploy
   - Click Finish to start the undeployment process
```

**STEP**: Extract the app variant ID from manifest.appdescr_variant

**DESCRIPTION**: Copy the ID value from manifest.appdescr_variant in your adaptation project; this ID is required by the ABAP report method.

**LANGUAGE**: JSON

**CODE**:
```json
// Example manifest.appdescr_variant snippet — replace with your file contents and copy the "id" value
{
  "sap.app": {
    "id": "com.company.app.variantId",    // <-- copy this value
    "applicationVersion": {
      "version": "1.0.0"
    }
  },
  // ... other keys
}
```

**STEP**: Using the ABAP report (/UI5/DEL_ADAPTATION_PROJECT)

**DESCRIPTION**: Run the ABAP report to delete the adaptation project from the backend using the extracted ID. You will be prompted to select or create a transport request; released transport releases the deletion to other systems.

**LANGUAGE**: Text

**CODE**:
```
1. Open the project folder and open manifest.appdescr_variant.
   - Copy the value of the "id" element (see previous step).

2. In the ABAP backend:
   - Start transaction SE38
   - Execute report: /UI5/DEL_ADAPTATION_PROJECT

3. In the report parameters:
   - Paste the copied ID of the app variant you want to delete (or use F4 help to search)

4. Execute the report (F8).

5. If prompted, select or create a transport request.

6. The report shows an overview of files to be deleted.
   - Confirm by executing again (Shift + F1) or follow the prompt to proceed.

Result:
- The app variant (adaptation project) files are removed and the deletion is transported.
- The app variant is deleted from all systems once the transport request is released.
```

**STEP**: Result and notes

**DESCRIPTION**: Final outcome and operational notes to verify.

**LANGUAGE**: Text

**CODE**:
```
- After successful undeploy or ABAP report execution and release of the transport request, the app variant is removed from the backend systems.
- Verify in the backend (SICF/SAP UI repository) or the UI5 app repository that the variant is removed.
- Reminder: Deleting an adaptation project deletes any dependent app variants created from it.
```
--------------------------------

**TITLE**: Deploying a UI Adaptation Project to the ABAP Layered Repository (LREP)

**INTRODUCTION**: Practical, code-focused instructions and examples to automate or script deployment of an adaptation (app variant) project to an SAP NetWeaver ABAP server (LREP). Includes prerequisite checks, manifest/app-variant examples, automated deployment via HTTP (CSRF token handling and multipart upload), deployment-configuration template, and post-deployment FLP target-mapping example. Use these snippets to implement CI/CD or CLI-based deployment flows, or to produce payloads that tooling (or the Fiori Tools Deployment Wizard) would use.

**TAGS**: fiori-tools, ABAP, LREP, deployment, app-variant, cloud-connector, manifest, CSRF, curl

STEP: Prerequisites — roles and Cloud Connector settings

DESCRIPTION: Verify user roles and allow POST/PUT on the Cloud Connector. For on-premise ABAP deployments:
- If SAP_UI version >= 7.55 the user needs role: SAP_UI_FLEX_DEVELOPER
- If SAP_UI version < 7.55 the user needs role: S_DEVELOP
- If using a Cloud Connector, ensure that POST and PUT are allowed for path: /sap/bc/lrep/dta_folder/

LANGUAGE: Shell

CODE:
```shell
# 1) Quick check of allowed methods for the LREP DTA path (Cloud Connector + ABAP):
# Replace <HOST>, <PORT> and use appropriate protocol (https://)
curl -i -k -X OPTIONS "https://<ABAP_HOST>:<PORT>/sap/bc/lrep/dta_folder/" \
  -u '<USER>:<PASSWORD>'

# 2) Fetch CSRF token (used by the upload step below)
curl -i -k -u '<USER>:<PASSWORD>' \
  -H 'X-CSRF-Token: Fetch' \
  "https://<ABAP_HOST>:<PORT>/sap/bc/lrep/dta_folder/"

# Note: If OPTIONS or CSRF fetch fails, check Cloud Connector restrictions and allowed HTTP methods.
```

STEP: Prepare the app variant manifest (file path: webapp/manifest.appdescr_variant)

DESCRIPTION: Ensure the app variant file defines the new semantic application ID and required metadata. The file is typically named manifest.appdescr_variant and sits under the webapp folder. Update sap.app/id to reflect the new semantic app ID for the app variant so the ABAP LREP stores the correct application ID.

LANGUAGE: JSON

CODE:
```json
{
  "sap.app": {
    "id": "com.example.myapp.variant1",
    "title": "My App (Variant 1)",
    "applicationVersion": {
      "version": "1.0.0"
    }
  },
  "sap.ui": {
    "technology": "UI5",
    "deviceTypes": {
      "desktop": true,
      "tablet": true,
      "phone": false
    }
  },
  "sap.ui5": {
    "routing": {
      "routes": []
    }
  }
}
```

STEP: Create / Re-create Deployment Configuration

DESCRIPTION: The Deployment Configuration ties the project to the ABAP destination and the ABAP package/transport. You can create this from the Fiori Tools Deployment Wizard or programmatically in your pipeline. Minimal configuration fields: destination name, ABAP package, whether to prompt for a transport (or specify one), and whether this is a new deployment or an update. The example below is a generic JSON template your tooling can populate and store alongside the project for reproducible deployments.

LANGUAGE: JSON

CODE:
```json
{
  "deploymentConfiguration": {
    "destination": "MY_ABAP_DEST",
    "package": "$TMP",                  // or "ZMY_PACKAGE"
    "transportRequest": "R123456",      // optional, or leave empty to prompt
    "createNew": true,                  // true for initial deploy, false for update
    "deployPath": "/sap/bc/lrep/dta_folder/",
    "artifact": "app_variant.zip"
  }
}
```

STEP: Deploy the app variant ZIP to ABAP LREP (CSRF token + multipart upload)

DESCRIPTION: The LREP DTA endpoint requires a CSRF token for state-changing requests (POST/PUT). Use the two-step pattern: fetch token, then POST the ZIP (app variant bundle) as multipart/form-data. Replace placeholders for host, credentials, and file path. If using Cloud Connector ensure POST/PUT are open for /sap/bc/lrep/dta_folder/.

LANGUAGE: Shell

CODE:
```shell
# 1) Fetch CSRF token and cookies
CSRFTOKEN_RESPONSE=$(curl -s -k -u '<USER>:<PASSWORD>' \
  -H 'X-CSRF-Token: Fetch' \
  -c /tmp/lrep_cookies.txt \
  "https://<ABAP_HOST>:<PORT>/sap/bc/lrep/dta_folder/")

# Extract token value (simple grep+awk; adjust based on response headers)
CSRF_TOKEN=$(grep -i 'x-csrf-token' -i /tmp/lrep_cookies.txt | awk '{print $7}' 2>/dev/null || true)
# If token not in cookies, parse response headers instead (example uses header parsing above)

# 2) Upload the ZIP artifact (app_variant.zip). Use POST if creating, PUT if updating (tooling chooses)
curl -v -k -u '<USER>:<PASSWORD>' \
  -b /tmp/lrep_cookies.txt \
  -H "X-CSRF-Token: ${CSRF_TOKEN}" \
  -F "file=@./dist/app_variant.zip" \
  "https://<ABAP_HOST>:<PORT>/sap/bc/lrep/dta_folder/"

# Notes:
# - For custom endpoints or additional form fields (package/transport), include them with -F "package=ZMYPKG" -F "transport=R123456"
# - Observe HTTP response codes and response body for success or detailed error messages.
```

STEP: Error handling pointers (common HTTP responses and SAP Notes)

DESCRIPTION: Watch for these error conditions and follow the referenced notes:
- "ZIP archive contains disallowed files or has an incorrect structure" -> See SAP Note 3073188
- "500 Internal server error" or "Transport check could not be performed" -> See SAP Note 3243791

LANGUAGE: Shell

CODE:
```shell
# Example: check result and exit non-zero on failure (bash)
HTTP_STATUS=$(curl -s -o /tmp/lrep_result.json -w "%{http_code}" -k -u '<USER>:<PASSWORD>' \
  -H "X-CSRF-Token: ${CSRF_TOKEN}" \
  -F "file=@./dist/app_variant.zip" \
  "https://<ABAP_HOST>:<PORT>/sap/bc/lrep/dta_folder/")

if [ "$HTTP_STATUS" -ne 200 ] && [ "$HTTP_STATUS" -ne 201 ]; then
  echo "Deployment failed with HTTP status $HTTP_STATUS"
  cat /tmp/lrep_result.json
  # Inspect message for known issues; consult SAP Notes 3073188 or 3243791 based on message
  exit 1
fi

echo "Deployment successful"
```

STEP: Post-deploy — Configure FLP target mapping for the new semantic app ID

DESCRIPTION: After a successful LREP deployment the app variant is stored as a new semantic application. Create / update a target mapping in the SAP Fiori Launchpad for the new app ID so a tile/navigation entry appears. Use the FLP Designer UI or automate via launchpad OData/management APIs (if available). Example below shows the target mapping content you need to provide (semanticObject and action must match the app variant's intent).

LANGUAGE: JSON

CODE:
```json
{
  "title": "My App (Variant 1)",
  "semanticObject": "MyApp",
  "action": "displayVariant1",
  "applicationType": "SAPUI5",
  "ui5ComponentName": "com.example.myapp.variant1",
  "url": "/sap/bc/ui5_ui5/sap/com.example.myapp.variant1/index.html",
  "tileConfiguration": {
    "size": "1x1",
    "icon": "sap-icon://world",
    "subtitle": "Variant 1"
  }
}
```

Step: Notes about the Fiori Tools Deployment Wizard (interactive flow)

DESCRIPTION: If using the Fiori Tools Deployment Wizard in your IDE:
- Right-click the project main folder, webapp folder, or manifest.appdescr_variant -> Open Deployment Wizard
- Choose the destination (pre-selected if created from it)
- If first deployment: follow the "Add Deployment Configuration" flow to set package/transport; if already deployed: choose Update or Finish
- The wizard will notify success or failure and show errors returned by the ABAP server

LANGUAGE: Text

CODE:
```text
# No code for the UI wizard; follow the interactive steps:
# 1) Open Deployment Wizard (right-click)
# 2) Select destination
# 3) If first-time: Add Deployment Configuration -> select package & transport
# 4) Click Finish to deploy (or Update if redeploying)
```


--------------------------------

**TITLE**: Deploy or Update an Adaptation Project to the ABAP Repository

**INTRODUCTION**: Steps and actionable commands to deploy or update an SAPUI5 adaptation (app variant) to the SAPUI5 ABAP repository using either the Adaptation Project Deployment Wizard in your IDE or the Command Line Interface (npm). Includes exact file paths, required inputs, and sample npm script to run deployment.

**TAGS**: fiori-tools, adaptation, SAPUI5, ABAP, deployment, SAP BTP, S/4HANA Cloud, CLI, npm, app-variant

**STEP**: 1 — Deploy/Update using the Deployment Wizard (IDE)

**DESCRIPTION**: Use the Adaptation Project Deployment wizard from the project explorer to configure SAP Fiori Launchpad tile settings and to deploy the app variant to the SAPUI5 ABAP repository.

- Open your project in SAP Business Application Studio (or other supported IDE).
- In the Project Explorer, locate the app variant descriptor file at:
  - webapp/manifest.appdescr_variant
- Right-click that file -> search for "Adaptation project" -> expand -> select "Open Deployment" wizard.
- Follow the wizard pages and provide the required values:
  - Navigation intent: If the base app includes an intent in its manifest, choose it. Otherwise, enter:
    - semantic object
    - action
    - optional parameters
  - Tile text: Title (mandatory) and Subtitle (optional)
  - SAPUI5 ABAP repository: target ABAP repo to deploy to
  - Description: optional deployment description
  - Package: ABAP package to save objects into
  - Transport Request: optional transport request number (if required by ABAP system)
- Click Finish and wait for the deployment to complete. The IDE notifies you when deployment succeeds.

**LANGUAGE**: None

**CODE**:
```text
File path (project):
  /<project-root>/webapp/manifest.appdescr_variant

Wizard actions:
  Right-click -> Adaptation project -> Open Deployment
  Fill: semantic object, action, parameters (if not auto-populated)
  Fill: Title, Subtitle (optional)
  Fill: SAPUI5 ABAP repository
  Fill: Description (optional)
  Fill: Package
  Fill: Transport request (optional)
  Click: Finish
```

**STEP**: 2 — Prepare and Verify Local Project (CLI prerequisites)

**DESCRIPTION**: Before CLI deployment, ensure you run npm update to keep the builder up-to-date (recommended). Open a terminal in the main project folder before running deployment commands.

- Open Terminal: SAP Business Application Studio -> Terminal -> New Terminal
- Confirm you are in the project root (folder that contains package.json)

**LANGUAGE**: Shell

**CODE**:
```bash
# Open terminal in IDE and ensure current directory is project root:
pwd
# Expect: /home/project/<project-root>  (or IDE workspace root)

# Update local builder/tools (recommended)
npm update
```

**STEP**: 3 — Deploy/Update using the Command Line Interface

**DESCRIPTION**: Run the project-defined npm deployment script. Typical projects expose a "deploy" script in package.json that performs the adaptation deployment to the ABAP repository. Use npm run deploy from the project root.

- Ensure package.json contains a deploy script (example provided below).
- Run npm run deploy and wait for the process to complete. Provide transport number or other prompts if the script requires interactive input.

**LANGUAGE**: Shell

**CODE**:
```bash
# From project root (where package.json exists)
npm run deploy
```

**LANGUAGE**: JSON

**CODE**:
```json
// Example package.json snippet (ensure your project has a deploy script)
{
  "name": "my-adaptation-project",
  "version": "1.0.0",
  "scripts": {
    "build": "ui5 build --include-dependencies",
    "deploy": "fiori-tools-adaptation-deployer --target abap --manifest webapp/manifest.appdescr_variant"
  },
  "devDependencies": {
    "@sap/ux-adaptation-builder": "^x.y.z",
    "@sap/ui5-builder": "^x.y.z"
  }
}
```

**STEP**: 4 — Notes and Best Practices

**DESCRIPTION**: Keep the builder and related dev dependencies up-to-date to avoid incompatibilities. Redeploy adaptation projects after upgrading build tools to ensure deployed variants behave correctly.

**LANGUAGE**: None

**CODE**:
```text
Notes:
- Always run `npm update` before deployment to update builder and dependencies.
- Open the terminal in the main project folder (folder with package.json).
- If your project prompts for a transport request, enter the number when requested by the deployment flow.
- The manifest.appdescr_variant file in webapp is the entry point for adaptation deployments.
```
--------------------------------

**TITLE**: SAP Fiori Elements (OData V4) + CAP Project Quickstart Templates for SAP Fiori Tools

**INTRODUCTION**: Practical, code-focused templates and steps to create a CAP backend, expose an OData V4 service, add UI annotations for SAP Fiori elements (OData V4), and configure a Fiori Elements application manifest. Use these templates as drop-in starters for AI-assisted generation, Project Accelerator/Joule outputs, or manual creation. File paths given are relative to a typical CAP project.

**TAGS**: fiori-tools, fiori-elements, cap, cds, odata-v4, annotations, manifest, preview, vscode

STEP: 1 — Minimal CAP data model (db/schema.cds)
DESCRIPTION: Create a CDS schema with an entity that will be exposed via an OData V4 service. Save as db/schema.cds.
LANGUAGE: CDS
CODE:
```cds
namespace my.catalog;

using { cuid } from '@sap/cds/common';

entity Books {
  key ID    : UUID    @title : 'Book ID';
  title     : String  @title : 'Title';
  author    : String  @title : 'Author';
  price     : Decimal(9,2) @title : 'Price';
  createdAt : Timestamp @title : 'Created At';
}
```

STEP: 2 — Service definition (srv/catalog-service.cds)
DESCRIPTION: Expose the entity via a service. Save as srv/catalog-service.cds. This service is the OData endpoint Fiori Elements will consume.
LANGUAGE: CDS
CODE:
```cds
using my.catalog as Catalog from '../db/schema';

service CatalogService @(path: '/catalog') {
  entity Books as projection on Catalog.Books;
}
```

STEP: 3 — Sample data (db/data/Books.csv)
DESCRIPTION: Provide simple CSV sample data for the Books entity (optional but useful for local preview). Save as db/data/Books.csv.
LANGUAGE: CSV
CODE:
```csv
ID,title,author,price,createdAt
b1e7c2d0-0000-0000-0000-000000000001,Effective CAP,John Doe,29.99,2024-01-01T12:00:00Z
b1e7c2d0-0000-0000-0000-000000000002,Fiori Patterns,Jane Smith,39.50,2024-01-02T12:00:00Z
```

STEP: 4 — Minimal app manifest for Fiori Elements (app/webapp/manifest.json)
DESCRIPTION: Configure the UI app to consume the OData V4 service and point to annotation files. Replace <SERVICE_URI> with the service path (often "/catalog/") and ensure annotations path matches actual file location. Save as app/webapp/manifest.json.
LANGUAGE: JSON
CODE:
```json
{
  "sap.app": {
    "id": "my.catalog.app",
    "type": "application",
    "title": "Catalog App"
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "mainService",
        "preload": true
      }
    },
    "resources": {}
  },
  "sap.ui": {},
  "sap.cloud": {},
  "dataSources": {
    "mainService": {
      "uri": "/catalog/",
      "type": "OData",
      "settings": {
        "odataVersion": "4.0"
      }
    }
  },
  "sap.fe": {
    "requiredVersion": "1.80.0"
  },
  "sap.applications": {}
}
```

STEP: 5 — OData annotation file for Fiori Elements (app/annotations/Books.annotations.xml)
DESCRIPTION: Create an OData V4 annotation file describing UI.LineItem and UI.HeaderFacets for an ObjectPage/ListReport. Save as app/annotations/Books.annotations.xml and ensure the manifest or project tooling loads it as an annotation source.
LANGUAGE: XML
CODE:
```xml
<edmx:Edmx Version="4.0" xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx">
  <edmx:DataServices>
    <Schema Namespace="MyCatalogAnnotations" xmlns="http://docs.oasis-open.org/odata/ns/edm">
      <Annotations Target="my.catalog.Books">
        <Annotation Term="UI.LineItem">
          <Collection>
            <Record Type="UI.DataField">
              <PropertyValue Property="Value" Path="title" />
            </Record>
            <Record Type="UI.DataField">
              <PropertyValue Property="Value" Path="author" />
            </Record>
            <Record Type="UI.DataField">
              <PropertyValue Property="Value" Path="price" />
            </Record>
          </Collection>
        </Annotation>

        <Annotation Term="UI.HeaderFacets">
          <Collection>
            <Record Type="UI.ReferenceFacet">
              <PropertyValue Property="Label" String="General" />
              <PropertyValue Property="Target">
                <Record Type="UI.Facets">
                  <PropertyValue Property="Facets">
                    <Collection>
                      <Record Type="UI.DataField">
                        <PropertyValue Property="Value" Path="title" />
                      </Record>
                    </Collection>
                  </PropertyValue>
                </Record>
              </PropertyValue>
            </Record>
          </Collection>
        </Annotation>
      </Annotations>
    </Schema>
  </edmx:DataServices>
</edmx:Edmx>
```

STEP: 6 — Simple package.json and start script for CAP local preview
DESCRIPTION: Use cds watch to serve the OData endpoint and (optionally) the UI. Save as package.json in project root. Adjust dependencies to match your project.
LANGUAGE: JSON
CODE:
```json
{
  "name": "my-catalog",
  "version": "1.0.0",
  "private": true,
  "scripts": {
    "start": "cds watch"
  },
  "dependencies": {
    "@sap/cds": "^6",
    "@sap/cds-runtime": "^6"
  },
  "devDependencies": {}
}
```

STEP: 7 — VS Code workspace recommendations (.vscode/extensions.json and settings.json)
DESCRIPTION: Enable helpful VS Code tooling for SAP Fiori Tools development: SAP Fiori tools extension, CAP CDS support, and Annotation Language Server. Save as .vscode/extensions.json and .vscode/settings.json.
LANGUAGE: JSON
CODE:
```json
// .vscode/extensions.json
{
  "recommendations": [
    "SAPSE.vscode-cds",
    "SAPOSS.ux-specification",
    "SAPOSS.fiori-tools-extension-pack",
    "ADessler.rust-rpc" // placeholder - replace with actual extensions if different
  ]
}
```

```json
// .vscode/settings.json
{
  "cds.deploy": {
    "hana": {
      "kind": "in-memory"
    }
  },
  "fiori-tools.preview.enabled": true,
  "annotation-language-server.enabled": true
}
```

STEP: 8 — Using Project Accelerator / Joule (sample prompt + expected outputs)
DESCRIPTION: Example prompt structure for Project Accelerator or Joule to generate CAP project scaffolding (textual input can include business context, entities, and desired pages). The tool returns generated files such as db/schema.cds, srv/catalog-service.cds, app/webapp/manifest.json, and app/annotations/*.annotations.xml.
LANGUAGE: JSON
CODE:
```json
{
  "prompt": {
    "projectName": "Catalog",
    "description": "Manage books with title, author, price. Provide list report with object page and editing.",
    "entities": [
      {
        "name": "Books",
        "properties": [
          { "name": "title", "type": "String" },
          { "name": "author", "type": "String" },
          { "name": "price", "type": "Decimal" }
        ]
      }
    ],
    "ui": {
      "floorplan": "ListReport+ObjectPage",
      "annotations": true,
      "odataVersion": "v4"
    },
    "output": "CAP project with CDS model, service, sample data, UI manifest, annotation file"
  }
}
```

STEP: 9 — Previewing locally with SAP Fiori Tools (VS Code)
DESCRIPTION: Use SAP Fiori Tools (VS Code extension) -> "Preview Application" or "Open Application Generator" to run a live preview (mock data or backend). Recommended flow:
- Run: npm start (cds watch) to serve OData V4 endpoints.
- In VS Code, open the Fiori Tools command "Preview Application" and point it to app/webapp/manifest.json.
LANGUAGE: Text
CODE:
```text
# Typical steps (manual)
1. npm install
2. npm start   # starts cds watch and OData V4 endpoint at http://localhost:4004
3. In VS Code: Command Palette -> "SAP Fiori tools: Preview Application" -> select app/webapp/manifest.json
```

STEP: 10 — Development tips & tooling actions
DESCRIPTION: Quick actionable pointers for further development:
- Use Service Modeler in SAP Fiori Tools to visualize metadata and annotations.
- Use Annotation Language Server for in-editor intelligent completion and validation of annotation files.
- For custom logic or UI extensions, add controller JS/TS under app/webapp/controller and reference via manifest extension points.
- Prefer OData V4 + Fiori Elements for building blocks and custom pages. For legacy V2, convert annotations and use compatible floorplans.

LANGUAGE: Text
CODE:
```text
# Recommended extension points / paths
- CDS models: db/*.cds
- Service definitions: srv/*.cds
- Sample data: db/data/*.csv
- UI app: app/webapp/
- Annotations: app/annotations/*.annotations.xml
- Start backend: npm start (cds watch)
- Preview UI: SAP Fiori tools -> Preview Application (VS Code)
```


--------------------------------

**TITLE**: SAP Fiori: Manage Contracts and Customer Information (ListReport + ObjectPage)

**INTRODUCTION**: This guide provides a compact, code-first implementation plan for a SAP Fiori Elements application that allows contract managers to list contracts and customers, view contract details, and filter by Contract Type, Contract Status and Start Date. It uses SAP CAP CDS for the data model, exposes an OData v4 service, supplies UI annotations for ListReport and ObjectPage, and shows the minimal manifest.json configuration to auto-show the list (no GO button).

**TAGS**: fiori-tools, sap-fiori, cds, cap, odata, ui5, annotations, listreport, objectpage

---

**STEP**: 1 — Define the CDS data model (contracts.cds)

**DESCRIPTION**: Create a CDS model file that defines Contract and Customer entities with the required attributes. Use UUID keys to guarantee uniqueness. This file is used by CAP to generate OData entities.

**LANGUAGE**: CDS

**CODE**:
```cds
namespace com.example.contracts;

entity Customer {
  key ID                : UUID;
  Name                  : String(200);
  IdentificationNumber  : String(50);
  Address               : String(500);
  ContactInformation    : String(200);
}

entity Contract {
  key ContractID        : UUID;
  Customer              : Association to Customer;
  ContractType          : String(50);
  Status                : String(20);      // draft, active, expired, terminated, ...
  StartDate             : Date;
  EndDate               : Date;            // optional
}
```

---

**STEP**: 2 — Expose the OData service (service.cds)

**DESCRIPTION**: Create a service definition that projects the entities to an OData path. CAP will expose this as an OData v4 service. Use a stable path (e.g. /contracts).

**LANGUAGE**: CDS

**CODE**:
```cds
using com.example.contracts as model;

service ContractService @(path: '/contracts') {
  entity Contracts  as projection on model.Contract;
  entity Customers  as projection on model.Customer;
}
```

---

**STEP**: 3 — Add UI annotations for ListReport (LineItem) and ObjectPage (Identification)

**DESCRIPTION**: Add CDS annotations to control the ListReport columns and the ObjectPage identification section. LineItem defines the columns shown in the list. Identification controls the fields shown in the header/detail view. Ensure ContractID, Customer, ContractType and StartDate appear on the list and all required fields appear on the detail view.

**LANGUAGE**: CDS

**CODE**:
```cds
using com.example.contracts as my;

annotate my.Contract with
  @UI.LineItem: [
    { Value: ContractID,    Label: 'Contract ID' },
    { Value: Customer.Name, Label: 'Customer' },
    { Value: ContractType,  Label: 'Contract Type' },
    { Value: StartDate,     Label: 'Start Date' }
  ],
  @UI.Identification: [
    { Value: ContractID,    Label: 'Contract ID' },
    { Value: Customer.Name, Label: 'Customer Name' },
    { Value: ContractType,  Label: 'Contract Type' },
    { Value: Status,        Label: 'Status' },
    { Value: StartDate,     Label: 'Start Date' },
    { Value: EndDate,       Label: 'End Date' }
  ];
```

---

**STEP**: 4 — Provide sample seed data (db/data/*.csv)

**DESCRIPTION**: Seed the database with example customers and contracts for local development/testing. Use CSV files under db/data (CAP convention) or any other seed mechanism you prefer.

**LANGUAGE**: CSV

**CODE**:
```csv
# db/data/Customers.csv
ID,Name,IdentificationNumber,Address,ContactInformation
11111111-1111-1111-1111-111111111111,Acme Corp,ACME-1001,"123 Market St, City","sales@acme.example"
22222222-2222-2222-2222-222222222222,Globex Ltd,GLX-2002,"456 Commerce Ave, City","contact@globex.example"
```

```csv
# db/data/Contracts.csv
ContractID,Customer_ID,ContractType,Status,StartDate,EndDate
aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa,11111111-1111-1111-1111-111111111111,Sales,Active,2024-01-01,2025-01-01
bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb,22222222-2222-2222-2222-222222222222,Service,Draft,2024-06-01,
```
Note: Use the column "<AssociationProperty>_ID" to seed association fields (Customer_ID for Customer association).

---

**STEP**: 5 — Minimal CAP service implementation (srv/index.js)

**DESCRIPTION**: Start a CAP Node.js service. This file is optional if no custom handlers are needed; CAP will auto-wire the service. Include it to demonstrate how to start the service and where to place custom logic.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// srv/index.js
const cds = require('@sap/cds');

module.exports = cds.service.impl(async function() {
  const { Contracts, Customers } = this.entities;
  // Example: custom handler placeholder
  // this.on('READ', 'Contracts', (req) => { /* custom logic */ });
});
```

---

**STEP**: 6 — Fiori Elements application manifest.json (ListReport + ObjectPage)

**DESCRIPTION**: Provide the minimal manifest.json fragments required to configure a Fiori Elements app with a ListReport page (shows list of Contracts immediately) and an ObjectPage for contract details. Important: configure the SmartFilterBar to hide the GO button and use live mode so the list shows results without pressing GO.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.app": {
    "id": "com.example.contracts",
    "type": "application",
    "i18n": "i18n/i18n.properties"
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "mainService",
        "preload": true
      }
    }
  },
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "Contracts",
        "component": {
          "name": "sap.suite.ui.generic.template.ListReport",
          "settings": {
            "smartFilterBar": {
              "showGoButton": false,
              "liveMode": true
            },
            "tableSettings": {
              "type": "ResponsiveTable"
            }
          }
        }
      },
      {
        "entitySet": "Contracts",
        "component": {
          "name": "sap.suite.ui.generic.template.ObjectPage"
        }
      }
    ]
  },
  "dataSources": {
    "mainService": {
      "uri": "/contracts/",
      "type": "OData",
      "settings": {
        "odataVersion": "v4"
      }
    }
  }
}
```

---

**STEP**: 7 — Runtime behavior & acceptance criteria mapping

**DESCRIPTION**: Implementation notes to satisfy the acceptance criteria:
- Scenario 1 (List All Contracts): The ListReport page uses the Contracts entitySet and the annotation @UI.LineItem to show ContractID, Customer, ContractType and StartDate. The SmartFilterBar config (showGoButton:false, liveMode:true) ensures the list is visible and updated without pressing a GO button. Add a separate quick action or an additional page to view the list of all customers (expose Customers entitySet as a separate page or tile).
- Scenario 2 (View Contract Details): The ObjectPage uses @UI.Identification to show ContractID, Customer Name, Contract Type, Status, Start Date and End Date. Navigation from the list to the object page is automatic for Fiori Elements when both pages are defined against the same entity set.

**LANGUAGE**: text

**CODE**:
```text
Checklist:
- CDS model (contracts.cds) created and deployed.
- Service (service.cds) exposed at /contracts.
- Annotations added to control ListReport columns and ObjectPage fields.
- manifest.json configured with ListReport + ObjectPage; SmartFilterBar configured: showGoButton=false and liveMode=true.
- Seed data available under db/data for local testing.
- Start CAP with "cds run" and start the Fiori app against the OData service.
```

---

**STEP**: 8 — Optional: Add a Customers list page

**DESCRIPTION**: If you want the list of customers next to the contracts list in the UI, add another page to manifest.json referencing entitySet "Customers". For a two-column layout you can create a custom shell or navigation tile; simplest approach is to add a second ListReport page for Customers.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "Contracts",
        "component": { "name": "sap.suite.ui.generic.template.ListReport" }
      },
      {
        "entitySet": "Customers",
        "component": { "name": "sap.suite.ui.generic.template.ListReport" }
      }
    ]
  }
}
```

Use responsive layout or a custom Fiori layout controller to present Contracts and Customers side-by-side if required by UX guidelines.

---

--------------------------------

**TITLE**: Display Customers with Related Contracts (SAP CAP + Fiori Elements)

**INTRODUCTION**: Example CAP application that models Customers and their Contracts, exposes them as an OData service, seeds sample data, and provides a minimal set of UI annotations so a Fiori Elements List Report and Object Page can show:
- A customers list
- A customer details page with "Customer Info" and "Contracts" sections
- A contract details page with "Contract Info" and "Validity" sections

This is a compact, copy-pasteable starting point for implementing the scenario with fiori-tools and SAP CAP.

**TAGS**: fiori-tools, sap-cap, cds, odata, fiori-elements, annotations, sample-data

STEP: 1 — Domain model (CDS)
DESCRIPTION: Create the CDS domain model describing Customer and Contract entities, including enums and the one-to-many relationship (one Customer => many Contracts). Save as db/schema.cds.
LANGUAGE: CDS
CODE:
```CDS
// File: db/schema.cds
namespace my;

using { cuid } from '@sap/cds/common';

// Enumerations for type safety / UI value lists
enum ContractTypeEnum {
  SALES,
  SERVICE,
  EMPLOYMENT
}

enum ContractStatusEnum {
  DRAFT,
  ACTIVE,
  EXPIRED,
  TERMINATED
}

entity Customer : cuid {
  key ID                 : UUID      default uuid();
  Name                   : String(100);
  IdentificationNumber   : String(50);
  Address                : String(250);
  // navigation: back link from Contract will be defined in Contract
}

entity Contract : cuid {
  key ID                 : UUID      default uuid();
  Customer               : Association to Customer; // many contracts -> one customer
  ContractType           : ContractTypeEnum;
  StartDate              : Date;
  EndDate                : Date;
  Status                 : ContractStatusEnum;
}
```

STEP: 2 — Service exposure
DESCRIPTION: Expose the entities via a service so Fiori (or any OData consumer) can fetch Customers and Contracts. Save as srv/service.cds.
LANGUAGE: CDS
CODE:
```CDS
// File: srv/service.cds
using my from '../db/schema';

service CatalogService @(path:'/catalog') {
  entity Customers as projection on my.Customer;
  entity Contracts as projection on my.Contract;
}
```

STEP: 3 — Seed sample data (CSV)
DESCRIPTION: Add minimal sample CSV data for Customers and Contracts so the app shows records when run locally. Place CSV files under db/data/ and ensure they match entity fields. Example uses UUID keys for deterministic values.
LANGUAGE: CSV
CODE:
```CSV
// File: db/data/Customers.csv
ID,Name,IdentificationNumber,Address
11111111-1111-1111-1111-111111111111,Acme Corporation,ACME-1001,"Main Street 1, 4000 City"
22222222-2222-2222-2222-222222222222,Globex Ltd.,GLOB-2002,"Industrial Rd 5, 5000 Town"
```

```CSV
// File: db/data/Contracts.csv
ID,Customer_ID,ContractType,StartDate,EndDate,Status
aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa,11111111-1111-1111-1111-111111111111,SALES,2024-01-01,2024-12-31,ACTIVE
bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb,11111111-1111-1111-1111-111111111111,SERVICE,2023-06-01,2024-05-31,EXPIRED
cccccccc-cccc-cccc-cccc-cccccccccccc,22222222-2222-2222-2222-222222222222,EMPLOYMENT,2024-02-15,,DRAFT
```

STEP: 4 — Basic UI annotations (CDS annotations for Fiori Elements)
DESCRIPTION: Provide a lightweight annotations file that defines how the List Report (Customers) and Object Pages (Customer and Contract) should render sections. Place under srv/annotations.cds so fiori-tools or the UI can pick it up from the backend service annotations.
LANGUAGE: CDS
CODE:
```CDS
// File: srv/annotations.cds
using my from '../db/schema';

// General UI annotations for Customers list + details and Contracts details.
// These annotations are a compact starting point for a Fiori Elements ListReport + ObjectPage.

annotate my.Customer with
  @UI.headerInfo: {
    typeName: 'Customer',
    typeNamePlural: 'Customers',
    title: { value: Name }
  },
  @UI.selectionFields: [ Name, IdentificationNumber ],
  @UI.lineItem: [
    { value: Name,           label: 'Name' },
    { value: IdentificationNumber, label: 'Identification Number' },
    { value: Address,        label: 'Address' }
  ],
  // ObjectPage facets: Customer Info & Contracts
  @UI.facets: [
    {
      id: 'CustomerInfo',
      label: 'Customer Info',
      type: #Form,
      data: [
        { value: Name, label: 'Name' },
        { value: IdentificationNumber, label: 'Identification Number' },
        { value: Address, label: 'Address' }
      ]
    },
    {
      id: 'Contracts',
      label: 'Contracts',
      type: #Collection,  // shows list of related contracts
      target: 'Contracts' // logical target name; Fiori Elements will resolve navigation to Contracts
    }
  ];

annotate my.Contract with
  @UI.headerInfo: {
    typeName: 'Contract',
    title: { value: ID }
  },
  @UI.lineItem: [
    { value: ID,           label: 'Contract ID' },
    { value: Customer->Name, label: 'Customer' },
    { value: ContractType, label: 'Contract Type' },
    { value: Status,       label: 'Status' }
  ],
  @UI.facets: [
    {
      id: 'ContractInfo',
      label: 'Contract Info',
      type: #Form,
      data: [
        { value: ID, label: 'Contract ID' },
        { value: Customer->Name, label: 'Customer Name' },
        { value: ContractType, label: 'Contract Type' },
        { value: Status, label: 'Status' }
      ]
    },
    {
      id: 'Validity',
      label: 'Validity',
      type: #Form,
      data: [
        { value: StartDate, label: 'Start Date' },
        { value: EndDate, label: 'End Date' }
      ]
    }
  ];
```

STEP: 5 — Register OData service and annotations in UI manifest (webapp)
DESCRIPTION: Minimal manifest.json snippet to point a Fiori Elements frontend to the backend OData service and annotations. Add to your UI project (app/webapp/manifest.json). The app should reference the OData service path /catalog (from srv/service.cds). If you prefer to use CDS annotations from srv, fiori-tools will read them automatically; otherwise supply an external annotations file.
LANGUAGE: JSON
CODE:
```JSON
// File: app/webapp/manifest.json (snippet)
{
  "sap.app": {
    "id": "com.example.customers",
    "applicationVersion": { "version": "0.0.1" }
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "CatalogService",
        "settings": {
          "synchronizationMode": "None"
        }
      }
    },
    "dataSources": {
      "CatalogService": {
        "uri": "/catalog/",
        "type": "OData",
        "settings": {
          "localUri": "" // leave empty if backend CDS annotations are consumed directly
        }
      }
    }
  },
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "Customers",
        "component": {
          "name": "sap.suite.ui.generic.template.ListReport"
        }
      }
    ]
  }
}
```

STEP: 6 — Run & verify locally
DESCRIPTION: Commands to run the CAP application and the UI app (assumes standard CAP and UI project structure). Start the CAP backend, then launch the Fiori Elements app via the UI (fiori-tools or SAP BAS).
LANGUAGE: Shell
CODE:
```bash
# From project root
# 1) Install dependencies once
npm install

# 2) Start the CAP backend (cds watch will pick up db/schema.cds, srv/*)
cds watch

# 3) In a separate terminal, serve the UI (if using UI5 tooling or fiori-tools)
# Example using UI5 CLI (adjust to your setup)
cd app
ui5 serve --config=ui5.yaml
```

Notes and next steps:
- The annotations file provided is a pragmatic starting point. For production, refine facets, line items, semantic keys, and value helps. Replace the simplified @UI.facets usage with complete Fiori Elements annotations if specific behavior is required.
- To show the customer's Contracts on the Customer ObjectPage, implement a navigation property or use an association-aware reference facet (tooling varies by UI framework). The annotation target 'Contracts' in the sample intends to point the UI to the related Contracts entity.
- Consider adding @Common.Label, value lists, and formatting for dates and enums for improved UX.
--------------------------------

**TITLE**: Manage Travel App — List Report + Object Page Example (for SAP Business Application Studio)

**INTRODUCTION**: This document provides a ready-to-use markdown prompt, image filenames, business rules, data model, and small code snippets for validating and implementing a "Manage Travel" app with a List Report and Object Page. Use it in SAP Business Application Studio: create a .md file with the sample prompt below and upload the referenced images to the same directory. The artifacts here are action-oriented and suitable for feeding RAG-enabled code generation agents or Fiori app generators.

**TAGS**: fiori-tools, SAP, Business Application Studio, List Report, Object Page, travel, sample, images, prompt

STEP: 1 — Create prompt markdown file

DESCRIPTION: Create a markdown file in your workspace (e.g., manage-travel-prompt.md). Paste the sample prompt content exactly as shown. This file is the textual specification your code generator / AI agent will consume to scaffold UI and behavior.

LANGUAGE: Markdown

CODE:
```markdown
I want to create a travel application that shows a list of trips taken by employees.

The list of trips should include the following details:

![Alt Text](Travel_List.jpeg)

Each trip can have many bookings and multiple notes. On the travel details page, the app should show:

![Alt Text](Travel_Details.jpeg)

The total trip price should equal the price of all the bookings for that trip. If there are no bookings for a trip, the total trip price should be zero.

If there are any bookings associated with a trip, then each booking must cost more than zero.

Clicking on a booking should allow the user to see more details.
```

STEP: 2 — Save required image files (filenames and paths)

DESCRIPTION: Save the UI mockups and sketches using these exact filenames and upload them to the same directory as the markdown file. These image names are referenced in the prompt above and must match so automated tools can embed/display them.

LANGUAGE: Shell (file operations example)

CODE:
```bash
# Save these files in the same folder as manage-travel-prompt.md
# Required images referenced by the prompt:
Travel_List.jpeg
Travel_Details.jpeg

# Optional sketch images included with this example (recommended for designers/devs):
images/Manage_Travel_App_List_Report_Page_Sketch_4633751.jpg
images/Manage_Travel_App_Object_Page_Sketch_999bcc3.jpg
```

STEP: 3 — Business rules (programmatic validation and calculation)

DESCRIPTION: Implement these rules in the app backend or client-side validation:
- totalTripPrice = sum of booking.price for all bookings of the trip
- if bookings.length === 0 → totalTripPrice = 0
- if bookings.length > 0 → every booking.price > 0
These snippets show simple JavaScript/TypeScript functions for validation and calculation.

LANGUAGE: JavaScript

CODE:
```javascript
// Calculate total trip price from bookings array
function calculateTotalTripPrice(bookings) {
  if (!Array.isArray(bookings) || bookings.length === 0) return 0;
  return bookings.reduce((sum, b) => sum + Number(b.price || 0), 0);
}

// Validate bookings: if any bookings exist, each must cost > 0
function validateBookings(bookings) {
  if (!Array.isArray(bookings) || bookings.length === 0) return { valid: true, message: 'No bookings' };
  for (const b of bookings) {
    if (!(Number(b.price) > 0)) {
      return { valid: false, message: `Booking ${b.id || '[unknown]'} must have price > 0` };
    }
  }
  return { valid: true };
}

// Example usage
const bookings = [{ id: 'b1', price: 150.0 }, { id: 'b2', price: 200.50 }];
const total = calculateTotalTripPrice(bookings); // 350.5
const validation = validateBookings(bookings); // { valid: true }
```

STEP: 4 — Minimal JSON data model for generator / backend

DESCRIPTION: Provide a minimal JSON schema that represents Trip, Booking, and Note relations. Useful for generating OData/CDS models or mocking data during development.

LANGUAGE: JSON

CODE:
```json
{
  "Trip": {
    "id": "string",
    "employeeId": "string",
    "startDate": "string (ISO-8601)",
    "endDate": "string (ISO-8601)",
    "destination": "string",
    "totalPrice": "number",
    "notes": [
      {
        "id": "string",
        "text": "string",
        "createdAt": "string (ISO-8601)"
      }
    ],
    "bookings": [
      {
        "id": "string",
        "type": "string",             // e.g., flight, hotel, car
        "vendor": "string",
        "price": "number",
        "currency": "string",
        "details": "string"
      }
    ]
  }
}
```

STEP: 5 — UI behavior: navigate from booking row to booking detail

DESCRIPTION: Example client-side event handler to open booking details when a booking row is clicked. Adapt to your UI framework (Fiori elements, UI5, React, Angular).

LANGUAGE: TypeScript

CODE:
```typescript
// Example: generic navigation handler (UI5 / SPA)
function onBookingRowPress(bookingId: string, navigateFn: (route: string, params?: any) => void) {
  if (!bookingId) return;
  // navigateFn could be UI5 router.navTo or React Router history.push
  navigateFn('BookingDetail', { bookingId });
}

// Example usage with a hypothetical router
onBookingRowPress('b1', (route, params) => {
  // for UI5: sap.ui.core.UIComponent.getRouterFor(this).navTo(route, params);
  console.log('Navigate to', route, params);
});
```

STEP: 6 — Recommended development flow for Fiori tools in BAS

DESCRIPTION: Use the prompt markdown + images as input to your RAG or generator pipeline. Typical steps:
- Place manage-travel-prompt.md and images in project root.
- Use an AI-enabled template generator or Fiori tool to parse the prompt and produce UI scaffolding.
- Wire up the JSON model and implement the business rule functions in backend or client validation.
- Add navigation handler to booking rows to show booking object page.

LANGUAGE: Plain text / checklist

CODE:
```text
1. Create manage-travel-prompt.md (paste prompt from STEP 1).
2. Upload Travel_List.jpeg and Travel_Details.jpeg to same folder.
3. (Optional) Add sketch images under images/ as listed.
4. Run your RAG-based generator or Fiori tooling pointing at this markdown file.
5. Implement calculateTotalTripPrice and validateBookings in your service logic.
6. Implement booking row press navigation to booking details.
7. Test edge cases: no bookings, bookings with zero/negative price.
```


--------------------------------

**TITLE**: Manage Travel - Add Example Images to SAP Business Application Studio Project

**INTRODUCTION**: This guide explains how to add the two example images for the "Manage Travel List Report Page" sample to an SAP Business Application Studio workspace, where to place them, and how to reference them from UI5 XML views and markdown documentation. Use these steps to reproduce the example visuals inside a Fiori tools project.

**TAGS**: fiori-tools, sapui5, business-application-studio, images, project-structure, ui5-view

**STEP**: 1 — Create images folder and place files in workspace

**DESCRIPTION**: Create an images folder in your project workspace and place the two example image files there. The exact filenames you must use (preserve them) are listed below. This step uses generic shell commands to create the directory and copy files; replace source paths with where you saved the downloaded images on your machine.

**LANGUAGE**: Shell

**CODE**:
```bash
# from the root of your SAP BAS project
mkdir -p webapp/images

# Copy the downloaded images into the workspace images folder
# Replace /path/to/downloads/ with the actual path on your machine where you saved them
cp /path/to/downloads/Fiori_App_for_Managing_Travel_Application_Model_7ba4a29.png webapp/images/Fiori_App_for_Managing_Travel_Application_Model_7ba4a29.png
cp /path/to/downloads/Manage_Travel_Fiori_App_Page_UI_6d7f22d.jpg webapp/images/Manage_Travel_Fiori_App_Page_UI_6d7f22d.jpg

# Verify files exist
ls -l webapp/images/
```

**STEP**: 2 — Minimal project file structure showing where to place images

**DESCRIPTION**: Use this reference file tree to confirm correct placement of images relative to UI5 webapp files. Adjust paths if your project uses a different layout, but keep images accessible from webapp.

**LANGUAGE**: Text

**CODE**:
```text
your-project/
├─ webapp/
│  ├─ index.html
│  ├─ Component.js
│  ├─ manifest.json
│  ├─ view/
│  │  └─ ManageTravel.view.xml
│  └─ images/
│     ├─ Fiori_App_for_Managing_Travel_Application_Model_7ba4a29.png
│     └─ Manage_Travel_Fiori_App_Page_UI_6d7f22d.jpg
```

**STEP**: 3 — Reference and display the Page UI image in a UI5 XML view

**DESCRIPTION**: Use sap.m.Image to render the page UI image inside a UI5 XML view. The src is a relative path from the webapp folder. Include descriptive alt text. This example places the image inside a sap.m.Page content area.

**LANGUAGE**: XML

**CODE**:
```xml
<mvc:View controllerName="your.namespace.controller.ManageTravel"
          xmlns:mvc="sap.ui.core.mvc"
          xmlns="sap.m">
  <Page id="manageTravelPage" title="Manage Travel - Example">
    <content>
      <Image
        id="pageUiExample"
        src="images/Manage_Travel_Fiori_App_Page_UI_6d7f22d.jpg"
        alt="Manage Travel - Page UI example"
        densityAware="false"
        decorative="false"/>
    </content>
  </Page>
</mvc:View>
```

**STEP**: 4 — Display the Application Model image (diagram) in a dialog or info page

**DESCRIPTION**: If you want to show the application model image (diagram) in a dialog or an information section, use another sap.m.Image. Example shows a Dialog that opens on button press. The image file path is the exact filename provided.

**LANGUAGE**: XML

**CODE**:
```xml
<mvc:View controllerName="your.namespace.controller.ManageTravel"
          xmlns:mvc="sap.ui.core.mvc"
          xmlns="sap.m">
  <Page id="manageTravelPage" title="Manage Travel - Example">
    <content>
      <Button text="Show Application Model" press="onShowModel"/>
      <!-- Dialog will be created in controller; image src below is the exact filename -->
    </content>
  </Page>
</mvc:View>
```

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// in webapp/controller/ManageTravel.controller.js
sap.ui.define([
  "sap/ui/core/mvc/Controller",
  "sap/m/Dialog",
  "sap/m/Image",
  "sap/m/Button"
], function (Controller, Dialog, Image, Button) {
  "use strict";
  return Controller.extend("your.namespace.controller.ManageTravel", {
    onShowModel: function () {
      if (!this._oModelDialog) {
        this._oModelDialog = new Dialog({
          title: "Application Model",
          content: new Image({
            src: "images/Fiori_App_for_Managing_Travel_Application_Model_7ba4a29.png",
            alt: "Fiori App for Managing Travel - Application Model"
          }),
          beginButton: new Button({
            text: "Close",
            press: function () {
              this._oModelDialog.close();
            }.bind(this)
          })
        });
        this.getView().addDependent(this._oModelDialog);
      }
      this._oModelDialog.open();
    }
  });
});
```

**STEP**: 5 — Reference images in README or documentation markdown

**DESCRIPTION**: To include images in project docs (README.md), use standard markdown image syntax referencing the images folder. Ensure the viewer (e.g., GitHub or BAS preview) serves the webapp/images folder.

**LANGUAGE**: Markdown

**CODE**:
```markdown
# Manage Travel - Example Page

Application model:
![Application Model](webapp/images/Fiori_App_for_Managing_Travel_Application_Model_7ba4a29.png)

Page UI:
![Page UI](webapp/images/Manage_Travel_Fiori_App_Page_UI_6d7f22d.jpg)
```

**STEP**: 6 — Notes and quick checks

**DESCRIPTION**: Quick troubleshooting tips and checks to ensure images load correctly in the running app:
- Confirm filenames match exactly (including underscores and file extensions).
- Relative paths in UI5 views are relative to the index.html location (commonly webapp/).
- Clear browser cache if updated images don’t appear.
- If images do not load, open browser DevTools Network tab to check 404 paths and adjust accordingly.

**LANGUAGE**: Text

**CODE**:
```text
Checks:
- File existence: ls -l webapp/images/
- Browser: open Developer Tools -> Network -> filter by image -> reload
- Ensure UI5 view src uses: "images/<filename>"
```
--------------------------------

**TITLE**: Experimental: Developing a CAP Application Using Application Modeler Advanced Features

**INTRODUCTION**: Short, code-focused guide showing how Application Modeler auto-generates CDS schema, service references, and test CSVs when you add UI features (columns, charts, value help). Includes concrete file examples for db/schema.cds, srv/service.cds, test/data CSVs and a sample HTML include. Use these snippets to understand how the modeler updates your project and how to manually follow or review the generated changes.

**TAGS**: fiori-tools, CAP, application-modeler, cds, cds-annotations, test-data, mock-data, value-help, aggregation

**STEP**: 1 — Add UI Column: auto-generate entity property and mock-data row

**DESCRIPTION**: When you add a new column in the Page Editor and enter a new property name, Application Modeler will add the property to db/schema.cds and append a matching column to test/data/<Entity>.csv with generic mock data. Example shows adding a String column named newProperty to existing entity MyEntity.

**LANGUAGE**: CDS

**CODE**:
```CDS
// File: db/schema.cds
namespace my.app;

entity MyEntity {
  key ID       : UUID;
  Name         : String;
  // <-- Auto-generated when you add a column "newProperty" in Page Editor:
  newProperty  : String;        // auto-generated property (type chosen in UI)
}
```

**LANGUAGE**: CSV

**CODE**:
```CSV
# File: test/data/MyEntity.csv
ID,Name,newProperty
00000000-0000-0000-0000-000000000001,Example Name,example text
00000000-0000-0000-0000-000000000002,Another Name,more text
```

**STEP**: 2 — Add Chart/Table: auto-generate a 1:n entity with UUID and chart annotations

**DESCRIPTION**: When you add a chart or table view and choose to create a new entity, Application Modeler generates a new child 1:n entity in db/schema.cds (with UUID key), references it in srv/service.cds, and creates test/data/<Child>.csv. If you created a chart, the generated service annotation includes @Aggregation.ApplySupported with GroupableProperties and AggregatableProperties pointing to the chosen dimension and measure.

**LANGUAGE**: CDS

**CODE**:
```CDS
// File: db/schema.cds
namespace my.app;

// Parent entity (existing)
entity SalesHeader {
  key ID          : UUID;
  DocumentNumber  : String;
  // association to generated child (1:n)
  Items           : Composition of many SalesItem on Items.Parent = $self;
}

// <-- Auto-generated child entity when you add a chart/table view:
entity SalesItem {
  key ID          : UUID;           // auto-generated UUID key
  Parent          : Association to SalesHeader;
  Region          : String;         // chosen as Dimension in UI
  Amount          : Decimal(13,2);  // chosen as Measure in UI
}
```

**LANGUAGE**: CDS

**CODE**:
```CDS
// File: srv/service.cds
using my.app as my;

service CatalogService {
  entity SalesHeader as projection on my.SalesHeader;
  entity SalesItem   as projection on my.SalesItem
    @(@Aggregation.ApplySupported: true,
      @Aggregation.GroupableProperties: ['Region'],
      @Aggregation.AggregatableProperties: ['Amount']);
}
```

**LANGUAGE**: CSV

**CODE**:
```CSV
# File: test/data/SalesItem.csv
ID,Parent_Ref,Region,Amount
00000000-0000-0000-0000-000000000010,00000000-0000-0000-0000-000000000001,North,1234.56
00000000-0000-0000-0000-000000000011,00000000-0000-0000-0000-000000000001,South,789.00
```

**STEP**: 3 — Add Value Help: auto-generate a 1:1 associated entity (no UUID) and update associations

**DESCRIPTION**: When you convert a field to Value Help and enter a new entity + properties in the Page Editor, Application Modeler generates a small value-help entity (no UUID), adds a 1:1 association from the main entity to the value-help entity, replaces the original scalar property in annotations with navigation to the value-help key, and generates test data mapping.

Important restriction: You cannot choose UUID as the value-help key/property type.

**LANGUAGE**: CDS

**CODE**:
```CDS
// File: db/schema.cds
namespace my.app;

// Main entity before change:
// entity Product {
//   key ID      : UUID;
//   Category    : String;     // scalar value replaced by association
// }

// After using Value Help and creating a new entity ValueCategory:
entity ValueCategory {
  key Code        : String;   // NOTE: generated value-help key; DO NOT use UUID here
  Description     : String;
  /* Additional properties added in the Page Editor will be generated here */
}

entity Product {
  key ID          : UUID;
  // association to generated value-help entity (1:1)
  Category        : Association to ValueCategory;   // replaces original scalar property
  Name            : String;
}
```

**LANGUAGE**: CSV

**CODE**:
```CSV
# File: test/data/Product.csv
ID,Category_Code,Name
00000000-0000-0000-0000-000000000100,CAT-A,Product One
00000000-0000-0000-0000-000000000101,CAT-B,Product Two

# File: test/data/ValueCategory.csv
Code,Description
CAT-A,Category A description
CAT-B,Category B description
```

**STEP**: 4 — How annotations and manifest.json are updated (what to check)

**DESCRIPTION**: Application Modeler will:
- Add the new entity and properties to db/schema.cds (see examples above).
- Add a reference/projection in srv/service.cds and, for chart entities, add @Aggregation.ApplySupported annotations.
- Replace scalar field usage in UI annotations with a navigation to the value-help entity key; also update manifest.json UI metadata so the UI points to the navigation target.
- Create/append CSV files under test/data with generic mock values for the new properties.

If you need to review changes, check:
- db/schema.cds (new entities/props)
- srv/service.cds (projections and aggregation annotations)
- test/data/*.csv (mock data rows)
- webapp/manifest.json (UI metadata changes performed by the modeler)

**LANGUAGE**: HTML

**CODE**:
```HTML
<!-- Example: include icon CSS if your generated UI references SAP icons -->
<link rel="stylesheet" type="text/css" href="css/sap-icons.css"/>
```

**STEP**: 5 — Regenerate/refine mock data with AI (UI action)

**DESCRIPTION**: After the modeler generates generic mock CSV values, you can refine them using the Page Editor's "Generate Mock Data with AI" action. This is a UI-driven operation:
1. Open Page Editor.
2. Click the "Generate Mock Data with AI" icon.
3. Click Generate.

Result: test/data/*.csv rows are replaced (or enriched) with contextually meaningful values. No CLI required — action is invoked from the Page Editor.

**LANGUAGE**: CSV

**CODE**:
```CSV
# Example: before AI refine (generic)
ID,Name,Region,Amount
00000000-0000-0000-0000-000000000001,Name1,Region1,100.00

# Example: after AI refine (meaningful)
ID,Name,Region,Amount
00000000-0000-0000-0000-000000000001,Blue T-Shirt,North America,129.99
```

**STEP**: 6 — Notes and cautions

**DESCRIPTION**: Experimental feature notes you must preserve:
- Experimental features may change and are not for productive use.
- If service and database schema files are updated externally (non-functional formatting aside), advanced auto-generation features in Application Modeler are disabled.
- Always back up real data before testing experimental features.

**LANGUAGE**: TEXT

**CODE**:
```text
Paths to check after using advanced features:
- db/schema.cds           (entity/property changes)
- srv/service.cds        (service projections, @Aggregation annotations)
- test/data/*.csv        (mock data added for new entities/properties)
- webapp/manifest.json   (UI metadata navigation/value-help updates)
```
--------------------------------

**TITLE**: Extending an Existing SAPUI5/Fiori Application — Add a new view + route and run locally

**INTRODUCTION**: This guide shows the minimal, reproducible code steps to extend an existing SAPUI5/Fiori application by adding a new view + controller, registering a routing route/target in the manifest, enabling router initialization in Component.js, and running the app locally with ui5 tooling. Keep file paths, manifest snippets, and runnable commands ready for code generation or automation.

**TAGS**: fiori-tools, ui5, sapui5, extension, manifest, routing, ui5-cli, vscode

STEP: 1 — Clone project and install dependencies

DESCRIPTION: Clone the repository (or copy the application) and install Node dependencies. Ensure ui5-cli is available as a dev dependency or globally.

LANGUAGE: Shell

CODE:
```bash
# clone app (replace URL)
git clone https://example.com/my-fiori-app.git my-fiori-app
cd my-fiori-app

# install dependencies (ensure ui5-cli or @ui5/cli is installed)
npm install

# (optional) install ui5 CLI locally
npm install --save-dev @ui5/cli
```

STEP: 2 — Ensure ui5 tooling config (ui5.yaml) exists

DESCRIPTION: Add a minimal ui5.yaml so ui5 tooling serves the webapp folder. Place this file at the project root.

LANGUAGE: YAML

CODE:
```yaml
# ui5.yaml (project root)
specVersion: '2.1'
metadata:
  name: my.app
type: application
resources:
  configuration:
    paths:
      webapp: webapp
```

STEP: 3 — Add a new route + target to webapp/manifest.json

DESCRIPTION: Register a new routing route and target that points to a view in the extension namespace. Modify the existing webapp/manifest.json under "sap.ui5.routing". Insert the route and the target to load the new view into the app control (controlId must match the existing app control id in your index.html/RootView, commonly "app" or "appRoot").

LANGUAGE: JSON

CODE:
```json
// webapp/manifest.json (partial - merge into existing file under "sap.ui5")
{
  "sap.ui5": {
    "routing": {
      "config": {
        "routerClass": "sap.ui.core.routing.Router",
        "viewType": "XML",
        "viewPath": "my.app.view",
        "controlId": "app",
        "controlAggregation": "pages",
        "async": true
      },
      "routes": [
        {
          "name": "extension",
          "pattern": "extension",
          "target": "extensionTarget"
        }
      ],
      "targets": {
        "extensionTarget": {
          "viewName": "ExtensionView",
          "viewLevel": 1
        }
      }
    }
  }
}
```

STEP: 4 — Create the extension view file

DESCRIPTION: Add a new XML view that represents the extension page. Place it at webapp/view/ExtensionView.view.xml. This example is a simple sap.m.Page that will be inserted into the existing App aggregation.

LANGUAGE: XML

CODE:
```xml
<!-- webapp/view/ExtensionView.view.xml -->
<mvc:View controllerName="my.app.controller.ExtensionView"
          xmlns:mvc="sap.ui.core.mvc"
          xmlns="sap.m">
  <Page title="Extension">
    <content>
      <Text text="This is the extension view" />
    </content>
  </Page>
</mvc:View>
```

STEP: 5 — Create the extension controller

DESCRIPTION: Add a matching controller for the view. Place it at webapp/controller/ExtensionView.controller.js.

LANGUAGE: JavaScript

CODE:
```javascript
// webapp/controller/ExtensionView.controller.js
sap.ui.define([
  "sap/ui/core/mvc/Controller"
], function (Controller) {
  "use strict";
  return Controller.extend("my.app.controller.ExtensionView", {
    onInit: function () {
      // initialization logic for extension view
    }
  });
});
```

STEP: 6 — Ensure Component.js initializes the router

DESCRIPTION: Confirm your Component.js initializes the router (manifest: "json" metadata). If missing, add init that calls this.getRouter().initialize(). Save at webapp/Component.js.

LANGUAGE: JavaScript

CODE:
```javascript
// webapp/Component.js
sap.ui.define([
  "sap/ui/core/UIComponent",
  "sap/ui/Device"
], function (UIComponent, Device) {
  "use strict";
  return UIComponent.extend("my.app.Component", {
    metadata: {
      manifest: "json"
    },
    init: function () {
      // call base component init
      UIComponent.prototype.init.apply(this, arguments);

      // initialize the router (reads routing config from manifest.json)
      this.getRouter().initialize();
    }
  });
});
```

STEP: 7 — Add npm scripts to run locally with ui5 serve

DESCRIPTION: Add a script to package.json to run the app locally using the ui5 CLI.

LANGUAGE: JSON

CODE:
```json
// package.json (partial - add under "scripts")
{
  "scripts": {
    "start": "ui5 serve --config=ui5.yaml --open index.html",
    "build": "ui5 build --include-task=generateManifestBundle"
  }
}
```

STEP: 8 — Run and test the extension

DESCRIPTION: Start the local server and open the route. Navigate to the extension route hash (#/extension) in the browser.

LANGUAGE: Shell

CODE:
```bash
# start the dev server
npm start

# open in browser and go to:
# http://localhost:8080/index.html#/extension
```

STEP: 9 — Optional: Override an existing view (replace instead of add)

DESCRIPTION: To replace an existing view used by a target, point the target.viewName/viewPath to your extension view or change the target reference in manifest.json to use your viewName. Example: change target "Home" to use "my.app.view.ExtensionView".

LANGUAGE: JSON

CODE:
```json
// webapp/manifest.json (target override example)
{
  "sap.ui5": {
    "routing": {
      "targets": {
        "home": {
          "viewName": "ExtensionView",
          "viewPath": "my.app.view",
          "viewLevel": 1
        }
      }
    }
  }
}
```

STEP: 10 — Debugging tips

DESCRIPTION: Quick checks if extension does not appear:
- Confirm controlId in routing config matches the App control ID in the root view/index.html.
- Ensure Component.js metadata points to manifest: "json".
- Check browser console for missing module names or namespace mismatches (controller/view names must match folder paths).
- Verify ui5 tooling serves the webapp folder (ui5.yaml paths).

LANGUAGE: Text

CODE:
```text
# Quick checklist:
# - webapp/Component.js calls this.getRouter().initialize()
# - webapp/manifest.json has correct "viewPath" & "controlId"
# - view/controller modules are at webapp/view and webapp/controller with matching names
# - run `npm start` and open http://localhost:8080/index.html#/extension
```

--------------------------------

**TITLE**: Extend SAP Fiori Application on On-Premise ABAP with VS Code — Practical Checklist & Validation Scripts

**INTRODUCTION**: Practical, code-oriented checklist and small validation scripts to prepare, validate, and extend an existing SAP Fiori application on an on‑premise ABAP system using Visual Studio Code. This focuses on actionable checks: system/service connectivity, manifest.json validation for adaptation projects, VS Code connection configuration example, and recommended source-control commands. Note: this integration is experimental — test in non-productive environments.

**TAGS**: fiori-tools, sapui5, abap, on-premise, vs-code, adaptation, adt, manifest, validation

**STEP**: 1 — Verify ABAP system connectivity and required services

**DESCRIPTION**: Confirm network connectivity and that the ADT and UI5 services are active on the target on‑premise ABAP system: /sap/bc/adt, /sap/bc/ui2/app_index/, and /sap/bc/adt/discovery. Use simple authenticated HTTP requests to validate. A 200 response indicates the service is enabled and reachable. Use HTTPS and valid credentials.

**LANGUAGE**: Shell

**CODE**:
```bash
# Replace <HOST>, <PORT>, <USER>, <PASS> with your values
BASE_URL="https://<HOST>:<PORT>"

# Check ADT discovery service
curl -k -u "<USER>:<PASS>" "$BASE_URL/sap/bc/adt/discovery" -I

# Check UI5 app index service
curl -k -u "<USER>:<PASS>" "$BASE_URL/sap/bc/ui2/app_index/" -I

# Check ADT root
curl -k -u "<USER>:<PASS>" "$BASE_URL/sap/bc/adt/" -I

# Expected: HTTP/1.1 200 OK (or other 2xx)
```

**STEP**: 2 — Validate ADT access by calling discovery (authorization check)

**DESCRIPTION**: The minimal ADT access required for creating an adaption project is access to /sap/bc/adt/discovery. To verify fine-grained permission requirements (for adaptation resources) consult authorization object S_ADT_RES and its URI field. Use the discovery call to ensure your user has necessary ADT access.

**LANGUAGE**: Shell

**CODE**:
```bash
# Attempt to fetch discovery payload (returns JSON/XML listing ADT services)
curl -k -u "<USER>:<PASS>" "$BASE_URL/sap/bc/adt/discovery" 

# If you get 401/403, check authorizations (S_ADT_RES) for the user via SU01 / PFCG / SU53 in ABAP.
```

**STEP**: 3 — Programmatic validation of manifest.json for adaptation project prerequisites

**DESCRIPTION**: Adaptation projects require:
- ABAP system software component SAP_UI >= 7.54
- Base application minimum SAPUI5 version >= 1.30
- Application's system SAPUI5 version should ideally be >= 1.72 for adaptation support
- The application must have a manifest.json and must NOT be a scaffolding app (sap.ca.scfld.md present)

Use the script below to validate manifest.json presence and basic fields: minUI5Version, presence of sap.ca.scfld.md (scaffolding lib), and existence of manifest.json.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// manifest-validate.js
// Usage: node manifest-validate.js /path/to/manifest.json

const fs = require('fs');
const path = require('path');

const file = process.argv[2];
if (!file) {
  console.error('Usage: node manifest-validate.js /path/to/manifest.json');
  process.exit(2);
}

try {
  const raw = fs.readFileSync(file, 'utf8');
  const manifest = JSON.parse(raw);

  const ui5 = manifest['sap.ui5'] || {};
  const deps = ui5.dependencies || {};
  const libs = deps.libs || {};
  const minUI5 = deps.minUI5Version || null;

  console.log('manifest.json found:', file);
  console.log('sap.ui5.dependencies.minUI5Version:', minUI5 || 'NOT SET');

  if (minUI5) {
    const v = minUI5.split('.').map(n => parseInt(n, 10));
    const meetsMin = (v[0] > 1) || (v[0] === 1 && v[1] >= 30);
    console.log('Meets minimum base-app SAPUI5 >= 1.30:', meetsMin ? 'YES' : 'NO');
  } else {
    console.warn('Warning: minUI5Version not declared in manifest.');
  }

  const isScaffold = Object.keys(libs).some(l => l.toLowerCase().includes('sap.ca.scfld.md'.toLowerCase()));
  console.log('Is scaffolding app (sap.ca.scfld.md present):', isScaffold ? 'YES' : 'NO');

  if (isScaffold) {
    console.warn('Adaptation projects DO NOT support scaffolding applications (sap.ca.scfld.md).');
  }

  // Extra advisory checks (cannot detect ABAP-side SAP_UI version here)
  console.log('\nAdvisory checks (manual):');
  console.log('- Ensure on-premise ABAP system SAP_UI >= 7.54');
  console.log('- Ensure selected system SAPUI5 version >= 1.72 for adaptation project support');
  console.log('- If system SAPUI5 < 1.96, consult SAP Note 3223667');
  console.log('- If system SAPUI5 < 1.90, it cannot be used as the base for a new adaptation project');
} catch (e) {
  console.error('Error reading or parsing manifest.json:', e.message);
  process.exit(3);
}
```

**STEP**: 4 — Example VS Code connection configuration for ADT/discovery (project-local .vscode/settings.json)

**DESCRIPTION**: Example configuration to store connection settings in a VS Code workspace. Adjust keys to match the Fiori Tools / ABAP extensions you use. The important values are host, port, useSsl, and the discovered ADT endpoints (/sap/bc/adt/discovery). Keep credentials out of checked-in files; use environment variables or VS Code secret storage.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.adt": {
    "connection": {
      "host": "<HOST>",
      "port": <PORT>,
      "useSsl": true,
      "client": "<SAP_CLIENT>",
      "user": "${env:SAP_USER}",
      "services": [
        "/sap/bc/adt/discovery",
        "/sap/bc/adt/"
      ]
    },
    "ui5": {
      "appIndexUrl": "https://<HOST>:<PORT>/sap/bc/ui2/app_index/"
    }
  }
}
```

**STEP**: 5 — Initialize source control for the adaptation project (recommended)

**DESCRIPTION**: Use git to track adaptation project source. Always preview and modify using the checked-out source code. Standard git workflow commands are shown.

**LANGUAGE**: Shell

**CODE**:
```bash
# Initialize repository (run inside your project root)
git init
git add .
git commit -m "Initial adaptation project import"

# Example: add remote and push
git remote add origin git@github.com:your-org/your-adaptation-project.git
git push -u origin main
```

**STEP**: 6 — Important adaptation project constraints and SAPUI5 version notes (manual checks)

**DESCRIPTION**: Keep these constraints in mind while creating and deploying adaptation projects:

- Adaptation projects are supported only on on‑premise ABAP systems with SAP_UI >= 7.54.
- The base application must have a manifest.json and base app min SAPUI5 >= 1.30.
- The application's system SAPUI5 version should be >= 1.72 to create an adaptation project.
- If the selected system SAPUI5 version is < 1.96, implement SAP Note 3223667 on the system.
- If the selected system SAPUI5 version is < 1.90, you cannot use that application as a base for a new adaptation project (update SAPUI5 first).
- Adaptation projects cannot be created for:
  - Applications that require a mandatory start parameter.
  - Application variants already deployed with an adaptation project (cannot be used as base).
- You cannot deploy an adaptation project to a package enabled for ABAP for Cloud Development; you can create and edit but not deploy. See Developer Extensibility docs.

**LANGUAGE**: Plain

**CODE**:
```text
Constraints summary (manual checklist):
- ABAP system: SAP_UI >= 7.54  -> REQUIRED
- App: manifest.json exists   -> REQUIRED
- Base app minUI5Version >=1.30 -> RECOMMENDED
- App system SAPUI5 version >=1.72 -> REQUIRED for adaptation
- If system SAPUI5 <1.96 -> implement SAP Note 3223667
- If system SAPUI5 <1.90 -> cannot use as base (update SAPUI5)
- Not supported as base: apps needing mandatory startup parameter OR variants already deployed with adaptation project
- Deployment blocked for packages enabled for ABAP for Cloud Development
```

**STEP**: 7 — Preview considerations and limitations

**DESCRIPTION**: During development the Adaptation Editor preview and a separate browser preview run in sandbox-like environments (not within SAP Fiori launchpad). Features depending on the launchpad (e.g., cross-app navigation, some personalization/navigation services) may not behave exactly as in production. Validate final behavior after deployment to the ABAP repository and within SAP Fiori launchpad.

**LANGUAGE**: Plain

**CODE**:
```text
Preview notes:
- Adaptation Editor + browser preview = sandbox environments
- FLP-dependent features (navigation between apps, some runtime services) may not be available in preview
- Always perform final validation after deployment in SAP Fiori launchpad
```

**STEP**: 8 — References and next actions (links & SAP Notes)

**DESCRIPTION**: Use these references for next steps: create an Adaptation Project, make adaptations, preview, and deploy. If system UI5 versions are below thresholds, follow SAP Note 3223667.

**LANGUAGE**: Plain

**CODE**:
```text
Next documentation pages (follow these during a full workflow):
- Creating an Adaptation Project: creating-an-adaptation-project-072f566.md
- Making Adaptations: making-adaptations-2a076dd.md
- Previewing an Adaptation Project: previewing-an-adaptation-project-8701335.md
- Deploying an Adaptation Project: deploying-an-adaptation-project-to-the-abap-repository-febf0d9.md

SAP Notes:
- 3223667 (apply when SAPUI5 < 1.96)
```
--------------------------------

**TITLE**: Create and Manage an SAPUI5 Adaptation Project (Application Variant) for SAP S/4HANA Cloud & SAP BTP, ABAP Environment

**INTRODUCTION**: This guide provides a concise, code-focused workflow and examples to create, version-control, preview, and store an SAPUI5 Adaptation Project (application variant) for extending SAP Fiori applications in SAP S/4HANA Cloud Public Edition and SAP BTP, ABAP Environment. It includes destination configuration, recommended project structure, Git commands, and an example flex change (application variant) JSON file you can adapt and commit.

**TAGS**: fiori-tools, SAPUI5, S4HANA-Cloud, ABAP-Environment, adaptation-project, application-variant, SAP-BTP, Business-Application-Studio, extensibility, git, sap.ui.fl

STEP: 1 — Verify application extensibility and prerequisites

DESCRIPTION: Confirm the SAP Fiori application is released for extensibility via adaptation projects and ensure you have required roles, a developer tenant, and a destination to that tenant.

- Check the app in the SAP Fiori Apps Reference Library → open the app → Implementation Information → Extensibility (front-end).
- Ensure you have a 3-system landscape / developer tenant for S/4HANA Cloud and the required business catalogs:
  - Development - UI Deployment (SAP_A4C_BC_DEV_UID_PC)
  - Business catalog to retrieve extensible apps (example SAP_A4C_BC_DEV_OBJ_DIS_PC)
- Read: Releasing an SAP Fiori Application to Be Extensible in Adaptation Projects on SAP S/4HANA Cloud and SAP BTP, ABAP Environment (referenced doc).

LANGUAGE: None

CODE:
```text
References:
- Fiori Apps Reference Library: https://fioriappslibrary.hana.ondemand.com/sap/fix/externalViewer/#/homePage
- Influence request (if not supported): https://influence.sap.com/sap/ino/#/campaign/1177
- System landscapes: https://help.sap.com/docs/SAP_S4HANA_CLOUD/...
- Releasing ext. doc: releasing-an-sap-fiori-application-to-be-extensible-in-adaptation-projects-on-sap-s-4hana-1046206.md
```

STEP: 2 — Create a destination in BTP to your development tenant

DESCRIPTION: Create an HTTP destination that the SAP Business Application Studio (or other IDE) uses to talk to the development S/4HANA Cloud tenant. Replace placeholders with your system values. Use the Subaccount/Connectivity UI in SAP BTP cockpit.

LANGUAGE: JSON

CODE:
```json
{
  "Name": "DevTenant_S4HC",
  "Type": "HTTP",
  "URL": "https://<your-s4hana-cloud-host>",
  "ProxyType": "Internet",
  "Authentication": "OAuth2SAMLBearerAssertion",
  "TokenServiceURL": "https://<xsuaa-token-service>",
  "sapClient": "000",
  "Description": "Destination for SAP Business Application Studio to connect to S/4HANA Cloud development tenant"
}
```

STEP: 3 — Initialize an adaptation project skeleton in SAP Business Application Studio

DESCRIPTION: In SAP Business Application Studio, create a new Adaptation Project for the selected application. The adaptation project is a separate project that contains UI5 artifacts and flex/change files. Below is a recommended minimal project structure and manifest.json fragments relevant to flexibility and namespace.

LANGUAGE: None / JSON

CODE:
```text
Recommended project structure (adaptation-project/):
- adaptation-project/
  - .git/
  - webapp/
    - index.html
    - Component.js
    - manifest.json
    - changes/
      - change_<TIMESTAMP>.change
  - package.json
  - .vscode/ (optional)
```

manifest.json fragment (include or adapt inside webapp/manifest.json):
```json
{
  "sap.app": {
    "id": "com.example.adaptation", 
    "applicationVersion": { "version": "1.0.0" },
    "title": "Adaptation Project: Example"
  },
  "sap.ui5": {
    "flexibility": {
      "namespace": "com.example.adaptation"
    }
  }
}
```

STEP: 4 — Create a sample application variant (sap.ui.fl change file)

DESCRIPTION: Application variants and UI adaptations are stored as sap.ui.fl change files. Save changes under webapp/changes/. The example below demonstrates a minimal change file that sets the application title (changeType = appdescr_app_setTitle). Adapt fields: namespace, selector, creation timestamp, and content.

LANGUAGE: JSON

CODE:
```json
{
  "fileType": "change",
  "layer": "VENDOR",
  "namespace": "com.example.adaptation",
  "reference": "com.example.original", 
  "selector": {
    "id": "sap-ui-component---com-example-original-component",
    "idIsLocal": false,
    "type": "component"
  },
  "changeType": "appdescr_app_setTitle",
  "content": {
    "title": "My App Variant Title"
  },
  "creation": "2025-01-01T00:00:00Z",
  "support": {
    "generator": "adaptation-project",
    "sapui5Version": "1.98.0"
  }
}
```

STEP: 5 — Use Git for source control of the adaptation project

DESCRIPTION: Keep the adaptation project in Git to enable preview, branching, and collaboration. Typical Git workflow commands are shown below.

LANGUAGE: Shell

CODE:
```bash
# clone your adaptation-project repository
git clone https://<git-host>/<your-org>/adaptation-project.git
cd adaptation-project

# create a feature branch
git checkout -b feature/adaptation-variant

# add your change file and other files
git add webapp/changes/change_*.change webapp/manifest.json

# commit and push
git commit -m "Add application variant: set app title"
git push -u origin feature/adaptation-variant
```

STEP: 6 — Preview locally or in Business Application Studio

DESCRIPTION: Use the IDE preview (SAP Business Application Studio provides Fiori tools adapters) or UI5 tooling to preview your adaptation project pointing to the destination for backend resources. Typical steps:
- Configure the workspace to use the destination created in Step 2.
- Start the Fiori tools preview (IDE UI menu) or use npm scripts if provided in package.json.

LANGUAGE: JSON / Shell

CODE:
```json
// Example package.json script (optional)
{
  "scripts": {
    "start": "fiori-tools preview --open"
  }
}
```

```bash
# Install dependencies (if package.json present)
npm install

# Start preview (SAP Business Application Studio / local with fiori-tools)
npm start
```

STEP: 7 — Commit, push, and deploy/register variant to the backend (high level)

DESCRIPTION: After testing, push your branch and follow your organization’s CI/CD or deployment process to register the variant in the target system. Depending on landscape and tooling, the adaptation project or generated flex files will be deployed to the ABAP repository (transport) or published via the extensibility runtime on SAP BTP / S/4HANA Cloud.

LANGUAGE: None

CODE:
```text
High-level actions:
- Push branch to remote: git push origin feature/adaptation-variant
- Open Pull/Merge Request and follow approval process
- Use your CI/CD or SAP-provided deployment flow to register the changes into the target system (transport or adaptation publish step)
- Verify in the Fiori Launchpad that the application variant is available and behaves as expected
```

STEP: 8 — Reference & troubleshooting

DESCRIPTION: Keep these references handy for deeper configuration, extensibility rules, and tenant-specific instructions.

LANGUAGE: None

CODE:
```text
Key references:
- Git Source Control in SAP Business Application Studio: https://help.sap.com/docs/bas/sap-business-application-studio/git-source-control
- Fiori Apps Reference Library: https://fioriappslibrary.hana.ondemand.com/sap/fix/externalViewer/#/homePage
- Releasing apps for extensibility: releasing-an-sap-fiori-application-to-be-extensible-in-adaptation-projects-on-sap-s-4hana-1046206.md
```
--------------------------------

**TITLE**: Generate an SAP Fiori Elements Application from an Image (Project Accelerator)

**INTRODUCTION**: Step-by-step developer-focused instructions to generate a single SAP Fiori elements application using an image with the Project Accelerator in SAP Fiori tools AI. Includes required image conventions, how to upload to SAP Business Application Studio workspace, how to launch the accelerator, how to run/stop generation, and where the generated project appears.

**TAGS**: fiori-tools, project-accelerator, sap-fiori, ai, image, business-application-studio, workspace, generate, list-report, object-page

**STEP**: 1 — Prepare the image and filename

**DESCRIPTION**: Create or export an image that represents a single application UI (single list report or single object page). Use English labels directly on the image for UI elements and business intent. Keep the image focused on one application only. Follow these naming and content conventions for best results.

**LANGUAGE**: text

**CODE**:
```text
Accepted content:
- The image must show one application model/UI: a single list report OR a single object page.
- Use English labels and short phrases on-screen (e.g., "Manage Travel", "Filter by Date", "Create Request").
- Do not combine multiple, unrelated application UIs in one image.
- For multiple images or mixed text+images use the "Generating an Application Using Text and Images" flow.

Recommended file naming examples:
- manage-travel-list.jpg
- travel-request-object-page.jpg
- expenses-list-report.jpg
```

**STEP**: 2 — Place the image in your workspace

**DESCRIPTION**: Upload or copy the image into your workspace folder in SAP Business Application Studio. Provide an explicit path you will use later as Project Folder Path or when choosing the file in the Project Accelerator UI.

**LANGUAGE**: bash

**CODE**:
```bash
# Example: copy image into a workspace folder in Business Application Studio
# Adjust source and workspace paths to your environment
cp ~/Downloads/manage-travel-list.jpg ~/workspace/my-fiori-workspace/app-assets/manage-travel-list.jpg

# Example workspace path to reference later as Project Folder Path:
# /home/user/projects/my-fiori-app
```

**STEP**: 3 — Launch the Project Accelerator (Fiori tools AI)

**DESCRIPTION**: Open the Project Accelerator from SAP Fiori tools AI. Two UI options: Command Palette or SAP Fiori icon in the activity bar. Use the exact command string in the Command Palette.

**LANGUAGE**: text

**CODE**:
```text
Option A — Command Palette:
- Open Command Palette (Mac: CMD+SHIFT+P, Windows/Linux: CTRL+SHIFT+P)
- Type and run: Fiori tools AI: Launch the Project Accelerator

Option B — SAP Fiori activity:
- Click the SAP Fiori icon on the activity bar (icon: TNT/V3)
- Select "Project Accelerator" from the Fiori tools AI view
```

**STEP**: 4 — Choose the image file in Project Accelerator

**DESCRIPTION**: In the Project Accelerator UI, select the business requirement file. The file picker accepts .docx, .md, .txt, and .jpg. Ensure you pick the single image that describes the single application.

**LANGUAGE**: text

**CODE**:
```text
Project Accelerator UI:
- Under "Project Accelerator", click "Choose File (.docx, .md, .txt, .jpg)"
- Select: /workspace/my-fiori-workspace/app-assets/manage-travel-list.jpg
Note: Only one image for one application. The accelerator cannot generate a second application for the same project.
```

**STEP**: 5 — Provide the Project Folder Path

**DESCRIPTION**: Enter the exact filesystem path inside your workspace where the generated project should be created. Use an empty or new project folder (the accelerator cannot add a second application to an existing generated project).

**LANGUAGE**: text

**CODE**:
```text
Example Project Folder Path values:
- /home/user/projects/my-fiori-app
- /workspace/my-fiori-workspace/generated/my-fiori-app

Ensure the path points to the location where you want the generated project added.
```

**STEP**: 6 — Start generation and how to stop it

**DESCRIPTION**: Click Generate to start. Generation time depends on the requirement. To cancel mid-process, click the Stop icon and confirm. After stopping you may edit the image or instructions and re-run generation.

**LANGUAGE**: text

**CODE**:
```text
- Click: Generate
- To stop generation while running:
  1. Click the Stop icon (white large square)
  2. Confirm: "Are you sure you want to stop generation?" -> Click Yes
- After stopping: edit your business requirement and re-run Generate
```

**STEP**: 7 — Result location and next steps

**DESCRIPTION**: When generation completes, the project files are created at the provided Project Folder Path. Application Information view opens for the generated SAP Fiori application. Use SAP Fiori tools to inspect and further modify the app.

**LANGUAGE**: text

**CODE**:
```text
Typical post-generation behavior:
- Generated project added to: /home/user/projects/my-fiori-app
- Project structure (example):
  my-fiori-app/
    ├─ webapp/
    │   ├─ manifest.json
    │   ├─ Component.js
    │   ├─ controller/
    │   ├─ view/
    │   └─ i18n/
    ├─ package.json
    └─ README.md

- The Application Information view opens automatically for the generated app.
- Next steps: open the project, review manifest and metadata, run local tests, and adapt UI/logic as needed using SAP Fiori tools.
```

**STEP**: 8 — Important constraints and tips

**DESCRIPTION**: Quick checklist of constraints and recommended practices to avoid generation errors.

**LANGUAGE**: text

**CODE**:
```text
Constraints & tips:
- The image must describe a single app (single list report OR single object page).
- Use English labels on the image for UI controls and intent.
- The Project Accelerator accepts .docx, .md, .txt, and .jpg as input files for the business requirement.
- Do not attempt to generate a second application into the same generated project.
- If generation fails, edit the image or create a new, clearer image, then re-run the accelerator with a fresh target folder.
```
--------------------------------

**TITLE**: Generate an SAP Fiori Elements Application from Text and Images (Project Accelerator)

**INTRODUCTION**: Step-by-step, code-focused guide for preparing business-requirement files (Markdown or .docx) with images, uploading them to your SAP Business Application Studio workspace, launching the Project Accelerator (Fiori tools AI), and generating a single SAP Fiori elements application into a target project folder.

**TAGS**: fiori-tools, project-accelerator, sap-fiori, ai, business-application-studio, requirements, markdown, docx, images

**STEP**: 1 — Prepare the business-requirements file (Markdown or .docx)

**DESCRIPTION**: Create a .md or .docx file containing only text and images (no advanced formatting in .docx). Each image must represent a single list report or object page and be accompanied by explanatory text that maps image → page and lists any unseen content (tabs, sections, code list values). If a page has multiple states/views, include multiple images for that page and text explaining which image corresponds to which state.

Best practices:
- Use English labels for images and filenames.
- One image per page/state; multiple images only when depicting different states.
- Do not include headers/footers/tables in .docx.
- Keep the request focused on generating a single application.

**LANGUAGE**: Markdown

**CODE**:
```Markdown
# Manage Travel App - Requirements

## List Report: Travel Requests
![List Report - Travel Requests](./images/list-report.png)
Text: The list report shows travel request rows with columns: RequestID, EmployeeName, Destination, Status, SubmissionDate.
- Default filter: Status = "Open"
- Row action: Open Object Page by clicking RequestID

## Object Page: Travel Request Details
![Object Page - Details - Tab:Overview](./images/object-page-overview.png)
![Object Page - Details - Tab:Budget](./images/object-page-budget.png)
Text: Object page has tabs: Overview, Budget, Approvals.
- Overview fields: RequestID (key), EmployeeName, Destination, TravelDates, Status
- Budget tab fields (shown in second image): BudgetCode, EstimatedAmount, Currency
- Approvals are not visible in images; approval states are: Pending, Approved, Rejected

## Additional notes
- Use a Fiori List Report + Object Page template
- OData entity: TravelRequest with key RequestID
```

**LANGUAGE**: Text

**CODE**:
```text
Example workspace layout (required):
/home/user/workspace/
  ├─ requirements.md
  ├─ images/
  │   ├─ list-report.png
  │   ├─ object-page-overview.png
  │   └─ object-page-budget.png

Filename rules:
- Use English, descriptive names: list-report.png, object-page-overview.png
- Each image maps to a single page/state
```

**STEP**: 2 — Upload the file to your SAP Business Application Studio workspace

**DESCRIPTION**: Put your .md/.docx and image files into the workspace folder that will be accessible to Project Accelerator. You can drag-and-drop in the BAS file explorer or copy via terminal.

**LANGUAGE**: Shell

**CODE**:
```bash
# Example: copy local files into the workspace folder
cp ~/Downloads/requirements.md /home/user/workspace/requirements.md
cp -r ~/Downloads/images /home/user/workspace/images
# Verify files are in workspace
ls -la /home/user/workspace
```

**STEP**: 3 — Launch the Project Accelerator (Fiori tools AI)

**DESCRIPTION**: Open Project Accelerator using either the Command Palette or SAP Fiori icon in the Activity Bar. Once open, queries must be about generating an SAP Fiori elements application (no general AI requests).

- Command Palette: open and run the exact command below.
- SAP Fiori icon: click the SAP Fiori icon on the activity bar.

**LANGUAGE**: Text

**CODE**:
```text
Command Palette keyboard shortcut (macOS/Windows):
- macOS: Cmd + Shift + P
- Windows/Linux: Ctrl + Shift + P

Command to execute:
Fiori tools AI: Launch the Project Accelerator

Alternatively:
- Click the SAP Fiori (TNT) icon in the Activity Bar to open Project Accelerator.
```

**STEP**: 4 — Select the requirements file in Project Accelerator

**DESCRIPTION**: In the Project Accelerator UI choose your prepared file. Use the file selector control labeled:
"Choose File (.docx, .md, .txt, .jpg)" and pick the file you uploaded to the workspace.

**LANGUAGE**: Text

**CODE**:
```text
UI control label to use:
Choose File (.docx, .md, .txt, .jpg)
Select: /home/user/workspace/requirements.md
```

**STEP**: 5 — Provide the Project Folder Path

**DESCRIPTION**: Enter the absolute or workspace-relative folder path where the generated project should be created. Ensure the target folder is empty / not already used for another generated app (Project Accelerator cannot generate a second app into the same project).

**LANGUAGE**: Text

**CODE**:
```text
Example Project Folder Path (workspace-relative):
/home/user/workspace/my-fiori-app

Notes:
- Do not point to a folder with an existing generated Fiori project
- If generation fails, you can delete/empty this folder before retrying
```

**STEP**: 6 — Start generation and manage the process

**DESCRIPTION**: Click "Generate". Generation time varies based on requirements. To cancel a running generation, click the Stop icon (square) and confirm "Yes" when prompted.

**LANGUAGE**: Text

**CODE**:
```text
Buttons/Prompts:
- Generate  (starts generation)
- Stop (square icon) -> Confirm: "Are you sure you want to stop generation?" -> Yes

Behavior:
- Generation may take several minutes
- You can stop, edit requirements, and re-run
```

**STEP**: 7 — Inspect the generated project and next steps

**DESCRIPTION**: After successful generation the project is created at the Project Folder Path. Project Accelerator opens "Application Information" for the generated SAP Fiori application. Use SAP Fiori tools (editors, manifest, layout) to refine the app.

**LANGUAGE**: Text

**CODE**:
```text
Result:
- Files created at: /home/user/workspace/my-fiori-app
- Project Accelerator opens: Application Information (for the generated app)

Post-generation actions:
- Open project in BAS editor
- Review manifest.json, annotations, and generated pages
- Make edits and re-deploy as needed
```

**STEP**: 8 — Rules & gotchas (summary)

**DESCRIPTION**: Quick checklist to avoid common problems.

**LANGUAGE**: Text

**CODE**:
```text
Checklist:
- File type: .md or .docx (no advanced .docx formatting)
- Images uploaded to workspace and referenced in .md with relative paths
- One application per generation request
- Image filenames in English and descriptive
- For multi-state pages include multiple images and descriptive text mapping images -> states
```
--------------------------------

**TITLE**: Generate an SAP Fiori Elements Application with Project Accelerator (Text or File Input)

**INTRODUCTION**: Quick, code-focused instructions for generating a single SAP Fiori elements application using the Project Accelerator in SAP Fiori tools AI. Covers launching options (Command Palette, SAP Fiori, Joule), supplying business requirements via text or file, specifying the project folder, starting/stopping generation, and locating the generated project.

**TAGS**: fiori-tools, sap-fiori, project-accelerator, joule, sap-business-application-studio, ai, fiori-elements

**STEP**: 1 — Launch the Project Accelerator

**DESCRIPTION**: Use one of three entry points to open the Project Accelerator UI where you will provide business requirements and generate the app.

**LANGUAGE**: Shell

**CODE**:
```shell
# Option A: VS Code / Command Palette
# Open Command Palette (Ctrl/Cmd + Shift + P) and run:
Fiori tools AI: Launch the Project Accelerator

# Option B: SAP Fiori side bar icon
# Click the SAP Fiori icon (activity bar) to open Project Accelerator

# Option C: Joule (chat interface)
# In Joule enter the command (inline text or with workspace file):
/fiori-gen-spec-app #(./workspace/requirements.md)
# or with inline requirements:
# /fiori-gen-spec-app Create a Fiori Elements list/details app to manage customers and contracts.
```

**STEP**: 2 — Provide Business Requirements (Text input)

**DESCRIPTION**: For Command Palette and SAP Fiori launches, paste or type your business requirements into the Project Accelerator "Business Requirements" textbox. Use clear English and describe the app's entities, key fields, relationships, lists, filters, and required pages (list/detail/create/edit).

**LANGUAGE**: Text

**CODE**:
```text
# Example Business Requirements (paste into 'Business Requirements' textbox)
Create a Fiori Elements List-Report and Object-Page application for managing Customers and Contracts.
Entities:
- Customer (CustomerID PK, Name, Email, Country)
- Contract (ContractID PK, CustomerID FK, StartDate, EndDate, Status, Amount)

Use a List Report showing Customers with columns: CustomerID, Name, Email, Country.
On the Customer Object Page show details and a table of related Contracts.
Add filters on the List Report for Country and Contract Status.
OData service base path: /sap/opu/odata/sap/ZCUSTOMER_SRV
Project name: customer-contracts
```

**STEP**: 3 — Provide Business Requirements (File input)

**DESCRIPTION**: Upload a .md, .txt, or .docx file into your workspace (SAP Business Application Studio or VS Code workspace) and reference it in the Project Accelerator UI or Joule. The generator accepts docx, .md, .txt, .jpg for spec input.

**LANGUAGE**: Shell

**CODE**:
```shell
# Example: place file in workspace
# Save your requirements as ./workspace/requirements.md or ./workspace/requirements.docx

# Command Palette / SAP Fiori:
# - Click "Choose File (docx, .md, .txt, .jpg)" in Project Accelerator
# - Select ./workspace/requirements.md

# Joule:
# Send the Joule message referencing the workspace path:
# Use the hash syntax to attach the file:
 /fiori-gen-spec-app #(./workspace/requirements.md)
```

**STEP**: 4 — Use Example Spec Files (recommended for best results)

**DESCRIPTION**: Use the provided example specifications as templates or references. Place these example files in your workspace and open/modify them before generation.

**LANGUAGE**: Text

**CODE**:
```text
# Example spec files provided in docs:
example-1-manage-contracts-and-customer-information-in-the-system-c1bccf2.md
example-2-display-customers-with-related-contracts-a6c978f.md

# Copy one into your workspace and edit:
cp ./docs/example-1-manage-contracts-and-customer-information-in-the-system-c1bccf2.md ./workspace/requirements.md
```

**STEP**: 5 — Specify Project Folder Path and Generate

**DESCRIPTION**: Enter the destination project folder path (absolute or relative to workspace). Click Generate to begin project generation. The Project Accelerator will create a single Fiori elements application in that folder. Note: the tool cannot generate a second application for the same project.

**LANGUAGE**: Shell

**CODE**:
```shell
# Example project folder paths:
# Absolute
/home/username/projects/customer-contracts

# Relative to workspace
./projects/customer-contracts

# In Project Accelerator UI:
# - Set "Project Folder Path" to one of the above values
# - Click [Generate]
```

**STEP**: 6 — Stop Generation (cancel)

**DESCRIPTION**: If you need to cancel generation mid-process, use the Stop control and confirm the prompt. After stopping, edit your business requirements and run generation again.

**LANGUAGE**: Text

**CODE**:
```text
# To cancel generation:
# 1. Click the Stop icon (■) in Project Accelerator
# 2. Confirm by clicking "Yes" at "Are you sure you want to stop generation?"
# 3. Edit requirements and restart generation
```

**STEP**: 7 — Result: Find Generated Project and Open Application Information

**DESCRIPTION**: After successful generation, the project is created at the specified folder. The Project Accelerator will open the Application Information view for the generated Fiori application so you can review files and continue development with SAP Fiori tools.

**LANGUAGE**: Text

**CODE**:
```text
# Generated project location example:
./projects/customer-contracts

# Next steps:
# - Open the folder in the workspace
# - Inspect manifest.json, webapp/, src/, and the generated CDS/OData definitions (if any)
# - Use SAP Fiori tools editors to refine pages, annotations, and services
```
--------------------------------

**TITLE**: Generate a CAP + SAP Fiori Elements Application with Project Accelerator (SAP Fiori tools AI / Joule)

**INTRODUCTION**: Step-by-step, code-focused guide for preparing input, invoking the Project Accelerator / Joule (SAP Fiori tools AI) and understanding the generated project artifacts. Use these templates to prepare text/image input and inspect the produced CAP + Fiori app, test data, and code lists.

**TAGS**: fiori-tools, project-accelerator, joule, sap-build-code, cap, sap-business-application-studio, fiori-elements, test-data, ai

STEP: 1 — Prerequisites

DESCRIPTION: Verify account, environment and tool extensions before generating an application. You must have an SAP Build Code subscription (or Test Drive), a dev space that contains SAP Fiori tools and CAP tools extensions, and use SAP Business Application Studio (BAS) as your IDE.

LANGUAGE: Bash

CODE:
```bash
# Checklist (run manually / verify in BAS UI)
# 1) SAP Build Code subscription
#   - Sign up or verify: https://developers.sap.com/mission.sap-build-code-test-drive.html
# 2) Dev space with required extensions
#   - In SAP Business Application Studio, open "Dev Spaces" and confirm:
#     - Extension: "SAP Fiori tools"
#     - Extension: "CAP tools"
# 3) IDE
#   - Use SAP Business Application Studio (BAS)
# 4) Note: Project Accelerator automatically creates the project in the folder you choose (no staging area)
```

STEP: 2 — Prepare Business Requirements (text-first template)

DESCRIPTION: Prepare text describing entities, properties, associations, UI pages (list report, object pages, form entry), filter fields and sample code lists. Use the JSON template below for structured input to the Project Accelerator or as a checklist to paste into the AI prompt UI.

LANGUAGE: JSON

CODE:
```json
{
  "projectName": "PurchaseOrdersApp",
  "businessSummary": "Manage purchase orders and line items. Users must be able to list, filter, and update orders.",
  "entities": [
    {
      "name": "PurchaseOrder",
      "label": "Purchase Order",
      "properties": [
        {"name": "OrderID", "type": "UUID", "label": "Order ID"},
        {"name": "OrderDate", "type": "Date", "label": "Order Date"},
        {"name": "Supplier", "type": "String", "label": "Supplier"},
        {"name": "Status", "type": "Enum", "label": "Status", "values": ["New", "Approved", "Rejected"]}
      ],
      "associations": [
        {"type": "1:n", "target": "PurchaseOrderItem", "label": "Items"}
      ]
    },
    {
      "name": "PurchaseOrderItem",
      "label": "Order Item",
      "properties": [
        {"name": "ItemID", "type": "UUID", "label": "Item ID"},
        {"name": "Product", "type": "String", "label": "Product"},
        {"name": "Quantity", "type": "Decimal", "label": "Quantity"},
        {"name": "UnitPrice", "type": "Decimal", "label": "Unit Price"}
      ]
    }
  ],
  "ui": {
    "floorplan": "ListReport+ObjectPage",
    "listReport": {
      "filterFields": ["Supplier", "Status", "OrderDate"],
      "columns": ["OrderID", "OrderDate", "Supplier", "Status"]
    },
    "objectPages": [
      {"name": "Header", "sections": ["Overview", "Status"]},
      {"name": "Items", "sections": ["LineItemsTable"]}
    ]
  },
  "sampleDataInstructions": "Generate basic test data for preview. Store generated test data in the test folder. Use explicit enum values as code lists."
}
```

STEP: 3 — Prepare Business Requirements (image-first / layout images)

DESCRIPTION: If using images to describe layouts or column headers, provide image files and a short text description that maps images to entities/sections. Use this JSON to reference image filenames and captions. (Project Accelerator will use images to infer columns/layout and to generate test data.)

LANGUAGE: JSON

CODE:
```json
{
  "projectName": "PurchaseOrdersApp",
  "layoutImages": [
    {"file": "list_report_layout.png", "caption": "List report: columns OrderID, OrderDate, Supplier, Status"},
    {"file": "object_page_header.png", "caption": "Object page header with Supplier, Status and key actions"}
  ],
  "description": "Images show list columns, filter area, and object page layout. Use filters Supplier and Status. Map first image to ListReport, second to ObjectPage header."
}
```

STEP: 4 — Combined Text + Images Input

DESCRIPTION: Use both structured text and images for best results. Code lists (enum values) should be explicit in text to ensure they are persisted as data artifacts rather than random test values.

LANGUAGE: JSON

CODE:
```json
{
  "projectName": "PurchaseOrdersApp",
  "textInput": { /* reuse STEP 2 JSON structure */ },
  "imageInput": { /* reuse STEP 3 JSON structure */ },
  "notes": "Explicit enum values (Status) must be included in textInput to be created as code lists stored in the data folder."
}
```

STEP: 5 — Expected Generated Project Structure (what the Project Accelerator creates)

DESCRIPTION: After generation, the Project Accelerator creates a CAP + Fiori Elements project in the project folder you choose. Test data for preview goes to a test folder; any explicit code lists/enums are stored in a data folder. The app is draft-enabled and contains standard actions by default.

LANGUAGE: Shell

CODE:
```text
# Example generated project tree (top-level)
PurchaseOrdersApp/
├─ app/                           # Fiori elements UI (ui5/webapp)
│  ├─ webapp/
│  ├─ manifest.json
│  └─ ... 
├─ srv/                           # CAP services (cds)
│  ├─ service.cds
│  └─ server.js
├─ db/
│  ├─ schema.cds
│  └─ ...
├─ data/                          # Persisted code lists / enum values (explicit input)
│  └─ codeLists.json
├─ test/                          # Generated random test data for preview (non-sensitive)
│  └─ test-data.json
├─ package.json
└─ README.md

# Notes:
# - Project Accelerator creates the project directly in the folder you select (no staging area).
# - All generated apps are draft-enabled and include standard actions.
```

STEP: 6 — Supported Features & Mapping Guidelines

DESCRIPTION: Use this mapping when describing requirements so the AI generates the intended artifacts. If a supported feature is not mentioned, AI may omit it or implement a default. Unsupported features may be ignored or implemented at the AI's discretion.

LANGUAGE: JSON

CODE:
```json
{
  "supportedGeneralFeatures": [
    "Entities and entity labels",
    "Properties and property labels",
    "Associations (1:1, 1:n)",
    "Entities with code lists from explicit values",
    "Value help using 1:1 associations and code lists",
    "Criticality highlighting for code list properties",
    "Single List Report application",
    "List Report + one or multiple Object Pages",
    "Form Entry Object Page"
  ],
  "listReportFeatures": [
    "Filter fields",
    "Basic table columns",
    "Multiple views for multiple-table mode",
    "Initial data load for preview"
  ],
  "objectPageFeatures": [
    "Section tabs",
    "Form sections with basic fields",
    "Table sections with basic columns",
    "Navigation from table section to a second object page"
  ],
  "behaviorNotes": {
    "testData": "Random values used for preview unless explicit values provided; stored in test folder",
    "codeLists": "Explicit values in input produce persisted code lists stored in data folder",
    "headerFeatures": "If only text input provided, object page header features are not generated from per-field instructions"
  }
}
```

STEP: 7 — Security & Data Handling Warning

DESCRIPTION: Do not include personal or sensitive data in prompts or images. SAP Fiori tools does not filter personal/sensitive data.

LANGUAGE: PlainText

CODE:
```text
# WARNING:
# Do NOT include personal or sensitive data in your business requirements.
# SAP Fiori tools AI does not filter such data.
```

STEP: 8 — Observe Generation Logs

DESCRIPTION: Check generation logs to understand how the app was produced and troubleshoot unexpected artifacts. Use the official documentation link to view detailed log locations and instructions.

LANGUAGE: PlainText

CODE:
```text
# View generation logs:
# See official docs: https://help.sap.com/docs/SAP_FIORI_tools/17d50220bcd848aa854c9c182d65b699/4ecc286176b1429b98f6f0a243e49ee2.html
# Tip: After generation, inspect the project root for any log files or a logs/ folder created by the tool.
```

STEP: 9 — Quick Prompt Template for UI Input (compact)

DESCRIPTION: Paste this concise template into the Project Accelerator or Joule prompt field when using the UI.

LANGUAGE: Text

CODE:
```text
Project: PurchaseOrdersApp
Summary: Manage purchase orders and items. List, filter, and edit orders.
Entities:
- PurchaseOrder: OrderID(UUID), OrderDate(Date), Supplier(String), Status(Enum: New, Approved, Rejected)
- PurchaseOrderItem: ItemID(UUID), Product(String), Quantity(Decimal), UnitPrice(Decimal)
UI:
- Floorplan: ListReport + ObjectPage
- ListReport: filters = Supplier, Status, OrderDate; columns = OrderID, OrderDate, Supplier, Status
- ObjectPage: Sections = Header(Overview, Status), Items(LineItemsTable)
Notes:
- Generate preview test data (store in test folder)
- Persist explicit enum values as code lists (store in data folder)
```

--------------------------------

**TITLE**: SAP Fiori Tools — Action Map for Code Generation Agents

**INTRODUCTION**: This document provides a compact, action-oriented map of the SAP Fiori Tools user guide, organized by common developer tasks (install, generate, preview, develop, deploy, extend). Each step points to the exact documentation file paths so AI agents and code-generation tooling can fetch detailed instructions, configuration examples, and reference pages programmatically.

**TAGS**: fiori-tools, sap, sapui5, cap, odata, generator, preview, deploy, annotations, vscode, bas

**STEP**: 1 — Install & Setup Tools

**DESCRIPTION**: Follow these guides to install SAP Fiori Tools and required environments (SAP Business Application Studio, Visual Studio Code), confirm system requirements, and install extensions and CLI prerequisites. Use these paths to fetch installation instructions and prerequisites programmatically.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "getting_started_index": "Getting-Started-with-SAP-Fiori-Tools/getting-started-with-sap-fiori-tools-2d8b1cb.md",
  "installation": "Getting-Started-with-SAP-Fiori-Tools/installation-e870fcf.md",
  "sap_business_application_studio": "Getting-Started-with-SAP-Fiori-Tools/sap-business-application-studio-b011040.md",
  "visual_studio_code": "Getting-Started-with-SAP-Fiori-Tools/visual-studio-code-17efa21.md#loio17efa217f7f34a9eba53d7b209ca4280",
  "vscode_system_requirements": "Getting-Started-with-SAP-Fiori-Tools/visual-studio-code-17efa21.md#loio002ae80eac034e6588af81827ab97332",
  "vscode_cloud_foundry_cli_tools": "Getting-Started-with-SAP-Fiori-Tools/visual-studio-code-17efa21.md#loiobdd272ac4d964fbfa59e956460e0e686",
  "vscode_prerequisites": "Getting-Started-with-SAP-Fiori-Tools/visual-studio-code-17efa21.md#loio5701672c35354d5b91759a911eaf1171",
  "vscode_set_up": "Getting-Started-with-SAP-Fiori-Tools/visual-studio-code-17efa21.md#loio4ce76a049bab42b0843111af4c7dcb4c",
  "vscode_install_extensions": "Getting-Started-with-SAP-Fiori-Tools/visual-studio-code-17efa21.md#loiof533419b114f476e98b55622eabaf0f7",
  "supported_authentication_types": "Getting-Started-with-SAP-Fiori-Tools/visual-studio-code-17efa21.md#loio7b329a74721047808368fca5c28702c3"
}
```

**STEP**: 2 — Generate an Application (Fiori Elements & Freestyle)

**DESCRIPTION**: Use these docs to generate SAP Fiori Elements or Freestyle SAPUI5 applications. They include supported floorplans, data source configuration, template properties, and additional configuration options (MTA, JavaScript code assist, security certs).

**LANGUAGE**: JSON

**CODE**:
```json
{
  "generating_app_index": "Generating-an-Application/generating-an-application-db44d45.md",
  "sap_fiori_elements": "Generating-an-Application/SAP-Fiori-Elements/sap-fiori-elements-1488469.md",
  "supported_floorplans": "Generating-an-Application/SAP-Fiori-Elements/supported-floorplans-2b2b12e.md",
  "data_source_fiori_elements": "Generating-an-Application/SAP-Fiori-Elements/data-source-9906181.md",
  "floorplan_properties": "Generating-an-Application/SAP-Fiori-Elements/floorplan-properties-745ae0c.md",
  "freestyle_sapui5": "Generating-an-Application/SAPUI5-Freestyle/freestyle-sapui5-616b1a4.md",
  "freestyle_templates": "Generating-an-Application/SAPUI5-Freestyle/supported-templates-20d1146.md",
  "freestyle_basic_template": "Generating-an-Application/SAPUI5-Freestyle/basic-template-14fdcc0.md",
  "freestyle_data_source": "Generating-an-Application/SAPUI5-Freestyle/data-source-37a0fcf.md",
  "template_properties": "Generating-an-Application/SAPUI5-Freestyle/template-properties-c2a3c82.md",
  "additional_configuration_index": "Generating-an-Application/Additional-Configuration/additional-configuration-9bea64e.md",
  "mta_deployment_file": "Generating-an-Application/Additional-Configuration/generating-an-mta-deployment-file-9c41152.md",
  "add_app_to_mta": "Generating-an-Application/Additional-Configuration/adding-an-sap-fiori-application-to-an-mta-deployment-file-with-5a17ba6.md"
}
```

**STEP**: 3 — Generate Using AI (Project Accelerator / Joule)

**DESCRIPTION**: For AI-assisted generation, reference examples and workflows for generating apps from text, images, or combined inputs and for viewing generation logs and advanced experimental features.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "ai_generation_index": "generating-an-application-with-the-project-accelerator-or-joule-using-sap-fiori-tools-ai-6845fed.md",
  "generate_using_text": "generating-an-application-using-text-e7f9f8c.md",
  "example_manage_contracts": "example-1-manage-contracts-and-customer-information-in-the-system-c1bccf2.md",
  "example_display_customers": "example-2-display-customers-with-related-contracts-a6c978f.md",
  "generate_using_image": "generating-an-application-using-an-image-39193df.md",
  "example_travel_list": "example-manage-travel-list-report-page-480d33c.md",
  "generate_text_and_images": "generating-an-application-using-text-and-images-5dd43dc.md",
  "example_travel_app_list_report": "example-manage-travel-app-list-report-object-page-d17b256.md",
  "viewing_generation_logs": "viewing-generation-logs-4ecc286.md",
  "experimental_advanced_features": "experimental-developing-an-application-using-advanced-features-418d583.md"
}
```

**STEP**: 4 — Preview the Application (Live, Mock, Local, Run Control)

**DESCRIPTION**: Use these resources to preview applications locally or on a Fiori launchpad, convert projects to virtual endpoints, use live/mock data (install MockServer, generate mock data with AI), run with custom middlewares, and create run configurations in VS Code or BAS.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "preview_index": "Previewing-an-Application/previewing-an-application-b962685.md",
  "virtual_endpoints": "Previewing-an-Application/convert-a-project-to-use-virtual-endpoints-630ddec.md",
  "preview_cap_project": "Previewing-an-Application/previewing-an-sap-fiori-elements-cap-project-1dc179a.md",
  "use_live_data": "Previewing-an-Application/use-live-data-497aee2.md",
  "use_mock_data": "Previewing-an-Application/use-mock-data-bda83a4.md",
  "install_mockserver": "Previewing-an-Application/installing-mockserver-2538055.md",
  "generate_mock_data_ai": "Previewing-an-Application/generating-mock-data-with-ai-815c310.md",
  "use_local_sources": "Previewing-an-Application/use-local-sources-6d3a210.md",
  "use_custom_middlewares": "Previewing-an-Application/use-custom-middlewares-dce5315.md",
  "run_control_index": "Previewing-an-Application/use-run-control-09171c8.md",
  "run_control_overview": "Previewing-an-Application/run-control-overview-d7f20f3.md",
  "create_run_config_vscode": "Previewing-an-Application/create-a-new-run-configuration-in-visual-studio-code-3b1f37e.md",
  "create_run_config_bas": "Previewing-an-Application/create-a-new-run-configuration-in-sap-business-application-studio-05f2a9e.md",
  "app_to_app_navigation_preview": "Previewing-an-Application/app-to-app-navigation-preview-543675f.md",
  "preview_on_external_launchpad": "Previewing-an-Application/preview-an-application-on-external-sap-fiori-launchpad-c789692.md",
  "developer_variant_creation": "Previewing-an-Application/developer-variant-creation-ceb845a.md",
  "horizon_theme_preview": "Previewing-an-Application/preview-an-application-with-the-sap-horizon-theme-2a42256.md"
}
```

**STEP**: 5 — Develop (Project Structure, Page Editor, Annotations, Language Server)

**DESCRIPTION**: Reference these docs for application structure, page element configuration (annotation-based and extension-based elements), supported UI elements (list report, object page, tables, sections, columns), annotation support, language-server features (code completion, diagnostics, micro-snippets), Service Modeler for visualization, and feature guides.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "develop_index": "Developing-an-Application/developing-an-application-a9c0043.md",
  "define_structure": "Developing-an-Application/define-application-structure-bae38e6.md",
  "configure_page_elements": "Developing-an-Application/configure-page-elements-047507c.md",
  "maintain_annotation_based": "Developing-an-Application/maintaining-annotation-based-elements-a524d8a.md",
  "annotation_overview": "Developing-an-Application/overview-66c5b6f.md",
  "annotation_support": "Developing-an-Application/annotation-support-796f6a4.md",
  "edit_in_source_code": "Developing-an-Application/edit-in-source-code-7d8e942.md",
  "internationalization": "Developing-an-Application/internationalization-i18n-eb427f2.md",
  "page_editor_supported_elements": "Developing-an-Application/supported-elements-in-page-editor-47f0424.md",
  "list_report_page": "Developing-an-Application/list-report-page-493f2aa.md",
  "filter_fields": "Developing-an-Application/filter-fields-0b84286.md",
  "table": "Developing-an-Application/table-aaff7b1.md",
  "table_actions": "Developing-an-Application/table-actions-da1931b.md",
  "table_columns": "Developing-an-Application/table-columns-a80d603.md",
  "form_and_object_page": "Developing-an-Application/form-and-object-page-1eb11a6.md",
  "header": "Developing-an-Application/header-a05d7fc.md",
  "sections": "Developing-an-Application/sections-a7b4e17.md",
  "maintain_extension_based": "Developing-an-Application/maintaining-extension-based-elements-02172d2.md",
  "maintaining_annotations_language_server": "Developing-an-Application/maintaining-annotations-with-language-server-6fc93f8.md",
  "language_server_code_completion": "Developing-an-Application/code-completion-dd4fc3b.md",
  "language_server_micro_snippets": "Developing-an-Application/micro-snippets-addf811.md",
  "language_server_diagnostics": "Developing-an-Application/diagnostics-1fd8f54.md",
  "visualizing_annotations_service_modeler": "Developing-an-Application/visualizing-annotations-with-service-modeler-58784b5.md"
}
```

**STEP**: 6 — Deploy Application (Cloud Foundry, ABAP, Launchpad)

**DESCRIPTION**: Use these docs for deployment configuration, generating deployment config for ABAP or Cloud Foundry, SAP Fiori Launchpad configuration, deployment/undeploy steps, exposing to central application router, and security best practices.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "deploy_index": "Deploying-an-Application/deploying-an-application-1b7a3be.md",
  "deployment_configuration": "Deploying-an-Application/deployment-configuration-1c85927.md",
  "generate_deploy_config_abap": "Deploying-an-Application/generate-deployment-configuration-abap-c06b9cb.md",
  "generate_deploy_config_cf": "Deploying-an-Application/generate-deployment-configuration-cloud-foundry-41e63bd.md",
  "fiori_launchpad_configuration": "Deploying-an-Application/sap-fiori-launchpad-configuration-bc3cb89.md",
  "deployment_of_application": "Deploying-an-Application/deployment-of-application-607014e.md",
  "undeploy": "Deploying-an-Application/undeploy-an-application-70872c4.md",
  "expose_to_central_router": "Deploying-an-Application/expose-application-to-central-application-router-85ad10d.md",
  "deploy_security": "Deploying-an-Application/security-8a147c6.md"
}
```

**STEP**: 7 — Extend an Existing Application (Adaptation Projects & Extensibility)

**DESCRIPTION**: Reference these docs to create and manage adaptation projects for on-premise, cloud, and ABAP environments, adapt UI (control variants, fragments, controller extensions), add app descriptor changes, preview and deploy adaptation projects, and check release compatibility.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "extending_index": "extending-an-existing-application-6e25aca.md",
  "extend_on_premise": "extending-an-sap-fiori-application-for-an-on-premise-system-802f01c.md",
  "creating_adaptation_project": "creating-an-adaptation-project-072f566.md",
  "working_with_adaptation_project": "working-with-an-adaptation-project-36e4b64.md",
  "making_adaptations_on_premise": "making-adaptations-2a076dd.md",
  "adapting_ui": "adapting-the-ui-9c1e7b4.md",
  "controller_extensions": "controller-extensions-ad7b4ae.md",
  "adding_app_descriptor_changes": "adding-app-descriptor-changes-02085cb.md",
  "replace_odata_service": "replacing-odata-service-6b51df2.md",
  "add_local_annotation_files": "adding-local-annotation-files-392a056.md",
  "extend_cloud_and_abap_environment": "extending-an-sap-fiori-application-for-sap-s-4hana-cloud-public-edition-and-sap-btp-abap-f4881a9.md",
  "create_adaptation_cloud": "create-the-adaptation-project-d6ab261.md",
  "deploy_or_update_adaptation": "deploying-or-updating-an-adaptation-project-to-the-abap-repository-32c901d.md",
  "check_adaptation_compatibility": "check-whether-your-adaptation-project-is-up-to-date-with-base-app-upgrades-c6ef105.md"
}
```

**STEP**: 8 — Reference Index (Project Functions, Validation, Project Utilities)

**DESCRIPTION**: Use this as a quick index to project utilities (project functions, data editor, environment check, service/annotation management, UI service generation, project validation and reuse library support).

**LANGUAGE**: JSON

**CODE**:
```json
{
  "project_functions_index": "Project-Functions/project-functions-0d8fa32.md",
  "application_information": "Project-Functions/application-information-c3e0989.md",
  "application_sapui5_version": "Project-Functions/application-sapui5-version-009f43e.md",
  "data_editor": "Project-Functions/data-editor-18e43b5.md",
  "delete_app_in_cap_project": "Project-Functions/deleting-an-application-in-cap-project-709f838.md",
  "environment_check": "Project-Functions/environment-check-75390cf.md",
  "information_panel": "Project-Functions/information-panel-a9a6c4b.md",
  "managing_sap_system_connections": "Project-Functions/managing-sap-system-connections-78a82b6.md",
  "managing_service_and_annotation_files": "Project-Functions/managing-service-and-annotation-files-8182ff3.md",
  "project_validation": "Project-Functions/project-validation-6f3c737.md",
  "reuse_library_support": "Project-Functions/reuse-library-support-6e99fbb.md",
  "viewing_service_metadata": "Project-Functions/viewing-service-metadata-e369c2c.md",
  "ui_service_generation": "Project-Functions/ui-service-generation-1a7aad3.md"
}
```
--------------------------------

**TITLE**: Internationalization (i18n) for Adaptation Projects

**INTRODUCTION**: This document explains how to provide and override i18n key-value pairs in SAP Fiori adaptation projects. It shows the required folder layout, how to define i18n properties, how to reference those keys from UI controls (XML/JS), how to override keys from the source application in the adaptation project, and how to verify the text at runtime.

**TAGS**: fiori-tools, i18n, localization, adaptation, sapui5, resource-model

**STEP**: 1 — Workspace / Folder structure

**DESCRIPTION**: Confirm where to place i18n files inside the adaptation project. Each application page has its own i18n.properties file under webapp/i18n/<page>/<collection>/i18n.properties.

**LANGUAGE**: text

**CODE**:
```text
<adaptation-project-root>/
└─ webapp/
   └─ i18n/
      ├─ page1/
      │  └─ collection/
      │     └─ i18n.properties
      └─ page2/
         └─ collection/
            └─ i18n.properties
```

**STEP**: 2 — Create/define key-value pairs

**DESCRIPTION**: Add key=value pairs to the page-level i18n.properties file. Use simple keys (no spaces). These keys will be referenced in the UI controls via the i18n resource model.

**LANGUAGE**: properties

**CODE**:
```properties
# webapp/i18n/page1/collection/i18n.properties
welcomeMessage=Welcome to Orders
saveLabel=Save Order
cancelLabel=Cancel
orderCount={0} orders found
```

**STEP**: 3 — Register the resource model (manifest example)

**DESCRIPTION**: Ensure the i18n resource model is registered in your manifest so UI5 controls can resolve the i18n keys. The bundleName points to the resource bundle; adapt the path to match the i18n file location (dot-separated). If the project already registers the model, skip this step.

**LANGUAGE**: JSON

**CODE**:
```json
// webapp/manifest.json (snippet)
{
  "sap.ui5": {
    "models": {
      "i18n": {
        "type": "sap.ui.model.resource.ResourceModel",
        "settings": {
          "bundleName": "webapp.i18n.page1.collection.i18n"
        }
      }
    }
  }
}
```

**STEP**: 4 — Reference i18n keys in XML views

**DESCRIPTION**: Bind the i18n keys to control properties in XML views using the i18n model (syntax: {i18n>key}). This keeps UI text translatable and centralized in properties files.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- webapp/view/Order.view.xml (snippet) -->
<mvc:View xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m">
  <VBox>
    <Text text="{i18n>welcomeMessage}" />
    <Button text="{i18n>saveLabel}" press="onSave" />
    <Button text="{i18n>cancelLabel}" press="onCancel" />
  </VBox>
</mvc:View>
```

**STEP**: 5 — Get i18n text in JavaScript (controller)

**DESCRIPTION**: In controllers, retrieve i18n text programmatically via the i18n model and ResourceBundle.getText(). Use placeholders (e.g., {0}) and pass arguments for formatted messages.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// webapp/controller/Order.controller.js (snippet)
onInit: function () {
  var oBundle = this.getView().getModel("i18n").getResourceBundle();
  var sWelcome = oBundle.getText("welcomeMessage");
  // formatted text example:
  var sCount = oBundle.getText("orderCount", [5]); // -> "5 orders found"
  console.log(sWelcome, sCount);
}
```

**STEP**: 6 — Override existing keys from the source application

**DESCRIPTION**: To change text defined in the source application's i18n, add the same key(s) in the adaptation project's page-level i18n.properties. The adaptation layer will use the local key value for that page instead of the source application value.

**LANGUAGE**: properties

**CODE**:
```properties
# Source app: webapp/i18n/i18n.properties
saveLabel=Save

# Adaptation project: webapp/i18n/page1/collection/i18n.properties
# This overrides the source key for the adapted page
saveLabel=Save Order
```

**STEP**: 7 — Use Adaptation Editor / Properties pane

**DESCRIPTION**: In the Adaptation Editor, when editing a control's text property use the i18n key reference (not literal text). In the Properties pane, set the property to the i18n key (example: i18n>saveLabel) so the control resolves the text from the page-level resource bundle at runtime.

**LANGUAGE**: text

**CODE**:
```text
Example: In Properties pane, set Button.text to:
i18n>saveLabel
```

**STEP**: 8 — Run and verify

**DESCRIPTION**: Run the adaptation project as a web application. Navigate to the adapted page and verify that UI text matches the values in webapp/i18n/<page>/<collection>/i18n.properties. If an i18n key is missing in the page-level file, the control falls back to the source application's resource bundle (if available).

**LANGUAGE**: text

**CODE**:
```text
- Start the app (e.g., Fiori tools preview/run or local server).
- Open the adapted page in the browser.
- Confirm texts for controls reflect values from the adaptation project's i18n.properties.
```
--------------------------------

**TITLE**: Internationalization (i18n) for Fiori Tools Adaptation Projects

**INTRODUCTION**: This document explains where to place i18n files in an adaptation project, how to define key-value pairs, how to reference those keys from UI controls, and how to override text from the source application. Use the examples to add or change translatable text for each page/collection in your adaptation project.

**TAGS**: i18n, internationalization, fiori-tools, SAPUI5, adaptation-project, i18n.properties, resource-model

**STEP**: 1 — Folder layout and file location

**DESCRIPTION**: Confirm the location of i18n files inside the adaptation project. Each page/collection has its own i18n.properties file under webapp/i18n. Use this path when creating or editing translation keys.

**LANGUAGE**: text

**CODE**:
```text
ProjectName/
└─ webapp/
   └─ i18n/
      ├─ page1/
      │  └─ collection/
      │     └─ i18n.properties   <-- page1/collection translations
      └─ page2/
         └─ collection/
            └─ i18n.properties   <-- page2/collection translations
```

**STEP**: 2 — Define key-value pairs in i18n.properties

**DESCRIPTION**: Add or change key-value pairs in the i18n.properties file for the target page/collection. Use simple, unique keys and plain values. These keys will be referenced from UI controls or override existing keys from the source application.

**LANGUAGE**: properties

**CODE**:
```properties
# webapp/i18n/page1/collection/i18n.properties
title.app=Adapted Application Title
button.save=Save
button.cancel=Cancel
label.username=User Name
message.welcome=Welcome, {0}!
```

**STEP**: 3 — Register the resource model (manifest.json) for that page/collection

**DESCRIPTION**: Ensure the resource model points to the correct i18n.properties file for the page/collection. Set this in manifest.json (or in Component initialization). Use bundleUrl for per-page resource files.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui5": {
    "models": {
      "i18n": {
        "type": "sap.ui.model.resource.ResourceModel",
        "settings": {
          "bundleUrl": "i18n/page1/collection/i18n.properties"
        }
      }
    }
  }
}
```

**STEP**: 4 — Reference i18n keys in XML views

**DESCRIPTION**: Bind control text (or other properties) to i18n keys using the i18n model name. Use {i18n>keyName} shorthand or an explicit binding object.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Example XML view -->
<mvc:View xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m" controllerName="...">
  <Page title="{i18n>title.app}">
    <content>
      <Input placeholder="{i18n>label.username}" />
      <Button text="{i18n>button.save}" press="onSave" />
      <Button text="{i18n>button.cancel}" press="onCancel" />
    </content>
  </Page>
</mvc:View>
```

**STEP**: 5 — Reference i18n keys in JavaScript (controller)

**DESCRIPTION**: Read localized text from the resource bundle in controllers for dynamic labels, messages, or formatted strings.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// In a controller method
const oBundle = this.getView().getModel("i18n").getResourceBundle();
const sSaveText = oBundle.getText("button.save");
const sWelcome = oBundle.getText("message.welcome", ["Alice"]); // uses {0}
sap.m.MessageToast.show(sWelcome);
```

**STEP**: 6 — Override keys from the source application

**DESCRIPTION**: To change text coming from the source application, add the same key(s) to the adaptation project's i18n.properties. The adaptation resource model will supply your value instead of the source value.

**LANGUAGE**: properties

**CODE**:
```properties
# To override a source key defined in the original app (same key)
title.app=My Adapted Title  # overrides source application's title.app
```

**STEP**: 7 — Verify in runtime

**DESCRIPTION**: Run the adaptation project as a web application and verify that UI controls display the values from your adaptation i18n.properties file. If a key is missing, SAPUI5 falls back to the resource model resolution (or displays a key placeholder).

**LANGUAGE**: text

**CODE**:
```text
Verification checklist:
- Start the app (Fiori preview / local web server).
- Navigate to the page/collection that uses webapp/i18n/page1/collection/i18n.properties.
- Confirm UI text values match the i18n.properties entries.
- If a value is not updated, check manifest bundleUrl and key names for typos.
```
--------------------------------

**TITLE**: Making Adaptations (Fiori Tools — Adaptation Project & UI5 Flexibility)

**INTRODUCTION**: This document shows practical, code-focused steps to create a non-invasive adaptation for a SAP Fiori app using Fiori Tools and UI5 flexibility (sap.ui.fl). Use this to create an adaptation project, add UI changes (fragments, controller extensions, descriptor patches), register flexibility changes, and build/deploy the adapted app without modifying the original application source.

**TAGS**: fiori-tools, sapui5, fiori-elements, adaptation, ui5-fl, manifest, fragment, controller-extension

STEP: 1 — Create an Adaptation Project in VS Code

DESCRIPTION: Use the Fiori Tools extension to scaffold an Adaptation Project that references the original app. The Adaptation Project contains only patches/changes; the original app remains untouched.

LANGUAGE: Shell / Instructions

CODE:
```bash
# In VS Code: open Command Palette (F1) and run:
# "Fiori Tools: Create Adaptation Project"
# Follow prompts:
# - Enter the original app ID (matches sap.app/id in its manifest.json)
# - Choose target folder (e.g., adaptations/<appId>)
# The generator creates a folder structure like:
# adaptations/<appId>/
#   ├─ webapp/manifest.json           # adaptation manifest (patches)
#   ├─ webapp/changes/                # UI5 flexibility change JSONs
#   ├─ webapp/ext/                    # controller extensions & fragments
#   └─ package.json                   # build / serve scripts
```

STEP: 2 — Configure adaptation manifest (descriptor patches)

DESCRIPTION: Add manifest descriptor patches to extend the app descriptor (e.g., add controller extensions, new routes, or new fragments). Use the adaptation project's webapp/manifest.json to supply only the modifications required.

LANGUAGE: JSON

CODE:
```json
// adaptations/<appId>/webapp/manifest.json
{
  "sap.app": {
    "id": "com.example.app.adaptation",
    "title": "Adaptation for com.example.app"
  },
  "sap.ui5": {
    "extends": {
      "extensions": {
        // For controller extension registration
        "sap.ui.controllerExtensions": {
          "com.example.original.ControllerName": {
            "controllerName": "com.example.adaptation.ControllerExtension"
          }
        }
      }
    }
  }
}
```

STEP: 3 — Add a controller extension

DESCRIPTION: Implement a controller extension to add behavior (e.g., event handlers). Place JS file under the adaptation project and reference it from the manifest controllerExtensions entry.

LANGUAGE: JavaScript

CODE:
```javascript
// adaptations/<appId>/webapp/ext/ControllerExtension.controller.js
sap.ui.define(["sap/ui/core/mvc/Controller"], function (Controller) {
  "use strict";
  return Controller.extend("com.example.adaptation.ControllerExtension", {
    onInit: function () {
      // initialization logic for adaptation
      // can access original controller via this.getOwnerComponent().getController?
      // Use standard UI5 APIs to find controls and add behavior
      var oView = this.getView();
      // Example: attach a handler to a button in the original view
      var oBtn = oView.byId("originalButtonId");
      if (oBtn) {
        oBtn.attachPress(this._onAdaptedPress.bind(this));
      }
    },

    _onAdaptedPress: function (oEvent) {
      // Adaptation behavior
      sap.m.MessageToast.show("Adaptation button pressed");
    }
  });
});
```

STEP: 4 — Add a UI fragment and register an XML add change (UI5 flexibility)

DESCRIPTION: Add an XML fragment and a corresponding change JSON that instructs UI5 to insert the fragment into a specific aggregation of the original view. Place the fragment under ext/fragment and the change definition under webapp/changes/.

LANGUAGE: XML

CODE:
```xml
<!-- adaptations/<appId>/webapp/ext/fragment/NewButton.fragment.xml -->
<core:FragmentDefinition
  xmlns="sap.m"
  xmlns:core="sap.ui.core">
  <Button id="adaptationNewButton" text="Adaptation Action" press=".onAdaptationAction"/>
</core:FragmentDefinition>
```

LANGUAGE: JSON

CODE:
```json
// adaptations/<appId>/webapp/changes/00_add_new_button.json
{
  "fileName": "00_add_new_button.json",
  "changeType": "addXML",
  "selector": {
    "id": "OriginalViewId",
    "type": "sap.ui.core.mvc.View"
  },
  "content": {
    "fragmentPath": "com.example.adaptation.ext.fragment.NewButton"
  },
  "index": 0,
  "layer": "CUSTOMER"
}
```

STEP: 5 — Add a change to reveal/hide or move an existing control (example: reveal column)

DESCRIPTION: Use a change JSON to reveal a hidden control (supported for Fiori Elements and UI5 controls with change handlers). This is a typical non-invasive adaptation.

LANGUAGE: JSON

CODE:
```json
// adaptations/<appId>/webapp/changes/01_reveal_column.json
{
  "fileName": "01_reveal_column.json",
  "changeType": "reveal",
  "selector": {
    "id": "myTable",
    "type": "sap.ui.table.Table"
  },
  "content": {
    "revealId": "hiddenColumnId"
  },
  "layer": "CUSTOMER"
}
```

STEP: 6 — Wire controller extension handler for fragment button

DESCRIPTION: Implement the event handler referenced by the fragment (onAdaptationAction) inside the controller extension so the new fragment's button has working logic.

LANGUAGE: JavaScript

CODE:
```javascript
// Append to adaptations/<appId>/webapp/ext/ControllerExtension.controller.js
_onAdaptationPress: function (oEvent) {
  // existing example
},

onAdaptationAction: function (oEvent) {
  // Handler for the dynamically added fragment button
  sap.m.MessageToast.show("Adaptation fragment button clicked");
}
```

STEP: 7 — Build, test and deploy the adaptation project

DESCRIPTION: Build the adaptation project (it produces a deployable artifact containing descriptor patches and change files). Deploy the adaptation alongside the original app or to your SAP Cloud Platform as required.

LANGUAGE: Shell

CODE:
```bash
# From adaptations/<appId> folder
npm install

# Typical build script (created by generator)
npm run build

# Serve locally for testing (if generator provides a local server)
npm start

# Deploy: depending on your environment, you may:
# - Deploy to SAP BTP: use Cloud Foundry or MTA approach
# - Register the changes in the Backend (Lrep) via transport mechanisms
# Use your existing CI/CD or transport pipeline to move built artifacts to the target system
```

STEP: 8 — Verify changes at runtime

DESCRIPTION: When the adaptation is deployed and the app is launched:
- UI5 flexibility applies change files (from LREP or adaptation project) to the original app at runtime.
- Controller extensions are loaded via manifest extensions.
- Fragments added by addXML changes appear in the specified aggregation.

LANGUAGE: Checklist

CODE:
```text
- Open the adapted application in a browser.
- Verify:
  - The new "Adaptation Action" button is visible where expected.
  - Pressing the button triggers your MessageToast.
  - Any reveal/move/hide changes are applied as designed.
- If changes do not appear:
  - Confirm adaptation project manifest references the original app id.
  - Confirm change file selectors (IDs) match the runtime control IDs.
  - Check browser console for UI5 flexibility or module load errors.
```

STEP: 9 — Common file paths summary

DESCRIPTION: Quick reference of files and where to place them inside the adaptation project.

LANGUAGE: Text

CODE:
```text
adaptations/<appId>/
  webapp/manifest.json                       # adaptation descriptor patches (JSON)
  webapp/changes/                            # UI5 flexibility change JSON files
    00_add_new_button.json
    01_reveal_column.json
  webapp/ext/
    ControllerExtension.controller.js        # controller extension(s)
    fragment/
      NewButton.fragment.xml                 # XML fragments for addXML changes
  package.json                               # build / serve scripts
```

Use these steps as a template: replace IDs, fragment paths, and control types with the exact values from the original application’s manifest and views. Ensure selector IDs match runtime control IDs (view-local IDs often include view prefixes).
--------------------------------

**TITLE**: Making Adaptations for SAPUI5 Adaptation Projects (Fiori Tools)

**INTRODUCTION**: This document collects concise, actionable code patterns and file locations to implement UI and app-descriptor adaptations in an SAPUI5 / Fiori Elements adaptation project. Use these snippets when generating code, modifying manifest.json, adding fragments, extending controllers, adding i18n, registering OData services and annotation files, and adding component usages or inbound navigation.

**TAGS**: fiori-tools, sapui5, fiori-elements, manifest.json, app-descriptor, fragments, controller-extensions, i18n, annotations, odata, component-usages, inbounds

STEP: Create Control Variants (Views)

DESCRIPTION: Add Variant Management to an XML view and define variants. Use sap.ui.comp.variants.VariantManagement in the view. Store variant-specific UI or property changes in separate variant definitions or in your adaptation tool output.

LANGUAGE: XML

CODE:
```xml
<!-- File: webapp/view/MyView.view.xml -->
<mvc:View
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  xmlns:comp="sap.ui.comp"
  controllerName="my.app.controller.MyView">
  <Page id="page">
    <content>
      <comp:VariantManagement id="vmMyView" />
      <!-- Rest of view -->
    </content>
  </Page>
</mvc:View>

<!-- Example of a variant fragment (optional) -->
<!-- File: webapp/fragment/VariantSample.fragment.xml -->
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m">
  <Button text="Variant button" />
</core:FragmentDefinition>
```

STEP: Add Fragments to an Aggregation or Extension Point

DESCRIPTION: Add reusable UI fragments into view aggregations or extension points. Use core:Fragment or ExtensionPoint in XML view; declare fragment files under webapp/fragment.

LANGUAGE: XML

CODE:
```xml
<!-- File: webapp/view/MyView.view.xml -->
<mvc:View xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m" xmlns:core="sap.ui.core" controllerName="my.app.controller.MyView">
  <Page id="page">
    <content>
      <!-- Insert fragment directly into an aggregation -->
      <VBox>
        <core:Fragment fragmentName="my.app.fragment.MyFragment" type="XML" />
      </VBox>

      <!-- Define an extension point (for apps that support runtime extension injection) -->
      <core:ExtensionPoint name="myExtensionPoint" />
    </content>
  </Page>
</mvc:View>

<!-- File: webapp/fragment/MyFragment.fragment.xml -->
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m">
  <Button text="Fragment button" press="onFragmentPress" />
</core:FragmentDefinition>
```

STEP: Controller Extensions

DESCRIPTION: Implement controller extension files and register them in the manifest so the framework uses your extension controller instead of or in addition to the original controller.

LANGUAGE: JSON, JavaScript

CODE:
```json
// File: webapp/manifest.json (snippet)
{
  "sap.ui5": {
    "extends": {
      "extensions": {
        "sap.ui.controllerExtensions": {
          "my.app.controller.List": {
            "controllerName": "my.app.ext.controller.List"
          }
        }
      }
    }
  }
}
```

```javascript
// File: webapp/ext/controller/List.controller.js
sap.ui.define(["sap/ui/core/mvc/Controller"],
  function (Controller) {
    "use strict";
    return Controller.extend("my.app.ext.controller.List", {
      onInit: function () {
        // extension initialization code
      },
      // override or add event handlers
      onBeforeRendering: function () {
        // custom logic
      }
    });
  }
);
```

STEP: Upgrade-Safe Compatibility Rules (Guidance + Example Change Format)

DESCRIPTION: Store adaptation changes using the flexibility change format so they are upgrade-safe. Changes are JSON objects (flex changes) applied to controls and stored in /changes or managed by the flexibility service. Example shows a generic change structure.

LANGUAGE: JSON

CODE:
```json
// File: webapp/changes/changes.json (example single change)
[
  {
    "fileType": "change",
    "changeType": "addXML",
    "selector": {
      "id": "myButton",
      "type": "sap.m.Button"
    },
    "content": {
      "xml": "<Button id='myAddedButton' text='Added by Adaptation'/>"
    },
    "layer": "VENDOR",
    "text": {
      "en": "Add a button as adaptation"
    }
  }
]
```

STEP: Internationalization (i18n)

DESCRIPTION: Add resource bundle and register it in manifest.json. Use it in XML views and JS controllers via the i18n model.

LANGUAGE: JSON, properties, XML

CODE:
```json
// File: webapp/manifest.json (snippet)
{
  "sap.ui5": {
    "models": {
      "i18n": {
        "type": "sap.ui.model.resource.ResourceModel",
        "settings": {
          "bundleName": "my.app.i18n.i18n"
        }
      }
    }
  }
}
```

```properties
# File: webapp/i18n/i18n.properties
helloMsg=Hello from i18n
buttonLabel=Click me
```

```xml
<!-- File: webapp/view/MyView.view.xml -->
<mvc:View xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m" controllerName="my.app.controller.MyView">
  <Page>
    <content>
      <Text text="{i18n>helloMsg}" />
      <Button text="{i18n>buttonLabel}" press="onPress" />
    </content>
  </Page>
</mvc:View>
```

STEP: Replacing OData Service

DESCRIPTION: Replace or add a dataSource entry in manifest.json and bind the default model to it. Update URIs and settings for OData version.

LANGUAGE: JSON

CODE:
```json
// File: webapp/manifest.json (snippet)
{
  "sap.app": {
    "dataSources": {
      "mainService": {
        "uri": "/sap/opu/odata/sap/MY_SERVICE_SRV/",
        "type": "OData",
        "settings": {
          "odataVersion": "2.0"
        }
      }
    }
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "mainService",
        "settings": {
          "defaultBindingMode": "TwoWay"
        }
      }
    }
  }
}
```

STEP: Adding Local Annotation Files

DESCRIPTION: Add local annotation XML files to the project and register them in manifest.json under dataSources. Reference them from the OData model settings or the annotation model.

LANGUAGE: JSON, XML

CODE:
```json
// File: webapp/manifest.json (snippet)
{
  "sap.app": {
    "dataSources": {
      "mainService": {
        "uri": "/sap/opu/odata/sap/MY_SERVICE_SRV/",
        "type": "OData",
        "settings": {
          "odataVersion": "2.0"
        }
      },
      "localAnnotations": {
        "uri": "localService/annotations.xml",
        "type": "OData",
        "settings": {
          "localUri": "annotations/annotations.xml"
        }
      }
    }
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "mainService"
      },
      "annotations": {
        "type": "sap.ui.model.odata.v2.ODataModel",
        "dataSource": "localAnnotations"
      }
    }
  }
}
```

```xml
<!-- File: webapp/annotations/annotations.xml (snippet) -->
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
  <!-- Annotation content here -->
</edmx:Edmx>
```

STEP: Adding OData Service and New SAPUI5 Model

DESCRIPTION: Register a new OData dataSource and bind it to a named model in manifest.json. Use the model name in views/controllers for binding.

LANGUAGE: JSON

CODE:
```json
// File: webapp/manifest.json (snippet)
{
  "sap.app": {
    "dataSources": {
      "MySecondService": {
        "uri": "/sap/opu/odata/sap/MY_OTHER_SERVICE_SRV/",
        "type": "OData",
        "settings": {
          "odataVersion": "2.0"
        }
      }
    }
  },
  "sap.ui5": {
    "models": {
      "mySecondModel": {
        "dataSource": "MySecondService",
        "settings": {
          "defaultBindingMode": "TwoWay"
        }
      }
    }
  }
}
```

STEP: Adding SAPUI5 Component Usages

DESCRIPTION: Register external SAPUI5 components that your application uses via componentUsages in manifest.json. Component usages let you embed and configure other components.

LANGUAGE: JSON

CODE:
```json
// File: webapp/manifest.json (snippet)
{
  "sap.ui5": {
    "componentUsages": {
      "MySharedComponent": {
        "name": "my.shared.Component",
        "manifest": true,
        "settings": {
          "someSetting": "value"
        }
      }
    }
  }
}
```

STEP: Change Inbound (FLP / Cross-Application Navigation)

DESCRIPTION: Add or change inbound navigation entries for Fiori Launchpad integration using the crossNavigation.inbounds section in manifest.json. Define semanticObject, action, signature, and additional parameters.

LANGUAGE: JSON

CODE:
```json
// File: webapp/manifest.json (snippet)
{
  "sap.app": {
    "crossNavigation": {
      "inbounds": {
        "displayMyApp": {
          "semanticObject": "MyObject",
          "action": "display",
          "resolutionResult": {
            "applicationType": "SAPUI5",
            "additionalInformation": "SAPUI5.Component=my.app",
            "url": "/resources/my/app"
          },
          "signature": {
            "parameters": {
              "Id": {
                "required": true
              }
            },
            "additionalParameters": "allowed"
          }
        }
      }
    }
  }
}
```

STEP: Reference — Extending Delivered Apps Using Adaptation Extensions

DESCRIPTION: For Fiori Elements specific adaptation extensions, consult the official UI5 topic. Use adaptation extensions when you need to extend delivered apps beyond basic manifest and fragment changes.

LANGUAGE: URL

CODE:
```text
https://ui5.sap.com/#/topic/52fc48b479314d0688be24f699778c47
```

Note: Keep adaptation changes organized under webapp/, e.g. webapp/manifest.json, webapp/view/, webapp/fragment/, webapp/ext/controller/, webapp/i18n/, webapp/annotations/, webapp/changes/. Use the manifest.json snippets above as authoritative insertion points for app-descriptor changes.
--------------------------------

**TITLE**: Previewing an Adaptation Project (Fiori Tools)

**INTRODUCTION**: Short, actionable instructions to open and test the Fiori Tools adaptation project preview from your workspace. This covers locating the manifest variant file, opening the preview in a new browser tab, handling the popup permission, optional authentication, and basic validation steps to confirm the preview works.

**TAGS**: fiori-tools, preview, manifest.appdescr_variant, adaptation, sap, UI5, workspace

**STEP**: 1 — Locate the manifest variant file

**DESCRIPTION**: In your project workspace, locate the adaptation project's manifest variant file at the exact path shown below. This file is the entry point used by the Fiori Tools preview action.

**LANGUAGE**: Text

**CODE**:
```text
Workspace root
└─ webapp/
   └─ manifest.appdescr_variant
```

**STEP**: 2 — Open the preview from the editor / explorer

**DESCRIPTION**: Use the editor file explorer to open a live preview. Right-click the file at webapp/manifest.appdescr_variant and select the "Open Preview" action exposed by Fiori Tools. This launches the preview in a new browser tab.

If you prefer keyboard/command-palette:
- Open the file webapp/manifest.appdescr_variant in the editor.
- Activate command palette (e.g., Ctrl+Shift+P / Cmd+Shift+P) and run the extension-provided "Open Preview" command (menu label: "Open Preview").

**LANGUAGE**: Text

**CODE**:
```text
Context menu action:
Right-click -> Open Preview
(or)
Command Palette -> Open Preview
Target file: webapp/manifest.appdescr_variant
```

**STEP**: 3 — Allow browser popups

**DESCRIPTION**: The preview opens in a separate browser tab and will trigger a popup permission prompt. Allow popups for the hosting IDE or local preview URL so the preview tab can open. Typical steps in Chrome/Edge:
- Click the popup blocked icon in the address bar.
- Choose "Always allow pop-ups and redirects" for the site.
- Retry the "Open Preview" action if needed.

**LANGUAGE**: Text

**CODE**:
```text
Browser popup steps (example - Chrome):
1. Click the popup blocked icon in the address bar.
2. Select: "Always allow pop-ups and redirects" for this site.
3. Re-run: Open Preview (if preview did not open automatically).
```

**STEP**: 4 — Optional: authenticate to the target system

**DESCRIPTION**: Depending on your project’s authentication model and the system the preview connects to (OData/backend), the preview may prompt for credentials. Provide the required username/password or single sign-on credentials as prompted. If using a proxy or local mock service, ensure those endpoints are reachable from your browser.

**LANGUAGE**: Text

**CODE**:
```text
Authentication checklist:
- If prompted, enter credentials for the backend/system you are connecting to.
- Ensure CORS/Proxy settings allow requests from the preview tab.
- If using mock services, verify mock server is running and reachable.
```

**STEP**: 5 — Validate the preview behavior

**DESCRIPTION**: With the preview open in a new tab and authentication completed (if required), exercise the UI to validate navigation, data loading, and behavior of adaptation changes. Use these quick checks to confirm correct previewing:

**LANGUAGE**: Text

**CODE**:
```text
Basic validation checklist:
- Navigate between app views and check routing works.
- Trigger data requests and verify OData or mock data loads.
- Interact with adapted UI controls to confirm changes are applied.
- Monitor browser console and network tab for errors or blocked requests.
- Re-open webapp/manifest.appdescr_variant and apply edits, then re-run Open Preview to refresh.
```
--------------------------------

**TITLE**: Preview an Adaptation Project (SAP Fiori Tools)

**INTRODUCTION**: Quick, actionable steps to preview an adaptation project using Fiori Tools. Use this to run the project in a browser tab and validate UI adaptations, navigation, and data behavior before deployment.

**TAGS**: fiori-tools, preview, adaptation, manifest, webapp, ui5, testing

**STEP**: 1 — Open preview context

**DESCRIPTION**: In your IDE file explorer (project tree), locate one of these targets and open the context menu to start a preview:
- Project main folder (root of your workspace project)
- webapp folder inside the project
- manifest.appdescr_variant file (inside webapp)

Select the context menu item named "Preview Application".

**LANGUAGE**: text

**CODE**:
```text
Example file paths:
- <project-root>/
- <project-root>/webapp/
- <project-root>/webapp/manifest.appdescr_variant

Context menu action:
- Right-click target → "Preview Application"
```

**STEP**: 2 — Start the preview and test

**DESCRIPTION**: In the Preview Application dialog that appears, click the "Start" button. The adaptation project will load in a new browser tab. Use the opened tab to navigate the app, load data, and verify any UI or behavior changes you applied in the adaptation project.

**LANGUAGE**: text

**CODE**:
```text
Preview dialog actions:
- Click "Start"

Result:
- A new browser tab opens with the running adaptation project
- Use the app to navigate, exercise flows, and validate changes
```
--------------------------------

**TITLE**: Quick Actions Availability Matrix — Machine-readable & Code Examples

**INTRODUCTION**: This document converts the Quick Actions availability matrix into a machine-friendly representation and provides code to:
- Detect a project's SAPUI5 version, OData version, and page types from manifest.json
- Filter which quick actions are available for that project
- Explain the manifest-change caveat for OData V2 projects with old array page structure

Use this to drive automation (e.g., in RAG pipelines, CLIs, VS Code extensions) that decide whether to offer quick actions in adaptation projects.

**TAGS**: fiori-tools, sapui5, quick-actions, adaptation, manifest.json, odata, fiori-elements

STEP: 1 — Machine-friendly availability matrix

DESCRIPTION: JSON representation of every quick action row in the original table. Each entry includes: action name, OData version ("V2" or "V4"), applicable page types, minimum SAPUI5 version where the action is supported, and whether the action modifies the manifest (manifestChange). Use this object as the canonical source for programmatic checks.

LANGUAGE: JSON

CODE:
```json
[
  {"action":"Add Controller to Page","odata":"V2","pageTypes":["List Report","Analytical List Page","Object Page"],"minUi5":"1.71","manifestChange":false},
  {"action":"Add Controller to Page","odata":"V4","pageTypes":["List Report","Analytical List Page","Object Page"],"minUi5":"1.71","manifestChange":false},
  {"action":"Add Header Field","odata":"V2","pageTypes":["Object Page"],"minUi5":"1.71","manifestChange":false},
  {"action":"Add Header Field","odata":"V4","pageTypes":["Object Page"],"minUi5":"1.71","manifestChange":false},
  {"action":"Add Custom Section","odata":"V2","pageTypes":["Object Page"],"minUi5":"1.71","manifestChange":false},
  {"action":"Add Custom Section","odata":"V4","pageTypes":["Object Page"],"minUi5":"1.71","manifestChange":false},
  {"action":"Add Custom Page Action","odata":"V2","pageTypes":["List Report","Analytical List Page","Object Page"],"minUi5":"1.130","manifestChange":false},
  {"action":"Add Custom Page Action","odata":"V4","pageTypes":["List Report","Analytical List Page","Object Page"],"minUi5":"1.130","manifestChange":false},
  {"action":"Add Custom Table Action","odata":"V2","pageTypes":["List Report","Analytical List Page","Object Page"],"minUi5":"1.96","manifestChange":false},
  {"action":"Add Custom Table Action","odata":"V4","pageTypes":["List Report","Analytical List Page","Object Page"],"minUi5":"1.96","manifestChange":false},
  {"action":"Add Custom Table Column","odata":"V2","pageTypes":["List Report","Analytical List Page","Object Page"],"minUi5":"1.96","manifestChange":false},
  {"action":"Add Custom Table Column","odata":"V4","pageTypes":["List Report","Analytical List Page","Object Page"],"minUi5":"1.96","manifestChange":false},
  {"action":"Add Local Annotation File","odata":"V2","pageTypes":["List Report","Analytical List Page","Object Page"],"minUi5":"1.133","manifestChange":true},
  {"action":"Add Local Annotation File","odata":"V4","pageTypes":["List Report","Analytical List Page","Object Page"],"minUi5":"1.133","manifestChange":true},
  {"action":"Add Subpage","odata":"V2","pageTypes":["List Report","Analytical List Page","Object Page"],"minUi5":"1.96","manifestChange":true},
  {"action":"Add Subpage","odata":"V4","pageTypes":["List Report","Analytical List Page","Object Page"],"minUi5":"1.135","manifestChange":true},
  {"action":"Change Table Actions","odata":"V2","pageTypes":["List Report","Analytical List Page","Object Page"],"minUi5":"1.108","manifestChange":false},
  {"action":"Change Table Actions","odata":"V4","pageTypes":["List Report","Analytical List Page","Object Page"],"minUi5":"1.130","manifestChange":false},
  {"action":"Change Table Columns","odata":"V2","pageTypes":["List Report","Analytical List Page","Object Page"],"minUi5":"1.96","manifestChange":false},
  {"action":"Change Table Columns","odata":"V4","pageTypes":["List Report","Analytical List Page","Object Page"],"minUi5":"1.96","manifestChange":false},
  {"action":"Enable/Disable Clear Button","odata":"V2","pageTypes":["List Report","Analytical List Page"],"minUi5":"1.71","manifestChange":false},
  {"action":"Enable/Disable Clear Button","odata":"V4","pageTypes":["List Report","Analytical List Page"],"minUi5":"1.71","manifestChange":false},
  {"action":"Enable Empty Row Mode for Tables","odata":"V2","pageTypes":["Object Page"],"minUi5":"1.130","manifestChange":true},
  {"action":"Enable Empty Row Mode for Tables","odata":"V4","pageTypes":["Object Page"],"minUi5":"1.133","manifestChange":true},
  {"action":"Enable Semantic Date Range","odata":"V2","pageTypes":["List Report","Analytical List Page"],"minUi5":"1.96","manifestChange":true},
  {"action":"Enable Semantic Date Range","odata":"V4","pageTypes":["List Report","Analytical List Page"],"minUi5":"1.130","manifestChange":true},
  {"action":"Enable Table Filtering for Page Variants","odata":"V2","pageTypes":["List Report","Analytical List Page","Object Page"],"minUi5":"1.96","manifestChange":true},
  {"action":"Enable Table Filtering for Page Variants","odata":"V4","pageTypes":["List Report","Analytical List Page","Object Page"],"minUi5":"1.133","manifestChange":true},
  {"action":"Enable Variant Management in Tables","odata":"V2","pageTypes":["Object Page"],"minUi5":"1.96","manifestChange":true},
  {"action":"Enable Variant Management in Tables and Charts","odata":"V2","pageTypes":["List Report","Analytical List Page"],"minUi5":"1.96","manifestChange":true},
  {"action":"Enable Variant Management in Tables and Charts","odata":"V4","pageTypes":["List Report","Analytical List Page","Object Page"],"minUi5":"1.133","manifestChange":true}
]
```

STEP: 2 — Detect project parameters from manifest.json

DESCRIPTION: Read the project's manifest.json (project root path: ./webapp/manifest.json or ./manifest.json) and extract:
- SAPUI5 min version (manifest["sap.ui5"].dependencies.minUI5Version OR fallback to string search)
- OData version (search for any "odataVersion" key; fallback to scanning dataSources settings)
- Page types used (search for "ListReport", "AnalyticalListPage", "ObjectPage" in sap.ui.generic.app pages or in entire manifest)

LANGUAGE: TypeScript

CODE:
```typescript
import * as fs from "fs";
import * as path from "path";

type ProjectInfo = {
  manifestPath: string;
  minUi5?: string;
  odataVersion?: "V2" | "V4" | undefined;
  pageTypes: string[]; // e.g. ["List Report","Object Page"]
};

function loadManifest(manifestPath?: string): any {
  const candidates = manifestPath ? [manifestPath] : [
    path.resolve("webapp", "manifest.json"),
    path.resolve("manifest.json")
  ];
  for (const p of candidates) {
    if (fs.existsSync(p)) {
      return JSON.parse(fs.readFileSync(p, "utf8"));
    }
  }
  throw new Error("manifest.json not found in webapp/manifest.json or ./manifest.json");
}

function findMinUi5(manifest: any): string | undefined {
  // Preferred field
  const minUI5 = manifest?.["sap.ui5"]?.dependencies?.minUI5Version;
  if (minUI5) return minUI5;
  // Fallback: search string for patterns like "1.134"
  const str = JSON.stringify(manifest);
  const match = str.match(/"minUI5Version"\s*:\s*"([^"]+)"/) || str.match(/"minUI5"\s*:\s*"([^"]+)"/);
  return match ? match[1] : undefined;
}

function findODataVersion(manifest: any): "V2" | "V4" | undefined {
  // Direct key search
  const jsonStr = JSON.stringify(manifest);
  const vMatch = jsonStr.match(/"odataVersion"\s*:\s*"([24]\.0)"/);
  if (vMatch) return vMatch[1].startsWith("4") ? "V4" : "V2";

  // Check dataSources settings for odataVersion
  const dataSources = manifest?.["sap.app"]?.dataSources || manifest?.dataSources;
  if (dataSources && typeof dataSources === "object") {
    for (const ds of Object.values(dataSources)) {
      const settings = (ds as any)?.settings;
      if (settings?.odataVersion) {
        return String(settings.odataVersion).startsWith("4") ? "V4" : "V2";
      }
    }
  }
  return undefined;
}

function findPageTypes(manifest: any): string[] {
  const found = new Set<string>();
  const str = JSON.stringify(manifest);
  if (/ListReport/.test(str) || /sap.suite.ui.generic.template.ListReport/.test(str)) found.add("List Report");
  if (/AnalyticalListPage/.test(str) || /sap.suite.ui.generic.template.AnalyticalListPage/.test(str)) found.add("Analytical List Page");
  if (/ObjectPage/.test(str) || /sap.suite.ui.generic.template.ObjectPage/.test(str)) found.add("Object Page");
  return Array.from(found);
}

// Usage
const manifest = loadManifest(); // optionally pass path
const project: ProjectInfo = {
  manifestPath: "webapp/manifest.json",
  minUi5: findMinUi5(manifest),
  odataVersion: findODataVersion(manifest),
  pageTypes: findPageTypes(manifest)
};
console.log("Detected project info:", project);
```

STEP: 3 — Filter available quick actions for the project

DESCRIPTION: Use the matrix from STEP 1 and project info from STEP 2. Compare versions (semantic string compare is sufficient because all versions are 1.xxx — use numeric comparison on minor part). Keep actions where:
- matrix.odata equals project odataVersion
- project.pageTypes intersect matrix.pageTypes OR matrix.pageTypes includes generic pages
- project.minUi5 >= matrix.minUi5

LANGUAGE: TypeScript

CODE:
```typescript
// Assumes `matrix` (from STEP 1) is imported/required as an array of objects
// and `project` object produced from STEP 2.

type MatrixEntry = {
  action: string;
  odata: "V2" | "V4";
  pageTypes: string[];
  minUi5: string;
  manifestChange: boolean;
};

function semverCompareUi5(a: string, b: string): number {
  // a and b like "1.130" or "1.71"
  const na = Number(a.split(".")[1] || a);
  const nb = Number(b.split(".")[1] || b);
  return na - nb;
}

function availableActions(matrix: MatrixEntry[], project: {minUi5?: string, odataVersion?: "V2"|"V4"|undefined, pageTypes: string[]}) {
  if (!project.minUi5 || !project.odataVersion) {
    throw new Error("Project minUi5 or odataVersion unknown — cannot reliably determine available quick actions.");
  }
  return matrix.filter(m => {
    if (m.odata !== project.odataVersion) return false;
    if (semverCompareUi5(project.minUi5, m.minUi5) < 0) return false;
    // page type intersection
    if (m.pageTypes.length === 0) return true;
    return m.pageTypes.some(pt => project.pageTypes.includes(pt));
  });
}

// Example usage:
const matrix: MatrixEntry[] = require("./quick-actions-matrix.json"); // or paste the array from STEP 1
const available = availableActions(matrix, {minUi5: project.minUi5!, odataVersion: project.odataVersion!, pageTypes: project.pageTypes});
console.log("Available quick actions:", available.map(a => ({action: a.action, manifestChange: a.manifestChange})));
```

STEP: 4 — Manifest-change caveat for OData V2, older SAPUI5, and outdated array page structure

DESCRIPTION: Actions marked with manifestChange=true in the matrix modify the manifest. There is a special limitation: for adaptation projects built on OData V2 applications that use SAPUI5 version < 1.134 and have an outdated array page structure in manifest.json, manifest-changing quick actions are not available. Programmatically:
- If project.odataVersion === "V2" AND project.minUi5 < "1.134", you must detect whether manifest.json uses the legacy "array page" structure. If legacy structure is present, filter out manifest-change actions or show an explanatory message.

LANGUAGE: JavaScript

CODE:
```javascript
// Simple detector for legacy array page structure — adjust to your project's exact legacy shape
function hasLegacyArrayPageStructure(manifest) {
  // Example heuristic: older Fiori elements used sap.ui.generic.app/pages as an "array" of page definitions
  const pages = manifest?.["sap.ui.generic.app"]?.pages;
  if (Array.isArray(pages)) {
    // In newer structure there's often an object keyed by route or id; treat array as legacy
    return true;
  }
  return false;
}

// Example combined decision
if (project.odataVersion === "V2" && semverCompareUi5(project.minUi5, "1.134") < 0) {
  const legacy = hasLegacyArrayPageStructure(manifest);
  if (legacy) {
    // Remove manifest-change actions from available list
    const safeActions = available.filter(a => !a.manifestChange);
    console.warn("Legacy array page structure detected with SAPUI5 < 1.134 on OData V2. Manifest-changing quick actions are disabled.");
    console.log("Safe quick actions:", safeActions.map(x => x.action));
  }
}
```

STEP: 5 — Reference / Next steps

DESCRIPTION: If you need to migrate or enable manifest-changing quick actions for affected projects (OData V2 + SAPUI5 < 1.134 with legacy array pages), see the official guidance on updating the manifest structure:
- Extending the Delivered Apps Manifest Using an Adaptation Project: https://ui5.sap.com/#/topic/a2b24a69baef4b91af2293ccc6b5871f

LANGUAGE: Plain text

CODE:
```text
Note: The manifest-change caveat is described in the linked documentation above. Before enabling manifest-changing operations programmatically, ensure the project's manifest.json uses the supported (non-legacy) page structure or prompt the developer to migrate.
```


--------------------------------

**TITLE**: Quick Actions Availability Matrix — Programmatic Reference and Checks

**INTRODUCTION**: This document converts the Quick Actions availability matrix into machine-friendly artifacts and small utility code snippets. Use the JSON matrix to programmatically determine whether a given quick action is supported for a project (based on OData version, page type, and SAPUI5 version). Use the manifest check snippet to detect an outdated array page structure that can block manifest-changing actions for OData V2 apps on older SAPUI5 versions.

**TAGS**: SAPUI5, Fiori, quick-actions, adaptation-project, manifest.json, OData V2, OData V4, compatibility, matrix, automation

**STEP**: 1 — Matrix JSON (machine-readable)
**DESCRIPTION**: JSON representation of the Quick Actions availability matrix. Keys: action id/name, OData versions with supported page types and per-SAPUI5-version boolean flags. SAPUI5 version keys: "1.71","1.84","1.96","1.108","1.120","1.130","1.133","1.134",">=1.135".
**LANGUAGE**: JSON
**CODE**:
```json
{
  "versions": ["1.71","1.84","1.96","1.108","1.120","1.130","1.133","1.134",">=1.135"],
  "actions": [
    {
      "id": "addControllerToPage",
      "name": "Add Controller to Page",
      "odata": {
        "V2": {
          "pageTypes": ["List Report","Analytical List Page","Object Page"],
          "support": {"1.71": true,"1.84": true,"1.96": true,"1.108": true,"1.120": true,"1.130": true,"1.133": true,"1.134": true,">=1.135": true}
        },
        "V4": {
          "pageTypes": ["List Report","Analytical List Page","Object Page"],
          "support": {"1.71": true,"1.84": true,"1.96": true,"1.108": true,"1.120": true,"1.130": true,"1.133": true,"1.134": true,">=1.135": true}
        }
      }
    },
    {
      "id": "addHeaderField",
      "name": "Add Header Field",
      "odata": {
        "V2": {
          "pageTypes": ["Object Page"],
          "support": {"1.71": true,"1.84": true,"1.96": true,"1.108": true,"1.120": true,"1.130": true,"1.133": true,"1.134": true,">=1.135": true}
        },
        "V4": {
          "pageTypes": ["Object Page"],
          "support": {"1.71": true,"1.84": true,"1.96": true,"1.108": true,"1.120": true,"1.130": true,"1.133": true,"1.134": true,">=1.135": true}
        }
      }
    },
    {
      "id": "addCustomSection",
      "name": "Add Custom Section",
      "odata": {
        "V2": {
          "pageTypes": ["Object Page"],
          "support": {"1.71": true,"1.84": true,"1.96": true,"1.108": true,"1.120": true,"1.130": true,"1.133": true,"1.134": true,">=1.135": true}
        },
        "V4": {
          "pageTypes": ["Object Page"],
          "support": {"1.71": true,"1.84": true,"1.96": true,"1.108": true,"1.120": true,"1.130": true,"1.133": true,"1.134": true,">=1.135": true}
        }
      }
    },
    {
      "id": "addCustomPageAction",
      "name": "Add Custom Page Action",
      "odata": {
        "V2": {
          "pageTypes": ["List Report","Analytical List Page","Object Page"],
          "support": {"1.71": false,"1.84": false,"1.96": false,"1.108": false,"1.120": false,"1.130": true,"1.133": true,"1.134": true,">=1.135": true}
        },
        "V4": {
          "pageTypes": ["List Report","Analytical List Page","Object Page"],
          "support": {"1.71": false,"1.84": false,"1.96": false,"1.108": false,"1.120": false,"1.130": true,"1.133": true,"1.134": true,">=1.135": true}
        }
      }
    },
    {
      "id": "addCustomTableAction",
      "name": "Add Custom Table Action",
      "odata": {
        "V2": {
          "pageTypes": ["List Report","Analytical List Page","Object Page"],
          "support": {"1.71": false,"1.84": false,"1.96": true,"1.108": true,"1.120": true,"1.130": true,"1.133": true,"1.134": true,">=1.135": true}
        },
        "V4": {
          "pageTypes": ["List Report","Analytical List Page","Object Page"],
          "support": {"1.71": false,"1.84": false,"1.96": true,"1.108": true,"1.120": true,"1.130": true,"1.133": true,"1.134": true,">=1.135": true}
        }
      }
    },
    {
      "id": "addCustomTableColumn",
      "name": "Add Custom Table Column",
      "odata": {
        "V2": {
          "pageTypes": ["List Report","Analytical List Page","Object Page"],
          "support": {"1.71": false,"1.84": false,"1.96": true,"1.108": true,"1.120": true,"1.130": true,"1.133": true,"1.134": true,">=1.135": true}
        },
        "V4": {
          "pageTypes": ["List Report","Analytical List Page","Object Page"],
          "support": {"1.71": false,"1.84": false,"1.96": true,"1.108": true,"1.120": true,"1.130": true,"1.133": true,"1.134": true,">=1.135": true}
        }
      }
    },
    {
      "id": "addLocalAnnotationFile",
      "name": "Add Local Annotation File",
      "odata": {
        "V2": {
          "pageTypes": ["List Report","Analytical List Page","Object Page"],
          "support": {"1.71": false,"1.84": false,"1.96": false,"1.108": false,"1.120": false,"1.130": false,"1.133": true,"1.134": true,">=1.135": true}
        },
        "V4": {
          "pageTypes": ["List Report","Analytical List Page","Object Page"],
          "support": {"1.71": false,"1.84": false,"1.96": false,"1.108": false,"1.120": false,"1.130": false,"1.133": true,"1.134": true,">=1.135": true}
        }
      }
    },
    {
      "id": "addSubpage",
      "name": "Add Subpage",
      "odata": {
        "V2": {
          "pageTypes": ["List Report","Analytical List Page","Object Page"],
          "support": {"1.71": false,"1.84": false,"1.96": true,"1.108": true,"1.120": true,"1.130": true,"1.133": true,"1.134": true,">=1.135": true}
        },
        "V4": {
          "pageTypes": ["List Report","Analytical List Page","Object Page"],
          "support": {"1.71": false,"1.84": false,"1.96": false,"1.108": false,"1.120": false,"1.130": false,"1.133": false,"1.134": false,">=1.135": true}
        }
      }
    },
    {
      "id": "changeTableActions",
      "name": "Change Table Actions",
      "odata": {
        "V2": {
          "pageTypes": ["List Report","Analytical List Page","Object Page"],
          "support": {"1.71": false,"1.84": false,"1.96": false,"1.108": true,"1.120": true,"1.130": true,"1.133": true,"1.134": true,">=1.135": true}
        },
        "V4": {
          "pageTypes": ["List Report","Analytical List Page","Object Page"],
          "support": {"1.71": false,"1.84": false,"1.96": false,"1.108": false,"1.120": false,"1.130": true,"1.133": true,"1.134": true,">=1.135": true}
        }
      }
    },
    {
      "id": "changeTableColumns",
      "name": "Change Table Columns",
      "odata": {
        "V2": {
          "pageTypes": ["List Report","Analytical List Page","Object Page"],
          "support": {"1.71": false,"1.84": false,"1.96": true,"1.108": true,"1.120": true,"1.130": true,"1.133": true,"1.134": true,">=1.135": true}
        },
        "V4": {
          "pageTypes": ["List Report","Analytical List Page","Object Page"],
          "support": {"1.71": false,"1.84": false,"1.96": true,"1.108": true,"1.120": true,"1.130": true,"1.133": true,"1.134": true,">=1.135": true}
        }
      }
    },
    {
      "id": "enableDisableClearButton",
      "name": "Enable/Disable Clear Button",
      "odata": {
        "V2": {
          "pageTypes": ["List Report","Analytical List Page"],
          "support": {"1.71": true,"1.84": true,"1.96": true,"1.108": true,"1.120": true,"1.130": true,"1.133": true,"1.134": true,">=1.135": true}
        },
        "V4": {
          "pageTypes": ["List Report","Analytical List Page"],
          "support": {"1.71": true,"1.84": true,"1.96": true,"1.108": true,"1.120": true,"1.130": true,"1.133": true,"1.134": true,">=1.135": true}
        }
      }
    },
    {
      "id": "enableEmptyRowModeForTables",
      "name": "Enable Empty Row Mode for Tables",
      "odata": {
        "V2": {
          "pageTypes": ["Object Page"],
          "support": {"1.71": false,"1.84": false,"1.96": false,"1.108": false,"1.120": false,"1.130": true,"1.133": true,"1.134": true,">=1.135": true}
        },
        "V4": {
          "pageTypes": ["Object Page"],
          "support": {"1.71": false,"1.84": false,"1.96": false,"1.108": false,"1.120": false,"1.130": false,"1.133": true,"1.134": true,">=1.135": true}
        }
      }
    },
    {
      "id": "enableSemanticDateRange",
      "name": "Enable Semantic Date Range",
      "odata": {
        "V2": {
          "pageTypes": ["List Report","Analytical List Page"],
          "support": {"1.71": false,"1.84": false,"1.96": true,"1.108": true,"1.120": true,"1.130": true,"1.133": true,"1.134": true,">=1.135": true}
        },
        "V4": {
          "pageTypes": ["List Report","Analytical List Page"],
          "support": {"1.71": false,"1.84": false,"1.96": false,"1.108": false,"1.120": false,"1.130": true,"1.133": true,"1.134": true,">=1.135": true}
        }
      }
    },
    {
      "id": "enableTableFilteringForPageVariants",
      "name": "Enable Table Filtering for Page Variants",
      "odata": {
        "V2": {
          "pageTypes": ["List Report","Analytical List Page","Object Page"],
          "support": {"1.71": false,"1.84": false,"1.96": true,"1.108": true,"1.120": true,"1.130": true,"1.133": true,"1.134": true,">=1.135": true}
        },
        "V4": {
          "pageTypes": ["List Report","Analytical List Page","Object Page"],
          "support": {"1.71": false,"1.84": false,"1.96": false,"1.108": false,"1.120": false,"1.130": false,"1.133": true,"1.134": true,">=1.135": true}
        }
      }
    },
    {
      "id": "enableVariantManagementInTables",
      "name": "Enable Variant Management in Tables",
      "odata": {
        "V2": {
          "pageTypes": ["Object Page"],
          "support": {"1.71": false,"1.84": false,"1.96": true,"1.108": true,"1.120": true,"1.130": true,"1.133": true,"1.134": true,">=1.135": true}
        }
      }
    },
    {
      "id": "enableVariantManagementInTablesAndCharts",
      "name": "Enable Variant Management in Tables and Charts",
      "odata": {
        "V2": {
          "pageTypes": ["List Report","Analytical List Page"],
          "support": {"1.71": false,"1.84": false,"1.96": true,"1.108": true,"1.120": true,"1.130": true,"1.133": true,"1.134": true,">=1.135": true}
        },
        "V4": {
          "pageTypes": ["List Report","Analytical List Page","Object Page"],
          "support": {"1.71": false,"1.84": false,"1.96": false,"1.108": false,"1.120": false,"1.130": false,"1.133": true,"1.134": true,">=1.135": true}
        }
      }
    }
  ]
}
```

**STEP**: 2 — Programmatic compatibility check (TypeScript)
**DESCRIPTION**: TypeScript function that consumes the JSON matrix (from Step 1), determines the appropriate SAPUI5 column to use, and returns whether a quick action is supported for the given OData version and page type. The version matching strategy: if runtime SAPUI5 version >=1.135, use ">=1.135"; otherwise choose the highest static key <= runtime version.
**LANGUAGE**: TypeScript
**CODE**:
```typescript
// Usage: load the JSON from Step 1 into `matrix`. Example imports:
// import matrix from './quick-actions-matrix.json';

type ODataVersion = "V2" | "V4";
type Matrix = typeof import('./quick-actions-matrix.json');

function selectColumnKey(sapui5Version: string, knownKeys: string[]): string {
  const v = parseFloat(sapui5Version);
  if (isNaN(v)) throw new Error('Invalid SAPUI5 version: ' + sapui5Version);
  if (v >= 1.135) return '>=1.135';
  // map numeric keys to floats and pick the highest <= v
  const numericKeys = knownKeys
    .filter(k => k !== '>=1.135')
    .map(k => ({ key: k, val: parseFloat(k) }))
    .filter(k => !isNaN(k.val))
    .sort((a, b) => a.val - b.val);

  let chosen = numericKeys[0].key;
  for (const nk of numericKeys) {
    if (v >= nk.val) chosen = nk.key;
    else break;
  }
  return chosen;
}

function isQuickActionSupported(
  matrix: Matrix,
  actionIdOrName: string,
  odataVersion: ODataVersion,
  pageType: string,
  sapui5Version: string
): { supported: boolean; reason?: string } {
  const action = matrix.actions.find(a => a.id === actionIdOrName || a.name === actionIdOrName);
  if (!action) return { supported: false, reason: `Action '${actionIdOrName}' not found in matrix.` };
  const odataEntry = action.odata[odataVersion];
  if (!odataEntry) return { supported: false, reason: `Action '${action.name}' not available for OData ${odataVersion}.` };
  // Check page type
  const normalizedPage = pageType.trim();
  if (!odataEntry.pageTypes.map(p => p.toLowerCase()).includes(normalizedPage.toLowerCase())) {
    return { supported: false, reason: `Action '${action.name}' not applicable to page type '${pageType}'.` };
  }
  const colKey = selectColumnKey(sapui5Version, matrix.versions);
  const supportMap = odataEntry.support as Record<string, boolean>;
  const supported = !!supportMap[colKey];
  return { supported, reason: supported ? undefined : `Not supported for SAPUI5 ${sapui5Version} (column ${colKey}).` };
}

/* Example:
import matrix from './quick-actions-matrix.json';
console.log(isQuickActionSupported(matrix, 'addCustomTableAction', 'V2', 'List Report', '1.108'));
// -> { supported: true, reason: undefined }
console.log(isQuickActionSupported(matrix, 'addLocalAnnotationFile', 'V2', 'Object Page', '1.120'));
// -> { supported: false, reason: 'Not supported for SAPUI5 1.120 (column 1.120).' }
*/
```

**STEP**: 3 — Detect outdated "array page structure" in manifest.json (Node.js)
**DESCRIPTION**: Actions that change the manifest are blocked for adaptation projects built on OData V2 apps that use SAPUI5 < 1.134 and have an "outdated array page structure" in the manifest. This snippet checks for the common indicator of an array-based page structure by searching the manifest.json for a top-level JSON key "pages": [ (the literal array token). Run the check from the repository root. Adjust the path if your manifest lives under webapp/manifest.json.
**LANGUAGE**: JavaScript
**CODE**:
```javascript
// node detect-outdated-manifest.js [path/to/manifest.json]
const fs = require('fs');
const path = require('path');

const manifestPath = process.argv[2] || path.join(process.cwd(), 'manifest.json');
if (!fs.existsSync(manifestPath)) {
  console.error('manifest.json not found at', manifestPath);
  process.exit(2);
}
const content = fs.readFileSync(manifestPath, 'utf8');

// Simple heuristic: presence of a "pages": [ array token (whitespace tolerant)
const pagesArrayRegex = /"pages"\s*:\s*\[/;
const hasOutdatedArrayPage = pagesArrayRegex.test(content);

console.log(`manifest: ${manifestPath}`);
console.log(`outdated array page structure detected: ${hasOutdatedArrayPage ? 'YES' : 'NO'}`);
process.exit(hasOutdatedArrayPage ? 0 : 1);

/*
Interpretation:
- If your app uses OData V2 AND SAPUI5 version < 1.134 AND this script prints YES,
  then actions resulting in manifest changes may not be available in adaptation projects.
- For detailed prerequisites and migration, see:
  https://ui5.sap.com/#/topic/a2b24a69baef4b91af2293ccc6b5871f
*/
```

**STEP**: 4 — Quick procedural checklist before applying a quick action
**DESCRIPTION**: Follow these programmatic steps to decide whether to enable/run a quick action:
- Determine project properties:
  - SAPUI5 version (e.g., "1.120" or "1.135+")
  - OData version ("V2" or "V4")
  - Page type (one of the page types listed under the action in the matrix)
- Use the JSON matrix (Step 1) and the TypeScript helper (Step 2) to check support.
- If action modifies manifest.json and your project is OData V2:
  - If SAPUI5 < 1.134, run the manifest detector (Step 3). If it detects the outdated array page structure, do not attempt manifest-changing quick actions; follow migration guidance at the provided UI5 topic link.
- If supported, run the adaptation quick action tooling workflow for your environment (IDE/CLI) knowing the action is supported for the combination of OData, page type, and SAPUI5 version.

**NOTE**: Actions marked with an asterisk (*) in the original matrix are those that can result in manifest.json changes. For OData V2 apps using SAPUI5 < 1.134 that have an outdated array page structure in manifest.json, these actions are not available. See Extending the Delivered Apps Manifest Using an Adaptation Project for migration prerequisites: https://ui5.sap.com/#/topic/a2b24a69baef4b91af2293ccc6b5871f
--------------------------------

**TITLE**: Releasing an SAP Fiori Application to Be Extensible in Adaptation Projects (SAP S/4HANA Cloud + SAP BTP, ABAP Environment)

**INTRODUCTION**: Action-oriented checklist for preparing and releasing an SAP Fiori application and its OData service so customers can safely create UI adaptations (adaptation projects) on SAP S/4HANA Cloud and SAP BTP, ABAP environment. Includes exact manifest.json changes, prerequisites, and required release states so ATC checks and adaptation tooling behave correctly.

**TAGS**: fiori-tools, sapui5, sap-s4hana-cloud, btp, abap, bsp, manifest.json, odata, api-release, atc, extensibility

**STEP**: 1 — Release the OData service with a C1 contract

**DESCRIPTION**: Set the OData service API release state to C1 = Released. This prevents breaking structural changes while allowing annotation changes. This C1 release is a prerequisite for enabling cloud development adaptation support in the app manifest and for correct ATC enforcement.

- Where: API Release tool / API Management / SAP S/4HANA Cloud API release UI (see "Setting the API Release State").
- Outcome: ATC will enforce the contract; consumers (adaptation projects) will receive notifications on base-app updates.

**LANGUAGE**: text

**CODE**:
```text
Action:
  - Open the API release tool for the OData service (SAP S/4HANA Cloud).
  - Set the API "Release State" to: C1 -> Released.

Notes:
  - C1 contract forbids incompatible structural changes; annotations can still change.
  - This C1 = Released is required before setting sap.fiori/cloudDevAdaptationStatus in manifest.json.
References:
  - "Setting the API Release State" (SAP Help)
```

**STEP**: 2 — Update manifest.json: set cloud adaptation status, app id, and version

**DESCRIPTION**: Modify the application descriptor (manifest.json) in the app root to:
- Set sap.fiori/cloudDevAdaptationStatus to "released".
- Ensure sap.app/id has at least two segments (e.g., com.company.app).
- Increment sap.app/applicationVersion/version before shipping a new app version so adaptation projects get ATC notifications.

This file change is necessary for the BSP (WAPA) object to be considered released for cloud development adaptation.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.app": {
    "id": "com.company.myFioriApp",                 /* must have >= 2 segments */
    "applicationVersion": {
      "version": "1.2.0"                           /* increment for new release */
    }
  },
  "sap.fiori": {
    "cloudDevAdaptationStatus": "released"         /* allowed values: null/absent, "released", "deprecated", "obsolete" */
  }
}
```

**STEP**: 3 — Release BSP (WAPA) object with C0 contract and deploy

**DESCRIPTION**: Ensure the BSP/WAPA object is released for cloud development:
- The manifest.json change (cloudDevAdaptationStatus: "released") is used as the release indicator.
- The OData service C1 = Released (Step 1) must already be set; otherwise deployment will fail.
- Deploy the app (BSP/WAPA) once manifest.json is updated.

**LANGUAGE**: text

**CODE**:
```text
Action:
  - Confirm OData service C1 = Released (Step 1).
  - Update manifest.json as in Step 2.
  - Deploy BSP/WAPA object to SAP S/4HANA Cloud / ABAP environment.
Notes:
  - If OData C1 is not Released, deployment with cloudDevAdaptationStatus is blocked.
```

**STEP**: 4 — Release authorization objects and restriction types (optional but recommended)

**DESCRIPTION**: For authorization objects and restriction types used by the OData service:
- Set their release state to C1 = Released.
- Check "Use in Cloud Development" to make them usable by adaptation projects.
- This step is optional: adaptation projects can still be created if you don't release them; however, the adapted app will inherit original app authorizations and the original app/catalog must be assigned to users.

**LANGUAGE**: text

**CODE**:
```text
Action:
  - Open authorization object/restriction type maintenance.
  - Set Release State: C1 -> Released.
  - Check: "Use in Cloud Development"
Notes:
  - Not mandatory for creating app variants, but required to expose distinct authorization objects to adaptation projects.
```

**STEP**: 5 — Create an API snapshot before shipping

**DESCRIPTION**: Capture a snapshot of the released APIs (including released OData service and related APIs) immediately before shipment. Use the Manage API Snapshots application so consumers can resolve the exact API versions used by the released base app.

**LANGUAGE**: text

**CODE**:
```text
Action:
  - Open Manage API Snapshots (SAP S/4HANA Cloud).
  - Create a snapshot including all released APIs (those with C1 = Released).
  - Save snapshot as part of the release artifact prior to shipment.
Reference:
  - "Manage API Snapshots" (SAP Help)
```

**STEP**: 6 — Verify ATC checks and consistency

**DESCRIPTION**: After releasing contracts and creating snapshots, verify that ATC checks enforce the release state and that adaptation projects will be notified on base-app upgrades.

**LANGUAGE**: text

**CODE**:
```text
Action:
  - Run ATC/check-consistency-of-release-state reports or tools.
  - Confirm no violations for released objects.
Reference:
  - "Check Consistency of Release State" (SAP Help)
```

**RELATED RESOURCES**:
- Descriptor for Applications, Components, and Libraries (manifest.json)
- Best Practices for Developers (SAPUI5)
- SAPUI5 Flexibility: Enable Your App for UI Adaptation
- Check Whether Your Adaptation Project Is Up-To-Date with Base App Upgrades
- Extend (C0) and Use System-Internally (C1) documentation (SAP Help)
--------------------------------

**TITLE**: Replace OData Service in UI5/Fiori Project (manifest / manifest.appdescr_variant)

**INTRODUCTION**: Instructions and ready-to-use JSON examples to programmatically replace an OData service and optional annotation data source in a UI5/Fiori project's descriptor. Use these edits when automating or scripting the "Replace OData Service" operation: update the service URI, optional maxAge, and optional annotation data source. Ensure the new service is schema-compatible with the original (entity sets, properties, function imports).

**TAGS**: fiori-tools, sapui5, manifest, manifest.appdescr_variant, odata, annotations, webapp

STEP: Locate descriptor file(s)
DESCRIPTION: Open the project descriptor file where dataSources are declared. Typical locations:
- webapp/manifest.json (most common)
- webapp/manifest.appdescr_variant (project variants or generated overrides)

LANGUAGE: None
CODE:
```text
File paths:
- <project-root>/webapp/manifest.json
- <project-root>/webapp/manifest.appdescr_variant
```

STEP: Example - original manifest.json (before replacement)
DESCRIPTION: Reference JSON snippet showing a common original OData dataSource and model mapping. Use this to identify the dataSource name you will replace (here: "Northwind").
LANGUAGE: JSON
CODE:
```json
{
  "sap.app": {
    "id": "my.app",
    "dataSources": {
      "Northwind": {
        "uri": "/sap/opu/odata/sap/NORTHWIND_SRV/",
        "type": "OData",
        "settings": { "odataVersion": "2.0" }
      }
    }
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "Northwind"
      }
    }
  }
}
```

STEP: Replace main OData service URI (basic)
DESCRIPTION: Replace the existing dataSource.uri value with the new service URI. Keep the dataSource key (e.g., "Northwind") the same to avoid changing model bindings, or rename and update model.dataSource accordingly.
LANGUAGE: JSON
CODE:
```json
{
  "sap.app": {
    "dataSources": {
      "Northwind": {
        "uri": "https://services.odata.org/V2/Northwind/Northwind.svc/",
        "type": "OData",
        "settings": { "odataVersion": "2.0" }
      }
    }
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "Northwind"
      }
    }
  }
}
```

STEP: Add optional maxAge to control caching
DESCRIPTION: If your replacement requires a maxAge value (seconds) for the dataSource, add a "maxAge" property to the same dataSource object. This is used by some tooling and runtime caching logic.
LANGUAGE: JSON
CODE:
```json
{
  "sap.app": {
    "dataSources": {
      "Northwind": {
        "uri": "https://services.odata.org/V2/Northwind/Northwind.svc/",
        "type": "OData",
        "settings": { "odataVersion": "2.0" },
        "maxAge": 3600
      }
    }
  }
}
```

STEP: Replace or add OData Annotation Data Source (optional)
DESCRIPTION: If the original app used annotations and the new service provides separate annotation metadata, add or replace an "ODataAnnotation" dataSource and point the model to the annotation URI using annotationURI (array). Use the annotation file URI (full URL or relative path). Ensure the annotation metadata is compatible with the original annotations used by the app.
LANGUAGE: JSON
CODE:
```json
{
  "sap.app": {
    "dataSources": {
      "Northwind": {
        "uri": "https://services.odata.org/V2/Northwind/Northwind.svc/",
        "type": "OData",
        "settings": { "odataVersion": "2.0" }
      },
      "NorthwindAnnotations": {
        "uri": "https://example.com/annotations/NorthwindAnnotations.xml",
        "type": "ODataAnnotation",
        "settings": {}
      }
    }
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "Northwind",
        "settings": {
          "annotationURI": [
            "https://example.com/annotations/NorthwindAnnotations.xml"
          ]
        }
      }
    }
  }
}
```

STEP: Alternative annotation pattern — inline annotation URI using dataSource value
DESCRIPTION: If you prefer to reference the annotation dataSource's uri value explicitly (for automation that later resolves the dataSource), set annotationURI to the annotation dataSource's URI string. Replace the string with the actual annotation URI returned from your configuration process or fiori-tools replacement dialog.
LANGUAGE: JSON
CODE:
```json
{
  "sap.app": {
    "dataSources": {
      "NorthwindAnnotations": {
        "uri": "https://example.com/annotations/NorthwindAnnotations.xml",
        "type": "ODataAnnotation",
        "settings": {}
      }
    }
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "Northwind",
        "settings": {
          "annotationURI": [
            "https://example.com/annotations/NorthwindAnnotations.xml"
          ]
        }
      }
    }
  }
}
```

STEP: Updating manifest.appdescr_variant (variant override)
DESCRIPTION: If you need the replacement recorded in a variant file, add the modified dataSources block under webapp/manifest.appdescr_variant. The structure mirrors manifest.json. This is useful if your tool stores overrides separately.
LANGUAGE: JSON
CODE:
```json
{
  "sap.app": {
    "dataSources": {
      "Northwind": {
        "uri": "https://services.odata.org/V2/Northwind/Northwind.svc/",
        "type": "OData",
        "settings": { "odataVersion": "2.0" },
        "maxAge": 3600
      },
      "NorthwindAnnotations": {
        "uri": "https://example.com/annotations/NorthwindAnnotations.xml",
        "type": "ODataAnnotation",
        "settings": {}
      }
    }
  }
}
```

STEP: Validation checklist (automated or manual)
DESCRIPTION: After editing, run these checks to ensure compatibility:
- Confirm entity set names used by the app exist in the new service.
- Confirm properties accessed by the UI and OData queries exist with compatible types.
- Confirm any function imports or actions used by the app exist and accept the same parameters.
- If changing annotations, ensure the new annotation metadata contains the same UI vocabulary terms (e.g., com.sap.vocabularies.UI.v1) used by the app.
- If your build or runtime resolves dataSources from manifest.appdescr_variant, ensure overrides are merged correctly.

LANGUAGE: None
CODE:
```text
Checklist:
- Compare old and new $metadata for entity sets and properties.
- Run UI tests / navigation paths that use entity sets and function imports.
- If errors occur on startup, inspect console for OData metadata binding errors and adjust dataSource/model settings accordingly.
```

STEP: Save and test
DESCRIPTION: Save the modified descriptor file(s) and run the app. Look for binding/metadata errors and iterate. If using automated replacement (e.g., fiori-tools), the tool performs these edits; use the examples above to reproduce or validate changes in source control.
LANGUAGE: None
CODE:
```text
Commands (example):
# Serve and test UI5 app (local)
ui5 serve --config=ui5-local.yaml

# Or run your project's test/start scripts
npm start
```
--------------------------------

**TITLE**: Replace OData Service in an Adaptation Project (manual manifest edit)

**INTRODUCTION**: This guide shows how to replace an OData service in an adaptation project by editing manifest.appdescr_variant. Use this when the tooling wizard is not available. The new service MUST be compatible with the original service: same entity set names, properties, and function imports. For OData V2 with annotations, you must also replace the annotation data source and ensure the new annotations are compatible.

**TAGS**: fiori-tools, odata, manifest, adaptation, sapui5, annotations

**STEP**: 1 — Locate the target service name in the base application's manifest

**DESCRIPTION**: Open the base application's manifest.json (or manifest.app) and find the OData dataSource name used by the app. The model(s) reference the dataSource by name. Note the dataSource key you will override in manifest.appdescr_variant.

**LANGUAGE**: JSON

**CODE**:
```json
// base app webapp/manifest.json (excerpt)
{
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "MainODataService"     // <- model uses this dataSource name
      }
    },
    "dataSources": {
      "MainODataService": {
        "uri": "/sap/opu/odata/sap/Z_ORIGINAL_SRV/",
        "type": "OData",
        "settings": {
          "odataVersion": "2.0"
        }
      },
      "MainAnnotations": {
        "uri": "/sap/opu/odata/sap/Z_ORIGINAL_ANNOTATIONS/",
        "type": "ODataAnnotation",
        "settings": {}
      }
    }
  }
}
```

**STEP**: 2 — Edit manifest.appdescr_variant to replace the service URI

**DESCRIPTION**: Open the adaptation project's manifest.appdescr_variant (project root). Add or update the same dataSource key(s) from the base app to point to the new OData service URI. This overrides the base application dataSource. Optionally add or update settings.maxAge (cache TTL) and odataVersion. If the new service supports annotations, replace the annotation data source entry as well.

**LANGUAGE**: JSON

**CODE**:
```json
// adaptation project: manifest.appdescr_variant (excerpt)
// Replace/update these keys to point to the new service and annotation service.
{
  "sap.ui5": {
    "dataSources": {
      "MainODataService": {
        "uri": "https://my.system.example.com/sap/opu/odata/sap/Z_NEW_SRV/",  // <-- NEW service URI
        "type": "OData",
        "settings": {
          "odataVersion": "2.0",
          "maxAge": 3600   // optional: cache TTL in seconds
        }
      },
      "MainAnnotations": {
        "uri": "https://my.system.example.com/sap/opu/odata/sap/Z_NEW_ANNOTATIONS/", // <-- NEW annotation URI (if used)
        "type": "ODataAnnotation",
        "settings": {}
      }
    }
  }
}
```

**STEP**: 3 — Ensure model references remain correct (models → dataSource)

**DESCRIPTION**: Confirm that the model(s) in manifest.appdescr_variant continue to reference the correct dataSource names. If the base app uses a named model that points to the dataSource, keep the same mapping. If you must change the model name, update all UI config that references that model.

**LANGUAGE**: JSON

**CODE**:
```json
// Ensure models still point to the overridden dataSource name(s)
{
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "MainODataService",  // must match the dataSources key above
        "settings": {
          "synchronizationMode": "Auto"
        }
      },
      "annotationsModel": {
        "dataSource": "MainAnnotations"
      }
    }
  }
}
```

**STEP**: 4 — Save, build, and test the adaptation

**DESCRIPTION**: Save manifest.appdescr_variant. Re-deploy or run the application/adaptation project and test all OData-driven features (lists, forms, function imports). Verify entity sets, properties, and function imports behave as expected. If OData V2 annotations are used, verify annotation-driven UI elements (e.g., Smart Controls, metadata-driven fields) render correctly.

**LANGUAGE**: Text

**CODE**:
```text
1. Save manifest.appdescr_variant.
2. Rebuild or re-deploy the adaptation project (as required by your pipeline).
3. Open the app in the runtime and verify:
   - Data loads for each entity set used by the app.
   - Function imports and actions work.
   - Annotation-driven UI elements display correctly (if applicable).
4. If issues appear, ensure the new service exposes the same entity sets, properties and function imports,
   and that annotation files/data are compatible with the original app.
```

**STEP**: 5 — Troubleshooting notes (compatibility checklist)

**DESCRIPTION**: Quick checks when replacing a service.

**LANGUAGE**: Text

**CODE**:
```text
- Confirm entity set names exist and match (case-sensitive).
- Confirm entity properties used by the UI are present.
- Confirm function imports/actions signatures are identical.
- For OData V2 with annotations:
  - Replace annotation data source URI in manifest.appdescr_variant.
  - Ensure the new annotation file contains equivalent target annotations (UI, field groups, line items, etc.).
- If using authentication, ensure credentials/connection to the new system are available and tested.
```
--------------------------------

**TITLE**: Updating the Adaptation Project

**INTRODUCTION**: Update a previously deployed adaptation project so your changes are redeployed to the on-premise ABAP system. This describes how to open the Fiori tools Deployment Wizard, select the target system, choose the Update action, and start the redeployment. Prerequisite: project must already be deployed following Deploy the Adaptation Project to the ABAP Repository (link included).

**TAGS**: fiori-tools, adaptation, deployment, ABAP, on-premise, manifest

STEP: 1 — Open the Deployment Wizard

DESCRIPTION: Open the Fiori tools Deployment Wizard from your development environment. You can open it by right-clicking the project root (main folder), the webapp folder, or the manifest.appdescr_variant file and selecting "Open Deployment Wizard". Alternatively use the Command Palette/Quick Open command to launch the wizard.

LANGUAGE: bash

CODE:
```bash
# Option A: Context menu (GUI)
# Right-click one of the following in the Explorer:
#  - <project-root> (main folder)
#  - <project-root>/webapp/
#  - <project-root>/webapp/manifest.appdescr_variant
# then choose: Open Deployment Wizard

# Option B: Command Palette (keyboard)
# Open Command Palette (Ctrl+Shift+P / Cmd+Shift+P) and run:
Fiori tools: Open Deployment Wizard
```

STEP: 2 — Select the target system

DESCRIPTION: In the Deployment Wizard select the ABAP system to which you want to deploy. The system used when the project was created is selected by default. Confirm or change the system selection before proceeding.

LANGUAGE: text

CODE:
```text
# Example items to verify in the wizard UI:
# - Target system: <your-abap-system-alias>
# - Destination/Client: <client-number>
# - Transport request (if applicable)
# No CLI required; use the UI dropdown to select the system.
```

STEP: 3 — Choose Update action

DESCRIPTION: If the wizard detects the project is already deployed to the selected system, you will be prompted to choose an action. Select "Update" to redeploy your changes. (The other option is "Undeploy".)

LANGUAGE: text

CODE:
```text
# UI prompt:
# "The project has already been deployed to this system. What would you like to do?"
# Options: [Update] [Undeploy]
# Action to take: Click [Update]
```

STEP: 4 — Start the deployment

DESCRIPTION: After selecting Update, proceed by clicking Next to start the deployment process. Monitor the deployment progress and resolve any errors shown in the wizard logs. Deployment will push updated artifacts from the selected folder (webapp / manifest.appdescr_variant) to the ABAP repository.

LANGUAGE: text

CODE:
```text
# UI actions:
# 1. Click [Next] to start deployment
# 2. Watch progress/log output in the wizard
# 3. If errors occur, check:
#    - <project-root>/webapp/manifest.appdescr_variant
#    - <project-root>/webapp/* for missing or invalid files
#    - ABAP transport and authorization settings on the target system
```

STEP: Reference — Prerequisite link

DESCRIPTION: Ensure the project has been deployed previously following SAP guidance before attempting update.

LANGUAGE: text

CODE:
```text
# Prerequisite documentation:
# Deploy the Adaptation Project to the ABAP Repository:
# https://help.sap.com/docs/bas/developing-sap-fiori-app-in-sap-business-application-studio/deploy-adaptation-project?locale=en-US
```
--------------------------------

**TITLE**: Upgrade-Safe Controller Extension Rules for SAPUI5 / Fiori Adaptation Projects

**INTRODUCTION**: Practical, code-focused rules and short examples to write controller extensions that survive base-app upgrades. Use these patterns to avoid breakage after upgrades, ensure compatibility with adaptation project snapshots, and minimize maintenance effort.

**TAGS**: fiori-tools, SAPUI5, upgrade, adaptation, controller-extensions, best-practices, flexibility, OData, resilience

**STEP**: 1 — Overview and adaptation project snapshot behavior

**DESCRIPTION**: Understand the adaptation project snapshot behavior: an adaptation project deployed to SAP S/4HANA Cloud contains a runnable snapshot of the base app (UI artifacts + local copy of UI annotations). After a base app upgrade, the snapshot keeps the extended app runnable. You still must resolve conflicts and redeploy the adaptation project to adopt the upgraded base app and regain support.

Also link to the check-up-to-date page to confirm whether your adaptation project is current.

**LANGUAGE**: Text

**CODE**:
```text
Note:
- Deployed adaptation project contains a runnable snapshot of the base app (UI artifacts + local copy of UI annotations).
- After base app upgrade, snapshot keeps extended app running but may require conflict resolution.
- Redeploy the adaptation project to adopt the upgraded base app and receive support.

Check whether your adaptation project is up-to-date:
- Reference: check-whether-your-adaptation-project-is-up-to-date-with-base-app-upgrades-c6ef105.md
```

**STEP**: 2 — Prefer stable IDs; never rely on aggregation order

**DESCRIPTION**: Always access controls by stable ID using view.byId or component.byId. Do not assume aggregation order or parent-child chain ordering — these can change across upgrades.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Recommended: access by stable ID
const oButton = this.getView().byId("myStableButtonId");
if (oButton) {
  oButton.setEnabled(true);
}

// Avoid relying on aggregation order (do NOT use something like):
// const oFirstItem = oList.getItems()[0]; // order may change after upgrade
```

**STEP**: 3 — Validate control existence and type before calling methods

**DESCRIPTION**: Always check that a control exists and is of the expected control type (class) before calling further methods. This applies to controls added by adaptation project changes or dynamically via fragments.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
const oControl = this.getView().byId("someControlId");
if (oControl && oControl instanceof sap.m.Input) {
  // safe to call Input-specific API
  oControl.setValue("new value");
} else {
  // handle missing or unexpected control gracefully
  jQuery.sap.log.warning("Expected sap.m.Input with id someControlId not found or wrong type");
}

// Example for controls created from XMLFragment
const oFragmentControl = this.byId("fragmentControlId"); // view-scoped id resolution
if (oFragmentControl && typeof oFragmentControl.getValue === "function") {
  // safe usage
}
```

**STEP**: 4 — Detect feature/method availability and avoid calling private/protected APIs

**DESCRIPTION**: Never call or override private/protected SAPUI5 methods or use internal APIs. Use feature-detection (typeof) before invoking optional methods and wrap calls in try/catch to handle unexpected failures gracefully.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Feature detection + defensive call
if (oReuseComponent && typeof oReuseComponent.publicMethod === "function") {
  try {
    oReuseComponent.publicMethod();
  } catch (err) {
    // handle failure gracefully: log, fallback, or show user-friendly message
    jQuery.sap.log.error("Reuse component call failed", err);
  }
} else {
  // fallback handling if method not available
}
```

**STEP**: 5 — Do not use deprecated SAPUI5 artifacts or internal value-help entity sets in controller code

**DESCRIPTION**: Avoid deprecated controls, properties, or APIs. Value helps (value-help entity sets) are not guaranteed stable — do not use them in controller logic or for data binding in XML fragments.

**LANGUAGE**: Text

**CODE**:
```text
Rules:
- Do not call or rely on deprecated controls/properties/methods.
- Value-help entity sets are NOT part of internal stability contract: avoid using them for programmatic logic or fragment bindings.
- Prefer public documented APIs and documented annotation usage for value selection.
```

**STEP**: 6 — Write resilient code when interacting with reuse components

**DESCRIPTION**: Reuse components can change behavior and API surface across upgrades. Use defensive programming: check for null, detect methods, catch exceptions, and provide fallbacks.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Example defensive interaction with reuse component
const oReuse = this.getOwnerComponent().getAggregation("reuseComponent");
if (oReuse) {
  if (typeof oReuse.open === "function") {
    try {
      oReuse.open();
    } catch (e) {
      jQuery.sap.log.error("Failed to open reuse component", e);
      // fallback or user notification
    }
  } else {
    jQuery.sap.log.info("Reuse component 'open' not available; using fallback");
    // implement fallback flow
  }
}
```

**STEP**: 7 — Do not hard-code OData metadata values; check metadata at runtime

**DESCRIPTION**: OData metadata (entity sets, property names, annotations) can change during upgrades. Do not hard-code names; fetch and validate metadata at runtime before relying on it.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
const oModel = this.getView().getModel();
const oMetadata = oModel && typeof oModel.getServiceMetadata === "function"
  ? oModel.getServiceMetadata()
  : null;

if (oMetadata && oMetadata.dataServices) {
  // Example: search for an entity set by name instead of hard-coding assumption
  const aSchemas = oMetadata.dataServices.schema || [];
  // navigate schemas safely and validate required entity sets/properties before using
} else {
  jQuery.sap.log.warning("OData metadata unavailable; avoid assuming property names");
}
```

**STEP**: 8 — Follow SAPUI5 best practices and Fiori elements extension guidance

**DESCRIPTION**: Follow the SAPUI5 Best Practices and the Fiori elements "Extending Delivered Apps Using Adaptation Extension" guide to ensure upgrade-safe extension patterns.

**LANGUAGE**: Text

**CODE**:
```text
References:
- SAPUI5 Best Practices for Developers: https://ui5.sap.com/#/topic/28fcd55b04654977b63dacbee0552712
- Fiori elements extension guidance: https://ui5.sap.com/#/topic/52fc48b479314d0688be24f699778c47
```

**STEP**: 9 — Summary checklist for upgrade-safe controller extensions

**DESCRIPTION**: Quick checklist to use during development or code review to ensure compatibility with upgrades.

**LANGUAGE**: Text

**CODE**:
```text
Upgrade-Safe Checklist:
- Access controls by stable IDs via view.byId/component.byId.
- Do not rely on aggregation order or DOM structure.
- Confirm control exists and type before method calls.
- Avoid private/protected/internal APIs.
- Avoid deprecated SAPUI5 artifacts.
- Do not use value-help entity sets in controller code or fragment bindings.
- Use feature-detection and try/catch when calling reuse-component APIs.
- Do not hard-code OData metadata names; validate at runtime.
- Follow SAPUI5 and Fiori elements extension best-practices.
```
--------------------------------

**TITLE**: Viewing and Collecting SAP Fiori tools AI Generation Logs

**INTRODUCTION**: Step-by-step, action-oriented instructions to set the log level, view generation logs in VS Code, and collect the .fiori-ai logs or the full generated project as a .zip for troubleshooting or support tickets.

**TAGS**: fiori-tools, sap, fiori-ai, logs, troubleshooting, vscode, command-palette, terminal, zip

**STEP**: 1 — Set VS Code log level to Info

**DESCRIPTION**: Open the Command Palette and set the VS Code developer log level to "Info". This must be done before running the Project Accelerator generation and again whenever the dev space or VS Code is restarted.

**LANGUAGE**: Text

**CODE**:
```Text
- Shortcut (macOS): ⌘ + ⇧ + P
- Shortcut (Windows/Linux): Ctrl + ⇧ + P
- Command to run: Developer: Set Log Level
- Select: Info
Tip: Set this before starting generation and after any dev space restart.
```

**STEP**: 2 — Open Output panel and select SAP Fiori tools - AI

**DESCRIPTION**: Open the Output view in VS Code and select the "SAP Fiori tools - AI" stream from the Output dropdown to watch generation logs in real time.

**LANGUAGE**: Text

**CODE**:
```Text
- Menu: View > Terminal (then switch to the Output tab)
- In Output tab: open the dropdown (right side) and select "SAP Fiori tools - AI"
- Watch log entries during generation for Info-level details
```

**STEP**: 3 — Run the Project Accelerator generation

**DESCRIPTION**: Run the SAP Fiori tools AI Project Accelerator to generate your application (via the extension UI or command). Ensure the log level is set to Info prior to starting so full logs are produced.

**LANGUAGE**: Text

**CODE**:
```Text
- Start generation via the Project Accelerator UI or the extension command in VS Code
- Monitor the "SAP Fiori tools - AI" Output stream for progress and errors
```

**STEP**: 4 — Locate log files inside the generated project

**DESCRIPTION**: The generated application's logs are stored in the generated project's .fiori-ai folder. Use the folder when creating a support ticket for generation failures.

**LANGUAGE**: Text

**CODE**:
```Text
Example locations (replace <project-folder> with your project name):
- macOS/Linux: /home/<user>/projects/<project-folder>/.fiori-ai
- Windows: C:\Users\<user>\projects\<project-folder>\.fiori-ai
```

**STEP**: 5 — Create a zip archive of only the .fiori-ai logs (generation failures)

**DESCRIPTION**: When generation fails, attach the .fiori-ai logs to your ticket. Commands below create a zip containing the .fiori-ai folder only.

**LANGUAGE**: Shell

**CODE**:
```bash
# macOS / Linux (run from the parent folder of <project-folder>):
zip -r <project-folder>-fiori-ai-logs.zip <project-folder>/.fiori-ai
# Example:
# zip -r my-app-fiori-ai-logs.zip my-app/.fiori-ai
```

**LANGUAGE**: PowerShell

**CODE**:
```powershell
# Windows PowerShell (run from the parent folder of <project-folder>):
Compress-Archive -Path ".\<project-folder>\.fiori-ai\*" -DestinationPath "<project-folder>-fiori-ai-logs.zip" -Force
# Example:
# Compress-Archive -Path ".\my-app\.fiori-ai\*" -DestinationPath "my-app-fiori-ai-logs.zip" -Force
```

**STEP**: 6 — Create a zip archive of the entire generated app (app issues)

**DESCRIPTION**: For issues with a generated app (not generation failures), attach a .zip of the entire project (include the hidden .fiori-ai folder) so support can reproduce and inspect the project.

**LANGUAGE**: Shell

**CODE**:
```bash
# macOS / Linux (from the parent folder):
zip -r <project-folder>.zip <project-folder>
# Example:
# zip -r my-app.zip my-app
```

**LANGUAGE**: PowerShell

**CODE**:
```powershell
# Windows PowerShell (from the parent folder):
Compress-Archive -Path ".\<project-folder>\*" -DestinationPath "<project-folder>.zip" -Force
# Example:
# Compress-Archive -Path ".\my-app\*" -DestinationPath "my-app.zip" -Force
```

**STEP**: 7 — Submit logs with your support ticket

**DESCRIPTION**: For generation failures: attach the .fiori-ai logs zip created in STEP 5. For issues with the generated application: attach the full project zip from STEP 6. Include context: VS Code version, SAP Fiori tools AI extension version, timestamp of generation, and brief reproduction steps.

**LANGUAGE**: Text

**CODE**:
```Text
Include with your ticket:
- <project-folder>-fiori-ai-logs.zip  (for generation failures)
- OR <project-folder>.zip  (for app issues)
- VS Code version
- SAP Fiori tools AI extension version
- Timestamp of generation
- Short reproduction steps and expected vs actual behavior
```
--------------------------------

**TITLE**: Working with an Adaptation Project (SAP Fiori Tools)

**INTRODUCTION**: This guide shows how to create, inspect, run, and apply UI Adaptation (flexibility) changes using an Adaptation Project generated with SAP Fiori Tools. Use the adaptation project to keep runtime UI changes (flex changes and descriptor changes) separate from the main application, preview them locally, and copy them into the application for deployment.

**TAGS**: fiori-tools, sapui5, ui5, adaptation, ui-adaptation, flexibility, rta, changes

**STEP**: 1 — Create an Adaptation Project (VS Code / Fiori Tools)

**DESCRIPTION**: Use the Fiori Tools extension in Visual Studio Code to generate an Adaptation Project for an existing application. The command creates a folder containing the web assets and a structured place for UI flexibility changes (UI and descriptor changes). If you prefer automation, run the same flow from your automation scripts—VS Code command shown below is the recommended interactive approach.

**LANGUAGE**: Shell / VS Code

**CODE**:
```bash
# In VS Code: open Command Palette (Ctrl/Cmd+Shift+P) and run:
# "Fiori: Create Application Adaptation Project"
# Follow prompts: select target application (by application id or path), choose a project name (e.g. my-app-adaptation)

# Example (non-interactive pseudo-command for automation - may vary by extension version):
# fiori-tools create-adaptation --app-id com.mycompany.myapp --output ./my-app-adaptation
```

**STEP**: 2 — Inspect Adaptation Project Structure

**DESCRIPTION**: After generation you should have a folder for the adaptation project. Inspect the files to understand where to place UI flexibility changes (UI changes) and descriptor changes (manifest-level changes). Common folders: webapp/, changes/, descriptor/, ui5.yaml, package.json.

**LANGUAGE**: text

**CODE**:
```text
/my-app-adaptation
├─ webapp/
│  ├─ index.html
│  ├─ manifest.json               # adaptation project manifest (targeting the original app)
│  └─ changes/                    # UI change files (flexibility changes)
│     └─ com.mycompany.myapp/
│        └─ <change-id>.change    # UI change JSON files
├─ descriptor/                     # descriptor (manifest) change files
│  └─ <descriptor-change-id>.change
├─ ui5.yaml                        # ui5 tooling config for local preview
├─ package.json                    # scripts to start/preview and helper tasks
└─ README.md
```

**STEP**: 3 — Example UI Flexibility Change (UI change)

**DESCRIPTION**: Add or edit a UI flexibility change file in webapp/changes/<componentId>/. The JSON format below is a minimal example for renaming a button label. Key fields: reference (component id), selector (control id, idIsLocal), changeType, layer, and content. Place one JSON file per change. File extension commonly ".change" or ".json" depending on your toolchain.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "fileName": "renameButton.change",
  "changeType": "rename",
  "reference": "com.mycompany.myapp",
  "moduleName": "sap/ui/demo/MyView.view.xml",
  "selector": {
    "id": "myButton",
    "idIsLocal": true
  },
  "content": {
    "newLabel": "Confirm Order"
  },
  "layer": "CUSTOMER",
  "texts": {},
  "support": {}
}
```

**STEP**: 4 — Example Descriptor Change (manifest-level change)

**DESCRIPTION**: Descriptor changes modify the application descriptor (manifest.json). Save descriptor-level changes under descriptor/ with their own change JSON. The example below updates the application title in the descriptor (changeType names vary by UI5 version/tooling; adapt changeType accordingly).

**LANGUAGE**: JSON

**CODE**:
```json
{
  "fileName": "changeAppTitle.change",
  "changeType": "appdescr_app_setTitle",
  "reference": "com.mycompany.myapp",
  "selector": {
    "id": "app",
    "idIsLocal": false
  },
  "content": {
    "title": "My App - Adapted"
  },
  "layer": "CUSTOMER"
}
```

**STEP**: 5 — Local Preview of the Adaptation Project

**DESCRIPTION**: Use UI5 tooling to preview the adaptation project locally. Ensure ui5.yaml exists and package.json has a start script that runs the ui5 server. Start the server and open the index page.

**LANGUAGE**: JSON and Shell

**CODE**:
```json
// package.json (snippet)
{
  "name": "my-app-adaptation",
  "version": "1.0.0",
  "scripts": {
    "start": "ui5 serve --config=ui5.yaml --open index.html",
    "build": "ui5 build --include=resources --clean-dest"
  },
  "devDependencies": {
    "@ui5/cli": "^3"
  }
}
```

```yaml
# ui5.yaml (basic)
specVersion: '2.2'
type: application
metadata:
  name: my-app-adaptation
server:
  customMiddleware:
    - name: ui5-middleware-simpleproxy
      after: compression
      configuration:
        cwd: .
```

```bash
# Start local preview
cd my-app-adaptation
npm install
npm start
# Open browser to http://localhost:8080/index.html (ui5 serve default port)
```

**STEP**: 6 — Apply (Copy) Adaptation Changes into the Main Application

**DESCRIPTION**: When adaptation changes are ready, copy the change files from the adaptation project to the main application's webapp/changes and descriptor/ folders. Use an automated copy command in package.json to make this reproducible. Ensure component reference paths and IDs match the target application.

**LANGUAGE**: Shell / JSON

**CODE**:
```json
// package.json snippet in adaptation project
{
  "scripts": {
    "apply:copy": "npm run build && npm run copy:changes",
    "copy:changes": "node ./scripts/copy-changes.js"
  }
}
```

```js
// scripts/copy-changes.js (example node copy script)
// Copies all files from adaptation/webapp/changes/* to ../my-app/webapp/changes/*
const fs = require('fs-extra');
const path = require('path');

const src = path.resolve(__dirname, '..', 'webapp', 'changes');
const dest = path.resolve(__dirname, '..', '..', 'my-app', 'webapp', 'changes');

fs.copy(src, dest, { overwrite: true })
  .then(() => console.log('Adaptation changes copied to application'))
  .catch(err => {
    console.error('Copy failed', err);
    process.exit(1);
  });
```

```bash
# Run the copy from the adaptation project root:
npm run apply:copy
```

**STEP**: 7 — Validate and Deploy

**DESCRIPTION**: After copying, run the main application's local build/preview and validate that the changes apply correctly (UI labels, visibility, descriptor changes). For transport to SAP systems or to include in a build pipeline, ensure changes are included in your CI/CD build artifact and mapping to the correct ui5/component reference and transport mechanism (e.g., CTS or SAP Cloud transport) is handled by your release process.

**LANGUAGE**: Shell

**CODE**:
```bash
# Example validation steps (main app)
cd ../my-app
npm install
npm start
# Open and validate changes visually

# Example build (CI)
npm run build
# Package and push artifacts according to your deployment pipeline
```


--------------------------------
