
--------------------------------

**TITLE**: Deploying an SAP Fiori Application (ABAP and Cloud Foundry)

**INTRODUCTION**: Practical, code-focused instructions for deploying an SAP Fiori tools project to ABAP or SAP BTP Cloud Foundry. Includes required artifacts, example shell commands (build, archive, run deploy), debugging environment variables, troubleshooting steps, and CLI help commands. Use this as a checklist and as copy-pasteable commands for CI or local workflows.

**TAGS**: fiori-tools, deployment, abap, cloud-foundry, html5-repo, sapui5, cli, debugging

**STEP**: 1 — Deployment overview
**DESCRIPTION**: Understand deployment targets and artifacts. The deployment target (ABAP or Cloud Foundry) is not required when generating the project. The deployable artifact is a zipped dist folder (SAP Fiori application) for ABAP or uploaded to the HTML5 Repository for Cloud Foundry.
**LANGUAGE**: Bash
**CODE**:
```bash
# Summary (no-op): produce a dist folder and zip it before deploying.
# - Build your app to produce the `dist` folder (framework-specific: e.g. npm run build)
# - Archive the `dist` folder into a zip file (see next steps)
echo "Build -> Zip -> Deploy (target: ABAP | Cloud Foundry)"
```

**STEP**: 2 — Build and create zipped deployment artifact (dist -> zip)
**DESCRIPTION**: Create the production-ready dist folder and archive it. Typical workflow: run the project's build, verify the dist folder, then zip it as the SAP Fiori deployment artifact.
**LANGUAGE**: Bash / PowerShell
**CODE**:
```bash
# macOS / Linux (example)
npm run build            # produce ./dist
cd dist
zip -r ../app-deploy.zip .    # create app-deploy.zip from contents of dist
cd ..

# Windows PowerShell (example)
npm run build
Compress-Archive -Path .\dist\* -DestinationPath .\app-deploy.zip
```

**STEP**: 3 — Deploying to ABAP (concept + debug)
**DESCRIPTION**: For ABAP deployment use the SAPUI5 Repository service on the ABAP backend. The backend provides hosting, routing and authentication. Upload the zipped dist (SAP Fiori application). If deployment scripts are provided in your project, you can run them; use DEBUG env var to capture detailed logs from the ux-odata-client.
- Prerequisite: SAP_UI component version 7.53+ and SAPUI5 repository service activated.
- If using npm scripts that perform the upload, enable debug logging as shown.
**LANGUAGE**: Bash / Windows CMD
**CODE**:
```bash
# macOS / Linux: enable detailed backend logs during deployment
DEBUG=ux-odata-client npm run deploy

# Windows (CMD)
set DEBUG=ux-odata-client & npm run deploy

# Windows (PowerShell)
$env:DEBUG="ux-odata-client"; npm run deploy
```
Additional resources:
- Ensure prerequisites when using an OData service to load data to the SAPUI5 ABAP repository:
  https://ui5.sap.com/#/topic/a883327a82ef4cc792f3c1e7b7a48de8
- See full ABAP deployment doc:
  deployment-of-application-607014e.md#loio607014e278d941fda4440f92f4a324a6__abap

**STEP**: 4 — Deploying to SAP BTP Cloud Foundry (HTML5 Repository)
**DESCRIPTION**: For Cloud Foundry you must create an instance of the HTML5 Repository service and upload the app (zipped dist). Other services required for runtime must be instantiated as needed. Generate Cloud Foundry deployment configuration before deploying.
**LANGUAGE**: Bash
**CODE**:
```bash
# Example: references and next actions (actual CF commands depend on your deployment config)
# 1. Create or bind an HTML5 Repository service instance in your CF space (use platform/manifest or CF CLI)
# 2. Use your deployment tooling or CI to upload app-deploy.zip to the HTML5 repo

# See generator docs to create required deployment descriptors:
# - Generate Deployment Configuration Cloud Foundry:
#   generate-deployment-configuration-cloud-foundry-41e63bd.md
# - SAP Fiori Launchpad Configuration:
#   sap-fiori-launchpad-configuration-bc3cb89.md
```

**STEP**: 5 — Generate deployment configurations (ABAP / Cloud Foundry / FLP)
**DESCRIPTION**: Generate and review deployment configuration files before deploying. Use the Fiori Tools generators and follow these reference docs.
**LANGUAGE**: Plain text / Links
**CODE**:
```text
- Generate Deployment Configuration ABAP:
  generate-deployment-configuration-abap-c06b9cb.md

- Generate Deployment Configuration Cloud Foundry:
  generate-deployment-configuration-cloud-foundry-41e63bd.md

- SAP Fiori Launchpad Configuration:
  sap-fiori-launchpad-configuration-bc3cb89.md

- Deployment workflow reference:
  deployment-of-application-607014e.md
```

**STEP**: 6 — Troubleshooting (ABAP deployment errors and logs)
**DESCRIPTION**: If the SAPUI5 repository service is unreachable or deployments return HTTP 400, follow these checks and enable detailed logging. Inspect ABAP transactions and server logs for root causes (e.g., missing virus-scan profile).
**LANGUAGE**: Bash / ABAP Transaction Notes
**CODE**:
```bash
# 1) Check service activation for SAPUI5 Repository (see UI5 docs):
#    https://ui5.sap.com/#/topic/a883327a82ef4cc792f3c1e7b7a48de8

# 2) If you get "Request failed with status code 400":
#    - Check application console for details
#    - On the ABAP server run transaction: /IWFND/ERROR_LOG
#    - Check virus-scan setup: transaction /IWFND/VIRUS_SCAN

# 3) To get detailed logs while deploying (backend + archiving):
# macOS / Linux:
DEBUG=ux-odata-client npm run deploy

# Windows (CMD):
set DEBUG=ux-odata-client & npm run deploy

# Windows (PowerShell):
$env:DEBUG="ux-odata-client"; npm run deploy

# 4) If unresolved, create an SAP incident for component: CA-UX-IDE
```

**STEP**: 7 — SAP Fiori Tools CLI help
**DESCRIPTION**: Use the SAP Fiori tools CLI to list commands and view help for deploy commands. These commands show available options and subcommands for deployment tasks.
**LANGUAGE**: Bash
**CODE**:
```bash
# List all available fiori commands
npx fiori help

# Get help/details for the deploy command
npx fiori deploy help
```
--------------------------------

**TITLE**: Deployment configuration for ui5-deploy.yaml (Fiori Tools)

**INTRODUCTION**: Reference-ready, code-focused guide for defining deployment options used by the Fiori Tools ui5-deploy task. Includes sample ui5-deploy.yaml (with environment-variable references), .env usage via dotenv, examples for excludes, credentials handling for CI/CD, and ABAP/BTP-specific flags. Use these snippets directly in CI/CD pipelines or local projects.

**TAGS**: fiori-tools, ui5, deployment, yaml, ABAP, BTP, ci-cd, dotenv, mta

STEP: 1 — Create the ui5-deploy.yaml with full target/app/credentials configuration

DESCRIPTION: Create ui5-deploy.yaml in your project root. Use "env:VAR_NAME" strings to reference environment variables (dotenv supported). The sample below shows all supported properties and default values. Use this as a template; replace placeholder values and environment variable names with your own.

LANGUAGE: YAML

CODE:
```yaml
# ui5-deploy.yaml - deployment configuration for the fiori-tools ui5 deploy task
# Use "env:VAR_NAME" to reference environment variables (dotenv and .env are supported).

target:
  url: "https://my.abap.system.example.com"      # Required: <protocol>://<hostname>[:<port>]
  client: 100                                    # Optional: number (0..999) -> translated to sap-client=<client>
  params: "sap-language=EN&sap-ui-language=EN"   # Optional: additional query parameters appended to the deployment URL
  scp: false                                     # Optional: default false. Set true for ABAP Environment on BTP (use cloud platform auth)
  service: "/sap/opu/odata/UI5/ABAP_REPOSITORY_SRV" # Optional: override OData service path if exposed differently

# credentials: required for CI/CD deployments. Prefer environment variables (env:VAR).
# For local usage (not in BAS), the task uses OS secure storage instead of embedding credentials.
credentials:
  username: "env:XYZ_USER"   # Required for CI/CD: use env:VAR_NAME
  password: "env:XYZ_PASSWORD" # Required for CI/CD: use env:VAR_NAME

app:
  name: "Z_MY_FIORI_APP"      # Required: unique application name used as ABAP object and part of URL
  package: "Z_MY_PACKAGE"     # Required when creating a new app in ABAP. Not required for updates.
  transport: "ABC1234567"     # Optional: transport request ID (if package requires transports)
  description: "Deployed UI5 app" # Optional
  exclude:                    # Optional: array of regex strings (evaluated with string.match())
    - "\\.map$"               # exclude all source map files (regex as string)
    - "^test/.*"              # exclude any files under a test/ folder
  index: false                # Optional: false by default; set true to generate and deploy index.html for standalone run

# Optional deployment tool-level settings (detected/default behavior)
# mtaDirectory: nearest parent folder that contains mta.yaml; if none found, defaults to parent of the app
# destination: if configured in ui5.yaml, that value is offered as the default destination for Cloud Foundry backend
# prefix: defaults to app namespace; if none, defaults to "test". Use a unique prefix to avoid service name collisions.
prefix: "mycompany"          # Optional: used for MTA ID and service names (default: namespace or "test")
```

STEP: 2 — Reference environment variables (dotenv / .env)

DESCRIPTION: Place an .env file in the project root and reference variables in ui5-deploy.yaml using the pattern "env:VAR_NAME". The dotenv module will load the .env values at runtime. Do not commit credentials to source control.

LANGUAGE: text

CODE:
```text
# .env (project root) - sample
# Do NOT commit real credentials to source control. These are referenced via "env:VAR_NAME" strings.

XYZ_USER=my.user.name
XYZ_PASSWORD=VerySecretPassword123
MY_DESTINATION=my-cloud-destination
```

STEP: 3 — Exclude files from the deployment archive (regex examples)

DESCRIPTION: The app.exclude property is an array of regex strings. Each string is evaluated using JavaScript string.match(). Provide regex as a string (escape backslashes in YAML). Examples below show common patterns.

LANGUAGE: YAML

CODE:
```yaml
app:
  name: "Z_MY_FIORI_APP"
  exclude:
    - "\\.map$"         # exclude *.map files
    - "\\.spec\\.js$"   # exclude test spec files
    - "^test/.*"        # exclude files in test/ folder at repo root
    - "node_modules/.*" # exclude node_modules folder content
```

STEP: 4 — ABAP on BTP / scp usage and service path override

DESCRIPTION: For ABAP Environment on SAP BTP (Cloud Foundry), set target.scp: true to use SCP/OAuth instead of basic auth. If the ABAP repository OData service is exposed under a different path or alias, override target.service with the correct path.

LANGUAGE: YAML

CODE:
```yaml
target:
  url: "https://my.abap.env.btp.example.com"
  scp: true
  service: "/sap/opu/odata/UI5/ABAP_REPOSITORY_SRV"  # override only if service path differs in backend
```

STEP: 5 — CI/CD credential best practices

DESCRIPTION: For automated deployments in CI/CD pipelines, include credentials in the YAML using environment variable references (env:VAR_NAME). Avoid embedding plaintext credentials in ui5-deploy.yaml. Example below uses env references; CI/CD pipeline must set these environment variables securely.

LANGUAGE: YAML

CODE:
```yaml
credentials:
  username: "env:CI_DEPLOY_USER"   # pipeline sets CI_DEPLOY_USER secure var
  password: "env:CI_DEPLOY_PASSWORD"
```

STEP: 6 — Defaults and translations (quick reference)

DESCRIPTION: Quick mapping and defaults to use when writing code or templates.

LANGUAGE: JSON

CODE:
```json
{
  "mapping": {
    "target.client": "translates to URL param sap-client=<client>",
    "target.params": "appended as query string, e.g. sap-language=EN",
    "target.scp": "false by default; set true for ABAP on BTP (SCP/OAuth)",
    "target.service": "/sap/opu/odata/UI5/ABAP_REPOSITORY_SRV (default)",
    "app.package": "required only when creating a new ABAP app",
    "app.exclude": "array of regex strings; evaluated with string.match()",
    "app.index": "false by default; set true to deploy generated index.html"
  },
  "defaults": {
    "scp": false,
    "service": "/sap/opu/odata/UI5/ABAP_REPOSITORY_SRV",
    "index": false,
    "prefix": "namespace or 'test' if none"
  },
  "files": {
    "primary_config": "ui5-deploy.yaml",
    "optional_reference": "ui5.yaml",
    "mta_detection": "nearest parent containing mta.yaml",
    "env_file": ".env (project root)"
  }
}
```
--------------------------------

**TITLE**: Deployment of SAP Fiori Application (ABAP, Cloud Foundry, Test Mode)

**INTRODUCTION**: Instructions and actionable commands to deploy SAP Fiori/UI5 projects using fiori-tools. Covers deployments to ABAP (interactive and archive), Cloud Foundry (MTA build and deploy), and ABAP Test Mode. Includes required file references, CLI commands, and troubleshooting tips.

**TAGS**: fiori-tools, deploy, ABAP, Cloud Foundry, UI5, mta, npm, ui5-deploy.yaml, package.json

**STEP**: Pre-deployment environment check

**DESCRIPTION**: Validate saved system/destination in SAP Business Application Studio before deploying. Use the SAP Fiori environment check to detect configuration issues that commonly cause deployment failures.

**LANGUAGE**: Plaintext

**CODE**:
```text
See: ../Project-Functions/environment-check-75390cf.md
```

**STEP**: Deploy application to ABAP (interactive via Command Palette or CLI)

**DESCRIPTION**: From your project folder, deploy the application using the fiori-tools task. This can be executed from the Command Palette entry "Fiori: Deploy Application" or via npm. During deployment you will be prompted to confirm configuration and may be prompted for back-end authentication (username/password). Watch logs for deployed application URL and SAPUI5 version warnings.

**LANGUAGE**: Shell

**CODE**:
```bash
# From the project root folder
npm run deploy

# Or trigger via VS Code / SAP Business Application Studio:
# Command Palette -> Fiori: Deploy Application -> choose SAP Fiori project
```

**LANGUAGE**: Console

**CODE**:
```text
# Example generated logs after successful ABAP deployment (copy/click URL)
...info builder:custom deploy-to-abap * Done *
...info builder:custom deploy-to-abap App available at https://host:port/sap/bc/ui5_ui5/sap/app/index.html
...info builder:custom deploy-to-abap Deployment Successful.
...info builder:builder Build succeeded in 18 s
```

**STEP**: Deploy archive to ABAP (archive file or URL)

**DESCRIPTION**: Deploy a prebuilt ABAP archive (.zip) from a local path or a public URL. Optionally append deployment parameters to set destination, client, transport, package, description, and custom ui5-deploy.yaml path.

**LANGUAGE**: Shell

**CODE**:
```bash
# Deploy a local archive file
npx fiori deploy --archive-path 'somefile.zip'

# Deploy an archive available via URL (must be accessible without auth)
npx fiori deploy --archive-url 'https://someurl.com/archive.zip'
```

**LANGUAGE**: Shell

**CODE**:
```bash
# Example: deploy local archive with additional deployment parameters
npx fiori deploy \
  --archive-path 'somefile.zip' \
  -d 'destination' \
  -u 'url' \
  -l 'client' \
  -t 'transport' \
  -n 'name' \
  -p 'package' \
  -e 'description' \
  -c '/path/to/ui5-deploy.yaml'
```

**STEP**: Telemetry error handling during offline deployments

**DESCRIPTION**: If there is no Internet connection during deployment you may see a telemetry error in the console. Disable telemetry using an environment variable if you want to suppress the error.

**LANGUAGE**: Shell

**CODE**:
```bash
# Disable telemetry for the current session
export SAP_UX_FIORI_TOOLS_DISABLE_TELEMETRY=true

# On Windows (PowerShell)
$env:SAP_UX_FIORI_TOOLS_DISABLE_TELEMETRY="true"
```

**STEP**: Deploy to Cloud Foundry (MTA build and deploy)

**DESCRIPTION**: Build the multi-target archive (MTA) and deploy to Cloud Foundry. The mta.yaml must be in the folder you target when building. Use the fiori-tools deploy process (Command Palette or npm) after building the MTA.

**LANGUAGE**: Shell

**CODE**:
```bash
# 1) Ensure you are connected to Cloud Foundry (cf login or use your environment)
cf login

# 2) Navigate to the parent folder that contains the mta.yaml (if needed)
cd ..   # move to folder containing mta.yaml

# 3) Build the multitarget archive (creates the .mtar)
npm run build

# 4) Deploy using fiori-tools (Command Palette -> Fiori: Deploy Application OR)
npm run deploy
```

**STEP**: Preview deployed Cloud Foundry application (BTP cockpit - Standalone or Managed Approuter)

**DESCRIPTION**: Use SAP BTP Cockpit to locate the deployed application and open the application route(s). For CLI retrieval of HTML5 application routes, use the html5-list command. Ensure html5-plugin is installed if needed.

**LANGUAGE**: Shell

**CODE**:
```bash
# Retrieve HTML5 deployed apps for a space (replace <mta-id> with ID in mta.yaml)
cf html5-list -u -di <mta-id>-destination-service -u --runtime launchpad

# Install html5-plugin if not available (required for html5-list)
cf install-plugin -r CF-Community "html5-plugin"

# Alternative: list all HTML5 deployed applications in the Cloud Foundry space
cf html5-list
```

**STEP**: BAS note: Build MTA Project caution

**DESCRIPTION**: In SAP Business Application Studio, right-clicking the mta.yaml and selecting "Build MTA Project" creates a deployment artifact that might not be deployable via npm run deploy. Always create the multi-target archive using npm run build to ensure compatibility with the fiori-tools deploy workflow.

**LANGUAGE**: Shell

**CODE**:
```bash
# Always run this to build a deployable MTA artifact
npm run build
```

**STEP**: Deploy to ABAP System in Test Mode (simulate operations without uploading)

**DESCRIPTION**: Configure and run a test-mode deployment to simulate ABAP CRUD operations for each file. Test Mode helps validate configuration (back-end, package, transport) but does not guarantee a successful real upload. Ensure package.json contains a deploy-test script and @sap/ux-ui5-tooling >= 1.3.5.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "scripts": {
    "deploy-test": "fiori deploy --config ui5-deploy.yaml --testMode true"
  }
}
```

**LANGUAGE**: Shell

**CODE**:
```bash
# Ensure @sap/ux-ui5-tooling is up to date (minimum 1.3.5)
npm i @sap/ux-ui5-tooling@latest --save-dev

# From the project folder, run test-mode deployment
npm run deploy-test
```
--------------------------------

**TITLE**: Expose Fiori Application to Central Application Router (SAP BTP)

**INTRODUCTION**: Step-by-step actions to expose a Fiori application (deployed via an MTA) to the central application router in SAP BTP. Includes creating service keys and subaccount-level destinations for XSUAA and HTML5 Application Repository services, testing the app, and enabling Cloud Fiori Launchpad (cFLP) integration by updating manifest.json. Requires Organization Manager authorizations on the subaccount.

**TAGS**: fiori-tools, sap, btp, xsuaa, html5-repo, destinations, mta, cflp, manifest.json

**STEP**: 1 — Prepare Authentication Service (XSUAA)

**DESCRIPTION**: Locate the XSUAA service instance created by your MTA, create a service key if it does not exist, and copy the service key name for use in a destination.

- Open SAP BTP Cockpit: https://account.int.sap.eu2.hana.ondemand.com/cockpit#/globalaccount/…/subaccount/…
- Navigate: Service Instances -> Authorization & Trust Management (XSUAA).
- Find the XSUAA instance (e.g., type name pattern test-<something_unique>-uaa).
- Click the row arrow (>) to open details.
- If no service key exists, create one (three-dot menu -> Create Service Key).
- Copy the service key name (example below).

**LANGUAGE**: text

**CODE**:
```text
# Example service key name to copy:
test-<something_unique>-uaa-service-key
```

**STEP**: 2 — Expose Authentication Service (create destination)

**DESCRIPTION**: Create a subaccount destination pointing to the XSUAA service instance so the central application router can use it. Add properties ServiceKeyName and sap.cloud.service.

- Open: Connectivity -> Destinations.
- Click New Destination -> Select "Service Instance".
- Service Instance: select your XSUAA instance (e.g., test-<something_unique>-uaa).
- Name: choose meaningful name (e.g., test-<something_unique>-uaa).
- Click Next.
- Add New Property: key = ServiceKeyName, value = <copied service key name from STEP 1>.
- Add New Property: key = sap.cloud.service, value = test-<something_unique>.
- Save.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "Name": "test-<something_unique>-uaa",
  "Type": "ServiceInstance",
  "ServiceInstance": "test-<something_unique>-uaa",
  "Properties": {
    "ServiceKeyName": "test-<something_unique>-uaa-service-key",
    "sap.cloud.service": "test-<something_unique>"
  }
}
```

**STEP**: 3 — Prepare HTML5 Repository Service (app-host)

**DESCRIPTION**: Locate the HTML5 Application Repository service instance created by your MTA, create a service key if needed, and copy the service key name for the destination.

- Open: Instances and Subscriptions -> HTML5 Application Repository.
- Find the repository instance (e.g., type pattern test-<something_unique>, Plan = app-host).
- Click the row arrow (>) to open details.
- If no service key exists, create one (three-dot menu -> Create Service Key).
- Copy the service key name (example below).

**LANGUAGE**: text

**CODE**:
```text
# Example HTML5 repo service key name to copy:
test-<something_unique>-deployer-<something_unique>-html5-repo-host-credentials
```

**STEP**: 4 — Expose HTML5 Repository Service (create destination)

**DESCRIPTION**: Create a subaccount destination pointing to the HTML5 Application Repository service instance. Ensure sap.cloud.service matches the value used for the XSUAA destination.

- Open: Connectivity -> Destinations.
- Click New Destination -> Select "Service Instance".
- Service Instance: select your HTML5 repo instance (e.g., test-<something_unique>-html5-repo-host).
- Name: choose meaningful name (e.g., test-<something_unique>-html5-repo-host).
- Click Next.
- Add New Property: key = ServiceKeyName, value = <copied service key name from STEP 3>.
- Modify suggested property sap.cloud.service to value = test-<something_unique> (same as XSUAA destination).
- Save.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "Name": "test-<something_unique>-html5-repo-host",
  "Type": "ServiceInstance",
  "ServiceInstance": "test-<something_unique>-html5-repo-host",
  "Properties": {
    "ServiceKeyName": "test-<something_unique>-deployer-<something_unique>-html5-repo-host-credentials",
    "sap.cloud.service": "test-<something_unique>"
  }
}
```

**STEP**: 5 — Test Application in HTML5 Repository

**DESCRIPTION**: Verify your application is visible in the HTML5 Application Repository.

- Open: HTML5 Applications (in Cockpit).
- Search for your deployed app (e.g., test-<something_unique>).
- Click the application (e.g., test<something_unique>ztravel) to open details and verify deployment.

**LANGUAGE**: text

**CODE**:
```text
# UI action:
Open Cockpit -> HTML5 Applications -> search "test-<something_unique>" -> click app entry
# Verify entries: application id, version, deployed host, and logs
```

**STEP**: 6 — Enable Integration into Cloud Fiori Launchpad (cFLP)

**DESCRIPTION**: Add sap.cloud settings to the application manifest.json root to mark the app as public and associate it with the sap.cloud service used in destinations. Rebuild and redeploy your MTA so the changes take effect in the central router and HTML5 repo.

- File: <your-app-root>/webapp/manifest.json (or root manifest.json for the UI module)
- Add the sap.cloud block at the root, set public true and service to the sap.cloud.service value used in destinations.
- Rebuild and deploy your MTA (example commands provided).

Warning: If this block is not added and the app is enabled in cFLP, it may fail to load when routed by the central router.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.cloud": {
    "public": true,
    "service": "test-<something_unique>"
  }
}
```

**LANGUAGE**: Shell

**CODE**:
```sh
# Example rebuild and deploy (adjust to your environment)
# Build the MTA archive
mbt build

# Deploy the generated .mtar to Cloud Foundry subaccount
cf deploy mta_archives/<your_mta>.mtar
```

**STEP**: Notes & References

**DESCRIPTION**: Additional technical notes and image references.

**LANGUAGE**: text

**CODE**:
```text
- Requires Organization Manager authorizations to create subaccount-level destinations.
- Image references used in original documentation:
  images/FIORI_TOOLS_SERVICE_INSTANCE_280d554.png
  images/FIORI_TOOLS_DESTINATION_8ce6980.png
  images/FIORI_TOOLS_HTML5_1862c54.png
- SAP BTP Cockpit: https://account.int.sap.eu2.hana.ondemand.com/cockpit
```
--------------------------------

**TITLE**: Generate ABAP Deployment Configuration (ui5-deploy.yaml)

**INTRODUCTION**: Create and run a deployment configuration that deploys an SAP Fiori / SAPUI5 app to an ABAP repository using the SAPUI5 Repository OData Service. This guide shows prerequisites, how to generate the config using VS Code / CLI, details for interactive prompts, transport handling, and example ui5-deploy.yaml files (including extra params).

**TAGS**: ABAP, SAPUI5, ui5-deploy.yaml, deployment, SAP Fiori, transport, OAuth2, basic-auth

**STEP**: 1 — ABAP Prerequisites and Limitations

**DESCRIPTION**: Ensure the ABAP backend supports SAPUI5 repository deployment and you have required authorization. Know authentication and constraints.

**LANGUAGE**: text

**CODE**:
```text
Prerequisites:
- SAP component SAP_UI 7.53 or higher installed on the target SAP system.
  * For systems below 7.53, use manual upload instead:
    https://help.sap.com/viewer/0ce0b8c56fa74dd897fffda8407e8272/7.5.17/en-US/a560bd6ed4654fd1b338df065d331872.html
- The SAPUI5 Repository OData service must be activated and accessible:
  https://help.sap.com/viewer/68bf513362174d54b58cddec28794093/7.52.5/en-US/bb2bfe50645c741ae10000000a423f68.html
- User must have S_DEVELOP authorization for repository operations.

Authentication & limitations:
- Basic authentication (username/password) is supported for all backends.
- OAuth2 is supported for ABAP systems on SAP Business Technology Platform.
- The tool does not create ABAP transports unless specifically requested by the prompt flow.
- If a target package requires a transport, you must provide or create one via the prompts.
```

**STEP**: 2 — Generate Deployment Configuration (VS Code or CLI)

**DESCRIPTION**: Launch the deployment configuration wizard or run the CLI command in the Fiori project root to generate ui5-deploy.yaml and update package.json with a deploy script.

**LANGUAGE**: Shell

**CODE**:
```bash
# VS Code:
# Open Command Palette and run:
Fiori: Add Deployment Configuration

# CLI (run in your SAP Fiori project folder):
npx fiori add deploy-config

# After the wizard runs the tool updates package.json so you can run:
npm run deploy
# To execute the deployment using the generated file:
ui5 build --config ui5-deploy.yaml
```

**STEP**: 3 — Prompt Options & Required Values (Action-Oriented)

**DESCRIPTION**: When the wizard runs, fill these fields. Use exactly these values/formats in the generated ui5-deploy.yaml.

**LANGUAGE**: text

**CODE**:
```text
Prompt fields and expected values:
- Please choose the target:
  * ABAP

- Select Target System:
  * Choose a saved SAP system (SAP Business Application Studio / VS Code with systems) or enter Target System URL (VS Code only).

- Destination (SAP Business Application Studio only):
  * Choose a destination from the provided list.

- Enter client:
  * Add a new client number or keep the default.

- SAPUI5 ABAP Repository (app name):
  * Name for the deployed repository object, e.g. /TEST/SAMPLE_APP

- Deployment Description:
  * Optional description string for the deployed app.

- Package:
  * Valid ABAP package name, e.g. /TEST/UPLOAD

- How do you want to enter Transport Request:
  * Enter manually — provide transport ID manually.
  * Choose from existing — fetches a selectable list from target system (if retrievable).
  * Create new — attempts to create a new transport; created transport description:
    "Created by SAP Fiori tools for ABAP repository <repository name>"
  * Create during deployment — creates transport on first deployment; created transport description:
    "Created by SAP Open UX Tools for ABAP repository <repository name>"
    Note: If creation fails, deployment fails when using Create during deployment.

- Transport Request:
  * When prompted, choose a transport from the list or enter a transport ID manually.

SSL note:
- If SSL certificate errors prevent connection (expired/wrong host/unverified signature), you can temporarily set:
  NODE_TLS_REJECT_UNAUTHORIZED=0
  However, fix the certificate issue in production environments rather than ignoring it.
```

**STEP**: 4 — Example ui5-deploy.yaml (ABAP) — Basic

**DESCRIPTION**: Copy this YAML into ui5-deploy.yaml in the project root. It deploys the app from dist (built by ui5 build) to the specified ABAP system, reads credentials from environment variables, and excludes test/internal files.

**LANGUAGE**: YAML

**CODE**:
```yaml
# File: ui5-deploy.yaml
builder:
  customTasks:
  - name: deploy-to-abap
    afterTask: replaceVersion
    configuration:
      target:
        url: https://XYZ.sap-system.corp:44311
        client: 200
        auth: basic
      credentials:
        username: env:XYZ_USER
        password: env:XYZ_PASSWORD
      app:
        name: /TEST/SAMPLE_APP
        package: /TEST/UPLOAD
        transport: XYZQ300582
      exclude:
      - .*\.test.js
      - internal.md
```

**STEP**: 5 — Example ui5-deploy.yaml (ABAP) — Additional Params

**DESCRIPTION**: Add additional HTTP params (e.g., sap-language). Place under target.params.

**LANGUAGE**: YAML

**CODE**:
```yaml
# File: ui5-deploy.yaml (with additional params)
builder:
  customTasks:
  - name: deploy-to-abap
    afterTask: replaceVersion
    configuration:
      target:
        url: https://XYZ.sap-system.corp:44311
        client: 200
        auth: basic
        params:
          sap-language: en
      credentials:
        username: env:XYZ_USER
        password: env:XYZ_PASSWORD
      app:
        name: /TEST/SAMPLE_APP
        package: /TEST/UPLOAD
        transport: XYZQ300582
      exclude:
      - .*\.test.js
      - internal.md
```

**STEP**: 6 — Deploy Execution

**DESCRIPTION**: Build and deploy using the generated config. The ui5 build command uses ui5-deploy.yaml to run the deploy-to-abap task.

**LANGUAGE**: Shell

**CODE**:
```bash
# Build artifacts (dist) and run custom deploy task defined in ui5-deploy.yaml:
ui5 build --config ui5-deploy.yaml

# Or use npm script added by the wizard:
npm run deploy
```

**STEP**: 7 — Operational Notes & Troubleshooting

**DESCRIPTION**: Keep these operational constraints and troubleshooting tips in mind.

**LANGUAGE**: text

**CODE**:
```text
- The ui5-deploy.yaml is generated based on your answers and the existing ui5.yaml used for preview.
- The generated package.json includes an npm run deploy script. Confirm package.json changes after wizard.
- If transports are required by the target package and you chose an option that doesn't create a transport, the deployment will fail.
- For OAuth2 on BTP ABAP systems, select appropriate auth option during wizard; otherwise use basic auth with env variables.
- Environment variables for credentials:
  * Example: export XYZ_USER=youruser
             export XYZ_PASSWORD=yourpassword
- If the transport list cannot be retrieved from the target system, choose Enter manually or Create new (which will try to create a transport).
```
--------------------------------

**TITLE**: Generate Deployment Configuration for Cloud Foundry (SAP Fiori / fiori-tools)

**INTRODUCTION**: Step-by-step, code-focused instructions to prepare prerequisites and generate an MTA (mta.yaml) deployment configuration for deploying SAP Fiori applications to Cloud Foundry using fiori-tools. Includes installation commands, CLI usage, prompts to expect, build & deploy commands, and the resulting project layout.

**TAGS**: fiori-tools, cloud-foundry, mta, cf-cli, multiapps, sap-business-application-studio, deployment

**STEP**: 1 — Install MTA (Multi-Target Application) Tool

**DESCRIPTION**: Install the MTA tool globally so the `mta` executable is available on PATH. Use npm to install, and if you encounter permission errors on macOS, fix ownership. On Windows, ensure GNU Make (4.2.1) is available when building MTA archives.

**LANGUAGE**: bash

**CODE**:
```bash
# Install MTA globally
npm install -g mta

# macOS permission fix (if you see permission denied errors during install)
sudo chown -R $(whoami) FOLDER-NAME

# Windows note:
# To build an MTA archive in Windows, install GNU Make 4.2.1 per
# Cloud MTA Build Tool instructions: https://sap.github.io/cloud-mta-build-tool/makefile
```

**STEP**: 2 — Install Cloud Foundry CLI and login

**DESCRIPTION**: Install the CF CLI (official Cloud Foundry client). Then authenticate to your Cloud Foundry endpoint. On Windows, set CF_HOME (user-level environment variable) so CF CLI can persist configuration.

**LANGUAGE**: bash / powershell

**CODE**:
```bash
# Use platform installer per Cloud Foundry CLI docs (example binary install is platform-specific)
# After installing, login to Cloud Foundry (example SAP BTP public CF endpoint)
cf login -a https://api.cf.sap.hana.ondemand.com

# Example automated Windows step to set CF_HOME (PowerShell or CMD)
# Create a folder for CF_HOME and set it as a user environment variable:
mkdir C:\cf_home
setx CF_HOME "C:\cf_home"
# Then close open command windows and reopen to pick up CF_HOME
```

**STEP**: 3 — Install MultiApps Cloud Foundry CLI plugin

**DESCRIPTION**: Install the Multi-Apps plugin required to perform MTA operations (deploy, remove, view) against Cloud Foundry.

**LANGUAGE**: bash

**CODE**:
```bash
# Install the Multi-Apps plugin from CF-Community repo
cf install-plugin -r CF-Community "multiapps"
```

**STEP**: 4 — Confirm backend destination and user authorizations

**DESCRIPTION**: Ensure a correctly configured destination to the backend exists and that your Cloud Foundry user has deployment authorization. Instance-based destinations defined in an existing `mta.yaml` will appear in SAP Business Application Studio with the label "Instance Based Destination".

**LANGUAGE**: bash

**CODE**:
```bash
# Example: list destinations (platform-specific tooling may apply)
# Confirm CF authentication and org/space target
cf target
```

**STEP**: 5 — Launch the fiori-tools deployment-config generator

**DESCRIPTION**: Generate or update MTA deployment configuration using the fiori-tools wizard. You can launch from the VS Code / SAP Business Application Studio Command Palette or from the command line using npx. During prompts choose Cloud Foundry as the target and enter the destination name when requested. If no `mta.yaml` exists, you will be offered to create one.

**LANGUAGE**: bash / text

**CODE**:
```bash
# From the project folder, run the generator via npx:
npx fiori add deploy-config

# VS Code / SAP BAS alternative:
# Open Command Palette -> "Fiori: Add Deployment Configuration" and select your SAP Fiori project.

# Example prompts you will see (interactive):
#   Choose Target:    -> Cloud Foundry
#   Destination Name: -> <enter or select destination name>
```

**STEP**: 6 — Build and deploy the MTA archive

**DESCRIPTION**: After the generator updates/creates the `mta.yaml` and related files, change to the MTA project directory and run the npm scripts to build a deployable MTA archive and deploy it to Cloud Foundry.

**LANGUAGE**: bash

**CODE**:
```bash
# From the MTA directory that contains the application and mta.yaml
npm run build    # builds the deployable mta archive
npm run deploy   # deploys the built MTA archive to Cloud Foundry
```

**STEP**: 7 — Artifacts and configuration created by the generator

**DESCRIPTION**: The generator creates/updates `mta.yaml` and application artifacts. Typical resulting directory layout after running the deployment-config generator:

**LANGUAGE**: text

**CODE**:
```
mta_directory
|_ application_directory
   |_ ...
   |_ webapp
      |_ ...
      |_ manifest.json
   |_ ui5-deploy.yaml
   |_ ui5.yaml
   |_ xs-app.json
...
|_ package.json
|_ mta.yaml
|_ xs-security.json
```

**STEP**: 8 — Create MTA project and modules in SAP Business Application Studio (optional)

**DESCRIPTION**: If you do not have an MTA file in your dev space, use SAP Business Application Studio generators to create a Basic Multi-Target Application and add modules (approuter, SAP Fiori app). After adding an approuter or Fiori module, the `mta.yaml` is updated and the deployment configuration is enabled by default.

**LANGUAGE**: text

**CODE**:
```
# In SAP Business Application Studio:
1) File -> New Project from Template
2) Select "Basic Multitarget Application"
3) Enter project name -> Finish

# Add App Router:
- Right-click generated mta.yaml -> Create MTA Module from Template
- Select "Approuter Configuration" -> Next -> fill details
# The mta.yaml will be updated with destination-content module

# Add SAP Fiori application:
- Right-click mta.yaml -> Create MTA Module from Template
- Choose "SAP Fiori application generator" and provide application details
# Deployment configuration is added to the existing mta.yaml by default
```
--------------------------------

**TITLE**: Add SAP Fiori Launchpad Configuration (manifest.json inbound)

**INTRODUCTION**: Instructions and code examples to add SAP Fiori Launchpad inbound configuration to an SAPUI5 application's manifest.json. Use the VS Code command, the @sap-ux/create CLI, or manual edits. The inbound entry defines semantic object, action, title, subtitle and signature required for integration with the SAP Fiori launchpad.

**TAGS**: sap-fiori, fiori-launchpad, manifest.json, sapui5, inbound, @sap-ux/create, cli, vscode

**STEP**: 1 — Quick: Use VS Code Command "Fiori: Add Fiori Launchpad Configuration"

**DESCRIPTION**: Open the Command Palette (F1 / Ctrl+Shift+P) in VS Code and run "Fiori: Add Fiori Launchpad Configuration". The wizard will prompt for Semantic Object, Action, Title, Subtitle (optional) and will update your webapp/manifest.json by adding the required inbound entry under sap.app -> crossNavigation -> inbounds.

**LANGUAGE**: none

**CODE**:
```text
VS Code Command Palette:
  F1 -> "Fiori: Add Fiori Launchpad Configuration"

Wizard prompts:
  - Semantic Object (unique name)
  - Action (e.g. "display")
  - Title (tile/application title)
  - Subtitle (optional)
Wizard will update: ./webapp/manifest.json (sap.app.crossNavigation.inbounds)
```

**STEP**: 2 — Manual: Example manifest.json inbound entry (file path)

**DESCRIPTION**: If you prefer manual edits, add an inbound configuration to your webapp/manifest.json under "sap.app.crossNavigation.inbounds". Use a unique key for the inbound (commonly "SemanticObject-action") and include signature.parameters (empty or list expected navigation parameters).

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.app": {
    "id": "my.app.id",
    "title": "My App Title",
    "crossNavigation": {
      "inbounds": {
        "MyApp-display": {
          "semanticObject": "MyApp",
          "action": "display",
          "title": "My App Title",
          "subTitle": "Optional subtitle",
          "signature": {
            "parameters": {
              /* Example parameter structure:
              "EntityId": {
                "required": true
              }
              */
            }
          }
        }
      }
    }
  }
}
```

**STEP**: 3 — CLI: Add Fiori Launchpad Configuration using @sap-ux/create

**DESCRIPTION**: Use the open-ux-tools create package to add launchpad configuration from the terminal. The CLI can be used interactively or with flags (interactive shown here). It updates the specified manifest.json file.

**LANGUAGE**: Bash

**CODE**:
```bash
# Interactive (recommended)
npx @sap-ux/create

# Or (example) run a specific action if available in your version:
# npx @sap-ux/create add-fiori-launchpad-configuration --manifest ./webapp/manifest.json \
#   --semanticObject MyApp --action display --title "My App Title" --subTitle "Optional subtitle"
```

**STEP**: 4 — Field definitions and placement

**DESCRIPTION**: Use these fields exactly as shown when creating or validating the inbound entry. They determine how the app is addressed by the FLP and how tiles/navigation appear.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "inboundKey": {
    "semanticObject": "name (unique)",
    "action": "display",
    "title": "Title of an application",
    "subTitle": "Subtitle to be used by the tile (optional)",
    "signature": {
      "parameters": {
        /* navigation parameters and their required flags */
      }
    }
  }
}
```

**STEP**: 5 — File locations and deployment notes

**DESCRIPTION**: Typical manifest path and deployment context reminders:
- Local app manifest: ./webapp/manifest.json
- For Cloud Foundry or ABAP deployments, ensure inbound exists before deploying to the SAP Fiori launchpad runtime and that tile/catalog/target mapping is done in the FLP configuration (CF/ABAP specific steps are outside this file edit).

**LANGUAGE**: none

**CODE**:
```text
Manifest file to update:
  ./webapp/manifest.json

Deployment notes:
  - Add inbound before deploying to Cloud Foundry or ABAP FLP environments.
  - FLP catalog/tile/target configuration is handled in the launchpad admin (Cloud Foundry / ABAP) after manifest.inbound is present.
```
--------------------------------

**TITLE**: SAPUI5 / Fiori App Security Checklist and Code Examples for Deployment

**INTRODUCTION**: Practical, code-focused checklist and ready-to-use snippets to harden SAPUI5/Fiori applications before deployment. Includes references, HTTP header configurations, Content Security Policy (CSP) examples, input sanitization patterns, and commands for basic dependency and application security scans.

**TAGS**: fiori-tools, sapui5, security, deployment, csp, headers, sanitization, scan

**STEP**: 1 - Read SAPUI5 "Securing Apps" guidance

**DESCRIPTION**: Start by reviewing the official SAPUI5 guidance on securing apps. This document contains SAP-specific recommendations and best practices you should follow in addition to the steps below.

**LANGUAGE**: text/markdown

**CODE**:
```text
Official SAPUI5 guidance:
https://ui5.sap.com/sdk/#/topic/91f3d8706f4d1014b6dd926db0e91070
```

**STEP**: 2 - Add and enforce HTTP security headers (server-side)

**DESCRIPTION**: Configure your web server to emit standard security headers. Use server configuration (Nginx/Apache) rather than client-side meta tags when possible to ensure headers are applied to all responses.

**LANGUAGE**: Nginx

**CODE**:
```nginx
# /etc/nginx/conf.d/your-app.conf
server {
    listen 443 ssl;
    server_name your-app.example.com;

    # Enforce HSTS
    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;

    # Prevent MIME type sniffing
    add_header X-Content-Type-Options "nosniff" always;

    # Prevent clickjacking
    add_header X-Frame-Options "DENY" always;

    # Basic Referrer Policy
    add_header Referrer-Policy "no-referrer-when-downgrade" always;

    # Recommended: Content Security Policy (see next step)
    add_header Content-Security-Policy "default-src 'self'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https://sapui5.hana.ondemand.com; style-src 'self' 'unsafe-inline'; connect-src 'self'; img-src 'self' data:; font-src 'self' data:;" always;

    location / {
        root /var/www/your-app;
        try_files $uri $uri/ /index.html;
    }
}
```

**LANGUAGE**: Apache

**CODE**:
```apache
# /etc/apache2/sites-available/your-app.conf
<VirtualHost *:443>
    ServerName your-app.example.com
    DocumentRoot /var/www/your-app

    Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
    Header always set X-Content-Type-Options "nosniff"
    Header always set X-Frame-Options "DENY"
    Header always set Referrer-Policy "no-referrer-when-downgrade"
    Header always set Content-Security-Policy "default-src 'self'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https://sapui5.hana.ondemand.com; style-src 'self' 'unsafe-inline'; connect-src 'self'; img-src 'self' data:; font-src 'self' data:;"

    <Directory /var/www/your-app>
        Options Indexes FollowSymLinks
        AllowOverride None
        Require all granted
    </Directory>
</VirtualHost>
```

**STEP**: 3 - Add CSP (Content Security Policy) in index.html as a fallback / during development

**DESCRIPTION**: Use a strict CSP to limit approved sources for scripts, styles, images, and connections. Prefer server-set CSP headers for production; use the meta tag during development or where you cannot set headers.

**LANGUAGE**: HTML

**CODE**:
```html
<!-- webapp/index.html -->
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <!-- Example CSP meta-tag (prefer a header in production) -->
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; 
                 script-src 'self' https://sapui5.hana.ondemand.com; 
                 style-src 'self' 'unsafe-inline'; 
                 connect-src 'self' https://api.example.com; 
                 img-src 'self' data:; 
                 font-src 'self' data:;">
  <title>My SAPUI5 App</title>
</head>
<body>
  <div id="content"></div>
  <script src="resources/sap-ui-core.js"></script>
  <script src="Component.js"></script>
</body>
</html>
```

**STEP**: 4 - Prevent clickjacking via CSP frame-ancestors

**DESCRIPTION**: Use the CSP frame-ancestors directive to control who can embed your app in an iframe. This is more flexible and preferred over X-Frame-Options where supported.

**LANGUAGE**: Nginx / HTML

**CODE**:
```nginx
# Add to server block (preferred)
add_header Content-Security-Policy "frame-ancestors 'none';" always;
```

```html
<!-- Or as a meta tag (development fallback) -->
<meta http-equiv="Content-Security-Policy" content="frame-ancestors 'none';">
```

**STEP**: 5 - Sanitize and escape user input in UI5 controllers

**DESCRIPTION**: Always sanitize user-generated content before inserting into the DOM. Use a proven library (DOMPurify) for HTML sanitization. Below is an example of integrating DOMPurify in a SAPUI5 controller before binding or injecting HTML.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// webapp/controller/MyController.controller.js
sap.ui.define([
  "sap/ui/core/mvc/Controller",
  // If using DOMPurify as an npm package, bundle it with your app OR include via script tag
  // e.g., <script src="libs/dompurify.min.js"></script> in index.html
], function (Controller) {
  "use strict";

  return Controller.extend("my.app.controller.MyController", {
    onInit: function () {
      // Example: sanitize HTML string before setting to control
      var unsafeHtml = "<img src=x onerror=alert(1)>Hello <b>user</b>";
      // Assume DOMPurify is available globally as DOMPurify
      var safeHtml = DOMPurify.sanitize(unsafeHtml, {
        ALLOWED_TAGS: ['b','i','em','strong','a','p','ul','li','ol'],
        ALLOWED_ATTR: ['href', 'title', 'target']
      });
      this.byId("myRichText").setHtmlText(safeHtml);
    }
  });
});
```

**STEP**: 6 - Avoid inline scripts/styles and use nonce/hash CSP if necessary

**DESCRIPTION**: Remove inline JavaScript and styles from HTML. If inline scripts are necessary, use CSP with nonces or hashes and apply matching nonce attributes to script/style tags.

**LANGUAGE**: HTML

**CODE**:
```html
<!-- Example using script hash / nonce is preferred but requires server to generate the nonce -->
<!-- Example nonce usage (server must set header: Content-Security-Policy: script-src 'nonce-12345') -->
<script nonce="12345">
  // Minimal inline code; avoid when possible
</script>
```

**STEP**: 7 - Scan dependencies and application code for vulnerabilities

**DESCRIPTION**: Run automated scans on dependencies and the running web app (dynamic scan). Use npm audit, Snyk, and OWASP ZAP/other dynamic scanners.

**LANGUAGE**: Bash

**CODE**:
```bash
# Check Node/npm dependencies
npm audit --audit-level=high

# Using Snyk (requires account and auth)
# Install: npm i -g snyk
snyk test

# Basic dynamic scan with OWASP ZAP (CLI example; requires ZAP installed)
# Start ZAP in daemon mode then run a quick scan against your running app:
zap.sh -daemon -port 8090 -config api.disablekey=true
# Then use the ZAP spider and active scan APIs or the zap-cli (example)
# Install zap-cli: pip install zapcli
zap-cli quick-scan --self-contained --start-options "-daemon -port 8090" https://your-app.example.com
```

**STEP**: 8 - Enforce HTTPS and redirect HTTP -> HTTPS

**DESCRIPTION**: Ensure all traffic uses TLS. Redirect plain HTTP to HTTPS on the server.

**LANGUAGE**: Nginx

**CODE**:
```nginx
server {
    listen 80;
    server_name your-app.example.com;
    return 301 https://$host$request_uri;
}
```

**STEP**: 9 - Additional runtime protections and best practices

**DESCRIPTION**: Follow these operational best practices:
- Minimize third-party libraries; keep them updated.
- Run automated tests and regression scans after dependency updates.
- Remove or secure debug endpoints and diagnostic pages.
- Use least-privilege CORS policies; allow only required origins.

**LANGUAGE**: text/markdown

**CODE**:
```text
Operational checklist:
- Limit allowed CORS origins (server-side)
- Remove debug/console logs in production builds
- Use strict CSP and test for functionality breakage
- Keep SAPUI5 libs updated to latest security patch
- Integrate dependency scanning into CI (npm audit / snyk)
- Include dynamic scanning in staging before production release
```


--------------------------------

**TITLE**: Undeploy an Application from ABAP and Cloud Foundry (SAP Fiori tools)

**INTRODUCTION**: This document provides concise, actionable commands and file edits to undeploy SAP Fiori applications using SAP Fiori tools. It covers undeployment from ABAP systems (from inside a project and from outside a project using VS Code or SAP Business Application Studio) and undeployment from Cloud Foundry (CF) on SAP Business Technology Platform.

**TAGS**: fiori-tools, ABAP, CloudFoundry, CF, SAP, undeploy, ui5-tooling, npm, ui5-deploy.yaml

STEP: Undeploy from ABAP (inside project)
DESCRIPTION: Run the undeploy script from within your project directory. Confirm the prompt by entering Y when asked to proceed. The undeploy script uses the configuration in ui5-deploy.yaml in your project root.
LANGUAGE: Bash
CODE:
```bash
# From your project root
npm run undeploy

# When prompted, review the configuration and press:
# Y  (Yes)  to confirm undeployment
```

STEP: Ensure undeploy script exists in package.json (install/update ui5 tooling)
DESCRIPTION: If package.json does not contain an undeploy script, update or install @sap/ux-ui5-tooling and add the undeploy script. First install/update the tooling as a dev dependency.
LANGUAGE: Bash
CODE:
```bash
# Install or update the UI5 tooling package
npm install --save-dev @sap/ux-ui5-tooling@latest
```

STEP: Add undeploy script to package.json
DESCRIPTION: Add an "undeploy" npm script that calls fiori undeploy with your ui5-deploy.yaml configuration. Place this in your project's package.json "scripts" section.
LANGUAGE: JSON
CODE:
```json
{
  "scripts": {
    "undeploy": "fiori undeploy --config ui5-deploy.yaml"
  }
}
```

STEP: Undeploy from ABAP (from outside a specific project — VS Code)
DESCRIPTION: Run the npx command from any location, replacing placeholders with values from your project's ui5-deploy.yaml (or your environment). Use --noConfig to skip using a local config file.
LANGUAGE: Bash
CODE:
```bash
npx @sap/ux-ui5-tooling fiori undeploy \
  --url <Target_ABAP_system_url> \
  --name <Application_name> \
  --transport <Transport_request> \
  --client <Client_number> \
  --noConfig
```

STEP: Undeploy from ABAP (from outside a specific project — SAP Business Application Studio)
DESCRIPTION: In SAP Business Application Studio, use the destination name instead of a direct URL. Replace placeholders with correct values from ui5-deploy.yaml.
LANGUAGE: Bash
CODE:
```bash
npx @sap/ux-ui5-tooling fiori undeploy \
  --destination <Destination_name> \
  --name <Application_name> \
  --transport <Transport_request> \
  --client <Client_number> \
  --noConfig
```

STEP: Locate configuration values (ui5-deploy.yaml)
DESCRIPTION: When running any undeploy command, ensure the values for url/destination, name, transport, and client match those in your project's ui5-deploy.yaml file (typically at the project root). Use that file to determine correct placeholders.
LANGUAGE: YAML
CODE:
```yaml
# Example reference: open <project-root>/ui5-deploy.yaml to find target fields
# (Exact file contents vary per project and deployment)
```

STEP: Undeploy from Cloud Foundry (login)
DESCRIPTION: Authenticate to the Cloud Foundry API endpoint for your platform before undeploying.
LANGUAGE: Bash
CODE:
```bash
# Log in to Cloud Foundry (replace -a value with your CF API endpoint if needed)
cf login -a
# For SAP BTP CF, example: cf login -a https://api.cf.sap.hana.ondemand.com
```

STEP: Undeploy from Cloud Foundry (remove app and services)
DESCRIPTION: Undeploy the MTA application by its mta-id and delete associated services and service keys.
LANGUAGE: Bash
CODE:
```bash
cf undeploy <mta-id> --delete-services --delete-service-keys
```
--------------------------------

**TITLE**: Form Actions (UI.DataFieldForAction, UI.DataFieldForIntentBasedNavigation, UI.DataFieldForActionGroup) — Fiori Tools

**INTRODUCTION**: This document provides practical code examples for adding, grouping, and moving form actions used by SAP Fiori elements (object page / form sections). It covers annotation-based internal actions (UI.DataFieldForAction), external navigation actions (UI.DataFieldForIntentBasedNavigation), grouping into menus (UI.DataFieldForActionGroup), and manifest-based actions. It also lists movement rules and editor restrictions that must be respected by code-generation tools.

**TAGS**: fiori-tools, annotations, UI.DataFieldForAction, UI.DataFieldForIntentBasedNavigation, UI.DataFieldForActionGroup, manifest, object-page, form-actions

STEP: 1 — Add an internal (in-app) form action using UI.DataFieldForAction

DESCRIPTION: Use UI.DataFieldForAction to add a button that triggers an in-application action (server-call or client action). Form actions do not use column-only properties such as Importance or RequiresContext — these are not relevant for form actions. Example formats shown: OData XML annotations and CDS annotations.

LANGUAGE: XML

CODE:
```xml
<!-- File: annotations.xml (OData V4 annotations) -->
<Annotations Target="MyService.MyEntityType">
  <Annotation Term="UI.FieldGroup" Qualifier="MainFormActions">
    <Record Type="UI.FieldGroupType">
      <PropertyValue Property="Label" String="Actions"/>
      <PropertyValue Property="Data">
        <Collection>
          <!-- Internal application action -->
          <Record Type="UI.DataFieldForAction">
            <PropertyValue Property="Action" String="Approve"/>         <!-- backend/action name -->
            <PropertyValue Property="Label" String="Approve"/>          <!-- visible button text -->
            <!-- Do not set Importance or RequiresContext here for form actions -->
          </Record>
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

LANGUAGE: CDS

CODE:
```cds
// File: service.cds (annotations in CDS)
entity SalesOrder {
  key ID : UUID;
  // ...
}

annotate SalesOrder with @(
  UI.FieldGroup#MainFormActions : [
    @Record {
      Label : 'Actions';
      Data  : [
        @Record {
          // Internal application action
          $Type  : 'UI.DataFieldForAction';
          Action : 'Approve';
          Label  : 'Approve';
        }
      ]
    }
  ]
);
```

STEP: 2 — Add an external navigation action using UI.DataFieldForIntentBasedNavigation

DESCRIPTION: Use UI.DataFieldForIntentBasedNavigation for navigation to other Fiori apps (intent-based navigation). These actions are external and typically belong in page header or form sections. Provide OData XML and CDS examples.

LANGUAGE: XML

CODE:
```xml
<!-- File: annotations.xml -->
<Annotations Target="MyService.MyEntityType">
  <Annotation Term="UI.FieldGroup" Qualifier="NavFormActions">
    <Record Type="UI.FieldGroupType">
      <PropertyValue Property="Label" String="Navigation"/>
      <PropertyValue Property="Data">
        <Collection>
          <!-- External navigation action (intent-based) -->
          <Record Type="UI.DataFieldForIntentBasedNavigation">
            <PropertyValue Property="SemanticObject" String="PurchaseOrder"/>
            <PropertyValue Property="Action" String="displayFactSheet"/>
            <PropertyValue Property="Label" String="Open Purchase Order"/>
          </Record>
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

LANGUAGE: CDS

CODE:
```cds
// File: service.cds
annotate SalesOrder with @(
  UI.FieldGroup#NavFormActions : [
    @Record {
      Label : 'Navigation';
      Data  : [
        @Record {
          $Type         : 'UI.DataFieldForIntentBasedNavigation';
          SemanticObject: 'PurchaseOrder';
          Action        : 'displayFactSheet';
          Label         : 'Open Purchase Order';
        }
      ]
    }
  ]
);
```

STEP: 3 — Group annotation-based actions into an action menu using UI.DataFieldForActionGroup

DESCRIPTION: Create an action menu that contains multiple annotation-based actions. Note: actions with criticality cannot be moved into action menus because menus do not support criticality.

LANGUAGE: XML

CODE:
```xml
<!-- File: annotations.xml -->
<Annotations Target="MyService.MyEntityType">
  <Annotation Term="UI.FieldGroup" Qualifier="GroupedActions">
    <Record Type="UI.FieldGroupType">
      <PropertyValue Property="Label" String="More Actions"/>
      <PropertyValue Property="Data">
        <Collection>
          <!-- Action group (menu) -->
          <Record Type="UI.DataFieldForActionGroup">
            <PropertyValue Property="Label" String="More Actions"/>
            <PropertyValue Property="Data">
              <Collection>
                <Record Type="UI.DataFieldForAction">
                  <PropertyValue Property="Action" String="Approve"/>
                  <PropertyValue Property="Label" String="Approve"/>
                </Record>
                <Record Type="UI.DataFieldForAction">
                  <PropertyValue Property="Action" String="Reject"/>
                  <PropertyValue Property="Label" String="Reject"/>
                </Record>
                <!-- Avoid adding actions that contain criticality to the menu -->
              </Collection>
            </PropertyValue>
          </Record>
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

LANGUAGE: CDS

CODE:
```cds
// File: service.cds
annotate SalesOrder with @(
  UI.FieldGroup#GroupedActions : [
    @Record {
      Label : 'More Actions';
      Data  : [
        @Record {
          $Type : 'UI.DataFieldForActionGroup';
          Label : 'More Actions';
          Data  : [
            @Record { $Type : 'UI.DataFieldForAction'; Action : 'Approve'; Label : 'Approve'; },
            @Record { $Type : 'UI.DataFieldForAction'; Action : 'Reject';  Label : 'Reject';  }
          ];
        }
      ]
    }
  ]
);
```

STEP: 4 — Manifest-based action example and Page Editor restriction

DESCRIPTION: You can also define actions in the manifest (manifest-based actions). Note: Manifest-based actions cannot be grouped into menus using the Page Editor. Provide a representative manifest snippet showing an action definition. Use this pattern when actions are implemented in UI code (controller) rather than annotations.

LANGUAGE: JSON

CODE:
```json
// File: manifest.json (representative structure)
{
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "SalesOrder",
        "component": {
          "name": "sap.suite.ui.generic.template.ObjectPage",
          "settings": {
            "actions": {
              "SaveAction": {
                "type": "action",
                "text": "Save",
                "press": "onSave"    /* controller hook name */
              },
              "CustomIntentAction": {
                "type": "navigation",
                "text": "Open External App",
                "semanticObject": "PurchaseOrder",
                "action": "displayFactSheet"
              }
            }
          }
        }
      }
    ]
  }
}
```

STEP: 5 — Rules for moving actions between form sections, header, and footer

DESCRIPTION: Follow these rules when relocating actions programmatically or via Page Editor:
- You can move annotation-based actions (DataFieldForAction / DataFieldForIntentBasedNavigation) from one form section to another if both sections are based on the same entity.
- External navigation actions (UI.DataFieldForIntentBasedNavigation) can be moved to the page header.
- Internal actions (UI.DataFieldForAction) can be moved to the page header or footer only if the form section is based on the page’s main entity.
- Actions with criticality cannot be moved into action menus (UI.DataFieldForActionGroup) because menus do not support criticality.
- Manifest-based actions cannot be grouped into menus using the Page Editor (they are excluded from Page Editor grouping).

LANGUAGE: JSON

CODE:
```json
// Example guidance (not an actual runtime file): move an annotation reference into a header configuration
{
  "instruction": "When moving an annotation-based action to the header, add a reference to the same annotation path in header settings.",
  "example": {
    "fromAnnotationPath": "@UI.FieldGroup#MainFormActions/Data/0",
    "targetHeaderReference": {
      "component": "ObjectPage",
      "settings": {
        "header": {
          "actions": [
            { "annotationPath": "@UI.FieldGroup#MainFormActions/Data/0" }
          ]
        }
      }
    }
  }
}
```

STEP: 6 — Editor tips and constraints summary

DESCRIPTION: Quick checklist for code generation and editor-aware automation:
- Do not add Importance or RequiresContext to form action annotations; they are only relevant for table/action-column contexts.
- Do not attempt to place actions with criticality into UI.DataFieldForActionGroup menus.
- The Page Editor cannot group manifest-based actions into menus — handle grouping for manifest actions through UI code or manifest-driven customizations.
- Ensure the form section you move an internal action from/to is based on the same entity (and for header/footer moves ensure it is the main entity).

LANGUAGE: TEXT

CODE:
```text
Checklist:
- Use UI.DataFieldForAction for in-app actions.
- Use UI.DataFieldForIntentBasedNavigation for external navigation/intents.
- Use UI.DataFieldForActionGroup to create action menus; do not include actions with criticality.
- Manifest-based actions: define in manifest.json but cannot be menu-grouped via Page Editor.
- Moving actions: only between sections of the same entity; internal actions can go to header/footer only if section is based on main entity.
```
--------------------------------

**TITLE**: Analytical Chart — Add, Configure, and Remove UI.Chart Annotations for List Report (OData V4 / CAP)

**INTRODUCTION**: Practical, code-focused guide to programmatically add an analytical chart (UI.Chart) to a List Report (Analytical List Page flavor) by authoring OData annotations (XML or CAP CDS) and manifest configuration. Includes annotation examples for measures, dimensions, presentation variants (sorting), aggregated properties and registration in manifest.json. Notes about SAPUI5 version and aggregation types are included.

**TAGS**: UI.Chart, Analytical Chart, OData V4, annotations, manifest.json, CAP CDS, Analytics.AggregatedProperty, PresentationVariant, List Report, Fiori Tools

STEP: 1 — Verify prerequisites and required property annotations

DESCRIPTION: Ensure your main entity has groupable/aggregable properties and label/title annotations. For custom or transformation aggregations, ensure the service exposes aggregated properties (or AggregatedProperty annotations). If you plan to use transformation aggregations make sure the app runs with SAPUI5 >= 1.106.

LANGUAGE: XML

CODE:
```xml
<!-- Example: add Common.Label and Analytics annotations for properties (OData V4 annotation file) -->
<Annotations Target="MyService.SalesOrder">
  <!-- Make Amount aggregable (example custom-aggregation metadata provided by service or add aggregated property definitions) -->
  <!-- Simple label/title -->
  <Annotation Term="Common.Label">
    <String>Sales Order</String>
  </Annotation>
</Annotations>

<!-- Property-level label -->
<Annotations Target="MyService.SalesOrder/Amount">
  <Annotation Term="Common.Label">
    <String>Amount</String>
  </Annotation>
</Annotations>

<Annotations Target="MyService.SalesOrder/Region">
  <Annotation Term="Common.Label">
    <String>Region</String>
  </Annotation>
</Annotations>
```

LANGUAGE: CDS

CODE:
```cds
// Example CAP CDS: add @title and analytics metadata to properties (adjust to your service layer or model)
// In CAP, use @title (Common.Label equivalent)
entity SalesOrder {
  key ID   : UUID;
  Amount    : Decimal(13,2) @title : 'Amount';
  Region    : String         @title : 'Region';
  // If using transformation aggregations, you may define aggregated properties in your service layer
}
```

STEP: 2 — Define aggregated (dynamic) measures (transformation or custom) — example annotation (XML)

DESCRIPTION: Define aggregated properties exposed by the service (Analytics vocabulary) or use existing aggregated properties. This example shows a record representing a dynamic aggregated property. Your backend must expose aggregated properties for measures to appear in the Page Editor.

LANGUAGE: XML

CODE:
```xml
<!-- Example Analytics.AggregatedProperty record (service/annotation file) -->
<Annotations Target="MyService.SalesOrder">
  <Annotation Term="Analytics.AggregatedProperty">
    <Record>
      <PropertyValue Property="Name" String="SumAmount"/>
      <PropertyValue Property="PropertyPath" PropertyPath="Amount"/>
      <PropertyValue Property="AggregationMethod" EnumMember="Analytics.AggregationMethodType/Sum"/>
      <!-- Add label -->
      <PropertyValue Property="Label" String="Total Amount"/>
    </Record>
  </Annotation>
</Annotations>
```

STEP: 3 — Add UI.Chart annotation (XML) — minimal working example with measure, dimension, title and type

DESCRIPTION: Create UI.Chart annotation for the entity. This example sets chart type, one default measure and one default dimension. Use Records of types UI.ChartMeasure and UI.ChartDimension. PresentationVariant reference shown separately.

LANGUAGE: XML

CODE:
```xml
<!-- UI.Chart annotation applied to an entity (annotations.xml) -->
<Annotations Target="MyService.SalesOrder">
  <Annotation Term="UI.Chart">
    <Record>
      <PropertyValue Property="ChartType" String="Column"/> <!-- e.g., Column, Bar, Line -->
      <PropertyValue Property="Title" String="Sales by Region"/>
      <PropertyValue Property="Measures">
        <Collection>
          <Record Type="UI.ChartMeasure">
            <PropertyValue Property="PropertyPath" PropertyPath="SumAmount"/>  <!-- aggregated property or direct property with aggregation -->
            <PropertyValue Property="Label" String="Sales"/>
            <PropertyValue Property="Default" Bool="true"/>
          </Record>
        </Collection>
      </PropertyValue>
      <PropertyValue Property="Dimensions">
        <Collection>
          <Record Type="UI.ChartDimension">
            <PropertyValue Property="PropertyPath" PropertyPath="Region"/>
            <PropertyValue Property="Label" String="Region"/>
            <PropertyValue Property="Default" Bool="true"/>
            <!-- Optional: Text and TextArrangement via Path to text property -->
            <PropertyValue Property="Text" PropertyPath="RegionText"/>
          </Record>
        </Collection>
      </PropertyValue>
      <!-- Optional: link to a PresentationVariant (see STEP 4) -->
      <PropertyValue Property="PresentationVariant" Path="com.sap.vocabularies.UI.v1.SelectionPresentationVariant#PV_Sales_Order"/>
    </Record>
  </Annotation>
</Annotations>
```

STEP: 4 — Define PresentationVariant (sorting) referenced from UI.Chart

DESCRIPTION: Use UI.SelectionPresentationVariant (qualifier) to define SortOrder for the chart. You can generate a PresentationVariant or reuse one from the table. When no PresentationVariant is set, sorting is not applied. Example shows descending sort on Sales (SumAmount).

LANGUAGE: XML

CODE:
```xml
<!-- PresentationVariant (SelectionPresentationVariant with qualifier) -->
<Annotations Target="MyService.SalesOrder">
  <Annotation Term="UI.SelectionPresentationVariant" Qualifier="PV_Sales_Order">
    <Record>
      <PropertyValue Property="PresentationVariant">
        <Record Type="UI.PresentationVariant">
          <PropertyValue Property="SortOrder">
            <Collection>
              <Record Type="UI.SortProperty">
                <PropertyValue Property="Property" PropertyPath="SumAmount"/>
                <PropertyValue Property="Descending" Bool="true"/>
              </Record>
              <!-- Add additional sort properties here -->
            </Collection>
          </PropertyValue>
          <!-- You can also define Visualizations, MaxItems, etc. -->
        </Record>
      </PropertyValue>
      <!-- Optionally include a SelectionVariant reference -->
    </Record>
  </Annotation>
</Annotations>
```

STEP: 5 — Register annotation file in manifest.json (OData annotation binding)

DESCRIPTION: Ensure your manifest.json dataSources/models reference the annotation file so the annotation engine loads the UI.Chart entries. Example shows adding annotation file in dataSources settings and binding to model.

LANGUAGE: JSON

CODE:
```json
{
  "sap.app": {
    "dataSources": {
      "mainService": {
        "uri": "/sap/opu/odata/sap/MY_SERVICE_SRV/",
        "type": "OData",
        "settings": {
          "annotations": [
            "annotations/annotations.xml"      /* <- path to your annotation file within webapp */
          ]
        }
      }
    }
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "mainService",
        "preload": true,
        "settings": {
          "synchronizationMode": "None"
        }
      }
    },
    "resources": {
      "css": [
        { "uri": "../css/sap-icons.css" }  /* preserve provided stylesheet path if needed */
      ]
    },
    "extends": {
      "extensions": {
        "sap.ui.controllerExtensions": {}
      }
    }
  },
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "SalesOrder",
        "component": {
          "name": "sap.suite.ui.generic.template.ListReport",
          "list": {}
        }
      }
    ]
  }
}
```

STEP: 6 — CAP CDS style (annotation snippet) — define UI.Chart in CDS for CAP projects

DESCRIPTION: For CAP-based projects you can use CDS annotations to define UI.Chart. This is a compact example—adjust property names to your model. CAP CDS annotations vary by CAP version; verify your CAP/UI annotation syntax in your project.

LANGUAGE: CDS

CODE:
```cds
using { cuid } from '@sap/cds/common';

entity SalesOrder {
  key ID    : UUID @title : 'ID';
  Amount     : Decimal(13,2) @title : 'Amount';
  Region     : String         @title : 'Region';
  RegionText : String         @title : 'Region Text';
}

// UI annotations (example)
annotate SalesOrder with {
  @UI.chart: {
    chartType: #Column,
    title: 'Sales by Region',
    measures: [
      { property: 'Amount', label: 'Sales', default: true } /* if Amount is aggregable / aggregated */
    ],
    dimensions: [
      { property: 'Region', label: 'Region', default: true, text: 'RegionText' }
    ],
    presentationVariant: '@UI.SelectionPresentationVariant#PV_Sales_Order'
  }
}
```

STEP: 7 — Remove/Delete Analytical Chart programmatically

DESCRIPTION: To remove the analytical chart and revert to a conventional List Report: delete the UI.Chart annotation entry from the annotation file (or remove the CDS @UI.chart annotation). Also remove reference to any PresentationVariant qualifiers if they become unreferenced. After deletion, rebuild/deploy and reload the app.

LANGUAGE: XML

CODE:
```xml
<!-- Remove or delete the UI.Chart Annotation block shown in STEP 3.
     Example: remove the <Annotation Term="UI.Chart"> ... </Annotation> entry for the entity.
-->
```

STEP: 8 — Notes and operational tips

DESCRIPTION: Keep these operational notes for implementations and automation:
- If you use transformation aggregations, SAPUI5 >= 1.106 is required for @Analytics.AggregatedProperty support.
- Custom aggregations require service-side @Aggregation.CustomAggregate exposure.
- Measure labels depend on Common.Label or CAP @title; changing labels has global effect.
- If a chart uses both custom and transformation-based dynamic measures set as default, their sequence cannot be mixed due to UI.Chart semantics.
- To remove unreferenced PresentationVariant annotations from annotation files run your cleanup process that deletes unreferenced annotations.

LANGUAGE: plain

CODE:
```text
Images and assets referenced in Page Editor:
- ../css/sap-icons.css
- images/Fiori_tools_List_Report_Analytical_Chart_not_enabled_48ed87b.png
- images/Fiori_Tools_Chart_Properties_c4705fa.png

SAPUI5 version requirement for @Analytics.AggregatedProperty: >= 1.106
```
--------------------------------

**TITLE**: Annotation Support for Fiori Tools Page Editor (CAP & Non-CAP)

**INTRODUCTION**: Practical, code-focused rules and examples showing how the Fiori Tools Page Editor chooses and modifies the top-level local annotation file for CAP and non-CAP projects. Includes examples for manifest.json, .cds annotation files, file paths, and override behavior so code-generating agents can implement deterministic file selection and edits.

**TAGS**: fiori-tools, annotations, CAP, manifest.json, cds, webapp, Page Editor, annotation-manager

**STEP**: 1 — Determine project type

**DESCRIPTION**: Detect whether the project is CAP or non-CAP to follow the appropriate annotation file selection and modification rules.

**LANGUAGE**: Plaintext

**CODE**:
```Plaintext
If project contains CAP artifacts (cds, srv folder, service.cds) => Follow CAP Project rules.
Otherwise => Follow Non-CAP Project rules.
```

**STEP**: 2 — CAP Project: select or create top-level .cds annotation file

**DESCRIPTION**: Page Editor modifies a single top-level .cds file in the application folder. Determine that file with these rules:
- Search for a file in the application directory that is NOT registered in index.cds or service.cds.
- If none found, create annotations.cds in the app folder with a using directive pointing to the service (example below).
- If index.cds does not exist, create index.cds and add a using directive referencing the new annotations.cds.
- If multiple candidate files exist, use using directives to establish top-level; if multiple files on same top level, use the first found file.

**LANGUAGE**: CDS

**CODE**:
```CDS
// Example: annotations.cds (created when none exists)
// Put top-level annotations here. Include a using directive pointing to the service.
using { MyService } from '../srv/service.cds';

// Example annotation (annotate entity defined in service)
annotate MyService.MyEntity with {
  @UI.headerInfo: { type: #StandardPerson }
  // add Page Editor generated annotation fragments here
};

// If index.cds is created, it will reference annotations.cds:
-- index.cds (auto-created if missing)
using from './annotations.cds';
```

**STEP**: 3 — CAP Project: override behavior and layering rules

**DESCRIPTION**: Editing annotations defined in other files:
- If the existing annotation resides in a base layer file (lower in hierarchy), the Page Editor writes an overriding annotation into the top-level file.
- Some properties (examples: measures and currencies) cannot be overridden if defined in the base layer — avoid generating such overrides.
- If the annotation is in a different .cds file within the same app at the same layer, Page Editor will override it in the top-level file and add a using directive to the overridden file to preserve layering.
- If the annotation is in a .cds file belonging to a different app, Page Editor must not override it. The user must open the Page Editor for the original app to edit it. Use the tooltip in the UI to identify the original app (image reference preserved).

**LANGUAGE**: Plaintext

**CODE**:
```Plaintext
Override strategy:
- If sourceLayer < topLayer: write overriding annotation to top-level .cds
  (Do not try to modify base-layer file)
- If property is non-overridable (e.g. measure, currency) and defined in base: skip change and surface message
- If file belongs to different app: abort override and instruct user to open original app
```

**STEP**: 4 — Non-CAP Project: choose top local annotation file via manifest.json

**DESCRIPTION**: Page Editor modifies the local annotation file at the top of the annotation source hierarchy. The top is determined by the last entry in the datasources -> annotations array in manifest.json (last entry = highest precedence). Page Editor never modifies lower-layer sources (service metadata or lower-level files); if edit is needed for an annotation defined lower, copy that annotation into the top local annotation file and modify it there (overriding lower layer).

**LANGUAGE**: JSON

**CODE**:
```JSON
{
  "sap.ui5": {
    "models": {},
    "dataSources": {
      "mainService": {
        "uri": "/sap/opu/odata/sap/MY_SERVICE",
        "settings": {
          "annotations": [
            { "uri": "annotations/local-annotations.xml" },
            { "uri": "annotations/top-annotations.xml" } // last entry = top precedence
          ]
        }
      }
    }
  }
}
```

**STEP**: 5 — Non-CAP Project: create and register new local annotation file

**DESCRIPTION**: If no local annotation file exists at the top of the hierarchy, Page Editor automatically creates a new annotation file when the first change is made and registers it in manifest.json. The new annotation file is placed under webapp/annotations/.

**LANGUAGE**: Plaintext + XML example

**CODE**:
```Plaintext
Creation behavior:
- New file path: webapp/annotations/<filename>.xml (e.g., webapp/annotations/top-annotations.xml)
- Update manifest.json dataSources[...].settings.annotations: append the new file as the last entry (gives it highest precedence)
```

```XML
<!-- Example: webapp/annotations/top-annotations.xml -->
<Annotations Target="MyService.MyEntity" xmlns="http://docs.oasis-open.org/odata/ns/edm">
  <!-- Page Editor will insert annotation fragments here -->
</Annotations>
```

**STEP**: 6 — Annotation File Manager & debug helpers

**DESCRIPTION**: To inspect or change the annotation file hierarchy use the Annotation File Manager. In editor automation or UI flows, call the command to open it:
- Command: Fiori: Open Annotation File Manager
- Image/tooltip reference used in UI: images/Fiori_Tools_Annotation_Support_tool_tip_5017612.png

**LANGUAGE**: Plaintext

**CODE**:
```Plaintext
Developer workflow:
- To view hierarchy: run "Fiori: Open Annotation File Manager"
- Use Annotation File Manager to reorder annotation entries (manifest.json) or inspect which file has top precedence
- When generating edits, always update the top-most annotation file and do not modify service metadata or lower-layer files directly
```
--------------------------------

**TITLE**: Appendix — UI Annotation and Page Editor Configuration Reference (Fiori Tools)

**INTRODUCTION**: Concise, developer-focused reference for configuring UI annotations and Page Editor options in SAP Fiori (fiori-tools). Use these steps to map entity/service properties to UI behavior (contacts, addresses, micro charts, criticality, value help, image rendering, measures/currencies, tooltips, labels, hiding, semantic navigation, and more). Includes CDS examples and annotation snippets to generate or update application-layer annotations.

**TAGS**: fiori-tools, UI.Annotations, CDS, value-help, criticality, micro-charts, annotations, UI.IsImageURL, Common.ValueList, UI.TextArrangement, SemanticObject

STEP: Include CSS for SAP icons
DESCRIPTION: Add the provided SAP icons stylesheet to your editor or documentation pages. Path shown in source.
LANGUAGE: HTML
CODE:
```html
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```

STEP: Contact column mapping (Communication.Contact)
DESCRIPTION: The Contact column uses Communication.Contact.fn as the contact name (immutable in Property Panel). To use a different contact property, delete the column and add a new contact column bound to the desired property.
LANGUAGE: Text
CODE:
```text
- Contact column binds to Communication.Contact.fn (cannot be changed in Property Panel)
- To change: delete column -> Add -> choose desired Communication.Contact property
```

STEP: Contact sub-properties: Job Title, Photo, Role, Department
DESCRIPTION: Map these UI fields directly to Communication.Contact properties: title, photo, role, department.
LANGUAGE: Text
CODE:
```text
- Job Title  => Communication.Contact.title
- Photo      => Communication.Contact.photo
- Role       => Communication.Contact.role
- Department => Communication.Contact.department
```

STEP: Address collection mapping
DESCRIPTION: Map address table rows to Communication.Contact.adr (Communication.AddressType). Each row maps fields to address properties shown in the UI.
LANGUAGE: Text
CODE:
```text
Address collection: Communication.Contact.adr -> record type Communication.AddressType
Row fields:
- Street         => street
- City           => locality
- State/Province => region
- Postal Code    => code
- Country        => country
```

STEP: Phone collection mapping
DESCRIPTION: Map phone entries to Communication.Contact.tel (Communication.PhoneNumberType). Define Phone uri and Type mapping to enum values.
LANGUAGE: Text
CODE:
```text
Phone collection: Communication.Contact.tel -> Communication.PhoneNumberType
Row fields:
- Phone => uri
- Type  => if type contains:
    'work' => Work (default)
    'cell' => Mobile
    'fax'  => Fax
```

STEP: Email collection mapping
DESCRIPTION: Map email entries to Communication.Contact.email (Communication.EmailAddressType). Use email property for the UI email cell.
LANGUAGE: Text
CODE:
```text
Email collection: Communication.Contact.email -> Communication.EmailAddressType
Row fields:
- Email => email
```

STEP: Display as Image (UI.IsImageURL)
DESCRIPTION: Render a string property containing an image URL as an image at runtime. This sets @UI.IsImageURL: true on the property used by the column/field. Note read-only/override rules.
LANGUAGE: Annotation/CDS
CODE:
```text
- In Page Editor: enable "Display as Image" on a field/column bound to a string URL
- Result: applies -> @UI.IsImageURL: true
Notes:
- Deleting column/field does NOT remove annotation.
- If @UI.IsImageURL is already set in service/lower-layer annotations, Page Editor cannot change it.
- Fields annotated with @Core.MediaType + @Core.IsURL are rendered as images and are read-only in Page Editor.
```

STEP: Criticality for fields/columns (UI.DataField)
DESCRIPTION: Display semantic coloring (and optional icons) by binding a property that represents criticality. Bind property in the Criticality field in Properties pane. Optionally set Criticality Representation.
LANGUAGE: Text
CODE:
```text
- Prerequisite: service exposes a property representing the status criticality
- In Page Editor: select field/column -> Properties pane -> Criticality -> choose property
- Outcome: adds Criticality annotation to UI.DataField record -> semantic colors show in UI
- Optional: set Criticality Representation (None / With Icon / Without Icon)
    - With Icon -> forces icon+color regardless of template defaults
    - Without Icon -> forces color only
```

STEP: Criticality Source and Calculation (micro charts)
DESCRIPTION: For area, bullet, radial, column, and comparison micro charts choose Criticality Source: Property or Calculation. If Property, use a service property representing precomputed criticality. If Calculation, configure Improvement Direction and ranges.
LANGUAGE: Text
CODE:
```text
Criticality Source options:
- Property (backend computed): set Criticality Value property -> chart values colored per backend logic
- Calculation: define Improvement Direction and thresholds (Deviation/Tolerance ranges)
    - Improvement Direction required for Calculation (Minimize / Maximize / Target)
    - If Minimize -> set Deviation High Value & Tolerance High Value
    - If Maximize -> set Deviation Low Value & Tolerance Low Value
    - If Target -> set Deviation Low/High and Tolerance Low/High (Target not for radial)
```

STEP: Criticality Representation (UI.DataField)
DESCRIPTION: Control whether criticality shows with icon + semantic color. Appears when Criticality property is set.
LANGUAGE: Text
CODE:
```text
Criticality Representation options for section fields/columns:
- None        => use template default representation
- With Icon   => force icon and color
- Without Icon=> force color only
Effect: generates/updates UI.DataField annotation with CriticalityRepresentation settings.
```

STEP: Description property for header sections
DESCRIPTION: Set free-text description (translatable) on header sections that support it (progress/micro charts).
LANGUAGE: Text
CODE:
```text
1. Open Page Editor -> select header section (supports Description)
2. Properties pane -> Description -> enter translatable text
Note: prepare for translation via i18n (see internationalization-i18n-eb427f2.md)
```

STEP: Dimension and Measures for micro charts
DESCRIPTION: Configure chart axes and additional measures for micro charts (area/line/column/comparison).
LANGUAGE: Text
CODE:
```text
- Dimension (required for area, line, column micro charts): select property for x-axis
- Measures (line/area/column/comparison): add additional numeric properties for multiple lines/series
```

STEP: Max/Min Value and Value Types (bullet/harvey)
DESCRIPTION: Configure min/max as constant numbers or numeric properties; controls chart scale.
LANGUAGE: Text
CODE:
```text
Maximum Value Type / Minimum Value Type: choose expression type (constant or numeric property)
- Bullet micro chart: scale uses Minimum (default 0 unless overridden) and Maximum
- Harvey micro chart: Maximum is a numeric property (can come from main or 1:1 related entity)
Set the chosen property/constant in Properties pane for Maximum/Minimum Value.
```

STEP: Forecast Value and Target Value (micro charts)
DESCRIPTION: Optional numeric properties to display forecast and target values in bullet/radial/area charts.
LANGUAGE: Text
CODE:
```text
- Forecast Value: optional for bullet micro charts -> choose numeric property
- Target Value: required for radial micro charts; optional for area/bullet micro charts -> choose numeric property
- Target Type: choose expression type (constant number or numeric property) for progress-related elements
```

STEP: Improvement Direction (Calculation for criticality)
DESCRIPTION: When using Calculation as Criticality Source, set Improvement Direction (Minimize/Maximize/Target) and required deviation/tolerance thresholds accordingly.
LANGUAGE: Text
CODE:
```text
ImprovementDirection:
- Minimize -> require:
    Deviation High Value (highest neutral)
    Tolerance High Value  (highest positive)
- Maximize -> require:
    Deviation Low Value  (lowest neutral)
    Tolerance Low Value   (lowest positive)
- Target (not radial) -> require:
    Deviation Low/High and Tolerance Low/High
```

STEP: Measures and Currencies (Measures.ISOCurrency)
DESCRIPTION: Annotate numeric fields/columns to display currency or measure unit. Choose Currency Unit or Measure Unit; set Path (property) or static String.
LANGUAGE: Annotation/CDS
CODE:
```text
- In Properties pane: Measures and Currencies -> choose "Currency Unit" or "Measure Unit"
- Pop-up options:
    Path   => select property representing unit/currency (typically a property in the same entity)
    String => enter literal unit text (e.g., "%")
- Result: applies Measures.ISOCurrency or equivalent annotation referencing chosen property/string
Notes:
- You can change Type and Unit later in Properties pane or disable by choosing None
```

STEP: Text and Text Arrangement (Common.Text and UI.TextArrangement)
DESCRIPTION: Configure descriptive text for coded values: apply Common.Text to a target property and optionally set UI.TextArrangement (TextFirst, TextLast, TextOnly, IDOnly). Example annotation snippets provided.
LANGUAGE: CDS
CODE:
```cds
// Example: apply Text and TextArrangement to a field value
annotate service.Capex with {
    type @(
        Common.Text : type.typedescription,
        Common.Text.@UI.TextArrangement : #TextOnly
    );
};

// Example: apply Text and TextArrangement to value-help source entity
annotate service.CapexType with {
    type @(
        Common.Text : typedescription,
        Common.Text.@UI.TextArrangement : #TextOnly
    );
};
```
Additional actions:
```text
- In Page Editor: select Text property -> choose a descriptive property (e.g., typedescription)
- Text Arrangement auto-appears when Text is set; choose None/ TextFirst/TextLast/TextOnly/IDOnly
- Use Page Editor "Take Over" button to sync Text/Text Arrangement between field and Value Help
```

STEP: Value Help configuration (Common.ValueList and UI.PresentationVariant)
DESCRIPTION: Configure value help (value selection dialogs or dropdowns) by mapping Value Source Entity, Value Source Property, External ID, Value Description Property, Text Arrangement, Result List columns, dependency direction, and default Sort Order. Generates Common.ValueList and other annotations with a PresentationVariant qualifier.
LANGUAGE: CDS
CODE:
```cds
// Example service model expected for Value Help
entity CapexType : managed {
    key type            : String;
        typedescription : String;
}

// Example association in main entity
entity CapexBase : managed {
    type : Association to CapexType;
}

// Page Editor steps (actionable):
1. Set field Display Type = Value Help
2. In Define Value Help Properties dialog:
   - Label: short label for dialog
   - Value Source Entity: e.g., CapexType
   - Value Source Property: property used as input (first key suggested for associations)
   - External ID: human-readable property (optional)
   - Value Description Property: e.g., typedescription
   - Text Arrangement: TextFirst/TextLast/TextOnly/IDOnly
   - Display as Dropdown: checkbox for combo box vs dialog
   - Result List: Add Column -> choose properties to show
   - Dependency: set None / In / Out / InOut and select Local Value property when In/Out/InOut
   - Sort Order: Add Sort Property -> choose property and direction; reorder as needed
3. Apply -> generated/updated annotations:
   - UI.MultiLineText
   - Common.ValueList
   - Common.ValueListWithFixedValues (if applicable)
   - Common.Text (for Value Source Property)
   - UI.PresentationVariant (auto-generated qualifier referenced by Common.ValueList.PresentationVariantQualifier)
```
Notes:
```text
- Multiple manual value help variants (beyond the default) cannot be managed by Page Editor.
- Value help variants in @Common.ValueListRelevantQualifiers are not supported by Page Editor.
```

STEP: Tooltip / Tooltip Source
DESCRIPTION: Configure tooltips (string or property-based) for supported columns/header sections (progress, rating, data point, etc.). Use Properties pane to choose String (translatable) or Property (service-provided).
LANGUAGE: Text
CODE:
```text
- In Page Editor: select supported Column/Header section -> Properties pane -> Tooltip Source
   - String => enter fixed translatable text
   - Property => select a string property from service
Notes:
- String tooltips can be prepared for translation via i18n
```

STEP: Hidden and Hide-by-Property (UI.Hidden)
DESCRIPTION: Hide columns/fields conditionally. Enable Hidden toggle and pick a boolean property to hide by (if property evaluates to true the element is hidden). Understand behavior varies by UI element.
LANGUAGE: Text
CODE:
```text
- Enable "Hidden" toggle in Properties pane
- Choose boolean property in "Hide by Property"
Effect: sets UI.Hidden annotation referencing chosen boolean property
Note: Hiding impact differs per element. Reference: SAP docs on UI.Hidden annotation.
```

STEP: External ID usage (Edm.Guid)
DESCRIPTION: For Edm.Guid entity properties, use External ID to show human-readable identifier. If using Value Help, External ID must be a direct property of Value Source Entity.
LANGUAGE: Text
CODE:
```text
- External ID property used to render human-readable identifier for Edm.Guid properties
- When Value Help is defined: External ID must be a direct property on the Value Source Entity
```

STEP: Labels: Section, Fields, Columns, Actions (ReferenceFacet / DataField / DataFieldForAction)
DESCRIPTION: How labels are created/maintained and their annotation behavior. Labels are translatable and mapped to ReferenceFacet.Label or DataField.Label.
LANGUAGE: Text
CODE:
```text
- Section label -> ReferenceFacet.Label in Facet annotation (translatable). Deleting section removes ReferenceFacet and Label.
- Field labels -> can come from annotations (Common.Label, @title). If absent, DataField.Label generated from Value property.
- Column labels -> same behavior as fields; deleting column removes generated Label in the DataField record.
- Actions -> Label generated from last segment of action name (e.g., Trippin.Container/GetNearestAirport -> GetNearestAirport)
Notes:
- Changing label in Page Editor does not modify lower-layer property annotations; it updates/generated DataField.Label on application layer
- Labels are i18n-ready; use i18n project files for translations
```

STEP: Semantic Object Name and Property Mapping (Navigation)
DESCRIPTION: Assign Semantic Object Name for fields/columns to enable intent-based navigation. If target semantic object property differs, set Semantic Object Property Mapping to map local property names to target inbound property names.
LANGUAGE: Text
CODE:
```text
- Set Semantic Object Name in Page Editor to inbound name defined in target app's manifest.json
- After setting: enable Semantic Object Property Mapping -> map properties:
    LocalPropertyName => TargetSemanticPropertyName
Note: Ensure target app manifest.json inbound configuration exists in launchpad
```

STEP: Display Type and Restrictions (create/edit rendering and mandatory/read-only)
DESCRIPTION: Configure Display Type (Value Help, TextArea, etc.) and Restrictions (Mandatory, Optional, Read-only). Read-only may be enforced for system-generated fields.
LANGUAGE: Text
CODE:
```text
- Display Type controls edit-mode renderer: Value Help, TextArea, etc.
- Restrictions sets input behavior: Mandatory / Optional / Read-only
- Some options are unavailable depending on field configuration or if property is system-generated
```

STEP: Maximum/Minimum Value Type influence on charts
DESCRIPTION: Maximum/Minimum Value Type choice (constant vs property) controls which value is used for chart scale; set matching Maximum/Minimum Value accordingly.
LANGUAGE: Text
CODE:
```text
- Maximum/Minimum Value Type = "Number" => enter constant decimal
- Maximum/Minimum Value Type = "Property" => select numeric property from service
- Bullet micro chart: scale based on Min/Max chosen here
```

STEP: Images & resource paths referenced in documentation
DESCRIPTION: Preserve image and asset file paths used in Page Editor screenshots and icons. Use for UI previews or documentation generation.
LANGUAGE: Text
CODE:
```text
Referenced image paths:
- images/Criticallity_ac93cba.png
- images/Measure_and_Currencies_3bd7c70.png
- images/example_d6376cf.jpg
- images/Filter_Field_properties_a32bce5.jpg
- images/Value_Help_properties_cf241c6.jpg
- images/example_1_0556254.jpg
- images/Value_Help_Properties_Example_2_dbcc00a.jpg
- images/Value_help_screenshot_adf0b9c.png
- images/Take_Over_Button_6452fbf.jpg
- images/Take_Over_Button_6452fbf.jpg
Use relative paths as shown when generating documentation or UI previews.
```

STEP: Generated Annotations summary (what Page Editor produces)
DESCRIPTION: When you configure properties in Page Editor, the following annotations are generated/updated on application layer; use this summary to validate annotation output.
LANGUAGE: Text
CODE:
```text
Common annotations generated/updated by Page Editor:
- UI.DataField (and its properties like Criticality/CriticalityRepresentation)
- UI.IsImageURL
- Measures.ISOCurrency (or UI.MeasureUnit mapping)
- Common.Text / UI.TextArrangement
- UI.MultiLineText
- Common.ValueList / Common.ValueListWithFixedValues
- UI.PresentationVariant (with auto-generated qualifier referenced by Common.ValueList.PresentationVariantQualifier)
- UI.Hidden (for hide-by-property)
- Any DataField, ReferenceFacet, DataFieldForAction labels on application layer
```


--------------------------------

**TITLE**: Automatic generation of UI annotations (List Report & Object Page)

**INTRODUCTION**: Guidance and ready-to-use code snippets to implement the Fiori Tools automatic generation rules that create UI.LineItem, UI.FieldGroup and UI.Facets annotations for the main entity when you select "Yes" during entity selection. Includes exact generation logic, example annotation files (XML/JSON) and a TypeScript snippet to generate and write local annotation files only when terms do not already exist.

**TAGS**: fiori-tools, annotations, UI.LineItem, UI.FieldGroup, UI.Facets, automatic-generation, odata, sap

STEP: 1 — Enable automatic generation
DESCRIPTION: Select the "Yes" option during the entity selection step in the Fiori Tools generator to trigger automatic annotation creation. This causes local annotation files to be created/updated for the main entity type, but only if UI.LineItem, UI.FieldGroup and UI.Facets are not already defined for that entity.
LANGUAGE: Plaintext
CODE:
```Plaintext
Action:
- In the generator UI, at "Entity selection" choose: Yes (Enable automatic generation)
Effect:
- Generator will create local annotation entries for the main entity:
  - UI.LineItem for list report
  - UI.FieldGroup for form/object page
  - UI.Facets with ReferenceFacet pointing to the UI.FieldGroup
Condition:
- Each annotation term is created only if that term does NOT already exist for the main entity (no overwriting).
Output location:
- Typical local file: webapp/annotations/annotations.xml (or project-specific annotations folder)
```

STEP: 2 — Generation rules (precise, actionable)
DESCRIPTION: Exact rules the generator uses to build the annotations so you can reproduce or modify logic in code.
LANGUAGE: Plaintext
CODE:
```Plaintext
Rules:
1) UI.LineItem (List Report)
   - Create UI.DataField records referencing properties of the main entity.
   - Use the earliest declared properties (order in metadata).
   - Exclude:
     - Properties with UI.Hidden = true
     - Properties whose EDM type is Edm.Guid (UUID)
   - Typical limit: use the first N columns (generator may limit to e.g., first 6)

2) UI.FieldGroup (Form / Object Page)
   - Create a single UI.FieldGroup for the entity containing UI.DataField records for:
     - All direct properties of the main entity
     - Excluding properties with UI.Hidden = true
   - Use UI.DataField PropertyValue Path property to reference each property.

3) UI.Facets (Object Page)
   - Create UI.Facets annotation and include a UI.ReferenceFacet that references the generated UI.FieldGroup.

4) Persistence
   - Write annotations to local annotation file (e.g., webapp/annotations/annotations.xml).
   - Do NOT overwrite existing annotation terms: check if UI.LineItem, UI.FieldGroup, UI.Facets already exist for the entity before adding.
```

STEP: 3 — Example generated XML annotations (minimal, ready-to-use)
DESCRIPTION: Example of annotations added for an entity named MyService.MainEntity. Use this as a template to write into webapp/annotations/annotations.xml or merge into your project's annotation file.
LANGUAGE: XML
CODE:
```XML
<!-- File: webapp/annotations/annotations.xml -->
<Annotations Target="MyService.MainEntity">
  <!-- List Report: UI.LineItem -->
  <Annotation Term="UI.LineItem">
    <Collection>
      <Record Type="UI.DataField">
        <PropertyValue Property="Value" Path="Name"/>
      </Record>
      <Record Type="UI.DataField">
        <PropertyValue Property="Value" Path="Category"/>
      </Record>
      <Record Type="UI.DataField">
        <PropertyValue Property="Value" Path="Status"/>
      </Record>
      <!-- More UI.DataField records referencing the first non-hidden, non-UUID properties -->
    </Collection>
  </Annotation>

  <!-- Object Page / Form: UI.FieldGroup -->
  <Annotation Term="UI.FieldGroup" Qualifier="AutoGeneratedMainEntityFieldGroup">
    <Record>
      <PropertyValue Property="Data">
        <Collection>
          <Record Type="UI.DataField">
            <PropertyValue Property="Value" Path="Name"/>
          </Record>
          <Record Type="UI.DataField">
            <PropertyValue Property="Value" Path="Description"/>
          </Record>
          <Record Type="UI.DataField">
            <PropertyValue Property="Value" Path="Status"/>
          </Record>
          <!-- All direct properties except those marked hidden -->
        </Collection>
      </PropertyValue>
      <PropertyValue Property="Label" String="MainEntity Fields"/>
    </Record>
  </Annotation>

  <!-- Object Page: UI.Facets referencing FieldGroup -->
  <Annotation Term="UI.Facets">
    <Collection>
      <Record Type="UI.ReferenceFacet">
        <PropertyValue Property="Target" AnnotationPath="@UI.FieldGroup#AutoGeneratedMainEntityFieldGroup"/>
        <PropertyValue Property="Label" String="General Information"/>
      </Record>
      <!-- Additional facets could be added here -->
    </Collection>
  </Annotation>
</Annotations>
```

STEP: 4 — Equivalent JSON annotation snippet (OData V4 JSON format)
DESCRIPTION: If you store annotations as JSON, this is the equivalent structure for the same entity.
LANGUAGE: JSON
CODE:
```JSON
{
  "Annotations": {
    "MyService.MainEntity": {
      "UI.LineItem": [
        {
          "Record": {
            "Type": "UI.DataField",
            "Value": { "Path": "Name" }
          }
        },
        {
          "Record": {
            "Type": "UI.DataField",
            "Value": { "Path": "Category" }
          }
        },
        {
          "Record": {
            "Type": "UI.DataField",
            "Value": { "Path": "Status" }
          }
        }
      ],
      "UI.FieldGroup#AutoGeneratedMainEntityFieldGroup": {
        "Record": {
          "Data": [
            { "Record": { "Type": "UI.DataField", "Value": { "Path": "Name" } } },
            { "Record": { "Type": "UI.DataField", "Value": { "Path": "Description" } } },
            { "Record": { "Type": "UI.DataField", "Value": { "Path": "Status" } } }
          ],
          "Label": { "String": "MainEntity Fields" }
        }
      },
      "UI.Facets": [
        {
          "Record": {
            "Type": "UI.ReferenceFacet",
            "Target": { "AnnotationPath": "@UI.FieldGroup#AutoGeneratedMainEntityFieldGroup" },
            "Label": { "String": "General Information" }
          }
        }
      ]
    }
  }
}
```

STEP: 5 — TypeScript generator snippet (scan properties, create annotations, write file only if missing)
DESCRIPTION: Use this snippet in your code generator to implement the automatic generation behavior. Assumes metadata model with entity.properties: [{name, type, annotations}].
LANGUAGE: TypeScript
CODE:
```TypeScript
import * as fs from 'fs';
import * as path from 'path';

// Simplified property and entity types
type Property = { name: string; type: string; annotations?: Record<string, any> };
type Entity = { name: string; properties: Property[] };

// Configuration
const OUTPUT_FILE = path.join('webapp', 'annotations', 'annotations.xml');
const LIST_COLUMNS_LIMIT = 6; // adjust as needed

function isHidden(prop: Property): boolean {
  // Detect UI.Hidden annotation (example check; adapt to your metadata format)
  return prop.annotations?.UI?.Hidden === true;
}

function isUUID(prop: Property): boolean {
  return prop.type === 'Edm.Guid' || prop.type === 'Guid' || prop.type === 'UUID';
}

function generateAnnotationsForEntity(entity: Entity): string {
  // Build UI.LineItem (first non-hidden, non-UUID columns)
  const lineItemProps = entity.properties
    .filter(p => !isHidden(p) && !isUUID(p))
    .slice(0, LIST_COLUMNS_LIMIT);

  const lineItemXml = lineItemProps.map(p => `
      <Record Type="UI.DataField">
        <PropertyValue Property="Value" Path="${p.name}"/>
      </Record>`).join('');

  // Build UI.FieldGroup (all non-hidden direct properties)
  const fieldGroupProps = entity.properties.filter(p => !isHidden(p) && !isUUID(p)); // UUIDs can still be included in forms if desired
  const fieldGroupXml = fieldGroupProps.map(p => `
          <Record Type="UI.DataField">
            <PropertyValue Property="Value" Path="${p.name}"/>
          </Record>`).join('');

  // Complete Annotations XML (minimal)
  return `<!-- Generated annotations for ${entity.name} -->
<Annotations Target="${entity.name}">
  <Annotation Term="UI.LineItem">
    <Collection>
      ${lineItemXml}
    </Collection>
  </Annotation>

  <Annotation Term="UI.FieldGroup" Qualifier="AutoGeneratedMainEntityFieldGroup">
    <Record>
      <PropertyValue Property="Data">
        <Collection>
          ${fieldGroupXml}
        </Collection>
      </PropertyValue>
      <PropertyValue Property="Label" String="MainEntity Fields"/>
    </Record>
  </Annotation>

  <Annotation Term="UI.Facets">
    <Collection>
      <Record Type="UI.ReferenceFacet">
        <PropertyValue Property="Target" AnnotationPath="@UI.FieldGroup#AutoGeneratedMainEntityFieldGroup"/>
        <PropertyValue Property="Label" String="General Information"/>
      </Record>
    </Collection>
  </Annotation>
</Annotations>
`;
}

function annotationsExistForEntity(xmlContent: string, entityName: string): boolean {
  // Simple check: does content already contain UI.LineItem or UI.FieldGroup for this target?
  const targetRegex = new RegExp(`<Annotations\\s+Target=["']${entityName}["']`, 'i');
  return targetRegex.test(xmlContent) && /UI\.LineItem|UI\.FieldGroup|UI\.Facets/.test(xmlContent);
}

function writeAnnotationsIfMissing(entity: Entity) {
  let existing = '';
  if (fs.existsSync(OUTPUT_FILE)) {
    existing = fs.readFileSync(OUTPUT_FILE, 'utf8');
    if (annotationsExistForEntity(existing, entity.name)) {
      console.log(`Annotations for ${entity.name} already exist. Skipping generation.`);
      return;
    }
  } else {
    // Ensure directory exists
    fs.mkdirSync(path.dirname(OUTPUT_FILE), { recursive: true });
  }

  const newAnnotationsXml = generateAnnotationsForEntity(entity);

  // Append new annotations at end of file (or create file)
  const merged = existing + '\n' + newAnnotationsXml;
  fs.writeFileSync(OUTPUT_FILE, merged, 'utf8');
  console.log(`Written annotations for ${entity.name} to ${OUTPUT_FILE}`);
}

// Example usage:
const sampleEntity: Entity = {
  name: 'MyService.MainEntity',
  properties: [
    { name: 'ID', type: 'Edm.Guid', annotations: {} },
    { name: 'Name', type: 'Edm.String' },
    { name: 'Category', type: 'Edm.String' },
    { name: 'Description', type: 'Edm.String' },
    { name: 'Status', type: 'Edm.String' },
    { name: 'CreatedAt', type: 'Edm.DateTimeOffset' }
  ]
};

writeAnnotationsIfMissing(sampleEntity);
```

STEP: 6 — File path and post-generation steps
DESCRIPTION: Where to find the generated annotations and recommended edits after generation.
LANGUAGE: Plaintext
CODE:
```Plaintext
Default output file (common):
- webapp/annotations/annotations.xml

Post-generation recommendations:
- Review the generated UI.LineItem and UI.FieldGroup for business relevance.
- Reorder or hide columns manually by editing the annotation file.
- If you prefer JSON annotations, convert the XML or use generator options to produce JSON.
- Keep a backup copy before editing generated annotation file if you want to re-run the generator.
```
--------------------------------

**TITLE**: Basic Columns (Fiori Tools) — Add, Configure, Move, Delete

**INTRODUCTION**: This document explains how to add, configure, reorder, and delete basic columns in a table using Fiori tools Page Editor UI and shows code-focused examples for automating or representing the same operations in configuration objects. It preserves UI actions, file references, and example payloads useful for code generation or automation.

**TAGS**: fiori-tools, sap, ui5, table, columns, page-editor, annotation

STEP: Include SAP icon stylesheet and reference image
DESCRIPTION: Include the SAP icon font stylesheet used by the Page Editor UI and reference the example image used in the documentation.
LANGUAGE: HTML
CODE:
```html
<!-- include SAP icons used by Page Editor UI -->
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>

<!-- reference screenshot image used in the docs -->
<img src="images/Basic_Column_8c30f41.png" alt="Basic Column example" />
```

STEP: Add Basic Column (UI steps)
DESCRIPTION: UI procedure to add one or multiple basic columns to a table using the Page Editor. Use this sequence when scripting UI tests or translating the UI flow into configuration changes.
LANGUAGE: Text
CODE:
```text
UI Steps (Page Editor):
1. Click the + (Add) icon next to the Columns node.
2. Click "Add Basic Columns".
3. Select one or more values in the Columns dropdown (you can filter by typing).
4. Click "Add".
Note: You cannot add the same value twice to the same table.
```

STEP: Add Basic Columns (configuration example)
DESCRIPTION: JSON/JS representation of adding basic columns to a table. Use this template to generate or validate config payloads that represent added columns. Replace example values with actual model property names and required values.
LANGUAGE: JavaScript
CODE:
```javascript
// Example table configuration with multiple basic columns added
const tableConfig = {
  id: "SalesTable",
  columns: [
    {
      id: "colCustomerName",
      type: "BasicColumn",
      label: "Customer Name",
      valueProperty: "CustomerName", // property in the data model
    },
    {
      id: "colOrderAmount",
      type: "BasicColumn",
      label: "Order Amount",
      valueProperty: "OrderAmount",
    }
  ]
};
```

STEP: Basic Column properties (schema + example)
DESCRIPTION: The common properties available for basic columns. Some properties are only applicable depending on the value type (string, numeric, boolean) or draft enablement. Use these keys when producing column metadata/config objects.
LANGUAGE: JavaScript
CODE:
```javascript
// Example basic column metadata object showing available properties
const basicColumn = {
  // Common
  id: "colExample",
  type: "BasicColumn",
  label: "Label text",
  valueProperty: "PropertyName",     // model property name this column binds to
  importance: "High",                // e.g., "High" | "Medium" | "Low"
  hidden: false,
  externalId: "ext-id-001",

  // Display/text (not for Boolean)
  text: "{PropertyName}",            // template or binding for display text
  textArrangement: "TextOnly",       // e.g., "TextOnly", "TextLast", "TextFirst"

  // String-only
  displayType: "Plain",              // e.g., "Plain" | "Link" | "Emphasized"

  // Restrictions / validation
  restrictions: [],

  // String & numeric
  criticality: "None",               // e.g., "None" | "Positive" | "Negative"
  criticalityRepresentation: "Icon", // e.g., "Icon" | "Color"

  // Image display
  displayAsImage: false,

  // Numeric-only
  measure: null,                     // e.g., "kg" or measure metadata
  currency: null,                    // currency property name

  // Navigation / semantic object
  semanticObject: "Customer",
  semanticObjectProperty: "CustomerID"
};
```

STEP: Move Basic Column (UI options)
DESCRIPTION: Two UI options to move columns within a table. When converting to config changes, this is effectively reordering the columns array.
LANGUAGE: Text
CODE:
```text
UI Options:
- Drag and Drop:
  Hover the column outline, press and hold mouse, move to desired position (eligible positions highlighted).
  Note: You can move multiple columns at once by selecting multiple columns then dragging.

- Arrow Icons:
  Click Move Up or Move Down icons next to the column name. This moves one column at a time.
```

STEP: Move Basic Column (reorder array example)
DESCRIPTION: Programmatic example: reorder columns in the table columns array to represent moving a column in the UI. Adjust indices or use utility functions to reinsert.
LANGUAGE: JavaScript
CODE:
```javascript
// Reorder helper: move item at fromIndex to toIndex in-place
function moveItem(array, fromIndex, toIndex) {
  const [item] = array.splice(fromIndex, 1);
  array.splice(toIndex, 0, item);
  return array;
}

// Example usage: move column at index 2 to index 0
tableConfig.columns = moveItem(tableConfig.columns, 2, 0);
```

STEP: Delete Basic Column (UI steps)
DESCRIPTION: UI steps to delete a column from the Page Editor. Confirm action via the Delete Confirmation dialog.
LANGUAGE: Text
CODE:
```text
UI Steps (Page Editor):
1. Navigate to the column.
2. Click the Delete (trash) icon to open the Delete Confirmation popup.
3. Click "Delete" to confirm.
```

STEP: Delete Basic Column (configuration example)
DESCRIPTION: Programmatic example: remove column metadata from the table configuration (remove by id).
LANGUAGE: JavaScript
CODE:
```javascript
// Remove column by id
function removeColumnById(tableConfig, columnId) {
  tableConfig.columns = tableConfig.columns.filter(c => c.id !== columnId);
  return tableConfig;
}

// Example: delete column with id 'colOrderAmount'
tableConfig = removeColumnById(tableConfig, 'colOrderAmount');
```

STEP: Notes and tips
DESCRIPTION: Quick rules to preserve when generating or validating column configurations.
LANGUAGE: Text
CODE:
```text
- You cannot add the same value/property twice to the same table column set.
- Some properties are conditional:
  - Text and Text Arrangement: apply to all value types except Boolean.
  - Display Type: applies to string values.
  - Criticality and Criticality Representation: apply to string and numeric values.
  - Measures and Currencies: apply to numeric values.
- You may see a subset of properties depending on value type and draft enablement in the editor UI.
```

--------------------------------

**TITLE**: Basic Fields — Add, Move, Delete, and Maintain UI.FieldGroup Entries (Fiori Tools)

**INTRODUCTION**: This document provides concise, code-focused guidance and annotated examples for programmatically adding, moving, deleting, and maintaining basic fields in Fiori Tools pages by editing annotation files (XML/JSON) that contain UI.FieldGroup / UI.DataField records. Use these snippets when automating editor actions, implementing CI changes, or generating annotations for Fiori Elements apps.

**TAGS**: fiori-tools, annotations, UI.FieldGroup, UI.DataField, OData, XML, JSON, automation, code-generation

STEP: Add a Basic Field (annotation-level change)

DESCRIPTION: To add a new field to an existing section, insert a UI.DataField record into the UI.FieldGroup Data collection for the target entity in your annotations file. Typical file locations: app/annotations/<service>-annotations.xml or app/annotations/annotations.json. The editor UI performs this same change behind the scenes.

LANGUAGE: XML

CODE:
```xml
<!-- File: app/annotations/<service>-annotations.xml -->
<!-- Add a new UI.DataField for property NewProperty to the FieldGroup Data collection -->
<Annotations Target="MyService.MyEntityType">
  <Annotation Term="UI.FieldGroup">
    <Collection>
      <Record Type="UI.FieldGroupType">
        <PropertyValue Property="Label" String="General"/>
        <PropertyValue Property="Data">
          <Collection>
            <!-- existing fields -->
            <Record Type="UI.DataField">
              <PropertyValue Property="Value">
                <Path>ExistingProperty1</Path>
              </PropertyValue>
            </Record>

            <!-- NEW field added by code or generator -->
            <Record Type="UI.DataField">
              <PropertyValue Property="Value">
                <Path>NewProperty</Path>
              </PropertyValue>
              <!-- Optional: label override for this DataField -->
              <PropertyValue Property="Label" String="Customer Number"/>
            </Record>

            <!-- more fields -->
          </Collection>
        </PropertyValue>
      </Record>
    </Collection>
  </Annotation>
</Annotations>
```

STEP: Add a Basic Field (JSON annotation file)

DESCRIPTION: Same operation using a JSON annotations file. Insert an object representing UI.DataField inside the UI.FieldGroup Data array.

LANGUAGE: JSON

CODE:
```json
// File: app/annotations/annotations.json
{
  "MyService.MyEntityType": {
    "UI.FieldGroup": [
      {
        "Label": { "String": "General" },
        "Data": [
          { "RecordType": "UI.DataField", "Value": { "Path": "ExistingProperty1" } },

          // NEW field
          { "RecordType": "UI.DataField", "Value": { "Path": "NewProperty" }, "Label": { "String": "Customer Number" } }
        ]
      }
    ]
  }
}
```

STEP: Move a Basic Field (editor semantics / programmatic re-order)

DESCRIPTION: The editor supports drag-and-drop and arrow-button moves. Programmatically, move fields by reordering the UI.DataField records inside the UI.FieldGroup Data collection. Maintain the same Record objects but change their sequence.

LANGUAGE: XML

CODE:
```xml
<!-- Reorder Data entries in the FieldGroup Data collection to move NewProperty up -->
<PropertyValue Property="Data">
  <Collection>
    <!-- Put NewProperty earlier to move it up -->
    <Record Type="UI.DataField">
      <PropertyValue Property="Value"><Path>NewProperty</Path></PropertyValue>
    </Record>

    <Record Type="UI.DataField">
      <PropertyValue Property="Value"><Path>ExistingProperty1</Path></PropertyValue>
    </Record>
  </Collection>
</PropertyValue>
```

LANGUAGE: JSON

CODE:
```json
// Programmatic reorder example: move indices in the Data array
{
  "MyService.MyEntityType": {
    "UI.FieldGroup": [
      {
        "Data": [
          { "RecordType": "UI.DataField", "Value": { "Path": "NewProperty" } },
          { "RecordType": "UI.DataField", "Value": { "Path": "ExistingProperty1" } }
        ]
      }
    ]
  }
}
```

STEP: Move Multiple Fields (selection and batch reorder)

DESCRIPTION: When moving multiple fields, select multiple UI.DataField records (Ctrl+Click in UI). Programmatically, extract the contiguous or non-contiguous entries and insert them as a block into the desired position in the Data array.

LANGUAGE: JSON

CODE:
```json
// Example: move two fields together by splicing them into the target position
{
  "MyService.MyEntityType": {
    "UI.FieldGroup": [
      {
        "Data": [
          // before: A, B, C, D
          { "RecordType": "UI.DataField", "Value": { "Path": "A" } },
          { "RecordType": "UI.DataField", "Value": { "Path": "B" } },
          { "RecordType": "UI.DataField", "Value": { "Path": "C" } },
          { "RecordType": "UI.DataField", "Value": { "Path": "D" } }

          // after programmatic move (e.g., move B and C after D):
          // A, D, B, C
        ]
      }
    ]
  }
}
```

STEP: Delete a Basic Field (annotation removal)

DESCRIPTION: Deleting a field removes the UI.DataField record from the UI.FieldGroup Data collection. The underlying entity property and other annotations on that property remain untouched. Update annotation files to remove the target UI.DataField record.

LANGUAGE: XML

CODE:
```xml
<!-- Remove the UI.DataField record referencing PropertyToDelete -->
<PropertyValue Property="Data">
  <Collection>
    <!-- Keep these -->
    <Record Type="UI.DataField">
      <PropertyValue Property="Value"><Path>ExistingProperty1</Path></PropertyValue>
    </Record>

    <!-- DELETED: Do not include the following record -->
    <!-- <Record Type="UI.DataField"><PropertyValue Property="Value"><Path>PropertyToDelete</Path></PropertyValue></Record> -->
  </Collection>
</PropertyValue>
```

STEP: Maintain Basic Field Properties (editable properties list + examples)

DESCRIPTION: Field-level properties can be set/changed in annotations or via the editor. Editable properties include:
- Criticality
- Display as Image
- External ID
- Hidden
- Hide by Property
- Label
- Restrictions (None, Optional, Mandatory, ReadOnly)
- Semantic Object Name
- Semantic Object Property Mapping
- Text
- Text Arrangement
- Display Type

Use the appendix links for full vocabularies and exact annotation terms. Examples below show how to change the section label (FieldGroup.Label) and set a DataField label.

LANGUAGE: XML

CODE:
```xml
<!-- Change FieldGroup (section) label -->
<Annotations Target="MyService.MyEntityType">
  <Annotation Term="UI.FieldGroup">
    <Collection>
      <Record Type="UI.FieldGroupType">
        <PropertyValue Property="Label" String="New Section Label"/>
        <PropertyValue Property="Data">
          <Collection>
            <Record Type="UI.DataField">
              <PropertyValue Property="Value"><Path>SomeProperty</Path></PropertyValue>
              <!-- Per-field label override -->
              <PropertyValue Property="Label" String="Some Property Label"/>
            </Record>
          </Collection>
        </PropertyValue>
      </Record>
    </Collection>
  </Annotation>
</Annotations>
```

STEP: Where editor restrictions and base-layer annotations matter

DESCRIPTION: Notes to preserve behavior parity with the editor:
- Excluded from the Add Fields dialog: properties typed Edm.Guid; draft-specific properties (IsActiveEntity, HasActiveEntity, HasDraftEntity); draft-specific navigation properties (SiblingEntity, DraftAdministrativeData); properties already referenced in any section.
- You cannot add the same field twice to the same section.
- When a backend (base) layer defines restriction values, the editor displays the option with the suffix "(base layer)". If the back-end restriction cannot be resolved, the base layer value may appear as "Complex (base layer)".
- If the object page entity is not draft-enabled (read-only), Display Type and Restrictions are not available in the property panel because the fields are not editable.

LANGUAGE: Plain text

CODE:
```text
CSS used by editor UI icons:
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```

STEP: Editor semantics mapped to annotation-level operations (summary)

DESCRIPTION: Map common editor actions to annotation file edits:
- Add Field: Insert UI.DataField into FieldGroup.Data collection.
- Move Field: Reorder UI.DataField entries in the FieldGroup.Data collection.
- Move Multiple Fields: Splice multiple UI.DataField entries as a block to the new position.
- Delete Field: Remove UI.DataField entry from FieldGroup.Data; do not delete property-level annotations unless explicitly intended.
- Change Section Label: Update UI.FieldGroup.Label property value.

LANGUAGE: Plain text

CODE:
```text
Editor action -> Annotation change mapping:
- Add: insert <Record Type="UI.DataField"> ... </Record>
- Move: reorder Records inside <PropertyValue Property="Data"><Collection> ... </Collection></PropertyValue>
- Delete: remove the relevant Record entry from the Data collection
- Change label: update UI.FieldGroup.Record.PropertyValue Property="Label"
```

References: For annotation vocabularies and exact annotation terms (Criticality, Display as Image, SemanticObject mappings, Text Arrangement, etc.) see the referenced appendix pages in your documentation set (appendix-457f2e9.md and basic-fields-2953503.md).
--------------------------------

**TITLE**: Change the Code — Using Copy / Insert Snippet and Parameters in Fiori Tools Guides

**INTRODUCTION**: Practical, code-focused instructions for applying guided-development code snippets in SAP Fiori Tools. Shows how to copy/insert snippets, fill parameter values, handle validation, use qualifiers and prefilled parameters, and automatically generate i18n keys. Includes concrete code examples and file paths to use in CI or automation scenarios.

**TAGS**: fiori-tools, guided-development, snippets, i18n, ui5, code-gen, parameters

**STEP**: 1 — Use Copy / Insert Snippet

**DESCRIPTION**: Copy or insert a prepared code snippet into the target file. Use Copy to place snippet on clipboard for manual edits. Use Insert Snippet to automatically inject the snippet into the relevant project file; the change is highlighted and you’ll see the confirmation message "Code snippet has been successfully applied".

Insert Snippet will be disabled if the guide cannot be applied (for example: different OData version, wrong page type, or no project selected). When Insert Snippet succeeds, verify the file and commit changes.

**LANGUAGE**: HTML

**CODE**:
```html
<!-- Example: add SAP icons stylesheet to your index.html or component preload -->
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```

**STEP**: 2 — Snippet Template Format & Placeholder Replacement

**DESCRIPTION**: Snippets use placeholders for dynamic values. Replace placeholders before inserting or let the guided UI request parameter values. Use consistent placeholder patterns so automation can replace values (example uses ${ParamName}).

- Required parameters: marked with an asterisk in the UI — must be filled.
- Dependent parameters: may be disabled until previous parameter is selected.
- Validation: inline errors will block Insert Snippet until fixed.

Example snippet template with placeholders and how it should look after replacement.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Snippet template (before insertion) -->
<ObjectPageSection id="${SectionId}">
  <title>${SectionTitle}</title>
  <!-- Additional content here -->
</ObjectPageSection>

<!-- After parameter replacement -->
<ObjectPageSection id="shippingDetails">
  <title>Shipping Details</title>
  <!-- Additional content here -->
</ObjectPageSection>
```

**STEP**: 3 — Handling Dependent Parameters and Validation

**DESCRIPTION**: Some parameters are context-dependent (populated only when the project context exists). Some dropdowns are static. Dependent parameters are marked with an Information icon in the UI. Inline validation will show errors for missing mandatory input, format issues, or duplicate parameter values. Correct the input to re-enable Insert Snippet.

Referenced UI images (for manual verification or automated tests):
- images/Change_Code_Image_1_7cbbc7c.png
- images/FIORI_TOOLS_UG_INLINE_VALID_db40824.jpg
- images/Change_Code_Image_2_200809f.png

**LANGUAGE**: JSON

**CODE**:
```json
{
  "note": "If Insert Snippet is disabled, verify project selection, OData version, and page type."
}
```

**STEP**: 4 — Prefilled Parameters and Qualifier-Based Updates

**DESCRIPTION**: Some guides prefill subsequent step parameters based on earlier selections (e.g., Entity selected in step 1 -> prefilled in step 2). To update existing annotations with qualifiers, enter the existing qualifier in the guide; the UI will populate parameters with current values which you can edit and re-insert.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "example": {
    "guide": "Add a field group to an object page",
    "qualifier": "MyQualifier",
    "result": "Guide populates current annotation values for editing"
  }
}
```

**STEP**: 5 — Generate i18n Keys from UI Inputs

**DESCRIPTION**: To generate an i18n key from an input field in a guide:
1. Enter the display text into the input.
2. Click the Internationalization (globe) icon.
3. In the popup click Apply to generate the key and insert it into webapp/i18n/i18n.properties.
4. Use the key in views/controllers via the i18n model binding.

UI images for reference:
- images/Label_world_f412916.png
- images/Apply_button_6cd182b.png
- images/label_world_button_with_arrow_090dd99.png

**LANGUAGE**: Properties

**CODE**:
```properties
# File: webapp/i18n/i18n.properties
shippingDetails.title=Shipping Details
order.status=Order Status
```

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Example: reference i18n key in an XML view (UI5 binding) -->
<Text text="{i18n>shippingDetails.title}" />
```

**STEP**: 6 — Example: Inserted Snippet File Context and Paths

**DESCRIPTION**: Typical target files and paths for inserted snippets in a Fiori project. Use these exact paths for programmatic insertion or validation in CI tests.

- Views and fragments: webapp/view/, webapp/fragment/
- i18n file: webapp/i18n/i18n.properties
- Stylesheets: webapp/css/, example link ../css/sap-icons.css
- Images used in docs: images/Change_Code_Image_1_7cbbc7c.png (relative to guide content)

**LANGUAGE**: JSON

**CODE**:
```json
{
  "paths": {
    "views": "webapp/view/",
    "fragments": "webapp/fragment/",
    "i18n": "webapp/i18n/i18n.properties",
    "css": "webapp/css/",
    "docs_images": "images/Change_Code_Image_1_7cbbc7c.png"
  }
}
```

**STEP**: 7 — Confirming Insertion and Troubleshooting

**DESCRIPTION**: After Insert Snippet:
- Confirm the inserted change is highlighted in the file and look for "Code snippet has been successfully applied".
- If Insert Snippet is disabled or you see errors, check: selected project, OData version, page type mismatch, missing mandatory parameters, or dependent fields not populated.
- Resolve inline validation messages, duplicate parameter values, or provide required context values and retry.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "success_message": "Code snippet has been successfully applied",
  "troubleshoot": [
    "Verify project selection",
    "Check OData version and page type",
    "Fill mandatory parameters",
    "Resolve inline validation errors",
    "Remove duplicate parameter values"
  ]
}
```
--------------------------------

**TITLE**: Chart Column — Add, Configure and Sort UI.Chart / UI.DataPoint Annotations

**INTRODUCTION**: Practical, code-focused examples for adding chart columns to Fiori tables using UI.Chart and UI.DataPoint annotations (annotation XML), enabling presentation-variant sorting, and related manifest configuration. Includes file paths and minimal HTML/manifest snippets for integration with the Page Editor.

**TAGS**: fiori-tools, annotations, ui.chart, ui.datapoint, presentationVariant, manifest.json, sapui5, page-editor

STEP: 1 — Static assets referenced by Page Editor / docs

DESCRIPTION: Link the SAP icon stylesheet used by the Page Editor preview and reference the chart image that may be used in docs or previews. Keep paths relative to your documentation or project folder.

LANGUAGE: HTML

CODE:
```html
<!-- Place in your documentation or preview HTML -->
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
<!-- Example image path used in docs -->
<!-- images/Chart_Column_b8ccb9a.png -->
<img src="images/Chart_Column_b8ccb9a.png" alt="Chart Column preview"/>
```

STEP: 2 — Add a Column Chart column using annotations (annotations.xml)

DESCRIPTION: Minimal working example that adds a Column chart on an entity by creating a UI.Chart annotation plus a UI.DataPoint annotation. Update the path/target to your entity (Namespace.EntityType). The Page Editor generally creates these annotations automatically; this example is how they look in annotation XML.

LANGUAGE: XML

CODE:
```xml
<!-- File: annotations/annotations.xml -->
<Annotations Target="MyService.Product">
  <!-- Chart column annotation (Column chart) -->
  <Annotation Term="UI.Chart" Qualifier="Chart_Column_1">
    <Record>
      <!-- Chart type: Column, Area, Line, Comparison, etc. -->
      <PropertyValue Property="ChartType" String="Column"/>
      <!-- Dimensions -> x-axis -->
      <PropertyValue Property="Dimensions">
        <Collection>
          <PropertyPath>Category</PropertyPath>
        </Collection>
      </PropertyValue>
      <!-- Measures -> numeric values shown in chart -->
      <PropertyValue Property="Measures">
        <Collection>
          <PropertyPath>SalesAmount</PropertyPath>
        </Collection>
      </PropertyValue>
      <!-- Reference the DataPoint (detailed numeric semantics & criticality) -->
      <PropertyValue Property="DataPoint" AnnotationPath="@UI.DataPoint#DP_ColumnSales"/>
    </Record>
  </Annotation>

  <!-- DataPoint annotation referenced by the chart -->
  <Annotation Term="UI.DataPoint" Qualifier="DP_ColumnSales">
    <Record>
      <!-- Value provides the numeric data path -->
      <PropertyValue Property="Value" Path="SalesAmount"/>
      <!-- Optional: target or maximum path for percent/goal visualization -->
      <PropertyValue Property="TargetValue" Path="SalesTarget"/>
      <!-- Optional: indicate criticality (e.g., Good/Bad/Neutral) -->
      <PropertyValue Property="Criticality" Path="SalesCriticality"/>
      <!-- Optional descriptive label -->
      <PropertyValue Property="Label" String="Sales"/>
    </Record>
  </Annotation>
</Annotations>
```

STEP: 3 — Add an Area or Line chart (multi-measure example)

DESCRIPTION: Example for area/line charts that include multiple measures. Use Measures as a collection of property paths. Dimensions define the x-axis (time, category).

LANGUAGE: XML

CODE:
```xml
<!-- File: annotations/annotations.xml -->
<Annotations Target="MyService.Sales">
  <Annotation Term="UI.Chart" Qualifier="Chart_Area_1">
    <Record>
      <PropertyValue Property="ChartType" String="Area"/>
      <PropertyValue Property="Dimensions">
        <Collection>
          <PropertyPath>FiscalDate</PropertyPath>
        </Collection>
      </PropertyValue>
      <PropertyValue Property="Measures">
        <Collection>
          <PropertyPath>AmountActual</PropertyPath>
          <PropertyPath>AmountPlanned</PropertyPath>
        </Collection>
      </PropertyValue>
      <PropertyValue Property="DataPoint" AnnotationPath="@UI.DataPoint#DP_SalesAmount"/>
    </Record>
  </Annotation>

  <Annotation Term="UI.DataPoint" Qualifier="DP_SalesAmount">
    <Record>
      <PropertyValue Property="Value" Path="AmountActual"/>
      <PropertyValue Property="TargetValue" Path="AmountPlanned"/>
      <PropertyValue Property="Label" String="Actual vs Planned"/>
    </Record>
  </Annotation>
</Annotations>
```

STEP: 4 — Bullet / Radial / Harvey chart DataPoint properties (examples of numeric properties)

DESCRIPTION: Example DataPoint records for chart types that require explicit maximum/minimum/forecast properties. Replace property names with your entity’s numeric fields. The UI.Chart annotation should reference the DataPoint qualifier accordingly.

LANGUAGE: XML

CODE:
```xml
<!-- File: annotations/annotations.xml -->
<Annotations Target="MyService.KPIs">
  <!-- Example: Bullet chart referencing DataPoint with maximum and minimum -->
  <Annotation Term="UI.Chart" Qualifier="Chart_Bullet_1">
    <Record>
      <PropertyValue Property="ChartType" String="Bullet"/>
      <PropertyValue Property="Measures">
        <Collection>
          <PropertyPath>ProgressValue</PropertyPath>
        </Collection>
      </PropertyValue>
      <PropertyValue Property="DataPoint" AnnotationPath="@UI.DataPoint#DP_BulletProgress"/>
    </Record>
  </Annotation>

  <Annotation Term="UI.DataPoint" Qualifier="DP_BulletProgress">
    <Record>
      <PropertyValue Property="Value" Path="ProgressValue"/>
      <!-- MaximumValuePath represents the maximum scale -->
      <PropertyValue Property="MaxValue" Path="MaxScaleValue"/>
      <!-- Optional: specify type details (fixed, dynamic) in attributes or additional metadata -->
      <PropertyValue Property="MinValue" Path="MinScaleValue"/>
      <PropertyValue Property="ForecastValue" Path="ForecastValue"/>
      <PropertyValue Property="Label" String="Progress"/>
      <PropertyValue Property="Criticality" Path="ProgressCriticality"/>
    </Record>
  </Annotation>
</Annotations>
```

STEP: 5 — Stacked bar / Comparison / Harvey charts — minimal annotation pattern

DESCRIPTION: Pattern is identical: set ChartType (StackedBar, Comparison, Harvey, Radial), add Measures and Dimensions as needed, reference a DataPoint that defines Value, TargetValue, and Criticality.

LANGUAGE: XML

CODE:
```xml
<!-- File: annotations/annotations.xml -->
<Annotations Target="MyService.Orders">
  <Annotation Term="UI.Chart" Qualifier="Chart_StackedBar_1">
    <Record>
      <PropertyValue Property="ChartType" String="StackedBar"/>
      <PropertyValue Property="Measures">
        <Collection>
          <PropertyPath>OpenQty</PropertyPath>
          <PropertyPath>DeliveredQty</PropertyPath>
        </Collection>
      </PropertyValue>
      <PropertyValue Property="DataPoint" AnnotationPath="@UI.DataPoint#DP_OrderQty"/>
    </Record>
  </Annotation>

  <Annotation Term="UI.DataPoint" Qualifier="DP_OrderQty">
    <Record>
      <PropertyValue Property="Value" Path="OpenQty"/>
      <PropertyValue Property="TargetValue" Path="PlannedQty"/>
      <PropertyValue Property="Criticality" Path="QtyCriticality"/>
      <PropertyValue Property="Label" String="Order Quantities"/>
    </Record>
  </Annotation>
</Annotations>
```

STEP: 6 — Enable sort (Presentation Variant) for chart micro-charts (UI.PresentationVariant + SortOrder)

DESCRIPTION: To allow Sort Order for micro chart columns, create a UI.PresentationVariant annotation with SortOrder collection. The Page Editor shows the Sort Order property only when a PresentationVariant is referenced. Use AnnotationPath from the Chart to reference a PresentationVariant if needed, or reference it from the table/line item annotation. Example shows PresentationVariant with two sort properties and directions.

LANGUAGE: XML

CODE:
```xml
<!-- File: annotations/annotations.xml -->
<Annotations Target="MyService.Sales">
  <!-- PresentationVariant annotation (qualifier) providing sorting definitions -->
  <Annotation Term="UI.PresentationVariant" Qualifier="PV_ChartSort1">
    <Record>
      <PropertyValue Property="SortOrder">
        <Collection>
          <Record>
            <PropertyValue Property="Property" PropertyPath="FiscalDate"/>
            <PropertyValue Property="Descending" Bool="true"/>
          </Record>
          <Record>
            <PropertyValue Property="Property" PropertyPath="Region"/>
            <PropertyValue Property="Descending" Bool="false"/>
          </Record>
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>

  <!-- Example: reference the PresentationVariant from your chart column (if applicable) -->
  <Annotation Term="UI.Chart" Qualifier="ChartWithPV">
    <Record>
      <PropertyValue Property="ChartType" String="Line"/>
      <PropertyValue Property="Dimensions">
        <Collection>
          <PropertyPath>FiscalDate</PropertyPath>
        </Collection>
      </PropertyValue>
      <PropertyValue Property="Measures">
        <Collection>
          <PropertyPath>AmountActual</PropertyPath>
        </Collection>
      </PropertyValue>
      <!-- If your UI expects a PresentationVariant reference, link it here -->
      <PropertyValue Property="PresentationVariant" AnnotationPath="@UI.PresentationVariant#PV_ChartSort1"/>
      <PropertyValue Property="DataPoint" AnnotationPath="@UI.DataPoint#DP_SalesAmount"/>
    </Record>
  </Annotation>
</Annotations>
```

STEP: 7 — manifest.json: set minUI5Version to enable PresentationVariant Sort Order in Page Editor

DESCRIPTION: The Sort Order property in the Page Editor is visible only when minUI5Version is 1.130 or higher. Set minUI5Version in your app's manifest.json.

LANGUAGE: JSON

CODE:
```json
// File: webapp/manifest.json (snippet)
{
  "sap.ui5": {
    "dependencies": {
      "minUI5Version": "1.130.0"
    }
  }
}
```

STEP: 8 — Move and delete chart columns (Page Editor UI guidance for code maintainers)

DESCRIPTION: Use Page Editor drag-and-drop or arrow move icons to reorder columns. To remove a chart column, delete the column in the Page Editor and then remove the unreferenced UI.Chart and UI.DataPoint annotations from your annotations file. A cleanup step (manual or script) can remove unreferenced UI.PresentationVariant qualifiers.

LANGUAGE: Text

CODE:
```text
// Actions performed in the Page Editor (no code):
// - Move: drag-and-drop column headers or use Move Up / Move Down icons next to column names.
// - Delete: click Delete (wastebasket) icon on column to remove. Then:
//   1) Open annotations/annotations.xml
//   2) Remove the UI.Chart annotation with the matching Qualifier.
//   3) Remove the UI.DataPoint annotation referenced by it.
//   4) Optionally run a cleanup to remove unreferenced UI.PresentationVariant annotations.
```

STEP: 9 — Notes & best practices

DESCRIPTION: Quick actionable notes to follow when generating chart column annotations programmatically or manually.

LANGUAGE: Text

CODE:
```text
- The Page Editor creates the minimal UI.Chart and UI.DataPoint annotations for a new chart column; expand them manually to add thresholds, criticality, target values, and labels.
- For area, line, column, comparison, and stackedBar micro-charts, PresentationVariant-based SortOrder works (requires minUI5Version >= 1.130).
- Use AnnotationPath references like @UI.DataPoint#Qualifier and @UI.PresentationVariant#Qualifier to link annotations.
- Keep annotation qualifiers unique per file to avoid collisions (e.g., Chart_Column_1, DP_ColumnSales, PV_ChartSort1).
- When deleting a chart column from the UI, remove unreferenced annotations from annotations/annotations.xml to keep the file clean.
```
--------------------------------

**TITLE**: Add, Configure, and Remove a Chart Section (UI.Chart / UI.ReferenceFacet)

**INTRODUCTION**: This document gives practical, code-focused instructions and reusable annotation snippets to:
- Add a Chart Section to an Object Page (UI.Chart + UI.ReferenceFacet in UI.Facets)
- Create or reference a measure (including dynamic aggregated measures)
- Remove the Chart Section
- Handle CAP CDS overrides (add using statements if required)
Use these examples as templates — replace placeholder names with your actual service/entity/property names.

**TAGS**: UI.Chart, UI.ReferenceFacet, UI.Facets, Analytics.AggregatedProperty, CAP, CDS, annotations, object page, chart, fiori-tools

STEP: Add Chart Section (UI.Facets + UI.ReferenceFacet referencing UI.Chart)

DESCRIPTION: Add a ReferenceFacet in the UI.Facets collection that points to a qualified UI.Chart annotation. Replace placeholders (SERVICE, Entity, Qualifier names, Labels) with actual values from your project. If UI.Facets does not exist under the target entity, create the annotation set and include both UI.ReferenceFacet and UI.Chart annotations.

LANGUAGE: XML (OData annotation XML)

CODE:
```xml
<!-- Replace SERVICE, EntityName, and Qualifier names -->
<Annotations Target="SERVICE.EntityName">
  <!-- UI.Facets collection with a ReferenceFacet pointing to the chart -->
  <Annotation Term="UI.Facets">
    <Collection>
      <Record Type="UI.ReferenceFacet">
        <PropertyValue Property="Label" String="Sales Chart"/>
        <!-- AnnotationPath points to the qualified UI.Chart -->
        <PropertyValue Property="Target" AnnotationPath="@UI.Chart#SalesChart"/>
      </Record>
      <!-- Other facets can follow -->
    </Collection>
  </Annotation>

  <!-- The UI.Chart annotation (qualified by #SalesChart) -->
  <Annotation Term="UI.Chart" Qualifier="SalesChart">
    <Record>
      <!-- Example: chart type (Column, Line, Donut, etc.) -->
      <PropertyValue Property="ChartType" EnumMember="UI.ChartType/Column"/>
      <!-- Dimensions: list of property paths -->
      <PropertyValue Property="Dimensions">
        <Collection>
          <PropertyPath>Country</PropertyPath>
        </Collection>
      </PropertyValue>
      <!-- Measures: reference to an aggregated property or existing measure -->
      <PropertyValue Property="Measures">
        <Collection>
          <!-- Example referencing an aggregated property by annotation path or existing measure -->
          <AnnotationPath>@Analytics.AggregatedProperty#Revenue_SUM</AnnotationPath>
          <!-- or reference an existing measure property directly -->
          <!-- <PropertyPath>TotalRevenue</PropertyPath> -->
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

STEP: Create Dynamic Aggregated Measure (Analytics.AggregatedProperty)

DESCRIPTION: To create a dynamic measure, annotate the aggregable property with an Analytics.AggregatedProperty qualifier specifying the chosen aggregation method. Use a unique Qualifier (e.g., Revenue_SUM). Place these annotations in the same annotation file or the appropriate annotations layer for your project.

LANGUAGE: XML (OData annotation XML)

CODE:
```xml
<!-- Annotate the base property with an aggregated property qualifier -->
<!-- Target is the property path: SERVICE.EntityName/PropertyName -->
<Annotations Target="SERVICE.EntityName/Revenue">
  <Annotation Term="Analytics.AggregatedProperty" Qualifier="Revenue_SUM">
    <Record>
      <!-- Name used by the chart measure reference -->
      <PropertyValue Property="Name" String="Revenue_SUM"/>
      <!-- Aggregation method: SUM, AVG, COUNT, MIN, MAX, etc. -->
      <PropertyValue Property="Aggregation" String="SUM"/>
      <!-- Optional: additional metadata, label, etc. -->
      <PropertyValue Property="Label" String="Revenue (Sum)"/>
    </Record>
  </Annotation>
</Annotations>
```

STEP: Resulting Side Effects (Checklist after Add)

DESCRIPTION: After adding a chart section via the editor or programmatically, ensure the following changes have been applied or verified:
- A UI.Chart annotation exists (qualified) and a UI.ReferenceFacet is present under UI.Facets with annotationPath -> UI.Chart#Qualifier.
- If a new aggregated measure was created, an Analytics.AggregatedProperty annotation is present on the selected aggregable property.
- If UI.Facets did not exist yet for the entity, a new UI.Facets annotation collection was created.
- If UI.Facets exists in an underlying layer, your annotation should override it (verify the override is applied in the correct layer).
- For CAP CDS projects, a "using" statement for the annotation namespaces must be present in the overridden annotation file—add it if missing (see next step for a placeholder).

LANGUAGE: None

CODE:
```text
Checklist:
- UI.Facets contains a UI.ReferenceFacet pointing to @UI.Chart#<Qualifier>
- UI.Chart#<Qualifier> exists with Dimensions and Measures set
- @Analytics.AggregatedProperty#<Qualifier> exists if dynamic measure was created
- Layer override behaviour verified (overrides underlying annotation if needed)
- CAP CDS "using" statement present in the overridden annotations file (if applicable)
```

STEP: CAP CDS – Add using statement if missing

DESCRIPTION: When working with CAP (CDS) annotations, ensure the annotation file contains a using statement for annotation namespaces you reference. Replace <annotation-namespace> with the actual namespace your project uses.

LANGUAGE: CDS / annotation file (text)

CODE:
```text
// Example placeholder: add at top of your annotations .cds file
using { UI, Analytics } from '<annotation-namespace>';
// Replace <annotation-namespace> with the actual annotation namespace used in your repository/project.
// Example: using { UI, Analytics } from '@sap/cds/annotations'  (replace with your project-specific namespace)
```

STEP: Delete Chart Section (Remove UI.ReferenceFacet; cleanup)

DESCRIPTION: To remove a chart section from the UI:
- Remove the UI.ReferenceFacet record from the UI.Facets collection for the target entity.
- The UI.Chart annotation itself will be cleaned up later by the annotation cleanup procedure (verify and remove if appropriate).
- If you manually remove the UI.ReferenceFacet, ensure there are no remaining references to the UI.Chart qualifier to avoid orphan annotations.

LANGUAGE: XML (OData annotation XML removal example)

CODE:
```xml
<!-- Remove the ReferenceFacet entry pointing to the chart. Example before removal: -->
<Annotation Term="UI.Facets">
  <Collection>
    <Record Type="UI.ReferenceFacet">
      <PropertyValue Property="Label" String="Sales Chart"/>
      <PropertyValue Property="Target" AnnotationPath="@UI.Chart#SalesChart"/>
    </Record>
    <!-- other facets -->
  </Collection>
</Annotation>

<!-- After deletion: remove the Record above. Optionally, run cleanup to remove UI.Chart if unused. -->
```

STEP: Maintain Chart Properties (Property Panel and further settings)

DESCRIPTION: Update labels and other chart-specific properties via the Property Panel in the editor or by editing the annotation XML. For additional chart settings consult the analytical chart properties guide and change form section label guide. Use the following doc reference paths to edit or script changes:
- Change section label: form-section-4102b3d.md#loio4102b3d63d9047c881108e6f0caae15e__changeformsectionlabel
- Analytical chart properties: analytical-chart-9c086ec.md#loio9c086ecaace540be83b0e50101244e78__analyticalchartproperties
- Hidden property info: appendix-457f2e9.md#loiof7ad71792a0044d6b6172f078827bdc0

LANGUAGE: None

CODE:
```text
Actions:
- To change chart label: update ReferenceFacet Label (UI.Facets -> UI.ReferenceFacet -> PropertyValue Label)
- To change dimension/measure config: edit UI.Chart annotation (ChartType, Dimensions, Measures)
- To create/modify dynamic measures: adjust Analytics.AggregatedProperty qualifier on the base property
- Refer to the linked docs for step-by-step GUI actions and property explanations
```

STEP: Include sap-icons stylesheet (UI in editor preview)

DESCRIPTION: The editor previews and some UI samples reference sap-icons. Ensure the stylesheet is available relative to your docs or preview HTML.

LANGUAGE: HTML

CODE:
```html
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```
--------------------------------

**TITLE**: XML Annotation Language Server — Code Completion Guide for Editors

**INTRODUCTION**: Practical, example-driven guide showing how to trigger and use the XML annotation language server code completion in an editor (e.g., VS Code). Includes keyboard triggers, navigation behavior, and concrete XML examples you can paste into your project to observe completion of annotation targets, terms, attributes, path segments, and code-block snippets.

**TAGS**: fiori-tools, annotations, code-completion, XML, OData, VSCode, editor-integration

STEP: 1 — Trigger code completion

DESCRIPTION: Use the editor's code completion keyboard shortcut to open the suggestion list at the current cursor location inside an annotation file. This example uses a typical annotation file path webapp/annotations/annotations.xml.

LANGUAGE: Text

CODE:
```text
Keyboard shortcuts:
- Windows/Linux: Ctrl+Space
- macOS: Cmd+Space
```

STEP: 2 — Example: Complete an Annotation Target attribute

DESCRIPTION: Place the cursor inside the Target attribute to trigger completion. The language server suggests entity sets, types, and complex targets from project metadata/OData vocabularies. Example shows an incomplete target and then the expected completed value after accepting a suggestion.

LANGUAGE: XML

CODE:
```xml
<!-- File: webapp/annotations/annotations.xml -->
<Annotations xmlns="http://docs.oasis-open.org/odata/ns/edm">
  <!-- Put cursor between the quotes below and press Ctrl+Space / Cmd+Space -->
  <Annotations Target="">

  </Annotations>
</Annotations>

<!-- After selecting a suggested target such as "MyService.MyEntityType": -->
<Annotations xmlns="http://docs.oasis-open.org/odata/ns/edm">
  <Annotations Target="MyService.MyEntityType">

  </Annotations>
</Annotations>
```

STEP: 3 — Segment-based path completion using '/'

DESCRIPTION: When editing a path-like target or navigation path (e.g., complex navigation path or annotation target segments), accept a suggestion for the current segment by pressing '/' to commit the segment and immediately trigger suggestions for the next segment. Example simulates completing a path "SalesOrder/Items/Product".

LANGUAGE: XML

CODE:
```xml
<!-- Cursor inside Path attribute or annotation target path; press Ctrl+Space -->
<PropertyValue Property="Path" String="">

<!-- Type "Sales" then Ctrl+Space -> accept "SalesOrder" and press '/' to continue -->
<PropertyValue Property="Path" String="SalesOrder/Items/Product" />
```

STEP: 4 — Term and attribute completion inside Annotation elements

DESCRIPTION: Trigger completion when adding Terms, Qualifiers or attributes inside an Annotation element. The language server shows vocabulary terms and their expected value kinds (Record, Collection, String, Bool, etc.). This example shows adding a UI v1 LineItem annotation with term suggestions.

LANGUAGE: XML

CODE:
```xml
<!-- Example: adding a ui.LineItem annotation to an entity type -->
<Annotations Target="MyService.SalesOrder">
  <!-- Put cursor after <Annotation and press Ctrl+Space to get Term suggestions -->
  <Annotation Term=""></Annotation>
</Annotations>

<!-- After accepting "com.sap.vocabularies.UI.v1.LineItem", completion may insert a template -->
<Annotations Target="MyService.SalesOrder">
  <Annotation Term="com.sap.vocabularies.UI.v1.LineItem">
    <Record>
      <PropertyValue Property="Value">
        <Collection>
          <!-- suggested Record/PropertyValue templates for LineItem entries -->
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

STEP: 5 — Value and code-block snippet insertion (Record / PropertyValue templates)

DESCRIPTION: When a term expects a complex value (Record, Collection, PropertyValue), the language server offers code-block snippets. Accepting a snippet inserts a minimal structure that you can fill. Example shows choosing a Record snippet for a PropertyValue.

LANGUAGE: XML

CODE:
```xml
<!-- Example: start adding a PropertyValue, press Ctrl+Space to see value snippets -->
<PropertyValue Property="Value" />

<!-- After selecting a Record snippet, server inserts: -->
<PropertyValue Property="Value">
  <Record>
    <!-- you can now press Ctrl+Space inside to get PropertyValue suggestions -->
  </Record>
</PropertyValue>
```

STEP: 6 — Word-based completion and filtering

DESCRIPTION: You can filter suggestions by typing additional characters. Partial words produce a narrowed suggestion list. Use arrow keys or mouse to navigate and Enter or click to accept.

LANGUAGE: XML

CODE:
```xml
<!-- Example: type a partial term "Line" then Ctrl+Space to filter to LineItem/vocab entries -->
<Annotation Term="Line"></Annotation>
```

STEP: 7 — Behavior summary: navigation and acceptance

DESCRIPTION: Quick reference for interaction behavior while using completion lists.

LANGUAGE: Text

CODE:
```text
- Open suggestions: Ctrl+Space (Windows/Linux), Cmd+Space (macOS)
- Navigate: Up / Down arrows or mouse
- Accept: Enter key or mouse click
- Accept segment and continue: type '/' after an accepted path segment
- Filter: type additional characters to narrow list
- Snippets: selecting a snippet inserts a template (Record, Collection, PropertyValue)
```

STEP: 8 — Troubleshooting tips for implementers

DESCRIPTION: Ensure the language server has access to project metadata, local OData vocabularies, and annotation files for accurate suggestions. Place annotation files into your project annotation folder (e.g., webapp/annotations/) and open them in the editor running the XML annotation language server.

LANGUAGE: Text

CODE:
```text
- Ensure OData service metadata is available (local or configured service)
- Include OData vocabulary files if using custom vocabularies
- Open the annotation XML file in the editor to enable context-aware suggestions
```
--------------------------------

**TITLE**: Configure SAP Fiori elements Page Editor — actionable steps and code examples

**INTRODUCTION**: Action-oriented guide for developers to configure SAP Fiori elements applications using the Page Editor. Includes commands to install and inspect @sap/ux-specification, sample manifest edits (minUI5Version), how to include sap-icons CSS, enabling JSON schema files in workspace settings, and a short Node script to read the installed ux-specification module. Use these snippets inside your app root to automate or script configuration tasks and to prepare the project for the Page Editor.

**TAGS**: fiori-tools, sapui5, sap-fiori-elements, page-editor, ux-specification, manifest, minUI5Version, json-schema

**STEP**: 1 — Install @sap/ux-specification into the application root

**DESCRIPTION**: Install the specification module into your application's root folder. Use an explicit version matching your UI5 target (find versions in npm). Install as a dev dependency if only needed for tooling.

**LANGUAGE**: Shell

**CODE**:
```bash
# From the application's root folder:
# Replace <version> with the desired @sap/ux-specification version (see Step 2 to list versions)
npm install @sap/ux-specification@<version> --save-dev
```

**STEP**: 2 — List available @sap/ux-specification versions to pick the correct UI5 mapping

**DESCRIPTION**: Query npm to get the published versions of the package. Choose a version that corresponds to your target UI5 release (check UI5-* tags on npm or the package release notes).

**LANGUAGE**: Shell

**CODE**:
```bash
# List versions (JSON output)
npm view @sap/ux-specification versions --json

# Optionally, see the latest published version
npm view @sap/ux-specification version
```

**STEP**: 3 — Quick Node script to inspect installed @sap/ux-specification content

**DESCRIPTION**: Example Node script to require the installed module and print top-level keys. Useful when scripting automated checks or generating configuration documentation from the spec.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// scripts/inspect-ux-spec.js
// Run: node scripts/inspect-ux-spec.js
const path = require('path');

try {
  const uxSpec = require(path.join(process.cwd(), 'node_modules', '@sap', 'ux-specification'));
  console.log('Loaded @sap/ux-specification from:', path.join(process.cwd(), 'node_modules', '@sap', 'ux-specification'));
  console.log('Top-level keys:', Object.keys(uxSpec).slice(0, 50));
} catch (err) {
  console.error('Failed to load @sap/ux-specification. Did you run npm install?', err.message);
  process.exit(1);
}
```

**STEP**: 4 — Update minUI5Version in webapp/manifest.json

**DESCRIPTION**: Edit the application's manifest.json to set or change minUI5Version. This controls the minimum SAPUI5 runtime required. Place this snippet in webapp/manifest.json (or the manifest file used by your project).

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.app": {
    "id": "your.app.id",
    "applicationVersion": { "version": "1.0.0" }
  },
  "sap.ui5": {
    "dependencies": {
      "minUI5Version": "1.88.0"
    }
  }
}
```

**STEP**: 5 — Include sap-icons CSS in your entry HTML (index.html)

**DESCRIPTION**: Ensure icons are available by including the sap-icons stylesheet. Adjust the relative path according to your project layout. Example shows a relative path to ../css/sap-icons.css as in the original project layout.

**LANGUAGE**: HTML

**CODE**:
```html
<!-- webapp/index.html (or your HTML entry) -->
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css" />
```

**STEP**: 6 — Open and use the Page Editor (UI actions with quick references)

**DESCRIPTION**: The Page Editor is UI-driven. Below are the supported ways to open it in the Fiori Tools-enabled environment. Use these actions to open the outline, select page nodes, and edit properties in the Property Panel.

**LANGUAGE**: Bash

**CODE**:
```bash
# UI action checklist (perform these in the IDE / workspace UI)
# 1) Right-click the app root (or any folder in Explorer) -> "Show Page Map"
# 2) In Project Sidebar (Application Modeler), click the page node you want to configure
# 3) Select a page and click the ✎ (Configure Page) icon in the Page Editor
# 4) Open a page's virtual JSON file and click the "Show Page Editor" icon in the Editor Title menu
# Note: After opening, click any node in the Page Editor outline to show editable properties in the Property Panel.
```

**STEP**: 7 — Enable display of generated JSON schema files for the Application Modeler tree view

**DESCRIPTION**: Toggle the setting that exposes the generated JSON schema files in the application modeler tree view so you can see the technical/expanded view. Add this to your workspace settings (.vscode/settings.json). Replace the key if your environment uses a different setting name for the Fiori Tools extension.

**LANGUAGE**: JSON

**CODE**:
```json
// .vscode/settings.json
{
  // Enable showing JSON schemas in the application modeler tree view.
  // If your Fiori Tools extension uses a different key name, replace accordingly.
  "fiori-tools.showJsonSchemas": true
}
```

**STEP**: 8 — Supported SAP Fiori elements templates (reference list)

**DESCRIPTION**: The Page Editor supports these templates (useful for deciding whether annotation-based editing or manifest editing is applicable):

**LANGUAGE**: JSON

**CODE**:
```json
{
  "supportedTemplates": [
    "List Report Page (OData V2, OData V4)",
    "Worklist Page (OData V2, OData V4)",
    "Analytical List Page (OData V2, OData V4)",
    "Overview Page (OData V2, OData V4)",
    "Form Entry Object Page (OData V4)",
    "Custom Page (OData V4)"
  ]
}
```
--------------------------------

**TITLE**: Connected Fields — Object Page (SAP Fiori Tools) Annotations and Examples

**INTRODUCTION**: Practical, code-centered guide for adding, moving, deleting, and maintaining "Connected Fields" on Object Page sections using SAP Fiori annotation formats (OData XML, CDS, and programmatic cleanup). Includes examples for label, delimiter, hidden (static and dynamic), and how connected fields are referenced inside UI.FieldGroup / UI.Identification. Use these snippets when generating or editing annotation files or writing automation scripts for UI annotation maintenance.

**TAGS**: fiori-tools, connected-fields, UI.ConnectedFields, UI.FieldGroup, UI.Identification, OData, annotations, XML, CDS, Node.js, javascript

STEP: 1 — Add Connected Fields (OData EDMX XML)

DESCRIPTION: Create a UI.ConnectedFields annotation record and reference two properties as DataField entries. Example shows Label, Data collection with two DataField records, optional Delimiter, and optional Hidden (static). Place the annotation either inside the entityType annotations or in a separate annotations XML file registered in the service metadata.

LANGUAGE: XML

CODE:
```xml
<?xml version="1.0" encoding="utf-8"?>
<edmx:Edmx Version="4.0" xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx">
  <edmx:DataServices>
    <Schema xmlns="http://docs.oasis-open.org/odata/ns/edm" Namespace="MyService">
      <EntityType Name="BusinessObject">
        <!-- entity properties declared here -->
      </EntityType>

      <!-- UI annotations for BusinessObject -->
      <Annotations Target="MyService.BusinessObject">
        <Annotation Term="com.sap.vocabularies.UI.v1.FieldGroup" Qualifier="MyFormSection">
          <Collection>
            <!-- Standard DataField example -->
            <Record Type="com.sap.vocabularies.UI.v1.DataField">
              <PropertyValue Property="Value">
                <PropertyPath>SomeProperty</PropertyPath>
              </PropertyValue>
              <PropertyValue Property="Label" String="Some Label"/>
            </Record>

            <!-- Connected fields node -->
            <Record Type="com.sap.vocabularies.UI.v1.ConnectedFields">
              <PropertyValue Property="Label" String="Full Name"/>
              <PropertyValue Property="Data">
                <Collection>
                  <Record Type="com.sap.vocabularies.UI.v1.DataField">
                    <PropertyValue Property="Value">
                      <PropertyPath>FirstName</PropertyPath>
                    </PropertyValue>
                  </Record>
                  <Record Type="com.sap.vocabularies.UI.v1.DataField">
                    <PropertyValue Property="Value">
                      <PropertyPath>LastName</PropertyPath>
                    </PropertyValue>
                  </Record>
                </Collection>
              </PropertyValue>
              <!-- Optional delimiter between values (text characters, not translatable) -->
              <PropertyValue Property="Delimiter" String=" "/>
              <!-- Optional static hidden -->
              <PropertyValue Property="Hidden" Bool="false"/>
            </Record>
          </Collection>
        </Annotation>
      </Annotations>

    </Schema>
  </edmx:DataServices>
</edmx:Edmx>
```

STEP: 2 — Add Connected Fields (CDS annotation example)

DESCRIPTION: If using Core Data Services (CDS) for annotations, define the connected fields in the entity view or projection using @UI annotations. This example demonstrates a ConnectedFields-like structure in CDS comment-style mapping. Use your generator to translate into correct UI annotation record structure shown in XML above.

LANGUAGE: CDS

CODE:
```cds
namespace my.service;

using { cuid } from './common';

entity BusinessObject {
  key ID      : UUID;
      FirstName : String(100);
      LastName  : String(100);
      IsHidden  : Boolean;
}

/* Example CDS UI annotation (tooling often compiles this into OData UI annotations) */
annotate my.service.BusinessObject with
  @UI : {
    FieldGroup : [
      {
        // Basic field
        Data : [{ Value: 'SomeProperty' }]
      },
      {
        // "ConnectedFields" modeled as a FieldGroup entry with multiple Data fields
        // (tooling will generate com.sap.vocabularies.UI.v1.ConnectedFields record)
        Label : 'Full Name',
        Data  : [{ Value: 'FirstName' }, { Value: 'LastName' }],
        Delimiter : ' ',
        Hidden : false
      }
    ]
  };
```

STEP: 3 — Maintain Label, Delimiter, Hidden (XML examples)

DESCRIPTION: Show explicit examples for updating label, delimiter (non-translatable string), and Hidden (static boolean or dynamic by property path). Use these exact PropertyValue names so code generators can target fields to update.

LANGUAGE: XML

CODE:
```xml
<!-- Change Label -->
<PropertyValue Property="Label" String="Customer Name"/>

<!-- Set Delimiter to a colon (non-translatable) -->
<PropertyValue Property="Delimiter" String=":"/>

<!-- Static Hidden -->
<PropertyValue Property="Hidden" Bool="true"/>

<!-- Dynamic Hidden: hide when property IsHidden is true -->
<PropertyValue Property="Hidden">
  <Path>IsHidden</Path>
</PropertyValue>
```

STEP: 4 — Reorder / Move Connected Fields (annotation collection reordering)

DESCRIPTION: Reordering or moving a ConnectedFields node within a FieldGroup or to another FieldGroup is implemented by changing the sequence of records in the Collection of the target annotation. Example shows before and after ordering. Use code generation to change collection order or move the entire ConnectedFields record into another FieldGroup/Annotation target.

LANGUAGE: XML

CODE:
```xml
<!-- BEFORE: ConnectedFields is the second entry -->
<Annotation Term="com.sap.vocabularies.UI.v1.FieldGroup" Qualifier="MainSection">
  <Collection>
    <Record Type="com.sap.vocabularies.UI.v1.DataField"> ...SomeProperty... </Record>
    <Record Type="com.sap.vocabularies.UI.v1.ConnectedFields"> ...Full Name... </Record>
    <Record Type="com.sap.vocabularies.UI.v1.DataField"> ...AnotherProperty... </Record>
  </Collection>
</Annotation>

<!-- AFTER: moved ConnectedFields to be first -->
<Annotation Term="com.sap.vocabularies.UI.v1.FieldGroup" Qualifier="MainSection">
  <Collection>
    <Record Type="com.sap.vocabularies.UI.v1.ConnectedFields"> ...Full Name... </Record>
    <Record Type="com.sap.vocabularies.UI.v1.DataField"> ...SomeProperty... </Record>
    <Record Type="com.sap.vocabularies.UI.v1.DataField"> ...AnotherProperty... </Record>
  </Collection>
</Annotation>
```

STEP: 5 — Delete Connected Fields (effect on annotations)

DESCRIPTION: Deleting the connected fields node requires removing the UI.ConnectedFields record and its subnodes from the FieldGroup or Identification annotation. The UI.DataField records that were part of the ConnectedFields are removed from UI.FieldGroup/UI.Identification. Annotations applied to the underlying entity properties are not deleted. After deletion, run a cleanup to remove orphaned UI.ConnectedFields records if they exist elsewhere.

LANGUAGE: XML

CODE:
```xml
<!-- BEFORE deletion -->
<Annotation Term="com.sap.vocabularies.UI.v1.FieldGroup" Qualifier="MainSection">
  <Collection>
    <Record Type="com.sap.vocabularies.UI.v1.ConnectedFields">
      <PropertyValue Property="Label" String="Full Name"/>
      <PropertyValue Property="Data">
        <Collection>
          <Record Type="com.sap.vocabularies.UI.v1.DataField">
            <PropertyValue Property="Value"><PropertyPath>FirstName</PropertyPath></PropertyValue>
          </Record>
          <Record Type="com.sap.vocabularies.UI.v1.DataField">
            <PropertyValue Property="Value"><PropertyPath>LastName</PropertyPath></PropertyValue>
          </Record>
        </Collection>
      </PropertyValue>
    </Record>
    <!-- other entries -->
  </Collection>
</Annotation>

<!-- AFTER deletion: ConnectedFields entry removed -->
<Annotation Term="com.sap.vocabularies.UI.v1.FieldGroup" Qualifier="MainSection">
  <Collection>
    <!-- ConnectedFields record removed; other entries remain -->
  </Collection>
</Annotation>
```

STEP: 6 — Cleanup Orphaned UI.ConnectedFields (Node.js script example)

DESCRIPTION: Automated cleanup script: parse an annotations XML file, find UI.ConnectedFields records that are not referenced in UI.FieldGroup or UI.Identification collections, and remove them. This example uses xml2js to parse/edit/write XML. Adjust paths and namespaces per your annotation file.

LANGUAGE: JavaScript

CODE:
```javascript
// node cleanup-connected-fields.js
// Usage: node cleanup-connected-fields.js annotations.xml > cleaned-annotations.xml

const fs = require('fs');
const xml2js = require('xml2js');

const inputFile = process.argv[2];
if (!inputFile) {
  console.error('Usage: node cleanup-connected-fields.js annotations.xml');
  process.exit(1);
}

const xml = fs.readFileSync(inputFile, 'utf8');
const parser = new xml2js.Parser({ explicitArray: false });
const builder = new xml2js.Builder();

parser.parseString(xml, (err, result) => {
  if (err) throw err;

  // Navigate to Schema -> Annotations (adjust to file structure)
  const schema = result['edmx:Edmx']['edmx:DataServices'].Schema;
  const annotations = Array.isArray(schema.Annotation) ? schema.Annotation : [schema.Annotation];

  // Collect all ConnectedFields records (by identity string)
  // and collect references from FieldGroup / Identification collections.
  const connectedRecords = [];
  const referencedConnected = new Set();

  // Utility to scan a collection and push connected records
  function scanAnnotationCollection(annotation) {
    if (!annotation || !annotation.Collection) return;
    const items = Array.isArray(annotation.Collection.Record) ? annotation.Collection.Record : [annotation.Collection.Record];
    items.forEach(item => {
      if (item.$ && item.$.Type && item.$.Type.endsWith('ConnectedFields')) {
        // use a simple identity key: JSON string of Label+Data property paths
        const label = (item.PropertyValue || []).find(p => p.$ && p.$.Property === 'Label') || {};
        const data = (item.PropertyValue || []).find(p => p.$ && p.$.Property === 'Data') || {};
        const key = JSON.stringify({ label: label.String || null, data: data.Collection ? data.Collection.Record : null });
        connectedRecords.push({ key, item, parentCollection: annotation.Collection });
      }
    });
  }

  // Scan all Annotations nodes to collect connected fields and references
  const allAnnotations = Array.isArray(schema.Annotation) ? schema.Annotation : [schema.Annotation];
  allAnnotations.forEach(ann => {
    const term = ann.$ && ann.$.Term;
    if (!ann.Collection) return;
    const records = Array.isArray(ann.Collection.Record) ? ann.Collection.Record : [ann.Collection.Record];
    records.forEach(rec => {
      const recType = rec.$ && rec.$.Type;
      if (recType && recType.endsWith('ConnectedFields')) {
        // track connected records
        const labelPV = Array.isArray(rec.PropertyValue) ? rec.PropertyValue.find(p => p.$.Property === 'Label') : rec.PropertyValue;
        const dataPV = Array.isArray(rec.PropertyValue) ? rec.PropertyValue.find(p => p.$.Property === 'Data') : rec.PropertyValue;
        const key = JSON.stringify({ label: labelPV && labelPV.String, data: dataPV && dataPV.Collection && dataPV.Collection.Record });
        connectedRecords.push({ key, rec, parentAnn: ann });
      } else {
        // inspect normally referenced DataField items (to detect possible references)
      }
    });
  });

  // Simple cleanup: remove duplicate or unreferenced ConnectedFields records in same file
  // (Implement project-specific logic to detect "orphaned" annotations)
  // Example: remove ConnectedFields records with identical label+data more than once
  const seen = new Set();
  connectedRecords.forEach(cr => {
    if (seen.has(cr.key)) {
      // Remove this record from its parent collection
      const parent = cr.parentAnn.Collection;
      if (Array.isArray(parent.Record)) {
        const idx = parent.Record.indexOf(cr.rec);
        if (idx >= 0) parent.Record.splice(idx, 1);
      } else if (parent.Record === cr.rec) {
        delete parent.Record;
      }
    } else {
      seen.add(cr.key);
    }
  });

  const out = builder.buildObject(result);
  console.log(out);
});
```

STEP: 7 — Icon stylesheet for UI in documentation or local previews

DESCRIPTION: If your documentation or UI preview requires SAP icons, include the sap-icons.css path as in the original documentation.

LANGUAGE: HTML

CODE:
```html
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```

STEP: 8 — Important constraints and operational notes (action-oriented)

DESCRIPTION: Action-focused checklist for code generators and editors:
- You cannot select a property already used by another ConnectedFields node within the same section. Enforce uniqueness when adding or moving fields.
- You cannot move ConnectedFields to the Header Section — implement validation preventing moves to header target annotations.
- To change which properties compose the ConnectedFields node, remove the full ConnectedFields record and create a new one with the desired DataField entries.
- Deleting a ConnectedFields node removes its UI.DataField records from UI.FieldGroup/UI.Identification; it does not delete annotations applied directly to entity properties.
- The Delimiter string is non-translatable: treat it as literal text.
- Hidden can be a static boolean or a Path to a boolean property. Example dynamic: <PropertyValue Property="Hidden"><Path>IsHidden</Path></PropertyValue>

LANGUAGE: Plain text

CODE:
```text
Checklist for automation:
- Validate property is not used by another ConnectedFields in same section.
- When moving, adjust the ordering inside the target <Annotation Term="...FieldGroup"> Collection.
- When deleting, remove the ConnectedFields record and its nested DataField entries.
- Optionally run annotation cleanup to remove leftover/unreferenced UI.ConnectedFields records.
```


--------------------------------

**TITLE**: Contact Column for Fiori Tools List Report / Object Page

**INTRODUCTION**: This guide shows how to add, move, and delete a Contact Column in tables used by Fiori Tools list reports or object page sections. It includes the Page Editor steps and explicit annotation examples (XML and JSON) that create a Communication.Contact annotation used by the Contact Column.

**TAGS**: fiori-tools, contact column, annotations, Communication.Contact, UI.LineItem, OData, annotations.xml, JSON

**STEP**: Add Contact Column using Page Editor

**DESCRIPTION**: Use the Fiori Tools Page Editor UI to add a Contact Column quickly. This creates a Communication.Contact annotation automatically and lets you change label/importance/hidden/contact mapping in the Property Panel.

**LANGUAGE**: None

**CODE**:
```text
1. In the Page Editor, under the Columns node, click the + (Add) icon.
2. Select "Add Contact Column".
3. In the tree control select the Contacts fields you want to map.
4. Click "Add". A new com.sap.vocabularies.Communication.v1.Contact annotation is created.
5. Optionally, edit Label / Importance / Hidden / Contact mapping in the Property Panel.
```

**STEP**: Manual annotation (XML) — Add Contact Column via annotations.xml

**DESCRIPTION**: Add a Communication.Contact annotation into your local annotations XML file (example path: webapp/annotations/annotations.xml). The snippet below shows a UI.LineItem entry that renders a Contact column. Replace namespace, entity type, and paths to match your model properties (ContactName, Phone, Email).

**LANGUAGE**: XML

**CODE**:
```xml
<?xml version="1.0" encoding="utf-8"?>
<edmx:Edmx Version="4.0" xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx">
  <edmx:DataServices>
    <Schema Namespace="MyService" xmlns="http://docs.oasis-open.org/odata/ns/edm">
      <EntityType Name="BusinessPartner">
        <Property Name="ContactName" Type="Edm.String" />
        <Property Name="Phone" Type="Edm.String" />
        <Property Name="Email" Type="Edm.String" />
      </EntityType>

      <!-- UI.LineItem with a Contact column using Communication.Contact -->
      <Annotations Target="MyService.BusinessPartner">
        <Annotation Term="com.sap.vocabularies.UI.v1.LineItem">
          <Collection>
            <Record Type="com.sap.vocabularies.UI.v1.DataField">
              <PropertyValue Property="Label" String="Contact" />
              <PropertyValue Property="Value">
                <Record Type="com.sap.vocabularies.Communication.v1.Contact">
                  <PropertyValue Property="Name" Path="ContactName" />
                  <PropertyValue Property="Telephone" Path="Phone" />
                  <PropertyValue Property="Email" Path="Email" />
                </Record>
              </PropertyValue>
            </Record>
            <!-- other columns here -->
          </Collection>
        </Annotation>
      </Annotations>
    </Schema>
  </edmx:DataServices>
</edmx:Edmx>
```

**STEP**: Manual annotation (JSON) — Add Contact Column via annotations.json

**DESCRIPTION**: If you prefer JSON-based local annotations (example path: webapp/annotations/annotations.json), add a UI.LineItem entry that references com.sap.vocabularies.Communication.v1.Contact. Adjust the service/entity names and property paths to your model.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "Annotations": {
    "MyService.BusinessPartner": {
      "UI": {
        "LineItem": [
          {
            "Record": {
              "Type": "UI.DataField",
              "Label": { "String": "Contact" },
              "Value": {
                "Record": {
                  "Type": "com.sap.vocabularies.Communication.v1.Contact",
                  "Name": { "Path": "ContactName" },
                  "Telephone": { "Path": "Phone" },
                  "Email": { "Path": "Email" }
                }
              }
            }
          }
          /* other columns here */
        ]
      }
    }
  }
}
```

**STEP**: Include SAP icons CSS (optional visual correctness)

**DESCRIPTION**: Ensure SAP icon font CSS is available in your app if you rely on UI icons used by Fiori Tools editors/screenshots. Example: update index.html or the app shell to reference the icons CSS.

**LANGUAGE**: HTML

**CODE**:
```html
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```

**STEP**: Move Contact Column in Page Editor

**DESCRIPTION**: Reorder columns inside a table in the Page Editor using drag-and-drop or arrow icons. Multiple selection + CTRL allows moving multiple columns at once.

**LANGUAGE**: None

**CODE**:
```text
Drag and Drop:
- Hover over the table column outline, press and hold the mouse button, drag to a highlighted eligible position (green), and release.
- To move multiple columns at once: select multiple columns and use CTRL + drag.

Arrow Icons:
- Click the Move Up or Move Down icon next to the column name to move a single column one position at a time.
```

**STEP**: Delete Contact Column in Page Editor

**DESCRIPTION**: Remove an existing Contact Column in the Page Editor.

**LANGUAGE**: None

**CODE**:
```text
1. Navigate to the column in the Page Editor.
2. Click the Delete (wastebasket) icon.
3. Confirm by clicking "Delete" in the Delete Confirmation popup.
```

**STEP**: Image and asset references

**DESCRIPTION**: Assets referenced in the original documentation (for documentation or editor UI) are included here for clarity on file locations.

**LANGUAGE**: None

**CODE**:
```text
- Icons CSS path example: ../css/sap-icons.css
- Screenshot path example: images/FIORI_TOOLS_CONTACT_COLUMN_0e0431c.png
```
--------------------------------

**TITLE**: Contact Field (com.sap.vocabularies.Communication.v1.Contact) — SAP Fiori Tools

**INTRODUCTION**: This document explains how to add, move, and delete a Contact Field (quick view) in an Object Page Form or Identification Section using Fiori Tools Page Editor. It shows the exact UI steps and the resulting annotation examples (XML, JSON, CDS) to generate or edit in your annotations files. Include the sap-icons stylesheet in index.html if you use icon glyphs.

**TAGS**: fiori-tools, object-page, contact, Communication.Contact, annotations, CDS, XML, JSON, UI5

**STEP**: Add Contact Field (UI)
**DESCRIPTION**: Use the Page Editor to create a Contact Field which creates a Communication.Contact annotation entry in your annotation files.
- Open Page Editor.
- Under the Form or Identification node, click the + (Add) icon and choose Add Contact Field.
- Select Contact in the tree control and click Add. The editor will create a com.sap.vocabularies.Communication.v1.Contact annotation for the target property or entity navigation path.
**LANGUAGE**: None
**CODE**:
```html
<!-- Include in index.html if using icon glyphs (preserve path as in your project) -->
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```

**STEP**: Example Annotation — XML (annotations file)
**DESCRIPTION**: Example of the generated/required OData annotation in an XML annotations file. Replace MyService.MyEntity/ContactInfo and property Path values with your real service/entity/property names. Save under your project annotations folder (examples: webapp/annotations/annotations.xml or app/annotations/annotations.xml).
**LANGUAGE**: XML
**CODE**:
```xml
<?xml version="1.0" encoding="utf-8"?>
<Annotations Target="MyService.MyEntity/ContactInfo" xmlns="http://docs.oasis-open.org/odata/ns/edm">
  <Annotation Term="com.sap.vocabularies.Communication.v1.Contact">
    <Record>
      <!-- Map record fields to entity properties -->
      <PropertyValue Property="Person" Path="ContactPerson"/>
      <PropertyValue Property="Email" Path="EmailAddress"/>
      <PropertyValue Property="Phone" Path="PhoneNumber"/>
      <PropertyValue Property="Mobile" Path="MobileNumber"/>
      <!-- Optional: Address, Fax etc. -->
    </Record>
  </Annotation>
</Annotations>
```

**STEP**: Example Annotation — JSON (annotations file)
**DESCRIPTION**: Same annotation in annotation JSON format. Useful for projects that store UI annotations in JSON under webapp/annotations/*.annotations.json.
**LANGUAGE**: JSON
**CODE**:
```json
{
  "MyService.MyEntity/ContactInfo": {
    "com.sap.vocabularies.Communication.v1.Contact": {
      "Person": { "Path": "ContactPerson" },
      "Email": { "Path": "EmailAddress" },
      "Phone": { "Path": "PhoneNumber" },
      "Mobile": { "Path": "MobileNumber" }
    }
  }
}
```

**STEP**: Example Annotation — CDS (Core Data Services)
**DESCRIPTION**: Annotate a CDS entity field so Fiori Tools can generate the contact quick view. Place this in your .cds definition or annotation file. Replace property names and types to match your model.
**LANGUAGE**: CDS
**CODE**:
```cds
entity MyEntity {
  key ID          : UUID;
  ContactPerson   : String(100);
  EmailAddress    : String(100);
  PhoneNumber     : String(30);
  MobileNumber    : String(30);

  @com.sap.vocabularies.Communication.v1.Contact: {
    Person : { Path: 'ContactPerson' },
    Email  : { Path: 'EmailAddress' },
    Phone  : { Path: 'PhoneNumber' },
    Mobile : { Path: 'MobileNumber' }
  }
  ContactInfo     : String; // property or navigation target annotated above
}
```

**STEP**: Moving Contact Field
**DESCRIPTION**: Contact Fields can be rearranged within a section in the Page Editor like any field. You can move a contact field between sections except when the relative paths (annotation Target / Path values) no longer match the base annotation or navigation property. If you move the field, validate and update the annotation Target or Path to point to the new entity or navigation property.
**LANGUAGE**: XML/JSON (example change)
**CODE**:
```xml
<!-- If you move ContactInfo from MyEntity to a navigation property ContactNav, update Target accordingly -->
<Annotations Target="MyService.MyEntity/ContactNav">
  <Annotation Term="com.sap.vocabularies.Communication.v1.Contact">
    <Record>
      <PropertyValue Property="Person" Path="ContactPerson"/>
      <PropertyValue Property="Email" Path="EmailAddress"/>
    </Record>
  </Annotation>
</Annotations>
```

**STEP**: Delete Contact Field (UI)
**DESCRIPTION**: Remove a contact field from the Page Editor. This deletes the UI element but does not automatically delete annotation files unless you explicitly remove them.
- Select the field in Page Editor.
- Click the Delete (trash) icon.
- Confirm Delete in the popup.
**LANGUAGE**: None
**CODE**:
```text
// After UI deletion, remove/update the corresponding annotation entry from:
// webapp/annotations/annotations.xml
// or webapp/annotations/*.annotations.json
// Example: remove the com.sap.vocabularies.Communication.v1.Contact block for the target.
```
--------------------------------

**TITLE**: List of Guided Development Recipes (Actionable Steps & Templates)

**INTRODUCTION**: This document lists the currently available guided development recipes for Fiori tools. Each step is a concise, action-oriented instruction for code generation: which artifacts to change, the main actions to perform, and tiny template snippets (placeholders) for relevant file types (XML, CDS, manifest.json, TypeScript, JSON, or extension points). Use these as starting templates to implement each guided change programmatically.

**TAGS**: fiori-tools, guided-development, UI5, CAP, CDS, OData, manifest, XML, TypeScript, Extension Point, Flexible Programming Model, Page Configuration Change, Manifest Change

**STEP**: Add a chart building block
**DESCRIPTION**: Add a chart building block to a page: update backend model (CAP CDS or OData V4), expose an entity for the chart, and add a UI annotation or XML smart chart in the page.
**LANGUAGE**: CAP CDS, OData V4, Flexible Programming Model
**CODE**:
```text
# CAP CDS (schema.cds)
entity Sales {
  key ID : UUID;
  Amount : Decimal(16,2);
  Category : String;
}

# UI5 XML (view.fragment.xml)
<smartChart id="salesChart" entitySet="Sales" chartType="Column"/>
```

**STEP**: Add a custom action to a page using extensions
**DESCRIPTION**: Implement a custom action using extension points. Add TypeScript controller logic and register action for OData V2/V4.
**LANGUAGE**: OData V2, OData V4, TypeScript
**CODE**:
```text
# manifest.json - register extension (snippet)
"sap.ui5": {
  "extends": { "extensions": { "sap.ui.controllerExtensions": { "sap.ui.demo.controller.Main": { "controllerName": "ext.CustomAction" } } } }
}

# ext/CustomAction.controller.ts
export default class CustomAction {
  onCustomAction(oEvent: any) { /* call OData action/FunctionImport */ }
}
```

**STEP**: Add a custom card to an overview page
**DESCRIPTION**: Add a custom card entry in the overview page configuration (card XML or page configuration).
**LANGUAGE**: Extension Point
**CODE**:
```text
# overview.page.json (page configuration)
"cards": {
  "MyCustomCard": {
    "type": "Custom",
    "model": "myModel",
    "settings": {}
  }
}
```

**STEP**: Add a custom filter to the filter bar
**DESCRIPTION**: Insert a custom filter control via extension point or TypeScript; update filter bar configuration.
**LANGUAGE**: TypeScript, Extension Point
**CODE**:
```text
# extension controller (ext/FilterExt.ts)
export function addCustomFilter(oFilterBar) {
  oFilterBar.addFilter(new sap.m.Input({placeholder:"Custom"}));
}
```

**STEP**: Add a custom section to an object page using extensions
**DESCRIPTION**: Add an extension section to an object page; update extension point registration and provide fragment or controller.
**LANGUAGE**: OData V2, OData V4
**CODE**:
```text
# view fragment (fragments/CustomSection.fragment.xml)
<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core">
  <VBox><Text text="Custom section content"/></VBox>
</core:FragmentDefinition>

# manifest.json - register fragment via extension point
"sap.ui5": { "extensions": { "sap.ui.viewExtensions": { "sap.suite.ui.generic.template.ObjectPage.view.Details": { "sections": "fragments/CustomSection.fragment.xml" } } } }
```

**STEP**: Add a field group to an object page
**DESCRIPTION**: Add a new field group via XML view annotations or CDS annotations for CAP/ABAP CDS.
**LANGUAGE**: XML, CAP CDS, ABAP CDS
**CODE**:
```text
# XML fragment (object page)
<GenericDataFieldGroup id="myGroup" label="Address">
  <DataField uid="Street" Value="{Street}" />
  <DataField uid="City" Value="{City}" />
</GenericDataFieldGroup>

# CAP CDS annotation (schema.cds)
annotate MyService.MyEntity with {
  @UI.lineItem : [{ position: 10 }]
  @UI.fieldGroup : [{ label: 'Address', data: ['Street', 'City'] }]
}
```

**STEP**: Add a filter bar building block
**DESCRIPTION**: Add and configure a filter bar building block in a Flexible Programming Model application: create filter fields and bind to query.
**LANGUAGE**: Flexible Programming Model
**CODE**:
```text
# XML (filter bar)
<filter:FilterBar id="FilterBar" entitySet="Orders">
  <filter:FilterGroup>
    <filter:FilterField name="Customer" />
  </filter:FilterGroup>
</filter:FilterBar>
```

**STEP**: Add a header facet to an object page using data points
**DESCRIPTION**: Add a header facet (data point) to object page header via XML and CDS annotations to surface KPI/data point.
**LANGUAGE**: XML, CAP CDS, ABAP CDS
**CODE**:
```text
# XML (object header)
<header:DataPoint title="Total Sales" value="{TotalSales}" />

# CAP CDS (annotations)
annotate MyService.MyEntity with {
  @UI.headerInfo: { dataPoint: 'TotalSales' }
}
```

**STEP**: Add a link list card to an overview page
**DESCRIPTION**: Add a link list card by editing the overview page cards XML/JSON configuration.
**LANGUAGE**: XML
**CODE**:
```text
# Card XML
<Card type="linkList" id="LinkListCard">
  <content>
    <items>
      <Link text="Link 1" href="/link1"/>
    </items>
  </content>
</Card>
```

**STEP**: Add a list card to an overview page
**DESCRIPTION**: Add a list card configuration and bind to an OData entity set or local model.
**LANGUAGE**: XML
**CODE**:
```text
<Card type="list" id="ListCard">
  <list items="{path: '/Items'}">
    <items>
      <StandardListItem title="{Name}"/>
    </items>
  </list>
</Card>
```

**STEP**: Add a new contact view column to a table
**DESCRIPTION**: Add a column bound to contact view fields via XML table definition and CDS/annotations when applicable.
**LANGUAGE**: XML, CAP CDS, ABAP CDS
**CODE**:
```text
<!-- XML table column -->
<Column id="contactColumn" header="Contact">
  <Text text="{ContactName}"/>
</Column>
```

**STEP**: Add a new section to an object page
**DESCRIPTION**: Insert a new section fragment into the object page via XML and annotate backend if required.
**LANGUAGE**: XML, CAP CDS, ABAP CDS
**CODE**:
```text
<!-- fragment -->
<Section id="newSection" title="New Section">
  <form:SimpleForm>
    <Label text="Field"/>
    <Input value="{MyField}"/>
  </form:SimpleForm>
</Section>
```

**STEP**: Add a new visual filter to the filter bar
**DESCRIPTION**: Create a visual filter control bound to an entity property; update XML and capture semantic annotations in CDS.
**LANGUAGE**: XML, CAP CDS
**CODE**:
```text
<filter:VisualFilter id="VisualFilter" propertyPath="Status" />
```

**STEP**: Add a progress indicator column to a table
**DESCRIPTION**: Add a column rendering progress indicator (UI control) bound to a numeric property using XML and CDS annotations.
**LANGUAGE**: XML, CAP CDS, ABAP CDS
**CODE**:
```text
<Column>
  <ProgressIndicator value="{ProgressPercent}" displayValue="{ProgressPercent}"/>
</Column>
```

**STEP**: Add a rating indicator column to a table
**DESCRIPTION**: Insert a rating UI control in a table column; bind to rating numeric property.
**LANGUAGE**: XML, CAP CDS, ABAP CDS
**CODE**:
```text
<Column>
  <RatingIndicator value="{Rating}" maxValue="5" />
</Column>
```

**STEP**: Add a smart chart facet to an object page
**DESCRIPTION**: Add a smart chart facet using XML and update manifest/annotations to connect the chart to the right entity set.
**LANGUAGE**: XML, Manifest Change
**CODE**:
```text
<facet:SmartChart id="objectSmartChart" entitySet="Sales" chartVariant="Default" />
```

**STEP**: Add a smart micro chart column to a table
**DESCRIPTION**: Add a micro chart control as a column in a line item table bound to an entity path.
**LANGUAGE**: XML, CAP CDS, ABAP CDS
**CODE**:
```text
<Column>
  <micro:AreaChart points="{ path: 'Trend'}"/>
</Column>
```

**STEP**: Add a stack card to an overview page
**DESCRIPTION**: Add a stacked card configuration and bind internal parts to model data.
**LANGUAGE**: XML
**CODE**:
```text
<Card type="stack" id="StackCard">
  <stackItems>
    <StackItem title="Part1" value="{Value1}" />
  </stackItems>
</Card>
```

**STEP**: Add a static link list card to an overview page
**DESCRIPTION**: Add a static card entry to page configuration (no runtime binding) via page configuration change.
**LANGUAGE**: Page Configuration Change
**CODE**:
```text
# pageConfig.json
"cards": {
  "StaticLinks": {
    "type": "staticLinkList",
    "links": [{ "text":"Help", "href":"/help" }]
  }
}
```

**STEP**: Add a table card to an overview page
**DESCRIPTION**: Add a table-card to overview; bind to entitySet and set visible columns in XML.
**LANGUAGE**: XML, CAP CDS
**CODE**:
```text
<Card type="table" entitySet="Products">
  <table:Table>
    <columns><Column><Text text="Name"/></Column></columns>
  </table:Table>
</Card>
```

**STEP**: Add a table building block
**DESCRIPTION**: Create a table building block: update CDS model (CAP) or OData v4 model, add XML/SAP template for table.
**LANGUAGE**: CAP CDS, OData V4
**CODE**:
```text
# CDS
entity Products { key ID: UUID; Name: String; Price: Decimal(16,2); }

# XML table
<Table id="ProductsTable" entitySet="Products">
  <columns><Column><Text text="Name"/></Column></columns>
</Table>
```

**STEP**: Add an action button
**DESCRIPTION**: Add a button to the UI (XML) and wire it to an action handler or OData action.
**LANGUAGE**: XML
**CODE**:
```text
<Button text="Do Action" press=".onDoAction"/>
```

**STEP**: Add a value help to a field in the filter bar
**DESCRIPTION**: Add value help configuration for a filter field (value help dialog or suggestion); configure OData/valueHelp annotations.
**LANGUAGE**: XML, CAP CDS
**CODE**:
```text
<FilterField name="Customer">
  <core:Fragment fragmentName="valueHelp.CustomerVH"/>
</FilterField>
```

**STEP**: Add an analytical card to an overview page
**DESCRIPTION**: Add an analytical card configuration bound to analytic OData entity/annotations.
**LANGUAGE**: XML, CAP CDS
**CODE**:
```text
<Card type="analytical" entitySet="Sales">
  <analytical:Chart type="bar" />
</Card>
```

**STEP**: Add and edit filter fields
**DESCRIPTION**: Add new filter fields or edit existing ones in filter bar XML and update CDS annotations for default values and types.
**LANGUAGE**: XML, CAP CDS, ABAP CDS
**CODE**:
```text
<FilterField name="Status" width="15rem" />
```

**STEP**: Add and edit table columns
**DESCRIPTION**: Modify table column definitions in XML and adjust line item annotations in CDS.
**LANGUAGE**: XML, CAP CDS, ABAP CDS
**CODE**:
```text
<Column id="colStatus"><Text text="{Status}"/></Column>
```

**STEP**: Add custom columns to the table using extensions
**DESCRIPTION**: Insert custom columns via extension points (fragment/controller) to keep base template untouched.
**LANGUAGE**: Extension Point
**CODE**:
```text
# fragment registration via extension
<viewExtensions target="sap.suite.ui.generic.template.ListReport.view.ListReport">
  <fragment fragmentName="ext.CustomColumn"/>
</viewExtensions>

<!-- ext.CustomColumn.fragment.xml -->
<Column><Text text="Custom"/></Column>
```

**STEP**: Add an interactive chart to a list page
**DESCRIPTION**: Add an interactive chart component to a list page; bind to entity set and expose drilldown or selection behavior.
**LANGUAGE**: XML, CAP CDS
**CODE**:
```text
<smartChart id="interactiveChart" entitySet="Orders" chartType="Column">
  <!-- add event binding if needed -->
</smartChart>
```

**STEP**: Add a key performance indicator (KPI) tag to a page
**DESCRIPTION**: Add a KPI/data point annotation and surface it in page header or card via XML and CDS annotations.
**LANGUAGE**: XML, CAP CDS
**CODE**:
```text
<header:KPI title="Open Orders" value="{OpenOrdersCount}" />
```

**STEP**: Add multiple fields to a column in responsive tables
**DESCRIPTION**: Group multiple fields inside a single responsive table column using layout controls (VBox/HBox) and bind each field.
**LANGUAGE**: XML, CAP CDS
**CODE**:
```text
<Column>
  <VBox>
    <Text text="{Name}"/>
    <Text text="{Description}" class="sapUiSmallText"/>
  </VBox>
</Column>
```

**STEP**: Add semantic colors to visual filters
**DESCRIPTION**: Configure semantic color mapping for visual filters using UI annotations or XML mapping (OData V2/V4).
**LANGUAGE**: XML OData V2, XML OData V4, CAP CDS
**CODE**:
```text
# VisualFilter XML with semanticColor mapping placeholder
<VisualFilter propertyPath="Priority" semanticColor="{path:'Priority', formatter:'.colorFormatter'}"/>
```

**STEP**: Add semantic highlights to line items in a table
**DESCRIPTION**: Add conditional semantic highlighting rules to table line items via annotations or XML cell formatting.
**LANGUAGE**: XML, CAP CDS
**CODE**:
```text
<Cell>
  <Text text="{Amount}" class="{= ${Amount} &gt; 1000 ? 'highValue' : '' }"/>
</Cell>
```

**STEP**: Add status colors and icons to a column in a table
**DESCRIPTION**: Render status color and icon using StatusIndicator or ObjectStatus controls in table cells; bind to status property and CDS annotations.
**LANGUAGE**: XML, CAP CDS, ABAP CDS
**CODE**:
```text
<ObjectStatus state="{StatusState}" icon="{StatusIcon}" text="{StatusText}" />
```

**STEP**: Configure flexible column layout
**DESCRIPTION**: Set up flexible column layout in manifest and routing to support multi-column views.
**LANGUAGE**: Manifest Change
**CODE**:
```json
// manifest.json snippet
"sap.ui5": {
  "routing": {
    "config": {
      "routerClass": "sap.f.routing.Router",
      "viewType": "XML",
      "controlId": "app",
      "controlAggregation": "pages"
    }
  }
}
```

**STEP**: Configure inbound navigation
**DESCRIPTION**: Add inbound navigation configuration (semantic object/actions) in page configuration or manifest.
**LANGUAGE**: Page Configuration Change
**CODE**:
```json
// manifest.json - inbound example
"crossNavigation": {
  "inbounds": {
    "DisplayProduct": {
      "semanticObject": "Product",
      "action": "display"
    }
  }
}
```

**STEP**: Configure multiple selection for a table
**DESCRIPTION**: Enable multiple row selection in table configuration and update manifest or table properties for OData V2/V4.
**LANGUAGE**: OData V2, OData V4, Manifest Change
**CODE**:
```text
<Table mode="MultiSelect" id="myTable"/>
# manifest.json may include settings for selectionBehavior
```

**STEP**: Configure multiple views for tables
**DESCRIPTION**: Define multiple saved views (variants) for a table in XML and backend annotations for different OData versions.
**LANGUAGE**: XML OData V2, XML OData V4, CAP CDS
**CODE**:
```text
<Table>
  <!-- view1 -->
</Table>
# Variant management is handled by UI and manifest/annotations
```

**STEP**: Configure mass edit via dialog
**DESCRIPTION**: Add mass-edit action in page configuration that opens a dialog to edit fields for multiple selected rows.
**LANGUAGE**: Page Configuration Change
**CODE**:
```text
# pageConfig.json
"actions": { "MassEdit": { "type": "MassEdit", "dialog": "fragments/MassEdit.fragment.xml" } }
```

**STEP**: Configure object page header
**DESCRIPTION**: Customize object page header content (title, status, KPIs) in XML and CDS annotations where applicable.
**LANGUAGE**: XML, CAP CDS, ABAP CDS
**CODE**:
```text
<header:Header>
  <header:Title text="{Name}" />
  <header:DataPoint text="{TotalSales}" />
</header:Header>
```

**STEP**: Configure outbound navigation
**DESCRIPTION**: Add outbound navigation targets and link definitions in XML or manifest for outbound intents.
**LANGUAGE**: XML
**CODE**:
```text
<Link href="intent://Product-display">Open Product</Link>
```

**STEP**: Configure selection of all rows in a table
**DESCRIPTION**: Set default behavior to allow select-all through manifest or table property.
**LANGUAGE**: Manifest Change
**CODE**:
```json
// manifest.json snippet
"settings": { "tableSettings": { "selectAll": true } }
```

**STEP**: Configure side effects
**DESCRIPTION**: Configure side effects (dependent property updates) via annotations or XML so that changes trigger dependent refreshes.
**LANGUAGE**: XML, CAP CDS
**CODE**:
```text
# Example annotation placeholder for sideEffects
@Common.SideEffects: [{ SourceProperties: ['Status'], TargetProperties: ['Amount'] }]
```

**STEP**: Configure spreadsheet export
**DESCRIPTION**: Enable or configure spreadsheet export action via page configuration and table export settings.
**LANGUAGE**: Page Configuration Change
**CODE**:
```text
"actions": { "Export": { "type": "Spreadsheet", "enabled": true } }
```

**STEP**: Configure variant management for controls and pages
**DESCRIPTION**: Add variant management to controls/pages enabling user-specific saved states; configure for OData V2/V4.
**LANGUAGE**: OData V2, OData V4
**CODE**:
```text
<VariantManagement id="vm" showSaveAs="true"/>
```

**STEP**: Configure default grouping in a table
**DESCRIPTION**: Set default grouping rules for a table either via XML or page configuration; incorporate OData V2 default group annotations when needed.
**LANGUAGE**: XML, OData V2, Page Configuration Change
**CODE**:
```text
<Table initialGroupBy="Category"/>
```

**STEP**: Configure auto load for a table
**DESCRIPTION**: Enable/disable autoLoad for table data on page load; configure for OData V2/V4.
**LANGUAGE**: OData V2, OData V4
**CODE**:
```text
<Table growing="true" growingThreshold="20" />
# Or configuration: "autoLoad": true
```

**STEP**: Configure table type
**DESCRIPTION**: Switch table implementation (Responsive, GridTable, Analytical) in page or manifest settings for OData V2/V4.
**LANGUAGE**: OData V2, OData V4
**CODE**:
```text
<Table type="ResponsiveTable" />
```

**STEP**: Define a filter facet
**DESCRIPTION**: Add a filter facet definition in XML to group filter fields visually.
**LANGUAGE**: XML
**CODE**:
```text
<FilterGroup name="MyFacet" label="Range">
  <FilterField name="DateFrom" />
  <FilterField name="DateTo" />
</FilterGroup>
```

**STEP**: Enable a Show Related Apps button
**DESCRIPTION**: Add configuration to display “Show Related Apps” control via page configuration.
**LANGUAGE**: Page Configuration Change
**CODE**:
```text
"settings": { "showRelatedAppsButton": true }
```

**STEP**: Enable condensed table layout
**DESCRIPTION**: Toggle condensed mode for table via manifest.
**LANGUAGE**: Manifest Change
**CODE**:
```json
// manifest.json snippet
"settings": { "tableStyle": "condensed" }
```

**STEP**: Enable data label in analytical charts
**DESCRIPTION**: Configure charts/cards to display data labels via page configuration.
**LANGUAGE**: Page Configuration Change
**CODE**:
```text
"settings": { "analyticalChart": { "dataLabel": true } }
```

**STEP**: Enable data label in smart charts and KPI cards
**DESCRIPTION**: Enable display of data labels for smart charts and KPI cards via page config.
**LANGUAGE**: Page Configuration Change
**CODE**:
```text
"settings": { "smartChart": { "showDataLabel": true } }
```

**STEP**: Enable draft toggle buttons
**DESCRIPTION**: Add draft toggle controls to UI via page configuration to switch between draft-aware behavior.
**LANGUAGE**: Page Configuration Change
**CODE**:
```text
"settings": { "showDraftToggle": true }
```

**STEP**: Enable inline creation of table entries
**DESCRIPTION**: Allow inline creation within tables via page configuration (editable rows).
**LANGUAGE**: Page Configuration Change
**CODE**:
```text
"settings": { "inlineCreate": { "enabled": true } }
```

**STEP**: Enable object creation in a table via dialog
**DESCRIPTION**: Configure a create action that opens a dialog for creating a new object and persists via OData.
**LANGUAGE**: Manifest Change
**CODE**:
```json
// manifest.json
"actions": { "Create": { "type": "Dialog", "dialogFragment": "fragments/Create.dialog.xml" } }
```

**STEP**: Enable semantic date range on smart filter bar
**DESCRIPTION**: Activate semantic date range presets in smart filter bar via page configuration.
**LANGUAGE**: Page Configuration Change
**CODE**:
```text
"settings": { "smartFilterBar": { "semanticDateRange": true } }
```

**STEP**: Extend forms in sections
**DESCRIPTION**: Use extension points to extend forms within object page sections; add fragment and register extension.
**LANGUAGE**: Extension Point
**CODE**:
```text
# manifest extension registration
"viewExtensions": { "sap.suite.ui.generic.template.ObjectPage.view.Details::Section::Content": { "fragment": "ext.FormExtension" } }

<!-- ext.FormExtension.fragment.xml -->
<Form>...</Form>
```

**STEP**: Extend object page headers using extensions
**DESCRIPTION**: Add custom controls or fragments to object page header using extension points and fragments.
**LANGUAGE**: Extension Point
**CODE**:
```text
# Register fragment into header extension point
"viewExtensions": { "sap.suite.ui.generic.template.ObjectPage.view.Details::Header": { "fragment": "ext.HeaderExt" } }
```

**STEP**: Set default filter values for the filter bar
**DESCRIPTION**: Configure default filter values via XML or CDS annotation so filters are pre-populated on load.
**LANGUAGE**: XML, CAP CDS
**CODE**:
```text
<FilterField name="Status"><FilterValue value="Open"/></FilterField>

# CDS annotate default
annotate MyService.MyEntity with { @DefaultValue: 'Open' Status : String; }
```

**STEP**: Set selection limit for tables
**DESCRIPTION**: Set a selection (row) limit via page configuration to restrict multi-selection bulk actions.
**LANGUAGE**: Page Configuration Change
**CODE**:
```text
"settings": { "selectionLimit": 100 }
```

**STEP**: Specify layout for the card container
**DESCRIPTION**: Configure arrangement (grid/layout) for overview page card container via page configuration.
**LANGUAGE**: Page Configuration Change
**CODE**:
```text
"cardsLayout": { "columns": 3, "gutter": "normal" }
```

**STEP**: Specify refresh interval for cards
**DESCRIPTION**: Configure auto-refresh interval for cards to periodically reload data.
**LANGUAGE**: Page Configuration Change
**CODE**:
```text
"cards": { "MyCard": { "refreshInterval": 300000 } } # milliseconds
```

**STEP**: Add an action button
**DESCRIPTION**: (Duplicate entry handled above) Add a button to UI and wire to function.
**LANGUAGE**: XML
**CODE**:
```text
<Button text="Action" press=".onAction"/>
```

**STEP**: Add a value help to a field in the filter bar
**DESCRIPTION**: (Duplicate entry handled above) Add value help fragment/suggestion binding.
**LANGUAGE**: XML, CAP CDS
**CODE**:
```text
<FilterField name="Product"><core:Fragment fragmentName="valueHelp.ProductVH"/></FilterField>
```

**STEP**: Add an analytical card to an overview page
**DESCRIPTION**: (Duplicate handled above) Add analytical card bound to model.
**LANGUAGE**: XML, CAP CDS
**CODE**:
```text
<Card type="analytical" entitySet="KPIEntity"/>
```

**STEP**: Add and edit filter fields
**DESCRIPTION**: (Duplicate handled above) Add or edit fields in the filter bar and CDS annotations.
**LANGUAGE**: XML, CAP CDS, ABAP CDS
**CODE**:
```text
<FilterField name="Priority" />
```

**STEP**: Add and edit table columns
**DESCRIPTION**: (Duplicate handled above) Modify table columns.
**LANGUAGE**: XML, CAP CDS, ABAP CDS
**CODE**:
```text
<Column><Text text="{Priority}"/></Column>
```

**STEP**: Add custom columns to the table using extensions
**DESCRIPTION**: (Duplicate handled above) Use extension fragment to add columns.
**LANGUAGE**: Extension Point
**CODE**:
```text
<fragment fragmentName="ext.CustomColumn"/>
```

**STEP**: Add an interactive chart to a list page
**DESCRIPTION**: (Duplicate handled above) Add interactive chart and bind to entity.
**LANGUAGE**: XML, CAP CDS
**CODE**:
```text
<smartChart entitySet="Orders" id="interactive"/>
```

**STEP**: Add a key performance indicator (KPI) tag to a page
**DESCRIPTION**: (Duplicate handled above) Add KPI/data point UI element.
**LANGUAGE**: XML, CAP CDS
**CODE**:
```text
<header:KPI text="{KPIValue}" />
```

**STEP**: Add multiple fields to a column in responsive tables
**DESCRIPTION**: (Duplicate handled above) Group fields inside column layout.
**LANGUAGE**: XML, CAP CDS
**CODE**:
```text
<VBox><Text text="{Name}"/><Text text="{Sub}"/></VBox>
```

**STEP**: Add semantic colors to visual filters
**DESCRIPTION**: (Duplicate handled above) Map semantic color rules.
**LANGUAGE**: XML OData V2, XML OData V4, CAP CDS
**CODE**:
```text
<VisualFilter propertyPath="Severity" />
```

**STEP**: Add semantic highlights to line items in a table
**DESCRIPTION**: (Duplicate handled above) Highlight line items conditionally.
**LANGUAGE**: XML, CAP CDS
**CODE**:
```text
<Text text="{Amount}" class="{= ${Amount} &gt; 1000 ? 'highlight' : 'normal' }"/>
```

**STEP**: Add status colors and icons to a column in a table
**DESCRIPTION**: (Duplicate handled above) Use ObjectStatus/ValueState to display status colors and icons.
**LANGUAGE**: XML, CAP CDS, ABAP CDS
**CODE**:
```text
<ObjectStatus state="{State}" icon="{Icon}" text="{Text}"/>
```

**STEP**: Configure flexible column layout
**DESCRIPTION**: (Duplicate handled above) Configure flexible columns in manifest and routing.
**LANGUAGE**: Manifest Change
**CODE**:
```json
// manifest.json - routing config for sap.f
```

**STEP**: Configure inbound navigation
**DESCRIPTION**: (Duplicate handled above) Add inbound intents in configuration.
**LANGUAGE**: Page Configuration Change
**CODE**:
```json
// crossNavigation.inbounds entry
```

**STEP**: Configure multiple selection for a table
**DESCRIPTION**: (Duplicate handled above) Enable multi-select and selection handling.
**LANGUAGE**: OData V2, OData V4, Manifest Change
**CODE**:
```text
<Table mode="MultiSelect"/>
```

**STEP**: Configure multiple views for tables
**DESCRIPTION**: (Duplicate handled above) Add multiple table views or variants.
**LANGUAGE**: XML OData V2, XML OData V4, CAP CDS
**CODE**:
```text
<VariantManagement />
```

**STEP**: Configure mass edit via dialog
**DESCRIPTION**: (Duplicate handled above) Configure mass-edit action.
**LANGUAGE**: Page Configuration Change
**CODE**:
```text
"actions": { "MassEdit": { "dialog": "fragments/MassEdit" } }
```

**STEP**: Configure object page header
**DESCRIPTION**: (Duplicate handled above) Update header layout and KPIs.
**LANGUAGE**: XML, CAP CDS, ABAP CDS
**CODE**:
```text
<header:Title text="{Title}" />
```

**STEP**: Configure outbound navigation
**DESCRIPTION**: (Duplicate handled above) Add outbound link definitions.
**LANGUAGE**: XML
**CODE**:
```text
<Link press=".onNavigateOut">Open</Link>
```

**STEP**: Configure selection of all rows in a table
**DESCRIPTION**: (Duplicate handled above) Implement select-all behavior.
**LANGUAGE**: Manifest Change
**CODE**:
```text
"settings": { "selectAll": true }
```

**STEP**: Configure side effects
**DESCRIPTION**: (Duplicate handled above) Set up side effect annotations.
**LANGUAGE**: XML, CAP CDS
**CODE**:
```text
@Common.SideEffects: [ ... ]
```

**STEP**: Configure spreadsheet export
**DESCRIPTION**: (Duplicate handled above) Add export action configuration.
**LANGUAGE**: Page Configuration Change
**CODE**:
```text
"actions": { "Export": { "type": "Spreadsheet" } }
```

**STEP**: Configure variant management for controls and pages
**DESCRIPTION**: (Duplicate handled above) Add variant management config to pages and controls.
**LANGUAGE**: OData V2, OData V4
**CODE**:
```text
<VariantManagement />
```

**STEP**: Configure default grouping in a table
**DESCRIPTION**: (Duplicate handled above) Define default groupBy settings for tables.
**LANGUAGE**: XML, OData V2, Page Configuration Change
**CODE**:
```text
<Table groupBy="Category"/>
```

**STEP**: Configure auto load for a table
**DESCRIPTION**: (Duplicate handled above) Turn on/off table autoLoad.
**LANGUAGE**: OData V2, OData V4
**CODE**:
```text
"settings": { "autoLoad": true }
```

**STEP**: Configure table type
**DESCRIPTION**: (Duplicate handled above) Choose table implementation.
**LANGUAGE**: OData V2, OData V4
**CODE**:
```text
<Table type="AnalyticalTable"/>
```

**STEP**: Define a filter facet
**DESCRIPTION**: (Duplicate handled above) Add filter facet grouping.
**LANGUAGE**: XML
**CODE**:
```text
<FilterGroup name="DateRange">...</FilterGroup>
```

**STEP**: Enable a Show Related Apps button
**DESCRIPTION**: (Duplicate handled above) Add show related apps toggle.
**LANGUAGE**: Page Configuration Change
**CODE**:
```text
"settings": { "showRelatedAppsButton": true }
```

**STEP**: Enable condensed table layout
**DESCRIPTION**: (Duplicate handled above) Apply condensed table style in manifest.
**LANGUAGE**: Manifest Change
**CODE**:
```text
"settings": { "tableCondensed": true }
```

**STEP**: Enable data label in analytical charts
**DESCRIPTION**: (Duplicate handled above) Configure data labels in analytical chart settings.
**LANGUAGE**: Page Configuration Change
**CODE**:
```text
"settings": { "analyticalChart": { "dataLabel": true } }
```

**STEP**: Enable data label in smart charts and KPI cards
**DESCRIPTION**: (Duplicate handled above) Enable data labels for smart charts/KPI.
**LANGUAGE**: Page Configuration Change
**CODE**:
```text
"settings": { "smartChart": { "showDataLabels": true } }
```

**STEP**: Enable draft toggle buttons
**DESCRIPTION**: (Duplicate handled above) Add draft toggle in UI config.
**LANGUAGE**: Page Configuration Change
**CODE**:
```text
"settings": { "draftToggle": true }
```

**STEP**: Enable inline creation of table entries
**DESCRIPTION**: (Duplicate handled above) Configure inline create in table.
**LANGUAGE**: Page Configuration Change
**CODE**:
```text
<Table enableInlineCreate="true"/>
```

**STEP**: Enable object creation in a table via dialog
**DESCRIPTION**: (Duplicate handled above) Add create dialog configuration.
**LANGUAGE**: Manifest Change
**CODE**:
```text
"actions": { "CreateDialog": { "dialogFragment": "fragments/Create" } }
```

**STEP**: Enable semantic date range on smart filter bar
**DESCRIPTION**: (Duplicate handled above) Turn on semantic date presets.
**LANGUAGE**: Page Configuration Change
**CODE**:
```text
"settings": { "smartFilterBar": { "semanticDateRange": true } }
```

**STEP**: Extend forms in sections
**DESCRIPTION**: (Duplicate handled above) Use extension fragments to extend forms.
**LANGUAGE**: Extension Point
**CODE**:
```text
<viewExtensions>...ext.FormExtension...</viewExtensions>
```

**STEP**: Extend object page headers using extensions
**DESCRIPTION**: (Duplicate handled above) Add header fragments through extension point.
**LANGUAGE**: Extension Point
**CODE**:
```text
"viewExtensions": { "ObjectPage::Header": { "fragment": "ext.Header" } }
```

**STEP**: Set default filter values for the filter bar
**DESCRIPTION**: (Duplicate handled above) Predefine filter values in XML/CDS.
**LANGUAGE**: XML, CAP CDS
**CODE**:
```text
<FilterField name="Country"><FilterValue value="DE"/></FilterField>
```

**STEP**: Set selection limit for tables
**DESCRIPTION**: (Duplicate handled above) Apply selection limit configuration.
**LANGUAGE**: Page Configuration Change
**CODE**:
```text
"settings": { "selectionLimit": 50 }
```

**STEP**: Specify layout for the card container
**DESCRIPTION**: (Duplicate handled above) Configure card container layout properties.
**LANGUAGE**: Page Configuration Change
**CODE**:
```text
"cards": { "layout": { "columns": 2 } }
```

**STEP**: Specify refresh interval for cards
**DESCRIPTION**: (Duplicate handled above) Set per-card refresh interval in page configuration.
**LANGUAGE**: Page Configuration Change
**CODE**:
```text
"cards": { "MyCard": { "refreshInterval": 60000 } }
```

(End of available guides)
--------------------------------

**TITLE**: Define Application Structure with SAP Fiori Tools Page Map

**INTRODUCTION**: Use the SAP Fiori Tools Page Map (part of the Application Modeler extension) to view and edit the application structure, global application settings (title, description, flexible column layout, UI adaptation), and add/configure/delete pages for SAP Fiori elements applications. The Page Map also provides experimental, limited support for SAPUI5 freestyle applications.

**TAGS**: fiori-tools, application-modeler, page-map, sapui5, odata-v4, fe-fpm-writer, manifest.json, ui-adaptation

STEP: Launch Page Map

DESCRIPTION: Methods to open the Page Map for an SAP Fiori elements project in your workspace.

LANGUAGE: Plaintext

CODE:
```plaintext
1) From Application Info
   - See: ../Project-Functions/application-information-c3e0989.md

2) Command Palette (keyboard)
   - Open: CMD/CTRL + Shift + P
   - Type: Fiori: Show Page Map
   - Select your SAP Fiori elements project in the workspace

3) Folder Context Menu
   - Right-click the SAP Fiori elements project folder in the Explorer
   - Click: Show Page Map
```

STEP: Page Map - Default View / Application Settings

DESCRIPTION: Default view shows Application Settings (application-wide properties). Edit Title, Description, and Flex Enabled (UI Adaptation) here. Changes are applied immediately and reflected in the project files (see Configure Page step).

LANGUAGE: HTML (example of resource link used by the documentation UI)

CODE:
```html
<!-- Example: include sap-icons stylesheet used by documentation / sample apps -->
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>

<!-- Image assets referenced by the documentation -->
<!-- images/Flex_Enabled_48e56f4.png -->
<!-- images/Page_Map_bd3ac9b.png -->
```

STEP: Application Settings - Fields and Behavior

DESCRIPTION: Action-oriented details for each setting you will edit in the Page Map.

LANGUAGE: Plaintext

CODE:
```plaintext
- Title: Edit the application title (applies immediately after change).
- Description: Edit the application description (applies immediately).
- Flex Enabled (UI Adaptation):
    - true  => Enables SAPUI5 UI Adaptation (flexibility).
    - false => Disables UI Adaptation.
    - undefined => default (no explicit value).
  For more info: https://sapui5.hana.ondemand.com/#/topic/f1430c0337534d469da3a56307ff76af

- Toggle Properties Panel Visibility: click the icon in the upper-right corner to hide/show the properties panel.
```

STEP: Add a New Page (Standard Page)

DESCRIPTION: Add an ObjectPage or other supported page type for SAP Fiori elements.

LANGUAGE: Plaintext

CODE:
```plaintext
1) In the Page Map header, click the Add New Page icon (Add New Page).
2) From "Select Page Type", choose "ObjectPage" (or other supported type).
3) Click Add.
4) In the Navigation field, select the target entity for the page.
   - Available entities depend on the previous navigation context.
   - See: configure-page-elements-047507c.md for details on configuring elements and navigation.
```

STEP: Add a Custom Page (OData V4)

DESCRIPTION: For OData V4 projects you can add a CustomPage. The Page Map provides options to create a new view or reuse an existing sample custom view. Templates used are published in the @sap-ux/fe-fpm-writer package (open source).

LANGUAGE: Plaintext

CODE:
```plaintext
1) Open a page file in the Page Map and click Add New Page icon in the page header.
2) Select "CustomPage" from Select Page Type and click Add.
3) In Navigation, select the entity the custom page will navigate to.
4) Under "Select your view":
   - Create a New View => creates a new custom view file.
   - Use Existing View  => choose from prepared sample custom views.
5) In View Name, enter a name or select an existing view.
6) Click Add. Example success message:
   "Custom Page ProcessFlow added successfully"

Tip: Templates for OData V4 custom pages are available at:
https://github.com/SAP/open-ux-tools/blob/main/packages/fe-fpm-writer/README.md
```

STEP: Configure Page Elements (Edit Page Properties)

DESCRIPTION: Open the Configure Page Elements outline view to edit page-level properties (layout, navigation, controls). Changes made here update the webapp/manifest.json and SAPUI5 flexibility (UI adaptation) artifacts.

LANGUAGE: Plaintext / JSON (manifest file location example)

CODE:
```plaintext
- Open Configure Page Elements:
  - Click the Configure Page (pencil) icon in the page header, OR
  - Open Configure Page Elements from the Application Modeler tree view.
- Edit properties in the outline view; changes are applied immediately.

- Affected project file:
  webapp/manifest.json
```

STEP: manifest.json - Where to look for changes

DESCRIPTION: The Page Map writes page and application configuration to webapp/manifest.json. Use the manifest to verify or review applied changes.

LANGUAGE: JSON

CODE:
```json
{
  "sap.app": {
    "id": "your.app.id",
    "applicationVersion": { "version": "1.0.0" },
    "title": "Your App Title",
    "description": "Your App Description"
  },
  "sap.ui5": {
    // Page Map updates may modify routing, targets, and component settings here
  },
  "sap.ui": {
    // UI adaptation / flexibility settings may be reflected here
  }
}
```

STEP: Delete Page

DESCRIPTION: Remove a page from the application using the Page Map UI. Deletion updates the application model and manifest accordingly.

LANGUAGE: Plaintext

CODE:
```plaintext
1) In the Page Map, open the page you want to remove.
2) Click the Delete Page (wastebasket) icon in the page header.
3) Confirm deletion when prompted. The page is removed and changes are reflected in:
   - webapp/manifest.json
   - SAPUI5 flexibility artifacts (if applicable)
```

STEP: Notes and Limitations

DESCRIPTION: Important tips and experimental feature notes to consider when using the Page Map.

LANGUAGE: Plaintext

CODE:
```plaintext
- Experimental: Page Map supports SAPUI5 freestyle apps in an experimental, limited way:
  - You can view structure; adding/deleting pages may be not supported for freestyle apps.
- For layout guidance, see Fiori Design Guidelines: Layouts:
  https://experience.sap.com/fiori-design-web/list-report-floorplan-sap-fiori-element/
- For deeper inspection of OData V4 templates used by Page Map:
  https://github.com/SAP/open-ux-tools/blob/main/packages/fe-fpm-writer/README.md
```
--------------------------------

**TITLE**: Develop with a Guide — Fiori Tools Guided Development (Side-by-side, Snippets, Parameters, Annotations)

**INTRODUCTION**: Practical, code-focused reference for using Fiori Tools "Develop with a Guide" workflow. Explains how to start a guide, interact with side-by-side view, apply code snippets with parameters, handle annotation terms and parameter tables, reorder UI elements (mouse + keyboard), and toggle guide display modes. Use these steps to implement feature changes in project files via the guided development UI.

**TAGS**: fiori-tools, guided-development, guide, snippets, annotations, parameters, UI5, manifest, view, keyboard-navigation

**STEP**: 1 — Start a Guide and view layout

**DESCRIPTION**: Open a guide from the Guides list and begin the development flow. Default mode is side-by-side (guide window + list of guides). Use the guide description to start.

**LANGUAGE**: text

**CODE**:
```text
UI Actions:
1. Select required guide from the Guides list.
2. Click "Start Guide" under the guide description.
3. Default layout: side-by-side split — guide on the right, guides list on the left.

Notes:
- If application window is reduced below a threshold, the Guides list will be hidden automatically.
- Image used by the product docs: images/FioriTools_DevelopwithGuide_141af07.png
```

**STEP**: 2 — Split-view controls (drag to resize, expand to full view)

**DESCRIPTION**: Resize side-by-side view by dragging the vertical splitter. Expand the guide to full view by using the Expand icon in the guide window header.

**LANGUAGE**: HTML

**CODE**:
```html
<!-- Include SAP icons CSS (preserve original resource path) -->
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>

<!-- Expand icon markup used by the guide UI -->
<span class="SAP-icons-V5"></span> <!-- Expand view -->

<!-- Information icon used in guide details -->
<span class="SAP-icons-V5"></span> <!-- Information -->
```

**STEP**: 3 — Guide contents and annotation terms

**DESCRIPTION**: Each guide includes a short feature description, screenshots, and links to additional documentation (Information icon). If the guide uses annotations, it lists Annotation Terms; hover an Annotation Term to reveal a tooltip describing its meaning and usage.

**LANGUAGE**: HTML

**CODE**:
```html
<!-- Example Annotation Term item with tooltip -->
<div class="annotation-term" title="@com.sap.vocabularies.UI.v1.LineItem: Use to define columns in a table.">
  @com.sap.vocabularies.UI.v1.LineItem
</div>
```

**STEP**: 4 — What a Step contains (file, change, snippet, parameters)

**DESCRIPTION**: Every guide step specifies:
- The target file to change (path visible in step).
- A short description of the required change.
- A code snippet to insert or copy.
- Parameters exposed to customize the snippet.

Use the parameter inputs to configure snippet placeholders before applying or copying. If validation fails, the guide UI scrolls to the parameter needing correction.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "step": 3,
  "targetFile": "webapp/view/Main.view.xml",
  "changeDescription": "Add a new column to the table's LineItem annotation and UI column.",
  "snippet": "<ColumnListItem><cells><Text text=\"${label}\" /></cells></ColumnListItem>",
  "parameters": [
    {
      "name": "label",
      "type": "string",
      "placeholder": "Column Label",
      "required": true
    },
    {
      "name": "path",
      "type": "edmProperty",
      "placeholder": "OData property path",
      "required": true,
      "multiSelect": false
    }
  ],
  "actions": ["Apply Snippet", "Copy Snippet"]
}
```

**STEP**: 5 — Example: Validate parameter selections and enable Insert Snippet

**DESCRIPTION**: Validate parameter inputs before enabling "Insert Snippet". If an input is invalid, focus returns to that parameter and the Insert button is disabled.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
type Param = { name: string; value?: string; required: boolean };

function validateParameters(params: Param[]): { valid: boolean; firstInvalid?: string } {
  for (const p of params) {
    if (p.required && (!p.value || p.value.trim() === "")) {
      return { valid: false, firstInvalid: p.name };
    }
  }
  return { valid: true };
}

// Example usage: disable insert button when validation fails
const params: Param[] = [
  { name: "label", required: true, value: "" },
  { name: "path", required: true, value: "CustomerName" }
];

const validation = validateParameters(params);
const insertEnabled = validation.valid; // false in this example
// If not valid, scroll UI to parameter with name validation.firstInvalid
```

**STEP**: 6 — Parameter table: add rows, dropdown choices, and large-table controls

**DESCRIPTION**: Some guides present a table of parameters representing ordered UI elements (columns, selection fields). You can:
- Add rows via "Add column" / "Add selection field" / "Add Data Field" or "Add Data Field for Annotation" (dropdown controls).
- For tables longer than 5 rows, an "Add" button appears below the table to reduce scrolling.
- New row parameter fields update based on dropdown selection.

Preserve order: rows correspond to UI order. Use the UI "Add" buttons to insert new elements.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "tableParameters": [
    { "index": 1, "type": "DataField", "label": "Customer ID", "property": "CustomerID" },
    { "index": 2, "type": "DataField", "label": "Name", "property": "CustomerName" }
  ],
  "addActions": [
    "Add column",
    "Add selection field",
    { "dropdown": ["Add Data Field", "Add Data Field for Annotation"] }
  ],
  "uiHint": "When table length > 5, an extra Add button is shown below the table."
}
```

**STEP**: 7 — Reordering parameters (drag + keyboard navigation)

**DESCRIPTION**: Rearrange rows by dragging or using keyboard navigation:
- Mouse: click the row anywhere and drag to the target position.
- Keyboard:
  - Tab until focus is within the parameter collection and on the rearrangement arrows.
  - Use left/right arrow keys to choose up or down arrow control.
  - Press Enter to move the row in the selected direction.
- A loading indicator shows while the generated code snippet updates to reflect new order.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Simple array reorder helper used by UI when moving rows
function moveRow(arr, fromIndex, toIndex) {
  const newArr = arr.slice();
  const [item] = newArr.splice(fromIndex, 1);
  newArr.splice(toIndex, 0, item);
  return newArr;
}

// Keyboard handler pseudo-code
function onRearrangeKey(event, currentIndex, items) {
  if (event.key === "ArrowLeft") {
    // select "up" control
  } else if (event.key === "ArrowRight") {
    // select "down" control
  } else if (event.key === "Enter") {
    // move row up or down depending on selected control
    const targetIndex = /* compute target */;
    const updated = moveRow(items, currentIndex, targetIndex);
    // trigger snippet regeneration and show loading indicator
  }
}
```

**STEP**: 8 — Guide display modes: Wizard vs Full view, Show/Hide Descriptions

**DESCRIPTION**: Switch views via the Settings (gear) icon:
- Wizard mode (default): show one step per screen, use Next/Back or step tiles.
- Full view: show all steps on a single scrollable screen.
- Show Descriptions (default): step and parameter descriptions visible.
- Hide Descriptions: step and parameter descriptions hidden.

You can combine modes (e.g., Wizard mode + Hide Descriptions).

**LANGUAGE**: HTML / JavaScript

**CODE**:
```html
<!-- Settings menu UI example -->
<div class="settings-menu">
  <label>
    <input type="checkbox" id="wizardMode" checked /> Wizard mode
  </label>
  <label>
    <input type="checkbox" id="showDescriptions" checked /> Show Descriptions
  </label>
</div>
```

```javascript
// Toggle handlers
document.getElementById("wizardMode").addEventListener("change", (e) => {
  const wizard = e.target.checked;
  // apply UI mode change: single-step vs full view
});

document.getElementById("showDescriptions").addEventListener("change", (e) => {
  const show = e.target.checked;
  // toggle visibility of descriptions for steps and parameters
});
```

**STEP**: 9 — Images and assets referenced in guides

**DESCRIPTION**: Screenshots and icons used in guides are stored relative to the guide docs. Preserve paths when linking or automating updates.

**LANGUAGE**: text

**CODE**:
```text
Referenced images:
- images/FioriTools_DevelopwithGuide_141af07.png
- images/FT_Moving_Columns_fd5f702.png
- images/SettingsMenu_1bd394c.png

Referenced stylesheet:
- ../css/sap-icons.css
```


--------------------------------

**TITLE**: Using SAP Fiori Tools — Application Modeler to Preview and Customize a Generated SAP Fiori Elements App

**INTRODUCTION**: This guide explains how to use the SAP Fiori Tools — Application Modeler extension to inspect, preview, and customize a generated SAP Fiori elements application. It covers the Page Map (application structure), Page Editor (page element configuration), the Property Panel (node-specific settings), and how saved changes are persisted as artifacts or UI flexibility changes in your project and trigger preview refresh.

**TAGS**: fiori-tools, application-modeler, sap-fiori-elements, preview, page-map, page-editor, property-panel, ui5

STEP: Prerequisites and references

DESCRIPTION: Ensure the application has been generated and you have the Application Modeler extension available. Reference the generation and preview docs for context.

LANGUAGE: Markdown/Links

CODE:
```markdown
- Generated application guide:
  ../Generating-an-Application/SAP-Fiori-Elements/sap-fiori-elements-1488469.md

- Previewing an application:
  ../Previewing-an-Application/previewing-an-application-b962685.md
```

STEP: Add UI icons stylesheet (if needed in examples or README)

DESCRIPTION: The documentation snippet includes a link to the SAP icons stylesheet. Include this in any HTML preview or documentation pages that need the icons.

LANGUAGE: HTML

CODE:
```html
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```

STEP: Visualize and edit application structure with Page Map

DESCRIPTION: Use the Page Map to see a visual representation of pages, navigations, and service entities. Actions you can perform: add or delete pages, add or edit navigations, open the Page Editor for a page, and view global page settings. Use the Configure Page (pencil) icon to open the Page Editor for the selected page.

LANGUAGE: Notes / Paths

CODE:
```text
- Page Map image (documentation asset):
  images/FIORI_TOOLS_PAGE_MAP_96cfbae.png

- Actions:
  * Add new page
  * Add new navigation
  * Delete page
  * Click :pencil2: (Configure Page) to open Page Editor
  * Inspect global page settings (applies project-wide)
```

STEP: Configure page elements using Page Editor

DESCRIPTION: The Page Editor shows an outline view of configurable nodes on the selected page. Select a node to open the Property Panel where you can change settings for UI elements and navigation.

LANGUAGE: Notes / Paths

CODE:
```text
- Page Editor image:
  images/FIORI_TOOLS_PAGE_EDITOR_f3232a4.png

- Property Panel image:
  images/FIORI_TOOLS_PROPERTY_PANE_257df73.png

- Common actions:
  * Select node in Page Editor → Property Panel opens
  * Edit properties (labels, visibility, bindings, navigation targets)
  * Save changes to persist configuration
```

STEP: How saved changes are persisted and preview refreshed

DESCRIPTION: When you save changes in the Property Panel or Page Editor, the extension converts those edits into corresponding artifact changes or UI flexibility (adaptation) files inside your project folder. After saving, the extension triggers a refresh of the application preview.

LANGUAGE: Notes / File Locations

CODE:
```text
- Save behavior:
  * Edits → converted into one of:
    - artifact changes (files modified under project folder)
    - UI flexibility changes (adaptation files for runtime personalization)

- Typical locations (replace <project-root> with your project path):
  * <project-root>/... (artifact files and flexibility changes are placed under the project's folder)

- Post-save:
  * Preview is refreshed automatically (see preview document):
    ../Previewing-an-Application/previewing-an-application-b962685.md
```

STEP: Embedding documentation images in markdown pages

DESCRIPTION: Use relative paths to include the Page Map / Page Editor / Property Panel images in your documentation or README files.

LANGUAGE: Markdown

CODE:
```markdown
![Page Map](images/FIORI_TOOLS_PAGE_MAP_96cfbae.png)
![Page Editor](images/FIORI_TOOLS_PAGE_EDITOR_f3232a4.png)
![Property Pane](images/FIORI_TOOLS_PROPERTY_PANE_257df73.png)
```

STEP: Quick workflow summary (developer actions)

DESCRIPTION: Compact, actionable workflow to preview and customize pages in a generated app.

LANGUAGE: Plain text

CODE:
```text
1. Generate the app (see generation guide).
2. Open the project in VS Code with SAP Fiori Tools installed.
3. Open the Application Modeler extension.
4. Use Page Map to locate the page; click Configure Page (:pencil2:) to open Page Editor.
5. In Page Editor select nodes → edit properties in Property Panel.
6. Save changes → artifacts or UI flexibility files are written to project folder.
7. Preview refreshes automatically; validate changes in preview.
```
--------------------------------

**TITLE**: Annotation Diagnostics (XML Annotation Language Server)

**INTRODUCTION**: Use the XML annotation language server diagnostics to validate annotation files against project metadata, annotation vocabularies, and the OData specification. Diagnostics run when annotation files are opened and after each change to annotations, metadata, or project structure. Diagnostics provide errors, warnings, info messages, and Quick Fix actions to resolve issues.

**TAGS**: fiori-tools, annotations, diagnostics, LSP, OData, XML, editor

STEP: 1 — Include UI icon styles (optional)
DESCRIPTION: Ensure SAP icon styles are available in your documentation or local preview so diagnostic-related UI elements (like the Light Bulb icon) render correctly. Add the stylesheet reference to the HTML that hosts your annotation editor or preview.
LANGUAGE: HTML
CODE:
```HTML
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```

STEP: 2 — What diagnostics validate
DESCRIPTION: The annotation language server validates:
- Annotation files against project metadata
- Annotation vocabularies
- OData specification
Diagnostics run on file open and after changes to annotations, metadata, or project structure. Note that annotations embedded in metadata and dynamic expressions are NOT supported by Diagnostics.
LANGUAGE: Plaintext
CODE:
```text
Validation targets:
- Annotation files vs project metadata
- Annotation vocabularies
- OData specification

Not supported:
- Annotations embedded in metadata
- Dynamic expressions
```

STEP: 3 — Viewing diagnostic messages
DESCRIPTION: View diagnostics by hovering over highlighted code in the annotation file or by opening the Problems panel in your editor. Click a message in the Problems panel to jump to the related location in the annotation file.
LANGUAGE: Plaintext
CODE:
```text
View diagnostics:
- Hover over highlighted annotations in the editor
- Open Problems panel (e.g. VS Code: View → Problems)

Behavior:
- Click a Problems entry to navigate to the annotation location
```

STEP: 4 — Fixing diagnostics: Code Completion
DESCRIPTION: Use code completion when a diagnostic indicates an incorrect element or value. Trigger completion and select a suggested value to fix the issue.
LANGUAGE: Plaintext
CODE:
```text
Trigger code completion:
- Windows/Linux: Ctrl + Space
- macOS: Cmd + Space

Action:
- Choose one of the suggested completion items to replace the incorrect element/value
```

STEP: 5 — Fixing diagnostics: Quick Fix actions
DESCRIPTION: Apply Quick Fix actions when provided. The Light Bulb icon appears alongside the diagnostic; open it and choose an action to apply the fix automatically.
LANGUAGE: Plaintext
CODE:
```text
Apply Quick Fix:
- Click the Light Bulb icon shown with a diagnostic
- Select a suggested quick fix action to apply the change
```

STEP: 6 — Manual fixes and local copy limitations
DESCRIPTION: Diagnostics for annotations in local copies of metadata or backend annotation files are informational only. Always make production fixes in the original service metadata. Changes to local copies will not affect the deployed app or live service preview.
LANGUAGE: Plaintext
CODE:
```text
Important:
- Local metadata/annotation copies: diagnostics are informational only
- Make fixes in the original service metadata (backend)
- Local edits do NOT affect deployed app or real-service preview
```
--------------------------------

**TITLE**: XML Annotation Language Server — Quick Info Usage

**INTRODUCTION**: How to view and use quick information provided by the XML annotation language server for OData annotation terms, record types, and properties while editing annotation files. This quick info is sourced from OData vocabularies and appears in hover windows and code-completion suggestion panels.

**TAGS**: fiori-tools, odata, annotations, xml, language-server, hover, code-completion, quick-info

**STEP**: 1 — Include icon stylesheet (optional)
**DESCRIPTION**: If your editor UI or documentation pages require SAP icons referenced by the language server UI snippets, include the provided stylesheet path. Keep the relative path as shown in your repo structure.
**LANGUAGE**: HTML
**CODE**:
```html
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```

**STEP**: 2 — What quick info shows (summary)
**DESCRIPTION**: The quick info returned by the language server for any annotation term, record type, or property includes:
- Type and purpose of the term/record/property.
- Valid targets (which OData targets the term can apply to).
- Experimental or deprecated status.
- Whether a property is mandatory or optional.
This content is retrieved from OData vocabularies and therefore depends on their availability and completeness.

**LANGUAGE**: PlainText
**CODE**:
```text
Quick info fields (if available in OData vocabularies):
- Type / Purpose
- Valid Targets
- Experimental? / Deprecated?
- Mandatory? / Optional?
```

**STEP**: 3 — Show quick info by hovering
**DESCRIPTION**: Open an OData annotation XML file (.xml or .annotations.xml). Place the text cursor or mouse pointer over an annotation term, record type, or property in the editor to display the quick info in a hover window. Use this to read descriptions and metadata without leaving the file.
**LANGUAGE**: XML
**CODE**:
```xml
<!-- Example annotation file: MyService.annotations.xml -->
<Annotations Target="MyService.MyEntityType">
  <!-- Hover over "UI.HeaderInfo" to see quick info from the vocabulary -->
  <Annotation Term="UI.HeaderInfo">
    <Record>
      <PropertyValue Property="Type" String="Header"/>
      <!-- Hover over "Type" or "Header" for property-level info -->
    </Record>
  </Annotation>
</Annotations>
```

**STEP**: 4 — Show quick info in completion list (expand suggestion details)
**DESCRIPTION**: When code completion suggestions appear, expand the documentation for each suggestion to see quick info alongside the suggestion list:
- Trigger completion: press Ctrl+Space (Windows/Linux) or Cmd+Space (macOS) or invoke your editor's completion command.
- Expand the suggestion's documentation: click the Information icon in the completion UI (if present) or use the same keybinding to toggle.
- The documentation pane stays open and updates as you navigate suggestions. Close it by pressing Ctrl+Space / Cmd+Space again or by clicking the Close (x) icon.
**LANGUAGE**: PlainText
**CODE**:
```text
Keybindings:
- Open/Toggle completion + doc pane:
  - Windows/Linux: Ctrl+Space
  - macOS: Cmd+Space
- Close expanded documentation:
  - Press Ctrl+Space / Cmd+Space again OR click the (x) Close icon in the completion UI.
UI actions:
- Click the Information icon next to a completion item to expand its quick info.
```

**STEP**: 5 — Notes and troubleshooting
**DESCRIPTION**: Tips to ensure expected quick info is available:
- Ensure the language server for XML annotations is enabled in your IDE.
- Confirm OData vocabularies are reachable (network access) or available locally if your environment requires offline vocabularies.
- If quick info is missing for a term, check the corresponding OData vocabulary for documentation or status (experimental/deprecated).
**LANGUAGE**: PlainText
**CODE**:
```text
Troubleshooting checklist:
- Language server running/enabled in IDE.
- Network access to OData vocabularies OR local vocabularies configured.
- Verify vocabulary contains docs for the specific term/record/property.
```
--------------------------------

**TITLE**: Edit in Source Code — Fiori tools Property Panel navigation

**INTRODUCTION**: This document explains how the "Edit in source code" feature in the Fiori tools Page Editor lets users jump from a property in the Property Panel to the exact annotation definition(s) in annotation files. It includes example HTML for the Property Panel control, sample annotation XML, the pop-up payload format used when multiple definitions exist, and the fallback link used when the inline field control is not rendered.

**TAGS**: fiori-tools, edit-in-source, annotations, property-panel, vscode, business-application-studio, navigation

STEP: Add icon CSS to the Page Editor UI

DESCRIPTION: Include the SAP icon stylesheet so the "Edit in source code" icon renders. This is a required asset reference in the Page Editor UI HTML.

LANGUAGE: HTML

CODE:
```html
<!-- place in the Page Editor HTML head or UI shell -->
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```

STEP: Property Panel field with Edit in source code icon

DESCRIPTION: Example markup for a Property Panel row with a text input and the "Edit in source code" icon (class SAP-icons-TNT-V3). Use this pattern when rendering editable or non-editable properties that support direct navigation to annotation source.

LANGUAGE: HTML

CODE:
```html
<!-- Property Panel single field row -->
<div class="property-row">
  <label for="property-Label">Label</label>
  <div class="property-control">
    <input id="property-Label" type="text" value="Customer Name" readonly />
    <!-- Icon that triggers navigation to annotation source -->
    <button class="edit-in-source" title="Edit in source code" aria-label="Edit in source">
      <span class="SAP-icons-TNT-V3"></span>
    </button>
  </div>
</div>
```

STEP: Multiple definitions pop-up payload (Visual Studio Code)

DESCRIPTION: When multiple annotation definitions exist for the same semantic property, the editor shows a pop-up and lists each matching file and snippet. Example JSON payload the Page Editor supplies to the pop-up UI — use this to build the selection list and perform navigation on click.

LANGUAGE: JSON

CODE:
```json
{
  "definitions": [
    {
      "filePath": "/src/annotations/LineItem.annotation.xml",
      "line": 42,
      "snippet": "<Annotation Term=\"com.sap.vocabularies.UI.v1.DataField\" .../>"
    },
    {
      "filePath": "/src/annotations/CustomAnnotations.xml",
      "line": 128,
      "snippet": "<Annotation Term=\"com.sap.vocabularies.UI.v1.DataField\" .../>"
    }
  ],
  "editor": "vscode"
}
```

STEP: Single-definition behavior and platform differences

DESCRIPTION: When only one matching annotation is found, the Page Editor navigates directly to that annotation definition in the editor. Platform-specific behavior:
- Visual Studio Code: shows the multi-definition pop-up (if multiple definitions exist) and lets the user pick a file.
- SAP Business Application Studio (BAS): shows only the first matching annotation (multi-definition pop-up not available).

LANGUAGE: JSON

CODE:
```json
{
  "platformBehavior": {
    "vscode": {
      "multiDefinitionsPopup": true,
      "openSelection": "opens selected file at specified line"
    },
    "businessApplicationStudio": {
      "multiDefinitionsPopup": false,
      "openSelection": "opens first matching annotation file at specified line"
    }
  }
}
```

STEP: Fallback when field control cannot be rendered

DESCRIPTION: If the Page Editor cannot interpret a UI feature (too complex mapping), the field control (dropdown/input) and the icon are not rendered. Instead, display an "Edit in source code" link that performs the same navigation. Example markup:

LANGUAGE: HTML

CODE:
```html
<!-- Fallback link when inline control/icon cannot be rendered -->
<div class="property-row">
  <label>Complex Property</label>
  <div class="property-control">
    <a class="edit-in-source-link" href="#" title="Edit in source code">Edit in source code</a>
  </div>
</div>
```

STEP: Example annotation file and target snippet

DESCRIPTION: Example annotation XML file and target annotation tag that the "Edit in source code" action navigates to. Use real project paths when implementing navigation. The Page Editor should open the file "/src/annotations/LineItem.annotation.xml" at the specified line where this annotation is defined.

LANGUAGE: XML

CODE:
```xml
<!-- File: /src/annotations/LineItem.annotation.xml -->
<Annotations Target="MyService.MyEntityType">
  <Annotation Term="com.sap.vocabularies.UI.v1.LineItem">
    <Collection>
      <Record Type="com.sap.vocabularies.UI.v1.DataField">
        <PropertyValue Property="Value" Path="CustomerName"/>
        <PropertyValue Property="Label" String="Customer Name"/>
      </Record>
      <!-- more Record elements -->
    </Collection>
  </Annotation>
</Annotations>
```

STEP: Screenshot resource path

DESCRIPTION: Preserve the screenshot resource reference used in the documentation to show the UI behavior. Use this path when rendering docs or UI previews.

LANGUAGE: TEXT

CODE:
```
images/EditinSource_675234e.png
```
--------------------------------

**TITLE**: Filter Fields — Add, Configure, Move, and Delete Filter Fields and Visual Filters (Fiori Tools)

**INTRODUCTION**: This guide gives actionable steps and exact annotation/manifest snippets to programmatically add and maintain filter fields (compact filters) and visual filters (charts) for Fiori Elements list reports. It includes the local annotation file (webapp/annotations/*.xml or *.json) and manifest.json changes that the Fiori Tools UI generates or expects. Use these snippets to implement, automate, or validate filter-related changes.

**TAGS**: fiori-tools, fiori-elements, annotations, UI.SelectionFields, UI.Chart, UI.PresentationVariant, Common.ValueList, manifest.json, filter-bar, visual-filters, CAP

STEP: Add compact filter field (UI.SelectionFields)
DESCRIPTION: Add a property path to the UI.SelectionFields annotation in your local annotation file so the property appears as a compact filter (filter field) in the Filter Bar. The order of PropertyPath elements defines filter order in the UI. File path examples: webapp/annotations/annotations.xml or webapp/annotations/annotations.json.
LANGUAGE: XML
CODE:
```xml
<!-- file: webapp/annotations/annotations.xml -->
<Annotations Target="MyService.MyEntityType">
  <!-- Add/Update UI.SelectionFields: sequence determines filter order -->
  <Annotation Term="UI.SelectionFields">
    <Collection>
      <PropertyPath>PropertyOne</PropertyPath>
      <PropertyPath>PropertyTwo</PropertyPath>
      <!-- Add new property path to show a filter -->
      <PropertyPath>NewFilterProperty</PropertyPath>
    </Collection>
  </Annotation>
</Annotations>
```

STEP: Add compact filter field (JSON-annotation format)
DESCRIPTION: Equivalent JSON representation for tools that use JSON annotation files.
LANGUAGE: JSON
CODE:
```json
// file: webapp/annotations/annotations.json
{
  "Annotations": {
    "MyService.MyEntityType": {
      "UI.SelectionFields": [
        { "Path": "PropertyOne" },
        { "Path": "PropertyTwo" },
        { "Path": "NewFilterProperty" }
      ]
    }
  }
}
```

STEP: Add visual filter (UI.Chart + UI.PresentationVariant + Common.ValueList + UI.SelectionFields)
DESCRIPTION: When adding a visual filter you must:
- Create a UI.Chart (qualified)
- Create a UI.PresentationVariant that references the chart
- Create a Common.ValueList that references the presentation variant (use qualifier linking)
- Ensure UI.SelectionFields contains the property for the compact filter (added if missing)
- Update manifest.json control configuration to reference the generated Common.ValueList if required
LANGUAGE: XML
CODE:
```xml
<!-- file: webapp/annotations/annotations.xml -->
<Annotations Target="MyService.MyEntityType">

  <!-- 1) UI.Chart with qualifier "SalesByRegion" -->
  <Annotation Term="UI.Chart" Qualifier="SalesByRegion">
    <Record>
      <!-- Dimensions: the property used as chart dimension -->
      <PropertyValue Property="Dimensions">
        <Collection>
          <Record>
            <PropertyValue Property="Value">
              <PropertyPath>Region</PropertyPath>
            </PropertyValue>
            <!-- optional: text property -->
            <PropertyValue Property="Text">
              <PropertyPath>RegionName</PropertyPath>
            </PropertyValue>
            <!-- optional: Label -->
            <PropertyValue Property="Label" String="Region" />
          </Record>
        </Collection>
      </PropertyValue>

      <!-- Measures: the property used as chart measure -->
      <PropertyValue Property="Measures">
        <Collection>
          <Record>
            <PropertyValue Property="Value">
              <PropertyPath>SalesAmount</PropertyPath>
            </PropertyValue>
            <PropertyValue Property="Label" String="Sales" />
          </Record>
        </Collection>
      </PropertyValue>

      <!-- ChartType: example Bar chart -->
      <PropertyValue Property="ChartType" EnumMember="UI.ChartType/Bar" />
      <!-- Optional: reference a DataPoint for scaling/formatting -->
      <PropertyValue Property="DataPoint" AnnotationPath="@UI.DataPoint#SalesDataPoint" />
    </Record>
  </Annotation>

  <!-- 2) UI.PresentationVariant referencing the chart -->
  <Annotation Term="UI.PresentationVariant" Qualifier="PV_SalesByRegion">
    <Record>
      <PropertyValue Property="Visualizations">
        <Collection>
          <AnnotationPath>@UI.Chart#SalesByRegion</AnnotationPath>
        </Collection>
      </PropertyValue>
      <!-- optional: default sort order or other settings -->
    </Record>
  </Annotation>

  <!-- 3) Common.ValueList referencing the PresentationVariant -->
  <Annotation Term="Common.ValueList" Qualifier="VL_SalesByRegion">
    <Record>
      <PropertyValue Property="PresentationVariant" AnnotationPath="@UI.PresentationVariant#PV_SalesByRegion" />
      <!-- other properties like ValueListParameters if needed -->
    </Record>
  </Annotation>

  <!-- 4) Ensure UI.SelectionFields contains the filter property (compact filter) -->
  <Annotation Term="UI.SelectionFields">
    <Collection>
      <PropertyPath>Region</PropertyPath>
      <!-- other selection fields -->
    </Collection>
  </Annotation>

  <!-- 5) Optional DataPoint referenced by chart for scaling / fractional digits -->
  <Annotation Term="UI.DataPoint" Qualifier="SalesDataPoint">
    <Record>
      <PropertyValue Property="Value">
        <Path>SalesAmount</Path>
      </PropertyValue>
      <!-- The DataPoint can be used to control format/scaling; adjust here as required -->
    </Record>
  </Annotation>
</Annotations>
```

STEP: Manifest configuration for visual filter (control configuration)
DESCRIPTION: When a visual filter is added the manifest.json is updated to reference the generated Common.ValueList or selection configuration. Add or validate the controlConfiguration entry that points to the ValueList qualifier and the property/annotation you used. Modify webapp/manifest.json.
LANGUAGE: JSON
CODE:
```json
// file: webapp/manifest.json (partial)
{
  "sap.ui.generic.app": {
    "settings": {
      "controlConfiguration": {
        /* Example controlConfiguration entry referencing a selection field and the generated ValueList */
        "com.sap.vocabularies.UI.v1.SelectionFields": {
          "MyService.MyEntityType/Region": {
            "annotationPath": "com.sap.vocabularies.Common.v1.ValueList#VL_SalesByRegion"
          }
        }
      }
    }
  }
}
```

STEP: Move filter fields (update UI.SelectionFields sequence)
DESCRIPTION: Change filter order by reordering PropertyPath elements in UI.SelectionFields. The annotated sequence directly controls compact filter order and therefore the order of visual filters (visual filters follow the compact-filter sequence).
LANGUAGE: XML
CODE:
```xml
<!-- file: webapp/annotations/annotations.xml -->
<Annotation Term="UI.SelectionFields">
  <Collection>
    <!-- New sequence: move NewFilterProperty up -->
    <PropertyPath>NewFilterProperty</PropertyPath>
    <PropertyPath>PropertyOne</PropertyPath>
    <PropertyPath>PropertyTwo</PropertyPath>
  </Collection>
</Annotation>
```

STEP: Delete a filter field (remove PropertyPath; preserve Common.Label)
DESCRIPTION: To remove a compact filter or the compact-filter entry backing a visual filter, remove the PropertyPath from UI.SelectionFields. Note: Common.Label and other label/title annotations are not removed automatically (they may be used elsewhere). Deleting a visual filter from the page removes the manifest control configuration referencing the ValueList qualifier — annotations remain in the local annotation file until you remove them manually or use the “Remove Unused Local Annotations” action.
LANGUAGE: XML
CODE:
```xml
<!-- file: webapp/annotations/annotations.xml -->
<!-- Remove the PropertyPath; keep other annotations as needed -->
<Annotation Term="UI.SelectionFields">
  <Collection>
    <PropertyPath>PropertyOne</PropertyPath>
    <!-- NewFilterProperty removed -->
  </Collection>
</Annotation>
```

STEP: Configure visual filter properties (labels, scale, decimals, sort order, fixed values)
DESCRIPTION: Use these annotation patterns to control measure/dimension labels, sort order, scale (via DataPoint reference), fractional digits, and fixed filters applied to the chart (filters limit the dimension values shown). Examples below show common patterns: label changes applied to measure/dimension, adding a sort, and adding a fixed filter (FilterExpression example).
LANGUAGE: XML
CODE:
```xml
<!-- file: webapp/annotations/annotations.xml -->
<Annotations Target="MyService.MyEntityType">

  <!-- Measure label and dimension label are typically defined as Common.Label or @Title on the properties
       OR can be set in the Measure/Dimension records in UI.Chart (see earlier UI.Chart example). -->

  <!-- Example: Sort order for the chart (PresentationVariant with SortOrder) -->
  <Annotation Term="UI.PresentationVariant" Qualifier="PV_SalesByRegion">
    <Record>
      <PropertyValue Property="SortOrder">
        <Collection>
          <Record>
            <PropertyValue Property="Property" PropertyPath="SalesAmount" />
            <PropertyValue Property="Descending" Bool="true" />
          </Record>
        </Collection>
      </PropertyValue>
      <PropertyValue Property="Visualizations">
        <Collection>
          <AnnotationPath>@UI.Chart#SalesByRegion</AnnotationPath>
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>

  <!-- Example: fixed filter for visual filter (FilterExpression example) -->
  <Annotation Term="UI.Chart" Qualifier="SalesByRegion">
    <Record>
      <!-- existing Measures/Dimensions -->
      <PropertyValue Property="SelectionPresentationVariant" AnnotationPath="@UI.SelectionPresentationVariant#SPV_SalesByRegion"/>
    </Record>
  </Annotation>

  <Annotation Term="UI.SelectionPresentationVariant" Qualifier="SPV_SalesByRegion">
    <Record>
      <PropertyValue Property="SelectionVariant">
        <AnnotationPath>@UI.SelectionVariant#SV_SalesByRegion</AnnotationPath>
      </PropertyValue>
      <PropertyValue Property="PresentationVariant">
        <AnnotationPath>@UI.PresentationVariant#PV_SalesByRegion</AnnotationPath>
      </PropertyValue>
    </Record>
  </Annotation>

  <Annotation Term="UI.SelectionVariant" Qualifier="SV_SalesByRegion">
    <Record>
      <PropertyValue Property="SelectOptions">
        <Collection>
          <Record>
            <PropertyValue Property="PropertyName" String="Region" />
            <PropertyValue Property="Sign" EnumMember="UI.SelectionSign/I" />
            <PropertyValue Property="Option" String="EQ" />
            <PropertyValue Property="Low" String="EMEA" />
          </Record>
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>

</Annotations>
```

STEP: Notes & constraints to enforce in code/automation
DESCRIPTION: Important constraints and behaviors to check or enforce in automated tooling:
- Properties annotated with UI.Hidden, UI.HiddenFilter, or listed in Capabilities.FilterRestrictions NonFilterableProperties cannot be used as filters; don’t add them to UI.SelectionFields.
- Visual filters require analytically enabled entities and groupable properties for the dimension.
- Time-based properties (Edm.Date, Edm.Time, Edm.DateTime, Edm.DateTimeOffset) can be rendered as bar or line charts; all other types use bar charts only.
- Creating a new measure for a visual filter: only allowed when no existing measure uses the same aggregated property + aggregation method; custom aggregations not supported.
- Adding a visual filter updates both the local annotation file (example: webapp/annotations/annotations.xml) and webapp/manifest.json; deleting a visual filter removes manifest entries but does not automatically remove annotations—use a cleanup step to remove unused annotations.
- Sequence of visual filters is derived from the sequence of compact filters in UI.SelectionFields. Reorder UI.SelectionFields to reorder visual filters.

STEP: CAP compatibility note
DESCRIPTION: If you work in a CAP Node.js project, certain analytics/visual filter features depend on the OData parser. Validate support based on your CAP version. See release notes for details.
LANGUAGE: TEXT
CODE:
```text
Reference: Release notes CAP (analytics/OData parser details)
https://cap.cloud.sap/docs/releases/oct22?q=odata_new_parser#alp-sflight
```

Use the above XML/JSON snippets as canonical templates when generating or validating local annotation files and manifest.json changes for filter fields and visual filters in Fiori Elements list reports.
--------------------------------

**TITLE**: Configuring Object Page Footer Actions (UI.DataFieldForAction) for Fiori Tools

**INTRODUCTION**: This guide shows how to define and maintain actions that appear in the Object Page Footer in SAP Fiori tools. It includes code examples for annotation formats (Annotation XML and JSON), explains which annotation types are allowed in the Footer, how Criticality affects ordering, and how to move actions between Footer, Header, and Form sections using the Page Editor.

**TAGS**: fiori-tools, annotations, UI.DataFieldForAction, footer, object-page, criticality, page-editor

**STEP**: 1 — Define a footer action using UI.DataFieldForAction (Annotation XML)

**DESCRIPTION**: Add a DataFieldForAction record inside the UI.Identification annotation applied to the main entity. Set Determining = true to make the action eligible to appear in the Footer. Use Criticality to influence Footer ordering (Positive/Negative/None). Avoid using DataFieldForIntentBasedNavigation for Footer actions (external navigation actions are not allowed in Footer).

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Filename: annotations/EntityName.annotations.xml -->
<Annotations Target="MyService.MyEntityType">
  <Annotation Term="UI.Identification">
    <Collection>
      <!-- Footer action (eligible because Determining="true") -->
      <Record Type="UI.DataFieldForAction">
        <!-- Action is the qualified action/function name exposed by the OData service -->
        <PropertyValue Property="Action" String="MyService.MyAction" />
        <PropertyValue Property="Label" String="Execute Action" />
        <PropertyValue Property="Determining" Bool="true" />
        <!-- Use Criticality to affect Footer ordering. Values: UI.CriticalityType/Positive | /Negative | /None -->
        <PropertyValue Property="Criticality" EnumMember="UI.CriticalityType/Positive" />
        <!-- RequiresContext and Importance are ignored for header/footer placement; include only if needed -->
      </Record>

      <!-- Example: This will NOT appear in the Footer (external navigation) -->
      <Record Type="UI.DataFieldForIntentBasedNavigation">
        <PropertyValue Property="SemanticObject" String="SalesOrder" />
        <PropertyValue Property="Action" String="display" />
        <PropertyValue Property="Label" String="Go to Sales Order" />
      </Record>
    </Collection>
  </Annotation>
</Annotations>
```

**STEP**: 2 — Define the same footer action using JSON annotations (Alternative format)

**DESCRIPTION**: If your project uses JSONAnnotation files, declare the DataFieldForAction under UI.Identification. The same rules apply: Determining = true and avoid intent-based navigation types for Footer placement.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "Annotations": {
    "MyService.MyEntityType": {
      "UI": {
        "Identification": [
          {
            "@type": "UI.DataFieldForAction",
            "Action": "MyService.MyAction",
            "Label": "Execute Action",
            "Determining": true,
            "Criticality": "UI.CriticalityType/Positive"
          },
          {
            "@type": "UI.DataFieldForIntentBasedNavigation",
            "SemanticObject": "SalesOrder",
            "Action": "display",
            "Label": "Go to Sales Order"
          }
        ]
      }
    }
  }
}
```

**STEP**: 3 — How Criticality affects Footer ordering

**DESCRIPTION**: Changing Criticality from None to Positive/Negative (or vice versa) updates the sequence of action nodes automatically in the Object Page Footer. Use Criticality to control grouping and order: Positive actions typically appear first, then None, then Negative (UI may sort differently depending on Fiori version).

**LANGUAGE**: Text

**CODE**:
```text
- Set Criticality using EnumMember "UI.CriticalityType/Positive" | "UI.CriticalityType/Negative" | "UI.CriticalityType/None"
- When Criticality changes, the Page Editor outline is updated automatically to reflect the new order.
```

**STEP**: 4 — Restriction: External navigation actions cannot be in the Footer

**DESCRIPTION**: DataFieldForIntentBasedNavigation (external navigation) annotations are not allowed in the Footer. If you add intent-based navigation records under UI.Identification they will not render as Footer actions. Use DataFieldForAction for Footer actions.

**LANGUAGE**: Text

**CODE**:
```text
Invalid for Footer:
- UI.DataFieldForIntentBasedNavigation (external intent-based navigation)

Valid for Footer:
- UI.DataFieldForAction with Determining = true
```

**STEP**: 5 — Move actions between Footer, Header, and Form sections using Page Editor

**DESCRIPTION**: Use the Fiori Tools Page Editor to reorganize actions visually:
- Open the Object Page in Page Editor (Layout Editor).
- In the Outline view, drag-and-drop action nodes between Footer, Header, and Form sections.
- Semantically highlighted actions (semantic actions) cannot be moved; they are fixed in their semantic placement.
- Moving via Page Editor updates the annotation structure or runtime placement accordingly.

**LANGUAGE**: Text

**CODE**:
```text
Page Editor actions:
1. Open Page Editor for the Object Page (Fiori tools).
2. In Outline, locate actions under "Footer", "Header", or "Form".
3. Drag an action node to the desired container (if not semantically highlighted).
4. Save — the editor updates the underlying annotations/placement metadata.
```

**STEP**: 6 — Example: Full minimal OData annotation snippet with two actions and different criticalities

**DESCRIPTION**: Example showing two DataFieldForAction records (one Positive, one None). Both are Determining and therefore eligible for Footer; their Criticality values will affect ordering.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="MyService.MyEntityType">
  <Annotation Term="UI.Identification">
    <Collection>
      <Record Type="UI.DataFieldForAction">
        <PropertyValue Property="Action" String="MyService.ApproveAction" />
        <PropertyValue Property="Label" String="Approve" />
        <PropertyValue Property="Determining" Bool="true" />
        <PropertyValue Property="Criticality" EnumMember="UI.CriticalityType/Positive" />
      </Record>
      <Record Type="UI.DataFieldForAction">
        <PropertyValue Property="Action" String="MyService.EditAction" />
        <PropertyValue Property="Label" String="Edit" />
        <PropertyValue Property="Determining" Bool="true" />
        <PropertyValue Property="Criticality" EnumMember="UI.CriticalityType/None" />
      </Record>
    </Collection>
  </Annotation>
</Annotations>
```
--------------------------------

**TITLE**: Form and Object Page — Implementation Guide for Fiori Tools

**INTRODUCTION**: This guide explains how to assemble a Fiori Object Page using the supported elements (Header, Form Section, Table Section, Identification Section, Group Section, Footer). It is targeted at code-generation agents and developers building or scaffolding a Fiori Object Page descriptor and basic SAPUI5 XML view. The guide includes file references, a recommended folder layout, a JSON descriptor example that ties documentation files to implementation artifacts, and a sample SAPUI5 XML view using ObjectPageLayout.

**TAGS**: fiori-tools, object-page, objectpagelayout, sapui5, UI5, form-section, table-section, header, footer

**STEP**: 1 — Reference official docs

**DESCRIPTION**: Link to the authoritative design and developer references used to build object pages. Include them directly in generated artifacts or documentation pages.

**LANGUAGE**: Markdown/URLs

**CODE**:
```text
Fiori Design Guidelines:
https://experience.sap.com/fiori-design-web/object-page/

Developing Low-Code Business Application:
https://help.sap.com/viewer/6a5fc562f6e2402aa84b0416614a05fc/Dev/en-US/4d00865158bd4bbb8f170f59f690cdb2.html
```

**STEP**: 2 — Preserve and reference element documentation files

**DESCRIPTION**: Keep the following element documentation file names available to map docs to implementation. Use these filenames as metadata keys in descriptors or scaffolding tools.

**LANGUAGE**: Plain text

**CODE**:
```text
Supported element docs (preserve these filenames/paths):
- header-a05d7fc.md#loioa05d7fc1bbbf42a0ade9fb50f6b58b56
- form-section-4102b3d.md
- table-section-fc59378.md
- identification-section-b83f501.md
- group-section-1894c47.md
- footer-1b391bd.md
```

**STEP**: 3 — Recommended folder structure for Object Page artifacts

**DESCRIPTION**: Create a predictable folder layout for generated views, fragments, controllers, and descriptor JSON. This layout helps generator tooling locate and link implementation files with documentation files above.

**LANGUAGE**: Plain text / tree

**CODE**:
```text
src/
  view/
    ObjectPage.view.xml
    fragments/
      Header.fragment.xml
      FormSection.fragment.xml
      TableSection.fragment.xml
      IdentificationSection.fragment.xml
      GroupSection.fragment.xml
      Footer.fragment.xml
  controller/
    ObjectPage.controller.js
  descriptor/
    object-page.json
  docs/
    header-a05d7fc.md
    form-section-4102b3d.md
    table-section-fc59378.md
    identification-section-b83f501.md
    group-section-1894c47.md
    footer-1b391bd.md
```

**STEP**: 4 — Object page descriptor JSON (map docs to implementation fragments)

**DESCRIPTION**: Use a lightweight JSON descriptor that maps element types to fragment files and documentation filenames. This descriptor is suitable for code generators to read and produce code or docs. Keep keys explicit (header, sections array, footer) and include docFile references that match the filenames provided in STEP 2.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "objectPage": {
    "id": "SalesOrderObjectPage",
    "title": "Sales Order",
    "header": {
      "fragment": "src/view/fragments/Header.fragment.xml",
      "docFile": "docs/header-a05d7fc.md#loioa05d7fc1bbbf42a0ade9fb50f6b58b56"
    },
    "sections": [
      {
        "type": "IdentificationSection",
        "id": "identificationSection",
        "fragment": "src/view/fragments/IdentificationSection.fragment.xml",
        "docFile": "docs/identification-section-b83f501.md"
      },
      {
        "type": "FormSection",
        "id": "generalForm",
        "fragment": "src/view/fragments/FormSection.fragment.xml",
        "docFile": "docs/form-section-4102b3d.md"
      },
      {
        "type": "GroupSection",
        "id": "additionalGroup",
        "fragment": "src/view/fragments/GroupSection.fragment.xml",
        "docFile": "docs/group-section-1894c47.md"
      },
      {
        "type": "TableSection",
        "id": "itemsTable",
        "fragment": "src/view/fragments/TableSection.fragment.xml",
        "docFile": "docs/table-section-fc59378.md"
      }
    ],
    "footer": {
      "fragment": "src/view/fragments/Footer.fragment.xml",
      "docFile": "docs/footer-1b391bd.md"
    }
  }
}
```

**STEP**: 5 — Sample SAPUI5 XML view using ObjectPageLayout and fragments

**DESCRIPTION**: Implement a minimal ObjectPage XML view that loads the header and the listed fragments as subsections. Generators should emit fragments referenced in the descriptor JSON and include them here by sap.ui.core.Fragment or by aggregating them inline. This example uses XML view fragment inclusion patterns.

**LANGUAGE**: XML

**CODE**:
```xml
<mvc:View
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.uxap"
  xmlns:core="sap.ui.core"
  controllerName="your.namespace.controller.ObjectPage"
  displayBlock="true"
  xmlns:layout="sap.ui.layout">
  <ObjectPageLayout id="objectPageLayout" headerTitle="{/headerTitle}">
    <!-- Header: either full header aggregation or fragment -->
    <headerTitle>
      <core:Fragment fragmentName="your.namespace.view.fragments.Header" type="XML"/>
    </headerTitle>

    <!-- Sections container -->
    <sections>
      <!-- Identification Section -->
      <ObjectPageSection id="identificationSection" title="Identification">
        <core:Fragment fragmentName="your.namespace.view.fragments.IdentificationSection" type="XML"/>
      </ObjectPageSection>

      <!-- Form Section -->
      <ObjectPageSection id="generalForm" title="General">
        <core:Fragment fragmentName="your.namespace.view.fragments.FormSection" type="XML"/>
      </ObjectPageSection>

      <!-- Group Section -->
      <ObjectPageSection id="additionalGroup" title="Additional Information">
        <core:Fragment fragmentName="your.namespace.view.fragments.GroupSection" type="XML"/>
      </ObjectPageSection>

      <!-- Table Section -->
      <ObjectPageSection id="itemsTable" title="Items">
        <core:Fragment fragmentName="your.namespace.view.fragments.TableSection" type="XML"/>
      </ObjectPageSection>
    </sections>

    <!-- Footer: custom footer aggregation or use a fragment -->
    <footer>
      <core:Fragment fragmentName="your.namespace.view.fragments.Footer" type="XML"/>
    </footer>
  </ObjectPageLayout>
</mvc:View>
```

**STEP**: 6 — Example fragment stubs (FormSection and TableSection)

**DESCRIPTION**: Provide minimal fragment content for generator output. Keep these fragments focused on controls (Form, Table) and IDs so automated wiring (binding, event handlers) can be injected.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- src/view/fragments/FormSection.fragment.xml -->
<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:layout="sap.ui.layout">
  <VBox>
    <SimpleForm id="GeneralSimpleForm" editable="true" layout="ResponsiveGridLayout">
      <Label text="Order ID"/>
      <Input id="orderId" value="{/OrderID}"/>
      <Label text="Customer"/>
      <Input id="customer" value="{/Customer}"/>
      <Label text="Status"/>
      <Input id="status" value="{/Status}"/>
    </SimpleForm>
  </VBox>
</core:FragmentDefinition>
```

**LANGUAGE**: XML

**CODE**:
```xml
<!-- src/view/fragments/TableSection.fragment.xml -->
<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:table="sap.m">
  <VBox>
    <Table id="ItemsTable" inset="false" items="{/Items}">
      <columns>
        <Column><Text text="Item"/></Column>
        <Column><Text text="Quantity"/></Column>
        <Column><Text text="Price"/></Column>
      </columns>
      <items>
        <ColumnListItem type="Active">
          <cells>
            <Text text="{Item}"/>
            <Text text="{Quantity}"/>
            <Text text="{Price}"/>
          </cells>
        </ColumnListItem>
      </items>
    </Table>
  </VBox>
</core:FragmentDefinition>
```

**STEP**: 7 — Controller wiring pattern

**DESCRIPTION**: Minimal controller skeleton showing how to load the descriptor and map fragment files to view fragments. Generators can emit this pattern and replace descriptor path or fragment names.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// src/controller/ObjectPage.controller.js
sap.ui.define([
  "sap/ui/core/mvc/Controller",
  "sap/ui/core/Fragment",
  "sap/ui/model/json/JSONModel"
], function(Controller, Fragment, JSONModel) {
  return Controller.extend("your.namespace.controller.ObjectPage", {
    onInit: function() {
      // load descriptor (object-page.json)
      var oModel = new JSONModel();
      // Example: fetch descriptor and set as model for generator runtime
      fetch("src/descriptor/object-page.json")
        .then(function(resp){ return resp.json(); })
        .then(function(json){
          oModel.setData(json);
        });
      this.getView().setModel(oModel, "descriptor");

      // Example: set page data model for bindings in fragments
      var oDataModel = new JSONModel({
        headerTitle: "Sales Order 123",
        OrderID: "123",
        Customer: "ACME Corp",
        Status: "Open",
        Items: [
          {Item: "A1", Quantity: 2, Price: "10.00"},
          {Item: "B2", Quantity: 1, Price: "20.00"}
        ]
      });
      this.getView().setModel(oDataModel);
    }
  });
});
```

**STEP**: 8 — Generation/Scaffolding checklist

**DESCRIPTION**: When auto-generating an Object Page, ensure these items are produced and linked:
- descriptor/object-page.json with docFile references matching docs/*.md
- XML view src/view/ObjectPage.view.xml referencing fragments
- Fragment files for each element: Header/Identification/Form/Group/Table/Footer
- Controller skeleton wiring descriptor and data model
- docs folder containing header-a05d7fc.md, form-section-4102b3d.md, table-section-fc59378.md, identification-section-b83f501.md, group-section-1894c47.md, footer-1b391bd.md

**LANGUAGE**: Plain text

**CODE**:
```text
Checklist:
- src/descriptor/object-page.json (see example)
- src/view/ObjectPage.view.xml (see example)
- src/view/fragments/*.fragment.xml (Header, FormSection, TableSection, IdentificationSection, GroupSection, Footer)
- src/controller/ObjectPage.controller.js (controller skeleton)
- src/docs/*.md preserved: header-a05d7fc.md, form-section-4102b3d.md, table-section-fc59378.md, identification-section-b83f501.md, group-section-1894c47.md, footer-1b391bd.md
```

--------------------------------

**TITLE**: Form Section — Add / Move / Delete / Maintain UI.FieldGroup and UI.ReferenceFacet Annotations

**INTRODUCTION**: This document provides actionable, code-focused instructions and annotation examples for adding, moving, deleting, and maintaining Form Sections in SAP Fiori apps. Form Sections correspond to UI.FieldGroup annotations and are referenced in UI.Facets as UI.ReferenceFacet records. Examples are given as OData V4 XML annotation snippets and a CAP CDS override example. Use these snippets to programmatically edit annotation files, reason about reorder behavior, or automate cleanup tasks.

**TAGS**: fiori-tools, UI.FieldGroup, UI.ReferenceFacet, UI.Facets, annotations, OData, CDS, CAP, form-section

STEP: Add Form Section — OData V4 XML annotation (create FieldGroup + ReferenceFacet)
DESCRIPTION: Add a new UI.FieldGroup (empty Data collection) and add a UI.ReferenceFacet record to UI.Facets for the Entity Type. If UI.Facets does not exist, add the annotation for the entity. The ReferenceFacet must have Target (annotation path to the FieldGroup), Label (user text), and ID (string generated from the label).
LANGUAGE: XML
CODE:
```xml
<!-- Add both the ReferenceFacet record (in UI.Facets) and the UI.FieldGroup qualifier -->
<!-- Replace MyService.MyEntity with your target entity, and Section1/Section Label with real values -->

<Annotations Target="MyService.MyEntity">
  <!-- Add or extend UI.Facets collection -->
  <Annotation Term="UI.Facets">
    <Collection>
      <!-- New ReferenceFacet record for the new section -->
      <Record Type="UI.ReferenceFacet">
        <PropertyValue Property="Target" String="@UI.FieldGroup#Section1"/>
        <PropertyValue Property="Label" String="Section Label"/>
        <PropertyValue Property="ID" String="Section1"/>
      </Record>

      <!-- ...other existing ReferenceFacet records follow (order is relevant) -->
    </Collection>
  </Annotation>

  <!-- New UI.FieldGroup qualifier for the section with empty Data -->
  <Annotation Term="UI.FieldGroup" Qualifier="Section1">
    <Record>
      <PropertyValue Property="Data">
        <Collection/>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

STEP: Add Form Section — CAP CDS override example (using statement + facet + fieldGroup)
DESCRIPTION: In CAP CDS local override file, add a using statement for UI annotations (tool may auto-add it) and annotate the entity with a ReferenceFacet and FieldGroup. Use the local file to override or extend existing UI.Facets.
LANGUAGE: CDS
CODE:
```cds
// Example local override CDS file (e.g., srv/annotations.cds)
// Note: your project/tools may auto-add the 'using' statement for UI annotations

using { UI } from '@sap/ux'; // tool may add this automatically when overriding

annotate MyService.MyEntity with @UI.facet: [
  {
    $Type: 'UI.ReferenceFacet',
    Target: 'UI.FieldGroup#Section1',
    Label: 'Section Label',
    ID: 'Section1'
  }
];

annotate MyService.MyEntity with @UI.fieldGroup: [
  {
    Qualifier: 'Section1',
    Data: [] // empty collection; fields can be added later
  }
];
```

STEP: Move Form Section — Reorder UI.Facets / UI.HeaderFacets
DESCRIPTION: Change the visual order of sections by reordering the corresponding ReferenceFacet records inside the UI.Facets (or UI.HeaderFacets) collection. The sequence of records determines how sections are presented at runtime. To move multiple sections, select multiple records and reorder them together.
LANGUAGE: XML
CODE:
```xml
<!-- Before: ReferenceFacet A, ReferenceFacet B, ReferenceFacet C -->
<Annotation Term="UI.Facets">
  <Collection>
    <Record Type="UI.ReferenceFacet"> ... <!-- ID: A --> </Record>
    <Record Type="UI.ReferenceFacet"> ... <!-- ID: B --> </Record>
    <Record Type="UI.ReferenceFacet"> ... <!-- ID: C --> </Record>
  </Collection>
</Annotation>

<!-- After moving: reposition records, e.g., B first -->
<Annotation Term="UI.Facets">
  <Collection>
    <Record Type="UI.ReferenceFacet"> ... <!-- ID: B --> </Record>
    <Record Type="UI.ReferenceFacet"> ... <!-- ID: A --> </Record>
    <Record Type="UI.ReferenceFacet"> ... <!-- ID: C --> </Record>
  </Collection>
</Annotation>
```

STEP: Delete Form Section — Remove ReferenceFacet and cleanup FieldGroup
DESCRIPTION: Deleting a section removes the UI.ReferenceFacet record from UI.Facets. After deletion, perform cleanup to remove the unreferenced UI.FieldGroup annotation (Qualifer record) if it is no longer referenced elsewhere.
LANGUAGE: XML
CODE:
```xml
<!-- Before: UI.Facets contains ReferenceFacet for Section1 -->
<Annotation Term="UI.Facets">
  <Collection>
    <Record Type="UI.ReferenceFacet"> ... <!-- ID: Section1 --> </Record>
    <!-- other facets -->
  </Collection>
</Annotation>

<!-- To delete the section: remove the corresponding Record entirely -->
<Annotation Term="UI.Facets">
  <Collection>
    <!-- other facets only; Section1 record removed -->
  </Collection>
</Annotation>

<!-- Cleanup: remove the corresponding UI.FieldGroup qualifier if not referenced -->
<!-- Remove this Annotation block if unreferenced -->
<!-- <Annotation Term="UI.FieldGroup" Qualifier="Section1"> ... </Annotation> -->
```

STEP: Change Section Label — Update ReferenceFacet Label property
DESCRIPTION: Update the displayed label by changing the Label property in the UI.ReferenceFacet record. The UI and editor will show the new value.
LANGUAGE: XML
CODE:
```xml
<!-- Update Label string value for the ReferenceFacet -->
<Annotation Term="UI.Facets">
  <Collection>
    <Record Type="UI.ReferenceFacet">
      <PropertyValue Property="Target" String="@UI.FieldGroup#Section1"/>
      <PropertyValue Property="Label" String="New Section Title"/> <!-- updated -->
      <PropertyValue Property="ID" String="Section1"/>
    </Record>
  </Collection>
</Annotation>
```

STEP: Display On Demand — Toggle embedded UI.PartOfPreview annotation on ReferenceFacet
DESCRIPTION: When a Form Section (or Identification Section) is used as a sub-section in a Group Section, toggling "Display On Demand" adds or removes an embedded UI.PartOfPreview annotation on the UI.ReferenceFacet record. When enabled, add UI.PartOfPreview with boolean false. When disabled, remove the embedded annotation.
LANGUAGE: XML
CODE:
```xml
<!-- Default: no UI.PartOfPreview embedded on the ReferenceFacet -->
<Record Type="UI.ReferenceFacet">
  <PropertyValue Property="Target" String="@UI.FieldGroup#Section1"/>
  <PropertyValue Property="Label" String="Section Label"/>
  <PropertyValue Property="ID" String="Section1"/>
</Record>

<!-- Display On Demand enabled: add embedded UI.PartOfPreview with Bool=false -->
<Record Type="UI.ReferenceFacet">
  <PropertyValue Property="Target" String="@UI.FieldGroup#Section1"/>
  <PropertyValue Property="Label" String="Section Label"/>
  <PropertyValue Property="ID" String="Section1"/>

  <!-- Embedded annotation indicating 'part of preview' is false -->
  <Annotation Term="UI.PartOfPreview">
    <Bool>false</Bool>
  </Annotation>
</Record>

<!-- To disable Display On Demand: remove the UI.PartOfPreview Annotation element from the Record -->
```

STEP: Notes and Best Practices (Reconciliation / Overrides / CAP)
DESCRIPTION: Technical behaviors to preserve when programmatically editing annotations:
- If UI.Facet (UI.Facets) annotation does not exist, create it on the entity where the object page is defined.
- If UI.Facets exists on an underlying layer, adding a local UI.Facets will override the underlying annotation (local file becomes authoritative).
- In CAP CDS overrides, tooling will add a using statement for the UI annotation model into the local override file when you create or modify UI annotations.
- Always run an annotation cleanup step (or tool-supported cleanup) after removing ReferenceFacet records to delete unused UI.FieldGroup qualifiers to avoid orphaned annotations.
LANGUAGE: JSON
CODE:
```json
{
  "notes": [
    "Create UI.Facets if missing on the target entity.",
    "Local overrides replace or extend underlying layer annotations.",
    "CAP CDS local override may require/receive a 'using' statement for UI annotations.",
    "After deleting ReferenceFacet records, delete corresponding UI.FieldGroup Qualifier if unreferenced."
  ]
}
```
--------------------------------

**TITLE**: Group Section — annotation examples and edit patterns (UI.Facets / UI.CollectionFacet)

**INTRODUCTION**: This document provides concise, code-oriented examples and editable snippets for creating, nesting, reordering, renaming, hiding, and deleting Group sections in Fiori tools by editing the changeable annotation file (UI.Facets). Use these snippets when implementing Group sections via annotations or when implementing editor features that modify the annotations programmatically.

**TAGS**: fiori-tools, annotations, ui.facets, collectionfacet, group-section, sapui5, ui

STEP: Add Group Section (Annotation XML)

DESCRIPTION: Add a top-level Group section by adding a UI.CollectionFacet entry into the UI.Facets annotation collection. Typical file path: webapp/annotations/annotations.xml (changeable annotation file used by the Page Editor). The new CollectionFacet must set Label and an initially empty Facets collection.

LANGUAGE: XML

CODE:
```XML
<!-- File: webapp/annotations/annotations.xml -->
<Annotations Target="YourService.EntityType">
  <Annotation Term="UI.Facets">
    <Collection>
      <!-- New Group Section -->
      <Record Type="UI.CollectionFacet">
        <PropertyValue Property="Label" String="My Group Section"/>
        <PropertyValue Property="Facets">
          <!-- Start with an empty collection; subsections can be added here -->
          <Collection/>
        </PropertyValue>
      </Record>
      <!-- other facets... -->
    </Collection>
  </Annotation>
</Annotations>
```

STEP: Add Group Section (Annotation JSON)

DESCRIPTION: Equivalent JSON representation for environments that manage annotations as JSON objects (e.g., annotation files in JSON format). Insert a UI.CollectionFacet object into UI.Facets.

LANGUAGE: JSON

CODE:
```JSON
{
  "Annotations": {
    "YourService.EntityType@UI.Facets": [
      {
        "Record": {
          "Type": "UI.CollectionFacet",
          "PropertyValue": [
            { "Property": "Label", "String": "My Group Section" },
            { "Property": "Facets", "Collection": [] }
          ]
        }
      }
    ]
  }
}
```

STEP: Add Subsection (nested facet)

DESCRIPTION: Add a subsection (for example, a Form Section represented as a CollectionFacet) inside a Group section by adding a nested Record in the parent CollectionFacet's Facets collection.

LANGUAGE: XML

CODE:
```XML
<!-- Add this inside the parent CollectionFacet's Facets collection -->
<PropertyValue Property="Facets">
  <Collection>
    <!-- Example: nested Form Section (as a CollectionFacet) -->
    <Record Type="UI.CollectionFacet">
      <PropertyValue Property="Label" String="Sub Form Section"/>
      <PropertyValue Property="Facets">
        <Collection>
          <!-- Sub-sub facets (fields/fieldgroups) are placed here -->
        </Collection>
      </PropertyValue>
    </Record>
  </Collection>
</PropertyValue>
```

STEP: Change Section Label (rename)

DESCRIPTION: Rename a Group section by updating the Label property of the CollectionFacet. This change affects what the Page Editor and the preview display.

LANGUAGE: XML

CODE:
```XML
<Record Type="UI.CollectionFacet">
  <!-- old label -->
  <!-- <PropertyValue Property="Label" String="Old Name"/> -->

  <!-- updated label -->
  <PropertyValue Property="Label" String="New Group Title"/>
  <PropertyValue Property="Facets">
    <Collection/>
  </PropertyValue>
</Record>
```

STEP: Hide a Section (add UI.Hidden)

DESCRIPTION: Mark a Group section as hidden by adding the UI.Hidden annotation (Bool = true) to the facet record. UI.Hidden is used by runtime to evaluate visibility.

LANGUAGE: XML

CODE:
```XML
<Record Type="UI.CollectionFacet">
  <PropertyValue Property="Label" String="Conditionally Hidden Group"/>
  <Annotation Term="UI.Hidden">
    <!-- static hide -->
    <Bool>true</Bool>
    <!-- or reference an expression/annotation path for dynamic hide -->
  </Annotation>
  <PropertyValue Property="Facets">
    <Collection/>
  </PropertyValue>
</Record>
```

STEP: Move / Reorder Sections (edit order in UI.Facets)

DESCRIPTION: Reorder sections by changing the sequence of Records inside the UI.Facets Collection. The runtime and Page Editor reflect the ordering from top-to-bottom in the collection.

LANGUAGE: XML

CODE:
```XML
<!-- Before: Section A then Section B -->
<Annotation Term="UI.Facets">
  <Collection>
    <Record Type="UI.CollectionFacet"><PropertyValue Property="Label" String="Section A"/></Record>
    <Record Type="UI.CollectionFacet"><PropertyValue Property="Label" String="Section B"/></Record>
  </Collection>
</Annotation>

<!-- After swapping order to move Section B above Section A -->
<Annotation Term="UI.Facets">
  <Collection>
    <Record Type="UI.CollectionFacet"><PropertyValue Property="Label" String="Section B"/></Record>
    <Record Type="UI.CollectionFacet"><PropertyValue Property="Label" String="Section A"/></Record>
  </Collection>
</Annotation>
```

STEP: Delete Group Section (remove Record)

DESCRIPTION: Delete a Group section by removing its UI.CollectionFacet record from the UI.Facets collection. Deleting the facet record removes that section from the page. Afterwards, run your project's annotation cleanup procedure to remove unreferenced annotation fragments.

LANGUAGE: XML

CODE:
```XML
<!-- Remove the entire Record block for the target CollectionFacet -->
<Annotation Term="UI.Facets">
  <Collection>
    <!-- This Record was deleted:
    <Record Type="UI.CollectionFacet">
      <PropertyValue Property="Label" String="Group To Delete"/>
      <PropertyValue Property="Facets"><Collection> ... </Collection></PropertyValue>
    </Record>
    -->
    <!-- remaining facets... -->
  </Collection>
</Annotation>
```

STEP: Cleanup unreferenced annotations (guidance)

DESCRIPTION: After deletion, unreferenced annotation fragments (e.g., nested facets, references, or annotation targets) may remain in the changeable annotation file. Run your project's annotation cleanup process / tool to remove those fragments. If implementing a cleanup tool, follow this algorithm:
- Parse the changeable annotation file.
- Build a set of all annotation object IDs/paths currently referenced by UI.Facets.
- Traverse the annotation file and remove any annotation records not referenced by the active set.
- Persist the cleaned annotation file back to the changeable annotations location.

LANGUAGE: PSEUDOCODE

CODE:
```
// Pseudocode for cleanup:
annotations = loadAnnotations("webapp/annotations/annotations.xml")
referencedRefs = collectReferencedTargetsFrom(annotations.UI.Facets)
for each node in annotations:
  if node.id not in referencedRefs and node.isOrphan():
    annotations.remove(node)
saveAnnotations(annotations)
```

STEP: Editor UI integration notes (Page Editor actions → annotation edits)

DESCRIPTION: Map Page Editor UI actions to annotation edits:
- Add Group Section: append UI.CollectionFacet record with Label and empty Facets array to UI.Facets.
- Add Subsection: insert a new Record into the parent CollectionFacet's Facets collection.
- Move Section: reorder Record nodes inside the collection.
- Delete Section: remove the Record node and schedule cleanup for orphaned annotations.
- Change Label: update the PropertyValue for Label.
- Hidden: set UI.Hidden annotation on the Record.

LANGUAGE: JSON

CODE:
```JSON
{
  "pageEditorActionMapping": {
    "addGroup": "append Record(Type=UI.CollectionFacet) to UI.Facets",
    "addSubsection": "append Record to parent Facet.PropertyValue(Facets).Collection",
    "moveSection": "reorder Records inside the collection",
    "deleteSection": "remove Record and mark for cleanup",
    "renameSection": "update Record.PropertyValue where Property='Label'",
    "hideSection": "add Annotation Term='UI.Hidden' Bool=true to Record"
  }
}
```

STEP: Include icon stylesheet in editor preview (optional)

DESCRIPTION: Ensure the editor preview or documentation pages that render icons include the sap-icons.css stylesheet link.

LANGUAGE: HTML

CODE:
```HTML
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```


--------------------------------

**TITLE**: Object Page Header — Annotation Examples and Editor Actions (UI.HeaderInfo, UI.Facets, UI.PresentationVariant)

**INTRODUCTION**: Practical, code-focused examples to configure an SAP Fiori elements object page header via annotations and manifest.json. Includes XML annotation snippets for UI.HeaderInfo, header actions, header sections (UI.Facets/UI.ReferenceFacet), micro chart presentation variant and Sort Order, and manifest.json minUI5Version requirement. Use these snippets as templates to generate, edit, move, or remove header-related annotations.

**TAGS**: fiori-tools, annotations, UI.HeaderInfo, UI.Facets, UI.PresentationVariant, manifest.json, micro-chart, header-actions

---

STEP: Add stylesheet reference used by sample pages

DESCRIPTION: Include the sap-icons stylesheet in a view or HTML page when referencing SAP icons (preserved from source).

LANGUAGE: HTML

CODE:
```html
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```

---

STEP: Create or update UI.HeaderInfo (TypeName, TypeNamePlural, Title, ImageUrl, Initials, TypeImageUrl)

DESCRIPTION: Add the UI.HeaderInfo annotation to an entity type. Use PropertyPath values for Title, ImageUrl, and Initials. Set TypeName and TypeNamePlural strings. Use TypeImageUrl to reference a SAP icon (e.g., sap-icon://accept). If UI.HeaderInfo exists in a lower layer, copy it locally to modify values.

LANGUAGE: XML

CODE:
```xml
<!-- Annotations file: annotations.xml -->
<Annotations Target="MyService.MyEntityType">
  <Annotation Term="UI.HeaderInfo">
    <Record Type="UI.HeaderInfo">
      <!-- Type names (supports i18n strings) -->
      <PropertyValue Property="TypeName" String="Purchase Order"/>
      <PropertyValue Property="TypeNamePlural" String="Purchase Orders"/>

      <!-- Title: value is a PropertyPath referencing an entity property -->
      <PropertyValue Property="Title">
        <Record Type="UI.DataField">
          <PropertyValue Property="Value" Path="OrderID"/>
        </Record>
      </PropertyValue>

      <!-- ImageUrl: path to a string property (could be in a 1:1 nav property) -->
      <PropertyValue Property="ImageUrl" Path="HeaderImageUrl"/>

      <!-- Initials: path to a string property that provides initials -->
      <PropertyValue Property="Initials" Path="ContactInitials"/>

      <!-- TypeImageUrl: SAP icon reference -->
      <PropertyValue Property="TypeImageUrl" String="sap-icon://accept"/>
    </Record>
  </Annotation>
</Annotations>
```

---

STEP: Use i18n for TypeName/TypeNamePlural (recommended)

DESCRIPTION: Example of referencing i18n keys instead of literal strings. Put keys into i18n.properties and reference them in annotation values when supported by tooling. (If your tool requires raw strings in annotation files, populate the strings directly or run the translation integration step.)

LANGUAGE: Properties / XML

CODE:
```properties
# i18n.properties (project root: webapp/i18n/i18n.properties)
TYPE_NAME=Purchase Order
TYPE_NAME_PLURAL=Purchase Orders
```

```xml
<!-- annotations.xml (if your tooling supports annotation string lookup) -->
<PropertyValue Property="TypeName" String="{i18n>TYPE_NAME}"/>
<PropertyValue Property="TypeNamePlural" String="{i18n>TYPE_NAME_PLURAL}"/>
```

---

STEP: Hide standard header actions (Edit/Delete) via annotations on EntitySet

DESCRIPTION: When hiding the Edit or Delete buttons in the object page header, set UI.UpdateHidden or UI.DeleteHidden on the EntitySet. Use Bool="true" to hide. For dynamic hiding by property, use HideByProperty logic in your tooling or implement based on UI.Enablement annotations.

LANGUAGE: XML

CODE:
```xml
<!-- annotations.xml: apply to the EntitySet (not the EntityType) -->
<Annotations Target="MyService.MyEntitySet">
  <!-- Hide Edit in header -->
  <Annotation Term="UI.UpdateHidden" Bool="true"/>
  <!-- Hide Delete in header -->
  <Annotation Term="UI.DeleteHidden" Bool="true"/>
</Annotations>
```

---

STEP: Define annotation-based header actions (in-application and intent-based)

DESCRIPTION: Add DataFieldForAction for in-app actions and DataFieldForIntentBasedNavigation for external navigation. Set Determining only when appropriate (omit or set to false for non-determining actions). Place these under UI.Identification on the main entity.

LANGUAGE: XML

CODE:
```xml
<!-- annotations.xml -->
<Annotations Target="MyService.MyEntityType">
  <Annotation Term="UI.Identification">
    <Collection>
      <!-- In-app action -->
      <Record Type="UI.DataFieldForAction">
        <PropertyValue Property="Label" String="Approve"/>
        <PropertyValue Property="Action" String="MyService.ApproveAction"/>
        <PropertyValue Property="Determining" Bool="false"/>
      </Record>

      <!-- Intent-based navigation action -->
      <Record Type="UI.DataFieldForIntentBasedNavigation">
        <PropertyValue Property="Label" String="Open App"/>
        <PropertyValue Property="SemanticObject" String="PurchaseOrder"/>
        <PropertyValue Property="Action" String="display"/>
      </Record>

      <!-- Action group (menu) - only available via annotations -->
      <Record Type="UI.DataFieldForActionGroups">
        <PropertyValue Property="Label" String="More Actions"/>
        <PropertyValue Property="Actions">
          <Collection>
            <Record Type="UI.DataFieldForAction">
              <PropertyValue Property="Label" String="Custom Action 1"/>
              <PropertyValue Property="Action" String="MyService.CustomAction1"/>
            </Record>
            <Record Type="UI.DataFieldForAction">
              <PropertyValue Property="Label" String="Custom Action 2"/>
              <PropertyValue Property="Action" String="MyService.CustomAction2"/>
            </Record>
          </Collection>
        </PropertyValue>
      </Record>
    </Collection>
  </Annotation>
</Annotations>
```

---

STEP: Add Header Sections via UI.Facets and UI.ReferenceFacet (Form, Data Point, Progress, Rating, Micro Chart)

DESCRIPTION: Create UI.Facets with UI.ReferenceFacet records referencing UI.FieldGroup or a specific annotation target for header sections. The examples below show a Form Section (UI.FieldGroup reference), a DataPoint section (UI.DataPoint via UI.ReferenceFacet), and a MicroChart section with presentation variant reference.

LANGUAGE: XML

CODE:
```xml
<!-- annotations.xml -->
<Annotations Target="MyService.MyEntityType">
  <Annotation Term="UI.Facets">
    <Collection>
      <!-- Form Section referencing a UI.FieldGroup qualifier -->
      <Record Type="UI.ReferenceFacet">
        <PropertyValue Property="Label" String="General"/>
        <PropertyValue Property="Target" AnnotationPath="@UI.FieldGroup#HeaderGeneral"/>
      </Record>

      <!-- Data Point Section referencing a UI.DataPoint qualifier -->
      <Record Type="UI.ReferenceFacet">
        <PropertyValue Property="Label" String="Key Amount"/>
        <PropertyValue Property="Target" AnnotationPath="@UI.DataPoint#TotalAmount"/>
      </Record>

      <!-- Micro Chart Section referencing a UI.Chart or similar qualifier and PresentationVariant -->
      <Record Type="UI.ReferenceFacet">
        <PropertyValue Property="Label" String="Sales Trend"/>
        <PropertyValue Property="Target" AnnotationPath="@UI.Chart#SalesTrend"/>
      </Record>
    </Collection>
  </Annotation>

  <!-- Example: UI.FieldGroup definition used by the Form Section -->
  <Annotation Term="UI.FieldGroup" Qualifier="HeaderGeneral">
    <Record Type="UI.FieldGroup">
      <PropertyValue Property="Label" String="General"/>
      <PropertyValue Property="Data" Path="OrderID"/>
    </Record>
  </Annotation>

  <!-- Example: UI.DataPoint definition used by Data Point Section -->
  <Annotation Term="UI.DataPoint" Qualifier="TotalAmount">
    <Record Type="UI.DataPoint">
      <PropertyValue Property="Value" Path="TotalValue"/>
      <PropertyValue Property="Label" String="Total Amount"/>
    </Record>
  </Annotation>

  <!-- Example: UI.Chart or UI.MicroChart definition (simplified) -->
  <Annotation Term="UI.Chart" Qualifier="SalesTrend">
    <Record Type="UI.Chart">
      <PropertyValue Property="ChartType" String="Line"/>
      <PropertyValue Property="Title" String="Sales Trend"/>
      <!-- ValueSource entity would be defined here in a real service (1:n nav) -->
      <PropertyValue Property="PresentationVariant" AnnotationPath="@UI.PresentationVariant#SalesTrendPV"/>
    </Record>
  </Annotation>
</Annotations>
```

---

STEP: Define UI.PresentationVariant with Sort Order for micro charts (sorting micro chart data)

DESCRIPTION: To sort micro chart data (area, line, column, comparison, stacked bar), create a UI.PresentationVariant annotation and include a SortOrder collection of UI.SortOrder records. Ensure manifest.json minUI5Version is >= 1.130.

LANGUAGE: XML / JSON

CODE:
```xml
<!-- annotations.xml: PresentationVariant with SortOrder -->
<Annotations Target="MyService.MyEntityType">
  <Annotation Term="UI.PresentationVariant" Qualifier="SalesTrendPV">
    <Record Type="UI.PresentationVariant">
      <PropertyValue Property="SortOrder">
        <Collection>
          <Record Type="UI.SortOrder">
            <PropertyValue Property="Property" PropertyPath="SalesDate"/>
            <PropertyValue Property="Direction" EnumMember="UI.SortDirection/Descending"/>
          </Record>
          <Record Type="UI.SortOrder">
            <PropertyValue Property="Property" PropertyPath="Amount"/>
            <PropertyValue Property="Direction" EnumMember="UI.SortDirection/Ascending"/>
          </Record>
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

```json
// webapp/manifest.json (ensure minUI5Version >= 1.130 to enable micro chart sorting)
{
  "sap.ui5": {
    "dependencies": {
      "minUI5Version": "1.130.0"
    }
  }
}
```

---

STEP: Reorder or move header sections (tooling behavior, annotation change)

DESCRIPTION: Drag-and-drop in tooling reorders the UI.Facets collection. To move sections manually, reorder the UI.Facets collection records in annotations.xml. To move multiple sections, select multiple ReferenceFacet records and change their relative order in the collection.

LANGUAGE: XML

CODE:
```xml
<!-- annotations.xml: reorder UI.Facets collection to change display order -->
<Annotations Target="MyService.MyEntityType">
  <Annotation Term="UI.Facets">
    <Collection>
      <!-- First shown -->
      <Record Type="UI.ReferenceFacet">
        <PropertyValue Property="Label" String="Sales Trend"/>
        <PropertyValue Property="Target" AnnotationPath="@UI.Chart#SalesTrend"/>
      </Record>
      <!-- Second shown -->
      <Record Type="UI.ReferenceFacet">
        <PropertyValue Property="Label" String="General"/>
        <PropertyValue Property="Target" AnnotationPath="@UI.FieldGroup#HeaderGeneral"/>
      </Record>
      <!-- Third shown -->
      <Record Type="UI.ReferenceFacet">
        <PropertyValue Property="Label" String="Key Amount"/>
        <PropertyValue Property="Target" AnnotationPath="@UI.DataPoint#TotalAmount"/>
      </Record>
    </Collection>
  </Annotation>
</Annotations>
```

---

STEP: Delete a header section (remove reference facet and cleanup unreferenced annotations)

DESCRIPTION: Delete the UI.ReferenceFacet record from the UI.Facets collection. After deletion, run an annotation cleanup procedure to remove unreferenced UI.FieldGroup or UI.PresentationVariant annotations.

LANGUAGE: XML / Comment

CODE:
```xml
<!-- annotations.xml BEFORE deletion: contains a ReferenceFacet for HeaderGeneral -->
<Annotation Term="UI.Facets">
  <Collection>
    <Record Type="UI.ReferenceFacet">
      <PropertyValue Property="Label" String="General"/>
      <PropertyValue Property="Target" AnnotationPath="@UI.FieldGroup#HeaderGeneral"/>
    </Record>
    <!-- other facets -->
  </Collection>
</Annotation>

<!-- To delete the "General" header section: remove its ReferenceFacet record above.
     After deletion, run cleanup to remove the unreferenced @UI.FieldGroup#HeaderGeneral annotation. -->
```

---

STEP: Notes, constraints, and important behaviors to enforce in code generation

DESCRIPTION: Key operational rules to implement or validate in code generation:
- UI.HeaderInfo is created when any header property is set.
- If UI.HeaderInfo originates in a lower layer, editing copies the annotation to the local annotation file (remove base layer suffix).
- Title can be set to None in the editor (hides title) except when Title is defined in a lower layer.
- Hiding Edit applies UI.UpdateHidden on the EntitySet; hiding Delete applies UI.DeleteHidden.
- Action menus (UI.DataFieldForActionGroups) can only be configured using annotations (not via UI runtime settings).
- Criticality affects header action ordering; critical actions cannot be moved into action menus.
- Micro chart types that support sorting: Area, Line, Column, Comparison, Stacked Bar.
- To enable micro chart Sort Order, manifest.json must set "sap.ui5.dependencies.minUI5Version" to "1.130.0" or higher.
- Cleanup procedure: remove unreferenced UI.FieldGroup and UI.PresentationVariant annotations after removing facets.

LANGUAGE: Plain text

CODE:
```text
Important constraints:
- UI.HeaderInfo must be an annotation on the page entity type.
- Use PropertyPath for Title, ImageUrl, Initials to reference entity properties or 1:1 navigation properties.
- Use TypeImageUrl to reference SAP icons like: "sap-icon://accept"
- Apply UI.UpdateHidden/UI.DeleteHidden to the EntitySet when hiding Edit/Delete.
- Define UI.PresentationVariant and SortOrder to control micro chart sort; manifest minUI5Version >= 1.130 required.
- After removing ReferenceFacet entries, run annotation cleanup to delete unreferenced UI.FieldGroup / UI.PresentationVariant annotations.
```


--------------------------------

**TITLE**: Identification Section — Add / Move / Delete / Maintain (UI.Identification & UI.Facets)

**INTRODUCTION**: Procedures and code examples for programmatically adding, reordering, deleting, and maintaining an Identification Section in a SAP Fiori application by editing annotation files and i18n resources. Use these snippets when generating or updating annotations (annotations XML / service annotations) and i18n entries for the page entity. Relevant file paths and UI behavior rules are preserved.

**TAGS**: fiori-tools, UI.Identification, UI.Facets, ReferenceFacet, annotations.xml, i18n, sap-icons.css

STEP: Add Identification Section (create UI.Identification + reference in UI.Facets)

DESCRIPTION: Add a UI.Identification annotation (empty/unqualified) for the target entity and add a UI.ReferenceFacet entry in UI.Facets referencing that UI.Identification. This mirrors what the Page Editor performs when you choose "Add Identification Section". Note: Only one unqualified UI.Identification should be referenced in UI.Facets. Actions cannot be added directly to the identification section; use header/footer actions instead.

LANGUAGE: XML

CODE:
```xml
<!-- File: annotations/YourService.EntityType.annotations.xml -->
<!-- Preserve the sap-icons stylesheet reference if used in HTML preview -->
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>

<Annotations Target="YourService.YourEntityType">
  <!-- 1) UI.Facets with a ReferenceFacet referencing the UI.Identification annotation -->
  <Annotation Term="UI.Facets">
    <Collection>
      <!-- Identification ReferenceFacet (first item = displayed first) -->
      <Record Type="UI.ReferenceFacet">
        <!-- Label shown in the section tab; change or localize via i18n -->
        <PropertyValue Property="Label" String="Identification"/>
        <PropertyValue Property="Target">
          <Record Type="UI.FacetDefinition">
            <!-- Reference to the unqualified UI.Identification annotation -->
            <PropertyValue Property="AnnotationPath" String="@UI.Identification"/>
          </Record>
        </PropertyValue>
      </Record>

      <!-- Example of another facet (keeps existing facets) -->
      <Record Type="UI.ReferenceFacet">
        <PropertyValue Property="Label" String="Details"/>
        <PropertyValue Property="Target">
          <Record Type="UI.FacetDefinition">
            <PropertyValue Property="AnnotationPath" String="@UI.FieldGroup#Details"/>
          </Record>
        </PropertyValue>
      </Record>
    </Collection>
  </Annotation>

  <!-- 2) UI.Identification annotation created (empty or with fields as needed) -->
  <Annotation Term="UI.Identification">
    <Collection>
      <!-- Add UI.DataField(s) or other appropriate UI elements for the identification view -->
      <!-- Example placeholder - adapt to your entity fields -->
      <Record Type="UI.DataField">
        <PropertyValue Property="Value">
          <Record Type="PropertyPath">
            <PropertyValue Property="Value" String="ID"/>
          </Record>
        </PropertyValue>
      </Record>
      <Record Type="UI.DataField">
        <PropertyValue Property="Value">
          <Record Type="PropertyPath">
            <PropertyValue Property="Value" String="Name"/>
          </Record>
        </PropertyValue>
      </Record>
    </Collection>
  </Annotation>
</Annotations>
```

STEP: Move Identification Section (reorder UI.Facets)

DESCRIPTION: Reorder sections in the app by changing the order of records in the UI.Facets collection. The UI rendering follows the sequence of UI.ReferenceFacet records. Use drag-and-drop in the Page Editor or reorder the collection entries in the annotations XML.

LANGUAGE: XML

CODE:
```xml
<!-- File: annotations/YourService.EntityType.annotations.xml -->
<!-- Before: Identification is first, Details second -->
<Annotation Term="UI.Facets">
  <Collection>
    <Record Type="UI.ReferenceFacet">
      <PropertyValue Property="Label" String="Identification"/>
      <PropertyValue Property="Target">
        <Record Type="UI.FacetDefinition">
          <PropertyValue Property="AnnotationPath" String="@UI.Identification"/>
        </Record>
      </PropertyValue>
    </Record>

    <Record Type="UI.ReferenceFacet">
      <PropertyValue Property="Label" String="Details"/>
      <PropertyValue Property="Target">
        <Record Type="UI.FacetDefinition">
          <PropertyValue Property="AnnotationPath" String="@UI.FieldGroup#Details"/>
        </Record>
      </PropertyValue>
    </Record>
  </Collection>
</Annotation>

<!-- After: Move Details before Identification => Details displays first -->
<Annotation Term="UI.Facets">
  <Collection>
    <!-- Moved "Details" to first position -->
    <Record Type="UI.ReferenceFacet">
      <PropertyValue Property="Label" String="Details"/>
      <PropertyValue Property="Target">
        <Record Type="UI.FacetDefinition">
          <PropertyValue Property="AnnotationPath" String="@UI.FieldGroup#Details"/>
        </Record>
      </PropertyValue>
    </Record>

    <Record Type="UI.ReferenceFacet">
      <PropertyValue Property="Label" String="Identification"/>
      <PropertyValue Property="Target">
        <Record Type="UI.FacetDefinition">
          <PropertyValue Property="AnnotationPath" String="@UI.Identification"/>
        </Record>
      </PropertyValue>
    </Record>
  </Collection>
</Annotation>
```

STEP: Move Multiple Sections (select & reorder)

DESCRIPTION: To move multiple facets at once in the Page Editor, select multiple section nodes (Ctrl+Click) and drag them together. Programmatically this equates to grouping and reordering multiple <Record> elements inside the UI.Facets <Collection>.

LANGUAGE: XML

CODE:
```xml
<!-- File: annotations/YourService.EntityType.annotations.xml -->
<!-- Programmatically reassemble the <Collection> so the selected blocks are contiguous in the desired order -->
<Annotation Term="UI.Facets">
  <Collection>
    <!-- ...reordered records ... -->
  </Collection>
</Annotation>
```

STEP: Delete Identification Section (remove UI.ReferenceFacet)

DESCRIPTION: Deleting the Identification section removes its corresponding UI.ReferenceFacet record from the UI.Facets collection. If you want to remove the UI.Identification annotation itself, remove that annotation as well. The Page Editor Delete action removes the ReferenceFacet; the identification annotation remains only if referenced by other facets or manually present.

LANGUAGE: XML

CODE:
```xml
<!-- File: annotations/YourService.EntityType.annotations.xml -->
<!-- Before deletion: Identification ReferenceFacet present -->
<Annotation Term="UI.Facets">
  <Collection>
    <Record Type="UI.ReferenceFacet">
      <PropertyValue Property="Label" String="Identification"/>
      <PropertyValue Property="Target">
        <Record Type="UI.FacetDefinition">
          <PropertyValue Property="AnnotationPath" String="@UI.Identification"/>
        </Record>
      </PropertyValue>
    </Record>
    <!-- other facets -->
  </Collection>
</Annotation>

<!-- After deletion: remove the ReferenceFacet record referencing UI.Identification -->
<Annotation Term="UI.Facets">
  <Collection>
    <!-- Identification record removed -->
    <!-- other facets remain -->
  </Collection>
</Annotation>

<!-- Optional: If no other references to UI.Identification exist, you may also remove the UI.Identification annotation block -->
```

STEP: Maintain Section Label (update label + i18n)

DESCRIPTION: Change the Label property for the ReferenceFacet in UI.Facets. To prepare the label for translation, add an i18n key in webapp/i18n/i18n.properties and reference it from the runtime/component (Page Editor does this). Example shows the i18n property and the static annotation Label change. Integrate i18n within your UI5 app as usual (manifest/resource model).

LANGUAGE: XML, PROPERTIES, JSON

CODE:
```xml
<!-- File: annotations/YourService.EntityType.annotations.xml -->
<Annotation Term="UI.Facets">
  <Collection>
    <Record Type="UI.ReferenceFacet">
      <!-- Replace static string with localized string (i18n usage handled by UI layer) -->
      <PropertyValue Property="Label" String="Person Overview"/>
      <PropertyValue Property="Target">
        <Record Type="UI.FacetDefinition">
          <PropertyValue Property="AnnotationPath" String="@UI.Identification"/>
        </Record>
      </PropertyValue>
    </Record>
  </Collection>
</Annotation>
```

```properties
# File: webapp/i18n/i18n.properties
section.label.identification=Person Overview
```

```json
// File: manifest.json (snippet showing i18n model configuration)
{
  "sap.ui5": {
    "models": {
      "i18n": {
        "type": "sap.ui.model.resource.ResourceModel",
        "settings": {
          "bundleName": "your.app.namespace.i18n.i18n"
        }
      }
    }
  }
}
```

Note: Annotation XML itself does not contain runtime i18n binding syntax. The Page Editor and UI layer resolve the i18n key to the label shown in the UI. If you generate annotations programmatically, ensure the UI layer maps the label to i18n keys or replace strings before bundling.

STEP: Display on Demand / Hidden (references)

DESCRIPTION: The Page Editor exposes Display on Demand and Hidden properties in the properties pane. Implementation for these features is specific to your annotation model and UI framework. For details, consult the editor topic references:
- Display on Demand: form-section-4102b3d.md#loio4102b3d63d9047c881108e6f0caae15e__displayondemand
- Hidden: appendix-457f2e9.md#loiof7ad71792a0044d6b6172f078827bdc0

LANGUAGE: N/A

CODE:
```text
# See documentation:
# - Display on Demand: form-section-4102b3d.md#loio4102b3d63d9047c881108e6f0caae15e__displayondemand
# - Hidden: appendix-457f2e9.md#loiof7ad71792a0044d6b6172f078827bdc0
```

STEP: Notes, Constraints & File Paths to Preserve

DESCRIPTION: Keep the following constraints and file paths when generating or editing code:
- Constraint: Only one Identification Section (unqualified UI.Identification) may be added per page. Identification sections cannot be subsections. Actions cannot be added to the identification section; use header or footer actions instead.
- Behavior: Reordering UI.Facets collection changes display order in the rendered SAP Fiori app.
- File paths and references used in UI previews and resources:
  - CSS: ../css/sap-icons.css
  - i18n: webapp/i18n/i18n.properties
  - Annotations: annotations/YourService.EntityType.annotations.xml
- For more information about preparing labels for translation, see: internationalization-i18n-eb427f2.md

LANGUAGE: N/A

CODE:
```text
// Summary references preserved for tooling:
../css/sap-icons.css
annotations/YourService.EntityType.annotations.xml
webapp/i18n/i18n.properties
internationalization-i18n-eb427f2.md
form-section-4102b3d.md#loio4102b3d63d9047c881108e6f0caae15e__displayondemand
appendix-457f2e9.md#loiod44832d99bdf4f73ba14cdbb16dc9301
appendix-457f2e9.md#loiof7ad71792a0044d6b6172f078827bdc0
```
--------------------------------

**TITLE**: Internationalization (i18n) for SAP Fiori Tools — configuration, UI text internationalization, CAP behavior, and mass generation

**INTRODUCTION**: Quick, code-focused guide for configuring i18n resource bundles, converting UI labels into i18n keys (single and mass), and CAP-specific behavior. Includes concrete file snippets, exact UI messages that Fiori Tools shows, and examples of before/after code edits for UI5 views, manifest, CDS/annotations, and i18n .properties files.

**TAGS**: fiori-tools,i18n,SAPUI5,CAP,manifest,json,properties,cds,localization

**STEP**: 1 — Configure i18n resource bundle (Non-CAP: webapp/manifest.json)
**DESCRIPTION**: Add a ResourceModel pointing to your i18n bundle in webapp/manifest.json. Place i18n files under webapp/i18n (or other configured folders). This is required for UI5 view bindings like {i18n>key}.
**LANGUAGE**: JSON
**CODE**:
```json
// File: webapp/manifest.json (snippet)
{
  "sap.ui5": {
    "models": {
      "i18n": {
        "type": "sap.ui.model.resource.ResourceModel",
        "settings": {
          "bundleName": "i18n.i18n" // expects webapp/i18n/i18n.properties
        }
      }
    }
  }
}
```

**STEP**: 2 — Configure i18n resource bundle (CAP projects: .cdsrc.json or package.json)
**DESCRIPTION**: CAP projects can configure which folders are scanned/used for i18n. Default value (used by Fiori Tools) is ['_i18n','i18n','assets/i18n']. Add this config to .cdsrc.json or package.json (project-specific config location).
**LANGUAGE**: JSON
**CODE**:
```json
// File: .cdsrc.json (example)
// Configure Fiori Tools / project to consider these i18n folders in CAP projects
{
  "i18n": {
    "folders": [
      "_i18n",
      "i18n",
      "assets/i18n"
    ]
  }
}
```

**STEP**: 3 — i18n properties file examples (before / after)
**DESCRIPTION**: Example i18n properties file content. Show before and after applying UI i18n conversion for a label "Customer Name".
**LANGUAGE**: properties
**CODE**:
```properties
# File: webapp/i18n/i18n.properties (before)
# No entry for "Customer Name"
```

```properties
# File: webapp/i18n/i18n.properties (after Apply for non-CAP)
customerName=Customer Name
```

```properties
# File: webapp/i18n/i18n.properties (after Apply for CAP)
CustomerName=Customer Name
```

**STEP**: 4 — Convert a plain UI label to an i18n key (XML view)
**DESCRIPTION**: Show the UI5 XML view change: plain text label -> reference to i18n key. Fiori Tools displays dialog messages (see Step 5) and on Apply writes the key to the i18n file and replaces the text with a resource binding.
**LANGUAGE**: XML
**CODE**:
```xml
<!-- File: webapp/view/Some.view.xml (before) -->
<Label text="Customer Name" />
```

```xml
<!-- File: webapp/view/Some.view.xml (after, non-CAP) -->
<Label text="{i18n>customerName}" />
```

```xml
<!-- File: webapp/view/Some.view.xml (after, CAP) -->
<Label text="{i18n>CustomerName}" />
```

**STEP**: 5 — Fiori Tools i18n UI interactions (exact messages and actions)
**DESCRIPTION**: Exact messages that Fiori Tools shows in Page Editor when clicking the Internationalization (globe) icon. Use these messages to implement automation or tests that simulate user actions.
**LANGUAGE**: TEXT
**CODE**:
```text
Case A - Label isn't internationalized:
Message:
"Generate a text key <uniquekey> in the i18n file and substitute <actual text> by {i18n>uniquekey}."
Actions: Apply -> create new i18n key and replace label text; Cancel -> no change.

Case B - Label references a key but the key is missing in i18n files:
Message:
"Generate a text key <uniqueKey> with value <uniquekey> in i18n file."
Actions: Apply -> add i18n key with value equal to the key; Cancel -> no change.

Case C - Label is plain text and a matching key already exists:
Message:
"Text key <uniqueKey> for value <sample text> is available in i18n file. Substitute <sample text> by {@i18n>uniqueKey}."
Actions: Apply -> replace plain text with existing key reference; Cancel -> no change.
```

**STEP**: 6 — Automatic key naming rules and best practices
**DESCRIPTION**: Fiori Tools generates keys with different casing depending on project type; it creates new entries for each Apply action (can produce unused keys). Recommended to perform bulk/mass i18n after labels are stable.
**LANGUAGE**: TEXT
**CODE**:
```text
Key naming:
- Non-CAP projects: keys are generated in camelCase (e.g., customerName).
- CAP projects: keys are generated in PascalCase (e.g., CustomerName).

Best practice:
- Avoid repeated Apply during rapid label changes (creates many unused keys).
- Prefer mass i18n generation at a later development stage to minimize redundant keys.
```

**STEP**: 7 — CAP annotations and behavior (CDS -> UI)
**DESCRIPTION**: If a field label is defined by lower-layer annotations (@title or @Common.Label), Fiori Tools generates the Label property in the UI.DataField record referencing the resource bundle. The lower-layer annotations are not modified. If UI.FieldGroup or UI.Facet is in the lower layer, the tool copies it to the application layer before modification.
**LANGUAGE**: CDS / JSON
**CODE**:
```cds
// File: db/schema.cds (example field with CAP annotation)
entity Book {
  key ID : UUID;
  title : String @Common.Label : 'Book Title'; // existing lower-layer label
}
```

```json
// Resulting UI annotation snippet generated (example)
{
  "UI": {
    "DataField": {
      "Label": "{i18n>BookTitle}" // generated reference in resource bundle
    }
  }
}
```

**STEP**: 8 — Mass i18n generation (UI action)
**DESCRIPTION**: Fiori Tools provides a mass i18n generation icon (globe_with_meridians) in the Page Editor toolbar. Use it to prepare multiple UI texts at once for translation. It automates creating keys and writing them into configured i18n files (folders configured per Step 1/2).
**LANGUAGE**: TEXT
**CODE**:
```text
Mass generation:
- Trigger: click the mass i18n icon in the Page Editor toolbar.
- Action: scans page UI texts, generates i18n keys per configured folders, writes keys/values to i18n files.
- Use when UI labels are stable to reduce redundant keys and translation cost.
```
--------------------------------

**TITLE**: Internationalization Support for Annotation Files (Fiori Tools)

**INTRODUCTION**: Practical guide for enabling and editing language-dependent strings in OData annotation XML files using the Annotation Language Server (Annotation LSP). Shows how the LSP checks strings against your i18n.properties file, how to reference existing keys, and how Quick Fix generates new keys.

**TAGS**: i18n, internationalization, annotation, annotations.xml, manifest.json, i18n.properties, fiori-tools, annotation-lsp, VSCode, BAS

STEP: Ensure the i18n model is declared in manifest.json

DESCRIPTION: The Annotation LSP uses the i18n properties file referenced by the @i18n model in webapp/manifest.json. If this model or file is missing you will see warnings. Add or verify the model entry under sap.app > dataSources (or models) so the LSP can resolve keys.

LANGUAGE: JSON

CODE:
```JSON
// webapp/manifest.json (partial) — make sure the i18n model is declared
{
  "sap.app": {
    "id": "com.example.app",
    "dataSources": {
      "mainService": {
        "uri": "/sap/opu/odata/...",
        "type": "OData"
      }
    }
  },
  "sap.ui5": {
    "models": {
      "i18n": {
        "type": "sap.ui.model.resource.ResourceModel",
        "settings": {
          "bundleName": "webapp.i18n.i18n"
        }
      }
    }
  }
}
```

STEP: Create the i18n.properties file

DESCRIPTION: Place your properties file at the path referenced by bundleName (example: webapp/i18n/i18n.properties). The Annotation LSP checks keys in this file and offers Code Completion and Quick Fix actions.

LANGUAGE: PROPERTIES

CODE:
```PROPERTIES
# webapp/i18n/i18n.properties
# Default language entries
app.title=My Sample App
entity.label=Customer
entity.description=Customer description
```

STEP: Example annotation XML before and after applying i18n reference

DESCRIPTION: Show a language-dependent property (Label) with a literal string, and the corrected version where the literal is replaced by an i18n reference. Annotation LSP will warn on the literal and offer Quick Fix to insert a reference and/or create a key in i18n.properties.

LANGUAGE: XML

CODE:
```XML
<!-- webapp/annotations/annotations.xml — before (literal string triggers warning) -->
<Annotations Target="MyService.CustomerType">
  <Annotation Term="UI.HeaderInfo">
    <Record>
      <PropertyValue Property="Label" String="Customer" />
    </Record>
  </Annotation>
</Annotations>

<!-- webapp/annotations/annotations.xml — after Quick Fix (i18n reference inserted) -->
<Annotations Target="MyService.CustomerType">
  <Annotation Term="UI.HeaderInfo">
    <Record>
      <PropertyValue Property="Label" String="{i18n>entity.label}" />
    </Record>
  </Annotation>
</Annotations>
```

STEP: Quick Fix behavior — generate new key and replace literal

DESCRIPTION: When a literal language-dependent string is not found in i18n.properties, Annotation LSP warns and offers Quick Fix. Quick Fix can:
- insert an existing key reference (if matching key exists), or
- create a new key in webapp/i18n/i18n.properties and replace the literal with an i18n reference.

LANGUAGE: PROPERTIES, XML

CODE:
```PROPERTIES
# webapp/i18n/i18n.properties — before Quick Fix (no key for "New label text")
app.title=My Sample App
```

```XML
<!-- annotations.xml contains: String="New label text" -> LSP Quick Fix suggested -->
<PropertyValue Property="Label" String="New label text" />
```

```PROPERTIES
# webapp/i18n/i18n.properties — after Quick Fix (new key added)
app.title=My Sample App
new.label.text=New label text
```

```XML
<!-- annotations.xml — after Quick Fix replaces literal with reference -->
<PropertyValue Property="Label" String="{i18n>new.label.text}" />
```

STEP: Use Code Completion to pick existing keys

DESCRIPTION: While editing a language-dependent property value, trigger Code Completion to list existing i18n keys and their text values. Select a completion item to insert the i18n reference.

LANGUAGE: (editor keybindings)

CODE:
```
// Code Completion keys
// Windows: Ctrl + Space
// macOS: Cmd + Space
// Action: place cursor inside the attribute value (e.g., String="|") and trigger completion to see keys like {i18n>entity.label}
```

STEP: Highlighting and fixing missing references

DESCRIPTION: Annotation LSP checks language-dependent values when you open an annotation file and when you add/modify such values. Missing or invalid references are shown as warnings with a Light Bulb (Quick Fix) offering to create or link keys.

LANGUAGE: Plain text

CODE:
```
// Workflow:
// 1. Open webapp/annotations/annotations.xml
// 2. LSP validates Label/String values against webapp/i18n/i18n.properties
// 3. If missing: warning + Quick Fix (click Light Bulb)
// 4. Choose: "Create new i18n entry and replace" or "Use existing i18n key"
```

STEP: Navigate and edit i18n entries from annotation file

DESCRIPTION: Use Go To Definition or Peek Definition on an i18n reference in your annotation file to jump to or inline-edit the entry in webapp/i18n/i18n.properties.

LANGUAGE: Plain text

CODE:
```
// Go To Definition keys
// VS Code: F12
// SAP Business Application Studio: Ctrl + F11
// Mouse: Right-click -> Go To Definition
// Mouse + keyboard: Ctrl + Click (Windows) / Cmd + Click (macOS)

// Peek Definition keys
// VS Code (Windows): Alt + F12
// VS Code (macOS): Option + F12
// Mouse: Right-click -> Peek Definition
```

STEP: Notes and troubleshooting

DESCRIPTION: Key points to remember for automation and validation in pipelines or editor automation:
- Annotation LSP always resolves keys from the i18n bundle declared in manifest.json (bundleName path).
- If the i18n model or the properties file is missing you'll receive warnings in the annotation file; add the model or file to resolve them.
- Quick Fix inserts keys into the active i18n.properties file (webapp/i18n/i18n.properties in examples).
- Use Code Completion and Quick Info (hover) to view existing keys and their translation text.

LANGUAGE: Plain text

CODE:
```
// Important files referenced by Annotation LSP:
// - webapp/manifest.json           (models -> i18n bundleName)
// - webapp/i18n/i18n.properties    (text keys & values)
// - webapp/annotations/annotations.xml (annotation file edited by developer)
```
--------------------------------

**TITLE**: List Report Page (Fiori elements) — Implementation Recipes

**INTRODUCTION**: Practical, code-focused recipes to add a List Report page to a Fiori elements application. Includes manifest.json configuration and the common OData annotation snippets needed for filter fields, report table (line item), analytical chart, and references for multiple views. Use these snippets in your app manifest and OData annotation XML (or equivalent CDS annotations) to enable the List Report floorplan.

**TAGS**: fiori, fiori-elements, list-report, sapui5, annotations, manifest, odata, analytical-chart, table, filters

STEP: 1 — Add a List Report page to manifest.json

DESCRIPTION: Register a List Report page in the app manifest. Set the entitySet that drives the page and the Fiori elements List Report component. Insert under "sap.ui.generic.app" -> "pages". Adjust "entitySet" to your OData entity (example: Products). The snippet is for Fiori elements (template) List Report.

LANGUAGE: JSON

CODE:
```json
{
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "Products",
        "component": {
          "name": "sap.suite.ui.generic.template.ListReport",
          "list": true
        },
        "settings": {
          "navigation": {},
          "enableVariantManagement": true
        }
      }
    ]
  }
}
```

STEP: 2 — Define filter fields (SelectionFields) in OData annotations

DESCRIPTION: Define which properties appear in the filter bar by adding the UI.SelectionFields annotation for the target entity or entity set. Use annotation XML or CDS equivalent. Replace PropertyPath values with your entity properties.

LANGUAGE: XML

CODE:
```xml
<Annotations Target="MyService.Products">
  <Annotation Term="UI.SelectionFields">
    <Collection>
      <PropertyPath>Category</PropertyPath>
      <PropertyPath>Name</PropertyPath>
      <PropertyPath>Price</PropertyPath>
    </Collection>
  </Annotation>
</Annotations>
```

STEP: 3 — Define the report table (LineItem) for the list

DESCRIPTION: Provide the UI.LineItem annotation to specify table columns and behavior. Use DataField elements to map properties to table columns, include formatting or Criticality if needed. This drives the table shown in the List Report.

LANGUAGE: XML

CODE:
```xml
<Annotations Target="MyService.Products">
  <Annotation Term="UI.LineItem">
    <Collection>
      <Record Type="UI.DataField">
        <PropertyValue Property="Label" String="Name"/>
        <PropertyValue Property="Value" Path="Name"/>
      </Record>
      <Record Type="UI.DataField">
        <PropertyValue Property="Label" String="Category"/>
        <PropertyValue Property="Value" Path="Category"/>
      </Record>
      <Record Type="UI.DataField">
        <PropertyValue Property="Label" String="Price"/>
        <PropertyValue Property="Value" Path="Price"/>
      </Record>
    </Collection>
  </Annotation>
</Annotations>
```

STEP: 4 — Add an Analytical Chart and connect it to the List Report

DESCRIPTION: Define a UI.Chart annotation (qualifier optional) and reference it from a PresentationVariant so the List Report can surface a chart visualization. Adjust ChartType, Measures, and Dimensions to match your model.

LANGUAGE: XML

CODE:
```xml
<!-- Define the chart -->
<Annotations Target="MyService.Products">
  <Annotation Term="UI.Chart" Qualifier="SalesChart">
    <Record>
      <PropertyValue Property="ChartType" EnumMember="ChartType/Column"/>
      <PropertyValue Property="Measures">
        <Collection>
          <PropertyPath>Revenue</PropertyPath>
        </Collection>
      </PropertyValue>
      <PropertyValue Property="Dimensions">
        <Collection>
          <PropertyPath>Region</PropertyPath>
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>

  <!-- PresentationVariant that references the chart (visualization) -->
  <Annotation Term="UI.PresentationVariant" Qualifier="WithChart">
    <Record>
      <PropertyValue Property="Visualizations">
        <Collection>
          <AnnotationPath>com.sap.vocabularies.UI.v1.Chart#SalesChart</AnnotationPath>
        </Collection>
      </PropertyValue>
      <PropertyValue Property="SortOrder">
        <Collection/>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

STEP: 5 — Multiple Views / Presentation Variants (overview)

DESCRIPTION: Implement multiple views by creating multiple PresentationVariant (or PresentationVariant with different Qualifiers) and reference them via qualifiers. The List Report can switch views by referencing different PresentationVariant qualifiers. For detailed patterns (qualifiers, navigation between views, or facet-driven views), see the related docs: filter-fields-0b84286.md, table-aaff7b1.md, multiple-views-c62b82e.md, analytical-chart-9c086ec.md.

LANGUAGE: XML

CODE:
```xml
<!-- Example: two PresentationVariant qualifiers for two different views -->
<Annotations Target="MyService.Products">
  <Annotation Term="UI.PresentationVariant" Qualifier="SalesView">
    <Record>
      <PropertyValue Property="Visualizations">
        <Collection>
          <AnnotationPath>com.sap.vocabularies.UI.v1.Chart#SalesChart</AnnotationPath>
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>

  <Annotation Term="UI.PresentationVariant" Qualifier="ListView">
    <Record>
      <PropertyValue Property="Visualizations">
        <Collection>
          <AnnotationPath>com.sap.vocabularies.UI.v1.LineItem</AnnotationPath>
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

STEP: 6 — References and next steps

DESCRIPTION: Use the provided related markdown files for element-specific implementation details (filter controls, table types and settings, multi-view UX patterns, and analytical chart options). Integrate the snippets above in your OData annotation file (XML) or equivalent CDS annotation syntax. Test the page by running the Fiori elements app and verify filter bar, table columns, variants, and chart appearance.

LANGUAGE: TEXT

CODE:
```text
Related docs:
- filter-fields: filter-fields-0b84286.md
- report table: table-aaff7b1.md
- multiple views: multiple-views-c62b82e.md
- analytical chart: analytical-chart-9c086ec.md

Notes:
- Replace "MyService.Products" and property names with your actual service and entity names.
- You may express the same annotations in CDS; these XML examples map 1:1 to standard OData annotations.
```
--------------------------------

**TITLE**: Maintaining Annotation-Based Elements (UI.Facets & UI.FieldGroup) for OData V4 Fiori Pages

**INTRODUCTION**: Action-focused reference showing how the Application Modeler (Page Editor) generates and updates UI annotations (UI.Facets and UI.FieldGroup) for list reports, object pages, and form-entry object pages when using OData V4. Includes example annotation XML snippets you can inspect or edit via "Edit in Source Code".

**TAGS**: fiori-tools, annotations, UI.Facets, UI.FieldGroup, OData V4, object page, form entry, list report, LocalAnnotations.xml

**STEP**: 1 — Prerequisites and scope

**DESCRIPTION**: Ensure the page type and service meet the requirements. Annotation generation in the Page Editor is only supported for list reports, object pages, and form entry object pages that use OData V4.

**LANGUAGE**: Text

**CODE**:
```text
Supported pages: List Report, Object Page, Form Entry Object Page
Required protocol: OData V4
Tooling: Page Editor (Application Modeler) -> Edit in Source Code to open local annotations
Local annotation file example path: webapp/annotations/LocalAnnotations.xml
```

**STEP**: 2 — Editor action: Add a section (creates UI.FieldGroup and UI.Facets)

**DESCRIPTION**: When you add a section via the Page Editor (Sections node -> Add), the tool will:
- Create a UI.FieldGroup annotation with a qualifier (e.g., #General).
- Create or update UI.Facets to reference the FieldGroup via a ReferenceFacet (AnnotationPath).
- If UI.Facets does not exist for the entity, it will be created.

The sample XML below shows the generated UI.Facets entry referencing a FieldGroup qualifier and the separate FieldGroup annotation.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Example generated when a "General" section is added for MyService.MyEntityType -->
<Annotations Target="MyService.MyEntityType" xmlns="http://docs.oasis-open.org/odata/ns/edm">
  <!-- UI.Facets referencing a FieldGroup qualifier -->
  <Annotation Term="com.sap.vocabularies.UI.v1.Facets">
    <Collection>
      <Record Type="com.sap.vocabularies.UI.v1.CollectionFacet">
        <PropertyValue Property="Label" String="General"/>
        <PropertyValue Property="ID" String="GeneralSection"/>
        <PropertyValue Property="Target">
          <Record Type="com.sap.vocabularies.UI.v1.ReferenceFacet">
            <!-- Points to the FieldGroup with qualifier "General" -->
            <PropertyValue Property="AnnotationPath" String="@com.sap.vocabularies.UI.v1.FieldGroup#General"/>
          </Record>
        </PropertyValue>
      </Record>
    </Collection>
  </Annotation>

  <!-- UI.FieldGroup annotation (created if not present) -->
  <Annotation Term="com.sap.vocabularies.UI.v1.FieldGroup" Qualifier="General">
    <Record Type="com.sap.vocabularies.UI.v1.FieldGroupType">
      <PropertyValue Property="Label" String="General"/>
      <!-- Data will be populated when fields are added -->
      <PropertyValue Property="Data">
        <Collection>
          <!-- Placeholder items created when fields are added by the editor -->
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

**STEP**: 3 — Editor action: Add fields to the section (populate FieldGroup.Data)

**DESCRIPTION**: When you add fields to the section in the Page Editor, the FieldGroup.Data collection is populated with UI.DataField records. Each DataField binds to a property in the entity using PropertyPath.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- FieldGroup "General" populated with three fields -->
<Annotation Term="com.sap.vocabularies.UI.v1.FieldGroup" Qualifier="General">
  <Record Type="com.sap.vocabularies.UI.v1.FieldGroupType">
    <PropertyValue Property="Label" String="General"/>
    <PropertyValue Property="Data">
      <Collection>
        <Record Type="com.sap.vocabularies.UI.v1.DataField">
          <PropertyValue Property="Label" String="First Name"/>
          <PropertyValue Property="Value" PropertyPath="FirstName"/>
        </Record>
        <Record Type="com.sap.vocabularies.UI.v1.DataField">
          <PropertyValue Property="Label" String="Last Name"/>
          <PropertyValue Property="Value" PropertyPath="LastName"/>
        </Record>
        <Record Type="com.sap.vocabularies.UI.v1.DataField">
          <PropertyValue Property="Label" String="Email"/>
          <PropertyValue Property="Value" PropertyPath="Email"/>
        </Record>
      </Collection>
    </PropertyValue>
  </Record>
</Annotation>
```

**STEP**: 4 — Edit generated annotations manually (Edit in Source Code)

**DESCRIPTION**: Open the local annotation file created/updated by the Page Editor (typical path: webapp/annotations/LocalAnnotations.xml). You can modify or extend:
- UI.Facets (add/remove facets, change Label or ID)
- UI.FieldGroup (change Qualifier, add/remove DataField entries)
- Qualifier names must match the AnnotationPath referenced from UI.Facets

Use "Edit in Source Code" to verify and adjust references or to add more complex bindings.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Typical local annotation file: webapp/annotations/LocalAnnotations.xml -->
<Annotations Target="MyService.MyEntityType" xmlns="http://docs.oasis-open.org/odata/ns/edm">
  <!-- Facets + FieldGroup examples as shown above -->
  <!-- Add or modify qualifiers, labels, and Data fields here -->
</Annotations>
```

**STEP**: 5 — Full minimal example: UI.Facets + FieldGroup together

**DESCRIPTION**: Combine facets and field groups in one local annotation file. Use this as a template to copy into your LocalAnnotations.xml and tweak Target, Qualifier, property names, and labels.

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="MyService.MyEntityType" xmlns="http://docs.oasis-open.org/odata/ns/edm">
  <Annotation Term="com.sap.vocabularies.UI.v1.Facets">
    <Collection>
      <Record Type="com.sap.vocabularies.UI.v1.CollectionFacet">
        <PropertyValue Property="Label" String="General"/>
        <PropertyValue Property="ID" String="GeneralSection"/>
        <PropertyValue Property="Target">
          <Record Type="com.sap.vocabularies.UI.v1.ReferenceFacet">
            <PropertyValue Property="AnnotationPath" String="@com.sap.vocabularies.UI.v1.FieldGroup#General"/>
          </Record>
        </PropertyValue>
      </Record>
    </Collection>
  </Annotation>

  <Annotation Term="com.sap.vocabularies.UI.v1.FieldGroup" Qualifier="General">
    <Record Type="com.sap.vocabularies.UI.v1.FieldGroupType">
      <PropertyValue Property="Label" String="General"/>
      <PropertyValue Property="Data">
        <Collection>
          <Record Type="com.sap.vocabularies.UI.v1.DataField">
            <PropertyValue Property="Label" String="First Name"/>
            <PropertyValue Property="Value" PropertyPath="FirstName"/>
          </Record>
          <Record Type="com.sap.vocabularies.UI.v1.DataField">
            <PropertyValue Property="Label" String="Last Name"/>
            <PropertyValue Property="Value" PropertyPath="LastName"/>
          </Record>
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

**STEP**: 6 — Reference: page editor note and stylesheet link

**DESCRIPTION**: The Page Editor automatically keeps these annotations synchronized with the structured outline. If you rely on icon fonts or styles in your app, include the provided stylesheet reference in your app UI resources.

**LANGUAGE**: HTML

**CODE**:
```html
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```
--------------------------------

**TITLE**: Maintaining OData Annotations with Language Server (CAP CDS & XML annotation files)

**INTRODUCTION**: Configure a Fiori project to get language-server-assisted editing for OData annotations in both CAP CDS files and XML annotation files. This doc contains actionable steps and exact file snippets you can copy into your project: install the correct VS Code extension, add a local metadata copy, configure manifest.json (dataSources, annotations, i18n), create an annotation XML under /webapp/annotations/, and example metadata + annotation XML skeletons that the XML annotation language server expects.

**TAGS**: fiori-tools, odata, annotations, language-server, cds, xml, manifest, metadata, i18n

STEP: 1 — Enable CDS OData Language Server (for CAP .cds files)

DESCRIPTION: Install or enable the SAP CDS Language Support extension in VS Code to get CDS OData language-server features (code completion, validation, navigation) for .cds files. The extension that contains the CDS OData language server is published as SAP CDS Language Support (extension id: SAPSE.vscode-cds). The underlying package is @sap/ux-cds-odata-language-server-extension.

LANGUAGE: Shell

CODE:
```bash
# Install the SAP CDS Language Support VS Code extension
code --install-extension SAPSE.vscode-cds

# Note: In SAP Business Application Studio the extension may not be pre-installed.
# The extension contains the package: @sap/ux-cds-odata-language-server-extension
```

STEP: 2 — Ensure local metadata copy (required for XML annotation language server)

DESCRIPTION: The XML annotation language server uses a local copy of the OData service metadata for completion and diagnostics. Place the metadata file in your project and ensure:
- metadata is OData v4 CSDL with one or more <Schema> elements inside <edmx:DataServices>.
- metadata contains a single EntityContainer.
- metadata namespace must not contain slashes (/). Use dot-separated SimpleIdentifiers.

Put the metadata copy at a stable path (example below uses localService/metadata.xml). The manifest.json will reference this localUri.

LANGUAGE: XML

CODE:
```xml
<!-- File: localService/metadata.xml -->
<?xml version="1.0" encoding="utf-8"?>
<edmx:Edmx Version="4.0" xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx">
  <edmx:DataServices>
    <Schema Namespace="My.Service" xmlns="http://docs.oasis-open.org/odata/ns/edm">
      <EntityType Name="ExampleEntity">
        <Key>
          <PropertyRef Name="ID"/>
        </Key>
        <Property Name="ID" Type="Edm.String" Nullable="false"/>
        <Property Name="ExampleProperty" Type="Edm.String"/>
      </EntityType>

      <EntityContainer Name="Container">
        <EntitySet Name="ExampleEntities" EntityType="My.Service.ExampleEntity"/>
      </EntityContainer>
    </Schema>
  </edmx:DataServices>
</edmx:Edmx>
```

STEP: 3 — Configure manifest.json: localUri for metadata, annotations list, and i18n model

DESCRIPTION: Add/verify the dataSources entry in your project manifest.json. Include the OData service Uri and settings.localUri pointing to the local metadata file. Add an annotations array referencing your local annotation XML(s). Add an @i18n model with the uri to your i18n properties file. All paths referenced in annotations and localUri are relative to the location of the manifest.json file.

LANGUAGE: JSON

CODE:
```json
{
  "sap.app": {
    "id": "my.app"
  },
  "sap.ui5": {
    "models": {
      "i18n": {
        "type": "sap.ui.model.resource.ResourceModel",
        "settings": {
          "bundleName": "i18n/i18n"
        }
      },
      "": {
        "dataSource": "mainService"
      }
    }
  },
  "dataSources": {
    "mainService": {
      "uri": "/sap/opu/odata/sap/ZMY_SERVICE_SRV/",
      "type": "OData",
      "settings": {
        "localUri": "localService/metadata.xml",
        "annotations": [
          {
            "uri": "webapp/annotations/annotations.xml",
            "localUri": "webapp/annotations/annotations.xml"
          }
        ]
      }
    }
  }
}
```

STEP: 4 — Create XML annotation file(s) under /webapp/annotations/

DESCRIPTION: Create at least one annotation XML file containing an edmx:Edmx root and a Schema element that references the same metadata namespace. The XML annotation file path should match the annotation entry in manifest.json (example: /webapp/annotations/annotations.xml). Open this file in the editor to activate the XML annotation language server. The server provides completion, validation against supported vocabularies, navigation, and i18n support (language-dependent strings via manifest i18n configuration).

LANGUAGE: XML

CODE:
```xml
<!-- File: webapp/annotations/annotations.xml -->
<?xml version="1.0" encoding="utf-8"?>
<edmx:Edmx Version="4.0" xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx">
  <edmx:DataServices>
    <Schema Namespace="My.Service" xmlns="http://docs.oasis-open.org/odata/ns/edm">
      <!-- Annotation attached to an entity -->
      <Annotations Target="My.Service.ExampleEntity">
        <Annotation Term="Org.OData.Core.V1.Description">
          <String xml:lang="en">Example entity description</String>
        </Annotation>
      </Annotations>

      <!-- Annotation attached to a property -->
      <Annotations Target="My.Service.ExampleEntity/ExampleProperty">
        <Annotation Term="Org.OData.Core.V1.Description">
          <String xml:lang="en">Example property description</String>
        </Annotation>
      </Annotations>
    </Schema>
  </edmx:DataServices>
</edmx:Edmx>
```

STEP: 5 — Open the local annotation file in the editor to use language-server features

DESCRIPTION: Open /webapp/annotations/annotations.xml (or any registered local annotation file) in VS Code. The XML annotation language server from SAP Fiori tools will activate automatically and provide:
- code completion for terms and term members,
- validation against OData vocabularies and the local metadata,
- navigation to referenced annotations and vocabulary definitions,
- quick info for vocabulary elements,
- i18n support for language-dependent strings (manifest must have @i18n configured).

LANGUAGE: Shell

CODE:
```bash
# Open the file in VS Code (example)
code webapp/annotations/annotations.xml

# The XML annotation language server activates automatically on file open.
```

STEP: 6 — Supported vocabularies and limitations (reference)

DESCRIPTION: The XML annotation language server supports the official OASIS OData vocabularies and SAP vocabularies (OData v4.0). It validates terms and members from these vocabularies. Known limitations: annotations embedded directly in the metadata are NOT supported by the language server; dynamic expressions are NOT supported.

LANGUAGE: JSON

CODE:
```json
{
  "supportedVocabularies": {
    "OData_org": [
      "Org.OData.Aggregation.V1",
      "Org.OData.Authorization.V1",
      "Org.OData.Capabilities.V1",
      "Org.OData.Core.V1",
      "Org.OData.JSON.V1",
      "Org.OData.Measures.V1",
      "Org.OData.Repeatability.V1",
      "Org.OData.Temporal.V1",
      "Org.OData.Validation.V1"
    ],
    "SAP": [
      "Analytics",
      "CodeList",
      "Common",
      "Communication",
      "DataIntegration",
      "Direct-Edit",
      "Graph",
      "Hierarchy",
      "HTML5",
      "ODM",
      "PDF",
      "PersonalData",
      "Session",
      "UI"
    ],
    "limitations": [
      "Annotations embedded in metadata are not supported by the XML language server.",
      "Dynamic expressions in annotations are not supported."
    ]
  },
  "references": {
    "ODataSpec": "http://docs.oasis-open.org/odata/odata/v4.0/odata-v4.0-part3-csdl.html",
    "OASIS_vocabularies": "https://github.com/oasis-tcs/odata-vocabularies/tree/master/vocabularies",
    "SAP_vocabularies": "https://github.com/SAP/odata-vocabularies"
  }
}
```

STEP: 7 — Additional notes and best practices

DESCRIPTION: Summary of important technical details to preserve when configuring and maintaining annotations:
- Keep the local metadata copy in sync with the back-end metadata (not auto-synced).
- The metadata must contain exactly one EntityContainer.
- The OData service namespace must not include slashes (/); use dot-separated identifiers.
- All annotation file paths referenced in manifest.json are relative to the manifest.json file location.
- If you need to add new annotation files and register them in the manifest automatically, use the Service Modeler feature in SAP Fiori tools (Service Modeler will create files and register them in manifest.json).

LANGUAGE: Text

CODE:
```text
- Keep localService/metadata.xml in sync with backend metadata (sync manually).
- Ensure metadata contains a single <EntityContainer>.
- Use namespace values without slashes: e.g., "My.Service".
- Register annotation files in manifest.json under dataSources.*.settings.annotations.
- Open files under webapp/annotations/ in the editor to get language-server assistance.
```
--------------------------------

**TITLE**: Maintaining Building Blocks in Page Editor (Fiori Tools)

**INTRODUCTION**: This guide explains how to add and maintain SAP Fiori elements building blocks (Chart, Filter Bar, Table, Page) for OData V4 applications using the Page Editor in Fiori Tools. It provides concrete file examples (view XML, manifest routing, and annotation XML) and explains where to edit XML properties vs. annotation properties in the Page Editor property panel.

**TAGS**: fiori-tools, sap-fiori, building-blocks, odata-v4, page-editor, annotations, ui5

**STEP**: 1 — Supported building blocks and where to edit them

**DESCRIPTION**: Use the Page Editor to add/modify these building blocks to a custom page or custom section. In the property panel you can edit:
- XML properties: view control attributes and bindings (edit the view XML or the property panel XML tab)
- Annotation properties: OData annotations that drive Fiori elements behavior (edit annotation files or the property panel annotation tab)

Supported building blocks:
- Chart
- Filter Bar
- Table
- Page (custom page only)

**LANGUAGE**: Text

**CODE**:
```text
Page Editor property panel:
- XML properties tab: edit control attributes (id, class, visible, data binding, event handlers)
- Annotation properties tab: edit OData V4 annotations (UI.LineItem, UI.Facets, SelectionField, Chart annotations)
File locations commonly edited:
- View XML: webapp/view/CustomPage.view.xml
- Manifest routes/targets: webapp/manifest.json
- Annotations: webapp/annotations/Annotations.xml  (or *.annotation.xml files under annotations/)
```

**STEP**: 2 — Create a custom page view (view XML)

**DESCRIPTION**: Create a custom XML view for your custom page. Add sections and building-block controls (Table, FilterBar, Chart) as XML controls. Bind table items to an OData entity set. The Page Editor will surface these controls and their XML properties.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- webapp/view/CustomPage.view.xml -->
<mvc:View
  controllerName="my.app.controller.CustomPage"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  xmlns:core="sap.ui.core"
  xmlns:table="sap.m">
  <Page id="customPage" title="Custom Page - Products">
    <content>
      <!-- Custom Section -->
      <VBox id="customSection" class="sapUiSmallMargin">
        <!-- Filter Bar building block -->
        <Toolbar id="filterToolbar">
          <!-- Filter inputs will be represented here, or use sap.ui.comp.filterbar.FilterBar -->
          <SearchField id="searchProduct" width="100%" placeholder="Search Products" />
        </Toolbar>

        <!-- Table building block -->
        <Table id="productsTable" inset="false" width="100%">
          <headerToolbar>
            <Toolbar>
              <Title text="Products" />
            </Toolbar>
          </headerToolbar>
          <columns>
            <Column>
              <Text text="ID" />
            </Column>
            <Column>
              <Text text="Name" />
            </Column>
            <Column>
              <Text text="Price" />
            </Column>
          </columns>
          <items>
            <!-- Bind to OData v4 entity set; replace /Products with your entitySet path -->
            <ColumnListItem>
              <cells>
                <ObjectIdentifier title="{ProductID}" />
                <Text text="{Name}" />
                <Text text="{Price}" />
              </cells>
            </ColumnListItem>
          </items>
        </Table>

        <!-- Chart building block placeholder (use VizFrame or chart control used in your app) -->
        <!-- Replace with your Chart control and binding -->
        <HBox id="chartContainer">
          <!-- e.g., sap.viz.ui5.controls.VizFrame -->
        </HBox>
      </VBox>
    </content>
  </Page>
</mvc:View>
```

**STEP**: 3 — Register the custom page in manifest routing

**DESCRIPTION**: Add a route and a target in manifest.json to navigate to the custom page view. Adjust viewName and viewPath to match your project structure.

**LANGUAGE**: JSON

**CODE**:
```json
// webapp/manifest.json (excerpt)
{
  "sap.ui5": {
    "rootView": "my.app.view.App",
    "routing": {
      "config": {
        "routerClass": "sap.m.routing.Router",
        "viewType": "XML",
        "viewPath": "my.app.view",
        "controlId": "app",
        "controlAggregation": "pages"
      },
      "routes": [
        {
          "name": "customPage",
          "pattern": "CustomPage",
          "target": "CustomPage"
        }
      ],
      "targets": {
        "CustomPage": {
          "viewName": "CustomPage",
          "viewLevel": 1
        }
      }
    }
  }
}
```

**STEP**: 4 — Example annotation XML for a Table (UI.LineItem) and SelectionFields (Filter Bar)

**DESCRIPTION**: Use OData V4 annotation XML to define UI.LineItem (table columns) and SelectionFields (filter bar fields). The Page Editor exposes annotation properties so you can edit these values from the UI as well.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- webapp/annotations/Annotations.xml -->
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
  <edmx:DataServices>
    <Schema xmlns="http://docs.oasis-open.org/odata/ns/edm" Namespace="MyService">
      <!-- Replace MyService.ProductType with your actual entity type target -->
      <Annotations Target="MyService.ProductType">
        <!-- UI.LineItem drives table columns in Fiori elements -->
        <Annotation Term="UI.LineItem">
          <Collection>
            <Record Type="UI.DataField">
              <PropertyValue Property="Value">
                <AnnotationPath>ProductID</AnnotationPath>
              </PropertyValue>
              <PropertyValue Property="Label" String="ID" />
            </Record>
            <Record Type="UI.DataField">
              <PropertyValue Property="Value">
                <AnnotationPath>Name</AnnotationPath>
              </PropertyValue>
              <PropertyValue Property="Label" String="Name" />
            </Record>
            <Record Type="UI.DataField">
              <PropertyValue Property="Value">
                <AnnotationPath>Price</AnnotationPath>
              </PropertyValue>
              <PropertyValue Property="Label" String="Price" />
            </Record>
          </Collection>
        </Annotation>

        <!-- UI.SelectionFields drives fields shown in the Filter Bar -->
        <Annotation Term="UI.SelectionFields">
          <Collection>
            <PropertyPath>ProductID</PropertyPath>
            <PropertyPath>Name</PropertyPath>
          </Collection>
        </Annotation>

        <!-- Example: Chart annotation (placeholder) -->
        <!-- Use appropriate Chart-related annotation vocabulary for your analytical scenario -->
      </Annotations>
    </Schema>
  </edmx:DataServices>
</edmx:Edmx>
```

**STEP**: 5 — Edit properties in Page Editor: examples and mapping

**DESCRIPTION**: Typical edits you will perform and where they map:
- Change column visibility or order — edit UI.LineItem annotation (Annotations.xml) or use the property panel Annotation tab.
- Change table control attributes (growing, selectionMode) — edit view XML (productsTable attributes) or use property panel XML tab.
- Add filter inputs or change selection fields — update UI.SelectionFields annotation (Annotations.xml) or property panel Annotation tab.
- Add/modify chart settings — edit chart control XML or corresponding annotation for analytical charts.

**LANGUAGE**: Text

**CODE**:
```text
Common edits and file targets:
- Control attribute (XML properties): webapp/view/CustomPage.view.xml
  Example: <Table id="productsTable" growing="true" selectionMode="Single" />
- Annotation property (Annotation properties): webapp/annotations/Annotations.xml
  Example: update UI.LineItem to add/remove columns or change labels
- Use the Page Editor property panel:
  - XML properties tab => edits view XML attributes (applies immediately to view file)
  - Annotation properties tab => edits annotation files (applies to annotation XML files)
```

**STEP**: 6 — Best practices

**DESCRIPTION**: Keep annotations and view definitions separated. Use annotation files for data-driven UI changes (columns, selection fields, chart bindings). Use view XML for layout, container controls, and non-data-driven UI attributes. Use the Page Editor property panel for quick edits; check the underlying files (view XML, annotations XML, manifest.json) to version-control changes.

**LANGUAGE**: Text

**CODE**:
```text
Best practices:
- Store annotations under webapp/annotations/*.xml to keep them version-controlled and editable by Page Editor.
- Keep view structure in webapp/view/*.view.xml and controller logic in webapp/controller/*.controller.js.
- Use the Page Editor to preview and adjust both XML and annotation properties, but commit edits in source files.
- Validate OData entitySet names and annotation targets to match your service metadata (OData V4).
```
--------------------------------

**TITLE**: Extension-Based Elements for Fiori Tools — Practical Code Examples

**INTRODUCTION**: Quick, code-focused reference for implementing extension-based elements created by the Fiori Tools Page Editor / Page Map. Includes concrete file examples to place under the project's ext/ folder and the minimal descriptor snippets that the Page Editor writes or expects. Use these examples when implementing custom columns (V2/V4), custom sections, custom actions, custom views, and controller extensions for OData V4/V2 projects.

**TAGS**: fiori-tools, extension, custom-column, custom-section, custom-action, custom-view, controller-extension, ODataV2, ODataV4, ext-folder, manifest

STEP: Add Custom Column (OData V2)

DESCRIPTION: Create an XML fragment for the column and (if using responsive table) a separate cell fragment. Place fragments under ext/fragment/. The Page Editor will write these fragments and a descriptor entry. If the column displays a bound property, include a leadingProperty entry in the column definition so the framework knows which OData property to prioritize for sorting/searching.

LANGUAGE: XML

CODE:
```xml
<!-- File: ext/fragment/CustomColumn.fragment.xml -->
<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:layout="sap.ui.layout">
  <!-- Column fragment for a standard table (header cell) -->
  <Column id="ext::CustomColumn" width="120px">
    <Text text="Price"/>
  </Column>
</core:FragmentDefinition>
```

CODE:
```xml
<!-- File: ext/fragment/CustomCell.fragment.xml (for responsive table cell template) -->
<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core">
  <Text id="ext::CustomCell" text="{Price}"/>
</core:FragmentDefinition>
```

CODE:
```json
// Descriptor snippet the Page Editor writes to register the custom column (example shape)
{
  "customColumns": [
    {
      "id": "ext::CustomColumn",
      "headerText": "Price",
      "columnFragment": "ext/fragment/CustomColumn.fragment.xml",
      "cellFragment": "ext/fragment/CustomCell.fragment.xml",
      "anchor": "ProductID",
      "placement": "After",
      "leadingProperty": "Price"
    }
  ]
}
```

STEP: Add Custom Column (OData V4)

DESCRIPTION: For OData V4, the Page Editor will create a column fragment and optionally a default controller in ext/. Use the fragment for column header/column template and add an event handler in ext/controller/ for any interactive behaviour (e.g., onPress). Register width and optionally generateEventHandler in the descriptor.

LANGUAGE: XML

CODE:
```xml
<!-- File: ext/fragment/CustomColumnV4.fragment.xml -->
<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core">
  <!-- Column header + cell template for a GridTable or Table -->
  <Column id="ext::CustomColumnV4" width="160px">
    <Text text="Custom Column"/>
  </Column>
  <!-- Example cell template can be placed in the same fragment or separate -->
  <Text id="ext::CustomCellV4" text="{SomeProperty}" press=".onCustomCellPress"/>
</core:FragmentDefinition>
```

LANGUAGE: JavaScript

CODE:
```javascript
// File: ext/controller/CustomColumnV4.controller.js
sap.ui.define([], function () {
  "use strict";
  return {
    onCustomCellPress: function (oEvent) {
      // Example event handler generated by Page Editor for OData V4 custom column
      var sPath = oEvent.getSource().getBindingContext().getPath();
      // implement behaviour (navigation, dialog, etc.)
      console.log("Custom cell pressed for", sPath);
    }
  };
});
```

CODE:
```json
// Descriptor snippet: column registration (V4)
{
  "customColumns": [
    {
      "id": "ext::CustomColumnV4",
      "headerText": "Custom Column",
      "columnFragment": "ext/fragment/CustomColumnV4.fragment.xml",
      "anchor": "ProductID",
      "placement": "Before",
      "width": "160px",
      "generateEventHandler": true
    }
  ]
}
```

STEP: Add Custom Section (Object Page)

DESCRIPTION: Create the fragment or view for the custom section and optionally generate a controller. Place artifacts under ext/fragment/, ext/view/, and ext/controller/. Register the section using the Page Editor: supply title, type (Fragment/View), anchor section and placement. The Page Editor writes the fragment/view + controller into ext/ and updates the page configuration.

LANGUAGE: XML

CODE:
```xml
<!-- File: ext/fragment/CustomSection.fragment.xml -->
<core:FragmentDefinition xmlns="sap.uxap" xmlns:m="sap.m" xmlns:core="sap.ui.core">
  <ObjectPageSection id="ext::MyCustomSection" title="My Custom Section">
    <ObjectPageSection::subSection>
      <ObjectPageSubSection>
        <Block>
          <m:VBox>
            <m:Text text="This is a custom section created by Page Editor."/>
            <!-- Add controls bound to your data -->
            <m:Text text="{path: 'Price'}"/>
          </m:VBox>
        </Block>
      </ObjectPageSubSection>
    </ObjectPageSection::subSection>
  </ObjectPageSection>
</core:FragmentDefinition>
```

LANGUAGE: JavaScript

CODE:
```javascript
// File: ext/controller/CustomSection.controller.js (if generateEventHandler = true)
sap.ui.define([], function () {
  "use strict";
  return {
    onInit: function () {
      // initialization for custom section
    },
    onDoSomething: function (oEvent) {
      // action handler inside section
    }
  };
});
```

CODE:
```json
// Descriptor snippet: object page section registration (example shape)
{
  "customSections": [
    {
      "id": "ext::MyCustomSection",
      "title": "My Custom Section",
      "type": "Fragment",
      "fragmentName": "ext/fragment/CustomSection.fragment.xml",
      "anchorSection": "ShippingDetails",
      "placement": "After",
      "generateEventHandler": true
    }
  ]
}
```

STEP: Add Custom Action (OData V4)

DESCRIPTION: Page Editor writes an action handler file into ext/controller/actions/ or adds to an existing handler file. Create the action handler method and, if required, an XML fragment for a button that references the handler. Register the action with id, anchor, placement, required selection flag, and which file/method to use.

LANGUAGE: JavaScript

CODE:
```javascript
// File: ext/controller/actions/CustomActions.controller.js
sap.ui.define([], function () {
  "use strict";
  return {
    onCustomAction: function (oSelection) {
      // oSelection may contain selected contexts; implement action logic here
      var aSelectedContexts = oSelection && oSelection.selectedContexts;
      // e.g., batch update, navigation, dialog
      console.log("Executing custom action. Selected contexts:", aSelectedContexts);
      // Return a Promise if asynchronous
      return Promise.resolve();
    }
  };
});
```

LANGUAGE: XML

CODE:
```xml
<!-- File: ext/fragment/CustomActionButton.fragment.xml -->
<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core">
  <Button id="ext::CustomActionBtn" text="My Action" press=".onCustomAction"/>
</core:FragmentDefinition>
```

CODE:
```json
// Descriptor snippet: custom action registration (example shape)
{
  "customActions": [
    {
      "actionId": "ext::MyCustomAction",
      "buttonText": "My Action",
      "anchor": "Create",
      "placement": "After",
      "actionHandlerFile": "ext/controller/actions/CustomActions.controller.js",
      "actionHandlerMethod": "onCustomAction",
      "requiredSelection": true
    }
  ]
}
```

STEP: Add Custom View (List Report, OData V4)

DESCRIPTION: Create a fragment or view for the new tab/view and optionally generate an event handler. Place the fragment under ext/fragment/ or ext/views/. Register the view/tab in the list report configuration: provide key, label, fragment name, and generateEventHandler flag. The Page Editor writes the view/fragment and controller into ext/.

LANGUAGE: XML

CODE:
```xml
<!-- File: ext/fragment/CustomListView.fragment.xml -->
<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core">
  <VBox>
    <Text text="Custom View Content"/>
    <!-- Add tables, charts or other controls bound to model here -->
  </VBox>
</core:FragmentDefinition>
```

LANGUAGE: JavaScript

CODE:
```javascript
// File: ext/controller/CustomListView.controller.js (if generated)
sap.ui.define([], function () {
  "use strict";
  return {
    onInit: function () {
      // init logic for custom view/tab
    }
  };
});
```

CODE:
```json
// Descriptor snippet: custom view registration (example shape)
{
  "customViews": [
    {
      "key": "ext::CustomView1",
      "label": "Extra View",
      "fragmentName": "ext/fragment/CustomListView.fragment.xml",
      "generateEventHandler": true
    }
  ]
}
```

STEP: Add Controller Extension (Page Map, OData V4)

DESCRIPTION: Use the Page Map to add controller extensions; the Page Map writes code into ext/controller/extensions/ and updates the project configuration so extensions are loaded in the page lifecycle. Example is a controller extension module that exposes lifecycle hooks or additional methods. You can also reorder execution order via Page Map UI.

LANGUAGE: JavaScript

CODE:
```javascript
// File: ext/controller/extensions/MyControllerExtension.controller.js
sap.ui.define([], function () {
  "use strict";
  return {
    // Hook called by Fiori Elements runtime (example methods)
    onInit: function () {
      // extension initialization
      console.log("MyControllerExtension: onInit");
    },
    onBeforeBinding: function (oEvent) {
      // called before binding occurs (example lifecycle hook)
    },
    // provide custom public methods referenced by page
    myCustomMethod: function () {
      // custom utility method
    }
  };
});
```

CODE:
```json
// Descriptor snippet: register controller extension (example shape)
{
  "controllerExtensions": [
    {
      "forPageId": "ObjectPage::ObjectPage",
      "extensionModule": "ext/controller/extensions/MyControllerExtension.controller.js",
      "id": "ext::MyControllerExtension"
    }
  ]
}
```

Notes:
- All fragment/view/controller files shown belong under the project's ext/ folder exactly as indicated (ext/fragment/, ext/view/, ext/controller/, ext/controller/actions/, ext/controller/extensions/).
- The JSON snippets illustrate the shape of the configuration entries that the Page Editor writes/updates. The Page Editor and @sap-ux/fe-fpm-writer handle the concrete manifest/config placement; you can mirror these shapes in your extension metadata or use the Page Editor to produce them automatically.
- The Page Editor supports dragging to change placement and provides Delete/Edit actions; generated controller stubs are intended to be modified by developers.
--------------------------------

**TITLE**: Micro-Snippets for XML Annotation Authoring (Fiori Tools)

**INTRODUCTION**: Micro-snippets are context-aware, one-click/code-completion code blocks for XML annotation authoring in the XML Annotation LSP (Fiori Tools). Use them inside <Schema> (or other annotation containers) to insert fully-formed annotation targets, terms, records, and property values with cursor/placeholders already positioned for immediate editing. They speed authoring and reduce typos and semantic errors.

**TAGS**: fiori-tools, xml, annotations, micro-snippets, LSP, code-completion

**STEP**: 1 — Insert an <Annotations> block using a micro-snippet

**DESCRIPTION**: When your cursor is within a <Schema> element, trigger code completion and choose the micro-snippet for Annotations to insert the complete block. The snippet places the cursor inside the Target attribute string so you can type the target in one step.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Micro-snippet result (placeholders shown in snippet-style $1/$0) -->
<Annotations Target="${1:EntityContainer/EntitySet}">
  ${0}
</Annotations>
```

**STEP**: 2 — Three ways to add the same <Annotations> element (contextual)

**DESCRIPTION**: Equivalent techniques you can use in an editor:
- Manual typing: Type the entire element yourself.
- Word-based completions: Type "<" → select "Annotations" → type space → trigger completion again to add attributes like Target.
- Micro-snippet (recommended): Trigger code completion and select the micro-snippet to insert the completed block with cursor placed ready for the Target value.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Manual/word-based result (same final text, but without snippet placeholders) -->
<Annotations Target=""></Annotations>
```

**STEP**: 3 — View snippet details in the documentation quick info

**DESCRIPTION**: The completion list highlights snippets and the editor's documentation / quick info pane shows the snippet content. Use the Documentation (Quick Info) feature to preview a snippet before inserting. Note: XML Annotation LSP provides micro-snippets for annotation targets, terms, records and property values.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "documentationFeature": "Documentation (Quick Info)",
  "notes": "Shows snippet example and description in completion pane"
}
```

**STEP**: 4 — Use record micro-snippets: minimal (required) vs full (all properties)

**DESCRIPTION**: For annotation records the LSP provides two micro-snippet variants:
- Minimal record snippet: inserts only mandatory properties (vocabulary-defined nullable=false).
- Full record snippet: inserts every property defined for the record type.
Choose minimal when you need only required properties; choose full when you want a template for all properties and will remove unused ones.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Minimal record snippet (required properties only) -->
<Record Type="${1:My.Vocab.RecordType}">
  <PropertyValue Property="${2:RequiredProperty}" String="${3:Value}"/>
  ${0}
</Record>

<!-- Full record snippet (all properties present as placeholders) -->
<Record Type="${1:My.Vocab.RecordType}">
  <PropertyValue Property="${2:RequiredProperty}" String="${3:Value}"/>
  <PropertyValue Property="${4:OptionalPropertyA}" String="${5:ValueA}"/>
  <PropertyValue Property="${6:OptionalPropertyB}" String="${7:ValueB}"/>
  <!-- add more PropertyValue placeholders as defined by the vocabulary -->
  ${0}
</Record>
```

**STEP**: 5 — Workflow tips: editing records and adding properties

**DESCRIPTION**: Typical flows:
- Start with the minimal record snippet and add additional property-value snippets as needed.
- Insert the full record snippet and delete the properties you don't need for a complete template to edit.
- Use property-value micro-snippets to add single properties quickly.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Start minimal, then add property-value micro-snippet(s) -->
<Record Type="My.Vocab.RecordType">
  <PropertyValue Property="RequiredProperty" String="Example"/>
  <!-- Insert additional PropertyValue snippet(s) here -->
  <PropertyValue Property="OptionalPropertyA" String="ExampleA"/>
  ${0}
</Record>

<!-- Or start full and remove unused properties -->
<Record Type="My.Vocab.RecordType">
  <PropertyValue Property="RequiredProperty" String="Example"/>
  <PropertyValue Property="OptionalPropertyA" String="ExampleA"/> <!-- keep or remove -->
  <PropertyValue Property="OptionalPropertyB" String="ExampleB"/> <!-- keep or remove -->
  ${0}
</Record>
```
--------------------------------

**TITLE**: Multiple Views — manifest and annotation examples for List Report (tables & charts)

**INTRODUCTION**: This guide shows exact manifest.json and annotations.xml snippets the Page Editor generates or expects when you add, move, or delete additional table/chart views for a List Report. Use these examples to automate or script project changes, inspect generated artifacts, or create views manually. Includes examples for Views/Paths, UI.LineItem / UI.Chart annotations with qualifiers, transformation aggregation via @Analytics.AggregatedProperty, SelectionPresentationVariant references, and the fallback defaultTemplateAnnotationPath when views are removed.

**TAGS**: fiori-tools, list-report, multiple-views, manifest.json, annotations.xml, UI.LineItem, UI.Chart, Analytics.AggregatedProperty, SelectionPresentationVariant, sapui5

STEP: Add a Table or Chart view — manifest.json: add Views/Paths entry
DESCRIPTION: When you add a table or chart view in Page Editor, the tool appends an entry under sap.ui.generic.app.pages[...].component.settings.views.paths. Each entry points to an annotation (annotationPath) and lists the target entitySet. Use the JSON example below to add another view programmatically.
LANGUAGE: JSON
CODE:
```json
// manifest.json snippet (add a second view entry to views.paths)
{
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "Products", // main List Report entitySet
        "component": {
          "name": "sap.suite.ui.generic.template.ListReport",
          "settings": {
            "views": {
              "paths": [
                {
                  "entitySet": "Products",
                  "annotationPath": "annotations.xml#ProductsLineItem"
                },
                {
                  "entitySet": "Sales", // new view based on different entitySet
                  "annotationPath": "annotations.xml#SalesChart" // qualifier for chart or line item
                }
              ]
            }
          }
        }
      }
    ]
  }
}
```

STEP: Add UI.LineItem for a table view — annotations.xml (target EntityType)
DESCRIPTION: The Page Editor generates a UI.LineItem annotation with a Qualifier that is referenced in manifest.json annotationPath. Below is a minimal UI.LineItem example targeting the EntityType of the Sales entitySet. Add columns by adding UI.DataField Records inside the Collection.
LANGUAGE: XML
CODE:
```xml
<!-- annotations.xml -->
<Annotations Target="MyService.Sales"> <!-- Target the EntityType for Sales -->
  <!-- LineItem qualifier for a table view -->
  <Annotation Term="UI.LineItem" Qualifier="SalesLineItem">
    <Collection>
      <!-- each Record describes a column/data field -->
      <Record Type="UI.DataField">
        <PropertyValue Property="Value" Path="SalesID"/>
      </Record>
      <Record Type="UI.DataField">
        <PropertyValue Property="Value" Path="Region"/>
      </Record>
      <Record Type="UI.DataField">
        <PropertyValue Property="Value" Path="Amount"/>
      </Record>
    </Collection>
  </Annotation>
</Annotations>
```

STEP: Add UI.Chart for a chart view — annotations.xml (chart type, dimension, measure)
DESCRIPTION: The Page Editor generates a UI.Chart annotation (with a qualifier) for chart views. The chart requires a dimension (groupable property) and a measure (aggregable property or an aggregated measure). Example below shows a column chart with one dimension and one measure reference.
LANGUAGE: XML
CODE:
```xml
<!-- annotations.xml -->
<Annotations Target="MyService.Sales">
  <!-- Chart qualifier for a chart view -->
  <Annotation Term="UI.Chart" Qualifier="SalesChart">
    <Record>
      <!-- ChartType: Column, Line, Donut, etc. -->
      <PropertyValue Property="ChartType" EnumMember="UI.ChartType/Column"/>
      <!-- Dimension(s) - groupable property paths -->
      <PropertyValue Property="Dimensions">
        <Collection>
          <PropertyPath>Region</PropertyPath>
        </Collection>
      </PropertyValue>
      <!-- Measure(s) - reference an aggregated property or a predefined measure -->
      <PropertyValue Property="Measures">
        <Collection>
          <!-- Use the aggregated property qualifier referenced below -->
          <PropertyPath>Amount_Agg</PropertyPath>
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>

  <!-- Example: reference to an aggregated property (see next step for creation) -->
</Annotations>
```

STEP: Create a transformation aggregated measure — annotations.xml with @Analytics.AggregatedProperty
DESCRIPTION: If you choose "Create new measure" in Page Editor, it creates a transformation aggregation annotated as @Analytics.AggregatedProperty. This enables dynamic chart measures. Use SAPUI5 >= 1.106 for transformation aggregation support. Example shows applying an AggregatedProperty qualifier that points to the local data property and specifies the aggregation method (Sum).
LANGUAGE: XML
CODE:
```xml
<!-- annotations.xml -->
<Annotations Target="MyService.SalesType"> <!-- or target the EntityType owning the base property -->
  <!-- Define transformation aggregated property (new measure) -->
  <Annotation Term="Analytics.AggregatedProperty" Qualifier="Amount_Agg">
    <Record>
      <!-- LocalDataProperty: the original property in the entity to aggregate -->
      <PropertyValue Property="LocalDataProperty" String="Amount"/>
      <!-- AppliedAggregationMethod: supported aggregation (Sum, Avg, Count, Min, Max) -->
      <!-- EnumMember value may vary; tools typically emit the correct enum -->
      <PropertyValue Property="AppliedAggregationMethod" EnumMember="AggregationType/Sum"/>
    </Record>
  </Annotation>
</Annotations>
```

STEP: Update manifest.json when you create a measure on a different EntitySet
DESCRIPTION: If the chart view is based on a different entitySet than the main List Report, the views.paths entry must reference that entitySet. Example below shows product and sales views in the same list report.
LANGUAGE: JSON
CODE:
```json
// manifest.json snippet: multiple entitySets in views.paths
{
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "Products",
        "component": {
          "settings": {
            "views": {
              "paths": [
                {
                  "entitySet": "Products",
                  "annotationPath": "annotations.xml#ProductsLineItem"
                },
                {
                  "entitySet": "Sales",
                  "annotationPath": "annotations.xml#SalesChart"
                }
              ]
            }
          }
        }
      }
    ]
  }
}
```

STEP: Delete a view — manifest.json and annotations changes
DESCRIPTION: When a view is deleted:
- The corresponding entry in views.paths is removed.
- If all additional views are removed and only the main table remains, views.paths may be removed entirely and a defaultTemplateAnnotationPath is created (or set) to point to the main SelectionPresentationVariant/LineItem used by the List Report.
Use the JSON example to remove or adjust entries programmatically.
LANGUAGE: JSON
CODE:
```json
// After deleting SalesChart view: remove its views.paths entry
{
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "Products",
        "component": {
          "settings": {
            // views.paths removed because only the main table remains
            // instead add defaultTemplateAnnotationPath pointing to the main List Report annotation
            "defaultTemplateAnnotationPath": "annotations.xml#ProductsLineItem"
          }
        }
      }
    ]
  }
}
```

STEP: Move view order — views.paths array order controls tab sequence
DESCRIPTION: The sequence of views on the icon tab bar follows the order of objects in views.paths. To move a view up/down programmatically, reorder the entries in the views.paths array.
LANGUAGE: JSON
CODE:
```json
// Change order: bring SalesChart first, Products second
{
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "Products",
        "component": {
          "settings": {
            "views": {
              "paths": [
                {
                  "entitySet": "Sales",
                  "annotationPath": "annotations.xml#SalesChart"
                },
                {
                  "entitySet": "Products",
                  "annotationPath": "annotations.xml#ProductsLineItem"
                }
              ]
            }
          }
        }
      }
    ]
  }
}
```

STEP: PresentationVariant / SelectionPresentationVariant for a view
DESCRIPTION: Each view must maintain its own PresentationVariant (sorting, charts, filters) because views may reference different entities. The Page Editor creates or references a UI.SelectionPresentationVariant qualifier and the views.paths.annotationPath must point to the annotation (e.g., annotations.xml#Sales_SPV). Example below shows a SelectionPresentationVariant with a PresentationVariant reference.
LANGUAGE: XML
CODE:
```xml
<!-- annotations.xml -->
<Annotations Target="MyService.Sales">
  <!-- SelectionPresentationVariant qualifier referenced by views.paths -->
  <Annotation Term="UI.SelectionPresentationVariant" Qualifier="Sales_SPV">
    <Record>
      <!-- PresentationVariant: sorting and visual representation -->
      <PropertyValue Property="PresentationVariant">
        <Record Type="UI.PresentationVariant">
          <PropertyValue Property="SortOrder">
            <Collection>
              <Record Type="UI.SortOrder">
                <PropertyValue Property="Property" PropertyPath="Region"/>
                <PropertyValue Property="Descending" Bool="false"/>
              </Record>
            </Collection>
          </PropertyValue>
        </Record>
      </PropertyValue>
      <!-- optional: SelectionVariant can be added here -->
    </Record>
  </Annotation>
</Annotations>
```

Important notes for code-level automation:
- The Page Editor will generate UI.LineItem or UI.Chart annotations with Qualifier values. Reference these qualifiers from manifest.json via annotationPath as "annotations.xml#Qualifier".
- Transformation aggregation via Analytics.AggregatedProperty requires SAPUI5 >= 1.106. Creation of new measures only works when transformation aggregations are supported and not already defined.
- If your OData service does not expose aggregation metadata (e.g., @Aggregation.ApplySupported), Page Editor cannot generate chart views based on that service.
- When removing the last additional view (only main entitySet remains), remove views.paths and set defaultTemplateAnnotationPath to the main selection/presentation variant.
--------------------------------

**TITLE**: Navigate and Inspect Annotation & Metadata References (Find All / Go To References)

**INTRODUCTION**: Quick developer reference for using the XML annotation language server in an editor (e.g., VS Code) to find where annotation terms and metadata elements (entity types, properties, actions) are referenced across the codebase. Includes runnable XML examples to test Find All References and Go To References.

**TAGS**: fiori-tools, annotations, xml, references, vscode, navigation, odata, ui

STEP: 1 — Create sample metadata and annotation files to test references

DESCRIPTION: Create two files: a metadata (CSDL/EDMX-style) file declaring an entity type and properties, and an annotations file that defines a UI.LineItem term and references that term from a UI.Facets annotation. Use these sample files to validate the language server's reference navigation features.

LANGUAGE: XML

CODE:
```xml
<!-- metadata.xml -->
<Schema Namespace="MyService" xmlns="http://docs.oasis-open.org/odata/ns/edm">
  <EntityType Name="Product">
    <Key>
      <PropertyRef Name="ID"/>
    </Key>
    <Property Name="ID" Type="Edm.String"/>
    <Property Name="Name" Type="Edm.String"/>
  </EntityType>

  <EntityContainer Name="Container">
    <EntitySet Name="Products" EntityType="MyService.Product"/>
  </EntityContainer>
</Schema>
```

CODE:
```xml
<!-- annotations.xml -->
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
  <edmx:DataServices>
    <Schema Namespace="MyService" xmlns="http://docs.oasis-open.org/odata/ns/edm" xmlns:UI="com.sap.vocabularies.UI.v1">
      <!-- Definition: UI.LineItem applied to Product -->
      <Annotations Target="MyService.Product">
        <Annotation Term="UI.LineItem">
          <Collection>
            <Record>
              <PropertyValue Property="Label" String="ID"/>
              <PropertyValue Property="Value">
                <PropertyPath>ID</PropertyPath>
              </PropertyValue>
            </Record>
          </Collection>
        </Annotation>
      </Annotations>

      <!-- Another annotation: UI.Facets referencing UI.LineItem using AnnotationPath -->
      <Annotations Target="MyService.Product">
        <Annotation Term="UI.Facets">
          <Collection>
            <Record Type="UI.ReferenceFacetType">
              <PropertyValue Property="Target">
                <AnnotationPath>UI.LineItem</AnnotationPath>
              </PropertyValue>
            </Record>
          </Collection>
        </Annotation>
      </Annotations>
    </Schema>
  </edmx:DataServices>
</edmx:Edmx>
```

STEP: 2 — Use Find All References to list all references (includes definitions)

DESCRIPTION: Place the editor cursor inside the metadata element name or annotation term/qualifier (for example, inside "UI.LineItem" or "Product"). Trigger Find All References to open the References pane listing every location (including definitions) where the symbol is used. From the References pane you can open or edit individual files.

LANGUAGE: text

CODE:
```
Examples of cursor placement:
- Inside the annotation term: UI.LineItem
- Inside the entity name: Product

Key bindings to trigger "Find All References":
- Windows: Alt + Shift + F12
- macOS: Option + F12

Mouse:
- Right-click on the symbol and choose "Find All References"

Behavior:
- The References pane opens with a list including definitions and usages.
- Click an entry to open the file and navigate to the location.
```

STEP: 3 — Use Go To References to peek and edit inline

DESCRIPTION: Place the cursor inside the annotation term or metadata element name (e.g., "UI.LineItem" or "Product") and trigger Go To References to open a peeked inline view of references. You can make quick edits directly in the peek view without leaving your current file.

LANGUAGE: text

CODE:
```
Examples of cursor placement:
- Inside the annotation term: UI.LineItem
- Inside the entity name: Product

Key bindings to trigger "Go To References":
- Press Shift + F12

Mouse:
- Right-click on the symbol and choose "Go To References"

Behavior:
- Opens references in an inline peek editor (editable).
- Good for quick in-context edits without full navigation.
```

STEP: 4 — Validation checklist and tips

DESCRIPTION: Quick checks and tips to ensure expected results when testing reference navigation.

LANGUAGE: text

CODE:
```
Validation checklist:
- Ensure the editor has the XML annotation language server / Fiori Tools extension enabled.
- Both metadata.xml and annotations.xml are in the workspace (so cross-file references are discoverable).
- Place cursor precisely inside the token (annotation term, qualifier, or metadata element name).

Notes:
- When searching references for metadata elements, their definitions are included in results.
- Use Find All References when you need a full list and the References pane.
- Use Go To References for quick inline edits (peek).
```
--------------------------------

**TITLE**: Overriding Back-End Annotations with Local Annotation Files (Fiori Tools)

**INTRODUCTION**: Step-by-step actions to copy/override back-end OData annotations into local annotation files in a Fiori project, and how to create additional local annotation files using the Annotation File Manager. Includes UI actions, constraints, file paths and an XML template for new local annotation files.

**TAGS**: fiori-tools, annotations, OData, manifest.json, local-annotations, annotation-file-manager

STEP: Copy a back-end annotation into a local annotation file

DESCRIPTION: In the Annotation Browser / Back-end annotation view, copy a back-end annotation into a local annotation file to start customizing or extending behavior. If the project has exactly one local annotation file associated with the service, the copy happens automatically. If multiple local annotation files are associated with the service, select the target local annotation file from the dropdown. You can copy between local annotation files, or from back-end -> local. You cannot copy local -> back-end.

LANGUAGE: HTML

CODE:
```HTML
<!-- Copy icon shown in the annotation UI -->
<!-- Click this element (Copy) in the Annotation Browser to copy selected back-end annotation -->
<span class="SAP-icons-V5"></span> <!-- Copy icon -->
```

STEP: Use the Language Server doc for editing the copied annotation

DESCRIPTION: After copying, open and maintain the local annotation file with the Language Server tooling described in:
- Maintaining Annotations with Language Server (refer to your project docs/links)

LANGUAGE: None

CODE:
```text
Reference: Maintaining Annotations with Language Server
(Use the project's documentation link to open and edit the copied local annotation file)
```

STEP: Create an additional local annotation file (for OData services only)

DESCRIPTION: Use Annotation File Manager to create new local annotation files. This is only supported for OData services (not CAP CDS). The created file is typically placed under your webapp project folder (example path shown). Provide a file name, namespace, and target folder when prompted.

LANGUAGE: Actions / File paths

CODE:
```text
UI Actions:
1. Right-click manifest.json -> Open Annotation File Manager
2. Click "Create Local Annotation File"
3. Enter:
   - File name (e.g. MyLocalAnnotations.xml)
   - Namespace (e.g. com.example.annotations)
   - Folder (e.g. webapp/annotations/)
4. Click "Create"

Note: Can only create additional annotation files for OData services (not CAP CDS).
```

STEP: Local annotation file XML template

DESCRIPTION: Use this minimal XML template as the starting file content for a new local OData annotation file. Replace Namespace and Targets to match your service and entities.

LANGUAGE: XML

CODE:
```XML
<?xml version="1.0" encoding="utf-8"?>
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
  <!-- Optional: Edmx Reference entries for standard vocabularies -->
  <edmx:Reference Uri="http://docs.oasis-open.org/odata/odata/v4.0/cs01/vocabularies/Org.OData.Core.V1.xml">
    <edmx:Include Namespace="Org.OData.Core.V1" Alias="Core"/>
  </edmx:Reference>

  <edmx:DataServices>
    <Schema xmlns="http://docs.oasis-open.org/odata/ns/edm" Namespace="com.example.annotations">
      <!-- Replace Target with your service entity or container -->
      <Annotations Target="YourService.EntityType">
        <!-- Example annotation entry -->
        <!-- <Annotation Term="UI.Label" String="Custom Label"/> -->
      </Annotations>
    </Schema>
  </edmx:DataServices>
</edmx:Edmx>
```

STEP: Common constraints and notes

DESCRIPTION: Consolidated constraints and useful file references:
- You can add multiple local annotation files to the project.
- Copy capabilities:
  - Allowed: back-end -> local; local -> local (between local files)
  - Not allowed: local -> back-end
- Additional annotation files can only be created for OData services and not for CAP CDS.
- Example project assets referenced in docs:
  - CSS icon file: ../css/sap-icons.css
  - Screenshot asset: images/Overriding_annotations_64a3f74.png

LANGUAGE: None

CODE:
```text
Constraints:
- Multiple local annotation files: supported
- Copy operations:
  - back-end -> local : allowed
  - local -> local : allowed
  - local -> back-end : NOT allowed

Assets referenced in docs:
- ../css/sap-icons.css
- images/Overriding_annotations_64a3f74.png
```
--------------------------------

**TITLE**: Generated Project Features Overview (fiori-tools)

**INTRODUCTION**: Brief, actionable summary of the runtime and generator-level features available for projects produced by fiori-tools. Use these steps to enable, configure, or validate features in generator configuration or project files. Each step includes the canonical documentation file path for deeper reference.

**TAGS**: fiori-tools, generated-projects, annotation, taskbar, edit-in-source, automatic-generation, i18n, internationalization, project-cleanup

**STEP**: Annotation Support

**DESCRIPTION**: Enable and configure OData annotation processing for generated apps. Typical requirements: declare annotation files/URLs the generator or runtime should consume, enable annotation parsing in build/generator config, and validate annotation metadata locations. Use the reference doc for implementation details and examples.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "annotationSupport": true,
  "annotationFiles": [
    "annotations/MyService.annotations.xml",
    "https://example.com/service/$metadata/annotations"
  ],
  "annotationParsingOptions": {
    "mergeStrategy": "prefer-local",
    "validateMetadata": true
  },
  "docs": "annotation-support-796f6a4.md"
}
```

**STEP**: Taskbar Notification

**DESCRIPTION**: Enable OS-level taskbar (desktop) notifications for background events in the generated app (where supported). Configure the notification channel, icon, and frequency in the generator/runtime config. Verify platform support and required permissions.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "taskbarNotification": {
    "enabled": true,
    "icon": "resources/notification-icon.png",
    "defaultTitle": "My Fiori App",
    "checkIntervalSeconds": 300
  },
  "docs": "taskbar-notification-c66373a.md"
}
```

**STEP**: Edit in Source Code

**DESCRIPTION**: Enable a developer experience feature that opens selected UI artifacts directly in the source code editor (or links to file locations). Configure source-to-artifact mapping and editor integration settings in the project config.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "editInSource": {
    "enabled": true,
    "editor": "vscode",
    "mappings": {
      "viewIdToFile": {
        "view.Main": "webapp/view/Main.view.xml"
      }
    }
  },
  "docs": "edit-in-source-code-7d8e942.md"
}
```

**STEP**: Automatic Generation

**DESCRIPTION**: Configure automatic code generation tasks the project uses (scaffolding, model binding, CRUD operation stubs). Set template sources, generation triggers, and output targets. Useful for CI or local development automation.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "automaticGeneration": {
    "enabled": true,
    "templates": [
      "fiori/templates/crud",
      "custom/templates/my-template"
    ],
    "triggers": {
      "onModelChange": true,
      "onBuild": false
    }
  },
  "docs": "automatic-generation-576f9fe.md"
}
```

**STEP**: Internationalization (i18n)

**DESCRIPTION**: Enable and configure i18n support: resource file locations, default locale, and build-time extraction/merging. Ensure translation files are present under webapp/i18n or the configured path.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "i18n": {
    "enabled": true,
    "defaultLocale": "en",
    "resourceFiles": {
      "en": "webapp/i18n/i18n.properties",
      "de": "webapp/i18n/i18n_de.properties"
    },
    "extractOnBuild": true
  },
  "docs": "internationalization-i18n-eb427f2.md"
}
```

**STEP**: Project Cleanup

**DESCRIPTION**: Add cleanup tasks and npm scripts to remove generated artifacts, temp files, and rebuild caches. Use cross-platform tools (rimraf) for predictable behavior in CI.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "scripts": {
    "clean": "rimraf dist .cache node_modules/.cache",
    "clean:generated": "rimraf src/generated webapp/generated",
    "rebuild": "npm run clean && npm run build"
  },
  "devDependencies": {
    "rimraf": "^5.0.0"
  },
  "docs": "project-cleanup-2640899.md"
}
```
--------------------------------

**TITLE**: Peek Definition and Go To Definition for Fiori Tools (annotations)

**INTRODUCTION**: Quick developer guide explaining how to use "Peek Definition" and "Go To Definition" in Visual Studio Code / SAP Business Application Studio when working with OData/UI annotations in Fiori projects. Includes concrete XML examples (annotation definition + annotation reference) and exact key/mouse bindings to trigger the features.

**TAGS**: fiori-tools, annotations, peek-definition, go-to-definition, vscode, bas, xml, odata

**STEP**: 1 — Prepare example annotation definition and a reference (XML)

**DESCRIPTION**: Create an annotation file that defines a UI annotation (LineItem) and a UI view that references this annotation term. Place the caret inside the annotation term string in the view to trigger Peek or Go To Definition.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- File: annotations/Products.annotations.xml -->
<Annotations Target="MyService.Product">
  <Annotation Term="com.sap.vocabularies.UI.v1.LineItem">
    <Collection>
      <Record Type="com.sap.vocabularies.UI.v1.DataField">
        <PropertyValue Property="Label">
          <String>Product Name</String>
        </PropertyValue>
        <PropertyValue Property="Value">
          <PropertyPath>ProductName</PropertyPath>
        </PropertyValue>
      </Record>
    </Collection>
  </Annotation>
</Annotations>

<!-- File: webapp/view/Products.view.xml -->
<mvc:View xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m">
  <!-- Example control using an annotationPath parameter to reference the annotation term -->
  <List items="{path: 'Products', parameters: {annotationPath: 'com.sap.vocabularies.UI.v1.LineItem'}}">
    <StandardListItem title="{ProductName}" />
  </List>
</mvc:View>
```

**STEP**: 2 — Trigger Peek Definition (preview and edit inline)

**DESCRIPTION**: Place the cursor inside the annotation term string (e.g., inside 'com.sap.vocabularies.UI.v1.LineItem' in the view file). Use keyboard or mouse to open an inline editor (Peek) showing the annotation source without switching tabs. If the annotation is defined in multiple sources, the Peek list shows all sources to choose from. Annotation layering is not considered.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "triggerPeek": {
    "Windows": "Alt+F12",
    "macOS": "Option+F12",
    "Mouse": "Right-click -> Peek Definition"
  },
  "behavior": {
    "inline": "Displays source file(s) in an inline editor at the current cursor location.",
    "multipleSources": "If the same annotation term exists across multiple files, all sources are listed for selection.",
    "annotationLayering": "Not considered by the tool; layering is ignored when resolving definitions."
  }
}
```

**STEP**: 3 — Trigger Go To Definition (open source file)

**DESCRIPTION**: With the cursor inside the annotation term string (or translatable string value), open the annotation source in a new editor tab scrolled to the exact location. If multiple definitions exist, the Peek listing will be shown instead of direct navigation. Use the following key/mouse combos depending on environment.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "triggerGoToDefinition": {
    "VSCode_Windows": "F12",
    "VSCode_macOS": "F12",
    "BAS": "Ctrl+F11 (SAP Business Application Studio)",
    "Mouse": "Right-click -> Go To Definition",
    "Keyboard+Mouse": {
      "Windows": "Ctrl + Click",
      "macOS": "Cmd + Click"
    }
  },
  "notes": "Place the text cursor inside the path referencing the annotation term segment or translatable string value before triggering."
}
```

**STEP**: 4 — Example: multiple annotation sources (illustrate multiple files)

**DESCRIPTION**: If the same annotation term is defined in more than one annotation file, show an example with two files. When you Peek Definition on the referenced term, the editor lists both files for selection. The tool does not resolve layering — it simply lists sources.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- File: annotations/Products.annotations.xml -->
<Annotations Target="MyService.Product">
  <Annotation Term="com.sap.vocabularies.UI.v1.LineItem">
    <!-- Primary definition -->
  </Annotation>
</Annotations>

<!-- File: annotations/CustomOverrides.annotations.xml -->
<Annotations Target="MyService.Product">
  <Annotation Term="com.sap.vocabularies.UI.v1.LineItem">
    <!-- Alternate definition in another source (e.g. project override) -->
  </Annotation>
</Annotations>

<!-- Behavior: When caret is inside 'com.sap.vocabularies.UI.v1.LineItem' and you Peek Definition,
     the tool presents a list:
     - annotations/Products.annotations.xml
     - annotations/CustomOverrides.annotations.xml
     You select which source to open/edit inline. -->
```
--------------------------------

**TITLE**: Progress Column (Fiori Tools / UI Annotations)

**INTRODUCTION**: Short, actionable reference for adding, configuring, moving, and deleting a Progress column (UI.DataPoint with Visualization = Progress) in SAP Fiori Elements table/section via annotation edits. Includes concrete XML annotation examples and file paths to paste into your annotation file.

**TAGS**: fiori-tools, ui.datapoint, ui.lineitem, progress, annotations, xml, sap-fiori, sapui5

**STEP**: 1 — Add a Progress Column (XML annotations)

**DESCRIPTION**: Create a UI.DataPoint annotation for the numeric property you want to show as a progress indicator, then reference that DataPoint from the entity's UI.LineItem using a UI.DataFieldForAnnotation. Put these annotations in your service annotation file (e.g., annotations/YourService.annotation.xml). The DataPoint default TargetValue can be set to 100 (percent). Visualization must be set to UI.VisualizationType/Progress.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- File: annotations/YourService.annotation.xml -->
<Annotations Target="YourService.MyEntityType" xmlns="http://docs.oasis-open.org/odata/ns/edm">
  <!-- 1) Define a named DataPoint (qualifier "ProgressCompletion") -->
  <Annotation Term="UI.DataPoint" Qualifier="ProgressCompletion">
    <Record Type="UI.DataPointType">
      <!-- numeric property used as current value -->
      <PropertyValue Property="Value" Path="CompletionRate"/>
      <!-- default target value (100 = 100%) -->
      <PropertyValue Property="TargetValue" Int="100"/>
      <!-- visualization type must be Progress -->
      <PropertyValue Property="Visualization" EnumMember="UI.VisualizationType/Progress"/>
      <!-- Optional examples (uncomment/use if needed):
           <PropertyValue Property="Target" Path="GoalValue"/>
           <PropertyValue Property="TargetType" EnumMember="UI.DataPoint_TargetType/Absolute"/>
           <PropertyValue Property="Title" Path="ProgressTitle"/>
      -->
    </Record>
  </Annotation>

  <!-- 2) Reference the DataPoint from the LineItem (table column) -->
  <Annotation Term="UI.LineItem">
    <Collection>
      <!-- other columns may be defined here -->

      <!-- Add a column that points to the DataPoint above -->
      <Record Type="UI.DataFieldForAnnotation">
        <!-- visible column label -->
        <PropertyValue Property="Label" String="Progress"/>
        <!-- reference the DataPoint by qualifier -->
        <AnnotationPath>@UI.DataPoint#ProgressCompletion</AnnotationPath>

        <!-- Optional UI properties for the column -->
        <PropertyValue Property="Importance" EnumMember="UI.ImportanceType/Medium"/>
        <PropertyValue Property="Hidden" Bool="false"/>
      </Record>

      <!-- more columns -->
    </Collection>
  </Annotation>
</Annotations>
```

**STEP**: 2 — Common optional DataPoint properties (examples)

**DESCRIPTION**: Examples of commonly-used optional properties you may want to add to the DataPoint or the DataFieldForAnnotation. Use these when you need a different target type, dynamic target, criticality thresholds, or a tooltip source.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Add inside the UI.DataPoint Record (examples) -->
<PropertyValue Property="TargetValue" Int="100"/>
<!-- Use a property as the target instead of a fixed number -->
<PropertyValue Property="Target" Path="GoalValue"/>

<!-- Criticality calculation example (thresholds) -->
<PropertyValue Property="CriticalityCalculation">
  <Record Type="UI.CriticalityCalculationType">
    <PropertyValue Property="ImprovementDirection" EnumMember="UI.ImprovementDirectionType/Maximize"/>
    <PropertyValue Property="DeviationRangeLowValue" Path="LowerThreshold"/>
    <PropertyValue Property="ToleranceRangeLowValue" Path="LowerTolerance"/>
    <PropertyValue Property="ToleranceRangeHighValue" Path="UpperTolerance"/>
    <PropertyValue Property="DeviationRangeHighValue" Path="UpperThreshold"/>
  </Record>
</PropertyValue>

<!-- Tooltip source / Title example -->
<PropertyValue Property="Title" Path="ProgressTooltipText"/>
```

**STEP**: 3 — Where to put the stylesheet reference (icons)

**DESCRIPTION**: If your custom UI needs SAP icon fonts locally, reference the provided CSS in your app's relevant HTML file(s). Example path shown in original docs.

**LANGUAGE**: HTML

**CODE**:
```html
<!-- Place in index.html or the HTML file that bootstraps the editor UI -->
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```

**STEP**: 4 — Move a Progress Column (UI Editor actions)

**DESCRIPTION**: Instructions for reordering columns in the UI design editor; not a code change. Use drag-and-drop or arrow icons in the Page Editor.

**LANGUAGE**: plain

**CODE**:
```text
- Drag & drop:
  Hover over a column outline, press and hold mouse, move to the desired position, release.
  Hold CTRL to move multiple selected columns together.

- Arrow icons:
  Use Move Up (↑) or Move Down (↓) icons next to the column in the Page Editor to move one column at a time.
```

**STEP**: 5 — Delete a Progress Column (UI Editor actions)

**DESCRIPTION**: Steps to remove the column from the UI using the Page Editor. This deletes the UI.LineItem entry referencing the DataPoint (and you may optionally remove the DataPoint annotation if unused).

**LANGUAGE**: plain

**CODE**:
```text
1. Navigate to the column in the Page Editor (Columns node).
2. Click the Delete (wastebasket) icon next to the column.
3. Confirm in the Delete Confirmation popup.
4. (Optional) Remove the UI.DataPoint annotation if nothing else references it:
   - Open annotations/YourService.annotation.xml and remove the UI.DataPoint (Qualifier) record.
```

**STEP**: 6 — Notes / Constraints

**DESCRIPTION**: Important constraints for enabling the Add Progress Column action in the editor.

**LANGUAGE**: plain

**CODE**:
```text
- The Add Progress Column option is disabled if the table entity and associated entities do not have any numeric properties, or if all numeric properties are already used in the table.
- When adding from the editor:
  - A new UI.DataPoint is created with Value set to the selected numeric property, TargetValue defaulting to 100, and Visualization=UI.VisualizationType/Progress.
  - A new UI.DataFieldForAnnotation is added to UI.LineItem, referencing the DataPoint and with a generated Label.
```
--------------------------------

**TITLE**: Project Cleanup for Fiori Tools (remove orphaned annotations)

**INTRODUCTION**: Automated cleanup of Fiori annotation files (EDMX / XML or CDS outputs) to remove:
- Orphaned UI.FieldGroup and UI.LineItem annotations that are not referenced by UI.ReferenceFacet targets.
- Property-level annotations with terms: UI.MultiLineText, Common.ValueListWithFixedValues, Common.Text, Common.ValueList, Common.FieldControl when those properties are not referenced by any referenced annotations.

Use this as an automated pre-commit or build step to keep annotation files minimal and consistent.

**TAGS**: fiori-tools, annotations, cleanup, UI.ReferenceFacet, UI.FieldGroup, UI.LineItem, Common.ValueList, XML, EDMX, CDS, TypeScript, Node.js

STEP: 1 - Example EDMX annotation file (input)
DESCRIPTION: Example of an annotations XML file containing Facets, ReferenceFacets, FieldGroup & LineItem annotations and property-level annotations. Use this to test the cleanup script.
LANGUAGE: XML
CODE:
```xml
<!-- file: annotations/ServiceAnnotations.xml -->
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
  <edmx:DataServices>
    <Schema Namespace="MyService" xmlns="http://docs.oasis-open.org/odata/ns/edm">
      <Annotations Target="MyService.MyEntityType">
        <Annotation Term="UI.HeaderInfo">
          <!-- ... -->
        </Annotation>

        <Annotation Term="UI.Facets">
          <Collection>
            <!-- A ReferenceFacet referencing a target facet (valid) -->
            <Record Type="UI.ReferenceFacet">
              <PropertyValue Property="Label" String="Group A"/>
              <PropertyValue Property="Target" String="MyService.MyEntityType/@UI.FieldGroup#GroupA"/>
            </Record>

            <!-- Another ReferenceFacet -->
            <Record Type="UI.ReferenceFacet">
              <PropertyValue Property="Label" String="Group B"/>
              <PropertyValue Property="Target" String="MyService.MyEntityType/@UI.FieldGroup#GroupB"/>
            </Record>
          </Collection>
        </Annotation>

        <!-- FieldGroup that is referenced -->
        <Annotation Term="UI.FieldGroup" Qualifier="GroupA">
          <Record Type="UI.FieldGroup">
            <PropertyValue Property="Data" Path="Prop1"/>
          </Record>
        </Annotation>

        <!-- FieldGroup that is orphaned (no ReferenceFacet points to GroupOrphan) -->
        <Annotation Term="UI.FieldGroup" Qualifier="GroupOrphan">
          <Record Type="UI.FieldGroup">
            <PropertyValue Property="Data" Path="PropX"/>
          </Record>
        </Annotation>

        <!-- LineItem referenced somewhere else? Orphaned example -->
        <Annotation Term="UI.LineItem" Qualifier="ListOrphan">
          <Collection>
            <Record Type="UI.DataField">
              <PropertyValue Property="Value" Path="PropY"/>
            </Record>
          </Collection>
        </Annotation>

        <!-- Property-level annotations that can be removed if property not used -->
        <Annotation Term="Common.ValueList" Qualifier="some">
          <!-- pseudo content - property-level via Target="MyService.MyEntityType/PropZ" -->
        </Annotation>

      </Annotations>

      <!-- Property annotations are expressed as Annotations with Target "EntityType/Property" -->
      <Annotations Target="MyService.MyEntityType/PropX">
        <Annotation Term="Common.Text"/>
        <Annotation Term="Common.ValueListWithFixedValues"/>
      </Annotations>

      <Annotations Target="MyService.MyEntityType/Prop1">
        <Annotation Term="UI.MultiLineText"/>
      </Annotations>

    </Schema>
  </edmx:DataServices>
</edmx:Edmx>
```

STEP: 2 - Identify referenced UI.ReferenceFacet targets
DESCRIPTION: Parse the annotation XML and collect all targets referenced by UI.ReferenceFacet entries. Targets are strings like "Namespace.EntityType/@UI.FieldGroup#Qualifier" or "Namespace.EntityType/NavigationProperty". These targets indicate which FieldGroup or LineItem qualifiers are in use.
LANGUAGE: TypeScript
CODE:
```typescript
// file: scripts/collectReferenceTargets.ts
import { parseStringPromise } from "xml2js";
import fs from "fs/promises";

export async function collectReferenceTargets(edmxXml: string): Promise<Set<string>> {
  const doc = await parseStringPromise(edmxXml, { explicitArray: false });
  const targets = new Set<string>();

  const schemas = doc["edmx:Edmx"]["edmx:DataServices"]["Schema"];
  const schemaArray = Array.isArray(schemas) ? schemas : [schemas];

  for (const schema of schemaArray) {
    const annotationsContainer = schema["Annotations"];
    if (!annotationsContainer) continue;

    // Annotations may be array or single object
    const annotations = Array.isArray(annotationsContainer) ? annotationsContainer : [annotationsContainer];
    for (const ann of annotations) {
      const annotationList = ann["Annotation"];
      if (!annotationList) continue;
      const annArray = Array.isArray(annotationList) ? annotationList : [annotationList];

      for (const a of annArray) {
        const term = a["$"]?.Term || a["Term"];
        const isReferenceFacet = term === "UI.ReferenceFacet" || (a["Record"] && a["Record"]["$"] && a["Record"]["$"]["Type"] === "UI.ReferenceFacet");

        if (isReferenceFacet) {
          // PropertyValue elements might be an array
          const record = a["Record"] || a;
          const props = record["PropertyValue"] || [];
          const propsArray = Array.isArray(props) ? props : [props];
          for (const pv of propsArray) {
            const propName = pv["$"]?.Property || pv["Property"];
            if (propName === "Target") {
              // The target may be expressed as String or Path
              const targetValue = pv["String"] || pv["_"] || (pv["Path"] && pv["Path"]);
              if (targetValue) {
                // Normalize: target may include qualifier segment after "#"
                targets.add(String(targetValue));
              }
            }
          }
        }
      }
    }
  }

  return targets;
}

// Example usage:
// const xml = await fs.readFile('annotations/ServiceAnnotations.xml','utf8');
// const targets = await collectReferenceTargets(xml);
// console.log(targets);
```

STEP: 3 - Remove orphaned UI.FieldGroup and UI.LineItem annotations
DESCRIPTION: Filter Annotation elements of Term "UI.FieldGroup" and "UI.LineItem" by matching their Qualifier (or fully-qualified Target) against the set of collected ReferenceFacet targets. Remove annotations that are not referenced. Preserve qualifiers and original structure when writing back.
LANGUAGE: TypeScript
CODE:
```typescript
// file: scripts/removeOrphanedFacets.ts
import { parseStringPromise, Builder } from "xml2js";
import fs from "fs/promises";

export async function removeOrphanedFacets(filePath: string) {
  const xml = await fs.readFile(filePath, "utf8");
  const doc = await parseStringPromise(xml, { explicitArray: false });
  const schemas = doc["edmx:Edmx"]["edmx:DataServices"]["Schema"];
  const schemaArray = Array.isArray(schemas) ? schemas : [schemas];

  // Collect targets once
  const fullXml = xml;
  // reuse collectReferenceTargets from previous step if available
  // For self-contained example, call the collect function inline:
  const targets = new Set<string>();
  for (const schema of schemaArray) {
    const annotationsContainer = schema["Annotations"];
    if (!annotationsContainer) continue;
    const annotations = Array.isArray(annotationsContainer) ? annotationsContainer : [annotationsContainer];
    for (const ann of annotations) {
      const annList = ann["Annotation"];
      if (!annList) continue;
      const arr = Array.isArray(annList) ? annList : [annList];
      for (const a of arr) {
        const rec = a["Record"] || a;
        const term = a["$"]?.Term || a["Term"];
        const isReferenceFacet = term === "UI.ReferenceFacet" || (rec && rec["$"] && rec["$"]["Type"] === "UI.ReferenceFacet");
        if (isReferenceFacet) {
          const props = rec["PropertyValue"] || [];
          const propsArr = Array.isArray(props) ? props : [props];
          for (const pv of propsArr) {
            const propName = pv["$"]?.Property || pv["Property"];
            if (propName === "Target") {
              const targetValue = pv["String"] || pv["_"] || pv["Path"];
              if (targetValue) targets.add(String(targetValue));
            }
          }
        }
      }
    }
  }

  // Terms to check for facet removal
  const facetTerms = new Set(["UI.FieldGroup", "UI.LineItem"]);

  // Iterate schemas and remove orphaned facet annotations
  for (const schema of schemaArray) {
    if (!schema["Annotations"]) continue;
    const annotationsArr = Array.isArray(schema["Annotations"]) ? schema["Annotations"] : [schema["Annotations"]];

    for (const annContainer of annotationsArr) {
      if (!annContainer["Annotation"]) continue;
      let annList = annContainer["Annotation"];
      annList = Array.isArray(annList) ? annList : [annList];

      const kept = annList.filter((a: any) => {
        const term = a["$"]?.Term || a["Term"];
        if (!facetTerms.has(term)) return true;

        // Determine qualifier or implied target string
        const qualifier = a["$"]?.Qualifier || a["Qualifier"];
        // Build expected target format: Namespace.EntityType/@UI.FieldGroup#Qualifier
        // But we don't know full target name here; compare by suffix "#Qualifier" if qualifier exists
        if (qualifier) {
          for (const t of Array.from(targets)) {
            if (t.endsWith(`#${qualifier}`)) {
              return true; // referenced
            }
          }
          return false; // orphaned
        } else {
          // If no qualifier, fallback: try to match by term existence in any target string
          // Keep if any target mentions the term
          for (const t of Array.from(targets)) {
            if (t.includes(`/${term}`) || t.includes(term)) return true;
          }
          return false;
        }
      });

      annContainer["Annotation"] = kept.length === 1 ? kept[0] : kept;
    }
  }

  const builder = new Builder();
  const newXml = builder.buildObject(doc);
  await fs.writeFile(filePath, newXml, "utf8");
}

// Example invocation:
// await removeOrphanedFacets('annotations/ServiceAnnotations.xml');
```

STEP: 4 - Remove property-level annotations for unreferenced properties
DESCRIPTION: Remove property-level annotations using the following terms when the property is not referenced by any collected ReferenceFacet target (nor any other referenced annotation):
- UI.MultiLineText
- Common.ValueListWithFixedValues
- Common.Text
- Common.ValueList
- Common.FieldControl

Scan Annotations with Target "Namespace.EntityType/PropertyName" and remove these Annotation elements if PropertyName is not mentioned in any referenced target.
LANGUAGE: TypeScript
CODE:
```typescript
// file: scripts/removeOrphanedPropertyAnnotations.ts
import { parseStringPromise, Builder } from "xml2js";
import fs from "fs/promises";

const REMOVABLE_PROPERTY_TERMS = new Set([
  "UI.MultiLineText",
  "Common.ValueListWithFixedValues",
  "Common.Text",
  "Common.ValueList",
  "Common.FieldControl"
]);

export async function cleanupPropertyAnnotations(filePath: string) {
  const xml = await fs.readFile(filePath, "utf8");
  const doc = await parseStringPromise(xml, { explicitArray: false });
  const schemas = doc["edmx:Edmx"]["edmx:DataServices"]["Schema"];
  const schemaArray = Array.isArray(schemas) ? schemas : [schemas];

  // Collect referenced targets (reuse logic from STEP 2)
  const referencedProperties = new Set<string>(); // store strings like "EntityType/PropName" or "/PropName" substring
  for (const schema of schemaArray) {
    const annotationsContainer = schema["Annotations"];
    if (!annotationsContainer) continue;
    const annotations = Array.isArray(annotationsContainer) ? annotationsContainer : [annotationsContainer];
    for (const ann of annotations) {
      const annList = ann["Annotation"];
      if (!annList) continue;
      const arr = Array.isArray(annList) ? annList : [annList];
      for (const a of arr) {
        const rec = a["Record"] || a;
        const term = a["$"]?.Term || a["Term"];
        const isReferenceFacet = term === "UI.ReferenceFacet" || (rec && rec["$"] && rec["$"]["Type"] === "UI.ReferenceFacet");
        if (isReferenceFacet) {
          const props = rec["PropertyValue"] || [];
          const propsArr = Array.isArray(props) ? props : [props];
          for (const pv of propsArr) {
            const propName = pv["$"]?.Property || pv["Property"];
            if (propName === "Target") {
              const targetValue = pv["String"] || pv["_"] || pv["Path"];
              if (targetValue) {
                // attempt to extract property paths from the target
                // If target contains "/PropName" store it
                const t = String(targetValue);
                const slashIndex = t.indexOf("/");
                if (slashIndex >= 0) {
                  const trailing = t.substring(slashIndex + 1);
                  // store trailing token(s) like "@UI.FieldGroup#Qualifier" or "NavProp/PropA"
                  referencedProperties.add(trailing);
                } else {
                  referencedProperties.add(t);
                }
              }
            }
          }
        }
      }
    }
  }

  // Now scan for property-level Annotations (Targets like Namespace.EntityType/Prop)
  for (const schema of schemaArray) {
    const annotationsList = schema["Annotations"];
    if (!annotationsList) continue;
    const annArray = Array.isArray(annotationsList) ? annotationsList : [annotationsList];

    for (const ann of annArray) {
      const target = ann["$"]?.Target || ann["Target"];
      if (!target) continue;
      // target format: Namespace.EntityType/PropertyName
      const parts = String(target).split("/");
      if (parts.length < 2) continue;
      const propertyPath = parts.slice(1).join("/"); // e.g., "PropX" or "Nav/Prop"
      // Decide if propertyPath appears in any referencedProperties
      let isReferenced = false;
      for (const ref of Array.from(referencedProperties)) {
        if (ref.includes(propertyPath) || propertyPath.includes(ref)) {
          isReferenced = true;
          break;
        }
      }

      if (!isReferenced) {
        // Filter out removable terms from ann.Annotation
        if (!ann["Annotation"]) continue;
        let anns = ann["Annotation"];
        anns = Array.isArray(anns) ? anns : [anns];
        const kept = anns.filter((a: any) => {
          const term = a["$"]?.Term || a["Term"];
          return !REMOVABLE_PROPERTY_TERMS.has(term);
        });
        ann["Annotation"] = kept.length === 1 ? kept[0] : kept;
      }
    }
  }

  const builder = new Builder();
  const newXml = builder.buildObject(doc);
  await fs.writeFile(filePath, newXml, "utf8");
}

// Example:
// await cleanupPropertyAnnotations('annotations/ServiceAnnotations.xml');
```

STEP: 5 - Full CLI script example (parse -> clean facets -> clean properties -> write)
DESCRIPTION: Single script that applies the above operations in sequence to a given annotation file.
LANGUAGE: TypeScript
CODE:
```typescript
// file: scripts/projectCleanupCLI.ts
import fs from "fs/promises";
import path from "path";
import { removeOrphanedFacets } from "./removeOrphanedFacets";
import { cleanupPropertyAnnotations } from "./removeOrphanedPropertyAnnotations";

async function main() {
  const filePath = process.argv[2];
  if (!filePath) {
    console.error("Usage: node projectCleanupCLI.js <annotations-file.xml>");
    process.exit(1);
  }
  const absolute = path.resolve(filePath);
  // step 1: remove orphaned UI.FieldGroup & UI.LineItem
  await removeOrphanedFacets(absolute);
  // step 2: remove orphaned property-level removable annotations
  await cleanupPropertyAnnotations(absolute);
  console.log(`Cleanup complete for ${absolute}`);
}

if (require.main === module) {
  main().catch(err => {
    console.error(err);
    process.exit(1);
  });
}
```

STEP: 6 - Recommended integration and notes
DESCRIPTION: Where to run and expected behavior.
LANGUAGE: JSON
CODE:
```json
{
  "recommended": [
    "Run as part of build or pre-commit for `annotations/*.xml` files.",
    "Back up original files before running script when first introduced.",
    "Add unit tests comparing original vs expected cleaned XML for safety."
  ],
  "removable_property_terms": [
    "UI.MultiLineText",
    "Common.ValueListWithFixedValues",
    "Common.Text",
    "Common.ValueList",
    "Common.FieldControl"
  ],
  "facet_terms": ["UI.FieldGroup", "UI.LineItem"]
}
```
--------------------------------

**TITLE**: Adding, Moving, and Removing a Rating Column (UI.DataPoint) for Fiori Tools

**INTRODUCTION**: This guide shows how to add a Rating column to a List Report table or an Object Page section in Fiori Tools. It includes manual Page Editor actions and the exact annotation XML to create a UI.DataPoint with Visualization = Rating, TargetValue = 5, plus how to set Label, Importance, Hidden, and Tooltip. Also covers moving and deleting the column.

**TAGS**: fiori-tools, annotations, UI.DataPoint, Rating, XML, UI.LineItem, Fiori elements

**STEP**: 1 — Page Editor: Add Rating Column (manual)
**DESCRIPTION**: Use the Page Editor to create a Rating column without editing annotations manually. This creates a UI.DataPoint annotation for the selected property with TargetValue = 5 and Visualization = Rating.
**LANGUAGE**: text
**CODE**:
```text
Manual steps (Page Editor):
1. Open Page Editor for the target page.
2. In the Page structure, expand the table/Columns node.
3. Click the + (Add) icon and select "Add Rating Columns".
4. In the tree control choose the property you want to expose as a rating.
5. Click "Add".

Result: A UI.DataPoint annotation is created:
- Value = selected property
- TargetValue = 5
- Visualization = Rating
- LineItem entry references the DataPoint (column added to table)
```

**STEP**: 2 — Annotations XML: Create Rating DataPoint and add to LineItem (programmatic)
**DESCRIPTION**: Insert the following annotation XML into your annotations file (annotations.xml) for the target EntityType. This example creates a DataPoint qualifier "RatingDataPoint", sets Value, TargetValue, Visualization (#Rating), and references that DataPoint from UI.LineItem as a column.
**LANGUAGE**: XML
**CODE**:
```xml
<!-- Insert into annotations.xml for the service/entity target -->
<!-- Replace ServiceNamespace.EntityType with your actual target-->
<Annotations Target="ServiceNamespace.EntityType">
  <!-- Add a LineItem column that uses a DataPoint annotation -->
  <Annotation Term="UI.LineItem">
    <Collection>
      <Record Type="UI.DataFieldForAnnotation">
        <PropertyValue Property="Label" String="Rating"/>
        <!-- Reference the DataPoint by qualifier -->
        <PropertyValue Property="Target" AnnotationPath="@UI.DataPoint:RatingDataPoint"/>
      </Record>
      <!-- other LineItem fields... -->
    </Collection>
  </Annotation>

  <!-- Define the DataPoint qualifier used by the column -->
  <Annotation Term="UI.DataPoint" Qualifier="RatingDataPoint">
    <Record>
      <!-- Value: path to the numeric property that holds the rating -->
      <PropertyValue Property="Value" Path="Rating"/>          <!-- e.g., Rating property -->
      <!-- TargetValue: how many stars (set to 5) -->
      <PropertyValue Property="TargetValue" Int="5"/>
      <!-- Visualization: use enum member 'Rating' -->
      <PropertyValue Property="Visualization" EnumMember="UI.VisualizationType/Rating"/>
      <!-- Optional UI attributes -->
      <PropertyValue Property="Label" String="Customer Rating"/>
      <PropertyValue Property="Importance" EnumMember="UI.ImportanceType/High"/>
      <PropertyValue Property="Hidden" Bool="false"/>
      <!-- Tooltip source: bind to a text property -->
      <PropertyValue Property="Tooltip" Path="RatingTooltip"/>
    </Record>
  </Annotation>
</Annotations>
```

**STEP**: 3 — File reference for SAP icons (UI styling)
**DESCRIPTION**: Include the SAP icons CSS if your local project requires it (preserves original doc reference).
**LANGUAGE**: HTML
**CODE**:
```html
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```

**STEP**: 4 — Properties mapping and examples (what to set)
**DESCRIPTION**: Summary of annotation properties you can set on the DataPoint and how they map to UI behavior.
**LANGUAGE**: text
**CODE**:
```text
DataPoint properties:
- Value       -> Path to numeric rating property (e.g. Rating)
- TargetValue -> Int (number of stars), e.g. 5
- Visualization -> EnumMember UI.VisualizationType/Rating
- Label       -> String label for the column header
- Importance  -> EnumMember UI.ImportanceType/(High|Medium|Low)
- Hidden      -> Bool true|false (hide column)
- Tooltip     -> Path to tooltip text property (Tooltip Source)

LineItem:
- Use Type="UI.DataFieldForAnnotation" and PropertyValue Target AnnotationPath="@UI.DataPoint:Qualifier"
```

**STEP**: 5 — Move Rating Column (Page Editor UI)
**DESCRIPTION**: Two UI options to reorder columns in the Page Editor.
**LANGUAGE**: text
**CODE**:
```text
Option A - Drag and Drop:
- Hover over column outline in the table.
- Press and hold mouse, drag to new position (eligible positions highlighted in green).
- Release to drop.
- Tip: Hold CTRL to select and move multiple columns at once.

Option B - Arrow Icons:
- Use Move Up / Move Down icons next to the column name in the Columns node to move one column at a time.
```

**STEP**: 6 — Delete Rating Column (Page Editor or programmatic)
**DESCRIPTION**: Remove the column via Page Editor or by deleting the annotation entries from annotations.xml.
**LANGUAGE**: text
**CODE**:
```text
Manual (Page Editor):
1. Navigate to the column under the Columns node.
2. Click the Delete (wastebasket) icon.
3. Confirm in the Delete Confirmation dialog.

Programmatic:
- Remove the UI.DataFieldForAnnotation entry from UI.LineItem that references the DataPoint.
- Optionally remove the UI.DataPoint annotation qualifier if no longer used:
  - Delete the <Annotation Term="UI.DataPoint" Qualifier="RatingDataPoint">...</Annotation> block.
```

--------------------------------

**TITLE**: Request a New Guide (Fiori Tools) - UI Triggers and HTML Form Implementation

**INTRODUCTION**: This document describes all UI entry points to request a new guide from the Fiori Tools guided development extension and provides ready-to-use code examples you can embed in an extension webview or a lightweight web page to reproduce the "Request Guide" form. The HTML form example constructs a mailto: link and opens the user's email client (matching the extension behavior).

**TAGS**: fiori-tools, guided-development, request-guide, vscode-extension, html, javascript

**STEP**: Locate and trigger "Request New Guide" in the Fiori Tools extension

**DESCRIPTION**: Methods to surface the "Request New Guide" action in the Fiori Tools extension. Use these UI options programmatically in a VS Code extension or manually via the UI:

- Scroll to the bottom of the guides list and click "Request Guide" in the "Don't have what you are looking for?" section.
- Type "request guide" into the "Search guides" field.
- Click the Help icon () and choose "Request New Guide".
- Use the Command Palette entry: "Fiori: Request New Guide".
- From the INFORMATION panel → USEFUL LINKS → "Guide Requests for Guided Development".

The TypeScript snippet below shows how to open the Command Palette and how to execute a command if you know its command identifier. Replace the placeholder command id with the actual id used by your extension (if known).

**LANGUAGE**: TypeScript

**CODE**:
```TypeScript
// VS Code extension: open the Command Palette (user visible)
import * as vscode from 'vscode';

export async function showRequestGuideCommand() {
  // opens the Command Palette (user can type "Fiori: Request New Guide")
  await vscode.commands.executeCommand('workbench.action.showCommands');

  // If you know the command id that triggers "Request New Guide", call it directly:
  // Replace 'fiori-tools.requestNewGuide' with the real command id provided by the extension.
  try {
    await vscode.commands.executeCommand('fiori-tools.requestNewGuide');
  } catch (err) {
    // handle missing command id gracefully
    console.warn('Request Guide command id not available:', err);
  }
}
```

**STEP**: Implement a "Request Guide" HTML form that opens an email client (mailto)

**DESCRIPTION**: Provide an embeddable HTML + JavaScript form that replicates the guided development "Request Guide" behavior:
- Fields: name, email, title, description.
- On submit: open the default email client by creating a mailto: URL with subject/body prefilled.
- Includes the relative stylesheet reference ../css/sap-icons.css and sample image path images/Fiori_Tools_Guide_Requests_for_Guided_Development_4f9571c.png used by the extension docs.

Place this file inside your extension webview or static site; ensure ../css/sap-icons.css exists relative to this HTML file and the image exists at images/Fiori_Tools_Guide_Requests_for_Guided_Development_4f9571c.png.

**LANGUAGE**: HTML

**CODE**:
```HTML
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <!-- preserved relative stylesheet path from the docs -->
  <link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Request a New Guide</title>
  <style>
    /* minimal styling for the demo form */
    body { font-family: Arial, sans-serif; padding: 16px; }
    label { display: block; margin-top: 8px; }
    input, textarea { width: 100%; box-sizing: border-box; padding: 8px; margin-top: 4px; }
    button { margin-top: 12px; padding: 8px 16px; }
    .help-image { margin-top: 16px; max-width: 480px; border: 1px solid #ddd; }
  </style>
</head>
<body>
  <h1>Request a New Guide</h1>

  <form id="requestGuideForm">
    <label>
      Your name
      <input type="text" id="name" name="name" required placeholder="Full name">
    </label>

    <label>
      Your email
      <input type="email" id="email" name="email" required placeholder="your.email@example.com">
    </label>

    <label>
      Guide title (short)
      <input type="text" id="title" name="title" required placeholder="Brief title for the new guide">
    </label>

    <label>
      Description (what do you need?)
      <textarea id="description" name="description" rows="6" required placeholder="Explain the scenario, pages, fields, or controls you want covered"></textarea>
    </label>

    <button type="submit">Submit</button>
  </form>

  <!-- Example image preserved from docs -->
  <img
    class="help-image"
    src="images/Fiori_Tools_Guide_Requests_for_Guided_Development_4f9571c.png"
    alt="Guide Requests for Guided Development"
  />

  <script>
    // Build and open a mailto: URL with the form data (this replicates the extension behavior).
    (function() {
      const form = document.getElementById('requestGuideForm');

      function encodeMailto(to, subject, body) {
        // Minimal mailto builder: encode subject and body
        const params = [];
        if (subject) params.push('subject=' + encodeURIComponent(subject));
        if (body) params.push('body=' + encodeURIComponent(body));
        return `mailto:${encodeURIComponent(to)}?${params.join('&')}`;
      }

      form.addEventListener('submit', function (ev) {
        ev.preventDefault();

        const name = document.getElementById('name').value.trim();
        const email = document.getElementById('email').value.trim();
        const title = document.getElementById('title').value.trim();
        const description = document.getElementById('description').value.trim();

        // Replace with the target guide request recipient email if available.
        const recipient = ''; // e.g., 'fiori-guides@example.com' or leave blank to prompt email client

        const subject = `Guide request: ${title}`;
        const bodyLines = [
          `Name: ${name}`,
          `Email: ${email}`,
          '',
          'Description:',
          description
        ];
        const body = bodyLines.join('\r\n');

        const mailto = encodeMailto(recipient, subject, body);

        // Open the user's default email client. This triggers the email compose window.
        window.location.href = mailto;
      });
    })();
  </script>
</body>
</html>
```

**STEP**: Add a "USEFUL LINKS" entry inside an extension webview (INFORMATION panel)

**DESCRIPTION**: When building a webview-based INFORMATION panel for your extension, include a "USEFUL LINKS" section that points to the Guide Requests page. Use the relative image or an icon to match the documentation screenshot.

**LANGUAGE**: HTML

**CODE**:
```HTML
<!-- snippet to include in a webview / INFORMATION panel -->
<section id="useful-links">
  <h2>USEFUL LINKS</h2>
  <ul>
    <li>
      <a href="https://github.com/SAP/fiori-tools-guided-development" target="_blank" rel="noopener">
        Guide Requests for Guided Development
      </a>
    </li>
    <li>
      <a href="https://sapui5.hana.ondemand.com/#/topic/03265b0408e2432c9571d6b3feb6b1fd" target="_blank" rel="noopener">
        Developing Apps with SAP Fiori elements
      </a>
    </li>
  </ul>

  <!-- preserved image path from the docs -->
  <img src="images/Fiori_Tools_Guide_Requests_for_Guided_Development_4f9571c.png"
       alt="Guide Requests for Guided Development"
       style="max-width:320px; margin-top:8px;" />
</section>
```


--------------------------------

**TITLE**: Search and Filter Guides (Guided Development) — Implementation Patterns and Examples

**INTRODUCTION**: This document summarizes the UI behaviors, data structures, strings, and code patterns required to implement the "Search for a Guide" experience in guided development (Fiori Tools). It covers: registering icon styles, the guide metadata shape, grouping logic, view filters (All vs Project), tag filtering, and search-as-you-type. Use the examples directly in UI components or services.

**TAGS**: fiori-tools, guided-development, guides, filtering, search, OData, annotations, UI5, sap-icons

**STEP**: 1 — Register SAP icon stylesheet

**DESCRIPTION**: Include the SAP icons stylesheet required by icon spans used in the UI. Keep relative path as in the product.

**LANGUAGE**: HTML

**CODE**:
```html
<!-- Place this in your HTML shell or component that initializes the guided development UI -->
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```

**STEP**: 2 — Guide metadata JSON shape (canonical)

**DESCRIPTION**: Use this canonical JSON shape for each guide. The fields capture all technical attributes referenced by the UI (categories, tags, artifacts, compatibility, annotation types). Preserve OData version, page/template type, and annotation-type categories.

**LANGUAGE**: JSON

**CODE**:
```json
[
  {
    "id": "guide-list-display",
    "title": "Display Line Item",
    "description": "Add UI.LineItem annotation support to list page",
    "categories": {
      "pageTypes": ["ListReport", "ObjectPage"],     // Page Type(s)
      "odataVersions": ["V2", "V4"],                // OData Version(s)
      "annotationTypes": ["XML Annotation", "CAP CDS Annotation"] // Annotation grouping
    },
    "artifacts": ["Annotations", "Manifest Change"], // Application Artifacts: Manifest Change, Flex Change, Annotations
    "tags": ["lineitem", "annotation", "ui"],
    "compatibleTemplates": ["FioriElementsListReport_v1"],
    "compatibleSAPUI5Versions": [1.71, 1.84],
    "samplePreviewPath": "samples/display-lineitem/index.html",
    "isApplicableToProject": true
  },
  {
    "id": "guide-flex-change",
    "title": "Adapt Header",
    "description": "Add flex change to header actions",
    "categories": {
      "pageTypes": ["ObjectPage"],
      "odataVersions": ["V4"],
      "annotationTypes": []
    },
    "artifacts": ["Flex Change"],
    "tags": ["flex", "ui", "header"],
    "compatibleTemplates": ["FioriElementsObjectPage"],
    "isApplicableToProject": false
  }
]
```

**STEP**: 3 — Grouping logic: Page Type, OData Version, Application Artifacts (including annotation subgroups)

**DESCRIPTION**: Group the guide list based on the selected "Group by" value. When a guide targets multiple page types, it should appear in each relevant group, but only the variant matching the current project's page type is visually highlighted. Annotation guides are further grouped into XML Annotation, CAP CDS Annotation, ABAP CDS Annotation.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
type Guide = {
  id: string;
  title: string;
  description: string;
  categories: {
    pageTypes: string[];
    odataVersions: string[];
    annotationTypes: string[]; // e.g. ["XML Annotation","CAP CDS Annotation"]
  };
  artifacts: string[]; // ["Manifest Change","Flex Change","Annotations"]
  tags: string[];
  isApplicableToProject?: boolean;
};

function groupGuides(guides: Guide[], mode: "Page Type"|"OData Version"|"Application Artifacts", currentProject?: { pageType?: string; odataVersion?: string }) {
  if (mode === "Page Type") {
    const map = new Map<string, Guide[]>();
    for (const g of guides) {
      for (const pt of g.categories.pageTypes) {
        if (!map.has(pt)) map.set(pt, []);
        map.get(pt)!.push(g);
      }
    }
    // Later UI: for guides present in multiple pageType groups,
    // highlight the entry where pt === currentProject.pageType
    return map;
  }

  if (mode === "OData Version") {
    const map = new Map<string, Guide[]>();
    for (const g of guides) {
      for (const v of g.categories.odataVersions) {
        if (!map.has(v)) map.set(v, []);
        map.get(v)!.push(g);
      }
    }
    // UI must show a warning if selected guide is not available for project OData version:
    // "This guide isn’t compatible with the current project and will not work as intended."
    return map;
  }

  // Application Artifacts: group by artifact type; annotation-specific further grouped
  if (mode === "Application Artifacts") {
    const map = new Map<string, Guide[]>();
    for (const g of guides) {
      for (const a of g.artifacts) {
        if (a === "Annotations") {
          // split by annotationTypes inside the guide.categories.annotationTypes
          for (const at of g.categories.annotationTypes) {
            const key = `Annotations / ${at}`; // e.g. "Annotations / XML Annotation"
            if (!map.has(key)) map.set(key, []);
            map.get(key)!.push(g);
          }
        } else {
          if (!map.has(a)) map.set(a, []);
          map.get(a)!.push(g);
        }
      }
    }
    return map;
  }

  return new Map();
}
```

**STEP**: 4 — View filter: All Guides vs Project Guides and informational strings

**DESCRIPTION**: Implement the View dropdown to switch between "All Guides" and "Project Guides". When "All Guides" is selected, show the information icon and message with a link to switch back to Project Guides. For guides incompatible with project, mark with warning symbol and show guided message when opened.

Preserve exact messages:
- Information message when All Guides selected:
  "Not all guides are applicable to [project name]. Click here to see all project guides."
- Warning when opening an incompatible guide:
  "This guide isn’t compatible with the current project and will not work as intended."

**LANGUAGE**: TypeScript / HTML

**CODE**:
```typescript
// Sample UI strings (use i18n keys in a real app)
const MESSAGES = {
  allGuidesInfo: (projectName: string) => `Not all guides are applicable to ${projectName}. Click here to see all project guides.`,
  incompatibleGuide: "This guide isn’t compatible with the current project and will not work as intended."
};

// View filtering function
function filterByView(guides: Guide[], view: "All Guides" | "Project Guides", projectName?: string) {
  if (view === "Project Guides") {
    return guides.filter(g => g.isApplicableToProject);
  }
  // All Guides: return full list; UI should display the info message:
  // showInfo(MESSAGES.allGuidesInfo(projectName))
  return guides;
}
```

HTML snippet for info display (use SAP icon class):
```html
<div class="info-row">
  <span class="SAP-icons-V5"></span> <!-- Information icon -->
  <span id="all-guides-message">Not all guides are applicable to [project name]. <a id="switch-to-project-guides" href="#">Click here to see all project guides.</a></span>
</div>
```

**STEP**: 5 — Tag filtering (Filter icon + intersection semantics)

**DESCRIPTION**: The Filter icon opens a tag multi-select. The filter must return guides that include all selected tags (logical AND). Use the SAP filter icon in the UI.

**LANGUAGE**: HTML / TypeScript

**CODE**:
```html
<!-- Filter toggle in toolbar -->
<button id="filter-btn" title="Filter">
  <span class="SAP-icons-V5"></span> <!-- SAP Filter icon -->
  Filter
</button>
```

```typescript
function filterByTags(guides: Guide[], selectedTags: string[]) {
  if (!selectedTags || selectedTags.length === 0) return guides;
  return guides.filter(g => selectedTags.every(t => g.tags.includes(t)));
}

// Example:
// selectedTags = ["annotation","lineitem"] => return guides that have both tags
```

**STEP**: 6 — Search-as-you-type (search field semantics and implementation)

**DESCRIPTION**: Implement a debounced search that filters guides by matching the search token across title, description, annotation terms, and information links. Case-insensitive substring matching is expected. The search should run on every input (debounced) and narrow results incrementally. Example search term: "UI.LineItem".

**LANGUAGE**: TypeScript / HTML

**CODE**:
```html
<!-- Search field UI -->
<input id="guide-search" type="search" placeholder="Search guides" aria-label="Search guides"/>
```

```typescript
// Fields that must be searched: title, description, categories.annotationTypes, tags, info links (if present).
function guideMatchesSearch(g: Guide, token: string): boolean {
  if (!token) return true;
  const t = token.toLowerCase();
  if (g.title.toLowerCase().includes(t)) return true;
  if (g.description.toLowerCase().includes(t)) return true;
  if (g.tags.some(tag => tag.toLowerCase().includes(t))) return true;
  if (g.categories.annotationTypes.some(at => at.toLowerCase().includes(t))) return true;
  // If guide contains infoLinks, search their text/URL (not shown in canonical example)
  return false;
}

// Debounced input handler
function debounce<T extends (...args: any[]) => void>(fn: T, ms = 200) {
  let timer: any;
  return (...args: Parameters<T>) => {
    clearTimeout(timer);
    timer = setTimeout(() => fn(...args), ms);
  };
}

const onSearchInput = debounce((value: string, guides: Guide[], currentFilters: { view: string; tags: string[] }) => {
  const filtered = guides
    .filter(g => filterByView([g], currentFilters.view)[0] !== undefined) // apply view
    .filter(g => filterByTags([g], currentFilters.tags).length > 0)       // apply tags
    .filter(g => guideMatchesSearch(g, value));                          // apply search
  // update UI with filtered results
}, 150);

// Usage: wire input element to onSearchInput
document.getElementById('guide-search')!.addEventListener('input', (e: any) => {
  const value = e.target.value;
  onSearchInput(value, allGuidesArray, { view: "Project Guides", tags: [] });
});
```

**STEP**: 7 — UI flagging for non-applicable guides and behavior on select

**DESCRIPTION**: When "All Guides" is enabled, guides that are not applicable to the current project must show a warning icon next to their title. Opening such a guide must present the incompatibility warning string.

**LANGUAGE**: HTML / TypeScript

**CODE**:
```html
<!-- Example guide entry (rendered) -->
<li class="guide-item" data-guide-id="guide-flex-change">
  <span class="guide-title">Adapt Header</span>
  <span class="warning-icon" title="Not compatible">⚠️</span> <!-- replace with SAP warning if available -->
</li>
```

```typescript
// On guide open
function onOpenGuide(guide: Guide) {
  if (!guide.isApplicableToProject) {
    // Show warning dialog using message:
    alert("This guide isn’t compatible with the current project and will not work as intended.");
    // Either disable Start Guide button or allow opening in read-only mode
    return;
  }
  // proceed to open/launch guide
}
```

**STEP**: 8 — Example: Finding guides for UI.LineItem (search workflow)

**DESCRIPTION**: Example end-to-end: typed search token "UI.LineItem" should find guides where annotationTypes or description or tags include "LineItem", demonstrating search-as-you-type narrowing.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
// Example run:
const token = "UI.LineItem";
const matches = allGuidesArray.filter(g => guideMatchesSearch(g, token));
console.log("Guides matching UI.LineItem:", matches.map(m => m.title));
```

Use the provided JSON metadata shape, grouping functions, filters, and search handler to implement a responsive list UI that respects project compatibility, grouping mode, tag intersection filtering, and search-as-you-type behavior.
--------------------------------

**TITLE**: Sections (Form / Object Page Sections for fiori-tools)

**INTRODUCTION**: This document describes the supported section types that can be created, modified, or deleted for Form and Object pages in fiori-tools projects. Use the examples below as canonical JSON/XML snippets to add or update sections in your page configuration or to implement a custom UI5 fragment for a custom section.

**TAGS**: fiori-tools, sections, form, object-page, table, identification, group, custom, UI5, manifest

STEP: Supported Sections and source files
DESCRIPTION: Reference list of available built-in section types and their documentation source files. Use these links as entry points when implementing or extending behavior.
LANGUAGE: Plain
CODE:
```
- Form Section: form-section-4102b3d.md
- Table Section: table-section-fc59378.md
- Identification Section: identification-section-b83f501.md
- Group Section: group-section-1894c47.md
- Custom section: create a custom section component/fragment and register it in the page configuration
```

STEP: Section JSON schema (canonical)
DESCRIPTION: Use this canonical JSON shape for section configuration in your page definition. All section types share these common fields; type-specific fields are shown in subsequent steps.
LANGUAGE: JSON
CODE:
```json
{
  "sections": [
    {
      "id": "sectionId",
      "type": "form|table|identification|group|custom",
      "label": "Section Label",
      "position": 1,
      "visible": true,
      "settings": { /* type-specific config */ }
    }
  ]
}
```

STEP: Create a Form Section
DESCRIPTION: Add a form-style section with fields. Use the "settings.fields" array to declare fields, bindings and field type metadata.
LANGUAGE: JSON
CODE:
```json
{
  "id": "contactForm",
  "type": "form",
  "label": "Contact Details",
  "position": 10,
  "visible": true,
  "settings": {
    "fields": [
      { "id": "firstName", "label": "First Name", "binding": "contact/FirstName", "control": "Input" },
      { "id": "lastName",  "label": "Last Name",  "binding": "contact/LastName",  "control": "Input" },
      { "id": "email",     "label": "Email",      "binding": "contact/Email",     "control": "Input" }
    ]
  }
}
```

STEP: Create a Table Section
DESCRIPTION: Define a table section with column definitions and line actions. Use "settings.table" to configure columns and the OData/entityPath binding.
LANGUAGE: JSON
CODE:
```json
{
  "id": "orderItems",
  "type": "table",
  "label": "Order Items",
  "position": 20,
  "visible": true,
  "settings": {
    "entityPath": "OrderItems",
    "columns": [
      { "id": "product", "label": "Product", "binding": "ProductName" },
      { "id": "quantity", "label": "Qty", "binding": "Quantity" },
      { "id": "price", "label": "Unit Price", "binding": "Price" }
    ],
    "lineActions": [
      { "id": "edit", "type": "Edit", "label": "Edit" },
      { "id": "delete", "type": "Delete", "label": "Delete" }
    ]
  }
}
```

STEP: Create an Identification Section
DESCRIPTION: Use identification sections to present key identity properties (read-only or minimal editable). Map keys to primary identifiers.
LANGUAGE: JSON
CODE:
```json
{
  "id": "identification",
  "type": "identification",
  "label": "Identification",
  "position": 1,
  "visible": true,
  "settings": {
    "keys": [
      { "id": "id", "label": "ID", "binding": "ID" },
      { "id": "name", "label": "Name", "binding": "Name" }
    ]
  }
}
```

STEP: Create a Group Section
DESCRIPTION: Group multiple fields or subsections under one logical header. Use "settings.groups" to provide nested layout and ordering.
LANGUAGE: JSON
CODE:
```json
{
  "id": "addressGroup",
  "type": "group",
  "label": "Address Information",
  "position": 30,
  "visible": true,
  "settings": {
    "groups": [
      {
        "id": "postal",
        "label": "Postal Address",
        "fields": [
          { "id": "street", "label": "Street", "binding": "address/Street" },
          { "id": "city",   "label": "City",   "binding": "address/City" }
        ]
      },
      {
        "id": "billing",
        "label": "Billing Address",
        "fields": [
          { "id": "bstreet", "label": "Street", "binding": "billing/Street" },
          { "id": "bcity",   "label": "City",   "binding": "billing/City" }
        ]
      }
    ]
  }
}
```

STEP: Create a Custom Section (register a fragment/component)
DESCRIPTION: Implement custom UI using a UI5 fragment or component and reference it from the section configuration. Below: manifest snippet to reference the fragment and example fragment XML.
LANGUAGE: JSON
CODE:
```json
{
  "id": "customAnalytics",
  "type": "custom",
  "label": "Analytics",
  "position": 40,
  "visible": true,
  "settings": {
    "component": "my.app.fragment.CustomSection", 
    "fragmentPath": "webapp/fragment/CustomSection.fragment.xml",
    "parameters": { "chartType": "line" }
  }
}
```

LANGUAGE: XML
CODE:
```xml
<!-- file: webapp/fragment/CustomSection.fragment.xml -->
<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core">
  <Panel headerText="Custom Analytics">
    <content>
      <Text text="This is a custom section implemented as a fragment."/>
      <!-- Add charts, custom controls, data bindings as required -->
    </content>
  </Panel>
</core:FragmentDefinition>
```

STEP: Modify and Delete Sections
DESCRIPTION: To modify a section, update its object in the page's sections array and redeploy. To delete, remove the section object from the array. Example patch operations for automated edits.
LANGUAGE: JSON
CODE:
```json
// Modify: update settings (example changes label and visibility)
{
  "op": "replace",
  "path": "/sections/0/label",
  "value": "Updated Label"
}

// Delete: remove section at index 2
{
  "op": "remove",
  "path": "/sections/2"
}
```
--------------------------------

**TITLE**: Supported Annotation Elements for Configure Page Elements (Fiori Tools)

**INTRODUCTION**: Concise reference of the annotation-based UI elements supported by the Configure Page Elements tool. Use these annotation snippets and file paths as templates to generate or modify UI elements in List Report and Object Page applications. For elements not listed here, modify the annotation file directly.

**TAGS**: fiori-tools, annotations, fiori-elements, list-report, object-page, UI, XML, manifest

**STEP**: List Report — Filter Fields (Selection Fields)

**DESCRIPTION**: Define the filter fields shown in the List Report filter bar. Place this annotation in your service annotation file (example path: webapp/annotations/annotations.xml or annotations/yourService.annotation.xml). The Configure Page Elements tool supports only these annotated fields for configuration.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- file: webapp/annotations/annotations.xml -->
<Annotations Target="YourService.EntityType">
  <Annotation Term="UI.SelectionFields">
    <Collection>
      <PropertyPath>FilterProperty1</PropertyPath>
      <PropertyPath>FilterProperty2</PropertyPath>
    </Collection>
  </Annotation>
</Annotations>
```

**STEP**: List Report — Table (LineItem)

**DESCRIPTION**: Define the table columns and order using the UI.LineItem annotation. This drives the columns in the List Report table. Place in the same annotations file as above.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- file: webapp/annotations/annotations.xml -->
<Annotations Target="YourService.EntityType">
  <Annotation Term="UI.LineItem">
    <Collection>
      <Record Type="UI.DataField">
        <PropertyValue Property="Value"><Path>Property1</Path></PropertyValue>
        <PropertyValue Property="Label" String="Property 1"/>
      </Record>
      <Record Type="UI.DataField">
        <PropertyValue Property="Value"><Path>Property2</Path></PropertyValue>
        <PropertyValue Property="Label" String="Property 2"/>
      </Record>
    </Collection>
  </Annotation>
</Annotations>
```

**STEP**: Object Page — Header (HeaderInfo)

**DESCRIPTION**: Define the Object Page header information (title, description, type). Place in your annotations file. Configure Page Elements supports editing this annotated header.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- file: webapp/annotations/annotations.xml -->
<Annotations Target="YourService.EntityType">
  <Annotation Term="UI.HeaderInfo">
    <Record Type="UI.HeaderInfoType">
      <PropertyValue Property="TypeName" String="Entity"/>
      <PropertyValue Property="Title">
        <Record Type="UI.DataField">
          <PropertyValue Property="Value"><Path>TitleProperty</Path></PropertyValue>
        </Record>
      </PropertyValue>
      <PropertyValue Property="Description">
        <Record Type="UI.DataField">
          <PropertyValue Property="Value"><Path>DescriptionProperty</Path></PropertyValue>
        </Record>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

**STEP**: Object Page — Form Section (FieldGroup / Facets)

**DESCRIPTION**: Define form-like sections on the Object Page using FieldGroup annotations and reference them via Facets (CollectionFacet or ReferenceFacet). Use AnnotationPath references to connect FieldGroups to the Object Page facets.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- file: webapp/annotations/annotations.xml -->
<!-- Define a FieldGroup (qualifier FormGroup) -->
<Annotations Target="YourService.EntityType">
  <Annotation Term="UI.FieldGroup" Qualifier="FormGroup">
    <Record Type="UI.FieldGroupType">
      <PropertyValue Property="Label" String="Main Information"/>
      <PropertyValue Property="Fields">
        <Collection>
          <PropertyPath>PropertyA</PropertyPath>
          <PropertyPath>PropertyB</PropertyPath>
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>

  <!-- Reference the FieldGroup from Facets so it appears as a Form Section on the Object Page -->
  <Annotation Term="UI.Facets">
    <Collection>
      <Record Type="UI.ReferenceFacet">
        <PropertyValue Property="Label" String="Overview"/>
        <PropertyValue Property="Target">
          <Record Type="UI.CollectionFacet">
            <PropertyValue Property="ID" String="FormSectionID"/>
            <PropertyValue Property="Label" String="Form Section"/>
            <PropertyValue Property="AnnotationPath" String="@UI.FieldGroup#FormGroup"/>
          </Record>
        </PropertyValue>
      </Record>
    </Collection>
  </Annotation>
</Annotations>
```

**STEP**: Object Page — Table Section (CollectionFacet with LineItem)

**DESCRIPTION**: Add an Object Page facet that contains a table (LineItem). The CollectionFacet targets a LineItem annotation for the related collection/navigation property.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- file: webapp/annotations/annotations.xml -->
<Annotations Target="YourService.EntityType">
  <Annotation Term="UI.Facets">
    <Collection>
      <Record Type="UI.CollectionFacet">
        <PropertyValue Property="ID" String="TableSectionID"/>
        <PropertyValue Property="Label" String="Related Items"/>
        <PropertyValue Property="Target">
          <Record Type="UI.Collection">
            <!-- Point to the collection/navigation property that has a LineItem annotation -->
            <PropertyValue Property="AnnotationPath" String="RelatedEntitySet/@UI.LineItem"/>
          </Record>
        </PropertyValue>
      </Record>
    </Collection>
  </Annotation>
</Annotations>
```

**STEP**: Object Page — Identification Section (Identification)

**DESCRIPTION**: Define key identification fields for the Object Page summary area using the UI.Identification annotation.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- file: webapp/annotations/annotations.xml -->
<Annotations Target="YourService.EntityType">
  <Annotation Term="UI.Identification">
    <Collection>
      <Record Type="UI.DataField">
        <PropertyValue Property="Value"><Path>IdentifierProperty</Path></PropertyValue>
        <PropertyValue Property="Label" String="Identifier"/>
      </Record>
      <Record Type="UI.DataField">
        <PropertyValue Property="Value"><Path>SecondaryProperty</Path></PropertyValue>
        <PropertyValue Property="Label" String="Secondary"/>
      </Record>
    </Collection>
  </Annotation>
</Annotations>
```

**STEP**: Object Page — Group Section (FieldGroup within Facet)

**DESCRIPTION**: Use FieldGroup annotations to create grouped UI fields. Reference the FieldGroup in the Facets collection to render it as a group section on the Object Page.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- file: webapp/annotations/annotations.xml -->
<Annotations Target="YourService.EntityType">
  <Annotation Term="UI.FieldGroup" Qualifier="Group1">
    <Record Type="UI.FieldGroupType">
      <PropertyValue Property="Label" String="Address Group"/>
      <PropertyValue Property="Fields">
        <Collection>
          <PropertyPath>Street</PropertyPath>
          <PropertyPath>City</PropertyPath>
          <PropertyPath>PostalCode</PropertyPath>
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>

  <Annotation Term="UI.Facets">
    <Collection>
      <Record Type="UI.ReferenceFacet">
        <PropertyValue Property="Label" String="Addresses"/>
        <PropertyValue Property="Target">
          <Record Type="UI.CollectionFacet">
            <PropertyValue Property="ID" String="Group1ID"/>
            <PropertyValue Property="Label" String="Address Details"/>
            <PropertyValue Property="AnnotationPath" String="@UI.FieldGroup#Group1"/>
          </Record>
        </PropertyValue>
      </Record>
    </Collection>
  </Annotation>
</Annotations>
```

**STEP**: Adding a Custom Section (Extension / Fragment)

**DESCRIPTION**: For custom UI sections not supported by Configure Page Elements, add extension-based elements (XML fragments or views) via the application's manifest.json. Example shows adding a view/fragment extension for an Object Page. See maintaining-extension-based-elements-02172d2.md for details.

**LANGUAGE**: JSON

**CODE**:
```json
// file: webapp/manifest.json (partial)
{
  "sap.ui5": {
    "extends": {
      "extensions": {
        "sap.ui.viewExtensions": {
          "sap.suite.ui.generic.template.ObjectPage.view.Details": {
            "ExtensionSection": {
              "className": "sap.ui.core.Fragment",
              "fragmentName": "my.app.view.CustomSection",
              "type": "XML"
            }
          }
        }
      }
    }
  }
}
```

**STEP**: Object Page — Footer (Actions / Footer)

**DESCRIPTION**: Define footer actions that appear at the bottom of the Object Page. Use the UI.Footer annotation (or UI.HeaderFooter depending on version) to declare actions.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- file: webapp/annotations/annotations.xml -->
<Annotations Target="YourService.EntityType">
  <Annotation Term="UI.Footer">
    <Record Type="UI.FooterType">
      <PropertyValue Property="Actions">
        <Collection>
          <Record Type="UI.DataFieldForAction">
            <PropertyValue Property="Action" String="ConfirmAction"/>
            <PropertyValue Property="Label" String="Confirm"/>
          </Record>
          <Record Type="UI.DataFieldForAction">
            <PropertyValue Property="Action" String="CancelAction"/>
            <PropertyValue Property="Label" String="Cancel"/>
          </Record>
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

**STEP**: Related Information — File References

**DESCRIPTION**: Related documentation files and where to make direct edits if an element is not supported by Configure Page Elements.

**LANGUAGE**: TEXT

**CODE**:
```
Related docs:
- Configure Page Elements UI tool: configure-page-elements-047507c.md
- Filter Fields: filter-fields-0b84286.md
- Table: table-aaff7b1.md
- Header: header-a05d7fc.md#loioa05d7fc1bbbf42a0ade9fb50f6b58b56
- Form Section: form-section-4102b3d.md
- Table Section: table-section-fc59378.md
- Identification Section: identification-section-b83f501.md
- Group Section: group-section-1894c47.md
- Adding Custom Section (extension-based elements): maintaining-extension-based-elements-02172d2.md#loiode514dafa2364693baeabbb40d564006
- Footer: footer-1b391bd.md
- Maintaining Annotations with Language Server: maintaining-annotations-with-language-server-6fc93f8.md
```
--------------------------------

**TITLE**: Configure List Report Table Sorting and Default Filtering (UI.PresentationVariant / UI.SelectionVariant)

**INTRODUCTION**: Action-oriented reference for configuring List Report table sorting and default filters in Fiori Tools Page Editor. Includes steps to create/use/detach PresentationVariant (for Sort Order) and SelectionVariant (for default filters), sample annotation XML snippets to generate or edit annotations, and notes about Analytical Chart and filter restrictions. Preserve file paths for assets and images.

**TAGS**: fiori-tools, list-report, table, presentation-variant, selection-variant, annotation, UI.PresentationVariant, UI.SelectionVariant, cleanup

STEP: 1 — Include UI icons stylesheet (UI5 apps)
DESCRIPTION: Add the SAP icon font stylesheet referenced by the Page Editor or annotation-based UI pages if required by your project. Place this in your HTML template or index file.
LANGUAGE: HTML
CODE:
```HTML
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```

STEP: 2 — Configure Presentation Variant (table sorting)
DESCRIPTION: Create or attach a UI.PresentationVariant (or UI.SelectionPresentationVariant) annotation to the table to define SortOrder. In Page Editor: set the table node property "Presentation Variant" to an existing annotation or choose New to generate one. Add one or more Sort Properties (Property + Direction) and reorder them to control multi-level sorting. If your List Report uses an Analytical Chart, you can reuse the chart's Presentation Variant; in that case sorting applies to both chart and table. To detach, set the Presentation Variant property to None (note: this deletes the UI.SelectionPresentationVariant reference in the manifest).
LANGUAGE: XML
CODE:
```XML
<!-- Example PresentationVariant annotation (EDMX/Annotations XML).
     Qualifier "TablePV" is an example qualifier referenced by the Page Editor. -->
<Annotations Target="YourService.YourEntityType">
  <Annotation Term="UI.PresentationVariant" Qualifier="TablePV">
    <Record Type="UI.PresentationVariantType">
      <!-- SortOrder: list of SortProperty records, applied top-to-bottom -->
      <PropertyValue Property="SortOrder">
        <Collection>
          <Record Type="UI.SortProperty">
            <PropertyValue Property="Property" String="SalesOrder" />
            <PropertyValue Property="Descending" Bool="false" />
          </Record>
          <Record Type="UI.SortProperty">
            <PropertyValue Property="Property" String="CreatedAt" />
            <PropertyValue Property="Descending" Bool="true" />
          </Record>
        </Collection>
      </PropertyValue>
      <!-- Optional: reference to SelectionVariant if using UI.SelectionPresentationVariant -->
      <!-- <PropertyValue Property="SelectionVariant" String="TableSV" /> -->
    </Record>
  </Annotation>
</Annotations>
```

STEP: 3 — Configure Selection Variant: Annotation (attach or generate)
DESCRIPTION: Create or attach a UI.SelectionVariant (or UI.SelectionPresentationVariant) annotation to define default filters for the table. In Page Editor: set "Selection Variant: Annotation" to an existing annotation or choose New to generate one. If your List Report is configured with an Analytical Chart, selection variant cannot be maintained in the Page Editor. You can detach the selection variant by setting the property to None.
LANGUAGE: XML
CODE:
```XML
<!-- Example SelectionVariant annotation (EDMX/Annotations XML).
     Qualifier "TableSV" is an example qualifier referenced by the Page Editor. -->
<Annotations Target="YourService.YourEntityType">
  <Annotation Term="UI.SelectionVariant" Qualifier="TableSV">
    <Record>
      <PropertyValue Property="SelectOptions">
        <Collection>
          <!-- SelectOption records define default filters -->
          <Record Type="Common.SelectOption">
            <PropertyValue Property="PropertyName" String="Status" />
            <!-- Sign: I (include) or E (exclude); Option: EQ, BT, GE, LE, etc. -->
            <PropertyValue Property="Sign" String="I" />
            <PropertyValue Property="Option" String="EQ" />
            <PropertyValue Property="Low" String="Open" />
          </Record>
          <Record Type="Common.SelectOption">
            <PropertyValue Property="PropertyName" String="Priority" />
            <PropertyValue Property="Sign" String="I" />
            <PropertyValue Property="Option" String="BT" />
            <PropertyValue Property="Low" String="1" />
            <PropertyValue Property="High" String="3" />
          </Record>
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

STEP: 4 — Add Default Filter rows in Page Editor (UI action)
DESCRIPTION: In Page Editor, when a Selection Variant is set, click Add Default Filter to add a new SelectOptions row. Choose an entity property (properties annotated with UI.Hidden, UI.HiddenFilter, or listed as NonFilterableProperties under Capabilities.FilterRestrictions are excluded). For the added row, set Sign/Option/Low/High as needed. You may add multiple filters for the same property. Delete a filter by clicking the Delete icon for the row.
LANGUAGE: Notes
CODE:
```text
- Page Editor: Table node -> Selection Variant: Default Filter -> Add Default Filter
- Choose property (excluded: UI.Hidden, UI.HiddenFilter, NonFilterableProperties)
- Set Sign (I/E), Option (EQ, BT, etc.), Low, High
- Delete via row Delete (wastebasket) icon
```

STEP: 5 — Non-filterable properties (annotation example)
DESCRIPTION: If a property must not be selectable as a filter, annotate it under Capabilities.FilterRestrictions -> NonFilterableProperties. Page Editor will not offer those properties when adding default filters.
LANGUAGE: XML
CODE:
```XML
<!-- Example FilterRestrictions to mark properties as non-filterable -->
<Annotations Target="YourService.YourEntityType">
  <Annotation Term="Capabilities.FilterRestrictions">
    <Record>
      <PropertyValue Property="NonFilterableProperties">
        <Collection>
          <String>InternalId</String>
          <String>SecretFlag</String>
        </Collection>
      </PropertyValue>
    </Record>
  </Annotation>
</Annotations>
```

STEP: 6 — Detach and cleanup unreferenced annotations
DESCRIPTION: To detach PresentationVariant or SelectionVariant from the table, set the corresponding Page Editor property to None. This removes the reference from the manifest and leaves annotation records possibly unreferenced in your annotation file. Run the annotation cleanup procedure (or manually remove unreferenced Annotation elements) to delete UI.SelectionPresentationVariant / UI.SelectionVariant annotations that are no longer referenced. This keeps the annotation file clean. Example manual deletion: remove the <Annotation Term="UI.SelectionVariant" Qualifier="..."> element from the annotation file.
LANGUAGE: XML
CODE:
```XML
<!-- Example: delete the unreferenced annotation block from the annotation file -->
<!-- BEFORE: -->
<Annotation Term="UI.SelectionVariant" Qualifier="TableSV">
  <!-- ... -->
</Annotation>

<!-- AFTER: (deleted the above Annotation block to clean up file) -->
```

STEP: 7 — Assets and images referenced by the docs
DESCRIPTION: Use these image paths and stylesheet exact paths when reproducing UI screenshots or packaging assets for the Page Editor docs.
LANGUAGE: Notes
CODE:
```text
Stylesheet:
- ../css/sap-icons.css

Screenshot assets:
- images/Fiori_Tools_Presentation_Variant_Table_d2a0977.png
- images/Default_Filter_Table_4308a97.png
```
--------------------------------

**TITLE**: Table Actions — UI Annotation Examples and Page Editor Mapping

**INTRODUCTION**: Practical, code-focused examples showing how to add and configure table actions (inline columns and toolbar actions) and intent-based (cross-application) navigation actions for Fiori elements. Includes XML annotation and CAP CDS examples, manifest.json inbound configuration for the target app, and properties mapping used by the Page Editor (Inline, Label, Importance, Hidden, Criticality, SemanticObject, Action, Mapping, RequiresContext).

**TAGS**: fiori-tools, annotations, UI.DataFieldForAction, UI.DataFieldForIntentBasedNavigation, CDS, XML, manifest.json, semantic-object, inline-action, toolbar-action

**STEP**: 1 — Inline table action (UI.DataFieldForAction) in annotation XML

**DESCRIPTION**: Add an inline action rendered as a table column. Key annotation properties:
- Action: bound action name in the OData service
- Inline: must be true to render as a column
- Label: persisted in UI.DataFieldForAction (falls back to Common.Label/@title if present)
- RequiresContext: true for row-level actions
- Importance / Hidden / Criticality: set display importance, visibility, semantic highlighting

Place this snippet in your annotations XML file (e.g., annotations.xml) targeted at the entity with UI.LineItem.

**LANGUAGE**: XML

**CODE**:
```xml
<?xml version="1.0" encoding="utf-8"?>
<Annotations Target="MyService.MyEntity">
  <!-- LineItem defines table columns and inline actions -->
  <Annotation Term="UI.LineItem">
    <Collection>
      <!-- Inline action rendered as a column -->
      <Record Type="UI.DataFieldForAction">
        <PropertyValue Property="Action" String="Approve"/>          <!-- bound action name -->
        <PropertyValue Property="Inline" Bool="true"/>              <!-- renders as column -->
        <PropertyValue Property="Label" String="Approve"/>          <!-- persisted label -->
        <PropertyValue Property="RequiresContext" Bool="true"/>    <!-- row context required -->
        <PropertyValue Property="Importance" EnumMember="UI.Importance/High"/>
        <PropertyValue Property="Hidden" Bool="false"/>
        <PropertyValue Property="Criticality" EnumMember="UI.Criticality/Positive"/>
      </Record>
    </Collection>
  </Annotation>
</Annotations>
```

**STEP**: 2 — Toolbar table action (UI.DataFieldForAction) in annotation XML

**DESCRIPTION**: Add an action in the toolbar (not inline). Inline must be omitted or set to false. Toolbar actions may not support semantic criticality highlighting.

**LANGUAGE**: XML

**CODE**:
```xml
<?xml version="1.0" encoding="utf-8"?>
<Annotations Target="MyService.MyEntity">
  <Annotation Term="UI.LineItem">
    <Collection>
      <!-- Toolbar action (Inline is false/absent) -->
      <Record Type="UI.DataFieldForAction">
        <PropertyValue Property="Action" String="DeleteSelected"/>
        <PropertyValue Property="Label" String="Delete"/>
        <PropertyValue Property="RequiresContext" Bool="false"/>  <!-- can be executed without row selection -->
        <PropertyValue Property="Importance" EnumMember="UI.Importance/Medium"/>
        <PropertyValue Property="Hidden" Bool="false"/>
      </Record>
    </Collection>
  </Annotation>
</Annotations>
```

**STEP**: 3 — Intent-based navigation action (UI.DataFieldForIntentBasedNavigation) in annotation XML (inline column)

**DESCRIPTION**: Add a cross-application navigation action. Set SemanticObject and Action to match the target application’s launchpad inbound. Use Inline true to render as column, or Inline false/absent for toolbar. You can add a mapping to map local properties to target parameters and RequiresContext to require a selected row for toolbar actions.

**LANGUAGE**: XML

**CODE**:
```xml
<?xml version="1.0" encoding="utf-8"?>
<Annotations Target="MyService.MyEntity">
  <Annotation Term="UI.LineItem">
    <Collection>
      <!-- Intent-based inline column navigation -->
      <Record Type="UI.DataFieldForIntentBasedNavigation">
        <PropertyValue Property="SemanticObject" String="Customer"/>
        <PropertyValue Property="Action" String="display"/>
        <PropertyValue Property="Inline" Bool="true"/>              <!-- column -->
        <PropertyValue Property="Label" String="Display Customer"/>
        <PropertyValue Property="RequiresContext" Bool="true"/>    <!-- row context required -->
        <!-- Example semantic mapping: local property -> target parameter -->
        <PropertyValue Property="SemanticObjectMapping">
          <Collection>
            <Record>
              <PropertyValue Property="LocalProperty" String="CustID"/>
              <PropertyValue Property="TargetProperty" String="CustomerID"/>
            </Record>
          </Collection>
        </PropertyValue>
      </Record>
    </Collection>
  </Annotation>
</Annotations>
```

**STEP**: 4 — CAP CDS example: annotate entity with UI.DataFieldForAction and DataFieldForIntentBasedNavigation

**DESCRIPTION**: CAP CDS annotate syntax for the same actions. Place these annotations in your .cds file or in a separate annotations file in the service module (e.g., annotations.cds). Use @title or @Common.Label on the action to provide a label fallback.

**LANGUAGE**: CDS

**CODE**:
```cds
namespace MyService;

entity SalesOrder {
  key ID : UUID;
  CustID : String;
}

action approve(orderId : UUID) returns Boolean;
action DeleteSelected() returns Boolean;

annotate SalesOrder with
  @UI.LineItem: [
    { Value: ID },
    { "@UI.DataFieldForAction": { Action: 'approve', Inline: true, Label: 'Approve', RequiresContext: true, Importance: 'High', Criticality: 'Positive' } },
    { "@UI.DataFieldForAction": { Action: 'DeleteSelected', Label: 'Delete', RequiresContext: false, Importance: 'Medium' } },
    { "@UI.DataFieldForIntentBasedNavigation": { SemanticObject: 'Customer', Action: 'display', Inline: true, Label: 'Display Customer',
        RequiresContext: true,
        SemanticObjectMapping: [ { LocalProperty: 'CustID', TargetProperty: 'CustomerID' } ] } }
  ];
```

**STEP**: 5 — Target application manifest.json: declare inbound for semantic object/action

**DESCRIPTION**: To enable cross-application navigation from a DataFieldForIntentBasedNavigation, the target application must declare a matching inbound in its manifest.json (this is used by SAP Fiori launchpad). Include the semanticObject and action names that callers will use.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.app": {
    "id": "com.example.customer",
    "crossNavigation": {
      "inbounds": {
        "displayCustomer": {
          "semanticObject": "Customer",
          "action": "display",
          "signature": {
            "parameters": {
              "CustomerID": {}
            }
          }
        }
      }
    }
  }
}
```

**STEP**: 6 — Label provenance and deletion rules (annotations / CAP)

**DESCRIPTION**: How labels are derived and persisted:
- If Common.Label or @title exists on the action, it is used as the label.
- If missing, Page Editor generates Label and stores it in UI.DataFieldForAction.Label.
- Deleting a UI.DataFieldForAction record in annotations or via Page Editor removes only the UI.DataFieldForAction record; original Common.Label or @title annotations on the action are not deleted.

**LANGUAGE**: XML / CDS

**CODE**:
```xml
<!-- Example Common.Label on an action (OData annotation) -->
<Annotations Target="MyService.Approve">
  <Annotation Term="Common.Label">
    <String>Approve Order</String>
  </Annotation>
</Annotations>
```

```cds
// CDS: provide @title on the action as default UI label
action approve(orderId : UUID) @title : 'Approve Order' returns Boolean;
```

**STEP**: 7 — Page Editor mappings and behavior summary (properties and effects)

**DESCRIPTION**: Quick mapping between Page Editor properties and the underlying annotation fields (use these when scripting or generating annotations):
- Label -> UI.DataFieldForAction.Label or Common.Label / @title (fallback)
- Inline -> UI.DataFieldForAction.Inline Bool (true = column)
- Importance -> UI.DataFieldForAction.Importance (EnumMember UI.Importance/High|Medium|Low)
- Hidden -> UI.DataFieldForAction.Hidden Bool or UI.Hidden annotation
- Criticality -> UI.DataFieldForAction.Criticality (EnumMember UI.Criticality/Positive|Negative|None)
- SemanticObject Name -> UI.DataFieldForIntentBasedNavigation.SemanticObject (string)
- SemanticObject Action -> UI.DataFieldForIntentBasedNavigation.Action (string)
- Mapping -> UI.DataFieldForIntentBasedNavigation.SemanticObjectMapping collection (LocalProperty -> TargetProperty)
- RequiresContext -> UI.DataFieldForIntentBasedNavigation.RequiresContext Bool (toolbar only; columns always have context)

**LANGUAGE**: JSON

**CODE**:
```json
{
  "mapping": {
    "Label": "UI.DataFieldForAction.Label",
    "Inline": "UI.DataFieldForAction.Inline",
    "Importance": "UI.DataFieldForAction.Importance",
    "Hidden": "UI.DataFieldForAction.Hidden",
    "Criticality": "UI.DataFieldForAction.Criticality",
    "SemanticObject": "UI.DataFieldForIntentBasedNavigation.SemanticObject",
    "Action": "UI.DataFieldForIntentBasedNavigation.Action",
    "Mapping": "UI.DataFieldForIntentBasedNavigation.SemanticObjectMapping",
    "RequiresContext": "UI.DataFieldForIntentBasedNavigation.RequiresContext"
  }
}
```

**STEP**: 8 — Resources and file paths

**DESCRIPTION**: Common file locations referenced:
- Annotations XML: annotations.xml (put in app/webapp/annotations or annotations folder used by UI5)
- CAP CDS annotations: annotations.cds in srv or db modules
- Target app manifest: webapp/manifest.json
- Icon/CSS used in Page Editor example: ../css/sap-icons.css
- Example image reference used in Page Editor docs: images/Table_Toolbar_Actions_10ff824.png

**LANGUAGE**: Plain text / Paths

**CODE**:
```text
File paths:
- annotations.xml                 (UI annotation XML for OData)
- annotations.cds                 (CAP CDS annotations)
- srv/<service>.cds               (service and action definitions)
- webapp/manifest.json            (target application manifest)
- ../css/sap-icons.css            (icon stylesheet referenced by docs)
- images/Table_Toolbar_Actions_10ff824.png
```
--------------------------------

**TITLE**: Table Columns — Fiori Tools (Object Page)

**INTRODUCTION**: Guide for adding and configuring table columns in an Object Page using Fiori Tools. Covers how the Page Editor derives column labels from annotations, how Importance is stored and removed, and how to configure a column hiding condition. Includes concrete CDS and annotation XML examples you can copy into CAP/CDS or local annotation files.

**TAGS**: fiori-tools, object-page, table, columns, annotations, UI.DataField, Common.Label, @title, UI.Importance, Hidden, CAP

**STEP**: 1 — Include CSS (project asset)
**DESCRIPTION**: Ensure the SAP icons stylesheet referenced by the documentation example is present in the project assets. Preserve path details if you mirror examples or static site setup.
**LANGUAGE**: HTML
**CODE**:
```html
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```

**STEP**: 2 — Add a table column (annotation record generated by Page Editor)
**DESCRIPTION**: When you add a column, the Page Editor generates a UI.DataField record in the local annotation file. Minimal generated record contains the Value property pointing to the entity property used by the column. If a label is not explicitly required (see STEP 3), the Label property is omitted.
**LANGUAGE**: XML
**CODE**:
```xml
<!-- Minimal UI.DataField generated for a column bound to property 'title' -->
<Record Type="UI.DataField">
  <PropertyValue Property="Value">
    <PropertyPath>title</PropertyPath>
  </PropertyValue>
  <!-- Label may be omitted if derived from Common.Label or @title -->
</Record>
```

**STEP**: 3 — Label resolution and editing behavior
**DESCRIPTION**: The Page Editor resolves the column title in this order:
- If the entity property has Common.Label or (for CAP) @title, the Page Editor uses that value and the generated UI.DataField record does NOT include a Label property.
- If you edit the column Label in the Property Panel, Page Editor does NOT change Common.Label or @title; instead it adds a local Label property to the UI.DataField record so the change is specific to this column.
- If no Common.Label/@title exists, the UI.DataField record is added with an auto-generated Label which you can edit.

The examples below show (A) a CAP CDS snippet using @title, (B) the resulting UI.DataField WITHOUT Label, and (C) the UI.DataField AFTER you override the label in the Property Panel.

**LANGUAGE**: CDS
**CODE**:
```cds
namespace my.bookshop;

entity Book {
  key ID    : UUID;
  title     : String @title;        // CAP @title — used as column label by Page Editor
  author    : String;               // no Common.Label defined
}
```

**LANGUAGE**: XML
**CODE**:
```xml
<!-- A) Generated UI.DataField when property 'title' has @title / Common.Label -->
<Record Type="UI.DataField">
  <PropertyValue Property="Value">
    <PropertyPath>title</PropertyPath>
  </PropertyValue>
  <!-- No Label property here because label comes from @title -->
</Record>

<!-- B) If you override the column label in the Property Panel, Page Editor writes a local Label -->
<Record Type="UI.DataField">
  <PropertyValue Property="Value">
    <PropertyPath>title</PropertyPath>
  </PropertyValue>
  <PropertyValue Property="Label" String="Custom Column Title"/>
</Record>
```

**STEP**: 4 — Deleting a column does NOT remove shared annotations
**DESCRIPTION**: When a column (UI.DataField record) is deleted by the Page Editor, only the local record is removed. Common.Label or @title annotations on the entity property are NOT removed from the annotation source, preventing unintended changes elsewhere in the app.

**LANGUAGE**: XML
**CODE**:
```xml
<!-- Deleting the local UI.DataField record removes this record only.
     Common.Label/@title present on the entity remain unchanged. -->
<!-- BEFORE (local record present) -->
<Record Type="UI.DataField">
  <PropertyValue Property="Value">
    <PropertyPath>author</PropertyPath>
  </PropertyValue>
  <PropertyValue Property="Label" String="Author Name"/>
</Record>

<!-- AFTER deletion - this local record is removed; Common.Label stays on the property source -->
```

**STEP**: 5 — Importance: default, base-layer display, and removal
**DESCRIPTION**: When a column is added, Importance defaults to None (no UI.Importance annotation locally). If you set an importance (Low/Medium/High), Page Editor writes UI.Importance into the local UI.DataField record. If the importance value exists only in a lower/base layer, the editor shows that value with suffix "(base layer)". If you change the importance back to None in the Property Panel, the UI.Importance annotation is deleted from the local annotation file (i.e., the local PropertyValue for Importance is removed).

**LANGUAGE**: XML
**CODE**:
```xml
<!-- Example: UI.DataField with explicit Importance -->
<Record Type="UI.DataField">
  <PropertyValue Property="Value">
    <PropertyPath>price</PropertyPath>
  </PropertyValue>
  <PropertyValue Property="Importance" EnumMember="UI.Importance/High"/>
</Record>

<!-- If user sets Importance back to None, Page Editor removes the Importance property:
<Record Type="UI.DataField">
  <PropertyValue Property="Value">
    <PropertyPath>price</PropertyPath>
  </PropertyValue>
  <!-- Importance property removed from local annotation file -->
</Record>
-->
```

**STEP**: 6 — Hidden: enable and bind a boolean property as hiding condition
**DESCRIPTION**: The Hidden toggle in the Property Panel enables a "Hide by Property" selector. Select a boolean property from the entity to be used as the hiding condition. Page Editor writes the hiding condition as a PropertyPath on the local UI.DataField record so the column is hidden in the runtime UI when the property evaluates to true.

**LANGUAGE**: XML
**CODE**:
```xml
<!-- Example: column hidden based on boolean property 'isPriceHidden' -->
<Record Type="UI.DataField">
  <PropertyValue Property="Value">
    <PropertyPath>price</PropertyPath>
  </PropertyValue>
  <!-- Hide by Property: reference a boolean property on the entity -->
  <PropertyValue Property="Hidden">
    <PropertyPath>isPriceHidden</PropertyPath>
  </PropertyValue>
</Record>
```

**STEP**: 7 — Supported column types (reference to internal docs)
**DESCRIPTION**: The Page Editor supports multiple column types. Use the respective editor panels for type-specific settings (label, importance, etc.). Links are given relative to the documentation site.
**LANGUAGE**: Text
**CODE**:
```text
Supported column types:
- Basic Columns (basic-columns-5f8c75b.md)
- Rating Column (rating-column-b2ba7b4.md)
- Progress Column (progress-column-0039256.md)
- Chart Column (chart-column-b78b302.md)
- Table Actions (table-actions-da1931b.md)
- Contact Column (contact-column-dc5931d.md)
- External Navigation Column (table-actions-da1931b.md)
```
--------------------------------

**TITLE**: Table Section — Add, Move, Delete, and Maintain UI.Facets / UI.LineItem Annotations

**INTRODUCTION**: This document provides concise, code-focused steps and examples for programmatically adding, moving, deleting, and maintaining Table Sections in SAP Fiori applications by editing OData annotation files (XML) used by UI.Facets and UI.LineItem. It also includes a utility script to remove orphaned UI.LineItem annotations. Use these snippets when implementing tooling or automation that updates annotation files (e.g., within fiori-tools or CAP projects).

**TAGS**: fiori-tools, annotations, UI.Facets, UI.LineItem, OData, XML, CAP, CDS, cleanup

STEP: Add Table Section

DESCRIPTION: Add an empty UI.LineItem annotation (table descriptor) and a UI.Facets entry that references it via AnnotationPath. Place these entries in your annotation file (typical path: app/annotations/annotations.xml or annotations/<entity>.xml). The UI.LineItem is created as empty collection; the ReferenceFacet in UI.Facets points to it.

LANGUAGE: XML

CODE:
```XML
<!-- File: app/annotations/annotations.xml -->
<Annotations Target="com.example.MyService.MyEntity">
  <!-- Add an empty UI.LineItem annotation (table) -->
  <Annotation Term="UI.LineItem">
    <Collection>
      <!-- empty collection - columns will be added later -->
    </Collection>
  </Annotation>

  <!-- Add a reference facet to UI.Facets referencing the created UI.LineItem -->
  <Annotation Term="UI.Facets">
    <Collection>
      <Record Type="UI.ReferenceFacet">
        <PropertyValue Property="Label" String="My Table Section"/>
        <PropertyValue Property="Target">
          <!-- AnnotationPath must point to the entity's UI.LineItem -->
          <AnnotationPath>com.example.MyService.MyEntity/UI.LineItem</AnnotationPath>
        </PropertyValue>
      </Record>
      <!-- other facets... -->
    </Collection>
  </Annotation>
</Annotations>
```

STEP: Move Table Section (Reorder Facets)

DESCRIPTION: Reorder sections by changing the order of records in the UI.Facets Collection. When the UI.Facets records sequence changes, the rendered sections follow that sequence. For mass move, select multiple (UI) entries in your tooling and reorder them together; programmatic reordering is done by reindexing records.

LANGUAGE: XML

CODE:
```XML
<!-- Before: two facets -->
<Annotation Term="UI.Facets">
  <Collection>
    <Record Type="UI.ReferenceFacet">
      <PropertyValue Property="Label" String="First Section"/>
      <PropertyValue Property="Target"><AnnotationPath>.../FirstEntity/UI.LineItem</AnnotationPath></PropertyValue>
    </Record>
    <Record Type="UI.ReferenceFacet">
      <PropertyValue Property="Label" String="Second Section"/>
      <PropertyValue Property="Target"><AnnotationPath>.../SecondEntity/UI.LineItem</AnnotationPath></PropertyValue>
    </Record>
  </Collection>
</Annotation>

<!-- After: moved Second Section above First Section by reordering records -->
<Annotation Term="UI.Facets">
  <Collection>
    <Record Type="UI.ReferenceFacet">
      <PropertyValue Property="Label" String="Second Section"/>
      <PropertyValue Property="Target"><AnnotationPath>.../SecondEntity/UI.LineItem</AnnotationPath></PropertyValue>
    </Record>
    <Record Type="UI.ReferenceFacet">
      <PropertyValue Property="Label" String="First Section"/>
      <PropertyValue Property="Target"><AnnotationPath>.../FirstEntity/UI.LineItem</AnnotationPath></PropertyValue>
    </Record>
  </Collection>
</Annotation>
```

STEP: Delete Table Section (Remove Facet Reference)

DESCRIPTION: Delete a section by removing its ReferenceFacet record from UI.Facets. This deletes the facet reference from the annotation. Note: the referenced UI.LineItem annotation (table descriptor) becomes orphaned and must be cleaned up separately.

LANGUAGE: XML

CODE:
```XML
<!-- To delete "My Table Section", remove its Record from UI.Facets -->
<Annotation Term="UI.Facets">
  <Collection>
    <!-- Remove the Record that has Label "My Table Section" and AnnotationPath pointing to the UI.LineItem -->
    <!-- Remaining facets continue here -->
  </Collection>
</Annotation>
```

STEP: Maintain Table Section Label

DESCRIPTION: Change the displayed section label by editing the Label property of the ReferenceFacet record inside UI.Facets. This updates the label shown in both editor and application preview.

LANGUAGE: XML

CODE:
```XML
<!-- Update Label value for a given ReferenceFacet -->
<Record Type="UI.ReferenceFacet">
  <PropertyValue Property="Label" String="Updated Section Title"/>
  <PropertyValue Property="Target">
    <AnnotationPath>com.example.MyService.MyEntity/UI.LineItem</AnnotationPath>
  </PropertyValue>
</Record>
```

STEP: Note on CAP CDS Overrides and Using Statement

DESCRIPTION: When annotations are maintained in CAP CDS files, the fiori-tools/annotation library may generate or modify CDS annotation files. If a UI annotation namespace needs to be referenced in the overridden CDS file, a using statement is added automatically by the tooling if it is not already present. Keep in mind: file override behavior will override annotations defined in underlying layers.

LANGUAGE: Plain text

CODE:
```text
# Behavior (tooling):
- If UI.Facets does not exist for the entity, the tool creates it.
- If UI.Facets exists in an underlying layer, the tool creates an override (the underlying annotation is overridden).
- For CAP CDS, the tool adds a "using" statement to the overridden file if not already present (so that UI annotation terms are available in that CDS file).
```

STEP: Cleanup Orphaned UI.LineItem Annotations (Node.js script)

DESCRIPTION: After deleting a ReferenceFacet, UI.LineItem annotations may remain unreferenced. Run this script to remove UI.LineItem annotations that are not referenced by any AnnotationPath in UI.Facets. Adjust file paths as needed (example uses app/annotations/annotations.xml).

LANGUAGE: JavaScript (Node.js)

CODE:
```JavaScript
// File: scripts/cleanup-orphan-lineitems.js
// Usage: node scripts/cleanup-orphan-lineitems.js app/annotations/annotations.xml
const fs = require('fs');
const path = require('path');
const xml2js = require('xml2js');

const file = process.argv[2];
if (!file) {
  console.error('Usage: node cleanup-orphan-lineitems.js <annotations.xml>');
  process.exit(1);
}

const parser = new xml2js.Parser();
const builder = new xml2js.Builder({ headless: true, renderOpts: { pretty: true } });

const xml = fs.readFileSync(file, 'utf8');
parser.parseString(xml, (err, result) => {
  if (err) throw err;

  // Collect referenced AnnotationPaths from all UI.Facets records
  const annotationsRoot = result.Annotations || {};
  const allAnnotations = Array.isArray(annotationsRoot.Annotation) ? annotationsRoot.Annotation : (annotationsRoot.Annotation ? [annotationsRoot.Annotation] : []);

  const facets = allAnnotations.find(a => a.$ && a.$.Term === 'UI.Facets');
  const referencedPaths = new Set();

  if (facets && facets.Collection && facets.Collection.length) {
    const records = facets.Collection[0].Record || [];
    records.forEach(rec => {
      const pv = rec.PropertyValue || [];
      pv.forEach(p => {
        if (p.$ && p.$.Property === 'Target' && p.AnnotationPath) {
          p.AnnotationPath.forEach(ap => referencedPaths.add(ap));
        }
      });
    });
  }

  // Remove UI.LineItem annotations that are not referenced
  const remainingAnnotations = allAnnotations.filter(a => {
    if (a.$ && a.$.Term === 'UI.LineItem') {
      // Build the annotation target string as in AnnotationPath: TargetEntity/UI.LineItem
      const target = a.$.Target || '';
      const fullPath = `${target}/UI.LineItem`;
      return referencedPaths.has(fullPath);
    }
    return true; // keep non-UI.LineItem annotations
  });

  // Replace and rebuild XML
  result.Annotations.Annotation = remainingAnnotations;
  const out = builder.buildObject(result);
  fs.writeFileSync(file, out, 'utf8');
  console.log('Cleanup complete. File updated:', file);
});
```

STEP: Related Resources

DESCRIPTION: Reference quick links and related topics for table columns and actions in the same documentation set.

LANGUAGE: Plain text

CODE:
```text
Related docs:
- Table Actions: table-actions-da1931b.md
- Table Columns: table-columns-a80d603.md
- Label property reference: appendix-457f2e9.md#loiod44832d99bdf4f73ba14cdbb16dc9301
- Hidden property reference: appendix-457f2e9.md#loiof7ad71792a0044d6b6172f078827bdc0
```
--------------------------------

**TITLE**: Taskbar Notification for Annotation File Updates (Fiori Tools Page Editor)

**INTRODUCTION**: Show a taskbar/OS or editor-level notification when an annotation file is updated as a direct result of user actions in the Page Editor. Do NOT show a notification for changes made directly by editing the annotation file. This document provides code patterns (VS Code extension + optional OS-level notifications) and a safe update flow that avoids duplicate/incorrect notifications.

**TAGS**: fiori-tools, page-editor, annotation, notification, vscode, typescript, node-notifier, filesystem, taskbar

STEP: 1 — Notification API (editor-level)
DESCRIPTION: Use the VS Code API to show an informational message inside the editor UI. This is simple, reliable, and usually sufficient for feedback when the Page Editor updates an annotation file.
LANGUAGE: TypeScript
CODE:
```typescript
import * as vscode from 'vscode';

/**
 * Show an in-editor informational message after annotations are updated.
 * Call this from the Page Editor update path (only).
 */
export function showEditorNotification(message: string) {
  // This appears in the VS Code UI (not OS taskbar)
  vscode.window.showInformationMessage(message);
}

// Usage:
// showEditorNotification('Annotation file saved: src/annotations/Customer.annotation.xml');
```

STEP: 2 — Optional: OS / Taskbar notification (node-notifier)
DESCRIPTION: If you want a native OS taskbar/notification (Windows/macOS/Linux), use node-notifier. Use this only when you need OS-level notifications; still call it only from the Page Editor update flow.
LANGUAGE: TypeScript
CODE:
```typescript
import notifier from 'node-notifier';
import * as path from 'path';

/**
 * Send a native OS notification. Requires node-notifier dependency.
 * npm install node-notifier --save
 */
export function showOsNotification(title: string, message: string) {
  notifier.notify({
    title,
    message,
    icon: path.join(__dirname, 'assets', 'icon.png'), // optional
    timeout: 5
  });
}

// Usage:
// showOsNotification('Fiori Tools', 'Annotations updated for Entity: Customer');
```

STEP: 3 — Page Editor: Update annotation file and trigger notification
DESCRIPTION: Update the annotation file exclusively via Page Editor code path. After successful write, call the notification routine. This guarantees notifications only for Page Editor-driven changes.
LANGUAGE: TypeScript (Node + VS Code extension context)
CODE:
```typescript
import * as fs from 'fs/promises';
import * as path from 'path';
import { showEditorNotification, showOsNotification } from './notifications';

const ANNOTATION_DIR = path.join(process.cwd(), 'src', 'annotations'); // example path

/**
 * Update annotation file contents from Page Editor actions.
 * Always call the notification here after successful write.
 */
export async function updateAnnotationFile(entityName: string, xmlContent: string) {
  const fileName = `${entityName}.annotation.xml`;
  const filePath = path.join(ANNOTATION_DIR, fileName);

  try {
    await fs.mkdir(ANNOTATION_DIR, { recursive: true });
    await fs.writeFile(filePath, xmlContent, { encoding: 'utf8' });

    // Notify user that Page Editor triggered the update
    showEditorNotification(`Annotation file updated: ${fileName}`);

    // Optional: also send OS/taskbar notification
    // showOsNotification('Annotations updated', `${fileName} was updated via Page Editor`);
  } catch (err) {
    showEditorNotification(`Failed to update ${fileName}: ${err}`);
    throw err;
  }
}

// Example call from Page Editor code when user saves changes:
// await updateAnnotationFile('Customer', newXmlString);
```

STEP: 4 — Do NOT show notification on direct file edits
DESCRIPTION: Avoid subscribing globally to file changes to generate notifications. If you must watch files, use a strict origin check (only notify when change originated via Page Editor). Recommended approach: do not base notifications on generic file system watchers; call notifications only from the Page Editor update flow.
LANGUAGE: TypeScript (pattern)
CODE:
```typescript
// BAD: global file watcher that notifies on any change (will trigger on manual edits).
// GOOD: centralize writes and notify only in the write path (see updateAnnotationFile above).

// If you must watch files (e.g., to react to external changes), track origin flags:
const pendingWrites = new Set<string>();

export async function writeAnnotationFileWithFlag(filePath: string, content: string) {
  pendingWrites.add(filePath);
  await fs.writeFile(filePath, content, 'utf8');
  // small delay to allow filesystem events to fire and be correlated, or remove immediately
  setTimeout(() => pendingWrites.delete(filePath), 500);
}

// Example watcher that ignores pendingWrites:
import * as chokidar from 'chokidar';
const watcher = chokidar.watch(ANNOTATION_DIR);

watcher.on('change', (filePath) => {
  if (pendingWrites.has(filePath)) {
    // Change originated from Page Editor flow -> ignore here (notification already sent)
    return;
  }
  // Change did NOT originate from Page Editor (e.g., direct edit) -> do not show taskbar notification.
  // Instead, optionally show a different workflow-aware message or refresh in the Page Editor UI.
});
```

STEP: 5 — File path examples and conventions
DESCRIPTION: Keep annotation file path and naming consistent. Use these examples in your code to reference annotation files.
LANGUAGE: JSON (example)
CODE:
```json
{
  "annotationDir": "src/annotations",
  "annotationFileExample": "src/annotations/Customer.annotation.xml"
}
```

STEP: 6 — Summary of behavior to implement in Page Editor
DESCRIPTION: Implementation checklist for code integration:
- Ensure all Page Editor actions that change annotations call a single update function (updateAnnotationFile).
- That update function writes to the annotation file and immediately triggers a notification (editor-level and/or OS-level).
- Do not trigger notifications from generic file-change listeners for annotation files.
- The taskbar notification must NOT be shown when the user directly edits the annotation file (handled by avoiding watcher-based notifications).

NOTE: The taskbar/OS notification is intentionally NOT displayed when the change is directly made in the annotation file; only Page Editor-driven updates should produce the notification.
--------------------------------

**TITLE**: Guided Development (Use Feature Guides) — Launching, Project Workflow, and Accessibility

**INTRODUCTION**: Quick, action-oriented reference for launching and using Guided Development in the SAP Fiori tools extension. Includes exact commands, UI interactions to select and refresh projects, project-scoped data details, notes about annotations, and keyboard accessibility instructions. Use this as a concise recipe for automation scripts, extension integration, or step-by-step developer workflows.

**TAGS**: fiori-tools, guided-development, sap-fiori-elements, vscode, accessibility, ui5, developer-guide

**STEP**: Launch Guided Development using the Command Palette

**DESCRIPTION**: Open the VS Code Command Palette and run the Guided Development commands. These commands are the primary entry points when you want to inspect guides or run interactive guided changes for a selected SAP Fiori elements project.

**LANGUAGE**: Plaintext

**CODE**:
```plaintext
1. Open Command Palette:
   - macOS: ⌘ + Shift + P
   - Windows/Linux: Ctrl + Shift + P

2. Type: "guided development"

3. Choose one of:
   - "Fiori: Open Guided Development"
     -> Opens Guided Development in the current editor region/tab.
   - "Fiori: Open Guided Development to the Side"
     -> Opens Guided Development in a side column (split editor).

4. After opening, select the SAP Fiori elements project from your workspace when prompted.
```

**STEP**: Launch Guided Development using the Folder Context Menu

**DESCRIPTION**: Open Guided Development directly for a workspace folder that contains an SAP Fiori elements project. This is a one-click option from the Explorer tree when a project folder is present.

**LANGUAGE**: Plaintext

**CODE**:
```plaintext
1. In VS Code Explorer, right-click the project folder that contains your SAP Fiori elements app.
2. Select: "SAP Fiori tools - Open Guided Development"
   -> Guided Development opens to the side of the current file (in another column).
```

**STEP**: Behavior when no SAP Fiori elements project exists

**DESCRIPTION**: You can open Guided Development without any project in the workspace, but interactive features (project-scoped modifications) are disabled. You can still view guides, descriptions, and code samples.

**LANGUAGE**: Plaintext

**CODE**:
```plaintext
- If no SAP Fiori elements project is in the workspace:
  - Use the Command Palette method to open Guided Development.
  - Interactive features are disabled (read-only view of guides and samples).
```

**STEP**: Select or Change the Target Project in Guided Development

**DESCRIPTION**: Guided Development works with one project at a time. Select the target project to provide project-specific data to the guides (entities, models, pages, annotations). The selected project name appears on the Guided Development tab header.

**LANGUAGE**: Plaintext

**CODE**:
```plaintext
1. In Guided Development toolbar (left side), click "Select Project".
2. From the Project list, choose the SAP Fiori elements project you want to target.
3. The selected project name is shown on the Guided Development tab header.

Resources/visual:
- Image: images/SelectProject_9ea63e4.png
```

**STEP**: What project-specific data is used by the guides

**DESCRIPTION**: The guides read these elements from the selected project to offer curated instructions and generate changes.

**LANGUAGE**: Plaintext

**CODE**:
```plaintext
Project-specific data provided to Guided Development:
- Entity list: list of entities from the OData service(s).
- Model list: data sources available in the project.
- Page list: application pages (Fiori elements pages).
- Annotation terms: annotation vocabulary terms defined across the service(s).

Note: Guided Development can add annotations from services other than the mainService.
```

**STEP**: When and how to refresh Guided Development

**DESCRIPTION**: Refresh the Project list or the toolbar when workspace/project files change outside Guided Development so UI lists and metadata stay up-to-date.

**LANGUAGE**: Plaintext

**CODE**:
```plaintext
Refresh scenarios and actions:

- When a new project is added to the workspace:
  - Click the Refresh icon inside the Project list (toolbar inside Guided Development).

- When the current project changes outside Guided Development (e.g., a new page added, service updated):
  - Click the Refresh icon on the Guided Development toolbar next to the Project list.

Icon reference:
- Refresh icon uses SAP icon set (SAP-icons-V5). Look for the toolbar button with tooltip "Refresh".
```

**STEP**: Include CSS for rendering SAP icon font in documentation or web viewer

**DESCRIPTION**: If you render pages that reference the SAP icon font, include the sap-icons.css file from the extension or documentation bundle so icons display correctly.

**LANGUAGE**: HTML

**CODE**:
```html
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```

**STEP**: Accessibility — keyboard navigation and themes

**DESCRIPTION**: Keyboard-first navigation instructions for Guided Development. Also indicates high-contrast theme support.

**LANGUAGE**: Plaintext

**CODE**:
```plaintext
Keyboard navigation:
- Use Arrow keys to move within a section or list (up/down/left/right).
- Tab to move to the next interactive control or section.
- Shift + Tab to move back to the previous control or section.
- Enter to confirm selections or trigger actions.

Accessibility:
- Guided Development supports high contrast themes (ensure VS Code high contrast theme or OS-level high contrast is enabled).
```
--------------------------------

**TITLE**: Visualizing and Managing OData/CAP Annotations with Service Modeler

**INTRODUCTION**: Actions and code samples for viewing, searching, editing, overriding, and deleting OData and CAP annotations using SAP Fiori tools - Service Modeler. Includes launcher commands, expected behavior for backend vs local annotations, file locations, and example XML annotation snippets showing how to override backend annotations in /webapp/annotations/<filename>.xml.

**TAGS**: fiori-tools, service-modeler, annotations, OData, CAP, xml, vs-code

**STEP**: 1 — Launch Service Modeler

**DESCRIPTION**: Open the Service Modeler UI for your SAP Fiori elements project. You can open it from the VS Code Command Palette, the folder context menu, or from an open metadata.xml editor.

**LANGUAGE**: Shell

**CODE**:
```shell
# Option A: Command Palette (preferred)
# 1) Open Command Palette (Ctrl+Shift+P or Cmd+Shift+P)
# 2) Type and run:
Fiori: Service Modeler: Open Service Modeler
# 3) Select your SAP Fiori elements project from the workspace

# Option B: Folder context menu
# In VS Code Explorer -> right-click any folder inside your SAP Fiori elements project -> Override Annotations

# Option C: From open metadata.xml
# If metadata.xml is open in editor, click the Annotations icon () in the editor gutter to open Service Modeler for that service.
```

**STEP**: 2 — Where local annotation files live

**DESCRIPTION**: Local annotation files used to override or extend backend annotations are stored under the webapp annotations folder. Backend annotations are read-only in Service Modeler; local annotations override backend entries by matching Target + Term + Qualifier.

**LANGUAGE**: Text

**CODE**:
```text
Local annotations path:
  /webapp/annotations/<filename>.xml

Rules:
  - Service Modeler shows backend AND local annotations for OData services.
  - If local annotation has same Target + Term + Qualifier as a backend annotation, the local annotation takes precedence.
  - Backend annotations are read-only in Service Modeler; edit local files to change behavior.
```

**STEP**: 3 — View annotations and open source

**DESCRIPTION**: Select an entity type, entity set, or property in Service Modeler tree to highlight related annotations in the Annotation panel. Use the "Show in Source" icon to open the annotation XML file with the selected annotation highlighted.

**LANGUAGE**: Text

**CODE**:
```text
1) In the Service Modeler tree, expand and select:
   - Entity Type  OR
   - Entity Set   OR
   - Property

2) Annotation Panel shows:
   - backend annotations (read-only) and
   - local annotations (/webapp/annotations/<filename>.xml)

3) Click the Show in Source icon (Show in Source) next to any annotation:
   - Opens the XML annotation file and highlights the annotation.
```

**STEP**: 4 — Search annotations in Service Modeler

**DESCRIPTION**: Filter annotations using the search input in the upper-right corner of the Annotation panel. Matching annotations are listed, and the tree list is filtered to the artifacts that own the matching annotations.

**LANGUAGE**: Text

**CODE**:
```text
- Enter search text in the Annotation panel search input (upper-right).
- Result:
  - Annotation panel lists matching annotations.
  - Tree list filters entities/properties that own those annotations.
```

**STEP**: 5 — Example local annotation XML (override backend annotation)

**DESCRIPTION**: Example annotation file to override backend annotation for an entity and a property. Save this under /webapp/annotations/<filename>.xml. Use the XML Code Editor / language server for editing and validation.

**LANGUAGE**: XML

**CODE**:
```xml
<?xml version="1.0" encoding="utf-8"?>
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
  <edmx:DataServices>
    <Schema xmlns="http://docs.oasis-open.org/odata/ns/edm" Namespace="MyService">
      <!-- Override backend entity label (local wins over backend term with same Target+Term+Qualifier) -->
      <Annotations Target="MyService.Book" >
        <Annotation Term="UI.DisplayName" String="Local Book Label"/>
      </Annotations>

      <!-- Override a property annotation, with a qualifier example -->
      <Annotations Target="MyService.Book/Title">
        <!-- Qualifier example: use Qualifier attribute to target a specific qualifier -->
        <Annotation Term="UI.Label" Qualifier="LocalQualifier" String="Local Title Label"/>
      </Annotations>

      <!-- Add new annotation only in local file -->
      <Annotations Target="MyService.Book">
        <Annotation Term="Core.Description" String="Locally provided description for Book"/>
      </Annotations>
    </Schema>
  </edmx:DataServices>
</edmx:Edmx>
```

**STEP**: 6 — Edit local annotations (recommended flow)

**DESCRIPTION**: Edit local annotation XML using XML Code Editor (language server) or any text editor. Use Service Modeler to open the file at the exact annotation location, edit, save, and then re-check the UI behavior.

**LANGUAGE**: Text

**CODE**:
```text
1) In Service Modeler tree, select the entity/property -> annotation panel highlights annotations.
2) Click Show in Source next to the local annotation (opens /webapp/annotations/<filename>.xml).
3) Edit the annotation text using XML Code Editor (or other editor).
4) Save the file. Service Modeler will pick up the change (refresh if necessary).
Note: backend annotations remain read-only and must be overridden in local files if you need changes.
```

**STEP**: 7 — Delete a local annotation

**DESCRIPTION**: Remove a local annotation either via Service Modeler delete action or manually remove the XML element from /webapp/annotations/<filename>.xml.

**LANGUAGE**: Text

**CODE**:
```text
Option A (Service Modeler):
  1) Select target entity/type/property.
  2) In Annotation panel, click the Delete (wastebasket) icon next to the local annotation. This deletes that entry from the local annotation file.

Option B (Manual):
  1) Open /webapp/annotations/<filename>.xml in editor.
  2) Remove the <Annotation .../> element or the entire <Annotations> block as appropriate.
  3) Save file and refresh Service Modeler.

Important:
  - Deleting a local override reverts to the backend annotation (if it exists).
  - If no backend annotation exists, deleting the local annotation removes the term entirely.
```

**STEP**: 8 — Sample metadata.xml context (open annotations from metadata)

**DESCRIPTION**: Metadata file location for referencing service model. If metadata.xml is open, Service Modeler Annotations icon opens the annotations view for that service.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Typical local service metadata location for mock/local OData service -->
# file: /webapp/localService/metadata.xml

<?xml version="1.0" encoding="utf-8"?>
<edmx:Edmx Version="4.0" xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx">
  <edmx:DataServices>
    <Schema Namespace="MyService" xmlns="http://docs.oasis-open.org/odata/ns/edm">
      <!-- entity and property definitions -->
      <EntityType Name="Book">
        <Key>
          <PropertyRef Name="ID"/>
        </Key>
        <Property Name="ID" Type="Edm.String"/>
        <Property Name="Title" Type="Edm.String"/>
      </EntityType>
      <!-- ... -->
    </Schema>
  </edmx:DataServices>
</edmx:Edmx>
```

**STEP**: 9 — Styling and icon reference (optional)

**DESCRIPTION**: If you need icons or local styling in documentation or custom pages, the project uses SAP icon CSS. This is informational only.

**LANGUAGE**: HTML

**CODE**:
```html
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
<!-- Annotation icon shown inside editors/UI is:  (span class="SAP-icons-V5") -->
```
--------------------------------

**TITLE**: Managing Local Annotation Files in SAP Fiori Tools Projects

**INTRODUCTION**: Practical guide for code-focused tasks: locate generated annotation files, register and order them in manifest.json, create/override annotation terms and qualifiers, and understand local copy usage for service metadata and backend annotations. Use these snippets to automate or generate code for project setup and annotation overrides.

**TAGS**: fiori-tools, annotations, manifest.json, OData, localService, annotation-override, XML, metadata

**STEP**: 1 — Inspect generated project files and folders

**DESCRIPTION**: Verify the typical file/folder layout created by SAP Fiori tools. The local annotation file(s) live in webapp/annotations; backend metadata and annotation copies are in webapp/localService.

**LANGUAGE**: text

**CODE**:
```
webapp/
  annotations/
    annotations.xml         <-- one local annotation file generated by Fiori tools
  localService/
    metadata.xml            <-- copy of OData service metadata
    annotations/            <-- (optional) copied backend annotation files
      backendAnnotations.xml
  manifest.json
  Component.js
  ...
```

**STEP**: 2 — Register local metadata copy and annotation file in manifest.json

**DESCRIPTION**: Add/verify entries in manifest.json: dataSources.localUri references the local metadata copy in webapp/localService; models[].settings.annotations lists local annotation file(s). Order of annotation files in the array defines the overriding sequence.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.app": {
    "id": "my.app"
  },
  "sap.ui5": {
    "dataSources": {
      "mainService": {
        "uri": "/sap/opu/odata/sap/MY_SERVICE;v=2/",
        "type": "OData",
        "settings": {
          "odataVersion": "2.0",
          "localUri": "localService/metadata.xml"
        }
      }
    },
    "models": {
      "": {
        "dataSource": "mainService",
        "settings": {
          "annotations": [
            "annotations/annotations.xml",
            "annotations/overrides.xml"    /* order defines override precedence */
          ]
        }
      }
    }
  }
}
```

**STEP**: 3 — Create a new term (CSDL) in a local annotation file

**DESCRIPTION**: Define a custom vocabulary term locally so UI5 can consume it. Use an XML CSDL Schema section in the local annotation file. Place the file in webapp/annotations (e.g., annotations/annotations.xml).

**LANGUAGE**: XML

**CODE**:
```xml
<?xml version="1.0" encoding="utf-8"?>
<edmx:Edmx Version="4.0"
  xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx">
  <edmx:DataServices>
    <Schema Namespace="com.example.vocab" xmlns="http://docs.oasis-open.org/odata/ns/edm">
      <!-- Define a new term -->
      <Term Name="MyCustomHeader" Type="Edm.String" />
    </Schema>

    <!-- Apply the custom term to a target (an entity or property) -->
    <Annotations Target="MyService.Product">
      <Annotation Term="com.example.vocab.MyCustomHeader" String="Special header value" />
    </Annotations>
  </edmx:DataServices>
</edmx:Edmx>
```

**STEP**: 4 — Override a backend annotation locally (same Target and Qualifier)

**DESCRIPTION**: Copy the backend annotation (including Target and Qualifier) into a local annotation file and modify values. The local file wins for the same Target + Qualifier. Use a Qualifier attribute on the Annotation element when backend uses a qualifier.

**LANGUAGE**: XML

**CODE**:
```xml
<?xml version="1.0" encoding="utf-8"?>
<edmx:Edmx Version="4.0" xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx">
  <edmx:DataServices>
    <!-- Example: Override UI.LineItem with a qualifier -->
    <Annotations Target="MyService.Product">
      <!-- Keep the same Term and Qualifier used by backend; adjust details locally -->
      <Annotation Term="UI.LineItem" Qualifier="MyQualifier">
        <Collection>
          <Record Type="UI.DataField">
            <PropertyValue Property="Value">
              <String>LocalField1</String>
            </PropertyValue>
          </Record>
          <!-- ... other entries ... -->
        </Collection>
      </Annotation>
    </Annotations>
  </edmx:DataServices>
</edmx:Edmx>
```

**STEP**: 5 — Change the hierarchy/order of multiple local annotation files

**DESCRIPTION**: To change which local annotation wins, reorder files in manifest.json models.settings.annotations. The first file listed is processed first; later files can override earlier ones for the same Target+Qualifier.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "mainService",
        "settings": {
          "annotations": [
            "annotations/base.xml",
            "annotations/overrides.xml"   /* overrides.xml will override base.xml where same Target/Qualifier */
          ]
        }
      }
    }
  }
}
```

**STEP**: 6 — Tools to maintain local annotations

**DESCRIPTION**: Choose editing approach:
- For direct XML editing: use the XML annotation language server (provides validation and completions).
- For schematic UI editing: use the Page Editor / Service Modeler (Note: Service Modeler annotation editing applies to OData services only — not CAP CDS).

**LANGUAGE**: text

**CODE**:
```
Recommended workflows:
- Edit webapp/annotations/*.xml with XML annotation language server (IDE support).
- Or use Page Editor / Service Modeler for schematic editing (OData only).
- When changing backend annotations permanently, copy the backend annotation (Target + Qualifier) into a local file and adjust there.
```

**STEP**: 7 — Important behavior summary for automation

**DESCRIPTION**: Key rules to encode in automation or code generators:
- Local annotation files live in webapp/annotations and must be referenced in manifest.json (models.settings.annotations).
- Backend metadata and annotations are copied to webapp/localService; manifest.dataSources[].settings.localUri should point to the local metadata copy.
- Local annotations override backend annotations when they have identical Target and Qualifier.
- The order of files in models.settings.annotations controls override precedence.
- Service Modeler tools operate on OData services only (not CAP CDS).

**LANGUAGE**: text

**CODE**:
```
Automation checklist:
1. Ensure webapp/localService/metadata.xml exists and set dataSources[].settings.localUri accordingly.
2. Add local annotation file paths to models[].settings.annotations in manifest.json in the required order.
3. When overriding backend annotations, include exact Target and Qualifier in the local XML file.
4. Use XML annotation language server or Page Editor for editing; prefer XML server for programmatic validation.
```
--------------------------------

**TITLE**: Add an SAP Fiori Application to an MTA Deployment File (Cloud Foundry)

**INTRODUCTION**: This guide shows how to (A) update an existing mta.yaml to include a generated SAP Fiori application (and optional approuter), and (B) create a new mta.yaml when one does not exist. Included are ready-to-use mta.yaml snippets you can insert or adapt. Follow these snippets when the SAP Fiori Application Generator requests “Add deployment configuration”.

**TAGS**: mta, mta.yaml, sap-fiori, cloud-foundry, cf, approuter, html5, xsuaa, destination, html5-apps-repo

STEP: 1 — Add deployment configuration to an existing mta.yaml

DESCRIPTION: Locate the existing mta.yaml in the selected project folder and add a module entry for the generated SAP Fiori application. Ensure the required resources (services) referenced by the module already exist in the same mta.yaml. Typical required resources include: html5-apps-repo (runtime), xsuaa (authentication), destination (optional), and an approuter (if using a managed approuter). Insert or merge the snippet below under the top-level modules: and resources: sections.

LANGUAGE: YAML

CODE:
```yaml
# Insert under top-level "modules:" in your existing mta.yaml
modules:
  - name: <your-fiori-app-name>
    type: html5          
    path: <relative/path/to/generated/fiori/app>  # e.g., "webapp" or "app"
    build-parameters:
      builder: npm                                # adjust builder if needed
    requires:
      - name: html5-apps-repo-rt                  # binding to HTML5 runtime
      - name: uaa-service                         # binding to XSUAA (if used)
      - name: destination                         # optional: destination instance

  # Optional: add an application router module (managed or standalone)
  - name: <your-fiori-app>-approuter
    type: nodejs
    path: <relative/path/to/approuter>           # e.g., "approuter"
    properties:
      forwardAuthToken: true
    requires:
      - name: uaa-service
      - name: destination
      - name: html5-apps-repo-rt

# Ensure corresponding resources exist under top-level "resources:" (merge if already present)
resources:
  - name: html5-apps-repo-rt
    type: org.cloudfoundry.managed-service
    parameters:
      service: html5-apps-repo
      service-plan: app-runtime

  - name: uaa-service
    type: org.cloudfoundry.managed-service
    parameters:
      service: xsuaa
      service-plan: application

  - name: destination
    type: org.cloudfoundry.managed-service
    parameters:
      service: destination
      service-plan: lite
```

STEP: 2 — Create a new mta.yaml when none exists (generator-created mta)

DESCRIPTION: If no mta.yaml exists in the chosen folder, the SAP Fiori Application Generator can create one for you. The generated mta.yaml is typically placed in the same folder as the application; this is suitable for single-application scenarios. If you plan to host multiple applications in one MTA, create a parent mta.yaml first and generate the Fiori app in a subfolder.

LANGUAGE: YAML

CODE:
```yaml
ID: com.example.myfiori
_schema-version: '3.2'
version: 0.0.1

modules:
  - name: my-fiori-app
    type: html5
    path: .
    build-parameters:
      builder: npm
    requires:
      - name: html5-apps-repo-rt
      - name: uaa-service
      - name: destination

  - name: my-fiori-approuter
    type: nodejs
    path: approuter
    properties:
      forwardAuthToken: true
    requires:
      - name: uaa-service
      - name: html5-apps-repo-rt
      - name: destination

resources:
  - name: html5-apps-repo-rt
    type: org.cloudfoundry.managed-service
    parameters:
      service: html5-apps-repo
      service-plan: app-runtime

  - name: uaa-service
    type: org.cloudfoundry.managed-service
    parameters:
      service: xsuaa
      service-plan: application

  - name: destination
    type: org.cloudfoundry.managed-service
    parameters:
      service: destination
      service-plan: lite
```

STEP: 3 — CAP projects: optional instance-based destination configuration

DESCRIPTION: For local CAP projects you can optionally generate an instance-based destination resource in mta.yaml, or reuse an existing instance-based destination resource already defined in the mta.yaml. Use the snippet below to add an instance-based destination resource for Cloud Foundry.

LANGUAGE: YAML

CODE:
```yaml
# Add this under "resources:" to create an instance-based destination
- name: my-instance-destination
  type: org.cloudfoundry.managed-service
  parameters:
    service: destination
    service-plan: lite
  # For binding to your modules, reference this resource name in module "requires"
```

STEP: 4 — Validation checklist before deployment

DESCRIPTION: Confirm these items in code/manifest before deploying:
- mta.yaml contains a module entry for the Fiori app and, when required, an approuter module.
- All service resources referenced in module 'requires' are defined in resources: (html5-apps-repo-rt, uaa-service, destination, etc.).
- For multi-app scenarios, place mta.yaml at the parent level and generate each app into its own subfolder.
- For single-folder generator-created mta.yaml: accept that it is not intended to host multiple unrelated applications.

LANGUAGE: Plain text

CODE:
```text
Validation checklist:
- mta.yaml present at appropriate folder (project root for multi-app MTA; same folder OK for single app)
- modules: entry added for the generated app with correct path
- resources: entries exist for all referenced services
- For CAP: decide whether to create an instance-based destination or reuse existing resource
- If using approuter: add approuter module and required bindings (uaa, html5-apps-repo, destination)
```
--------------------------------

**TITLE**: Add JavaScript Code Assist to SAP Fiori Project (SAPUI5 >= 1.76)

**INTRODUCTION**: Add JavaScript code-assist (type hints and eslint rules) to an existing SAP Fiori / SAPUI5 project (version 1.76 and newer) by adding TypeScript type definitions and an ESLint plugin. These changes enable IDE code completion and JSDoc-based linting for SAPUI5 in .js files.

**TAGS**: fiori-tools,SAPUI5,JavaScript,code-assist,eslint,tsconfig,ts-types,eslintrc,IDE,VSCode

**STEP**: 1 — Update package.json devDependencies

**DESCRIPTION**: Merge the required devDependencies into the root package.json of your project. If a devDependencies object already exists, add or update these entries. The versions use the x wildcard as shown.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "devDependencies": {
    "eslint": "5.16.x",
    "@sap/eslint-plugin-ui5-jsdocs": "2.0.x",
    "@sapui5/ts-types": "1.92.x"
  }
}
```

**STEP**: 2 — Add tsconfig.json to project root

**DESCRIPTION**: Create a tsconfig.json in the project root to enable JS checking and include SAPUI5 type definitions. This config uses no module emission and activates checkJs and allowJs so the TypeScript language service provides suggestions in .js files.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "compilerOptions": {
    "module": "none",
    "noEmit": true,
    "checkJs": true,
    "allowJs": true,
    "types": [
      "@sapui5/ts-types"
    ]
  }
}
```

**STEP**: 3 — Add .eslintrc to project root

**DESCRIPTION**: Create an .eslintrc file at the project root to enable the SAP UI5 JSDoc ESLint plugin and recommended rules. This improves JSDoc-based linting for UI5 APIs.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "plugins": [
    "@sap/ui5-jsdocs"
  ],
  "extends": [
    "plugin:@sap/ui5-jsdocs/recommended",
    "eslint:recommended"
  ]
}
```

**STEP**: 4 — Reinstall node modules

**DESCRIPTION**: Remove existing node_modules to ensure new devDependencies are installed cleanly, then install packages.

**LANGUAGE**: Shell

**CODE**:
```bash
# from the project root
rm -rf node_modules
npm install
```

**STEP**: 5 — Verify code assist in a .js file

**DESCRIPTION**: Open any project .js file (for example a controller) in your IDE (VS Code, WebStorm, etc.). The TypeScript definitions and ESLint plugin will enable code completion and JSDoc linting for SAPUI5 APIs.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Example: webapp/controller/Main.controller.js — open this file to verify code assist
sap.ui.define([
  "sap/ui/core/mvc/Controller",
  "sap/m/MessageToast"
], function (Controller, MessageToast) {
  "use strict";

  return Controller.extend("my.app.controller.Main", {
    onInit: function () {
      // Type-hints and auto-completion for sap.ui.* and sap.m.* should work here
      var oView = this.getView();
      MessageToast.show("Code assist active");
    },

    onButtonPress: function (oEvent) {
      // Use UI5 APIs and JSDoc-based completions
      var oSource = oEvent.getSource();
      oSource.setVisible(false);
    }
  });
});
```
--------------------------------

**TITLE**: SAP Fiori Tools — Additional Configuration (Deployment, FLP, Advanced Options)

**INTRODUCTION**: This document provides concise, code-focused configuration examples and field definitions for automating the "Additional Configuration" steps in SAP Fiori Tools: deployment settings (ABAP / Cloud Foundry), SAP Fiori Launchpad (FLP) tile mappings, and advanced project options (theme, eslint, JS code assist, NPM workspaces, TypeScript). Use the JSON snippets to populate automation templates, scaffolding scripts, or generator inputs.

**TAGS**: fiori-tools, sap, deployment, abap, cloud-foundry, flp, ui5, theme, eslint, typescript, npm-workspaces

STEP: 1 — Add Deployment Configuration (general)
DESCRIPTION: Create or update a deployment configuration object. The top-level "target" selects the deployment target (ABAP or CloudFoundry). Required/optional fields depend on the target. Use these examples to feed a generator or wizard.
LANGUAGE: JSON
CODE:
```json
{
  "deploymentConfig": {
    "enabled": true,
    "target": "ABAP",            /* "ABAP" or "CloudFoundry" */
    "destinationName": "MY_ABAP_DEST", /* required */
    "isCloudPlatformSystem": false,    /* only for Steampunk systems; true/false */
    "targetSystemUrl": "https://my.abap.system.example.com", /* prefilled; not applicable in BAS */
    "client": {
      "mode": "useProjectDefined",     /* "useProjectDefined" | "enterClient" | "useDefaultSystemClient" */
      "value": "010"                   /* if mode == "enterClient" provide client number */
    },
    "isS4HanaCloud": false,        /* not applicable if isCloudPlatformSystem == true */
    "sapui5AbapRepository": "Z_MY_FIORI_APP", /* required for ABAP */
    "package": "$TMP",              /* ABAP transport package (not applicable for S/4HANA Cloud) */
    "fetchTransportRequestList": true, /* boolean: if true, try to fetch TR list from target system */
    "transportRequestNumber": "SOME_TR_0001" /* ID of transport request; not applicable for S/4HANA Cloud */
  }
}
```

STEP: 1A — Example: Minimal ABAP deployment configuration
DESCRIPTION: Minimal valid ABAP deployment payload for automation where transport list is fetched.
LANGUAGE: JSON
CODE:
```json
{
  "deploymentConfig": {
    "enabled": true,
    "target": "ABAP",
    "destinationName": "ABAP_PROD_DEST",
    "isCloudPlatformSystem": false,
    "targetSystemUrl": "https://abap.example.com",
    "client": { "mode": "useProjectDefined", "value": "project-defined" },
    "isS4HanaCloud": false,
    "sapui5AbapRepository": "Z_MYFIORI_APP_REPO",
    "package": "Z_MY_PACKAGE",
    "fetchTransportRequestList": true,
    "transportRequestNumber": "AUTO_FETCH" 
  }
}
```

STEP: 1B — Example: Cloud Foundry deployment configuration
DESCRIPTION: Cloud Foundry only needs a destination name for back-end connectivity.
LANGUAGE: JSON
CODE:
```json
{
  "deploymentConfig": {
    "enabled": true,
    "target": "CloudFoundry",
    "destinationName": "CF_BACKEND_DEST"
  }
}
```

STEP: 2 — Add FLP (Fiori Launchpad) Configuration
DESCRIPTION: Add or update SAP Fiori launchpad tile mapping. If configuration already exists, return existing values and allow overrides. Use the semanticObject and action for intent mapping; title/subtitle are free text shown on the tile.
LANGUAGE: JSON
CODE:
```json
{
  "flpConfig": {
    "enabled": true,
    "semanticObject": "Customer", /* e.g., "Customer", "Product", "PurchaseOrder" */
    "action": "display",         /* e.g., "display", "edit", "approve" */
    "title": "Customer Overview",/* tile title shown in FLP */
    "subtitle": "Overview of customers (optional)" /* optional */
  }
}
```

STEP: 3 — Configure Advanced Options (theme, eslint, JS code assist, NPM workspaces, TypeScript)
DESCRIPTION: Enable and persist advanced project options. The theme selection is constrained by minimum SAPUI5 version and deprecation notes. Enable eslint by adding the recommended plugin; add JS code assist libraries; optionally enable NPM workspaces for CAP projects; TypeScript support is experimental and requires NPM workspaces for CAP.
LANGUAGE: JSON
CODE:
```json
{
  "advancedOptions": {
    "enabled": true,
    "theme": "Morning Horizon", /* allowed values: "Quartz Light", "Belize", "Quartz Dark", "Morning Horizon", "Evening Horizon" */
    "notes": {
      "Belize": "Deprecated since SAPUI5 1.120; removed in 1.136+",
      "QuartzDark": "Available on SAPUI5 1.72+",
      "Horizon": "Morning/Evening Horizon available when min SAPUI5 version >= 1.102; Morning Horizon default"
    },
    "addEslint": true,           /* include eslint-plugin-fiori-custom and lint script */
    "addJsCodeAssist": true,     /* include JS code assist libraries and jsdoc rules */
    "updateToNpmWorkspaces": false, /* CAP only: enable to support app-local npm deps and enable TypeScript for Fiori in CAP */
    "enableTypeScriptExperimental": false /* Requires npm workspaces if CAP; experimental feature */
  }
}
```

STEP: 3A — package.json snippet: enable eslint and lint script
DESCRIPTION: Add eslint plugin and lint script to generated application's package.json to run npm run lint.
LANGUAGE: JSON
CODE:
```json
{
  "name": "my-fiori-app",
  "version": "0.0.1",
  "scripts": {
    "lint": "eslint . --ext .js,.jsx,.ts,.tsx"
  },
  "devDependencies": {
    "eslint": "^8.0.0",
    "eslint-plugin-fiori-custom": "^1.0.0"
  }
}
```

STEP: 3B — Example: enabling NPM workspaces for CAP (root package.json)
DESCRIPTION: When updating a CAP project to use NPM workspaces, add the workspaces field. This allows the UI application to manage its own node_modules and enables TypeScript support for the SAP Fiori application inside the CAP project.
LANGUAGE: JSON
CODE:
```json
{
  "name": "my-cap-project",
  "private": true,
  "workspaces": [
    "app/*",
    "srv",
    "db"
  ],
  "scripts": {
    "start": "cd app && npm start"
  }
}
```

STEP: 3C — Notes / validations to implement in automation
DESCRIPTION: Validation rules and UI hints for automation:
LANGUAGE: JSON
CODE:
```json
{
  "validationRules": {
    "deployment": {
      "ABAP": {
        "destinationName": "required",
        "sapui5AbapRepository": "required",
        "package": "required unless isS4HanaCloud true",
        "client": "not applicable for Steampunk systems (isCloudPlatformSystem==true)"
      },
      "CloudFoundry": {
        "destinationName": "required"
      }
    },
    "flp": {
      "semanticObject": "required",
      "action": "required",
      "title": "required"
    },
    "advancedOptions": {
      "theme": "ensure theme is compatible with selected min SAPUI5 version",
      "enableTypeScriptExperimental": "requires updateToNpmWorkspaces == true for CAP projects"
    }
  }
}
```
--------------------------------

**TITLE**: Generate an MTA Deployment (App Router + Multiple SAP Fiori Apps)

**INTRODUCTION**: Instructions and code examples to generate an Application Router configuration (including mta.yaml) and add multiple SAP Fiori apps under a single root directory using the Fiori Tools generators in VS Code. Includes example project structure, minimal mta.yaml, package.json, and .gitignore templates you can reuse when automating or scaffolding projects.

**TAGS**: fiori-tools, mta, approuter, cloud-foundry, sap-fiori, vscode, scaffolding

**STEP**: 1 — Open the App Router Generator

**DESCRIPTION**: Launch the Fiori Tools App Router generator in VS Code to scaffold the app router configuration project (this creates the router folder, mta.yaml, package.json, etc.). Use the Command Palette.

**LANGUAGE**: text

**CODE**:
```text
# In VS Code:
# Open Command Palette (Cmd/Ctrl + Shift + P)
# Run:
Fiori: Open CF Application Router Generator
```

**STEP**: 2 — Resulting project layout (example)

**DESCRIPTION**: Example layout produced by the App Router generator. The router folder name can be changed (e.g., "configurable"). Keep this structure when adding multiple Fiori apps to the same root.

**LANGUAGE**: text

**CODE**:
```text
app-router-root/
├── router/                # app router configuration (folder name can vary)
├── .gitignore
├── mta.yaml               # MTA descriptor (generated)
├── package.json           # npm metadata for the app router
└── package-lock.json      # npm lockfile (generated when npm modifies packages)
```

**STEP**: 3 — Minimal mta.yaml (example)

**DESCRIPTION**: Minimal MTA descriptor showing a Node.js approuter module named "router". Customize IDs, versions, and resources per your project (add html5 modules for Fiori apps as separate modules or configure them as resources).

**LANGUAGE**: YAML

**CODE**:
```yaml
_schema-version: "3.2"
ID: com.example.approuter
version: 1.0.0

modules:
  - name: router
    type: nodejs
    path: router
    provides:
      - name: router_api
        properties:
          url: ${default-url}

resources:
  - name: app-host
    type: com.sap.application.host
    properties:
      host: approuter-host
```

**STEP**: 4 — Minimal package.json for the App Router

**DESCRIPTION**: Example package.json for the app router. Include the @sap/approuter dependency and a start script. Adjust dependency versions to your compatibility requirements.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "name": "app-router",
  "version": "1.0.0",
  "description": "SAP Application Router for multiple Fiori apps",
  "main": "node_modules/@sap/approuter/approuter.js",
  "scripts": {
    "start": "node node_modules/@sap/approuter/approuter.js"
  },
  "dependencies": {
    "@sap/approuter": "^10.0.0"
  }
}
```

**STEP**: 5 — Example .gitignore

**DESCRIPTION**: Typical .gitignore entries for the app router repo to keep node_modules and build artifacts out of source control.

**LANGUAGE**: text

**CODE**:
```text
# Node
node_modules/
npm-debug.log
package-lock.json

# VS Code
.vscode/

# Build artifacts
dist/
coverage/
```

**STEP**: 6 — Add SAP Fiori apps under the same root

**DESCRIPTION**: After the app router project is generated, scaffold one or more SAP Fiori apps into the same root directory so the app router can route to them. Use the SAP Fiori application generator from the Command Palette and select the existing app-router-root as the target location for new apps.

**LANGUAGE**: text

**CODE**:
```text
# In VS Code:
# Open Command Palette (Cmd/Ctrl + Shift + P)
# Run:
Fiori: Open Application Generator
# When prompted for target folder, choose the existing app-router-root
# Repeat to add multiple Fiori apps; each app becomes a subfolder under app-router-root
```

**STEP**: 7 — Router types and references

**DESCRIPTION**: There are different app router deployment types (managed, Application Frontend service, standalone). Review the linked resources to choose the correct type for your landscape.

**LANGUAGE**: text

**CODE**:
```text
References:
- SAP Tech Bytes: FAQ Managed Approuter vs. Standalone Approuter
  https://blogs.sap.com/2021/05/17/sap-tech-bytes-faq-managed-approuter-vs.-standalone-approuter/

- Developing HTML5 Applications in the Cloud Foundry Environment
  https://help.sap.com/products/BTP/65de2977205c403bbc107264b8eccf4b/11d77aa154f64c2e83cc9652a78bb985.html
```
--------------------------------

**TITLE**: Data Source Connection and Local CAP Project Setup for SAP Fiori Tools

**INTRODUCTION**: Practical, code-focused instructions to configure data sources when generating SAP Fiori applications with SAP Fiori tools in VS Code or SAP Business Application Studio. Includes examples for adding systems, using destinations (.dest), direct OData URLs, uploading metadata.xml, using SAP Business Accelerator Hub, and configuring local CAP (Node.js and Java) projects.

**TAGS**: sap, fiori-tools, data-source, odata, cap, sap-btp, sap-abap, vscode, business-application-studio

**STEP**: Add a new SAP System in VS Code (on-premise or SAP BTP ABAP)

**DESCRIPTION**: Create and save a system connection in VS Code. Provide system name, URL, optional client ID, and choose authentication type (Service Key or Reentrance Ticket for SAP BTP ABAP). If using Service Key, supply the service key and complete browser-based authentication. If using Reentrance Ticket, provide your SAP S/4HANA Cloud URL and log in via the browser. Save credentials to OS secure storage (Windows Credential Manager or macOS Keychain). If saved auth expires later, the generator will prompt to reauthenticate.

- Reentrance Ticket requires SAP S/4HANA Cloud 2408 or higher.
- Example on-premise format: https://someurl:12345, client: 010
- If updating connection, delete and recreate the saved system in SAP Systems view.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "systemName": "MyABAPSystem",
  "type": "ABAP",
  "url": "https://someurl:12345",
  "client": "010",
  "authType": "ServiceKey", // or "ReentranceTicket" or other ABAP auth
  "secureStorage": "CredentialManager" // Windows or "Keychain" for macOS
}
```

**STEP**: Use a saved SAP System in VS Code

**DESCRIPTION**: Select a previously saved system in the generator. The wizard skips authentication if saved credentials are valid; otherwise it prompts for reauthentication (for example, when password expired).

**LANGUAGE**: Text

**CODE**:
```text
1. Open SAP Fiori application generator in VS Code.
2. Choose "Connect to an SAP System" -> "Select Saved System".
3. If prompted, reauthenticate with username/password or browser login.
```

**STEP**: Use destinations in SAP Business Application Studio and reference services via .dest

**DESCRIPTION**: In Business Application Studio, the generator lists configured destinations. To reference a destination in the generator, use the destination name with the .dest host prefix. The destination must contain a catalog service exposing available OData V2/V4 services.

- If you need to route via a destination, use: https://<DestinationName>.dest/<servicePath>
- Ensure destination access/permissions are granted for the BAS instance.

**LANGUAGE**: Bash / Text

**CODE**:
```text
Destination example:
  - Destination defined in BAS: Name = MyDestination
  - Destination URL target: https://someurl.com/someservice

In SAP Fiori generator "Data source URL" enter:
  https://MyDestination.dest/someservice
```

**STEP**: Connect directly to an OData Service (V2 or V4)

**DESCRIPTION**: Enter an OData endpoint URL (authenticated or unauthenticated). Ensure the service OData version matches the selected template (V2 template requires OData V2 endpoint, V4 template requires OData V4 endpoint). The generator validates compatibility and will prompt for credentials if required.

**LANGUAGE**: Text

**CODE**:
```text
1. In generator, choose "Connect to an OData Service".
2. Enter OData service URL, e.g. https://services.odata.org/V4/(S(...))/TripPinServiceRW/
3. If prompted, enter username/password.
4. Confirm generator shows matching OData version for chosen template.
```

**STEP**: Upload a metadata XML (EDMX) file for offline generation

**DESCRIPTION**: Upload an EDMX-format metadata XML to generate the app without a live backend. The generator validates the metadata.xml and then allows entity selection. Note: generated app will be mock-data only.

**LANGUAGE**: Text

**CODE**:
```text
1. In generator, choose "Upload a metadata XML".
2. Select your file: ./metadata.xml (EDMX format only)
3. After validation, choose main entity for the List Report or Object Page.
```

**STEP**: (Deprecated) Connect to SAP Business Accelerator Hub (API Business Hub)

**DESCRIPTION**: SAP Business Accelerator Hub is deprecated in the generator and will be removed. Only use for local sandbox development; do NOT use for production. Ensure you logged into https://api.sap.com/ at least once. In the wizard select "Connect to SAP Business Accelerator Hub", choose a predefined service, provide username/password, and proceed.

**LANGUAGE**: Text

**CODE**:
```text
1. In generator, Data source -> "Connect to SAP Business Accelerator Hub".
2. Select predefined service (e.g., Content, Request of Quotation).
3. Enter Username and Password and click Next.
Warning: Sandbox use only. See https://api.sap.com/
```

**STEP**: Use a Local CAP Project (generic)

**DESCRIPTION**: Detect or manually select a workspace CAP project. Generator reads CAP services (OData V4 by default). Note: Local CAP Project data source supports List Report Object Page and Analytical List Page templates based on OData V4 only. If @sap/cds version mismatch is detected, generation will be blocked.

**LANGUAGE**: Text

**CODE**:
```text
1. In generator, Data source -> "Use a Local CAP Project".
2. If one CAP project exists it is auto-selected; otherwise choose detected project or manually browse to folder.
3. Select OData service from dropdown, then select main entity for the List Report.
4. Fill Project Attributes (module name, app title, namespace) and Finish.
```

**STEP**: Local CAP Node.js Project — prerequisites and generator steps

**DESCRIPTION**: Ensure Node.js is installed. If using sample projects, set workspace root to the cloned repository and run npm install. Use the generator to select the CAP project and service, and set project attributes (example values provided).

**LANGUAGE**: Bash / JSON

**CODE**:
```bash
# Verify Node.js and install dependencies in CAP Node.js sample
node --version
npm --version

# In cloned CAP project root
npm install
```

```json
// Example Project Attributes to enter in generator (Node.js)
{
  "moduleName": "incidents",
  "applicationTitle": "My Incidents",
  "applicationNamespace": "sap.fe.demo"
}
```

**STEP**: Local CAP Java Project — prerequisites, sample run, and generator steps

**DESCRIPTION**: Install and verify cds, java, and maven. If using CAP Java sample, run mvn spring-boot:run to start services. Use the generator to select the CAP project and service (e.g., CatalogService), set project attributes (example values provided), finish, then start the generated app if required.

**LANGUAGE**: Bash / JSON / Text

**CODE**:
```bash
# Verify prerequisites
cds --version
java --version
mvn --version

# In CAP Java sample project folder
mvn spring-boot:run
# After server starts, open: http://localhost:8080
```

```json
// Example Project Attributes to enter in generator (Java)
{
  "moduleName": "books",
  "applicationTitle": "Books"
}
```

```text
Post-generation steps (example):
1. Click Finish in generator.
2. In terminal run: mvn spring-boot:run
3. Open: app/books/README.md and follow the link, e.g. http://localhost:8080/books/webapp/index.html
4. When prompted, use credentials shown in terminal (commonly user/user or admin/admin).
```

**STEP**: Notes and Validation Checks

**DESCRIPTION**: Checklist and important validation points to apply during generation.

**LANGUAGE**: Text

**CODE**:
```text
- Ensure OData service version matches the chosen template (V2 vs V4).
- For Service Key auth: obtain service key from admin and follow browser-based auth.
- Store saved system credentials in OS secure storage (Windows Credential Manager or macOS Keychain).
- If generator reports @sap/cds version mismatch for CAP projects, install matching @sap/cds version or adjust project.
- Use metadata.xml only for mock-data development.
- SAP Business Accelerator Hub is deprecated for generation; prefer Service Center in BAS or real backends.
```
--------------------------------

**TITLE**: Floorplan Properties — manifest.json configuration examples for SAP Fiori elements (OData V2 & V4)

**INTRODUCTION**: This document shows concise, actionable manifest.json snippets and placement guidance to configure floorplan-level properties (main entity, navigation entity, table type, variant management, analytical-list settings) for Fiori elements list/report, worklist, and analytical list pages. Use these snippets to quickly update app configuration in manifest.json for OData V2 and OData V4 floorplans.

**TAGS**: fiori-tools, fiori-elements, manifest.json, OData V2, OData V4, list-report, worklist, analytical-list, table-type, variant-management

**STEP**: 1 — Core floorplan properties (main entity, navigation entity, table type)

**DESCRIPTION**: Define the main entity set that populates the list page, and optionally the navigation/association name used to navigate from the main entity. Set the table type for list floorplans that support tables. Place these keys under the page entry in manifest.json: sap.ui.generic.app.pages[].entitySet and sap.ui.generic.app.pages[].component.settings.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "manifest.json": {
    "sap.ui.generic.app": {
      "pages": [
        {
          "entitySet": "MainEntitySet",                // Main entity used to populate the list page
          "component": {
            "name": "sap.suite.ui.generic.template.ListReport", // example floorplan component
            "settings": {
              "navigationEntity": "ToRelatedEntity",  // navigation association name (optional)
              "tableType": "ResponsiveTable"          // supported values depend on floorplan, e.g., "ResponsiveTable", "AnalyticalTable", "GridTable"
            }
          }
        }
      ]
    }
  }
}
```

**STEP**: 2 — Worklist page variant management (OData V2)

**DESCRIPTION**: Enable variant management at table level or page level for Worklist pages on OData V2 floorplans. Update manifest.json under the specific page component settings. For table-level variant management set variantManagementHidden to false. For page-level set smartVariantManagement to true and variantManagementHidden to false.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "manifest.json": {
    "sap.ui.generic.app": {
      "pages": [
        {
          "entitySet": "WorklistEntitySet",
          "component": {
            "name": "sap.suite.ui.generic.template.ListReport",
            "settings": {
              // Table-level variant management (show variant UI on the table)
              "variantManagementHidden": false
            }
          }
        },
        {
          "entitySet": "WorklistEntitySet_PageLevelVariant",
          "component": {
            "name": "sap.suite.ui.generic.template.ListReport",
            "settings": {
              // Page-level variant management (enable SmartVariantManagement at page level)
              "smartVariantManagement": true,
              "variantManagementHidden": false
            }
          }
        }
      ]
    }
  }
}
```

**STEP**: 3 — Analytical List Page properties (OData V2)

**DESCRIPTION**: Configure Analytical List Page (ALP) options for OData V2 floorplans in manifest.json. Common keys: tableType (defines supported table kinds), allowMultiSelect (enable checkboxes for multi-row selection), autoHide (chart/table interaction: true = chart acts as filter; false = highlights rows), enableSmartVariantManagement (variant management at page level).

**LANGUAGE**: JSON

**CODE**:
```json
{
  "manifest.json": {
    "sap.ui.generic.app": {
      "pages": [
        {
          "entitySet": "AnalyticalMainEntity",
          "component": {
            "name": "sap.suite.ui.generic.template.AnalyticalListPage",
            "settings": {
              // Example of supported table types; use values allowed for your ALP version
              "tableType": ["AnalyticalTable", "GridTable"],
              // Enable checkboxes for multi-select (effective when actions support multi-select)
              "allowMultiSelect": true,
              // Chart & table interaction: true => chart filters table; false => highlights rows
              "autoHide": false,
              // Enable Smart Variant Management at page level
              "enableSmartVariantManagement": true
            }
          }
        }
      ]
    }
  }
}
```

**STEP**: 4 — Analytical List Page properties (OData V4): selection mode

**DESCRIPTION**: For ALP floorplans based on OData V4, set the table row selection mode in manifest.json. Place selectionMode under the page component settings. Common selectionMode values: "None", "Single", "Multi" (or framework-specific equivalents such as "MultiToggle"). Verify exact allowed values for your Fiori elements/UI5 version.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "manifest.json": {
    "sap.ui.generic.app": {
      "pages": [
        {
          "entitySet": "AnalyticalMainEntityV4",
          "component": {
            "name": "sap.suite.ui.generic.template.AnalyticalListPage",
            "settings": {
              // Row selection mode for generated table (OData V4 ALP)
              "selectionMode": "Multi"    // options: "None", "Single", "Multi" (or UI5 equivalent)
            }
          }
        }
      ]
    }
  }
}
```

**STEP**: 5 — Notes and placement guidance

**DESCRIPTION**: Use these practical rules when editing manifest.json:
- All examples go inside manifest.json under the sap.ui.generic.app.pages array for the page that represents the floorplan.
- Replace placeholders like MainEntitySet, ToRelatedEntity, and component name with your app-specific values.
- Table type and selection mode options depend on the floorplan and the UI5/Fiori elements release; consult your project's Fiori elements version docs if a key is rejected.
- For parametrized entity sets, use the result entity set name for entitySet.
- For navigation entity, provide the association/navigation name (annotation or association name) used by the app to navigate between pages.
--------------------------------

**TITLE**: SAP Fiori Elements — Guided Generation Checklist and Example Artifacts

**INTRODUCTION**: This document captures the exact steps, validation rules, and example artifacts used when generating an SAP Fiori Elements application. Use it as a reference to implement automation, scaffolding scripts, or to validate user input in a generator UI. It preserves file paths and related configuration options referenced in the original UI wizard.

**TAGS**: sap-fiori, fiori-elements, scaffolding, manifest, mta, sapui5, project-generation

STEP: 1 — Select Floorplan
DESCRIPTION: Choose one of the supported Fiori Elements floorplans for the application. This decision determines the template and manifest structure used by the generator.
LANGUAGE: Plain
CODE:
```Plain
Supported floorplans:
- List Report Object Page
- Worklist
- Analytical List Page
- Overview Page

Reference: supported-floorplans-2b2b12e.md
```

STEP: 2 — Select Data Source
DESCRIPTION: Select the data source that the generated app will use. Options include connecting to SAP systems, specifying OData endpoint URLs, uploading metadata, using the SAP Business Accelerator Hub, or using a local CAP project. If credentials are required, the user must enter them and press the login icon (images/Login_button_App_Gen_fb8dd99.png).
LANGUAGE: Plain
CODE:
```Plain
Data source options:
- Connect to an SAP System
  ref: data-source-9906181.md#loio99061814ead548808d539861fb27bafb__section_tpk_mzx_v4b
- Connect to an OData Service with a customized URL
  ref: data-source-9906181.md#loio99061814ead548808d539861fb27bafb__section_i2d_yzx_v4b
- Connect to an OData service
  ref: data-source-9906181.md#loio99061814ead548808d539861fb27bafb__section_sx1_chy_v4b
- Upload a Metadata Document
  ref: data-source-9906181.md#loio99061814ead548808d539861fb27bafb__section_xk3_nhy_v4b
- Connect to SAP Business Accelerator Hub
  ref: data-source-9906181.md#loio99061814ead548808d539861fb27bafb__section_rgz_xhy_v4b
- Use a Local CAP Project
  ref: data-source-9906181.md#loio99061814ead548808d539861fb27bafb__section_fgh_m3y_v4b

Note: If username/password required -> user fills credentials and clicks login icon (images/Login_button_App_Gen_fb8dd99.png).
```

STEP: 3 — Configure Associated Floorplan Properties (Main & Navigation Entities)
DESCRIPTION: Configure floorplan-specific properties required by the chosen template. Examples: Main entity (entitySet) and Navigation entity (navigation targets). The generator will write these into the application's manifest (sap.ui.generic.app) for Fiori Elements templates.
LANGUAGE: JSON
CODE:
```JSON
{
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "MainEntitySet",              // main entity used by the floorplan
        "component": {
          "name": "sap.suite.ui.generic.template.ListReport" // template component, varies by floorplan
        },
        "navigation": {
          "Detail": {
            "route": "ObjectPageRoute",
            "entitySet": "NavigationEntitySet"    // navigation target entity set
          }
        }
      }
    ]
  }
}
```
Reference: floorplan-properties-745ae0c.md

STEP: 4 — Project Attributes (validation rules and generator mapping)
DESCRIPTION: Collect and validate project attributes from the user. Use the rules below to validate input and to populate generated files (folder name, package.json, manifest namespace, SAPUI5 version, and optional deployment/mta entries).
LANGUAGE: JSON / Regex / YAML
CODE:
```Regex
# Validation rules
# Module name: must be URL-friendly; no spaces. Use for generated folder name and package.json.name
^[A-Za-z0-9._-]+$

# Application namespace: must start with a letter; contains letters, digits and periods only
^[A-Za-z][A-Za-z0-9.]*$
```

```JSON
// Example: package.json will use module name as package name
{
  "name": "myModuleName",   // populated from Module name field (required)
  "version": "0.0.1",
  "private": true
}
```

```Plain
Project folder rules:
- Project folder path (required): parent folder where generator will create a new folder named <module-name>.
  Example: /path/to/parent/<module-name>
- You cannot select a project folder path that already contains a SAP Fiori application.
- To create an application inside a CAP project, select "Local CAP Project" as the Data Source in Step 2.

SAPUI5 minimum version:
- Selector: dropdown grouped by maintenance status (see https://ui5.sap.com/versionoverview.html)
- Default: current default version is preselected
- If source system is ABAP on Premise, default matches ABAP system's SAPUI5 version when possible
- For OData V4 data source: list restricted to most recent UI5 versions
```

```YAML
# Optional: add deployment configuration to an existing MTA (if project created inside an app router config project with mta.yaml)
# Example snippet that generator may add to the mta.yaml
modules:
  - name: myModuleName
    type: com.sap.html5
    path: <module-name>
    provides: []
    requires: []
```

Additional options (defaults):
- Adding Deployment Configuration to an Existing MTA Deployment File: generator will auto-use an existing MTA file if present. Ref: ../Additional-Configuration/adding-an-sap-fiori-application-to-an-mta-deployment-file-with-5a17ba6.md#loiod7525cef6f6c4aa4acf3ec09c5a8eacb
- Add deployment configuration: default No. Ref: ../Additional-Configuration/additional-configuration-9bea64e.md#loio9bea64e63b824261932d90037ce3c5ae__section_itv_dk5_t4b
- Add FLP configuration: default No. Ref: ../Additional-Configuration/additional-configuration-9bea64e.md#loio9bea64e63b824261932d90037ce3c5ae__section_hbd_gzy_t4b
- Configure virtual endpoints for local preview: default Yes. Ref: ../../Previewing-an-Application/convert-a-project-to-use-virtual-endpoints-630ddec.md
- Configure advanced options: default No. Ref: ../Additional-Configuration/additional-configuration-9bea64e.md#loio9bea64e63b824261932d90037ce3c5ae__section_uhj_l2z_t4b

User action: provide values for prompts and click Finish.

STEP: 5 — Generate Application (output layout and post-generation files)
DESCRIPTION: Clicking Finish triggers generation. The generator creates a folder named after the Module name and populates common Fiori Elements artifacts: package.json, webapp/manifest.json, Component.js, optional mta.yaml, and deployment/FLP configuration files if selected.
LANGUAGE: Plain / JSON (example structure)
CODE:
```Plain
Post-generation example project structure:
<module-name>/
  package.json                  # name set to Module name
  webapp/
    manifest.json               # sap.app, sap.ui.generic.app pages, dataSources
    Component.js
    i18n/
    view/                       # floorplan-specific views (may be generated or template-driven)
  xs-app.json or neo-app.json   # if local preview or platform config requested
  mta.yaml                      # if Add deployment configuration = Yes OR existing app router used
  .vscode/                      # optional workspace tasks
```

```JSON
// Example manifest fragment written by generator for a List Report -> Object Page
{
  "sap.app": {
    "id": "com.example.myModuleName",
    "title": "Application title"
  },
  "sap.ui5": { },
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "MainEntitySet",
        "component": { "name": "sap.suite.ui.generic.template.ListReport" }
      }
    ]
  }
}
```

Final note:
- Click Finish to run generation. Validate created files and, if virtual endpoints were enabled, local preview will use virtual endpoints (see ../../Previewing-an-Application/convert-a-project-to-use-virtual-endpoints-630ddec.md).
--------------------------------

**TITLE**: Supported Floorplans for SAP Fiori elements (fiori-tools)

**INTRODUCTION**: This document summarizes the SAP Fiori elements floorplans supported by fiori-tools and gives concrete, copy-pasteable manifest and extension examples. Use these snippets as starting points in webapp/manifest.json and extension files to generate List Report, Object Page, Worklist, Analytical List Page, Overview Page, Form Entry Object Page, and to apply the Flexible Programming Model (controller extensions).

**TAGS**: fiori, sapui5, odata, floorplan, list-report, object-page, worklist, analytical-list-page, overview-page, form-entry, flexible-programming-model, manifest.json, extension

**STEP**: 1 — List Report + Object Page (manifest.json)

**DESCRIPTION**: Configure a List Report page and its corresponding Object Page in webapp/manifest.json. Use sap.ui.generic.app pages to declare entitySet and component for each page. Replace entitySet names with your service entity sets. Links: List Report (https://experience.sap.com/fiori-design-web/list-report-floorplan-sap-fiori-element/), Object Page (https://experience.sap.com/fiori-design-web/object-page/).

**LANGUAGE**: JSON

**CODE**:
```json
// File: webapp/manifest.json (manifest fragment)
{
  "sap.ui.generic.app": {
    "pages": [
      {
        "name": "ListReport",
        "component": "sap.suite.ui.generic.template.ListReport",
        "entitySet": "Products",
        "settings": {
          "tableType": "ResponsiveTable",
          "navigation": {
            "detail": {
              "route": "ObjectPage"
            }
          }
        }
      },
      {
        "name": "ObjectPage",
        "component": "sap.suite.ui.generic.template.ObjectPage",
        "entitySet": "Products",
        "settings": {
          "navigation": {}
        }
      }
    ]
  }
}
```

**STEP**: 2 — Worklist (use List Report/Object Page configuration)

**DESCRIPTION**: Worklist is typically implemented using List Report + Object Page options. You can reuse a List Report page but mark it as a worklist context. For OData V4 sources note: SAPUI5 1.99+ is required. For detailed design guidance see Worklist Floorplan (https://experience.sap.com/fiori-design-web/work-list/).

**LANGUAGE**: JSON

**CODE**:
```json
// File: webapp/manifest.json (worklist example fragment)
{
  "sap.ui.generic.app": {
    "pages": [
      {
        "name": "Worklist",
        "component": "sap.suite.ui.generic.template.ListReport",
        "entitySet": "Tasks",
        "settings": {
          "worklist": true,
          "tableType": "ResponsiveTable",
          "quickFilter": true
        }
      },
      {
        "name": "WorklistObjectPage",
        "component": "sap.suite.ui.generic.template.ObjectPage",
        "entitySet": "Tasks"
      }
    ]
  }
}
```

**STEP**: 3 — Analytical List Page (ALP)

**DESCRIPTION**: Configure an Analytical List Page using sap.suite.ui.generic.template.AnalyticalListPage in manifest.json. Provide chart and table settings. For OData V4 data sources, only SAPUI5 versions 1.90+ are supported. More: Analytical List Page (https://experience.sap.com/fiori-design-web/analytical-list-page/).

**LANGUAGE**: JSON

**CODE**:
```json
// File: webapp/manifest.json (analytical list page fragment)
{
  "sap.ui.generic.app": {
    "pages": [
      {
        "name": "AnalyticalListPage",
        "component": "sap.suite.ui.generic.template.AnalyticalListPage",
        "entitySet": "SalesOrders",
        "settings": {
          "chart": {
            "measure": "Revenue",
            "dimensions": ["Region"]
          },
          "tableType": "AnalyticalTable",
          "navigation": {
            "detail": {
              "route": "SalesOrderObjectPage"
            }
          }
        }
      },
      {
        "name": "SalesOrderObjectPage",
        "component": "sap.suite.ui.generic.template.ObjectPage",
        "entitySet": "SalesOrders"
      }
    ]
  }
}
```

**STEP**: 4 — Overview Page (OVP)

**DESCRIPTION**: Configure an Overview Page using the sap.ovp manifest section. Define cards and their templates. Overview Page docs: https://experience.sap.com/fiori-design-web/overview-page/

**LANGUAGE**: JSON

**CODE**:
```json
// File: webapp/manifest.json (overview page fragment)
{
  "sap.ovp": {
    "cards": {
      "SalesKPI": {
        "model": "ODataModel",
        "template": "sap.ovp.cards.charts.analytical",
        "settings": {
          "title": "Sales KPI",
          "annotationPath": "com.sap.vocabularies.UI.v1.Chart#Sales"
        }
      },
      "TopProductsList": {
        "model": "ODataModel",
        "template": "sap.ovp.cards.list",
        "settings": {
          "title": "Top Products",
          "annotationPath": "com.sap.vocabularies.UI.v1.LineItem#TopProducts"
        }
      }
    }
  }
}
```

**STEP**: 5 — Form Entry Object Page (create via Object Page)

**DESCRIPTION**: Create a form-driven create flow inside an Object Page. Use the Object Page floorplan and annotation-driven creation patterns (Insertable/CreationFacets) or manifest settings to enable creation. The example below marks an object page intended for create/form entry flows. See Object Page docs: https://experience.sap.com/fiori-design-web/object-page/

**LANGUAGE**: JSON

**CODE**:
```json
// File: webapp/manifest.json (form entry object page fragment)
{
  "sap.ui.generic.app": {
    "pages": [
      {
        "name": "FormEntryObjectPage",
        "component": "sap.suite.ui.generic.template.ObjectPage",
        "entitySet": "Customers",
        "settings": {
          "create": {
            "createMode": "form"
          },
          "toolbar": {
            "create": true
          }
        }
      }
    ]
  }
}
```

**STEP**: 6 — Flexible Programming Model: Controller Extension (manifest + TS example)

**DESCRIPTION**: Use the Flexible Programming Model to extend Fiori elements apps. Register a controller extension in manifest.json and implement the extension controller in webapp/extension. You can use SAPUI5 controls or custom logic in extension points. Example below shows manifest registration and a minimal TypeScript extension controller. Live examples: Custom Page explorer (https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/controllerExtensions/customPage).

**LANGUAGE**: JSON

**CODE**:
```json
// File: webapp/manifest.json (controller extension registration fragment)
{
  "sap.ui5": {
    "extends": {
      "extensions": {
        "sap.ui.controllerExtensions": {
          "sap.fe.templates.ObjectPage.controller.ObjectPage": {
            "controllerName": "extension.CustomPage"
          }
        }
      }
    }
  }
}
```

**LANGUAGE**: TypeScript

**CODE**:
```typescript
// File: webapp/extension/CustomPage.controller.ts
import Controller from "sap/ui/core/mvc/Controller";

export default Controller.extend("extension.CustomPage", {
  onInit(): void {
    // Initialization logic for the extension
    // Example: attach custom handlers, modify view model, call OData
    // Keep logic safe for OData V4 or V2 depending on your app
    console.log("CustomPage extension initialized");
  },

  onAfterRendering(): void {
    // Post-render hooks or UI adjustments
  },

  // Add custom event handlers to be referenced from XML fragments or extension points
  onCustomAction(): void {
    // Custom action implementation
  }
});
```

**STEP**: 7 — Compatibility Notes

**DESCRIPTION**: Important version constraints for OData V4 floorplans:
- Worklist floorplans using an OData V4 data source: require SAPUI5 1.99 or above.
- Analytical List Page floorplans using an OData V4 data source: require SAPUI5 1.90 or above.

Refer to:
- Worklist Floorplan: https://experience.sap.com/fiori-design-web/work-list/
- Analytical List Page: https://experience.sap.com/fiori-design-web/analytical-list-page/
- OVP: https://experience.sap.com/fiori-design-web/overview-page/
- List Report/Object Page: https://experience.sap.com/fiori-design-web/list-report-floorplan-sap-fiori-element/ and https://experience.sap.com/fiori-design-web/object-page/
- Flexible Programming Model examples: https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/controllerExtensions/customPage
--------------------------------

**TITLE**: Basic Template — SAPUI5 Minimal App with Tests

**INTRODUCTION**: Minimal SAPUI5 standalone template intended as a blank canvas to start building an SAPUI5 app. Includes the essential webapp file layout, a sample XML view (header + title from sap.m), a small controller, a formatter, a minimal manifest, and sample QUnit tests located in webapp/test. This template does not include Node.js features or Launchpad integration (e.g., Save as Tile) — those must be added manually.

**TAGS**: fiori-tools, sapui5, ui5, template, basic, tests, standalone

**STEP**: 1 — Project file structure (essential files and folders)

**DESCRIPTION**: Create the basic file/folder layout under the webapp folder. Keep the file paths exact to follow the template structure used by tools and tests.

**LANGUAGE**: text

**CODE**:
```text
webapp/
  index.html                 # App entry page (bootstrap UI5 and load XML view)
  manifest.json              # Minimal app descriptor
  view/
    Main.view.xml            # XML view with sap.m Page and title
  controller/
    Main.controller.js       # Controller for the view
  model/
    formatter.js             # Example formatter file
  test/
    formatter.qunit.js       # QUnit tests for formatters
    Main.controller.qunit.js # QUnit tests for controller
  i18n/
    i18n.properties          # optional localization file referenced in manifest.json
```

**STEP**: 2 — index.html (webapp/index.html)

**DESCRIPTION**: Minimal standalone HTML that bootstraps UI5 from the SAP CDN, loads sap.m, sets a resource root mapping to "basic", and instantiates the XML view. File must live at webapp/index.html.

**LANGUAGE**: HTML

**CODE**:
```html
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Basic App</title>
  <!-- UI5 bootstrap from CDN -->
  <script
    id="sap-ui-bootstrap"
    src="https://ui5.sap.com/resources/sap-ui-core.js"
    data-sap-ui-theme="sap_fiori_3"
    data-sap-ui-libs="sap.m"
    data-sap-ui-resourceroots='{"basic": "./"}'>
  </script>
  <script>
    // Create and place the XML view defined in webapp/view/Main.view.xml
    sap.ui.getCore().attachInit(function () {
      new sap.ui.xmlview({
        viewName: "basic.view.Main"
      }).placeAt("content");
    });
  </script>
</head>
<body class="sapUiBody" id="content"></body>
</html>
```

**STEP**: 3 — XML view (webapp/view/Main.view.xml)

**DESCRIPTION**: A simple XML view using sap.m with an App and Page. The Page title shows the starting title. The view is referenced as "basic.view.Main" by index.html.

**LANGUAGE**: XML

**CODE**:
```xml
<mvc:View
  controllerName="basic.controller.Main"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  displayBlock="true">
  <App>
    <pages>
      <Page title="Basic App">
        <content>
          <Text text="Welcome to the Basic Template — start coding here."/>
        </content>
      </Page>
    </pages>
  </App>
</mvc:View>
```

**STEP**: 4 — Controller (webapp/controller/Main.controller.js)

**DESCRIPTION**: Lightweight controller skeleton. Place under webapp/controller and use AMD-style sap.ui.define.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
sap.ui.define([
  "sap/ui/core/mvc/Controller"
], function (Controller) {
  "use strict";
  return Controller.extend("basic.controller.Main", {
    onInit: function () {
      // Initialization logic here
    }
    // Add event handlers, routing helpers, model setup etc.
  });
});
```

**STEP**: 5 — Formatter (webapp/model/formatter.js)

**DESCRIPTION**: Example formatter module and functions. Tests below exercise this module.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
sap.ui.define([], function () {
  "use strict";
  return {
    uppercase: function (s) {
      return s ? String(s).toUpperCase() : "";
    }
    // Add more reusable formatter functions here
  };
});
```

**STEP**: 6 — Minimal manifest (webapp/manifest.json)

**DESCRIPTION**: Minimal application descriptor. Keeps the app standalone but provides metadata and i18n reference used by many tools.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.app": {
    "id": "basic",
    "type": "application",
    "i18n": "i18n/i18n.properties",
    "applicationVersion": { "version": "1.0.0" }
  },
  "sap.ui": {
    "technology": "UI5"
  }
}
```

**STEP**: 7 — Formatter tests (webapp/test/formatter.qunit.js)

**DESCRIPTION**: QUnit tests for the formatter functions. Place under webapp/test and run with a QUnit runner (e.g., open test HTML that loads QUnit + these modules). Tests illustrate basic assertions for formatters.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
sap.ui.require([
  "basic/model/formatter"
], function (formatter) {
  QUnit.module("Formatter Tests");

  QUnit.test("uppercase converts string to upper case", function (assert) {
    assert.strictEqual(formatter.uppercase("abc"), "ABC", "lowercase -> uppercase");
    assert.strictEqual(formatter.uppercase(""), "", "empty string -> empty");
    assert.strictEqual(formatter.uppercase(null), "", "null -> empty string");
  });

  QUnit.start();
});
```

**STEP**: 8 — Controller tests (webapp/test/Main.controller.qunit.js)

**DESCRIPTION**: Simple QUnit tests that assert presence of controller and basic lifecycle method. Useful as a starting point for unit tests for controllers.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
sap.ui.require([
  "basic/controller/Main.controller"
], function (MainController) {
  QUnit.module("Controller Tests");

  QUnit.test("Controller has onInit function", function (assert) {
    var ctrl = new MainController();
    assert.ok(typeof ctrl.onInit === "function", "onInit exists and is a function");
  });

  QUnit.start();
});
```

**STEP**: 9 — Notes: Standalone vs Launchpad / Save as Tile

**DESCRIPTION**: This template is standalone and contains no Node.js or Launchpad features. To convert to a Launchpad (FLP) app you must:
- Add the required Launchpad configuration (tile, catalog, semantic objects) and backend services.
- Implement the "Save as Tile" feature and register the tile in the FLP catalog.
- Update manifest.json/neo-app configuration according to your deployment target (SAP BTP, ABAP, etc.)

**LANGUAGE**: text

**CODE**:
```text
Manual conversion checklist:
- Add Launchpad tile metadata and catalog entries (FLP config or Fiori Launchpad designer).
- Implement client-side "Save as Tile" UI & service calls or rely on platform-provided services.
- Ensure manifest.json includes necessary sap.flp related properties per your platform.
```
--------------------------------

**TITLE**: Data Source — SAP Fiori Application Generator (fiori-tools) — Connection Options and Examples

**INTRODUCTION**: This document describes the actionable steps and concise code-like examples needed to connect the SAP Fiori application generator (fiori-tools) to data sources during project generation. It covers connecting to SAP systems (VS Code and Business Application Studio), OData endpoints (direct and via destinations), uploading metadata.xml for mock generation, using SAP Business Accelerator Hub (deprecated), and selecting a local CAP project. Use the examples as inputs for automation or generator integrations.

**TAGS**: fiori-tools, sap, odata, metadata, destination, cap, sap-btp, sap-s4hana

**STEP**: 1 — Connect to an SAP System (VS Code)

**DESCRIPTION**: Add or select a saved SAP system connection when running the generator from VS Code. Provide a stable system name, system URL, optional client ID (for on-premise ABAP), and choose authentication: Service Key (BTP-hosted ABAP) or Reentrance Ticket (S/4HANA Cloud). The generator will open a browser to authenticate when required. Systems can be saved to OS secure storage so credentials are persisted.

- Authentication options:
  - Service Key — provide the service key (JSON blob) for the SAP ABAP system on BTP. The generator will prompt to authenticate via browser once service key is provided.
  - Reentrance Ticket — provide S/4HANA Cloud URL and authenticate in the opened browser window.
- Notes:
  - Reentrance tickets require SAP S/4HANA Cloud 2408 or higher.
  - After authentication, the generator lists OData services available for the logged-in user (Service dropdown shows "Service (for user [<USERNAME>])").
  - For on-premise ABAP provide URL and optional client ID (e.g., https://someurl:12345, client: 010).
  - Saved system information is stored in OS secure storage:
    - Microsoft Windows: Keychain.
    - macOS: Credential Manager.
  - When connecting for the first time, only the "New System" option is available.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "systemName": "MySAPSystem",
  "type": "ABAP",                  // "ABAP" or "BTP-ABAP"
  "url": "https://someurl:12345",
  "client": "010",                 // optional for on-premise
  "authType": "ServiceKey",        // "ServiceKey" | "ReentranceTicket" | "Basic"
  "serviceKeyFile": "service-key.json" // when authType is ServiceKey (local path or pasted JSON)
}
```

**STEP**: 2 — Service Key Example (context only)

**DESCRIPTION**: Example placeholder structure for a BTP service key JSON file used with Service Key authentication. The generator expects a service-key artifact that contains credentials and endpoint info. Replace placeholders with the actual service key provided by the administrator.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "name": "example-service-key",
  "instanceid": "xxxx-xxxx-xxxx",
  "credentials": {
    "url": "https://<s4hana-cloud-host>/sap/opu/odata/sap/<SERVICE>",
    "client": "100",
    "user": "<user>",
    "password": "<password_or_token>"
  }
}
```

**STEP**: 3 — Connect to an SAP System (Business Application Studio)

**DESCRIPTION**: In SAP Business Application Studio (BAS), the generator automatically retrieves configured destinations for the BAS instance. Select a destination from the list. If you lack access to the destination endpoint, an error will be shown by the generator.

**LANGUAGE**: plain

**CODE**:
```text
Workflow in BAS:
1. Launch SAP Fiori Generator.
2. In Data Source selection choose "Connect to an SAP System".
3. Select a destination from the retrieved list.
4. If authentication is required, follow the browser-based login prompts.
```

**STEP**: 4 — Connect to an OData Service with a Customized URL (BAS destination pattern)

**DESCRIPTION**: If an OData endpoint is not directly reachable, configure a destination in SAP Business Application Studio and use the destination name with the .dest suffix in the generator's Data Source URL field. The generator will route through BAS destinations.

**LANGUAGE**: plain

**CODE**:
```text
Destination configuration:
- Destination name: MyDestination
- Destination URL: https://someurl.com/someservice

Generator Data Source URL (use destination name + .dest):
https://MyDestination.dest/someservice
```

**STEP**: 5 — Connect to an OData Service (direct URL)

**DESCRIPTION**: Provide a direct OData endpoint URL in the generator. Supported endpoints include unauthenticated and basic authentication endpoints. Ensure the OData version matches the selected template (e.g., OData V2 endpoint for OData V2 template). The wizard will notify if versions mismatch. The generator may prompt for username and password if required.

**LANGUAGE**: plain

**CODE**:
```text
Example OData endpoints:
- OData V2 (for V2 templates): https://api.example.com/odata/v2/MyService
- OData V4 (for V4 templates): https://api.example.com/odata/v4/MyService

When prompted, enter credentials (username/password) if endpoint requires basic auth.
```

**STEP**: 6 — Upload a metadata.xml (EDMX) to generate with mock data

**DESCRIPTION**: To generate an application without a live back end, upload an EDMX-format metadata.xml file. The generator validates the metadata.xml and then lets you choose entities to include. Generated applications using metadata.xml are limited to mock data.

**LANGUAGE**: XML

**CODE**:
```text
metadata file path example:
./local-data/metadata.xml

Requirements:
- File format: EDMX (OData metadata)
- File name: metadata.xml
- Result: Generator validates metadata.xml and exposes available entity sets for selection.
```

**STEP**: 7 — Connect to SAP Business Accelerator Hub (DEPRECATED)

**DESCRIPTION**: SAP Business Accelerator Hub is deprecated and slated for removal. It remains available only for local development/testing and cannot be used for production deployments. If selected, pick a predefined service, then provide username and password on the two authentication fields that appear. Replacement recommendation: use Service Center in SAP Business Application Studio.

**LANGUAGE**: plain

**CODE**:
```text
Deprecated usage:
1. Select "SAP Business Accelerator Hub" as data source.
2. Choose a predefined service (e.g., Just-In-Time Calls).
3. Enter Username and Password.
4. Click Next to generate a local-only (development) application.

Caveats:
- Do not use Accelerator Hub services for SAP Fiori UI development in production.
- Applications using Accelerator Hub cannot be deployed.
- Recommended alternative: Service Center in SAP Business Application Studio.
```

**STEP**: 8 — Use a Local CAP Project

**DESCRIPTION**: Point the generator to a local SAP Cloud Application Programming Model (CAP) Node.js project folder. The generator validates the folder to confirm it contains a supported CAP Node.js project and retrieves the services defined there.

**LANGUAGE**: plain

**CODE**:
```text
Expected CAP project structure (example):
/my-cap-project
  ├─ package.json         // contains @sap/cds or cds dependency
  ├─ srv/
  │   └─ cat-service.cds  // service definitions
  ├─ db/
  ├─ app.js               // optional Node.js entry
  └─ package-lock.json

Generator workflow:
1. Select "Use a Local CAP Project" in Data Source selection.
2. Provide folder path to project (e.g., /Users/dev/my-cap-project).
3. Generator validates and lists CAP services from srv/*.cds for selection.
```
--------------------------------

**TITLE**: Generate a Freestyle SAPUI5 Application with the SAP Fiori Generator

**INTRODUCTION**: Step-by-step instructions to generate a freestyle SAPUI5 application using the SAP Fiori generator. Includes required project attributes, validation patterns, and options for deployment, FLP configuration, and local preview.

**TAGS**: fiori-tools, sapui5, freestyle, generator, sap-fiori-generator

**STEP**: Prerequisites

**DESCRIPTION**: Ensure your environment is correct before starting the generator:
- If using SAP Business Application Studio, open a SAP Fiori dev space.
- Have access to the SAP Fiori generator in your IDE.

**LANGUAGE**: Text

**CODE**:
```Text
Prerequisite: Use SAP Business Application Studio -> SAP Fiori dev space (if applicable).
```

**STEP**: Select a template

**DESCRIPTION**: In the SAP Fiori generator UI, choose a template that supports freestyle SAPUI5 applications and proceed to the next step.

**LANGUAGE**: Text

**CODE**:
```Text
UI action: Select template -> Next
Reference: Supported Templates -> supported-templates-20d1146.md
```

**STEP**: Choose data source

**DESCRIPTION**: Select the data source for the generated application (OData, mock, etc.) and proceed.

**LANGUAGE**: Text

**CODE**:
```Text
UI action: Select Data source -> Next
Reference: Data Source -> data-source-37a0fcf.md
```

**STEP**: Enter view name

**DESCRIPTION**: Provide a name for the initial view to be generated and move on to project configuration.

**LANGUAGE**: Text

**CODE**:
```Text
UI action: Enter view name -> Next
Reference: Template Properties -> template-properties-c2a3c82.md
```

**STEP**: Configure project attributes (overview)

**DESCRIPTION**: Fill in project attributes. Mandatory fields are prefilled with default text. Validate values according to the rules below and configure optional settings as required.

**LANGUAGE**: Text

**CODE**:
```Text
UI action: Configure project attributes -> Finish
Mandatory fields are prefilled with defaults.
```

**STEP**: Configure project attributes (field definitions and validation)

**DESCRIPTION**: Detailed rules and examples for each project attribute. Use the validation patterns provided.

**LANGUAGE**: Text

**CODE**:
```Text
Fields:
- Module name (Required)
  * Purpose: Folder and package name for generated application.
  * Rules: Alphanumeric only, no spaces.
  * Example: myapp01
  * Validation regex: ^[A-Za-z0-9]+$

- Application title (Required)
  * Purpose: Header title for generated app.
  * Example: Customer Manager

- Application namespace (Required)
  * Purpose: SAPUI5 project namespace.
  * Rules: Must start with a letter; may contain letters, digits, and periods.
  * Example: com.example.customer
  * Validation regex: ^[A-Za-z][A-Za-z0-9.]*$

- Description
  * Purpose: Project description metadata.

- Project folder (Required)
  * Purpose: Parent folder where new application folder (named by Module name) will be created.
  * Behavior: If folder <project-folder>/<module-name> already exists, choose a different module name.
  * Example: /home/user/projects
  * Result: /home/user/projects/myapp01/

- Minimum SAPUI5 version
  * Purpose: Minimum SAPUI5 runtime version required by the app.
  * Behavior:
    - Dropdown lists versions grouped by maintenance status; default preselected.
    - If source system = ABAP on-premise, default = SAPUI5 version on ABAP system.
  * Reference: https://ui5.sap.com/versionoverview.html
```

**STEP**: Deployment and advanced options

**DESCRIPTION**: Options that control deployment configuration, FLP integration, local preview, and additional advanced flags.

**LANGUAGE**: Text

**CODE**:
```Text
Options:
- Add deployment configuration to MTA project
  * Use when an MTA file already exists in the chosen project folder path.
  * If generating inside an app router project with an MTA file, its deployment configuration is used by default.
  * Reference: ../Additional-Configuration/adding-an-sap-fiori-application-to-an-mta-deployment-file-with-5a17ba6.md#loio5a17ba6b62b2462aa0e25ffae7b8d728

- Add deployment configuration
  * Toggle whether to configure deployment settings during generation.
  * Reference: ../Additional-Configuration/additional-configuration-9bea64e.md#loio9bea64e63b824261932d90037ce3c5ae__section_itv_dk5_t4b

- Add FLP configuration
  * Toggle whether to add SAP Fiori launchpad configuration.
  * Reference: ../Additional-Configuration/additional-configuration-9bea64e.md#loio9bea64e63b824261932d90037ce3c5ae__section_hbd_gzy_t4b

- Configure virtual endpoints for local preview
  * When enabled, preview files are NOT created and virtual endpoints are used instead for local preview.

- Configure advanced options
  * Toggle to display more advanced generation options.
  * Reference: ../Additional-Configuration/additional-configuration-9bea64e.md#loio9bea64e63b824261932d90037ce3c5ae__section_uhj_l2z_t4b
```

**STEP**: Finish generation

**DESCRIPTION**: Confirm and generate the application. The generator will create a folder named by Module name inside the chosen Project folder and populate files according to selected template and options.

**LANGUAGE**: Text

**CODE**:
```Text
UI action: Click Finish -> Generator creates project at: <Project folder>/<Module name>/
Example result path: /home/user/projects/myapp01/
```

**STEP**: Useful links and references

**DESCRIPTION**: Keep these links for deeper configuration and compatibility details.

**LANGUAGE**: Text

**CODE**:
```Text
- Supported Templates: supported-templates-20d1146.md
- Data Source: data-source-37a0fcf.md
- Template Properties: template-properties-c2a3c82.md
- SAPUI5 Versions Maintenance Status: https://ui5.sap.com/versionoverview.html
- Add to MTA: ../Additional-Configuration/adding-an-sap-fiori-application-to-an-mta-deployment-file-with-5a17ba6.md#loio5a17ba6b62b2462aa0e25ffae7b8d728
- Additional Configuration (deployment/FLP/advanced): ../Additional-Configuration/additional-configuration-9bea64e.md#loio9bea64e63b824261932d90037ce3c5ae__section_itv_dk5_t4b
```
--------------------------------

**TITLE**: Supported Templates for fiori-tools

**INTRODUCTION**: Quick reference for the templates supported by fiori-tools to scaffold freestyle SAPUI5 and SAP Fiori elements applications. Use these templates to generate project scaffolding with recommended file structure and ensure minimum SAPUI5 version compatibility.

**TAGS**: fiori-tools, SAPUI5, Fiori, templates, basic, custom-page, freestyle, fiori-elements

**STEP**: 1 — Basic Template

**DESCRIPTION**: Use the Basic template to create a freestyle SAPUI5 application scaffold (blank canvas) following best-practice file structure. The template sets up the minimal webapp structure so developers can start implementing UI and business logic immediately. Reference file: basic-template-14fdcc0.md

**LANGUAGE**: Bash

**CODE**:
```bash
# Example minimal project layout produced by a Basic template
my-app/
└── webapp/
    ├── index.html
    ├── manifest.json
    ├── Component.js
    ├── controller/
    │   └── Main.controller.js
    ├── view/
    │   └── Main.view.xml
    └── i18n/
        └── i18n.properties
```

**LANGUAGE**: JSON

**CODE**:
```json
// Minimal manifest.json snippet to include in Basic template projects
{
  "sap.app": {
    "id": "my.app",
    "type": "application",
    "i18n": "i18n/i18n.properties",
    "title": "{{appTitle}}"
  },
  "sap.ui5": {
    "dependencies": {
      "minUI5Version": "1.65.0"
    },
    "rootView": {
      "viewName": "my.app.view.Main",
      "type": "XML",
      "id": "app"
    }
  }
}
```

**STEP**: 2 — Custom Page Template (Fiori elements)

**DESCRIPTION**: Use the Custom Page template to create an SAP Fiori elements application containing a custom page based on the Flexible Programming Model. This template provisions a custom page building block (Page layout) to be extended inside a Fiori elements shell. Useful when you need a mix of standard Fiori elements behaviors and custom UI. See live examples and controller-extension patterns on the UI5 Fiori development portal.

**LANGUAGE**: Text

**CODE**:
```text
Live examples and documentation:
https://ui5.sap.com/test-resources/sap/fe/core/fpmExplorer/index.html#/controllerExtensions/customPage
Reference file for template: basic-template-14fdcc0.md (related/basic)
```

**LANGUAGE**: JSON

**CODE**:
```json
// Example manifest.json entry ensuring compatibility for a Fiori elements custom page
{
  "sap.app": {
    "id": "my.fiori.elements.app",
    "type": "application"
  },
  "sap.ui5": {
    "dependencies": {
      "minUI5Version": "1.65.0"
    },
    "extends": {
      "extensions": {}
    }
  },
  "sap.fiori": {
    "registrationIds": [],
    "archeType": "transactional"
  }
}
```

**STEP**: 3 — Caution: Minimum SAPUI5 Version

**DESCRIPTION**: Ensure all projects generated from these templates use SAPUI5 version 1.65.0 or higher. Add the minUI5Version entry in manifest.json to enforce runtime requirements and prevent compatibility issues.

**LANGUAGE**: JSON

**CODE**:
```json
// Enforce minimum SAPUI5 version in manifest.json
{
  "sap.ui5": {
    "dependencies": {
      "minUI5Version": "1.65.0"
    }
  }
}
```
--------------------------------

**TITLE**: Configure "View name" Template Property for SAPUI5 App Generation

**INTRODUCTION**: Use the template property "View name" to control the SAPUI5 view and controller filenames created by Fiori Tools application templates. Set this value when running the generator (interactive wizard) or in a template properties file so generated files follow your desired naming convention (e.g., webapp/view/<ViewName>.view.xml and webapp/controller/<ViewName>.controller.js).

**TAGS**: fiori-tools, SAPUI5, template, view-name, generator, code-generation

**STEP**: 1 — Provide the View Name in Template Properties

**DESCRIPTION**: Set the view name used by the generator. In interactive flows, enter the view name when prompted. For declarative generation, add a template properties file that includes a viewName property. The generator reads this value and creates the view & controller files accordingly.

**LANGUAGE**: JSON

**CODE**:
```json
// template-properties.json
{
  "viewName": "Main"    // Example: "Main", "App", "Detail", etc.
}
```

**STEP**: 2 — Generated File Paths and Naming Convention

**DESCRIPTION**: The generator creates a view XML and a controller JS using the provided viewName. Files are placed under webapp/view and webapp/controller respectively. Use your app namespace (example below uses "my.app") when referring to views in manifest.json or Component.

**LANGUAGE**: Plain text (file paths)

**CODE**:
```text
// Generated files (example when viewName = "Main" and namespace = my.app)
webapp/view/Main.view.xml
webapp/controller/Main.controller.js
```

**STEP**: 3 — Example Generated View (XML)

**DESCRIPTION**: Example minimal view created by the template generator. Replace content with your UI5 controls as needed. The filename is <ViewName>.view.xml.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- webapp/view/Main.view.xml -->
<mvc:View
  controllerName="my.app.controller.Main"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m">
  <App>
    <pages>
      <Page title="Main">
        <content>
          <Text text="Hello from Main view"/>
        </content>
      </Page>
    </pages>
  </App>
</mvc:View>
```

**STEP**: 4 — Example Generated Controller (JavaScript)

**DESCRIPTION**: Example controller skeleton created alongside the view. The controller file name is <ViewName>.controller.js.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// webapp/controller/Main.controller.js
sap.ui.define([
  "sap/ui/core/mvc/Controller"
], function(Controller) {
  "use strict";

  return Controller.extend("my.app.controller.Main", {
    onInit: function() {
      // Initialization logic
    }
  });
});
```

**STEP**: 5 — Reference the View in manifest.json (rootView or routing targets)

**DESCRIPTION**: When the generator creates app metadata, ensure manifest.json refers to the generated view using your app namespace and the chosen viewName. Use placeholders or programmatic replacement when generating multiple apps.

**LANGUAGE**: JSON

**CODE**:
```json
// manifest.json snippet
{
  "sap.ui5": {
    "rootView": {
      "viewName": "my.app.view.Main",
      "type": "XML",
      "id": "app"
    },
    "routing": {
      "routes": [
        {
          "name": "home",
          "pattern": "",
          "target": "home"
        }
      ],
      "targets": {
        "home": {
          "viewName": "Main",
          "viewLevel": 1,
          "viewId": "main",
          "viewPath": "my.app.view",
          "type": "XML"
        }
      }
    }
  }
}
```

**STEP**: 6 — Example End-to-End (Declarative Generation + Result)

**DESCRIPTION**: Full example: set viewName to "Main" in template-properties.json, run the generator, then confirm the generated files and manifest references match the viewName and your app namespace.

**LANGUAGE**: Shell / Plain text

**CODE**:
```text
# 1) template-properties.json contains: { "viewName": "Main" }
# 2) Run generator (example CLI or fiori tools integration)
# 3) Confirm files:
#    webapp/view/Main.view.xml
#    webapp/controller/Main.controller.js
# 4) Confirm manifest.json rootView or routing target refers to my.app.view.Main
```

--------------------------------

**TITLE**: Generate an SAP Fiori/SAPUI5 Application with the Fiori Application Generator

**INTRODUCTION**: This guide shows how to launch the SAP Fiori application generator from VS Code and SAP Business Application Studio (BAS), select templates, inspect the generated project structure, use Service Center in BAS as a datasource explorer, and references for MTA/CAP and writer libraries. Use these steps when automating or scripting project scaffolding or when integrating generator calls into development workflows.

**TAGS**: fiori-tools, SAP, SAPUI5, Fiori, VSCode, BAS, generator, MTA, CAP, template

STEP: 1 — Open the Application Generator
DESCRIPTION: Launch the Fiori application generator from VS Code or BAS. This opens the Template Wizard to scaffold a new SAP Fiori or SAPUI5 project.
LANGUAGE: plaintext
CODE:
```plaintext
# VS Code: open Command Palette and run:
# macOS: CMD + Shift + P
# Windows/Linux: Ctrl + Shift + P
# Then type and execute:
Fiori: Open Application Generator

# SAP Business Application Studio:
# Use "Start from template" from the BAS Welcome / Templates UI.
```

STEP: 2 — BAS: Choose an appropriate Dev Space
DESCRIPTION: If you use SAP Business Application Studio, select a dev space suited to your needs before starting the generator. This ensures the correct tools/environment are available.
LANGUAGE: plaintext
CODE:
```plaintext
# Recommended BAS dev spaces:
- SAP Fiori
- Full-Stack Application Using Productivity Tools
- Full Stack Cloud Application
```

STEP: 3 — Template selection options and behavior
DESCRIPTION: On the Template Selection page choose the template type and proceed. Understand generator approach and output behavior (Fiori elements or freestyle SAPUI5).
LANGUAGE: plaintext
CODE:
```plaintext
# Template Type dropdown options:
- SAP Fiori           # default; generates Fiori elements or freestyle SAPUI5 based on choices
- Deprecated templates # includes deprecated SAPUI5 templates

# After selecting template type -> Click Next to continue the wizard.
# The generator supports:
# - Fiori elements (recommended for productivity and consistency)
# - Freestyle SAPUI5
```

STEP: 4 — Relaunch or open Application Information
DESCRIPTION: After generation, the Application Information page opens. You can re-open it at any time to review or update application metadata.
LANGUAGE: plaintext
CODE:
```plaintext
# Re-open Application Information from Command Palette:
# macOS: CMD + Shift + P
# Windows/Linux: Ctrl + Shift + P
Fiori: Open Application Info
```

STEP: 5 — Use Service Center in BAS to explore datasources
DESCRIPTION: In BAS Service Center browse service providers (subaccount destinations and SAP Business Accelerator Hub) and use exposed services as data sources for the generator.
LANGUAGE: plaintext
CODE:
```plaintext
# Open BAS Service Center and inspect available OData services:
# Web reference:
https://help.sap.com/products/SAP%20Business%20Application%20Studio/9d1db9835307451daa8c930fbd9ab264/1e8ec75c9c784b51a91c7370f269ff98.html
```

STEP: 6 — Inspect the generated project structure
DESCRIPTION: After generation, verify key files and folders. This tree is the typical structure for an SAPUI5-based app generated by the Fiori generator.
LANGUAGE: bash
CODE:
```bash
# Typical generated project root layout:
./<project-root>/
├─ webapp/                # Root folder for SAPUI5 web application (views, controllers, manifest, i18n, etc.)
├─ .npmrc                 # npm registry configuration updates for the project
├─ .gitignore             # files/folders to exclude from source control (e.g., node_modules)
├─ package-lock.json      # fixed node dependency versions
├─ package.json           # npm scripts and dependencies for the project
├─ README.md              # details about generation options and usage
├─ ui5-local.yaml         # local preview support configuration
├─ ui5.yaml               # UI5 tooling config; connects to data source and manages SAPUI5 version
└─ node_modules/          # installed node modules (created by `npm install`)
```

STEP: 7 — Differences when using "Use a Local CAP Node.js Project"
DESCRIPTION: If you generate a project using an existing local CAP Node.js project, the generator omits some UI5-specific files and adapts annotation files to CAP CDS syntax.
LANGUAGE: plaintext
CODE:
```plaintext
# Differences when "Use a Local CAP Node.js Project" is selected:
- package.json is shorter (local CAP provides preview/deployment)
- ui5.yaml and .npmrc may NOT be generated
- annotation.cds is generated (CAP CDS syntax) instead of local annotation.xml (EDMX)
```

STEP: 8 — MTA deployment and related resources
DESCRIPTION: For multi-target application (MTA) deployment, open the MTA deployment guide, and reference open-source writer libraries and npm packages used by the generator.
LANGUAGE: plaintext
CODE:
```plaintext
# MTA deployment guide (project-relative link in docs):
Additional-Configuration/generating-an-mta-deployment-file-9c41152.md

# npm packages referenced by the generator (useful for local tooling):
npm install --save-dev @sap/generator-fiori-elements @sap/ux-ui5-tooling

# Open-source writers used by the generator:
- Fiori elements writer:
  https://github.com/SAP/open-ux-tools/tree/main/packages/fiori-elements-writer
- Fiori freestyle writer:
  https://github.com/SAP/open-ux-tools/tree/main/packages/fiori-freestyle-writer

# Guided Answers extension for troubleshooting:
https://github.com/SAP/guided-answers-extension
```

STEP: 9 — Quick troubleshooting tip integrated into generator
DESCRIPTION: When common generation errors occur the generator offers to launch the Guided Answers Extension to troubleshoot using SAP-provided solutions.
LANGUAGE: plaintext
CODE:
```plaintext
# If generation errors are shown:
# The generator may prompt: "Launch Guided Answers Extension by SAP"
# Use the extension to follow troubleshooting steps from SAP experts:
https://github.com/SAP/guided-answers-extension
```
--------------------------------

**TITLE**: Security Certificate — SAP Fiori Tools (Resolve local CA trust issues for VS Code & CLI)

**INTRODUCTION**: This guide shows how to install a local certificate authority (CA) certificate so SAP Fiori application generator, Yeoman generators, and VS Code trust an internally signed SSL certificate. Use these steps when the certificate is valid but the CA is not known to the OS. It includes OS trust-store import commands and environment-variable settings for Node.js-based CLI tools.

**TAGS**: fiori-tools, sap, certificate, ssl, tls, nodejs, vscode, yeoman, windows, macos, powershell, bash

**STEP**: 1 — Verify Node.js and prepare the CA certificate file

**DESCRIPTION**: Confirm Node.js is installed and place the downloaded CA certificate in a stable location. Export the CA certificate from your browser into a file such as cert.crt or ca.pem. Use a persistent folder path (e.g., C:\certs\ca.crt or /usr/local/share/ca-certificates/ca.crt).

**LANGUAGE**: Bash

**CODE**:
```bash
# Verify Node.js is installed
node -v

# Example: create a folder to store CA certs (modify path as needed)
# Windows (use PowerShell or File Explorer to create folder)
# macOS / Linux:
sudo mkdir -p /usr/local/share/ca-certificates/my-local-ca
sudo cp /path/to/downloaded/ca.crt /usr/local/share/ca-certificates/my-local-ca/ca.crt
```

**STEP**: 2 — Import the CA into the OS trust store (recommended for VS Code)

**DESCRIPTION**: Import the CA certificate into the OS trust store so VS Code and other system tools trust it. Two command-line options are provided (PowerShell for Windows and security for macOS). GUI steps are also described in the notes below.

- Windows GUI (manual): Right-click the CA certificate file -> Install Certificate -> choose "Local Machine" or "Current User" -> Place in "Trusted Root Certification Authorities" -> Finish.
- macOS GUI (manual): Right-click certificate -> Open With -> Keychain Access -> Select "System" keychain -> Import -> set to "Always Trust".

Use the commands below to import via terminal (requires admin privileges).

**LANGUAGE**: PowerShell

**CODE**:
```powershell
# Import CA to LocalMachine Trusted Root (requires admin)
# Replace C:\certs\ca.crt with your cert path
Import-Certificate -FilePath "C:\certs\ca.crt" -CertStoreLocation Cert:\LocalMachine\Root

# If you prefer CurrentUser store:
Import-Certificate -FilePath "C:\certs\ca.crt" -CertStoreLocation Cert:\CurrentUser\Root
```

**LANGUAGE**: Bash

**CODE**:
```bash
# macOS: add CA to System keychain and mark as trusted (requires sudo)
# Replace /path/to/ca.crt with your cert path
sudo security add-trusted-cert -d -r trustRoot -k /Library/Keychains/System.keychain /path/to/ca.crt

# Linux (Debian/Ubuntu example): copy to trusted CA folder and update store
# Replace /path/to/ca.crt with your cert path
sudo cp /path/to/ca.crt /usr/local/share/ca-certificates/my-local-ca.crt
sudo update-ca-certificates
```

**STEP**: 3 — Set NODE_EXTRA_CA_CERTS for Yeoman / Node CLI (so Node recognizes the CA)

**DESCRIPTION**: Node.js does not automatically use the OS trust store for additional CA files. Set NODE_EXTRA_CA_CERTS to point to your CA file for Yeoman and other Node CLI runs. Options shown: temporary session, persistent for current user, and persistent system-wide.

- Windows GUI: System -> Advanced system settings -> Environment Variables -> New -> Name: NODE_EXTRA_CA_CERTS -> Value: C:\certs\ca.crt -> OK -> Apply.
- Use command-line methods below as alternatives.

**LANGUAGE**: PowerShell

**CODE**:
```powershell
# Current PowerShell session only
$env:NODE_EXTRA_CA_CERTS = "C:\certs\ca.crt"

# Persist for current user (use setx). New processes will see this value.
setx NODE_EXTRA_CA_CERTS "C:\certs\ca.crt"

# Example: run Yeoman generator in same session after setting env:
# (if persisted with setx, open a new terminal before running)
yo @sap/generator-fiori
```

**LANGUAGE**: CMD

**CODE**:
```cmd
:: Persist for current user using setx (Windows CMD)
setx NODE_EXTRA_CA_CERTS "C:\certs\ca.crt"

:: For current CMD session only:
set NODE_EXTRA_CA_CERTS=C:\certs\ca.crt
```

**LANGUAGE**: Bash

**CODE**:
```bash
# Temporary for current shell (macOS / Linux)
export NODE_EXTRA_CA_CERTS="/path/to/ca.crt"

# Make persistent for login shells (example for zsh or bash)
echo 'export NODE_EXTRA_CA_CERTS="/path/to/ca.crt"' >> ~/.zshrc   # or ~/.bashrc
# Then reload:
source ~/.zshrc
```

**STEP**: 4 — Optional: Temporarily ignore TLS verification (not recommended)

**DESCRIPTION**: If you cannot fix the certificate immediately, you can temporarily disable Node's TLS verification for debugging. This is insecure and should only be used as a last resort in a controlled environment.

**LANGUAGE**: Bash

**CODE**:
```bash
# macOS / Linux - temporarily disable for current command
NODE_TLS_REJECT_UNAUTHORIZED=0 yo @sap/generator-fiori

# Or export for session (not persistent)
export NODE_TLS_REJECT_UNAUTHORIZED=0
```

**LANGUAGE**: PowerShell

**CODE**:
```powershell
# PowerShell - temporarily for current session
$env:NODE_TLS_REJECT_UNAUTHORIZED = "0"
yo @sap/generator-fiori
```

**STEP**: 5 — Troubleshooting & verification

**DESCRIPTION**: Verify Node uses the extra CA and that the generator can connect. If a change is not picked up, restart VS Code and open a new terminal window after setting persistent environment variables.

**LANGUAGE**: Bash

**CODE**:
```bash
# Check environment variable and Node version
echo "$NODE_EXTRA_CA_CERTS"
node -v

# Test a secure request with Node using the extra CA (example script)
node -e 'https = require("https"); https.get("https://your-dev-host/", res => { console.log("statusCode:", res.statusCode); }).on("error", e => { console.error("ERR", e.message); })'
```

**NOTE**:
- Ensure you use the CA certificate (the issuer certificate) — not the leaf/site certificate.
- The instructions apply when the CA is valid but unknown to the OS. If the SSL certificate itself is invalid (expired, hostname mismatch, signature issues), resolve the certificate or the server configuration instead of bypassing TLS.
- For GUI import steps, administrative privileges are required when importing into machine-wide stores.
--------------------------------

**TITLE**: ABAP Development Tools (ADT) Integration with SAP Fiori tools (VS Code & Business Application Studio)

**INTRODUCTION**: Configure one-time integration between ABAP Development Tools (ADT) in Eclipse and SAP Fiori tools so you can launch the SAP Fiori Generator directly from ADT, open the generator in VS Code or SAP Business Application Studio, and download ADT-deployed SAPUI5 apps into your IDE workspace.

**TAGS**: fiori-tools, ADT, ABAP, VS Code, Business Application Studio, SAP Fiori Generator, SAPUI5

**STEP**: 1 — Configure ADT to launch target IDE (one-time per ABAP system)

**DESCRIPTION**: In ADT, add the target IDE for the ABAP system you want to integrate. This is required once per system you integrate.

**LANGUAGE**: Text

**CODE**:
```Text
UI steps (ADT):
1. In Eclipse ADT, locate the ABAP system you want to integrate.
2. Right-click the system -> Properties.
3. Navigate to: ABAP Development > IDE Configuration
4. Check "Configure the target IDE"
5. Select target IDE: "SAP Business Application Studio" or "VS Code"
```

**STEP**: 2 — Launch SAP Fiori Generator from ADT ("Create Fiori Project" button)

**DESCRIPTION**: After IDE configuration, ADT shows a "Create Fiori Project" button next to the service details. Use it to open the configured IDE and automatically start the SAP Fiori Generator. When launched from ADT:
- Data source selection is skipped (ADT already selected the service).
- The main entity is preselected with the entity chosen in ADT.

**LANGUAGE**: Text

**CODE**:
```Text
Workflow:
1. Open the service details in ADT.
2. Click "Create Fiori Project".
3. The configured IDE launches and the SAP Fiori Generator opens with:
   - Data source already set (skipped selection).
   - Main entity preselected from ADT.
```

**STEP**: 3 — Download an application that was deployed from ADT via "Create Fiori Project"

**DESCRIPTION**: If you used ADT's Quick Fiori Application generator to deploy an app with the selected service, clicking "Create Fiori Project" will:
- Launch SAP Fiori tools in your IDE,
- Offer to download the deployed application into your workspace,
- Update the downloaded application to support SAP Fiori tools capabilities.

**LANGUAGE**: Text

**CODE**:
```Text
Behavior when app was previously deployed from ADT:
1. Click "Create Fiori Project" in ADT.
2. IDE launches and shows list of deployed apps for the chosen service.
3. Select the deployed app to download into your current workspace.
4. Downloaded app is upgraded/updated to support SAP Fiori tools.
```

**STEP**: 4 — Download ADT-deployed apps from your IDE without launching ADT

**DESCRIPTION**: Use the IDE command to list and download SAP Fiori applications that were deployed from ADT directly from VS Code or Business Application Studio.

**LANGUAGE**: Text

**CODE**:
```Text
VS Code / Business Application Studio:
1. Open Command Palette (Ctrl+Shift+P / Cmd+Shift+P)
2. Run command: "Fiori: Download ADT Deployed App from SAPUI5 ABAP Repository"
3. Select the desired ABAP system from the dropdown
4. Choose an application from the presented list to download into workspace
```

**STEP**: 5 — Ensure VS Code saved ABAP system URL matches ADT (matching/reuse behavior)

**DESCRIPTION**: For VS Code integration, ensure the ABAP system you saved in SAP Fiori tools uses the same system URL as recorded in ADT. If the saved system cannot be matched:
- You may choose any existing saved system in your IDE.
- If your workspace already contains SAP Fiori projects that match the same system and main entity, the generator will let you choose to reuse an existing project or create a new one.

**LANGUAGE**: Text

**CODE**:
```Text
Check/Verify saved ABAP system in VS Code:
1. Click "SAP Fiori" (Wrench/Pencil icon) on the left activity toolbar
   Image: images/SAP_Fiori_tools_Wrench_Pencil_9d6b0f8.png
2. Click "SAP Systems"
3. Verify the saved system URL matches the ADT system URL used to launch from ADT.

Matching behavior:
- If URLs match: IDE auto-selects the correct saved system.
- If no match: choose any saved system from the list.
- If matching SAP Fiori project exists in workspace (same system + main entity): option to reuse existing project or create a new one.
```
--------------------------------

**TITLE**: SAP Fiori Tools — Capabilities Overview (Commands, CLI, and Programmatic Usage)

**INTRODUCTION**: Quick reference of SAP Fiori Tools features, VS Code command IDs, CLI scripts, file names, and examples for programmatic invocation. Use this when generating code that automates or invokes Fiori tooling actions (build, deploy, mock server, annotation & service management, adaptation features, linting, preview, archive, and validation).

**TAGS**: fiori-tools, sapui5, vscode, cli, commands, deploy, mockserver, annotations, adaptation, ui5-linter, typescript

**STEP**: Open Application Info (manual)
**DESCRIPTION**: Open the Application Information page in VS Code to view project-level features and available commands.
**LANGUAGE**: Text
**CODE**:
```Text
- Open Command Palette: (mac) CMD+Shift+P or (win/linux) CTRL+Shift+P
- Run: "Fiori: Open Application Info"
- See also: Application Information doc
```

**STEP**: Execute Fiori Tool Commands Programmatically (VS Code Extensions API)
**DESCRIPTION**: Example TypeScript snippets to invoke Fiori tool commands by command ID using the VS Code Extension API (vscode.commands.executeCommand). Replace the command ID with any listed command below.
**LANGUAGE**: TypeScript
**CODE**:
```TypeScript
import * as vscode from 'vscode';

// Example: Launch Deploy Config UI
await vscode.commands.executeCommand('sap.ux.appGenerator.launchDeployConfig');

// Example: Add local annotation file to adaptation project
await vscode.commands.executeCommand('sap.ux.adp.addAnnotationFile');

// Example: Run UI5 linter
await vscode.commands.executeCommand('sap.ux.applicationModeler.runUI5Linter');

// Example: Open service manager
await vscode.commands.executeCommand('sap.ux.serviceModeler.openServiceMgr');
```

**STEP**: Common Command IDs and Short Descriptions (JSON list for code generation)
**DESCRIPTION**: Use this mapping to reference command IDs when generating automation or extension code. Keep exact IDs.
**LANGUAGE**: JSON
**CODE**:
```JSON
[
  { "id": "sap.ux.appGenerator.launchDeployConfig", "desc": "Add deploy configuration" },
  { "id": "sap.ux.appGenerator.launchFlpConfig", "desc": "Add Fiori Launchpad configuration" },
  { "id": "sap.ux.adp.addAnnotationFile", "desc": "Add local annotation file to adaptation project" },
  { "id": "sap.ux.adp.addSAPUI5ComponentUsages", "desc": "Add SAPUI5 component usages to adaptation project" },
  { "id": "sap.ux.applicationModeler.addVariantsConfig", "desc": "Add configuration for Variants Creation" },
  { "id": "sap.ux.serviceModeler.openFile", "desc": "Check service with annotation (open service file)" },
  { "id": "sap.ux.applicationModeler.convertPreview", "desc": "Convert configuration to preview virtual endpoints" },
  { "id": "sap.ux.environmentcheck.archiveProject", "desc": "Create zip archive of project (exclude node_modules)" },
  { "id": "sap.ux.appGenerator.launchDeploy", "desc": "Deploy using ui5-deploy.yaml configuration" },
  { "id": "sap.ux.dataEditor.open", "desc": "Open Data Editor to maintain mock data" },
  { "id": "sap.ux.serviceModeler.openServiceMgr", "desc": "Manage Service Models (sync metadata.xml with back end)" },
  { "id": "sap.ux.serviceModeler.openAnnotationFileMgr", "desc": "Manage/create local XML annotation files" },
  { "id": "sap.ux.adp.openAdaptationEditor", "desc": "Open Adaptation Editor" },
  { "id": "sap.ux.adp.openDeploymentWizard", "desc": "Open adaptation deployment wizard" },
  { "id": "sap.ux.applicationModeler.showDocu", "desc": "Open documentation for manifest and UI5 flexibility properties" },
  { "id": "sap.ux.help.openGuidedDevelopmentFromExplorer", "desc": "Open Guided Development" },
  { "id": "sap.ux.pageMap.showMap", "desc": "Open Page Map (pages and navigation paths)" },
  { "id": "sap.ux.pageEditor.previewExternal", "desc": "Preview application (choose start scripts)" },
  { "id": "sap.ux.adp.replaceODataService", "desc": "Replace OData service in adaptation project" },
  { "id": "sap.ux.applicationModeler.runUI5Linter", "desc": "Run UI5 linter static analysis" },
  { "id": "sap.ux.applicationModeler.validate", "desc": "Validate project and generate report" }
]
```

**STEP**: CLI Commands (shell)
**DESCRIPTION**: Run these commands from the project root. Preserve exact CLI usage and script names when generating shell or task automation.
**LANGUAGE**: Shell
**CODE**:
```bash
# Add configuration for mockserver middleware
npx --yes @sap-ux/create@latest add mockserver-config

# Build application; output is stored in `dist` folder
npm run build

# Check outdated node modules
npm outdated

# Run configuration for Variants Management
npm run start-variants-management

# Start deployment in test mode
npm run deploy-test

# Undeploy the application/artifact
npm run undeploy
```

**STEP**: Deploy Automation Guidance
**DESCRIPTION**: Deploy uses ui5-deploy.yaml by default. Use programmatic command or Command Palette command to open deploy flow.
**LANGUAGE**: Text
**CODE**:
```Text
- Default deploy configuration file: ui5-deploy.yaml (project root)
- Programmatic: vscode.commands.executeCommand('sap.ux.appGenerator.launchDeploy')
- To add/modify deploy configuration UI: use 'sap.ux.appGenerator.launchDeployConfig'
- For adaptation-project deployment: use 'sap.ux.adp.openDeploymentWizard'
```

**STEP**: Mock Data & Mockserver Setup
**DESCRIPTION**: Configure and maintain mock data and mockserver middleware.
**LANGUAGE**: Shell / Text
**CODE**:
```bash
# Add mockserver config (creates required middleware config for local preview)
npx --yes @sap-ux/create@latest add mockserver-config
```
```Text
- Open Data Editor in VS Code: execute 'sap.ux.dataEditor.open'
- Maintain mock data files in your mock folder (project-specific paths)
```

**STEP**: Service & Annotation Management
**DESCRIPTION**: Manage OData services, metadata.xml synchronization and XML annotation files. Useful for Fiori Elements projects and for copying remote annotations to local XML files.
**LANGUAGE**: TypeScript / Text
**CODE**:
```TypeScript
// Open Service Manager (sync metadata.xml)
await vscode.commands.executeCommand('sap.ux.serviceModeler.openServiceMgr');

// Open Annotation File Manager (create/choose XML annotation files)
await vscode.commands.executeCommand('sap.ux.serviceModeler.openAnnotationFileMgr');

// Check service with annotations (open metadata + annotations)
await vscode.commands.executeCommand('sap.ux.serviceModeler.openFile');
```
```Text
- Typical metadata file: metadata.xml (service definition). Sync functionality is available via Service Manager.
- Local annotation files: create XML annotation files for local customization; adaptation projects can add local annotation files with 'sap.ux.adp.addAnnotationFile'.
```

**STEP**: Adaptation Project Commands
**DESCRIPTION**: Commands for adaptation projects (scripted or programmatic).
**LANGUAGE**: TypeScript
**CODE**:
```TypeScript
// Open Adaptation Editor
await vscode.commands.executeCommand('sap.ux.adp.openAdaptationEditor');

// Add SAPUI5 component usages to adaptation project
await vscode.commands.executeCommand('sap.ux.adp.addSAPUI5ComponentUsages');

// Add inbound change to adaptation project
await vscode.commands.executeCommand('sap.ux.adp.changeInbound');

// Replace OData service of adaptation project
await vscode.commands.executeCommand('sap.ux.adp.replaceODataService');
```

**STEP**: Static Analysis and Validation
**DESCRIPTION**: Run UI5 linter and validate project programmatically or via the Command Palette command IDs.
**LANGUAGE**: TypeScript / Shell
**CODE**:
```TypeScript
// Run UI5 Linter (programmatic)
await vscode.commands.executeCommand('sap.ux.applicationModeler.runUI5Linter');

// Validate project and generate report
await vscode.commands.executeCommand('sap.ux.applicationModeler.validate');
```
```bash
# Optionally check node modules before linting/validation
npm outdated
```

**STEP**: Create Project Archive (zip) for Support
**DESCRIPTION**: Create a zip of the project excluding node_modules for sharing with support. Use command ID to run from VS Code.
**LANGUAGE**: TypeScript / Text
**CODE**:
```TypeScript
// Create archive excluding node_modules
await vscode.commands.executeCommand('sap.ux.environmentcheck.archiveProject');
```
```Text
- Result: ZIP file created for sharing/support. node_modules is excluded to reduce size.
```

**STEP**: Preview, Page Map, and Guided Development
**DESCRIPTION**: Preview app, inspect page map, and use guided development to solve common tasks.
**LANGUAGE**: TypeScript / Text
**CODE**:
```TypeScript
// Open Page Map
await vscode.commands.executeCommand('sap.ux.pageMap.showMap');

// Preview application (choose start scripts)
await vscode.commands.executeCommand('sap.ux.pageEditor.previewExternal');

// Open Guided Development
await vscode.commands.executeCommand('sap.ux.help.openGuidedDevelopmentFromExplorer');
```

**STEP**: Scripting Languages and TypeScript Support
**DESCRIPTION**: SAP Fiori apps use SAPUI5; Fiori tools supports JavaScript and TypeScript. Link for TypeScript types.
**LANGUAGE**: Text
**CODE**:
```Text
- Supported scripting languages: JavaScript or TypeScript
- UI5 + TypeScript resource: https://sap.github.io/ui5-typescript
```

**STEP**: Usability (Keyboard Navigation & High Contrast Theme)
**DESCRIPTION**: Keyboard navigation and high contrast theming support. Include steps to switch theme.
**LANGUAGE**: Text
**CODE**:
```Text
- Keyboard navigation:
  - Arrow keys: navigate within sections
  - Tab: move to next section/control
  - Shift+Tab: move backwards
  - Enter: select/activate

- Switch to high contrast theme:
  - VS Code / SAP BAS: Preferences > Color Theme
  - Choose a high-contrast theme for improved readability/accessibility
```
--------------------------------

**TITLE**: SAP Fiori Tools — Command Palette Reference for Automation and Integration

**INTRODUCTION**: 
Quick, actionable reference for using SAP Fiori Tools commands from the VS Code command palette and from code (extensions, scripts). Groups related commands, explains purpose, and gives actionable code examples showing how to open the command palette and invoke commands programmatically. Includes file path references (ui5-deploy.yaml) and important prerequisites (ABAP flavors, SAP Build Code subscription for Joule).

**TAGS**: fiori-tools, vscode, command-palette, automation, extension-api, deploy, preview, sapui5, abap, joule

STEP: Open Command Palette & Invoke a Fiori Command Programmatically
DESCRIPTION: Show how to open the VS Code command palette and how to execute a command from an extension or script. Replace <extension.commandId> with the actual command id found in the extension's package.json (contributes.commands).
LANGUAGE: TypeScript
CODE:
```TypeScript
// Open Command Palette programmatically (shows UI)
import * as vscode from 'vscode';
vscode.commands.executeCommand('workbench.action.showCommands');

// Execute a Fiori Tools command by command id (replace with real id)
await vscode.commands.executeCommand('<extension.commandId>');

// Example pattern to inspect installed extensions for command ids:
const ext = vscode.extensions.getExtension('<publisher.extensionName>');
if (ext) {
  // You can read ext.packageJSON.contributes.commands to find ids and titles
  console.log(ext.packageJSON.contributes?.commands);
}
```

STEP: Configuration & Deployment Commands
DESCRIPTION: Commands to add configuration files or settings necessary to deploy and run apps. Note: deployments typically use the file ui5-deploy.yaml stored at the workspace root.
LANGUAGE: TypeScript
CODE:
```TypeScript
// Commands grouped:
// - Fiori: Add Configuration for Variants Creation
// - Fiori: Add Deployment Configuration
// - Fiori: Add SAP Fiori Launchpad Configuration
// - Fiori: Add SAP Fiori Launchpad Embedded Configuration
// - Fiori: Enable App-to-App Navigation Preview

// Example: Invoke the "Add Deployment Configuration" command (placeholder id)
await vscode.commands.executeCommand('fiori.addDeploymentConfiguration');

// Deployment uses ui5-deploy.yaml at workspace root.
// Example: read ui5-deploy.yaml to inspect deployment settings before invoking deploy
import * as fs from 'fs';
import * as path from 'path';
const yamlPath = path.join(vscode.workspace.workspaceFolders![0].uri.fsPath, 'ui5-deploy.yaml');
if (fs.existsSync(yamlPath)) {
  const deployYaml = fs.readFileSync(yamlPath, 'utf8');
  console.log(deployYaml);
}
```

STEP: SAP System & Connection Commands
DESCRIPTION: Add, import, or view SAP system connections. Supports ABAP On-Premises and ABAP Environment (with service key). Use these to add or import systems into VS Code.
LANGUAGE: TypeScript
CODE:
```TypeScript
// Commands:
// - Fiori: Add SAP System             -> create and save a new SAP system (ABAP On-Premises or ABAP Environment with service key)
// - Fiori: Import SAP System          -> import and save ABAP On-Premise system in VS Code
// - Fiori: Show SAP System Details    -> open detail view for saved SAP system

// Example: Add SAP System (placeholder id)
await vscode.commands.executeCommand('fiori.addSapSystem');

// Example: Open system details (placeholder id)
await vscode.commands.executeCommand('fiori.showSapSystemDetails', { systemId: 'MY_SYSTEM_ID' });
```

STEP: Project Lifecycle & Maintenance Commands
DESCRIPTION: Commands for project-level operations: archive, migrate, delete app from CAP, change telemetry/minimum SAPUI5 version, validate project.
LANGUAGE: TypeScript
CODE:
```TypeScript
// Commands:
// - Fiori: Archive Project
// - Fiori: Migrate Project for use in SAP Fiori Tools
// - Fiori: Delete Application from CAP Project
// - Fiori: Change Telemetry Settings    -> choose whether telemetry is sent to SAP
// - Fiori: Change the Minimum SAPUI5 Version
// - Fiori: Validate Project

// Example: Migrate project (placeholder id)
await vscode.commands.executeCommand('fiori.migrateProject');

// Example: Change telemetry (opens UI to choose)
// Typically opens a settings quick pick or writes to workspace settings
await vscode.commands.executeCommand('fiori.changeTelemetrySettings');
```

STEP: Generators, Editors, and Guided Development
DESCRIPTION: Commands that launch generators, editors, and guided development tools that create or update code and configuration.
LANGUAGE: TypeScript
CODE:
```TypeScript
// Commands:
// - Fiori: Open Application Generator
// - Fiori: Open CF Application Router Generator
// - Fiori: Open Reusable Library Generator
// - Fiori: Open Annotation File Manager
// - Fiori: Open Data Editor
// - Fiori: Open Guided Development
// - Fiori: Open Guided Development to the Side
// - Fiori: Open Run Configurations

// Example: Launch Application Generator
await vscode.commands.executeCommand('fiori.openApplicationGenerator');

// Example: Launch Guided Development to the side
await vscode.commands.executeCommand('fiori.openGuidedDevelopmentToSide');
```

STEP: Service & Modeler Tools
DESCRIPTION: Commands to visualize and manage services, OData metadata, and annotations. Use side-by-side variants to open views beside the editor.
LANGUAGE: TypeScript
CODE:
```TypeScript
// Commands:
// - Fiori: Open Service Modeler
// - Fiori: Open Service Modeler to the Side
// - Fiori: Open Service Manager
// - Fiori: Open Annotation File Manager (also listed above)
// - Fiori: Open Data Editor

// Example: Open Service Modeler to the side
await vscode.commands.executeCommand('fiori.openServiceModelerToSide');

// Example: Open Service Manager
await vscode.commands.executeCommand('fiori.openServiceManager');
```

STEP: Preview, Run, and Navigation Tools
DESCRIPTION: Commands to preview apps, configure run scripts, preview navigation between apps, and manage the app map and page editor.
LANGUAGE: TypeScript
CODE:
```TypeScript
// Commands:
// - Fiori: Preview Application                -> choose a start script to run preview
// - Fiori: Open Run Configurations
// - Fiori: Enable App-to-App Navigation Preview
// - Fiori: Show Page Editor
// - Fiori: Show Page Map

// Example: Open run configurations UI
await vscode.commands.executeCommand('fiori.openRunConfigurations');

// Example: Trigger application preview (placeholder id)
await vscode.commands.executeCommand('fiori.previewApplication', { startScript: 'start' });
```

STEP: Modeler Utilities & Diagnostics
DESCRIPTION: Commands for modeler maintenance and diagnostics: refresh view, reopen output channel, restart language services, run linter, show release notes.
LANGUAGE: TypeScript
CODE:
```TypeScript
// Commands:
// - Fiori: Refresh Application Modeler View
// - Fiori: Show Output Channel
// - Fiori: Restart XML Annotation Language Server
// - Fiori: Run UI5 Linter
// - Fiori: Show Release Notes

// Example: Restart XML annotation language server
await vscode.commands.executeCommand('fiori.restartXmlAnnotationLanguageServer');

// Example: Run UI5 linter (invokes static analysis; see https://github.com/UI5/linter)
await vscode.commands.executeCommand('fiori.runUi5Linter', { files: ['webapp/**'] });

// Example: Show output channel for application modeler
await vscode.commands.executeCommand('fiori.showOutputChannel');
```

STEP: Miscellaneous Utilities & Info Views
DESCRIPTION: Commands for miscellaneous tasks and info surfaces including application info, app router generator for MTA, Joule AI assistant, and showing SAP Fiori tools release notes.
LANGUAGE: TypeScript
CODE:
```TypeScript
// Commands:
// - Fiori: Open Application Info
// - Fiori: Open CF Application Router Generator
// - Fiori tools AI: Show Fiori Tools Joule  -> requires SAP Build Code subscription (SAP Business Application Studio)
// - Fiori: Show Release Notes
// - Fiori: Show SAP System Details

// Example: Open Application Info view
await vscode.commands.executeCommand('fiori.openApplicationInfo');

// Example: Launch Joule (only works in supported environments with subscription)
await vscode.commands.executeCommand('fiori.joule.show');
```

STEP: Automation Patterns & How to Discover Real Command IDs
DESCRIPTION: Pattern for discovering real command ids of installed Fiori Tools extensions and using them in automation code. Inspect the extension's package.json contributes.commands array.
LANGUAGE: TypeScript
CODE:
```TypeScript
// Discover command ids for an installed extension
import * as vscode from 'vscode';
const publisherAndName = 'SAP.fiori-tools-extension'; // replace with real publisher.extensionName
const ext = vscode.extensions.getExtension(publisherAndName);
if (ext) {
  const commands = ext.packageJSON?.contributes?.commands || [];
  commands.forEach((c: any) => {
    console.log(`id: ${c.command}, title: ${c.title}`);
  });
}

// Once you have id, call:
await vscode.commands.executeCommand('publisher.extension.commandId');
```

STEP: Notes & References
DESCRIPTION: Short operational notes to apply when automating or calling commands:
- Deployment uses ui5-deploy.yaml at the workspace root by default.
- "Add SAP System" supports ABAP On-Premises and ABAP Environment (service key).
- "Import SAP System" is specific for ABAP On-Premise.
- "Fiori tools AI: Show Fiori Tools Joule" requires SAP Build Code subscription and runs in SAP Business Application Studio.
- For exact command ids, inspect the extension package.json (contributes.commands) as shown above.
LANGUAGE: plain
CODE:
```text
Files and artifacts referenced:
- ui5-deploy.yaml     -> default deployment configuration file at workspace root

Prerequisites:
- ABAP On-Premises vs ABAP Environment with service key for system commands
- SAP Build Code subscription for Joule (SAP Business Application Studio)

Discover command ids:
- Check extension package.json -> contributes.commands to get real command ids to use with vscode.commands.executeCommand(...)
```
--------------------------------

**TITLE**: Getting Started with SAP Fiori Tools — Quick Developer Guide

**INTRODUCTION**: Practical, code-focused steps to set up and use SAP Fiori tools in SAP Business Application Studio or Visual Studio Code to create SAP Fiori elements and freestyle SAPUI5 applications. Includes required files, example snippets, locations, and references to the tool-specific features (Application Wizard, Application Modeler, Service Modeler, Language Server, Environment Check).

**TAGS**: fiori-tools, sapui5, sap-fiori-elements, development-environment, annotations, odata, vs-code, business-application-studio

**STEP**: 1 — Install SAP Fiori Tools extensions

**DESCRIPTION**: Install the SAP Fiori tools extension bundle in your IDE (SAP Business Application Studio or VS Code). The bundle includes Application Wizard, Application Modeler (Page Editor & Page Map), Guided Development, Service Modeler, Annotations Language Server, and Environment Check. Use the Extensions view in your IDE and search for "SAP Fiori tools".

**LANGUAGE**: text

**CODE**:
```text
Extensions to install (search and install in IDE Extensions view):
- SAP Fiori tools - Application Wizard
  Docs: ../Generating-an-Application/SAP-Fiori-Elements/sap-fiori-elements-1488469.md

- SAP Fiori tools – Application Modeler (includes Page Editor & Page Map)
  Docs: ../Developing-an-Application/developing-an-application-a9c0043.md
  Page Editor: ../Developing-an-Application/configure-page-elements-047507c.md
  Page Map: ../Developing-an-Application/define-application-structure-bae38e6.md

- SAP Fiori tools - Guided Development
  Docs: ../Developing-an-Application/use-feature-guides-0c9e518.md

- SAP Fiori tools - Service Modeler
  Docs: ../Project-Functions/viewing-service-metadata-e369c2c.md

- Maintaining Annotations with Language Server
  Docs: ../Developing-an-Application/maintaining-annotations-with-language-server-6fc93f8.md

- SAP Fiori tools Environment Check
  Docs: ../Project-Functions/environment-check-75390cf.md
```

**STEP**: 2 — Validate environment before creating apps

**DESCRIPTION**: Run the Environment Check extension to validate platform prerequisites and destination configurations on SAP BTP. Ensure your development environment meets SAP Fiori tools requirements and that SAPUI5 minimum version is 1.65.

**LANGUAGE**: text

**CODE**:
```text
Run the Environment Check:
- Open the SAP Fiori tools Environment Check extension
- Follow the checks for your IDE and configured BTP destinations
Docs: ../Project-Functions/environment-check-75390cf.md

Important:
- Minimum SAPUI5 version supported: 1.65 or higher
```

**STEP**: 3 — Create a new application with Application Wizard

**DESCRIPTION**: Use the Application Wizard to generate a new SAP Fiori elements or freestyle SAPUI5 app. The generator scaffolds the typical webapp structure including manifest.json, routing, and placeholders for annotations.

**LANGUAGE**: text

**CODE**:
```text
Typical workflow:
1. Open Application Wizard extension (in the IDE Extensions/Commands).
2. Choose template: SAP Fiori elements or Freestyle (SAPUI5).
3. Provide OData service (use local metadata or BTP destination).
4. Generate project scaffold.

Generated project structure (example):
/my-fiori-app
  /webapp
    manifest.json
    index.html
    Component.js
    /controller
    /view
    /annotations   <-- annotation files (XML)
  /localService
    metadata.xml   <-- OData service metadata (for local mock)
```

**STEP**: 4 — Example manifest.json snippet (minimum UI5 version and app metadata)

**DESCRIPTION**: Minimal manifest.json keys to ensure SAPUI5 compatibility and basic routing. Include minimum UI5 version >= 1.65.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.app": {
    "id": "my.fiori.app",
    "type": "application",
    "title": "My Fiori App"
  },
  "sap.ui5": {
    "dependencies": {
      "minUI5Version": "1.65"
    },
    "rootView": {
      "viewName": "my.fiori.app.view.Main",
      "type": "XML"
    },
    "routing": {
      "routes": [
        {
          "name": "main",
          "pattern": "",
          "target": "main"
        }
      ],
      "targets": {
        "main": {
          "viewName": "Main",
          "viewLevel": 1
        }
      }
    }
  }
}
```

**STEP**: 5 — Use Application Modeler: Page Editor & Page Map

**DESCRIPTION**: Open the Application Modeler to visualize pages, navigation, and service entities. Use Page Editor to configure elements on a page and Page Map to manage application structure and navigation.

**LANGUAGE**: text

**CODE**:
```text
Open Application Modeler:
- Launch SAP Fiori Tools – Application Modeler
- Use Page Map to inspect pages and navigation
- Use Page Editor to add or configure UI elements

Docs:
- Application Modeler: ../Developing-an-Application/developing-an-application-a9c0043.md
- Page Editor: ../Developing-an-Application/configure-page-elements-047507c.md
- Page Map: ../Developing-an-Application/define-application-structure-bae38e6.md
```

**STEP**: 6 — Use Service Modeler to inspect OData metadata

**DESCRIPTION**: Visualize and browse complex OData services, including entities, properties, and associations. Useful when mapping annotations and routing for Fiori elements.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Place local OData metadata here for Service Modeler:
   Common path in generated projects: /localService/metadata.xml -->
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
  <!-- EntityContainer / Schema / EntityType definitions -->
</edmx:Edmx>
```

**STEP**: 7 — Maintain annotations using the Annotations Language Server

**DESCRIPTION**: Edit annotation files with language server features: code completion, micro-snippets, diagnostics, and i18n support. Place annotation files in the project (commonly webapp/annotations/).

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Example annotations file path: /webapp/annotations/Annotations.xml -->
<Annotations Target="Namespace.EntityType">
  <Annotation Term="UI.LineItem">
    <Collection>
      <Record Type="UI.DataField">
        <PropertyValue Property="Value" Path="PropertyName" />
      </Record>
    </Collection>
  </Annotation>
</Annotations>
```

**STEP**: 8 — Supported deployment landscapes and data sources

**DESCRIPTION**: SAP Fiori tools supports generating apps for multiple deployment targets. Confirm the appropriate data source and destination for your deployment.

**LANGUAGE**: text

**CODE**:
```text
Supported deployment landscapes:
- SAP S/4HANA
- SAP S/4HANA Cloud
- SAP BTP (ABAP and Cloud Foundry environments)

Data source reference:
- See: ../Generating-an-Application/SAP-Fiori-Elements/data-source-9906181.md
```

**STEP**: 9 — IDE availability and resources

**DESCRIPTION**: SAP Fiori tools extensions are available for two IDEs. Open the respective documentation pages for IDE-specific guidance.

**LANGUAGE**: text

**CODE**:
```text
IDEs:
- SAP Business Application Studio
  Docs: sap-business-application-studio-b011040.md

- Visual Studio Code
  Docs: visual-studio-code-17efa21.md#loio17efa217f7f34a9eba53d7b209ca4280

Visual asset (user flow):
images/FIORI_TOOL_USER_FLOW_WFREESTYLE_3ad8363.png
```

**STEP**: 10 — Troubleshooting and support

**DESCRIPTION**: For issues with SAP Fiori tools, log an incident in the SAP Support Portal and use component CA-UX-IDE. Refer to the Report Issues and Security doc for more details.

**LANGUAGE**: text

**CODE**:
```text
If issues occur:
- Create an incident in the SAP Support Portal
- Use component: CA-UX-IDE

See: report-issues-and-security-7c755a5.md
```
--------------------------------

**TITLE**: Import SAP Fiori Application from SAPUI5 ABAP Repository into BAS or VS Code

**INTRODUCTION**: Step-by-step procedure to download a deployed SAPUI5 (BSP) application from an ABAP system, restore it into a workspace folder structure, prepare minimal package metadata, and run the SAP Fiori Tools migration so the app becomes compatible with Fiori tools and UI5 tooling.

**TAGS**: fiori-tools, sapui5, abap, bsp, migrate, restore, vscode, business-application-studio

**STEP**: Preparation — create workspace folders

**DESCRIPTION**: Create the folder layout expected by the import/migration procedure. These folders will host the restored app and the extracted webapp content.

**LANGUAGE**: Shell / General

**CODE**:
```sh
# From your workspace root (BAS or VS Code)
mkdir -p restore-from-exported/webapp
# Result:
# restore-from-exported/          -> container for restored project
# restore-from-exported/webapp/  -> will contain the downloaded zip contents (manifest.json, Component.js, etc.)
```

**STEP**: Download application from ABAP repository (SE80)

/UI5/UI5_REPOSITORY_LOAD

**DESCRIPTION**: In the ABAP backend, use standard transaction and report to export the deployed BSP application as a zip archive.

**LANGUAGE**: Instructions

**CODE**:
```text
1. In the ABAP system, open transaction SE80.
2. Run report: /UI5/UI5_REPOSITORY_LOAD
3. Enter the name of the SAPUI5 application (BSP application id) and click "Download".
4. Choose an empty folder on the application server as the download target.
5. From the resulting page, click "Click here to Download" to obtain the .zip file.
6. Transfer the .zip to your local machine or workspace and proceed to extract it.
```

**STEP**: Extract zip into webapp folder and verify manifest

**DESCRIPTION**: Extract the downloaded archive into restore-from-exported/webapp and ensure the manifest.json is at the root of that folder.

**LANGUAGE**: Shell

**CODE**:
```sh
# Example: unzip into the expected folder
unzip path/to/downloaded-app.zip -d restore-from-exported/webapp

# Verify manifest exists at restore-from-exported/webapp/manifest.json
ls -la restore-from-exported/webapp/manifest.json
```

**STEP**: Create minimal package.json for migration

**DESCRIPTION**: Create a package.json at restore-from-exported with the "name" matching the application id from manifest.json (sap.app.id). This is used by Fiori tools migration to identify the project.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "name": "sap.fe.demo.awesomeapp"
}
```

Note: Confirm the actual id in restore-from-exported/webapp/manifest.json under "sap.app" -> "id". Example manifest fragment:

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.app": {
    "id": "sap.fe.demo.awesomeapp",
    "...": "..."
  }
}
```

**STEP**: Run Fiori Tools migration in BAS or VS Code

**DESCRIPTION**: Launch the migration command "Fiori: Migrate Project for use in Fiori tools" from the command palette (or via the SAP Fiori tools extension). Select the project folder restore-from-exported when prompted, choose the appropriate migration options, and complete the migration. The tool will convert the downloaded app to be compatible with Fiori tools and UI5 tooling.

**LANGUAGE**: Instructions

**CODE**:
```text
1. Open Command Palette:
   - VS Code: Ctrl+Shift+P (or Cmd+Shift+P)
   - BAS: Open Command Palette
2. Run command: "Fiori: Migrate Project for use in Fiori tools"
3. Select the folder: <workspace>/restore-from-exported
4. Follow prompts and choose migration options
5. Confirm migration completes and review generated files
```

**STEP**: Post-processing: restore readable source if needed and remove unwanted artifacts before UI5 build

**DESCRIPTION**: Notes and actionable steps to handle minified BSP artifacts and to remove files that should not be present before running UI5 CLI build. If the BSP deployment shipped only minified assets, you may find -dbg.js files containing more readable source. Replace or copy contents as needed. Remove debug, preload and sourcemap files to avoid duplicates being recreated in dist builds.

**LANGUAGE**: Shell / Instructions

**CODE**:
```sh
# If you have readable debug files like Component-dbg.js and want to replace minified Component.js:
# Copy debug version over the minified file (make a backup if desired)
cp restore-from-exported/webapp/Component-dbg.js restore-from-exported/webapp/Component.js

# Remove debug, preload and sourcemap files before running UI5 CLI build
# This prevents duplication in dist/ and avoids build issues
find restore-from-exported/webapp -type f \( -name "*-dbg.js" -o -name "*-preload.js" -o -name "*.js.map" \) -delete
```

Important notes:
- BSP application code is often minified on deployment; if the source is not under source control, use this import only as a last resort.
- The -dbg.js files (e.g., Component-dbg.js) often contain original unminified code; copy contents into corresponding .js files to improve readability before editing.
- Remove -dbg.js, -preload.js, and .js.map files before running UI5 CLI build to avoid recreation or duplication in the dist folder.

**STEP**: Validate project compatibility

**DESCRIPTION**: After migration and cleaning, validate the project runs locally and builds with UI5 tooling.

**LANGUAGE**: Shell / Commands

**CODE**:
```sh
# Example local validation steps (adjust if you use a dev server)
# Install dependencies if package.json includes them
npm install

# Run the UI5 serve (if using @ui5/cli and a ui5.yaml is present or created by migration)
npx ui5 serve --config=ui5.yaml

# Or run the Fiori tools preview / served project according to your setup
# Then open the app URL in a browser to validate functionality
```

--------------------------------

**TITLE**: Installation (fiori-tools)

**INTRODUCTION**: Central index pointing to IDE-specific installation instructions for fiori-tools. Use the linked files to perform environment-specific setup in SAP Business Application Studio or Visual Studio Code.

**TAGS**: fiori-tools, installation, SAP Business Application Studio, Visual Studio Code, IDE

**STEP**: 1 - Overview

**DESCRIPTION**: Locate the IDE-specific installation guides. Each linked file contains step-by-step instructions and prerequisites for that environment.

**LANGUAGE**: Markdown

**CODE**:
```markdown
- SAP Business Application Studio: sap-business-application-studio-b011040.md
- Visual Studio Code: visual-studio-code-17efa21.md#loio17efa217f7f34a9eba53d7b209ca4280
```

**STEP**: 2 - Install in SAP Business Application Studio

**DESCRIPTION**: Open and follow the SAP Business Application Studio installation guide. This file contains the detailed installation and configuration steps specific to that IDE.

**LANGUAGE**: Markdown

**CODE**:
```markdown
Open and follow:
[sap-business-application-studio-b011040.md](sap-business-application-studio-b011040.md)

Actions:
- Open the file in your editor or viewer.
- Follow prerequisites and step-by-step instructions contained in the document.
```

**STEP**: 3 - Install in Visual Studio Code

**DESCRIPTION**: Open and follow the Visual Studio Code installation guide. Use the anchor to jump to the relevant section referenced in the index.

**LANGUAGE**: Markdown

**CODE**:
```markdown
Open and follow:
[visual-studio-code-17efa21.md#loio17efa217f7f34a9eba53d7b209ca4280](visual-studio-code-17efa21.md#loio17efa217f7f34a9eba53d7b209ca4280)

Actions:
- Open the file and jump to the anchor section.
- Follow the provided VS Code-specific installation and configuration steps.
```
--------------------------------

**TITLE**: Migration — Move SAP Fiori projects from SAP Web IDE to SAP Fiori tools (VS Code / Business Application Studio)

**INTRODUCTION**: A concise, actionable guide for automating migration of SAP Fiori projects from SAP Web IDE to SAP Fiori tools in VS Code or SAP Business Application Studio. Use this to prepare projects, run the migration tool, populate required fields, verify results, and complete post-migration tasks (deployment config, OData sync, preview).

**TAGS**: fiori-tools, migration, sapui5, sap-fiori, vs-code, business-application-studio, neo-app.json, manifest, ui5

**STEP**: Prerequisites
**DESCRIPTION**: Install the latest SAP Fiori tools extensions and confirm the project type and that the project runs in SAP Web IDE. Supported project types: SAP Fiori elements V2, SAP Fiori elements V4, freestyle SAPUI5, Extension (Adaptation/Extensibility) projects. Ensure the project contains main data source in manifest.appdescr_variant.
**LANGUAGE**: Text
**CODE**:
```text
Prerequisites checklist:
- Install latest SAP Fiori tools extensions (VS Code / BAS).
- Confirm project runs in SAP Web IDE.
- Confirm project type: Fiori elements V2/V4, freestyle SAPUI5, or Extension.
- Confirm manifest.appdescr_variant contains main data source entry.
```

**STEP**: Recommendations for target systems and version control
**DESCRIPTION**: In BAS define a destination that reflects the original target system. In VS Code know the target system hostname and client. Keep the migrated project under version control.
**LANGUAGE**: Text
**CODE**:
```text
- BAS: Create a destination in your subaccount that matches the original destination (used by neo-app.json).
- VS Code: Obtain hostname (and optional SAP client) of target system for migration.
- Use Git or another VCS for the migrated project.
```

**STEP**: Export or clone project to local workspace
**DESCRIPTION**: Bring the source project into the VS Code / BAS workspace by cloning from git or exporting from SAP Web IDE and copying into the workspace folder.
**LANGUAGE**: Shell
**CODE**:
```bash
# Option A: Clone from Git
git clone <repository-url> ~/projects/my-fiori-app

# Option B: Export from SAP Web IDE
# 1. Export project ZIP from SAP Web IDE to local machine
# 2. Unzip and move into workspace
unzip my-fiori-app.zip -d ~/projects/my-fiori-app

# In VS Code / BAS: File > Open Workspace and select the projects folder
```

**STEP**: Open the Migration view
**DESCRIPTION**: Launch the Migration view from the pop-up or via Command Palette. The view lists all workspace projects the tool can detect. If none are found, add projects manually.
**LANGUAGE**: Text
**CODE**:
```text
Open Migration view:
- Click 'Start Migration' from the VS Code / BAS popup OR
- Command Palette: Execute "Fiori: Migrate Project for use in Fiori tools"
```

**STEP**: Add or select projects for migration
**DESCRIPTION**: Select projects by checkbox. Use Add Project to point to a folder in the filesystem to include a project not auto-detected. Use Refresh to reload the workspace list.
**LANGUAGE**: Text
**CODE**:
```text
- Tick checkboxes for projects to migrate.
- Use 'Add Project' to manually add a folder containing an application.
- Use 'Refresh' to re-scan the workspace.
```

**STEP**: Populate migration fields for each project
**DESCRIPTION**: Supply/confirm values for these fields in the Migration view. Many fields are auto-prepopulated from manifest.json, manifest.appdescr_variant, or neo-app.json. Use the notes and examples below to locate values.
**LANGUAGE**: Text
**CODE**:
```text
Fields to populate:
- Application Identifier: identifier from manifest.json or pom.xml.
- Project Path: local filesystem path to project root.
- SAP System: select saved system (VS Code) or destination (BAS). Selecting sets hostname/client automatically.
- Destination (BAS only): defaults to destination from neo-app.json. Provide front-end destination (SAPUI5 libs installed), not direct back-end service.
- Hostname (VS Code only): backend URL to use for migration (valid URL or blank).
- SAP Client (optional): numeric client if not default.
- SAPUI5 Version: dropdown defaults to neo-app.json version or manifest.json minUI5Version. Note: Extensibility projects need min 1.71.0.
```

**STEP**: Example configuration file snippets
**DESCRIPTION**: Reference examples to locate and verify values used during migration:
- manifest.appdescr_variant must include a main data source entry.
- neo-app.json typically contains the destination name and routes.
- package.json after migration should include sapux:true and ui5-tooling as dependency.
**LANGUAGE**: JSON
**CODE**:
```json
// manifest.appdescr_variant (example fragment)
{
  "sap.app": {
    "id": "com.example.myfioriapp",
    "applicationVersion": { "version": "1.0.0" },
    "dataSources": {
      "mainService": {
        "uri": "/sap/opu/odata/sap/ZMY_SERVICE_SRV/",
        "type": "OData",
        "settings": { "localUri": "localService/metadata.xml" }
      }
    }
  }
}
```

**LANGUAGE**: JSON
**CODE**:
```json
// neo-app.json (example fragment with destination)
{
  "routes": [
    {
      "path": "/sap/opu/",
      "target": {
        "type": "destination",
        "name": "my-backend-destination"
      }
    }
  ]
}
```

**LANGUAGE**: JSON
**CODE**:
```json
// package.json (minimal example of migrated project markers)
{
  "name": "my-fiori-app",
  "version": "1.0.0",
  "sapux": true,
  "devDependencies": {
    "@ui5/cli": "^2.13.0",
    "ui5-tooling": "^1.0.0"
  },
  "scripts": {
    "start": "ui5 serve --config=ui5-local.yaml",
    "deploy-config": "fiori add-deploy-config"
  }
}
```

**STEP**: Start the migration
**DESCRIPTION**: Click Start Migration in the Migration view. The tool migrates selected projects and installs required packages (npm installs). After migration you can view Application Information for Fiori elements projects.
**LANGUAGE**: Text
**CODE**:
```text
- Click 'Start Migration'.
- Migration will modify files and run package installs.
- If a single Fiori elements project was migrated, click 'View Info' in results to open Application Information.
```

**STEP**: Post-migration — deployment configuration
**DESCRIPTION**: Migration does not update deployment configuration. Run the deployment configuration generator to create deployment settings for your environment.
**LANGUAGE**: Shell
**CODE**:
```bash
# From project root after migration
npm run deploy-config
```

**STEP**: Files that the migration modifies or creates
**DESCRIPTION**: Migration updates/creates the following files. Inspect source-control diffs and reconcile any project-specific overrides.
**LANGUAGE**: Text
**CODE**:
```text
Files updated/created during migration:
- .gitignore            : added/updated to ignore build artifacts & libs
- package-lock.json     : deleted and re-created to reflect updated libs
- package.json          : SAP Web IDE libs removed; npm scripts updated; sapux:true and ui5-tooling presence identify a Fiori tools project
- ui5-local.yaml        : new file to support offline ui5 libs and mock data
- ui5.yaml              : updated: removes Web IDE builder tasks; adds proxy middleware and live reload support
- index.html            : new standalone preview page (run with or without FLP)
- manifest.json         : populated/updated by SAP Fiori tools
- changes_loader.js     : new static file for live reload support
- changes_preview.js    : new static file to support .changes files from adaptation updates
- flpSandbox.html       : updated for preview and changes loader; ui5 library paths proxied & runtime ui5 version update
- locate-reuse-libs.js  : new file to detect/register custom reuse libraries at runtime
- flpSandboxMockServer.html : updated variant with mock server support
- webapp/                : created if absent; HTML/JS files moved into webapp folder
```

**STEP**: Re-migration for Adaptation Editor (optional)
**DESCRIPTION**: If using Adaptation Project tooling >= 1.1.60, you can re-migrate adaptation projects migrated earlier to enable the new Adaptation Editor in BAS.
**LANGUAGE**: Text
**CODE**:
```text
- If adaptation tooling >= 1.1.60, re-run migration for existing adaptation projects to enable the Adaptation Editor.
```

**STEP**: Verification and follow-up actions
**DESCRIPTION**: Review changes in Source Control, sync OData metadata, launch Fiori tools commands to validate functionality and preview the app with live or mock data.
**LANGUAGE**: Text
**CODE**:
```text
Verification checklist:
1. Review diffs in Source Control and reapply project-specific changes if needed.
2. Sync OData service (if missing metadata.xml) using Service Manager:
   - Use 'Service Manager' to re-sync OData metadata and annotations.
3. Launch Fiori tools commands to validate:
   - 'Fiori: Open Application Generator' (Open App Generator)
   - 'Fiori: Open Guided Development'
   - Page Map command in the Fiori tools UI
4. Preview the app locally (live data if destination/hostname available, or mock data using ui5-local.yaml).
```

**STEP**: Useful commands and links
**DESCRIPTION**: Quick reference of commands and links used during migration.
**LANGUAGE**: Text
**CODE**:
```text
Command Palette:
- "Fiori: Migrate Project for use in Fiori tools"

NPM:
- npm run deploy-config   # add deployment configuration after migration

Documentation & resources:
- Getting started with SAP Fiori tools: https://help.sap.com/docs/SAP_FIORI_tools
- Extending an SAP Fiori Application: https://help.sap.com/docs/bas/developing-sap-fiori-app-in-sap-business-application-studio/extending-sap-fiori-application
- Blog: Migrate SAP Fiori projects: https://blogs.sap.com/2022/01/06/migrate-sap-fiori-projects-from-sap-web-ide-to-sap-business-application-studio/
```
--------------------------------

**TITLE**: Report Issues and Security - Actionable Checklist and Code Examples for SAP Fiori tools Developers

**INTRODUCTION**: This document provides an actionable, code-focused checklist and small code examples to help developers follow security best practices when building SAP Fiori tools projects. It covers where to get help, how to report issues, how to verify your local environment (PATH and binary sources), configure trusted NPM registries, avoid using production OData for development, separate credentials, use source control safely, and run package security checks.

**TAGS**: sap, fiori-tools, security, npm, node, path, odata, source-control, troubleshooting, support, CA-UX-IDE

**STEP**: 1 — Where to get help and how to create an SAP Support incident

**DESCRIPTION**: Use official resources first. If you need SAP Support, create an incident under component CA-UX-IDE. Use the links below for FAQs, community, and contact. Provide a concise incident template you can copy/paste to speed up reporting.

**LANGUAGE**: plaintext

**CODE**:
```plaintext
SAP Fiori tools resources:
- SAP Fiori tools FAQ: https://help.sap.com/docs/SAP_FIORI_tools/42532dbd1ebb434a80506113970f96e9/160b4d8c680c463daf20c7399e2dc6ad.html
- SAP Fiori tools Community: https://answers.sap.com/tags/73555000100800002345
- Contact SAP Support: https://help.sap.com/viewer/1bb01966b27a429ebf62fa2e45354fea/Latest/en-US

SAP Support incident template (component: CA-UX-IDE):
Subject: [FIORI-TOOLS] <short description>
Component: CA-UX-IDE
Priority: <Your priority>
Description:
- Steps to reproduce:
  1. Tool and version: e.g., @sap/fiori-tools vX.Y.Z, Node vX.Y.Z
  2. OS:
  3. Commands run:
  4. Expected behavior:
  5. Actual behavior:
Attachments:
- package.json, package-lock.json / yarn.lock
- logs, terminal output, screenshots
- minimal reproducible repo or steps to reproduce
```

**STEP**: 2 — Verify PATH and the origin of critical binaries (node, cds)

**DESCRIPTION**: Confirm PATH contents and that critical binaries (node, cds) point to trusted installations. Use the commands below on macOS/Linux and Windows. Inspect symlinks and binary locations.

**LANGUAGE**: bash

**CODE**:
```bash
# Show PATH
echo $PATH

# Which binaries (macOS / Linux)
which node
node -v
ls -l "$(which node)"         # inspect symlink target
which npm
npm -v
which npx
npx -v

# If using @sap/cds (CAP) or other tools:
which cds || command -v cds
cds -v  # if installed

# Show location of global npm binaries
npm bin -g
```

**LANGUAGE**: powershell

**CODE**:
```powershell
# Windows PowerShell
$env:PATH
Get-Command node | Select-Object Name,Source
node -v
Get-Command npm | Select-Object Name,Source
npm -v

# Show file info
Get-Item (Get-Command node).Source | Format-List -Property FullName,LinkType,Target
```

**STEP**: 3 — Use a trusted NPM registry and lockfile-based installs

**DESCRIPTION**: Configure your project/machine to use a trusted registry. Prefer CI-friendly, reproducible installs (npm ci) using package-lock.json or yarn.lock. Use .npmrc for per-project registry settings and never commit tokens. Run npm audit regularly.

**LANGUAGE**: bash

**CODE**:
```bash
# Set registry (example: public npmjs registry or your company registry)
npm config set registry https://registry.npmjs.org/
npm config get registry

# Install reproducibly in CI
npm ci

# Run audits
npm audit
npm audit fix

# Show global npm config
npm config list --json
```

**LANGUAGE**: plaintext

**CODE**:
```ini
# .npmrc (project root) -- do NOT commit auth token to VCS
# Use custom registry for scoped packages or a company registry
registry=https://registry.npmjs.org/
# If using scoped internal packages:
@your-org:registry=https://npm.yourcompany.com/
//npm.yourcompany.com/:_authToken=${NPM_TOKEN}
```

**STEP**: 4 — Avoid using production OData services for development (use mocks or a dev proxy)

**DESCRIPTION**: Never point your local development client directly at production OData services. Use a mock server or a proxy that targets a non-production system. Example options: json-server for basic mock data, a simple Node proxy to forward to a dev backend, or a ui5.yaml proxy middleware for UI5 Tooling.

**LANGUAGE**: bash

**CODE**:
```bash
# Example: quick JSON mock using json-server (not OData, but useful for UI testing)
npm install -D json-server
# create db.json with sample data
npx json-server --watch db.json --port 3001
```

**LANGUAGE**: yaml

**CODE**:
```yaml
# ui5.yaml: configure dev server proxy middleware (UI5 Tooling)
specVersion: '2.2'
metadata:
  name: my.ui5.app
server:
  customMiddleware:
    - name: ui5-middleware-simpleproxy
      mountPath: /sap/opu/odata
      configuration:
        baseUrl: https://dev-sap-backend.example.com
        changeOrigin: true
```

**LANGUAGE**: javascript

**CODE**:
```javascript
// simple Node proxy (express + http-proxy-middleware) to forward requests to a non-production system
// npm i express http-proxy-middleware
const express = require('express');
const { createProxyMiddleware } = require('http-proxy-middleware');

const app = express();

app.use('/sap/opu/odata', createProxyMiddleware({
  target: 'https://dev-sap-backend.example.com',
  changeOrigin: true,
  secure: true
}));

app.listen(3000, () => console.log('Dev proxy listening on http://localhost:3000'));
```

**STEP**: 5 — Use separate credentials for development and production

**DESCRIPTION**: Never reuse production credentials for development. Store credentials in environment variables or secret stores (do not commit them). Example shows a .env and usage with dotenv in local Node development.

**LANGUAGE**: dotenv

**CODE**:
```ini
# .env (DO NOT COMMIT)
DEV_ODATA_USER=dev.user
DEV_ODATA_PASSWORD=your_dev_password_here
PROD_ODATA_USER=prod.user
PROD_ODATA_PASSWORD=your_prod_password_here
```

**LANGUAGE**: javascript

**CODE**:
```javascript
// server.js - load credentials from environment (local dev with dotenv)
require('dotenv').config(); // npm i dotenv
const devUser = process.env.DEV_ODATA_USER;
const devPassword = process.env.DEV_ODATA_PASSWORD;

// Use these credentials only for the dev backend
// Never hardcode production credentials into code
```

**STEP**: 6 — Use source control correctly and avoid committing secrets

**DESCRIPTION**: Ensure every project uses a VCS (git). Keep frequent atomic commits and push to remote. Exclude secrets and build artifacts via .gitignore.

**LANGUAGE**: bash

**CODE**:
```bash
# Initialize repo and commit
git init
git add .
git commit -m "Initial commit"

# Create branch and push to remote
git checkout -b feature/my-feature
git remote add origin git@github.com:your-org/your-repo.git
git push -u origin feature/my-feature
```

**LANGUAGE**: plaintext

**CODE**:
```gitignore
# recommended .gitignore entries
node_modules/
dist/
.env
*.log
npm-debug.log*
package-lock.json   # optional: commit lockfile is recommended; include if you use it
```

**STEP**: 7 — Verify and limit PATH exposure & audit installed tools

**DESCRIPTION**: Ensure that PATH entries and global binaries come from trusted installs. Prefer scoped tool usage via npx or local node_modules/.bin to limit reliance on global binaries.

**LANGUAGE**: bash

**CODE**:
```bash
# Use npx/local binaries by default
npx @sap/fiori-tools-xxx command

# Inspect where a global binary comes from and inspect file signature/owner
which node
ls -l $(which node)
# On Linux, inspect package-managed binary:
dpkg -S $(which node)  # Debian/Ubuntu
rpm -qf $(which node)  # RHEL/CentOS

# To avoid global installs use:
npm install --save-dev @sap/fiori-tools-xxx
./node_modules/.bin/<tool> <args>
```

**STEP**: 8 — Follow upstream security guidance and additional reading

**DESCRIPTION**: Follow your organization’s security policies and vendor documentation for each tool. Refer to the linked security guide for deployment-related security topics.

**LANGUAGE**: plaintext

**CODE**:
```plaintext
Additional resources:
- SAP Fiori tools FAQ: https://help.sap.com/viewer/42532dbd1ebb434a80506113970f96e9/Latest/en-US
- SAP Fiori tools Community: https://answers.sap.com/tags/73555000100800002345
- Contact SAP Support: https://help.sap.com/viewer/1bb01966b27a429ebf62fa2e45354fea/Latest/en-US
- Deployment security guide: ../Deploying-an-Application/security-8a147c6.md
```

--------------------------------

**TITLE**: SAP Business Application Studio — Dev Space and Extension Setup for SAP Fiori Tools

**INTRODUCTION**: Quick, actionable guide for creating the correct SAP Business Application Studio (BAS) dev space and verifying or installing the SAP Fiori tools extensions you need for Fiori/UI5 and CDS development. Use these steps to ensure UI5 Language Assistant is present and to add the CDS OData Language Server if required.

**TAGS**: fiori-tools, sap-business-application-studio, BAS, ui5, cds, extensions

**STEP**: 1 — Create the correct dev space

**DESCRIPTION**: Create a BAS dev space that includes SAP Fiori tools. Choose one of the recommended dev space types to get Fiori tooling preinstalled:
- SAP Fiori Dev Space
- Full Stack Cloud Application Dev Space (for CAP projects)

If you do not already have a BAS workspace, follow the official onboarding tutorial before continuing:
- https://developers.sap.com/tutorials/appstudio-onboarding.html

**LANGUAGE**: Text/URL

**CODE**:
```text
Open BAS (Business Application Studio) from your SAP BTP cockpit or the BAS URL.
When creating a new Dev Space, select one of:
  - "SAP Fiori Dev Space"
  - "Full Stack Cloud Application Dev Space"
See: https://developers.sap.com/tutorials/appstudio-onboarding.html
```

**STEP**: 2 — Verify installed extensions (UI5 Language Assistant is mandatory)

**DESCRIPTION**: Confirm the UI5 Language Assistant extension is present. In BAS this extension is installed automatically for Fiori dev spaces. Use the Extensions view in the BAS UI or a CLI if available in your environment.

- UI5 Language Assistant extension identifier (Marketplace): SAPOSS.vscode-ui5-language-assistant

Use the UI:
- Open Command Palette -> "View: Extensions" (or press Ctrl+Shift+X)
- Search for "UI5 Language Assistant" and confirm it is Enabled

Use CLI (local VS Code or any environment that supports code CLI):
- List installed extensions and filter for UI5
- Install or re-install if necessary

**LANGUAGE**: Shell

**CODE**:
```bash
# List installed extensions and filter for UI5 Language Assistant
code --list-extensions | grep -i ui5 || true

# Install UI5 Language Assistant (local VS Code)
code --install-extension SAPOSS.vscode-ui5-language-assistant
```

**STEP**: 3 — Install or enable CDS OData Language Server (if needed)

**DESCRIPTION**: BAS SAP Fiori tools dev spaces do NOT include the CDS OData Language Server by default. If you are developing CAP/CDS projects or require CDS language features, install the "SAP CDS Language Support" / CDS OData Language Server extension from the Visual Studio Marketplace or via the Extensions view.

Use the UI:
- Open Command Palette -> "View: Extensions"
- Search for "CDS", "CDS Language", or "CDS OData Language Server"
- Install the extension named "SAP CDS Language Support" or similar from the Marketplace

Use CLI (if extension id available or for local VS Code):
- Replace <extension-id> with the exact extension identifier if known

**LANGUAGE**: Shell

**CODE**:
```bash
# Example: Search installed extensions for CDS
code --list-extensions | grep -i cds || true

# Install CDS extension (replace with actual extension id if known)
# e.g. code --install-extension <publisher.extension-id>
code --install-extension "<extension-id-or-name>"
```

**STEP**: 4 — Validate important extension set for Fiori development

**DESCRIPTION**: Verify the common Fiori-related extensions are available (preinstalled in Fiori dev space). Use the Extensions view or list via CLI. Typical extensions to expect:
- SAP Fiori tools (packaged features included in the dev space)
- UI5 Language Assistant (SAPOSS.vscode-ui5-language-assistant)
- (Optional) SAP CDS Language Support / CDS OData Language Server

**LANGUAGE**: Shell

**CODE**:
```bash
# Quick verification list (local VS Code example)
code --list-extensions | egrep -i "ui5|fiori|cds|sap" || true

# Expected output may include:
# SAPOSS.vscode-ui5-language-assistant
# <other fiori-related extensions>
# <cds extension if installed>
```

**STEP**: 5 — Next steps and references

**DESCRIPTION**: After your dev space and extensions are ready, follow the recommended tutorials to generate Fiori apps or continue CAP development.

**LANGUAGE**: Text/URL

**CODE**:
```text
Recommended tutorials:
- Set Up SAP Business Application Studio for Development
  https://developers.sap.com/tutorials/appstudio-onboarding.html

- Set Up and Generate a New SAP Fiori App Project
  https://developers.sap.com/tutorials/fiori-tools-generate-project.html

Additional BAS docs:
- SAP Business Application Studio - Getting Started
  https://help.sap.com/docs/bas/sap-business-application-studio/getting-started?version=Cloud
```
--------------------------------

**TITLE**: Change Telemetry Settings for SAP Fiori tools

**INTRODUCTION**: Quick instructions to enable or disable collection of non-personally-identifiable analytics for SAP Fiori tools using Visual Studio Code. Use this to opt in or out of telemetry that helps improve the product.

**TAGS**: fiori-tools, telemetry, vscode, analytics, settings

**STEP**: 1 — Open the Command Palette

**DESCRIPTION**: Open VS Code's Command Palette to run extension commands.

**LANGUAGE**: Keystroke

**CODE**:
```
macOS:     ⌘ (CMD)  + ⇧ (Shift) + P
Windows/Linux: Ctrl     + Shift     + P
```

**STEP**: 2 — Run the telemetry command

**DESCRIPTION**: In the Command Palette, type or select the Fiori telemetry command to toggle telemetry collection. The command presents the option to enable or disable telemetry for SAP Fiori tools. This controls collection of non-personally-identifiable usage data.

**LANGUAGE**: Command

**CODE**:
```
Fiori: Change Telemetry Settings
```
--------------------------------

**TITLE**: Setup Visual Studio Code for SAP Fiori tools (Node.js, MTA, CF CLI, Extensions, Auth)

**INTRODUCTION**: Checklist and actionable commands to prepare a development environment for SAP Fiori tools in Visual Studio Code. Covers Node.js installation (Windows/macOS), MTA tool, Cloud Foundry CLI, npm scope verification/fix, VS Code installation, installing SAP Fiori extensions (including CDS and UI5 Language Assistant), and the OData service paths for SAML considerations.

**TAGS**: fiori-tools, vs-code, nodejs, mta, cloud-foundry, extensions, sap, CAP, ui5, authentication, npm

**STEP**: 1 — Verify Node.js and npm (required LTS)
**DESCRIPTION**: Confirm Node.js and npm are installed and are LTS-compatible. Use these commands to check versions and validate compatibility.
**LANGUAGE**: Bash
**CODE**:
```bash
# Check installed versions
node -v
npm -v

# If Node.js is missing, download installer:
# Windows / macOS: https://nodejs.org/en/download/
# Use LTS releases: https://nodejs.org/en/about/releases/
```

**STEP**: 2 — Install Node.js on Windows (installer or standalone binary)
**DESCRIPTION**: Recommended: use Windows installer from nodejs.org (requires admin). If installer is not possible, use standalone zip, extract to user-local Programs, set NODE_PATH and add it to Path for your user account. Restart required to apply environment changes.
**LANGUAGE**: PowerShell (commands) and instructions
**CODE**:
```powershell
# Example: set environment variables for standalone binary (run in an elevated PowerShell if needed)
# Replace <your_user> and <your_node_folder> accordingly:
$nodeFolder = "C:\Users\<your_user>\AppData\Local\Programs\<your_node_folder>"
[Environment]::SetEnvironmentVariable("NODE_PATH", $nodeFolder, "User")

# Append NODE_PATH to user PATH (PowerShell):
$userPath = [Environment]::GetEnvironmentVariable("Path","User")
if ($userPath -notlike "*%NODE_PATH%*") {
  [Environment]::SetEnvironmentVariable("Path", "$userPath;$env:NODE_PATH", "User")
}

# After environment updates, restart your computer or sign out/sign in for changes to take effect.
```

**STEP**: 3 — Install Node.js on macOS (Homebrew or nvm)
**DESCRIPTION**: Use a package manager for clean installs and easy LTS management. Recommended options: Homebrew or nvm.
**LANGUAGE**: Bash
**CODE**:
```bash
# Homebrew (recommended)
brew install node

# Or using nvm (Node Version Manager)
# Install nvm (follow nvm docs) then:
nvm install --lts
nvm use --lts
```

**STEP**: 4 — Install SAP MTA Tool (required by SAP Fiori application generator)
**DESCRIPTION**: Install the Multi-Target Application (mta) Node package globally. Verify installation by checking version.
**LANGUAGE**: Bash
**CODE**:
```bash
# Install globally
npm install -g mta

# Verify
mta --version
```

**STEP**: 5 — Install Cloud Foundry CLI tools (CF CLI)
**DESCRIPTION**: Download and install the latest Cloud Foundry CLI to access Cloud Foundry services on SAP BTP. Follow the official installation instructions; verify installation with a version check.
**LANGUAGE**: Bash / Reference
**CODE**:
```bash
# Official guide and platform-specific installers:
# https://docs.cloudfoundry.org/cf-cli/install-go-cli.html

# Example check (after install)
cf --version
```

**STEP**: 6 — Verify and fix npm @sap scope in npm config
**DESCRIPTION**: Ensure your npm configuration does not wrongly point the @sap scope to a private registry. Verify with npm config get and remove @sap entry from ~/.npmrc if present and incorrect.
**LANGUAGE**: Bash / PowerShell
**CODE**:
```bash
# Check @sap registry
npm config get @sap:registry
# Expected outputs: "https://registry.npmjs.org" OR "undefined"

# If incorrectly set to @sap, remove the entry from ~/.npmrc
# Unix/macOS:
# Open and manually edit ~/.npmrc and remove any line beginning with: @sap:registry=
# OR remove using sed:
sed -i.bak '/^@sap:registry/d' ~/.npmrc

# Windows PowerShell (remove line in %USERPROFILE%\.npmrc)
(Get-Content $env:USERPROFILE\.npmrc) | Where-Object { $_ -notmatch '^@sap:registry' } | Set-Content $env:USERPROFILE\.npmrc
```

**STEP**: 7 — Download and open Visual Studio Code
**DESCRIPTION**: Install VS Code using user or system installer depending on admin rights. Familiarize yourself with the UI and basic layout.
**LANGUAGE**: Reference
**CODE**:
```text
# Download: https://code.visualstudio.com/download
# VS Code resources:
# - Basic layout: https://code.visualstudio.com/docs/getstarted/userinterface#_basic-layout
# - Intro videos: https://code.visualstudio.com/docs/getstarted/introvideos

# To open VS Code from terminal after install:
code .
```

**STEP**: 8 — Install SAP Fiori tools Extension Pack (recommended) and verify
**DESCRIPTION**: Use the Extensions view in VS Code or install from the Marketplace. You can also install extensions via the command line. The Extension Pack installs the Application Wizard, Application Modeler, Guided Development, Service Modeler, XML Annotation Language Server, and XML Toolkit.
**LANGUAGE**: Bash
**CODE**:
```bash
# Install Extension Pack from VS Code Marketplace (open link or use CLI)
# Marketplace link: https://marketplace.visualstudio.com/items?itemName=SAPSE.sap-ux-fiori-tools-extension-pack

# Install via VS Code CLI:
code --install-extension SAPSE.sap-ux-fiori-tools-extension-pack

# Verify installed
code --list-extensions | grep -i sap
```

**STEP**: 9 — (Optional) Install SAP CDS Language Support for CAP CDS annotations
**DESCRIPTION**: Optional extension for CAP CDS annotation LSP. Install from Marketplace or via CLI.
**LANGUAGE**: Bash
**CODE**:
```bash
# Marketplace link: https://marketplace.visualstudio.com/items?itemName=SAPSE.vscode-cds#overview

# Install via VS Code CLI:
code --install-extension SAPSE.vscode-cds
```

**STEP**: 10 — (Optional) Install UI5 Language Assistant Support
**DESCRIPTION**: Optional open-source extension that performs control ID checks when manifest.json has flexEnabled=true and improves suggestions/filters. Install from Marketplace or via CLI.
**LANGUAGE**: Bash
**CODE**:
```bash
# Marketplace link:
# https://marketplace.visualstudio.com/items?itemName=SAPOSS.vscode-ui5-language-assistant&ssr=false#overview

# Install via VS Code CLI:
code --install-extension SAPOSS.vscode-ui5-language-assistant
```

**STEP**: 11 — Verify installed SAP Fiori tools extensions list (examples)
**DESCRIPTION**: Confirm the individual extensions that the Extension Pack installs, or install them separately when needed.
**LANGUAGE**: Bash
**CODE**:
```bash
# Example: list installed extensions to confirm SAP Fiori tools and related extensions
code --list-extensions | grep -E "sap|fiori|cds|ui5|xml"
```

**STEP**: 12 — Supported authentication types and OData services to consider for SAML
**DESCRIPTION**: Review supported authentication methods for VS Code SAP Fiori tools and, if required, disable SAML for selected OData services used by tools. Recommended: use SAP Business Application Studio for broader auth support. Listed OData service paths below are commonly required by the tools.
**LANGUAGE**: PlainText
**CODE**:
```text
Supported authentication types (summary):
- OAuth 2.0 (Client Credentials): Supported for SAP BTP, ABAP Environment; not supported for SAP On Premise, Cloud Foundry, S/4HANA Cloud.
- Basic Authentication: Supported for SAP On Premise and SAP BTP Cloud Foundry; not for BTP ABAP Environment or S/4HANA Cloud.
- Reentrance Ticket: Supported for SAP BTP ABAP Environment and SAP S/4HANA Cloud; not for On Premise or Cloud Foundry.

Recommendation:
- Prefer SAP Business Application Studio for broader authentication coverage. See SAP note: https://me.sap.com/notes/0002577263

OData services to consider disabling SAML for (paths):
/sap/opu/odata/IWFND/CATALOGSERVICE;v=2
/sap/opu/odata4/iwfnd/config/default/iwfnd/catalog/0001       # OData V4 catalog (dev)
/sap/opu/odata4/iwfnd/config/default/iwfnd/catalog/0002       # OData V4 catalog (prod)
/sap/bc/adt/ato/settings                                       # ATO Catalog
/sap/opu/odata/UI5/ABAP_REPOSITORY_SRV                        # SAPUI5 repository service (deploy & undeploy)
```
--------------------------------

**TITLE**: App-to-App Navigation Preview (Fiori Tools)

**INTRODUCTION**: Enable and preview external (app-to-app) navigation between two SAP Fiori applications that live in the same workspace. The Fiori tools command generates a sandbox configuration file (appconfig/fioriSandboxConfig.json) in the source app folder and updates ui5.yaml so the preview can route from the source app to one or more configured target apps.

**TAGS**: fiori-tools, app-to-app, navigation, fiori-elements, ui5, ui5.yaml, fioriSandboxConfig.json, vscode, preview

**STEP**: 1 — Enable App-to-App Navigation Preview (VS Code)

**DESCRIPTION**: Open the VS Code Command Palette and run the Fiori tools command. Select the source application (origin) and one or more target applications (destination) from the workspace. The command will create/update appconfig/fioriSandboxConfig.json inside the selected source app and will update ui5.yaml in that same source application to make the config available during local preview.

**LANGUAGE**: Shell

**CODE**:
```shell
# In VS Code:
# 1. Open Command Palette (Ctrl/Cmd+Shift+P)
# 2. Run:
Fiori: Enable App-to-App Navigation Preview

# 3. Follow prompts:
#    - Select source application (where navigation originates)
#    - Select target application (where navigation leads)
# Result message:
#    "App-to-App Navigation enabled."
```

**STEP**: 2 — Verify generated file: appconfig/fioriSandboxConfig.json

**DESCRIPTION**: After the command completes, verify the new file appconfig/fioriSandboxConfig.json exists inside the source application folder. This JSON file contains the mapping(s) from the source app's navigation intent to the target app(s). Use the example template below and replace the placeholders with real values (semanticObject, action, app IDs, and relative target URLs). You can add multiple route entries to map multiple target navigations.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "applications": {
    "<source-app-folder-or-appId>": {
      "name": "<source-app-name-or-id>",
      "routes": [
        {
          "intent": {
            "semanticObject": "<SemanticObject>",   // e.g., "Product"
            "action": "<action>"                   // e.g., "display"
          },
          "target": {
            "appId": "<target-app-id>",
            "url": "../<target-app-folder>/webapp/index.html",
            "description": "Target application to open for the specified intent"
          }
        }
        // Add additional route objects to map more target navigations
      ]
    }
  }
}
```

**STEP**: 3 — Inspect ui5.yaml update

**DESCRIPTION**: The command updates the source application's ui5.yaml so the generated fioriSandboxConfig.json is available during the local preview. After running the command, inspect ui5.yaml in the source app and confirm there is a reference mentioning fioriSandboxConfig.json (search for "fioriSandboxConfig.json"). The exact key name or middleware entry may vary depending on your UI5 Tooling and Fiori tools version; below is a minimal guidance snippet showing the file header and a comment to help locate the added configuration.

**LANGUAGE**: YAML

**CODE**:
```yaml
specVersion: '2.2'
metadata:
  name: <source-app-name>

# The Fiori tools command adds configuration entries to make:
#   appconfig/fioriSandboxConfig.json
# available during local previews.
# Search for "fioriSandboxConfig.json" in this file to see the exact added entry.
```

**STEP**: 4 — Start preview and test navigation

**DESCRIPTION**: Launch the preview/debug for the source application (for example, using UI5 Tooling or the Fiori tools preview command). Trigger the configured external navigation inside the source app (for example, by activating a link or calling cross-application navigation to the configured semantic object/action). The local preview will route to the target application as defined in appconfig/fioriSandboxConfig.json.

**LANGUAGE**: Shell

**CODE**:
```shell
# Typical local preview using UI5 Tooling (run in the source app folder)
ui5 serve --config=ui5.yaml

# Or use VS Code Fiori Tools: "Fiori: Start App Preview" for the source app.
# Then exercise the navigation inside the source app UI that triggers the configured intent.
```

**STEP**: 5 — Add or edit multiple target navigations

**DESCRIPTION**: You can map multiple target apps from the same source by appending additional route objects to the routes array in appconfig/fioriSandboxConfig.json. Ensure each route defines the intent (semanticObject/action) and the correct relative URL to the target app entry (index.html or launch page).

**LANGUAGE**: JSON

**CODE**:
```json
{
  "applications": {
    "sourceApp": {
      "routes": [
        {
          "intent": { "semanticObject": "Product", "action": "display" },
          "target": { "appId": "targetApp1", "url": "../targetApp1/webapp/index.html" }
        },
        {
          "intent": { "semanticObject": "Invoice", "action": "manage" },
          "target": { "appId": "targetApp2", "url": "../targetApp2/webapp/index.html" }
        }
      ]
    }
  }
}
```

**STEP**: 6 — Troubleshooting checklist

**DESCRIPTION**: Quick checks if preview navigation does not work:
- Confirm both source and target applications are in the same workspace and paths in appconfig/fioriSandboxConfig.json are correct and relative.
- Open ui5.yaml in the source app and verify it references appconfig/fioriSandboxConfig.json (search for the filename).
- Ensure the target app build/launch page exists at the specified URL (e.g., webapp/index.html).
- Restart the local preview/server after editing appconfig/fioriSandboxConfig.json or ui5.yaml.

**LANGUAGE**: Plaintext

**CODE**:
```text
Troubleshooting steps:
1. Confirm appconfig/fioriSandboxConfig.json exists in the source app folder.
2. Verify each "target.url" path is correct and reachable from the source app preview server.
3. Search ui5.yaml for "fioriSandboxConfig.json" to confirm the command added the necessary entry.
4. Restart your preview server (e.g., stop and run `ui5 serve` again) after changes.
```
--------------------------------

**TITLE**: Convert a Fiori Project to Use Virtual Endpoints (sap-ux converter)

**INTRODUCTION**: Convert an existing Fiori/UI5 project preview configuration to use virtual endpoints via the sap-ux converter. This replaces local preview HTML/js/test runners with virtual endpoint configuration and standard middleware. Use this when migrating to modern preview tooling and virtual endpoints so your preview is kept up-to-date with package versions and best practices.

**TAGS**: fiori-tools, sap-ux, ui5, virtual-endpoints, migration, preview-middleware

**STEP**: Prerequisites — verify and install required tooling

**DESCRIPTION**: Ensure you have the required CLI/tools and middleware versions installed before running the converter. Install or update these packages locally or globally as appropriate for your project.

**LANGUAGE**: Shell

**CODE**:
```bash
# Install UI5 CLI v3+ (global)
npm install -g @ui5/cli@^3.0.0

# Install/update sap ux ui5 tooling in your project (dev dependency)
npm install --save-dev @sap/ux-ui5-tooling@^1.15.4

# Install FE mockserver middleware or cds plugin (dev dependency)
npm install --save-dev @sap-ux/ui5-middleware-fe-mockserver
# or if using CDS:
npm install --save-dev cds-plugin-ui5

# If you previously used @sap/grunt-sapui5-bestpractice-build, migrate to @ui5/cli:
npm install --save-dev @ui5/cli
```

**STEP**: Confirm migration away from deprecated preview/middleware

**DESCRIPTION**: If your project currently uses sap/ui/core/util/MockServer or @sap/ux-ui5-fe-mockserver-middleware, migrate to @sap-ux/ui5-middleware-fe-mockserver. Remove or replace old middleware references and ensure ui5.yaml references the new middleware (see next steps).

**LANGUAGE**: Text

**CODE**:
```text
- Remove usage of:
  - sap/ui/core/util/MockServer  (manual code-based mockserver)
  - @sap/ux-ui5-fe-mockserver-middleware  (legacy middleware)

- Add usage of:
  - @sap-ux/ui5-middleware-fe-mockserver
```

**STEP**: Run the sap-ux converter — VS Code or CLI

**DESCRIPTION**: Launch the converter either from the VS Code extension Command Palette or from the CLI. The converter will rename/delete local preview files and configure virtual endpoints. Answer prompts to simulate or execute and to convert test runners.

**LANGUAGE**: Text

**CODE**:
```text
# Option A: In VS Code
- Open Command Palette (Cmd/Ctrl + Shift + P)
- Run: "Fiori: Convert Preview Config"

# Option B: From the project root (CLI)
npx sap-ux convert preview-config
```

**STEP**: Example CLI interactive prompts and recommended responses

**DESCRIPTION**: The CLI is interactive. Prompts will ask if you want to simulate the conversion and whether to convert test runners. Use the responses to control behavior.

**LANGUAGE**: Shell

**CODE**:
```text
$ npx sap-ux convert preview-config

? Simulate conversion only? (Y/n)
# Answer:
#  - Y  -> Run a dry-run (recommended first)
#  - n  -> Apply changes to project files (perform conversion)

? Convert test runners? (Y/n)
# Answer:
#  - Y  -> Update/convert existing test runners to the new preview config
#  - n  -> Leave test runners unchanged
```

**STEP**: Post-conversion — inspect terminal output and verify changes

**DESCRIPTION**: After conversion, the CLI prints a summary of what changed. Inspect the terminal output and source control diff to confirm renamed/deleted files and new configuration for virtual endpoints.

**LANGUAGE**: Text

**CODE**:
```text
- Check terminal output for conversion summary
- Review git diffs:
  git status
  git diff
- Confirm files removed/renamed (e.g., local preview HTML, preview JS, legacy test files)
- Confirm new config entries that reference virtual endpoints / preview middleware
```

**STEP**: Move custom local HTML changes to a preview init script (if applicable)

**DESCRIPTION**: If you modified local HTML files (for example flpSandbox.html) keep those customizations by moving them to a custom init script used by the preview middleware. If you did not modify the local HTML files, you can safely delete them after conversion.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Example: tools/preview-init.js
// Export a function the preview middleware can call to apply customizations.
// Replace this placeholder with your customizations previously inside flpSandbox.html.
module.exports = function previewInit({ app, logger }) {
  // Example: register a small route or middleware for preview
  app.get('/custom-preview-injection', (req, res) => {
    res.type('text/html').send('<!-- custom preview content here -->');
  });

  logger.info('Custom preview init loaded.');
};
```

**STEP**: Configure preview middleware to use your init script (ui5.yaml)

**DESCRIPTION**: Ensure your ui5.yaml references the preview middleware (or fe-mockserver middleware) and points to your init script if required by your preview middleware setup.

**LANGUAGE**: YAML

**CODE**:
```yaml
# Example ui5.yaml snippet (add under 'server' or middleware config)
server:
  customMiddleware:
    - name: @sap-ux/ui5-middleware-fe-mockserver
      mountPath: /resources
      # if the middleware supports an init file path, point it to your preview-init.js
      # exact key names may differ depending on middleware version; consult package docs
      # settings:
      #   initScript: tools/preview-init.js
```

**STEP**: Clean up or delete local HTML files if not modified

**DESCRIPTION**: If you did not customize local preview HTML files such as flpSandbox.html, you can delete them post-conversion to avoid stale local preview files.

**LANGUAGE**: Shell

**CODE**:
```bash
# Example cleanup (verify before deletion)
git rm -f webapp/flpSandbox.html
git rm -f webapp/preview.html
git commit -m "Remove local preview HTML after conversion to virtual endpoints"
```

**STEP**: Verify preview runs with virtual endpoints

**DESCRIPTION**: Start your UI5 server and verify the preview uses virtual endpoints and the configured middleware. Check browser preview and terminal logs for middleware initialisation.

**LANGUAGE**: Shell

**CODE**:
```bash
# Start the UI5 server (using ui5-cli)
npx ui5 server --config=ui5.yaml

# Or use your existing npm script:
npm run start  # ensure package.json script points to ui5 server
```

**STEP**: Notes and troubleshooting

**DESCRIPTION**: If something looks wrong:
- Re-run converter in simulate mode first to preview changes.
- Inspect ui5.yaml and middleware versions.
- Check the preview middleware README for migration details: preview-middleware - Migration.

**LANGUAGE**: Text

**CODE**:
```text
Useful links:
- sap-ux convert preview-config docs in open-ux-tools create README:
  https://github.com/SAP/open-ux-tools/blob/main/packages/create/README.md#preview-config
- @sap-ux/ui5-middleware-fe-mockserver npm:
  https://www.npmjs.com/package/@sap-ux/ui5-middleware-fe-mockserver
- Migrate to UI5 CLI v3:
  https://sap.github.io/ui5-tooling/v3/updates/migrate-v3
```
--------------------------------

**TITLE**: Create and Configure a Run Configuration in SAP Business Application Studio

**INTRODUCTION**: Step-by-step, actionable guidance to create, configure, run, and inspect a run configuration in SAP Business Application Studio (BAS). Includes required package versions and a concrete example JSON schema for the run configuration object so agents can read/write configurations programmatically.

**TAGS**: SAP, Business Application Studio, run-configuration, ui5, @sap/ux-ui5-tooling, mock-server, remote-access, fiori-tools

**STEP**: Prerequisites and version requirements

**DESCRIPTION**: Ensure the workspace uses compatible tooling before creating run configurations.

- The Run Configuration Wizard requires @sap/ux-ui5-tooling >= 1.5.3.
- Enabling "Enable Remote Access" requires @sap/ux-ui5-tooling >= 1.19.1.

**LANGUAGE**: None

**CODE**:
```text
# No code. Verify package.json or installed tooling versions:
# Example check (in project workspace):
#   npm ls @sap/ux-ui5-tooling
# Ensure the version reported meets the requirements above.
```

**STEP**: Open Run Configurations pane

**DESCRIPTION**: Open the UI in BAS to manage run configurations.

- From the left-side toolbar of BAS, click "Run Configurations".
- The Run Configuration pane will appear.

**LANGUAGE**: None

**CODE**:
```text
# No code; UI action in BAS.
```

**STEP**: Create a new run configuration

**DESCRIPTION**: Add a new configuration using the Add (+) icon and select the project to apply it to.

- Click the + (Add) icon in the Run Configuration pane.
- In the dialog, choose the project (What would you like to run?).

**LANGUAGE**: None

**CODE**:
```text
# No code; UI action in BAS.
```

**STEP**: Populate run configuration fields

**DESCRIPTION**: Provide these fields in the dialog. The descriptions below are action-focused for programmatic editing or UI selection.

- Name (mandatory): Set or change the default name.
- Endpoint (mandatory): Select the HTML file that launches the app (e.g., index.html, Component-preload.js entry point HTML).
- Mock Data: Toggle to run a local mock server that intercepts/mocks OData requests.
- Support Assistant: Toggle to run the SAPUI5 Support Assistant checks (best practices).
- Enable Remote Access: Toggle to allow external devices to reach the dev server (use only in development). Requires @sap/ux-ui5-tooling >= 1.19.1. When enabled, the terminal shows connection URL/QR.
- URL Components: Add query parameters and a hash fragment to simulate FLP intent-based navigation.
- Advanced Settings:
  - SAPUI5 Version: Choose which SAPUI5 runtime to use for preview.
  - Destinations: Override destinations used by the application.
  - Use local SAPUI5 sources: If selected, BAS downloads the specified SAPUI5 version and uses those libraries. When this option is selected, "Run with mock data" is automatically enabled.

**LANGUAGE**: None

**CODE**:
```text
# No code; these are UI fields. Use the JSON schema example below for programmatic edits.
```

**STEP**: Save and run the configuration

**DESCRIPTION**: Save the configuration and start the app.

- Click Save in the dialog.
- The configuration appears in the Run and Debug pane and in the Run Configurations table.
- To run: click the play [>] icon under Actions OR select the configuration in Run and Debug dropdown and click Start Debugging (debug icon).

**LANGUAGE**: None

**CODE**:
```text
# No code; UI actions. Programmatic equivalent: write the run configuration JSON (see example) to workspace configuration file used by BAS.
```

**STEP**: Quick actions in the Run Configuration pane

**DESCRIPTION**: Use right-click or quick-action buttons to modify configs.

- Bind/Unbind SAPUI5 Version: change the SAPUI5 version quickly.
- Bind/Unbind Data Source: change the destination used by the configuration.
- Rename: Right-click -> Rename to change the configuration name.
- Show in File: Right-click -> Show File to open the JSON file that contains the configuration properties, with the entry highlighted.
- Delete: Right-click -> Delete to remove the configuration.

**LANGUAGE**: None

**CODE**:
```text
# No code; UI actions. When Show in File is used you will edit the JSON file described below.
```

**STEP**: Example run configuration JSON schema (programmatic editing)

**DESCRIPTION**: Reference JSON structure that BAS uses for run configuration entries. Use this example to programmatically create or update run configurations. Field names correspond to UI fields described above. Unknown or additional properties may exist in real BAS files; keep them if present.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "name": "My Fiori App - Local Preview",
  "project": "my-fiori-project",           // project identifier or workspace folder
  "endpoint": "webapp/index.html",         // HTML entry for the app
  "mockData": true,                        // run mock server when true
  "supportAssistant": false,               // run SAPUI5 Support Assistant
  "enableRemoteAccess": true,              // allow remote devices (requires @sap/ux-ui5-tooling >= 1.19.1)
  "urlComponents": {
    "parameters": {
      "sap-ui-language": "EN",
      "sap-client": "001"
    },
    "hash": "Shell-home?component=MyApp"
  },
  "advancedSettings": {
    "sapui5Version": "1.110.0",
    "useLocalSAPUI5": true,                 // if true, BAS downloads and uses local SAPUI5 sources; also enables mockData automatically
    "destinations": [
      {
        "name": "ES5",
        "url": "https://example.sap.com/odata/"
      }
    ]
  }
}
```

**STEP**: Notes for automation and scripts

**DESCRIPTION**: When automating run configuration creation or modification:

- Validate the installed @sap/ux-ui5-tooling version before enabling remoteAccess.
- If useLocalSAPUI5 is true, ensure network access for downloading SAPUI5 sources.
- Preserve unknown fields when editing the JSON to avoid losing BAS-specific metadata.
- After editing the JSON file, refresh BAS Run Configurations pane or reopen BAS for changes to take effect.

**LANGUAGE**: Shell / text

**CODE**:
```bash
# Example validation check (run in project workspace)
npm ls @sap/ux-ui5-tooling --depth=0

# After changing run config JSON programmatically, optionally reload BAS window to refresh panes.
```
--------------------------------

**TITLE**: Create a New Run Configuration in Visual Studio Code (SAP Fiori Tools)

**INTRODUCTION**: Step-by-step instructions and actionable configuration examples to create a new Run Configuration for an SAP Fiori project in Visual Studio Code using the Fiori Run Configuration Wizard. Includes required version constraints and a JSON example you can use for programmatic creation or templating.

**TAGS**: fiori-tools, vscode, run-configuration, sapui5, ui5, mock-server, remote-access

**STEP**: 1 — Preconditions and Version Requirements

**DESCRIPTION**: Verify tool versions before using the Run Configuration Wizard.

- The Run Configuration Wizard requires @sap/ux-ui5-tooling >= 1.5.3.
- Remote Access feature requires @sap/ux-ui5-tooling >= 1.19.1.

Use these checks to gate automation or prompt the user to update dependencies.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "required": {
    "@sap/ux-ui5-tooling": {
      "wizard": ">=1.5.3",
      "remoteAccess": ">=1.19.1"
    }
  }
}
```

**STEP**: 2 — Open the Run Configuration Wizard in VS Code

**DESCRIPTION**: Use the VS Code Command Palette to open the Fiori Run Configurations UI.

- Command Palette shortcut: CMD/CTRL + Shift + P
- Command to run: Fiori: Open Run Configurations
- Then select the target project from the list and press Enter.

This step opens the UI that lists existing run configurations and provides a Create button.

**LANGUAGE**: Plain Text

**CODE**:
```text
# Open Command Palette (macOS: ⌘⇧P, Windows/Linux: Ctrl+Shift+P)
# Execute:
Fiori: Open Run Configurations

# Select project -> Enter
# Click "Create" in the Run Configurations UI
```

**STEP**: 3 — Provide Run Configuration Fields (UI-guided)

**DESCRIPTION**: Populate the run configuration fields in the wizard. These fields are mandatory or optional as noted. Use the example JSON below to create configurations programmatically or as a template.

Fields:
- Name (mandatory): human-readable name for the configuration.
- Endpoint (mandatory): select the HTML file used when the app starts (e.g., webapp/index.html).
- Mock Data (optional boolean): run with mock OData server.
- Support Assistant (optional boolean): enable best-practice checks for SAPUI5 apps.
- Enable Remote Access (optional boolean): allow device connections across network (development only). Requires @sap/ux-ui5-tooling >= 1.19.1.
- URL Components (optional object): additional URL query parameters and hash fragment for intent-based navigation.
- Advanced Setting (optional object):
  - sapui5Version (optional string): runtime SAPUI5 version.
  - useLocalSapui5Sources (optional boolean): download/use local SAPUI5 libraries for preview (automatically enables mock data when selected).
  - destinations (optional array): override/define destinations used by the app.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "name": "My Fiori App - Preview",
  "endpoint": "webapp/index.html",
  "mockData": true,
  "supportAssistant": false,
  "enableRemoteAccess": false,
  "urlComponents": {
    "params": {
      "sap-client": "100",
      "sap-language": "EN"
    },
    "hash": "Shell-home?component=MyComponent"
  },
  "advanced": {
    "sapui5Version": "1.109.0",
    "useLocalSapui5Sources": false,
    "destinations": [
      {
        "name": "myBackend",
        "url": "https://my-backend.example.com"
      }
    ]
  }
}
```

**STEP**: 4 — Save the Configuration

**DESCRIPTION**: After providing all fields in the wizard click Save. The new configuration is persisted by the Fiori Tools extension (visible in the Run Configurations table and the Run and Debug pane).

- Expect the configuration to appear:
  - In the Run and Debug pane (left sidebar).
  - In the Run Configurations table (Fiori Tools UI).

**LANGUAGE**: Plain Text

**CODE**:
```text
# Click "Save" in the Run Configurations wizard.
# Verify the configuration appears in:
#  - Run and Debug pane (select "Run Configuration" dropdown)
#  - Run Configurations table (Actions column)
```

**STEP**: 5 — Launch and Debug the Configuration

**DESCRIPTION**: Start the application using the saved run configuration.

- Use the Run Configurations table: click the > icon in the Actions column to start.
- Or use the Run and Debug pane:
  - Select your configuration from the dropdown (“Run Configuration”).
  - Click the Start Debugging icon (play icon).
- If Enable Remote Access is enabled, the terminal will show connection info (URL and QR code) for other devices on the same network.

**LANGUAGE**: Plain Text

**CODE**:
```text
# To run:
# Option A: Click ">" in the Actions column of the Run Configurations table.
# Option B: In Run and Debug pane:
#   - Select the saved Run Configuration
#   - Click the "Start Debugging" (play) icon

# If remote access is enabled, expect terminal output:
# "Server running. Connect at http://<host>:<port>/... or scan QR code"
```

**STEP**: 6 — Advanced Notes for Automation and Templates

**DESCRIPTION**: Use the JSON template (Step 3) in automation scripts (CLI, workspace generators, or extension code) to create reproducible run configurations. Validate version gates before creating remote-access-enabled configurations.

- If useLocalSapui5Sources is true, mockData will be implicitly enabled by the preview runtime.
- Enforce the "@sap/ux-ui5-tooling" version constraints in your CI or generator logic before enabling advanced features.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "automationGuidance": {
    "validateVersions": [
      {
        "check": "@sap/ux-ui5-tooling >= 1.5.3",
        "action": "enable wizard"
      },
      {
        "check": "@sap/ux-ui5-tooling >= 1.19.1",
        "action": "allow enableRemoteAccess"
      }
    ],
    "rules": {
      "useLocalSapui5Sources": {
        "implies": ["mockData"]
      }
    }
  }
}
```
--------------------------------

**TITLE**: Developer Variant Creation (SAP Fiori tools)

**INTRODUCTION**: Instructions for creating and packaging developer (design-time/UI adaptation) variants for SAP Fiori applications using SAP Fiori tools. Variants are stored as SAPUI5 flexibility changes under webapp/changes and are packaged with the app at build time. Use these steps to enable variant creation, run the preview UI adaptation mode, create variants, and convert static text to i18n keys.

**TAGS**: fiori-tools, sapui5, variants, ui-adaptation, webapp/changes, i18n, @sap/ux-ui5-tooling

**STEP**: Preconditions and compatibility

**DESCRIPTION**: Verify compatibility and required module before enabling developer variant creation. Developer variant creation is provided by the @sap/ux-ui5-tooling node module (preview feature). Supported SAPUI5 versions:
- SAPUI5 1.90 for OData V2 based apps
- SAPUI5 1.84 for OData V4 based apps

Note: @sap/ux-ui5-tooling only supports ABAP service-based projects. Developer variants store view settings (filter settings, control parameters) and are referred to as "views" in the UI.

**LANGUAGE**: Shell

**CODE**:
```shell
# Install the tooling package for preview feature (dev dependency)
npm install --save-dev @sap/ux-ui5-tooling
```

**STEP**: Add configuration for variant creation (if missing)

**DESCRIPTION**: If the "start-variants-management" preview script is not present in your project, add the configuration using VS Code Fiori commands. This adds the preview script/config required to open the application in UI adaptation mode.

Actions:
- Open VS Code Command Palette: (Cmd/Ctrl + Shift + P)
- Execute: Fiori: Add Configuration for Variants Creation

After running that command, confirm a preview launch configuration or script named start-variants-management has been added to your project (via .vscode tasks or package.json script, depending on the generator).

**LANGUAGE**: Text

**CODE**:
```text
# Use VS Code Command Palette
Cmd/Ctrl + Shift + P -> "Fiori: Add Configuration for Variants Creation"
# This command creates/updates the preview config that exposes "start-variants-management"
```

**STEP**: Start the Preview UI adaptation mode

**DESCRIPTION**: Launch the preview variant management UI to create and adapt views.

Actions:
- From the Preview Application context menu, select/run "start-variants-management".
- A new browser tab opens with the application in UI adaptation mode (adaptation tools visible).
- Create or adapt views/variants using the UI adaptation editor.
- Click "Save & Exit" to persist changes.

Note: Visibility and role assignment are not supported for developer variants.

**LANGUAGE**: Shell

**CODE**:
```shell
# If using an npm script added by the Fiori command, run:
npm run start-variants-management
# Or use the Preview Application context menu in your IDE to execute the "start-variants-management" action
```

**STEP**: Resulting files and file path

**DESCRIPTION**: Each new variant results in one or multiple SAPUI5 flexibility change files created under the project's webapp/changes folder. These files are JSON changes that are packaged with the application.

Path:
- webapp/changes/

Open the created change files to inspect change content and to replace static UI texts with i18n keys.

**LANGUAGE**: Text

**CODE**:
```text
# Example path where change files are created:
project-root/webapp/changes/*.change
```

**STEP**: Convert static text in views to i18n keys

**DESCRIPTION**: Replace static strings in XML views with translatable i18n keys and maintain the translation in the i18n properties file (webapp/i18n/i18n.properties).

Example: replace a static label in an XML view with an i18n key, then add the key to i18n.properties.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Before: static text in XML view -->
<Label id="lblTitle" text="Customer Overview" />
```

**LANGUAGE**: XML

**CODE**:
```xml
<!-- After: use i18n binding -->
<Label id="lblTitle" text="{i18n>customerOverviewTitle}" />
```

**LANGUAGE**: Properties

**CODE**:
```properties
# webapp/i18n/i18n.properties
customerOverviewTitle=Customer Overview
```

**STEP**: Verify and build

**DESCRIPTION**: Confirm that flexibility change files are present under webapp/changes. Build and package the application as usual; the changes under webapp/changes are included in the build output.

For more technical details and options for the preview feature, consult the @sap/ux-ui5-tooling documentation.

**LANGUAGE**: Shell

**CODE**:
```shell
# Example build steps (typical)
npm run build
# or use your project's ui5 tooling/CI build pipeline to package the app including webapp/changes
```

**STEP**: Reference and further reading

**DESCRIPTION**: Useful references for deeper implementation details and the official preview docs.

**LANGUAGE**: Text

**CODE**:
```text
- Creating and Adapting Views (SAP Help): https://help.sap.com/viewer/DRAFT/6583b46f6c164aad818a3891bc91d8d8/dev_internal/en-US/91ae3492323b42a79ca66fbfaf5af3f9.html
- @sap/ux-ui5-tooling (npm): https://www.npmjs.com/package/@sap/ux-ui5-tooling#4-preview
```
--------------------------------

**TITLE**: Install and Manage Mock Server for SAP Fiori Tools Projects

**INTRODUCTION**: Step-by-step actionable instructions to add, update, verify, and remove the Fiori mock server configuration in a project. Use either the Fiori Tools UI command or the CLI (npx @sap-ux/create). Includes exact commands and sample package.json changes you should expect.

**TAGS**: fiori-tools, mockserver, ui5, sap-ux, npm, ui5-middleware-fe-mockserver

**STEP**: 1 — Verify default behavior for new projects

**DESCRIPTION**: New projects created with the SAP Fiori application generator include mock server configuration automatically. If you scaffolded the app with the generator, confirm mock server files exist before adding them manually.

**LANGUAGE**: plaintext

**CODE**:
```plaintext
Look for these files/entries in the project root:
- package.json (contains "start-mock" script)
- ui5-mock.yaml
- devDependency: @sap-ux/ui5-middleware-fe-mockserver
```

**STEP**: 2 — Install mock server using Fiori Tools UI (VS Code)

**DESCRIPTION**: Use the Fiori Tools UI command (in VS Code) to add the mock server configuration. This opens Application Info where you can click the Add Mock server Config action.

**LANGUAGE**: plaintext

**CODE**:
```plaintext
1. Open VS Code in your project root.
2. Open Command Palette: Ctrl+Shift+P (Windows/Linux) or Cmd+Shift+P (macOS).
3. Run: "Fiori: Open Application Info"
4. In the Application Info panel -> Under "What you can do" -> click "Add Mock server Config"
```

**STEP**: 3 — Install mock server using CLI (npx)

**DESCRIPTION**: Run this command in your project root terminal to add the mock server configuration programmatically. Useful in CI, scripts, or editors without the Fiori extension.

**LANGUAGE**: bash

**CODE**:
```bash
cd /path/to/your/project
npx @sap-ux/create add mockserver-config
```

**STEP**: 4 — Remove mock server configuration (CLI)

**DESCRIPTION**: Remove the mock server configuration from the project using the npx command. This cleans up added files and package entries added by the create tool.

**LANGUAGE**: bash

**CODE**:
```bash
cd /path/to/your/project
npx @sap-ux/create remove mockserver-config
```

**STEP**: 5 — Update or fix an existing/outdated mock server config

**DESCRIPTION**: Re-run the Add Mock server Config action (UI or CLI) to update an outdated or missing mock server configuration. Use the help command to view available create commands.

**LANGUAGE**: bash

**CODE**:
```bash
# Re-apply or update configuration
npx @sap-ux/create add mockserver-config

# List available commands and options
npx @sap-ux/create help
```

**STEP**: 6 — Verify installed artifacts and package.json changes

**DESCRIPTION**: After installation, ensure the expected files and package.json entries are present. Below is a minimal example of the package.json additions you should see.

**LANGUAGE**: json

**CODE**:
```json
{
  "name": "my-fiori-app",
  "version": "1.0.0",
  "scripts": {
    "start": "ui5 serve -o index.html",
    "start-mock": "ui5 serve --config=ui5-mock.yaml -o index.html"
  },
  "dependencies": {
    "@openui5/some-ui5-package": "^1.0.0",
    "UI5": "edge"  // UI5 dependency entry (may vary by project)
  },
  "devDependencies": {
    "@sap-ux/ui5-middleware-fe-mockserver": "^X.Y.Z"
  }
}
```

**STEP**: 7 — Confirm presence of configuration files

**DESCRIPTION**: Ensure the required configuration files were added to the project root after install.

**LANGUAGE**: plaintext

**CODE**:
```plaintext
Files to confirm in project root:
- ui5-mock.yaml
- package.json (contains start-mock script and @sap-ux/ui5-middleware-fe-mockserver in devDependencies)
```

--------------------------------

**TITLE**: Preview an Application on an External SAP Fiori Launchpad

**INTRODUCTION**: Quick reference for using the Fiori Tools "FLP Embedded" preview to run a built (deployed-once) UI5/BSP application on an external SAP Fiori Launchpad instance without redeploying. Includes required inputs, example YAML snippet for backend configuration, commands to build and refresh, and important notes.

**TAGS**: fiori-tools, flp, ui5, preview, sap, bsp, launchpad, ui5.yaml

**STEP**: 1 — Open VS Code Command Palette

**DESCRIPTION**: Open the Command Palette in VS Code to run the Fiori Tools command.

**LANGUAGE**: Text

**CODE**:
```text
Keybinding:
  macOS:  ⌘ (CMD) + ⇧ (Shift) + P
  Windows/Linux:  Ctrl + Shift + P
```

**STEP**: 2 — Run the "Add FLP Embedded Configuration" command

**DESCRIPTION**: Execute the Fiori Tools command that creates/collects the embedded FLP configuration for preview.

**LANGUAGE**: Text

**CODE**:
```text
Command to run in the Command Palette:
  Fiori: Add FLP Embedded Configuration
```

**STEP**: 3 — Enter the BSP name (lowercase)

**DESCRIPTION**: When prompted, enter the BSP (Business Server Page) name of the already deployed application. This must be lowercase.

**LANGUAGE**: Text

**CODE**:
```text
Example BSP name (must be lowercase):
  myapp_bsp
```

**STEP**: 4 — Provide the YAML backend configuration (usually ui5.yaml)

**DESCRIPTION**: When prompted for the YAML containing backend configuration, supply the ui5.yaml (or equivalent YAML) that the project uses. Provide a minimal example showing where backend/destination details typically go. Adjust to match your backend/destination names and paths.

**LANGUAGE**: YAML

**CODE**:
```yaml
# Example ui5.yaml fragment (minimal placeholder)
specVersion: '2.2'
metadata:
  name: my.app
type: application

# Typical location for backend/destination configuration (adapt to your project)
server:
  customMiddleware:
    - name: ui5-middleware-cfdestination
      afterMiddleware: compression
      configuration:
        backend:
          - destination: MY_BACKEND_DESTINATION
            path: /sap/opu/odata/sap/Z_MY_SERVICE_SRV/
```

**STEP**: 5 — Enter the relative SAP Fiori launchpad link

**DESCRIPTION**: Enter the relative URL path on the ABAP system (or your target system) that points to the Fiori Launchpad shell. Use the path format below (adjust capitalization if needed by your environment).

**LANGUAGE**: Text

**CODE**:
```text
Example relative launchpad path:
  sap/bc/ui5_ui5/ui2/ushell/shells/abap/Fiorilaunchpad.html
```

**STEP**: 6 — Build the application before previewing

**DESCRIPTION**: Build the application so static artifacts are generated for the external launchpad to load. Run the standard project build command.

**LANGUAGE**: Shell

**CODE**:
```bash
# Run from the project root
npm run build
```

**STEP**: 7 — Start the embedded preview on the external launchpad

**DESCRIPTION**: Right-click the project folder (or any subfolder) in VS Code, choose "Preview Application" and then select "start-embedded" to start the preview session on the configured external FLP.

**LANGUAGE**: Text

**CODE**:
```text
Context menu:
  Right-click project folder -> Preview Application -> start-embedded
```

**STEP**: 8 — Rebuild to apply code changes and refresh the preview

**DESCRIPTION**: After making code changes, rebuild the app to see updates on the external launchpad. The preview will auto-refresh after a successful build.

**LANGUAGE**: Shell

**CODE**:
```bash
# Rebuild to refresh the running external FLP preview
npm run build
```

**STEP**: Notes and behavior

**DESCRIPTION**: Important constraints and runtime characteristics to consider.

**LANGUAGE**: Text

**CODE**:
```text
- The SAP Launchpad service on SAP BTP does NOT support this embedded preview feature.
- The external FLP initial load is slower than local preview options because it fetches UI5 resources from the target system.
- Once UI5 resources are cached by the target system, subsequent loads are faster.
- The application will not auto-refresh on code changes until you run `npm run build`. After the build completes, the preview on the external launchpad is automatically refreshed.
- Ensure the application was deployed once and configured on the target launchpad so it is visible there before using the embedded preview.
```
--------------------------------

**TITLE**: Preview an Application with the SAP Horizon Theme

**INTRODUCTION**: Instructions and code snippets to verify or configure an SAPUI5 application to use the SAP Horizon theme. Includes how to check and set the SAPUI5 version in ui5.yaml, how to set the runtime theme in index.html and manifest.json, and how to validate locally.

**TAGS**: SAPUI5, Horizon, theme, ui5.yaml, manifest.json, index.html, UI5 tooling

**STEP**: 1 — Confirm the SAPUI5 version used by the project

**DESCRIPTION**: Check the ui5.yaml (or other config files) to determine whether an explicit SAPUI5 version is set. If no version is specified, the latest SAPUI5 is used (compatible with Horizon). Horizon is available in SAPUI5 versions 1.93.3 and 1.96.0 or higher — target at least 1.96.0 to be safe.

**LANGUAGE**: Bash

**CODE**:
```bash
# From project root, inspect ui5.yaml if present
cat ui5.yaml

# Quick grep for a version in ui5.yaml
grep -i "framework:" -n ui5.yaml -A3 || true

# Optionally check package.json or other files where UI5 version may be pinned
grep -E "sapui5|SAPUI5|openui5" -n package.json || true
```

**STEP**: 2 — Update ui5.yaml to pin a compatible SAPUI5 version

**DESCRIPTION**: If your project needs an explicit SAPUI5 version, add or modify the framework section in ui5.yaml. Set version to a compatible release (>= 1.96.0 recommended). This example pins SAPUI5 1.96.0 and lists commonly used libraries.

**LANGUAGE**: YAML

**CODE**:
```yaml
# File: ui5.yaml
specVersion: '2.1'
metadata:
  name: my.app.namespace
framework:
  name: SAPUI5
  version: "1.96.0"      # Set minimum compatible UI5 version for Horizon
  libraries:
    - sap.m
    - sap.f
    - sap.ui.core
```

**STEP**: 3 — Set the SAP Horizon theme at runtime via the bootstrap (index.html)

**DESCRIPTION**: To preview or enforce the Horizon theme in a standalone index.html bootstrap, set data-sap-ui-theme="sap_horizon" (or "sap_horizon_hcw"/"sap_horizon_exp" depending on the flavor). This forces the runtime theme irrespective of shell or launchpad settings.

**LANGUAGE**: HTML

**CODE**:
```html
<!-- File: webapp/index.html -->
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>My App</title>
    <script id="sap-ui-bootstrap"
      src="https://sapui5.hana.ondemand.com/1.96.0/resources/sap-ui-core.js"
      data-sap-ui-theme="sap_horizon"
      data-sap-ui-libs="sap.m,sap.f"
      data-sap-ui-resourceroots='{"my.app": "./"}'>
    </script>
  </head>
  <body class="sapUiBody" id="content">
  </body>
</html>
```

**STEP**: 4 — Set the SAP Horizon theme in manifest.json (Fiori/Component-based apps)

**DESCRIPTION**: For Fiori elements or component-based apps, declare the theme in the manifest so the shell or runtime picks it up automatically.

**LANGUAGE**: JSON

**CODE**:
```json
// File: webapp/manifest.json (snippet)
{
  "sap.ui5": {
    "config": {
      "theme": "sap_horizon"
    },
    "dependencies": {
      "minUI5Version": "1.96.0",
      "libs": {
        "sap.m": {},
        "sap.f": {}
      }
    }
  }
}
```

**STEP**: 5 — Run a local UI5 server and validate the Horizon theme

**DESCRIPTION**: Use the UI5 tooling or your project's start script to serve the app and confirm the Horizon visuals render correctly. If you use the UI5 CLI, run ui5 server; many projects use npm start which can call ui5-server.

**LANGUAGE**: Bash

**CODE**:
```bash
# If you have UI5 CLI installed
npx @ui5/cli serve --config=ui5.yaml

# Or run the project's start script
npm start

# Open http://localhost:8080/index.html (or the path your server exposes) and verify the Horizon theme
```

**STEP**: 6 — Notes for existing/custom controls and generator settings

**DESCRIPTION**: 
- Existing apps built with SAP Fiori elements or standard SAPUI5 controls should work with Horizon without code changes.
- Custom controls may require visual adjustments; verify design consistency when rendering with sap_horizon.
- When generating a new Fiori app using the SAP Fiori application generator, choose a minimum SAPUI5 version compatible with Horizon on the project attributes step.

**LANGUAGE**: Plain Text

**CODE**:
```text
Notes:
- If ui5.yaml contains no framework.version, the latest SAPUI5 is used (compatible with Horizon).
- Horizon theme names: "sap_horizon", "sap_horizon_exp", etc. Use the flavor that matches your design intent.
- For custom controls, review CSS and theming hooks when switching themes.
```
--------------------------------

**TITLE**: Previewing a Fiori Tools Application (terminal, Run Control, and context menu)

**INTRODUCTION**: Quick reference for starting and troubleshooting previews of a generated Fiori application. Covers terminal npm scripts, VS Code / SAP Business Application Studio Run/Launch configurations, context menu preview options, and an SSL/HSTS troubleshooting note.

**TAGS**: fiori-tools, preview, npm, launch.json, SAPUI5, VS Code, SAP Business Application Studio, debugging, HSTS

STEP: 1 — Start preview from terminal

DESCRIPTION: Run the provided npm scripts to start the application with different preview modes. These commands assume the project contains npm scripts named start, start-local, start-noflp, and start-mock (the generator creates these). Use the one that matches the data / runtime you want.

LANGUAGE: Shell

CODE:
```bash
# Start with real (live) OData service
npm run start

# Start with mock data + local SAPUI5 resources (offline)
npm run start-local

# Start without Fiori Launchpad sandbox
npm run start-noflp

# Start with mock data only
npm run start-mock
```

STEP: 2 — Example package.json scripts (context)

DESCRIPTION: Example package.json "scripts" section that maps script names to the preview commands. Adapt the command values to your project/tooling if your generated project differs.

LANGUAGE: JSON

CODE:
```json
{
  "name": "my-fiori-app",
  "version": "1.0.0",
  "scripts": {
    "start": "npm run start:live",
    "start-local": "npm run start:local",
    "start-noflp": "npm run start:noflp",
    "start-mock": "npm run start:mock",
    "start:live": "fiori preview --mode live",
    "start:local": "fiori preview --mode local",
    "start:noflp": "fiori preview --mode noflp",
    "start:mock": "fiori preview --mode mock"
  }
}
```

STEP: 3 — Start preview via VS Code / SAP Business Application Studio (Run Control)

DESCRIPTION: Create a Launch Configuration in VS Code or a Run Configuration in SAP Business Application Studio to start a preview from the editor (Run Control). The sample launch.json below runs the npm scripts via the Node runtime using runtimeExecutable "npm". Duplicate or adapt entries for each preview mode.

LANGUAGE: JSON

CODE:
```json
{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Preview: start (live)",
      "type": "node",
      "request": "launch",
      "runtimeExecutable": "npm",
      "runtimeArgs": ["run", "start"],
      "console": "integratedTerminal",
      "cwd": "${workspaceFolder}"
    },
    {
      "name": "Preview: start-local (mock + local SAPUI5)",
      "type": "node",
      "request": "launch",
      "runtimeExecutable": "npm",
      "runtimeArgs": ["run", "start-local"],
      "console": "integratedTerminal",
      "cwd": "${workspaceFolder}"
    },
    {
      "name": "Preview: start-noflp",
      "type": "node",
      "request": "launch",
      "runtimeExecutable": "npm",
      "runtimeArgs": ["run", "start-noflp"],
      "console": "integratedTerminal",
      "cwd": "${workspaceFolder}"
    },
    {
      "name": "Preview: start-mock",
      "type": "node",
      "request": "launch",
      "runtimeExecutable": "npm",
      "runtimeArgs": ["run", "start-mock"],
      "console": "integratedTerminal",
      "cwd": "${workspaceFolder}"
    }
  ]
}
```

STEP: 4 — Start preview from project context menu (VS Code / BAS)

DESCRIPTION: Use the editor context menu — right-click the project folder or an app subfolder and choose "Preview Application". Default preview command options provided by the tooling:

LANGUAGE: Text

CODE:
```text
Available preview options (default):
- start        : Start application with real service data.
- start-local  : Start with mock data + local SAPUI5 resources (offline).
- start-noflp  : Start without Fiori Launchpad sandbox.
- start-mock   : Start with mock data.
- Run configurations : Use an existing run/launch configuration selection.
```

STEP: 5 — Notes and troubleshooting (localhost, SSL, HSTS, SAPUI5 download)

DESCRIPTION: Important operational notes to avoid preview failures and ensure expected behavior.

LANGUAGE: Text

CODE:
```text
- Localhost/HTTPS redirection (HSTS):
  Some corporate domain security policies include 'localhost' and force HTTPS redirection. If you see SSL protocol errors after a redirect, check your browser HSTS settings. For Chrome, navigate to:
    chrome://net-internals/#hsts
  and clear any localhost HSTS policies as required.

- SAPUI5 automatic download:
  Automatic download of SAPUI5 runtime during preview is supported for SAPUI5 versions 1.76 and higher.

- App-to-App navigation preview:
  If you need to preview app-to-app navigation flows, enable the "App-to-App Navigation Preview" support in your project/tooling (see project-specific extension or configurations).
```
--------------------------------

**TITLE**: Previewing an SAP Fiori Elements CAP Project (VS Code & Business Application Studio)

**INTRODUCTION**: This guide shows the exact commands and UI actions to preview a generated SAP Fiori Elements CAP project locally using Visual Studio Code (VS Code) or SAP Business Application Studio (BAS). Follow the terminal commands and troubleshooting steps to start the CDS server, open the Fiori app URL, and stop the server.

**TAGS**: fiori-tools, CAP, cds, preview, vscode, business-application-studio, sap-fiori

**STEP**: Preview in Visual Studio Code

**DESCRIPTION**: Open an integrated terminal in VS Code, ensure you are in the project root, start the CDS server with cds run, open the generated Fiori HTML link from the server output (example: /incidents/webapp/index.html), then stop the server when finished. If cds is missing or fails, install required packages globally.

**LANGUAGE**: Bash

**CODE**:
```bash
# 1. Open VS Code integrated terminal
# Methods:
# - Keyboard shortcut: Ctrl+`  (backtick)
# - Menu: View > Terminal
# - Command Palette: View: Toggle Integrated Terminal (Cmd/Ctrl + Shift + P -> type "Toggle Integrated Terminal")

# 2. Change to project root (run from project's root directory)
cd /path/to/your/cap/project

# 3. Start the CDS server
cds run
```

**LANGUAGE**: Text

**CODE**:
```text
# Example server output (look for URL)
server listening on { url: 'http://localhost:4004' }
```

**LANGUAGE**: Bash

**CODE**:
```bash
# 4. Open the link printed in the terminal.
# In VS Code terminal: Ctrl + Click the URL or displayed HTML link (e.g. /incidents/webapp/index.html)
# Example full URL to open in browser:
http://localhost:4004/incidents/webapp/index.html

# 5. When finished, stop the server in the terminal:
Ctrl-C
```

**LANGUAGE**: Bash

**CODE**:
```bash
# Troubleshooting: if `cds run` fails, install/force-reinstall the CLI packages globally:
npm i -g @sap/cds
npm i -g @sap/cds-dk --force
```

**STEP**: Preview in SAP Business Application Studio

**DESCRIPTION**: Open a new terminal in BAS, ensure you are in the project root, start the CDS server with cds run, open the HTML link from the terminal output (example: /incidents/webapp/index.html), then stop the server. If cds is missing or fails, install required packages globally.

**LANGUAGE**: Bash

**CODE**:
```bash
# 1. Open terminal in SAP Business Application Studio:
# Menu: Terminal > New Terminal

# 2. Change to project root
cd /projects/your-cap-project

# 3. Start the CDS server
cds run
```

**LANGUAGE**: Text

**CODE**:
```text
# Example server output (look for URL)
server listening on { url: 'http://localhost:4004' }
```

**LANGUAGE**: Bash

**CODE**:
```bash
# 4. Open the link printed in the terminal.
# In BAS terminal: Ctrl + Click the URL or the displayed HTML link (e.g. /incidents/webapp/index.html)
# Example full URL to open in browser:
http://localhost:4004/incidents/webapp/index.html

# 5. When finished, stop the server in the terminal:
Ctrl-C
```

**LANGUAGE**: Bash

**CODE**:
```bash
# Troubleshooting for BAS: if `cds run` fails, install/force-reinstall the CLI packages globally:
npm i -g @sap/cds
npm i -g @sap/cds-dk --force
```
--------------------------------

**TITLE**: VS Code Run Configuration (launch.json) Behavior with Folders and Workspaces

**INTRODUCTION**: This guide explains how Visual Studio Code (and similar editors) discovers launch.json run/debug configurations from .vscode folders. It includes concrete examples (folder layout, launch.json samples, and .code-workspace files) to reproduce and programmatically manage which configurations appear in the Run and Debug view.

**TAGS**: fiori-tools, vscode, launch.json, workspace, run-configuration, debugging, .vscode, .code-workspace

**STEP**: 1 — Create example workspace layout

**DESCRIPTION**: Create a sample filesystem with three folders: Folder_One, Folder_Two, and Subfolder (where Subfolder is a child of Folder_Two). Add a .vscode/launch.json in each folder. The editor will only read launch.json files located at the workspace root's .vscode folder(s). A nested .vscode/launch.json in a subfolder is not discovered unless that subfolder is added as a workspace root.

**LANGUAGE**: Bash

**CODE**:
```bash
# Create folders
mkdir -p /path/to/Workspace/Folder_One/.vscode
mkdir -p /path/to/Workspace/Folder_Two/.vscode
mkdir -p /path/to/Workspace/Folder_Two/Subfolder/.vscode

# Open paths for reference:
# <workspace_root>/Folder_One/.vscode/launch.json
# <workspace_root>/Folder_Two/.vscode/launch.json
# <workspace_root>/Folder_Two/Subfolder/.vscode/launch.json
```

**STEP**: 2 — Add launch.json samples for each folder

**DESCRIPTION**: Put minimal, distinct launch configurations in each folder so they are easily identifiable in the Run and Debug view. Each file must be located at the folder's .vscode/launch.json.

**LANGUAGE**: JSON

**CODE**:
```json
// /path/to/Workspace/Folder_One/.vscode/launch.json
{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Config One",
      "type": "node",
      "request": "launch",
      "program": "${workspaceFolder}/app_one.js"
    }
  ]
}
```

```json
// /path/to/Workspace/Folder_Two/.vscode/launch.json
{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Config Two",
      "type": "node",
      "request": "launch",
      "program": "${workspaceFolder}/app_two.js"
    }
  ]
}
```

```json
// /path/to/Workspace/Folder_Two/Subfolder/.vscode/launch.json
{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Config Subfolder",
      "type": "node",
      "request": "launch",
      "program": "${workspaceFolder}/sub_app.js"
    }
  ]
}
```

**STEP**: 3 — Open a single folder (behavior explanation)

**DESCRIPTION**: When you open Folder_One as the workspace root (File → Open Folder → Folder_One), VS Code will only look for .vscode/launch.json in the workspace root. It will display "Config One" in the Run and Debug view. It will not traverse sibling folders or nested subfolders to find other launch.json files.

**LANGUAGE**: Text

**CODE**:
```text
Workspace root: /path/to/Workspace/Folder_One
Discovered launch.json: /path/to/Workspace/Folder_One/.vscode/launch.json
Visible configurations: "Config One"
Not visible: "Config Two", "Config Subfolder"
```

**STEP**: 4 — Open a different single folder (Folder_Two) — nested .vscode behavior

**DESCRIPTION**: When you open Folder_Two as the workspace root, VS Code will read /path/to/Workspace/Folder_Two/.vscode/launch.json and display "Config Two". The launch.json located at Folder_Two/Subfolder/.vscode/launch.json is NOT shown because VS Code does not search nested folders under the workspace root by default.

**LANGUAGE**: Text

**CODE**:
```text
Workspace root: /path/to/Workspace/Folder_Two
Discovered launch.json: /path/to/Workspace/Folder_Two/.vscode/launch.json
Visible configurations: "Config Two"
Not visible: "Config Subfolder" (because it exists in a nested subfolder)
```

**STEP**: 5 — Open the subfolder directly (Subfolder) to expose nested config

**DESCRIPTION**: If you open the Subfolder itself as the workspace root, VS Code will read its .vscode/launch.json and display "Config Subfolder". Opening the parent folder does not expose it.

**LANGUAGE**: Text

**CODE**:
```text
Workspace root: /path/to/Workspace/Folder_Two/Subfolder
Discovered launch.json: /path/to/Workspace/Folder_Two/Subfolder/.vscode/launch.json
Visible configurations: "Config Subfolder"
```

**STEP**: 6 — Create a workspace with multiple roots (merge configurations)

**DESCRIPTION**: To combine configurations from multiple folders, create a .code-workspace file and add multiple folders as workspace roots. VS Code will merge and display configurations from each workspace root's .vscode/launch.json. Example shows three scenarios: only Folder_One root; Folder_One and Folder_Two roots; Folder_One, Folder_Two, and Subfolder roots.

**LANGUAGE**: JSON

**CODE**:
```json
// Scenario A: Workspace with only Folder_One as root
// /path/to/Workspace/folder_one.code-workspace
{
  "folders": [
    { "path": "Folder_One" }
  ],
  "settings": {}
}
```

```json
// Scenario B: Workspace with Folder_One and Folder_Two as roots
// /path/to/Workspace/two_folders.code-workspace
{
  "folders": [
    { "path": "Folder_One" },
    { "path": "Folder_Two" }
  ],
  "settings": {}
}
```

```json
// Scenario C: Workspace with Folder_One, Folder_Two, and Subfolder as roots
// /path/to/Workspace/three_roots.code-workspace
{
  "folders": [
    { "path": "Folder_One" },
    { "path": "Folder_Two" },
    { "path": "Folder_Two/Subfolder" }
  ],
  "settings": {}
}
```

**STEP**: 7 — Expected results for workspace scenarios

**DESCRIPTION**: Explain which configurations appear in Run and Debug for each workspace composition.

**LANGUAGE**: Text

**CODE**:
```text
Scenario A (Folder_One):
  Visible: "Config One"

Scenario B (Folder_One, Folder_Two):
  Visible: "Config One", "Config Two"

Scenario C (Folder_One, Folder_Two, Folder_Two/Subfolder):
  Visible: "Config One", "Config Two", "Config Subfolder"
  Note: Adding a nested subfolder (Folder_Two/Subfolder) as its own workspace root exposes its .vscode/launch.json.
```

**STEP**: 8 — Important notes and actionable tips

**DESCRIPTION**: Summarize actionable rules and suggestions for managing launch.json files across projects.

**LANGUAGE**: Text

**CODE**:
```text
- VS Code discovers launch.json only at each workspace root's .vscode folder.
- It does NOT traverse nested subfolders under a workspace root to find launch.json files.
- To combine configurations from multiple folders, add each folder (or subfolder) as a workspace root in a .code-workspace.
- You can add a subfolder of an existing workspace root as a standalone root to expose its launch.json.
- Use unique "name" fields in each launch.json to avoid confusion when multiple roots are present.
```

**STEP**: 9 — Reference

**DESCRIPTION**: Official documentation for further details on launch configuration schema and behavior.

**LANGUAGE**: Text

**CODE**:
```text
More info: https://code.visualstudio.com/docs/editor/debugging#_launch-configurations
```
--------------------------------

**TITLE**: Use Custom Middlewares (SAP Fiori Tools)

**INTRODUCTION**: Configure and run custom middlewares in the SAPUI5 Server (ui5.yaml) to add behaviors like live application reload, backend proxying (including WebSocket, destination, SAPUI5 version switching), and serving local static resources (e.g., local SAPUI5 SDK). Use npx fiori run to start preview with the configured middlewares.

**TAGS**: fiori-tools, ui5, middleware, proxy, servestatic, appreload, dev-server, sapui5

**STEP**: Add custom middleware to ui5.yaml and start server

**DESCRIPTION**: Place middleware entries under server.customMiddleware in ui5.yaml. Start the dev server with npx fiori run. The example shows a minimal ui5.yaml structure containing multiple middlewares (appreload, proxy, servestatic). Keep afterMiddleware to define ordering (commonly compression).

**LANGUAGE**: YAML

**CODE**:
```yaml
# ui5.yaml (root of your project)
server:
  customMiddleware:
    - name: fiori-tools-appreload
      afterMiddleware: compression
    - name: fiori-tools-proxy
      afterMiddleware: compression
      configuration:
        backend:
          - path: /sap
            url: https://my.backend.com:1234
    - name: fiori-tools-servestatic
      afterMiddleware: compression
      configuration:
        paths:
          - path: /resources
            src: "Path/To/SAPUI5-SDK"
          - path: /test-resources
            src: "Path/To/SAPUI5-SDK"
```

**LANGUAGE**: Bash

**CODE**:
```bash
# Start the dev server and preview local application with configured custom middlewares
npx fiori run
```

**STEP**: Application Reload Middleware — default example and parameters

**DESCRIPTION**: Use fiori-tools-appreload to automatically refresh the browser when watched files change (useful for Fiori elements development). No required configuration; optional parameters available for non-standard project structures.

Parameters (type — default):
- path (string) — "webapp": folder to watch
- ext (string) — "html, js, json, xml, properties, change": comma-separated file extensions to watch
- port (int) — 35729: port used for file-change communication
- debug (boolean) — false: enable verbose logs

Add this middleware entry or adjust parameters as needed.

**LANGUAGE**: YAML

**CODE**:
```yaml
# Example: default app reload (no configuration required)
server:
  customMiddleware:
    - name: fiori-tools-appreload
      afterMiddleware: compression

# Example: custom parameters (watch src folder, custom extensions, debug on)
server:
  customMiddleware:
    - name: fiori-tools-appreload
      afterMiddleware: compression
      configuration:
        path: "src"
        ext: "xml,js,html,json"
        port: 35729
        debug: true
```

**STEP**: Proxy Middleware — basic backend proxy

**DESCRIPTION**: Forward requests that start with the configured path to a backend URL. Useful for OData/REST backend forwarding and switching SAPUI5 CDN. Use backend array to declare multiple routes.

**LANGUAGE**: YAML

**CODE**:
```yaml
# Basic backend proxy
- name: fiori-tools-proxy
  afterMiddleware: compression
  configuration:
    backend:
      - path: /sap
        url: https://my.backend.com:1234
```

**STEP**: Proxy Middleware — backend with destination

**DESCRIPTION**: Add destination property to indicate a named destination (e.g., for cloud/destination lookups).

**LANGUAGE**: YAML

**CODE**:
```yaml
- name: fiori-tools-proxy
  afterMiddleware: compression
  configuration:
    backend:
      - path: /sap
        url: https://my.backend.com:1234
        destination: my_backend
```

**STEP**: Proxy Middleware — multiple backends

**DESCRIPTION**: Declare multiple backend mappings in the backend array for different path prefixes.

**LANGUAGE**: YAML

**CODE**:
```yaml
- name: fiori-tools-proxy
  afterMiddleware: compression
  configuration:
    backend:
      - path: /northwind
        url: https://my.backend_2.com:1234
      - path: /sap
        url: https://my.backend.com:1234
```

**STEP**: Proxy Middleware — ABAP Environment on SAP BTP (scp flag)

**DESCRIPTION**: Set scp: true when connecting to an ABAP environment hosted on SAP Business Technology Platform (Steampunk). For other targets omit scp or set to false.

**LANGUAGE**: YAML

**CODE**:
```yaml
- name: fiori-tools-proxy
  afterMiddleware: compression
  configuration:
    backend:
      - path: /sap
        url: https://my.steampunk.com:1234
        scp: true
```

**STEP**: Proxy Middleware — SAP Business Accelerator Hub (apiHub flag)

**DESCRIPTION**: Set apiHub: true for connections to SAP Business Accelerator Hub (api.sap.com). Provide matching path and url.

**LANGUAGE**: YAML

**CODE**:
```yaml
- name: fiori-tools-proxy
  afterMiddleware: compression
  configuration:
    backend:
      - path: /s4hanacloud
        url: https://api.sap.com
        apiHub: true
```

**STEP**: Proxy Middleware — enable WebSocket proxying (ws flag)

**DESCRIPTION**: Set ws: true to forward WebSocket connections through the proxy for the specified backend path.

**LANGUAGE**: YAML

**CODE**:
```yaml
- name: fiori-tools-proxy
  afterMiddleware: compression
  configuration:
    backend:
      - path: /sap
        url: https://my.backend.com:1234
        ws: true
```

**STEP**: Proxy Middleware — change proxied entry path (pathPrefix)

**DESCRIPTION**: Remap the request path prefix on the proxied request. Use pathPrefix to send requests from local /services/odata to a backend entry path /my/entry/path.

**LANGUAGE**: YAML

**CODE**:
```yaml
- name: fiori-tools-proxy
  afterMiddleware: compression
  configuration:
    backend:
      - path: /services/odata
        pathPrefix: /my/entry/path
        url: https://my.backend.com:1234
        destination: my_backend
```

**STEP**: Proxy Middleware — change SAPUI5 CDN and version

**DESCRIPTION**: Override SAPUI5 resources by configuring ui5 block under proxy. Use url and version to choose a specific SAPUI5 CDN/version; path array lists resource endpoints to map.

**LANGUAGE**: YAML

**CODE**:
```yaml
- name: fiori-tools-proxy
  afterMiddleware: compression
  configuration:
    ui5:
      path:
        - /resources
        - /test-resources
      url: https://sapui5.hana.ondemand.com
      version: 1.78.0
```

**STEP**: Serve Static Middleware — prerequisites and behavior

**DESCRIPTION**: fiori-tools-servestatic serves local files for configured paths. Any request starting with the configured path is forwarded to the local src path. Prerequisite for serving SAPUI5: download and extract the SAPUI5 SDK locally (https://tools.hana.ondemand.com/#sapui5).

**LANGUAGE**: YAML

**CODE**:
```yaml
# Serve local SAPUI5 SDK (example)
server:
  customMiddleware:
    - name: fiori-tools-servestatic
      afterMiddleware: compression
      configuration:
        paths:
          - path: /resources
            src: "Path/To/SAPUI5-SDK"
          - path: /test-resources
            src: "Path/To/SAPUI5-SDK"
```

**STEP**: Serve Static Middleware — serve arbitrary local resources

**DESCRIPTION**: Configure arbitrary local folders to be served under specified URL path prefixes (images, libs, etc.). Use absolute or relative file-system paths in src.

**LANGUAGE**: YAML

**CODE**:
```yaml
# Serve arbitrary local resources
server:
  customMiddleware:
    - name: fiori-tools-servestatic
      afterMiddleware: compression
      configuration:
        paths:
          - path: /images
            src: "Path/To/images"
          - path: /libs
            src: "Path/To/libs"
```
--------------------------------

**TITLE**: Start Fiori Application with Live OData Data (npm start)

**INTRODUCTION**: Instructions to start a Fiori application locally so it connects to a live OData service. Use these steps in VS Code or SAP Business Application Studio to launch the app preview (defaults to localhost:8080). If the OData endpoint requires authentication, the browser prompts for credentials. If port 8080 is in use, a different available port is selected automatically.

**TAGS**: fiori-tools, odata, local-run, npm, vscode, business-application-studio, dev-preview

STEP: 1 — Start the application (general)
DESCRIPTION: From your project root directory, run the npm start script to launch the application preview. The app serves on localhost:8080 by default and connects to the configured OData service endpoint. The preview opens automatically in a new browser tab. If the OData endpoint requires authentication, the browser prompts for credentials. If port 8080 is occupied, the system will pick the next available port.
LANGUAGE: Shell
CODE:
```bash
# Ensure you are in your project's root directory, then:
npm start
```

STEP: 2 — Start in Visual Studio Code
DESCRIPTION: Open an integrated terminal in VS Code, ensure you are in the project root, then run npm start. Shortcut options to open the terminal:
- Press CTRL + ` (backtick)
- Or use the View > Terminal menu
- Or open the Command Palette (CMD/CTRL + Shift + P) and run: View: Toggle Integrated Terminal
After the terminal is open and you are in the project root, run the start command to launch the preview.
LANGUAGE: Shell
CODE:
```bash
# Open integrated terminal in VS Code, navigate to project root, then:
npm start
```

STEP: 3 — Start in SAP Business Application Studio
DESCRIPTION: In SAP Business Application Studio, open a new terminal via Terminal > New Terminal. Ensure the terminal's current working directory is the project root, then run npm start. The preview opens automatically and connects to the configured OData service.
LANGUAGE: Shell
CODE:
```bash
# In Business Application Studio terminal, from project root run:
npm start
```
--------------------------------

**TITLE**: Run Fiori App Locally with Mock Server and Local SAPUI5 Sources

**INTRODUCTION**: Start the Fiori application locally (localhost:8080) using the provided npm start script. This runs a local preview with a mock OData server and downloads a local copy of the SAPUI5 library from npm if needed. Modify ui5-local.yaml in the project root to change which SAPUI5 version is downloaded. Useful for offline development and testing without a backend.

**TAGS**: fiori-tools, sapui5, local-dev, mock-server, npm, ui5-local.yaml

STEP: 1 — Start local preview (generic)
DESCRIPTION: Run the local start script to launch the app preview, mock server, and optional automatic SAPUI5 download. The app will be available on http://localhost:8080. Automatic SAPUI5 download is supported for SAPUI5 versions 1.76 and higher.
LANGUAGE: Shell
CODE:
```Shell
# Preferred (project root)
npm run start-local

# Some environments use this variant (as documented for certain studio setups)
npm start-local

# After running, open:
http://localhost:8080
```

STEP: 2 — Start in Visual Studio Code
DESCRIPTION: Open an integrated terminal in VS Code, ensure you are in the project root, and run the local start command. Keyboard shortcut: Ctrl+` (backtick).
LANGUAGE: Shell
CODE:
```Shell
# Open VS Code integrated terminal:
# - Shortcut: Ctrl + `
# - Or View > Terminal

# From the project root:
npm run start-local
```

STEP: 3 — Start in SAP Business Application Studio
DESCRIPTION: Open a terminal in Business Application Studio, ensure you are in the project root, and run the local start command. Menu path: Terminal > New Terminal.
LANGUAGE: Shell
CODE:
```Shell
# Open terminal in BAS:
# - Menu: Terminal > New Terminal

# From the project root:
npm start-local
```

STEP: 4 — Change the SAPUI5 version (ui5-local.yaml)
DESCRIPTION: Modify ui5-local.yaml in the project root to specify which SAPUI5 version the tooling should download for local use. Update the version value and save; the next start will use that version. Example file content (adjust the key/value according to your project conventions if different):
LANGUAGE: YAML
CODE:
```YAML
# File: <project-root>/ui5-local.yaml
# Example: set the SAPUI5 version to download for local use
# Replace "1.84.21" with the desired version (automatic download supported for >= 1.76)
version: "1.84.21"
```

STEP: 5 — Behavior summary and troubleshooting
DESCRIPTION: Summary of expected behavior and quick troubleshooting actions.
LANGUAGE: Shell
CODE:
```Shell
# Expected:
# - App preview served at http://localhost:8080
# - Mock OData server simulates backend
# - Local SAPUI5 library downloaded from npm if not present (requires SAPUI5 >= 1.76)

# Troubleshooting:
# - Verify current working directory is project root before running command
# - If automatic SAPUI5 download fails, check network access to npmjs.org
# - Confirm ui5-local.yaml contains the intended version string
```
--------------------------------

**TITLE**: Start the Fiori app with Mock Data (npm run start-mock)

**INTRODUCTION**: Instructions to run a Fiori application locally using the built-in mock server. Use this to develop and preview the app without a live OData backend; you can also generate mock JSON files via the Data Editor. Includes VS Code and SAP Business Application Studio terminal steps and command to start the mock server.

**TAGS**: fiori-tools, mockserver, mock-data, odata, local-development, vscode, business-application-studio

**STEP**: Prerequisite — Install MockServer
**DESCRIPTION**: Install MockServer before running the mock start script. See the repository documentation for installation details.
**LANGUAGE**: Shell
**CODE**:
```bash
# See the project doc for installation instructions:
# installing-mockserver-2538055.md
# (Follow that document to install and configure MockServer)
```

**STEP**: (Optional) Generate .json mock data files
**DESCRIPTION**: If you want editable .json files for mock data, use the Data Editor. Refer to the Project Functions documentation.
**LANGUAGE**: Shell
**CODE**:
```bash
# See the Data Editor guide:
# ../Project-Functions/data-editor-18e43b5.md
```

**STEP**: VS Code — Open the integrated terminal
**DESCRIPTION**: Open the terminal in Visual Studio Code and ensure you are in the root directory of your project before starting the mock server.
**LANGUAGE**: Shell
**CODE**:
```bash
# Open VS Code integrated terminal:
# - Shortcut: CTRL + `   (backtick)
# - OR select View > Terminal
# - OR run the Command Palette and execute: View: Toggle Integrated Terminal
```

**STEP**: SAP Business Application Studio — Open the terminal
**DESCRIPTION**: Open the terminal in SAP Business Application Studio and ensure you are in the root directory of your project before starting the mock server.
**LANGUAGE**: Shell
**CODE**:
```bash
# Open terminal in Business Application Studio:
# - Menu: Terminal > New Terminal
```

**STEP**: Start the application with mock server
**DESCRIPTION**: From the project root in the opened terminal, run the npm script that starts the app and the mock server. The app attempts to run on localhost:8080; if 8080 is occupied it will select the next available port. The app preview opens automatically in a new browser tab.
**LANGUAGE**: Shell
**CODE**:
```bash
# From the project root directory:
npm run start-mock
```
--------------------------------

**TITLE**: Run Control — Start and debug SAP Fiori applications in VS Code and SAP Business Application Studio

**INTRODUCTION**: This guide explains how to use Run Control to start and run SAP Fiori applications (SAPUI5) in Visual Studio Code and SAP Business Application Studio. It lists available run options (Start, Start with SAPUI5 Version, Mock, Mock with SAPUI5 Version, Local), shows terminal commands, and provides example .vscode/launch.json and package.json entries you can add to your project to expose run configurations.

**TAGS**: fiori-tools, sapui5, vscode, business-application-studio, run-configuration, npm, mock-data, launch.json

**STEP**: 1 — Visual Studio Code: open Run Control

**DESCRIPTION**: Open the Run view and choose or create run configurations. Default keyboard shortcut: Ctrl + Shift + D. Run options presented by the Fiori Tools generator include:
- Start project name — runs the app based on the SAPUI5 version selected during generation.
- Start project name with SAPUI5 Version — prompts to pick an SAPUI5 version; after selection the app starts automatically.
- Start project name Mock — runs the app using mock data by executing npm run start-mock. Only available in ODataOData V2 service.
- Start project name Mock with SAPUI5 Version — runs mock data and prompts for SAPUI5 version.
- Start project name Local — runs using mock data against a local copy of the SAPUI5 library selected during generation.

These run options are workspace-specific: if you change the open workspace/folder in VS Code, run options are not available for the new workspace.

**LANGUAGE**: JSON

**CODE**:
```json
// File: .vscode/launch.json
{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Start project name",
      "type": "node",
      "request": "launch",
      "runtimeExecutable": "npm",
      "runtimeArgs": ["run", "start"],
      "console": "integratedTerminal",
      "timeout": 60000
    },
    {
      "name": "Start project name Mock",
      "type": "node",
      "request": "launch",
      "runtimeExecutable": "npm",
      "runtimeArgs": ["run", "start-mock"],
      "console": "integratedTerminal",
      "timeout": 60000
    },
    {
      "name": "Start project name Local",
      "type": "node",
      "request": "launch",
      "runtimeExecutable": "npm",
      "runtimeArgs": ["run", "start-local"],
      "console": "integratedTerminal",
      "timeout": 60000
    }
  ]
}
```

**LANGUAGE**: JSON

**CODE**:
```json
// Example package.json scripts (add these if missing)
{
  "name": "project-name",
  "version": "1.0.0",
  "scripts": {
    "start": "fiori run",            // runs the app using selected SAPUI5 version
    "start-mock": "fiori run --mock",// runs the app with mock data (ODataOData V2 service)
    "start-local": "fiori run --local" // runs against a local SAPUI5 library copy
  }
}
```

**LANGUAGE**: Bash

**CODE**:
```bash
# Run the mock server manually in the integrated terminal:
npm run start-mock

# Or run the regular start:
npm run start
```

**STEP**: 2 — Visual Studio Code: add or customize run configurations

**DESCRIPTION**: Create additional launch configurations in .vscode/launch.json (see previous sample). After adding, open the Run panel (Ctrl+Shift+D), select the configuration name from the drop-down, and click the green Run button to start. For "Start project name with SAPUI5 Version" or "Mock with SAPUI5 Version", the generator/extension may show a selection dialog; once an SAPUI5 version is selected, the app starts automatically.

**LANGUAGE**: Text

**CODE**:
```text
Path: .vscode/launch.json
Action: Add or edit configurations. Select them in Run View (Ctrl+Shift+D) and click Run.
```

**STEP**: 3 — SAP Business Application Studio: open Run Configuration

**DESCRIPTION**: In SAP Business Application Studio (BAS), open the Run Configuration pane to see the available run options (same semantics as VS Code). Two ways to open it:
- Click the Run Configuration icon on the left-side toolbar (icon label: Run Configuration).
- From the main menu: View > Run Configuration.

Run options shown:
- Start project name — runs the app based on the SAPUI5 version selected during generation.
- Start project name Mock — runs the app using mock data by executing npm run start-mock. Only available in ODataOData V2 service.
- Start project name Local — runs the app using mock data against a local copy of the SAPUI5 library selected during generation.

Select an option and click the Run Module icon to start.

**LANGUAGE**: Bash

**CODE**:
```bash
# In BAS terminal you can also run the npm scripts:
npm run start
npm run start-mock
npm run start-local
```

**STEP**: 4 — Notes and workspace specifics

**DESCRIPTION**: Important operational notes:
- The SAPUI5 version selection dialog (when available) triggers the app to start automatically after selection.
- Run configurations and the Run view are workspace-specific. If you switch the open workspace/folder, previously available run options for the former workspace are not available in the new one.
- "Start project name Mock" and "Mock with SAPUI5 Version" options are only available for ODataOData V2 service projects (as generated).
--------------------------------

**TITLE**: Application Information — SAP Fiori tools (open, relaunch, and linkages)

**INTRODUCTION**: Action-oriented reference for working with the Application Information page created for SAP Fiori elements projects. Includes how to include SAP icons, how to open/relaunch the Application Information view, how to navigate to Configure Page Elements, and how to run Project Validation.

**TAGS**: fiori-tools, sap-fiori, sapui5, application-info, project-validation, icons

**STEP**: 1 — Include SAP icons CSS

**DESCRIPTION**: Add the SAP icons stylesheet to your project so icon glyphs (for example the Page icon) render correctly. Keep the relative path as in the project generator output.

**LANGUAGE**: HTML

**CODE**:
```HTML
<!-- Add this to your app's HTML entry file (index.html or equivalent) -->
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>
```

**STEP**: 2 — Render a Page icon that links to Configure Page Elements documentation

**DESCRIPTION**: Use the SAP icons span for the Page icon and optionally wrap it with a link to the Configure Page Elements doc. The relative documentation path generated by the tool is preserved.

**LANGUAGE**: HTML

**CODE**:
```HTML
<!-- Page icon (glyph shown via sap-icons.css). Wrap in anchor to reference the generated docs. -->
<a href="../Developing-an-Application/configure-page-elements-047507c.md" title="Configure Page Elements">
  <span class="SAP-icons-V5"></span>
  <!-- Visible label (optional) -->
  Page
</a>
```

**STEP**: 3 — Understand Application Information page sections

**DESCRIPTION**: The Application Information page contains four actionable sections useful for automations and UI flows. Use these semantics in code that parses or automates interactions with this view:
- Project Detail: project type, SAPUI5 version, backend, and pages. (Click Page icon to open Configure Page Elements)
- Status: dependency summary and quick links to fix issues
- What you can do: quick links to SAP Fiori tools commands relevant to the project
- What you can learn: links to help topics and support

**LANGUAGE**: Plain text

**CODE**:
```text
Sections:
- Project Detail
- Status
- What you can do
- What you can learn
```

**STEP**: 4 — Relaunch Application Information view (VS Code)

**DESCRIPTION**: Open or relaunch the Application Information page from VS Code using the command palette. Use this in documentation or automation steps that instruct users how to re-open the view.

**LANGUAGE**: Command

**CODE**:
```text
1. Press Ctrl+Shift+P (Cmd+Shift+P on macOS)
2. Type: Fiori: Open Application Info
3. Select the command to open the Application Information page
```

**STEP**: 5 — Run Project Validation

**DESCRIPTION**: Run Project Validation at any time after generating the project to validate dependencies and configuration. Reference the generated documentation for details.

**LANGUAGE**: Command

**CODE**:
```text
- From VS Code: Press Ctrl+Shift+P (Cmd+Shift+P on macOS), then run "Project Validation" or "Fiori: Run Project Validation"
- See documentation: ../Developing-an-Application/project-validation-6f3c737.md
```

**STEP**: 6 — Link targets (preserve generated doc paths)

**DESCRIPTION**: Use or reference these generated doc files directly from UI or automation. Preserve the relative paths generated by the project generator.

**LANGUAGE**: Plain text

**CODE**:
```text
Configure Page Elements doc:
../Developing-an-Application/configure-page-elements-047507c.md

Project Validation doc:
project-validation-6f3c737.md
```
--------------------------------

**TITLE**: Configure SAPUI5 Version for SAP Fiori Applications

**INTRODUCTION**: This guide shows the exact edits and example snippets to control which SAPUI5 version your application requires (runtime), uses for local preview, and uses when deployed to ABAP or Cloud Foundry. It includes manifest.json, index.html, xs-app.json, and mta.yaml examples and the relevant Fiori generator/VS Code commands that update these settings.

**TAGS**: sapui5, manifest.json, minUI5Version, preview, deployment, abap, cloud-foundry, index.html, xs-app.json, mta.yaml, fiori-tools, @sap/ux-specification, @sap/ux-ui5-tooling

STEP: Set Minimum SAPUI5 Version (manifest.json)
DESCRIPTION: Edit the application descriptor to declare the minimum SAPUI5 runtime required. This is used at runtime, during generation, and to pick the matching @sap/ux-specification package in tooling. Changing it via the Fiori command updates tooling packages if needed.
LANGUAGE: JSON
CODE:
```json
// File: webapp/manifest.json (or root manifest.json of the project)
{
  "sap.ui5": {
    "dependencies": {
      "minUI5Version": "1.120.4"
    }
  }
}
```
Notes:
- Warning appears at deployment if the target system's SAPUI5 version is older than this value.
- Change value interactively with the VS Code command: "Fiori: Change Minimum SAPUI5 Version".

STEP: Preview SAPUI5 Version (development run configuration / @sap/ux-ui5-tooling)
DESCRIPTION: By default local preview uses the project's minUI5Version. To override the preview version, create/edit a run configuration and/or configure @sap/ux-ui5-tooling to point to a specific source. The preview loader fetches UI5 from https://ui5.sap.com; if the requested version is missing, the next higher available version is used.
LANGUAGE: JSON
CODE:
```json
// Example: runtime behavior is influenced by @sap/ux-ui5-tooling configuration (conceptual)
// Configure source(s) in your ui5 tooling or run configuration to change where preview loads UI5 from.
// Example: use a local or specific host instead of default https://ui5.sap.com
{
  "ui5": {
    "dependencies": [
      {
        "name": "@sap/ux-ui5-tooling",
        "config": {
          "ui5Home": "https://ui5.sap.com" // default; change to custom host or path if needed
        }
      }
    ]
  }
}
```
Notes:
- Use the project run configuration (in your IDE) or ui5 tooling config to specify a different preview source/version.
- The @sap/ux-ui5-tooling package controls preview resolution; update its config if needed.

STEP: Deployed Version — ABAP Environment / SAP Fiori launchpad
DESCRIPTION: Applications embedded in the ABAP Fiori launchpad use the SAPUI5 version deployed on the backend. Ensure project minUI5Version aligns with the backend SAPUI5 version.
LANGUAGE: Text
CODE:
```text
Action:
- Verify backend SAPUI5 version and match manifest.json "sap.ui5.dependencies.minUI5Version" to avoid runtime incompatibilities.
```

STEP: Deployed Version — ABAP Environment / Standalone index.html
DESCRIPTION: Standalone apps use the bootstrap script in index.html to load SAPUI5. The generated index.html typically references resources with a relative path (using backend-hosted UI5). To force a specific public UI5 version, change the script src to the ui5.sap.com URL with a version.
LANGUAGE: HTML
CODE:
```html
<!-- File: webapp/index.html (generated) -->
<!-- Relative path: uses backend-deployed UI5 -->
<script id="sap-ui-bootstrap" src="resources/sap-ui-core.js"></script>

<!-- Force a specific public SAPUI5 version from ui5.sap.com -->
<script id="sap-ui-bootstrap" src="https://ui5.sap.com/1.114.12/resources/sap-ui-core.js"></script>
```

STEP: Deployed Version — Cloud Foundry / SAP Build Work Zone Service
DESCRIPTION: When running in SAP Build Work Zone, applications run in an iframe and use the SAPUI5 version of the backend. No changes required in the app to force a different UI5 when embedded.
LANGUAGE: Text
CODE:
```text
Action:
- Deploy as usual for Build Work Zone. The iframe will load backend-provided SAPUI5.
```

STEP: Deployed Version — Cloud Foundry / Standalone (xs-app.json route)
DESCRIPTION: The Fiori deploy configuration command adds a route in xs-app.json that maps /resources to a configured destination (commonly named "ui5") so the app can load UI5 from the destination. Use this to point to https://ui5.sap.com or to a custom UI5 host.
LANGUAGE: JSON
CODE:
```json
// File: xs-app.json (added/updated by "Fiori: Add Deployment Configuration")
{
  "routes": [
    {
      "source": "^/resources/(.*)$",
      "target": "/resources/$1",
      "authenticationType": "none",
      "destination": "ui5"
    }
  ]
}
```
Notes:
- Command to add this: "Fiori: Add Deployment Configuration".

STEP: Deployed Version — Cloud Foundry (mta.yaml destination instance)
DESCRIPTION: The generator also adds an instance-based destination in mta.yaml pointing to https://ui5.sap.com. You can edit this instance to change the default SAPUI5 version source or replace the instance-level destination with an account-level destination in SAP BTP.
LANGUAGE: YAML
CODE:
```yaml
# File: mta.yaml (snippet added by generator)
instance:
  destinations:
    - Authentication: NoAuthentication
      Name: ui5
      ProxyType: Internet
      Type: HTTP
      URL: https://ui5.sap.com
```
Notes:
- By default this uses the latest SAPUI5 version from ui5.sap.com.
- To fix a version, change the destination URL to a UI5 version path, or configure the destination in SAP BTP to point to a specific version host.
- You can also switch from an instance-level destination to an account-level destination via BTP cockpit.

STEP: Practical Checklist (actions to perform)
DESCRIPTION: Quick list of edits and commands to ensure deterministic SAPUI5 version behavior across environments.
LANGUAGE: Text
CODE:
```text
1. Set/verify min UI5 in manifest.json:
   - Edit "sap.ui5.dependencies.minUI5Version"
   - Or run: "Fiori: Change Minimum SAPUI5 Version"

2. Preview locally:
   - Use run configuration or update @sap/ux-ui5-tooling config to change preview UI5 source.
   - Default fetch is https://ui5.sap.com; fallback uses next higher available version.

3. ABAP deployment:
   - Embedded in FLP: ensure backend UI5 version >= minUI5Version.
   - Standalone: edit webapp/index.html bootstrap src to point to desired UI5 URL.

4. Cloud Foundry deployment:
   - Run "Fiori: Add Deployment Configuration" to add xs-app.json route and mta.yaml destination.
   - Edit xs-app.json destination or mta.yaml instance destination URL to control which UI5 host/version is used.
   - Optionally create/point to an account-level destination in SAP BTP for precise control.
```

--------------------------------

**TITLE**: Data Editor — Generate, Edit, and Persist Mock Data for Fiori Tools

**INTRODUCTION**: Steps and code snippets to configure and use the Fiori Tools Data Editor to generate mock data (on-the-fly or persisted to disk), where files are stored, how the Data Editor reads metadata, how to enable live updates (watch), and recommended mock data file structure for editing.

**TAGS**: fiori-tools, mockserver, data-editor, ui5, mockdata, manifest.json, ui5-mock.yaml

**STEP**: 1 — Confirm mock server is installed and start/stop mock server

**DESCRIPTION**: The workspace must have the Mock Server configured before using the Data Editor. Use the project-provided npm script to start the mock server for on-the-fly mock data. Stop the running mock server with Ctrl+C.

**LANGUAGE**: bash

**CODE**:
```bash
# Start the mock-enabled preview (project must define this script)
npm run start-mock

# Stop the running mock server (keyboard)
# Press Ctrl+C in the terminal running the mock server
```

**STEP**: 2 — Point a dataSource in manifest.json at local metadata

**DESCRIPTION**: Data Editor reads the metadata XML referenced in manifest.json under dataSources. Ensure the dataSource has a localUri that points to your metadata.xml (commonly in webapp/localService).

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.app": { },
  "sap.ui5": {
    "models": {},
    "dataSources": {
      "mainService": {
        "uri": "/sap/opu/odata/sap/Z_MY_SERVICE/",
        "type": "OData",
        "settings": {
          "localUri": "localService/metadata.xml"
        }
      }
    }
  }
}
```

**STEP**: 3 — Generate persisted mock JSON files using Data Editor (VS Code)

**DESCRIPTION**: To persist mock data to disk instead of only generating it in-memory during npm run start-mock, open the Data Editor from the Fiori Tools extension: right-click your project in VS Code → Open Data Editor. The Data Editor will create .json files under /webapp/localService/mockdata for each entity when you generate/save data.

**LANGUAGE**: Plaintext

**CODE**:
```text
# Generated mock data file path (example)
/webapp/localService/mockdata/Products.json
/webapp/localService/mockdata/Customers.json
```

**STEP**: 4 — Example structure of a generated entity JSON file

**DESCRIPTION**: Data Editor writes mockdata entity files in JSON. The editor generates object arrays under "d" -> "results" (common OData mock format). Edit these JSON files directly or via the Data Editor UI.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "d": {
    "results": [
      {
        "ProductID": "P001",          /* primary keys are not editable in Data Editor */
        "Name": "Notebook",
        "Price": 199.99,
        "Category": "Electronics"
      },
      {
        "ProductID": "P002",
        "Name": "Pen",
        "Price": 1.99,
        "Category": "Office"
      }
    ]
  }
}
```

**STEP**: 5 — Edit mock data in the Data Editor (UI behavior)

**DESCRIPTION**: Use the Data Editor UI to edit persisted or in-memory mock data:
- Double-click a data cell to edit (primary and foreign keys are not editable).
- Click Add Row to insert a new row; related entities with foreign keys receive corresponding rows.
- Select a row and click Delete Row to remove it; related rows tied by foreign keys are deleted automatically.
- If the mock server is not running, edits in the Data Editor are immediately saved to the JSON file. If you edit the JSON file directly, click Refresh in the Data Editor to reload.

**LANGUAGE**: Plaintext

**CODE**:
```text
# Edit flow summary (no code)
1. Open Data Editor (right-click project -> Open Data Editor)
2. Double-click cell to edit (PK/FK cells are read-only)
3. Use Add Row / Delete Row toolbar buttons
4. Click Refresh in Data Editor after manual .json edits
```

**STEP**: 6 — Enable live reload when mock server is running (ui5-mock.yaml)

**DESCRIPTION**: When the mock server is running and you want the UI preview to reflect changes in mockdata files automatically, add watch: true to ui5-mock.yaml under the mock configuration. This enables the mock server to watch local mockdata files and update the canvas without restarting the server.

**LANGUAGE**: YAML

**CODE**:
```yaml
# ui5-mock.yaml (example)
server:
  port: 4004

mock:
  # relative path to metadata used by the mock server
  metadataXml: ./webapp/localService/metadata.xml
  # folder where Data Editor writes JSON mock data
  mockdata: ./webapp/localService/mockdata
  # enable watching of mockdata files to auto-refresh the running mock server
  watch: true
```

**STEP**: 7 — Searching and selecting mock data inside the Data Editor

**DESCRIPTION**: Use the Search input in the Data Editor header to filter and locate mock rows quickly. Enter search text; matches appear in the drop-down table; selecting a result highlights the corresponding row in the editor table.

**LANGUAGE**: Plaintext

**CODE**:
```text
# Search flow
1. Click the Search field in the Data Editor header
2. Type the search criteria (property value, ID, etc.)
3. Select a match from the autocomplete dropdown to navigate/highlight the row
```

**STEP**: 8 — Show or hide entity properties in the Data Editor table

**DESCRIPTION**: Control visible columns in the Data Editor:
- Click Show Properties in the Data Editor header to open the properties popup.
- Check properties to display, uncheck to hide them.
- Use the popup search field to find a property quickly.
- Click Save to apply changes. Some property groups are hidden by default and must be enabled via Show Properties.

**LANGUAGE**: Plaintext

**CODE**:
```text
# Show/Hide Properties flow
1. Data Editor -> Click "Show Properties"
2. Use the checkbox list or search input in the popup
3. Click "Save" to update visible columns in the table
```
--------------------------------

**TITLE**: Delete an SAP Fiori Application from a CAP Project (VS Code)

**INTRODUCTION**: Step-by-step developer-focused instructions to delete a SAP Fiori application created inside a CAP project using the Fiori tools in Visual Studio Code. Includes exact UI actions and a small TypeScript example showing how to programmatically delete the application folder and revert references in global files (as placeholders you can adapt to your project).

**TAGS**: fiori-tools, CAP, SAPUI5, SAP Fiori, Visual Studio Code, delete, automation

**STEP**: 1 — Open the Command Palette

**DESCRIPTION**: Open the VS Code Command Palette and invoke the Fiori delete command. Use the keyboard shortcut or the palette search. This opens the Fiori command that lists CAP project applications.

**LANGUAGE**: text

**CODE**:
```text
// Keyboard (macOS)
CMD + SHIFT + P

// Keyboard (Windows/Linux)
CTRL + SHIFT + P

// In the Command Palette type (case-insensitive):
Fiori: Delete Application from CAP project
```

**STEP**: 2 — Select the application to delete

**DESCRIPTION**: From the dropdown presented by the command, select the application you want to remove. The UI will then show a confirmation dialog asking whether you want to proceed.

**LANGUAGE**: text

**CODE**:
```text
// Example selection dialog (visual representation)
Select application to delete:
- MyFioriApp
- AnotherApp
- SampleApp

// After selecting "MyFioriApp" you'll see:
Do you really want to delete application "MyFioriApp"?
[ Yes ]  [ No ]  [ Cancel ]
```

**STEP**: 3 — Confirm deletion and revert global changes

**DESCRIPTION**: Click "Yes" to delete the application. The operation should:
- Remove the application's folder (the folder containing the app within the CAP project).
- Revert or remove references to the deleted application in global project files (e.g., annotation references, global config files). Use this TypeScript example as a template to implement or automate the deletion and basic cleanup. Replace placeholder file lists with your actual global file paths.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
import { promises as fs } from 'fs';
import * as path from 'path';

/**
 * Template: Delete application folder and remove references from global files.
 * - projectRoot: absolute path to CAP project root
 * - appRelativePath: relative path to the application folder to delete (e.g., 'app/MyFioriApp')
 * - globalFiles: array of absolute or project-relative paths to files that may reference the app,
 *   e.g. annotation index files, central config files (replace with actual file paths)
 */
async function deleteCapFioriApp(projectRoot: string, appRelativePath: string, globalFiles: string[]) {
  const appFolder = path.join(projectRoot, appRelativePath);

  // 1) Delete the application folder (recursive)
  try {
    await fs.rm(appFolder, { recursive: true, force: true });
    console.log(`Deleted application folder: ${appFolder}`);
  } catch (err) {
    console.error(`Failed to delete folder ${appFolder}:`, err);
    throw err;
  }

  // 2) Revert references in global files - remove lines containing the app path or name.
  //    Adjust the matching logic according to how references appear in your files.
  for (const filePath of globalFiles) {
    const resolved = path.isAbsolute(filePath) ? filePath : path.join(projectRoot, filePath);
    try {
      let content = await fs.readFile(resolved, 'utf8');

      // Basic example: remove lines containing the app folder name
      const appName = path.basename(appRelativePath);
      const filtered = content
        .split(/\r?\n/)
        .filter(line => !line.includes(appRelativePath) && !line.includes(appName))
        .join('\n');

      if (filtered !== content) {
        await fs.writeFile(resolved, filtered, 'utf8');
        console.log(`Updated global file: ${resolved}`);
      } else {
        console.log(`No references found in: ${resolved}`);
      }
    } catch (err) {
      // If a file does not exist or is not writable, log and continue or handle as needed
      console.warn(`Warning: could not update ${resolved}:`, err);
    }
  }

  // 3) Optionally, run any project-specific cleanup tasks here
  //    e.g., npm/yarn rebuild, regenerate manifests, refresh VS Code workspace
}

export { deleteCapFioriApp };
```

**STEP**: 4 — Notes and references

**DESCRIPTION**: Additional info and links. Use the link for CAP background and adapt the TypeScript template for actual global file patterns and project-specific cleanup.

**LANGUAGE**: text

**CODE**:
```text
Tip: For more information about CAP projects, see:
https://cap.cloud.sap/docs/about/

Notes:
- The Fiori: Delete Application from CAP project command will remove the app folder and update global references.
- Ensure you have a project backup or version control commit before deleting if you need to restore.
- Adapt the cleanup logic to the actual files in your project (annotation folders, central manifest/config files).
```
--------------------------------

**TITLE**: SAP Fiori tools — Environment Check (Destination & Development Environment Reports)

**INTRODUCTION**: Quick, code-friendly reference for automating and parsing SAP Fiori tools "Environment Check" workflows in SAP Business Application Studio (BAS) and Visual Studio Code (VS Code). Includes exact UI commands, keyboard shortcuts, TypeScript snippets to invoke the command palette programmatically, JSON report schemas and sample parsing snippets, and shell commands to handle saved .zip reports.

**TAGS**: fiori-tools, environment-check, sap, BAS, VSCode, destination, troubleshooting, report, json, clipboard, zip

**STEP**: 1 — Open Environment Check (Command Palette)
**DESCRIPTION**: Launch the SAP Fiori tools Environment Check UI from VS Code or BAS. This programmatic snippet opens the Command Palette with the command prefilled so the user can execute it immediately.
**LANGUAGE**: TypeScript
**CODE**:
```TypeScript
// Use inside a VS Code extension or other code that has access to the 'vscode' API.
// This opens the Command Palette with "Fiori: Open Environment Check" prefilled.
import * as vscode from 'vscode';

vscode.commands.executeCommand('workbench.action.quickOpen', '>Fiori: Open Environment Check');
```

**STEP**: 2 — Destination Checks (SAP Business Application Studio)
**DESCRIPTION**: UI steps to create and analyze a destination. Use these exact UI actions when automating user instructions or building a guide for users:
- Open Command Palette (CMD/CTRL + Shift + P) → run "Fiori: Open Environment Check".
- Click "Create destination".
- Select a destination from the dropdown.
- If prompted, enter your credentials.
- Click "View the results" to open report in UI.
- Click "View and Save results" to generate a .zip report for SAP Product Support.

The destination report contains these sections:
- Environment
- Destination Details
- All Destination Details
- Messages

Below is a canonical JSON schema example for the Destination Check report to guide parsing or validation logic.
**LANGUAGE**: JSON
**CODE**:
```json
{
  "environment": {
    "devSpaceType": "SAP Business Application Studio",
    "nodeVersion": "v14.17.0",
    "os": "linux",
    "timestamp": "2025-10-15T12:34:56Z"
  },
  "destinationDetails": {
    "name": "MY_SAP_DEST",
    "url": "https://sap.example.com",
    "type": "HTTP",
    "properties": {
      "Auth": "OAuth2SAMLBearerAssertion",
      "CloudConnectorLocationId": "my-cloud-connector"
    }
  },
  "allDestinationDetails": [
    {
      "name": "MY_SAP_DEST",
      "type": "HTTP",
      "properties": { "...": "..." }
    },
    {
      "name": "BACKEND_API",
      "type": "HTTP",
      "properties": { "...": "..." }
    }
  ],
  "messages": [
    {
      "level": "info",
      "timestamp": "2025-10-15T12:34:55Z",
      "text": "Destination tested successfully."
    },
    {
      "level": "error",
      "timestamp": "2025-10-15T12:34:56Z",
      "text": "Failed to fetch resource: 401 Unauthorized"
    }
  ]
}
```

**STEP**: 3 — Gather Environment Information (BAS and VS Code)
**DESCRIPTION**: UI steps to gather development environment data (generator version, npm packages, etc.):
- Open Command Palette (CMD/CTRL + Shift + P) → run "Fiori: Open Environment Check".
- Click "Gather environment information".
- Click "View and Copy results" to copy the report JSON to clipboard.
- Click "View and Save results" to generate a .zip file for SAP Product Support.

Use the following JSON schema to parse environment information programmatically.
**LANGUAGE**: JSON
**CODE**:
```json
{
  "environment": {
    "editor": "Visual Studio Code",
    "editorVersion": "1.80.0",
    "nodeVersion": "v16.19.0",
    "platform": "darwin",
    "timestamp": "2025-10-15T12:40:00Z"
  },
  "fioriGenerator": {
    "version": "1.30.0",
    "installedGlobal": false
  },
  "npmPackages": [
    { "name": "@sap/generator-fiori", "version": "1.30.0" },
    { "name": "@sap/ux-specification", "version": "1.98.0" }
  ],
  "extensions": [
    { "id": "sap.fiori-tools", "version": "2.0.0" }
  ],
  "notes": "Any additional log lines or warnings."
}
```

**STEP**: 4 — Programmatically read "View and Copy results" (clipboard) and parse JSON
**DESCRIPTION**: Example Node.js snippet to read the environment-check JSON that was copied to the clipboard (cross-platform using clipboardy) and access fields for automated processing.
**LANGUAGE**: JavaScript (Node.js)
**CODE**:
```javascript
// npm i clipboardy
const clipboardy = require('clipboardy');

async function parseEnvCheckFromClipboard() {
  try {
    const raw = await clipboardy.read();
    const data = JSON.parse(raw);
    console.log('Editor:', data.environment?.editor);
    console.log('Node version:', data.environment?.nodeVersion);
    console.log('Fiori generator version:', data.fioriGenerator?.version);
    // Do automated diagnostics or upload to a support endpoint
  } catch (err) {
    console.error('Failed to read/parse Environment Check JSON from clipboard:', err);
  }
}

parseEnvCheckFromClipboard();
```

**STEP**: 5 — Handle saved .zip report files (view, extract, inspect)
**DESCRIPTION**: Shell commands to save, extract, and inspect .zip report created by "View and Save results". Use appropriate OS commands for clipboard-to-file first, if needed.
**LANGUAGE**: Shell
**CODE**:
```bash
# Example: unzip saved report to ./env-report
unzip path/to/environment-check-report.zip -d ./env-report

# macOS: if you used "View and Copy results" then paste clipboard JSON to file
pbpaste > env-check.json

# Linux (with xclip):
xclip -selection clipboard -o > env-check.json

# Windows PowerShell:
Get-Clipboard > env-check.json
```

**STEP**: 6 — Recommended automated flow for support upload (script outline)
**DESCRIPTION**: Outline of a reproducible automation pipeline:
1. Trigger "Fiori: Open Environment Check" (manual or via quickOpen trick).
2. Choose "Gather environment information" or "Create destination" in the UI.
3. Use "View and Save results" to create a .zip (user chooses path).
4. Extract .zip, validate JSON against schemas above, and upload to support API or attach to issue tracker.

**LANGUAGE**: Bash + Node.js (combined snippet)
**CODE**:
```bash
# 1) Unzip into working folder
unzip environment-check.zip -d ./env-report

# 2) Example: parse the main report JSON with a Node.js helper
node -e "
const fs = require('fs');
const report = JSON.parse(fs.readFileSync('./env-report/report.json','utf8'));
console.log('Environment:', report.environment);
console.log('Destinations count:', (report.allDestinationDetails || []).length);
"
```


--------------------------------

**TITLE**: Information Panel (SAP Fiori tools)

**INTRODUCTION**: This document describes how to open and use the Information Panel added in SAP Fiori tools v1.11.4. The panel provides release notes, learning links, tutorials, and support information for Fiori elements development. Use these steps to locate the panel in the SAP Fiori activity view inside Visual Studio Code.

**TAGS**: fiori-tools, sap-fiori, vscode, ui, release-notes, tutorials, support, 1.11.4

**STEP**: 1 — Open the SAP Fiori activity view

**DESCRIPTION**: Open the SAP Fiori activity view from the left-side activity toolbar in Visual Studio Code. The SAP Fiori activity is identified by a wrench/pencil icon. This view contains the Information Panel.

**LANGUAGE**: PlainText

**CODE**:
```plaintext
Action:
1. In Visual Studio Code, locate the left-side Activity Bar (vertical toolbar).
2. Click the SAP Fiori icon (wrench/pencil).

Icon path (resource reference):
../Getting-Started-with-SAP-Fiori-Tools/images/SAP_Fiori_tools_Wrench_Pencil_9d6b0f8.png
```

**STEP**: 2 — Expand the Information Panel

**DESCRIPTION**: Once the SAP Fiori activity view is open, expand the Information Panel to access release notes, tutorials, learning links, and support information. The panel appears within the SAP Fiori activity view introduced in version 1.11.4.

**LANGUAGE**: PlainText

**CODE**:
```plaintext
Action:
1. In the SAP Fiori activity view, locate the section labeled "Information" or "Information Panel".
2. Click the chevron/expand control for the Information Panel to reveal content.

Contents you will find:
- Release notes for SAP Fiori tools (introduced in v1.11.4)
- Links to learn about SAP Fiori elements developments
- Links to tutorials and guides
- Support information and how customers can get help

Notes:
- The Information Panel was introduced in SAP Fiori tools v1.11.4. If you do not see the panel, update the SAP Fiori tools extension to v1.11.4 or later.
```

**STEP**: 3 — Troubleshooting / Update extension (if panel is not visible)

**DESCRIPTION**: If the Information Panel is missing, ensure the SAP Fiori tools extension is installed and updated to v1.11.4 or later. Use the Extensions view in VS Code to update or install.

**LANGUAGE**: PlainText

**CODE**:
```plaintext
Actions to update/install extension:
1. Open Extensions view: Click the Extensions icon in the Activity Bar or press Ctrl+Shift+X (Cmd+Shift+X on macOS).
2. Search for "SAP Fiori tools".
3. If not installed: click Install.
4. If installed but older than v1.11.4: click Update (or uninstall and reinstall the latest version).
5. Restart VS Code after installing/updating.

Optional CLI (VS Code):
- To open Extensions view via command palette: Ctrl+Shift+P (Cmd+Shift+P on macOS) -> "Extensions: Show Extensions"
```
--------------------------------

**TITLE**: Managing OData Services and Local Annotation Files for SAP Fiori Projects

**INTRODUCTION**: Practical, code-focused guide for adding, refreshing, deleting OData services and managing local OData annotation files in SAP Fiori elements / UI5 projects. Includes example manifest.json snippets, file paths, and command-line examples to automate common tasks (download metadata, update manifest, delete files). Use these snippets to integrate into automation scripts or RAG agents that generate project code changes.

**TAGS**: sapui5, fiori-tools, manifest.json, annotations, metadata.xml, ui5, localService, mockdata

STEP: Add an OData service to a project (UI flow + manifest change)
DESCRIPTION: Use the Service Manager UI (supported for Fiori elements Overview Page and freestyle SAPUI5) or apply the equivalent manifest.json changes. The service adds metadata.xml and back-end annotations into localService. Example manifest dataSources and model mapping shown below. Save metadata to localService/metadata.xml and backend annotations to localService/annotations/.
LANGUAGE: JSON
CODE:
```JSON
// manifest.json (relevant excerpt)
// Add a dataSource entry for the OData service and a local metadata reference.
{
  "sap.app": {
    "id": "my.app.id",
    "dataSources": {
      "MyService": {
        "uri": "/sap/opu/odata/sap/ZMY_SERVICE_SRV/",
        "type": "OData",
        "settings": {
          "localUri": "localService/metadata.xml"
        }
      },
      "MyServiceAnnotations": {
        "uri": "localService/annotations/MyService.annotations.xml",
        "type": "ODataAnnotation",
        "settings": {
          "localUri": "localService/annotations/MyService.annotations.xml"
        }
      }
    }
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "MyService"
      },
      "annotationModel": {
        "dataSource": "MyServiceAnnotations"
      }
    }
  }
}
```

STEP: Add service files to localService/ (expected file layout)
DESCRIPTION: After adding a service, create the following files and folders inside the project root. These are the files the Service Manager UI creates.
LANGUAGE: text
CODE:
```text
Project root/
  ├─ manifest.json         // updated as above
  ├─ localService/
  │   ├─ metadata.xml      // service $metadata content
  │   ├─ mockdata/         // optional mock JSON files for entities
  │   └─ annotations/
  │       ├─ MyService.annotations.xml   // backend annotations (if available)
  │       └─ CustomAnnotations.xml       // additional local annotations
  └─ ui5.yaml              // may contain backend routing & mockserver entries
```

STEP: Programmatically fetch and refresh service metadata
DESCRIPTION: When the UI *Refresh* action is used it replaces localService/metadata.xml and annotation XML files from the server. Use curl/wget to replicate this in scripts: fetch $metadata and save to localService/metadata.xml. Use basic auth or destination headers as needed.
LANGUAGE: Bash
CODE:
```bash
# Replace placeholders and run from project root
SERVICE_URL="https://my.sap.server/sap/opu/odata/sap/ZMY_SERVICE_SRV/$metadata"
OUTPUT="localService/metadata.xml"

# Basic auth example (username/password)
curl -u "USERNAME:PASSWORD" -o "$OUTPUT" "$SERVICE_URL"

# If using a destination or token, set appropriate headers:
# curl -H "Authorization: Bearer <TOKEN>" -o "$OUTPUT" "$SERVICE_URL"
```

STEP: Refresh and save connection metadata + update ui5 YAML files
DESCRIPTION: The "Refresh & Save" action refreshes metadata and also persists backend routing & mockserver settings in ui5*.yaml files. Example snippet showing where a backend route might appear in ui5.yaml (adapt to your project tooling).
LANGUAGE: YAML
CODE:
```yaml
# ui5.yaml (example backend routing / mockserver info)
specVersion: '2.2'
metadata:
  name: my.app
server:
  customMiddleware:
    - name: ui5-middleware-simpleproxy
      afterMiddleware: compression
      mountPath: /sap/opu/odata/sap/ZMY_SERVICE_SRV
      configuration:
        backend: https://my.sap.server
mockserver:
  localServicePath: localService
  mockdata: localService/mockdata
```

STEP: Delete a service (UI flow + file removals)
DESCRIPTION: Use the Service Manager delete action, or remove service and annotations entries from manifest.json and delete local files. Also remove any ui5*.yaml backend routing and mockserver entries. Example jq + rm commands to automate removal.
LANGUAGE: Bash/JSON
CODE:
```bash
# Remove dataSource entries from manifest.json (using jq)
# Replace MyService with your dataSource key
jq 'del(.["sap.app"].dataSources.MyService, .["sap.app"].dataSources.MyServiceAnnotations, .["sap.ui5"].models.annotationModel)' manifest.json > manifest.tmp && mv manifest.tmp manifest.json

# Delete local files created for the service
rm -rf localService/metadata.xml localService/annotations/MyService.annotations.xml localService/mockdata

# (Optional) manually edit ui5.yaml to remove backend routing entries or use a YAML editing tool
```

STEP: Open the Annotation File Manager (UI)
DESCRIPTION: Open the Annotation File Manager via right-click on manifest.json and selecting "Annotation File Manager". Select the target service from the drop-down list. Alternatively, open the Annotation List View and click Annotation Hierarchy for a projection/property.
LANGUAGE: text
CODE:
```text
UI steps:
1. Right-click manifest.json -> Annotation File Manager
2. Select target OData service from the dropdown
3. The manager shows all local annotation files for that service
```

STEP: Create a local annotation file and wire it into manifest.json
DESCRIPTION: The Annotation File Manager creates the XML under localService/annotations and registers a corresponding dataSource in manifest.json. Example annotation file skeleton and manifest.json entries to reference it.
LANGUAGE: XML, JSON
CODE:
```XML
<!-- localService/annotations/CustomAnnotations.xml -->
<edmx:Edmx Version="1.0" xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx">
  <edmx:Reference Uri="localService/metadata.xml"/>
  <edmx:DataServices>
    <!-- Add Annotation Targets here -->
  </edmx:DataServices>
</edmx:Edmx>
```

```JSON
// Add corresponding dataSource to manifest.json
{
  "sap.app": {
    "dataSources": {
      "MyServiceAnnotations": {
        "uri": "localService/annotations/CustomAnnotations.xml",
        "type": "ODataAnnotation",
        "settings": {
          "localUri": "localService/annotations/CustomAnnotations.xml"
        }
      }
    }
  },
  "sap.ui5": {
    "models": {
      "annotationModel": {
        "dataSource": "MyServiceAnnotations"
      }
    }
  }
}
```

STEP: Change annotation file hierarchy (UI behavior + manifest implication)
DESCRIPTION: Use the up/down arrows in the Annotation File Manager to reorder annotation files. Note: the highest-ranked annotation file in the Annotation File Manager table appears at the bottom in the manifest.json annotation precedence (the manager mirrors the precedence rules used at runtime). After changing order, confirm manifest.json entries reflect the new precedence (the active/last entry usually takes precedence).
LANGUAGE: text
CODE:
```text
UI steps:
1. Open Annotation File Manager for the service
2. Use up/down arrows to reorder files
3. Save/Close -> verify manifest.json dataSources and model mappings reflect new order
```

STEP: Activate / Deactivate an annotation file
DESCRIPTION: Toggle the checkbox in the Annotation File Manager active column. A deactivated file is excluded from the annotation hierarchy (no longer applied at runtime). Ensure manifest.json no longer references deactivated annotation dataSources or the model mapping is adjusted.
LANGUAGE: text
CODE:
```text
UI steps:
1. Right-click manifest.json -> Open Annotation File Manager
2. Check/uncheck the Active checkbox next to a file
3. Save -> verify manifest.json and localService/annotations folder
```

STEP: Delete an annotation file (UI + CLI)
DESCRIPTION: Use the Delete icon in the Annotation File Manager, or remove the file and its manifest.json references manually. The UI removes the file from the table and deletes the file from localService/annotations.
LANGUAGE: Bash/JSON
CODE:
```bash
# Remove file and corresponding manifest.json entries
rm -f localService/annotations/CustomAnnotations.xml

# Remove its dataSource entry from manifest.json
jq 'del(.["sap.app"].dataSources.MyServiceAnnotations, .["sap.ui5"].models.annotationModel)' manifest.json > manifest.tmp && mv manifest.tmp manifest.json
```
--------------------------------

**TITLE**: Managing SAP System Connections in SAP Fiori Tools (VS Code)

**INTRODUCTION**: This document describes programmatic and UI-oriented steps to view, test, edit, delete, create, export, and import saved SAP system connections in SAP Fiori tools for Visual Studio Code. It includes file paths and example JSON payloads for exported/imported systems and test-connection responses. Use these details when writing automation, extension helpers, unit tests, or integration scripts that interact with saved SAP systems in VS Code.

**TAGS**: fiori-tools, vscode, sap, abap, btp, connection, export, import, odata, credentials

**STEP**: 1 — Static Assets and Resource Paths

**DESCRIPTION**: Reference UI assets used by the documentation and extension. Use these paths when generating UI or tests that validate icons and CSS inclusion.

**LANGUAGE**: HTML

**CODE**:
```html
<!-- CSS used by the documentation/extension -->
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>

<!-- Example icon image references from documentation -->
<!-- Wrench/Pencil icon used in the Activity toolbar -->
../Getting-Started-with-SAP-Fiori-Tools/images/SAP_Fiori_tools_Wrench_Pencil_9d6b0f8.png

<!-- Import SAP System icon (used alongside SAP Systems title bar) -->
images/Fiori_tools_Saved_Systems_9dce22e.png
```

**STEP**: 2 — View Saved SAP System Details (UI flow)

**DESCRIPTION**: Steps to locate and open stored SAP system details in VS Code SAP Fiori view. Useful for automation scripts or tests that open the details panel before performing actions (test, save, export).

**LANGUAGE**: Plain Text

**CODE**:
```text
1. Open VS Code activity toolbar (left side) and click the SAP Fiori activity (Wrench/Pencil icon).
2. Expand the "SAP Systems" view to list saved systems (display format: "<System Name> [username]" or "<System Name> (BTP)" / "(S4HC)").
3. Open system details by:
   - left-clicking the system entry, OR
   - right-click -> "Show SAP System Details"
4. Optional: In details panel, click "Create SAP Fiori application" to launch the application generator pre-selecting this system.
```

**STEP**: 3 — Test SAP System Connection (programmatic response schema)

**DESCRIPTION**: Steps to test a saved system connection and an example JSON response for programmatic validation of OData capabilities and connectivity status.

**LANGUAGE**: Plain Text + JSON

**CODE**:
```text
UI steps:
1. Open saved system details (see Step 2).
2. Click "Test Connection".
3. Inspect result: success/failure and supported OData versions.

Notes:
- Recommended to test saved systems to validate service catalog availability.
- If the test fails for BTP Reentrance Ticket, check the VS Code Output tab for details.
```

```json
// Example programmatic Test Connection response schema
{
  "systemName": "MyABAPSystem",
  "status": "connected",         // "connected" | "failed"
  "message": "This SAP system connected successfully",
  "supportsODataV2": true,
  "supportsODataV4": false,
  "checkedAt": "2025-10-15T12:34:56Z",
  "details": {
    "url": "https://myabap.example.com",
    "client": "001",
    "authenticationType": "Basic" // "Basic" | "ServiceKey" | "ReentranceTicket"
  }
}
```

**STEP**: 4 — Edit SAP System Connection (UI flow & validation)

**DESCRIPTION**: Editable fields per system type and authentication type. Follow this for automated UI-edit flows and validation checks prior to saving.

**LANGUAGE**: Plain Text

**CODE**:
```text
1. Right-click saved system -> "Show SAP System Details".
2. Edit fields based on System Type:

ABAP On Premise:
  - System Name (editable)
  - URL (editable)
  - Client (editable)
  - Username (editable)
  - Password (editable)

ABAP Environment on SAP BTP:
  - System Name (editable)
  - Authentication Type (non-editable once selected)

If Authentication Type == "Service Key":
  - URL: non-editable (determined by service key)
  - Client: non-editable (determined)
  - Service Key: editable (paste service key contents)

If Authentication Type == "Reentrance Ticket":
  - URL: editable

3. After editing, click "Test Connection" and verify connectivity.
4. Click "Save". Confirm success message: "System information saved".
```

**STEP**: 5 — Delete SAP System Connection (UI flow)

**DESCRIPTION**: Steps to delete a saved system entry. Use in UI automation or tests to confirm removal and confirmation dialogs.

**LANGUAGE**: Plain Text

**CODE**:
```text
1. Open SAP Fiori activity -> expand "SAP Systems".
2. Select the saved system to delete.
3. Click the Delete (wastebasket) icon next to the system name.
4. In confirmation dialog, click "Yes".
5. Verify system no longer appears in the systems panel.
```

**STEP**: 6 — Create New SAP System — ABAP On Premise (UI flow + validation)

**DESCRIPTION**: UI steps to add an ABAP On Premise system and expected messages for automated verification.

**LANGUAGE**: Plain Text

**CODE**:
```text
1. In SAP Systems panel, click Add (heavy_plus_sign) -> "Add SAP System".
2. Select "ABAP On Premise" (default if only ABAP On Premise).
3. Fill fields:
   - System Name: your choice
   - URL: system URL (https://...)
   - Client: usually 3 digits (optional)
   - Username: your username
   - Password: your password
4. Click "Test Connection". Expect message: "This SAP system connected successfully".
5. Click "Save". Expect message: "System information saved".
6. Confirm the saved system appears in systems panel as: "<name> [username]".
```

**STEP**: 7 — Create New SAP System — ABAP Environment on SAP BTP (Service Key)

**DESCRIPTION**: Steps for adding BTP systems using Service Key authentication. Programmatic expectations: system fills URL/client from service key and saved entry shown as "(BTP)".

**LANGUAGE**: Plain Text + JSON

**CODE**:
```text
UI steps:
1. Click Add -> "Add SAP System".
2. Under System Type, select "ABAP Environment on SAP Business Technology Platform".
3. Authentication Type: select "Service Key".
4. Enter:
   - System Name: your choice
   - Service Key: paste JSON service key content
5. Click "Test Connection".
   - Expect URL and Client fields to be auto-filled based on service key
   - Expect message: "This SAP system connected successfully"
6. Click "Save".
   - Expect message: "System information saved"
   - System appears as: "<name> (BTP)"
```

```json
// Example snippet: what a pasted Service Key JSON might look like (input only)
{
  "xsappname": "my-abap-app",
  "url": "https://my-btp-abap.example.com",
  "client": "100",
  "service_instance_name": "abap-instance-01",
  "credentials": {
    "clientid": "abc123",
    "clientsecret": "*****",
    "tokenurl": "https://auth.example.com/oauth/token"
  }
}
```

**STEP**: 8 — Create New SAP System — ABAP Environment (Reentrance Ticket)

**DESCRIPTION**: Steps for adding BTP systems using Reentrance Ticket authentication. Include compatibility note and test expectations.

**LANGUAGE**: Plain Text

**CODE**:
```text
Compatibility:
- Reentrance Ticket authentication requires SAP S/4HANA Cloud 2408 or higher.

UI steps:
1. Click Add -> "Add SAP System".
2. System Type: "ABAP Environment on SAP Business Technology Platform".
3. Authentication Type: "Reentrance Ticket".
4. Enter:
   - System Name: your choice
   - URL: ABAP system URL
5. Click "Test Connection".
   - Verifies connectivity and OData V2/V4 support
   - On failure, inspect VS Code Output tab for detailed logs
6. After successful test, click "Save".
   - Expect message: "System information saved"
   - System appears as: "<name> (S4HC)"
```

**STEP**: 9 — Export an ABAP On Premise SAP System (JSON export behavior)

**DESCRIPTION**: UI steps to export a saved ABAP On Premise system and the exported JSON schema example. Note: exported JSON intentionally excludes sensitive credentials.

**LANGUAGE**: Plain Text + JSON

**CODE**:
```text
UI steps:
1. Right-click saved system -> "Show SAP System Details".
2. Click "Export System".
3. A JSON file is downloaded. It does NOT include sensitive credential information.
```

```json
// Example exported JSON schema (credentials excluded)
{
  "systemName": "MyABAPSystem",
  "systemType": "ABAP On Premise",
  "url": "https://myabap.example.com",
  "client": "001",
  "username": "john.doe",
  "authenticationType": "Basic",
  "metadata": {
    "exportedAt": "2025-10-15T12:34:56Z",
    "version": "1.0"
  }
}
```

**STEP**: 10 — Import an ABAP On Premise SAP System (UI flow + overwrite behavior)

**DESCRIPTION**: Steps to import a previously exported ABAP On Premise JSON file into VS Code. Notes on credential re-entry, overwrite confirmation, and environment limitations.

**LANGUAGE**: Plain Text

**CODE**:
```text
1. In VS Code, open SAP Fiori activity -> SAP Systems panel.
2. Click "Import SAP System" (icon next to SAP Systems title bar).
3. Select the exported JSON file on disk.
4. After import, the system entry appears but requires credentials:
   - Provide credentials for the system (username/password) in the details panel.
5. Click "Test Connection" to verify connectivity.
6. Click "Save" to persist the imported system.

Notes:
- If a local saved system with the same name exists, a confirmation prompt will request overwrite consent.
- Export/import only works between VS Code environments. You cannot import/export between VS Code and SAP Business Application Studio.
```

**STEP**: 11 — Recommended Validation Checks (automation-friendly assertions)

**DESCRIPTION**: Suggested checks and messages to assert in automated tests or scripts after performing operations (create/edit/test/delete/import/export).

**LANGUAGE**: Plain Text

**CODE**:
```text
Assertions after actions:
- After Test Connection: assert response.status == "connected" and message contains "connected successfully".
- After Save: assert user-visible message "System information saved".
- After Add: assert new item appears in systems panel with expected suffix:
    - ABAP On Premise: "<name> [username]"
    - BTP Service Key: "<name> (BTP)"
    - BTP Reentrance Ticket: "<name> (S4HC)"
- After Export: assert downloaded file contains system metadata and excludes "password" or "serviceKey.credentials.clientsecret".
- After Import: assert system detail requires credential entry and test connection succeeds after credentials are provided.
- On Test Connection result: assert booleans supportsODataV2/supportsODataV4 are present for downstream tooling that filters OData services.
```
--------------------------------

**TITLE**: SAP Fiori Tools — Project Functions Index (Machine-Readable)

**INTRODUCTION**: Machine-friendly index of SAP Fiori tools "Project Functions" documentation pages. Use this manifest to locate, load, or reference each topical Markdown file when generating code, building documentation UIs, or creating retrieval-augmented-generation (RAG) prompts. Each step contains a short, actionable description and a JSON metadata snippet for direct ingestion.

**TAGS**: fiori-tools, sap, documentation, manifest, index, rag, metadata

**STEP**: 1 — Information Panel

**DESCRIPTION**: Reference the "Information Panel" documentation file. Use this entry to load or summarize the content for code generators, UI documentation, or help tooltips.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "id": "information-panel",
  "title": "Information Panel",
  "filepath": "information-panel-a9a6c4b.md",
  "actionableUse": [
    "open-markdown",
    "extract-summary",
    "embed-in-help"
  ]
}
```

**STEP**: 2 — Application Information

**DESCRIPTION**: Reference the "Application Information" documentation file. Intended for tasks that need application metadata, README generation, or automated documentation updates.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "id": "application-information",
  "title": "Application Information",
  "filepath": "application-information-c3e0989.md",
  "actionableUse": [
    "open-markdown",
    "extract-metadata",
    "generate-summary"
  ]
}
```

**STEP**: 3 — Reuse Library Support

**DESCRIPTION**: Reference the "Reuse Library Support" documentation file. Use when locating guidance on reusing components, libraries, or templates.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "id": "reuse-library-support",
  "title": "Reuse Library Support",
  "filepath": "reuse-library-support-6e99fbb.md",
  "actionableUse": [
    "open-markdown",
    "index-snippets",
    "recommend-snippets"
  ]
}
```

**STEP**: 4 — Data Editor

**DESCRIPTION**: Reference the "Data Editor" documentation file. Use to retrieve instructions for editing local data, sample payloads, or test scenarios.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "id": "data-editor",
  "title": "Data Editor",
  "filepath": "data-editor-18e43b5.md",
  "actionableUse": [
    "open-markdown",
    "extract-examples",
    "embed-sample-data"
  ]
}
```

**STEP**: 5 — Deleting an Application in CAP Project

**DESCRIPTION**: Reference the "Deleting an Application in CAP Project" documentation file. Use for automation that needs to remove app artifacts or to produce step-by-step delete procedures.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "id": "deleting-an-application-in-cap-project",
  "title": "Deleting an Application in CAP Project",
  "filepath": "deleting-an-application-in-cap-project-709f838.md",
  "actionableUse": [
    "open-markdown",
    "extract-procedure",
    "generate-checklist"
  ]
}
```

**STEP**: 6 — Environment Check

**DESCRIPTION**: Reference the "Environment Check" documentation file. Use for validating prerequisites, environment setup scripts, or integration checks.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "id": "environment-check",
  "title": "Environment Check",
  "filepath": "environment-check-75390cf.md",
  "actionableUse": [
    "open-markdown",
    "extract-commands",
    "validate-prereqs"
  ]
}
```

**STEP**: 7 — Managing System Connection

**DESCRIPTION**: Reference the "Managing System Connection" documentation file. Use this entry to fetch instructions for configuring backend/system connections.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "id": "managing-system-connection",
  "title": "Managing System Connection",
  "filepath": "managing-system-connection-78a82b6.md",
  "actionableUse": [
    "open-markdown",
    "extract-configuration",
    "auto-generate-steps"
  ]
}
```

**STEP**: 8 — Managing Service and Annotations Files

**DESCRIPTION**: Reference the "Managing Service and Annotations Files" documentation file. Use to obtain details about service binding, annotations placement, or file management.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "id": "managing-service-and-annotations-files",
  "title": "Managing Service and Annotations Files",
  "filepath": "managing-service-and-annotations-files-8182ff3.md",
  "actionableUse": [
    "open-markdown",
    "extract-examples",
    "map-file-locations"
  ]
}
```

**STEP**: 9 — Project Validation

**DESCRIPTION**: Reference the "Project Validation" documentation file. Use to run or summarize validation checks and to generate validation reports.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "id": "project-validation",
  "title": "Project Validation",
  "filepath": "project-validation-6f3c737.md",
  "actionableUse": [
    "open-markdown",
    "extract-validation-rules",
    "generate-report"
  ]
}
```

**STEP**: 10 — Viewing Service Metadata

**DESCRIPTION**: Reference the "Viewing Service Metadata" documentation file. Use this to obtain steps for inspecting service metadata and sample metadata payloads.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "id": "viewing-service-metadata",
  "title": "Viewing Service Metadata",
  "filepath": "viewing-service-metadata-e369c2c.md",
  "actionableUse": [
    "open-markdown",
    "extract-metadata-examples",
    "embed-metadata-viewer"
  ]
}
```

**STEP**: 11 — UI Service Generation

**DESCRIPTION**: Reference the "UI Service Generation" documentation file. Use to generate or scaffold UI services, or to extract generator options and commands.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "id": "ui-service-generation",
  "title": "UI Service Generation",
  "filepath": "ui-service-generation-1a7aad3.md",
  "actionableUse": [
    "open-markdown",
    "extract-generator-commands",
    "scaffold-ui-service"
  ]
}
```
--------------------------------

**TITLE**: Fiori Project Validation — VS Code Extension Implementation

**INTRODUCTION**: Implement a VS Code command "Fiori: Validate Project" that validates a generated SAP Fiori project in workspace folders. The validation runs four steps (project files, annotations, UX specification, eslint) and outputs a Markdown report and VS Code Problems diagnostics. Use this reference to implement programmatic checks and integrate existing modules: @sap/ux-specification and eslint (and the XML annotation validation modules used by the XML annotation language server).

**TAGS**: fiori-tools, vscode-extension, validation, sap, ux-specification, eslint, annotations, ui5

**STEP**: 1 — Register command and prompt project selection

**DESCRIPTION**: Register the command visible in the Command Palette ("Fiori: Validate Project"). When invoked, scan workspace folders for candidate Fiori projects (presence of package.json, manifest.json or ui5.yaml), present a QuickPick to choose one, and call the main validation runner.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
// src/extension.ts
import * as vscode from 'vscode';
import * as path from 'path';
import { runValidationForProject } from './validationRunner';

export function activate(context: vscode.ExtensionContext) {
  const disposable = vscode.commands.registerCommand('fiori-tools.validateProject', async () => {
    const workspaceFolders = vscode.workspace.workspaceFolders ?? [];
    // Find candidate projects: workspace folder that contains package.json OR manifest.json OR ui5.yaml
    const candidates = await Promise.all(workspaceFolders.map(async folder => {
      const files = await vscode.workspace.fs.readDirectory(folder.uri);
      const names = files.map(([name]) => name);
      const hasMarker = names.includes('package.json') || names.includes('manifest.json') || names.includes('ui5.yaml');
      return hasMarker ? folder : undefined;
    }));
    const projects = candidates.filter(Boolean) as vscode.WorkspaceFolder[];
    if (projects.length === 0) {
      vscode.window.showInformationMessage('No Fiori project candidates found in workspace.');
      return;
    }

    const pickItems = projects.map(p => ({ label: p.name, description: p.uri.fsPath, folder: p }));
    const selection = await vscode.window.showQuickPick(pickItems, { placeHolder: 'Select a project to validate' });
    if (!selection) { return; }

    await runValidationForProject(selection.folder);
  });

  context.subscriptions.push(disposable);
}

export function deactivate() {}
```

**STEP**: 2 — Project step: check mandatory files and required fields

**DESCRIPTION**: Verify existence of package.json, manifest.json, ui5.yaml (if present) and validate mandatory fields in each file. Example mandatory fields: package.json { name, version }, manifest.json { sap.app/id, sap.app/applicationVersion/version }, ui5.yaml { framework: name/version }. Produce structured findings (severity, file path, message) for the report and VS Code diagnostics.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
// src/steps/projectStep.ts
import * as vscode from 'vscode';
import * as path from 'path';
import * as fs from 'fs/promises';
import * as yaml from 'js-yaml';

export interface ValidationIssue {
  file: string;
  message: string;
  severity: 'error' | 'warning' | 'info';
  range?: vscode.Range;
}

export async function validateProjectFiles(folder: vscode.WorkspaceFolder): Promise<ValidationIssue[]> {
  const issues: ValidationIssue[] = [];
  const root = folder.uri.fsPath;

  async function readJsonSafe(p: string) {
    try { return JSON.parse(await fs.readFile(p, 'utf8')); } catch (e) { return null; }
  }

  // package.json
  const packageJsonPath = path.join(root, 'package.json');
  try {
    const pkg = await readJsonSafe(packageJsonPath);
    if (!pkg) {
      issues.push({ file: packageJsonPath, message: 'package.json missing or invalid JSON', severity: 'error' });
    } else {
      if (!pkg.name) issues.push({ file: packageJsonPath, message: 'package.json: missing "name" field', severity: 'error' });
      if (!pkg.version) issues.push({ file: packageJsonPath, message: 'package.json: missing "version" field', severity: 'warning' });
    }
  } catch {
    issues.push({ file: packageJsonPath, message: 'package.json cannot be read', severity: 'error' });
  }

  // manifest.json
  const manifestPath = path.join(root, 'webapp', 'manifest.json');
  const manifest = await readJsonSafe(manifestPath);
  if (!manifest) {
    issues.push({ file: manifestPath, message: 'manifest.json missing or invalid JSON', severity: 'error' });
  } else {
    if (!manifest['sap.app'] || !manifest['sap.app'].id) {
      issues.push({ file: manifestPath, message: 'manifest.json: sap.app.id is missing', severity: 'error' });
    }
    if (!manifest['sap.app'] || !manifest['sap.app'].applicationVersion || !manifest['sap.app'].applicationVersion.version) {
      issues.push({ file: manifestPath, message: 'manifest.json: sap.app.applicationVersion.version missing', severity: 'warning' });
    }
  }

  // ui5.yaml (optional)
  const ui5yamlPath = path.join(root, 'ui5.yaml');
  try {
    const yamlContent = await fs.readFile(ui5yamlPath, 'utf8');
    const parsed = yaml.load(yamlContent) as any;
    if (!parsed) {
      issues.push({ file: ui5yamlPath, message: 'ui5.yaml is empty or invalid', severity: 'warning' });
    } else {
      if (!parsed.framework || !parsed.framework.name) {
        issues.push({ file: ui5yamlPath, message: 'ui5.yaml: framework.name missing', severity: 'warning' });
      }
    }
  } catch {
    // ui5.yaml may not exist; do not report as error
  }

  return issues;
}
```

**STEP**: 3 — Annotation step: validate annotation XML files

**DESCRIPTION**: Locate annotation files (commonly under webapp/annotations or *.annotation.xml) and validate them using the same modules as the XML annotation language server extension. Convert returned diagnostics to ValidationIssue format. If you cannot import the language server internals directly, call a dedicated validator function or reuse the XML language server as a library.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
// src/steps/annotationStep.ts
import * as vscode from 'vscode';
import * as path from 'path';
import * as fs from 'fs/promises';
import * as glob from 'glob';

import { ValidationIssue } from './projectStep';

// NOTE: The XML annotation language server provides validators internally.
// If available, import and call its validation API. Here we provide a wrapper
// that reads annotation files and calls a hypothetical validateAnnotationXml function.
// Replace validateAnnotationXml with the actual module API from the XML annotation language server.

async function validateAnnotationXml(content: string, filePath: string): Promise<ValidationIssue[]> {
  // Placeholder: integrate with the XML annotation language server module
  // Example expected return: list of diagnostics {file, message, severity}
  // For now, return empty result.
  return [];
}

export async function validateAnnotations(folder: vscode.WorkspaceFolder): Promise<ValidationIssue[]> {
  const issues: ValidationIssue[] = [];
  const root = folder.uri.fsPath;
  const pattern = path.join(root, 'webapp', '**', '*.annotation.xml');

  const files = await new Promise<string[]>((resolve, reject) => {
    glob(pattern, { nodir: true }, (err, matches) => err ? reject(err) : resolve(matches));
  });

  for (const f of files) {
    try {
      const content = await fs.readFile(f, 'utf8');
      const result = await validateAnnotationXml(content, f);
      issues.push(...result);
    } catch (e) {
      issues.push({ file: f, message: `Failed to read/validate annotation file: ${(e as Error).message}`, severity: 'error' });
    }
  }
  return issues;
}
```

**STEP**: 4 — Specification step: validate manifest and "changes" folder using @sap/ux-specification

**DESCRIPTION**: Use @sap/ux-specification to import the project and let it report invalid configuration errors. Typically this module can import a project and returns structured errors for manifest.json and changes files. Convert those into ValidationIssue entries.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
// src/steps/specificationStep.ts
import * as path from 'path';
import * as fs from 'fs/promises';
import { ValidationIssue } from './projectStep';

// Example: this demonstrates calling @sap/ux-specification APIs.
// Replace the exact API calls with the current @sap/ux-specification methods
// available in your installed version.

export async function validateSpecification(projectFolderPath: string): Promise<ValidationIssue[]> {
  const issues: ValidationIssue[] = [];

  try {
    // The @sap/ux-specification module is used to import and validate a project.
    // Example pseudo-call; adapt to the real function names in your installed version:
    //
    // import { importProject } from '@sap/ux-specification';
    // const specResult = await importProject(projectFolderPath);
    //
    // specResult might include errors/warnings pointing to invalid configuration.
    //
    // For demonstration, we will detect invalid files in the "changes" folder and simple manifest checks.

    const manifestPath = path.join(projectFolderPath, 'webapp', 'manifest.json');
    const manifestRaw = await fs.readFile(manifestPath, 'utf8').then(JSON.parse).catch(() => null);
    if (!manifestRaw) {
      issues.push({ file: manifestPath, message: 'manifest.json missing or invalid', severity: 'error' });
    } else {
      // Example check that is typically covered by UX specification
      if (!manifestRaw['sap.ui5']) {
        issues.push({ file: manifestPath, message: 'manifest.json: sap.ui5 is missing', severity: 'error' });
      }
    }

    // Validate change files under webapp/changes (if present)
    const changesFolder = path.join(projectFolderPath, 'webapp', 'changes');
    // Simple existence check; the real @sap/ux-specification will validate contents.
    try {
      await fs.access(changesFolder);
      // Optionally call @sap/ux-specification change file validator here
    } catch {
      // no changes folder: ok
    }

    // If using @sap/ux-specification, merge its messages into issues.
  } catch (e) {
    issues.push({ file: projectFolderPath, message: `Specification validation failed: ${(e as Error).message}`, severity: 'error' });
  }

  return issues;
}
```

**STEP**: 5 — ESLint step: detect installation and run lint with project's config and eslint-plugin-fiori-custom

**DESCRIPTION**: If eslint is listed as a dependency/devDependency in package.json, programmatically run ESLint using the ESLint Node API so that it respects the project's ESLint config and plugins (including eslint-plugin-fiori-custom). Convert ESLint results into ValidationIssue entries.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
// src/steps/eslintStep.ts
import * as path from 'path';
import { ESLint } from 'eslint';
import { ValidationIssue } from './projectStep';
import * as fs from 'fs/promises';

export async function runEslintIfConfigured(projectFolderPath: string): Promise<ValidationIssue[]> {
  const issues: ValidationIssue[] = [];
  const pkgPath = path.join(projectFolderPath, 'package.json');
  let pkg: any = null;
  try {
    pkg = JSON.parse(await fs.readFile(pkgPath, 'utf8'));
  } catch {
    return issues; // no package.json: skip eslint
  }

  const deps = { ...(pkg.dependencies || {}), ...(pkg.devDependencies || {}) };
  if (!deps['eslint']) {
    // eslint not installed in project - skip
    return issues;
  }

  // Use ESLint Node API. This will automatically read the project's eslint config and plugins.
  try {
    const eslint = new ESLint({ cwd: projectFolderPath });
    // Lint typical JS/TS and UI5 project paths
    const results = await eslint.lintFiles([path.join(projectFolderPath, 'webapp', '**', '*.{js,ts,jsx,tsx}')]);
    for (const result of results) {
      for (const msg of result.messages) {
        const severity = msg.severity === 2 ? 'error' : (msg.severity === 1 ? 'warning' : 'info');
        issues.push({
          file: result.filePath,
          message: `${msg.message} ${msg.ruleId ? `(${msg.ruleId})` : ''}`,
          severity: severity as ValidationIssue['severity']
        });
      }
    }
    // Optionally apply fixes: const fixed = await ESLint.outputFixes(results)
  } catch (e) {
    issues.push({ file: projectFolderPath, message: `ESLint execution failed: ${(e as Error).message}`, severity: 'error' });
  }

  return issues;
}
```

**STEP**: 6 — Runner: orchestrate steps, create Markdown report, and publish VS Code diagnostics

**DESCRIPTION**: Combine the step functions. Aggregate issues into a Markdown report file (e.g., validation-report-<projectName>.md) saved in the workspace root and open it in the editor. Convert issues to vscode.Diagnostic and set them in a DiagnosticCollection so they appear in the Problems pane.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
// src/validationRunner.ts
import * as vscode from 'vscode';
import * as path from 'path';
import * as fs from 'fs/promises';
import { validateProjectFiles } from './steps/projectStep';
import { validateAnnotations } from './steps/annotationStep';
import { validateSpecification } from './steps/specificationStep';
import { runEslintIfConfigured } from './steps/eslintStep';

export async function runValidationForProject(folder: vscode.WorkspaceFolder) {
  const projectPath = folder.uri.fsPath;
  const projectName = folder.name;

  const projectIssues = await validateProjectFiles(folder);
  const annotationIssues = await validateAnnotations(folder);
  const specIssues = await validateSpecification(projectPath);
  const eslintIssues = await runEslintIfConfigured(projectPath);

  const allIssues = [...projectIssues, ...annotationIssues, ...specIssues, ...eslintIssues];

  // Create Markdown report
  const reportLines: string[] = [];
  reportLines.push(`# Fiori Validation Report — ${projectName}`);
  reportLines.push('');
  reportLines.push(`Validated on: ${new Date().toISOString()}`);
  reportLines.push('');
  for (const issue of allIssues) {
    reportLines.push(`- **${issue.severity.toUpperCase()}**: ${issue.file} — ${issue.message}`);
  }
  if (allIssues.length === 0) {
    reportLines.push('No issues found.');
  }

  const reportName = `fiori-validation-report-${projectName.replace(/\s+/g, '_')}.md`;
  const workspaceRoot = vscode.workspace.workspaceFolders?.[0].uri.fsPath ?? projectPath;
  const reportPath = path.join(workspaceRoot, reportName);

  await fs.writeFile(reportPath, reportLines.join('\n'), 'utf8');

  // Open report in editor
  const doc = await vscode.workspace.openTextDocument(vscode.Uri.file(reportPath));
  await vscode.window.showTextDocument(doc);

  // Publish diagnostics to Problems pane
  const collection = vscode.languages.createDiagnosticCollection('fiori-validation');
  collection.clear();

  const diagnosticsMap = new Map<string, vscode.Diagnostic[]>();
  for (const issue of allIssues) {
    const fileUri = vscode.Uri.file(issue.file);
    const range = issue.range ?? new vscode.Range(new vscode.Position(0, 0), new vscode.Position(0, 1));
    const severity = issue.severity === 'error' ? vscode.DiagnosticSeverity.Error :
                     issue.severity === 'warning' ? vscode.DiagnosticSeverity.Warning :
                     vscode.DiagnosticSeverity.Information;
    const diag = new vscode.Diagnostic(range, issue.message, severity);
    const key = fileUri.toString();
    const arr = diagnosticsMap.get(key) ?? [];
    arr.push(diag);
    diagnosticsMap.set(key, arr);
  }

  diagnosticsMap.forEach((diags, file) => {
    collection.set(vscode.Uri.parse(file), diags);
  });

  vscode.window.showInformationMessage(`Fiori project validation finished for ${projectName}. Report: ${reportName}`);
}
```

**STEP**: 7 — Notes, dependencies and configuration

**DESCRIPTION**: Required packages and integration notes for extension package.json. Ensure you add runtime dependencies and declare the command in contributes. Preserve the original behavior: uses @sap/ux-specification to import project and the eslint step relies on eslint-plugin-fiori-custom being configured in the project (enable eslint support via generator Advanced Options or project configuration).

**LANGUAGE**: JSON

**CODE**:
```json
// package.json (snippet for the VS Code extension)
{
  "name": "fiori-validation-extension",
  "displayName": "Fiori Project Validation",
  "engines": { "vscode": "^1.60.0" },
  "activationEvents": ["onCommand:fiori-tools.validateProject"],
  "main": "./out/extension.js",
  "contributes": {
    "commands": [
      {
        "command": "fiori-tools.validateProject",
        "title": "Fiori: Validate Project"
      }
    ]
  },
  "dependencies": {
    "js-yaml": "^4.1.0",
    "glob": "^7.2.0",
    "eslint": "^8.0.0",
    "@sap/ux-specification": "^1.0.0"
  },
  "devDependencies": {
    "@types/vscode": "^1.60.0",
    "typescript": "^4.4.0"
  }
}
```

Notes:
- File paths referenced in checks: package.json, webapp/manifest.json, ui5.yaml, webapp/changes, webapp/**/*.annotation.xml
- Use @sap/ux-specification to import the project and produce UX specification errors.
- ESLint step will honor project's ESLint configuration and plugin eslint-plugin-fiori-custom if installed and configured in the project.
- Annotation validation should reuse the XML annotation language server's validator modules where available for authoritative validation results.
--------------------------------

**TITLE**: Reuse Library Support — create, reference, and deploy SAPUI5 reusable libraries with SAP Fiori tools

**INTRODUCTION**: Practical, code-focused instructions to create a reusable SAPUI5 library in your workspace, add a reference to that library from an SAP Fiori application (so ui5.yaml, ui5-local.yaml and manifest.json are updated), and prepare the reuse library project for deployment (ABAP). Use the Command Palette commands from SAP Fiori tools as described and update the shown manifest / YAML templates with your project-specific names and relative paths.

**TAGS**: fiori-tools, reuse-library, sapui5, ui5, ui5.yaml, ui5-local.yaml, manifest.json, ABAP, deployment

**STEP**: 1 — Create a reusable library using the Fiori Reusable Library Generator

**DESCRIPTION**: Use the SAP Fiori tools generator to scaffold a new reusable SAPUI5 library project in your workspace. Provide module name, namespace, and minimum SAPUI5 version. Optionally choose OData service scaffolding.

**LANGUAGE**: CLI / Editor command

**CODE**:
```text
# In VS Code or Business Application Studio:
# Open Command Palette: Ctrl/Cmd + Shift + P
# Run command:
Fiori: Open Reusable Library Generator

# Generator inputs (interactive):
- Library module name: <MODULE_NAME>         # e.g., mylib
- Namespace: <NAMESPACE>                    # e.g., com.example
- Minimum SAPUI5 version: <SAPUI5_VERSION>  # e.g., 1.96.0
- Library Folder Path: <folder/in/workspace> # e.g., libraries/
- Include OData service: Yes/No

# Resulting folder (example):
<workspace>/
  libraries/
    com.example.mylib/    <-- generated library folder (namespace + module)
      src/
      library.js
      manifest.json
      package.json
      ui5.yaml
```

**STEP**: 2 — Add a reference to reuse the library in an SAP Fiori application

**DESCRIPTION**: Use the Fiori tools command to add references from your SAP Fiori app to one or more reusable libraries that exist in the same workspace. This updates ui5.yaml, ui5-local.yaml and the application manifest.json. After running the command, verify and, if necessary, adjust the referenced paths and names in the files shown below.

**LANGUAGE**: CLI / Editor command and JSON/YAML

**CODE**:
```text
# In VS Code or Business Application Studio:
# Open Command Palette: Ctrl/Cmd + Shift + P
# Run command:
Fiori: Add Reference to SAP Fiori Reusable Libraries

# Interactive selections:
- Project Folder Path: <select your SAP Fiori application project>
- Reusable Library Source: workspace
- Select one or more reusable libraries/components from the list
- Click Finish

# Files updated (examples shown below — replace placeholders):
# 1) manifest.json -> add reusable library as dependency
```

```json
// webapp/manifest.json (fragment)
// Add your reusable library under sap.ui5.dependencies.libs
{
  "sap.ui5": {
    "dependencies": {
      "minUI5Version": "<SAPUI5_VERSION>",
      "libs": {
        "<NAMESPACE>.<LIBRARY_NAME>": {}
      }
    }
    // other sap.ui5 entries ...
  }
}
```

```yaml
# 2) ui5.yaml (fragment)
# Typical fields to be present or augmented by the reference command.
specVersion: '2.1'           # may differ based on your project
type: application
metadata:
  name: <APP_NAME>
resources:
  configuration:
    paths:
      - webapp
# Add / ensure a dependency entry is present for the reusable library:
dependencies:
  - name: <NAMESPACE>.<LIBRARY_NAME>
    # Optional fields depending on generated entry:
    # dependencyType: library
    # path: <relative-path-to-library>   # e.g., ../libraries/com.example.mylib
```

```yaml
# 3) ui5-local.yaml (fragment)
# The Fiori tools local mapping file; shows where to find the workspace library.
# Please replace placeholders with actual relative paths produced by the tool.
specVersion: '1.0'
libraries:
  "<NAMESPACE>.<LIBRARY_NAME>": "<RELATIVE_PATH_TO_LIBRARY>"
# Example:
# "com.example.mylib": "../libraries/com.example.mylib"
```

**STEP**: 3 — Verify local reference and test locally

**DESCRIPTION**: After the command completes, open your application and verify:
- webapp/manifest.json contains the library under sap.ui5.dependencies.libs
- ui5.yaml contains a dependency entry for the library
- ui5-local.yaml maps the library name to the local workspace path

Run the local dev server to confirm the library loads correctly.

**LANGUAGE**: CLI

**CODE**:
```bash
# From your application project folder:
# Install dependencies if needed
npm install

# Start the local UI5 server (example using ui5-server)
npx ui5 serve --config=ui5.yaml

# Open the app in browser:
# http://localhost:8080/index.html (adjust path based on your project)
```

**STEP**: 4 — Prepare and deploy the reuse library project (migration + ABAP deployment)

**DESCRIPTION**: Run the migration flow provided by SAP Fiori tools for reuse library projects, install dependencies, generate ABAP deployment configuration, and then deploy to your ABAP environment.

**LANGUAGE**: CLI / Editor command and references

**CODE**:
```text
# 1) Add the reuse library project to your workspace (if not already present).
# 2) When prompted by the migration pop-up, click "Start Migration".
# 3) In the migration UI:
   - Select the project(s) to migrate
   - Click "Start Migration"
# 4) Wait for dependency installation to complete.

# 5) Generate the deployment configuration for ABAP:
# Use the Fiori tools command or follow:
# Fiori tools -> Generate Deployment Configuration ABAP
# (See project docs: ../Deploying-an-Application/generate-deployment-configuration-abap-c06b9cb.md)

# 6) Deploy the project to ABAP:
# Use the Fiori tools ABAP deployment flow
# (See project docs: ../Deploying-an-Application/deployment-of-application-607014e.md#loio607014e278d941fda4440f92f4a324a6__abap)
```

**STEP**: 5 — Troubleshooting and manual edits

**DESCRIPTION**: If the automated command does not produce exactly the metadata you expect, manually edit the files above:
- manifest.json: ensure "sap.ui5.dependencies.libs" contains the library name
- ui5.yaml: ensure the dependency entry includes the library name and correct relative path
- ui5-local.yaml: ensure the mapping points to the library folder in your workspace

Use placeholders below as templates when editing manually.

**LANGUAGE**: JSON/YAML

**CODE**:
```json
// manifest.json template (replace placeholders)
{
  "sap.app": {
    "id": "<APP_ID>",
    "applicationVersion": { "version": "1.0.0" }
  },
  "sap.ui5": {
    "dependencies": {
      "minUI5Version": "<SAPUI5_VERSION>",
      "libs": {
        "<NAMESPACE>.<LIBRARY_NAME>": {}
      }
    }
  }
}
```

```yaml
# ui5.yaml template (replace placeholders)
specVersion: '2.1'
type: application
metadata:
  name: <APP_NAME>
resources:
  configuration:
    paths:
      - webapp
dependencies:
  - name: <NAMESPACE>.<LIBRARY_NAME>
    path: <RELATIVE_PATH_TO_LIBRARY>
```

```yaml
# ui5-local.yaml template (replace placeholders)
specVersion: '1.0'
libraries:
  "<NAMESPACE>.<LIBRARY_NAME>": "<RELATIVE_PATH_TO_LIBRARY>"
```


--------------------------------

**TITLE**: Generate a UI Service for an SAP Fiori Project (Fiori: Generate UI Service)

**INTRODUCTION**: Step-by-step instructions for using the "Fiori: Generate UI Service" command in Visual Studio Code or SAP Business Application Studio to generate a UI service from a Business Object Interface (BOI) or ABAP Core Data Service (CDS). Includes required selections (system/destination, object, package, transport) and optional flags (Draft Enabled, create Fiori application).

**TAGS**: fiori-tools, ui-service, sap, abap, cds, business-object, generator, vscode, business-application-studio

**STEP**: 1 — Launch the UI Service Generator

**DESCRIPTION**: Open the Command Palette and run the UI service generator command.

**LANGUAGE**: text

**CODE**:
```text
Command Palette: Fiori: Generate UI Service
Keyboard shortcut: CMD/CTRL + Shift + P  → type "Fiori: Generate UI Service"
```

**STEP**: 2 — Select IDE-specific connection

**DESCRIPTION**: Choose the connection target according to your IDE:
- Visual Studio Code: select a saved SAP system (the extension reads your saved SAP systems).
- SAP Business Application Studio: select a destination (the destination configured in BAS).

**LANGUAGE**: text

**CODE**:
```text
VS Code: Select a saved SAP system from the list
BAS: Select a destination configured in your workspace
```

**STEP**: 3 — Choose service source type

**DESCRIPTION**: Pick the type of service to generate from the two supported sources:
- Business Object Interface (BOI)
- ABAP Core Data Service (CDS)

**LANGUAGE**: text

**CODE**:
```text
Select: "Business Object Interface" OR "ABAP Core Data Service"
```

**STEP**: 4 — Select the business object or CDS

**DESCRIPTION**: From the dropdown list presented, select the specific business object interface or CDS entity you want to generate a UI service for.

**LANGUAGE**: text

**CODE**:
```text
Select object: <choose object/entry from dropdown>
```

**STEP**: 5 — Confirm and proceed

**DESCRIPTION**: Click Next to proceed to deployment options after selecting the object.

**LANGUAGE**: text

**CODE**:
```text
Action: Click "Next"
```

**STEP**: 6 — Choose package and transport request

**DESCRIPTION**: On the packaging screen select:
- Package: the ABAP package to store the generated service artifacts.
- Transport Request: the transport request to use for changes.

**LANGUAGE**: text

**CODE**:
```text
Package: <select target ABAP package>
Transport Request: <select transport request>
```

**STEP**: 7 — (Optional) Enable Drafts

**DESCRIPTION**: If the selected business object supports drafts, you will be prompted with the "Draft Enabled" option. Select "Yes" to generate a draft-enabled UI service.

**LANGUAGE**: text

**CODE**:
```text
Draft Enabled: Yes/No
Note: This prompt only appears if the selected object supports drafts.
```

**STEP**: 8 — (Optional) Create SAP Fiori application with the new service

**DESCRIPTION**: Choose whether to have the SAP Fiori Generator automatically create a Fiori application that uses the newly generated service. Select "Yes" to automatically launch the SAP Fiori Generator and scaffold the application.

**LANGUAGE**: text

**CODE**:
```text
Do you want to create an SAP Fiori application with the newly generated service? Yes/No
If "Yes" → the SAP Fiori Generator launches automatically and uses the new service.
```

**STEP**: 9 — Finish the generation

**DESCRIPTION**: Confirm all selections and click Finish. The UI service generation process will start. Wait until completion.

**LANGUAGE**: text

**CODE**:
```text
Action: Click "Finish"
Behavior: Generation starts (may take some time)
```

**STEP**: 10 — Results and expected outcome

**DESCRIPTION**: After completion:
- The UI service is generated and stored in the selected package/transport.
- If you chose to create a Fiori application, the SAP Fiori Generator is launched and the generated service is applied to the scaffolded application.

**LANGUAGE**: text

**CODE**:
```text
Result:
- UI service created in the selected package/transport (ABAP backend)
- If "Create Fiori app" = Yes → SAP Fiori Generator launches and uses the generated service
```
--------------------------------

**TITLE**: Viewing Service Metadata with SAP Fiori tools - Service Modeler

**INTRODUCTION**: Quick reference for launching and using the SAP Fiori tools Service Modeler in VS Code to visualize OData V2/V4 (.xml/.edmx) and CAP CDS service metadata, view annotations, manage services, and search/filter entities and annotations.

**TAGS**: fiori-tools, service-modeler, sap-fiori, odata, metadata, annotations, v2, v4, cds, vscode, extension

**STEP**: 1 — Launch Service Modeler via Command Palette

**DESCRIPTION**: Open the Service Modeler from the VS Code Command Palette and select the SAP Fiori elements project and service to visualize. Use this to browse entities, properties, complex types, and entity containers.

**LANGUAGE**: Text

**CODE**:
```Text
Command Palette shortcut: [CMD/CTRL] + [Shift] + [P]
Command to run: SAP Fiori tools: Service Modeler: Open Service Modeler
Note: If the workspace project contains multiple services, select the specific service to visualize.
```

**STEP**: 2 — Launch Service Modeler via Folder Context Menu

**DESCRIPTION**: If you have an SAP Fiori elements project in the workspace, open the folder context menu and run the Override Annotations action to open the Service Modeler scoped to that project.

**LANGUAGE**: Text

**CODE**:
```Text
Right-click any folder in the SAP Fiori elements project -> Select "Override Annotations"
(This opens Service Modeler for the selected project/folder)
```

**STEP**: 3 — Launch Service Modeler from metadata.xml editor

**DESCRIPTION**: When a metadata file (e.g., metadata.xml, *.edmx) is open in the editor, use the Annotations icon in the editor toolbar to open the Service Modeler for that metadata file.

**LANGUAGE**: HTML

**CODE**:
```HTML
<!-- Ensure SAP icon font is available for the editor icon -->
<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>

<!-- Example of the editor Annotations icon (class used by the extension) -->
<span class="SAP-icons-V5"></span> <!-- Annotations icon -->
```

**STEP**: 4 — Supported service types

**DESCRIPTION**: The Service Modeler supports:
- OData V2/V4 metadata files (.xml / .edmx)
- CAP CDS services (local project-based CDS services)

Use the Service Modeler to browse entities, entity sets, properties, complex types, entity containers, and to view/manage annotation files tied to these metadata targets.

**LANGUAGE**: Text

**CODE**:
```Text
Supported metadata sources:
- OData V2 / V4 metadata files: *.xml, *.edmx
- CAP CDS services (local CDS artifacts in project)
```

**STEP**: 5 — Visualize an OData metadata fragment (example)

**DESCRIPTION**: Example minimal OData V4 metadata fragment to illustrate how entities, keys, and properties appear in the Service Modeler. Expand entity nodes to view properties; keys are displayed with the Key icon.

**LANGUAGE**: XML

**CODE**:
```XML
<!-- metadata.xml (minimal example) -->
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
  <edmx:DataServices>
    <Schema Namespace="MyService" xmlns="http://docs.oasis-open.org/odata/ns/edm">
      <EntityType Name="Product">
        <Key>
          <PropertyRef Name="ID"/>
        </Key>
        <Property Name="ID" Type="Edm.Int32"/>
        <Property Name="Name" Type="Edm.String"/>
        <Property Name="Category" Type="Edm.String"/>
      </EntityType>

      <ComplexType Name="Dimensions">
        <Property Name="Width" Type="Edm.Double"/>
        <Property Name="Height" Type="Edm.Double"/>
      </ComplexType>

      <EntityContainer Name="Container">
        <EntitySet Name="Products" EntityType="MyService.Product"/>
      </EntityContainer>
    </Schema>
  </edmx:DataServices>
</edmx:Edmx>
```

**STEP**: 6 — Example annotation file targeting an entity/property

**DESCRIPTION**: Annotations associated with entities or properties appear with an Annotations icon in the Service Modeler. The side panel lists annotation files and the annotations that target the selected node.

**LANGUAGE**: XML

**CODE**:
```XML
<!-- annotations.xml (minimal example targeting Product/Name) -->
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
  <edmx:Reference Uri="http://docs.oasis-open.org/odata/annotation/vocabularies/Org.OData.Core.V1.xml"/>
  <edmx:DataServices>
    <Schema xmlns="http://docs.oasis-open.org/odata/ns/edm" Namespace="MyService.Annotations">
      <Annotations Target="MyService.Product/Name">
        <Annotation Term="Org.OData.Core.V1.Description" String="Product display name"/>
      </Annotations>
    </Schema>
  </edmx:DataServices>
</edmx:Edmx>
```

**STEP**: 7 — Toggle namespace visibility and interpret icons

**DESCRIPTION**: Use the Settings (gear) icon in the Service Modeler toolbar to show/hide namespaces in metadata names. Visual indicators:
- Key icon: property is a primary key of the entity or projection.
- Annotations icon (SAP-icons-V5: ): entity or property has annotations associated.

**LANGUAGE**: Text

**CODE**:
```Text
Service Modeler toolbar actions:
- Settings (gear): Toggle "Show Namespace"
- Filter by annotations: show only metadata targets that have annotation files
Icons:
- Key icon: primary key property
- Annotations icon (class SAP-icons-V5): annotation(s) exist for target
```

**STEP**: 8 — Search and filter entities, properties, and annotations

**DESCRIPTION**: Use the Service Modeler search field (toolbar) to filter the list. Behavior:
- Enter a phrase: filters entities/properties to matching names.
- If an entity matches, all its child properties are shown.
- If a search matches an annotation term, the annotation side panel and list are filtered to show matching targets.

**LANGUAGE**: Text

**CODE**:
```Text
Example search usage:
- Search term: Country
  - Matches entity named "Country" -> entity and its properties shown
  - Matches annotation text "Country" -> side panel shows annotation files/targets matching "Country"
```
--------------------------------

**TITLE**: Adapt the UI with the Adaptation Editor (Fiori Tools)

**INTRODUCTION**: Action-oriented guide for modifying SAPUI5 adaptation projects using the Adaptation Editor. Includes how to change the SAPUI5 preview version, open the editor, and perform UI changes (add/rename/remove/move/combine/split fields, groups, and sections). Preserve project file locations and key constraints.

**TAGS**: fiori-tools, adaptation-editor, SAPUI5, ui5.yaml, manifest.appdescr_variant, UI adaptation

STEP: Overview and editor components
DESCRIPTION: Quick reference of the Adaptation Editor UI, modes, and toolbar actions. Use this when writing automation or integration code that drives the editor or when producing documentation and test steps.
LANGUAGE: Text
CODE:
```text
- Editor layout: Outline pane (structure), Canvas (preview), Properties pane (control properties).
- Modes:
  - Navigation: browse & preview application.
  - Adaptation (Edit): select controls on canvas or outline to change properties or structure.
- Toolbar actions:
  - Switch Navigation / Adaptation modes.
  - Change device format: smartphone / tablet / desktop (switch saves changes to workspace).
  - Expand / collapse side panes.
- Quick actions: visible for List Report / Object Page floorplans; availability varies by floorplan and SAPUI5 version (see Quick Actions Availability Matrix).
- Context menu: available in Canvas and Outline for projects with SAPUI5 >= 1.84.
```

STEP: Configure SAPUI5 version used by the Adaptation Editor
DESCRIPTION: To preview the project using a different SAPUI5 runtime in the Adaptation Editor, change the version in ui5.yaml in the project root before launching the editor. Do not change unrelated settings.
LANGUAGE: YAML
CODE:
```yaml
# File: <project-root>/ui5.yaml
# Update the ui5.version to the desired SAPUI5 version to be used by the Adaptation Editor.
# Example:
ui5:
  version: "1.110.0"   # replace with the target SAPUI5 version
# Note: Only change the 'version' property. Modifying other ui5.yaml keys may break project behavior.
```

STEP: Open the Adaptation Editor
DESCRIPTION: Launch the Adaptation Editor from your workspace to edit the adaptation project.
LANGUAGE: Text
CODE:
```text
1. In your project workspace, expand the webapp folder.
2. Right-click manifest.appdescr_variant (path: <project-root>/webapp/manifest.appdescr_variant).
3. Choose: Open > Adaptation Editor
4. Editor launches and loads the application. Switch to Edit mode (click Edit in the editor header) to modify the UI.
```

STEP: Change control properties
DESCRIPTION: Select a UI element in the Canvas or Outline; modify properties in the Properties pane. Note not all properties are editable.
LANGUAGE: Text
CODE:
```text
- Select element on Canvas or in Outline.
- Edit configurable properties in the Properties pane.
- Some properties are read-only; the editor will not allow changes to non-configurable properties.
```

STEP: Add new fields
DESCRIPTION: Add fields from the available fields list into a group or form. Use search and sorting to find fields.
LANGUAGE: Text
CODE:
```text
1. Hover over or select a group/field and choose Add Field from the context menu (Canvas or Outline).
2. From the available fields dialog, search/filter or sort alphabetically.
3. Select fields to add and click OK to apply the adaptation.
```

STEP: Add a new group
DESCRIPTION: Insert a group in a form. Rename the default title as needed.
LANGUAGE: Text
CODE:
```text
1. Hover over or select an existing group or its containing form and choose Add Group from the context menu.
2. Default title: "New Group" — rename inline.
3. Press Enter or select another element to confirm.
```

STEP: Add sections to an Object Page
DESCRIPTION: Insert sections into an Object Page when available.
LANGUAGE: Text
CODE:
```text
1. Hover/select a section and choose Add Section from the context menu.
   - If all available sections are already used, Add Section will be disabled.
2. Search/select sections from the list, then click OK to apply.
```

STEP: Rename fields and groups
DESCRIPTION: Rename labels/titles inline via double-click or context menu.
LANGUAGE: Text
CODE:
```text
1. Double-click the field or group, or choose Rename Field / Rename Group from the context menu.
2. Enter new label/title.
3. Press Enter to confirm or ESC to cancel.
```

STEP: Drag and drop fields/groups/sections
DESCRIPTION: Move UI elements using drag-and-drop to new locations within highlighted drop targets.
LANGUAGE: Text
CODE:
```text
1. Drag the field/group/section.
2. Drop on a valid highlighted location (above/below highlighted items or into highlighted groups/sections).
3. The editor shows a dashed target area where the item will be placed.
```

STEP: Cut and paste fields/groups/sections
DESCRIPTION: Use Cut/Paste via context menu to move elements; press ESC to cancel paste mode.
LANGUAGE: Text
CODE:
```text
1. Hover/select a field or group and choose Cut from the context menu. The cut item is highlighted.
2. Valid destination groups/forms are highlighted with dashed boxes.
3. Hover/select the destination and choose Paste from the context menu to place the item.
4. Press ESC to remove highlighting and cancel paste mode.
```

STEP: Combine and split fields (up to 3 fields)
DESCRIPTION: Combine multiple fields onto a single line or split combined fields back apart.
LANGUAGE: Text
CODE:
```text
Combine:
1. Select a base field.
2. Hold CTRL and click up to two other fields to select (max 3 total).
3. From the context menu of one selected field, choose Combine.
Split:
1. Hover/select the combined fields.
2. Choose Split from the context menu.
```

STEP: Remove fields, groups, or sections
DESCRIPTION: Remove elements from the UI (not permanently deleted). Mandatory fields require confirmation and cannot be removed accidentally.
LANGUAGE: Text
CODE:
```text
1. Hover/select the element (field/group/section) to remove.
2. Choose Remove Field / Remove Group / Remove Section from the context menu or press DEL.
3. Removed items remain available in the list of available fields/sections and can be re-added.
4. Mandatory fields: deletion requires explicit confirmation and cannot be removed silently.
```

STEP: Context menu and SAPUI5 version constraint
DESCRIPTION: Behavior of context menu and quick actions depends on SAPUI5 version.
LANGUAGE: Text
CODE:
```text
- Context menu in the Outline pane is available for projects based on maintained SAPUI5 versions >= 1.84.
- Quick actions depend on page floorplan and SAPUI5 version (see Quick Actions Availability Matrix).
```

STEP: Embedding content (Key User scenario)
DESCRIPTION: Embed custom content the same way as key-user adaptation. Follow SAP Help procedure for embedding.
LANGUAGE: Text
CODE:
```text
Follow the SAP Help guide:
https://help.sap.com/viewer/0f8b49c4dfc94bc0bda25a19aa93d5b2/latest/en-US/bfdf15154f16419fb60ce598b21fe515.html
```

STEP: Preview in a separate browser tab
DESCRIPTION: Preview the adaptation project in a new browser tab for full runtime validation.
LANGUAGE: Text
CODE:
```text
See: Previewing an Adaptation Project
Reference: previewing-an-adaptation-project-64cc15b.md
```
--------------------------------

**TITLE**: Adapting SAPUI5 UIs using the Adaptation Editor (Fiori Tools)

**INTRODUCTION**: Short, actionable guide for automating or scripting tasks related to adapting SAPUI5 applications with the Adaptation Editor. Covers where the Adaptation Editor reads/writes configuration, how to switch the SAPUI5 version used for preview, how to open the editor from VS Code, key editor behaviors, and the common editing operations (add/rename/move/remove/combine fields/groups/sections). Use these snippets to build tooling or automation around Adaptation Editor workflows.

**TAGS**: fiori-tools, sapui5, adaptation-editor, ui5, vscode, manifest.appdescr_variant, ui5.yaml, embedding

**STEP**: 1 — Change SAPUI5 version used by the Adaptation Editor

**DESCRIPTION**: Edit the project's ui5.yaml in the project root to change the SAPUI5 version that the Adaptation Editor uses for preview. Only change the `ui5.version` property — other edits to ui5.yaml may break behavior.

**LANGUAGE**: YAML

**CODE**:
```YAML
# File: <project-root>/ui5.yaml
# Change only the version value below to preview the project in another SAPUI5 version.
ui5:
  # Supported example values: "1.84.0", "1.96.0", "1.110.0", etc.
  version: "1.96.0"
# WARNING: Changing other settings in this file may result in undesirable project behavior.
```

**STEP**: 2 — Launch the Adaptation Editor from Visual Studio Code

**DESCRIPTION**: Open the webapp/manifest.appdescr_variant file in your workspace and use the "Open Adaptation Editor" context menu. VS Code must remain running while the Adaptation Editor is open in the browser. You can also open the file in VS Code from the command line if needed.

**LANGUAGE**: Bash

**CODE**:
```bash
# From your project root, open the descriptor file in VS Code (then right-click -> Open Adaptation Editor)
code webapp/manifest.appdescr_variant
```

**STEP**: 3 — Where adaptation changes are stored (manifest.appdescr_variant)

**DESCRIPTION**: The Adaptation Editor reads and writes adaptation changes to webapp/manifest.appdescr_variant. Treat this file as the source of truth for adaptation metadata (flex/variant changes). Below is a minimal placeholder skeleton — actual structure is generated and updated by the editor.

**LANGUAGE**: JSON

**CODE**:
```json
// File: webapp/manifest.appdescr_variant
{
  "sap.app": {
    "id": "your.app.id",
    "title": "Your App Title"
  },
  "sap.ui5": {
    "appVariants": {
      "changes": [
        // Adaptation Editor writes change objects here (add/rename/move/remove/combine/split)
        // Example change object structure depends on SAPUI5 flexibility (sap.ui.fl) schema.
      ]
    }
  }
}
```

**STEP**: 4 — Modes, device preview, and saving behavior

**DESCRIPTION**: Use toolbar controls in the Adaptation Editor:
- Navigation mode: preview and navigate the app pages.
- Adaptation mode: select elements in the Canvas to edit them; selection syncs with the Outline pane.
- Device format: switch Canvas to smartphone, tablet, or desktop. Switching device formats saves changes to the workspace automatically.
- Save: click Save in the toolbar to persist changes to webapp/manifest.appdescr_variant.

**LANGUAGE**: Text

**CODE**:
```
- Navigation mode: preview the app.
- Adaptation mode: edit UI elements; selection in Canvas <-> Outline synchronizes.
- Device switch (phone/tablet/desktop): changes are saved to workspace automatically.
- Click "Save" on the toolbar to commit adaptation changes to webapp/manifest.appdescr_variant.
```

**STEP**: 5 — Common editing operations and keyboard interactions

**DESCRIPTION**: Perform UI changes in Adaptation mode via Canvas or Outline pane context menu. The outline context menu is available for projects using SAPUI5 >= 1.84. Use the keyboard shortcuts and workflows below when automating UI tests or scripting user interactions.

**LANGUAGE**: Text

**CODE**:
```
Change properties:
  - Select element in Canvas or Outline.
  - Edit properties in Properties pane.
  - Note: Not all properties are editable.

Add new fields:
  - Hover/select a group or field -> Context menu -> Add Field
  - Search by label/tooltip or sort alphabetically
  - Select fields -> OK to apply

Add new group:
  - Hover/select a group or containing form -> Context menu -> Add Group
  - Default title: "New Group" (rename as needed)
  - Apply by pressing Enter or selecting another element

Add sections to an object page:
  - Hover/select a section -> Context menu -> Add Section
  - If grayed out: all available sections already present
  - Select sections -> OK to apply

Rename fields/groups:
  - Double-click, or Context menu -> Rename Field/Rename Group
  - Apply: Enter. Cancel: Esc

Drag & drop:
  - Drag field/group/section -> drop target highlighted by outline/dashed box

Cut & paste:
  - Context menu -> Cut (element highlighted)
  - Highlighted valid paste targets appear
  - Context menu -> Paste at target
  - Exit paste/highlight: Esc

Combine fields (max 3):
  - Select a field, hold CTRL, select other fields
  - Context menu -> Combine on the target field
Split combined fields:
  - Select combined fields -> Context menu -> Split

Remove fields/groups/sections:
  - Select -> Context menu -> Remove Field/Group/Section or press DEL
  - Removal is from UI only; elements remain available to re-add
  - Mandatory fields cannot be removed without confirmation
```

**STEP**: 6 — Embedding content and external reference

**DESCRIPTION**: After saving adaptation changes, embedding content is performed the same as the key user scenario. Use the Adaptation Editor Save button to persist changes. For the official embedding content procedure and additional details, refer to the SAP Help page.

**LANGUAGE**: Text

**CODE**:
```
- Click "Save" in the Adaptation Editor toolbar to persist changes.
- For embedding content instructions, see:
  https://help.sap.com/viewer/0f8b49c4dfc94bc0bda25a19aa93d5b2/latest/en-US/bfdf15154f16419fb60ce598b21fe515.html
```

**STEP**: 7 — Operational notes and tips

**DESCRIPTION**: Keep these operational constraints/behavior in automation or scripting logic.

**LANGUAGE**: Text

**CODE**:
```
- VS Code must remain running while the Adaptation Editor is open in the browser.
- The Adaptation Editor previews the SAPUI5 version configured in ui5.yaml.
- Outline-pane context menu is available for projects with SAPUI5 versions >= 1.84.
- Avoid modifying other nodes in ui5.yaml besides ui5.version to prevent unexpected behavior.
```
--------------------------------

**TITLE**: Add Fragments to an Aggregation or Extension Point (Adaptation Editor)

**INTRODUCTION**: Step-by-step, code-focused instructions for adding SAPUI5 XML fragments to a control aggregation or to a view extension point using the Adaptation Editor. Includes file locations, fragment XML example, quick actions, constraints, and delete/removal notes for adaptation projects.

**TAGS**: fiori-tools, adaptation-editor, sapui5, fragments, extension-point, aggregation, ui5, change-files

**STEP**: 1 — Open Adaptation Editor and enter Edit mode

**DESCRIPTION**: Launch the Adaptation Editor for your project and switch to edit mode so you can add fragments to aggregations or extension points.

**LANGUAGE**: Text

**CODE**:
```text
- In your workspace, right-click the project -> Adaptation Editor
- In the Adaptation Editor header, click Edit
- The app opens in the canvas in preview mode and is editable
```

**STEP**: 2 — Add a fragment to an aggregation (UI flow)

**DESCRIPTION**: Select a control on the canvas, open its context menu, and choose "Add Fragment". Choose an existing fragment from the list or create a new one. The dialog pre-selects the target aggregation and current index; you may change them unless the aggregation disallows indexing (see constraints).

**LANGUAGE**: Text

**CODE**:
```text
- On the canvas, select a control (e.g., SmartFilterBar, OverflowToolbar)
- Right-click or open control context menu -> Add Fragment
- Dialog shows:
  - Default target aggregation (preselected)
  - Default index (preselected, editable unless disabled)
  - List of fragments available for the selected target aggregation
  - Option: Create New
- Choose a fragment and index -> Add
- After adding, reload the Adaptation Editor when prompted to see changes
```

**STEP**: 3 — Create a new fragment (common for aggregation or extension point)

**DESCRIPTION**: Use the "Create New" option in the Add Fragment dialog to create a fragment XML file. The editor creates the fragment under the project's changes/fragments folder and also creates a corresponding change file in changes/. Edit the fragment XML to define UI controls and save.

**LANGUAGE**: Text

**CODE**:
```text
1) Click Create New in the Add Fragment dialog
2) Enter fragment name -> Create
3) Generated files and locations:
   - fragment XML: <project>/webapp/changes/fragments/<YourFragmentName>.fragment.xml
   - change file:  <project>/webapp/changes/<someAddXML>.change
     (the change file references the fragment path, target aggregation/extension point and index)
4) Edit the generated fragment XML in the editor and Save
5) Reload the Adaptation Editor preview when prompted
```

**STEP**: 4 — Example fragment XML (namespace and stable id requirements)

**DESCRIPTION**: Always declare namespaces for controls used in the fragment and use stable, unique IDs. Use control-specific rules for element definitions.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Example fragment skeleton (adapt to controls and namespaces you need) -->
<core:FragmentDefinition xmlns:core="sap.ui.core"
                         xmlns:uxap="sap.uxap"
                         xmlns:m="sap.m">
  <!-- Example control with a stable unique id -->
  <uxap:ObjectPageSection id="sample.ObjectPageSection" title="Title">
    <m:Text id="sample.Text" text="Example fragment text"/>
  </uxap:ObjectPageSection>
</core:FragmentDefinition>
```

**STEP**: 5 — Choose and edit an existing fragment

**DESCRIPTION**: Select a fragment from the Add Fragment list, click Add, then edit the fragment XML directly from the workspace if you need to change controls or properties.

**LANGUAGE**: Text

**CODE**:
```text
- Select fragment from dialog list -> Add
- In project explorer: double-click <project>/webapp/changes/fragments/<YourFragmentName>.fragment.xml
- Modify the XML, ensuring namespaces and stable IDs are correct
- Save the XML -> reload Adaptation Editor when prompted
```

**STEP**: 6 — Add fragments at an extension point (UI flow differences)

**DESCRIPTION**: Use the outline tree to find possible extension points. Selecting an extension point highlights its parent in the visual editor. Right-click the highlighted element and choose "Add fragment at extension point". The Add Fragment dialog behaves similar to aggregation flow (choose existing or create new).

**LANGUAGE**: Text

**CODE**:
```text
- Expand the Outline tree to find extension point markers
- Select the extension point node -> the parent is highlighted in the visual editor
- Right-click the highlighted element -> Add fragment at extension point
- Dialog preselects the detected extension point; pick fragment or Create New
- Choose insertion index (if applicable) and click Add
- Edit fragment XML if needed; save and reload the preview
```

**STEP**: 7 — Quick actions for fast fragment creation (Adaptation Editor top-right)

**DESCRIPTION**: Use built-in quick actions to create common fragments quickly. The created fragment file contains dummy data so you can see immediate results in preview after saving and reloading.

**LANGUAGE**: Text

**CODE**:
```text
Available quick actions for creating fragments:
- Add Custom Page Action
- Add Custom Table Action
- Add Custom Table Column
- Add Header Field
- Add Custom Section

Flow:
- Click quick action -> enter fragment file name -> Create
- Fragment is generated under webapp/changes/fragments/
- Save, then Save and Reload in the toolbar to preview
```

**STEP**: 8 — Constraints, rules, and deletion guidance

**DESCRIPTION**: Important constraints and cleanup steps to avoid issues when adding or removing fragments.

**LANGUAGE**: Text

**CODE**:
```text
Constraints & rules:
- The index field may be disabled for some aggregations (example: SmartFilterBar's controlConfiguration aggregation does not support specific index positioning).
- You cannot reuse the same fragment file multiple times in the same project insertion context.
- Always declare the namespaces for controls used in the fragment and assign stable, unique IDs.
- Follow each control's specific definition rules per SAPUI5 documentation: https://sapui5.hana.ondemand.com/#/topic/2c677b574ea2486a8d5f5414d15e21c5

Deletion / cleanup:
- To delete a fragment you created:
  1) Delete the corresponding change file(s) in <project>/webapp/changes/ that reference the fragment (e.g., addXML.change)
  2) Delete the fragment XML in <project>/webapp/changes/fragments/
- If you do not delete the associated change files first, you may not be able to add new fragments or re-add the same fragment to the adaptation project.
```
--------------------------------

**TITLE**: Add Fragments to an Aggregation or Extension Point (UI Adaptation Mode)

**INTRODUCTION**: Step-by-step guidance to add XML fragments to a control aggregation or to an extension point while working in UI Adaptation (Preview Application → start-editor). Includes required prerequisites, exact file locations created by the tool, UI actions, tips, and an XML fragment example to use as a template.

**TAGS**: fiori-tools, sapui5, ui-adaptation, fragments, extension-point, addXML, manifest, changes

**STEP**: 1 — Prerequisites and open UI Adaptation mode

**DESCRIPTION**: Ensure environment and open the adaptation editor for your app so you can add fragments.

- SAPUI5 >= 1.78 is required when working with extension points.
- SAP_UI >= 7.55 is required when working with extension points.
- For extension-point additions, the app must be a freestyle application that exposes extension points.
- To open adaptation mode: Right-click project root, webapp folder, or manifest.appdescr_variant → Preview Application → start-editor. The app opens in a canvas in UI Adaptation mode.

**LANGUAGE**: text

**CODE**:
```text
Open UI Adaptation:
- Right-click: <project-root> or webapp or manifest.appdescr_variant
- Select: Preview Application
- Click: start-editor
Result: app opens in canvas in UI Adaptation mode
```

**STEP**: 2 — Add a fragment to an aggregation (UI action)

**DESCRIPTION**: Use the visual editor to add a fragment into a target aggregation of a selected control.

- In the canvas select a control (e.g., SmartFilterBar, OverflowToolbar).
- From the control's context menu choose: Add Fragment.
- Dialog defaults to the detected target aggregation and the last index. Choose a different target aggregation and index from the list if needed.
- Note: The index field is disabled for the SmartFilterBar aggregation named controlConfiguration — this aggregation does not support positioning by index.
- You cannot reuse the same fragment multiple times in the adaptation project.

**LANGUAGE**: text

**CODE**:
```text
UI flow:
1. Select control in canvas
2. Context menu -> Add Fragment
3. In dialog: choose target aggregation and index (default: last)
4. Enter fragment name and click Create
Result: fragment.xml created and opened for edit
File created: <project>/webapp/changes/fragments/<yourFragmentName>.fragment.xml
Associated change file: <project>/webapp/changes/<yourFragmentName>.addXML.change
```

**STEP**: 3 — Create and define the fragment XML file

**DESCRIPTION**: After clicking Create, the editor creates the fragment file under webapp/changes/fragments. Define your fragment content, save and close. Follow SAPUI5 XML fragment rules and include correct namespaces and stable unique IDs.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Minimal fragment template: save as <project>/webapp/changes/fragments/MyFragment.fragment.xml -->
<core:FragmentDefinition
    xmlns:core="sap.ui.core"
    xmlns="sap.m"
    xmlns:uxap="sap.uxap">
  <!-- Replace with controls appropriate to target aggregation/extension point -->
  <Button id="MyFragButton" text="My Button"/>
  <!-- Example of adding a section for ObjectPage -->
  <!-- <uxap:ObjectPageSection id="sample.Id" title="Title"></uxap:ObjectPageSection> -->
</core:FragmentDefinition>
```

**STEP**: 4 — What the tool generates (change file)

**DESCRIPTION**: For every created fragment the adaptation editor creates an associated change file in webapp/changes. This change file references the fragment file, the selected target aggregation (or extension point), and the index. Reload the adaptation editor / preview to apply changes.

**LANGUAGE**: text

**CODE**:
```text
Generated files:
- Fragment XML: <project>/webapp/changes/fragments/<name>.fragment.xml
- Change file:   <project>/webapp/changes/<name>.addXML.change
Note: Reload the browser tab for the adaptation editor and application preview to load the new change.
```

**STEP**: 5 — Add a fragment to an extension point (UI action)

**DESCRIPTION**: Use the outline tree to add fragments at extension points (prereqs above).

- Expand the outline tree in the adaptation editor to locate extension points.
- Select the extension-point element in the tree; its parent is highlighted in the canvas.
- Right-click the highlighted element and choose: Add fragment at extension point.
- In the dialog, select the extension point and index. You cannot reuse the same fragment multiple times.
- Enter fragment name → Create → fragment.xml opens in editor (same paths described earlier). Define fragment content and save.

**LANGUAGE**: text

**CODE**:
```text
UI flow for extension point:
1. Expand outline tree -> locate extension point
2. Select extension-point node -> parent highlighted visually
3. Right-click -> Add fragment at extension point
4. Choose target extension point and index
5. Enter name -> Create
Result: fragment and addXML.change files are created under webapp/changes
```

**STEP**: 6 — Namespace, stable IDs, and control rules

**DESCRIPTION**: Always define required XML namespaces for the controls used in the fragment and use stable, unique IDs for any control you add. Follow the specific definition rules for each control type used.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Example showing namespace declaration and ObjectPage control usage -->
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns:uxap="sap.uxap">
  <uxap:ObjectPageSection id="sample.Id" title="Title"></uxap:ObjectPageSection>
</core:FragmentDefinition>
```

**STEP**: 7 — Quick actions for common fragment additions

**DESCRIPTION**: Use quick actions (top-right panel) for fast creation of common fragments. Click an action, enter a fragment file name, and choose Create. The fragment includes dummy content to show immediate results after Save and Reload.

Quick actions available:
- Add Custom Page Action
- Add Custom Table Action
- Add Custom Table Column
- Add Header Field
- Add Custom Section

**LANGUAGE**: text

**CODE**:
```text
Quick action flow:
1. Click quick action in top-right panel (e.g., Add Custom Table Column)
2. Enter fragment name
3. Click Create
4. Edit generated fragment XML if needed
5. Save and choose Save and Reload to see preview
```

**STEP**: 8 — Deleting fragments safely

**DESCRIPTION**: To remove a fragment and allow future fragment additions, first delete the associated change file in <project>/webapp/changes, then delete the fragment file in <project>/webapp/changes/fragments. If you delete the fragment file first, you cannot add further fragments to the adaptation project.

**LANGUAGE**: text

**CODE**:
```text
Delete order:
1. Delete change file: <project>/webapp/changes/<name>.addXML.change
2. Delete fragment file: <project>/webapp/changes/fragments/<name>.fragment.xml
```
--------------------------------

**TITLE**: Adding App Descriptor Changes (webapp/manifest.json) for SAP Fiori Tools

**INTRODUCTION**: This document shows focused, code-first steps to add or modify the SAP Fiori app descriptor (webapp/manifest.json) used by Fiori Tools. It covers common descriptor edits (app metadata, dataSources/models, routing, cross navigation/inbounds, libraries) and provides quick programmatic and editor-based approaches so a code generator or automation can reliably apply changes.

**TAGS**: fiori-tools, manifest.json, app-descriptor, sap.ui5, routing, dataSource, inbound, json, node

STEP: 1 — Locate the app descriptor
DESCRIPTION: Identify the file you will edit. Typical location in an SAP Fiori project:
LANGUAGE: JSON
CODE:
```json
// File path: <project-root>/webapp/manifest.json
{
  "sap.app": {
    "id": "com.example.myapp",
    "type": "application",
    "i18n": "i18n/i18n.properties"
  },
  "sap.ui5": {
    // sap.ui5 content here
  }
}
```

STEP: 2 — Add or update sap.app metadata (id, title, description, applicationVersion)
DESCRIPTION: Set canonical app id and version. Merge these fields into sap.app.
LANGUAGE: JSON
CODE:
```json
// Snippet to merge into "sap.app"
{
  "sap.app": {
    "id": "com.example.myapp",
    "type": "application",
    "i18n": "i18n/i18n.properties",
    "title": "{{appTitle}}",
    "description": "{{appDescription}}",
    "applicationVersion": {
      "version": "1.0.0"
    }
  }
}
```

STEP: 3 — Add OData/REST data source and model
DESCRIPTION: Define dataSources in sap.app and create a corresponding model entry under sap.ui5/models. Use v2 or v4 depending on service.
LANGUAGE: JSON
CODE:
```json
// Merge into "sap.app" and "sap.ui5"
{
  "sap.app": {
    "dataSources": {
      "mainService": {
        "uri": "/sap/opu/odata/sap/ZSERVICE_SRV/",
        "type": "OData",
        "settings": {
          "odataVersion": "2.0"
        }
      }
    }
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "mainService",
        "preload": true,
        "settings": {
          "defaultBindingMode": "TwoWay"
        }
      },
      "i18n": {
        "type": "sap.ui.model.resource.ResourceModel",
        "settings": {
          "bundleName": "com.example.myapp.i18n.i18n"
        }
      }
    }
  }
}
```

STEP: 4 — Add routing (routes and targets) for navigation
DESCRIPTION: Add a router configuration including routes and targets to render views. Merge into sap.ui5.
LANGUAGE: JSON
CODE:
```json
// Merge into "sap.ui5"
{
  "sap.ui5": {
    "routing": {
      "config": {
        "routerClass": "sap.m.routing.Router",
        "viewType": "XML",
        "viewPath": "com.example.myapp.view",
        "controlId": "app",
        "controlAggregation": "pages",
        "async": true
      },
      "routes": [
        {
          "name": "home",
          "pattern": "",
          "target": "home"
        },
        {
          "name": "detail",
          "pattern": "detail/{productId}",
          "target": "detail"
        }
      ],
      "targets": {
        "home": {
          "viewName": "Home",
          "viewLevel": 1
        },
        "detail": {
          "viewName": "Detail",
          "viewLevel": 2
        }
      }
    }
  }
}
```

STEP: 5 — Add cross navigation inbounds (FLP inbound)
DESCRIPTION: Add inbound(s) under sap.app/crossNavigation/inbounds to expose application navigation to the FLP and enable deep linking.
LANGUAGE: JSON
CODE:
```json
// Merge into "sap.app"
{
  "sap.app": {
    "crossNavigation": {
      "inbounds": {
        "com.example.myapp-display": {
          "semanticObject": "Product",
          "action": "display",
          "title": "Display Product",
          "signature": {
            "parameters": {
              "productId": {
                "required": true
              }
            }
          },
          "resolutionResult": {
            "applicationType": "URL",
            "url": "#com.example.myapp-display"
          }
        }
      }
    }
  }
}
```

STEP: 6 — Add library dependencies and content density options
DESCRIPTION: Ensure required UI5 libraries are declared and optional contentDensities are set.
LANGUAGE: JSON
CODE:
```json
// Merge into "sap.ui5"
{
  "sap.ui5": {
    "dependencies": {
      "minUI5Version": "1.84.0",
      "libs": {
        "sap.m": {},
        "sap.ui.table": {}
      }
    },
    "contentDensities": {
      "compact": true,
      "cozy": true
    }
  }
}
```

STEP: 7 — Programmatic merge example (Node.js) — apply descriptor changes reliably
DESCRIPTION: Use a small Node.js script to merge a JSON snippet into webapp/manifest.json. This example uses lodash.merge for deep merge.
LANGUAGE: JavaScript
CODE:
```javascript
// File: scripts/merge-manifest.js
// Usage: node scripts/merge-manifest.js path/to/patch.json
const fs = require('fs');
const path = require('path');
const merge = require('lodash.merge');

const manifestPath = path.resolve(process.cwd(), 'webapp', 'manifest.json');
const patchPath = path.resolve(process.cwd(), process.argv[2] || 'manifest-patch.json');

if (!fs.existsSync(manifestPath)) {
  console.error('webapp/manifest.json not found');
  process.exit(1);
}
if (!fs.existsSync(patchPath)) {
  console.error('Patch file not found:', patchPath);
  process.exit(1);
}

const manifest = JSON.parse(fs.readFileSync(manifestPath, 'utf8'));
const patch = JSON.parse(fs.readFileSync(patchPath, 'utf8'));

const merged = merge({}, manifest, patch);
fs.writeFileSync(manifestPath, JSON.stringify(merged, null, 2), 'utf8');
console.log('manifest.json updated successfully.');
```

STEP: 8 — Using VS Code Fiori Tools App Descriptor Editor
DESCRIPTION: Open webapp/manifest.json with the SAP Fiori Tools App Descriptor Editor extension for schema-guided editing:
- In VS Code, open webapp/manifest.json.
- If installed, the Fiori Tools App Descriptor Editor provides a form and validation.
- Edit desired sections and save — the manifest.json file is updated on disk.

LANGUAGE: plain
CODE:
```text
// Steps (no code)
1. Open VS Code.
2. Open <project-root>/webapp/manifest.json.
3. Use the Fiori Tools App Descriptor Editor tab to edit fields (sap.app, sap.ui5, etc.).
4. Save file to persist changes.
```

STEP: 9 — Validation and best practices
DESCRIPTION: Validate manifest.json after changes:
- Ensure JSON schema compliance (editor will show diagnostics).
- Do not remove unknown required properties for your project.
- Keep version control commits small and document the reason for descriptor changes.
LANGUAGE: plain
CODE:
```text
// Quick CLI checks
# Pretty print and check JSON validity
node -e "console.log(require('./webapp/manifest.json'))"

# Optionally use a JSON linter or the editor diagnostics
```

STEP: 10 — Example combined patch (full manifest-patch.json)
DESCRIPTION: A single patch file that can be merged programmatically or manually applied. This combines metadata, dataSource, model, routing and inbound.
LANGUAGE: JSON
CODE:
```json
// File: manifest-patch.json (merge this into webapp/manifest.json)
{
  "sap.app": {
    "id": "com.example.myapp",
    "title": "Example Fiori App",
    "description": "Fiori app with routing and OData model",
    "applicationVersion": { "version": "1.0.0" },
    "dataSources": {
      "mainService": {
        "uri": "/sap/opu/odata/sap/ZSERVICE_SRV/",
        "type": "OData",
        "settings": { "odataVersion": "2.0" }
      }
    },
    "crossNavigation": {
      "inbounds": {
        "com.example.myapp-display": {
          "semanticObject": "Product",
          "action": "display",
          "title": "Display Product",
          "signature": { "parameters": { "productId": { "required": true } } },
          "resolutionResult": { "applicationType": "URL", "url": "#com.example.myapp-display" }
        }
      }
    }
  },
  "sap.ui5": {
    "dependencies": { "minUI5Version": "1.84.0", "libs": { "sap.m": {}, "sap.ui.table": {} } },
    "models": {
      "": { "dataSource": "mainService", "preload": true, "settings": { "defaultBindingMode": "TwoWay" } },
      "i18n": { "type": "sap.ui.model.resource.ResourceModel", "settings": { "bundleName": "com.example.myapp.i18n.i18n" } }
    },
    "routing": {
      "config": {
        "routerClass": "sap.m.routing.Router",
        "viewType": "XML",
        "viewPath": "com.example.myapp.view",
        "controlId": "app",
        "controlAggregation": "pages",
        "async": true
      },
      "routes": [
        { "name": "home", "pattern": "", "target": "home" },
        { "name": "detail", "pattern": "detail/{productId}", "target": "detail" }
      ],
      "targets": {
        "home": { "viewName": "Home", "viewLevel": 1 },
        "detail": { "viewName": "Detail", "viewLevel": 2 }
      }
    },
    "contentDensities": { "compact": true, "cozy": true }
  }
}
```
--------------------------------

**TITLE**: App Descriptor Changes for Adaptation Projects (manifest.json edits)

**INTRODUCTION**: This guide lists actionable manifest.json edits for adaptation projects that modify SAP Fiori elements apps. Use these concise, copy-pasteable JSON snippets and file paths to: replace an OData service, add local annotation files, add a new OData service + SAPUI5 model, register SAPUI5 component usages, and add/change FLP inbound navigation entries.

**TAGS**: manifest.json, app-descriptor, odata, annotations, sap.ui5, componentUsages, inbounds, fiori-tools, adaptation

STEP: Replace OData Service (map existing model to a new dataSource)
DESCRIPTION: Replace the backend OData service used by an existing UI model. Add/modify the dataSource entry under sap.app/dataSources and point the default model to that dataSource under sap.ui5/models. Update file: manifest.json in the application root (adaptation project variant).
LANGUAGE: JSON
CODE:
```json
{
  "sap.app": {
    "id": "com.example.myapp",
    "dataSources": {
      "MainService": {
        "uri": "/sap/opu/odata/sap/NEW_SERVICE_SRV/",
        "type": "OData",
        "settings": {
          "odataVersion": "2.0"
        }
      }
    }
  },
  "sap.ui5": {
    "models": {
      "": {                         /* root/default model */
        "dataSource": "MainService"
      }
    }
  }
}
```

STEP: Add Local Annotation File (attach annotation XML to an OData model)
DESCRIPTION: Add a local annotation XML file under webapp/annotations/ and register it as a dataSource type ODataAnnotation. Then reference it from the OData model using settings.annotationURI (array). Files: webapp/annotations/Products.annotations.xml and manifest.json.
LANGUAGE: JSON
CODE:
```json
{
  "sap.app": {
    "dataSources": {
      "Products": {
        "uri": "/sap/opu/odata/sap/PRODUCT_SRV/",
        "type": "OData",
        "settings": {
          "odataVersion": "2.0"
        }
      },
      "ProductsAnnotations": {
        "uri": "annotations/Products.annotations.xml",
        "type": "ODataAnnotation",
        "settings": {
          "localUri": "annotations/Products.annotations.xml"
        }
      }
    }
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "Products",
        "settings": {
          "annotationURI": [
            "ProductAnnotations>ProductsAnnotations" /* optional mapping notation used by some tools */
          ]
        }
      }
    }
  }
}
```

STEP: Add OData Service and New SAPUI5 Model (create a named JSON model bound to a new OData back-end)
DESCRIPTION: Register a new OData dataSource and create a named SAPUI5 model that refers to it (for list/detail or side-by-side data). Add a new model entry under sap.ui5/models with a modelName. Optionally specify defaultBindingMode and type.
LANGUAGE: JSON
CODE:
```json
{
  "sap.app": {
    "dataSources": {
      "CustomService": {
        "uri": "/sap/opu/odata/sap/CUSTOM_SRV/",
        "type": "OData",
        "settings": {
          "odataVersion": "2.0"
        }
      }
    }
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "MainService" /* existing default model stays */
      },
      "customModel": {                 /* named model */
        "dataSource": "CustomService",
        "settings": {
          "operationMode": "Server",   /* optional */
          "bindingMode": "TwoWay"
        }
      }
    }
  }
}
```

STEP: Add SAPUI5 Component Usages (declare and configure a reusable UI5 component)
DESCRIPTION: Register external/internal UI5 components for programmatic instantiation using sap.ui5/componentUsages. Provide the component name and optional settings. Update manifest.json.
LANGUAGE: JSON
CODE:
```json
{
  "sap.ui5": {
    "componentUsages": {
      "MySidePanel": {
        "name": "com.example.sidepanel.Component",
        "settings": {
          "title": "Side Panel",
          "mode": "compact"
        },
        "lazy": true
      },
      "CustomCard": {
        "name": "com.vendor.customcard.Component",
        "settings": {
          "defaultIcon": "sap-icon://card"
        }
      }
    }
  }
}
```

STEP: Change Inbound (add/update FLP inbound navigation entries)
DESCRIPTION: Add or change inbound entries for Fiori Launchpad navigation under sap.app/crossNavigation/inbounds. Define semanticObject, action, signature parameters and a title. Update manifest.json to enable direct navigation from FLP.
LANGUAGE: JSON
CODE:
```json
{
  "sap.app": {
    "crossNavigation": {
      "inbounds": {
        "DisplayProduct": {
          "semanticObject": "Product",
          "action": "display",
          "title": "Display Product",
          "signature": {
            "parameters": {
              "ProductId": {
                "required": true
              }
            }
          },
          "resolutionResult": {
            "applicationType": "SAPUI5",
            "additionalInformation": "SAPUI5.Component=com.example.myapp",
            "url": "/sap/bc/ui5_ui5/sap/com.example.myapp"
          }
        }
      }
    }
  }
}
```


--------------------------------

**TITLE**: Adding Local Annotation Files (SAP Fiori tools)

**INTRODUCTION**: Steps and concrete example snippets to add a local annotation file to a Fiori application project (right-click > Add Local Annotation File). Use this to create or link annotation files for an OData service in your app. Includes sample annotation XML and manifest modifications you can apply programmatically.

**TAGS**: fiori-tools, annotations, manifest, webapp, manifest.appdescr_variant, UI5, OData, local-annotations

**STEP**: Prerequisites

**DESCRIPTION**: Ensure your environment meets platform requirements before adding local annotations (relevant for adaptation projects on on-premise systems).

**LANGUAGE**: text

**CODE**:
```text
- For adaptation projects for an On-Premise System: ensure ABAP Platform 2020 SP00 is installed.
- Files you will interact with: project root, webapp/, manifest.appdescr_variant (or manifest.json).
```

**STEP**: Trigger the Add Local Annotation File action

**DESCRIPTION**: How to invoke the tool from the project tree in your IDE (VS Code / Fiori tools explorer).

**LANGUAGE**: text

**CODE**:
```text
- Right-click the project main folder, OR
- Right-click the webapp folder, OR
- Right-click the manifest.appdescr_variant file
- Select: "Add Local Annotation File"
- The wizard opens: choose Target OData Service (from the base application's manifest), choose to create a new empty file or to select an existing file from your workspace, then click Finish.
```

**STEP**: Create a new local annotation file (example file path & minimal content)

**DESCRIPTION**: Create a new annotation XML file under webapp/annotations and add minimal annotation content you can expand. This is the file the wizard will add and reference in the manifest.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- webapp/annotations/LocalAnnotations.xml -->
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
  <edmx:Reference Uri="http://docs.oasis-open.org/odata/ns/edm">
    <edmx:Include Namespace="Org.OData.Core.V1" Alias="Core"/>
  </edmx:Reference>
  <edmx:DataServices>
    <Schema Namespace="My.Service.Annotations" xmlns="http://docs.oasis-open.org/odata/ns/edm">
      <Annotations Target="MyService.EntityType">
        <!-- Example: add Label annotation -->
        <Annotation Term="Org.OData.Core.V1.Description">
          <String>Local description for EntityType</String>
        </Annotation>
      </Annotations>
    </Schema>
  </edmx:DataServices>
</edmx:Edmx>
```

**STEP**: Reference the annotation file in the manifest (recommended approach)

**DESCRIPTION**: Add a dataSource entry for the annotation file and then link that annotation dataSource to your OData service. Two common ways are shown: 1) attach annotation dataSource to the service model settings (preferred for Fiori elements), and 2) add a separate annotations model. Update manifest.appdescr_variant (or manifest.json) accordingly.

**LANGUAGE**: JSON

**CODE**:
```json
// manifest.appdescr_variant (partial) - add under "sap.app"."dataSources"
{
  "sap.app": {
    "dataSources": {
      "MyService": {
        "uri": "/sap/opu/odata/sap/MY_SERVICE_SRV/",
        "type": "OData",
        "settings": {
          "odataVersion": "4.0"
        }
      },
      "MyServiceAnnotations": {
        "uri": "annotations/LocalAnnotations.xml",
        "type": "ODataAnnotation",
        "settings": {
          "localUri": "annotations/LocalAnnotations.xml"
        }
      }
    }
  }
}
```

**LANGUAGE**: JSON

**CODE**:
```json
// manifest.appdescr_variant (partial) - add under "sap.ui5"."models"
// Option A: Attach annotations to the main service model (recommended)
{
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "MyService",
        "settings": {
          "annotationURI": [
            "MyServiceAnnotations"
          ]
        }
      }
    }
  }
}
```

**LANGUAGE**: JSON

**CODE**:
```json
// manifest.appdescr_variant (partial) - alternative Option B: separate annotations model
{
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "MyService"
      },
      "annotations": {
        "dataSource": "MyServiceAnnotations"
      }
    }
  }
}
```

**STEP**: Selecting an existing annotation file from workspace

**DESCRIPTION**: If you chose to reuse an existing annotation file, ensure the file path is correct and referenced from manifest. Example: existing file path = webapp/annotations/SharedAnnotations.xml. Add dataSource.localUri set to that relative path.

**LANGUAGE**: JSON

**CODE**:
```json
// Example when reusing existing file webapp/annotations/SharedAnnotations.xml
{
  "sap.app": {
    "dataSources": {
      "MyServiceAnnotations": {
        "uri": "annotations/SharedAnnotations.xml",
        "type": "ODataAnnotation",
        "settings": {
          "localUri": "annotations/SharedAnnotations.xml"
        }
      }
    }
  }
}
```

**STEP**: Save and verify

**DESCRIPTION**: After Finish, the wizard updates the manifest and/or creates the file in webapp/annotations. Verify:
- The new file exists at webapp/annotations/<filename>.xml
- manifest.appdescr_variant (or manifest.json) contains a dataSources entry with type ODataAnnotation and settings.localUri that points to the file
- The OData service model references the annotation dataSource (via annotationURI or separate annotations model)

**LANGUAGE**: text

**CODE**:
```text
- Check: webapp/annotations/LocalAnnotations.xml exists
- Check: manifest.appdescr_variant contains "MyServiceAnnotations" with "settings": { "localUri": "annotations/LocalAnnotations.xml" }
- Check: sap.ui5.models link between your OData service and the annotation dataSource (either annotationURI in the service model or a separate annotations model)
```
--------------------------------

**TITLE**: Adding Local Annotation Files to an Adaptation Project

**INTRODUCTION**: Step-by-step, code-focused instructions for adding local OData annotation files to a UI adaptation project. Covers both the Add Local Annotation File wizard and the Adaptation Editor quick action. Includes file paths, example annotation skeleton, and LSP support note for editing annotations.

**TAGS**: fiori-tools, adaptation, annotations, XML, LSP, SAP Business Application Studio, manifest

**STEP**: 1 — Add a Local Annotation File using the Adaptation Project Wizard

**DESCRIPTION**: Use the context menu on the adaptation project's manifest to launch the wizard and create or attach a local annotation file. This is the recommended flow when starting from the project explorer or workspace.

**LANGUAGE**: plain

**CODE**:
```text
UI sequence (context menu):
1. In the workspace/project explorer, right-click: <project-root>/manifest.appdescr_variant
2. Select: Adaptation Project > Add Local Annotation File
3. If prompted, enter the system credentials used to create the adaptation project
4. In the wizard:
   - From "Target OData Service" dropdown: choose the OData service defined in the base app's manifest to which the annotation will apply
   - Choose one of:
     * Create an empty annotation file (generate a new local XML file you will edit)
     * Select an existing annotation file from the workspace
5. Click Finish to save the change
```

**STEP**: 2 — Add a Local Annotation File from the Adaptation Editor (UI Adaptation mode)

**DESCRIPTION**: Add an annotation directly while editing UI adaptation changes. This creates the annotation file inside the adaptation project workspace and makes it available for further edits.

**LANGUAGE**: plain

**CODE**:
```text
1. Open Adaptation Editor for the target app in SAP Business Application Studio
2. Switch to mode: UI Adaptation
3. From "Object Page Quick Actions" select: Add Local Annotation File
4. Click the Adaptation Editor header button: Save and reload
5. Generated file location in workspace:
   <adaptation-project-root>/changes/annotations/<your-local-annotation-file>.xml
```

**STEP**: 3 — Local Annotation File: Example file path and XML skeleton

**DESCRIPTION**: Example of where the file appears in the adaptation project and a minimal XML skeleton to start editing. Use the SAP Fiori Tools – XML Annotation LSP extension for code assistance while editing this file.

**LANGUAGE**: XML

**CODE**:
```xml
<?xml version="1.0" encoding="utf-8"?>
<Edmx xmlns="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
  <DataServices>
    <Schema Namespace="YourServiceNamespace" xmlns="http://docs.oasis-open.org/odata/ns/edm">
      <!-- Target should match the entity type or container from your OData service -->
      <Annotations Target="YourServiceNamespace.YourEntityType">
        <!-- Add UI annotations here, for example: -->
        <!-- <Annotation Term="UI.LineItem"> ... </Annotation> -->
      </Annotations>
    </Schema>
  </DataServices>
</Edmx>
```

**STEP**: 4 — Manifest reference example (where you select Target OData Service)

**DESCRIPTION**: The wizard lists OData services referenced by the base application's manifest. Example snippet shows where OData services are typically declared (inspect base app's manifest to match service names).

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.app": {
    "id": "com.example.app"
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "mainService"
      }
    },
    "dataSources": {
      "mainService": {
        "uri": "/sap/opu/odata/sap/ZSERVICE_SRV/",
        "type": "OData",
        "settings": {
          "odataVersion": "2.0"
        }
      }
    }
  }
}
```

**STEP**: 5 — Use Annotation LSP for editing (install and link)

**DESCRIPTION**: Enable Language Server features for XML annotation editing. Install the SAP Fiori Tools – XML Annotation LSP extension to get completion, diagnostics, and hover information when editing local annotation files. Refer to the Fiori Tools documentation for detailed behavior.

**LANGUAGE**: plain

**CODE**:
```text
Extension to install: "SAP Fiori Tools – XML Annotation LSP"
Documentation: Developing-an-Application/maintaining-annotations-with-language-server-6fc93f8.md
Note: After installing the extension, open the local annotation file in the editor to activate LSP features.
```
--------------------------------

**TITLE**: Add OData V2 Service and SAPUI5 Model (with optional Annotation Data Source)

**INTRODUCTION**: Show how to add an OData V2 service and corresponding SAPUI5 model to a Fiori/UI5 app. Includes exact manifest changes (manifest.json or manifest.appdescr_variant) for a new OData dataSource, optional OData annotation dataSource, and model configuration (including optional settings). Use these snippets when implementing manually or when verifying what the "Add OData Service > Model" wizard writes.

**TAGS**: sapui5, fiori, odata, manifest, manifest.json, manifest.appdescr_variant, annotations, model, webapp

**STEP**: 1 — Wizard fields and their manifest mappings

**DESCRIPTION**: Map the values entered in the "Add OData Service > Model" wizard to manifest keys. Use this to validate the wizard result or to manually implement the same changes.

- OData Service name -> dataSources key under sap.app (e.g., "MainService")
- OData Service URI -> dataSources[<name>].uri
- OData version -> dataSources[<name>].settings.odataVersion ("2.0")
- SAPUI5 Model name -> sap.ui5.models key ("" for default model)
- SAPUI5 Model settings -> sap.ui5.models[<modelName>].settings (JSON key/values)
- Add annotation? -> add a dataSource of type "ODataAnnotation" and reference it under model settings via "annotations": ["<annotationDataSourceName>"]

**LANGUAGE**: Text/Mapping

**CODE**:
```text
Wizard field -> manifest location

OData Service name             -> sap.app.dataSources.<ServiceName>
OData Service URI              -> sap.app.dataSources.<ServiceName>.uri
OData Version                  -> sap.app.dataSources.<ServiceName>.settings.odataVersion
SAPUI5 Model name              -> sap.ui5.models.<ModelName>
SAPUI5 Model dataSource ref    -> sap.ui5.models.<ModelName>.dataSource
SAPUI5 Model settings          -> sap.ui5.models.<ModelName>.settings (JSON object)
Annotation Data Source name    -> sap.app.dataSources.<AnnotationName>
Annotation Data Source URI     -> sap.app.dataSources.<AnnotationName>.uri
Reference annotation in model  -> sap.ui5.models.<ModelName>.settings.annotations (array)
```

**STEP**: 2 — Minimal example: add OData V2 service and default model (manifest.json / manifest.appdescr_variant)

**DESCRIPTION**: Insert or merge this JSON into your webapp/manifest.json (or manifest.appdescr_variant) to register an OData V2 service named "MainService" and use it as the default UI5 model. Replace URIs and settings values as required.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.app": {
    "dataSources": {
      "MainService": {
        "uri": "/sap/opu/odata/sap/Z_MY_SERVICE_SRV/",
        "type": "OData",
        "settings": {
          "odataVersion": "2.0"
        }
      }
    }
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "MainService",
        "settings": {
          "operationMode": "Server",
          "defaultBindingMode": "TwoWay"
        }
      }
    }
  }
}
```

**STEP**: 3 — Add an OData annotation dataSource and link it to the model

**DESCRIPTION**: Add an annotation dataSource of type ODataAnnotation and then reference it from the model via settings.annotations. This is the pattern the wizard uses when the "Add annotation" option is selected.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.app": {
    "dataSources": {
      "MainService": {
        "uri": "/sap/opu/odata/sap/Z_MY_SERVICE_SRV/",
        "type": "OData",
        "settings": {
          "odataVersion": "2.0"
        }
      },
      "MainAnnotations": {
        "uri": "/localService/annotations.xml",
        "type": "ODataAnnotation",
        "settings": {
          "localUri": "localService/annotations.xml"
        }
      }
    }
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "MainService",
        "settings": {
          "operationMode": "Server",
          "defaultBindingMode": "TwoWay",
          "annotations": [
            "MainAnnotations"
          ]
        }
      }
    }
  }
}
```

**STEP**: 4 — Example: named (non-default) UI5 model with custom settings provided as JSON key/value pairs

**DESCRIPTION**: Show how to add a named model (e.g., "MyODataModel") and include optional model settings the wizard accepts as a JSON object. Replace keys/values to match wizard "optional settings" input: e.g. "operationMode":"Client", "mergeMetadata:true".

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.app": {
    "dataSources": {
      "MyService": {
        "uri": "/sap/opu/odata/sap/Z_OTHER_SERVICE_SRV/",
        "type": "OData",
        "settings": {
          "odataVersion": "2.0",
          "localUri": "localService/metadata.xml"
        }
      }
    }
  },
  "sap.ui5": {
    "models": {
      "MyODataModel": {
        "dataSource": "MyService",
        "settings": {
          "operationMode": "Client",
          "preload": true,
          "defaultBindingMode": "TwoWay"
        }
      }
    }
  }
}
```

**STEP**: 5 — Multiple annotation files (array reference)

**DESCRIPTION**: If the service requires multiple annotation sources, list all annotation dataSource names in the model settings.annotations array.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.app": {
    "dataSources": {
      "MainService": {
        "uri": "/sap/opu/odata/sap/Z_MY_SERVICE_SRV/",
        "type": "OData",
        "settings": {
          "odataVersion": "2.0"
        }
      },
      "AnnoA": {
        "uri": "/localService/annoA.xml",
        "type": "ODataAnnotation",
        "settings": { "localUri": "localService/annoA.xml" }
      },
      "AnnoB": {
        "uri": "/localService/annoB.xml",
        "type": "ODataAnnotation",
        "settings": { "localUri": "localService/annoB.xml" }
      }
    }
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "MainService",
        "settings": {
          "annotations": ["AnnoA", "AnnoB"]
        }
      }
    }
  }
}
```

**STEP**: 6 — File locations and practical notes

**DESCRIPTION**: Where to apply changes and tips.

- Edit files under webapp/manifest.json or the project manifest variant: manifest.appdescr_variant (Fiori Tools may update these).
- The wizard performs the same changes; use the examples above to validate or to perform manual edits when automating project setup.
- Ensure URIs are correct (absolute or relative). For local annotation files use localUri in dataSource.settings and point to localService/annotations.xml.
- For OData V2 services set "odataVersion": "2.0" in dataSource.settings.

**LANGUAGE**: Text

**CODE**:
```text
Common file paths:
- webapp/manifest.json
- webapp/manifest.appdescr_variant  (project-specific variant file modified by some tools)

When using the wizard:
- Right-click project root / webapp / manifest.appdescr_variant -> Add OData Service > Model
- Fill the fields (Service name, URI, OData version, Model name, optional JSON settings)
- If adding annotations, provide Annotation Data Source name and URI and optional settings
- Click Finish
```
--------------------------------

**TITLE**: Add OData Service and SAPUI5 Model to manifest.appdescr_variant (with optional annotations)

**INTRODUCTION**: Practical, code-focused guide to add an OData service and a new SAPUI5 model to an adaptation project's manifest.appdescr_variant. Includes examples for OData V2 (with optional annotations) and OData V4, plus sample model settings. Use these snippets to programmatically update manifest.appdescr_variant or to verify wizard output.

**TAGS**: fiori-tools, SAPUI5, OData, manifest, manifest.appdescr_variant, annotations, V2, V4

**STEP**: 1 — Start the Add OData Service And SAPUI5 Model wizard
**DESCRIPTION**: In the adaptation project, right-click the manifest.appdescr_variant file and select Adaptation Project > Add OData Service And SAPUI5 Model to launch the wizard. The following steps describe the fields you will enter and show the manifest changes the wizard will produce.
**LANGUAGE**: none
**CODE**:
```text
File: <adaptation-project-root>/manifest.appdescr_variant
Action: Right-click -> Adaptation Project > Add OData Service And SAPUI5 Model
```

**STEP**: 2 — Required basic fields (examples)
**DESCRIPTION**: Provide the OData service name, URI and OData version. Provide the SAPUI5 model name. The wizard will add dataSources under sap.app and a model entry under sap.ui5. Example shows minimal additions for an OData V2 service without annotations.
**LANGUAGE**: JSON
**CODE**:
```json
{
  "sap.app": {
    "dataSources": {
      "MyOData": {
        "uri": "/sap/opu/odata/sap/MY_SERVICE_SRV/",
        "type": "OData",
        "settings": {
          "odataVersion": "2.0"
        }
      }
    }
  },
  "sap.ui5": {
    "models": {
      "MyODataModel": {
        "dataSource": "MyOData",
        "type": "sap.ui.model.odata.v2.ODataModel",
        "settings": {
          "useBatch": true,
          "defaultBindingMode": "TwoWay"
        }
      }
    }
  }
}
```

**STEP**: 3 — Optional: Add OData V2 with annotations (annotation data source required)
**DESCRIPTION**: If your OData V2 service uses annotations, you must add an annotation dataSource entry. The wizard will prompt for the annotation data source name and URI. Example shows both the OData and annotation data sources and a named model referencing the OData dataSource. (Note: annotation dataSource type is ODataAnnotation.)
**LANGUAGE**: JSON
**CODE**:
```json
{
  "sap.app": {
    "dataSources": {
      "MyOData": {
        "uri": "/sap/opu/odata/sap/MY_SERVICE_SRV/",
        "type": "OData",
        "settings": {
          "odataVersion": "2.0"
        }
      },
      "MyODataAnnotations": {
        "uri": "/resources/annotations/MyAnnotations.xml",
        "type": "ODataAnnotation"
      }
    }
  },
  "sap.ui5": {
    "models": {
      "MyODataModel": {
        "dataSource": "MyOData",
        "type": "sap.ui.model.odata.v2.ODataModel",
        "settings": {
          "useBatch": true
        }
      }
    }
  }
}
```

**STEP**: 4 — OData V4 example (no annotation data source required)
**DESCRIPTION**: For OData V4 services you do not need a separate annotation data source. Example demonstrates adding a V4 dataSource and a V4 model.
**LANGUAGE**: JSON
**CODE**:
```json
{
  "sap.app": {
    "dataSources": {
      "MyODataV4": {
        "uri": "/sap/opu/odata4/sap/MY_SERVICE_V4/",
        "type": "OData",
        "settings": {
          "odataVersion": "4.0"
        }
      }
    }
  },
  "sap.ui5": {
    "models": {
      "MyODataV4Model": {
        "dataSource": "MyODataV4",
        "type": "sap.ui.model.odata.v4.ODataModel",
        "settings": {
          "synchronizationMode": "None",
          "operationMode": "Server"
        }
      }
    }
  }
}
```

**STEP**: 5 — Optional: Provide model/annotation settings (format and examples)
**DESCRIPTION**: When the wizard asks for model settings or annotation settings, provide a JSON object for settings. Example options you might pass for an OData V2 model or annotation data source.
**LANGUAGE**: JSON
**CODE**:
```json
// Example model settings (pass as JSON object)
{
  "useBatch": true,
  "defaultBindingMode": "TwoWay",
  "groupId": "$auto"
}

// Example annotation settings (if supported/needed)
{
  "localUri": "localAnnotations/MyAnnotations.xml"
}
```

**STEP**: 6 — Finish and validate
**DESCRIPTION**: Click Finish in the wizard. Validate that manifest.appdescr_variant now contains the new sap.app.dataSources entries and the sap.ui5.models entry for your new model. If you added a V2 annotation, confirm the annotation dataSource exists under sap.app.dataSources.
**LANGUAGE**: none
**CODE**:
```text
Verify file: <adaptation-project-root>/manifest.appdescr_variant
Confirm entries:
- sap.app.dataSources.<YourDataSourceName>
- sap.app.dataSources.<YourAnnotationDataSourceName> (V2 annotations only)
- sap.ui5.models.<YourModelName>
```
--------------------------------

**TITLE**: Add SAPUI5 Component Usages to manifest.appdescr_variant (manual edit)

**INTRODUCTION**: Step-by-step, code-centric guide to add SAPUI5 component usages and optional library references to an adaptation project's manifest.appdescr_variant. Includes exact JSON snippets to paste or merge into the manifest. Use when tooling/wizard is not available or for direct file edits.

**TAGS**: fiori-tools, sapui5, manifest, componentUsages, adaptation, manifest.appdescr_variant

STEP: 1 — Open the manifest file
DESCRIPTION: Locate and open the adaptation project's manifest file: manifest.appdescr_variant (root of the adaptation project). All changes below are applied inside this JSON file.
LANGUAGE: N/A
CODE:
```text
File path: <adaptation-project-root>/manifest.appdescr_variant
```

STEP: 2 — Add a component usage entry
DESCRIPTION: Add a new entry under "sap.ui5.componentUsages" with the usage ID, component name, optional lazy flag, optional settings object, and optional componentData object. Replace placeholders with real values.
LANGUAGE: JSON
CODE:
```json
{
  "sap.ui5": {
    "componentUsages": {
      "<ComponentUsageID>": {
        "name": "<component.namespace.Component>",    /* required */
        "lazy": true,                                /* optional: true|false */
        "settings": {                                /* optional: JSON object */
          "key1": "value1",
          "key2": "value2"
        },
        "componentData": {                            /* optional: JSON object */
          "key1": "value1",
          "key2": "value2"
        }
      }
    }
  }
}
```

STEP: 3 — Example: complete manifest fragment with one usage
DESCRIPTION: Concrete example showing a fully-formed manifest fragment. Merge this into your manifest.appdescr_variant's root JSON, preserving other existing keys.
LANGUAGE: JSON
CODE:
```json
{
  "sap.app": {
    "id": "my.app.id",
    "type": "application"
  },
  "sap.ui5": {
    "componentUsages": {
      "myComponentUsage": {
        "name": "my.namespace.Component",
        "lazy": true,
        "settings": {
          "theme": "sap_fiori_3",
          "mode": "compact"
        },
        "componentData": {
          "startMode": "auto",
          "featureFlag": "enabled"
        }
      }
    }
  }
}
```

STEP: 4 — Add optional library reference
DESCRIPTION: If the component requires a library reference, add it under "sap.ui5.dependencies.libs". The wizard may present a "lazy" option for library references; to preserve that information, you can add a custom flag (if your runtime/process supports it) or simply add the library entry. Typical UI5 format:
LANGUAGE: JSON
CODE:
```json
{
  "sap.ui5": {
    "dependencies": {
      "libs": {
        "my.library": { }                /* standard UI5 library entry */
      }
    }
  }
}
```

Optional (wizard-style) with lazy flag preserved (non-standard for UI5 libs; include only if your adaptation processing expects it):
```json
{
  "sap.ui5": {
    "dependencies": {
      "libs": {
        "my.library": {
          "lazy": true
        }
      }
    }
  }
}
```

STEP: 5 — Formatting notes for settings and componentData
DESCRIPTION: settings and componentData must be valid JSON objects. If you were provided comma-separated key:value pairs like:
"key1":"value1","key2":"value2",
convert them to a JSON object format as shown below before saving:
LANGUAGE: JSON
CODE:
```json
/* Convert from wizard-like input */
"key1":"value1","key2":"value2",

/* To valid JSON object */
"settings": {
  "key1": "value1",
  "key2": "value2"
}
```

STEP: 6 — Save and validate
DESCRIPTION: Save manifest.appdescr_variant and validate JSON structure. Ensure no trailing commas remain and that the component name matches the component implementation namespace. Deploy or reload the application/adaptation to load the new component usage. 
LANGUAGE: N/A
CODE:
```text
Actions:
1. Save <adaptation-project-root>/manifest.appdescr_variant
2. Run JSON validation (e.g., jsonlint) or your CI JSON linter
3. Deploy/adapt or reload application to verify component is loaded
```
--------------------------------

**TITLE**: Adding SAPUI5 Component Usages Manually (manifest.json / manifest.appdescr_variant)

**INTRODUCTION**: This guide shows how to manually add SAPUI5 component usages and optional library references by editing the application descriptor files (webapp/manifest.json or webapp/manifest.appdescr_variant). Use these JSON snippets to add a component usage ID, set the component name, enable lazy loading, and supply settings and componentData.

**TAGS**: fiori-tools, sapui5, manifest, componentUsages, webapp, manifest.appdescr_variant

**STEP**: 1 — Choose file to edit

**DESCRIPTION**: Decide which descriptor file to update. You can edit:
- webapp/manifest.json (typical runtime descriptor)
- webapp/manifest.appdescr_variant (variant descriptor used by some tooling)

Open the chosen file in your code editor.

**LANGUAGE**: JSON

**CODE**:
```json
// Example file paths:
// - webapp/manifest.json
// - webapp/manifest.appdescr_variant
```

**STEP**: 2 — Add a single component usage entry

**DESCRIPTION**: Insert a component usage under the sap.ui5.componentUsages node. Replace "myUsageId" with your usage ID, "my.component.Name" with the fully qualified component name, and adjust lazy/settings/componentData as needed.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui5": {
    "componentUsages": {
      "myUsageId": {
        "name": "my.component.Name",
        "lazy": true,
        "settings": {
          "key1": "value1",
          "key2": "value2"
        },
        "componentData": {
          "someDataKey": "someDataValue",
          "startupParameters": {
            "param1": ["valueA"]
          }
        }
      }
    }
  }
}
```

**STEP**: 3 — Add multiple component usages

**DESCRIPTION**: Add multiple usage entries by adding additional keys inside componentUsages. Each usage must have a unique ID.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui5": {
    "componentUsages": {
      "usageOne": {
        "name": "component.one.Namespace",
        "lazy": false,
        "settings": { "mode": "compact" }
      },
      "usageTwo": {
        "name": "component.two.Namespace",
        "lazy": true,
        "componentData": { "startupParameters": { "id": ["42"] } }
      }
    }
  }
}
```

**STEP**: 4 — Optional: add a library reference

**DESCRIPTION**: If the component requires a UI5 library, add it under sap.ui5.dependencies.libs. Optionally mark the library as lazy. Replace "my.library" with the library name (e.g., "sap.m").

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui5": {
    "dependencies": {
      "minUI5Version": "1.60.0",
      "libs": {
        "my.library": {
          "lazy": true
        }
      }
    }
  }
}
```

**STEP**: 5 — Full example: component usage plus library entry

**DESCRIPTION**: Complete manifest example combining componentUsages and library dependency entries in one manifest file.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui5": {
    "dependencies": {
      "minUI5Version": "1.60.0",
      "libs": {
        "sap.m": { "lazy": true },
        "sap.ui.core": {}
      }
    },
    "componentUsages": {
      "myUsageId": {
        "name": "my.component.Name",
        "lazy": true,
        "settings": {
          "theme": "sap_fiori_3"
        },
        "componentData": {
          "startupParameters": {
            "paramX": ["val1", "val2"]
          }
        }
      }
    }
  }
}
```

**STEP**: 6 — Save and validate

**DESCRIPTION**: Save the manifest file. Validate JSON syntax and test the application to ensure the component is loaded/resolved as expected. If you edited manifest.appdescr_variant, ensure your tooling or build process picks up variant descriptors.
--------------------------------

**TITLE**: Change Inbound (Adaptation Project — Update Intent Title, Subtitle, Icon)

**INTRODUCTION**: This guide explains how to change the title, subtitle and icon for an existing inbound (intent) in an Adaptation Project. Two approaches are shown: using the Adaptation Project action in the Fiori tools (VS Code) and making the equivalent change directly in manifest.appdescr_variant (JSON).

**TAGS**: fiori-tools, adaptation, manifest.appdescr_variant, inbound, intent, sapui5, flp

**STEP**: 1 — Use Fiori tools UI: Change Inbound via context menu

**DESCRIPTION**: In VS Code open your adaptation project, right-click the manifest.appdescr_variant file, choose the "Adaptation Project - Change Inbound" command, pick the inbound ID to change, enter the new title, subtitle and icon path, then click Finish. This will update the inbound entry in manifest.appdescr_variant.

**LANGUAGE**: Text

**CODE**:
```text
File: <your-adaptation-project>/manifest.appdescr_variant

Context menu:
- Right-click manifest.appdescr_variant
- Select "Adaptation Project - Change Inbound"
- Select the Inbound ID to modify
- Enter:
  - Title (display title shown in FLP)
  - Subtitle (display subtitle)
  - Icon path (e.g. "sap-icon://world" or relative path)
- Click "Finish" to generate the project and update manifest.appdescr_variant
```

**STEP**: 2 — Example: inbound definition BEFORE change

**DESCRIPTION**: Example snippet from manifest.appdescr_variant showing a typical inbound entry that you want to update. Replace "InboundID" with the actual inbound ID used by your app.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.app": {
    "crossNavigation": {
      "inbounds": {
        "InboundID": {
          "semanticObject": "Product",
          "action": "display",
          "title": "Old Title",
          "subTitle": "Old Subtitle",
          "icon": "sap-icon://product"
        }
      }
    }
  }
}
```

**STEP**: 3 — Example: inbound definition AFTER change

**DESCRIPTION**: Equivalent JSON after updating the title, subtitle and icon. This is what the Adaptation Project action will produce in manifest.appdescr_variant, or what you can edit manually.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.app": {
    "crossNavigation": {
      "inbounds": {
        "InboundID": {
          "semanticObject": "Product",
          "action": "display",
          "title": "New Title for Product",
          "subTitle": "Detailed product information",
          "icon": "sap-icon://product-availability"
        }
      }
    }
  }
}
```

**STEP**: 4 — Use localized titles (optional)

**DESCRIPTION**: If you use i18n resource keys instead of literal strings, set the title/subTitle to the resource key and provide translations in the properties file referenced by the adaptation project. Example uses "%KEY%" style which the runtime resolves via the connected i18n bundle.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.app": {
    "crossNavigation": {
      "inbounds": {
        "InboundID": {
          "title": "%inbound.title.product%",
          "subTitle": "%inbound.subtitle.product%",
          "icon": "sap-icon://product-availability"
        }
      }
    }
  }
}
```

**STEP**: 5 — Example: i18n properties file entries

**DESCRIPTION**: Add or update keys in the i18n properties file used by your adaptation project so the localized labels are available in the FLP.

**LANGUAGE**: Properties

**CODE**:
```properties
# File: i18n/i18n.properties
inbound.title.product=New Title for Product
inbound.subtitle.product=Detailed product information
```
--------------------------------

**TITLE**: Check Consistency of Release State for SAPUI5 Apps (CI_UI5_COMP)

**INTRODUCTION**: Verify that a UI5 app's release-state declaration (sap.fiori/cloudDevAdaptationStatus) is consistent between the UI5 BSP (ABAP repository) and the back-end/runtime copy, and that OData services referenced by the UI5 app have the expected release contract (C0 for app, C1 for services). Use the ATC check CI_UI5_COMP in ABAP for automated checks and/or run a local comparison script to detect mismatches before deployment.

**TAGS**: sapui5, atc, ci_ui5_comp, manifest.json, bsp, s4hana, fiori, release-state, cloudDevAdaptationStatus, C0, C1

**STEP**: 1 — Inspect manifest.json and expected values

**DESCRIPTION**: Locate the UI5 descriptor (manifest.json) in your app project or in the BSP package and verify the release-state property: sap.fiori/cloudDevAdaptationStatus. For apps that are released to adaptation projects, the UI5 app should typically be C0 (Extend) and the OData services used by the app should be C1 (Use System Internally). Confirm property presence and value.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.fiori": {
    "cloudDevAdaptationStatus": "C0"
  },
  "sap.app": {
    "id": "your.app.id",
    "dataSources": {
      "YOUR_SERVICE": {
        "uri": "/sap/opu/odata/sap/YOUR_SERVICE_SRV/",
        "type": "OData"
      }
    }
  }
}
```

**STEP**: 2 — Automated local comparison script: compare BSP and back-end manifests and service expected contracts

**DESCRIPTION**: Use this Node.js script to compare two manifest.json files (one exported from the BSP/ABAP UI5 repository and one exported from the back-end/runtime). The script:
- Compares sap.fiori.cloudDevAdaptationStatus values.
- Lists OData dataSources from the manifest and validates them against a provided services-status JSON mapping (serviceName => expected contract, e.g., "C1").
- Reports mismatches and returns a non-zero exit code on failure so you can integrate it into CI.

Place this script in your CI pipeline or run it locally. Provide paths for both manifests and the service-status mapping.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
#!/usr/bin/env node
// compare-manifests.js
// Usage: node compare-manifests.js <bspManifest.json> <backendManifest.json> [services-status.json]

const fs = require('fs');
const path = require('path');

function readJson(filePath) {
  try {
    return JSON.parse(fs.readFileSync(filePath, 'utf8'));
  } catch (e) {
    console.error(`Failed to read/parse JSON from ${filePath}: ${e.message}`);
    process.exit(2);
  }
}

if (process.argv.length < 4) {
  console.error('Usage: node compare-manifests.js <bspManifest.json> <backendManifest.json> [services-status.json]');
  process.exit(2);
}

const bspPath = process.argv[2];
const backendPath = process.argv[3];
const servicesStatusPath = process.argv[4]; // optional

const bsp = readJson(bspPath);
const backend = readJson(backendPath);

function getCloudStatus(manifest) {
  return manifest && manifest['sap.fiori'] && manifest['sap.fiori']['cloudDevAdaptationStatus'];
}

const bspStatus = getCloudStatus(bsp);
const backendStatus = getCloudStatus(backend);

let exitCode = 0;

console.log('BSP cloudDevAdaptationStatus:', bspStatus || '<missing>');
console.log('Backend cloudDevAdaptationStatus:', backendStatus || '<missing>');

if (bspStatus !== backendStatus) {
  console.error('Mismatch: cloudDevAdaptationStatus differs between BSP and backend.');
  exitCode = 1;
} else {
  console.log('cloudDevAdaptationStatus matches.');
}

// Optional: validate services against expected mapping
if (servicesStatusPath) {
  const mapping = readJson(servicesStatusPath); // expected format: { "YOUR_SERVICE": "C1", ... }
  const bspDataSources = bsp && bsp['sap.app'] && bsp['sap.app']['dataSources'] ? bsp['sap.app']['dataSources'] : {};
  const serviceNames = Object.keys(bspDataSources);

  if (serviceNames.length === 0) {
    console.log('No dataSources found in BSP manifest to validate.');
  } else {
    console.log('Validating services in BSP manifest against expected status mapping...');
    serviceNames.forEach(name => {
      const expected = mapping[name];
      if (!expected) {
        console.warn(`- Service ${name}: no expected contract provided in mapping (skip or add entry).`);
        return;
      }
      // This script assumes mapping contains expected contract (e.g., "C1") for the service name.
      // It does NOT fetch runtime service metadata; it's a local consistency check.
      console.log(`- Service ${name}: expected ${expected}`);
    });
  }
}

process.exit(exitCode);
```

**STEP**: 3 — Example services-status mapping file

**DESCRIPTION**: Provide a simple JSON file that maps manifest dataSource keys (names in sap.app/dataSources) to the expected release contract (C1 for services). Use this file with the Node.js script to validate that the services referenced by the UI5 app are expected to be C1.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "YOUR_SERVICE": "C1",
  "ANOTHER_SERVICE": "C1"
}
```

**STEP**: 4 — Run the SAPUI5 Component Consistency ATC check (CI_UI5_COMP)

**DESCRIPTION**: Use ABAP Test Cockpit (ATC) to run the CI_UI5_COMP check in the ABAP environment. This ATC check verifies:
- sap.fiori/cloudDevAdaptationStatus consistency between UI5 app in BSP and the back-end/runtime.
- Release-state consistency between the UI5 app and the OData services it uses (C0 vs C1).
Run ATC in SAP GUI:
- Start transaction ATC.
- Create/Run a new ATC run or remote code check run and include the check variant that contains CI_UI5_COMP.
- Inspect the check results for CI_UI5_COMP in the ATC result list and fix mismatches (manifest.json edits or backend corrections).

For ATC check documentation and details about CI_UI5_COMP, see:
https://ui5.sap.com/#/topic/a71400bc82284449bb6c680a4516cc63

**LANGUAGE**: Text

**CODE**:
```
ATC manual steps (SAP GUI):
1. Go to transaction: ATC
2. Create or schedule a check run (Create -> Add Object(s) -> choose your BSP package or UI5 application)
3. Select a check variant that includes the check 'CI_UI5_COMP'
4. Execute the run and review findings for CI_UI5_COMP in the results list
```

**STEP**: 5 — Remediation guidance (what to change on mismatch)

**DESCRIPTION**: When the comparison or ATC reports mismatches:
- If sap.fiori/cloudDevAdaptationStatus differs:
  - Update manifest.json in the UI5 project (webapp/manifest.json) to the correct value (e.g., "C0" for an app intended for adaptation).
  - Redeploy the UI5 app to the BSP/ABAP repository and re-run the ATC check or re-export the manifest for verification.
- If a service contract is incorrect:
  - Verify the service contract settings in the back-end (service registration or business catalog settings) and correct to the expected contract (C1 for services intended to be stable).
  - Update any documentation or mapping used by CI to reflect correct contracts, then re-run validation.

**LANGUAGE**: Text

**CODE**:
```
Common corrections:
- Edit webapp/manifest.json > sap.fiori > cloudDevAdaptationStatus to "C0" or "C1" as required.
- Re-deploy to BSP (using abapGit, UI5 tooling or your CI pipeline).
- Fix back-end service contract configuration to required contract (C1) in the S/4HANA Cloud or backend admin tools.
- Re-run ATC CI_UI5_COMP and/or local compare script.
```

**REFERENCES**: (include links used by automation or developer)
- ATC Check SAPUI5 Component Consistency: https://ui5.sap.com/#/topic/a71400bc82284449bb6c680a4516cc63
- Extend (C0) contract: https://help.sap.com/docs/SAP_S4HANA_CLOUD/25cf71e63940453397a32dc2b7676947/2ce344a782d74d8aab073fa188af5116.html
- Use System-Internally (C1) contract: https://help.sap.com/docs/SAP_S4HANA_CLOUD/25cf71e63940453397a32dc2b7676947/3ccb57a1a4d04ee192fdc2a849a89158.html
- manifest.json descriptor reference: https://ui5.sap.com/#/topic/be0cf40f61184b358b5faedaec98b2da
- Deploy UI5 app to SAP S/4HANA Cloud (developer doc): https://help.sap.com/docs/SAP_S4HANA_CLOUD/6aa39f1ac05441e5a23f484f31e477e7/2a4ae231df8843379df7a36fa3462d4c
--------------------------------

**TITLE**: Check Whether Your Adaptation Project Is Up-To-Date with Base App Upgrades (ATC: UI5_BASE_APP_VERS)

**INTRODUCTION**: Use the ABAP Test Cockpit (ATC) check "Compare Used and Current Version of Base App" (UI5_BASE_APP_VERS) to detect adaptation projects whose base app version is older than the SAP-delivered base app. This guide shows how to create an ATC variant, run the check for your packages, interpret results, and perform remediation steps (update, redeploy, or rebase adaptation projects).

**TAGS**: fiori-tools, atc, abap, adaptation, base-app, ui5, s4hana-cloud

**STEP**: 1 — Create ATC Check Variant with UI5_BASE_APP_VERS

**DESCRIPTION**: Create an ATC check variant and include the check UI5_BASE_APP_VERS (Compare Used and Current Version of Base App). Use a clear name and scope for the variant so it can be used repeatedly for package scans.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "name": "UI5_BASE_APP_VERS_CHECK",
  "description": "ATC variant to check that adaptation projects use the latest base app version",
  "checks": [
    "UI5_BASE_APP_VERS"
  ],
  "scope": {
    "packages": [
      "Z_MY_ADAPTATION_PACKAGE_1",
      "Z_MY_ADAPTATION_PACKAGE_2"
    ],
    "object_types": ["all"]
  }
}
```

**STEP**: 2 — Run ATC Variant for Your Packages (ADT / ATC)

**DESCRIPTION**: Execute the newly created ATC variant in ABAP Development Tools (ADT) or ATC UI. Select your package(s) or transport requests as the check scope and run the variant to get results that show whether any adaptation uses an older base app version.

**LANGUAGE**: Plain Instructions (pseudocode)

**CODE**:
```text
1. Open ABAP Development Tools (Eclipse/ADT) or ATC web UI.
2. Choose "Run ATC".
3. Select "Variant" -> UI5_BASE_APP_VERS_CHECK (or your variant name).
4. Set Scope: select package(s) or transport request(s) to analyze.
5. Execute the check and wait for results.
```

**STEP**: 3 — Recognize ATC Messages (Examples)

**DESCRIPTION**: The ATC check emits clear messages. Match message text to remediation actions.

**LANGUAGE**: Plain text / samples

**CODE**:
```text
Example message A:
"For the used base app <base app ID> a new version is available, please update"

Action: See STEP 4 (update & test) and STEP 5 (redeploy & refresh IAM).

Example message B:
"The base app <base app ID> was deleted, please check the successor app"

Action: Consider creating a new adaptation project based on the successor app (STEP 6).
```

**STEP**: 4 — Investigate What Changed in the Base App

**DESCRIPTION**: Before updating your adaptation project, review base app changes to identify breaking or relevant changes.

**LANGUAGE**: Links / instructions

**CODE**:
```text
1. Open "What's New in SAP S/4HANA Cloud": https://help.sap.com/whats-new/7d3d11840a6543329e72391cf4d48e2d
2. Filter Category = "App" and search Technical Objects Name for the base app ID (e.g., F3331).
3. Note any UI/behavior/technical changes that impact your adaptation.
```

**STEP**: 5 — Update Adaptation Project Using Visual Editor and Re-deploy

**DESCRIPTION**: Use SAP Business Application Studio (BAS) Visual Editor to fetch and test the new base app version, fix any UI or behavior issues, then re-deploy the adaptation project.

**LANGUAGE**: Plain Instructions

**CODE**:
```text
1. Open SAP Business Application Studio (BAS).
2. Open your adaptation project in the Visual Editor (Visual Editor automatically fetches latest base app).
3. Perform functional and UI tests to verify compatibility with the new base version.
   - Fix any changes caused by the base app upgrade.
4. Re-deploy the adaptation project to the target environment.
5. If applicable, refresh the IAM (Identity and Access Management) app after deployment.
```

**STEP**: 6 — If Base App Was Deleted (Successor App Handling)

**DESCRIPTION**: If ATC reports the base app was deleted, the error doesn’t immediately stop existing deployed adaptations. However, create a new adaptation project based on the successor app to ensure future compatibility.

**LANGUAGE**: Plain Instructions

**CODE**:
```text
1. Confirm: "The base app <base app ID> was deleted, please check the successor app"
2. Identify successor app (check SAP release notes or What's New viewer).
3. Create a new adaptation project using the successor base app.
4. Migrate or recreate required adaptations in the new project.
5. Test and deploy the new adaptation project.
```

**STEP**: 7 — Best Practices and Compliance Notes

**DESCRIPTION**: Follow SAP rules: SAP provides fixes only for the latest version of the base application. Use the Upgrade Safe Compatibility Rules when applying updates to avoid conflicts.

**LANGUAGE**: Links / short actionable notes

**CODE**:
```text
- Note: SAP supports fixes only for the latest base app version; keep adaptation projects current.
- Review Upgrade Safe Compatibility Rules: upgrade-safe-compatibility-rules-53706e2.md
- Additional ATC references:
  - Working with ATC Checks: https://help.sap.com/docs/SAP_S4HANA_CLOUD/25cf71e63940453397a32dc2b7676947/438842e71bfa4ff09443562f5ce2282d.html
  - ATC Quality Checking: https://help.sap.com/docs/SAP_S4HANA_CLOUD/25cf71e63940453397a32dc2b7676947/4ec1a1126e391014adc9fffe4e204223.html
  - Checking Quality of ABAP Code with ATC: https://help.sap.com/docs/SAP_S4HANA_CLOUD/25cf71e63940453397a32dc2b7676947/4ec5711c6e391014adc9fffe4e204223.html
```

**STEP**: 8 — Automation & Regular Checks (Optional)

**DESCRIPTION**: Schedule/automate ATC runs for adaptation packages to detect base app updates early.

**LANGUAGE**: Plain Instructions / pseudocode

**CODE**:
```text
1. Define a job or CI step that triggers ATC with UI5_BASE_APP_VERS_CHECK against adaptation packages (e.g., nightly/weekly).
2. Collect and surface results to owners (email/alerting/issue tracker).
3. Prioritize adaptation projects that fail the UI5_BASE_APP_VERS check for upgrade.
```
--------------------------------

**TITLE**: Controller Extension — Create, Wire, and Load in an SAP Fiori Adaptation Project

**INTRODUCTION**: Quick, code-focused guide for adding a controller extension in an SAP Fiori adaptation project. Covers prerequisites, where files are created, a reusable JavaScript extension example (override + custom methods), how to wire fragment event handlers to the extension, and how to load the change in the preview/editor.

**TAGS**: sapui5, fiori-tools, controller-extension, adaptation, webapp/changes, fragment, XML, JavaScript

STEP: Prerequisites
DESCRIPTION: Ensure your project supports controller extensions. Requirements:
- Project type: SAP Fiori elements-based application or freestyle SAPUI5 application.
- Views must be asynchronous.
- Custom business logic files must be placed under webapp/changes/coding (do not create folders at higher levels).
LANGUAGE: Text
CODE:
```
Requirements:
- SAP Fiori elements OR freestyle SAPUI5
- Asynchronous views enabled
- Place extension code files in: webapp/changes/coding/
```

STEP: Open the Adaptation Editor (Preview)
DESCRIPTION: From your project in the workspace, open the application preview and start the adaptation editor.
- Right-click the project main folder, the webapp folder, or manifest.appdescr_variant → Preview Application → click Start Editor.
- The application opens in the canvas in UI Adaptation mode.
LANGUAGE: Text
CODE:
```
1. Right-click project or webapp or manifest.appdescr_variant
2. Click: Preview Application
3. In preview: click Start Editor
```

STEP: Create Controller Extension from Canvas
DESCRIPTION: From the canvas select a view or element to extend and create the controller extension.
- Canvas context menu: Extend with Controller.
- Quick action: Add Controller to Page (useful for list report/object page).
- When created:
  - Controller .js is created at: webapp/changes/coding/<YourExtensionName>.js
  - A controllerExtension change file referencing that .js is created at: webapp/changes/<YourExtensionName>.controllerExtension.change
LANGUAGE: Text
CODE:
```
Created files (example):
- webapp/changes/coding/MyControllerExtension.js
- webapp/changes/MyControllerExtension.controllerExtension.change
```

STEP: Controller Extension JavaScript Example
DESCRIPTION: Minimal, production-ready skeleton. Put this file in webapp/changes/coding/MyControllerExtension.js. Structure:
- "override" object: lifecycle overrides (onInit, onBeforeRendering, etc.) — define only inside override.
- Custom methods: define outside override (these are callable from fragments and view event handlers).
LANGUAGE: JavaScript
CODE:
```javascript
// File: webapp/changes/coding/MyControllerExtension.js
sap.ui.define([], function () {
  "use strict";
  return {
    // Lifecycle method overrides go inside 'override'
    override: {
      onInit: function () {
        // Initialization code that replaces/augments base controller onInit
        var oView = this.getView();
        // Example: attach a local JSON model
        oView.setModel(new sap.ui.model.json.JSONModel({}), "localExt");
      }
      // Add other lifecycle overrides here: onBeforeRendering, onAfterRendering, etc.
    },

    // Custom methods must be defined outside the 'override' object
    onCustomButtonPress: function (oEvent) {
      // Handler for fragment or view events
      var sId = oEvent.getSource().getId();
      // Example: log or manipulate view/models
      console.log("Controller extension handler fired for:", sId);
      // Access view and models as usual
      var oView = this.getView();
      var oLocalModel = oView.getModel("localExt");
      // ...custom logic...
    }
  };
});
```

STEP: XML Fragment — Bind Event Handler to Extension Method
DESCRIPTION: In the fragment XML, prefix the handler reference with ".extension.<controller extension namespace>.<methodName>".
- Replace <controller extension namespace> with the namespace chosen when creating the extension (no leading slash).
- Save the fragment after editing.
LANGUAGE: XML
CODE:
```xml
<!-- File: webapp/fragment/MyFragment.fragment.xml -->
<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core">
  <!-- Event handler bound to the controller extension method:
       ".extension.<namespace>.<methodName>" -->
  <Button text="Press me"
          press=".extension.myCompany.myControllerExt.onCustomButtonPress" />
</core:FragmentDefinition>
```

STEP: Where the Change File Points (example)
DESCRIPTION: The adaptation tool creates a change file that references the .js extension code. This file lives in webapp/changes and points to the coding file in webapp/changes/coding. Example structure (tool creates this automatically).
LANGUAGE: JSON
CODE:
```json
// Example: webapp/changes/MyControllerExtension.controllerExtension.change
{
  "changeType": "controllerExtension",
  "fileName": "MyControllerExtension.js",
  "reference": "changes/coding/MyControllerExtension.js"
}
```

STEP: Save and Reload
DESCRIPTION: After saving:
- Reload the browser tab for the adaptation project editor and the application preview (if opened in a separate tab) to load the added change.
- Confirm the extension is active by triggering the fragment/view actions bound to extension methods.
LANGUAGE: Text
CODE:
```
1. Save: webapp/changes/coding/MyControllerExtension.js
2. Save: any modified fragment/view XML
3. Reload the adaptation editor and the preview tab
```

STEP: Notes and Best Practices
DESCRIPTION: Important behavior and constraints:
- For list report, object page, and overview page apps: the generated .js may include template-provided helper methods in addition to lifecycle methods — reuse or override them as needed.
- For analytical list page apps: generated .js typically contains lifecycle methods only.
- Always define new custom methods outside the override section; lifecycle overrides must be inside the override section.
- Keep all custom logic files under webapp/changes/coding. Creating folders at higher levels invalidates the project structure and prevents deployment.
LANGUAGE: Text
CODE:
```
- Template helpers: available for list/object/overview templates
- Analytical list page: only lifecycle methods generated
- File placement required: webapp/changes/coding/
- Handler binding pattern: ".extension.<namespace>.<methodName>"
```
--------------------------------

**TITLE**: Creating and Using Controller Extensions (SAPUI5 / Fiori Tools)

**INTRODUCTION**: Practical, code-focused guidance for creating a controller extension in an adaptation project (Fiori Tools). Covers required project constraints, file locations, example controller extension (.js) structure (with lifecycle overrides and public methods), the companion change file, and how to bind fragment XML event handlers to the extension.

**TAGS**: sapui5, fiori, controller-extension, adaptation, webapp/changes, changes/coding, fragment, event-binding

**STEP**: Prerequisites and constraints

**DESCRIPTION**: Confirm your project supports controller extensions and asynchronous views. Controller extensions are supported for SAP Fiori elements apps and freestyle SAPUI5 apps. Views must be loaded asynchronously to use extension wiring from fragments.

**LANGUAGE**: Text

**CODE**:
```text
- Project types supported: SAP Fiori elements-based applications OR freestyle SAPUI5 applications.
- Views must be asynchronous (UI5 async view loading).
- All controller extension JS files and any additional custom business logic files MUST be placed under:
  <your-project>/webapp/changes/coding/
- Do NOT create new folders above changes/coding for custom code (this invalidates project structure and prevents deployment).
```

**STEP**: Create controller extension via Adaptation Editor (UI)

**DESCRIPTION**: Use the Adaptation Editor to create a controller extension and automatically generate the controller .js file and a companion .codeExt.change file. This step describes the expected UI flow and file locations.

**LANGUAGE**: Text

**CODE**:
```text
UI Flow:
1. In your workspace, expand the webapp folder.
2. Right-click manifest.appdescr_variant and choose: Open Adaptation Editor.
3. In the Adaptation Editor canvas, click Edit.
4. Select the target view (or element) and use the project context menu: Extend with Controller.
   - Tip: Use "Add Controller to Page" quick action for page-level controller (List Report / Object Page).
5. Provide a name for the controller extension when prompted.

Files created:
- Controller JS file -> <your-project>/webapp/changes/coding/<YourControllerExtension>.js
- Companion change file -> <your-project>/webapp/changes/<YourControllerExtension>.codeExt.change
```

**STEP**: Controller extension JS file — minimal template and rules

**DESCRIPTION**: Use this module pattern. Put lifecycle overrides inside an override object. Define new public methods outside override. Save the file in webapp/changes/coding. Example uses an extension namespace "my.sample.ControllerExtension" — adapt to your chosen namespace.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// File: webapp/changes/coding/my.sample.ControllerExtension.js
sap.ui.define([], function () {
  "use strict";

  // Returned object: "override" contains lifecycle overrides.
  // Define new public methods outside "override".
  return {
    override: {
      /**
       * Called when the controller is initialized.
       * You can call base functionality (if needed) via this.base.* if available,
       * or use the injected controller instance depending on runtime context.
       */
      onInit: function () {
        // override onInit lifecycle
        // Example: attach a model, add initialization logic
        // this.getView() is available when executed in runtime controller context
        // ...
      },

      onBeforeRendering: function () {
        // override onBeforeRendering
      },

      onAfterRendering: function () {
        // override onAfterRendering
      },

      onExit: function () {
        // cleanup
      }
    },

    /**
     * Public method (must be defined OUTSIDE the override block).
     * This example method can be bound from an XML fragment as an event handler.
     */
    publicMethod: function (oEvent) {
      // oEvent is the event object when invoked via XML fragment binding
      // Implement handler logic
      sap.m.MessageToast.show("ControllerExtension.publicMethod called");
    }

    // Add more public methods here
  };
});
```

**STEP**: Companion .codeExt.change file (example placeholder)

**DESCRIPTION**: The Adaptation Editor generates a companion change file that references the JS module. The exact internal fields may vary by tooling version; below is a safe example pattern showing the relation. Keep this file in webapp/changes.

**LANGUAGE**: JSON

**CODE**:
```json
// File (example): webapp/changes/my.sample.ControllerExtension.codeExt.change
{
  "fileName": "my.sample.ControllerExtension.codeExt.change",
  "fileType": "change",
  "changeType": "codeExt",
  "reference": "changes/coding/my.sample.ControllerExtension.js",
  "description": "Controller extension module referenced by adaptation change"
}
```

**STEP**: Bind an XML fragment event to the controller extension method

**DESCRIPTION**: Manually associate an event in your fragment XML to the controller extension method. Prefix the method with .extension.<controller extension namespace>.<methodName>. Example below binds the Button press event to publicMethod in the "my.sample.ControllerExtension" extension.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- File: webapp/fragments/MyFragment.fragment.xml -->
<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core">
  <Button
    text="Execute"
    press=".extension.my.sample.ControllerExtension.publicMethod" />
</core:FragmentDefinition>
```

**STEP**: Implementation rules and best practices

**DESCRIPTION**: Use these rules to avoid common mistakes when authoring controller extensions.

**LANGUAGE**: Text

**CODE**:
```text
- Lifecycle override methods must be placed under the "override" property of the returned object.
- New public methods must be declared outside the "override" block.
- Place all controller extension modules and any custom business logic files in:
  <your-project>/webapp/changes/coding/
- Do not create folders above the changes/coding path for these files.
- After saving changes, reload the Adaptation Editor canvas to load controller extension changes.
  The editor shows: "Loading Adaptation Editor with Controller Extension changes".
- Controller extensions delivered by adaptation projects are added under the reserved .extension namespace
  to avoid collisions (use .extension.<your.namespace> prefix in fragment XML).
```

**STEP**: Verify and test

**DESCRIPTION**: Reload the Adaptation Editor canvas, exercise the fragment control (e.g., press the button) and validate behavior (console, network, UI).

**LANGUAGE**: Text

**CODE**:
```text
- Save all files.
- Reload the Adaptation Editor canvas or refresh the running app.
- Trigger the control bound to the extension method (e.g., click the Button).
- Check browser console and network tab for any load errors (module path or namespace issues).
```
--------------------------------

**TITLE**: Create and Work with Control Variants (Views) using VariantManagement / SmartVariantManagement

**INTRODUCTION**: This guide shows how to prepare an SAPUI5 app for UI adaptation and add VariantManagement or SmartVariantManagement controls to an XML view so the Adaptation Editor can create, load, change, and save control variants (called "views" on the UI). Includes safe, code-focused XML and runtime JavaScript patterns to inspect and operate on variant controls.

**TAGS**: sapui5, variants, VariantManagement, SmartVariantManagement, adaptation, Adaptation Editor, UI5, fiori-tools

STEP: 1 — Prerequisites
DESCRIPTION: Confirm SAPUI5 version compatibility and that the application is enabled for UI adaptation. Keep VariantManagement or SmartVariantManagement control in the XML view that will be adapted.
LANGUAGE: JSON
CODE:
```json
{
  "prerequisites": {
    "VariantManagement": {
      "minSAPUI5Version": "1.73",
      "apiReference": "https://ui5.sap.com/#/api/sap.ui.fl.variants.VariantManagement"
    },
    "SmartVariantManagement": {
      "minSAPUI5Version": "1.90",
      "apiReference": "https://sapui5.hana.ondemand.com/#/api/sap.ui.comp.smartvariants.SmartVariantManagement"
    },
    "note": "Enable your application for UI adaptation (see SAPUI5 Flexibility: Enable Your App for UI Adaptation). Include the appropriate variant control in the page XML view that will be adapted."
  },
  "links": {
    "enableAdaptation": "https://ui5.sap.com/#/topic/f1430c0337534d469da3a56307ff76af",
    "creatingAndAdaptingViews": "https://help.sap.com/viewer/4fc8d03390c342da8a60f8ee387bca1a/latest/en-US/91ae3492323b42a79ca66fbfaf5af3f9.html"
  }
}
```

STEP: 2 — Add sap.ui.fl.variants.VariantManagement to an XML view
DESCRIPTION: Insert the VariantManagement control into the XML view where users will switch or create views. This is the runtime control that the Adaptation Editor manages for control variants.
LANGUAGE: XML
CODE:
```xml
<mvc:View
  xmlns:mvc="sap.ui.core.mvc"
  xmlns:fl="sap.ui.fl.variants"
  xmlns:core="sap.ui.core"
  controllerName="your.namespace.Controller"
  displayBlock="true">
  <!-- Example: Variant management for a UI section -->
  <fl:VariantManagement
    id="variantMgmt"
    showShare="true"
    tooltip="Choose or create a view (variant)"/>
  <!-- Place the control(s) whose variants you want managed by this VariantManagement here -->
</mvc:View>
```

STEP: 3 — Add sap.ui.comp.smartvariants.SmartVariantManagement to an XML view (optional)
DESCRIPTION: Use SmartVariantManagement when working with Smart controls (SmartTable, SmartFilterBar) or when you need compatibility with sap.ui.comp features.
LANGUAGE: XML
CODE:
```xml
<mvc:View
  xmlns:mvc="sap.ui.core.mvc"
  xmlns:smart="sap.ui.comp.smartvariants"
  controllerName="your.namespace.Controller"
  displayBlock="true">
  <!-- SmartVariantManagement example -->
  <smart:SmartVariantManagement
    id="smartVariantMgmt"
    showShare="true"/>
  <!-- Smart controls (SmartTable, SmartFilterBar) will register with this manager -->
</mvc:View>
```

STEP: 4 — Runtime: find the variant control and inspect its aggregations (safe pattern)
DESCRIPTION: Use this JavaScript pattern to locate the VariantManagement or SmartVariantManagement control in a controller, list its aggregations and aggregated objects, then inspect variant items. This avoids relying on control-specific method names and is robust across UI5 versions.
LANGUAGE: JavaScript
CODE:
```javascript
// In your controller
onInit: function () {
  // byId works when control is inside the same view
  var oVariantMgmt = this.byId("variantMgmt") || this.byId("smartVariantMgmt");
  if (!oVariantMgmt) {
    console.warn("Variant control not found by id in this view.");
    return;
  }

  // Discover aggregations exposed by the control
  var mAggregations = oVariantMgmt.getMetadata().getAllAggregations();
  Object.keys(mAggregations).forEach(function (sAggName) {
    var aAggItems = oVariantMgmt.getAggregation(sAggName);
    if (!aAggItems) { return; }
    // Log aggregation name and number of items
    console.log("Aggregation:", sAggName, "count:", Array.isArray(aAggItems) ? aAggItems.length : (aAggItems ? 1 : 0));
    // If aggregation contains variant items, inspect them
    if (Array.isArray(aAggItems)) {
      aAggItems.forEach(function (oItem, i) {
        // Safe inspection of item properties
        console.log("  Item", i, {
          id: oItem.getId && oItem.getId(),
          metadata: oItem.getMetadata && oItem.getMetadata().getName(),
          properties: oItem.mProperties || {}
        });
      });
    } else if (aAggItems) {
      console.log("  Single aggregated object:", aAggItems);
    }
  });
}
```

STEP: 5 — Adaptation Editor: create, load, change, and save variants (process)
DESCRIPTION: Use the Adaptation Editor UI (accessible via the Fiori shell/Key User features or fiori-tools) to create, load, edit, and save control variants for the VariantManagement or SmartVariantManagement control. The Adaptation Editor follows the same flow as the key user scenario; for views/variants you do not need to publish changes — changes are saved as ordinary changes in the adaptation project.
LANGUAGE: JSON
CODE:
```json
{
  "procedure": [
    "Open the Adaptation Editor for your app (via the Fiori shell or fiori-tools).",
    "Select the page or control containing the VariantManagement / SmartVariantManagement control.",
    "Use the Variants (Views) UI to create a new variant, modify existing variants, or switch the current variant.",
    "Save your changes in the adaptation project. (Variants are stored as ordinary changes in your adaptation project; publishing is not required for control variants.)"
  ],
  "reference": "See 'Creating and Adapting Views' for the full key user flow: https://help.sap.com/viewer/4fc8d03390c342da8a60f8ee387bca1a/latest/en-US/91ae3492323b42a79ca66fbfaf5af3f9.html"
}
```

STEP: 6 — Notes on persistence and behavior
DESCRIPTION: Variants created via the Adaptation Editor are saved as UI adaptation changes in your adaptation project (flex changes). No additional publish step is required for these control variants; they behave like other changes in the adaptation flow.
LANGUAGE: JSON
CODE:
```json
{
  "behavior": {
    "saveType": "Adaptation project change (flexibility change)",
    "publishRequired": false,
    "visibility": "Available to end users according to the adaptation/project scope and transport configuration"
  }
}
```
--------------------------------

**TITLE**: Create Control Variants (Views) for Adaptation Editor

**INTRODUCTION**: This guide shows how to add control variant support to an SAPUI5 page so the Adaptation Editor can create, load, change, and save control variants (also called "views"). It includes the manifest.json entries and example XML view snippets for both sap.ui.fl.variants.VariantManagement and sap.ui.comp.smartvariants.SmartVariantManagement so you can enable UI adaptation and register a control for variant management.

**TAGS**: fiori-tools, sapui5, variants, adaptation-editor, variantmanagement, smartvariants

**STEP**: 1 — Ensure prerequisites & libraries

**DESCRIPTION**: Add the required SAPUI5 library dependencies to your application manifest and ensure the application is enabled for UI adaptation (sap.ui.fl and sap.ui.comp libraries). Use these manifest.json entries in your Component/manifest so the libraries are loaded and available in your runtime.

**LANGUAGE**: JSON

**CODE**:
```json
// webapp/manifest.json (partial)
{
  "sap.ui5": {
    "dependencies": {
      "minUI5Version": "1.XX.0",
      "libs": {
        "sap.ui.fl": {},
        "sap.ui.comp": {},
        "sap.m": {}
      }
    },
    "rootView": {
      "viewName": "my.app.view.Main",
      "type": "XML",
      "id": "app"
    }
  }
}
```

**STEP**: 2 — Add VariantManagement to an XML view

**DESCRIPTION**: Put sap.ui.fl.variants.VariantManagement (variant control) into the page XML view where you want variants to be available. Add the appropriate XML namespace mapping for sap.ui.fl.variants and sap.ui.comp.smartvariants if you use SmartVariantManagement. The example below shows a VariantManagement control plus a SmartTable registered with SmartVariantManagement.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- webapp/view/Main.view.xml -->
<mvc:View
  controllerName="my.app.controller.Main"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  xmlns:fl="sap.ui.fl.variants"
  xmlns:smart="sap.ui.comp.smartvariants"
  xmlns:smartTable="sap.ui.comp.smarttable">

  <!-- Generic Variant Management control (flavors of variant handling in Adaptation Editor) -->
  <fl:VariantManagement id="variantMgmt" />

  <!-- SmartVariantManagement: used by sap.ui.comp controls (e.g., SmartTable) -->
  <smart:SmartVariantManagement id="smartVariantMgmt" />

  <!-- Example control that supports variant management (SmartTable using SmartVariantManagement) -->
  <smartTable:SmartTable
    id="mySmartTable"
    entitySet="MyEntitySet"
    tableType="Table"
    header="Example SmartTable"
    useVariantManagement="true"
    persistencyKey="mySmartTableKey"
    smartVariant="smartVariantMgmt">
    <!-- table content / columns configured via metadata/annotations -->
  </smartTable:SmartTable>

</mvc:View>
```

**STEP**: 3 — Controller: access VariantManagement / SmartVariantManagement instances

**DESCRIPTION**: Access the VariantManagement or SmartVariantManagement instances from your controller to perform runtime operations (for example, read selected variant or trigger programmatic behavior). Use getView().byId(...) to get the controls. Do not rely on these calls for Adaptation Editor usage, but they are useful for integration testing or custom logic.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// webapp/controller/Main.controller.js (snippet)
sap.ui.define([
  "sap/ui/core/mvc/Controller"
], function (Controller) {
  "use strict";

  return Controller.extend("my.app.controller.Main", {
    onInit: function () {
      var oVariantMgmt = this.getView().byId("variantMgmt");         // sap.ui.fl.variants.VariantManagement
      var oSmartVariant = this.getView().byId("smartVariantMgmt"); // sap.ui.comp.smartvariants.SmartVariantManagement
      var oSmartTable = this.getView().byId("mySmartTable");       // control registered with variant handling

      // Example: inspect current variants (API usage depends on control type)
      // Use control-specific APIs to query available variants or apply a variant
      // For Adaptation Editor workflow, variant creation/changed events are handled by the framework/editor.
    }
  });
});
```

**STEP**: 4 — Use the Adaptation Editor to create and save variants

**DESCRIPTION**: Open the Adaptation Editor (Fiori Tools or environment-specific UI adaptation tool) with the page that contains VariantManagement/SmartVariantManagement. Create, load, edit, and save variants from the Adaptation Editor UI. In the developer/adaptation project scenario you do not need to publish changes — they are stored as ordinary changes in your adaptation project.

**LANGUAGE**: TXT

**CODE**:
```text
Procedure overview:
1. Launch the Adaptation Editor for your app/page that contains the VariantManagement control.
2. Select the control to adapt (the VariantManagement or the control it manages, e.g., SmartTable).
3. Create a new variant (view) in the editor UI, make layout/visibility changes as needed.
4. Save the variant in the adaptation project. No publish step is required in developer/adaptation mode.
```

**STEP**: 5 — Notes and pointers

**DESCRIPTION**: Key facts and references for implementation and troubleshooting.

**LANGUAGE**: TXT

**CODE**:
```text
- Variant control: sap.ui.fl.variants.VariantManagement must be present in the XML view to enable control-level variants.
- For smart controls, use sap.ui.comp.smartvariants.SmartVariantManagement and configure the control (e.g., SmartTable) with useVariantManagement and a persistencyKey.
- See SAPUI5 docs: "SAPUI5 Flexibility: Enable Your App for UI Adaptation" and API references:
  - sap.ui.fl.variants.VariantManagement
  - sap.ui.comp.smartvariants.SmartVariantManagement
- Adaptation Editor saves changes as adaptation project changes; in this developer mode you do not need to publish changes.
```
--------------------------------

**TITLE**: Create an SAPUI5 Adaptation Project in S/4HANA Cloud (Public Edition)

**INTRODUCTION**: Step-by-step developer-focused instructions to create an adaptation project from an existing SAP Fiori elements or freestyle SAPUI5 application in SAP S/4HANA Cloud Public Edition using VS Code and the SAPUI5 Adaptation Project template wizard.

**TAGS**: fiori-tools, sapui5, adaptation, s4hana-cloud, vs-code, yeoman, extension

**STEP**: Prerequisites

**DESCRIPTION**: Ensure your dev space and environment are ready before creating the adaptation project.

**LANGUAGE**: Plaintext

**CODE**:
```text
- Dev space: Open the dev space you will use in VS Code.
- Required extension: "SAPUI5 Adaptation Project" must be included in the dev space (predefined or manually selected during dev space creation).
- Workspace: Ensure you have a folder named "projects" (or other chosen folder) available to open in VS Code.
```

**STEP**: Open the target folder in VS Code

**DESCRIPTION**: Open the workspace folder where the generated project will be created.

**LANGUAGE**: Plaintext

**CODE**:
```text
1. In VS Code: File > Open Folder...
2. Select the "projects" folder in your workspace and click OK.
Example path: /home/<user>/workspace/projects
```

**STEP**: Launch the Template Wizard (Yeoman generator)

**DESCRIPTION**: Start the template wizard from VS Code Command Palette and select the Adaptation Project tile.

**LANGUAGE**: Plaintext

**CODE**:
```text
1. In VS Code: View > Command Palette
2. Type "Open Template Wizard" and select it from the list.
3. In the wizard UI, click the "Adaptation Project" tile and then select "Start".
```

**STEP**: Configure project in the wizard — Select Environment

**DESCRIPTION**: Choose the target environment for the adaptation project.

**LANGUAGE**: Plaintext

**CODE**:
```text
- Step label: Select Environment
- Action: Select "ABAP" as the Target Environment
```

**STEP**: Configure project in the wizard — Project name, title, and namespace

**DESCRIPTION**: Provide a unique project name, a user-facing application title, and a namespace that must start with "customer.".

**LANGUAGE**: Plaintext

**CODE**:
```text
- Project name: must be unique in the system (example: my-adaptation-project)
- Application title: human-readable title displayed in the app (example: "Customer Adaptation App")
- Namespace: must start with "customer."
  Example: customer.myproject
  (Enter only the part after customer., but ensure final namespace is customer.<yourName>)
```

**STEP**: Configure project in the wizard — System selection and authentication

**DESCRIPTION**: Select the target S/4HANA Cloud system, optionally provide credentials, and let the wizard detect the system type.

**LANGUAGE**: Plaintext

**CODE**:
```text
- Select a system from the provided list.
- Optional: Enter username and password if required.
  - After entering password, click the "Login" button inside the password field to authenticate.
  - Note: Basic authentication is supported.
- System type will be auto-detected (expected: "CloudReady").
```

**STEP**: Configure project in the wizard — Select application and finish

**DESCRIPTION**: Choose the extensible application to adapt and finish generation.

**LANGUAGE**: Plaintext

**CODE**:
```text
- The wizard lists only applications extensible in adaptation projects.
- Choose the application you want to adapt.
- Click "Finish".
- Wait for the generator to complete. A notification will appear when the project has been generated and saved for future use.
```

**STEP**: Post-generation: Preview and continue development

**DESCRIPTION**: After generation, preview the adaptation project or continue developing adaptations.

**LANGUAGE**: Plaintext

**CODE**:
```text
- Notification: Project generated and saved for future use.
- Preview: See "Previewing an Adaptation Project" (previewing-an-adaptation-project-64cc15b.md)
- Continue developing: See "Making Adaptations" (making-adaptations-6d2cfea.md)
```
--------------------------------

**TITLE**: Create an Adaptation Project in an On-Premise System (Fiori Tools)

**INTRODUCTION**: Step-by-step instructions and example inputs for generating an Adaptation Project in Visual Studio Code using the Fiori Tools template wizard. Use the command palette commands and the sample configuration JSON to automate or feed the generator in scripts or programmatic helpers.

**TAGS**: fiori-tools, sapui5, adaptation, vscode, tutorial, generator

**STEP**: 1 — Open Visual Studio Code

**DESCRIPTION**: Launch VS Code in the folder where you want to create the adaptation project. If you already have the workspace open, proceed to the next step.

**LANGUAGE**: Shell

**CODE**:
```bash
# Open current directory in VS Code
code .

# Or open a specific folder
code /path/to/your/workspace
```

**STEP**: 2 — Launch the Adaptation Project Generator (first-time only)

**DESCRIPTION**: If this is the first adaptation project you create, open the Command Palette and run the Fiori Tools generator entrypoint. This registers and shows the generator UI.

**LANGUAGE**: Text

**CODE**:
```text
# Open the Command Palette (Ctrl+Shift+P or Cmd+Shift+P) and type:
Fiori: Open Adaptation Project Generator
```

**STEP**: 3 — Open the Template Wizard

**DESCRIPTION**: Use the template wizard to select the Adaptation Project tile and start the guided project setup.

**LANGUAGE**: Text

**CODE**:
```text
# Open the Command Palette and run:
Fiori: Open Template Wizard

# Then click the "Adaptation Project" tile in the wizard.
```

**STEP**: 4 — Configure project basics in the wizard

**DESCRIPTION**: Enter the basic project metadata the wizard requests. The wizard fields map to these programmatic inputs. The Namespace field must be entered after the literal prefix "customer." (e.g., customer.myproject).

**LANGUAGE**: JSON

**CODE**:
```json
{
  "projectName": "my-adaptation-project",
  "appTitle": "My Adaptation App",
  "namespace": "customer.myproject",   // Enter only the suffix after "customer."
  "sapui5Version": "1.108.0",         // choose from the dropdown list
  "system": {
    "id": "ONPREM_SYSTEM",
    "host": "sap.onprem.example",
    "client": "100"
  },
  "applicationId": "Z_MY_FIORI_APP"   // choose the target application from list
}
```

**STEP**: 5 — Wizard selection flow (detailed)

**DESCRIPTION**: Follow these UI steps in the wizard to finalize configuration:
- Enter project name and application title.
- In Namespace, append the project name after the literal "customer." (e.g., customer.myproject).
- Click Next.
- Choose an SAPUI5 version from the dropdown.
- Select the on-premise system to connect to (ensure your system entries are configured in your Fiori Tools / Cloud Connector or ABAP connection settings).
- Choose the target application to adapt.
- Click Finish to generate the project.

**LANGUAGE**: Text

**CODE**:
```text
Wizard actions (manual):
1) Project name: my-adaptation-project
2) Application title: My Adaptation App
3) Namespace: (after "customer.") myproject  -> results in customer.myproject
4) Next -> Select SAPUI5 version (e.g., 1.108.0)
5) Select system (ONPREM_SYSTEM)
6) Select application (Z_MY_FIORI_APP)
7) Finish -> generator creates project files in workspace
```

**STEP**: 6 — Example of generated artifacts and follow-up actions

**DESCRIPTION**: After generation, the project contains standard SAPUI5 and adaptation scaffolding. Preview and continue development with provided tooling. Use these links and commands as next steps.

**LANGUAGE**: Text

**CODE**:
```text
# Preview the adaptation project:
See: Previewing an Adaptation Project (previewing-an-adaptation-project-8701335.md)

# Continue development:
See: Making Adaptations (making-adaptations-2a076dd.md)
See: Create New SAPUI5 Extensions:
https://help.sap.com/docs/bas/developing-sap-fiori-app-in-sap-business-application-studio/create-new-sapui5-extensions?locale=en-US
```
--------------------------------

**TITLE**: Deleting an Adaptation Project (CLI undeploy)

**INTRODUCTION**: This guide shows how to remove an adaptation project (app variant) from the back-end using the Command Line Interface in SAP Business Application Studio by running the project's undeploy script (npm run undeploy). Use this when you no longer need the deployed app variant and want to remove it from the back-end system.

**TAGS**: fiori-tools, sap-business-application-studio, cli, adaptation-project, undeploy, npm

**STEP**: 1 — Open a terminal in SAP Business Application Studio

**DESCRIPTION**: Launch a terminal inside SAP Business Application Studio to run CLI commands in your workspace.

**LANGUAGE**: Shell

**CODE**:
```shell
# In SAP Business Application Studio:
# Main menu -> Terminal -> New Terminal
# This opens a terminal in the workspace root (or the current project folder).
```

**STEP**: 2 — Run the undeploy command

**DESCRIPTION**: Execute the project's undeploy script via npm. This script performs the removal of the adaptation project from the back-end. Run this from the project folder that contains package.json.

**LANGUAGE**: Shell

**CODE**:
```shell
# From the project folder containing package.json:
npm run undeploy
```

**STEP**: 3 — Confirm the undeploy script exists in package.json

**DESCRIPTION**: If npm returns "missing script: undeploy", inspect package.json to confirm an "undeploy" script is defined. If it's missing, add or adapt an appropriate undeploy script for your project/tooling.

**LANGUAGE**: Shell

**CODE**:
```shell
# Show the undeploy script value (requires jq; optional)
cat package.json | jq '.scripts.undeploy'

# Or open package.json in the editor:
# - Use the file browser in SAP Business Application Studio or
# - Use a terminal editor:
code package.json   # if code command is available
```

**STEP**: 4 — Example placeholder for package.json scripts (add only if required)

**DESCRIPTION**: Template example showing where an undeploy script belongs. Replace the placeholder command with the actual undeploy command used by your project (tool-specific).

**LANGUAGE**: JSON

**CODE**:
```json
{
  "name": "my-adaptation-project",
  "version": "1.0.0",
  "scripts": {
    "start": "node ./start.js",
    "build": "npm run build:ui",
    "undeploy": "echo \"Replace this with your project's undeploy command\""
  }
}
```
--------------------------------

**TITLE**: Deleting an Adaptation Project (App Variant) in Fiori Tools

**INTRODUCTION**: Instructions to delete an adaptation project (app variant) from your ABAP system. Includes two concrete methods: using the Fiori Tools Deployment Wizard and using the ABAP report /UI5/DEL_ADAPTATION_PROJECT. Preserves required prerequisites, exact file paths, UI actions, and keyboard shortcuts. Caution: deleting an adaptation project also deletes any app variants created from it by key users.

**TAGS**: fiori-tools, adaptation-project, app-variant, undeploy, ABAP, SE38, /UI5/DEL_ADAPTATION_PROJECT, manifest.appdescr_variant, SAP_UI_FLEX_DEVELOPER, SAP_UI_7.55

**STEP**: 1 — Using the Deployment Tool (Fiori Tools Deployment Wizard)

**DESCRIPTION**: Undeploy the adaptation project from the ABAP system via the Fiori Tools Deployment Wizard in your development environment. Preconditions: the app variant was previously deployed from this adaptation project and your user has the SAP_UI_FLEX_DEVELOPER role.

**LANGUAGE**: Text

**CODE**:
```Text
Prerequisites:
- Deployed app variant created from this adaptation project.
- Role: SAP_UI_FLEX_DEVELOPER.

Procedure:
1. In your project explorer, right-click one of:
   - main project folder
   - webapp folder
   - manifest.appdescr_variant file
2. Choose: "Open Deployment Wizard"
3. In the wizard:
   a. Select the target ABAP system (defaults to the system used to create the project)
   b. Click Next
4. Click "Undeploy"
5. Click "Finish" to start undeployment

Result:
- The app variant is undeployed from the selected system.
- If undeployment uses a transport, release the transport request to propagate deletion to other systems.
```

**STEP**: 2 — Using the ABAP Report (/UI5/DEL_ADAPTATION_PROJECT)

**DESCRIPTION**: Delete an adaptation project by running the ABAP report /UI5/DEL_ADAPTATION_PROJECT in the back-end system. Extract the app-variant ID from manifest.appdescr_variant, run the report in transaction SE38, supply the ID, confirm transport request, and execute deletion. Preconditions: app variant deployed; minimum backend software component SAP_UI 7.55.

**LANGUAGE**: XML

**CODE**:
```XML
# Example: open <project-root>/manifest.appdescr_variant and copy the value of the id element
# Typical manifest.appdescr_variant snippet:
{
  "sap.app": {
    "id": "com.example.myapp_variant_1",
    "type": "application",
    ...
  },
  ...
}
# The exact file path: <project-root>/webapp/manifest.appdescr_variant  (or similar project root)
```

**LANGUAGE**: Text

**CODE**:
```Text
Prerequisites:
- Deployed app variant created from this adaptation project.
- Backend minimum: SAP_UI 7.55.

Procedure:
1. Open the project folder and open manifest.appdescr_variant
   - Copy the value of the "id" element (app variant ID)
2. In the ABAP backend, start transaction SE38
3. Execute report: /UI5/DEL_ADAPTATION_PROJECT
4. In the report input, paste the copied ID (or use F4 help to search)
5. Click Execute (F8)
6. If prompted, select or create a transport request
7. In the overview of files to be deleted, confirm and click Execute again
   - (Follow the report prompts to finalize deletion)

Result:
- The app variant is deleted; deletions are applied across systems when the transport request is released.
```

**STEP**: 3 — Using the Command Line Interface (CLI)

**DESCRIPTION**: Method referenced but not detailed here. Use your project's deployment/CI tooling or the Fiori Tools CLI for undeploy operations if available. Consult your deployment tool or CI documentation for exact CLI commands to undeploy/undeploy app variants from ABAP systems.

**LANGUAGE**: Text

**CODE**:
```Text
Notes:
- The CLI approach depends on the deployment tooling you use (e.g., custom CI, platform-specific CLI).
- Ensure you have the same prerequisites as above (deployed app variant, proper roles, correct backend version).
- Typical steps (conceptual):
  1. Identify app variant ID (from manifest.appdescr_variant)
  2. Run CLI undeploy command against target system, passing app-variant ID and credentials
  3. Confirm transport request handling if required
  4. Release transport request to propagate deletion to other systems

If you need exact CLI commands, consult the specific deployment tool or CI/CD plugin documentation for your project.
```
--------------------------------

**TITLE**: Deploying an Adaptation Project to the ABAP Repository

**INTRODUCTION**: Step-by-step instructions for deploying an adaptation (app variant) project from your workspace to an SAP NetWeaver AS ABAP system using the Deployment Wizard in Fiori tools. Covers prerequisites, required roles, deployment actions (first deploy vs update), and troubleshooting pointers for common errors.

**TAGS**: fiori-tools, abap, deployment, adaptation-project, app-variant, SAP_UI, lrep, fiori-launchpad

**STEP**: Prerequisites (roles and cloud connector)
**DESCRIPTION**: Ensure your user has the correct ABAP role depending on the SAP_UI version. If using a Cloud Connector, allow HTTP methods for the LREP DTA folder path.
**LANGUAGE**: Plaintext
**CODE**:
```text
- If SAP_UI version >= 7.55:
  - Required role: SAP_UI_FLEX_DEVELOPER

- If SAP_UI version < 7.55:
  - Required role: S_DEVELOP

- If using Cloud Connector:
  - Allow HTTP methods: POST, PUT
  - Path to allow: /sap/bc/lrep/dta_folder/
```

**STEP**: Context (what deploying does and post-deploy requirement)
**DESCRIPTION**: Understand that an app variant is a new semantic app with a new ID. After deploy, UI changes are stored in the layered repository (LREP) on the ABAP system. To surface the new app variant on the SAP Fiori launchpad, create a new target mapping/tile in the launchpad designer.
**LANGUAGE**: Plaintext
**CODE**:
```text
- Deploy result: Adaptation changes are written to the LREP on target ABAP system.
- Post-deploy action: Configure a new target mapping in the SAP Fiori launchpad designer to create a tile for the new semantic app ID.
- Reference for target mappings:
  https://help.sap.com/docs/ABAP_PLATFORM_NEW/a7b390faab1140c087b8926571e942b7/33daedef95454af68903ef1238aa0373.html?version=latest
```

**STEP**: Launch the Deployment Wizard
**DESCRIPTION**: Open the Deployment Wizard from the project in your development tools by right-clicking the project root, webapp folder, or the app variant descriptor file.
**LANGUAGE**: Plaintext
**CODE**:
```text
Actions in project explorer:
- Right-click one of:
  - <project_root>
  - webapp/
  - manifest.appdescr_variant
- Select: Open Deployment Wizard
```

**STEP**: Select target ABAP system
**DESCRIPTION**: Choose the ABAP system to deploy to. The system used when the project was created is selected by default. Click Next to continue.
**LANGUAGE**: Plaintext
**CODE**:
```text
Deployment Wizard:
- Step: Select system
- Default: system used when creating the project
- Action: Click Next
```

**STEP**: First-time deploy vs update (package and transport handling)
**DESCRIPTION**: Follow the wizard flows depending on whether this project has been deployed previously to the selected system.
**LANGUAGE**: Plaintext
**CODE**:
```text
If NOT previously deployed to this system:
- Enter Package (ABAP package) to be used for the deployment.
- If package requires no transport request: Click Finish → deploys to package.
- If package requires a transport request: Next page prompts for Transport Request number → enter it → Click Finish.

If previously deployed to this system:
- Choose operation type: Update
- Click Update → Click Finish to start deployment (replaces/updates existing LREP entries).
```

**STEP**: Deployment result and troubleshooting
**DESCRIPTION**: The wizard notifies success or errors. Common errors and references are listed for troubleshooting. After successful deploy, configure target mappings in the Fiori launchpad designer to expose the variant as a tile.
**LANGUAGE**: Plaintext
**CODE**:
```text
- Success: Wizard displays deployment successful.
- Failure: Wizard displays error and error details.

Common errors and references:
- "ZIP archive contains disallowed files or has an incorrect structure"
  - See SAP Note: https://me.sap.com/notes/3073188

- "500 Internal server error" or "Transport check could not be performed"
  - See SAP Note: https://me.sap.com/notes/3243791

Post-deploy:
- Configure target mappings in SAP Fiori launchpad designer to add the new app variant as a tile.
  - Target mappings documentation:
    https://help.sap.com/docs/ABAP_PLATFORM_NEW/a7b390faab1140c087b8926571e942b7/33daedef95454af68903ef1238aa0373.html?version=latest
```
--------------------------------

**TITLE**: Deploy or Update an Adaptation Project to the ABAP Repository

**INTRODUCTION**: Instructions to deploy or update a SAPUI5 adaptation project (app variant) to the SAPUI5 ABAP repository on SAP S/4HANA Cloud or SAP Business Technology Platform. Covers two methods: Deployment Wizard (GUI) and Command Line Interface (npm). Includes required preparation steps and example manifest snippet for navigation intent.

**TAGS**: fiori-tools, sapui5, abap, deployment, adaptation-project, cli, manifest, sap-btp, sap-s4hana

**STEP**: 1 — Prepare local builder and project context

**DESCRIPTION**: Update the local builder to the latest version and ensure you are in the project's root folder (main project folder) before deploying. This prevents incompatibilities after upgrades.

**LANGUAGE**: Shell

**CODE**:
```bash
# From the main project folder in your workspace (SAP Business Application Studio or local IDE)
npm update

# Verify you're in the project root that contains the "webapp" folder and manifest.appdescr_variant
# example check (optional)
ls -la
```

**STEP**: 2 — Deploy or update using the Deployment Wizard (GUI)

**DESCRIPTION**: Use the Adaptation project Deployment wizard to configure the FLP tile and deploy the variant to the ABAP repository.

- In your project explorer, open: webapp/manifest.appdescr_variant
- Right-click manifest.appdescr_variant → Adaptation project → Open Deployment
- Follow the wizard steps:
  1. SAP Fiori Launchpad configuration: if the base app provides a navigation intent in its manifest, pick it. Otherwise enter:
     - Semantic Object
     - Action
     - Intent parameters (key/value)
  2. Enter Tile Title (required) and Subtitle (optional)
  3. Enter the target SAPUI5 ABAP repository (system)
  4. Optional: enter a description for this deployment
  5. Enter ABAP package to store the variant
  6. Optional: enter a transport request number (if prompted)
  7. Choose Finish and wait for the deployment confirmation notification

**LANGUAGE**: JSON

**CODE**:
```json
// Example: path to edit in the project
// webapp/manifest.appdescr_variant
{
  "sap.flp": {
    "navigation": {
      "semanticObject": "Product",
      "action": "display",
      "parameters": {
        "productId": "%%productId%%"
      }
    },
    "tile": {
      "title": "My Adapted App",
      "subtitle": "Variant Tile (optional)"
    }
  }
}
```

**STEP**: 3 — Deploy or update using the Command Line Interface (CLI)

**DESCRIPTION**: Use the npm deploy script from the project root to deploy or update the adaptation project. Open Terminal → New terminal in SAP Business Application Studio (or your IDE terminal) and ensure current directory is the project root (contains webapp folder).

- If you updated the builder earlier, redeploy after upgrade to avoid issues.
- Typical deployment command: npm run deploy
- CLI may prompt for target system, repository, package, and transport request based on project configuration.

**LANGUAGE**: Shell

**CODE**:
```bash
# From the main project folder in your workspace
# Ensure builder is up-to-date first (recommended)
npm update

# Run the deployment script
npm run deploy
```
--------------------------------

**TITLE**: Developing SAP Fiori Applications with SAP Fiori Tools — Practical Code Examples and Manifests

**INTRODUCTION**: This reference provides concise, actionable examples and file snippets for building SAP Fiori apps using SAP Fiori elements (metadata-driven) and freestyle SAPUI5 (custom UI). It shows how to register OData services and annotation files in manifest.json, an example annotation to mark an email property, and minimal freestyle app skeleton files (manifest.json, Component.js, app.view.xml). Use these snippets directly in your webapp/ folder when scaffolding or adapting SAP Fiori projects with SAP Fiori Tools or IDEs (Business Application Studio / Visual Studio Code).

**TAGS**: sap-fiori, sapui5, fiori-elements, manifest.json, annotations, component.js, app.view.xml, odata

STEP: 1 — Choose development approach

DESCRIPTION: Pick either SAP Fiori elements (metadata-driven UI using OData + annotations) or freestyle SAPUI5 (full control, manual UI coding). Use Fiori elements to speed development and enforce UX consistency; use freestyle for custom interactions and layout.

LANGUAGE: text

CODE:
```text
Options:
- Fiori elements: Use OData metadata + annotation files. Minimize JS UI coding.
- Freestyle SAPUI5: Provide custom views/controllers (XML/JS) and a Component.js. More control, more code.
```

STEP: 2 — Project structure (typical files & locations)

DESCRIPTION: Common files and folders created/used by both approaches. Keep these exact paths under your webapp/ root.

LANGUAGE: text

CODE:
```text
Typical project layout (webapp):
- webapp/manifest.json          // application descriptor (register dataSources, annotation sources, routing)
- webapp/Component.js          // component bootstrap (freestyle and element apps can use it)
- webapp/Materialize/          // optional styling resources
- webapp/view/                 // XML/JS views (freestyle)
- webapp/controller/           // controllers (freestyle)
- webapp/annotations/          // local annotation files (annotations.xml)
- webapp/localService/metadata.xml  // local copy of OData metadata (optional for dev)
```

STEP: 3 — Register OData service and annotation sources in manifest.json (Fiori elements)

DESCRIPTION: Register the OData data source and local or remote annotation files inside manifest.json. The OData dataSource must be referenced by the model definition. The example shows a common pattern used by Fiori Tools scaffolding: dataSources with settings.localUri and settings.annotations, then mapping the default model to the dataSource.

LANGUAGE: JSON

CODE:
```json
{
  "sap.app": {
    "id": "my.company.app",
    "applicationVersion": { "version": "1.0.0" }
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "mainService"
      }
    }
  },
  "sap.ui": { },
  "sap.app.dataSources": {},
  "sap.sap.ui5": {},
  "dataSources": {
    "mainService": {
      "uri": "/sap/opu/odata/sap/ZMY_SERVICE_SRV/",
      "type": "OData",
      "settings": {
        "localUri": "localService/metadata.xml",
        "annotations": [
          "annotations/annotations.xml",
          "/sap/bc/adt/annotations/ExternalAnnotations.xml"
        ]
      }
    }
  }
}
```

STEP: 4 — Example local annotation XML (mark a property as email)

DESCRIPTION: Add an annotation file that marks a property as an email (so Fiori elements renders it as a mailto link). Save under webapp/annotations/annotations.xml and register it in manifest.json (see Step 3). Ensure the Target matches the fully-qualified entity/property names from your service metadata. Adapt namespaces/vocabularies to the OData version/vocabularies used by your backend.

LANGUAGE: XML

CODE:
```xml
<?xml version="1.0" encoding="utf-8"?>
<Annotations xmlns="http://docs.oasis-open.org/odata/ns/edm" Target="MyService.CustomerType">
  <!-- Mark the Email property as an email address -->
  <Annotation Term="Communication.IsEmailAddress">
    <Record>
      <PropertyValue Property="Path" String="Email"/>
      <PropertyValue Property="Bool" Bool="true"/>
    </Record>
  </Annotation>
</Annotations>
```

STEP: 5 — Minimal manifest.json for a freestyle SAPUI5 app (rootView + dataSource)

DESCRIPTION: Freestyle apps need a manifest.json that defines the root view and dataSources. The rootView will be instantiated by Component.js. This example shows the minimal keys to get started.

LANGUAGE: JSON

CODE:
```json
{
  "sap.app": {
    "id": "my.company.freestyle",
    "applicationVersion": { "version": "1.0.0" },
    "title": "Freestyle App"
  },
  "sap.ui5": {
    "rootView": {
      "viewName": "my.company.freestyle.view.App",
      "type": "XML",
      "id": "app"
    },
    "models": {
      "": {
        "dataSource": "mainService"
      }
    }
  },
  "dataSources": {
    "mainService": {
      "uri": "/sap/opu/odata/sap/ZMY_SERVICE_SRV/",
      "type": "OData",
      "settings": {
        "localUri": "localService/metadata.xml"
      }
    }
  }
}
```

STEP: 6 — Component.js skeleton (freestyle or element with manifest-driven metadata)

DESCRIPTION: Basic Component.js that delegates configuration to manifest.json. Place at webapp/Component.js. This is the standard bootstrap used by UI5 apps to load manifest.json and initialize routing/models.

LANGUAGE: JavaScript

CODE:
```javascript
sap.ui.define([
  "sap/ui/core/UIComponent"
], function(UIComponent) {
  "use strict";

  return UIComponent.extend("my.company.freestyle.Component", {
    metadata: {
      manifest: "json"
    },

    init: function() {
      // call the base component's init function
      UIComponent.prototype.init.apply(this, arguments);

      // additional initialization (models, message handling) can go here
    }
  });
});
```

STEP: 7 — app.view.xml skeleton (freestyle example)

DESCRIPTION: Minimal XML view that will be loaded as rootView. Save as webapp/view/App.view.xml. Use sap.m.App and a Page to host controls. Replace content with your actual UI.

LANGUAGE: XML

CODE:
```xml
<mvc:View
  controllerName="my.company.freestyle.controller.App"
  xmlns="sap.m"
  xmlns:mvc="sap.ui.core.mvc"
  displayBlock="true">
  <App>
    <pages>
      <Page title="Freestyle App">
        <content>
          <Text text="Hello, SAPUI5 freestyle app!" />
        </content>
      </Page>
    </pages>
  </App>
</mvc:View>
```

STEP: 8 — Common manifest.json entries used by Fiori elements (List Report / Object Page)

DESCRIPTION: For Fiori elements apps (List Report, Object Page), manifest.json uses the sap.ui.generic.app descriptor and settings. This minimal fragment shows how to declare the main entitySet and the generic app descriptor. Use the Application Wizard or Fiori Tools to fill the full descriptor.

LANGUAGE: JSON

CODE:
```json
{
  "sap.app": {
    "id": "my.company.fe.elements"
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "mainService"
      }
    }
  },
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "Customers",
        "component": {
          "name": "sap.suite.ui.generic.template.ListReport"
        }
      },
      {
        "entitySet": "Customers",
        "component": {
          "name": "sap.suite.ui.generic.template.ObjectPage"
        }
      }
    ]
  },
  "dataSources": {
    "mainService": {
      "uri": "/sap/opu/odata/sap/ZMY_SERVICE_SRV/",
      "type": "OData",
      "settings": {
        "localUri": "localService/metadata.xml",
        "annotations": ["annotations/annotations.xml"]
      }
    }
  }
}
```

STEP: 9 — Use SAP Fiori Tools & Joule (developer workflow notes)

DESCRIPTION: Use SAP Fiori Tools (Application Wizard, Service Modeler, Annotation Editor, Page Editor) to scaffold and refine apps. Use Joule (generative AI) to draft data models, sample data, and Fiori elements UI from natural language descriptions; then refine generated artifacts in your workspace.

LANGUAGE: text

CODE:
```text
Recommended workflow:
1. Run Application Wizard (Fiori Tools) to create a project skeleton (choose Fiori elements or Freestyle).
2. Register your OData service and annotation files in webapp/manifest.json (see Step 3).
3. Edit local annotations in webapp/annotations/annotations.xml (Step 4).
4. Use Page Editor (Fiori Tools) to configure pages and flex settings (Fiori elements).
5. Optionally use Joule to generate models and UI drafts, then integrate into the generated project.
Links:
- Fiori Tools getting started: https://help.sap.com/docs/SAP_FIORI_tools
- Joule generative AI docs: https://help.sap.com/docs/SAP_FIORI_tools
```

Step: 10 — Tips and validation

DESCRIPTION: Validate annotations and manifest entries:
- Ensure annotation Targets match entity/Property names in metadata.xml.
- If using local copies, keep localService/metadata.xml in sync with backend.
- Use browser console and UI5 diagnostics to detect missing annotation sources or model binding errors.

LANGUAGE: text

CODE:
```text
Validation checklist:
- manifest.json points default model ("") to your dataSource id.
- dataSource.settings.annotations includes your relative annotation paths.
- Component.js metadata.manifest === "json" so UI5 loads manifest.json.
- For Fiori elements, ensure sap.ui.generic.app.pages entitySet names match the service.
```
--------------------------------

**TITLE**: SAP Fiori: Manage Contracts and Customers (CDS + OData + UI5 sample)

**INTRODUCTION**: This guide provides a code-first example to implement a contract management Fiori app: define CDS entities for Contract and Customer, seed sample data, expose an OData service (CAP), and two UI alternatives to present lists and details: (A) Fiori Elements List Report + Object Page annotations, and (B) a small custom UI5 view showing Contracts and Customers side-by-side with automatic initial load. Use these snippets to generate a working prototype.

**TAGS**: fiori-tools, CAP, CDS, OData, UI5, Fiori Elements, ListReport, ObjectPage, sample-data

STEP: 1 — Define domain model (CDS)
DESCRIPTION: Create CDS schema defining Contract and Customer entities, associations, primary keys, and UI annotations for list columns, object page fields, and selection filters. Save as db/schema.cds.
LANGUAGE: CDS
CODE:
```cds
namespace contractmanagement;

using { cuid } from '@sap/cds/common';

/*
  Domain model:
  - Contract with ContractID (key), association to Customer, ContractType, StartDate, EndDate, Status
  - Customer with ID (key), Name, IdentificationNumber, Address, ContactInfo
  - UI annotations to drive Fiori Elements ListReport/ObjectPage where applicable
*/

entity Customer {
  key ID              : UUID    = cuid();
  Name                : String(100);
  IdentificationNumber: String(50);
  Address             : String(250);
  ContactInfo         : String(200);
}

entity Contract {
  key ContractID      : UUID    = cuid();
  Customer            : Association to Customer;
  ContractType        : String(50);
  StartDate           : Date;
  EndDate             : Date;
  Status              : String(20);
}

/* UI annotations (CDS @UI) used by Fiori Elements */
annotate Contract with {
  @UI.lineItem: [
    { value: ContractID, label: 'Contract ID', position: 10 },
    { value: Customer,   label: 'Customer',    position: 20 },
    { value: ContractType, label: 'Contract Type', position: 30 },
    { value: StartDate,  label: 'Start Date',  position: 40 }
  ];
  @UI.selectionFields: [
    { value: ContractType },
    { value: Status },
    { value: StartDate }
  ];
  @UI.fieldGroup: [
    { data: [ ContractID, Customer, ContractType, Status, StartDate, EndDate ], label: 'Contract Details' }
  ];
}

annotate Customer with {
  @UI.lineItem: [
    { value: Name,  label: 'Name',  position: 10 },
    { value: IdentificationNumber, label: 'Identification Number', position: 20 },
    { value: ContactInfo, label: 'Contact Info', position: 30 }
  ];
}
```

STEP: 2 — Seed sample data (CSV)
DESCRIPTION: Add sample data files to be consumed by CAP sqlite or HANA persistence for quick local prototyping. Save files in db/data/.
LANGUAGE: CSV
CODE:
```csv
# db/data/Customers.csv
ID,Name,IdentificationNumber,Address,ContactInfo
00000000-0000-0000-0000-000000000001,Acme Corporation,ACME-1001,"123 Main St, Metropolis","contact@acme.example"
00000000-0000-0000-0000-000000000002,Globex Ltd,GLX-2002,"456 Market Rd, Gotham","info@globex.example"
```

```csv
# db/data/Contracts.csv
ContractID,Customer_ID,ContractType,StartDate,EndDate,Status
00000000-0000-0000-0000-000000000101,00000000-0000-0000-0000-000000000001,Sales,2024-01-01,2024-12-31,Active
00000000-0000-0000-0000-000000000102,00000000-0000-0000-0000-000000000002,Service,2023-07-01,,Expired
```

STEP: 3 — Expose OData service (CAP)
DESCRIPTION: Define an OData service exposing Contracts and Customers as entity sets. Use @path to define OData root. Save as srv/service.cds.
LANGUAGE: CDS
CODE:
```cds
using contractmanagement as db from '../db/schema';

service CatalogService @(path:'/odata') {
  entity Contracts  as projection on db.Contract;
  entity Customers  as projection on db.Customer;
}
```

STEP: 4 — Fiori Elements (List Report + Object Page) manifest snippet
DESCRIPTION: Minimal manifest.json fragment to scaffold a Fiori Elements List Report + Object Page application. Key settings: entitySet Contracts, SmartFilterBar showGoButton:false to load results automatically (no GO button) and ObjectPage navigation to view details. Integrate annotations generated from CDS.
LANGUAGE: JSON
CODE:
```json
// webapp/manifest.json (fragment)
{
  "sap.app": {
    "id": "contract.management.app",
    "i18n": "i18n/i18n.properties",
    "applicationVersion": { "version": "1.0.0" }
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "mainService",
        "preload": true,
        "settings": { "sap.ui.model.odata.v2.ODataModel": true }
      }
    },
    "dataSources": {
      "mainService": {
        "uri": "/odata/",
        "type": "OData",
        "settings": { "odataVersion": "2.0" }
      }
    },
    "routing": { /* standard routing omitted for brevity */ }
  },
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "Contracts",
        "component": {
          "name": "sap.suite.ui.generic.template.ListReport",
          "list": true
        },
        "settings": {
          "smartFilterBar": {
            "showGoButton": false
          },
          "entitySet": "Contracts"
        }
      },
      {
        "entitySet": "Contracts",
        "component": {
          "name": "sap.suite.ui.generic.template.ObjectPage"
        },
        "settings": {
          "entitySet": "Contracts"
        }
      }
    ]
  }
}
```

STEP: 5 — Custom UI5 (side-by-side Contracts + Customers) — XML view
DESCRIPTION: If you prefer a simple custom UI5 app (rather than Fiori Elements), create a view that places two tables side-by-side (contracts left, customers right). On init, the controller reads both entity sets automatically so lists appear immediately (no GO button).
LANGUAGE: XML
CODE:
```xml
<!-- webapp/view/Main.view.xml -->
<mvc:View controllerName="contract.management.controller.Main"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  xmlns:core="sap.ui.core">
  <App>
    <Page title="Contracts and Customers">
      <content>
        <HBox fitContainer="true" renderType="Basic" width="100%" justifyContent="SpaceBetween">
          <VBox width="60%" class="sapUiSmallMarginEnd">
            <Toolbar><Title text="Contracts" /></Toolbar>
            <Table id="contractsTable" inset="false" items="{/Contracts}">
              <columns>
                <Column><Text text="Contract ID"/></Column>
                <Column><Text text="Customer"/></Column>
                <Column><Text text="Contract Type"/></Column>
                <Column><Text text="Start Date"/></Column>
              </columns>
              <items>
                <ColumnListItem>
                  <cells>
                    <Text text="{ContractID}" />
                    <Text text="{Customer/Name}" />
                    <Text text="{ContractType}" />
                    <Text text="{StartDate}" />
                  </cells>
                </ColumnListItem>
              </items>
            </Table>
          </VBox>

          <VBox width="38%">
            <Toolbar><Title text="Customers" /></Toolbar>
            <Table id="customersTable" inset="false" items="{/Customers}">
              <columns>
                <Column><Text text="Name"/></Column>
                <Column><Text text="Identification Number"/></Column>
                <Column><Text text="Contact Info"/></Column>
              </columns>
              <items>
                <ColumnListItem>
                  <cells>
                    <Text text="{Name}" />
                    <Text text="{IdentificationNumber}" />
                    <Text text="{ContactInfo}" />
                  </cells>
                </ColumnListItem>
              </items>
            </Table>
          </VBox>
        </HBox>
      </content>
    </Page>
  </App>
</mvc:View>
```

STEP: 6 — Custom UI5 controller: initial load and navigation to contract details
DESCRIPTION: Controller that reads the Contracts and Customers entity sets on init (automatic display without pressing GO) and handles selection to navigate to a simple details dialog.
LANGUAGE: JavaScript
CODE:
```javascript
// webapp/controller/Main.controller.js
sap.ui.define([
  "sap/ui/core/mvc/Controller",
  "sap/m/Dialog",
  "sap/m/Text",
  "sap/m/Button"
], function(Controller, Dialog, Text, Button) {
  "use strict";
  return Controller.extend("contract.management.controller.Main", {
    onInit: function() {
      // ODataModel is declared in manifest.json as default model ""
      var oModel = this.getView().getModel();
      // Read both collections; automatic initial load
      oModel.read("/Contracts", {
        success: function() { /* table binds update automatically */ },
        error: function() { /* handle error */ }
      });
      oModel.read("/Customers", {
        success: function() {},
        error: function() {}
      });
    },

    onContractSelect: function(oEvent) {
      var oItem = oEvent.getParameter("listItem") || oEvent.getSource();
      var sPath = oItem.getBindingContext().getPath();
      var oModel = this.getView().getModel();
      oModel.read(sPath, {
        success: function(oData) {
          var oDialog = new Dialog({
            title: "Contract Details",
            content: new Text({ text: JSON.stringify(oData, null, 2) }),
            beginButton: new Button({ text: "Close", press: function() { oDialog.close(); } }),
            afterClose: function() { oDialog.destroy(); }
          });
          oDialog.open();
        }
      });
    }
  });
});
```

STEP: 7 — Example OData query examples (for automated testing or API calls)
DESCRIPTION: Use these OData queries to validate lists, filters and details via HTTP.
LANGUAGE: JSON / HTTP
CODE:
```http
# List all contracts (no GO button required in UI; server returns all by default)
GET /odata/Contracts?$select=ContractID,ContractType,StartDate,Status,Customer/Name&$expand=Customer

# Filter by ContractType
GET /odata/Contracts?$filter=ContractType eq 'Sales'

# Get contract by key
GET /odata/Contracts('00000000-0000-0000-0000-000000000101')
```

STEP: 8 — Notes & mapping to acceptance criteria
DESCRIPTION: Implementation notes so code generation tools map requirements:
- "List All Contracts" => Use Contracts entitySet, @UI.lineItem defines list columns ContractID, Customer, ContractType, StartDate. In custom UI5 approach, initial onInit reads /Contracts to display list without a GO button.
- "Next to this list, I would like to see the list of all customers." => Custom view places Customers table side-by-side. In Fiori Elements, consider a master-detail or a custom side panel with Customers.
- Filters: ContractType, Status, StartDate => Defined as selection fields in CDS annotations and wired to SmartFilterBar in Fiori Elements; SmartFilterBar showGoButton:false ensures immediate result loading.
- "View Contract Details" => ObjectPage/CAP read for single Contract with fields mapped via @UI.fieldGroup to "Contract Details".

File paths referenced:
- db/schema.cds
- db/data/Customers.csv
- db/data/Contracts.csv
- srv/service.cds
- webapp/manifest.json
- webapp/view/Main.view.xml
- webapp/controller/Main.controller.js

Use these snippets as canonical building blocks for code generation, scaffolding, and tests.
--------------------------------

**TITLE**: Display Customers and Their Related Contracts (CAP + Fiori Elements)

**INTRODUCTION**: This document provides a concise, ready-to-use code blueprint to build an SAP CAP backend and Fiori Elements UI that lists customers, shows a customer details page with a related contracts table, and a contract details page. It includes CDS model, service exposure, OData V4 UI annotations, seed data, and a minimal manifest routing snippet for a List Report + Object Page app.

**TAGS**: SAP, CAP, CDS, Fiori Elements, OData, annotations, customers, contracts, UI

STEP: 1 - Define data model (CDS)
DESCRIPTION: Create the persistent data model with Customer and Contract entities. Customer has Name, IdentificationNumber, Address. Contract references a Customer (one-to-many). Save as db/schema.cds.
LANGUAGE: CDS
CODE:
```cds
// File: db/schema.cds
namespace com.example.customerapp;

using { cuid } from '@sap/cds/common';

entity Customer {
  key ID               : UUID        = cuid();      // primary key
  Name                 : String(100);
  IdentificationNumber : String(50);
  Address              : String(250);
  // back navigation association: one customer -> many contracts
  Contracts            : Composition of many Contract on Contracts.Customer = $self;
}

entity Contract {
  key ContractID : UUID        = cuid(); // unique identifier for contract
  Customer       : Association to Customer; // many-to-one
  ContractType   : String(50);  // sales, service, employment
  StartDate      : Date;
  EndDate        : Date;
  Status         : String(20);  // draft, active, expired, terminated, etc.
}
```

STEP: 2 - Expose the OData service (CDS)
DESCRIPTION: Expose the entities via an OData service. Save as srv/service.cds. This service will be consumed by the Fiori Elements app.
LANGUAGE: CDS
CODE:
```cds
// File: srv/service.cds
using com.example.customerapp as db from '../db/schema.cds';

service CatalogService @(path: '/catalog') {
  entity Customers @(title: 'Customers') as projection on db.Customer;
  entity Contracts @(title: 'Contracts') as projection on db.Contract;
}
```

STEP: 3 - Seed sample data (CSV)
DESCRIPTION: Provide sample data to run locally (cds deploy or sqlite). Two CSV files: one for customers and one for contracts. Place them in db/data/.
LANGUAGE: CSV
CODE:
```csv
# File: db/data/Customers.csv
ID,Name,IdentificationNumber,Address
11111111-1111-1111-1111-111111111111,Acme GmbH,ACME-001,"Mainstreet 1, 8000 Zurich"
22222222-2222-2222-2222-222222222222,Contoso Ltd,CNTS-042,"Market St 45, 1000 Vienna"
```

```csv
# File: db/data/Contracts.csv
ContractID,Customer,ContractType,StartDate,EndDate,Status
aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa,11111111-1111-1111-1111-111111111111,Sales,2023-01-01,2024-01-01,active
bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb,11111111-1111-1111-1111-111111111111,Service,2022-06-15,,expired
cccccccc-cccc-cccc-cccc-cccccccccccc,22222222-2222-2222-2222-222222222222,Employment,2024-02-01,2026-02-01,draft
```

STEP: 4 - Add OData V4 UI annotations (XML) for Fiori Elements
DESCRIPTION: Add UI annotations to drive List Report and Object Page behavior. This example:
- Customer entity: List report shows Name, IdentificationNumber, Address.
- Customer object page: "Customer Info" (identification fields) and "Contracts" facet shows related Contracts list (uses navigation property).
- Contract entity: List item and object page definition with "Contract Info" and "Validity" sections.
Save as app/annotations.xml and reference it in the Fiori app manifest (next step).
LANGUAGE: XML
CODE:
```xml
<!-- File: app/annotations.xml -->
<edmx:Edmx Version="4.0" xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx">
  <edmx:Reference Uri="https://sap.github.io/odata-vocabularies/vocabularies/UI.xml">
    <edmx:Include Namespace="UI" Alias="UI"/>
  </edmx:Reference>

  <edmx:DataServices>
    <Schema Namespace="com.example.customerapp.annotations" xmlns="http://docs.oasis-open.org/odata/ns/edm">
      <!-- UI: LineItem for Customers (List Report colums) -->
      <Annotations Target="com.example.customerapp.Customer">
        <Annotation Term="UI.LineItem">
          <Collection>
            <Record>
              <PropertyValue Property="Value">
                <Path>Name</Path>
              </PropertyValue>
            </Record>
            <Record>
              <PropertyValue Property="Value">
                <Path>IdentificationNumber</Path>
              </PropertyValue>
            </Record>
            <Record>
              <PropertyValue Property="Value">
                <Path>Address</Path>
              </PropertyValue>
            </Record>
          </Collection>
        </Annotation>

        <!-- Header / Identification on Object Page -->
        <Annotation Term="UI.Identification">
          <Collection>
            <Record>
              <PropertyValue Property="Label" String="Name"/>
              <PropertyValue Property="Value"><Path>Name</Path></PropertyValue>
            </Record>
            <Record>
              <PropertyValue Property="Label" String="Identification Number"/>
              <PropertyValue Property="Value"><Path>IdentificationNumber</Path></PropertyValue>
            </Record>
          </Collection>
        </Annotation>

        <!-- Facets: Customer Info (form) and Contracts (collection navigation) -->
        <Annotation Term="UI.Facets">
          <Collection>
            <!-- Customer Info facet -->
            <Record Type="UI.ReferenceFacet">
              <PropertyValue Property="Label" String="Customer Info"/>
              <PropertyValue Property="Target">
                <AnnotationPath>com.example.customerapp.annotations.CustomerHeader</AnnotationPath>
              </PropertyValue>
            </Record>

            <!-- Contracts facet: collection of related contracts -->
            <Record Type="UI.CollectionFacet">
              <PropertyValue Property="Label" String="Contracts"/>
              <PropertyValue Property="Target">
                <NavigationPropertyPath>Contracts</NavigationPropertyPath>
              </PropertyValue>
            </Record>
          </Collection>
        </Annotation>
      </Annotations>

      <!-- Supporting header info: used by Customer ReferenceFacet Target above -->
      <Annotations Target="com.example.customerapp.Customer/com.example.customerapp.annotations.CustomerHeader">
        <Annotation Term="UI.FieldGroup">
          <Record>
            <PropertyValue Property="Data">
              <Collection>
                <Record>
                  <PropertyValue Property="Value"><Path>Name</Path></PropertyValue>
                </Record>
                <Record>
                  <PropertyValue Property="Value"><Path>IdentificationNumber</Path></PropertyValue>
                </Record>
                <Record>
                  <PropertyValue Property="Value"><Path>Address</Path></PropertyValue>
                </Record>
              </Collection>
            </PropertyValue>
          </Record>
        </Annotation>
      </Annotations>

      <!-- UI: LineItem for Contracts (list that appears under Customer object page and Contract list/object pages) -->
      <Annotations Target="com.example.customerapp.Contract">
        <Annotation Term="UI.LineItem">
          <Collection>
            <Record>
              <PropertyValue Property="Value"><Path>ContractID</Path></PropertyValue>
            </Record>
            <Record>
              <PropertyValue Property="Value">
                <Path>Customer/Name</Path>
              </PropertyValue>
            </Record>
            <Record>
              <PropertyValue Property="Value"><Path>ContractType</Path></PropertyValue>
            </Record>
            <Record>
              <PropertyValue Property="Value"><Path>Status</Path></PropertyValue>
            </Record>
            <Record>
              <PropertyValue Property="Value"><Path>StartDate</Path></PropertyValue>
            </Record>
            <Record>
              <PropertyValue Property="Value"><Path>EndDate</Path></PropertyValue>
            </Record>
          </Collection>
        </Annotation>

        <!-- Object Page facets for Contract -->
        <Annotation Term="UI.Facets">
          <Collection>
            <Record Type="UI.ReferenceFacet">
              <PropertyValue Property="Label" String="Contract Info"/>
              <PropertyValue Property="Target">
                <AnnotationPath>com.example.customerapp.annotations.ContractInfo</AnnotationPath>
              </PropertyValue>
            </Record>
            <Record Type="UI.ReferenceFacet">
              <PropertyValue Property="Label" String="Validity"/>
              <PropertyValue Property="Target">
                <AnnotationPath>com.example.customerapp.annotations.ContractValidity</AnnotationPath>
              </PropertyValue>
            </Record>
          </Collection>
        </Annotation>
      </Annotations>

      <!-- Contract Info FieldGroup -->
      <Annotations Target="com.example.customerapp.Contract/com.example.customerapp.annotations.ContractInfo">
        <Annotation Term="UI.FieldGroup">
          <Record>
            <PropertyValue Property="Data">
              <Collection>
                <Record>
                  <PropertyValue Property="Value"><Path>ContractID</Path></PropertyValue>
                </Record>
                <Record>
                  <PropertyValue Property="Value"><Path>Customer/Name</Path></PropertyValue>
                </Record>
                <Record>
                  <PropertyValue Property="Value"><Path>ContractType</Path></PropertyValue>
                </Record>
                <Record>
                  <PropertyValue Property="Value"><Path>Status</Path></PropertyValue>
                </Record>
              </Collection>
            </PropertyValue>
          </Record>
        </Annotation>
      </Annotations>

      <!-- Contract Validity FieldGroup -->
      <Annotations Target="com.example.customerapp.Contract/com.example.customerapp.annotations.ContractValidity">
        <Annotation Term="UI.FieldGroup">
          <Record>
            <PropertyValue Property="Data">
              <Collection>
                <Record>
                  <PropertyValue Property="Value"><Path>StartDate</Path></PropertyValue>
                </Record>
                <Record>
                  <PropertyValue Property="Value"><Path>EndDate</Path></PropertyValue>
                </Record>
              </Collection>
            </PropertyValue>
          </Record>
        </Annotation>
      </Annotations>

    </Schema>
  </edmx:DataServices>
</edmx:Edmx>
```

STEP: 5 - Fiori Elements app manifest snippet (routing)
DESCRIPTION: Minimal manifest.json snippet to point page routes: a List Report for Customers with Object Page navigation. Use the OData service path /catalog (as defined). Place this in app/manifest.json inside your UI project. This snippet focuses on routing and main entity configuration.
LANGUAGE: JSON
CODE:
```json
// File: app/manifest.json (partial)
{
  "sap.app": {
    "id": "com.example.customerapp.ui",
    "type": "application",
    "i18n": "i18n/i18n.properties",
    "applicationVersion": { "version": "1.0.0" }
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "mainService",
        "preload": true,
        "settings": { "synchronizationMode": "None" }
      }
    },
    "dataSources": {
      "mainService": {
        "uri": "/catalog/",
        "type": "OData",
        "settings": { "localUri": "model/metadata.xml" }
      },
      "annotations": {
        "type": "OData",
        "uri": "annotations.xml"
      }
    }
  },
  "sap.fiori": {
    "registrationIds": [],
    "archeType": "FioriElement"
  },
  "sap.ui": {},
  "sap.app.routing": {
    "routes": [
      {
        "pattern": "",
        "name": "CustomersList",
        "target": "CustomersList"
      }
    ],
    "targets": {
      "CustomersList": {
        "type": "Component",
        "id": "CustomersList",
        "name": "sap.suite.ui.generic.template.ListReport",
        "options": {
          "settings": {
            "entitySet": "Customers"
          }
        }
      }
    }
  }
}
```

STEP: 6 - Run and verify locally
DESCRIPTION: Commands to run the CAP app locally and open the Fiori Elements UI (assumes Node.js, @sap/cds, and Fiori tools installed).
LANGUAGE: Shell
CODE:
```bash
# Install deps
npm install

# Run CAP backend (serves OData at http://localhost:4004/catalog)
cds serve

# Start a Fiori Elements app (if using UI as a separate project)
# e.g., use "ui5 serve" or Fiori tooling; ensure manifest references /catalog/service
# For local development with proxy to backend, use the Fiori tools or ui5 tooling:
# ui5 serve --open index.html
```

Notes / Implementation tips:
- Keep the service path in srv/service.cds consistent with the manifest dataSource uri.
- The annotations.xml maps UI concepts to CDS properties. For more granular control (filters, selection fields, formatting), extend the UI.LineItem and FieldGroup definitions.
- The Contracts facet in the Customer Object Page uses the navigation property "Contracts" (defined as Composition in CDS). Fiori Elements will render the related Contracts list automatically when Contract has a UI.LineItem annotation.
- If you prefer CDS-based UI annotations (annotate ... with @UI), you can place them in srv/annotations.cds and let CAP expose them as OData annotations automatically.

This set of files provides a complete minimal working blueprint for:
- Customers list (List Report)
- Customer Object Page: "Customer Info" + "Contracts" related list
- Contract Object Page: "Contract Info" + "Validity" sections
--------------------------------

**TITLE**: Manage Travel App — List Report and Object Page Specification

**INTRODUCTION**: This document provides a concise, code-focused specification and assets layout to generate a "Manage Travel" application. It includes the user-facing markdown to include in your workspace, exact image filenames and paths, validation/business rules, UI layout specification for list report and object page, and small code examples (calculation and navigation) for use in code generation.

**TAGS**: fiori-tools, UI5, app-spec, list-report, object-page, validation, images, markdown

**STEP**: 1 — Create spec markdown file

**DESCRIPTION**: Create a markdown file named travel_app_spec.md in your workspace root and paste the sample user-story/spec content below. The file references two image files (Travel_List.jpeg and Travel_Details.jpeg) that must be saved in the same directory as this markdown file. Additional sketch images must be saved under an images/ subfolder with the exact filenames specified.

**LANGUAGE**: Markdown

**CODE**:
```Markdown
I want to create a travel application that shows a list of trips taken by employees.

The list of trips should include the following details:

![Alt Text](Travel_List.jpeg)

Each trip can have many bookings and multiple notes. On the travel details page, the app should show:

![Alt Text](Travel_Details.jpeg)

The total trip price should equal the price of all the bookings for that trip. If there are no bookings for a trip, the total trip price should be zero.

If there are any bookings associated with a trip, then each booking must cost more than zero.

Clicking on a booking should allow the user to see more details.
```

**STEP**: 2 — Save referenced asset files

**DESCRIPTION**: Save the images used by the markdown. Place Travel_List.jpeg and Travel_Details.jpeg in the same directory as travel_app_spec.md. Save the two sketch images under an images/ subfolder with the exact filenames provided.

- Files and paths:
  - ./travel_app_spec.md
  - ./Travel_List.jpeg
  - ./Travel_Details.jpeg
  - ./images/Manage_Travel_App_List_Report_Page_Sketch_4633751.jpg
  - ./images/Manage_Travel_App_Object_Page_Sketch_999bcc3.jpg

**LANGUAGE**: Bash (shell commands)

**CODE**:
```bash
# create workspace structure and copy images into place
mkdir -p ./images
# Place your local copies of the JPEGs into these paths:
# ./Travel_List.jpeg
# ./Travel_Details.jpeg
# ./images/Manage_Travel_App_List_Report_Page_Sketch_4633751.jpg
# ./images/Manage_Travel_App_Object_Page_Sketch_999bcc3.jpg

# Example copy commands (adjust source paths):
# cp /path/to/local/Travel_List.jpeg ./Travel_List.jpeg
# cp /path/to/local/Travel_Details.jpeg ./Travel_Details.jpeg
# cp /path/to/local/Manage_Travel_App_List_Report_Page_Sketch_4633751.jpg ./images/Manage_Travel_App_List_Report_Page_Sketch_4633751.jpg
# cp /path/to/local/Manage_Travel_App_Object_Page_Sketch_999bcc3.jpg ./images/Manage_Travel_App_Object_Page_Sketch_999bcc3.jpg
```

**STEP**: 3 — Validation and calculation rules (actionable for code)

**DESCRIPTION**: Implement the business logic rules for total trip price and booking price validation. Use this canonical JavaScript snippet for server-side or client-side generation to compute totals and validate bookings.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// trips: array of { id, bookings: [{ id, price }], notes: [...] }
// Returns: { tripId, totalPrice, valid }
function computeTripTotalsAndValidate(trips) {
  return trips.map(trip => {
    const bookings = Array.isArray(trip.bookings) ? trip.bookings : [];
    // Calculate total price
    const totalPrice = bookings.length === 0
      ? 0
      : bookings.reduce((sum, b) => sum + Number(b.price || 0), 0);

    // Validate: if any booking exists, each booking price must be > 0
    const valid = bookings.length === 0
      ? true
      : bookings.every(b => Number(b.price) > 0);

    return {
      tripId: trip.id,
      totalPrice,
      valid,
      // include original trip if needed
      trip
    };
  });
}

// Example usage:
const trips = [
  { id: 'T1', bookings: [{ id: 'B1', price: 100 }, { id: 'B2', price: 0 }], notes: [] },
  { id: 'T2', bookings: [], notes: [] }
];
console.log(computeTripTotalsAndValidate(trips));
```

**STEP**: 4 — UI data model and layout spec (machine-friendly JSON)

**DESCRIPTION**: Provide a compact JSON specification describing the list report columns, object page sections, and navigation target for code generation (RAG). Use this as input to auto-generate views, tables, and navigation wiring.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "app": "ManageTravel",
  "entities": {
    "Trip": {
      "fields": [
        { "name": "id", "label": "Trip ID", "type": "String" },
        { "name": "employeeName", "label": "Employee", "type": "String" },
        { "name": "startDate", "label": "Start Date", "type": "Date" },
        { "name": "endDate", "label": "End Date", "type": "Date" },
        { "name": "destination", "label": "Destination", "type": "String" },
        { "name": "totalPrice", "label": "Total Price", "type": "Decimal" }
      ],
      "navigation": {
        "objectPage": "TripDetail"
      }
    },
    "Booking": {
      "fields": [
        { "name": "id", "label": "Booking ID", "type": "String" },
        { "name": "type", "label": "Type", "type": "String" },
        { "name": "price", "label": "Price", "type": "Decimal" },
        { "name": "details", "label": "Details", "type": "String" }
      ],
      "navigation": {
        "detailPage": "BookingDetail"
      }
    },
    "Note": {
      "fields": [
        { "name": "id", "label": "Note ID", "type": "String" },
        { "name": "text", "label": "Text", "type": "String" },
        { "name": "createdAt", "label": "Created At", "type": "DateTime" }
      ]
    }
  },
  "ui": {
    "ListReport": {
      "entity": "Trip",
      "columns": ["id", "employeeName", "startDate", "endDate", "destination", "totalPrice"]
    },
    "ObjectPage": {
      "entity": "Trip",
      "sections": [
        { "name": "Overview", "fields": ["id", "employeeName", "startDate", "endDate", "destination", "totalPrice"] },
        { "name": "Bookings", "type": "Table", "entity": "Booking", "columns": ["id", "type", "price", "details"], "rowClickNavigation": "BookingDetail" },
        { "name": "Notes", "type": "List", "entity": "Note", "fields": ["text", "createdAt"] }
      ]
    }
  }
}
```

**STEP**: 5 — Example UI click handler to open booking details (UI5 / JavaScript)

**DESCRIPTION**: Provide a small UI handler to navigate from a booking row in the object page to a booking detail page. Integrate this pattern into generated code (UI5 routing or SPA router).

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Example: UI5 controller method
onBookingRowPress: function(oEvent) {
  // If row binding provides booking ID
  const oRow = oEvent.getSource();
  const bookingContext = oRow.getBindingContext(); // assumes model binding
  const bookingId = bookingContext.getProperty("id");

  // Navigate to booking detail route with bookingId
  const oRouter = sap.ui.core.UIComponent.getRouterFor(this);
  oRouter.navTo("BookingDetail", { bookingId: bookingId });
}

// Example: React (React Router)
function onBookingClick(bookingId, navigate) {
  // navigate is from useNavigate()
  navigate(`/booking/${bookingId}`);
}
```

**STEP**: 6 — Notes for code generators / RAG pipelines

**DESCRIPTION**: Feed the markdown file, image files, the JSON UI spec, and the JS snippets to your generation pipeline. Use the JSON UI spec to create scaffolded views and forms, the validation JS for service/business logic, and the image assets for mockups/wireframes. Ensure the generator enforces:
- totalPrice = sum(bookings.price) OR 0 if no bookings
- if bookings exist, each booking.price > 0
- booking row click navigates to a booking detail view

**LANGUAGE**: Plain text

**CODE**:
```text
Inputs for generator:
- travel_app_spec.md
- Travel_List.jpeg
- Travel_Details.jpeg
- images/Manage_Travel_App_List_Report_Page_Sketch_4633751.jpg
- images/Manage_Travel_App_Object_Page_Sketch_999bcc3.jpg
- ui_spec.json (use JSON from STEP 4)
- compute and validation snippet (use JS from STEP 3)
- navigation handler (use JS from STEP 5)
```
--------------------------------

**TITLE**: Example: Manage Travel List Report Page — Add Example Images to Workspace

**INTRODUCTION**: This document explains how to add and reference two example image assets for the "Manage Travel List Report Page" sample. Use these images in SAP Business Application Studio (BAS) projects for documentation, mockups, or to include in a Fiori UI5 app. The instructions cover creating the images folder, placing the exact files, and referencing them in project files.

**TAGS**: fiori-tools, fiori, SAP Business Application Studio, images, application-model, UI, sample-assets

**STEP**: 1 — Create images folder and place files

**DESCRIPTION**: Create an images directory at the project root and place the two example image files using the exact filenames shown below. These filenames must be preserved so references in other files resolve correctly.

**LANGUAGE**: Shell

**CODE**:
```sh
# From your project root in SAP Business Application Studio or any terminal:
mkdir -p images

# Place or copy the provided image files into this folder.
# Required filenames (exact):
# 1) images/Fiori_App_for_Managing_Travel_Application_Model_7ba4a29.png
# 2) images/Manage_Travel_Fiori_App_Page_UI_6d7f22d.jpg

# Example if the images are on your local machine at ~/Downloads:
cp ~/Downloads/Fiori_App_for_Managing_Travel_Application_Model_7ba4a29.png images/
cp ~/Downloads/Manage_Travel_Fiori_App_Page_UI_6d7f22d.jpg images/

# Verify files exist:
ls -l images/
```

**STEP**: 2 — Upload images to SAP Business Application Studio (manual & Git)

**DESCRIPTION**: Two common ways to add the files to a BAS workspace: (A) drag-and-drop upload in the BAS file explorer (manual), or (B) add via Git if you maintain the project repo. Commands below show a Git workflow to add and push the files.

**LANGUAGE**: Shell

**CODE**:
```sh
# After adding the files to images/ (see Step 1), commit and push to the repo:
git add images/Fiori_App_for_Managing_Travel_Application_Model_7ba4a29.png
git add images/Manage_Travel_Fiori_App_Page_UI_6d7f22d.jpg
git commit -m "Add Manage Travel sample images"
git push origin main
```

**STEP**: 3 — Reference the images in documentation or UI

**DESCRIPTION**: Use these examples to show the application model or page UI in README, documentation pages, or simple HTML views. Below are example snippets for Markdown, HTML, and a UI5 XML view embedding the images using the same relative paths.

**LANGUAGE**: Markdown

**CODE**:
```markdown
![Application Model](images/Fiori_App_for_Managing_Travel_Application_Model_7ba4a29.png)
![Page UI](images/Manage_Travel_Fiori_App_Page_UI_6d7f22d.jpg)
```

**LANGUAGE**: HTML

**CODE**:
```html
<!-- Example: include in an app documentation page -->
<img src="images/Fiori_App_for_Managing_Travel_Application_Model_7ba4a29.png" alt="Fiori App for Managing Travel - Application Model" width="800"/>
<img src="images/Manage_Travel_Fiori_App_Page_UI_6d7f22d.jpg" alt="Manage Travel Page UI" width="800"/>
```

**LANGUAGE**: XML (UI5 view example)

**CODE**:
```xml
<!-- Example UI5 XML view snippet (Image control) -->
<mvc:View controllerName="my.app.Controller"
          xmlns:mvc="sap.ui.core.mvc"
          xmlns="sap.m">
  <VBox>
    <Image src="images/Fiori_App_for_Managing_Travel_Application_Model_7ba4a29.png"
           alt="Application Model" densityAware="false"/>
    <Image src="images/Manage_Travel_Fiori_App_Page_UI_6d7f22d.jpg"
           alt="Page UI" densityAware="false"/>
  </VBox>
</mvc:View>
```

**STEP**: 4 — Verify in BAS preview

**DESCRIPTION**: Run a local preview (or serve the app) to confirm images render correctly. Typical commands depend on project type (UI5, Node, static site). Example serves a static folder using a simple HTTP server.

**LANGUAGE**: Shell

**CODE**:
```sh
# Example: serve project root on port 8080 (Node http-server must be installed)
# Install if needed: npm install -g http-server
http-server . -p 8080

# Then open in browser:
# http://localhost:8080/<your-page>.html
# or preview project in BAS built-in preview.
```


--------------------------------

**TITLE**: Experimental: Auto-Generating Entities, Properties, Annotations, and Test Data with Application Modeler

**INTRODUCTION**: This document provides actionable, code-focused examples and file changes produced by Application Modeler’s advanced (experimental) features in CAP projects created with the Project Accelerator. Use these examples to understand and reproduce how the Page Editor auto-generates entity properties, new entities (with UUID), chart aggregation annotations, value-help associated entities, and test data CSV files. These snippets show typical db/schema.cds, srv/service.cds, test/data CSV, and manifest.json changes that the tooling generates.

**TAGS**: fiori-tools, application-modeler, CAP, cds, annotations, test-data, srv, db, manifest.json, experimental

STEP: 0 — Caution and prerequisites

DESCRIPTION: Experimental features can change or be removed without notice. Do not use in production or with live data. Note: if the db/schema.cds or srv/service.cds are modified externally (beyond formatting changes), advanced features are turned off.

LANGUAGE: text

CODE:
```text
Caution: Experimental features are not guaranteed by SAP for future releases.
Do not use in production. If db/schema.cds or srv/service.cds are edited externally
(except formatting), advanced features are disabled.
Files referenced in examples: db/schema.cds, srv/service.cds, test/data/*.csv, manifest.json
```

STEP: 1 — Auto-generate a new entity property (new table column)

DESCRIPTION: Example of adding a new property via Page Editor -> Columns -> Enter new property -> Add. The Page Editor will add the property to db/schema.cds and append dummy test data to the corresponding CSV in test/data.

LANGUAGE: CDS

CODE:
```cds
// db/schema.cds (before)
namespace my.app;

entity Books {
  key ID     : UUID;
  title      : String;
  author     : String;
}

// db/schema.cds (after adding a new column 'publisher' via Application Modeler)
// The new property "publisher" is added to the entity.
namespace my.app;

entity Books {
  key ID     : UUID;
  title      : String;
  author     : String;
  publisher  : String; // auto-generated by Page Editor
}
```

LANGUAGE: CSV

CODE:
```csv
# test/data/Books.csv (auto-updated with dummy values)
ID,title,author,publisher
11111111-1111-1111-1111-111111111111,Example Title,Jane Doe,Default Publisher
22222222-2222-2222-2222-222222222222,Another Title,John Smith,Default Publisher
```

STEP: 2 — Auto-generate a new 1:n entity for charts/tables (with UUID and aggregation annotations)

DESCRIPTION: When you add a chart/table view and enter a new entity name and properties (dimension + measure), Application Modeler generates a new entity in db/schema.cds with key UUID, references it in srv/service.cds, annotates it with @Aggregation.ApplySupported (GroupableProperties and AggregatableProperties), and creates a test/data CSV file with dummy values.

LANGUAGE: CDS

CODE:
```cds
// db/schema.cds (auto-generated entity "SalesDetails")
namespace my.app;

entity SalesDetails {
  key ID      : UUID;           // auto-generated UUID key
  region      : String;         // dimension (user-entered)
  revenue     : Decimal(18,2);  // measure (user-entered)
}
```

LANGUAGE: CDS

CODE:
```cds
// srv/service.cds (service referencing and annotating the new entity)
// Note: using 'annotate' to add @Aggregation.ApplySupported
using my.app from '../db/schema';

service AdminService {
  entity SalesDetails as projection on my.app.SalesDetails;
}

annotate my.app.SalesDetails with
  @Aggregation.ApplySupported: {
    GroupableProperties: ['region'],
    AggregatableProperties: ['revenue']
  };
```

LANGUAGE: CSV

CODE:
```csv
# test/data/SalesDetails.csv (auto-generated dummy data)
ID,region,revenue
aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa,North,12345.67
bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb,West,23456.78
```

STEP: 3 — Add value help: auto-generate a 1:1 associated entity (value-source) and wiring

DESCRIPTION: When you set Display Type = Value Help and enter a new Value Source Entity and properties, Application Modeler auto-generates:
- a new 1:1 associated entity (in db/schema.cds) — note: generated value-help entity does NOT include a UUID key by default; it uses a key property you provide
- a 1:1 association in the original/main entity
- required annotations for value help
- replacement of the original scalar property in annotations/manifest.json to use a navigation to the associated entity key
- test/data CSV for the new associated entity (key values matched to main entity key values plus dummy values for other fields)

LANGUAGE: CDS

CODE:
```cds
// db/schema.cds (before)
// Main entity had a scalar productCode property
entity Orders {
  key ID        : UUID;
  productCode   : String;  // original scalar property (will be replaced by association after using Value Help)
  quantity      : Integer;
}

// db/schema.cds (after creating Value Help entity "Products" and wiring)
entity Products {
  key ProductCode   : String; // key chosen for value help entity (no UUID)
  Description       : String;
  Category          : String;
}

entity Orders {
  key ID        : UUID;
  product     : Association to Products; // association added (replaces productCode usage in UI annotations/manifest)
  quantity    : Integer;
}
```

LANGUAGE: CSV

CODE:
```csv
# test/data/Products.csv (auto-generated values)
ProductCode,Description,Category
P-100,Sample Product A,CategoryA
P-200,Sample Product B,CategoryB

# test/data/Orders.csv (main entity test data - product key matched automatically)
ID,product,quantity
33333333-3333-3333-3333-333333333333,P-100,10
44444444-4444-4444-4444-444444444444,P-200,5
```

LANGUAGE: JSON

CODE:
```json
// manifest.json (conceptual snippet) 
// After value-help generation, the UI metadata/annotations reference the navigation property.
// This is a conceptual representation: the scalar property usage is replaced by a navigation "product/ProductCode".

{
  "sap.ui5": {
    "models": { /* ... */ }
  },
  "sap.ui.generic.app": {
    "pages": [
      {
        "entitySet": "Orders",
        "component": {
          "settings": {
            "fields": {
              "product": {
                "valueHelp": "Products", 
                "display": "product/Description", 
                "key": "product/ProductCode"
              }
            }
          }
        }
      }
    ]
  }
}
```

STEP: 4 — Example: Chart element created with chosen dimension and created measure (how measure and dimension map to annotations)

DESCRIPTION: When you create a chart and select a Dimension and create a new Measure, the generated entity includes the chosen properties. The chart annotation references the dimension in GroupableProperties and the measure in AggregatableProperties.

LANGUAGE: CDS

CODE:
```cds
// db/schema.cds (new entity created for chart)
entity EmployeePerformance {
  key ID      : UUID;
  team        : String;     // dimension
  score       : Integer;    // measure
}

// srv/service.cds (annotation enabling aggregation on the entity)
annotate my.app.EmployeePerformance with
  @Aggregation.ApplySupported: {
    GroupableProperties: ['team'],
    AggregatableProperties: ['score']
  };
```

STEP: 5 — Refine test data with AI (UI action)

DESCRIPTION: Use the Page Editor "Refine Test Data with AI" icon to replace generated dummy values with semantically meaningful values for your app context. This is a UI operation in the Page Editor.

LANGUAGE: text

CODE:
```text
Steps:
1. Open Page Editor for the target page.
2. Click the "Refine Test Data with AI" icon.
3. Click "Generate".
Result: test/data/*.csv files are updated with refined context-aware values.
```

STEP: 6 — Files touched and where to look

DESCRIPTION: Summary of files that Application Modeler updates or generates when using these advanced features.

LANGUAGE: text

CODE:
```text
Primary files impacted by Application Modeler advanced features:
- db/schema.cds        : new entities, new properties, associations
- srv/service.cds     : projections and annotations like @Aggregation.ApplySupported
- test/data/*.csv     : auto-generated dummy test data per entity
- manifest.json       : UI wiring/annotations updated to use navigation for value-help
- (optional) css/sap-icons.css and images referenced by project UI assets
```


--------------------------------

**TITLE**: Extending an Existing SAP Fiori / UI5 Application (Fragments, Controllers, and Manifest updates)

**INTRODUCTION**: Short, actionable guide to programmatically extend an existing SAP Fiori / UI5 application by adding a UI fragment, loading it into an existing view, and adding controller logic. Includes file paths, XML/JS examples, manifest route example, and build/run commands. Use these snippets to generate or modify code in an extension project.

**TAGS**: fiori-tools, ui5, sap, extension, fragment, controller, manifest, xml, javascript

**STEP**: 1 — Locate insertion point in the existing view

**DESCRIPTION**: Find the XML view or aggregation where you want to insert new UI. Add an ID or an ExtensionPoint placeholder if you control the original view. Example shows adding an extension placeholder (core:ExtensionPoint) and an explicit id on an aggregation for programmatic insertion.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- File: webapp/view/Main.view.xml (existing view or copy in your extension) -->
<mvc:View
  controllerName="my.app.controller.Main"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns:core="sap.ui.core"
  xmlns="sap.m">
  <Page id="page">
    <!-- Programmatic insertion target -->
    <content id="pageContent"/>
    <!-- Optional: explicit extension point if the base app supports it -->
    <core:ExtensionPoint name="MyExtensionPoint"/>
  </Page>
</mvc:View>
```

**STEP**: 2 — Create an XML fragment to be injected

**DESCRIPTION**: Create a fragment file containing the UI you want to add. Place it under your extension namespace. Use a clear path and file name so code generators can reference it.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- File: webapp/ext/ExtensionFragment.fragment.xml -->
<core:FragmentDefinition
  xmlns="sap.m"
  xmlns:core="sap.ui.core"
  xmlns:html="http://www.w3.org/1999/xhtml">
  <Panel headerText="Extension Panel">
    <content>
      <Text text="This UI was added by the extension."/>
      <Button text="Extension Action" press=".onExtensionAction"/>
    </content>
  </Panel>
</core:FragmentDefinition>
```

**STEP**: 3 — Load and insert the fragment from your extension controller (async)

**DESCRIPTION**: Use sap.ui.core.Fragment.load (async) to load the fragment and attach it into the target aggregation (id "pageContent" in the example). Keep controller namespace consistent with your fragment path. Handle promise resolution and cleanup if needed.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// File: webapp/controller/Extension.controller.js
sap.ui.define([
  "sap/ui/core/mvc/Controller",
  "sap/ui/core/Fragment"
], function (Controller, Fragment) {
  "use strict";

  return Controller.extend("my.ext.controller.Extension", {
    onInit: function () {
      // Optionally call base onInit if extending an existing controller
    },

    // Call this from onInit or any lifecycle/event handler
    insertExtensionFragment: function () {
      var oView = this.getView();
      var that = this;

      Fragment.load({
        name: "my.ext.ext.ExtensionFragment", // module path to fragment without .fragment.xml
        controller: this
      }).then(function (oFragment) {
        // append fragment to aggregation with id "pageContent"
        var oTarget = oView.byId("pageContent");
        if (oTarget && oTarget.addItem) {
          oTarget.addItem(oFragment); // for lists / aggregations using addItem
        } else if (oTarget && oTarget.addContent) {
          oTarget.addContent(oFragment); // for Panels/Pages using addContent
        } else if (oView.byId("page")) {
          // fallback: add to Page content aggregation
          oView.byId("page").addContent(oFragment);
        }
      }).catch(function (err) {
        // handle load error
        jQuery.sap.log.error("Failed to load fragment", err);
      });
    },

    // Handler referenced in fragment (onExtensionAction)
    onExtensionAction: function () {
      sap.m.MessageToast.show("Extension button pressed");
    }
  });
});
```

**STEP**: 4 — Call the insertion logic from the view/controller entry point

**DESCRIPTION**: Ensure the extension controller is instantiated or referenced by the existing view. If you added an extension controller file, call insertExtensionFragment in onInit or attach an event that triggers insertion.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// File: webapp/controller/Extension.controller.js (append to the same file above)
onInit: function () {
  // Insert fragment after view has been initialized
  this.insertExtensionFragment();
}
```

**STEP**: 5 — Optionally extend or override a base controller method

**DESCRIPTION**: If you need to augment behavior of an existing controller, extend it and call the base implementation. Use sap.ui.define and Controller.extend to create your extension controller that wraps the base controller methods.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// File: webapp/controller/ExtendedBase.controller.js
sap.ui.define([
  "my/app/controller/BaseController" // path to base controller
], function (BaseController) {
  "use strict";

  return BaseController.extend("my.ext.controller.ExtendedBase", {
    onInit: function () {
      // call base implementation
      BaseController.prototype.onInit.apply(this, arguments);

      // additional init logic
      this._setupExtension();
    },

    _setupExtension: function () {
      // custom setup
    }
  });
});
```

**STEP**: 6 — Update manifest.json (optional: add route, register component or resources)

**DESCRIPTION**: If your extension introduces new views or routes, declare them in manifest.json under sap.ui5.routing or add component-level resources. Example shows adding a new route and a new view entry.

**LANGUAGE**: JSON

**CODE**:
```json
// File: webapp/manifest.json (snippets)
{
  "sap.ui5": {
    "routing": {
      "routes": [
        {
          "name": "extensionRoute",
          "pattern": "extension",
          "target": "extensionTarget"
        }
      ],
      "targets": {
        "extensionTarget": {
          "viewName": "ext.ExtensionView",
          "viewLevel": 1,
          "viewId": "extensionView"
        }
      }
    },
    "dependencies": {
      "minUI5Version": "1.84.0"
    },
    "resources": {
      "css": [],
      "js": []
    }
  }
}
```

**STEP**: 7 — File layout / recommended paths for an extension project

**DESCRIPTION**: Keep files organized in logical paths so generators and bundlers can find them.

**LANGUAGE**: Text

**CODE**:
```text
webapp/
  controller/
    Extension.controller.js
    ExtendedBase.controller.js
  ext/
    ExtensionFragment.fragment.xml
    ExtensionView.view.xml           (if you add a new view)
  view/
    Main.view.xml                    (copied or extended main view)
  manifest.json
  Component.js
```

**STEP**: 8 — Build and run (local development)

**DESCRIPTION**: Use the UI5 tooling or npm scripts used by the project to run and test the extension locally. Common commands are shown; adapt to the project's package.json and toolchain (fiori-tools, @ui5/cli, or UI5 Tooling).

**LANGUAGE**: Shell

**CODE**:
```bash
# Install dependencies (run once)
npm install

# Start a local server with UI5 tooling (project must have @ui5/cli or fiori-tools configured)
npm start          # or: ui5 serve --config=ui5.yaml
# Or use the Fiori Tools preview task if the workspace is using it:
# yarn run fiori-tools preview start
```

**STEP**: 9 — Test and validate the extension

**DESCRIPTION**: After starting the app, navigate to the view or route used by the extension. Verify:
- Fragment content appears in the intended aggregation
- Fragment event handlers are wired (button press triggers the controller method)
- No console errors during fragment load
- Routes (if added) navigate correctly

**LANGUAGE**: Text

**CODE**:
```text
# Example: open browser at
http://localhost:8080/index.html#extension
# Or open the base view where the fragment was injected
http://localhost:8080/index.html#/
```


--------------------------------

**TITLE**: Extending an SAP Fiori Application for an On-Premise System (Developer Checklist + Validation Scripts)

**INTRODUCTION**: This document provides a concise, code-focused checklist and validation snippets to prepare, validate, and manage an SAP Fiori adaptation project against an on-premise ABAP system. It covers: verifying ABAP HTTP services, validating the target application's manifest.json for adaptation prerequisites, basic Git workflow for adaptation source management, and deployment considerations/limitations. Use the commands and scripts to automate checks before creating or deploying an adaptation project.

**TAGS**: SAP Fiori, adaptation, ABAP, SAPUI5, manifest.json, VS Code, fiori-tools, on-premise, ADT, validation, git

STEP: 1 — Verify ABAP HTTP/ADT services are active

DESCRIPTION: Ensure the on-premise ABAP system has the required HTTP services activated: /sap/bc/adt, /sap/bc/ui2/app_index/, and /sap/bc/adt/discovery. Use these curl examples to verify the endpoints return a reachable response (HTTP 200). Replace <HOST>, <PORT>, <USER>, <PASS> with your system values. These checks use basic auth; in production use secure mechanisms.

LANGUAGE: Bash

CODE:
```bash
# Replace with your ABAP system hostname, port and credentials
HOST="my-abap-host.example.com"
PORT=443
USER="MYUSER"
PASS="MYPASSWORD"

# Check ADT entry point
curl -k -u "${USER}:${PASS}" "https://${HOST}:${PORT}/sap/bc/adt/discovery" -I

# Check ADT base path
curl -k -u "${USER}:${PASS}" "https://${HOST}:${PORT}/sap/bc/adt" -I

# Check UI index service
curl -k -u "${USER}:${PASS}" "https://${HOST}:${PORT}/sap/bc/ui2/app_index/" -I

# Expected: HTTP/1.1 200 OK (or 401/403 if auth is required but service exists)
```

STEP: 2 — Validate local application manifest.json for adaptation prerequisites

DESCRIPTION: Adaptation projects require the application to have a manifest.json and meet SAPUI5 and scaffold constraints:
- Manifest must exist.
- Base app system SAPUI5 version should be 1.72 or higher for creating an adaptation project.
- App must not be a scaffolding app using "sap.ca.scfld.md".
- Minimum allowed base-app UI5 is 1.30 overall (compatibility note).
This Node.js script loads manifest.json and validates:
- manifest presence
- presence of sap.ui5 and minUI5Version (or inferred requirement)
- that the app does not list sap.ca.scfld.md in libraries

LANGUAGE: JavaScript (Node.js)

CODE:
```javascript
// validate-manifest.js
// Usage: node validate-manifest.js /path/to/manifest.json
const fs = require('fs');
const path = require('path');

function fail(msg) { console.error('INVALID:', msg); process.exitCode = 2; }
function ok(msg) { console.log('OK:', msg); }

const manifestPath = process.argv[2];
if (!manifestPath) {
  console.error('Usage: node validate-manifest.js /path/to/manifest.json');
  process.exit(1);
}

if (!fs.existsSync(manifestPath)) fail(`manifest.json not found at ${manifestPath}`);

let manifest;
try {
  manifest = JSON.parse(fs.readFileSync(manifestPath, 'utf8'));
} catch (e) {
  fail(`Failed to parse manifest.json: ${e.message}`);
}

ok(`manifest.json found: ${manifestPath}`);

// Check sap.ui5 section
const sapUi5 = manifest['sap.ui5'];
if (!sapUi5) fail('manifest.json missing "sap.ui5" section – required for adaptation projects');

ok('manifest contains "sap.ui5" section');

// Check minimum UI5 version if declared
const deps = sapUi5.dependencies || {};
const minUI5 = deps.minUI5Version || deps['minUI5Version'] || null;
if (minUI5) {
  // normalize to numeric major.minor.patch
  console.log(`Declared minUI5Version: ${minUI5}`);
  const [maj, min] = minUI5.split('.').map(n => parseInt(n,10));
  if (maj < 1 || (maj === 1 && min < 72)) {
    console.warn('WARN: Declared minUI5Version is lower than 1.72. Adaptation project creation may be restricted.');
  } else {
    ok('Declared minUI5Version >= 1.72 (suitable)');
  }
} else {
  console.warn('WARN: minUI5Version not declared. Verify the system SAPUI5 version is >= 1.72 to create an adaptation project.');
}

// Check for scaffolding app usage (sap.ca.scfld.md)
const libs = deps.libs || {};
if (Object.prototype.hasOwnProperty.call(libs, 'sap.ca.scfld.md')) {
  fail('Application uses sap.ca.scfld.md (scaffolding). Adaptation projects do not support scaffolding applications.');
} else {
  ok('Application does not use sap.ca.scfld.md (not a scaffolding app)');
}

console.log('Validation complete. Follow the guidance in the document for additional ABAP-side checks.');
```

STEP: 3 — Check ABAP component SAP_UI version (BASIS verification note)

DESCRIPTION: Adaptation projects are supported only on on-premise ABAP systems with SAP_UI >= 7.54. This check usually requires BASIS access to the system or using SAP system tools (transaction SPAM/SAINT, release notes, or system information). If you want to script a quick check via HTTP using ADT info (may require ADT/system-specific endpoint), coordinate with BASIS. The example below shows a basic curl attempt to an ADT info endpoint — adapt to your system tooling/APIs.

LANGUAGE: Bash

CODE:
```bash
# Basic ADT info probe (may or may not return component version depending on system)
HOST="my-abap-host.example.com"
PORT=443
USER="MYUSER"
PASS="MYPASSWORD"

curl -k -u "${USER}:${PASS}" "https://${HOST}:${PORT}/sap/bc/adt/info" -i || echo "ADT info endpoint not available - ask BASIS to verify SAP_UI component version >= 7.54"
```

STEP: 4 — Source control: create a local Git repository for the adaptation project

DESCRIPTION: Keep the adaptation project in source control (Git) for preview, editing and tracking changes. Typical commands to initialize, stage, commit and push to a remote.

LANGUAGE: Bash (Git)

CODE:
```bash
# From the root of your adaptation project folder
git init
git add .
git commit -m "Initial adaptation project snapshot"
# Add remote and push
git remote add origin git@your-git-server:project/adaptation-project.git
git push -u origin main
```

STEP: 5 — VS Code / Fiori Tools workflow (developer actions)

DESCRIPTION: Use Visual Studio Code and the SAP Fiori tools extensions to create and edit adaptation projects. Recommended workflow:
- Ensure your ABAP system connection (ADT) is configured in VS Code as described in your system-connection docs.
- Use the Fiori Tools command to create an Adaptation Project (via Command Palette).
- Use the Adaptation Editor to preview and edit; preview runs in a sandbox-like environment (not full Fiori Launchpad).
- Use local source code (from Git) to preview and modify before deploying.

LANGUAGE: Plain text (VS Code steps)

CODE:
```text
1. Open VS Code.
2. Open the Command Palette (Ctrl+Shift+P / Cmd+Shift+P).
3. Run: "Fiori: Create Adaptation Project" (or the corresponding Fiori Tools command in your extension).
   - When prompted, provide the target ABAP system connection (ensure /sap/bc/adt/discovery is accessible).
4. Work on the Adaptation Editor to make UI changes.
5. Preview in the Adaptation Editor or in the separate browser preview (sandbox).
6. Commit and push your changes to your Git repository for versioning.
```

STEP: 6 — Deployment considerations and limitation checks

DESCRIPTION: Before deploying to the ABAP repository, check these constraints:
- You cannot deploy an adaptation project into a package enabled for ABAP for Cloud Development — deployment will fail in that case.
- Adaptation projects cannot be created from or used as a base for an application variant that has already been deployed with an adaptation project.
- If the selected system has SAPUI5 < 1.96, you need to implement SAP Note 3223667 on your system.
- If the selected system has SAPUI5 < 1.90, the system does not support using an adaptation project as a base for a new adaptation project — update SAPUI5 to proceed.

LANGUAGE: Plain text (Checklist)

CODE:
```text
Pre-deploy checklist:
- Confirm target ABAP package is NOT enabled for ABAP for Cloud Development.
- Confirm SAP_UI component version >= 7.54 (BASIS verification).
- If system UI5 < 1.96 -> implement SAP Note 3223667.
- If system UI5 < 1.90 -> you cannot use an adaptation project as a base for another adaptation project.
- Confirm target application:
    - Has manifest.json
    - System SAPUI5 version >= 1.72 (for creating an adaptation project)
    - Is NOT a scaffolding app (sap.ca.scfld.md)
    - Does not require a mandatory launch parameter
- If any constraint is violated, resolve before attempting to create or deploy an adaptation project.
```

STEP: 7 — Troubleshooting common preview limitations

DESCRIPTION: The Adaptation Editor preview and the separate browser preview are sandbox-like and not the real SAP Fiori launchpad. Features that depend on the launchpad (cross-app navigation, launchpad-specific services) may not function during preview but will work after deployment to the real launchpad. Use the preview only for UI/content adaptations and validate navigation after deployment.

LANGUAGE: Plain text

CODE:
```text
Preview guidance:
- Use Adaptation Editor for UI edits and quick verification.
- Do not rely on preview for:
  - Cross-application navigation via Fiori launchpad
  - Launchpad services and personalization that require FLP context
- Perform final verification in the deployed environment within SAP Fiori launchpad.
```


--------------------------------

**TITLE**: Extending an SAP Fiori Application with an Adaptation Project (S/4HANA Cloud & BTP ABAP)

**INTRODUCTION**: Step-by-step, code-oriented checklist to prepare, create, and manage an SAPUI5 Adaptation Project used to create an application variant for SAP Fiori applications on SAP S/4HANA Cloud (Public Edition) and SAP BTP, ABAP Environment. Includes examples for destination configuration, Git usage, manifest fragment for an application variant, and required catalog IDs.

**TAGS**: SAP Fiori, SAPUI5, adaptation project, application variant, S/4HANA Cloud, ABAP, SAP BTP, SAP Business Application Studio, Git, destination

**STEP**: 1 — Verify application is released for extensibility
**DESCRIPTION**: Confirm the SAP Fiori application you want to extend is released for extensibility using adaptation projects. Use the Fiori Apps Reference Library and check the app’s “Extensibility” / “Implementation information”.
**LANGUAGE**: Shell
**CODE**:
```sh
# Open the Fiori Apps Reference Library in default browser (Linux/macOS)
xdg-open "https://fioriappslibrary.hana.ondemand.com/sap/fix/externalViewer/#/homePage"

# Windows (PowerShell)
start "https://fioriappslibrary.hana.ondemand.com/sap/fix/externalViewer/#/homePage"
```

**STEP**: 2 — If not supported: request extensibility
**DESCRIPTION**: If the app is not released for adaptation projects, submit an influence request to SAP so the app can be enabled.
**LANGUAGE**: Shell
**CODE**:
```sh
# Open the Influence Opportunity page to submit a request
xdg-open "https://influence.sap.com/sap/ino/#/campaign/1177"
```

**STEP**: 3 — Confirm system landscape and developer tenant
**DESCRIPTION**: For SAP S/4HANA Cloud Public Edition, ensure a 3-system landscape and developer tenant are available (required for adaptation projects in S/4HC). Review SAP docs for system landscape requirements.
**LANGUAGE**: Documentation
**CODE**:
```text
Reference:
System Landscapes in SAP S/4HANA Cloud:
https://help.sap.com/docs/SAP_S4HANA_CLOUD/a630d57fc5004c6383e7a81efee7a8bb/aa60b129af7b4ce8ae052618c8315d29.html
```

**STEP**: 4 — Read the release procedure for making an app extensible
**DESCRIPTION**: If you are the app owner, follow the release procedure to mark the SAP Fiori application extensible. Keep a copy of the release procedure and required files.
**LANGUAGE**: Documentation
**CODE**:
```text
See:
Releasing an SAP Fiori Application to Be Extensible in Adaptation Projects:
releasing-an-sap-fiori-application-to-be-extensible-in-adaptation-projects-on-sap-s-4hana-1046206.md
```

**STEP**: 5 — Create a destination for SAP Business Application Studio (development tenant)
**DESCRIPTION**: Configure a destination in SAP BTP Cockpit to connect your SAP Business Application Studio/dev tenant to the S/4HANA Cloud or ABAP environment. Use the destination in BAS to create and preview adaptation projects.
**LANGUAGE**: JSON
**CODE**:
```json
{
  "Name": "S4HC_DEV",
  "Type": "HTTP",
  "Authentication": "OAuth2SAMLBearerAssertion",
  "URL": "https://<your-s4hc-host>",
  "ProxyType": "Internet",
  "TrustAll": "true",
  "TokenServiceURL": "https://<account-region>.authentication.sap.hana.ondemand.com",
  "Description": "Destination to connect BAS to S/4HANA Cloud developer tenant"
}
```

**STEP**: 6 — Ensure developer user has required business catalogs
**DESCRIPTION**: Assign the developer user the catalogs required to retrieve the list of extensible apps and to deploy UI: include Development - UI Deployment and the catalog to list extensible apps.
**LANGUAGE**: Text
**CODE**:
```text
Example business catalogs to assign:
- Development - UI Deployment (SAP_A4C_BC_DEV_UID_PC)
- Business catalog to retrieve list of extensible apps (e.g. SAP_A4C_BC_DEV_OBJ_DIS_PC)
```

**STEP**: 7 — Clone or import the source application into Git (use project source to preview and modify)
**DESCRIPTION**: Use Git to maintain and modify the adaptation project and the project source code. Clone the repository in BAS or locally, create a feature branch for the adaptation, and push/pull changes.
**LANGUAGE**: Shell
**CODE**:
```sh
# Clone repository (example)
git clone https://git.example.com/<workspace>/<app-repo>.git
cd <app-repo>

# Create a branch for your adaptation project
git checkout -b feat/adaption-project-<your-id>

# After changes
git add .
git commit -m "Add adaptation project: <short description>"
git push origin feat/adaption-project-<your-id>
```

**STEP**: 8 — Create an Adaptation Project (SAP Business Application Studio or VS Code with Fiori tools)
**DESCRIPTION**: In BAS or VS Code with SAP Fiori tools, create a new Adaptation Project that references the original application. Use the project wizard or template; the adaptation will create an application variant (appVariantId) that points to the original app.
**LANGUAGE**: JSON (manifest fragment)
**CODE**:
```json
{
  "sap.app": {
    "id": "com.example.myapp",
    "title": "My App - Adaptation Variant",
    "applicationVariantId": "Z_MYAPP_VARIANT",
    "applicationVersion": {
      "version": "1.0.0"
    }
  },
  "sap.ui5": {
    "dependencies": {
      "minUI5Version": "1.84.0"
    }
  }
}
```

**STEP**: 9 — Project structure and assets (include architecture image)
**DESCRIPTION**: Place the architecture image and any adaptation assets inside the adaptation project. Preserve the following path for documentation or repository consistency.
**LANGUAGE**: Text
**CODE**:
```text
Recommended structure:
<adaptation-project>/
├─ manifest.json                      # includes applicationVariantId
├─ webapp/
│  ├─ index.html
│  ├─ Component.js
│  └─ images/
│     └─ AdaptationProjectS4HCarchitecture_f84e21c.png
# Architecture image path referenced in docs:
images/AdaptationProjectS4HCarchitecture_f84e21c.png
```

**STEP**: 10 — Preview and run the adaptation locally or in BAS
**DESCRIPTION**: Use UI5 tooling or the Fiori tools preview to run the adaptation project locally or inside BAS. Always use the project source (Git workspace) to preview and test changes.
**LANGUAGE**: Shell
**CODE**:
```sh
# Install dependencies (if package.json present)
npm install

# Start UI5 tooling preview (global ui5-cli)
# Option A: ui5 serve
npx ui5-cli serve --config=ui5.yaml

# Option B: Fiori tools preview (if configured)
npm start

# Open local preview URL printed by the tooling, or use BAS Preview feature
```

**STEP**: 11 — Commit, push and maintain source control for the adaptation
**DESCRIPTION**: Keep adaptation changes in Git. Use branches for features, include clear commit messages, and push to your central repository for CI/CD or transport deployments.
**LANGUAGE**: Shell
**CODE**:
```sh
git add .
git commit -m "Adaptation: add variant Z_MYAPP_VARIANT - UI changes"
git push origin feat/adaption-project-<your-id>
```

**STEP**: 12 — References and further reading (links to official docs)
**DESCRIPTION**: Use these official references for detailed procedures and constraints.
**LANGUAGE**: Documentation
**CODE**:
```text
- Fiori Apps Reference Library: https://fioriappslibrary.hana.ondemand.com/sap/fix/externalViewer/#/homePage
- Git Source Control in BAS: https://help.sap.com/docs/bas/sap-business-application-studio/git-source-control
- Create a Destination to Connect to SAP Business Application Studio:
  https://help.sap.com/docs/SAP_S4HANA_CLOUD/6aa39f1ac05441e5a23f484f31e477e7/0af2819bbe064a3da455753c8518dd81.html
- Release app for extensibility:
  releasing-an-sap-fiori-application-to-be-extensible-in-adaptation-projects-on-sap-s-4hana-1046206.md
```
--------------------------------

**TITLE**: Generate a SAP Fiori Elements Application from an Image Using Project Accelerator

**INTRODUCTION**: Step-by-step developer-focused guide to generate a single SAP Fiori elements application from a single image using the Project Accelerator in SAP Fiori tools AI inside SAP Business Application Studio (BAS). Includes required image placement, exact commands/UI actions, allowed file types, example paths, and how to stop generation.

**TAGS**: fiori-tools, project-accelerator, sap-fiori, business-application-studio, image-generation, AI, fiori-elements

**STEP**: 1 — Prepare and label the image

**DESCRIPTION**: Create a single image that represents the UI or application model for one list report or object page. Use English labels on the image for best results. Keep the image focused on one screen / one application. Refer to the example "Manage Travel List Report Page" for labeling guidance.

**LANGUAGE**: Text

**CODE**:
```text
# Example filename and recommended placement relative to your workspace
requirements/manage-travel-list-report.jpg

# Image requirements
- One image per application
- Represents a single list report OR a single object page
- Labels in English on the image (field names, buttons, titles)
```

**STEP**: 2 — Upload the image into your BAS workspace

**DESCRIPTION**: Put the image file in your SAP Business Application Studio workspace so the Project Accelerator can access it. You can upload via the BAS File Explorer (UI Upload) or copy it into the workspace from a terminal.

**LANGUAGE**: Bash / Text

**CODE**:
```bash
# Example: copy from local machine (when using a workspace terminal already synced)
# Place the image inside your workspace folder, e.g. "requirements"
cp /local/path/manage-travel-list-report.jpg ~/project/workspace/requirements/

# Or use BAS File Explorer: Right-click a folder -> Upload Files -> select manage-travel-list-report.jpg
```

**STEP**: 3 — Launch Project Accelerator (two options)

**DESCRIPTION**: Start the Project Accelerator extension in BAS via Command Palette or SAP Fiori activity icon.

**LANGUAGE**: Commands

**CODE**:
```text
# Option A: Command Palette
# Open Command Palette: [CMD/CTRL] + [Shift] + [P]
# Execute the command:
Fiori tools AI: Launch the Project Accelerator

# Option B: SAP Fiori activity
# Click the SAP Fiori icon on the activity bar (icon: SAP-icons-TNT-V3)
```

**STEP**: 4 — Select your image file in Project Accelerator

**DESCRIPTION**: In the Project Accelerator UI, upload/choose the single image file. Supported upload types are .docx, .md, .txt, .jpg. Ensure the request refers only to one application and one project.

**LANGUAGE**: Text

**CODE**:
```text
# In Project Accelerator:
1. Click "Choose File (.docx, .md, .txt, .jpg)"
2. Select: requirements/manage-travel-list-report.jpg

# Allowed file types:
.docx, .md, .txt, .jpg

# Important:
# - The Project Accelerator cannot generate a second application for the same project.
# - Your prompt must be about generating an SAP Fiori elements application (no general AI requests).
```

**STEP**: 5 — Provide the Project Folder Path for generation

**DESCRIPTION**: Enter the target folder path inside the workspace where the generated project will be created. Use an existing or new folder path under your workspace root.

**LANGUAGE**: Text

**CODE**:
```text
# Example project folder path (relative to workspace root)
my-generated-app
# or
projects/my-generated-app

# Enter this path in the "Project Folder Path" input in Project Accelerator before clicking Generate.
```

**STEP**: 6 — Generate the application and how to stop generation

**DESCRIPTION**: Click Generate. Generation may take time depending on the requirement. If you need to cancel, click the Stop icon and confirm. You can then edit the image or request and re-generate.

**LANGUAGE**: Text

**CODE**:
```text
# In Project Accelerator:
1. Click "Generate"

# To stop mid-generation:
1. Click the Stop icon (white_large_square)
2. Confirm: "Are you sure you want to stop generation?" -> Click "Yes"

# After stopping: Edit the requirement image or input and restart generation.
```

**STEP**: 7 — Locate generated project and next steps

**DESCRIPTION**: The generated project is written to the Project Folder Path you specified. After generation completes, Project Accelerator opens the Application Information for the new SAP Fiori application. Continue modifying and enhancing the generated app using SAP Fiori tools (edit CDS, manifest, annotations, UI).

**LANGUAGE**: Text

**CODE**:
```text
# Example artifact location (after successful generation)
workspace/my-generated-app/

# Follow-up:
- Open "Application Information" that launches automatically
- Edit app using SAP Fiori tools (Manifest, annotations, CDS, UI code)
```
--------------------------------

**TITLE**: Generate an SAP Fiori Elements Application Using Text and Images (Project Accelerator)

**INTRODUCTION**: This guide shows how to prepare business-requirements input (Markdown or Word + images), upload it to your workspace in SAP Business Application Studio, and run the Project Accelerator (Fiori tools AI) to generate a single SAP Fiori elements application. Includes concrete examples for Markdown content, workspace layout, shell commands to place files, and expected generated project structure.

**TAGS**: fiori-tools, project-accelerator, sap-fiori, sap-business-application-studio, markdown, docx, images, automation

**STEP**: 1 — Prepare the business-requirements file (Markdown or .docx)

**DESCRIPTION**: Create a single requirements file that combines explanatory text and one or more images. Rules:
- Allowed input file types: .docx, .md, .txt, .jpg (when choosing a single image).
- If using Markdown (.md), upload referenced images to the workspace and reference them with relative paths.
- Each image should represent a single screen (list report or object page). Label images in English.
- Provide text that maps images to pages, lists fields/columns, enumerates code list values, and describes hidden views (tabs/sections). If a page has multiple states, provide multiple images and explain which state each image shows.
- If using .docx, include only plain text and images. Do NOT include advanced formatting (headers, footers, tables, complex styles).

**LANGUAGE**: markdown

**CODE**:
```markdown
# Manage Travel App

List report (images/list-report.png)
Object page - Overview (images/object-page-overview.png)
Object page - Pricing tab (images/object-page-pricing.png)

Descriptions:
- List Report:
  - Columns: RequestID, TravelerName, Destination, StartDate, EndDate, Status
- Object Page (Overview):
  - Fields: RequestID, TravelerName, Destination, StartDate, EndDate, Status, CostCenter
- Object Page (Pricing tab):
  - Displays cost breakdown and currency
- Status Code List values: Draft, Submitted, Approved, Rejected
- Mapping:
  - images/list-report.png -> List Report screen
  - images/object-page-overview.png -> Object Page Overview section
  - images/object-page-pricing.png -> Object Page Pricing tab
```

**LANGUAGE**: text

**CODE**:
```text
Example plain content for a .docx file (save as a Word document containing only this text and images in the document body):

Title: Manage Travel App

Insert images in-line (label each image in plain text directly above/below the image):
- [Image: list-report.png] — List Report: RequestID, TravelerName, Destination, StartDate, EndDate, Status
- [Image: object-page-overview.png] — Object Page Overview: RequestID, TravelerName, Destination, StartDate, EndDate, Status, CostCenter
- [Image: object-page-pricing.png] — Object Page Pricing tab: currency, amounts

Notes:
- Status values: Draft, Submitted, Approved, Rejected
- If a page has multiple states, include multiple images and explicitly note which state each image shows.
```

**STEP**: 2 — Put the file and images into your BAS workspace

**DESCRIPTION**: Place the requirements file and image assets inside the workspace folder that SAP Business Application Studio will access. Use a clear folder name — this folder will be referenced when you provide the Project Folder Path in the Project Accelerator UI.

**LANGUAGE**: bash

**CODE**:
```bash
# Example workspace layout and copy commands (adjust paths to your environment)
WORKSPACE=~/workspace/manage-travel-app
mkdir -p "$WORKSPACE/images"

# Copy example files into the workspace
cp ~/Downloads/list-report.png "$WORKSPACE/images/"
cp ~/Downloads/object-page-overview.png "$WORKSPACE/images/"
cp ~/Downloads/object-page-pricing.png "$WORKSPACE/images/"
cp ~/local/requirements.md "$WORKSPACE/requirements.md"

# Verify layout
tree "$WORKSPACE" -a
```

**LANGUAGE**: text

**CODE**:
```text
Recommended workspace file tree (example):

/home/user/workspace/manage-travel-app/
├─ requirements.md
├─ images/
│  ├─ list-report.png
│  ├─ object-page-overview.png
│  └─ object-page-pricing.png
```

**STEP**: 3 — Launch the Project Accelerator (Fiori tools AI)

**DESCRIPTION**: Open the Project Accelerator UI in SAP Business Application Studio using either the Command Palette or the SAP Fiori activity icon.

**LANGUAGE**: text

**CODE**:
```text
Command Palette:
- Shortcut: CMD/CTRL + SHIFT + P
- Run command: Fiori tools AI: Launch the Project Accelerator

SAP Fiori icon:
- Click the SAP Fiori icon (activity bar) to open Project Accelerator
```

**DESCRIPTION**: Important constraint: Once Project Accelerator is open, all prompts/queries must be related to generating an SAP Fiori elements application. General AI queries are not supported in this mode.

**STEP**: 4 — Select your file and generate

**DESCRIPTION**: Use Project Accelerator UI:
1. Click "Choose File (.docx, .md, .txt, .jpg)" and select your prepared requirements file.
2. Enter the Project Folder Path where you want the generated app to be created (example path below).
3. Click "Generate".

Notes:
- The Project Accelerator cannot generate a second application into the same existing project. Ensure your request refers to a single application.
- Generation time depends on complexity; you can stop generation if needed.

**LANGUAGE**: text

**CODE**:
```text
Allowed input types shown in UI: .docx, .md, .txt, .jpg

Example Project Folder Path (enter this in the UI):
/home/user/projects/manage-travel-app/generated
```

**STEP**: 5 — Stop generation (if required)

**DESCRIPTION**: If you need to cancel generation to edit requirements, use the Stop action in the Project Accelerator UI and confirm.

**LANGUAGE**: text

**CODE**:
```text
- Click the Stop icon (white square) in the Project Accelerator UI.
- Confirm: "Are you sure you want to stop generation?" -> Click "Yes"
- Edit your requirements file and restart generation.
```

**STEP**: 6 — Inspect generated project and continue development

**DESCRIPTION**: After generation completes:
- The project is created at the Project Folder Path you provided.
- Application Information for the generated SAP Fiori app opens automatically; use SAP Fiori tools to refine the app.

**LANGUAGE**: text

**CODE**:
```text
Example generated project structure:

/home/user/projects/manage-travel-app/generated/
├─ app/
│  ├─ webapp/
│  │  ├─ manifest.json
│  │  ├─ Component.js
│  │  ├─ view/
│││  └─ i18n/
├─ ui5.yaml
├─ package.json
├─ xs-app.json (if applicable)
```

**STEP**: Troubleshooting & Best Practices

**DESCRIPTION**:
- Label images in English for best results.
- Provide explicit mappings between images and pages, and list code list values or any data semantics not visible in images.
- For pages with hidden states, include one image per state and explain correspondences.
- For .docx inputs, avoid headers/footers, tables, and other advanced formatting; include only inline text and images.
--------------------------------

**TITLE**: Generate an SAP Fiori elements Application with Project Accelerator (Text or File Input)

**INTRODUCTION**: Generate a single SAP Fiori elements application using the Project Accelerator in SAP Fiori tools AI. This guide shows how to launch the accelerator, provide business requirements as text or a file, set the project folder path, start generation, stop generation if needed, and locate the generated project.

**TAGS**: fiori-tools, project-accelerator, sap-fiori, joule, sap-business-application-studio, ai, fiori-gen-spec-app

**STEP**: 1 — Launch the Project Accelerator

**DESCRIPTION**: Use one of three methods to open the Project Accelerator. Use the exact command name in Command Palette or the activity bar icons in VS Code / SAP Business Application Studio. After launching, you must limit queries to generating a single SAP Fiori elements application.

**LANGUAGE**: Text

**CODE**:
```text
Command Palette (VS Code / Business Application Studio):
  Keyboard: Ctrl+Shift+P (Windows/Linux) or Cmd+Shift+P (macOS)
  Command to run: Fiori tools AI: Launch the Project Accelerator

SAP Fiori activity bar:
  Click the "SAP Fiori" icon (activity bar icon)

Joule activity bar:
  Click the "Joule" icon (activity bar icon)
```

**STEP**: 2 — Provide business requirements (Text input)

**DESCRIPTION**: When launched via Command Palette or SAP Fiori, paste or type your business requirements into the "Business Requirements" textbox under Project Accelerator. Use English and describe a single application clearly (entities, relationships, screens, filters, actions). Joule accepts inline commands (examples below).

**LANGUAGE**: Text

**CODE**:
```text
Command Palette / SAP Fiori:
  Project Accelerator -> Business Requirements (textbox)
  Enter plain English requirements describing exactly one Fiori elements app.

Joule (inline text example):
  /fiori-gen-spec-app Create a Fiori elements application to manage Contracts and Customers...
```

**STEP**: 3 — Provide business requirements (File input)

**DESCRIPTION**: Upload a .docx, .md, .txt, or .jpg file containing business requirements to your workspace then point the Project Accelerator to it. For Joule, pass the file path in the command. Example workspace upload path shown.

**LANGUAGE**: Text

**CODE**:
```text
Upload file to workspace:
  Upload to: workspace/<your-workspace-folder>/business-requirements.md
  Supported file types: .docx, .md, .txt, .jpg

Command Palette / SAP Fiori:
  Project Accelerator -> Choose File (docx, .md, .txt, .jpg) -> select uploaded file

Joule (file path example):
  /fiori-gen-spec-app #(workspace/<your-workspace-folder>/business-requirements.md)
```

**STEP**: 4 — Use example request templates (best practice)

**DESCRIPTION**: For best results, use English and model requests after provided examples. Ensure the request refers to only one application. Example filenames are provided so agents can fetch or reference them.

**LANGUAGE**: Text

**CODE**:
```text
Example files (reference or upload these patterns):
  example-1-manage-contracts-and-customer-information-in-the-system-c1bccf2.md
  example-2-display-customers-with-related-contracts-a6c978f.md
```

**STEP**: 5 — Set the Project Folder Path and start generation

**DESCRIPTION**: Provide the target filesystem path for the generated project and click Generate. If launched from Joule, you will be redirected to the Project Accelerator UI to complete generation. Generation time varies by complexity.

**LANGUAGE**: Text

**CODE**:
```text
Project Folder Path (example):
  workspace/<your-workspace-folder>/<target-project-folder>

Action:
  Click: Generate
```

**STEP**: 6 — Stop generation (cancel)

**DESCRIPTION**: If you need to cancel generation to edit requirements, click the Stop icon and confirm the prompt. After stopping, edit requirements and re-run generation.

**LANGUAGE**: Text

**CODE**:
```text
Stop generation:
  Click the Stop icon (white large square)
  Confirmation dialog text: "Are you sure you want to stop generation?"
  Click: Yes
```

**STEP**: 7 — Generated output and next steps

**DESCRIPTION**: After generation completes, the project is added to the filesystem at the Project Folder Path. The Application Information view for the generated SAP Fiori application opens. Use SAP Fiori tools to further customize and test the app.

**LANGUAGE**: Text

**CODE**:
```text
Output location (example):
  workspace/<your-workspace-folder>/<target-project-folder>/<generated-app>

Post-generation:
  Application Information view opens automatically
  Use SAP Fiori tools editors and generators to modify entities, annotations, pages, and UI
```

**STEP**: 8 — (Optional) Asset reference: page header stylesheet

**DESCRIPTION**: Preserve the header stylesheet reference if you need to replicate the Project Accelerator UI look in documentation or assets.

**LANGUAGE**: HTML

**CODE**:
```html
<link rel="stylesheet" type="text/css" href="css/sap-icons.css"/>
```
--------------------------------

**TITLE**: Generating SAP Fiori CAP Applications with Project Accelerator / Joule (SAP Fiori tools AI)

**INTRODUCTION**: This guide provides a concise, code-focused workflow and structured input examples for using SAP Fiori tools AI (Project Accelerator or Joule) to generate CAP projects with SAP Fiori elements UIs. Use the provided JSON schemas and examples to prepare machine-readable business requirements that the accelerator will consume to create entities, services, test data, and UI floorplans.

**TAGS**: fiori-tools, sap-fiori, cap, project-accelerator, joule, sap-build-code, ai

**STEP**: 1 — Verify prerequisites

**DESCRIPTION**: Confirm your environment meets the required subscriptions, IDE, and extensions before generating an application.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "prerequisites": {
    "subscription": {
      "required": "SAP Build Code subscription or SAP Build Code Test Drive",
      "info": "https://developers.sap.com/mission.sap-build-code-test-drive.html"
    },
    "dev_space": {
      "required_extensions": [
        "SAP Fiori tools",
        "CAP tools"
      ],
      "note": "Create a dev space in SAP Business Application Studio (BAS) that contains both extensions."
    },
    "ide": "SAP Business Application Studio"
  }
}
```

**STEP**: 2 — Prepare business requirements (input formats)

**DESCRIPTION**: Prepare a machine-friendly business requirements payload. The accelerator accepts text, images (referenced by path or URL), or both. Use these JSON templates to represent requirements unambiguously. Prefer concise, explicit labels and enumerations for code lists and field restrictions.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "business_requirements_text_only": {
    "summary": "Manage Project Invoices",
    "description": "Entities: Project, Invoice. Project has id, name (alphanumeric, required), startDate (date). Invoice has id, amount (decimal), currency (USD, EUR), dueDate (date), status (Paid, Pending, Overdue). Associations: Project 1:n Invoice. UI: one List Report for Invoice with filters: project, status, dueDate range. Include object page for Invoice with form and a table section for history."
  }
}
```

```json
{
  "business_requirements_image_only": {
    "images": [
      {
        "path": "images/invoice_list_layout.png",
        "description": "List report layout: columns for Invoice ID, Project Name, Amount, Currency, Due Date, Status; filters on top: Project (value help), Status (code list), Due Date (range)"
      },
      {
        "path": "images/invoice_object_page.png",
        "description": "Object page layout: header with Invoice ID, amount; form section with invoice fields; table section showing payment history"
      }
    ]
  }
}
```

```json
{
  "business_requirements_text_and_images": {
    "text": "Manage Orders and OrderItems. Order: id, orderNumber(string), customer(string), totalAmount(decimal), status(Placed, Shipped, Cancelled). OrderItem: id, productName, quantity(int), price(decimal). Association: Order 1:n OrderItem. UI: List report for Order with filter 'customer' and 'status'; object page for Order with form (header) and table for OrderItems.",
    "images": [
      { "path": "images/order-table.png", "description": "table columns: orderNumber, customer, totalAmount, status" }
    ]
  }
}
```

**STEP**: 3 — Structured features schema (explicit supported features)

**DESCRIPTION**: Use this features schema to express supported capabilities explicitly (entities, properties, associations, code lists, list report options, object pages). The accelerator uses these fields; missing instructions may be implemented at the tool's discretion.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "features_schema": {
    "entities": [
      {
        "name": "Invoice",
        "label": "Invoice",
        "properties": [
          { "name": "id", "label": "Invoice ID", "type": "UUID", "key": true },
          { "name": "amount", "label": "Amount", "type": "Decimal", "required": true },
          { "name": "currency", "label": "Currency", "type": "String", "codeList": ["USD", "EUR"] },
          { "name": "dueDate", "label": "Due Date", "type": "Date" },
          { "name": "status", "label": "Status", "type": "String", "codeList": ["Paid", "Pending", "Overdue"], "criticality": true }
        ],
        "associations": [
          { "type": "1:n", "target": "Project", "label": "ProjectInvoices" }
        ]
      }
    ],
    "ui": {
      "applicationType": "Single List Report with Object Page",
      "listReport": {
        "entity": "Invoice",
        "filters": ["Project", "Status", "DueDateRange"],
        "table": {
          "mode": "ResponsiveTable",
          "columns": ["Invoice ID", "Project Name", "Amount", "Currency", "Due Date", "Status"],
          "multipleViews": false
        },
        "initialDataLoad": true
      },
      "objectPages": [
        {
          "entity": "Invoice",
          "sections": [
            {
              "type": "Form",
              "fields": ["Invoice ID", "Amount", "Currency", "Due Date", "Status"]
            },
            {
              "type": "Table",
              "title": "Payment History",
              "columns": ["PaymentDate", "Amount", "PaymentMethod"]
            }
          ]
        }
      ],
      "formEntryObjectPage": false
    },
    "testData": {
      "generateRandomValues": true,
      "deriveFromImages": true,
      "codeListValuesStoredAsDataEntities": true
    },
    "draftEnabled": true,
    "standardActions": ["create", "edit", "delete", "save", "cancel"]
  }
}
```

**STEP**: 4 — Example complete payload to send to Project Accelerator / Joule

**DESCRIPTION**: Combine project metadata, business requirements, and the features schema into a single input payload for the accelerator. Save this as project_accelerator_input.json and provide it to the tool (UI upload or API call if available).

**LANGUAGE**: JSON

**CODE**:
```json
{
  "project": {
    "name": "invoice-manager",
    "targetFolder": "/workspace/invoice-manager",
    "framework": "CAP",
    "uiFramework": "SAP Fiori elements",
    "generateSampleData": true
  },
  "businessRequirements": {
    "text": "Manage Project Invoices. See invoice_list_layout.png and invoice_object_page.png for layout. Explicit statuses: Paid, Pending, Overdue. Project association required.",
    "images": [
      { "path": "images/invoice_list_layout.png" },
      { "path": "images/invoice_object_page.png" }
    ]
  },
  "features": {
    "entities": [
      {
        "name": "Project",
        "label": "Project",
        "properties": [
          { "name": "ID", "label": "Project ID", "type": "UUID", "key": true },
          { "name": "Name", "label": "Project Name", "type": "String", "required": true }
        ]
      },
      {
        "name": "Invoice",
        "label": "Invoice",
        "properties": [
          { "name": "ID", "label": "Invoice ID", "type": "UUID", "key": true },
          { "name": "Amount", "label": "Amount", "type": "Decimal" },
          { "name": "Currency", "label": "Currency", "type": "String", "codeList": ["USD", "EUR"] },
          { "name": "DueDate", "label": "Due Date", "type": "Date" },
          { "name": "Status", "label": "Status", "type": "String", "codeList": ["Paid", "Pending", "Overdue"], "criticality": true }
        ],
        "associations": [
          { "type": "1:n", "target": "Project", "label": "Invoices" }
        ]
      }
    ],
    "ui": {
      "applicationType": "ListReport + ObjectPage",
      "listReport": {
        "entity": "Invoice",
        "filters": ["Project", "Status", "DueDateRange"],
        "tableColumns": ["ID", "Project.Name", "Amount", "Currency", "DueDate", "Status"]
      },
      "objectPages": [
        {
          "entity": "Invoice",
          "sections": [
            { "type": "Form", "fields": ["ID", "Amount", "Currency", "DueDate", "Status"] },
            { "type": "Table", "title": "Payments", "columns": ["PaymentDate", "Amount", "Method"] }
          ]
        }
      ]
    }
  }
}
```

**STEP**: 5 — Expected generated project layout and where data is stored

**DESCRIPTION**: The accelerator creates a project folder you choose. Test data and code lists are placed in separate folders. This illustrative tree describes the common CAP + Fiori elements structure created by the accelerator.

**LANGUAGE**: text

**CODE**:
```
/workspace/invoice-manager/
├─ app/                         # Fiori elements UI annotations and manifest
│  ├─ webapp/
│  ├─ annotations/
│  └─ manifest.json
├─ srv/                         # CAP service implementations
│  ├─ cat-service.cds
│  └─ srv.js
├─ db/                          # CDS models and persistence
│  ├─ data-model.cds
│  └─ package.json
├─ test/                        # Generated test data (preview-only)
│  └─ invoice_test_data.json
├─ data/                        # Code lists or enum values persisted as data
│  └─ currency_codes.json
├─ .vscode/ or .che/             # IDE configuration
└─ README.md
```

**STEP**: 6 — Generation behavior, logs, and safety notes

**DESCRIPTION**: Notes to observe after generation: how test data is created, draft behavior, supported vs unsupported features, and where to find logs.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "generation_behavior": {
    "testData": {
      "randomized": true,
      "derivedFrom_images": true,
      "stored_in": "/workspace/<project>/test/"
    },
    "codeLists": {
      "explicit_values_from_input_stored_in": "/workspace/<project>/data/"
    },
    "draft_enabled": true,
    "standard_actions_included": ["create", "edit", "delete", "save", "cancel"],
    "unsupported_features": "Charts, icons, advanced custom actions; may be ignored or implemented at tool discretion."
  },
  "logs_and_debug": {
    "viewing_generation_logs": "Use 'Viewing Generation Logs' documentation: https://help.sap.com/docs/SAP_FIORI_tools/17d50220bcd848aa854c9c182d65b699/4ecc286176b1429b98f6f0a243e49ee2.html",
    "tip": "Observe logs in SAP Business Application Studio Output / Project Accelerator view to understand mapping decisions and warnings."
  },
  "safety_and_compliance": {
    "privacy": "Do NOT include personal or sensitive data in inputs; SAP Fiori tools does not filter such data.",
    "staging_area": "No staging area: the accelerator automatically writes the project to the chosen folder."
  }
}
```

**STEP**: 7 — Quick checklist before invoking the accelerator

**DESCRIPTION**: Final actionable checklist to validate your payload and environment before generation.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "pre_generation_checklist": [
    "1. Confirm SAP Build Code subscription or Test Drive access.",
    "2. Confirm BAS dev space contains SAP Fiori tools and CAP tools.",
    "3. Save business requirements as project_accelerator_input.json (use schema above).",
    "4. Verify targetFolder path in payload is correct and writable.",
    "5. Remove any personal or sensitive data from text or images.",
    "6. Invoke Project Accelerator / Joule UI and upload the JSON payload or paste text/images as instructed.",
    "7. After generation, inspect /workspace/<project>/test/ and /workspace/<project>/data/ for test and code list contents."
  ]
}
```
--------------------------------

**TITLE**: SAP Fiori Tools — Quick, Code-Focused Guide for Generating, Previewing, and Deploying Fiori Apps

**INTRODUCTION**: Practical, developer-oriented steps and code snippets to set up prerequisites, generate SAP Fiori applications (classic and Fiori Elements), preview locally with UI5 Tooling and a mock server, and deploy to Cloud Foundry / HTML5 runtime. References to the official Fiori Tools docs (file paths in the repository) are included for deeper reading.

**TAGS**: sap, fiori-tools, ui5, yeoman, ui5-tooling, mockserver, cloud-foundry, mta, vscode, business-application-studio

**STEP**: 1 — Install prerequisites (Node, Git, UI5 tooling, Yeoman generators)

**DESCRIPTION**: Verify Node & npm, install UI5 CLI and Yeoman generators commonly used for SAP Fiori / Fiori Elements projects. These commands are terminal-ready. See Getting-Started-with-SAP-Fiori-Tools/installation-e870fcf.md and Getting-Started-with-SAP-Fiori-Tools/visual-studio-code-17efa21.md for platform-specific system requirements and prerequisites.

**LANGUAGE**: Shell

**CODE**:
```shell
# Verify Node & npm (use LTS)
node -v
npm -v

# Install UI5 CLI (for local preview and build)
npm install --global @ui5/cli

# Install Yeoman and SAP Fiori generators (interactive generators)
npm install --global yo @sap/generator-fiori @sap/generator-fiori-elements

# Optional: Install Cloud Foundry CLI (cf) separately per platform
# See: Getting-Started-with-SAP-Fiori-Tools/visual-studio-code-17efa21.md#loiobdd272ac4d964fbfa59e956460e0e686
```

**STEP**: 2 — Set up Visual Studio Code or Business Application Studio and Fiori Tools extensions

**DESCRIPTION**: Install SAP Fiori Tools extensions (Extension Pack, Application Generator, Preview, etc.) via VS Code UI or Business Application Studio. See Getting-Started-with-SAP-Fiori-Tools/installation-e870fcf.md, Getting-Started-with-SAP-Fiori-Tools/sap-business-application-studio-b011040.md, and Getting-Started-with-SAP-Fiori-Tools/visual-studio-code-17efa21.md for details including supported authentication types and prerequisites.

**LANGUAGE**: Shell (instructions as comments for manual steps)

**CODE**:
```shell
# In Visual Studio Code:
# 1. Open Extensions view: Ctrl+Shift+X
# 2. Search for "SAP Fiori tools"
# 3. Install "SAP Fiori tools - Extension Pack" and restart VS Code

# Confirm extension installation via CLI:
code --list-extensions | grep -i "fiori\|sap"
```

**STEP**: 3 — Generate a new SAP Fiori application (Yeoman generator / command palette)

**DESCRIPTION**: Use Yeoman generators or the SAP Fiori Tools Application Generator from the Command Palette. For automated, text/image-driven generation features (Project Accelerator / Joule AI), see generating-an-application-with-the-project-accelerator-or-joule-using-sap-fiori-tools-ai-6845fed.md and its subpages for examples. The generator prompts are interactive; below are sample commands and a non-interactive pattern placeholder.

**LANGUAGE**: Shell

**CODE**:
```shell
# Run Yeoman interactive generator (classic)
yo @sap/generator-fiori

# Or run Fiori Elements generator
yo @sap/generator-fiori-elements

# Alternative: Use the VS Code Command Palette:
# 1. Ctrl+Shift+P -> "SAP Fiori tools: Open Application Generator" (interactive GUI)
# 2. Follow the dialogs to select floorplan, data source, and additional configuration
```

**STEP**: 4 — Example project structure and key files created by generator

**DESCRIPTION**: After generation, inspect/modify these files. Paths and details are covered across the guide (Generating-an-Application/... and Project-Functions/...).

**LANGUAGE**: JSON / XML / YAML (examples of common files)

**CODE**:
```json
// package.json (essential scripts)
{
  "name": "my-fiori-app",
  "version": "0.0.1",
  "private": true,
  "scripts": {
    "start": "ui5 serve --open",
    "build": "ui5 build --clean --dest dist"
  },
  "devDependencies": {
    "@ui5/cli": "^3"
  }
}
```

```yaml
# ui5.yaml (UI5 Tooling configuration)
specVersion: '2.1'
metadata:
  name: my.fiori.app
resources:
  configuration:
    paths:
      webapp: webapp
builder:
  resources:
    excludes:
      - "test/**"
```

```xml
<!-- webapp/manifest.json excerpt -->
{
  "sap.app": {
    "id": "my.fiori.app",
    "type": "application",
    "i18n": "i18n/i18n.properties"
  }
}
```

**STEP**: 5 — Preview locally (ui5 serve) and add a run configuration for VS Code

**DESCRIPTION**: Use UI5 Tooling to serve the app locally. Create a .vscode/launch.json entry to run the npm script in VS Code for easy preview. See Previewing-an-Application/... for advanced preview options (mock data, virtual endpoints, live data).

**LANGUAGE**: JSON

**CODE**:
```json
// .vscode/launch.json (minimal launch config to run the "start" script)
{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "UI5: Start (npm)",
      "type": "node",
      "request": "launch",
      "program": "${workspaceFolder}/node_modules/.bin/ui5",
      "args": ["serve", "--open"],
      "cwd": "${workspaceFolder}",
      "runtimeExecutable": "npm",
      "runtimeArgs": ["run", "start"],
      "console": "integratedTerminal"
    }
  ]
}
```

**STEP**: 6 — Add a simple mock server for OData during local preview

**DESCRIPTION**: Place a lightweight mock server script under webapp/test/mockserver.js and simulate metadata + mock data. This snippet uses sap.ui.core.util.MockServer and is suitable for local preview/testing. See Previewing-an-Application/use-mock-data-bda83a4.md and Previewing-an-Application/installing-mockserver-2538055.md for full instructions.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// webapp/test/mockserver.js
sap.ui.define(["sap/ui/core/util/MockServer"], function (MockServer) {
  "use strict";
  var sMockServerBaseUrl = "/sap/opu/odata/sap/Z_MY_SERVICE_SRV/";
  var oMockServer = new MockServer({
    rootUri: sMockServerBaseUrl
  });

  // localService contains metadata.xml and mockdata folder
  oMockServer.simulate(
    "webapp/test/localService/metadata.xml",
    "webapp/test/localService/"
  );

  oMockServer.start();
  console.log("MockServer started at", sMockServerBaseUrl);

  // Stop MockServer on window unload (for running in browser)
  window.addEventListener("unload", function () {
    oMockServer.stop();
  });
});
```

**STEP**: 7 — Build and deploy to Cloud Foundry / HTML5 runtime (manifest.yml example)

**DESCRIPTION**: Build your UI5 app (ui5 build) and deploy the dist output to Cloud Foundry or an HTML5 runtime. Use a manifest.yml to push to Cloud Foundry. For MTA scenarios and adding an app to mta.yaml, see Generating-an-Application/Additional-Configuration/* and generating-an-mta-deployment-file-9c41152.md.

**LANGUAGE**: Shell / YAML

**CODE**:
```shell
# Build the UI5 app into the "dist" folder
npm run build

# Cloud Foundry login (example)
cf login -a https://api.cf.<region>.hana.ondemand.com -u "<user>" -p "<password>" -o "<org>" -s "<space>"

# Push the built app using manifest.yml
cf push
```

```yaml
# manifest.yml (deploy dist as static HTML5 app)
---
applications:
  - name: my-fiori-app
    memory: 128M
    instances: 1
    buildpacks:
      - staticfile_buildpack
    path: dist
    env:
      SAP_UI5_VERSION: "1.100.0"
```

**STEP**: 8 — References to repository documentation (file paths)

**DESCRIPTION**: Use the following internal doc paths for detailed procedures, examples, anchors, and advanced features mentioned above.

**LANGUAGE**: Plain text (paths)

**CODE**:
```text
Key documentation files and sections referenced in this guide:
- Getting-Started-with-SAP-Fiori-Tools/getting-started-with-sap-fiori-tools-2d8b1cb.md
  - Installation: Getting-Started-with-SAP-Fiori-Tools/installation-e870fcf.md
    - SAP Business Application Studio: Getting-Started-with-SAP-Fiori-Tools/sap-business-application-studio-b011040.md
    - Visual Studio Code: Getting-Started-with-SAP-Fiori-Tools/visual-studio-code-17efa21.md
      - System Requirements anchor: #loio002ae80eac034e6588af81827ab97332
      - Cloud Foundry CLI Tools anchor: #loiobdd272ac4d964fbfa59e956460e0e686
- Generating-an-Application/* (SAP Fiori Elements, Freestyle, Additional Configuration)
- generating-an-application-with-the-project-accelerator-or-joule-using-sap-fiori-tools-ai-6845fed.md
- Previewing-an-Application/* (mock data, run control, preview on Fiori Launchpad)
- Deploying-an-Application/* (Cloud Foundry, ABAP, SAP Fiori Launchpad Configuration)
- Project-Functions/* (project validation, service/annotations management)
- Developing-an-Application/* (annotation support, page editor, extensions)
```

--------------------------------

**TITLE**: Internationalization (i18n) for Adaptation Projects

**INTRODUCTION**: This document shows how to add and override i18n text for SAPUI5 adaptation projects. It includes file locations, example i18n.properties content, how to reference i18n keys from XML/JS UI controls, manifest/Component model configuration, and how to override existing keys in the adaptation project.

**TAGS**: fiori-tools, i18n, internationalization, sapui5, adaptation, properties

**STEP**: 1 — Folder structure and example file paths

**DESCRIPTION**: Adaptation projects create an i18n.properties file for every page. Use the following folder structure and place key-value pairs in the i18n.properties files for each page/collection.

**LANGUAGE**: Text (file paths)

**CODE**:
```
ProjectName/
  webapp/
    i18n/
      Page1/
        Collection/
          i18n.properties
      Page2/
        Collection/
          i18n.properties
```

**STEP**: 2 — Create/Update i18n.properties key-value pairs

**DESCRIPTION**: Add or update key-value pairs in the i18n.properties file for the page/collection that you are adapting. Use UTF-8 encoding. Example file content shows common key patterns and comments.

**LANGUAGE**: properties

**CODE**:
```properties
# ProjectName/webapp/i18n/Page1/Collection/i18n.properties
welcomeText=Welcome
submitButton=Submit
cancelButton=Cancel
greeting=Hello {0}, you have {1} new messages
# Override example: same key as source application to change text in adaptation
# welcomeText=Welcome to the adapted app
```

**STEP**: 3 — Reference i18n keys from XML views

**DESCRIPTION**: In SAPUI5 XML views, bind UI control text properties to the i18n model using the i18n>key syntax. Ensure the i18n resource model is registered (see next step).

**LANGUAGE**: XML

**CODE**:
```xml
<!-- Example XML view usage -->
<mvc:View controllerName="my.app.controller.Some" xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m">
  <VBox>
    <Text text="{i18n>welcomeText}" />
    <Button text="{i18n>submitButton}" press=".onSubmit" />
    <Button text="{i18n>cancelButton}" press=".onCancel" />
    <!-- Parameterized text example -->
    <Text text="{parts: [{path: 'user/name'},{path: 'user/unread'}], formatter: '.formatGreeting'}" />
  </VBox>
</mvc:View>
```

**STEP**: 4 — Reference i18n keys from JavaScript views/controllers

**DESCRIPTION**: Access the i18n ResourceModel in JS controllers to get text values or use them programmatically.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// In a controller
onInit: function () {
  var oResourceBundle = this.getOwnerComponent().getModel("i18n").getResourceBundle();
  var sWelcome = oResourceBundle.getText("welcomeText");
  // For parameterized keys:
  var sGreeting = oResourceBundle.getText("greeting", ["Alice", 5]);
  console.log(sWelcome, sGreeting);
}
```

**STEP**: 5 — Register the i18n ResourceModel (manifest.json example)

**DESCRIPTION**: Configure the i18n ResourceModel in the manifest.json so view bindings {i18n>...} resolve to the correct i18n.properties file. Use bundleUrl for path relative to webapp.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.ui5": {
    "models": {
      "i18n": {
        "type": "sap.ui.model.resource.ResourceModel",
        "settings": {
          "bundleUrl": "i18n/Page1/Collection/i18n.properties"
        }
      }
    }
  }
}
```

**STEP**: 6 — Register the i18n ResourceModel (Component.js alternative)

**DESCRIPTION**: If not using manifest.json, register the ResourceModel in Component.js programmatically.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Component.js - init
init: function () {
  UIComponent.prototype.init.apply(this, arguments);
  var i18nModel = new sap.ui.model.resource.ResourceModel({
    bundleUrl: "i18n/Page1/Collection/i18n.properties"
  });
  this.setModel(i18nModel, "i18n");
}
```

**STEP**: 7 — Override existing keys in adaptation projects

**DESCRIPTION**: To change text of existing UI controls from the source application, add the same key(s) in the adaptation project's i18n.properties (same key name). The adaptation project's value will override the source value for that page/collection.

**LANGUAGE**: properties

**CODE**:
```properties
# Add the same key used by the source app to override it in the adaptation project
# ProjectName/webapp/i18n/Page1/Collection/i18n.properties
welcomeText=Welcome to the adapted application
submitButton=Send
```

**STEP**: 8 — Run and verify in the Adaptation Editor or browser

**DESCRIPTION**: Run the adaptation project as a web application. In the Adaptation Editor use the Properties pane to reference i18n keys for UI controls (do not type literal text). Verify the UI shows values from the adaptation project i18n.properties. If you changed keys that exist in the source app, verify the overridden text appears.

**LANGUAGE**: Text

**CODE**:
```
1. Start the adaptation web app (e.g., npm start / sap preview depending on project).
2. Open the page in the Adaptation Editor or browser.
3. Inspect UI controls; confirm text appears from ProjectName/webapp/i18n/PageX/Collection/i18n.properties.
4. To change a value, edit the corresponding i18n.properties and reload the app.
```
--------------------------------

**TITLE**: Internationalization (i18n) in Adaptation Projects for SAP Fiori

**INTRODUCTION**: Quick, code-focused reference showing where to place i18n property files in an adaptation project, how to define key-value pairs, how to reference i18n keys in XML and JavaScript, and how to override existing keys from a source application.

**TAGS**: fiori-tools, i18n, sapui5, adaptation, adaptation-editor, i18n.properties, localization

**STEP**: 1 — Project folder structure

**DESCRIPTION**: Example adaptation project layout showing where per-page i18n.properties files live. The adaptation project automatically creates an i18n.properties for every page; place or edit key-value pairs in these files.

**LANGUAGE**: text

**CODE**:
```text
/Workspace
  /<AdaptationProjectName>
    /webapp
      /i18n
        /page1
          /collection
            i18n.properties
        /page2
          /collection
            i18n.properties
```

**STEP**: 2 — Define key-value pairs in i18n.properties

**DESCRIPTION**: Create or edit the page-specific i18n.properties file. Use simple key=value lines. Keep keys unique per page or reuse keys intentionally to override source application values.

**LANGUAGE**: properties

**CODE**:
```properties
# file: webapp/i18n/page1/collection/i18n.properties
title.home=Welcome to the Home Page
button.save=Save
label.username=User Name
message.welcome=Hello {0}, welcome back!
```

**STEP**: 3 — Reference i18n keys in an XML view

**DESCRIPTION**: Bind control properties to the i18n model using {i18n>keyName}. Ensure an "i18n" model is available (adaptation project usually wires it). Example shows Page title, Input placeholder, Button text.

**LANGUAGE**: XML

**CODE**:
```xml
<!-- file: webapp/view/Page1.view.xml -->
<mvc:View
  controllerName="my.app.controller.Page1"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m">
  <Page title="{i18n>title.home}">
    <content>
      <Input placeholder="{i18n>label.username}" />
      <Button text="{i18n>button.save}" />
    </content>
  </Page>
</mvc:View>
```

**STEP**: 4 — Read i18n values in a JavaScript controller

**DESCRIPTION**: Access i18n values programmatically using the resource model. Use getModel("i18n").getProperty("key") and pass parameters via getText for placeholders.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// file: webapp/controller/Page1.controller.js
sap.ui.define([
  "sap/ui/core/mvc/Controller"
], function(Controller) {
  return Controller.extend("my.app.controller.Page1", {
    onInit: function() {
      // get a single property
      const sSaveText = this.getView().getModel("i18n").getProperty("button.save");

      // get text with parameter substitution (message.welcome = "Hello {0}, welcome back!")
      const sWelcome = this.getView().getModel("i18n").getProperty("message.welcome");
      // or via ResourceModel getText if available:
      // const sWelcomeFormatted = this.getOwnerComponent().getModel("i18n").getResourceBundle().getText("message.welcome", ["Alice"]);
    }
  });
});
```

**STEP**: 5 — Explicitly register a resource model (if needed)

**DESCRIPTION**: If your adaptation setup does not already expose an "i18n" model for the page file location, register a ResourceModel pointing at the page i18n properties file.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// file: webapp/Component.js (or init code run at startup)
sap.ui.define([
  "sap/ui/core/UIComponent",
  "sap/ui/model/resource/ResourceModel"
], function(UIComponent, ResourceModel) {
  return UIComponent.extend("my.app.Component", {
    init: function() {
      UIComponent.prototype.init.apply(this, arguments);
      // Bundle URL relative to webapp folder
      this.setModel(new ResourceModel({
        bundleUrl: "i18n/page1/collection/i18n.properties"
      }), "i18n");
    }
  });
});
```

**STEP**: 6 — Override i18n keys from the source application

**DESCRIPTION**: To change existing UI text defined in the source application, add the same key to the adaptation project's page-specific i18n.properties with the new value. The adaptation project's i18n model for that page takes precedence when the page is loaded.

**LANGUAGE**: properties

**CODE**:
```properties
# file: webapp/i18n/page1/collection/i18n.properties
# This entry overrides the source application's "button.save" value for this page
button.save=Save Changes
```

**STEP**: 7 — Verify in Adaptation Editor and at runtime

**DESCRIPTION**: In Adaptation Editor, bind control properties using the Properties pane to select i18n keys (do not type literal text). Run the adaptation project as a web application and confirm UI controls display values from the page's i18n.properties (including overridden keys). No code required for this step.
--------------------------------

**TITLE**: Fiori Tools — Making Adaptations (UI Adaptation / UI5 flexibility change files)

**INTRODUCTION**: Practical, code-focused recipe to create and apply UI adaptations for SAP Fiori (SAPUI5) applications using Fiori Tools / UI5 flexibility. Shows file layout, example change files, local testing (ui5-cli), and build/deploy notes. Use this for programmatic generation of adaptation files or automated adaptation pipelines.

**TAGS**: fiori-tools, sapui5, ui5, ui-adaptation, sap.ui.fl, changes, ui5-cli, adaptations

STEP: 1 — Project layout for adaptations

DESCRIPTION: Create a predictable folder layout where adaptation (flexibility) change files will live. This layout is used by local servers, build tasks and deployment scripts. Place change files under webapp/changes or a dedicated adaptations/<appId>/changes folder.

LANGUAGE: File tree (text)

CODE:
```
/my-fiori-app
  /webapp
    index.html
    manifest.json
    /view
    /controller
    /i18n
    /changes                <-- preferred: UI5 flexibility change files here
      0001.hideButton.change.json
      0002.setProperty.change.json
  ui5.yaml
  package.json
  README.md
```

STEP: 2 — Example change file: propertyChange (hide/modify property)

DESCRIPTION: Create a change file in JSON that follows SAPUI5 flexibility (sap.ui.fl) format. Name files with a stable pattern: <timestamp>.<changeId>.change.json. The example below turns a control's visible property to false. Use "reference" equal to your component/application namespace (manifest.json sap.app/id).

LANGUAGE: JSON

CODE:
```json
{
  "fileType": "change",
  "changeType": "propertyChange",
  "reference": "com.example.myapp",         /* same as manifest sap.app/id */
  "packageName": "$TMP",
  "content": {
    "property": {
      "name": "visible",
      "value": false
    }
  },
  "selector": {
    "id": "myButton",            /* view control ID (local ID allowed) */
    "idIsLocal": true
  },
  "texts": {},
  "layer": "VENDOR"
}
```

STEP: 3 — Example change file: hideControl (remove/hide control)

DESCRIPTION: Alternative change file that instructs the adaptation runtime to hide or remove a control. Use the correct changeType supported by your runtime (hideControl / hideElement / removeControl). Verify the changeType your target runtime expects; below is a commonly used shape.

LANGUAGE: JSON

CODE:
```json
{
  "fileType": "change",
  "changeType": "hideControl",
  "reference": "com.example.myapp",
  "packageName": "$TMP",
  "selector": {
    "id": "myOldColumn",
    "idIsLocal": true
  },
  "texts": {},
  "layer": "CUSTOMER"
}
```

STEP: 4 — Sample XML view before / after adaptation (context for changes)

DESCRIPTION: Show the control, its ID and where change selectors point. The adaptation JSON selector.id must match the view control ID (local ID or global ID).

LANGUAGE: XML

CODE:
```xml
<!-- webapp/view/Main.view.xml -->
<mvc:View controllerName="com.example.myapp.controller.Main"
          xmlns:mvc="sap.ui.core.mvc"
          xmlns="sap.m">
  <Page id="page">
    <content>
      <Button id="myButton" text="Click me" />
      <Table id="myTable">
        <columns>
          <Column id="myOldColumn">
            <Text text="Old column"/>
          </Column>
        </columns>
      </Table>
    </content>
  </Page>
</mvc:View>
```

STEP: 5 — Enable serving change files locally with ui5-cli

DESCRIPTION: Use ui5-cli (npx ui5) to serve the app so the flexibility runtime can load change files from the /changes folder. Ensure your ui5.yaml and webapp structure expose webapp as a resource root. Start server to preview adaptations during development.

LANGUAGE: Shell + YAML

CODE:
```yaml
# ui5.yaml (minimal)
specVersion: '2.2'
metadata:
  name: com.example.myapp
type: application
```

```bash
# Install UI5 CLI once in project or use npx
npm install --save-dev @ui5/cli

# Serve app locally (this serves webapp/ by default)
npx ui5 serve --open
```

STEP: 6 — Build pipeline: include change files into final package

DESCRIPTION: Ensure your build step includes the changes folder so change files are deployed alongside the application. Using ui5 build, changes under webapp/changes are copied into the dist/ output and served in production.

LANGUAGE: Shell

CODE:
```bash
# Build production artifacts into dist/
npx ui5 build --include-dependencies --clean-dest

# Result: dist/webapp/changes/*.change.json present in build output
```

STEP: 7 — Deploying adaptations

DESCRIPTION: Deploy the built application (dist/webapp) to your target (static host, SAP ABAP repository, Cloud Foundry, etc.). Ensure the change files are placed where the SAPUI5 runtime and/or adaptation service can read them together with the app resources. For ABAP, package change files according to your transport rules (packageName).

LANGUAGE: Notes (no code)

CODE:
```
- Copy dist/webapp/* to your target host root for the application
- If deploying to ABAP / SAP Backend, follow your transport mechanisms and ensure packageName and layer match backend expectations
- For Cloud Foundry or HTML5 repo, upload the entire dist/webapp so /changes is available at runtime
```

STEP: 8 — Runtime: what the UI5 adaptation loader expects

DESCRIPTION: At runtime, SAPUI5 or the adaptation service will look for change files referenced by your app/component namespace. Ensure:
- manifest.json sap.app/id equals change.reference
- change file names and content follow the change format
- /changes folder is served under the same origin or available to the flexibility service

LANGUAGE: JSON (manifest snippet)

CODE:
```json
// manifest.json (snippet)
{
  "sap.app": {
    "id": "com.example.myapp",
    "type": "application",
    "i18n": "i18n/i18n.properties"
  },
  "sap.ui5": {
    "rootView": {
      "viewName": "com.example.myapp.view.Main",
      "type": "XML"
    }
  }
}
```

STEP: 9 — Automation tips for code generation tools

DESCRIPTION: When generating adaptations programmatically:
- Use consistent filename templates: <timestamp>.<changeId>.change.json
- Set "reference" from manifest sap.app/id
- Use "idIsLocal": true when referring to local IDs in XML views
- Set "packageName" to "$TMP" for non-transported changes, or to transport package for ABAP deployment
- Pick "layer" according to intent: VENDOR / PARTNER / CUSTOMER / USER

LANGUAGE: JSON (generation template)

CODE:
```json
{
  "fileType": "change",
  "changeType": "{{changeType}}",
  "reference": "{{manifestId}}",
  "packageName": "{{packageName}}",
  "content": {{contentObject}},
  "selector": {
    "id": "{{controlId}}",
    "idIsLocal": true
  },
  "texts": {},
  "layer": "{{layer}}"
}
```

STEP: 10 — Troubleshooting checklist

DESCRIPTION: Quick checks if adaptation changes do not apply:
- manifest sap.app/id matches change.reference
- change JSON is valid and present under served path (webapp/changes)
- control ID referenced exists and is not dynamically generated with a different ID
- layer and packageName are correct for the target environment
- clear browser cache or disable component preloads during tests

LANGUAGE: Checklist (text)

CODE:
```
- Verify webapp/changes/*.change.json is present in built/dist output
- Confirm control IDs and idIsLocal usage
- Check browser console for sap.ui.fl load errors
- Ensure UI5 version and the runtime support the changeType you used
```


--------------------------------

**TITLE**: Making Adaptations — SAPUI5/Fiori Tools Adaptation Recipes

**INTRODUCTION**: Quick, code-focused recipes to implement UI and app-descriptor adaptations in an SAPUI5 adaptation project. Use these snippets to (a) modify views/aggregation points, (b) register controller extensions, (c) add i18n resources, and (d) update manifest.json to replace OData services, add local annotations, add new models, component usages, and adjust inbound navigation. File paths reference the typical webapp layout.

**TAGS**: sapui5, fiori-tools, manifest.json, adaptation, app-descriptor, controller-extension, fragment, i18n, odata, annotations, componentUsages, inbound

STEP: Adapt the UI — Add an XML Fragment to an Aggregation or Extension Point
DESCRIPTION: Create a fragment file and insert it into a view aggregation or extension point in an XML view. File paths: webapp/fragments/MyFragment.fragment.xml, webapp/view/MyView.view.xml
LANGUAGE: XML
CODE:
```XML
<!-- webapp/fragments/MyFragment.fragment.xml -->
<core:FragmentDefinition
  xmlns="sap.m"
  xmlns:core="sap.ui.core">
  <VBox>
    <Text text="This is a fragment item" />
    <Button text="Fragment Button" press=".onFragmentButtonPress" />
  </VBox>
</core:FragmentDefinition>
```

```XML
<!-- webapp/view/MyView.view.xml -->
<mvc:View
  controllerName="my.app.controller.MyView"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  xmlns:core="sap.ui.core">
  <Page title="My Page">
    <content>
      <VBox id="myVBox">
        <!-- Add fragment inline -->
        <core:Fragment fragmentName="my.app.fragments.MyFragment" type="XML" />
      </VBox>
    </content>
  </Page>
</mvc:View>
```

STEP: Controller Extension — Register a Controller Extension in manifest.json
DESCRIPTION: Declare a controller extension mapping from the original controller to your custom controller. Place custom controller in webapp/controller/Ext.Controller.js.
LANGUAGE: JSON
CODE:
```JSON
// webapp/manifest.json (add under "sap.ui5")
{
  "sap.ui5": {
    "extends": {
      "extensions": {
        "sap.ui.controllerExtensions": {
          "sap.suite.ui.generic.template.ListReport.view.ListReport": {
            "controllerName": "my.app.controller.Ext"
          }
        }
      }
    }
  }
}
```

STEP: Internationalization — Add i18n Resource Bundle and Model
DESCRIPTION: Add i18n files and register a ResourceModel in manifest.json. File path: webapp/i18n/i18n.properties
LANGUAGE: PROPERTY, JSON
CODE:
```properties
# webapp/i18n/i18n.properties
appTitle=My Adapted App
greeting=Hello {0}
```

```JSON
// webapp/manifest.json (under "sap.ui5" -> "models")
{
  "sap.ui5": {
    "models": {
      "i18n": {
        "type": "sap.ui.model.resource.ResourceModel",
        "settings": {
          "bundleName": "my.app.i18n.i18n"
        }
      }
    }
  }
}
```

STEP: Replacing OData Service — Update dataSources and models in manifest.json
DESCRIPTION: Replace an existing OData service by updating dataSources and mapping it to a model. Adjust uri to your new backend path. File: webapp/manifest.json
LANGUAGE: JSON
CODE:
```JSON
// webapp/manifest.json (dataSources + models)
{
  "sap.app": {
    "id": "my.app"
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "newBackend",
        "settings": {
          "defaultBindingMode": "TwoWay"
        }
      }
    }
  },
  "sap.app": {
    "dataSources": {
      "newBackend": {
        "uri": "/sap/opu/odata/sap/Z_NEW_SRV/",
        "type": "OData",
        "settings": {
          "odataVersion": "2.0"
        }
      }
    }
  }
}
```

STEP: Adding Local Annotation Files — Register local annotation file and bind to OData model
DESCRIPTION: Add a local annotation XML and reference it in the OData dataSource annotations array. File paths: webapp/annotations/LocalAnnotations.xml, webapp/manifest.json
LANGUAGE: XML, JSON
CODE:
```XML
<!-- webapp/annotations/LocalAnnotations.xml -->
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
  <!-- local annotation content here -->
</edmx:Edmx>
```

```JSON
// webapp/manifest.json (dataSources entry with annotations)
{
  "sap.app": {
    "dataSources": {
      "MyService": {
        "uri": "/sap/opu/odata/sap/Z_SRV/",
        "type": "OData",
        "settings": {
          "odataVersion": "2.0"
        },
        "annotations": [
          {
            "type": "local",
            "uri": "annotations/LocalAnnotations.xml"
          }
        ]
      }
    }
  }
}
```

STEP: Adding OData Service and New SAPUI5 Model
DESCRIPTION: Add a new OData service and create a named model that references it. Useful when adding a supplemental service.
LANGUAGE: JSON
CODE:
```JSON
// webapp/manifest.json (add dataSource + model)
{
  "sap.app": {
    "dataSources": {
      "SupplementalService": {
        "uri": "/sap/opu/odata/sap/Z_SUPP_SRV/",
        "type": "OData",
        "settings": {
          "odataVersion": "2.0"
        }
      }
    }
  },
  "sap.ui5": {
    "models": {
      "suppModel": {
        "dataSource": "SupplementalService",
        "settings": {
          "defaultBindingMode": "OneWay"
        }
      }
    }
  }
}
```

STEP: Adding SAPUI5 Component Usages
DESCRIPTION: Register usage of an external UI5 component from the manifest to enable component reuse within the app.
LANGUAGE: JSON
CODE:
```JSON
// webapp/manifest.json (sap.ui5 -> componentUsages)
{
  "sap.ui5": {
    "componentUsages": {
      "MySharedComponent": {
        "name": "my.shared.component",
        "settings": {
          "someSetting": "value"
        }
      }
    }
  }
}
```

STEP: Change Inbound (Cross Navigation) — Modify inbounds in the app descriptor
DESCRIPTION: Add or change inbound navigation targets to expose the app for shell navigation. Edit under sap.app/crossNavigation/inbounds.
LANGUAGE: JSON
CODE:
```JSON
// webapp/manifest.json (sap.app -> crossNavigation -> inbounds)
{
  "sap.app": {
    "crossNavigation": {
      "inbounds": {
        "DisplayObjects": {
          "semanticObject": "Object",
          "action": "display",
          "title": "Display Objects",
          "signature": {
            "parameters": {
              "objectId": {
                "required": true
              }
            }
          }
        }
      }
    }
  }
}
```

STEP: Create Control Variants (Views) — Add Variant Management in XML view (basic pattern)
DESCRIPTION: Use sap.m.VariantManagement or sap.ui.fl variants pattern in a view. This shows the variant management control placement; actual variant content is saved via flexible change management.
LANGUAGE: XML
CODE:
```XML
<!-- webapp/view/ListReport.view.xml -->
<mvc:View xmlns="sap.m" xmlns:mvc="sap.ui.core.mvc" xmlns:fl="sap.ui.fl">
  <Page title="List Report">
    <subHeader>
      <OverflowToolbar>
        <ToolbarSpacer/>
        <fl:VariantManagement id="variantMgmt" />
      </OverflowToolbar>
    </subHeader>
    <content>
      <!-- list or table content -->
    </content>
  </Page>
</mvc:View>
```

STEP: File Placement and Examples Summary
DESCRIPTION: Typical file map for the snippets above — ensure files are placed and referenced exactly as shown.
LANGUAGE: text
CODE:
```text
webapp/
  manifest.json                # app descriptor changes (dataSources, models, sap.ui5 entries)
  fragments/
    MyFragment.fragment.xml    # fragment definitions
  view/
    MyView.view.xml            # XML views referencing fragments
    ListReport.view.xml        # views with VariantManagement example
  controller/
    MyView.controller.js       # view controller methods
    Ext.controller.js          # controller extension implementation
  annotations/
    LocalAnnotations.xml       # local annotation files for OData services
  i18n/
    i18n.properties            # resource bundle entries
```
--------------------------------

**TITLE**: Previewing an Adaptation Project (Open Preview for manifest.appdescr_variant)

**INTRODUCTION**: Step-by-step actions to open and use the adaptation project preview from the workspace. Useful for Fiori tools users who need to test UI adaptations in a browser tab, handle popup blocking, and authenticate to backend systems.

**TAGS**: fiori-tools, preview, manifest.appdescr_variant, webapp, SAP Fiori, troubleshooting

**STEP**: 1 — Locate the preview file in the workspace

**DESCRIPTION**: In your project workspace, confirm the adaptation descriptor file exists under the webapp folder. This file is named manifest.appdescr_variant and is the entry point for the preview action.

**LANGUAGE**: Plaintext

**CODE**:
```text
Workspace structure (example)
├─ webapp
│  ├─ i18n
│  ├─ view
│  ├─ controller
│  └─ manifest.appdescr_variant   <-- right-click this file
```

**STEP**: 2 — Open the preview

**DESCRIPTION**: Use the editor/explorer context menu to open the preview. This opens the adaptation project in a new browser tab. If your editor provides an "Open Preview" context command, use it on manifest.appdescr_variant.

**LANGUAGE**: Plaintext

**CODE**:
```text
UI action:
1. Expand webapp in Explorer
2. Right-click manifest.appdescr_variant
3. Click "Open Preview"
Result: A new browser tab is opened with the preview page.
```

**STEP**: 3 — Allow popup windows (if blocked)

**DESCRIPTION**: The preview opens in a separate browser tab which may be blocked by popup blockers. Allow popups for the preview to open successfully. If the popup is blocked, follow browser-specific quick actions below.

**LANGUAGE**: Plaintext

**CODE**:
```text
Chrome:
- Look for the popup blocked icon in the address bar and click "Allow popups" for this site.
- Or open Settings > Privacy and security > Site Settings > Pop-ups and redirects, then add the site to the "Allowed" list.

Firefox:
- Click the blocked pop-up notification in the address bar and choose "Allow pop-ups for <site>".

Edge:
- Click the popup blocker icon in the address bar and allow popups for the site.
```

**STEP**: 4 — Authenticate if prompted

**DESCRIPTION**: Depending on your authentication model (e.g., SAML, Basic, OAuth), the preview may ask for credentials to connect to the backend system. Provide the necessary credentials in the browser prompt to allow the preview to load data.

**LANGUAGE**: Plaintext

**CODE**:
```text
Common behavior:
- A credentials prompt or redirect to an identity provider may appear.
- Enter username/password or follow the SSO flow.
- If authentication fails, check the system endpoint and network access from your machine.
```

**STEP**: 5 — Interact with the preview and troubleshoot

**DESCRIPTION**: After the preview opens, navigate the UI, load data, and test functionality. If content does not appear, reload the tab, verify popups, and confirm credentials.

**LANGUAGE**: Plaintext

**CODE**:
```text
Actions to test:
- Navigate through screens and menus
- Perform CRUD actions that require backend calls
- Validate UI adaptations and variant behavior

Troubleshooting:
- Reload preview tab (Ctrl/Cmd+R)
- Re-open preview from manifest.appdescr_variant if popup was blocked
- Check browser console and network tab for errors
- Confirm backend connectivity and authentication
```

**STEP**: 6 — (Optional) Example minimal manifest.appdescr_variant content

**DESCRIPTION**: Minimal example of a manifest.appdescr_variant structure to verify the file is present and parsable by preview tooling.

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.app": {
    "id": "com.example.myfioriapp",
    "type": "application",
    "applicationVersion": { "version": "1.0.0" }
  },
  "sap.ui5": {
    "rootView": {
      "viewName": "com.example.view.App",
      "type": "XML"
    }
  },
  "sap.ui": {
    "technology": "UI5"
  }
}
```
--------------------------------

**TITLE**: Preview an Adaptation Project (SAP Fiori Tools)

**INTRODUCTION**: Quick reference for previewing an SAP Fiori adaptation project using the Fiori Tools context menu in your IDE (e.g., VS Code). Use this to run and test UI adaptations without deploying—opens the app in a browser tab for interactive testing.

**TAGS**: fiori-tools, adaptation-project, preview, manifest.appdescr_variant, webapp, vscode, UI adaptation

**STEP**: 1 — Open Preview Application

**DESCRIPTION**: From your IDE workspace, target the project element that contains the adaptation: either the project root folder, the webapp folder, or the manifest.appdescr_variant file. Right-click the chosen target and select the "Preview Application" action from the context menu.

**LANGUAGE**: GUI/Manual

**CODE**:
```GUI
# Target options (choose one)
- <project-root>                # project main folder
- <project-root>/webapp         # webapp folder
- <project-root>/webapp/manifest.appdescr_variant

# Action
1. Right-click the chosen target.
2. Click "Preview Application" in the context menu.
```

**STEP**: 2 — Start and Test the Preview

**DESCRIPTION**: In the Preview dialog, click "Start" to launch the adaptation preview. The adapted application opens in a separate browser tab; interact with the app to navigate, load data, and verify newly added functionality. If changes are not shown, rebuild or re-open the preview.

**LANGUAGE**: GUI/Manual

**CODE**:
```GUI
1. In the Preview Application dialog, click "Start".
2. A browser tab opens with the previewed application.
3. Interact with the app: navigate, load data, and test your adaptations.
# Troubleshooting
- If changes are not visible: close the browser tab and restart the preview.
- Ensure manifest.appdescr_variant is saved before previewing.
```
--------------------------------

**TITLE**: Quick Actions Availability Matrix — Programmatic Lookup & Manifest Checks

**INTRODUCTION**: Provide a machine-readable availability matrix for quick actions in Fiori adaptation projects, plus code examples to:
- query whether a given quick action is supported for a project (based on OData version and SAPUI5 version),
- detect the manifest.json “outdated array page” condition that blocks manifest-changing actions for OData V2 + older SAPUI5 versions,
- update manifest.json minUI5Version.

This is intended for code generation agents to integrate availability checks and manifest validation into automation or CLI tools.

**TAGS**: fiori-tools, sapui5, adaptation, manifest.json, OData V2, OData V4, quick-actions, programmatic-check

STEP: 1 - Availability matrix (machine-readable)

DESCRIPTION: Programmatic JSON representation of the table mapping each quick action to supported page types, minimum SAPUI5 versions per OData version, and whether the action may change the manifest (marked with * in the original table).

LANGUAGE: JSON

CODE:
```json
[
  {
    "id": "addControllerToPage",
    "title": "Add Controller to Page",
    "pageTypes": ["List Report", "Analytical List Page", "Object Page"],
    "manifestChange": false,
    "minSapUi5Version": { "v2": "1.71.0", "v4": "1.71.0" }
  },
  {
    "id": "addHeaderField",
    "title": "Add Header Field",
    "pageTypes": ["Object Page"],
    "manifestChange": false,
    "minSapUi5Version": { "v2": "1.71.0", "v4": "1.71.0" }
  },
  {
    "id": "addCustomSection",
    "title": "Add Custom Section",
    "pageTypes": ["Object Page"],
    "manifestChange": false,
    "minSapUi5Version": { "v2": "1.71.0", "v4": "1.71.0" }
  },
  {
    "id": "addCustomPageAction",
    "title": "Add Custom Page Action",
    "pageTypes": ["List Report", "Analytical List Page", "Object Page"],
    "manifestChange": false,
    "minSapUi5Version": { "v2": "1.130.0", "v4": "1.130.0" }
  },
  {
    "id": "addCustomTableAction",
    "title": "Add Custom Table Action",
    "pageTypes": ["List Report", "Analytical List Page", "Object Page"],
    "manifestChange": false,
    "minSapUi5Version": { "v2": "1.96.0", "v4": "1.96.0" }
  },
  {
    "id": "addCustomTableColumn",
    "title": "Add Custom Table Column",
    "pageTypes": ["List Report", "Analytical List Page", "Object Page"],
    "manifestChange": false,
    "minSapUi5Version": { "v2": "1.96.0", "v4": "1.96.0" }
  },
  {
    "id": "addLocalAnnotationFile",
    "title": "Add Local Annotation File",
    "pageTypes": ["List Report", "Analytical List Page", "Object Page"],
    "manifestChange": true,
    "minSapUi5Version": { "v2": "1.133.0", "v4": "1.133.0" }
  },
  {
    "id": "addSubpage",
    "title": "Add Subpage",
    "pageTypes": ["List Report", "Analytical List Page", "Object Page"],
    "manifestChange": true,
    "minSapUi5Version": { "v2": "1.96.0", "v4": "1.135.0" }
  },
  {
    "id": "changeTableActions",
    "title": "Change Table Actions",
    "pageTypes": ["List Report", "Analytical List Page", "Object Page"],
    "manifestChange": false,
    "minSapUi5Version": { "v2": "1.108.0", "v4": "1.130.0" }
  },
  {
    "id": "changeTableColumns",
    "title": "Change Table Columns",
    "pageTypes": ["List Report", "Analytical List Page", "Object Page"],
    "manifestChange": false,
    "minSapUi5Version": { "v2": "1.96.0", "v4": "1.96.0" }
  },
  {
    "id": "enableDisableClearButton",
    "title": "Enable/Disable Clear Button",
    "pageTypes": ["List Report", "Analytical List Page"],
    "manifestChange": false,
    "minSapUi5Version": { "v2": "1.71.0", "v4": "1.71.0" }
  },
  {
    "id": "enableEmptyRowModeForTables",
    "title": "Enable Empty Row Mode for Tables",
    "pageTypes": ["Object Page"],
    "manifestChange": true,
    "minSapUi5Version": { "v2": "1.130.0", "v4": "1.133.0" }
  },
  {
    "id": "enableSemanticDateRange",
    "title": "Enable Semantic Date Range",
    "pageTypes": ["List Report", "Analytical List Page"],
    "manifestChange": true,
    "minSapUi5Version": { "v2": "1.96.0", "v4": "1.130.0" }
  },
  {
    "id": "enableTableFilteringForPageVariants",
    "title": "Enable Table Filtering for Page Variants",
    "pageTypes": ["List Report", "Analytical List Page", "Object Page"],
    "manifestChange": true,
    "minSapUi5Version": { "v2": "1.96.0", "v4": "1.133.0" }
  },
  {
    "id": "enableVariantManagementInTables",
    "title": "Enable Variant Management in Tables",
    "pageTypes": ["Object Page"],
    "manifestChange": true,
    "minSapUi5Version": { "v2": "1.96.0", "v4": null }
  },
  {
    "id": "enableVariantManagementInTablesAndCharts",
    "title": "Enable Variant Management in Tables and Charts",
    "pageTypes": ["List Report", "Analytical List Page", "Object Page"],
    "manifestChange": true,
    "minSapUi5Version": { "v2": "1.96.0", "v4": "1.130.0" }
  }
]
```

STEP: 2 - TypeScript helper: semver compare + availability check + manifest outdated-array-page detection

DESCRIPTION: TypeScript functions to:
- compare SAPUI5 versions,
- detect the manifest “outdated array page” condition (used to block manifest-changing quick actions for OData V2 + SAPUI5 < 1.134),
- decide whether a quick action is available given project parameters and manifest.json content.

LANGUAGE: TypeScript

CODE:
```typescript
// quickActionsMatrix must be the JSON array from STEP 1 (import or inline)
import quickActionsMatrix from "./quickActionsMatrix.json";

/**
 * Simple semver comparison for major.minor.patch strings.
 * Returns 1 if a > b, 0 if equal, -1 if a < b
 */
function compareSemver(a: string, b: string): number {
  const pa = a.split('.').map(n => parseInt(n, 10) || 0);
  const pb = b.split('.').map(n => parseInt(n, 10) || 0);
  for (let i = 0; i < 3; i++) {
    if ((pa[i] || 0) > (pb[i] || 0)) return 1;
    if ((pa[i] || 0) < (pb[i] || 0)) return -1;
  }
  return 0;
}

/**
 * Recursively search for targets.*.options.settings.pages being an array.
 * If any such path exists and is an Array -> consider it "outdated array page structure".
 * (This heuristic follows the note about outdated array page structure in manifest.json)
 */
function manifestHasOutdatedArrayPage(manifest: any): boolean {
  if (!manifest || typeof manifest !== 'object') return false;
  const routing = manifest["sap.ui5"]?.routing;
  if (!routing || typeof routing !== 'object') return false;
  const targets = routing.targets;
  if (!targets || typeof targets !== 'object') return false;
  for (const key of Object.keys(targets)) {
    const target = targets[key];
    const options = target?.options;
    const settings = options?.settings;
    if (!settings || typeof settings !== 'object') continue;
    // If 'pages' exists and is an Array -> treat as outdated array page structure
    if (Array.isArray(settings.pages)) {
      return true;
    }
    // also check nested areas
    for (const sKey of Object.keys(settings)) {
      if (Array.isArray(settings[sKey])) {
        return true;
      }
    }
  }
  return false;
}

/**
 * Determine availability of quick action.
 * @param actionId - id from matrix (eg "addCustomTableAction")
 * @param odataVersion - 'v2' | 'v4'
 * @param sapUi5Version - '1.96.0' style string
 * @param manifest - parsed manifest.json object (optional, used to detect outdated array page)
 */
function isQuickActionAvailable(
  actionId: string,
  odataVersion: 'v2' | 'v4',
  sapUi5Version: string,
  manifest?: any
): { available: boolean; reason?: string } {
  const action = (quickActionsMatrix as any[]).find(a => a.id === actionId);
  if (!action) return { available: false, reason: 'Unknown actionId' };
  const minRequired = action.minSapUi5Version[odataVersion];
  if (!minRequired) {
    // some actions may have only V2 support; if minRequired is null => unsupported
    return { available: false, reason: `Action not supported for OData ${odataVersion.toUpperCase()}` };
  }
  if (compareSemver(sapUi5Version, minRequired) < 0) {
    return { available: false, reason: `Requires SAPUI5 >= ${minRequired}` };
  }
  // special rule: actions that change manifest are not available for adaptation projects built on OData V2
  // that use SAPUI5 version < 1.134 and have an outdated array page structure in manifest.json
  if (action.manifestChange && odataVersion === 'v2') {
    if (compareSemver(sapUi5Version, '1.134.0') < 0 && manifest && manifestHasOutdatedArrayPage(manifest)) {
      return {
        available: false,
        reason:
          'Manifest-changing action blocked: OData V2 + SAPUI5 < 1.134 with outdated array page structure in manifest.json'
      };
    }
  }
  return { available: true };
}
```

STEP: 3 - Detect SAPUI5 version from manifest.json and sample manifest snippet

DESCRIPTION: Where to find SAPUI5 version in manifest.json and how to update minUI5Version. File path: manifest.json (project root). Provide sample manifest read/update snippet.

LANGUAGE: JSON

CODE:
```json
// Example manifest.json snippet (relevant parts)
// File: manifest.json
{
  "sap.ui5": {
    "dependencies": {
      "minUI5Version": "1.134.0",
      "libs": {
        "sap.m": {},
        "sap.ui.core": {}
      }
    },
    "routing": {
      "targets": {
        "objectPage": {
          "options": {
            "settings": {
              "pages": [
                // <-- array pages here would trigger the outdated-array-page detection in STEP 2
              ]
            }
          }
        }
      }
    }
  }
}
```

STEP: 4 - Read / update manifest.json (Node.js example)

DESCRIPTION: Read manifest.json, extract minUI5Version, run availability checks, conditionally update minUI5Version.

LANGUAGE: JavaScript (Node.js)

CODE:
```javascript
const fs = require('fs');
const path = require('path');
const manifestPath = path.resolve(process.cwd(), 'manifest.json');

function readManifest() {
  const raw = fs.readFileSync(manifestPath, 'utf8');
  return JSON.parse(raw);
}

function writeManifest(manifest) {
  fs.writeFileSync(manifestPath, JSON.stringify(manifest, null, 2), 'utf8');
}

// Example usage:
(async () => {
  const manifest = readManifest();
  const minUI5 = manifest?.sap?.ui5?.dependencies?.minUI5Version || manifest?.sap?.ui5?.dependencies?.minUI5Version;
  console.log('Detected manifest.minUI5Version =', minUI5);

  // Use isQuickActionAvailable (from STEP 2) - ensure to import/require your compiled TS helper
  const { available, reason } = isQuickActionAvailable('addLocalAnnotationFile', 'v2', minUI5 || '1.71.0', manifest);
  console.log('Availability:', available, reason || '');

  // If you need to bump minUI5Version:
  if (!minUI5 || compareSemver(minUI5, '1.134.0') < 0) {
    manifest.sap.ui5.dependencies.minUI5Version = '1.134.0';
    writeManifest(manifest);
    console.log('Updated manifest.minUI5Version => 1.134.0');
  }
})();
```

STEP: 5 - Usage examples

DESCRIPTION: Minimal examples for agents to call the availability checker.

LANGUAGE: TypeScript / JavaScript

CODE:
```typescript
// Example 1: check quickly without manifest
const res1 = isQuickActionAvailable('addCustomTableAction', 'v2', '1.108.0');
console.log(res1); // { available: true } or { available: false, reason: '...' }

// Example 2: check with manifest to apply the outdated-array-page rule
const manifest = require('./manifest.json');
const res2 = isQuickActionAvailable('addLocalAnnotationFile', 'v2', '1.132.0', manifest);
console.log(res2); // will be blocked if manifestHasOutdatedArrayPage(manifest) returns true

// Example 3: iterate all actions and list availability for a project
const projectSapUi5 = '1.130.0';
const projectOData = 'v4';
const manifestObj = require('./manifest.json');

for (const a of quickActionsMatrix) {
  const r = isQuickActionAvailable(a.id, projectOData as any, projectSapUi5, manifestObj);
  console.log(a.id, '=>', r.available ? 'AVAILABLE' : `UNAVAILABLE (${r.reason})`);
}
```

Reference: Actions that result in manifest changes are not available for adaptation projects built on OData V2 applications that use SAPUI5 < 1.134 and have an outdated array page structure in the manifest.json. See the official doc for details: https://ui5.sap.com/#/topic/a2b24a69baef4b91af2293ccc6b5871f

(End of machine-readable matrix + code examples.)
--------------------------------

**TITLE**: Quick Actions Availability Matrix (Machine-Readable + Usage)

**INTRODUCTION**: This document converts the Quick Actions availability matrix into a machine-readable format and provides code snippets to:
- Determine the project's SAPUI5 version and OData version,
- Evaluate which quick actions are available for the project,
- Highlight manifest-related constraints for adaptation projects (file path and link included).

Use this with code generators to programmatically decide which quick actions to offer or enable in tooling.

**TAGS**: SAPUI5, Fiori Elements, adaptation project, quick actions, OData, manifest.json, automation

STEP: 1 — Machine-readable availability matrix

DESCRIPTION: JSON mapping of each quick action with its supported OData version(s), page types, earliest SAPUI5 version where it becomes available, and whether it results in manifest changes (starred in the original table). Use this JSON as input for tooling logic.

LANGUAGE: JSON

CODE:
```json
[
  {
    "action": "Add Controller to Page",
    "odataVersion": "V2",
    "pageTypes": ["List Report/Analytical List Page", "Object Page"],
    "minSAPUI5Version": "1.71",
    "requiresManifestChange": false
  },
  {
    "action": "Add Controller to Page",
    "odataVersion": "V4",
    "pageTypes": ["List Report/Analytical List Page", "Object Page"],
    "minSAPUI5Version": "1.71",
    "requiresManifestChange": false
  },
  {
    "action": "Add Header Field",
    "odataVersion": "V2",
    "pageTypes": ["Object Page"],
    "minSAPUI5Version": "1.71",
    "requiresManifestChange": false
  },
  {
    "action": "Add Header Field",
    "odataVersion": "V4",
    "pageTypes": ["Object Page"],
    "minSAPUI5Version": "1.71",
    "requiresManifestChange": false
  },
  {
    "action": "Add Custom Section",
    "odataVersion": "V2",
    "pageTypes": ["Object Page"],
    "minSAPUI5Version": "1.71",
    "requiresManifestChange": false
  },
  {
    "action": "Add Custom Section",
    "odataVersion": "V4",
    "pageTypes": ["Object Page"],
    "minSAPUI5Version": "1.71",
    "requiresManifestChange": false
  },
  {
    "action": "Add Custom Page Action",
    "odataVersion": "V2",
    "pageTypes": ["List Report/Analytical List Page", "Object Page"],
    "minSAPUI5Version": "1.130",
    "requiresManifestChange": false
  },
  {
    "action": "Add Custom Page Action",
    "odataVersion": "V4",
    "pageTypes": ["List Report/Analytical List Page", "Object Page"],
    "minSAPUI5Version": "1.130",
    "requiresManifestChange": false
  },
  {
    "action": "Add Custom Table Action",
    "odataVersion": "V2",
    "pageTypes": ["List Report/Analytical List Page", "Object Page"],
    "minSAPUI5Version": "1.96",
    "requiresManifestChange": false
  },
  {
    "action": "Add Custom Table Action",
    "odataVersion": "V4",
    "pageTypes": ["List Report/Analytical List Page", "Object Page"],
    "minSAPUI5Version": "1.96",
    "requiresManifestChange": false
  },
  {
    "action": "Add Custom Table Column",
    "odataVersion": "V2",
    "pageTypes": ["List Report/Analytical List Page", "Object Page"],
    "minSAPUI5Version": "1.96",
    "requiresManifestChange": false
  },
  {
    "action": "Add Custom Table Column",
    "odataVersion": "V4",
    "pageTypes": ["List Report/Analytical List Page", "Object Page"],
    "minSAPUI5Version": "1.96",
    "requiresManifestChange": false
  },
  {
    "action": "Add Local Annotation File",
    "odataVersion": "V2",
    "pageTypes": ["List Report/Analytical List Page", "Object Page"],
    "minSAPUI5Version": "1.133",
    "requiresManifestChange": true
  },
  {
    "action": "Add Local Annotation File",
    "odataVersion": "V4",
    "pageTypes": ["List Report/Analytical List Page", "Object Page"],
    "minSAPUI5Version": "1.133",
    "requiresManifestChange": true
  },
  {
    "action": "Add Subpage",
    "odataVersion": "V2",
    "pageTypes": ["List Report/Analytical List Page", "Object Page"],
    "minSAPUI5Version": "1.96",
    "requiresManifestChange": true
  },
  {
    "action": "Add Subpage",
    "odataVersion": "V4",
    "pageTypes": ["List Report/Analytical List Page", "Object Page"],
    "minSAPUI5Version": "1.135",
    "requiresManifestChange": true
  },
  {
    "action": "Change Table Actions",
    "odataVersion": "V2",
    "pageTypes": ["List Report/Analytical List Page", "Object Page"],
    "minSAPUI5Version": "1.108",
    "requiresManifestChange": false
  },
  {
    "action": "Change Table Actions",
    "odataVersion": "V4",
    "pageTypes": ["List Report/Analytical List Page", "Object Page"],
    "minSAPUI5Version": "1.130",
    "requiresManifestChange": false
  },
  {
    "action": "Change Table Columns",
    "odataVersion": "V2",
    "pageTypes": ["List Report/Analytical List Page", "Object Page"],
    "minSAPUI5Version": "1.96",
    "requiresManifestChange": false
  },
  {
    "action": "Change Table Columns",
    "odataVersion": "V4",
    "pageTypes": ["List Report/Analytical List Page", "Object Page"],
    "minSAPUI5Version": "1.96",
    "requiresManifestChange": false
  },
  {
    "action": "Enable/Disable Clear Button",
    "odataVersion": "V2",
    "pageTypes": ["List Report/Analytical List Page"],
    "minSAPUI5Version": "1.71",
    "requiresManifestChange": false
  },
  {
    "action": "Enable/Disable Clear Button",
    "odataVersion": "V4",
    "pageTypes": ["List Report/Analytical List Page"],
    "minSAPUI5Version": "1.71",
    "requiresManifestChange": false
  },
  {
    "action": "Enable Empty Row Mode for Tables",
    "odataVersion": "V2",
    "pageTypes": ["Object Page"],
    "minSAPUI5Version": "1.130",
    "requiresManifestChange": true
  },
  {
    "action": "Enable Empty Row Mode for Tables",
    "odataVersion": "V4",
    "pageTypes": ["Object Page"],
    "minSAPUI5Version": "1.133",
    "requiresManifestChange": true
  },
  {
    "action": "Enable Semantic Date Range",
    "odataVersion": "V2",
    "pageTypes": ["List Report/Analytical List Page"],
    "minSAPUI5Version": "1.96",
    "requiresManifestChange": true
  },
  {
    "action": "Enable Semantic Date Range",
    "odataVersion": "V4",
    "pageTypes": ["List Report/Analytical List Page"],
    "minSAPUI5Version": "1.130",
    "requiresManifestChange": true
  },
  {
    "action": "Enable Table Filtering for Page Variants",
    "odataVersion": "V2",
    "pageTypes": ["List Report/Analytical List Page", "Object Page"],
    "minSAPUI5Version": "1.96",
    "requiresManifestChange": true
  },
  {
    "action": "Enable Table Filtering for Page Variants",
    "odataVersion": "V4",
    "pageTypes": ["List Report/Analytical List Page", "Object Page"],
    "minSAPUI5Version": "1.133",
    "requiresManifestChange": true
  },
  {
    "action": "Enable Variant Management in Tables",
    "odataVersion": "V2",
    "pageTypes": ["Object Page"],
    "minSAPUI5Version": "1.96",
    "requiresManifestChange": true
  },
  {
    "action": "Enable Variant Management in Tables and Charts",
    "odataVersion": "V2",
    "pageTypes": ["List Report/Analytical List Page"],
    "minSAPUI5Version": "1.96",
    "requiresManifestChange": true
  },
  {
    "action": "Enable Variant Management in Tables and Charts",
    "odataVersion": "V4",
    "pageTypes": ["List Report/Analytical List Page", "Object Page"],
    "minSAPUI5Version": "1.130",
    "requiresManifestChange": true
  }
]
```

STEP: 2 — Read SAPUI5 min version from manifest.json

DESCRIPTION: Node.js script to read webapp/manifest.json and extract sap.ui5.dependencies.minUI5Version. Use this to compare against the JSON matrix minSAPUI5Version.

LANGUAGE: JavaScript

CODE:
```javascript
// Node.js snippet: read minUI5Version from manifest.json
const fs = require('fs');
const path = require('path');

function getManifest(projectRoot = process.cwd()) {
  const manifestPath = path.join(projectRoot, 'webapp', 'manifest.json');
  const raw = fs.readFileSync(manifestPath, { encoding: 'utf8' });
  return JSON.parse(raw);
}

function getMinUI5Version(manifest) {
  // typical manifest path: manifest["sap.ui5"].dependencies.minUI5Version
  return manifest?.['sap.ui5']?.dependencies?.minUI5Version || null;
}

const manifest = getManifest();
const minUI5 = getMinUI5Version(manifest);
console.log('manifest path: webapp/manifest.json');
console.log('minUI5Version:', minUI5);
```

STEP: 3 — Determine OData version (manifest or metadata)

DESCRIPTION: Try to read dataSources.*.settings.odataVersion in manifest.json. If not present, fetch the service $metadata URL and detect OData v4 by Edmx namespace. Example Node.js snippet using axios.

LANGUAGE: JavaScript

CODE:
```javascript
// Node.js snippet: determine OData version from manifest or by fetching $metadata
const axios = require('axios');

async function getODataVersionFromManifest(manifest) {
  const ds = manifest?.['sap.app']?.dataSources || manifest?.['sap.ui5']?.dataSources || manifest?.dataSources;
  if (!ds) return null;
  for (const key of Object.keys(ds)) {
    const settings = ds[key].settings || {};
    if (settings.odataVersion) return settings.odataVersion; // e.g. "2.0" or "4.0"
    if (ds[key].uri) return { uri: ds[key].uri, name: key };
  }
  return null;
}

async function detectODataVersionByMetadata(url) {
  // url should point to the OData service root (no $metadata appended) or to $metadata
  const metadataUrl = url.endsWith('$metadata') ? url : url.replace(/\/$/, '') + '/$metadata';
  const res = await axios.get(metadataUrl, { timeout: 10000 });
  const text = res.data;
  // v4 uses Edmx namespace "http://docs.oasis-open.org/odata/ns/edmx"
  if (text.includes('http://docs.oasis-open.org/odata/ns/edmx')) return '4.0';
  // fallback: assume v2 if not the v4 namespace
  return '2.0';
}

(async () => {
  const manifest = getManifest(); // from previous snippet
  const fromManifest = await getODataVersionFromManifest(manifest);
  if (fromManifest && typeof fromManifest === 'string') {
    console.log('OData version (manifest):', fromManifest);
  } else if (fromManifest && fromManifest.uri) {
    const v = await detectODataVersionByMetadata(fromManifest.uri);
    console.log('OData version (detected by metadata):', v);
  } else {
    console.log('OData version could not be determined from manifest dataSources.');
  }
})();
```

STEP: 4 — Evaluate available quick actions for the project

DESCRIPTION: Use the machine-readable matrix JSON, the project's minUI5Version, and detected OData version to filter available actions. Example function that compares semantic versions and returns available actions. Also checks requiresManifestChange flag and warns about the manifest-array-page-structure constraint for OData V2 with SAPUI5 < 1.134 (see Step 5).

LANGUAGE: JavaScript

CODE:
```javascript
// Node.js snippet: evaluate available actions
const semver = require('semver'); // install semver

function filterAvailableActions(matrix, project) {
  // project: { odataVersion: "2.0" or "4.0", minUI5Version: "1.96.0", pageType: "Object Page" }
  const projectUI5 = normalizeUI5(project.minUI5Version);
  return matrix.filter(entry => {
    // match OData major version ("V2"/"V4")
    const entryODataMajor = entry.odataVersion === 'V2' ? '2' : '4';
    if (entryODataMajor !== project.odataVersion.replace(/^(\d).*/, '$1')) return false;
    // version compare: treat "1.96" vs "1.96.0"
    const entryMin = normalizeUI5(entry.minSAPUI5Version);
    if (!semver.gte(projectUI5, entryMin)) return false;
    // optional pageType filter if specified in project
    if (project.pageType && !entry.pageTypes.includes(project.pageType)) return false;
    return true;
  });
}

function normalizeUI5(v) {
  // ensure three-part semver e.g. "1.96" -> "1.96.0"
  if (!v) return '0.0.0';
  const parts = v.split('.');
  while (parts.length < 3) parts.push('0');
  return parts.slice(0,3).join('.');
}

// Usage example:
(async () => {
  const matrix = require('./quick-actions-matrix.json'); // the JSON from Step 1 saved to disk
  const project = { odataVersion: '4', minUI5Version: '1.133.0', pageType: 'Object Page' };
  const available = filterAvailableActions(matrix, project);
  console.log('Available quick actions:', available.map(a => a.action));
})();
```

STEP: 5 — Manifest change caveat & detection for outdated array page structure

DESCRIPTION: Starred actions in the matrix (requiresManifestChange = true) may modify manifest.json. There is an important constraint: For adaptation projects built on OData V2 applications that use SAPUI5 version < 1.134 and have an outdated "array page structure" in webapp/manifest.json, those actions are not available. You must either: (A) ensure the project uses SAPUI5 >= 1.134, or (B) update the manifest structure per the SAP guidance linked below. The manifest file path is webapp/manifest.json in the project root.

LANGUAGE: Plain text / JSON detection snippet

CODE:
```javascript
// Detection snippet: warn when manifest may be "outdated" for V2 and UI5 < 1.134
const manifest = getManifest(); // from Step 2
const minUI5 = getMinUI5Version(manifest);
const projectOData = (await getODataVersionFromManifest(manifest)) || 'unknown';

function warnOutdatedArrayPageStructure(manifest) {
  // Conservative detection: check for presence of legacy sap.ui.generic.app.pages array
  const genericApp = manifest?.['sap.ui.generic.app'];
  if (genericApp && Array.isArray(genericApp.pages)) {
    return true; // likely uses the older array page structure referenced in docs
  }
  // Another heuristic: absence of expected 'sap.ui5.routing.targets' combined with presence of 'sap.ui.generic.app'
  if (!manifest?.['sap.ui5']?.routing && genericApp) return true;
  return false;
}

const ui5Numeric = normalizeUI5(minUI5 || '0.0.0');
if (projectOData === '2' && semver.lt(ui5Numeric, normalizeUI5('1.134.0'))) {
  if (warnOutdatedArrayPageStructure(manifest)) {
    console.warn('WARNING: Project is OData V2 with SAPUI5 < 1.134 and may have an outdated array page structure in webapp/manifest.json.');
    console.warn('Starred quick actions that modify manifest are NOT available until the manifest structure is updated or UI5 is upgraded.');
    console.warn('See: Extending the Delivered Apps Manifest Using an Adaptation Project: https://ui5.sap.com/#/topic/a2b24a69baef4b91af2293ccc6b5871f');
  }
}
```

STEP: 6 — Reference and remediation

DESCRIPTION: If the detection warns about outdated manifest structure or you need the exact prerequisites and migration steps for manifest changes, follow the official SAP guidance linked below. Use the guidance to update manifest array page structure or adapt your project UI5 version.

LANGUAGE: URL / Plain text

CODE:
```text
Prerequisites and migration: Extending the Delivered Apps Manifest Using an Adaptation Project
https://ui5.sap.com/#/topic/a2b24a69baef4b91af2293ccc6b5871f

Manifest file path (project): <project-root>/webapp/manifest.json
```

Note: Save the JSON matrix from STEP 1 as quick-actions-matrix.json and point the filter script to it. Use the provided snippets as building blocks for generating UI/tooling that dynamically enables/disables quick actions based on project metadata.
--------------------------------

**TITLE**: Release SAP Fiori App for UI Adaptation (S/4HANA Cloud & BTP, ABAP Environment)

**INTRODUCTION**: Short checklist and exact manifest.json edits required to release an SAP Fiori application so it can be extended by customers using Adaptation Projects on SAP S/4HANA Cloud and SAP BTP, ABAP Environment. Covers OData C1 contract release, BSP (WAPA) release flag in manifest.json, authorization objects release, and creating an API snapshot.

**TAGS**: sap-fiori, sapui5, manifest.json, odata, c1-contract, bsp, cloud-dev-adaptation, api-snapshot, atc

**STEP**: 1 — Prerequisites and manifest.json version bump

**DESCRIPTION**: Before releasing a new version of your application, increment the semantic version in manifest.json under sap.app/applicationVersion/version. This ensures ATC checks notify consumers of base-app updates. Ensure manifest.json is at webapp/manifest.json (or project root) and sap.app/id has at least two segments (e.g., com.company.app).

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.app": {
    "id": "com.company.myfioriapp",
    "applicationVersion": {
      "version": "1.2.0" /* bump this when releasing a new version */
    },
    "title": "My Fiori App"
  }
}
```

Notes:
- Use semantic increments (major.minor.patch). Example: 1.1.4 -> 1.2.0.
- sap.app/id must contain at least two segments (dot-separated).

**STEP**: 2 — Release the OData service with a C1 contract

**DESCRIPTION**: Set the OData service's API release state to C1 and set the state to "Released" in the API management / API Registration tool in S/4HANA Cloud. C1 forbids incompatible structural changes to the service but allows annotation changes. This is a mandatory prerequisite for setting the BSP adaptation flag in manifest.json.

**LANGUAGE**: Procedure

**CODE**:
```
- Open the API registration / OData service settings in SAP Fiori (or API Management).
- Set API Release State: C1 (Use in Cloud Development).
- Set State: Released
- Save/Transport the change so it is visible for ATC checks.
```

Reference: Setting the API Release State (use your S/4HANA Cloud documentation).

**STEP**: 3 — Release BSP (WAPA object) via manifest.json flag

**DESCRIPTION**: In the application manifest, set sap.fiori/cloudDevAdaptationStatus to "released" to mark the BSP/WAPA as released for cloud development (allows adaptation projects to create variants). This setting requires the OData service C1 contract to be in "Released" state. Allowed values: omitted (not released), "deprecated", "obsolete", "released".

**LANGUAGE**: JSON

**CODE**:
```json
{
  "sap.app": {
    "id": "com.company.myfioriapp",
    "applicationVersion": {
      "version": "1.2.0"
    }
  },
  "sap.fiori": {
    "cloudDevAdaptationStatus": "released"
  }
}
```

Notes:
- When cloudDevAdaptationStatus = "released", the BSP/WAPA is available for Adaptation Projects on Cloud.
- If sap.fiori/cloudDevAdaptationStatus is omitted, the app is not released for cloud adaptation.
- The application deployment will fail if sap.fiori/cloudDevAdaptationStatus is provided but the OData service C1 contract is not Released.

**STEP**: 4 — Release authorization objects and restriction types (optional but recommended)

**DESCRIPTION**: For consistent behavior of app variants, release the authorization objects and restriction types referenced by the OData service. Set their C1 contract state to "Released" and enable "Use in Cloud Development". If not released, app variants are created but will inherit authorizations from the original app; original app and catalogs must be assigned to user roles.

**LANGUAGE**: Procedure

**CODE**:
```
- Identify authorization objects and restriction types used by the OData service.
- In the Authorization/Service metadata tool, set their Release State: C1 (Use in Cloud Development).
- Set State: Released
- Check "Use in Cloud Development" if available.
- Save/Transport the changes.
```

Note: This step is not required to create app variants but is recommended to decouple variant authorizations from the base app.

**STEP**: 5 — Create an API snapshot before shipment

**DESCRIPTION**: Right before shipment, capture an API snapshot that includes the released APIs (C1) using the Manage API Snapshots application. This snapshot ensures ATC and consistency checks reference the correct API set for the release.

**LANGUAGE**: Procedure

**CODE**:
```
- Open SAP Fiori Launchpad -> Manage API Snapshots.
- Create new snapshot and include the relevant released APIs/OData services.
- Save and publish snapshot as required by your release process.
```

**STEP**: 6 — Post-release checks (ATC enforcement)

**DESCRIPTION**: After setting the above contracts and snapshot, ATC checks enforce the release state consistency. Ensure adaptation projects run ATC checks to detect breaking changes. If you updated the base app, increment manifest.json version so adaptation projects are notified by ATC.

**LANGUAGE**: Procedure

**CODE**:
```
- Run ATC checks for the application and adaptation projects.
- Verify no breakage between base app release and existing adaptation projects.
- If base app updated, ensure adaptation projects update against new version or report required changes.
```

Related resources (for implementers): Descriptor for Applications (manifest.json), Manage API Snapshots, Setting the API Release State, Best Practices for Developers.
--------------------------------

**TITLE**: Replace OData Service in Fiori project (manifest.appdescr_variant / manifest.json)

**INTRODUCTION**: This document shows UI and code-focused ways to replace an OData service referenced by a Fiori application. It includes the exact manifest keys to update, example JSON snippets (before/after), and a Node.js script to programmatically apply the replacement (URI, optional maxAge, optional annotation URI). Use when migrating or pointing an app to a different OData endpoint. The new service must be compatible (same entity set names, properties, function imports, and compatible annotations for V2).

**TAGS**: fiori-tools, SAPUI5, OData, manifest, manifest.appdescr_variant, webapp, migration, automation

STEP: 1 — Locate the descriptor to change

DESCRIPTION: Identify which manifest file to update. Options:
- GUI: Right-click the project main folder, the webapp folder, or the manifest.appdescr_variant file and choose "Replace OData Service".
- Manual: Edit either webapp/manifest.appdescr_variant or webapp/manifest.json directly. The data source definition usually lives under "sap.app" -> "dataSources" and the model binding under "sap.ui5" -> "models".

LANGUAGE: Text

CODE:
```text
File paths:
- <projectRoot>/webapp/manifest.appdescr_variant
- <projectRoot>/webapp/manifest.json
```

STEP: 2 — Identify the target dataSource key

DESCRIPTION: Pick the dataSource key you want to replace (e.g., "mainService" or "NorthwindService"). This key is used by the models section. Example location in manifest JSON.

LANGUAGE: JSON

CODE:
```json
{
  "sap.app": {
    "dataSources": {
      "mainService": {          /* <-- target key (example) */
        "uri": "/sap/opu/odata/sap/OLD_SERVICE_SRV/",
        "type": "OData",
        "settings": { "odataVersion": "2.0" }
      }
    }
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "mainService"  /* model bound to the data source key */
      }
    }
  }
}
```

STEP: 3 — Replace the service URI and optional maxAge and annotation URI (manual edit)

DESCRIPTION: Update the dataSource entry for the chosen key. Change "uri" to the new service URL. Optionally set "settings.maxAge" (cache lifetime in seconds) and "settings.annotationURI" for annotation documents (if the service supports annotations). Save the manifest file.

LANGUAGE: JSON

CODE:
```json
{
  "sap.app": {
    "dataSources": {
      "mainService": {
        "uri": "https://example.com/NEW_SERVICE_SRV/",   /* new OData service URI */
        "type": "OData",
        "settings": {
          "odataVersion": "2.0",
          "maxAge": 3600,                                /* optional: cache lifetime in seconds */
          "annotationURI": "https://example.com/ANNOTATIONS.xml" /* optional: annotation file URI for V2 */
        }
      }
    }
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "mainService"
      }
    }
  }
}
```

STEP: 4 — Programmatically replace the dataSource (Node.js script)

DESCRIPTION: Use this Node.js script to automate updating the service URI, optional maxAge, and optional annotation URI for a specific dataSource key in webapp/manifest.appdescr_variant (or manifest.json). The script:
- Reads manifest file
- Locates sap.app.dataSources[targetKey]
- Sets uri, optionally sets settings.maxAge and settings.annotationURI
- Writes back the file (creates a .bak backup)

LANGUAGE: JavaScript (Node.js)

CODE:
```javascript
// replace-odata-service.js
// Usage:
// node replace-odata-service.js <manifestPath> <targetKey> <newUri> [maxAge] [annotationUri]

const fs = require('fs');
const path = require('path');

const [,, manifestPath, targetKey, newUri, maxAgeArg, annotationUri] = process.argv;
if (!manifestPath || !targetKey || !newUri) {
  console.error('Usage: node replace-odata-service.js <manifestPath> <targetKey> <newUri> [maxAge] [annotationUri]');
  process.exit(1);
}

const absPath = path.resolve(manifestPath);
if (!fs.existsSync(absPath)) {
  console.error('Manifest file not found:', absPath);
  process.exit(1);
}

// Backup
fs.copyFileSync(absPath, absPath + '.bak');

const content = fs.readFileSync(absPath, 'utf8');
let manifest;
try {
  manifest = JSON.parse(content);
} catch (e) {
  console.error('Failed to parse JSON:', e.message);
  process.exit(1);
}

// Ensure sap.app.dataSources exists
manifest['sap.app'] = manifest['sap.app'] || {};
manifest['sap.app'].dataSources = manifest['sap.app'].dataSources || {};

const ds = manifest['sap.app'].dataSources[targetKey];
if (!ds) {
  console.error(`Data source key "${targetKey}" not found under sap.app.dataSources`);
  process.exit(1);
}

// Apply changes
ds.uri = newUri;
ds.type = ds.type || 'OData';
ds.settings = ds.settings || {};
if (maxAgeArg) {
  const maxAge = parseInt(maxAgeArg, 10);
  if (!isNaN(maxAge)) {
    ds.settings.maxAge = maxAge;
  }
}
if (annotationUri) {
  ds.settings.annotationURI = annotationUri;
}

// Write back
fs.writeFileSync(absPath, JSON.stringify(manifest, null, 2), 'utf8');
console.log(`Updated ${targetKey} in ${absPath}`);
```

STEP: 5 — Validate compatibility and annotations

DESCRIPTION: After replacement, verify:
- Entity set names, properties, and function imports used by the app exist in the new service.
- If original service used annotations (V2), ensure the new annotation document is compatible; update annotationURI accordingly.
- Test the app in the browser / run unit/integration tests.

LANGUAGE: Text

CODE:
```text
Validation checklist:
- Open app and run typical flows; check console/network for OData metadata retrieval:
  - GET <newService>/sap/opu/odata/.../$metadata
  - GET annotation URI (if set)
- Confirm model bindings and read/write operations succeed
- Check entity sets used by UI fragments/controllers exist in new metadata
```

STEP: 6 — Finish / Commit changes

DESCRIPTION: Save changes (or commit them). If you used the UI wizard, click Finish. If you edited files manually or via script, run a quick build/test and commit the modified manifest.appdescr_variant (and remove the .bak after verifying).

LANGUAGE: Text

CODE:
```text
Recommended commands:
# run ui5 tooling or local test server
npm run start

# commit changes after verification
git add webapp/manifest.appdescr_variant
git commit -m "Replace OData service mainService -> https://example.com/NEW_SERVICE_SRV/"
```
--------------------------------

**TITLE**: Replace OData Service in an Adaptation Project (wizard + manual manifest.appdescr_variant edits)

**INTRODUCTION**: This guide shows two ways to replace an OData service referenced by an adaptation project: (A) use the Replace OData Service wizard (IDE support) and (B) manually edit manifest.appdescr_variant. Use the wizard when available; use the manual steps when you must edit the adaptation project without tooling support. Always ensure the new service is compatible (same entity set names, properties, function imports, and compatible annotation files if the app uses annotations).

**TAGS**: fiori-tools, OData, SAP, manifest, adaptation, annotations, UI5, manifest.appdescr_variant

**STEP**: 1 — Replace OData Service using the Adaptation Project wizard

**DESCRIPTION**: Right-click the adaptation manifest file and run the Replace OData Service wizard. This is the easiest method if your IDE supports it.

- File to open: manifest.appdescr_variant (in the root of your adaptation project)
- Menu: Right-click manifest.appdescr_variant -> Adaptation Project -> Replace OData Service
- Wizard fields:
  - Target OData Service: select the service from the base app manifest that you want to replace
  - New OData Service URI: enter the URI of the replacement OData service
  - maxAge (optional): enter the cache maxAge for the new service
  - Annotation Data Source URI (optional): enter a replacement annotation data source URI if the service supports annotations
- Finish to save changes.

**LANGUAGE**: None

**CODE**:
```text
# No code required for wizard-based replacement.
# Open: manifest.appdescr_variant -> Right-click -> Adaptation Project -> Replace OData Service
```

**STEP**: 2 — Manual update: change the OData dataSource URI in manifest.appdescr_variant

**DESCRIPTION**: Edit manifest.appdescr_variant JSON to point the data source name used by the app models to the new service URI. Update any related annotation data source and optional maxAge. The dataSource name must remain the same if referenced by the app models; otherwise update the model's dataSource reference too.

- File path: manifest.appdescr_variant (root of adaptation project)
- Sections to edit:
  - sap.app -> dataSources (or sap.ui5 -> models -> <modelName> -> dataSource)
  - Annotation data source entries (OData V2 annotation dataSource)
  - Optional cache/maxAge settings (if used by your app/environment)

**LANGUAGE**: JSON

**CODE**:
```json
// Example: original fragment in manifest.appdescr_variant
{
  "sap.app": {
    "dataSources": {
      "mainService": {
        "uri": "/sap/opu/odata/sap/OLD_SERVICE_SRV/",
        "type": "OData",
        "settings": {
          "odataVersion": "2.0"
        }
      },
      "mainAnnotations": {
        "uri": "/sap/opu/odata/sap/OLD_ANNOTATIONS/Annotations",
        "type": "ODataAnnotation"
      }
    }
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "mainService"
      },
      "annotationModel": {
        "dataSource": "mainAnnotations"
      }
    }
  }
}
```

**STEP**: 3 — Manual update: replace with new service URI, optional maxAge, and annotation datasource

**DESCRIPTION**: Replace the URIs and (optionally) add/update a maxAge value. Ensure the dataSource names remain correct for model bindings. For OData V2 annotations also replace the annotation data source entry.

**LANGUAGE**: JSON

**CODE**:
```json
// Example: updated fragment in manifest.appdescr_variant
{
  "sap.app": {
    "dataSources": {
      "mainService": {
        "uri": "https://host.example.com/odata/NEW_SERVICE_SRV/",
        "type": "OData",
        "settings": {
          "odataVersion": "2.0",
          "maxAge": 3600
        }
      },
      "mainAnnotations": {
        "uri": "https://host.example.com/odata/NEW_ANNOTATIONS/Annotations",
        "type": "ODataAnnotation"
      }
    }
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "mainService"
      },
      "annotationModel": {
        "dataSource": "mainAnnotations"
      }
    }
  }
}
```

**STEP**: 4 — If the model references a different dataSource name, update the model entry

**DESCRIPTION**: If you must change the dataSource name (not recommended unless you update every reference), update sap.ui5.models entries to use the new dataSource name.

**LANGUAGE**: JSON

**CODE**:
```json
// If you rename the dataSource to "newMainService", update models accordingly
{
  "sap.app": {
    "dataSources": {
      "newMainService": {
        "uri": "https://host.example.com/odata/NEW_SERVICE_SRV/",
        "type": "OData",
        "settings": { "odataVersion": "2.0" }
      }
    }
  },
  "sap.ui5": {
    "models": {
      "": {
        "dataSource": "newMainService"
      }
    }
  }
}
```

**STEP**: 5 — Validate compatibility and test runtime

**DESCRIPTION**: After editing, validate:
- The new service provides the same entity set names, properties, and function imports used by the app.
- For OData V2 + annotations: the replacement annotation file must expose the same annotations used by the app.
- Test the app in the target environment or use UI5 tooling to run locally and verify read/write/metadata operations succeed.

**LANGUAGE**: None

**CODE**:
```text
# Validation checklist (manual)
# 1. Check $metadata of the new service for required entity sets, properties, and functions.
# 2. If your app uses annotations, fetch and compare the annotation metadata (or run the app and verify annotation-driven UI elements).
# 3. Deploy/adapt and run the app; look for binding errors in console/network failures.
```

**STEP**: 6 — Authentication note

**DESCRIPTION**: If the new service is in a different system, you may be prompted to provide credentials when using the wizard or when running the app. Ensure the environment or runtime has access to the new service.

**LANGUAGE**: None

**CODE**:
```text
# If using the wizard: you may be asked to enter credentials for the system used to create the adaptation project.
# If manual: ensure the deployed runtime has connectivity and appropriate credentials to the new service.
```
--------------------------------

**TITLE**: Update Adaptation Project Deployment (SAP Fiori Tools)

**INTRODUCTION**: Procedures to update (redeploy) an existing adaptation project to an on-premise ABAP system using the Deployment Wizard in SAP Business Application Studio. Use these steps when you have already deployed the adaptation project once and want to push changes (Update) or remove the deployed version (Undeploy).

**TAGS**: fiori-tools, adaptation, deployment, ABAP, on-premise, SAP Business Application Studio

**STEP**: Prerequisites

**DESCRIPTION**: Confirm the adaptation project was previously deployed to the ABAP repository. If not, deploy first following the official guide.

**LANGUAGE**: Text

**CODE**:
```text
Required:
- You have already deployed this adaptation project to an on-premise ABAP system.

Reference:
- Deploy the Adaptation Project to the ABAP Repository:
  https://help.sap.com/docs/bas/developing-sap-fiori-app-in-sap-business-application-studio/deploy-adaptation-project?locale=en-US
```

**STEP**: Open Deployment Wizard

**DESCRIPTION**: Launch the Deployment Wizard from the project explorer to start update/undeploy actions. You can open the wizard by right-clicking the project-level element.

**LANGUAGE**: Text

**CODE**:
```text
In SAP Business Application Studio:
- Right-click one of the following in the project explorer:
  - <project-root> (main folder)
  - webapp (folder containing UI artifacts)
  - manifest.appdescr_variant (file)

- Select: "Open Deployment Wizard"
```

**STEP**: Select target system for deployment

**DESCRIPTION**: Choose the ABAP system where the adaptation was originally deployed or another target system. The system used to create the project is selected by default.

**LANGUAGE**: Text

**CODE**:
```text
Deployment Wizard:
- On the "Select System" step, choose the target on-premise ABAP system.
- Default selection: system used when the adaptation project was created.
```

**STEP**: Choose action (Update or Undeploy)

**DESCRIPTION**: If the selected project is already deployed to the chosen system, the wizard prompts for action. Select "Update" to redeploy changes, or "Undeploy" to remove the adaptation from the ABAP repository. For redeploying changes, choose Update.

**LANGUAGE**: Text

**CODE**:
```text
If the project is already deployed:
- Prompt: "What action would you like to perform?"
  - Options: Update | Undeploy
- To redeploy changes: select "Update"
```

**STEP**: Start deployment

**DESCRIPTION**: Confirm choices and start the deployment process. Click Next to proceed and follow any additional prompts until the deployment completes.

**LANGUAGE**: Text

**CODE**:
```text
Deployment Wizard:
- After selecting Update (or Undeploy), click "Next" to begin.
- Monitor deployment progress and finish per wizard prompts.
```
--------------------------------

**TITLE**: Upgrade-Safe Controller Extension Patterns for SAPUI5 / Fiori

**INTRODUCTION**: Practical, code-focused rules and helper patterns to make controller extensions resilient to SAPUI5 / base app upgrades. Includes safe control access, stable ID usage, fragment handling, reuse-component error handling, and OData metadata checks. Use these snippets when writing controller code for adaptation projects or extension projects to minimize breakage after base-app upgrades.

**TAGS**: fiori-tools, SAPUI5, controller-extensions, upgrade-safety, best-practices, OData, fragments

**STEP**: 1 — Use stable IDs in views and fragments

**DESCRIPTION**: Always assign stable IDs to controls that your extension will access. In XML views and fragments, use local IDs and access via controller.this.byId (view-prefixed) or by constructing a fragment ID prefix when creating fragments dynamically.

**LANGUAGE**: XML

**CODE**:
```XML
<!-- View: webapp/view/MyView.view.xml -->
<mvc:View controllerName="my.app.controller.MyController" xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m">
  <Button id="btnSave" text="Save" press=".onSave" />
  <List id="lstItems" items="{
      path: 'MyModel>/Items'
  }">
    <!-- item template -->
  </List>
</mvc:View>

<!-- Fragment: webapp/view/MyFragment.fragment.xml -->
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m">
  <Button id="btnFragmentOk" text="OK" />
</core:FragmentDefinition>
```

**STEP**: 2 — Safe control access and type checking helper

**DESCRIPTION**: Never assume a control exists or is of an expected class. Use a small helper to retrieve and validate a control by ID, returning null if missing or wrong type.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// webapp/controller/MyController.controller.js
sap.ui.define([], function() {
  "use strict";

  return sap.ui.controller("my.app.controller.MyController", {
    // Safe getter: use controller.byId (scoped to view) when possible
    getControlSafe: function(sLocalId, sExpectedType) {
      var oControl = this.byId ? this.byId(sLocalId) : sap.ui.getCore().byId(sLocalId);
      if (!oControl) {
        return null;
      }
      if (sExpectedType && !oControl.isA(sExpectedType)) {
        // not the expected type -> treat as missing
        return null;
      }
      return oControl;
    },

    onInit: function() {
      var oBtn = this.getControlSafe("btnSave", "sap.m.Button");
      if (oBtn) {
        oBtn.setEnabled(true);
      } else {
        // fallback or log
        jQuery.sap.log.debug("btnSave not available or not a sap.m.Button");
      }
    }
  });
});
```

**STEP**: 3 — Avoid relying on aggregation order or array indexes

**DESCRIPTION**: Do not use getItems()[0] / getAggregation("items")[index] to find controls. Use stable IDs, binding contexts, custom data, or a find/filter approach that checks identity or binding paths.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Instead of relying on index:
var aItems = oList.getItems();
// bad: var oFirst = aItems[0];

// Better: find by binding context path or custom data
var oTarget = aItems.find(function(oItem) {
  var oContext = oItem.getBindingContext("MyModel");
  return oContext && oContext.getPath() === "/Items('KEY123')";
});

// Or mark important items with custom data and search by it
var oMarked = aItems.find(function(oItem) {
  return oItem.data("stableKey") === "myStableKey";
});
```

**STEP**: 4 — Do not call private/protected or deprecated APIs

**DESCRIPTION**: Only use public, documented APIs. When in doubt, check for existence of a function and call it defensively. Do not call methods with "_" prefix or protected APIs.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Defensive call to a public API - check existence first
var oControl = this.getControlSafe("btnSave");
if (oControl && typeof oControl.setEnabled === "function") {
  oControl.setEnabled(false);
}

// NEVER do this:
// oControl._privateMethod(); // DO NOT call underscore-prefixed methods
```

**STEP**: 5 — Load fragments and access their controls safely (ID prefixing)

**DESCRIPTION**: When instantiating fragments dynamically, pass an ID prefix so you can reference fragment controls predictably. Add the fragment as a dependent of the view to keep lifecycle synchronized.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// In controller: instantiate fragment with ID prefix (view id + "--fragmentId")
var sFragmentId = this.getView().getId() + "--myFrag";
var oFragment = sap.ui.xmlfragment(sFragmentId, "my.app.view.MyFragment", this);
this.getView().addDependent(oFragment);

// Access controls inside the fragment via controller.byId using the fragment local id:
var oOkButton = this.byId("myFrag--btnFragmentOk"); // note: "myFrag--btnFragmentOk" local id inside view scope
if (oOkButton) {
  oOkButton.attachPress(function() { /* ... */ });
}
```

**STEP**: 6 — Handle reuse components and external APIs gracefully

**DESCRIPTION**: Reuse components might change their public surface. Always verify method existence and wrap calls in try/catch (or promise catch) and ensure your extension degrades gracefully.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Safe invocation of a reuse component API
async function callReuseApiSafe(oReuseComponent, sMethod, aArgs) {
  aArgs = aArgs || [];
  if (!oReuseComponent || typeof oReuseComponent[sMethod] !== "function") {
    // API not available -> fallback or no-op
    return null;
  }
  try {
    var vResult = oReuseComponent[sMethod].apply(oReuseComponent, aArgs);
    // handle promise return
    if (vResult && typeof vResult.then === "function") {
      return await vResult;
    }
    return vResult;
  } catch (err) {
    // log and degrade gracefully
    jQuery.sap.log.error("Reuse API call failed for " + sMethod, err);
    return null;
  }
}

// Usage
var oReuseComponent = sap.ui.component("reuseComponentId");
callReuseApiSafe(oReuseComponent, "openDialog", [/* params */]);
```

**STEP**: 7 — Check OData metadata before binding or referencing properties

**DESCRIPTION**: OData metadata can change on upgrades. Query the service metadata at runtime to check whether an entity type or property still exists before binding or using it in controller logic.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// Example: check metadata for a property before binding
var oModel = this.getView().getModel(); // assume ODataModel
var oMetaModel = oModel && oModel.getMetaModel();
if (oMetaModel) {
  // Typical metadata path: adapt to your service's structure
  var aSchemas = oMetaModel.getObject("/dataServices/schema") || [];
  var bHasProperty = false;
  aSchemas.some(function(oSchema) {
    var aEntityTypes = oSchema.entityType || [];
    return aEntityTypes.some(function(oEntity) {
      if (oEntity.name === "MyEntityType") {
        bHasProperty = (oEntity.property || []).some(function(p) { return p.name === "MyProperty"; });
        return true; // stop inner loop
      }
    });
  });

  if (bHasProperty) {
    // safe to bind/use MyProperty
    // e.g. oControl.bindElement("MyModel>/MyEntity('KEY')");
  } else {
    // fallback logic: use alternative property, hide UI, or log
    jQuery.sap.log.warn("MyProperty not available in service metadata");
  }
}
```

**STEP**: 8 — Value helps, annotations, and snapshots

**DESCRIPTION**: Value helps and some annotation-driven artifacts are not part of the internal stability contract and may change after upgrades. Do not hard-code value-help entity sets in controller source. Ensure adaptation projects include a runnable snapshot of the base app and local copy of UI annotations; after base-app upgrades, resolve conflicts and redeploy the adaptation snapshot to align with the new base app.

**LANGUAGE**: Text / Links

**CODE**:
```text
- Do not use value-help entity sets directly in controller logic or fragment bindings.
- Maintain local snapshots of UI artifacts and annotations in adaptation projects.
- After base-app upgrades, resolve conflicts and redeploy the adaptation project snapshot.

Reference:
Check whether your adaptation project is up-to-date:
https://sap.github.io/fiori-tools/check-whether-your-adaptation-project-is-up-to-date-with-base-app-upgrades-c6ef105.md
SAPUI5 best practices:
https://ui5.sap.com/#/topic/28fcd55b04654977b63dacbee0552712
```

**STEP**: 9 — Quick checklist to apply in controller extensions

**DESCRIPTION**: Use this short actionable checklist when authoring or reviewing extension code.

**LANGUAGE**: Text

**CODE**:
```text
- Use stable control IDs and access via this.byId(...) or known fragment prefixes.
- Always check control existence and type before calling methods.
- Avoid aggregation index-based logic; locate items by binding context or stable custom data.
- Check for public API methods with typeof ... === "function" before invocation.
- Wrap external/reuse component calls in try/catch and handle promise rejections.
- Inspect OData metadata at runtime before binding or referencing properties.
- Do not call underscore-prefixed (private/protected) or deprecated APIs.
- Keep adaptation project snapshots and local annotations up-to-date; resolve conflicts after upgrades.
```
--------------------------------

**TITLE**: Viewing SAP Fiori tools AI Generation Logs (Project Accelerator)

**INTRODUCTION**: Quick, code-focused instructions to enable and view generation logs when using the SAP Fiori tools AI Project Accelerator in VS Code. Use these steps to capture logs for troubleshooting generation failures or to attach when opening a support ticket. Logs for generated projects are stored in the project's .fiori-ai folder.

**TAGS**: fiori-tools, sap, fiori-ai, logs, troubleshooting, vscode, project-accelerator

**STEP**: 1 — Open Command Palette and run set log level

**DESCRIPTION**: Open the VS Code Command Palette and execute the Developer command to set the log verbosity. Choose "Info" so the extension emits generation logs.

**LANGUAGE**: plaintext

**CODE**:
```plaintext
# Mac: press ⌘ + ⇧ + P
# Windows/Linux: press Ctrl + ⇧ + P

# In the Command Palette type and run:
Developer: Set Log Level

# From the list select:
Info
```

**STEP**: 2 — (Optional) Persist log level in user settings

**DESCRIPTION**: If you prefer to persist the log level across VS Code sessions, set the window.logLevel in user or workspace settings to "info". Note: you still must run the command or ensure setting after any dev space restart (see Tip).

**LANGUAGE**: JSON

**CODE**:
```json
// Add to settings.json (User or Workspace)
{
  "window.logLevel": "info"
}
```

**STEP**: 3 — Tip: when to set log level

**DESCRIPTION**: Set the log level before you start a new generation run. If the development environment or dev space is restarted, re-run the Developer: Set Log Level → Info command because the log level resets.

**LANGUAGE**: plaintext

**CODE**:
```plaintext
Tip:
- Must set log level BEFORE generating an application.
- Repeat after any dev space / VS Code restart.
```

**STEP**: 4 — Open the Output panel and select the SAP Fiori tools - AI channel

**DESCRIPTION**: The extension writes generation logs to the VS Code Output panel. Open Output and choose the "SAP Fiori tools - AI" stream from the dropdown.

**LANGUAGE**: plaintext

**CODE**:
```plaintext
# To open Output panel:
# Menu: View > Output
# OR keyboard (Windows/Linux): Ctrl + ⇧ + U
# OR keyboard (Mac): ⇧ + ⌘ + U

# In the Output panel's top-right dropdown, select:
SAP Fiori tools - AI
```

**STEP**: 5 — Locate logs in generated project (.fiori-ai) and collect for support

**DESCRIPTION**: Generated-app-specific logs are stored inside the generated project's .fiori-ai folder. For generation failures, collect logs and attach them to the support ticket. For issues with the generated app (not generation), attach a .zip of the entire generated project (include .fiori-ai).

**LANGUAGE**: bash

**CODE**:
```bash
# Example: list log files in project
ls -la /path/to/generated-app/.fiori-ai

# Example: collect only logs into a zip (Linux / macOS)
cd /path/to/generated-app
cp -r .fiori-ai ./fiori-ai-logs
zip -r fiori-ai-logs.zip fiori-ai-logs
# Attach fiori-ai-logs.zip to the support ticket

# Example: package the whole generated app (include logs) for issues with the app
cd /path/to
zip -r generated-app.zip generated-app

# Windows PowerShell examples:
# Compress only .fiori-ai folder
Compress-Archive -Path .\generated-app\.fiori-ai -DestinationPath fiori-ai-logs.zip

# Compress entire generated project
Compress-Archive -Path .\generated-app -DestinationPath generated-app.zip
```

**STEP**: 6 — What to attach to a support ticket

**DESCRIPTION**: For generation failures: attach the fiori-ai logs (Output content and .fiori-ai folder logs). For generated-app behavior issues: attach a .zip of the entire generated project (include the .fiori-ai folder).

**LANGUAGE**: plaintext

**CODE**:
```plaintext
Support attachment checklist:
- For generation failures:
  - "SAP Fiori tools - AI" Output log (copy text)
  - /path/to/generated-app/.fiori-ai/*.log (zip and attach)
- For generated-app runtime or behavior issues:
  - Zip the entire generated project (include .fiori-ai)
  - Attach generated-app.zip
```
--------------------------------

**TITLE**: Working with an Adaptation Project (SAP Fiori / UI5)

**INTRODUCTION**: Practical, code-focused guide to set up and work with a local UI5 "adaptation project" for Fiori apps. Covers project skeleton, UI5 tooling config, minimal app files, a changes folder for UI5 flexibility artifacts, and scripts to run and build. Use this to develop, test, and version runtime UI adaptations (changes) locally before integrating with a backend or deployment pipeline.

**TAGS**: fiori-tools, ui5, sapui5, openui5, ui5-cli, runtime-adaptation, sap.ui.fl

**STEP**: 1 — Initialize project and install UI5 CLI

**DESCRIPTION**: Create a new npm project and install @ui5/cli as a dev dependency. Add npm scripts to serve and build the UI5 app.

**LANGUAGE**: bash, JSON

**CODE**:
```bash
# create project folder and initialize
mkdir my-adaptation-project
cd my-adaptation-project
npm init -y

# install UI5 CLI as dev dependency
npm install --save-dev @ui5/cli
```

```json
// package.json (important parts)
{
  "name": "my-adaptation-project",
  "version": "0.0.1",
  "scripts": {
    "start": "ui5 serve --config=ui5.yaml -a index.html -p 8080",
    "build": "ui5 build --config=ui5.yaml --clean-dest"
  },
  "devDependencies": {
    "@ui5/cli": "^3.4.0"
  }
}
```

**STEP**: 2 — Add ui5.yaml UI5 tooling configuration

**DESCRIPTION**: Provide the ui5.yaml config that defines the project type, webapp folder and a local server. This lets ui5-cli serve and build the app.

**LANGUAGE**: YAML

**CODE**:
```yaml
# ui5.yaml
specVersion: '2.5'
metadata:
  name: my.adaptation.project
type: application
framework:
  name: OpenUI5
  version: "1.106.0"   # choose appropriate UI5/SAPUI5 version for your environment
resourceRoots:
  my/adaptation/project: webapp
server:
  customMiddleware:
    - name: ui5-middleware-simpleproxy
      afterMiddleware: compression
      mountPath: /sap
```

**STEP**: 3 — Create minimal webapp skeleton (index.html, Component.js)

**DESCRIPTION**: Add a minimal UI5 bootstrapping index.html and a Component.js to make the app startable by ui5 serve.

**LANGUAGE**: HTML, JavaScript

**CODE**:
```html
<!-- webapp/index.html -->
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Adaptation Project</title>
    <script
      id="sap-ui-bootstrap"
      src="https://openui5.hana.ondemand.com/resources/sap-ui-core.js"
      data-sap-ui-libs="sap.m"
      data-sap-ui-theme="sap_fiori_3"
      data-sap-ui-resourceroots='{"my.adaptation.project": "./"}'>
    </script>
    <script>
      sap.ui.getCore().attachInit(function () {
        new sap.ui.core.ComponentContainer({
          name: "my.adaptation.project",
          settings: { id: "myAdaptProject" },
          height: "100%"
        }).placeAt("content");
      });
    </script>
  </head>
  <body class="sapUiBody" id="content"></body>
</html>
```

```javascript
// webapp/Component.js
sap.ui.define(["sap/ui/core/UIComponent"], function (UIComponent) {
  "use strict";
  return UIComponent.extend("my.adaptation.project.Component", {
    metadata: {
      manifest: "json"
    },
    init: function () {
      UIComponent.prototype.init.apply(this, arguments);
    }
  });
});
```

**STEP**: 4 — Add manifest.json (app metadata and UI5 dependencies)

**DESCRIPTION**: Provide manifest.json with basic sap.app and sap.ui5 sections so the component loads and UI5 libs are known. This file is also where flexibility-related settings can be referenced.

**LANGUAGE**: JSON

**CODE**:
```json
// webapp/manifest.json (minimal)
{
  "sap.app": {
    "id": "my.adaptation.project",
    "type": "application",
    "i18n": "i18n/i18n.properties",
    "applicationVersion": {
      "version": "1.0.0"
    }
  },
  "sap.ui5": {
    "dependencies": {
      "minUI5Version": "1.60.0",
      "libs": {
        "sap.m": {}
      }
    },
    "rootView": {
      "viewName": "my.adaptation.project.view.App",
      "type": "XML",
      "id": "app"
    },
    "models": {}
  }
}
```

**STEP**: 5 — Add views and basic UI (App.view.xml)

**DESCRIPTION**: Create a small root view that you can adapt during runtime. Use stable IDs for controls you plan to target with UI adaptations (changes).

**LANGUAGE**: XML

**CODE**:
```xml
<!-- webapp/view/App.view.xml -->
<mvc:View controllerName="my.adaptation.project.controller.App"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m">
  <App id="appRoot">
    <Page id="mainPage" title="Adaptation Demo">
      <content>
        <Button id="btnHello" text="Say Hello" press="onPress" />
      </content>
    </Page>
  </App>
</mvc:View>
```

**STEP**: 6 — Create controller stub

**DESCRIPTION**: Minimal controller to handle simple interaction; keeps project runnable.

**LANGUAGE**: JavaScript

**CODE**:
```javascript
// webapp/controller/App.controller.js
sap.ui.define(["sap/ui/core/mvc/Controller", "sap/m/MessageToast"],
  function (Controller, MessageToast) {
    "use strict";
    return Controller.extend("my.adaptation.project.controller.App", {
      onPress: function () {
        MessageToast.show("Hello from adaptation project");
      }
    });
  }
);
```

**STEP**: 7 — Add a changes folder for UI5 flexibility artifacts

**DESCRIPTION**: Create webapp/changes and include change JSON artifacts that the UI5 runtime (sap.ui.fl) can load. These files represent persisted adaptations. Use stable IDs and fill placeholders depending on the change created by the adaptation tooling or RTA.

**LANGUAGE**: JSON

**CODE**:
```json
// webapp/changes/change.myFirstChange.json
{
  "fileType": "change",
  "changeType": "<CHANGE_TYPE>",                // e.g. "propertyChange", "addSimpleFormElement", "moveControls", etc.
  "reference": "my.adaptation.project",
  "packageName": "$TMP",
  "creation": "2025-01-01T00:00:00.000Z",
  "selector": {
    "id": "appRoot--btnHello",
    "idIsLocal": true
  },
  "content": {
    "property": "text",
    "newValue": "Hello (adapted)"
  },
  "support": {
    "generator": "manual",
    "source": "local-adaptation-project"
  },
  "layer": "CUSTOMER"
}
```

Note: Replace <CHANGE_TYPE> and other placeholders with the actual change type and content produced by your adaptation tooling (Fiori Tools, RTA, or backend change creation APIs). UI5 runtime expects specific shapes per changeType.

**STEP**: 8 — Run locally and verify adaptations

**DESCRIPTION**: Start the local server and open the app. UI5 will load changes from webapp/changes if the app is configured to consume local change files (default ui5 serve behavior). Use browser devtools to check that controls have the adapted properties.

**LANGUAGE**: bash

**CODE**:
```bash
# start local server
npm start

# open in browser:
# http://localhost:8080/index.html
```

**STEP**: 9 — Build for deployment

**DESCRIPTION**: Use ui5 build to create a distribution folder (dist) containing built artifacts. This output can then be deployed to your test system, used for backend adaptation import, or packaged into an adaptation transport.

**LANGUAGE**: bash

**CODE**:
```bash
# produce a build in ./dist
npm run build

# inspect dist/webapp/*
```

**STEP**: 10 — Integration notes & recommended workflow

**DESCRIPTION**: Practical recommendations for using an adaptation project in a team and CI:
- Keep webapp/changes under source control (git) to version UI adaptations alongside code.
- Generate change files using official tooling (Fiori Tools, RTA) where possible to ensure correct changeType and shape.
- For backend persistence (ABAP or BTP), export/convert the change artifacts according to your transport and FLP hosting workflow.
- Use stable control IDs in views (id or localId) to make change selectors robust.
- When testing, verify changes are applied in the same layer (CUSTOMER / VENDOR / USER) you expect in production.

**LANGUAGE**: text

**CODE**:
```text
Project file summary:
- package.json                (npm scripts & devDependencies)
- ui5.yaml                    (UI5 tooling config)
- webapp/index.html
- webapp/Component.js
- webapp/manifest.json
- webapp/view/App.view.xml
- webapp/controller/App.controller.js
- webapp/changes/*.json       (flexibility change artifacts)
- dist/                       (output after `npm run build`)
```

--------------------------------
