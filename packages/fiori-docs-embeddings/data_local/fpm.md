
--------------------------------

**TITLE**: Upload Table

**INTRODUCTION**: The Table building block provides a built-in upload functionality that allows users to upload files to the server.

**TAGS**: upload table, MediaResource, Attachments, files, documents

**STEP**: 1) Property

**DESCRIPTION**: The entity type must have an Edm.Stream type property that is used to store the uploaded file.

**LANGUAGE**: CDS

**CODE**:
```cds
namespace sap.fe.test;

@title           : 'Stream Type'
@Core.IsMediaType: true
type MediaType : String;

@title         : 'Stream Content'
@Core.MediaType: 'application/octet-stream'
type Stream    : LargeBinary;

service JestService {
  @odata.draft.enabled

  entity Attachments {
    key ID          : UUID;

        @Core.MediaType                  : file_type
        @Core.AcceptableMediaTypes       : [
          'image/jpg',
          'image/jpeg',
          'image/png'
        ]
        @Core.ContentDisposition.Filename: file_name
        @title                           : 'Attachment'
        file        : Stream;
        file_name   : String(120);

        @title                           : 'Attachment Type'
        file_type   : MediaType;

        @readonly
        @title                           : 'Uploaded by'
        @cds.on.insert                   : $user
        uploaded_by : String(120);

        @readonly
        @title                           : 'Uploaded on'
        @cds.on.insert                   : $now
        uploaded_on : DateTime;

        @title                           : 'Note'
        note        : String(120);

        isDeletable : Boolean;
  }

  annotate Attachments with
  @(UI.LineItem: [
    {
      $Type             : 'UI.DataField',
      @HTML5.CssDefaults: {width: '15em'},
      Value             : file,
    },
    {
      $Type: 'UI.DataField',
      Value: note,
    },
    {
      $Type: 'UI.DataField',
      Value: uploaded_by
    },
    {
      $Type: 'UI.DataField',
      Value: uploaded_on,
    }
  ])

  @(UI.MediaResource: {Stream: file})
  @(Capabilities: {DeleteRestrictions: {Deletable: isDeletable}})
  @(UI.HeaderInfo: {TypeNamePlural: 'Documents'})
}
```

**LANGUAGE**: XML

**CODE**:
```xml
<Schema>
	<EntityType Name="Attachments">
		<Property Name="file" Type="Edm.Stream" />
		<Property Name="file_name" Type="Edm.String" MaxLength="120" />
		<Property Name="file_type" Type="Edm.String" />
	</EntityType>
	<Annotations Target="Namespace.Attachments/file">
		<Annotation Term="Core.MediaType" Path="file_type" />
		<Annotation Term="Core.AcceptableMediaTypes">
			<Collection>
				<String>image/jpg</String>
				<String>image/jpeg</String>
				<String>image/png</String>
			</Collection>
		</Annotation>
		<Annotation Term="Core.ContentDisposition">
			<Record Type="Core.ContentDispositionType">
				<PropertyValue Property="Filename" Path="file_name" />
			</Record>
		</Annotation>
		<Annotation Term="Common.Label" String="Attachment" />
	</Annotations>
	<Annotations Target="Namespace.Attachments/file_type">
		<Annotation Term="Core.IsMediaType" Bool="true" />
		<Annotation Term="Common.Label" String="Attachment Type" />
	</Annotations>
</Schema>
```

**LANGUAGE**: ABAP

**CODE**:
```abap
@AbapCatalog.sqlViewName: 'ZATTACHMENTS'
@AbapCatalog.compiler.compareFilter: true
@AbapCatalog.preserveKey: true
@AccessControl.authorizationCheck: #CHECK
@EndUserText.label: 'Attachments'
@Metadata.allowExtensions: true
define root view entity Attachments as select from attachments_db {
    @EndUserText.label: 'ID'
    key ID,
    
    @Semantics.largeObject: {
        mimeType: 'file_type',
        fileName: 'file_name',
        acceptableMimeTypes: ['image/jpg', 'image/jpeg', 'image/png']
    }
    @EndUserText.label: 'Attachment'
    file,
    
    @EndUserText.label: 'Attachment Name'
    file_name,
    
    @EndUserText.label: 'Attachment Type'
    file_type,
    
    @EndUserText.label: 'Uploaded by'
    @Semantics.user.createdBy: true
    uploaded_by,
    
    @EndUserText.label: 'Uploaded on'
    @Semantics.systemDateTime.createdAt: true
    uploaded_on,
    
    @EndUserText.label: 'Note'
    note,
    
    isDeletable
}

@Metadata.layer: #CORE
@UI: {
  headerInfo: {
    typeName: 'Document',
    typeNamePlural: 'Documents'
  }
}
annotate view Attachments with {
    @UI.lineItem: [
        { position: 10, type: #STANDARD, importance: #HIGH },
        { position: 20, type: #STANDARD },
        { position: 30, type: #STANDARD },
        { position: 40, type: #STANDARD }
    ]
    @UI.identification: [
        { position: 10, type: #STANDARD, importance: #HIGH },
        { position: 20, type: #STANDARD },
        { position: 30, type: #STANDARD },
        { position: 40, type: #STANDARD }
    ]
    file;
    note;
    uploaded_by;
    uploaded_on;

    @UI.hidden: true
    isDeletable;
}
```

**STEP**: 2) Line Items

**DESCRIPTION**: The UI.LineItem annotation must contain a reference to the Edm.Stream type property that is used to store the uploaded file.

**LANGUAGE**: CDS

**CODE**:
```cds
namespace sap.fe.test;

@title           : 'Stream Type'
@Core.IsMediaType: true
type MediaType : String;

@title         : 'Stream Content'
@Core.MediaType: 'application/octet-stream'
type Stream    : LargeBinary;

service JestService {
  @odata.draft.enabled

  entity Attachments {
    key ID          : UUID;

        @Core.MediaType                  : file_type
        @Core.AcceptableMediaTypes       : [
          'image/jpg',
          'image/jpeg',
          'image/png'
        ]
        @Core.ContentDisposition.Filename: file_name
        @title                           : 'Attachment'
        file        : Stream;
        file_name   : String(120);

        @title                           : 'Attachment Type'
        file_type   : MediaType;

        @readonly
        @title                           : 'Uploaded by'
        @cds.on.insert                   : $user
        uploaded_by : String(120);

        @readonly
        @title                           : 'Uploaded on'
        @cds.on.insert                   : $now
        uploaded_on : DateTime;

        @title                           : 'Note'
        note        : String(120);

        isDeletable : Boolean;
  }

  annotate Attachments with
  @(UI.LineItem: [
    {
      $Type             : 'UI.DataField',
      @HTML5.CssDefaults: {width: '15em'},
      Value             : file,
    },
    {
      $Type: 'UI.DataField',
      Value: note,
    },
    {
      $Type: 'UI.DataField',
      Value: uploaded_by
    },
    {
      $Type: 'UI.DataField',
      Value: uploaded_on,
    }
  ])

  @(UI.MediaResource: {Stream: file})
  @(Capabilities: {DeleteRestrictions: {Deletable: isDeletable}})
  @(UI.HeaderInfo: {TypeNamePlural: 'Documents'})
}
```

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.LineItem">
	<Collection>
		<Record Type="UI.DataField">
			<Annotation Term="HTML5.CssDefaults">
				<Record Type="HTML5.CssDefaultsType">
					<PropertyValue Property="width" String="15em" />
				</Record>
			</Annotation>
			<PropertyValue Property="Value" Path="file" />
		</Record>
		<Record Type="UI.DataField">
			<PropertyValue Property="Value" Path="note" />
		</Record>
		<Record Type="UI.DataField">
			<PropertyValue Property="Value" Path="uploaded_by" />
		</Record>
		<Record Type="UI.DataField">
			<PropertyValue Property="Value" Path="uploaded_on" />
		</Record>
	</Collection>
</Annotation>
```

**STEP**: 3) Media Resource

**DESCRIPTION**: The entity type must have the UI.MediaResource annotation with the Stream property referencing the Edm.Stream type property that is used to store the uploaded file.

**LANGUAGE**: CDS

**CODE**:
```cds
namespace sap.fe.test;

@title           : 'Stream Type'
@Core.IsMediaType: true
type MediaType : String;

@title         : 'Stream Content'
@Core.MediaType: 'application/octet-stream'
type Stream    : LargeBinary;

service JestService {
  @odata.draft.enabled

  entity Attachments {
    key ID          : UUID;

        @Core.MediaType                  : file_type
        @Core.AcceptableMediaTypes       : [
          'image/jpg',
          'image/jpeg',
          'image/png'
        ]
        @Core.ContentDisposition.Filename: file_name
        @title                           : 'Attachment'
        file        : Stream;
        file_name   : String(120);

        @title                           : 'Attachment Type'
        file_type   : MediaType;

        @readonly
        @title                           : 'Uploaded by'
        @cds.on.insert                   : $user
        uploaded_by : String(120);

        @readonly
        @title                           : 'Uploaded on'
        @cds.on.insert                   : $now
        uploaded_on : DateTime;

        @title                           : 'Note'
        note        : String(120);

        isDeletable : Boolean;
  }

  annotate Attachments with
  @(UI.LineItem: [
    {
      $Type             : 'UI.DataField',
      @HTML5.CssDefaults: {width: '15em'},
      Value             : file,
    },
    {
      $Type: 'UI.DataField',
      Value: note,
    },
    {
      $Type: 'UI.DataField',
      Value: uploaded_by
    },
    {
      $Type: 'UI.DataField',
      Value: uploaded_on,
    }
  ])

  @(UI.MediaResource: {Stream: file})
  @(Capabilities: {DeleteRestrictions: {Deletable: isDeletable}})
  @(UI.HeaderInfo: {TypeNamePlural: 'Documents'})
}
```

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="Service.RootEntity">
	<Annotation Term="UI.MediaResource">
		<Record Type="UI.MediaResourceType">
			<PropertyValue Property="Stream" Path="file" />
		</Record>
	</Annotation>
</Annotations>
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: Sample.fragment.xml

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<macros:Table metaPath="@com.sap.vocabularies.UI.v1.LineItem" id="LineItemTableUpload" class="sapUiSmallNegativeMarginBeginEnd" />
</core:FragmentDefinition>

```

--------------------------------

**TITLE**: Draft Validation

**INTRODUCTION**: When editing an Object Page, pressing 'Enter' in a field can trigger backend validation: depending on the entity and annotations, SAP Fiori elements may execute global SideEffects or a PreparationAction to fetch draft-related messages immediately.

**TAGS**: draft validation, side effects, PrepareAction, back-end messages, table, validation

**STEP**: Defining Global Side Effects

**DESCRIPTION**: Global side effects are those side effects that are defined without any source properties or source entities. Global side effects can be annotated under each entity separately.

**LANGUAGE**: CDS

**CODE**:
```cds
type sapmessage : {
  code            : String(10) not null;
  message         : String(100);
  numericSeverity : Integer;
  transition      : Boolean default true;
  target          : String(200) not null;
  longtextUrl     : String(200) not null;
};

service Service {
  @odata.draft.enabled
  @Capabilities.DeleteRestrictions.Deletable: false
  @Common.Messages                          : SAP_Message
  entity RootEntity {
    key ID            :      Integer @title: 'Identifier';
        TitleProperty :      String  @title: 'Title';
        SAP_Message   : many sapmessage;
        items         :      Composition of many ChildEntityWithSE
                               on items.Parent = $self;
        items2        :      Composition of many ChildEntityWithoutSE
                               on items2.Parent = $self;
  }

  @Common.Messages                     : SAP_Message
  @Common.SideEffects #globalValidation: {TargetProperties: ['SAP_Message']}
  entity ChildEntityWithSE {
    key ID          :      Integer @title: 'Item Identifier';
        item        :      String  @title: 'Press Enter in the Field';
        SAP_Message : many sapmessage;
        Parent      :      Association to RootEntity;
  } actions {
    action generateMessage();
  }

  entity ChildEntityWithoutSE {
    key ID     : Integer @title: 'Item Identifier';
        item   : String  @title: 'Press Enter in the Field';
        Parent : Association to RootEntity;
  };
}

annotate Service.ChildEntityWithSE with @UI.LineItem: [
  {
    $Type : 'UI.DataFieldForAction',
    Label : 'Generate Message',
    Action: 'Service.generateMessage'
  },
  {Value: ID},
  {Value: item}
];

annotate Service.ChildEntityWithoutSE with @UI.LineItem: [
  {Value: ID},
  {Value: item}
];
```

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="YourEntity">
	<Annotation Term="Common.Messages" PropertyPath="SAP_Message" />
	<Annotation Term="Common.SideEffects" Qualifier="globalValidation">
		<Record>
			<PropertyValue Property="TargetProperties">
				<Collection>
					<PropertyPath>SAP_Message</PropertyPath>
				</Collection>
			</PropertyValue>
		</Record>
	</Annotation>
</Annotations>
```

**LANGUAGE**: ABAP

**CODE**:
```abap
@Metadata.layer: #CORE
annotate view Z_C_CHILDENTITYWITHSE with {
  @UI.lineItem: [
    { position: 10, type: #FOR_ACTION, dataAction: 'generateMessage', label: 'Generate Message' },
    { position: 20 },
    { position: 30 }
  ]
  ID;

  @UI.lineItem: [{ position: 30 }]
  item;
}

@Metadata.layer: #CORE
annotate view Z_C_CHILDENTITYWITHOUTSE with {
  @UI.lineItem: [{ position: 10 }]
  ID;

  @UI.lineItem: [{ position: 20 }]
  item;
}
```

**STEP**: Fallback without Global Side Effect

**DESCRIPTION**: If Enter is pressed on a control bound to an entity without a global side effect, SAP Fiori elements checks the parent entity for side effects; if none are found, it triggers the draft prepare action and retrieves messages if these are annotated.

--------------------------------

**TITLE**: Side Effects

**INTRODUCTION**: No introduction

**TAGS**: side effects, action, TriggerAction, CheckBox, Core.OperationAvailable, value help, invalidate cache

**STEP**: 1.) Side Effect with Single Source Property

**DESCRIPTION**: If you define one source property, the side effect request is sent immediately after the property was changed.

**STEP**: 2.) Side Effect with Trigger Action

**DESCRIPTION**: If you define an additional trigger action, it is always issued before the GET request for 'TargetProperties' and/or 'TargetEntities' defined with the side effect. The action is only called when the side effect source property is changed.

**STEP**: 3.) Side Effect with Multiple Source Properties

**DESCRIPTION**: By configuring a side effect with multiple source properties, a virtual field group is defined. The side effect is only requested when any of the source properties are changed and the focus leaves the virtual field group.

**STEP**: 4.) Side Effect on a Checkbox

**DESCRIPTION**: Properties of type 'Boolean' are displayed as a checkbox on the UI. By defining a side effect with the Boolean property as the source property, the side effect is triggered immediately when the checkbox is selected.

**STEP**: 5.) Side Effect on a Source Entity

**DESCRIPTION**: You can define one or several entity paths in the side effect annotation property 'SourceEntities'. An empty 'SourceEntities' path implies the annotated entity itself.

**STEP**: 6.) Side Effect on a Bound Action (with Operation Control)

**DESCRIPTION**: If an action applies changes to an entity, these changes are only reflected on the UI after adding a side effect annotation to that action.

**STEP**: 7.) Side Effect on an Unbound Action

**DESCRIPTION**: An unbound action can have side effects annotated on it. As the action is not bound to any context, the underlying side effects definition has to use absolute paths.

**STEP**: 8.) Side Effect for Refreshing Data of an Entity for Invalidating a Cached Value Help

**DESCRIPTION**: You can define one or several navigation property paths and/or absolute paths for the side effect property 'TargetEntities'. Value lists are cached during runtime for better performance. They can be refreshed by defining an absolute side effect with the value list collection as the target.

**STEP**: 9.) Side Effect with an Absolute Target Entity Path

**DESCRIPTION**: Some entities requiring a complete refresh on the UI might not be referred by an association. These entities can be addressed in the side effect annotation property 'TargetEntities' by defining an absolute path.

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  cuid,
  managed,
  Currency
} from '@sap/cds/common';

namespace sap.fe.core;

type Amount      : Decimal(9, 2) @(Validation: {Minimum: 0});

type complexType : {
  number : Integer  @Core.Computed  @title: 'Current Number';
  prime  : Boolean  @Core.Computed  @title: 'Prime Number?'
};

@odata.draft.enabled
entity RootEntity {
  key ID                    : Integer  @Core.Computed                 @title               : 'Identifier';
      sourceProperty1       : String   @title: 'Source Property 1';
      sourceProperty2       : String   @title: 'Source Property 2';
      sourceProperty3a      : String   @title: 'Source Property 3a';
      sourceProperty3b      : String   @title: 'Source Property 3b';
      otherProperty3c       : String   @title: 'Other Property 3c';
      sourceProperty4       : Boolean  @title: 'Boolean Source Property';
      targetProperty1a      : String   @title: 'Target Property 1a'   @readonly;
      targetProperty1b      : String   @title: 'Target Property 1b';
      targetProperty2       : String   @title: 'Target Property 2'    @readonly;
      targetProperty3       : String   @title: 'Target Property 3'    @readonly;
      targetProperty4       : String   @title: 'Target Property 4';
      complexProperty       : complexType;
      totalAmount           : Amount   @title: 'Total Amount'         @Measures.ISOCurrency: currency_code             @readonly;
      OperationAvailable    : Boolean  @title: 'Operation Available';
      currency              : Currency @readonly;
      fieldControlProperty1 : Integer  @UI.Hidden;
      fieldControlProperty2 : Integer  @UI.Hidden;
      property1             : String   @title: 'Property 1';
      property2             : String   @title: 'Property 2';
      property3             : String   @title: 'Property 3';
      BusinessPartnerID     : String   @title: 'Business Partner ID'  @Common.Text         : businessPartner.FullName  @Common.TextArrangement: #TextFirst;
      items                 : Association to many ChildEntity
                                on items.Parent = $self;
      businessPartner       : Association to one BusinessPartnerAddress
                                on businessPartner.BusinessPartner = BusinessPartnerID;
}

entity ChildEntity {
  key ID       : Integer  @title: 'Item Identifier';
      item     : String   @title: 'Item';

      @(
        title               : 'Price',
        Measures.ISOCurrency: currency_code
      )
      price    : Amount;
      currency : Currency @readonly;
      Parent   : Association to RootEntity;
}

@readonly
entity BusinessPartnerAddress {
  key BusinessPartner : String @title: 'Business Partner';
      FullName        : String @title: 'Name';
      CityName        : String @title: 'City';
      Country         : String @title: 'Country';
      PostalCode      : String @title: 'Postal Code';
      StreetName      : String @title: 'Street Name';
      HouseNumber     : String @title: 'House Number';
};

@Capabilities.SearchRestrictions.Searchable: false
entity AbsoluteEntity {
  key ID        : Integer  @Core.Computed  @title: 'Round';
      TimeStamp : DateTime @UI.Hidden;
      Duration  : String   @Core.Computed  @title: 'Duration';
}

@odata.singleton
entity EntitiesSingleton {
  BooleanProperty : Boolean @Core.Computed;
}


annotate RootEntity with
@(UI: {HeaderInfo: {
  TypeName      : 'Root Entity',
  TypeNamePlural: 'Root Entities',
}});

//Sample 1
annotate RootEntity with @(Common: {SideEffects #singleSourceProperty: {
  SourceProperties: [sourceProperty1],
  TargetProperties: [
    'targetProperty1a',
    'fieldControlProperty1'
  ]
}}) {
  targetProperty1b @Common.FieldControl: fieldControlProperty1;
};

//Sample 2
annotate RootEntity with @(Common: {SideEffects #triggerActionProperty: {
  SourceProperties: [sourceProperty2],
  TargetProperties: ['targetProperty2'],
  TriggerAction   : 'sap.fe.core.Service.sideEffectTriggerAction'
}});

annotate RootEntity with @(
  UI    : {
    FieldGroup #SourceProperties: {Data: [
      {Value: sourceProperty3a},
      {Value: sourceProperty3b},
      {Value: otherProperty3c}
    ]},
    FieldGroup #TargetProperty  : {Data: [{Value: targetProperty3}]},
    Facets                      : [
      {
        $Type : 'UI.ReferenceFacet',
        ID    : 'FormSource',
        Target: '@UI.FieldGroup#SourceProperties',
      },
      {
        $Type : 'UI.ReferenceFacet',
        ID    : 'FormTarget',
        Target: '@UI.FieldGroup#TargetProperty',
      }
    ],
    LineItem #sample7           : [
      {
        $Type             : 'UI.DataFieldForAction',
        Label             : 'Table Refresh',
        Action            : 'sap.fe.core.Service.EntityContainer/unBoundAction',
        InvocationGrouping: #ChangeSet
      },
      {
        $Type: 'UI.DataField',
        Value: property1,
      },
      {
        $Type: 'UI.DataField',
        Value: property2
      },
      {
        $Type: 'UI.DataField',
        Value: property3
      }
    ],
  },

  //Sample 3
  Common: {SideEffects #multiSourceProperties: {
    SourceProperties: [
      sourceProperty3a,
      sourceProperty3b
    ],
    TargetProperties: ['targetProperty3'],
    TriggerAction   : 'sap.fe.core.Service.sideEffectTriggerActionMultiSources'
  }}
);

//Sample 4
annotate RootEntity with @(Common: {SideEffects #booleanSourceProperties: {
  SourceProperties: [sourceProperty4],
  TargetProperties: ['fieldControlProperty2']
}}) {
  targetProperty4 @Common.FieldControl: fieldControlProperty2;
};

//Sample 5
annotate RootEntity with @(Common: {SideEffects #sourceEntity: {
  SourceEntities  : [items],
  TargetProperties: ['totalAmount']
}});

annotate ChildEntity with @(
  Capabilities.DeleteRestrictions.Deletable: true,
  UI                                       : {LineItem #sample5: [
    {
      $Type: 'UI.DataField',
      Value: item
    },
    {
      $Type                : 'UI.DataField',
      Value                : price,
      ![@HTML5.CssDefaults]: {width: '15em'}
    }
  ]}
);

annotate RootEntity with @(UI: {
  FieldGroup #sample6a      : {
    $Type: 'UI.FieldGroupType',
    Label: 'Complex Property Fields',
    Data : [
      {
        $Type : 'UI.DataFieldForAction',
        Label : 'Increase Number',
        Action: 'sap.fe.core.Service.increaseAndCheckPrime',
      },
      {
        $Type: 'UI.DataField',
        Value: OperationAvailable,
      }
    ],
  },
  Facets #OperationAvailable: [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#sample6a',
  }, ],
  FieldGroup #sample6b      : {
    $Type: 'UI.FieldGroupType',
    Label: 'Complex Property Fields',
    Data : [
      {
        $Type: 'UI.DataField',
        Value: complexProperty_number,
      },
      {
        $Type: 'UI.DataField',
        Value: complexProperty_prime,
      }
    ],
  },
  Facets #complexProperty   : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#sample6b',
  }, ],
});

annotate RootEntity with @(
  UI.Facets #BusinessPartnerAddress  : [{
    $Type : 'UI.ReferenceFacet',
    Target: 'businessPartner/@UI.FieldGroup#BusinessPartnerAddress'
  }],
  Common.SideEffects #BusinessPartner: {
    SourceProperties: [BusinessPartnerID],
    TargetEntities  : [businessPartner]
  }
) {
  @Common.ValueListMapping: {
    Label         : 'Business Partner',
    CollectionPath: 'BusinessPartnerAddress',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: BusinessPartnerID,
        ValueListProperty: 'BusinessPartner',
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'FullName',
      },
    ],
  }
  @Common.ValueListWithFixedValues
  @Common.Text            : businessPartner.FullName
  @Common.TextArrangement : #TextFirst
  BusinessPartnerID
};

annotate BusinessPartnerAddress with @(UI: {FieldGroup #BusinessPartnerAddress: {
  $Type: 'UI.FieldGroupType',
  Data : [
    {
      $Type: 'UI.DataField',
      Value: CityName
    },
    {
      $Type: 'UI.DataField',
      Value: PostalCode
    },
    {
      $Type: 'UI.DataField',
      Value: StreetName
    },
    {
      $Type: 'UI.DataField',
      Value: HouseNumber
    },
    {
      $Type: 'UI.DataField',
      Value: Country
    }
  ],
}});

//sample 8 (additional action based side effects see further below)
annotate AbsoluteEntity with @(
  Capabilities.DeleteRestrictions.Deletable: false,
  UI.LineItem                              : [
    {
      $Type: 'UI.DataField',
      Value: ID,
    },
    {
      $Type: 'UI.DataField',
      Value: Duration
    }
  ]
);

//actions and corresponding side effects for different samples
service Service {
  //Sample 7
  @Common.SideEffects: {TargetEntities: ['/sap.fe.core.Service.EntityContainer/RootEntity']}
  action unBoundAction();

  entity RootEntity             as projection on core.RootEntity actions {

                                     action sideEffectTriggerAction();
                                     action sideEffectTriggerActionMultiSources();

                                     //Sample 6
                                     @(
                                       Common.SideEffects             : {TargetProperties: ['_it/*']},
                                       cds.odata.bindingparameter.name: '_it',
                                       Core.OperationAvailable        : _it.OperationAvailable
                                     )
                                     action increaseAndCheckPrime();

                                     //Sample 8
                                     @(
                                       Common.SideEffects #InvalidateCachedValueHelp: {
                                         TargetProperties: ['_it/BusinessPartnerID'],
                                         TargetEntities  : ['/sap.fe.core.Service.EntityContainer/BusinessPartnerAddress']
                                       },
                                       cds.odata.bindingparameter.name              : '_it'
                                     )
                                     action deleteBusinessPartner();

                                     //Sample 9
                                     @(
                                       Common.SideEffects             : {
                                         TargetProperties: ['/sap.fe.core.Service.EntityContainer/EntitiesSingleton/BooleanProperty'],
                                         TargetEntities  : ['/sap.fe.core.Service.EntityContainer/AbsoluteEntity']
                                       },
                                       cds.odata.bindingparameter.name: '_it'
                                     )
                                     action addRound();
                                     @(
                                       Common.SideEffects             : {
                                         TargetProperties: ['/sap.fe.core.Service.EntityContainer/EntitiesSingleton/BooleanProperty'],
                                         TargetEntities  : ['/sap.fe.core.Service.EntityContainer/AbsoluteEntity']
                                       },
                                       cds.odata.bindingparameter.name: '_it'
                                     )
                                     action stopRound();
                                     @(
                                       Common.SideEffects             : {
                                         TargetProperties: ['/sap.fe.core.Service.EntityContainer/EntitiesSingleton/BooleanProperty'],
                                         TargetEntities  : ['/sap.fe.core.Service.EntityContainer/AbsoluteEntity']
                                       },
                                       cds.odata.bindingparameter.name: '_it'
                                     )
                                     action clearRounds();
                                   };

  entity ChildEntity            as projection on core.ChildEntity;
  entity BusinessPartnerAddress as projection on core.BusinessPartnerAddress;
  entity AbsoluteEntity         as projection on core.AbsoluteEntity;
  entity EntitiesSingleton      as projection on core.EntitiesSingleton;

  entity SideEffectsProperties {
    key Property     : String @title: 'Property';
        PropertyType : String @title: 'Type';
        Description  : String @title: 'Description';
  };

  entity TargetPropertiesSample {
    key TargetProperties : String @title: 'Target Properties';
        Description      : String @title: 'Description';
  }
}

```

**FILE**: metadata.xml

**LANGUAGE**: XML

**CODE**:
```xml
<?xml version="1.0" encoding="utf-8" ?>
<edmx:Edmx Version="4.0" xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx">
	<edmx:Reference Uri="https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Capabilities.V1.xml">
		<edmx:Include Alias="Capabilities" Namespace="Org.OData.Capabilities.V1" />
	</edmx:Reference>
	<edmx:Reference Uri="https://sap.github.io/odata-vocabularies/vocabularies/Common.xml">
		<edmx:Include Alias="Common" Namespace="com.sap.vocabularies.Common.v1" />
	</edmx:Reference>
	<edmx:Reference Uri="https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Core.V1.xml">
		<edmx:Include Alias="Core" Namespace="Org.OData.Core.V1" />
	</edmx:Reference>
	<edmx:Reference Uri="https://sap.github.io/odata-vocabularies/vocabularies/HTML5.xml">
		<edmx:Include Alias="HTML5" Namespace="com.sap.vocabularies.HTML5.v1" />
	</edmx:Reference>
	<edmx:Reference Uri="https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Measures.V1.xml">
		<edmx:Include Alias="Measures" Namespace="Org.OData.Measures.V1" />
	</edmx:Reference>
	<edmx:Reference Uri="https://sap.github.io/odata-vocabularies/vocabularies/UI.xml">
		<edmx:Include Alias="UI" Namespace="com.sap.vocabularies.UI.v1" />
	</edmx:Reference>
	<edmx:Reference Uri="https://oasis-tcs.github.io/odata-vocabularies/vocabularies/Org.OData.Validation.V1.xml">
		<edmx:Include Alias="Validation" Namespace="Org.OData.Validation.V1" />
	</edmx:Reference>
	<edmx:DataServices>
		<Schema Namespace="sap.fe.core.Service" xmlns="http://docs.oasis-open.org/odata/ns/edm">
			<Annotations Target="sap.fe.core.Service.RootEntity">
				<Annotation Term="UI.LineItem" Qualifier="sample7">
					<Collection>
						<Record Type="UI.DataFieldForAction">
							<PropertyValue Property="Label" String="Table Refresh" />
							<PropertyValue Property="Action" String="sap.fe.core.Service.EntityContainer/unBoundAction" />
							<PropertyValue Property="InvocationGrouping" EnumMember="UI.OperationGroupingType/ChangeSet" />
						</Record>
						<Record Type="UI.DataFieldForAction">
							<PropertyValue Property="Label" String="Table Refresh" />
							<PropertyValue Property="Action" String="sap.fe.core.Service.EntityContainer/unBoundAction" />
						</Record>
						<Record Type="UI.DataField">
							<PropertyValue Property="Value" Path="property1" />
						</Record>
						<Record Type="UI.DataField">
							<PropertyValue Property="Value" Path="property2" />
						</Record>
						<Record Type="UI.DataField">
							<PropertyValue Property="Value" Path="property3" />
						</Record>
					</Collection>
				</Annotation>
			</Annotations>
			<EntityContainer Name="EntityContainer">
				<ActionImport Name="unBoundAction" Action="sap.fe.core.Service.unBoundAction" />
				<EntitySet Name="RootEntity" EntityType="sap.fe.core.Service.RootEntity">
					<NavigationPropertyBinding Path="currency" Target="Currencies" />
					<NavigationPropertyBinding Path="items" Target="ChildEntity" />
					<NavigationPropertyBinding Path="businessPartner" Target="BusinessPartnerAddress" />
					<NavigationPropertyBinding Path="SiblingEntity" Target="RootEntity" />
				</EntitySet>
				<EntitySet Name="ChildEntity" EntityType="sap.fe.core.Service.ChildEntity">
					<NavigationPropertyBinding Path="currency" Target="Currencies" />
					<NavigationPropertyBinding Path="Parent" Target="RootEntity" />
				</EntitySet>
				<EntitySet Name="BusinessPartnerAddress" EntityType="sap.fe.core.Service.BusinessPartnerAddress" />
				<EntitySet Name="AbsoluteEntity" EntityType="sap.fe.core.Service.AbsoluteEntity" />
				<Singleton Name="EntitiesSingleton" Type="sap.fe.core.Service.EntitiesSingleton" />
				<EntitySet Name="SideEffectsProperties" EntityType="sap.fe.core.Service.SideEffectsProperties" />
				<EntitySet Name="TargetPropertiesSample" EntityType="sap.fe.core.Service.TargetPropertiesSample" />
				<EntitySet Name="Currencies" EntityType="sap.fe.core.Service.Currencies">
					<NavigationPropertyBinding Path="texts" Target="Currencies_texts" />
					<NavigationPropertyBinding Path="localized" Target="Currencies_texts" />
				</EntitySet>
				<EntitySet Name="Currencies_texts" EntityType="sap.fe.core.Service.Currencies_texts" />
			</EntityContainer>
			<EntityType Name="RootEntity">
				<Key>
					<PropertyRef Name="ID" />
					<PropertyRef Name="IsActiveEntity" />
				</Key>
				<Property Name="ID" Type="Edm.Int32" Nullable="false" />
				<Property Name="sourceProperty1" Type="Edm.String" />
				<Property Name="sourceProperty2" Type="Edm.String" />
				<Property Name="sourceProperty3a" Type="Edm.String" />
				<Property Name="sourceProperty3b" Type="Edm.String" />
				<Property Name="otherProperty3c" Type="Edm.String" />
				<Property Name="sourceProperty4" Type="Edm.Boolean" />
				<Property Name="targetProperty1a" Type="Edm.String" />
				<Property Name="targetProperty1b" Type="Edm.String" />
				<Property Name="targetProperty2" Type="Edm.String" />
				<Property Name="targetProperty3" Type="Edm.String" />
				<Property Name="targetProperty4" Type="Edm.String" />
				<Property Name="complexProperty_number" Type="Edm.Int32" />
				<Property Name="complexProperty_prime" Type="Edm.Boolean" />
				<Property Name="totalAmount" Type="Edm.Decimal" Scale="2" Precision="9" />
				<Property Name="OperationAvailable" Type="Edm.Boolean" />
				<NavigationProperty Name="currency" Type="sap.fe.core.Service.Currencies">
					<ReferentialConstraint Property="currency_code" ReferencedProperty="code" />
				</NavigationProperty>
				<Property Name="currency_code" Type="Edm.String" MaxLength="3" />
				<Property Name="fieldControlProperty1" Type="Edm.Int32" />
				<Property Name="fieldControlProperty2" Type="Edm.Int32" />
				<Property Name="BusinessPartnerID" Type="Edm.String" />
				<NavigationProperty Name="items" Type="Collection(sap.fe.core.Service.ChildEntity)" Partner="Parent" />
				<NavigationProperty Name="businessPartner" Type="sap.fe.core.Service.BusinessPartnerAddress">
					<ReferentialConstraint Property="BusinessPartnerID" ReferencedProperty="BusinessPartner" />
				</NavigationProperty>
				<Property Name="IsActiveEntity" Type="Edm.Boolean" Nullable="false" DefaultValue="true" />
				<Property Name="HasActiveEntity" Type="Edm.Boolean" Nullable="false" DefaultValue="false" />
				<Property Name="HasDraftEntity" Type="Edm.Boolean" Nullable="false" DefaultValue="false" />
				<NavigationProperty
					Name="DraftAdministrativeData"
					Type="sap.fe.core.Service.DraftAdministrativeData"
					ContainsTarget="true"
				/>
				<NavigationProperty Name="SiblingEntity" Type="sap.fe.core.Service.RootEntity" />
			</EntityType>
			<EntityType Name="ChildEntity">
				<Key>
					<PropertyRef Name="ID" />
				</Key>
				<Property Name="ID" Type="Edm.Int32" Nullable="false" />
				<Property Name="item" Type="Edm.String" />
				<Property Name="price" Type="Edm.Decimal" Scale="2" Precision="9" />
				<NavigationProperty Name="currency" Type="sap.fe.core.Service.Currencies">
					<ReferentialConstraint Property="currency_code" ReferencedProperty="code" />
				</NavigationProperty>
				<Property Name="currency_code" Type="Edm.String" MaxLength="3" />
				<NavigationProperty Name="Parent" Type="sap.fe.core.Service.RootEntity" Partner="items">
					<ReferentialConstraint Property="Parent_ID" ReferencedProperty="ID" />
				</NavigationProperty>
				<Property Name="Parent_ID" Type="Edm.Int32" />
			</EntityType>
			<EntityType Name="BusinessPartnerAddress">
				<Key>
					<PropertyRef Name="BusinessPartner" />
				</Key>
				<Property Name="BusinessPartner" Type="Edm.String" Nullable="false" />
				<Property Name="FullName" Type="Edm.String" />
				<Property Name="CityName" Type="Edm.String" />
				<Property Name="Country" Type="Edm.String" />
				<Property Name="PostalCode" Type="Edm.String" />
				<Property Name="StreetName" Type="Edm.String" />
				<Property Name="HouseNumber" Type="Edm.String" />
			</EntityType>
			<EntityType Name="AbsoluteEntity">
				<Key>
					<PropertyRef Name="ID" />
				</Key>
				<Property Name="ID" Type="Edm.Int32" Nullable="false" />
				<Property Name="TimeStamp" Type="Edm.DateTimeOffset" />
				<Property Name="Duration" Type="Edm.String" />
			</EntityType>
			<EntityType Name="EntitiesSingleton">
				<Property Name="BooleanProperty" Type="Edm.Boolean" />
			</EntityType>
			<EntityType Name="SideEffectsProperties">
				<Key>
					<PropertyRef Name="Property" />
				</Key>
				<Property Name="Property" Type="Edm.String" Nullable="false" />
				<Property Name="PropertyType" Type="Edm.String" />
				<Property Name="Description" Type="Edm.String" />
			</EntityType>
			<EntityType Name="TargetPropertiesSample">
				<Key>
					<PropertyRef Name="TargetProperties" />
				</Key>
				<Property Name="TargetProperties" Type="Edm.String" Nullable="false" />
				<Property Name="Description" Type="Edm.String" />
			</EntityType>
			<EntityType Name="Currencies">
				<Key>
					<PropertyRef Name="code" />
				</Key>
				<Property Name="name" Type="Edm.String" MaxLength="255" />
				<Property Name="descr" Type="Edm.String" MaxLength="1000" />
				<Property Name="code" Type="Edm.String" MaxLength="3" Nullable="false" />
				<Property Name="symbol" Type="Edm.String" MaxLength="5" />
				<Property Name="minorUnit" Type="Edm.Int16" />
				<NavigationProperty Name="texts" Type="Collection(sap.fe.core.Service.Currencies_texts)">
					<OnDelete Action="Cascade" />
				</NavigationProperty>
				<NavigationProperty Name="localized" Type="sap.fe.core.Service.Currencies_texts">
					<ReferentialConstraint Property="code" ReferencedProperty="code" />
				</NavigationProperty>
			</EntityType>
			<EntityType Name="DraftAdministrativeData">
				<Key>
					<PropertyRef Name="DraftUUID" />
				</Key>
				<Property Name="DraftUUID" Type="Edm.Guid" Nullable="false" />
				<Property Name="CreationDateTime" Type="Edm.DateTimeOffset" Precision="7" />
				<Property Name="CreatedByUser" Type="Edm.String" MaxLength="256" />
				<Property Name="DraftIsCreatedByMe" Type="Edm.Boolean" />
				<Property Name="LastChangeDateTime" Type="Edm.DateTimeOffset" Precision="7" />
				<Property Name="LastChangedByUser" Type="Edm.String" MaxLength="256" />
				<Property Name="InProcessByUser" Type="Edm.String" MaxLength="256" />
				<Property Name="DraftIsProcessedByMe" Type="Edm.Boolean" />
			</EntityType>
			<EntityType Name="Currencies_texts">
				<Key>
					<PropertyRef Name="locale" />
					<PropertyRef Name="code" />
				</Key>
				<Property Name="locale" Type="Edm.String" MaxLength="14" Nullable="false" />
				<Property Name="name" Type="Edm.String" MaxLength="255" />
				<Property Name="descr" Type="Edm.String" MaxLength="1000" />
				<Property Name="code" Type="Edm.String" MaxLength="3" Nullable="false" />
			</EntityType>
			<Action Name="increaseAndCheckPrime" IsBound="true">
				<Parameter Name="_it" Type="sap.fe.core.Service.RootEntity" />
			</Action>
			<Action Name="addRound" IsBound="true">
				<Parameter Name="_it" Type="sap.fe.core.Service.RootEntity" />
			</Action>
			<Action Name="stopRound" IsBound="true">
				<Parameter Name="_it" Type="sap.fe.core.Service.RootEntity" />
			</Action>
			<Action Name="clearRounds" IsBound="true">
				<Parameter Name="_it" Type="sap.fe.core.Service.RootEntity" />
			</Action>
			<Action Name="sideEffectTriggerAction" IsBound="true">
				<Parameter Name="in" Type="sap.fe.core.Service.RootEntity" />
			</Action>
			<Action Name="sideEffectTriggerActionMultiSources" IsBound="true">
				<Parameter Name="in" Type="sap.fe.core.Service.RootEntity" />
			</Action>
			<Action Name="deleteBusinessPartner" IsBound="true">
				<Parameter Name="_it" Type="sap.fe.core.Service.RootEntity" />
			</Action>
			<Action Name="draftPrepare" IsBound="true" EntitySetPath="in">
				<Parameter Name="in" Type="sap.fe.core.Service.RootEntity" />
				<Parameter Name="SideEffectsQualifier" Type="Edm.String" />
				<ReturnType Type="sap.fe.core.Service.RootEntity" />
			</Action>
			<Action Name="draftActivate" IsBound="true" EntitySetPath="in">
				<Parameter Name="in" Type="sap.fe.core.Service.RootEntity" />
				<ReturnType Type="sap.fe.core.Service.RootEntity" />
			</Action>
			<Action Name="draftEdit" IsBound="true" EntitySetPath="in">
				<Parameter Name="in" Type="sap.fe.core.Service.RootEntity" />
				<Parameter Name="PreserveChanges" Type="Edm.Boolean" />
				<ReturnType Type="sap.fe.core.Service.RootEntity" />
			</Action>
			<Action Name="unBoundAction" IsBound="false" />
			<Annotations Target="sap.fe.core.Service.UnboundAction()">
				<Annotation Term="Common.SideEffects">
					<Record Type="Common.SideEffectsType">
						<PropertyValue Property="TargetEntities">
							<Collection>
								<NavigationPropertyPath>"/sap.fe.core.Service.EntityContainer/RootEntity"</NavigationPropertyPath>
							</Collection>
						</PropertyValue>
					</Record>
				</Annotation>
			</Annotations>
			<Annotations Target="sap.fe.core.Service.RootEntity">
				<Annotation Term="UI.HeaderInfo">
					<Record Type="UI.HeaderInfoType">
						<PropertyValue Property="TypeName" String="Root Entity" />
						<PropertyValue Property="TypeNamePlural" String="Root Entities" />
					</Record>
				</Annotation>
				<Annotation Term="UI.FieldGroup" Qualifier="SourceProperties">
					<Record Type="UI.FieldGroupType">
						<PropertyValue Property="Data">
							<Collection>
								<Record Type="UI.DataField">
									<PropertyValue Property="Value" Path="sourceProperty3a" />
								</Record>
								<Record Type="UI.DataField">
									<PropertyValue Property="Value" Path="sourceProperty3b" />
								</Record>
								<Record Type="UI.DataField">
									<PropertyValue Property="Value" Path="otherProperty3c" />
								</Record>
							</Collection>
						</PropertyValue>
					</Record>
				</Annotation>
				<Annotation Term="UI.FieldGroup" Qualifier="TargetProperty">
					<Record Type="UI.FieldGroupType">
						<PropertyValue Property="Data">
							<Collection>
								<Record Type="UI.DataField">
									<PropertyValue Property="Value" Path="targetProperty3" />
								</Record>
							</Collection>
						</PropertyValue>
					</Record>
				</Annotation>
				<Annotation Term="UI.Facets">
					<Collection>
						<Record Type="UI.ReferenceFacet">
							<PropertyValue Property="ID" String="FormSource" />
							<PropertyValue Property="Target" AnnotationPath="@UI.FieldGroup#SourceProperties" />
						</Record>
						<Record Type="UI.ReferenceFacet">
							<PropertyValue Property="ID" String="FormTarget" />
							<PropertyValue Property="Target" AnnotationPath="@UI.FieldGroup#TargetProperty" />
						</Record>
					</Collection>
				</Annotation>
				<Annotation Term="UI.FieldGroup" Qualifier="sample6a">
					<Record Type="UI.FieldGroupType">
						<PropertyValue Property="Label" String="Complex Property Fields" />
						<PropertyValue Property="Data">
							<Collection>
								<Record Type="UI.DataFieldForAction">
									<PropertyValue Property="Label" String="Increase Number" />
									<PropertyValue Property="Action" String="sap.fe.core.Service.increaseAndCheckPrime" />
								</Record>
								<Record Type="UI.DataField">
									<PropertyValue Property="Value" Path="OperationAvailable" />
								</Record>
							</Collection>
						</PropertyValue>
					</Record>
				</Annotation>
				<Annotation Term="UI.Facets" Qualifier="OperationAvailable">
					<Collection>
						<Record Type="UI.ReferenceFacet">
							<PropertyValue Property="Target" AnnotationPath="@UI.FieldGroup#sample6a" />
						</Record>
					</Collection>
				</Annotation>
				<Annotation Term="UI.FieldGroup" Qualifier="sample6b">
					<Record Type="UI.FieldGroupType">
						<PropertyValue Property="Label" String="Complex Property Fields" />
						<PropertyValue Property="Data">
							<Collection>
								<Record Type="UI.DataField">
									<PropertyValue Property="Value" Path="complexProperty_number" />
								</Record>
								<Record Type="UI.DataField">
									<PropertyValue Property="Value" Path="complexProperty_prime" />
								</Record>
							</Collection>
						</PropertyValue>
					</Record>
				</Annotation>
				<Annotation Term="UI.Facets" Qualifier="complexProperty">
					<Collection>
						<Record Type="UI.ReferenceFacet">
							<PropertyValue Property="Target" AnnotationPath="@UI.FieldGroup#sample6b" />
						</Record>
					</Collection>
				</Annotation>
				<Annotation Term="UI.Facets" Qualifier="BusinessPartnerAddress">
					<Collection>
						<Record Type="UI.ReferenceFacet">
							<PropertyValue Property="Target" AnnotationPath="businessPartner/@UI.FieldGroup#BusinessPartnerAddress" />
						</Record>
					</Collection>
				</Annotation>
				<Annotation Term="Common.SideEffects" Qualifier="singleSourceProperty">
					<Record Type="Common.SideEffectsType">
						<PropertyValue Property="SourceProperties">
							<Collection>
								<PropertyPath>sourceProperty1</PropertyPath>
							</Collection>
						</PropertyValue>
						<PropertyValue Property="TargetProperties">
							<Collection>
								<String>targetProperty1a</String>
								<String>fieldControlProperty1</String>
							</Collection>
						</PropertyValue>
					</Record>
				</Annotation>
				<Annotation Term="Common.SideEffects" Qualifier="triggerActionProperty">
					<Record Type="Common.SideEffectsType">
						<PropertyValue Property="SourceProperties">
							<Collection>
								<PropertyPath>sourceProperty2</PropertyPath>
							</Collection>
						</PropertyValue>
						<PropertyValue Property="TargetProperties">
							<Collection>
								<String>targetProperty2</String>
							</Collection>
						</PropertyValue>
						<PropertyValue Property="TriggerAction" String="sap.fe.core.Service.sideEffectTriggerAction" />
					</Record>
				</Annotation>
				<Annotation Term="Common.SideEffects" Qualifier="multiSourceProperties">
					<Record Type="Common.SideEffectsType">
						<PropertyValue Property="SourceProperties">
							<Collection>
								<PropertyPath>sourceProperty3a</PropertyPath>
								<PropertyPath>sourceProperty3b</PropertyPath>
							</Collection>
						</PropertyValue>
						<PropertyValue Property="TargetProperties">
							<Collection>
								<String>targetProperty3</String>
							</Collection>
						</PropertyValue>
						<PropertyValue Property="TriggerAction" String="sap.fe.core.Service.sideEffectTriggerActionMultiSources" />
					</Record>
				</Annotation>
				<Annotation Term="Common.SideEffects" Qualifier="booleanSourceProperties">
					<Record Type="Common.SideEffectsType">
						<PropertyValue Property="SourceProperties">
							<Collection>
								<PropertyPath>sourceProperty4</PropertyPath>
							</Collection>
						</PropertyValue>
						<PropertyValue Property="TargetProperties">
							<Collection>
								<String>fieldControlProperty2</String>
							</Collection>
						</PropertyValue>
					</Record>
				</Annotation>
				<Annotation Term="Common.SideEffects" Qualifier="sourceEntity">
					<Record Type="Common.SideEffectsType">
						<PropertyValue Property="SourceEntities">
							<Collection>
								<NavigationPropertyPath>items</NavigationPropertyPath>
							</Collection>
						</PropertyValue>
						<PropertyValue Property="TargetProperties">
							<Collection>
								<String>totalAmount</String>
							</Collection>
						</PropertyValue>
					</Record>
				</Annotation>
				<Annotation Term="Common.SideEffects" Qualifier="BusinessPartner">
					<Record Type="Common.SideEffectsType">
						<PropertyValue Property="SourceProperties">
							<Collection>
								<PropertyPath>BusinessPartnerID</PropertyPath>
							</Collection>
						</PropertyValue>
						<PropertyValue Property="TargetEntities">
							<Collection>
								<NavigationPropertyPath>businessPartner</NavigationPropertyPath>
							</Collection>
						</PropertyValue>
					</Record>
				</Annotation>
			</Annotations>
			<Annotations Target="sap.fe.core.Service.EntityContainer/RootEntity">
				<Annotation Term="Common.SideEffects" Qualifier="singleSourceProperty">
					<Record Type="Common.SideEffectsType">
						<PropertyValue Property="SourceProperties">
							<Collection>
								<PropertyPath>sourceProperty1</PropertyPath>
							</Collection>
						</PropertyValue>
						<PropertyValue Property="TargetProperties">
							<Collection>
								<String>targetProperty1a</String>
								<String>fieldControlProperty1</String>
							</Collection>
						</PropertyValue>
					</Record>
				</Annotation>
				<Annotation Term="Common.SideEffects" Qualifier="triggerActionProperty">
					<Record Type="Common.SideEffectsType">
						<PropertyValue Property="SourceProperties">
							<Collection>
								<PropertyPath>sourceProperty2</PropertyPath>
							</Collection>
						</PropertyValue>
						<PropertyValue Property="TargetProperties">
							<Collection>
								<String>targetProperty2</String>
							</Collection>
						</PropertyValue>
						<PropertyValue Property="TriggerAction" String="sap.fe.core.Service.sideEffectTriggerAction" />
					</Record>
				</Annotation>
				<Annotation Term="Common.SideEffects" Qualifier="multiSourceProperties">
					<Record Type="Common.SideEffectsType">
						<PropertyValue Property="SourceProperties">
							<Collection>
								<PropertyPath>sourceProperty3a</PropertyPath>
								<PropertyPath>sourceProperty3b</PropertyPath>
							</Collection>
						</PropertyValue>
						<PropertyValue Property="TargetProperties">
							<Collection>
								<String>targetProperty3</String>
							</Collection>
						</PropertyValue>
						<PropertyValue Property="TriggerAction" String="sap.fe.core.Service.sideEffectTriggerActionMultiSources" />
					</Record>
				</Annotation>
				<Annotation Term="Common.SideEffects" Qualifier="booleanSourceProperties">
					<Record Type="Common.SideEffectsType">
						<PropertyValue Property="SourceProperties">
							<Collection>
								<PropertyPath>sourceProperty4</PropertyPath>
							</Collection>
						</PropertyValue>
						<PropertyValue Property="TargetProperties">
							<Collection>
								<String>fieldControlProperty2</String>
							</Collection>
						</PropertyValue>
					</Record>
				</Annotation>
				<Annotation Term="Common.SideEffects" Qualifier="sourceEntity">
					<Record Type="Common.SideEffectsType">
						<PropertyValue Property="SourceEntities">
							<Collection>
								<NavigationPropertyPath>items</NavigationPropertyPath>
							</Collection>
						</PropertyValue>
						<PropertyValue Property="TargetProperties">
							<Collection>
								<String>totalAmount</String>
							</Collection>
						</PropertyValue>
					</Record>
				</Annotation>
				<Annotation Term="Common.SideEffects" Qualifier="BusinessPartner">
					<Record Type="Common.SideEffectsType">
						<PropertyValue Property="SourceProperties">
							<Collection>
								<PropertyPath>BusinessPartnerID</PropertyPath>
							</Collection>
						</PropertyValue>
						<PropertyValue Property="TargetEntities">
							<Collection>
								<NavigationPropertyPath>businessPartner</NavigationPropertyPath>
							</Collection>
						</PropertyValue>
					</Record>
				</Annotation>
				<Annotation Term="Common.DraftRoot">
					<Record Type="Common.DraftRootType">
						<PropertyValue Property="ActivationAction" String="sap.fe.core.Service.draftActivate" />
						<PropertyValue Property="EditAction" String="sap.fe.core.Service.draftEdit" />
						<PropertyValue Property="PreparationAction" String="sap.fe.core.Service.draftPrepare" />
					</Record>
				</Annotation>
			</Annotations>
			<Annotations Target="sap.fe.core.Service.RootEntity/ID">
				<Annotation Term="Core.Computed" Bool="true" />
				<Annotation Term="Common.Label" String="Identifier" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.RootEntity/sourceProperty1">
				<Annotation Term="Common.Label" String="Source Property 1" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.RootEntity/sourceProperty2">
				<Annotation Term="Common.Label" String="Source Property 2" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.RootEntity/sourceProperty3a">
				<Annotation Term="Common.Label" String="Source Property 3a" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.RootEntity/sourceProperty3b">
				<Annotation Term="Common.Label" String="Source Property 3b" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.RootEntity/otherProperty3c">
				<Annotation Term="Common.Label" String="Other Property 3c" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.RootEntity/sourceProperty4">
				<Annotation Term="Common.Label" String="Boolean Source Property" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.RootEntity/targetProperty1a">
				<Annotation Term="Common.Label" String="Target Property 1a" />
				<Annotation Term="Core.Computed" Bool="true" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.RootEntity/targetProperty1b">
				<Annotation Term="Common.FieldControl" Path="fieldControlProperty1" />
				<Annotation Term="Common.Label" String="Target Property 1b" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.RootEntity/targetProperty2">
				<Annotation Term="Common.Label" String="Target Property 2" />
				<Annotation Term="Core.Computed" Bool="true" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.RootEntity/targetProperty3">
				<Annotation Term="Common.Label" String="Target Property 3" />
				<Annotation Term="Core.Computed" Bool="true" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.RootEntity/targetProperty4">
				<Annotation Term="Common.FieldControl" Path="fieldControlProperty2" />
				<Annotation Term="Common.Label" String="Target Property 4" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.RootEntity/complexProperty_number">
				<Annotation Term="Core.Computed" Bool="true" />
				<Annotation Term="Common.Label" String="Current Number" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.RootEntity/complexProperty_prime">
				<Annotation Term="Core.Computed" Bool="true" />
				<Annotation Term="Common.Label" String="Prime Number?" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.RootEntity/totalAmount">
				<Annotation Term="Measures.ISOCurrency" Path="currency_code" />
				<Annotation Term="Validation.Minimum" Int="0" />
				<Annotation Term="Common.Label" String="Total Amount" />
				<Annotation Term="Core.Computed" Bool="true" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.RootEntity/OperationAvailable">
				<Annotation Term="Common.Label" String="Operation Available" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.RootEntity/currency">
				<Annotation Term="Common.Label" String="{i18n>Currency}" />
				<Annotation Term="Core.Description" String="{i18n>CurrencyCode.Description}" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.RootEntity/currency_code">
				<Annotation Term="Common.Label" String="{i18n>Currency}" />
				<Annotation Term="Common.ValueList">
					<Record Type="Common.ValueListType">
						<PropertyValue Property="Label" String="{i18n>Currency}" />
						<PropertyValue Property="CollectionPath" String="Currencies" />
						<PropertyValue Property="Parameters">
							<Collection>
								<Record Type="Common.ValueListParameterInOut">
									<PropertyValue Property="LocalDataProperty" PropertyPath="currency_code" />
									<PropertyValue Property="ValueListProperty" String="code" />
								</Record>
								<Record Type="Common.ValueListParameterDisplayOnly">
									<PropertyValue Property="ValueListProperty" String="name" />
								</Record>
							</Collection>
						</PropertyValue>
					</Record>
				</Annotation>
				<Annotation Term="Core.Description" String="{i18n>CurrencyCode.Description}" />
				<Annotation Term="Core.Computed" Bool="true" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.RootEntity/fieldControlProperty1">
				<Annotation Term="UI.Hidden" Bool="true" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.RootEntity/fieldControlProperty2">
				<Annotation Term="UI.Hidden" Bool="true" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.RootEntity/BusinessPartnerID">
				<Annotation Term="Common.Text" Path="businessPartner/FullName">
					<Annotation Term="UI.TextArrangement" EnumMember="UI.TextArrangementType/TextFirst" />
				</Annotation>
				<Annotation Term="Common.ValueListMapping">
					<Record Type="Common.ValueListMappingType">
						<PropertyValue Property="Label" String="Business Partner" />
						<PropertyValue Property="CollectionPath" String="BusinessPartnerAddress" />
						<PropertyValue Property="Parameters">
							<Collection>
								<Record Type="Common.ValueListParameterInOut">
									<PropertyValue Property="LocalDataProperty" PropertyPath="BusinessPartnerID" />
									<PropertyValue Property="ValueListProperty" String="BusinessPartner" />
								</Record>
								<Record Type="Common.ValueListParameterDisplayOnly">
									<PropertyValue Property="ValueListProperty" String="FullName" />
								</Record>
							</Collection>
						</PropertyValue>
					</Record>
				</Annotation>
				<Annotation Term="Common.ValueListWithFixedValues" Bool="true" />
				<Annotation Term="Common.Label" String="Business Partner ID" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.RootEntity/IsActiveEntity">
				<Annotation Term="UI.Hidden" Bool="true" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.RootEntity/HasActiveEntity">
				<Annotation Term="UI.Hidden" Bool="true" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.RootEntity/HasDraftEntity">
				<Annotation Term="UI.Hidden" Bool="true" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.RootEntity/DraftAdministrativeData">
				<Annotation Term="UI.Hidden" Bool="true" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.increaseAndCheckPrime(sap.fe.core.Service.RootEntity)">
				<Annotation Term="Common.SideEffects">
					<Record Type="Common.SideEffectsType">
						<PropertyValue Property="TargetProperties">
							<Collection>
								<String>_it/*</String>
							</Collection>
						</PropertyValue>
					</Record>
				</Annotation>
				<Annotation Term="Core.OperationAvailable" Path="_it/OperationAvailable" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.addRound(sap.fe.core.Service.RootEntity)">
				<Annotation Term="Common.SideEffects">
					<Record Type="Common.SideEffectsType">
						<PropertyValue Property="TargetProperties">
							<Collection>
								<String>/sap.fe.core.Service.EntityContainer/EntitiesSingleton/BooleanProperty</String>
							</Collection>
						</PropertyValue>
						<PropertyValue Property="TargetEntities">
							<Collection>
								<NavigationPropertyPath>/sap.fe.core.Service.EntityContainer/AbsoluteEntity</NavigationPropertyPath>
							</Collection>
						</PropertyValue>
					</Record>
				</Annotation>
			</Annotations>
			<Annotations Target="sap.fe.core.Service.stopRound(sap.fe.core.Service.RootEntity)">
				<Annotation Term="Common.SideEffects">
					<Record Type="Common.SideEffectsType">
						<PropertyValue Property="TargetProperties">
							<Collection>
								<String>/sap.fe.core.Service.EntityContainer/EntitiesSingleton/BooleanProperty</String>
							</Collection>
						</PropertyValue>
						<PropertyValue Property="TargetEntities">
							<Collection>
								<NavigationPropertyPath>/sap.fe.core.Service.EntityContainer/AbsoluteEntity</NavigationPropertyPath>
							</Collection>
						</PropertyValue>
					</Record>
				</Annotation>
			</Annotations>
			<Annotations Target="sap.fe.core.Service.clearRounds(sap.fe.core.Service.RootEntity)">
				<Annotation Term="Common.SideEffects">
					<Record Type="Common.SideEffectsType">
						<PropertyValue Property="TargetProperties">
							<Collection>
								<String>/sap.fe.core.Service.EntityContainer/EntitiesSingleton/BooleanProperty</String>
							</Collection>
						</PropertyValue>
						<PropertyValue Property="TargetEntities">
							<Collection>
								<NavigationPropertyPath>/sap.fe.core.Service.EntityContainer/AbsoluteEntity</NavigationPropertyPath>
							</Collection>
						</PropertyValue>
					</Record>
				</Annotation>
			</Annotations>
			<Annotations Target="sap.fe.core.Service.deleteBusinessPartner(sap.fe.core.Service.RootEntity)">
				<Annotation Term="Common.SideEffects" Qualifier="InvalidateCachedValueHelp">
					<Record Type="Common.SideEffectsType">
						<PropertyValue Property="TargetProperties">
							<Collection>
								<String>_it/BusinessPartnerID</String>
							</Collection>
						</PropertyValue>
						<PropertyValue Property="TargetEntities">
							<Collection>
								<NavigationPropertyPath>/sap.fe.core.Service.EntityContainer/BusinessPartnerAddress</NavigationPropertyPath>
							</Collection>
						</PropertyValue>
					</Record>
				</Annotation>
			</Annotations>
			<Annotations Target="sap.fe.core.Service.ChildEntity">
				<Annotation Term="UI.LineItem" Qualifier="sample5">
					<Collection>
						<Record Type="UI.DataField">
							<PropertyValue Property="Value" Path="item" />
						</Record>
						<Record Type="UI.DataField">
							<PropertyValue Property="Value" Path="price" />
							<Annotation Term="HTML5.CssDefaults">
								<Record Type="HTML5.CssDefaultsType">
									<PropertyValue Property="width" String="15em" />
								</Record>
							</Annotation>
						</Record>
					</Collection>
				</Annotation>
			</Annotations>
			<Annotations Target="sap.fe.core.Service.EntityContainer/ChildEntity">
				<Annotation Term="Capabilities.DeleteRestrictions">
					<Record Type="Capabilities.DeleteRestrictionsType">
						<PropertyValue Property="Deletable" Bool="true" />
					</Record>
				</Annotation>
			</Annotations>
			<Annotations Target="sap.fe.core.Service.ChildEntity/ID">
				<Annotation Term="Common.Label" String="Item Identifier" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.ChildEntity/item">
				<Annotation Term="Common.Label" String="Item" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.ChildEntity/price">
				<Annotation Term="Measures.ISOCurrency" Path="currency_code" />
				<Annotation Term="Validation.Minimum" Int="0" />
				<Annotation Term="Common.Label" String="Price" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.ChildEntity/currency">
				<Annotation Term="Common.Label" String="{i18n>Currency}" />
				<Annotation Term="Core.Description" String="{i18n>CurrencyCode.Description}" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.ChildEntity/currency_code">
				<Annotation Term="Common.Label" String="{i18n>Currency}" />
				<Annotation Term="Common.ValueList">
					<Record Type="Common.ValueListType">
						<PropertyValue Property="Label" String="{i18n>Currency}" />
						<PropertyValue Property="CollectionPath" String="Currencies" />
						<PropertyValue Property="Parameters">
							<Collection>
								<Record Type="Common.ValueListParameterInOut">
									<PropertyValue Property="LocalDataProperty" PropertyPath="currency_code" />
									<PropertyValue Property="ValueListProperty" String="code" />
								</Record>
								<Record Type="Common.ValueListParameterDisplayOnly">
									<PropertyValue Property="ValueListProperty" String="name" />
								</Record>
							</Collection>
						</PropertyValue>
					</Record>
				</Annotation>
				<Annotation Term="Core.Description" String="{i18n>CurrencyCode.Description}" />
				<Annotation Term="Core.Computed" Bool="true" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.BusinessPartnerAddress">
				<Annotation Term="UI.FieldGroup" Qualifier="BusinessPartnerAddress">
					<Record Type="UI.FieldGroupType">
						<PropertyValue Property="Data">
							<Collection>
								<Record Type="UI.DataField">
									<PropertyValue Property="Value" Path="CityName" />
								</Record>
								<Record Type="UI.DataField">
									<PropertyValue Property="Value" Path="PostalCode" />
								</Record>
								<Record Type="UI.DataField">
									<PropertyValue Property="Value" Path="StreetName" />
								</Record>
								<Record Type="UI.DataField">
									<PropertyValue Property="Value" Path="HouseNumber" />
								</Record>
								<Record Type="UI.DataField">
									<PropertyValue Property="Value" Path="Country" />
								</Record>
							</Collection>
						</PropertyValue>
					</Record>
				</Annotation>
			</Annotations>
			<Annotations Target="sap.fe.core.Service.EntityContainer/BusinessPartnerAddress">
				<Annotation Term="Capabilities.DeleteRestrictions">
					<Record Type="Capabilities.DeleteRestrictionsType">
						<PropertyValue Property="Deletable" Bool="false" />
					</Record>
				</Annotation>
				<Annotation Term="Capabilities.InsertRestrictions">
					<Record Type="Capabilities.InsertRestrictionsType">
						<PropertyValue Property="Insertable" Bool="false" />
					</Record>
				</Annotation>
				<Annotation Term="Capabilities.UpdateRestrictions">
					<Record Type="Capabilities.UpdateRestrictionsType">
						<PropertyValue Property="Updatable" Bool="false" />
					</Record>
				</Annotation>
			</Annotations>
			<Annotations Target="sap.fe.core.Service.BusinessPartnerAddress/BusinessPartner">
				<Annotation Term="Common.Label" String="Business Partner" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.BusinessPartnerAddress/FullName">
				<Annotation Term="Common.Label" String="Name" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.BusinessPartnerAddress/CityName">
				<Annotation Term="Common.Label" String="City" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.BusinessPartnerAddress/Country">
				<Annotation Term="Common.Label" String="Country" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.BusinessPartnerAddress/PostalCode">
				<Annotation Term="Common.Label" String="Postal Code" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.BusinessPartnerAddress/StreetName">
				<Annotation Term="Common.Label" String="Street Name" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.BusinessPartnerAddress/HouseNumber">
				<Annotation Term="Common.Label" String="House Number" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.AbsoluteEntity">
				<Annotation Term="UI.LineItem">
					<Collection>
						<Record Type="UI.DataField">
							<PropertyValue Property="Value" Path="ID" />
						</Record>
						<Record Type="UI.DataField">
							<PropertyValue Property="Value" Path="Duration" />
						</Record>
					</Collection>
				</Annotation>
			</Annotations>
			<Annotations Target="sap.fe.core.Service.EntityContainer/AbsoluteEntity">
				<Annotation Term="Capabilities.SearchRestrictions">
					<Record Type="Capabilities.SearchRestrictionsType">
						<PropertyValue Property="Searchable" Bool="false" />
					</Record>
				</Annotation>
				<Annotation Term="Capabilities.DeleteRestrictions">
					<Record Type="Capabilities.DeleteRestrictionsType">
						<PropertyValue Property="Deletable" Bool="false" />
					</Record>
				</Annotation>
			</Annotations>
			<Annotations Target="sap.fe.core.Service.AbsoluteEntity/ID">
				<Annotation Term="Core.Computed" Bool="true" />
				<Annotation Term="Common.Label" String="Round" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.AbsoluteEntity/TimeStamp">
				<Annotation Term="UI.Hidden" Bool="true" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.AbsoluteEntity/Duration">
				<Annotation Term="Core.Computed" Bool="true" />
				<Annotation Term="Common.Label" String="Duration" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.EntitiesSingleton/BooleanProperty">
				<Annotation Term="Core.Computed" Bool="true" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.SideEffectsProperties/Property">
				<Annotation Term="Common.Label" String="Property" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.SideEffectsProperties/PropertyType">
				<Annotation Term="Common.Label" String="Type" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.SideEffectsProperties/Description">
				<Annotation Term="Common.Label" String="Description" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.TargetPropertiesSample/TargetProperties">
				<Annotation Term="Common.Label" String="Target Properties" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.TargetPropertiesSample/Description">
				<Annotation Term="Common.Label" String="Description" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.Currencies">
				<Annotation Term="UI.Identification">
					<Collection>
						<Record Type="UI.DataField">
							<PropertyValue Property="Value" Path="name" />
						</Record>
					</Collection>
				</Annotation>
			</Annotations>
			<Annotations Target="sap.fe.core.Service.Currencies/name">
				<Annotation Term="Common.Label" String="{i18n>Name}" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.Currencies/descr">
				<Annotation Term="Common.Label" String="{i18n>Description}" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.Currencies/code">
				<Annotation Term="Common.Text" Path="name" />
				<Annotation Term="Common.Label" String="{i18n>CurrencyCode}" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.Currencies/symbol">
				<Annotation Term="Common.Label" String="{i18n>CurrencySymbol}" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.Currencies/minorUnit">
				<Annotation Term="Common.Label" String="{i18n>CurrencyMinorUnit}" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.DraftAdministrativeData">
				<Annotation Term="Common.Label" String="{i18n>Draft_DraftAdministrativeData}" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.DraftAdministrativeData/DraftUUID">
				<Annotation Term="UI.Hidden" Bool="true" />
				<Annotation Term="Common.Label" String="{i18n>Draft_DraftUUID}" />
				<Annotation Term="Core.ComputedDefaultValue" Bool="true" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.DraftAdministrativeData/CreationDateTime">
				<Annotation Term="Common.Label" String="{i18n>Draft_CreationDateTime}" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.DraftAdministrativeData/CreatedByUser">
				<Annotation Term="Common.Label" String="{i18n>Draft_CreatedByUser}" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.DraftAdministrativeData/DraftIsCreatedByMe">
				<Annotation Term="UI.Hidden" Bool="true" />
				<Annotation Term="Common.Label" String="{i18n>Draft_DraftIsCreatedByMe}" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.DraftAdministrativeData/LastChangeDateTime">
				<Annotation Term="Common.Label" String="{i18n>Draft_LastChangeDateTime}" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.DraftAdministrativeData/LastChangedByUser">
				<Annotation Term="Common.Label" String="{i18n>Draft_LastChangedByUser}" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.DraftAdministrativeData/InProcessByUser">
				<Annotation Term="Common.Label" String="{i18n>Draft_InProcessByUser}" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.DraftAdministrativeData/DraftIsProcessedByMe">
				<Annotation Term="UI.Hidden" Bool="true" />
				<Annotation Term="Common.Label" String="{i18n>Draft_DraftIsProcessedByMe}" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.Currencies_texts/locale">
				<Annotation Term="Common.Label" String="{i18n>LanguageCode}" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.Currencies_texts/name">
				<Annotation Term="Common.Label" String="{i18n>Name}" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.Currencies_texts/descr">
				<Annotation Term="Common.Label" String="{i18n>Description}" />
			</Annotations>
			<Annotations Target="sap.fe.core.Service.Currencies_texts/code">
				<Annotation Term="Common.Text" Path="name" />
				<Annotation Term="Common.Label" String="{i18n>CurrencyCode}" />
			</Annotations>
		</Schema>
	</edmx:DataServices>
</edmx:Edmx>

```

--------------------------------

**TITLE**: Localization

**INTRODUCTION**: This guide describes how to override standard texts in your generated SAP Fiori elements apps using building blocks.

**TAGS**: adapt i18n, internationalization, override texts, i18n properties, localization

**STEP**: 1. Adapt the Manifest to Override the Texts

**DESCRIPTION**: Changes must be made in the manifest file of the application. Add 'enhanceI18n' to the settings of the corresponding section as shown in the following code sample:

**LANGUAGE**: JSON

**CODE**:
```json
{
	"_version": "1.12.0",
	"sap.app": {
		"id": "sap.fe.core.fpmExplorer.adaptI18n",
		"type": "application",
		"i18n": {
			"bundleUrl": "i18n/i18n.properties",
			"supportedLocales": [""],
			"fallbackLocale": ""
		},
		"applicationVersion": {
			"version": "1.0.0"
		},
		"dataSources": {
			"mainService": {
				"uri": "/sap/fe/core/mock/service/",
				"type": "OData",
				"settings": {
					"annotations": [],
					"odataVersion": "4.0"
				}
			}
		}
	},
	"sap.ui5": {
		"dependencies": {
			"minUI5Version": "1.111.1",
			"libs": {
				"sap.ui.core": {},
				"sap.fe.templates": {}
			}
		},
		"contentDensities": {
			"compact": true,
			"cozy": true
		},
		"models": {
			"i18n": {
				"type": "sap.ui.model.resource.ResourceModel",
				"settings": {
					"bundleUrl": "i18n/i18n.properties"
				}
			},
			"@i18n": {
				"type": "sap.ui.model.resource.ResourceModel",
				"settings": {
					"bundleUrl": "i18n/i18n.properties"
				}
			},
			"": {
				"dataSource": "mainService",
				"settings": {
					"operationMode": "Server",
					"autoExpandSelect": true,
					"earlyRequests": true
				}
			}
		},

		"routing": {
			"routes": [
				{
					"pattern": ":?query:",
					"name": "detailPage",
					"target": "detailPage"
				}
			],
			"targets": {
				"detailPage": {
					"type": "Component",
					"id": "Default",
					"name": "sap.fe.core.fpm",
					"options": {
						"settings": {
							"viewName": "sap.fe.core.fpmExplorer.adaptI18n.AdaptI18n",
							"contextPath": "/Travel",
							"enhanceI18n": "i18n/i18n.properties"
						}
					}
				}
			}
		}
	}
}
```

**STEP**: 2. Create an i18n Properties File to Override the Text

**DESCRIPTION**: When you have created your specific application component, for example in SAP Fiori tools, standard texts are available from a specific template component (for example, i18n file within the application folder).

**STEP**: 3. You Can Now Use the Building Blocks Provided by SAP Fiori Elements

**DESCRIPTION**: Example: Using the 'Filter Bar' building block. Add the editing status key to the i18n properties file.

**STEP**: 4. Keys That Are Publicly Available for the Building Blocks

**DESCRIPTION**: The following table lists keys you can override for building blocks.

--------------------------------

**TITLE**: Custom Action

**INTRODUCTION**: The Chart building block enables you to define custom actions as toolbar buttons and menu items. This example shows a standalone action, a selection-dependent action, and an action group.

**TAGS**: chart, extensions, customization, actions

**STEP**: Custom Actions

**DESCRIPTION**: Add custom actions using macrosChart:Action elements within the macros:actions aggregation. These actions can be positioned relative to annotation-based actions.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros" xmlns:macrosChart="sap.fe.macros.chart">
	<VBox fitContainer="true" alignItems="Stretch" alignContent="Stretch" justifyContent="Start" renderType="Div">
		<macros:Chart id="chartActions" metaPath="/RootEntity/@com.sap.vocabularies.UI.v1.Chart" selectionMode="Multiple">
			<macros:actions>
				<macrosChart:Action
					key="customAction"
					text="Custom Action"
					press=".onPressAction"
					placement="Before"
					anchor="DataFieldForAction::Service.EntityContainer::ToolbarAction"
				/>
				<macrosChart:Action
					key="customActionSelection"
					text="Custom Action with Selection"
					press=".onPressActionSelection"
					enabled="true"
					placement="Before"
					requiresSelection="true"
					anchor="DataFieldForAction::Service.EntityContainer::ToolbarAction"
				/>
				<macrosChart:ActionGroup key="customActionGroup" text="Grouped Actions" placement="After" anchor="customAction">
					<macrosChart:Action text="Menu Action 1" press=".onPressMenuAction" />
					<macrosChart:Action text="Menu Action 2" press=".onPressMenuAction" enabled="false" />
				</macrosChart:ActionGroup>
			</macros:actions>
		</macros:Chart>
		<Text text="NOTE: Sorting doesn't work here, since we're using a mock service" />
	</VBox>
</core:FragmentDefinition>
```

**STEP**: Selection-Dependent Actions

**DESCRIPTION**: Create actions that are only enabled when chart items are selected by setting requiresSelection='true'.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros" xmlns:macrosChart="sap.fe.macros.chart">
	<VBox fitContainer="true" alignItems="Stretch" alignContent="Stretch" justifyContent="Start" renderType="Div">
		<macros:Chart id="chartActions" metaPath="/RootEntity/@com.sap.vocabularies.UI.v1.Chart" selectionMode="Multiple">
			<macros:actions>
				<macrosChart:Action
					key="customAction"
					text="Custom Action"
					press=".onPressAction"
					placement="Before"
					anchor="DataFieldForAction::Service.EntityContainer::ToolbarAction"
				/>
				<macrosChart:Action
					key="customActionSelection"
					text="Custom Action with Selection"
					press=".onPressActionSelection"
					enabled="true"
					placement="Before"
					requiresSelection="true"
					anchor="DataFieldForAction::Service.EntityContainer::ToolbarAction"
				/>
				<macrosChart:ActionGroup key="customActionGroup" text="Grouped Actions" placement="After" anchor="customAction">
					<macrosChart:Action text="Menu Action 1" press=".onPressMenuAction" />
					<macrosChart:Action text="Menu Action 2" press=".onPressMenuAction" enabled="false" />
				</macrosChart:ActionGroup>
			</macros:actions>
		</macros:Chart>
		<Text text="NOTE: Sorting doesn't work here, since we're using a mock service" />
	</VBox>
</core:FragmentDefinition>
```

**STEP**: Action Groups

**DESCRIPTION**: Group related actions together using macrosChart:ActionGroup to create dropdown menus in the chart toolbar.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros" xmlns:macrosChart="sap.fe.macros.chart">
	<VBox fitContainer="true" alignItems="Stretch" alignContent="Stretch" justifyContent="Start" renderType="Div">
		<macros:Chart id="chartActions" metaPath="/RootEntity/@com.sap.vocabularies.UI.v1.Chart" selectionMode="Multiple">
			<macros:actions>
				<macrosChart:Action
					key="customAction"
					text="Custom Action"
					press=".onPressAction"
					placement="Before"
					anchor="DataFieldForAction::Service.EntityContainer::ToolbarAction"
				/>
				<macrosChart:Action
					key="customActionSelection"
					text="Custom Action with Selection"
					press=".onPressActionSelection"
					enabled="true"
					placement="Before"
					requiresSelection="true"
					anchor="DataFieldForAction::Service.EntityContainer::ToolbarAction"
				/>
				<macrosChart:ActionGroup key="customActionGroup" text="Grouped Actions" placement="After" anchor="customAction">
					<macrosChart:Action text="Menu Action 1" press=".onPressMenuAction" />
					<macrosChart:Action text="Menu Action 2" press=".onPressMenuAction" enabled="false" />
				</macrosChart:ActionGroup>
			</macros:actions>
		</macros:Chart>
		<Text text="NOTE: Sorting doesn't work here, since we're using a mock service" />
	</VBox>
</core:FragmentDefinition>
```

**STEP**: Action Event Handlers

**DESCRIPTION**: Implement event handlers in the controller to respond to action presses. Selection-dependent actions can access selected chart contexts.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
import PageController from "sap/fe/core/PageController";
import type Chart from "sap/fe/macros/Chart";
import type Button from "sap/m/Button";
import MessageBox from "sap/m/MessageBox";
import type UI5Event from "sap/ui/base/Event";
import type ODataV4Context from "sap/ui/model/odata/v4/Context";

export default class ChartActionsController extends PageController {
	public onPressMenuAction(event: UI5Event<{}, Button>): void {
		MessageBox.show("You pressed the custom action: " + event.getSource().getProperty("text"));
	}

	public onPressAction(event: UI5Event<{}, Button>): void {
		MessageBox.show("You pressed the custom action: " + event.getSource().getProperty("text"));
	}

	public onPressActionSelection(event: UI5Event): void {
		const chart = this.byId("chartActions") as Chart;
		const selectedContexts = chart.getSelectedContexts();
		const data = selectedContexts.map((context: ODataV4Context) => context.getObject());
		MessageBox.show("You selected below contexts:", { details: data });
	}
}
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
service Service {
  action ToolbarAction();

  @Analytics.AggregatedProperty #min: {
    Name                : 'minPricing',
    AggregationMethod   : 'min',
    AggregatableProperty: 'NetPricing',
    ![@Common.Label]    : 'Minimum Net Amount'
  }
  @Analytics.AggregatedProperty #max: {
    Name                : 'maxPricing',
    AggregationMethod   : 'max',
    AggregatableProperty: 'NetPricing',
    ![@Common.Label]    : 'Maximum Net Amount'
  }
  @Analytics.AggregatedProperty #avg: {
    Name                : 'avgPricing',
    AggregationMethod   : 'average',
    AggregatableProperty: 'NetPricing',
    ![@Common.Label]    : 'Average Net Amount'
  }
  @Analytics.AggregatedProperty #sum: {
    Name                : 'totalPricing',
    AggregationMethod   : 'sum',
    AggregatableProperty: 'NetPricing',
    ![@Common.Label]    : 'Total Net Amount'
  }

  @Aggregation.ApplySupported       : {
    Transformations         : [
      'aggregate',
      'topcount',
      'bottomcount',
      'identity',
      'concat',
      'groupby',
      'filter',
      'expand',
      'top',
      'skip',
      'orderby',
      'search'
    ],
    CustomAggregationMethods: ['Custom.concat'],
    Rollup                  : #None,
    PropertyRestrictions    : true,
    GroupableProperties     : [
      SalesOrderType,
      SalesOrder,
      SalesOrganization,
      OverallSDProcessStatus
    ],
    AggregatableProperties  : [{Property: NetPricing}]
  }
  entity RootEntity {
    key SalesOrder                 : String(10) @title: 'Sales Order No.';
        NetPricing                 : Decimal(15, 10);

        OverallSDProcessStatus     : String(1)  @(
          title              : 'Overall Process Status',
          Common.Text        : OverallSDProcessStatusText,
          UI.ValueCriticality: [
            {
              Value      : 'A',
              Criticality: #Negative
            },
            {
              Value      : 'B',
              Criticality: #Critical
            },
            {
              Value      : 'C',
              Criticality: #Positive
            }
          ]
        );
        OverallSDProcessStatusText : String;

        SalesOrderType             : String(4)  @(
          title      : 'Sales Order Type',
          Common.Text: SalesOrderTypeText
        );
        SalesOrderTypeText         : String;

        SalesOrganization          : String(4)  @(
          title      : 'Sales Organization',
          Common.Text: SalesOrganizationText
        );
        SalesOrganizationText      : String;
  }

  annotate RootEntity with @UI.Chart: {
    $Type              : 'UI.ChartDefinitionType',
    Title              : 'Chart Title',
    Description        : 'Chart Description',
    ChartType          : #Column,
    DynamicMeasures    : ['@Analytics.AggregatedProperty#sum'],
    Actions            : [{
      $Type : 'UI.DataFieldForAction',
      Label : 'Toolbar Action',
      Action: 'Service.EntityContainer/ToolbarAction'
    }],
    Dimensions         : [SalesOrganization],
    MeasureAttributes  : [{
      $Type         : 'UI.ChartMeasureAttributeType',
      DynamicMeasure: '@Analytics.AggregatedProperty#sum',
      Role          : #Axis1
    }],
    DimensionAttributes: [{
      $Type    : 'UI.ChartDimensionAttributeType',
      Dimension: SalesOrganization,
      Role     : #Category
    }]
  };
}

```

**FILE**: RootEntity.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"SalesOrder": "2919682",
		"NetPricing": 20000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "1",
		"SalesOrganizationText": "Sales Org. 0001"
	},
	{
		"SalesOrder": "2922870",
		"NetPricing": 10000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "2",
		"SalesOrganizationText": "Sales Org. 002"
	},
	{
		"SalesOrder": "6437",
		"NetPricing": 10000,
		"SalesOrderType": "CCLN",
		"SalesOrderTypeText": "Ret. Packaging Issue",
		"OverallSDProcessStatus": "B",
		"OverallSDProcessStatusText": "In Process",
		"SalesOrganization": "3",
		"SalesOrganizationText": "Sales Org. 003"
	},
	{
		"SalesOrder": "2915717",
		"NetPricing": 10000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "B",
		"OverallSDProcessStatusText": "In Process",
		"SalesOrganization": "12",
		"SalesOrganizationText": "Sales Org. 012"
	},
	{
		"SalesOrder": "2916499",
		"NetPricing": 20000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "1",
		"SalesOrganizationText": "test"
	},
	{
		"SalesOrder": "2916639",
		"NetPricing": 30000,
		"SalesOrderType": "CR",
		"SalesOrderTypeText": "Critical Order",
		"OverallSDProcessStatus": "B",
		"OverallSDProcessStatusText": "In Process",
		"SalesOrganization": "1010",
		"SalesOrganizationText": "Sales Org. 1010"
	},
	{
		"SalesOrder": "2917844",
		"NetPricing": 50000,
		"SalesOrderType": "CCLN",
		"SalesOrderTypeText": "Ret. Packaging Issue",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "1111",
		"SalesOrganizationText": "Sales Org. 1111"
	},
	{
		"SalesOrder": "2919431",
		"NetPricing": 10000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "1710",
		"SalesOrganizationText": "Food Sales Org."
	},
	{
		"SalesOrder": "2922871",
		"NetPricing": 10000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "2320",
		"SalesOrganizationText": "Sales Org. 2320"
	},
	{
		"SalesOrder": "2922872",
		"NetPricing": 30000,
		"SalesOrderType": "CR",
		"SalesOrderTypeText": "Critical Order",
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "9000",
		"SalesOrganizationText": "FMS Sales Org. 1"
	},
	{
		"SalesOrder": "2922873",
		"NetPricing": 100000,
		"SalesOrderType": "CCLN",
		"SalesOrderTypeText": "Ret. Packaging Issue",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "998",
		"SalesOrganizationText": "Singapore Sales Org."
	},
	{
		"SalesOrder": "2922874",
		"NetPricing": 100000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "AFR",
		"SalesOrganizationText": "My Sales Org."
	},
	{
		"SalesOrder": "2922875",
		"NetPricing": 20000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "CF01",
		"SalesOrganizationText": "Sales Org. 0001"
	},
	{
		"SalesOrder": "2922876",
		"NetPricing": 30000,
		"SalesOrderType": "CR",
		"SalesOrderTypeText": "Critical Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "CM01",
		"SalesOrganizationText": "CM Sales Org. 0001"
	},
	{
		"SalesOrder": "2922877",
		"NetPricing": 500000,
		"SalesOrderType": "CCLN",
		"SalesOrderTypeText": "Ret. Packaging Issue",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "CM03",
		"SalesOrganizationText": "CM Sales Org. 0003"
	},
	{
		"SalesOrder": "2922878",
		"NetPricing": 100000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "DBM",
		"SalesOrganizationText": "DBM"
	},
	{
		"SalesOrder": "2922879",
		"NetPricing": 10000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "DPS",
		"SalesOrganizationText": "DPS"
	},
	{
		"SalesOrder": "2922880",
		"NetPricing": 30000,
		"SalesOrderType": "CR",
		"SalesOrderTypeText": "Critical Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "GK01",
		"SalesOrganizationText": "Sales Org. 004"
	},
	{
		"SalesOrder": "2922881",
		"NetPricing": 10000,
		"SalesOrderType": "CCLN",
		"SalesOrderTypeText": "Ret. Packaging Issue",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "GK02",
		"SalesOrganizationText": "Sales Org. 005"
	},
	{
		"SalesOrder": "2922882",
		"NetPricing": 10000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "HF01",
		"SalesOrganizationText": "HF Sales Org."
	},
	{
		"SalesOrder": "2922883",
		"NetPricing": 10000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "1",
		"SalesOrganizationText": "Sales Org. 0001"
	},
	{
		"SalesOrder": "2922884",
		"NetPricing": 10000,
		"SalesOrderType": "CR",
		"SalesOrderTypeText": "Critical Order",
		"OverallSDProcessStatus": "B",
		"OverallSDProcessStatusText": "In Process",
		"SalesOrganization": "2",
		"SalesOrganizationText": "Sales Org. 002"
	},
	{
		"SalesOrder": "2922885",
		"NetPricing": 20000,
		"SalesOrderType": "CCLN",
		"SalesOrderTypeText": "Ret. Packaging Issue",
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "3",
		"SalesOrganizationText": "Sales Org. 003"
	},
	{
		"SalesOrder": "2922886",
		"NetPricing": 300000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "B",
		"OverallSDProcessStatusText": "In Process",
		"SalesOrganization": "12",
		"SalesOrganizationText": "Sales Org. 012"
	},
	{
		"SalesOrder": "2922887",
		"NetPricing": 50000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "1",
		"SalesOrganizationText": "test"
	}
]

```

--------------------------------

**TITLE**: Chart with Variant Management

**INTRODUCTION**: The Chart building block enables you to use control-level variant management. This allows users to save and manage chart variants directly within the control.

**TAGS**: chart, variant management, views, save, personalization

**STEP**: Implementation

**DESCRIPTION**: The Chart building block is configured with control-level variant management and personalization options.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<VBox fitContainer="true" alignItems="Stretch" alignContent="Stretch" justifyContent="Start" renderType="Div">
		<macros:Chart
			id="chartControlLevelVariant"
			metaPath="/RootEntity/@com.sap.vocabularies.UI.v1.Chart"
			personalization="Sort,Type,Item"
			variantManagement="Control"
		/>
		<Text text="NOTE: Sorting doesn't work here, since we're using a mock service" />
	</VBox>
</core:FragmentDefinition>
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
service Service {
  @Analytics.AggregatedProperty #min: {
    Name                : 'minPricing',
    AggregationMethod   : 'min',
    AggregatableProperty: 'NetPricing',
    ![@Common.Label]    : 'Minimum Net Amount'
  }
  @Analytics.AggregatedProperty #max: {
    Name                : 'maxPricing',
    AggregationMethod   : 'max',
    AggregatableProperty: 'NetPricing',
    ![@Common.Label]    : 'Maximum Net Amount'
  }
  @Analytics.AggregatedProperty #avg: {
    Name                : 'avgPricing',
    AggregationMethod   : 'average',
    AggregatableProperty: 'NetPricing',
    ![@Common.Label]    : 'Average Net Amount'
  }
  @Analytics.AggregatedProperty #sum: {
    Name                : 'totalPricing',
    AggregationMethod   : 'sum',
    AggregatableProperty: 'NetPricing',
    ![@Common.Label]    : 'Total Net Amount'
  }

  @Aggregation.ApplySupported       : {
    Transformations         : [
      'aggregate',
      'topcount',
      'bottomcount',
      'identity',
      'concat',
      'groupby',
      'filter',
      'expand',
      'top',
      'skip',
      'orderby',
      'search'
    ],
    CustomAggregationMethods: ['Custom.concat'],
    Rollup                  : #None,
    PropertyRestrictions    : true,
    GroupableProperties     : [
      SalesOrderType,
      SalesOrder,
      SalesOrganization,
      OverallSDProcessStatus
    ],
    AggregatableProperties  : [{Property: NetPricing}]
  }
  entity RootEntity {
    key SalesOrder                 : String(10) @title: 'Sales Order No.';
        NetPricing                 : Decimal(15, 10);

        OverallSDProcessStatus     : String(1)  @(
          title              : 'Overall Process Status',
          Common.Text        : OverallSDProcessStatusText,
          UI.ValueCriticality: [
            {
              Value      : 'A',
              Criticality: #Negative
            },
            {
              Value      : 'B',
              Criticality: #Critical
            },
            {
              Value      : 'C',
              Criticality: #Positive
            }
          ]
        );
        OverallSDProcessStatusText : String;

        SalesOrderType             : String(4)  @(
          title      : 'Sales Order Type',
          Common.Text: SalesOrderTypeText
        );
        SalesOrderTypeText         : String;

        SalesOrganization          : String(4)  @(
          title      : 'Sales Organization',
          Common.Text: SalesOrganizationText
        );
        SalesOrganizationText      : String;
  }

  annotate RootEntity with @UI.Chart: {
    $Type              : 'UI.ChartDefinitionType',
    Title              : 'Chart Title',
    Description        : 'Chart Description',
    ChartType          : #Column,
    DynamicMeasures    : ['@Analytics.AggregatedProperty#sum'],
    Dimensions         : [SalesOrganization],
    MeasureAttributes  : [{
      $Type         : 'UI.ChartMeasureAttributeType',
      DynamicMeasure: '@Analytics.AggregatedProperty#sum',
      Role          : #Axis1
    }],
    DimensionAttributes: [{
      $Type    : 'UI.ChartDimensionAttributeType',
      Dimension: SalesOrganization,
      Role     : #Category
    }]
  };
}

```

**FILE**: RootEntity.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"SalesOrder": "2919682",
		"NetPricing": 20000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "1",
		"SalesOrganizationText": "Sales Org. 0001"
	},
	{
		"SalesOrder": "2922870",
		"NetPricing": 10000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "2",
		"SalesOrganizationText": "Sales Org. 002"
	},
	{
		"SalesOrder": "6437",
		"NetPricing": 10000,
		"SalesOrderType": "CCLN",
		"SalesOrderTypeText": "Ret. Packaging Issue",
		"OverallSDProcessStatus": "B",
		"OverallSDProcessStatusText": "In Process",
		"SalesOrganization": "3",
		"SalesOrganizationText": "Sales Org. 003"
	},
	{
		"SalesOrder": "2915717",
		"NetPricing": 10000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "B",
		"OverallSDProcessStatusText": "In Process",
		"SalesOrganization": "12",
		"SalesOrganizationText": "Sales Org. 012"
	},
	{
		"SalesOrder": "2916499",
		"NetPricing": 20000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "1",
		"SalesOrganizationText": "test"
	},
	{
		"SalesOrder": "2916639",
		"NetPricing": 30000,
		"SalesOrderType": "CR",
		"SalesOrderTypeText": "Critical Order",
		"OverallSDProcessStatus": "B",
		"OverallSDProcessStatusText": "In Process",
		"SalesOrganization": "1010",
		"SalesOrganizationText": "Sales Org. 1010"
	},
	{
		"SalesOrder": "2917844",
		"NetPricing": 50000,
		"SalesOrderType": "CCLN",
		"SalesOrderTypeText": "Ret. Packaging Issue",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "1111",
		"SalesOrganizationText": "Sales Org. 1111"
	},
	{
		"SalesOrder": "2919431",
		"NetPricing": 10000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "1710",
		"SalesOrganizationText": "Food Sales Org."
	},
	{
		"SalesOrder": "2922871",
		"NetPricing": 10000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "2320",
		"SalesOrganizationText": "Sales Org. 2320"
	},
	{
		"SalesOrder": "2922872",
		"NetPricing": 30000,
		"SalesOrderType": "CR",
		"SalesOrderTypeText": "Critical Order",
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "9000",
		"SalesOrganizationText": "FMS Sales Org. 1"
	},
	{
		"SalesOrder": "2922873",
		"NetPricing": 100000,
		"SalesOrderType": "CCLN",
		"SalesOrderTypeText": "Ret. Packaging Issue",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "998",
		"SalesOrganizationText": "Singapore Sales Org."
	},
	{
		"SalesOrder": "2922874",
		"NetPricing": 100000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "AFR",
		"SalesOrganizationText": "My Sales Org."
	},
	{
		"SalesOrder": "2922875",
		"NetPricing": 20000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "CF01",
		"SalesOrganizationText": "Sales Org. 0001"
	},
	{
		"SalesOrder": "2922876",
		"NetPricing": 30000,
		"SalesOrderType": "CR",
		"SalesOrderTypeText": "Critical Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "CM01",
		"SalesOrganizationText": "CM Sales Org. 0001"
	},
	{
		"SalesOrder": "2922877",
		"NetPricing": 500000,
		"SalesOrderType": "CCLN",
		"SalesOrderTypeText": "Ret. Packaging Issue",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "CM03",
		"SalesOrganizationText": "CM Sales Org. 0003"
	},
	{
		"SalesOrder": "2922878",
		"NetPricing": 100000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "DBM",
		"SalesOrganizationText": "DBM"
	},
	{
		"SalesOrder": "2922879",
		"NetPricing": 10000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "DPS",
		"SalesOrganizationText": "DPS"
	},
	{
		"SalesOrder": "2922880",
		"NetPricing": 30000,
		"SalesOrderType": "CR",
		"SalesOrderTypeText": "Critical Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "GK01",
		"SalesOrganizationText": "Sales Org. 004"
	},
	{
		"SalesOrder": "2922881",
		"NetPricing": 10000,
		"SalesOrderType": "CCLN",
		"SalesOrderTypeText": "Ret. Packaging Issue",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "GK02",
		"SalesOrganizationText": "Sales Org. 005"
	},
	{
		"SalesOrder": "2922882",
		"NetPricing": 10000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "HF01",
		"SalesOrganizationText": "HF Sales Org."
	},
	{
		"SalesOrder": "2922883",
		"NetPricing": 10000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "1",
		"SalesOrganizationText": "Sales Org. 0001"
	},
	{
		"SalesOrder": "2922884",
		"NetPricing": 10000,
		"SalesOrderType": "CR",
		"SalesOrderTypeText": "Critical Order",
		"OverallSDProcessStatus": "B",
		"OverallSDProcessStatusText": "In Process",
		"SalesOrganization": "2",
		"SalesOrganizationText": "Sales Org. 002"
	},
	{
		"SalesOrder": "2922885",
		"NetPricing": 20000,
		"SalesOrderType": "CCLN",
		"SalesOrderTypeText": "Ret. Packaging Issue",
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "3",
		"SalesOrganizationText": "Sales Org. 003"
	},
	{
		"SalesOrder": "2922886",
		"NetPricing": 300000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "B",
		"OverallSDProcessStatusText": "In Process",
		"SalesOrganization": "12",
		"SalesOrganizationText": "Sales Org. 012"
	},
	{
		"SalesOrder": "2922887",
		"NetPricing": 50000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "1",
		"SalesOrganizationText": "test"
	}
]

```

--------------------------------

**TITLE**: Chart

**INTRODUCTION**: The Chart building block enables you to render a chart based on an entitySet or a specific navigation property.

**TAGS**: chart, overview, visualization, analytics, data

**STEP**: Chart Definition

**DESCRIPTION**: The UI.Chart annotation defines the chart type, dimensions, and measures.

**LANGUAGE**: CDS

**CODE**:
```cds
service Service {
  @Analytics.AggregatedProperty #min: {
    Name                : 'minPricing',
    AggregationMethod   : 'min',
    AggregatableProperty: 'NetPricing',
    ![@Common.Label]    : 'Minimum Net Amount'
  }
  @Analytics.AggregatedProperty #max: {
    Name                : 'maxPricing',
    AggregationMethod   : 'max',
    AggregatableProperty: 'NetPricing',
    ![@Common.Label]    : 'Maximum Net Amount'
  }
  @Analytics.AggregatedProperty #avg: {
    Name                : 'avgPricing',
    AggregationMethod   : 'average',
    AggregatableProperty: 'NetPricing',
    ![@Common.Label]    : 'Average Net Amount'
  }
  @Analytics.AggregatedProperty #sum: {
    Name                : 'totalPricing',
    AggregationMethod   : 'sum',
    AggregatableProperty: 'NetPricing',
    ![@Common.Label]    : 'Total Net Amount'
  }

  @Aggregation.ApplySupported       : {
    Transformations         : [
      'aggregate',
      'topcount',
      'bottomcount',
      'identity',
      'concat',
      'groupby',
      'filter',
      'expand',
      'top',
      'skip',
      'orderby',
      'search'
    ],
    CustomAggregationMethods: ['Custom.concat'],
    Rollup                  : #None,
    PropertyRestrictions    : true,
    GroupableProperties     : [
      SalesOrderType,
      SalesOrder,
      SalesOrganization,
      OverallSDProcessStatus
    ],
    AggregatableProperties  : [{Property: NetPricing}]
  }
  entity RootEntity {
    key SalesOrder                 : String(10) @title: 'Sales Order No.';
        NetPricing                 : Decimal(15, 10);

        OverallSDProcessStatus     : String(1)  @(
          title              : 'Overall Process Status',
          Common.Text        : OverallSDProcessStatusText,
          UI.ValueCriticality: [
            {
              Value      : 'A',
              Criticality: #Negative
            },
            {
              Value      : 'B',
              Criticality: #Critical
            },
            {
              Value      : 'C',
              Criticality: #Positive
            }
          ]
        );
        OverallSDProcessStatusText : String;

        SalesOrderType             : String(4)  @(
          title      : 'Sales Order Type',
          Common.Text: SalesOrderTypeText
        );
        SalesOrderTypeText         : String;

        SalesOrganization          : String(4)  @(
          title      : 'Sales Organization',
          Common.Text: SalesOrganizationText
        );
        SalesOrganizationText      : String;
        items                      : Association to many ChildEntity
                                       on items.Parent = $self;
  }

  @Analytics.AggregatedProperty #min: {
    Name                : 'minPricing',
    AggregationMethod   : 'min',
    AggregatableProperty: 'ChildPrice',
    ![@Common.Label]    : 'Minimum child Price'
  }
  @Analytics.AggregatedProperty #max: {
    Name                : 'maxPricing',
    AggregationMethod   : 'max',
    AggregatableProperty: 'ChildPrice',
    ![@Common.Label]    : 'Maximum Child Price'
  }

  @Aggregation.ApplySupported       : {
    Transformations         : [
      'aggregate',
      'topcount',
      'bottomcount',
      'identity',
      'concat',
      'groupby',
      'filter',
      'expand',
      'top',
      'skip',
      'orderby',
      'search'
    ],
    CustomAggregationMethods: ['Custom.concat'],
    Rollup                  : #None,
    PropertyRestrictions    : true,
    GroupableProperties     : [
      CommentedBy,
      UpdatedBy,
      Status
    ],
    AggregatableProperties  : [{Property: ChildPrice}]
  }
  entity ChildEntity {
    key ID                 : Integer                   @title: 'Identifier';
        ChildPrice         : Decimal(15, 10);
        Status             : String(4)                 @(
          title      : 'Status',
          Common.Text: CommentedBy
        );
        SalesOrderTypeText : String;
        CommentedBy        : String                    @title: 'Commented by';
        UpdatedBy          : String                    @title: 'Updated by';
        Parent             : Association to RootEntity @UI.Hidden;
  }

  annotate ChildEntity with @UI.Chart: {
    $Type              : 'UI.ChartDefinitionType',
    Title              : 'Chart Title',
    Description        : 'Chart Description',
    ChartType          : #Column,
    DynamicMeasures    : ['@Analytics.AggregatedProperty#min'],
    Dimensions         : [Status],
    MeasureAttributes  : [{
      $Type         : 'UI.ChartMeasureAttributeType',
      DynamicMeasure: '@Analytics.AggregatedProperty#min',
      Role          : #Axis1
    }],
    DimensionAttributes: [{
      $Type    : 'UI.ChartDimensionAttributeType',
      Dimension: Status,
      Role     : #Category
    }]
  };

  annotate RootEntity with @UI.Chart: {
    $Type              : 'UI.ChartDefinitionType',
    Title              : 'Chart Title',
    Description        : 'Chart Description',
    ChartType          : #Column,
    DynamicMeasures    : ['@Analytics.AggregatedProperty#sum'],
    Dimensions         : [SalesOrganization],
    MeasureAttributes  : [{
      $Type         : 'UI.ChartMeasureAttributeType',
      DynamicMeasure: '@Analytics.AggregatedProperty#sum',
      Role          : #Axis1
    }],
    DimensionAttributes: [{
      $Type    : 'UI.ChartDimensionAttributeType',
      Dimension: SalesOrganization,
      Role     : #Category
    }]
  };
}
```

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.Chart">
	<Record Type="UI.ChartDefinitionType">
		<PropertyValue Property="Title" String="Chart Title" />
		<PropertyValue Property="Description" String="Chart Description" />
		<PropertyValue Property="ChartType" EnumMember="UI.ChartType/Column" />
		<PropertyValue Property="DynamicMeasures">
			<Collection>
				<String>@Analytics.AggregatedProperty#min</String>
			</Collection>
		</PropertyValue>
		<PropertyValue Property="Dimensions">
			<Collection>
				<PropertyPath>Status</PropertyPath>
			</Collection>
		</PropertyValue>
		<PropertyValue Property="MeasureAttributes">
			<Collection>
				<Record Type="UI.ChartMeasureAttributeType">
					<PropertyValue Property="DynamicMeasure" String="@Analytics.AggregatedProperty#min" />
					<PropertyValue Property="Role" EnumMember="UI.ChartMeasureRoleType/Axis1" />
				</Record>
			</Collection>
		</PropertyValue>
		<PropertyValue Property="DimensionAttributes">
			<Collection>
				<Record Type="UI.ChartDimensionAttributeType">
					<PropertyValue Property="Dimension" PropertyPath="Status" />
					<PropertyValue Property="Role" EnumMember="UI.ChartDimensionRoleType/Category" />
				</Record>
			</Collection>
		</PropertyValue>
	</Record>
</Annotation>
```

**LANGUAGE**: ABAP

**CODE**:
```abap
@AbapCatalog.sqlViewName: 'ZROOTENTITY'
@AbapCatalog.compiler.compareFilter: true
@AbapCatalog.preserveKey: true
@AccessControl.authorizationCheck: #CHECK
@EndUserText.label: 'Root Entity'
@Metadata.allowExtensions: true
@Analytics.dataCategory: #CUBE
define root view entity RootEntity as select from root_entity_db {
    @EndUserText.label: 'Sales Order'
    key SalesOrder,
    
    @EndUserText.label: 'Sales Order Type'
    SalesOrderType,
    
    @EndUserText.label: 'Sales Organization'
    @ObjectModel.text.element: ['SalesOrganization_Text']
    SalesOrganization,
    
    @EndUserText.label: 'Sales Organization Text'
    SalesOrganization_Text,
    
    @EndUserText.label: 'Overall SD Process Status'
    OverallSDProcessStatus,
    
    @Semantics.amount.currencyCode: 'Currency'
    @EndUserText.label: 'Net Pricing'
    NetPricing,
    
    @Semantics.amount.currencyCode: 'Currency'
    @EndUserText.label: 'Total Net Amount'
    @DefaultAggregation: #SUM
    totalPricing,
    
    @EndUserText.label: 'Minimum Net Amount'
    @DefaultAggregation: #MIN
    @ObjectModel.virtualElement: true
    @ObjectModel.virtualElementCalculatedBy: 'ABAP:CL_VIRTUAL_ELEMENT_CALC'
    cast(0 as abap.dec(16,3)) as minPricing,
    
    @EndUserText.label: 'Maximum Net Amount'
    @DefaultAggregation: #MAX
    @ObjectModel.virtualElement: true
    @ObjectModel.virtualElementCalculatedBy: 'ABAP:CL_VIRTUAL_ELEMENT_CALC'
    cast(0 as abap.dec(16,3)) as maxPricing,
    
    @EndUserText.label: 'Average Net Amount'
    @DefaultAggregation: #AVG
    @ObjectModel.virtualElement: true
    @ObjectModel.virtualElementCalculatedBy: 'ABAP:CL_VIRTUAL_ELEMENT_CALC'
    cast(0 as abap.dec(16,3)) as avgPricing
}

@Metadata.layer: #CORE
@UI: {
  chart: {
    title: 'Chart Title',
    description: 'Chart Description',
    chartType: #COLUMN,
    dimensions: ['SalesOrganization'],
    measures: ['totalPricing'],
    dimensionAttributes: [{
      dimension: 'SalesOrganization',
      role: #CATEGORY
    }],
    measureAttributes: [{
      measure: 'totalPricing',
      role: #AXIS_1
    }]
  }
}
annotate view RootEntity with {
    @UI.lineItem: [{ position: 10 }]
    SalesOrder;
    
    @UI.lineItem: [{ position: 20 }]
    SalesOrderType;
    
    @UI.lineItem: [{ position: 30 }]
    SalesOrganization;
    
    @UI.lineItem: [{ position: 40 }]
    OverallSDProcessStatus;
    
    @UI.lineItem: [{ position: 50 }]
    NetPricing;
    
    @UI.lineItem: [{ position: 60 }]
    totalPricing;
}

@AbapCatalog.sqlViewName: 'ZCHILDENTITY'
@AbapCatalog.compiler.compareFilter: true
@AbapCatalog.preserveKey: true
@AccessControl.authorizationCheck: #CHECK
@EndUserText.label: 'Child Entity'
@Metadata.allowExtensions: true
define view entity ChildEntity as select from child_entity_db 
association [1..1] to RootEntity as _Parent on $projection.Parent = _Parent.SalesOrder
{
    @EndUserText.label: 'ID'
    key ID,
    
    @EndUserText.label: 'Status'
    Status,
    
    @Semantics.amount.currencyCode: 'Currency'
    @EndUserText.label: 'Minimum Net Amount'
    minPricing,
    
    @UI.hidden: true
    Parent,
    
    _Parent
}

@Metadata.layer: #CORE
@UI: {
  chart: {
    title: 'Chart Title',
    description: 'Chart Description',
    chartType: #COLUMN,
    dimensions: ['Status'],
    measures: ['minPricing'],
    dimensionAttributes: [{
      dimension: 'Status',
      role: #CATEGORY
    }],
    measureAttributes: [{
      measure: 'minPricing',
      role: #AXIS_1
    }]
  }
}
annotate view ChildEntity with {
    @UI.lineItem: [{ position: 10 }]
    ID;
    
    @UI.lineItem: [{ position: 20 }]
    Status;
    
    @UI.lineItem: [{ position: 30 }]
    minPricing;
}
```

**STEP**: Analytics Configuration

**DESCRIPTION**: Analytics aggregated properties define the measures that can be used in the chart.

**LANGUAGE**: CDS

**CODE**:
```cds
service Service {
  @Analytics.AggregatedProperty #min: {
    Name                : 'minPricing',
    AggregationMethod   : 'min',
    AggregatableProperty: 'NetPricing',
    ![@Common.Label]    : 'Minimum Net Amount'
  }
  @Analytics.AggregatedProperty #max: {
    Name                : 'maxPricing',
    AggregationMethod   : 'max',
    AggregatableProperty: 'NetPricing',
    ![@Common.Label]    : 'Maximum Net Amount'
  }
  @Analytics.AggregatedProperty #avg: {
    Name                : 'avgPricing',
    AggregationMethod   : 'average',
    AggregatableProperty: 'NetPricing',
    ![@Common.Label]    : 'Average Net Amount'
  }
  @Analytics.AggregatedProperty #sum: {
    Name                : 'totalPricing',
    AggregationMethod   : 'sum',
    AggregatableProperty: 'NetPricing',
    ![@Common.Label]    : 'Total Net Amount'
  }

  @Aggregation.ApplySupported       : {
    Transformations         : [
      'aggregate',
      'topcount',
      'bottomcount',
      'identity',
      'concat',
      'groupby',
      'filter',
      'expand',
      'top',
      'skip',
      'orderby',
      'search'
    ],
    CustomAggregationMethods: ['Custom.concat'],
    Rollup                  : #None,
    PropertyRestrictions    : true,
    GroupableProperties     : [
      SalesOrderType,
      SalesOrder,
      SalesOrganization,
      OverallSDProcessStatus
    ],
    AggregatableProperties  : [{Property: NetPricing}]
  }
  entity RootEntity {
    key SalesOrder                 : String(10) @title: 'Sales Order No.';
        NetPricing                 : Decimal(15, 10);

        OverallSDProcessStatus     : String(1)  @(
          title              : 'Overall Process Status',
          Common.Text        : OverallSDProcessStatusText,
          UI.ValueCriticality: [
            {
              Value      : 'A',
              Criticality: #Negative
            },
            {
              Value      : 'B',
              Criticality: #Critical
            },
            {
              Value      : 'C',
              Criticality: #Positive
            }
          ]
        );
        OverallSDProcessStatusText : String;

        SalesOrderType             : String(4)  @(
          title      : 'Sales Order Type',
          Common.Text: SalesOrderTypeText
        );
        SalesOrderTypeText         : String;

        SalesOrganization          : String(4)  @(
          title      : 'Sales Organization',
          Common.Text: SalesOrganizationText
        );
        SalesOrganizationText      : String;
        items                      : Association to many ChildEntity
                                       on items.Parent = $self;
  }

  @Analytics.AggregatedProperty #min: {
    Name                : 'minPricing',
    AggregationMethod   : 'min',
    AggregatableProperty: 'ChildPrice',
    ![@Common.Label]    : 'Minimum child Price'
  }
  @Analytics.AggregatedProperty #max: {
    Name                : 'maxPricing',
    AggregationMethod   : 'max',
    AggregatableProperty: 'ChildPrice',
    ![@Common.Label]    : 'Maximum Child Price'
  }

  @Aggregation.ApplySupported       : {
    Transformations         : [
      'aggregate',
      'topcount',
      'bottomcount',
      'identity',
      'concat',
      'groupby',
      'filter',
      'expand',
      'top',
      'skip',
      'orderby',
      'search'
    ],
    CustomAggregationMethods: ['Custom.concat'],
    Rollup                  : #None,
    PropertyRestrictions    : true,
    GroupableProperties     : [
      CommentedBy,
      UpdatedBy,
      Status
    ],
    AggregatableProperties  : [{Property: ChildPrice}]
  }
  entity ChildEntity {
    key ID                 : Integer                   @title: 'Identifier';
        ChildPrice         : Decimal(15, 10);
        Status             : String(4)                 @(
          title      : 'Status',
          Common.Text: CommentedBy
        );
        SalesOrderTypeText : String;
        CommentedBy        : String                    @title: 'Commented by';
        UpdatedBy          : String                    @title: 'Updated by';
        Parent             : Association to RootEntity @UI.Hidden;
  }

  annotate ChildEntity with @UI.Chart: {
    $Type              : 'UI.ChartDefinitionType',
    Title              : 'Chart Title',
    Description        : 'Chart Description',
    ChartType          : #Column,
    DynamicMeasures    : ['@Analytics.AggregatedProperty#min'],
    Dimensions         : [Status],
    MeasureAttributes  : [{
      $Type         : 'UI.ChartMeasureAttributeType',
      DynamicMeasure: '@Analytics.AggregatedProperty#min',
      Role          : #Axis1
    }],
    DimensionAttributes: [{
      $Type    : 'UI.ChartDimensionAttributeType',
      Dimension: Status,
      Role     : #Category
    }]
  };

  annotate RootEntity with @UI.Chart: {
    $Type              : 'UI.ChartDefinitionType',
    Title              : 'Chart Title',
    Description        : 'Chart Description',
    ChartType          : #Column,
    DynamicMeasures    : ['@Analytics.AggregatedProperty#sum'],
    Dimensions         : [SalesOrganization],
    MeasureAttributes  : [{
      $Type         : 'UI.ChartMeasureAttributeType',
      DynamicMeasure: '@Analytics.AggregatedProperty#sum',
      Role          : #Axis1
    }],
    DimensionAttributes: [{
      $Type    : 'UI.ChartDimensionAttributeType',
      Dimension: SalesOrganization,
      Role     : #Category
    }]
  };
}
```

**LANGUAGE**: XML

**CODE**:
```xml
<Schema xmlns="http://docs.oasis-open.org/odata/ns/edm">
	<Annotation Term="Analytics.AggregatedProperty" Qualifier="min">
		<Record Type="Analytics.AggregatedPropertyType">
			<PropertyValue Property="Name" String="minPricing" />
			<PropertyValue Property="AggregationMethod" String="min" />
			<PropertyValue Property="AggregatableProperty" PropertyPath="ChildPrice" />
			<Annotation Term="Common.Label" String="Minimum child Price" />
		</Record>
	</Annotation>

	<Annotation Term="Analytics.AggregatedProperty" Qualifier="max">
		<Record Type="Analytics.AggregatedPropertyType">
			<PropertyValue Property="Name" String="maxPricing" />
			<PropertyValue Property="AggregationMethod" String="max" />
			<PropertyValue Property="AggregatableProperty" PropertyPath="ChildPrice" />
			<Annotation Term="Common.Label" String="Maximum Child Price" />
		</Record>
	</Annotation>
</Schema>
```

**LANGUAGE**: ABAP

**CODE**:
```abap
@AbapCatalog.sqlViewName: 'ZROOTENTITY'
@AbapCatalog.compiler.compareFilter: true
@AbapCatalog.preserveKey: true
@AccessControl.authorizationCheck: #CHECK
@EndUserText.label: 'Root Entity'
@Metadata.allowExtensions: true
@Analytics.dataCategory: #CUBE
define root view entity RootEntity as select from root_entity_db {
    @EndUserText.label: 'Sales Order'
    key SalesOrder,
    
    @EndUserText.label: 'Sales Order Type'
    SalesOrderType,
    
    @EndUserText.label: 'Sales Organization'
    @ObjectModel.text.element: ['SalesOrganization_Text']
    SalesOrganization,
    
    @EndUserText.label: 'Sales Organization Text'
    SalesOrganization_Text,
    
    @EndUserText.label: 'Overall SD Process Status'
    OverallSDProcessStatus,
    
    @Semantics.amount.currencyCode: 'Currency'
    @EndUserText.label: 'Net Pricing'
    NetPricing,
    
    @Semantics.amount.currencyCode: 'Currency'
    @EndUserText.label: 'Total Net Amount'
    @DefaultAggregation: #SUM
    totalPricing,
    
    @EndUserText.label: 'Minimum Net Amount'
    @DefaultAggregation: #MIN
    @ObjectModel.virtualElement: true
    @ObjectModel.virtualElementCalculatedBy: 'ABAP:CL_VIRTUAL_ELEMENT_CALC'
    cast(0 as abap.dec(16,3)) as minPricing,
    
    @EndUserText.label: 'Maximum Net Amount'
    @DefaultAggregation: #MAX
    @ObjectModel.virtualElement: true
    @ObjectModel.virtualElementCalculatedBy: 'ABAP:CL_VIRTUAL_ELEMENT_CALC'
    cast(0 as abap.dec(16,3)) as maxPricing,
    
    @EndUserText.label: 'Average Net Amount'
    @DefaultAggregation: #AVG
    @ObjectModel.virtualElement: true
    @ObjectModel.virtualElementCalculatedBy: 'ABAP:CL_VIRTUAL_ELEMENT_CALC'
    cast(0 as abap.dec(16,3)) as avgPricing
}

@Metadata.layer: #CORE
@UI: {
  chart: {
    title: 'Chart Title',
    description: 'Chart Description',
    chartType: #COLUMN,
    dimensions: ['SalesOrganization'],
    measures: ['totalPricing'],
    dimensionAttributes: [{
      dimension: 'SalesOrganization',
      role: #CATEGORY
    }],
    measureAttributes: [{
      measure: 'totalPricing',
      role: #AXIS_1
    }]
  }
}
annotate view RootEntity with {
    @UI.lineItem: [{ position: 10 }]
    SalesOrder;
    
    @UI.lineItem: [{ position: 20 }]
    SalesOrderType;
    
    @UI.lineItem: [{ position: 30 }]
    SalesOrganization;
    
    @UI.lineItem: [{ position: 40 }]
    OverallSDProcessStatus;
    
    @UI.lineItem: [{ position: 50 }]
    NetPricing;
    
    @UI.lineItem: [{ position: 60 }]
    totalPricing;
}

@AbapCatalog.sqlViewName: 'ZCHILDENTITY'
@AbapCatalog.compiler.compareFilter: true
@AbapCatalog.preserveKey: true
@AccessControl.authorizationCheck: #CHECK
@EndUserText.label: 'Child Entity'
@Metadata.allowExtensions: true
define view entity ChildEntity as select from child_entity_db 
association [1..1] to RootEntity as _Parent on $projection.Parent = _Parent.SalesOrder
{
    @EndUserText.label: 'ID'
    key ID,
    
    @EndUserText.label: 'Status'
    Status,
    
    @Semantics.amount.currencyCode: 'Currency'
    @EndUserText.label: 'Minimum Net Amount'
    minPricing,
    
    @UI.hidden: true
    Parent,
    
    _Parent
}

@Metadata.layer: #CORE
@UI: {
  chart: {
    title: 'Chart Title',
    description: 'Chart Description',
    chartType: #COLUMN,
    dimensions: ['Status'],
    measures: ['minPricing'],
    dimensionAttributes: [{
      dimension: 'Status',
      role: #CATEGORY
    }],
    measureAttributes: [{
      measure: 'minPricing',
      role: #AXIS_1
    }]
  }
}
annotate view ChildEntity with {
    @UI.lineItem: [{ position: 10 }]
    ID;
    
    @UI.lineItem: [{ position: 20 }]
    Status;
    
    @UI.lineItem: [{ position: 30 }]
    minPricing;
}
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: Sample.fragment.xml

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<macros:Chart
		id="chartDefault"
		header="Chart Header"
		headerVisible="true"
		metaPath="/RootEntity/items/@com.sap.vocabularies.UI.v1.Chart"
		personalization="Sort,Type,Item,Filter"
		selectionMode="Multiple"
	/>
</core:FragmentDefinition>

```

**FILE**: RootEntity.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"SalesOrder": "2919682",
		"NetPricing": 20000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "1",
		"SalesOrganizationText": "Sales Org. 0001"
	},
	{
		"SalesOrder": "2922870",
		"NetPricing": 10000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "2",
		"SalesOrganizationText": "Sales Org. 002"
	},
	{
		"SalesOrder": "6437",
		"NetPricing": 10000,
		"SalesOrderType": "CCLN",
		"SalesOrderTypeText": "Ret. Packaging Issue",
		"OverallSDProcessStatus": "B",
		"OverallSDProcessStatusText": "In Process",
		"SalesOrganization": "3",
		"SalesOrganizationText": "Sales Org. 003"
	},
	{
		"SalesOrder": "2915717",
		"NetPricing": 10000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "B",
		"OverallSDProcessStatusText": "In Process",
		"SalesOrganization": "12",
		"SalesOrganizationText": "Sales Org. 012"
	},
	{
		"SalesOrder": "2916499",
		"NetPricing": 20000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "1",
		"SalesOrganizationText": "test"
	},
	{
		"SalesOrder": "2916639",
		"NetPricing": 30000,
		"SalesOrderType": "CR",
		"SalesOrderTypeText": "Critical Order",
		"OverallSDProcessStatus": "B",
		"OverallSDProcessStatusText": "In Process",
		"SalesOrganization": "1010",
		"SalesOrganizationText": "Sales Org. 1010"
	},
	{
		"SalesOrder": "2917844",
		"NetPricing": 50000,
		"SalesOrderType": "CCLN",
		"SalesOrderTypeText": "Ret. Packaging Issue",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "1111",
		"SalesOrganizationText": "Sales Org. 1111"
	},
	{
		"SalesOrder": "2919431",
		"NetPricing": 10000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "1710",
		"SalesOrganizationText": "Food Sales Org."
	},
	{
		"SalesOrder": "2922871",
		"NetPricing": 10000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "2320",
		"SalesOrganizationText": "Sales Org. 2320"
	},
	{
		"SalesOrder": "2922872",
		"NetPricing": 30000,
		"SalesOrderType": "CR",
		"SalesOrderTypeText": "Critical Order",
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "9000",
		"SalesOrganizationText": "FMS Sales Org. 1"
	},
	{
		"SalesOrder": "2922873",
		"NetPricing": 100000,
		"SalesOrderType": "CCLN",
		"SalesOrderTypeText": "Ret. Packaging Issue",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "998",
		"SalesOrganizationText": "Singapore Sales Org."
	},
	{
		"SalesOrder": "2922874",
		"NetPricing": 100000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "AFR",
		"SalesOrganizationText": "My Sales Org."
	},
	{
		"SalesOrder": "2922875",
		"NetPricing": 20000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "CF01",
		"SalesOrganizationText": "Sales Org. 0001"
	},
	{
		"SalesOrder": "2922876",
		"NetPricing": 30000,
		"SalesOrderType": "CR",
		"SalesOrderTypeText": "Critical Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "CM01",
		"SalesOrganizationText": "CM Sales Org. 0001"
	},
	{
		"SalesOrder": "2922877",
		"NetPricing": 500000,
		"SalesOrderType": "CCLN",
		"SalesOrderTypeText": "Ret. Packaging Issue",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "CM03",
		"SalesOrganizationText": "CM Sales Org. 0003"
	},
	{
		"SalesOrder": "2922878",
		"NetPricing": 100000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "DBM",
		"SalesOrganizationText": "DBM"
	},
	{
		"SalesOrder": "2922879",
		"NetPricing": 10000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "DPS",
		"SalesOrganizationText": "DPS"
	},
	{
		"SalesOrder": "2922880",
		"NetPricing": 30000,
		"SalesOrderType": "CR",
		"SalesOrderTypeText": "Critical Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "GK01",
		"SalesOrganizationText": "Sales Org. 004"
	},
	{
		"SalesOrder": "2922881",
		"NetPricing": 10000,
		"SalesOrderType": "CCLN",
		"SalesOrderTypeText": "Ret. Packaging Issue",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "GK02",
		"SalesOrganizationText": "Sales Org. 005"
	},
	{
		"SalesOrder": "2922882",
		"NetPricing": 10000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "HF01",
		"SalesOrganizationText": "HF Sales Org."
	},
	{
		"SalesOrder": "2922883",
		"NetPricing": 10000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "1",
		"SalesOrganizationText": "Sales Org. 0001"
	},
	{
		"SalesOrder": "2922884",
		"NetPricing": 10000,
		"SalesOrderType": "CR",
		"SalesOrderTypeText": "Critical Order",
		"OverallSDProcessStatus": "B",
		"OverallSDProcessStatusText": "In Process",
		"SalesOrganization": "2",
		"SalesOrganizationText": "Sales Org. 002"
	},
	{
		"SalesOrder": "2922885",
		"NetPricing": 20000,
		"SalesOrderType": "CCLN",
		"SalesOrderTypeText": "Ret. Packaging Issue",
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "3",
		"SalesOrganizationText": "Sales Org. 003"
	},
	{
		"SalesOrder": "2922886",
		"NetPricing": 300000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "B",
		"OverallSDProcessStatusText": "In Process",
		"SalesOrganization": "12",
		"SalesOrganizationText": "Sales Org. 012"
	},
	{
		"SalesOrder": "2922887",
		"NetPricing": 50000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "1",
		"SalesOrganizationText": "test"
	}
]

```

**FILE**: ChildEntity.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"Parent_SalesOrder": "2919682",
		"ID": "1",
		"Status": "1111",
		"UpdatedBy": "John Andrew",
		"CommentedBy": "Sibylle Haumann",
		"ChildPrice": 13.0
	},
	{
		"Parent_SalesOrder": "2922870",
		"ID": "2",
		"Status": "2222",
		"UpdatedBy": "Adam Robert",
		"CommentedBy": "James Smith",
		"ChildPrice": 1.0
	},
	{
		"Parent_SalesOrder": "6437",
		"ID": "3",
		"Status": "3333",
		"UpdatedBy": "Steven Michael",
		"CommentedBy": "Sibylle Haumann",
		"ChildPrice": 10.0
	}
]

```

--------------------------------

**TITLE**: Chart with Filter Bar

**INTRODUCTION**: Linking the Chart building block to the FilterBar building block enables you to provide filtering capabilities. This example shows a chart with a filter bar that allows users to filter the data displayed in the chart.

**TAGS**: chart, filter bar, integration, filtering, data

**STEP**: Implementation

**DESCRIPTION**: The Chart building block can be connected to a FilterBar using the filterBar property to enable interactive filtering.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<VBox fitContainer="true" alignItems="Stretch" alignContent="Stretch" justifyContent="Start" renderType="Div">
		<macros:FilterBar metaPath="@com.sap.vocabularies.UI.v1.SelectionFields#SF1" id="FilterBarChartFilterBar" />
		<macros:Chart
			id="chartFilterBar"
			metaPath="/RootEntity/@com.sap.vocabularies.UI.v1.Chart"
			personalization="Sort,Type,Item"
			selectionMode="Multiple"
			filterBar="FilterBarChartFilterBar"
		/>
		<Text text="NOTE: Sorting doesn't work here, since we're using a mock service" />
	</VBox>
</core:FragmentDefinition>
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
service Service {
  @Analytics.AggregatedProperty #min: {
    Name                : 'minPricing',
    AggregationMethod   : 'min',
    AggregatableProperty: 'NetPricing',
    ![@Common.Label]    : 'Minimum Net Amount'
  }
  @Analytics.AggregatedProperty #max: {
    Name                : 'maxPricing',
    AggregationMethod   : 'max',
    AggregatableProperty: 'NetPricing',
    ![@Common.Label]    : 'Maximum Net Amount'
  }
  @Analytics.AggregatedProperty #avg: {
    Name                : 'avgPricing',
    AggregationMethod   : 'average',
    AggregatableProperty: 'NetPricing',
    ![@Common.Label]    : 'Average Net Amount'
  }
  @Analytics.AggregatedProperty #sum: {
    Name                : 'totalPricing',
    AggregationMethod   : 'sum',
    AggregatableProperty: 'NetPricing',
    ![@Common.Label]    : 'Total Net Amount'
  }

  @Aggregation.ApplySupported       : {
    Transformations         : [
      'aggregate',
      'topcount',
      'bottomcount',
      'identity',
      'concat',
      'groupby',
      'filter',
      'expand',
      'top',
      'skip',
      'orderby',
      'search'
    ],
    CustomAggregationMethods: ['Custom.concat'],
    Rollup                  : #None,
    PropertyRestrictions    : true,
    GroupableProperties     : [
      SalesOrderType,
      SalesOrder,
      SalesOrganization,
      OverallSDProcessStatus
    ],
    AggregatableProperties  : [{Property: NetPricing}]
  }
  entity RootEntity {
    key SalesOrder                 : String(10) @title: 'Sales Order No.';
        NetPricing                 : Decimal(15, 10);

        OverallSDProcessStatus     : String(1)  @(
          title                    : 'Overall Process Status',
          Common.Text              : OverallSDProcessStatusText,
          Common.FilterDefaultValue: 'A',
          Common.ValueList         : {
            Label         : 'Status',
            CollectionPath: 'Status',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterOut',
              ValueListProperty: 'status',
              LocalDataProperty: 'OverallSDProcessStatus'
            }]
          },
          Common.ValueListWithFixedValues,
          UI.ValueCriticality      : [
            {
              Value      : 'A',
              Criticality: #Negative
            },
            {
              Value      : 'B',
              Criticality: #Critical
            },
            {
              Value      : 'C',
              Criticality: #Positive
            }
          ]
        );
        OverallSDProcessStatusText : String;

        SalesOrderType             : String(4)  @(
          title      : 'Sales Order Type',
          Common.Text: SalesOrderTypeText
        );
        SalesOrderTypeText         : String;

        SalesOrganization          : String(4)  @(
          title      : 'Sales Organization',
          Common.Text: SalesOrganizationText
        );
        SalesOrganizationText      : String;
  }

  entity Status {
    key status : String(1) @(Common.Text: text);
        text   : String;
  }

  annotate RootEntity with @(
    UI.SelectionFields #SF1: [OverallSDProcessStatus],
    UI.Chart               : {
      $Type              : 'UI.ChartDefinitionType',
      Title              : 'Chart Title',
      Description        : 'Chart Description',
      ChartType          : #Column,
      DynamicMeasures    : ['@Analytics.AggregatedProperty#sum'],
      Dimensions         : [SalesOrganization],
      MeasureAttributes  : [{
        $Type         : 'UI.ChartMeasureAttributeType',
        DynamicMeasure: '@Analytics.AggregatedProperty#sum',
        Role          : #Axis1
      }],
      DimensionAttributes: [{
        $Type    : 'UI.ChartDimensionAttributeType',
        Dimension: SalesOrganization,
        Role     : #Category
      }]
    }
  );
}

```

**FILE**: RootEntity.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"SalesOrder": "2919682",
		"NetPricing": 20000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "1",
		"SalesOrganizationText": "Sales Org. 0001"
	},
	{
		"SalesOrder": "2922870",
		"NetPricing": 10000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "2",
		"SalesOrganizationText": "Sales Org. 002"
	},
	{
		"SalesOrder": "6437",
		"NetPricing": 10000,
		"SalesOrderType": "CCLN",
		"SalesOrderTypeText": "Ret. Packaging Issue",
		"OverallSDProcessStatus": "B",
		"OverallSDProcessStatusText": "In Process",
		"SalesOrganization": "3",
		"SalesOrganizationText": "Sales Org. 003"
	},
	{
		"SalesOrder": "2915717",
		"NetPricing": 10000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "B",
		"OverallSDProcessStatusText": "In Process",
		"SalesOrganization": "12",
		"SalesOrganizationText": "Sales Org. 012"
	},
	{
		"SalesOrder": "2916499",
		"NetPricing": 20000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "1",
		"SalesOrganizationText": "test"
	},
	{
		"SalesOrder": "2916639",
		"NetPricing": 30000,
		"SalesOrderType": "CR",
		"SalesOrderTypeText": "Critical Order",
		"OverallSDProcessStatus": "B",
		"OverallSDProcessStatusText": "In Process",
		"SalesOrganization": "1010",
		"SalesOrganizationText": "Sales Org. 1010"
	},
	{
		"SalesOrder": "2917844",
		"NetPricing": 50000,
		"SalesOrderType": "CCLN",
		"SalesOrderTypeText": "Ret. Packaging Issue",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "1111",
		"SalesOrganizationText": "Sales Org. 1111"
	},
	{
		"SalesOrder": "2919431",
		"NetPricing": 10000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "1710",
		"SalesOrganizationText": "Food Sales Org."
	},
	{
		"SalesOrder": "2922871",
		"NetPricing": 10000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "2320",
		"SalesOrganizationText": "Sales Org. 2320"
	},
	{
		"SalesOrder": "2922872",
		"NetPricing": 30000,
		"SalesOrderType": "CR",
		"SalesOrderTypeText": "Critical Order",
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "9000",
		"SalesOrganizationText": "FMS Sales Org. 1"
	},
	{
		"SalesOrder": "2922873",
		"NetPricing": 100000,
		"SalesOrderType": "CCLN",
		"SalesOrderTypeText": "Ret. Packaging Issue",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "998",
		"SalesOrganizationText": "Singapore Sales Org."
	},
	{
		"SalesOrder": "2922874",
		"NetPricing": 100000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "AFR",
		"SalesOrganizationText": "My Sales Org."
	},
	{
		"SalesOrder": "2922875",
		"NetPricing": 20000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "CF01",
		"SalesOrganizationText": "Sales Org. 0001"
	},
	{
		"SalesOrder": "2922876",
		"NetPricing": 30000,
		"SalesOrderType": "CR",
		"SalesOrderTypeText": "Critical Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "CM01",
		"SalesOrganizationText": "CM Sales Org. 0001"
	},
	{
		"SalesOrder": "2922877",
		"NetPricing": 500000,
		"SalesOrderType": "CCLN",
		"SalesOrderTypeText": "Ret. Packaging Issue",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "CM03",
		"SalesOrganizationText": "CM Sales Org. 0003"
	},
	{
		"SalesOrder": "2922878",
		"NetPricing": 100000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "DBM",
		"SalesOrganizationText": "DBM"
	},
	{
		"SalesOrder": "2922879",
		"NetPricing": 10000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "DPS",
		"SalesOrganizationText": "DPS"
	},
	{
		"SalesOrder": "2922880",
		"NetPricing": 30000,
		"SalesOrderType": "CR",
		"SalesOrderTypeText": "Critical Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "GK01",
		"SalesOrganizationText": "Sales Org. 004"
	},
	{
		"SalesOrder": "2922881",
		"NetPricing": 10000,
		"SalesOrderType": "CCLN",
		"SalesOrderTypeText": "Ret. Packaging Issue",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "GK02",
		"SalesOrganizationText": "Sales Org. 005"
	},
	{
		"SalesOrder": "2922882",
		"NetPricing": 10000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "HF01",
		"SalesOrganizationText": "HF Sales Org."
	},
	{
		"SalesOrder": "2922883",
		"NetPricing": 10000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "1",
		"SalesOrganizationText": "Sales Org. 0001"
	},
	{
		"SalesOrder": "2922884",
		"NetPricing": 10000,
		"SalesOrderType": "CR",
		"SalesOrderTypeText": "Critical Order",
		"OverallSDProcessStatus": "B",
		"OverallSDProcessStatusText": "In Process",
		"SalesOrganization": "2",
		"SalesOrganizationText": "Sales Org. 002"
	},
	{
		"SalesOrder": "2922885",
		"NetPricing": 20000,
		"SalesOrderType": "CCLN",
		"SalesOrderTypeText": "Ret. Packaging Issue",
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "3",
		"SalesOrganizationText": "Sales Org. 003"
	},
	{
		"SalesOrder": "2922886",
		"NetPricing": 300000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "B",
		"OverallSDProcessStatusText": "In Process",
		"SalesOrganization": "12",
		"SalesOrganizationText": "Sales Org. 012"
	},
	{
		"SalesOrder": "2922887",
		"NetPricing": 50000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "1",
		"SalesOrganizationText": "test"
	}
]

```

**FILE**: status.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"status": "A",
		"text": "Open"
	},
	{
		"status": "B",
		"text": "In Process"
	},
	{
		"status": "C",
		"text": "Completed"
	}
]

```

--------------------------------

**TITLE**: Chart APIs

**INTRODUCTION**: The Chart building block enables you to extend the chart using APIs. This includes presentation variant management, selection variant handling, and variant management capabilities.

**TAGS**: chart APIs, presentation variant, get presentation variant, set presentation variant, programmatic access

**STEP**: Presentation Variant Management

**DESCRIPTION**: You can get and set the presentation variant of a chart using the APIs provided by the Chart building block.

**STEP**: Selection Variant Management

**DESCRIPTION**: You can get and set the selection variant of a chart using the APIs provided by the Chart building block. This function considers only the selection variant applied at the control level.

**STEP**: Variant Management

**DESCRIPTION**: You can get the currently selected variant and change the variant of a chart using the APIs provided by the Chart building block.

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: Sample.fragment.xml

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros" xmlns:ce="sap.ui.codeeditor">
	<VBox>
		<macros:Chart
			id="chartPublicAPIs"
			header="Chart Header"
			headerVisible="true"
			metaPath="@com.sap.vocabularies.UI.v1.Chart"
			selectionChange=".onChartSelectionChanged"
			personalization="Sort,Type,Item,Filter"
			selectionMode="Multiple"
			variantManagement="Control"
		/>
		<Text text="NOTE: Sorting doesn't work here, since we're using a mock service" class="sapUiMediumMarginTop" />

		<Panel expandable="false" expanded="false" headerText="Interacting with Chart API" class="sapUiMediumMarginTop">
			<Panel expandable="true" expanded="false" headerText="Presentation Variant">
				<FlexBox direction="Column" fitContainer="true" justifyContent="Start">
					<HBox alignItems="Center" class="sapUi-Std-PaddingS">
						<Button width="100%" text="getPresentationVariant" press=".chartPVToCodeEditor" />
						<Text
							text="Click this button to get the chart's current presentation variant to the code editor below."
							width="100%"
							class="sapUiSmallMargin"
						/>
					</HBox>
					<HBox alignItems="Center" class="sapUi-Std-PaddingS">
						<Button
							width="100%"
							text="setPresentationVariant"
							press=".codeEditorPVToChart"
							tooltip="{interactionModel>/setPVButton/tooltip}"
							type="{interactionModel>/setPVButton/type}"
						/>
						<Text
							text="Click this button to set the presentation variant from the code editor below to the chart."
							width="100%"
							class="sapUiSmallMargin"
						/>
					</HBox>

					<ce:CodeEditor
						id="chart"
						type="json"
						lineNumbers="true"
						value="{interactionModel>/pvObject}"
						editable="true"
						liveChange=".validatePV"
						height="10rem"
					>
						<ce:layoutData>
							<FlexItemData growFactor="1" shrinkFactor="1" />
						</ce:layoutData>
					</ce:CodeEditor>
				</FlexBox>
			</Panel>

			<Panel expandable="true" expanded="false" headerText="Selection Variant">
				<FlexBox direction="Column" fitContainer="true" justifyContent="Start">
					<HBox alignItems="Center" class="sapUi-Std-PaddingS">
						<Button width="100%" text="getSelectionVariant" press=".chartSVToCodeEditor" />
						<Text
							text="Click this button to get the current selection variant from the chart and insert it into the code editor. This function considers only the selection variant applied at the control level."
							width="100%"
							class="sapUiSmallMargin"
						/>
					</HBox>
					<HBox alignItems="Center" class="sapUi-Std-PaddingS">
						<Button
							width="100%"
							text="setSelectionVariant"
							press=".codeEditorSVToChart"
							tooltip="{interactionModel>/setSVButton/tooltip}"
							type="{interactionModel>/setSVButton/type}"
						/>
						<Text
							text="Click this button to set the selection variant from the code editor below to the chart."
							width="100%"
							class="sapUiSmallMargin"
						/>
					</HBox>

					<ce:CodeEditor
						id="chartSV"
						type="json"
						lineNumbers="true"
						value="{interactionModel>/svObject}"
						editable="true"
						liveChange=".validateSV"
						height="10rem"
					>
						<ce:layoutData>
							<FlexItemData growFactor="1" shrinkFactor="1" />
						</ce:layoutData>
					</ce:CodeEditor>
				</FlexBox>
			</Panel>

			<Panel expandable="true" expanded="false" headerText="Variant Management">
				<FlexBox direction="Column" fitContainer="true" justifyContent="Start">
					<HBox alignItems="Center" class="sapUi-Std-PaddingS">
						<Button width="100%" text="getCurrentVariantKey" press=".variantToCodeEditor" />
						<Text
							text="Click this button to get the current variant key from the chart and insert it into the code editor."
							width="100%"
							class="sapUiSmallMargin"
						/>
					</HBox>
					<HBox alignItems="Center" class="sapUi-Std-PaddingS">
						<Button width="100%" text="setCurrentVariantKey" press=".codeEditorToVariant" />
						<Text
							text="Click this button to set the variant key to the chart from the code editor."
							width="100%"
							class="sapUiSmallMargin"
						/>
					</HBox>

					<ce:CodeEditor
						id="chartVariant"
						type="json"
						lineNumbers="true"
						value="{interactionModel>/variantKey}"
						editable="true"
						height="3rem"
					>
						<ce:layoutData>
							<FlexItemData growFactor="1" shrinkFactor="1" />
						</ce:layoutData>
					</ce:CodeEditor>
				</FlexBox>
			</Panel>
		</Panel>
	</VBox>
</core:FragmentDefinition>

```

**FILE**: ChartPublicAPIs.controller.ts

**LANGUAGE**: TypeScript

**CODE**:
```typescript
import Log from "sap/base/Log";
import PageController from "sap/fe/core/PageController";
import type Chart from "sap/fe/macros/Chart";
import PresentationVariant from "sap/fe/navigation/PresentationVariant";
import SelectionVariant from "sap/fe/navigation/SelectionVariant";
import type Button from "sap/m/Button";
import MessageToast from "sap/m/MessageToast";
import type UI5Event from "sap/ui/base/Event";
import JSONModel from "sap/ui/model/json/JSONModel";

export default class ChartPublicAPIsController extends PageController {
	public onAfterRendering(): void {
		const view = this.getView();
		const interactionModel = new JSONModel({
			pvObject: "",
			variantKey: "",
			setPVButton: {
				type: "Success",
				tooltip: ""
			},
			svObject: "",
			setSVButton: {
				type: "Success",
				tooltip: ""
			}
		});
		view.setModel(interactionModel, "interactionModel");
		this.chartPVToCodeEditor();
		this.chartSVToCodeEditor();
	}

	public onChartSelectionChanged(): void {
		MessageToast.show("Selection changed");
	}

	public chartPVToCodeEditor(): void {
		const chart = this.getView().byId("chartPublicAPIs") as Chart;
		const interactionModel = chart.getModel("interactionModel") as JSONModel;

		/** getPresentationVariant API: gives the current presentation from the table */
		/*****************************************************************************************/
		chart.getPresentationVariant().then((presentationVariant: PresentationVariant) => {
			interactionModel.setProperty("/pvObject", JSON.stringify(presentationVariant.toJSONObject(), null, "  "));
		});
		/*****************************************************************************************/
	}

	public codeEditorPVToChart(): void {
		const view = this.getView();
		const chart = this.getView().byId("chartPublicAPIs") as Chart;
		const interactionModel = chart.getModel("interactionModel") as JSONModel;
		const pvObject = JSON.parse(interactionModel.getProperty("/pvObject"));

		try {
			const presentationVariant = new PresentationVariant(pvObject);
			/** setPresentationVariant API: applies the supplied presentation to the chart */
			/*****************************************************************************************/
			chart
				.setPresentationVariant(presentationVariant)
				.then(() => {
					MessageToast.show("Presentation variant from code editor is set to chart.");
				})
				.catch((err: Error | string) => {
					const message = err instanceof Error ? err.message : String(err);
					Log.error(`set SV error: ${message}`);
				});
			view.setModel(interactionModel, "interactionModel");
			/**************************************************************************/
		} catch (err) {
			const message = err instanceof Error ? err.message : String(err);
			Log.error(`PV creation error: ${message}`);
		}
	}

	public validatePV(event: UI5Event<{ value: string }, Button>): void {
		// To validate the presentation variant in code editor and change the status and type of "setPresentationVariant" button.
		const interactionModel = event.getSource().getModel("interactionModel") as JSONModel;
		const pvString = event.getParameter("value");
		try {
			const presentationVariantToSet = new PresentationVariant(pvString);
			interactionModel.setProperty("/setPVButton/type", presentationVariantToSet ? "Success" : "Critical");
		} catch (err) {
			interactionModel.setProperty("/setPVButton/type", "Critical");
			interactionModel.setProperty("/setPVButton/tooltip", "Presentation Variant validation failed in code editor");
		}
	}

	public variantToCodeEditor(): void {
		// accessing custom element from FPM sample
		const chart = this.getView().byId("chartPublicAPIs") as Chart;
		const interactionModel = chart.getModel("interactionModel") as JSONModel;
		interactionModel.setProperty("/variantKey", chart.getCurrentVariantKey());
	}

	public codeEditorToVariant(): void {
		// accessing custom element from FPM sample
		const chart = this.getView().byId("chartPublicAPIs") as Chart;
		const interactionModel = chart.getModel("interactionModel") as JSONModel;
		const variantKey = interactionModel.getProperty("/variantKey");
		try {
			chart.setCurrentVariantKey(variantKey);
		} catch (err) {
			const message = err instanceof Error ? err.message : String(err);
			Log.error(`PV creation error: ${message}`);
		}
	}

	public chartSVToCodeEditor(): void {
		const chart = this.getView().byId("chartPublicAPIs") as Chart;
		const interactionModel = chart.getModel("interactionModel") as JSONModel;

		/** getSelectionVariant API: gives the current selections from the chart */
		/*****************************************************************************************/
		chart.getSelectionVariant().then((selectionVariant: SelectionVariant) => {
			interactionModel.setProperty("/svObject", JSON.stringify(selectionVariant.toJSONObject(), null, "  "));
		});
		/*****************************************************************************************/
	}

	public codeEditorSVToChart(): void {
		// accessing custom element from FPM sample
		const chart = this.getView().byId("chartPublicAPIs") as Chart;
		const interactionModel = chart.getModel("interactionModel") as JSONModel;
		const svString = interactionModel.getProperty("/svObject");
		try {
			const selectionVariantToSet = new SelectionVariant(svString);

			/** setSelectionVariant API: to apply the selection variant to chart */
			/**************************************************************************/
			chart
				.setSelectionVariant(selectionVariantToSet)
				.then(() => {
					MessageToast.show("Selection variant from code editor is set to chart.");
				})
				.catch((err: Error | string) => {
					const message = err instanceof Error ? err.message : String(err);
					Log.error(`set SV error: ${message}`);
				});
			/**************************************************************************/
		} catch (err) {
			const message = err instanceof Error ? err.message : String(err);
			Log.error(`SV creation error: ${message}`);
		}
	}

	public validateSV(event: UI5Event<{ value: string }, Button>): void {
		// To validate the selection variant in code editor and change the status and type of "setSelectionVariant" button.
		const interactionModel = event.getSource().getModel("interactionModel") as JSONModel;
		const svString = event.getParameter("value");
		try {
			const selectionVariantToSet = new SelectionVariant(svString);
			interactionModel.setProperty("/setSVButton/type", selectionVariantToSet ? "Success" : "Critical");
		} catch (err) {
			interactionModel.setProperty("/setSVButton/type", "Critical");
			interactionModel.setProperty("/setSVButton/tooltip", "Selection Variant validation failed in code editor");
		}
	}
}

```

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
service Service {
  @Analytics.AggregatedProperty #min: {
    Name                : 'minPricing',
    AggregationMethod   : 'min',
    AggregatableProperty: 'NetPricing',
    ![@Common.Label]    : 'Minimum Net Amount'
  }
  @Analytics.AggregatedProperty #max: {
    Name                : 'maxPricing',
    AggregationMethod   : 'max',
    AggregatableProperty: 'NetPricing',
    ![@Common.Label]    : 'Maximum Net Amount'
  }
  @Analytics.AggregatedProperty #avg: {
    Name                : 'avgPricing',
    AggregationMethod   : 'average',
    AggregatableProperty: 'NetPricing',
    ![@Common.Label]    : 'Average Net Amount'
  }
  @Analytics.AggregatedProperty #sum: {
    Name                : 'totalPricing',
    AggregationMethod   : 'sum',
    AggregatableProperty: 'NetPricing',
    ![@Common.Label]    : 'Total Net Amount'
  }

  @Aggregation.ApplySupported       : {
    Transformations         : [
      'aggregate',
      'topcount',
      'bottomcount',
      'identity',
      'concat',
      'groupby',
      'filter',
      'expand',
      'top',
      'skip',
      'orderby',
      'search'
    ],
    CustomAggregationMethods: ['Custom.concat'],
    Rollup                  : #None,
    PropertyRestrictions    : true,
    GroupableProperties     : [
      SalesOrderType,
      SalesOrder,
      SalesOrganization,
      OverallSDProcessStatus
    ],
    AggregatableProperties  : [{Property: NetPricing}]
  }
  entity RootEntity {
    key SalesOrder                 : String(10) @title: 'Sales Order No.';
        NetPricing                 : Decimal(15, 10);

        OverallSDProcessStatus     : String(1)  @(
          title              : 'Overall Process Status',
          Common.Text        : OverallSDProcessStatusText,
          UI.ValueCriticality: [
            {
              Value      : 'A',
              Criticality: #Negative
            },
            {
              Value      : 'B',
              Criticality: #Critical
            },
            {
              Value      : 'C',
              Criticality: #Positive
            }
          ]
        );
        OverallSDProcessStatusText : String;

        SalesOrderType             : String(4)  @(
          title      : 'Sales Order Type',
          Common.Text: SalesOrderTypeText
        );
        SalesOrderTypeText         : String;

        SalesOrganization          : String(4)  @(
          title      : 'Sales Organization',
          Common.Text: SalesOrganizationText
        );
        SalesOrganizationText      : String;
  }

  annotate RootEntity with @UI.Chart: {
    $Type              : 'UI.ChartDefinitionType',
    Title              : 'Chart Title',
    Description        : 'Chart Description',
    ChartType          : #Column,
    DynamicMeasures    : ['@Analytics.AggregatedProperty#sum'],
    Dimensions         : [SalesOrganization],
    MeasureAttributes  : [{
      $Type         : 'UI.ChartMeasureAttributeType',
      DynamicMeasure: '@Analytics.AggregatedProperty#sum',
      Role          : #Axis1
    }],
    DimensionAttributes: [{
      $Type    : 'UI.ChartDimensionAttributeType',
      Dimension: SalesOrganization,
      Role     : #Category
    }]
  };
}

```

**FILE**: RootEntity.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"SalesOrder": "2919682",
		"NetPricing": 20000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "1",
		"SalesOrganizationText": "Sales Org. 0001"
	},
	{
		"SalesOrder": "2922870",
		"NetPricing": 10000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "2",
		"SalesOrganizationText": "Sales Org. 002"
	},
	{
		"SalesOrder": "6437",
		"NetPricing": 10000,
		"SalesOrderType": "CCLN",
		"SalesOrderTypeText": "Ret. Packaging Issue",
		"OverallSDProcessStatus": "B",
		"OverallSDProcessStatusText": "In Process",
		"SalesOrganization": "3",
		"SalesOrganizationText": "Sales Org. 003"
	},
	{
		"SalesOrder": "2915717",
		"NetPricing": 10000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "B",
		"OverallSDProcessStatusText": "In Process",
		"SalesOrganization": "12",
		"SalesOrganizationText": "Sales Org. 012"
	},
	{
		"SalesOrder": "2916499",
		"NetPricing": 20000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "1",
		"SalesOrganizationText": "test"
	},
	{
		"SalesOrder": "2916639",
		"NetPricing": 30000,
		"SalesOrderType": "CR",
		"SalesOrderTypeText": "Critical Order",
		"OverallSDProcessStatus": "B",
		"OverallSDProcessStatusText": "In Process",
		"SalesOrganization": "1010",
		"SalesOrganizationText": "Sales Org. 1010"
	},
	{
		"SalesOrder": "2917844",
		"NetPricing": 50000,
		"SalesOrderType": "CCLN",
		"SalesOrderTypeText": "Ret. Packaging Issue",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "1111",
		"SalesOrganizationText": "Sales Org. 1111"
	},
	{
		"SalesOrder": "2919431",
		"NetPricing": 10000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "1710",
		"SalesOrganizationText": "Food Sales Org."
	},
	{
		"SalesOrder": "2922871",
		"NetPricing": 10000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "2320",
		"SalesOrganizationText": "Sales Org. 2320"
	},
	{
		"SalesOrder": "2922872",
		"NetPricing": 30000,
		"SalesOrderType": "CR",
		"SalesOrderTypeText": "Critical Order",
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "9000",
		"SalesOrganizationText": "FMS Sales Org. 1"
	},
	{
		"SalesOrder": "2922873",
		"NetPricing": 100000,
		"SalesOrderType": "CCLN",
		"SalesOrderTypeText": "Ret. Packaging Issue",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "998",
		"SalesOrganizationText": "Singapore Sales Org."
	},
	{
		"SalesOrder": "2922874",
		"NetPricing": 100000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "AFR",
		"SalesOrganizationText": "My Sales Org."
	},
	{
		"SalesOrder": "2922875",
		"NetPricing": 20000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "CF01",
		"SalesOrganizationText": "Sales Org. 0001"
	},
	{
		"SalesOrder": "2922876",
		"NetPricing": 30000,
		"SalesOrderType": "CR",
		"SalesOrderTypeText": "Critical Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "CM01",
		"SalesOrganizationText": "CM Sales Org. 0001"
	},
	{
		"SalesOrder": "2922877",
		"NetPricing": 500000,
		"SalesOrderType": "CCLN",
		"SalesOrderTypeText": "Ret. Packaging Issue",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "CM03",
		"SalesOrganizationText": "CM Sales Org. 0003"
	},
	{
		"SalesOrder": "2922878",
		"NetPricing": 100000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "DBM",
		"SalesOrganizationText": "DBM"
	},
	{
		"SalesOrder": "2922879",
		"NetPricing": 10000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "DPS",
		"SalesOrganizationText": "DPS"
	},
	{
		"SalesOrder": "2922880",
		"NetPricing": 30000,
		"SalesOrderType": "CR",
		"SalesOrderTypeText": "Critical Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "GK01",
		"SalesOrganizationText": "Sales Org. 004"
	},
	{
		"SalesOrder": "2922881",
		"NetPricing": 10000,
		"SalesOrderType": "CCLN",
		"SalesOrderTypeText": "Ret. Packaging Issue",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "GK02",
		"SalesOrganizationText": "Sales Org. 005"
	},
	{
		"SalesOrder": "2922882",
		"NetPricing": 10000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "HF01",
		"SalesOrganizationText": "HF Sales Org."
	},
	{
		"SalesOrder": "2922883",
		"NetPricing": 10000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "1",
		"SalesOrganizationText": "Sales Org. 0001"
	},
	{
		"SalesOrder": "2922884",
		"NetPricing": 10000,
		"SalesOrderType": "CR",
		"SalesOrderTypeText": "Critical Order",
		"OverallSDProcessStatus": "B",
		"OverallSDProcessStatusText": "In Process",
		"SalesOrganization": "2",
		"SalesOrganizationText": "Sales Org. 002"
	},
	{
		"SalesOrder": "2922885",
		"NetPricing": 20000,
		"SalesOrderType": "CCLN",
		"SalesOrderTypeText": "Ret. Packaging Issue",
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "3",
		"SalesOrganizationText": "Sales Org. 003"
	},
	{
		"SalesOrder": "2922886",
		"NetPricing": 300000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "B",
		"OverallSDProcessStatusText": "In Process",
		"SalesOrganization": "12",
		"SalesOrganizationText": "Sales Org. 012"
	},
	{
		"SalesOrder": "2922887",
		"NetPricing": 50000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "1",
		"SalesOrganizationText": "test"
	}
]

```

--------------------------------

**TITLE**: Chart Qualifier

**INTRODUCTION**: Chart qualifiers enable you to define multiple chart annotations on the same entity. This allows you to create different chart configurations for various use cases while maintaining a single data model.

**TAGS**: chart, qualifier, multiple charts, annotation

**STEP**: Chart Definition with Qualifier

**DESCRIPTION**: Define a UI.Chart annotation with a specific qualifier to create a named chart configuration. The qualifier allows you to have multiple chart definitions on the same entity.

**LANGUAGE**: CDS

**CODE**:
```cds
service Service {
  @Analytics.AggregatedProperty #min: {
    Name                : 'minPricing',
    AggregationMethod   : 'min',
    AggregatableProperty: 'NetPricing',
    ![@Common.Label]    : 'Minimum Net Amount'
  }
  @Analytics.AggregatedProperty #max: {
    Name                : 'maxPricing',
    AggregationMethod   : 'max',
    AggregatableProperty: 'NetPricing',
    ![@Common.Label]    : 'Maximum Net Amount'
  }
  @Analytics.AggregatedProperty #avg: {
    Name                : 'avgPricing',
    AggregationMethod   : 'average',
    AggregatableProperty: 'NetPricing',
    ![@Common.Label]    : 'Average Net Amount'
  }
  @Analytics.AggregatedProperty #sum: {
    Name                : 'totalPricing',
    AggregationMethod   : 'sum',
    AggregatableProperty: 'NetPricing',
    ![@Common.Label]    : 'Total Net Amount'
  }

  @Aggregation.ApplySupported       : {
    Transformations         : [
      'aggregate',
      'topcount',
      'bottomcount',
      'identity',
      'concat',
      'groupby',
      'filter',
      'expand',
      'top',
      'skip',
      'orderby',
      'search'
    ],
    CustomAggregationMethods: ['Custom.concat'],
    Rollup                  : #None,
    PropertyRestrictions    : true,
    GroupableProperties     : [
      SalesOrderType,
      SalesOrder,
      SalesOrganization,
      OverallSDProcessStatus
    ],
    AggregatableProperties  : [{Property: NetPricing}]
  }
  entity RootEntity {
    key SalesOrder                 : String(10) @title: 'Sales Order No.';
        NetPricing                 : Decimal(15, 10);

        OverallSDProcessStatus     : String(1)  @(
          title              : 'Overall Process Status',
          Common.Text        : OverallSDProcessStatusText,
          UI.ValueCriticality: [
            {
              Value      : 'A',
              Criticality: #Negative
            },
            {
              Value      : 'B',
              Criticality: #Critical
            },
            {
              Value      : 'C',
              Criticality: #Positive
            }
          ]
        );
        OverallSDProcessStatusText : String;

        SalesOrderType             : String(4)  @(
          title      : 'Sales Order Type',
          Common.Text: SalesOrderTypeText
        );
        SalesOrderTypeText         : String;

        SalesOrganization          : String(4)  @(
          title      : 'Sales Organization',
          Common.Text: SalesOrganizationText
        );
        SalesOrganizationText      : String;
  }

  annotate RootEntity with @UI.Chart #ChartQualifier: {
    $Type              : 'UI.ChartDefinitionType',
    Title              : 'Chart Title',
    Description        : 'Chart Description',
    ChartType          : #Column,
    DynamicMeasures    : ['@Analytics.AggregatedProperty#sum'],
    Dimensions         : [OverallSDProcessStatus],
    MeasureAttributes  : [{
      $Type         : 'UI.ChartMeasureAttributeType',
      DynamicMeasure: '@Analytics.AggregatedProperty#sum',
      Role          : #Axis1
    }],
    DimensionAttributes: [{
      $Type    : 'UI.ChartDimensionAttributeType',
      Dimension: OverallSDProcessStatus,
      Role     : #Category
    }]
  };
}
```

**LANGUAGE**: XML

**CODE**:
```xml
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
	<edmx:Reference Uri="https://sap.github.io/odata-vocabularies/vocabularies/UI.xml">
		<edmx:Include Namespace="com.sap.vocabularies.UI.v1" Alias="UI" />
	</edmx:Reference>
	<edmx:DataServices>
		<Schema xmlns="http://docs.oasis-open.org/odata/ns/edm" Namespace="local">
			<Annotations Target="Service.RootEntity">
				<Annotation Term="UI.Chart" Qualifier="ChartQualifier">
					<Record Type="UI.ChartDefinitionType">
						<PropertyValue Property="Title" String="Chart Title" />
						<PropertyValue Property="Description" String="Chart Description" />
						<PropertyValue Property="ChartType" EnumMember="UI.ChartType/Column" />
						<PropertyValue Property="DynamicMeasures">
							<Collection>
								<String>@Analytics.AggregatedProperty#sum</String>
							</Collection>
						</PropertyValue>
						<PropertyValue Property="Dimensions">
							<Collection>
								<PropertyPath>OverallSDProcessStatus</PropertyPath>
							</Collection>
						</PropertyValue>
						<PropertyValue Property="MeasureAttributes">
							<Collection>
								<Record Type="UI.ChartMeasureAttributeType">
									<PropertyValue Property="DynamicMeasure" String="@Analytics.AggregatedProperty#sum" />
									<PropertyValue Property="Role" EnumMember="UI.ChartMeasureRoleType/Axis1" />
								</Record>
							</Collection>
						</PropertyValue>
						<PropertyValue Property="DimensionAttributes">
							<Collection>
								<Record Type="UI.ChartDimensionAttributeType">
									<PropertyValue Property="Dimension" PropertyPath="OverallSDProcessStatus" />
									<PropertyValue Property="Role" EnumMember="UI.ChartDimensionRoleType/Category" />
								</Record>
							</Collection>
						</PropertyValue>
					</Record>
				</Annotation>
			</Annotations>
		</Schema>
	</edmx:DataServices>
</edmx:Edmx>
```

**LANGUAGE**: ABAP

**CODE**:
```abap
@Metadata.layer: #CORE
@Analytics.dataCategory: #CUBE
define view entity C_RootEntity
  as select from I_RootEntity
{
  key SalesOrder,
      NetPricing,
      OverallSDProcessStatus,
      OverallSDProcessStatusText,
      SalesOrderType,
      SalesOrderTypeText,
      SalesOrganization,
      SalesOrganizationText,
      
      // Virtual elements for aggregated measures
      @DefaultAggregation: #MIN
      @EndUserText.label: 'Minimum Net Amount'
      virtual minPricing : abap.dec(15,10),
      
      @DefaultAggregation: #MAX  
      @EndUserText.label: 'Maximum Net Amount'
      virtual maxPricing : abap.dec(15,10),
      
      @DefaultAggregation: #AVG
      @EndUserText.label: 'Average Net Amount'
      virtual avgPricing : abap.dec(15,10),
      
      @DefaultAggregation: #SUM
      @EndUserText.label: 'Total Net Amount'
      virtual totalPricing : abap.dec(15,10)
}

// Field-level annotations
@Metadata.layer: #CORE
annotate view C_RootEntity with
{
  @EndUserText.label: 'Sales Order No.'
  SalesOrder;
  
  @EndUserText.label: 'Overall Process Status'
  @Consumption.valueHelpDefinition: [{ entity: { name: 'I_OverallSDProcessStatus', element: 'Status' } }]
  @UI.textArrangement: #TEXT_ONLY
  OverallSDProcessStatus;
  
  @EndUserText.label: 'Sales Order Type'
  @Consumption.valueHelpDefinition: [{ entity: { name: 'I_SalesOrderType', element: 'SalesOrderType' } }]
  @UI.textArrangement: #TEXT_ONLY
  SalesOrderType;
  
  @EndUserText.label: 'Sales Organization'
  @Consumption.valueHelpDefinition: [{ entity: { name: 'I_SalesOrganization', element: 'SalesOrganization' } }]
  @UI.textArrangement: #TEXT_ONLY
  SalesOrganization;
}

// UI.Chart annotation with qualifier
@Metadata.layer: #CORE
annotate view C_RootEntity with
{
  @UI.chart: [
    {
      qualifier: 'ChartQualifier',
      title: 'Chart Title',
      description: 'Chart Description',
      chartType: #COLUMN,
      measures: [ 'totalPricing' ],
      dimensions: [ 'OverallSDProcessStatus' ],
      measureAttributes: [
        {
          measure: 'totalPricing',
          role: #AXIS_1
        }
      ],
      dimensionAttributes: [
        {
          dimension: 'OverallSDProcessStatus',
          role: #CATEGORY
        }
      ]
    }
  ]
  NetPricing;
}
```

**STEP**: Referencing Qualified Chart

**DESCRIPTION**: Use the metaPath property to reference a specific qualified chart annotation. The syntax includes the qualifier after the # symbol.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<VBox fitContainer="true" alignItems="Stretch" alignContent="Stretch" justifyContent="Start" renderType="Div">
		<macros:Chart id="chartQualifierSample" metaPath="/RootEntity/@com.sap.vocabularies.UI.v1.Chart#ChartQualifier" />
	</VBox>
</core:FragmentDefinition>
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: RootEntity.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"SalesOrder": "2919682",
		"NetPricing": 20000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "1",
		"SalesOrganizationText": "Sales Org. 0001"
	},
	{
		"SalesOrder": "2922870",
		"NetPricing": 10000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "2",
		"SalesOrganizationText": "Sales Org. 002"
	},
	{
		"SalesOrder": "6437",
		"NetPricing": 10000,
		"SalesOrderType": "CCLN",
		"SalesOrderTypeText": "Ret. Packaging Issue",
		"OverallSDProcessStatus": "B",
		"OverallSDProcessStatusText": "In Process",
		"SalesOrganization": "3",
		"SalesOrganizationText": "Sales Org. 003"
	},
	{
		"SalesOrder": "2915717",
		"NetPricing": 10000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "B",
		"OverallSDProcessStatusText": "In Process",
		"SalesOrganization": "12",
		"SalesOrganizationText": "Sales Org. 012"
	},
	{
		"SalesOrder": "2916499",
		"NetPricing": 20000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "1",
		"SalesOrganizationText": "test"
	},
	{
		"SalesOrder": "2916639",
		"NetPricing": 30000,
		"SalesOrderType": "CR",
		"SalesOrderTypeText": "Critical Order",
		"OverallSDProcessStatus": "B",
		"OverallSDProcessStatusText": "In Process",
		"SalesOrganization": "1010",
		"SalesOrganizationText": "Sales Org. 1010"
	},
	{
		"SalesOrder": "2917844",
		"NetPricing": 50000,
		"SalesOrderType": "CCLN",
		"SalesOrderTypeText": "Ret. Packaging Issue",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "1111",
		"SalesOrganizationText": "Sales Org. 1111"
	},
	{
		"SalesOrder": "2919431",
		"NetPricing": 10000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "1710",
		"SalesOrganizationText": "Food Sales Org."
	},
	{
		"SalesOrder": "2922871",
		"NetPricing": 10000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "2320",
		"SalesOrganizationText": "Sales Org. 2320"
	},
	{
		"SalesOrder": "2922872",
		"NetPricing": 30000,
		"SalesOrderType": "CR",
		"SalesOrderTypeText": "Critical Order",
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "9000",
		"SalesOrganizationText": "FMS Sales Org. 1"
	},
	{
		"SalesOrder": "2922873",
		"NetPricing": 100000,
		"SalesOrderType": "CCLN",
		"SalesOrderTypeText": "Ret. Packaging Issue",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "998",
		"SalesOrganizationText": "Singapore Sales Org."
	},
	{
		"SalesOrder": "2922874",
		"NetPricing": 100000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "AFR",
		"SalesOrganizationText": "My Sales Org."
	},
	{
		"SalesOrder": "2922875",
		"NetPricing": 20000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "CF01",
		"SalesOrganizationText": "Sales Org. 0001"
	},
	{
		"SalesOrder": "2922876",
		"NetPricing": 30000,
		"SalesOrderType": "CR",
		"SalesOrderTypeText": "Critical Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "CM01",
		"SalesOrganizationText": "CM Sales Org. 0001"
	},
	{
		"SalesOrder": "2922877",
		"NetPricing": 500000,
		"SalesOrderType": "CCLN",
		"SalesOrderTypeText": "Ret. Packaging Issue",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "CM03",
		"SalesOrganizationText": "CM Sales Org. 0003"
	},
	{
		"SalesOrder": "2922878",
		"NetPricing": 100000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "DBM",
		"SalesOrganizationText": "DBM"
	},
	{
		"SalesOrder": "2922879",
		"NetPricing": 10000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "DPS",
		"SalesOrganizationText": "DPS"
	},
	{
		"SalesOrder": "2922880",
		"NetPricing": 30000,
		"SalesOrderType": "CR",
		"SalesOrderTypeText": "Critical Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "GK01",
		"SalesOrganizationText": "Sales Org. 004"
	},
	{
		"SalesOrder": "2922881",
		"NetPricing": 10000,
		"SalesOrderType": "CCLN",
		"SalesOrderTypeText": "Ret. Packaging Issue",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "GK02",
		"SalesOrganizationText": "Sales Org. 005"
	},
	{
		"SalesOrder": "2922882",
		"NetPricing": 10000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "HF01",
		"SalesOrganizationText": "HF Sales Org."
	},
	{
		"SalesOrder": "2922883",
		"NetPricing": 10000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "1",
		"SalesOrganizationText": "Sales Org. 0001"
	},
	{
		"SalesOrder": "2922884",
		"NetPricing": 10000,
		"SalesOrderType": "CR",
		"SalesOrderTypeText": "Critical Order",
		"OverallSDProcessStatus": "B",
		"OverallSDProcessStatusText": "In Process",
		"SalesOrganization": "2",
		"SalesOrganizationText": "Sales Org. 002"
	},
	{
		"SalesOrder": "2922885",
		"NetPricing": 20000,
		"SalesOrderType": "CCLN",
		"SalesOrderTypeText": "Ret. Packaging Issue",
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "3",
		"SalesOrganizationText": "Sales Org. 003"
	},
	{
		"SalesOrder": "2922886",
		"NetPricing": 300000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "B",
		"OverallSDProcessStatusText": "In Process",
		"SalesOrganization": "12",
		"SalesOrganizationText": "Sales Org. 012"
	},
	{
		"SalesOrder": "2922887",
		"NetPricing": 50000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "1",
		"SalesOrganizationText": "test"
	}
]

```

--------------------------------

**TITLE**: Chart Selection Mode

**INTRODUCTION**: The Chart building block provides different selection modes that enable you to control how users can interact with chart data points. This example shows the multiple selection mode and the single selection mode.

**TAGS**: chart, selection mode, select, interaction, data points

**STEP**: Multiple Selection Mode

**DESCRIPTION**: Set selectionMode='Multiple' to allow users to select multiple data points in the chart. This is useful for comparing multiple values or performing bulk operations.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<VBox fitContainer="true" alignItems="Stretch" alignContent="Stretch" justifyContent="Start" renderType="Div">
		<Panel headerText="Multiple Selection Mode">
			<VBox fitContainer="true" alignItems="Stretch" alignContent="Stretch" justifyContent="Start" renderType="Div">
				<macros:Chart id="chartSelectionModeMultipleSample" metaPath="@com.sap.vocabularies.UI.v1.Chart" selectionMode="Multiple" />
			</VBox>
		</Panel>
		<Panel headerText="Single Selection Mode">
			<VBox fitContainer="true" alignItems="Stretch" alignContent="Stretch" justifyContent="Start" renderType="Div">
				<macros:Chart id="chartSelectionModeSingleSample" metaPath="@com.sap.vocabularies.UI.v1.Chart" selectionMode="Single" />
			</VBox>
		</Panel>
	</VBox>
</core:FragmentDefinition>
```

**STEP**: Single Selection Mode

**DESCRIPTION**: Set selectionMode='Single' to allow users to select only one data point at a time. This is the default behavior and is useful for detailed analysis of individual values.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<VBox fitContainer="true" alignItems="Stretch" alignContent="Stretch" justifyContent="Start" renderType="Div">
		<Panel headerText="Multiple Selection Mode">
			<VBox fitContainer="true" alignItems="Stretch" alignContent="Stretch" justifyContent="Start" renderType="Div">
				<macros:Chart id="chartSelectionModeMultipleSample" metaPath="@com.sap.vocabularies.UI.v1.Chart" selectionMode="Multiple" />
			</VBox>
		</Panel>
		<Panel headerText="Single Selection Mode">
			<VBox fitContainer="true" alignItems="Stretch" alignContent="Stretch" justifyContent="Start" renderType="Div">
				<macros:Chart id="chartSelectionModeSingleSample" metaPath="@com.sap.vocabularies.UI.v1.Chart" selectionMode="Single" />
			</VBox>
		</Panel>
	</VBox>
</core:FragmentDefinition>
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
service Service {
  @Analytics.AggregatedProperty #min: {
    Name                : 'minPricing',
    AggregationMethod   : 'min',
    AggregatableProperty: 'NetPricing',
    ![@Common.Label]    : 'Minimum Net Amount'
  }
  @Analytics.AggregatedProperty #max: {
    Name                : 'maxPricing',
    AggregationMethod   : 'max',
    AggregatableProperty: 'NetPricing',
    ![@Common.Label]    : 'Maximum Net Amount'
  }
  @Analytics.AggregatedProperty #avg: {
    Name                : 'avgPricing',
    AggregationMethod   : 'average',
    AggregatableProperty: 'NetPricing',
    ![@Common.Label]    : 'Average Net Amount'
  }
  @Analytics.AggregatedProperty #sum: {
    Name                : 'totalPricing',
    AggregationMethod   : 'sum',
    AggregatableProperty: 'NetPricing',
    ![@Common.Label]    : 'Total Net Amount'
  }

  @Aggregation.ApplySupported       : {
    Transformations         : [
      'aggregate',
      'topcount',
      'bottomcount',
      'identity',
      'concat',
      'groupby',
      'filter',
      'expand',
      'top',
      'skip',
      'orderby',
      'search'
    ],
    CustomAggregationMethods: ['Custom.concat'],
    Rollup                  : #None,
    PropertyRestrictions    : true,
    GroupableProperties     : [
      SalesOrderType,
      SalesOrder,
      SalesOrganization,
      OverallSDProcessStatus
    ],
    AggregatableProperties  : [{Property: NetPricing}]
  }
  entity RootEntity {
    key SalesOrder                 : String(10) @title: 'Sales Order No.';
        NetPricing                 : Decimal(15, 10);

        OverallSDProcessStatus     : String(1)  @(
          title              : 'Overall Process Status',
          Common.Text        : OverallSDProcessStatusText,
          UI.ValueCriticality: [
            {
              Value      : 'A',
              Criticality: #Negative
            },
            {
              Value      : 'B',
              Criticality: #Critical
            },
            {
              Value      : 'C',
              Criticality: #Positive
            }
          ]
        );
        OverallSDProcessStatusText : String;

        SalesOrderType             : String(4)  @(
          title      : 'Sales Order Type',
          Common.Text: SalesOrderTypeText
        );
        SalesOrderTypeText         : String;

        SalesOrganization          : String(4)  @(
          title      : 'Sales Organization',
          Common.Text: SalesOrganizationText
        );
        SalesOrganizationText      : String;
  }

  annotate RootEntity with @UI.Chart: {
    $Type              : 'UI.ChartDefinitionType',
    Title              : 'Chart Title',
    Description        : 'Chart Description',
    ChartType          : #Column,
    DynamicMeasures    : ['@Analytics.AggregatedProperty#sum'],
    Dimensions         : [SalesOrderType],
    MeasureAttributes  : [{
      $Type         : 'UI.ChartMeasureAttributeType',
      DynamicMeasure: '@Analytics.AggregatedProperty#sum',
      Role          : #Axis1
    }],
    DimensionAttributes: [{
      $Type    : 'UI.ChartDimensionAttributeType',
      Dimension: SalesOrganization,
      Role     : #Category
    }]
  };
}

```

**FILE**: RootEntity.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"SalesOrder": "2919682",
		"NetPricing": 20000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "1",
		"SalesOrganizationText": "Sales Org. 0001"
	},
	{
		"SalesOrder": "2922870",
		"NetPricing": 10000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "2",
		"SalesOrganizationText": "Sales Org. 002"
	},
	{
		"SalesOrder": "6437",
		"NetPricing": 10000,
		"SalesOrderType": "CCLN",
		"SalesOrderTypeText": "Ret. Packaging Issue",
		"OverallSDProcessStatus": "B",
		"OverallSDProcessStatusText": "In Process",
		"SalesOrganization": "3",
		"SalesOrganizationText": "Sales Org. 003"
	},
	{
		"SalesOrder": "2915717",
		"NetPricing": 10000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "B",
		"OverallSDProcessStatusText": "In Process",
		"SalesOrganization": "12",
		"SalesOrganizationText": "Sales Org. 012"
	},
	{
		"SalesOrder": "2916499",
		"NetPricing": 20000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "1",
		"SalesOrganizationText": "test"
	},
	{
		"SalesOrder": "2916639",
		"NetPricing": 30000,
		"SalesOrderType": "CR",
		"SalesOrderTypeText": "Critical Order",
		"OverallSDProcessStatus": "B",
		"OverallSDProcessStatusText": "In Process",
		"SalesOrganization": "1010",
		"SalesOrganizationText": "Sales Org. 1010"
	},
	{
		"SalesOrder": "2917844",
		"NetPricing": 50000,
		"SalesOrderType": "CCLN",
		"SalesOrderTypeText": "Ret. Packaging Issue",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "1111",
		"SalesOrganizationText": "Sales Org. 1111"
	},
	{
		"SalesOrder": "2919431",
		"NetPricing": 10000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "1710",
		"SalesOrganizationText": "Food Sales Org."
	},
	{
		"SalesOrder": "2922871",
		"NetPricing": 10000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "2320",
		"SalesOrganizationText": "Sales Org. 2320"
	},
	{
		"SalesOrder": "2922872",
		"NetPricing": 30000,
		"SalesOrderType": "CR",
		"SalesOrderTypeText": "Critical Order",
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "9000",
		"SalesOrganizationText": "FMS Sales Org. 1"
	},
	{
		"SalesOrder": "2922873",
		"NetPricing": 100000,
		"SalesOrderType": "CCLN",
		"SalesOrderTypeText": "Ret. Packaging Issue",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "998",
		"SalesOrganizationText": "Singapore Sales Org."
	},
	{
		"SalesOrder": "2922874",
		"NetPricing": 100000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "AFR",
		"SalesOrganizationText": "My Sales Org."
	},
	{
		"SalesOrder": "2922875",
		"NetPricing": 20000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "CF01",
		"SalesOrganizationText": "Sales Org. 0001"
	},
	{
		"SalesOrder": "2922876",
		"NetPricing": 30000,
		"SalesOrderType": "CR",
		"SalesOrderTypeText": "Critical Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "CM01",
		"SalesOrganizationText": "CM Sales Org. 0001"
	},
	{
		"SalesOrder": "2922877",
		"NetPricing": 500000,
		"SalesOrderType": "CCLN",
		"SalesOrderTypeText": "Ret. Packaging Issue",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "CM03",
		"SalesOrganizationText": "CM Sales Org. 0003"
	},
	{
		"SalesOrder": "2922878",
		"NetPricing": 100000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "DBM",
		"SalesOrganizationText": "DBM"
	},
	{
		"SalesOrder": "2922879",
		"NetPricing": 10000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "DPS",
		"SalesOrganizationText": "DPS"
	},
	{
		"SalesOrder": "2922880",
		"NetPricing": 30000,
		"SalesOrderType": "CR",
		"SalesOrderTypeText": "Critical Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "GK01",
		"SalesOrganizationText": "Sales Org. 004"
	},
	{
		"SalesOrder": "2922881",
		"NetPricing": 10000,
		"SalesOrderType": "CCLN",
		"SalesOrderTypeText": "Ret. Packaging Issue",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "GK02",
		"SalesOrganizationText": "Sales Org. 005"
	},
	{
		"SalesOrder": "2922882",
		"NetPricing": 10000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "HF01",
		"SalesOrganizationText": "HF Sales Org."
	},
	{
		"SalesOrder": "2922883",
		"NetPricing": 10000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "1",
		"SalesOrganizationText": "Sales Org. 0001"
	},
	{
		"SalesOrder": "2922884",
		"NetPricing": 10000,
		"SalesOrderType": "CR",
		"SalesOrderTypeText": "Critical Order",
		"OverallSDProcessStatus": "B",
		"OverallSDProcessStatusText": "In Process",
		"SalesOrganization": "2",
		"SalesOrganizationText": "Sales Org. 002"
	},
	{
		"SalesOrder": "2922885",
		"NetPricing": 20000,
		"SalesOrderType": "CCLN",
		"SalesOrderTypeText": "Ret. Packaging Issue",
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "3",
		"SalesOrganizationText": "Sales Org. 003"
	},
	{
		"SalesOrder": "2922886",
		"NetPricing": 300000,
		"SalesOrderType": "SE",
		"SalesOrderTypeText": "Service Order",
		"OverallSDProcessStatus": "B",
		"OverallSDProcessStatusText": "In Process",
		"SalesOrganization": "12",
		"SalesOrganizationText": "Sales Org. 012"
	},
	{
		"SalesOrder": "2922887",
		"NetPricing": 50000,
		"SalesOrderType": "OR",
		"SalesOrderTypeText": "Standard Order",
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "1",
		"SalesOrganizationText": "test"
	}
]

```

--------------------------------

**TITLE**: Flexible Column Layout Actions

**INTRODUCTION**: The FlexibleColumnLayoutActions building block enables you to render the flexible column layout buttons such as Close, Enter Full Screen, and Exit Full Screen.

**TAGS**: flexible column layout, fcl, navigation, buttons, multi-column

**STEP**: Implementation

**DESCRIPTION**: To use the FlexibleColumnLayoutActions building block, you can include it in your view.

**LANGUAGE**: XML

**CODE**:
```xml
<mvc:View xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m" xmlns:f="sap.f" xmlns:macros="sap.fe.macros">
	<f:DynamicPage headerExpanded="true" toggleHeaderOnTitleClick="false">
		<f:title>
			<f:DynamicPageTitle>
				<f:heading>
					<Title text="Showing Flexible Column Layout Actions" />
				</f:heading>
				<f:navigationActions>
					<macros:FlexibleColumnLayoutActions />
				</f:navigationActions>
			</f:DynamicPageTitle>
		</f:title>
		<f:content>
			<MessageStrip
				text="You can see the Flexible Column Layout actions in the header of this page."
				visible="true"
				showIcon="true"
				type="Information"
			/>
		</f:content>
	</f:DynamicPage>
</mvc:View>
```

--------------------------------

**TITLE**: Avatar

**INTRODUCTION**: The Field building block enables you to render avatars and icons.

**TAGS**: field, avatar, image, profile picture

**STEP**: Implementation

**DESCRIPTION**: Define a string property and annotate it with UI.IsImageUrl. Then the field will render a icon or an image, depending on the backend data.

**LANGUAGE**: CDS

**CODE**:
```cds
using {TravelService.Travel} from '../../../../../service/service';
using from '../../../../../service/annotations';

extend entity TravelService.Travel with {
  Icon     : String @(UI: {IsImageURL: true});
  ImageUrl : String @(UI: {IsImageURL: true});
};
```

**LANGUAGE**: ABAP

**CODE**:
```abap
@UI.isImageURL: true
Icon : abap.string;

@UI.isImageURL: true
ImageUrl : abap.string;
```

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="TravelService.Travel/Icon">
	<Annotation Term="UI.IsImageURL" Bool="true" />
	<Annotation Term="Common.Label" String="Icon" />
</Annotations>
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: Sample.fragment.xml

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<VBox class="sapUiTinyMarginTop" width="320px">
		<Label text="Icon:" />
		<macros:Field metaPath="Icon" id="FieldAvatarIcon" />
		<Label text="Image:" class="sapUiTinyMarginTop" />
		<macros:Field metaPath="ImageUrl" id="FieldAvatarImageUrl" />
	</VBox>
</core:FragmentDefinition>

```

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: annotations.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});

```

**FILE**: Travel.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"TravelID": "00000001",
		"BeginDate": "2023-08-04",
		"EndDate": "2023-08-04",
		"BookingFee": "20.00",
		"TotalPrice": "900.00",
		"CurrencyCode_code": "USD",
		"Description": "Business Trip for Christine, Pierre",
		"FlightRoute": "2.3522219;48.856614;0; -74.0059731;40.7143528;0",
		"CityFrom": "Paris",
		"CityTo": "New York",
		"TravelStatus_code": "O",
		"Icon": "sap-icon://action",
		"ImageUrl": "/test-resources/sap/fe/templates/internal/images/1.gif"
	}
]

```

--------------------------------

**TITLE**: Checkbox

**INTRODUCTION**: The Field building block enables you to render checkboxes.

**TAGS**: field, checkbox, boolean, selection, toggle

**STEP**: Implementation

**DESCRIPTION**: Define a boolean property. In edit mode, the field will render a check box, in display mode, it will show the value as a string (Yes/No).

**LANGUAGE**: CDS

**CODE**:
```cds
using {TravelService.Travel} from '../../../../../service/service';
using from '../../../../../service/annotations';

extend entity TravelService.Travel with {
  Approved : Boolean;
};
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: Sample.fragment.xml

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<VBox class="sapUiTinyMarginTop" width="320px">
		<Label text="Approved:" />
		<macros:Field metaPath="Approved" id="FieldCheckboxApproved" />
	</VBox>
</core:FragmentDefinition>

```

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: annotations.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});

```

**FILE**: Travel.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"TravelID": "00000001",
		"BeginDate": "2023-08-04",
		"EndDate": "2023-08-04",
		"BookingFee": "20.00",
		"TotalPrice": "900.00",
		"CurrencyCode_code": "USD",
		"Description": "Business Trip for Christine, Pierre",
		"FlightRoute": "2.3522219;48.856614;0; -74.0059731;40.7143528;0",
		"CityFrom": "Paris",
		"CityTo": "New York",
		"TravelStatus_code": "O",
		"Approved": true
	}
]

```

--------------------------------

**TITLE**: Contact

**INTRODUCTION**: The Field building block enables you to render clickable fields that open a contact card.

**TAGS**: field, contact, person, communication, details

**STEP**: Communication.Contact

**DESCRIPTION**: The Communication.Contact describes the contact information.

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});
```

**LANGUAGE**: ABAP

**CODE**:
```abap
@ObjectModel.communication.contact
entity YourEntityName {
  @ObjectModel.communication.contact.name: true
  Name : abap.string;
  
  @ObjectModel.communication.contact.type: [#WORK]
  @ObjectModel.communication.contact.email: true
  EMailAddress : abap.string;
  
  @ObjectModel.communication.contact.type: [#WORK]
  @ObjectModel.communication.contact.address: true
  PostalCode : abap.string;
  
  @ObjectModel.communication.contact.type: [#WORK]
  @ObjectModel.communication.contact.address: true
  CountryCode_code : abap.string;
  
  @ObjectModel.communication.contact.type: [#WORK]
  @ObjectModel.communication.contact.address: true
  City : abap.string;
  
  @ObjectModel.communication.isNaturalPerson: false
}
```

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="Communication.Contact">
	<Record Type="Communication.ContactType">
		<PropertyValue Property="fn" Path="AgencyName" />
		<PropertyValue Property="tel">
			<Collection>
				<Record Type="Communication.PhoneNumberType">
					<PropertyValue Property="uri" Path="Phone" />
					<PropertyValue Property="type" EnumMember="Communication.PhoneType/work" />
				</Record>
			</Collection>
		</PropertyValue>
		<PropertyValue Property="email">
			<Collection>
				<Record Type="Communication.EmailAddressType">
					<PropertyValue Property="address" Path="Email" />
					<PropertyValue Property="type" EnumMember="Communication.ContactInformationType/work" />
				</Record>
			</Collection>
		</PropertyValue>
	</Record>
</Annotation>
```

**STEP**: DataFieldForAnnotation

**DESCRIPTION**: Define a UI.DataFieldForAnnotation that in turn targets a Communication.Contact.

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});
```

**LANGUAGE**: ABAP

**CODE**:
```abap
@UI.fieldGroup: [{
  qualifier: 'Contact',
  groupLabel: 'Travel Agency',
  type: #WITH_NAVIGATION_PATH,
  navigationPath: '@Communication.Contact'
}]
TravelAgencyField;
```

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.FieldGroup" Qualifier="Contact">
	<Record Type="UI.FieldGroupType">
		<PropertyValue Property="Data">
			<Collection>
				<Record Type="UI.DataFieldForAnnotation">
					<PropertyValue Property="Target" AnnotationPath="@Communication.Contact" />
					<PropertyValue Property="Label" String="Contact" />
				</Record>
			</Collection>
		</PropertyValue>
	</Record>
</Annotation>
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: Sample.fragment.xml

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<VBox class="sapUiTinyMarginTop" width="320px">
		<Label text="Travel Agency:" />
		<macros:Field metaPath="@com.sap.vocabularies.UI.v1.FieldGroup#Contact/Data/0" id="FieldContact" />
	</VBox>
</core:FragmentDefinition>

```

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: TravelAgency.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"AgencyID": "070001",
		"City": "Rochester",
		"CountryCode_code": "US",
		"EMailAddress": "info@sunshine-travel.sap",
		"Name": "Sunshine Travel",
		"PhoneNumber": "+1 901-632-5620",
		"PostalCode": "54323",
		"Street": "134 West Street",
		"WebAddress": "http://www.sunshine-travel.sap",
		"Rating": "4",
		"Recommendation": "88"
	},
	{
		"AgencyID": "070002",
		"City": "Duesseldorf",
		"CountryCode_code": "DE",
		"EMailAddress": "info@flyhigh.sap",
		"Name": "Fly High",
		"PhoneNumber": "+49 2102 69555",
		"PostalCode": "40880",
		"Street": "Berliner Allee 11",
		"WebAddress": "http://www.flyhigh.sap",
		"Rating": "5",
		"Recommendation": "98"
	},
	{
		"AgencyID": "070003",
		"City": "Berlin",
		"CountryCode_code": "DE",
		"EMailAddress": "info@haphop.sap",
		"Name": "Happy Hopping",
		"PhoneNumber": "+49 30-8853-0",
		"PostalCode": "13467",
		"Street": "Calvinstr. 36",
		"WebAddress": "http://www.haphop.sap",
		"Rating": "4",
		"Recommendation": "91"
	},
	{
		"AgencyID": "070004",
		"City": "Frankfurt",
		"CountryCode_code": "DE",
		"EMailAddress": "info@pinkpanther.sap",
		"Name": "Pink Panther",
		"PhoneNumber": "+49 69-467653-0",
		"PostalCode": "65936",
		"Street": "Auf der Schanz 54",
		"WebAddress": "http://www.pinkpanther.sap",
		"Rating": "5",
		"Recommendation": "97"
	},
	{
		"AgencyID": "070005",
		"City": "Nuernberg",
		"CountryCode_code": "DE",
		"EMailAddress": "info@yc.sap",
		"Name": "Your Choice",
		"PhoneNumber": "+49 9256-4548-0",
		"PostalCode": "90455",
		"Street": "Gustav-Jung-Str. 425",
		"WebAddress": "http://www.yc.sap",
		"Rating": "4",
		"Recommendation": "82"
	},
	{
		"AgencyID": "070006",
		"City": "Roma",
		"CountryCode_code": "IT",
		"EMailAddress": "info@tours.it/Adventure/",
		"Name": "Bella Italia",
		"PhoneNumber": "+39 6 893546721",
		"PostalCode": "00139",
		"Street": "Via Marconi 123",
		"WebAddress": "http://www.tours.it/Adventure/",
		"Rating": "5",
		"Recommendation": "95"
	},
	{
		"AgencyID": "070007",
		"City": "Sydney",
		"CountryCode_code": "AU",
		"EMailAddress": "info@hst.co.au",
		"Name": "Hot Socks Travel",
		"PhoneNumber": "+61 2 2004 5000",
		"PostalCode": "8053",
		"Street": "224 Balnagask Rd",
		"WebAddress": "http://www.hst.co.au",
		"Rating": "5",
		"Recommendation": "99"
	},
	{
		"AgencyID": "070008",
		"City": "Singapore",
		"CountryCode_code": "SG",
		"EMailAddress": "info@burns-burns-burns.sg",
		"Name": "Burns Nuclear",
		"PhoneNumber": "+65 777-5566",
		"PostalCode": "118228",
		"Street": "14 Science Park Drive",
		"WebAddress": "http://www.burns-burns-burns.sg",
		"Rating": "4",
		"Recommendation": "84"
	},
	{
		"AgencyID": "070009",
		"City": "Neumarkt",
		"CountryCode_code": "AT",
		"EMailAddress": "info@honauer.at",
		"Name": "Honauer Reisen GmbH",
		"PhoneNumber": "+43 7941 8903",
		"PostalCode": "4212",
		"Street": "Baumgarten 8",
		"WebAddress": "http://www.honauer.at",
		"Rating": "5",
		"Recommendation": "99"
	},
	{
		"AgencyID": "070010",
		"City": "Berlin",
		"CountryCode_code": "DE",
		"EMailAddress": "info@travel-from-walldorf",
		"Name": "Travel from Walldorf",
		"PhoneNumber": "+49 30-622860",
		"PostalCode": "10557",
		"Street": "Altonaer Str. 24",
		"WebAddress": "http://www.travel-from-walldorf",
		"Rating": "4",
		"Recommendation": "90"
	},
	{
		"AgencyID": "070011",
		"City": "Stockholm",
		"CountryCode_code": "SE",
		"EMailAddress": "info@starfleet.ufp",
		"Name": "Voyager Enterprises",
		"PhoneNumber": "+46 8/ 587 70000",
		"PostalCode": "70563",
		"Street": "Gustavslundsvaegen 151",
		"WebAddress": "http://www.starfleet.ufp",
		"Rating": "5",
		"Recommendation": "100"
	},
	{
		"AgencyID": "070012",
		"City": "Birmingham",
		"CountryCode_code": "GB",
		"EMailAddress": "info@ben-mcCloskey.co.uk",
		"Name": "Ben McCloskey Ltd.",
		"PhoneNumber": "+44 121 365-2251",
		"PostalCode": "B17 9TN",
		"Street": "74 Court Oak Rd",
		"WebAddress": "http://www.ben-mcCloskey.co.uk",
		"Rating": "5",
		"Recommendation": "97"
	},
	{
		"AgencyID": "070013",
		"City": "Zuerich",
		"CountryCode_code": "CH",
		"EMailAddress": "info@pi-pa-tri.sap",
		"Name": "Pillepalle Trips",
		"PhoneNumber": "+41 1 345-5321",
		"PostalCode": "8008",
		"Street": "Gorki Park 4",
		"WebAddress": "http://www.pi-pa-tri.sap",
		"Rating": "5",
		"Recommendation": "99"
	},
	{
		"AgencyID": "070014",
		"City": "London",
		"CountryCode_code": "GB",
		"EMailAddress": "info@hopp.sap",
		"Name": "Kangeroos",
		"PhoneNumber": "+44 171-2937638",
		"PostalCode": "20001",
		"Street": "Lancaster drive 435",
		"WebAddress": "http://www.hopp.sap",
		"Rating": "4",
		"Recommendation": "85"
	},
	{
		"AgencyID": "070015",
		"City": "Dresden",
		"CountryCode_code": "DE",
		"EMailAddress": "info@neu.schwanstein.sap",
		"Name": "Bavarian Castle",
		"PhoneNumber": "+49 98-32832732",
		"PostalCode": "01069",
		"Street": "Pilnizerstr. 241",
		"WebAddress": "http://www.neu.schwanstein.sap",
		"Rating": "4",
		"Recommendation": "91"
	},
	{
		"AgencyID": "070016",
		"City": "Boston",
		"CountryCode_code": "US",
		"EMailAddress": "info@ali.sap",
		"Name": "Ali's Bazar",
		"PhoneNumber": "+1 508-692-5200",
		"PostalCode": "19113",
		"Street": "45, Mac Arthur Boulevard",
		"WebAddress": "http://www.ali.sap",
		"Rating": "4",
		"Recommendation": "87"
	},
	{
		"AgencyID": "070017",
		"City": "Glasgow",
		"CountryCode_code": "GB",
		"EMailAddress": "info@super.sap",
		"Name": "Super Agency",
		"PhoneNumber": "+44 141 711-5643",
		"PostalCode": "G12 8AG",
		"Street": "50 Cranworth St",
		"WebAddress": "http://www.super.sap",
		"Rating": "5",
		"Recommendation": "96"
	},
	{
		"AgencyID": "070018",
		"City": "Moscow",
		"CountryCode_code": "RU",
		"EMailAddress": "info@wang.chong.sap",
		"Name": "Wang Chong",
		"PhoneNumber": "+7 3287-213321",
		"PostalCode": "150021",
		"Street": "Gagarine Park",
		"WebAddress": "http://www.wang.chong.sap",
		"Rating": "3",
		"Recommendation": "48"
	},
	{
		"AgencyID": "070019",
		"City": "Hannover",
		"CountryCode_code": "DE",
		"EMailAddress": "info@atw.sap",
		"Name": "Around the World",
		"PhoneNumber": "+49 511-347589-0",
		"PostalCode": "30625",
		"Street": "An der Breiten Wiese 122",
		"WebAddress": "http://www.atw.sap",
		"Rating": "4",
		"Recommendation": "88"
	},
	{
		"AgencyID": "070020",
		"City": "Koeln",
		"CountryCode_code": "DE",
		"EMailAddress": "info@bye-bye.sap",
		"Name": "No Return",
		"PhoneNumber": "+49 221-5689-100",
		"PostalCode": "51105",
		"Street": "Wahnheider Str. 57",
		"WebAddress": "http://www.bye-bye.sap",
		"Rating": "5",
		"Recommendation": "94"
	}
]

```

--------------------------------

**TITLE**: Data Point

**INTRODUCTION**: The Field building block enables you to render single data points.

**TAGS**: field, data point, value, metric, display

**STEP**: Implementation

**DESCRIPTION**: Add a DataPoint annotation. The Value points to the property representing the data to be visualized, for example in the form of a Progress Indicator (Visualization: #Progress).

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});
```

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.DataPoint" Qualifier="Recommendation">
	<Record Type="UI.DataPointType">
		<PropertyValue Property="Value" Path="AcceptanceStatus" />
		<PropertyValue Property="Title" String="Acceptance" />
		<PropertyValue Property="TargetValue" Decimal="4" />
		<PropertyValue Property="ForecastValue" Path="Rating" />
		<PropertyValue Property="MinimumValue" Decimal="0" />
		<PropertyValue Property="MaximumValue" Decimal="5" />
		<PropertyValue Property="Visualization" EnumMember="UI.VisualizationType/Progress" />
		<PropertyValue Property="Criticality" Path="OverallStatus_code" />
	</Record>
</Annotation>
```

**LANGUAGE**: ABAP

**CODE**:
```abap
@UI.dataPoint: {
  title: 'Recommendation',
  targetValue: 100.0,
  visualization: #PROGRESS
}
annotate view service.TravelAgency with {
  @UI.dataPoint: {
    qualifier: 'Recommendation'
  }
  Recommendation;
}
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: Sample.fragment.xml

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<VBox class="sapUiTinyMarginTop" width="320px">
		<Label text="Travel Agency Recommendation:" />
		<macros:Field metaPath="@com.sap.vocabularies.UI.v1.DataPoint#Recommendation" id="FieldDataPointProgress" />
	</VBox>
</core:FragmentDefinition>

```

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: TravelAgency.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"AgencyID": "070001",
		"City": "Rochester",
		"CountryCode_code": "US",
		"EMailAddress": "info@sunshine-travel.sap",
		"Name": "Sunshine Travel",
		"PhoneNumber": "+1 901-632-5620",
		"PostalCode": "54323",
		"Street": "134 West Street",
		"WebAddress": "http://www.sunshine-travel.sap",
		"Rating": "4",
		"Recommendation": "88"
	},
	{
		"AgencyID": "070002",
		"City": "Duesseldorf",
		"CountryCode_code": "DE",
		"EMailAddress": "info@flyhigh.sap",
		"Name": "Fly High",
		"PhoneNumber": "+49 2102 69555",
		"PostalCode": "40880",
		"Street": "Berliner Allee 11",
		"WebAddress": "http://www.flyhigh.sap",
		"Rating": "5",
		"Recommendation": "98"
	},
	{
		"AgencyID": "070003",
		"City": "Berlin",
		"CountryCode_code": "DE",
		"EMailAddress": "info@haphop.sap",
		"Name": "Happy Hopping",
		"PhoneNumber": "+49 30-8853-0",
		"PostalCode": "13467",
		"Street": "Calvinstr. 36",
		"WebAddress": "http://www.haphop.sap",
		"Rating": "4",
		"Recommendation": "91"
	},
	{
		"AgencyID": "070004",
		"City": "Frankfurt",
		"CountryCode_code": "DE",
		"EMailAddress": "info@pinkpanther.sap",
		"Name": "Pink Panther",
		"PhoneNumber": "+49 69-467653-0",
		"PostalCode": "65936",
		"Street": "Auf der Schanz 54",
		"WebAddress": "http://www.pinkpanther.sap",
		"Rating": "5",
		"Recommendation": "97"
	},
	{
		"AgencyID": "070005",
		"City": "Nuernberg",
		"CountryCode_code": "DE",
		"EMailAddress": "info@yc.sap",
		"Name": "Your Choice",
		"PhoneNumber": "+49 9256-4548-0",
		"PostalCode": "90455",
		"Street": "Gustav-Jung-Str. 425",
		"WebAddress": "http://www.yc.sap",
		"Rating": "4",
		"Recommendation": "82"
	},
	{
		"AgencyID": "070006",
		"City": "Roma",
		"CountryCode_code": "IT",
		"EMailAddress": "info@tours.it/Adventure/",
		"Name": "Bella Italia",
		"PhoneNumber": "+39 6 893546721",
		"PostalCode": "00139",
		"Street": "Via Marconi 123",
		"WebAddress": "http://www.tours.it/Adventure/",
		"Rating": "5",
		"Recommendation": "95"
	},
	{
		"AgencyID": "070007",
		"City": "Sydney",
		"CountryCode_code": "AU",
		"EMailAddress": "info@hst.co.au",
		"Name": "Hot Socks Travel",
		"PhoneNumber": "+61 2 2004 5000",
		"PostalCode": "8053",
		"Street": "224 Balnagask Rd",
		"WebAddress": "http://www.hst.co.au",
		"Rating": "5",
		"Recommendation": "99"
	},
	{
		"AgencyID": "070008",
		"City": "Singapore",
		"CountryCode_code": "SG",
		"EMailAddress": "info@burns-burns-burns.sg",
		"Name": "Burns Nuclear",
		"PhoneNumber": "+65 777-5566",
		"PostalCode": "118228",
		"Street": "14 Science Park Drive",
		"WebAddress": "http://www.burns-burns-burns.sg",
		"Rating": "4",
		"Recommendation": "84"
	},
	{
		"AgencyID": "070009",
		"City": "Neumarkt",
		"CountryCode_code": "AT",
		"EMailAddress": "info@honauer.at",
		"Name": "Honauer Reisen GmbH",
		"PhoneNumber": "+43 7941 8903",
		"PostalCode": "4212",
		"Street": "Baumgarten 8",
		"WebAddress": "http://www.honauer.at",
		"Rating": "5",
		"Recommendation": "99"
	},
	{
		"AgencyID": "070010",
		"City": "Berlin",
		"CountryCode_code": "DE",
		"EMailAddress": "info@travel-from-walldorf",
		"Name": "Travel from Walldorf",
		"PhoneNumber": "+49 30-622860",
		"PostalCode": "10557",
		"Street": "Altonaer Str. 24",
		"WebAddress": "http://www.travel-from-walldorf",
		"Rating": "4",
		"Recommendation": "90"
	},
	{
		"AgencyID": "070011",
		"City": "Stockholm",
		"CountryCode_code": "SE",
		"EMailAddress": "info@starfleet.ufp",
		"Name": "Voyager Enterprises",
		"PhoneNumber": "+46 8/ 587 70000",
		"PostalCode": "70563",
		"Street": "Gustavslundsvaegen 151",
		"WebAddress": "http://www.starfleet.ufp",
		"Rating": "5",
		"Recommendation": "100"
	},
	{
		"AgencyID": "070012",
		"City": "Birmingham",
		"CountryCode_code": "GB",
		"EMailAddress": "info@ben-mcCloskey.co.uk",
		"Name": "Ben McCloskey Ltd.",
		"PhoneNumber": "+44 121 365-2251",
		"PostalCode": "B17 9TN",
		"Street": "74 Court Oak Rd",
		"WebAddress": "http://www.ben-mcCloskey.co.uk",
		"Rating": "5",
		"Recommendation": "97"
	},
	{
		"AgencyID": "070013",
		"City": "Zuerich",
		"CountryCode_code": "CH",
		"EMailAddress": "info@pi-pa-tri.sap",
		"Name": "Pillepalle Trips",
		"PhoneNumber": "+41 1 345-5321",
		"PostalCode": "8008",
		"Street": "Gorki Park 4",
		"WebAddress": "http://www.pi-pa-tri.sap",
		"Rating": "5",
		"Recommendation": "99"
	},
	{
		"AgencyID": "070014",
		"City": "London",
		"CountryCode_code": "GB",
		"EMailAddress": "info@hopp.sap",
		"Name": "Kangeroos",
		"PhoneNumber": "+44 171-2937638",
		"PostalCode": "20001",
		"Street": "Lancaster drive 435",
		"WebAddress": "http://www.hopp.sap",
		"Rating": "4",
		"Recommendation": "85"
	},
	{
		"AgencyID": "070015",
		"City": "Dresden",
		"CountryCode_code": "DE",
		"EMailAddress": "info@neu.schwanstein.sap",
		"Name": "Bavarian Castle",
		"PhoneNumber": "+49 98-32832732",
		"PostalCode": "01069",
		"Street": "Pilnizerstr. 241",
		"WebAddress": "http://www.neu.schwanstein.sap",
		"Rating": "4",
		"Recommendation": "91"
	},
	{
		"AgencyID": "070016",
		"City": "Boston",
		"CountryCode_code": "US",
		"EMailAddress": "info@ali.sap",
		"Name": "Ali's Bazar",
		"PhoneNumber": "+1 508-692-5200",
		"PostalCode": "19113",
		"Street": "45, Mac Arthur Boulevard",
		"WebAddress": "http://www.ali.sap",
		"Rating": "4",
		"Recommendation": "87"
	},
	{
		"AgencyID": "070017",
		"City": "Glasgow",
		"CountryCode_code": "GB",
		"EMailAddress": "info@super.sap",
		"Name": "Super Agency",
		"PhoneNumber": "+44 141 711-5643",
		"PostalCode": "G12 8AG",
		"Street": "50 Cranworth St",
		"WebAddress": "http://www.super.sap",
		"Rating": "5",
		"Recommendation": "96"
	},
	{
		"AgencyID": "070018",
		"City": "Moscow",
		"CountryCode_code": "RU",
		"EMailAddress": "info@wang.chong.sap",
		"Name": "Wang Chong",
		"PhoneNumber": "+7 3287-213321",
		"PostalCode": "150021",
		"Street": "Gagarine Park",
		"WebAddress": "http://www.wang.chong.sap",
		"Rating": "3",
		"Recommendation": "48"
	},
	{
		"AgencyID": "070019",
		"City": "Hannover",
		"CountryCode_code": "DE",
		"EMailAddress": "info@atw.sap",
		"Name": "Around the World",
		"PhoneNumber": "+49 511-347589-0",
		"PostalCode": "30625",
		"Street": "An der Breiten Wiese 122",
		"WebAddress": "http://www.atw.sap",
		"Rating": "4",
		"Recommendation": "88"
	},
	{
		"AgencyID": "070020",
		"City": "Koeln",
		"CountryCode_code": "DE",
		"EMailAddress": "info@bye-bye.sap",
		"Name": "No Return",
		"PhoneNumber": "+49 221-5689-100",
		"PostalCode": "51105",
		"Street": "Wahnheider Str. 57",
		"WebAddress": "http://www.bye-bye.sap",
		"Rating": "5",
		"Recommendation": "94"
	}
]

```

--------------------------------

**TITLE**: Date Picker

**INTRODUCTION**: The Field building block enables you to render date input fields with a date picker.

**TAGS**: date and time fields, calendar, timestamp, temporal

**STEP**: Implementation

**DESCRIPTION**: Define a property of type Date. The field formats the string value and in edit mode offers a Date Picker for changing the date.

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: Sample.fragment.xml

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<VBox class="sapUiTinyMarginTop" width="320px">
		<Label text="Begin Date:" />
		<macros:Field metaPath="BeginDate" id="FieldDatePickerBeginDate" />
	</VBox>
</core:FragmentDefinition>

```

**FILE**: annotations.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});

```

**FILE**: Travel.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"TravelID": "00000001",
		"BeginDate": "2025-11-04",
		"EndDate": "2025-11-06",
		"BookingFee": "20.00",
		"TotalPrice": "900.00",
		"CurrencyCode_code": "USD",
		"Description": "Business Trip for Christine, Pierre",
		"TravelDetails": "This business trip includes a two-day customer workshop at the airport. The goal is the evaluation of the customer's use cases and the alignment on the roadmap for the upcoming year.",
		"TravelStatus_code": "A",
		"to_Agency_AgencyID": "070001"
	},
	{
		"TravelUUID": "53657221A8E4645C17002DF03754AB66",
		"TravelID": "00000002",
		"BeginDate": "2025-12-04",
		"EndDate": "2025-12-16",
		"BookingFee": "80.00",
		"TotalPrice": "3164.00",
		"CurrencyCode_code": "USD",
		"Description": "Lars Jensen site visit for system rollout support",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070002"
	},
	{
		"TravelUUID": "54657221A8E4645C17002DF03754AB66",
		"TravelID": "00000003",
		"BeginDate": "2025-08-04",
		"EndDate": "2025-08-08",
		"BookingFee": "40.00",
		"TotalPrice": "1871.00",
		"CurrencyCode_code": "USD",
		"Description": "John Smith customer workshop at Acme Corp headquarters",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070003"
	},
	{
		"TravelUUID": "55657221A8E4645C17002DF03754AB66",
		"TravelID": "00000004",
		"BeginDate": "2025-09-04",
		"EndDate": "2025-09-05",
		"BookingFee": "40.00",
		"TotalPrice": "1240.00",
		"CurrencyCode_code": "USD",
		"Description": "Anna Müller onboarding with new project team in Berlin",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "X",
		"to_Agency_AgencyID": "070003"
	}
]

```

--------------------------------

**TITLE**: Date-Time Picker

**INTRODUCTION**: The Field building block enables you to render date input fields with a date-time picker.

**TAGS**: field, date time picker, calendar, timestamp, datetime

**STEP**: Implementation

**DESCRIPTION**: Define a property of type DateTime. The field formats the string value and in edit mode offers a date-time picker for changing date and time.

**LANGUAGE**: CDS

**CODE**:
```cds
using {TravelService.Travel} from '../../../../../service/service';
using from '../../../../../service/annotations';

extend entity TravelService.Travel with {
  @Common.Label: 'Reminder'
  ReminderTime : DateTime;
};
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: Sample.fragment.xml

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<VBox class="sapUiTinyMarginTop" width="320px">
		<Title text="Date-Time Picker examples" />
		<Label text="Reminder:" />
		<macros:Field metaPath="ReminderTime" id="FieldReminderDateTime" />
	</VBox>
</core:FragmentDefinition>

```

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: annotations.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});

```

**FILE**: Travel.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"TravelID": "00000001",
		"BeginDate": "2025-11-04",
		"EndDate": "2025-11-06",
		"BookingFee": "20.00",
		"TotalPrice": "900.00",
		"CurrencyCode_code": "USD",
		"Description": "Business Trip for Christine, Pierre",
		"TravelDetails": "This business trip includes a two-day customer workshop at the airport. The goal is the evaluation of the customer's use cases and the alignment on the roadmap for the upcoming year.",
		"TravelStatus_code": "A",
		"to_Agency_AgencyID": "070001"
	},
	{
		"TravelUUID": "53657221A8E4645C17002DF03754AB66",
		"TravelID": "00000002",
		"BeginDate": "2025-12-04",
		"EndDate": "2025-12-16",
		"BookingFee": "80.00",
		"TotalPrice": "3164.00",
		"CurrencyCode_code": "USD",
		"Description": "Lars Jensen site visit for system rollout support",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070002"
	},
	{
		"TravelUUID": "54657221A8E4645C17002DF03754AB66",
		"TravelID": "00000003",
		"BeginDate": "2025-08-04",
		"EndDate": "2025-08-08",
		"BookingFee": "40.00",
		"TotalPrice": "1871.00",
		"CurrencyCode_code": "USD",
		"Description": "John Smith customer workshop at Acme Corp headquarters",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070003"
	},
	{
		"TravelUUID": "55657221A8E4645C17002DF03754AB66",
		"TravelID": "00000004",
		"BeginDate": "2025-09-04",
		"EndDate": "2025-09-05",
		"BookingFee": "40.00",
		"TotalPrice": "1240.00",
		"CurrencyCode_code": "USD",
		"Description": "Anna Müller onboarding with new project team in Berlin",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "X",
		"to_Agency_AgencyID": "070003"
	}
]

```

--------------------------------

**TITLE**: Field

**INTRODUCTION**: The SAP Fiori elements Field building block provides an easy way to instantiate a property that was configured as part of the service metadata. The Field analyzes the different annotations that are defined for the property to create the most appropriate controls and additionally offers you configuration options for adjusting the behavior to fit your needs.

**TAGS**: field

**STEP**: Implementation

**DESCRIPTION**: If not annotated otherwise, an editable property is rendered as an Input field in edit mode.

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: Sample.fragment.xml

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<VBox class="sapUiTinyMarginTop" width="320px">
		<Label text="Description:" />
		<macros:Field metaPath="Description" id="FieldInputDescription" />
	</VBox>
</core:FragmentDefinition>

```

**FILE**: annotations.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});

```

**FILE**: Travel.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"TravelID": "00000001",
		"BeginDate": "2025-11-04",
		"EndDate": "2025-11-06",
		"BookingFee": "20.00",
		"TotalPrice": "900.00",
		"CurrencyCode_code": "USD",
		"Description": "Business Trip for Christine, Pierre",
		"TravelDetails": "This business trip includes a two-day customer workshop at the airport. The goal is the evaluation of the customer's use cases and the alignment on the roadmap for the upcoming year.",
		"TravelStatus_code": "A",
		"to_Agency_AgencyID": "070001"
	},
	{
		"TravelUUID": "53657221A8E4645C17002DF03754AB66",
		"TravelID": "00000002",
		"BeginDate": "2025-12-04",
		"EndDate": "2025-12-16",
		"BookingFee": "80.00",
		"TotalPrice": "3164.00",
		"CurrencyCode_code": "USD",
		"Description": "Lars Jensen site visit for system rollout support",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070002"
	},
	{
		"TravelUUID": "54657221A8E4645C17002DF03754AB66",
		"TravelID": "00000003",
		"BeginDate": "2025-08-04",
		"EndDate": "2025-08-08",
		"BookingFee": "40.00",
		"TotalPrice": "1871.00",
		"CurrencyCode_code": "USD",
		"Description": "John Smith customer workshop at Acme Corp headquarters",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070003"
	},
	{
		"TravelUUID": "55657221A8E4645C17002DF03754AB66",
		"TravelID": "00000004",
		"BeginDate": "2025-09-04",
		"EndDate": "2025-09-05",
		"BookingFee": "40.00",
		"TotalPrice": "1240.00",
		"CurrencyCode_code": "USD",
		"Description": "Anna Müller onboarding with new project team in Berlin",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "X",
		"to_Agency_AgencyID": "070003"
	}
]

```

--------------------------------

**TITLE**: File Upload and Download

**INTRODUCTION**: The Field building block enables you to render fields with file upload and download capabilities.

**TAGS**: field, file upload, download, attachment, documents

**STEP**: Implementation

**DESCRIPTION**: You can bind Edm.Stream properties to the Field. Specify its content type and acceptable types via Core.MediaType and Core.AcceptableMediaTypes annotations. Core.ContentDisposition.Filename defines the file name to be displayed.

**LANGUAGE**: CDS

**CODE**:
```cds
using {TravelService.Travel} from '../../../../../service/service';
using from '../../../../../service/annotations';

/*
 * Stream Content (as BLOB)
 */
@title         : 'Stream Content'
@Core.MediaType: 'application/octet-stream'
type Stream : LargeBinary;

extend entity TravelService.Travel with {
  @title: 'Notes File'
  File     : Stream @(
    Core.MediaType                  : 'text/plain',
    Core.AcceptableMediaTypes       : ['text/plain'],
    Core.ContentDisposition.Filename: FileName
  );
  FileName : String;
};
```

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="YourEntity/File">
	<Annotation Term="Core.MediaType" String="text/plain" />
	<Annotation Term="Core.AcceptableMediaTypes">
		<Collection>
			<String>text/plain</String>
		</Collection>
	</Annotation>
	<Annotation Term="Core.ContentDisposition">
		<Record>
			<PropertyValue Property="Filename" PropertyPath="FileName" />
		</Record>
	</Annotation>
</Annotations>
```

**LANGUAGE**: ABAP

**CODE**:
```abap
define type Stream as raw length 1000000000;

extend view entity TravelService.Travel with {
  @EndUserText.label: 'Notes File'
  @Semantics.largeObject: {
    mimeType: 'MimeType',
    fileName: 'FileName',
    acceptableMimeTypes: ['text/plain']
  }
  File : Stream;
  
  @Semantics.mimeType: true
  MimeType : String(100);
  
  FileName : String(255);
}
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: Sample.fragment.xml

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<VBox class="sapUiTinyMarginTop">
		<Label text="Note File:" />
		<HBox width="320px">
			<macros:Field metaPath="File" id="FieldFile" />
		</HBox>
		<Label text="Note:" class="sapUiTinyMarginTop" />
		<Text
			text="As this example builds on a simple demo service, there is no real upload and delete. For this example, this means: (1) the file content won't change on uploading a different file and (2) uploads after a delete will result in an error message until you refresh you browser."
		/>
	</VBox>
</core:FragmentDefinition>

```

**FILE**: Travel.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"TravelID": "00000001",
		"BeginDate": "2023-08-04",
		"EndDate": "2023-08-04",
		"BookingFee": "20.00",
		"TotalPrice": "900.00",
		"CurrencyCode_code": "USD",
		"Description": "Business Trip for Christine, Pierre",
		"FlightRoute": "2.3522219;48.856614;0; -74.0059731;40.7143528;0",
		"CityFrom": "Paris",
		"CityTo": "New York",
		"TravelStatus_code": "O",
		"File": "field/fieldFile/localService/notes.txt",
		"FileName": "notes.txt"
	}
]

```

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: annotations.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});

```

--------------------------------

**TITLE**: Input Mask

**INTRODUCTION**: The Field building block enables you to render masked input fields, which allow users to enter values only in the specified format.

**TAGS**: field, input mask, formatting, pattern, validation

**STEP**: Implementation

**DESCRIPTION**: Add a UI.Mask annotation to the property to be masked. The annotation specifies the Mask to be applied to the value, the PlaceholderSymbol shows where the user can enter data.

**LANGUAGE**: CDS

**CODE**:
```cds
using {TravelService.Booking} from '../../../../../service/service';
using from '../../../../../service/annotations';

extend entity TravelService.Booking with {
  DiscountCode : String @(UI.InputMask: {
    Mask             : 'C ***-***-***',
    PlaceholderSymbol: '_',
  });
};
```

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.InputMask" Qualifier="DiscountCode">
	<Record>
		<PropertyValue Property="Mask" String="C ***-***-***" />
		<PropertyValue Property="PlaceholderSymbol" String="_" />
	</Record>
</Annotation>
```

**LANGUAGE**: ABAP

**CODE**:
```abap
extend view entity TravelService.Booking with {
  @EndUserText.label: 'Discount Code'
  @UI.masked: {
    maskingCharacter: '*',
    unmaskingCharacter: '_',
    maskingPattern: 'C ***-***-***'
  }
  DiscountCode : String(11);
}
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: Sample.fragment.xml

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<VBox class="sapUiTinyMarginTop" width="320px">
		<Label text="Discount Code:" />
		<macros:Field metaPath="DiscountCode" id="fieldInputMaskDiscountCode" />
	</VBox>
</core:FragmentDefinition>

```

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: annotations.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});

```

**FILE**: Booking.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"BookingUUID": "7A757221A8E4645C17002DF03754AB66",
		"to_Travel_TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"BookingID": "0001",
		"BookingDate": "2023-08-02",
		"ConnectionID": "1537",
		"FlightDate": "2023-08-04",
		"FlightPrice": "438.00",
		"CurrencyCode_code": "USD",
		"BookingStatus_code": "N",
		"DiscountCode": "123456789"
	}
]

```

--------------------------------

**TITLE**: Input with Value Help

**INTRODUCTION**: The Field building block enables you to render input fields with value help. Users can choose values from a list or use a dialog to search for and select values.

**TAGS**: input fields, text input, user input, data entry

**STEP**: Value Help Configuration using ValueList Annotation

**DESCRIPTION**: The com.sap.vocabularies.Common.v1.ValueList annotation configures value help functionality for input fields. It defines where to find possible values through its CollectionPath (resource path to OData collection) and CollectionRoot (service root URL) properties. The Label property provides the headline for the value list dialog. The Parameters property contains instructions for constructing requests and mapping response values through in/out mappings, determining how field values interact with the value help data.

**STEP**: Value Help with Select Control (Dropdown)

**DESCRIPTION**: This basic value help allows a single selection from a predefined list. Use Common.ValueListWithFixedValues to render as a dropdown select control. Fields can display key and description in different formats using TextArrangement annotation.

**STEP**: Value Help with Validation

**DESCRIPTION**: Demonstrates validation feature using Common.ValueListForValidation. Input values are validated against the value list data when leaving the field. Enter any value and remove focus - if the value is not found in the dataset, the field shows a red frame and error message.

**STEP**: Context-Dependent Value Help

**DESCRIPTION**: Different value help dialogs based on context determined by another property. Use Common.ValueListRelevantQualifiers to configure behavior when using multiple value lists. The value help content changes dynamically based on the value of another field.

**STEP**: Multiple Value Help Dialogs

**DESCRIPTION**: Scenarios requiring more than one value help. Use a collection of ValueList annotations to select a value help variant from a dropdown list in the dialog. Click the value help icon to open the dialog, then use the dropdown menu at the top to switch between different value help variants.

**STEP**: In/Out Parameter Mapping

**DESCRIPTION**: Structure of ValueList annotation and how In/Out mappings link fields between main entity and value help entity. Out-Mapping automatically fills other fields when selecting a value help item. In-Mapping uses field values as filters in other value helps. In/Out-Mapping combines both behaviors.

**STEP**: Side Effects for Value Help Collection Updates

**DESCRIPTION**: Use side effects to refresh value help data when the underlying collection has been modified. This ensures users always see the most current data in value help dialogs. For detailed implementation, refer to the following documentation:

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
namespace sap.fe.core;

@odata.draft.enabled

entity RootEntity {
  key ID                             : Integer  @Core.Computed  @title: 'Identifier';
      valueHelpField1_1              : String   @title: 'Value Help Field 1_1';
      valueHelpField1_2              : String   @title: 'Value Help Field 1_2';
      _BusinessPartnerAddress_VHF1_2 : Association to BusinessPartnerAddress2
                                         on _BusinessPartnerAddress_VHF1_2.BusinessPartner = valueHelpField1_2;

      valueHelpField2_1              : String   @title: 'Value Help Field 2_1';
      valueHelpField2_2              : String   @title: 'Value Help Field 2_2';
      _BusinessPartnerAddress_VHF2_2 : Association to BusinessPartnerAddress2
                                         on _BusinessPartnerAddress_VHF2_2.BusinessPartner = valueHelpField2_2;
      valueHelpField2_3              : String   @title: 'Value Help Field 2_3';
      valueHelpField3_1              : String   @title: 'Value Help Field 3_1';
      _BusinessPartnerAddress_VHF3_1 : Association to BusinessPartnerAddress2
                                         on _BusinessPartnerAddress_VHF3_1.BusinessPartner = valueHelpField3_1;

      valueHelpField4_1              : String   @title: 'Value Help Field 4_1';
      valueHelpField4_2              : String   @title: 'Value Help Field 4_2';
      _BusinessPartnerAddress_VHF4_2 : Association to BusinessPartnerAddress2
                                         on _BusinessPartnerAddress_VHF4_2.BusinessPartner = valueHelpField4_2;

      valueHelpField5_1              : String   @title: 'Value Help Field 5_1';
      _BusinessPartnerAddress_VHF5_1 : Association to BusinessPartnerAddress2
                                         on _BusinessPartnerAddress_VHF5_1.BusinessPartner = valueHelpField5_1;

      valueHelpField6_1              : String   @title: 'Value Help Field 6_1';
      valueHelpField6_2              : String   @title: 'Value Help Field 6_2';
      _BusinessPartnerAddress_VHF6_2 : Association to BusinessPartnerAddress2
                                         on _BusinessPartnerAddress_VHF6_2.BusinessPartner = valueHelpField6_2;

      valueHelpField7_1              : String   @title: 'Account ID';
      valueHelpField7_2              : String   @title: 'Account Full Name';
      valueHelpField7_3              : String   @title: 'Business Partner';
      valueHelpField7_4              : String   @title: 'Partner Function';

      _PartnerFunction               : Association to one PartnerFunction
                                         on _PartnerFunction.PartnerFunction = valueHelpField7_4;
};

entity BusinessPartnerAddress {
  key BusinessPartner : String @title: 'Business Partner';
      FullName        : String @title: 'Name';
      CityName        : String @title: 'City';
      Country         : String @title: 'Country';
      PostalCode      : String @title: 'Postal Code';
      StreetName      : String @title: 'Street Name';
      HouseNumber     : String @title: 'House Number';
      Account         : String @title: 'Account';
};

entity BusinessPartnerAddress2 {
  key BusinessPartner : String @(
        Common: {
          Text           : FullName, //Text not optional if you want to have a display format via TextArrangement in the value list
          TextArrangement: #TextFirst //sets presentation of key and description value like description (key) in the value help table.
        },
        title : 'Business Partner'
      );
      FullName        : String @title: 'Name';
      CityName        : String @title: 'City';
      Country         : String @title: 'Country';
      PostalCode      : String @title: 'Postal Code';
      StreetName      : String @title: 'Street Name';
      HouseNumber     : String @title: 'House Number';
};

// *********************************************
// switch off the typeahead for the input fields annotated to value list entity BusinessPartnerAddress3
// *********************************************
annotate BusinessPartnerAddress3 with @(Capabilities.SearchRestrictions.Searchable: false);

entity BusinessPartnerAddress3 {
  key BusinessPartner : String @title: 'Business Partner';
      FullName        : String @title: 'Name';
      CityName        : String @title: 'City';
      PostalCode      : String @title: 'Postal Code';
};

entity Account {
  key Account  : String @title: 'Account';
      FullName : String @title: 'Name';
      CityName : String @title: 'City';
      Country  : String @title: 'Country';
};

entity PartnerFunction {
  key PartnerFunction     : String @(
        title : 'PF',
        Common: {Text: PartnerFunctionName}
      );
      PartnerFunctionName : String @title: 'Partner Function';
};

entity AccBp {
  key Account          : String @title: 'Account';
  key BusinessPartner  : String @title: 'Business Partner';
      PartnerFunction  : String @(
        title : 'PF',
        Common: {Text: _PartnerFunction.PartnerFunctionName}
      );
      _PartnerFunction : Association to one PartnerFunction
                           on _PartnerFunction.PartnerFunction = PartnerFunction;
};

// Value Help with fixed values
annotate RootEntity with {
  @(Common: {
    ValueListWithFixedValues: true,
    ValueList               : {
      CollectionPath: 'BusinessPartnerAddress',
      Parameters    : [
        {
          $Type            : 'Common.ValueListParameterInOut',
          LocalDataProperty: valueHelpField1_1,
          ValueListProperty: 'BusinessPartner'
        },
        {
          $Type            : 'Common.ValueListParameterDisplayOnly',
          ValueListProperty: 'FullName'
        }
      ]
    }
  })
  valueHelpField1_1;

  // Dropdown with Text Arrangement
  @(Common: {
    Text                    : _BusinessPartnerAddress_VHF1_2.FullName,
    ValueListWithFixedValues: true,
    ValueList               : {
      CollectionPath: 'BusinessPartnerAddress2',
      Parameters    : [{
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: valueHelpField1_2,
        ValueListProperty: 'BusinessPartner'
      }]
    }
  })
  valueHelpField1_2;
}

annotate RootEntity with
@(UI.FieldGroup #Example1: {
  Label: 'Example1',
  $Type: 'UI.FieldGroupType',
  Data : [
    {
      Value: valueHelpField1_1,
      $Type: 'UI.DataField'
    },
    {
      Value: valueHelpField1_2,
      $Type: 'UI.DataField'
    }
  ]
});

// Basic Value Help
annotate RootEntity with {
  @(Common: {ValueList: {
    CollectionPath: 'BusinessPartnerAddress',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: valueHelpField2_1,
        ValueListProperty: 'BusinessPartner',
        ![@UI.Importance]: #High
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'FullName'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CityName',
        ![@UI.Importance]: #High
      }
    ]
  }})
  valueHelpField2_1;

  // Dialog with Text Arrangement
  @(Common: {
    Text     : _BusinessPartnerAddress_VHF2_2.FullName,
    ValueList: {
      CollectionPath: 'BusinessPartnerAddress2',
      Parameters    : [
        {
          $Type            : 'Common.ValueListParameterInOut',
          LocalDataProperty: valueHelpField2_2,
          ValueListProperty: 'BusinessPartner',
          ![@UI.Importance]: #High
        },
        {
          $Type            : 'Common.ValueListParameterDisplayOnly',
          ValueListProperty: 'FullName'

        },
        {
          $Type            : 'Common.ValueListParameterDisplayOnly',
          ValueListProperty: 'Country',
          ![@UI.Importance]: #High
        }
      ]
    }
  })
  valueHelpField2_2;

  // Dialog without Typeahead
  @(Common: {ValueList: {
    CollectionPath: 'BusinessPartnerAddress3',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: valueHelpField2_3,
        ValueListProperty: 'BusinessPartner',
        ![@UI.Importance]: #High
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'FullName'

      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode',
        ![@UI.Importance]: #High
      }
    ]
  }})
  valueHelpField2_3;
}

annotate RootEntity with
@(UI.FieldGroup #Example2: {
  Label: 'Example2',
  $Type: 'UI.FieldGroupType',
  Data : [
    {
      Value: valueHelpField2_1,
      $Type: 'UI.DataField'
    },
    {
      Value: valueHelpField2_2,
      $Type: 'UI.DataField'
    },
    {
      Value: valueHelpField2_3,
      $Type: 'UI.DataField'
    }
  ]
});

// Value help with validation
annotate RootEntity with {
  @(Common: {
    Text                  : _BusinessPartnerAddress_VHF3_1.FullName,
    ValueListForValidation: '',
    ValueList             : {
      CollectionPath: 'BusinessPartnerAddress2',
      Parameters    : [
        {
          $Type            : 'Common.ValueListParameterInOut',
          LocalDataProperty: valueHelpField3_1,
          ValueListProperty: 'BusinessPartner'
        },
        {
          $Type            : 'Common.ValueListParameterDisplayOnly',
          ValueListProperty: 'Country'
        }
      ]
    }
  })
  valueHelpField3_1;
}

annotate RootEntity with
@(UI.FieldGroup #Example2a: {
  Label: 'Example2a',
  $Type: 'UI.FieldGroupType',
  Data : [{
    Value: valueHelpField3_1,
    $Type: 'UI.DataField'
  }]
});

// Context-dependent value help
annotate RootEntity with {
  @(Common: {
    ValueListWithFixedValues: true,
    ValueList               : {
      Label         : 'Business Partner Address',
      CollectionPath: 'BusinessPartnerAddress',
      Parameters    : [{
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: valueHelpField4_1,
        ValueListProperty: 'BusinessPartner'
      }]
    }
  })
  valueHelpField4_1;
  @(Common: {
    ValueListRelevantQualifiers: [{$edmJson: {$If: [
      {$Or: [
        {$Eq: [
          {$Path: 'valueHelpField4_1'},
          {$String: '17100001'}
        ]},
        {$Eq: [
          {$Path: 'valueHelpField4_1'},
          {$String: '17100006'}
        ]}
      ]},
      {$String: 'qualifier2'},
      {$String: ''}
    ]}}],
    ValueList                  : {
      Label         : 'Business Partner Address',
      CollectionPath: 'BusinessPartnerAddress',
      Parameters    : [
        {
          $Type            : 'Common.ValueListParameterInOut',
          LocalDataProperty: valueHelpField4_2,
          ValueListProperty: 'BusinessPartner',
          ![@UI.Importance]: #High
        },
        {
          $Type            : 'Common.ValueListParameterDisplayOnly',
          ValueListProperty: 'FullName'

        },
        {
          $Type            : 'Common.ValueListParameterDisplayOnly',
          ValueListProperty: 'Country',
          ![@UI.Importance]: #High
        }
      ]
    },
    ValueList #qualifier2      : {
      Label         : 'Business Partner Address 2',
      CollectionPath: 'BusinessPartnerAddress2',
      Parameters    : [
        {
          $Type            : 'Common.ValueListParameterInOut',
          LocalDataProperty: valueHelpField4_2,
          ValueListProperty: 'BusinessPartner',
          ![@UI.Importance]: #High
        },
        {
          $Type            : 'Common.ValueListParameterDisplayOnly',
          ValueListProperty: 'CityName'
        },
        {
          $Type            : 'Common.ValueListParameterDisplayOnly',
          ValueListProperty: 'Country',
          ![@UI.Importance]: #High
        }
      ]
    }
  })
  valueHelpField4_2;
}

annotate RootEntity with
@(UI.FieldGroup #Example3: {
  Label: 'Example3',
  $Type: 'UI.FieldGroupType',
  Data : [
    {
      Value: valueHelpField4_1,
      $Type: 'UI.DataField'
    },
    {
      Value: valueHelpField4_2,
      $Type: 'UI.DataField'
    }
  ]
});

// Multiple value helps
annotate RootEntity with {
  @(Common: {
    Text                 : _BusinessPartnerAddress_VHF5_1.FullName,
    ValueList            : {
      Label         : 'Business Partner Address',
      CollectionPath: 'BusinessPartnerAddress',
      Parameters    : [
        {
          $Type            : 'Common.ValueListParameterInOut',
          LocalDataProperty: valueHelpField5_1,
          ValueListProperty: 'BusinessPartner',
          ![@UI.Importance]: #High
        },
        {
          $Type            : 'Common.ValueListParameterDisplayOnly',
          ValueListProperty: 'FullName'
        },
        {
          $Type            : 'Common.ValueListParameterDisplayOnly',
          ValueListProperty: 'Country',
          ![@UI.Importance]: #High
        }
      ]
    },
    ValueList #qualifier2: {
      Label         : 'Business Partner Address 2',
      CollectionPath: 'BusinessPartnerAddress2',
      Parameters    : [
        {
          $Type            : 'Common.ValueListParameterInOut',
          LocalDataProperty: valueHelpField5_1,
          ValueListProperty: 'BusinessPartner'
        },
        {
          $Type            : 'Common.ValueListParameterDisplayOnly',
          ValueListProperty: 'FullName'
        },
        {
          $Type            : 'Common.ValueListParameterDisplayOnly',
          ValueListProperty: 'Country'
        }
      ]
    },
    ValueList #qualifier3: {
      Label         : 'Business Partner Address 3',
      CollectionPath: 'BusinessPartnerAddress',
      Parameters    : [
        {
          $Type            : 'Common.ValueListParameterInOut',
          LocalDataProperty: valueHelpField5_1,
          ValueListProperty: 'BusinessPartner'
        },
        {
          $Type            : 'Common.ValueListParameterDisplayOnly',
          ValueListProperty: 'PostalCode'
        },
        {
          $Type            : 'Common.ValueListParameterDisplayOnly',
          ValueListProperty: 'CityName'
        }
      ]
    }
  })
  valueHelpField5_1;
}

annotate RootEntity with
@(UI.FieldGroup #Example4: {
  Label: 'Example4',
  $Type: 'UI.FieldGroupType',
  Data : [{
    Value: valueHelpField5_1,
    $Type: 'UI.DataField'
  }]
});

// *********************************************
// Control the content of the Multiple Value Help list
// *********************************************

// Control Multiple Value Help Content
annotate RootEntity with {
  @(Common: {
    ValueListWithFixedValues: true,
    ValueList               : {
      Label         : 'Business Partner Address',
      CollectionPath: 'BusinessPartnerAddress',
      Parameters    : [{
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: valueHelpField6_1,
        ValueListProperty: 'BusinessPartner'
      }]
    }
  })
  valueHelpField6_1;

  @(Common: {
    Text                       : _BusinessPartnerAddress_VHF6_2.FullName,
    ValueListRelevantQualifiers: [

      {$edmJson: {$If: [
        {$Eq: [
          {$Path: 'valueHelpField6_1'},
          {$String: '17100001'}
        ]},
        {$String: 'qualifier102'}
      ]}},

      {$edmJson: {$If: [
        {$Eq: [
          {$Path: 'valueHelpField6_1'},
          {$String: '17100001'}
        ]},
        {$String: 'qualifier103'}
      ]}},

      {$edmJson: {$If: [
        {$Eq: [
          {$Path: 'valueHelpField6_1'},
          {$String: '17100006'}
        ]},
        {$String: 'qualifier103'}
      ]}},

      {$edmJson: {$If: [
        {$Eq: [
          {$Path: 'valueHelpField6_1'},
          {$String: '17100006'}
        ]},
        {$String: 'qualifier104'}
      ]}},

      {$edmJson: {$If: [
        {$And: [
          {$Ne: [
            {$Path: 'valueHelpField6_1'},
            {$String: '17100001'}
          ]},
          {$Ne: [
            {$Path: 'valueHelpField6_1'},
            {$String: '17100006'}
          ]}
        ]},
        {$String: ''}
      ]}}

    ],
    ValueList                  : {
      Label         : 'Business Partner Address',
      CollectionPath: 'BusinessPartnerAddress',
      Parameters    : [
        {
          $Type            : 'Common.ValueListParameterInOut',
          LocalDataProperty: valueHelpField6_2,
          ValueListProperty: 'BusinessPartner',
          ![@UI.Importance]: #High
        },
        {
          $Type            : 'Common.ValueListParameterDisplayOnly',
          ValueListProperty: 'FullName'
        },
        {
          $Type            : 'Common.ValueListParameterDisplayOnly',
          ValueListProperty: 'Country'
        }
      ]
    },
    ValueList #qualifier102    : {
      Label         : 'Business Partner Address 2',
      CollectionPath: 'BusinessPartnerAddress2',
      Parameters    : [
        {
          $Type            : 'Common.ValueListParameterInOut',
          LocalDataProperty: valueHelpField6_2,
          ValueListProperty: 'BusinessPartner',
          ![@UI.Importance]: #High
        },
        {
          $Type            : 'Common.ValueListParameterDisplayOnly',
          ValueListProperty: 'FullName'

        },
        {
          $Type            : 'Common.ValueListParameterDisplayOnly',
          ValueListProperty: 'Country'
        }
      ]
    },
    ValueList #qualifier103    : {
      Label         : 'Business Partner Address 3',
      CollectionPath: 'BusinessPartnerAddress',
      Parameters    : [
        {
          $Type            : 'Common.ValueListParameterInOut',
          LocalDataProperty: valueHelpField6_2,
          ValueListProperty: 'BusinessPartner',
          ![@UI.Importance]: #High
        },
        {
          $Type            : 'Common.ValueListParameterDisplayOnly',
          ValueListProperty: 'FullName'

        },
        {
          $Type            : 'Common.ValueListParameterDisplayOnly',
          ValueListProperty: 'CityName'
        }
      ]
    },
    ValueList #qualifier104    : {
      Label         : 'Business Partner Address 4',
      CollectionPath: 'BusinessPartnerAddress',
      Parameters    : [
        {
          $Type            : 'Common.ValueListParameterInOut',
          LocalDataProperty: valueHelpField6_2,
          ValueListProperty: 'BusinessPartner',
          ![@UI.Importance]: #High
        },
        {
          $Type            : 'Common.ValueListParameterDisplayOnly',
          ValueListProperty: 'FullName'
        },
        {
          $Type            : 'Common.ValueListParameterDisplayOnly',
          ValueListProperty: 'CityName'
        },
        {
          $Type            : 'Common.ValueListParameterDisplayOnly',
          ValueListProperty: 'StreetName'
        }
      ]
    }
  })
  valueHelpField6_2;
}

annotate RootEntity with
@(UI.FieldGroup #Example5: {
  Label: 'Example5',
  $Type: 'UI.FieldGroupType',
  Data : [
    {
      Value: valueHelpField6_1,
      $Type: 'UI.DataField'
    },
    {
      Value: valueHelpField6_2,
      $Type: 'UI.DataField'
    }
  ]
});

// In / Out Mappings in the ValueList Annotation
annotate RootEntity with {
  @(Common: {ValueList: {
    CollectionPath: 'Account',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: valueHelpField7_1,
        ValueListProperty: 'Account',
        ![@UI.Importance]: #High
      },
      {
        $Type            : 'Common.ValueListParameterOut',
        LocalDataProperty: valueHelpField7_2,
        ValueListProperty: 'FullName',
        ![@UI.Importance]: #High
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CityName'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Country'
      },
    ],
  }}, )
  valueHelpField7_1;
}

// valueHelpField7_2 is only a input field prefilled with the filter result from valueHelpField7_1


annotate RootEntity with {
  @(Common: {
    ValueListForValidation: '',
    ValueList             : {
      Label         : 'Business Partner Address',
      CollectionPath: 'BusinessPartnerAddress',
      Parameters    : [
        {
          $Type            : 'Common.ValueListParameterInOut',
          LocalDataProperty: valueHelpField7_3,
          ValueListProperty: 'BusinessPartner',
          ![@UI.Importance]: #High
        },
        {
          $Type            : 'Common.ValueListParameterIn',
          LocalDataProperty: valueHelpField7_1,
          ValueListProperty: 'Account',
        },
        {
          $Type            : 'Common.ValueListParameterDisplayOnly',
          ValueListProperty: 'CityName',
          ![@UI.Importance]: #High
        },
      ],
    }
  }, )
  valueHelpField7_3;
}

annotate RootEntity with {
  @(Common: {
    Text           : _PartnerFunction.PartnerFunctionName,
    TextArrangement: #TextOnly,
    ValueList      : {
      Label         : 'Partner Function',
      CollectionPath: 'AccBp',
      Parameters    : [
        {
          $Type            : 'Common.ValueListParameterInOut',
          LocalDataProperty: valueHelpField7_4,
          ValueListProperty: 'PartnerFunction',
          ![@UI.Importance]: #High
        },
        {
          $Type            : 'Common.ValueListParameterIn',
          LocalDataProperty: valueHelpField7_1,
          ValueListProperty: 'Account',
          ![@UI.Importance]: #High
        },
        {
          $Type            : 'Common.ValueListParameterInOut',
          LocalDataProperty: valueHelpField7_3,
          ValueListProperty: 'BusinessPartner',
          ![@UI.Importance]: #High
        },
        {
          $Type            : 'Common.ValueListParameterDisplayOnly',
          ValueListProperty: '_PartnerFunction/PartnerFunctionName',
          ![@UI.Importance]: #High
        }
      ],
    }
  }, )
  valueHelpField7_4;
}

annotate RootEntity with
@(UI.FieldGroup #Example7: {
  Label: 'Example7',
  $Type: 'UI.FieldGroupType',
  Data : [
    {
      Value: valueHelpField7_1,
      $Type: 'UI.DataField',
    },
    {
      Value: valueHelpField7_2,
      $Type: 'UI.DataField',
    },
    {
      Value: valueHelpField7_3,
      $Type: 'UI.DataField',
    },
    {
      Value: valueHelpField7_4,
      $Type: 'UI.DataField',
    },
  ]
});

// *********************************************
// Service declarations
// *********************************************

service Service {
  entity RootEntity              as projection on core.RootEntity;
  entity BusinessPartnerAddress  as projection on core.BusinessPartnerAddress;
  entity BusinessPartnerAddress2 as projection on core.BusinessPartnerAddress2;
  entity BusinessPartnerAddress3 as projection on core.BusinessPartnerAddress3;
  entity Account                 as projection on core.Account;
  entity PartnerFunction         as projection on core.PartnerFunction;
  entity AccBp                   as projection on core.AccBp;


  entity ValueListProperties {
    key Property     : String @title: 'Property';
        PropertyType : String @title: 'Type';
        Description  : String @title: 'Description';
  };

  entity ValueListDocumentation {
    key Description : String @title: 'Description';
        Link        : String @title: 'Link';
  };

  entity ValueListDocumentationDescription {
    key Description : String @title: 'Annotation';
  };

};

```

--------------------------------

**TITLE**: Link with URL

**INTRODUCTION**: The Field building block enables you to render fields with links.

**TAGS**: links, hyperlinks, navigation, URL, quick view

**STEP**: URL-based Navigation

**DESCRIPTION**: You can add a DataFieldWithUrl annotation for a property and provide a URL. The field will render the value as a link, which navigates to the specified URL.

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});
```

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.FieldGroup" Qualifier="Link">
	<Record Type="UI.FieldGroupType">
		<PropertyValue Property="Data">
			<Collection>
				<Record Type="UI.DataFieldWithUrl">
					<PropertyValue Property="Value" Path="Description" />
					<PropertyValue Property="Url" Path="WebsiteUrl" />
					<PropertyValue Property="Label" String="Website" />
				</Record>
			</Collection>
		</PropertyValue>
	</Record>
</Annotation>
```

**LANGUAGE**: ABAP

**CODE**:
```abap
@UI.fieldGroup: [{
  qualifier: 'Link',
  groupLabel: 'Link',
  type: #WITH_URL
}]
annotate view TravelAgency with {
  @UI.fieldGroup: [{
    qualifier: 'Link',
    position: 10,
    type: #WITH_URL,
    url: 'WebAddress'
  }]
  Name;

  @UI.hidden: true
  WebAddress;
}
```

**STEP**: Intent-based Navigation

**DESCRIPTION**: For intent-based navigation via semantic objects, please refer to the following topic.

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: Sample.fragment.xml

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<VBox class="sapUiTinyMarginTop" width="320px">
		<Label text="Travel Agency:" />
		<macros:Field metaPath="@com.sap.vocabularies.UI.v1.FieldGroup#Link/Data/0" id="FieldLinkUrl" />
	</VBox>
</core:FragmentDefinition>

```

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: Travel.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"TravelID": "00000001",
		"BeginDate": "2025-11-04",
		"EndDate": "2025-11-06",
		"BookingFee": "20.00",
		"TotalPrice": "900.00",
		"CurrencyCode_code": "USD",
		"Description": "Business Trip for Christine, Pierre",
		"TravelDetails": "This business trip includes a two-day customer workshop at the airport. The goal is the evaluation of the customer's use cases and the alignment on the roadmap for the upcoming year.",
		"TravelStatus_code": "A",
		"to_Agency_AgencyID": "070001"
	},
	{
		"TravelUUID": "53657221A8E4645C17002DF03754AB66",
		"TravelID": "00000002",
		"BeginDate": "2025-12-04",
		"EndDate": "2025-12-16",
		"BookingFee": "80.00",
		"TotalPrice": "3164.00",
		"CurrencyCode_code": "USD",
		"Description": "Lars Jensen site visit for system rollout support",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070002"
	},
	{
		"TravelUUID": "54657221A8E4645C17002DF03754AB66",
		"TravelID": "00000003",
		"BeginDate": "2025-08-04",
		"EndDate": "2025-08-08",
		"BookingFee": "40.00",
		"TotalPrice": "1871.00",
		"CurrencyCode_code": "USD",
		"Description": "John Smith customer workshop at Acme Corp headquarters",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070003"
	},
	{
		"TravelUUID": "55657221A8E4645C17002DF03754AB66",
		"TravelID": "00000004",
		"BeginDate": "2025-09-04",
		"EndDate": "2025-09-05",
		"BookingFee": "40.00",
		"TotalPrice": "1240.00",
		"CurrencyCode_code": "USD",
		"Description": "Anna Müller onboarding with new project team in Berlin",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "X",
		"to_Agency_AgencyID": "070003"
	}
]

```

--------------------------------

**TITLE**: Link with Quick View

**INTRODUCTION**: The Field building block enables you to render links with quick views.

**TAGS**: field, link, quick view, popover, preview

**STEP**: Implementation

**DESCRIPTION**: You can add a QuickViewFacets annotation to an entity and point to a ReferenceFacet defining what should be shown inside the Quick View Popover.

**LANGUAGE**: CDS

**CODE**:
```cds
using {TravelService.TravelAgency} from '../../../../../service/service';
using from '../../../../../service/annotations';

annotate TravelService.TravelAgency with @(UI: {
  QuickViewFacets             : [{
    $Type : 'UI.ReferenceFacet',
    Label : 'Travel Agency',
    Target: '@UI.FieldGroup#QuickViewContent'
  }],
  FieldGroup #QuickViewContent: {Data: [
    {Value: Name},
    {Value: City},
    {Value: CountryCode_code}
  ]}
});
```

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="YourEntity">
	<Annotation Term="UI.QuickViewFacets">
		<Collection>
			<Record Type="UI.ReferenceFacet">
				<PropertyValue Property="Label" String="Travel Agency" />
				<PropertyValue Property="Target" AnnotationPath="@UI.FieldGroup#QuickViewContent" />
			</Record>
		</Collection>
	</Annotation>
	<Annotation Term="UI.FieldGroup" Qualifier="QuickViewContent">
		<Record>
			<PropertyValue Property="Data">
				<Collection>
					<Record Type="UI.DataField">
						<PropertyValue Property="Value" PropertyPath="Name" />
					</Record>
					<Record Type="UI.DataField">
						<PropertyValue Property="Value" PropertyPath="City" />
					</Record>
					<Record Type="UI.DataField">
						<PropertyValue Property="Value" PropertyPath="CountryCode_code" />
					</Record>
				</Collection>
			</PropertyValue>
		</Record>
	</Annotation>
</Annotations>
```

**LANGUAGE**: ABAP

**CODE**:
```abap
@UI.quickViewFacets: [{
  label: 'Travel Agency',
  targetQualifier: 'QuickViewContent'
}]
annotate view TravelAgency with {
  @UI.fieldGroup: [{
    qualifier: 'QuickViewContent',
    position: 10
  }]
  Name;

  @UI.fieldGroup: [{
    qualifier: 'QuickViewContent',
    position: 20
  }]
  City;

  @UI.fieldGroup: [{
    qualifier: 'QuickViewContent',
    position: 30
  }]
  CountryCode_code;
}
```

**STEP**: Intent-based Navigation

**DESCRIPTION**: For intent-based navigation via semantic objects, please refer to the following topic.

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: Sample.fragment.xml

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<VBox class="sapUiTinyMarginTop" width="320px">
		<Label text="Travel Agency:" />
		<macros:Field metaPath="to_Agency/AgencyID" id="FieldLinkWithQuickView" />
	</VBox>
</core:FragmentDefinition>

```

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: annotations.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});

```

**FILE**: Travel.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"TravelID": "00000001",
		"BeginDate": "2025-11-04",
		"EndDate": "2025-11-06",
		"BookingFee": "20.00",
		"TotalPrice": "900.00",
		"CurrencyCode_code": "USD",
		"Description": "Business Trip for Christine, Pierre",
		"TravelStatus_code": "A",
		"to_Agency_AgencyID": "070001"
	}
]

```

**FILE**: TravelAgency.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"AgencyID": "070001",
		"City": "Rochester",
		"CountryCode_code": "US",
		"EMailAddress": "info@sunshine-travel.sap",
		"Name": "Sunshine Travel",
		"PhoneNumber": "+1 901-632-5620",
		"PostalCode": "54323",
		"Street": "134 West Street",
		"WebAddress": "http://www.sunshine-travel.sap",
		"Rating": "4",
		"Recommendation": "88"
	}
]

```

--------------------------------

**TITLE**: Masked Field

**INTRODUCTION**: The Field building block enables you to render masked fields to hide sensitive data.

**TAGS**: field, masked, password, sensitive, privacy, hidden

**STEP**: Implementation

**DESCRIPTION**: Add a Common.Masked annotation to a property holding sensitive data.

**LANGUAGE**: CDS

**CODE**:
```cds
using {TravelService.Booking} from '../../../../../service/service';
using from '../../../../../service/annotations';

extend entity TravelService.Booking with {
  CreditCardNumber : String @Common: {Masked: true};
};
```

**LANGUAGE**: ABAP

**CODE**:
```abap
extend view entity TravelService.Booking with {
  @EndUserText.label: 'Credit Card Number'
  @Semantics.masked
  CreditCardNumber : String(20);
}
```

**LANGUAGE**: XML

**CODE**:
```xml
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" Version="4.0">
	<edmx:Reference Uri="https://sap.github.io/odata-vocabularies/vocabularies/Common.xml">
		<edmx:Include Alias="Common" Namespace="com.sap.vocabularies.Common.v1" />
	</edmx:Reference>
	<edmx:DataServices>
		<Schema xmlns="http://docs.oasis-open.org/odata/ns/edm" Namespace="local">
			<Annotations Target="TravelService.Booking/CreditCardNumber">
				<Annotation Term="Common.Masked" Bool="true" />
			</Annotations>
		</Schema>
	</edmx:DataServices>
</edmx:Edmx>
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: Sample.fragment.xml

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<VBox class="sapUiTinyMarginTop" width="320px">
		<Label text="Credit Card Number:" />
		<macros:Field metaPath="CreditCardNumber" id="fieldMaskedCreditCardNumber" />
	</VBox>
</core:FragmentDefinition>

```

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: annotations.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});

```

**FILE**: Booking.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"BookingUUID": "7A757221A8E4645C17002DF03754AB66",
		"to_Travel_TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"BookingID": "0001",
		"BookingDate": "2023-08-02",
		"ConnectionID": "1537",
		"FlightDate": "2023-08-04",
		"FlightPrice": "438.00",
		"CurrencyCode_code": "USD",
		"BookingStatus_code": "N",
		"CreditCardNumber": "1234567890"
	}
]

```

--------------------------------

**TITLE**: Multi-Line Text

**INTRODUCTION**: The Field building block enables you to render expandable multi-line text fields.

**TAGS**: field, multiline, text, textarea, long text, description

**STEP**: Implementation

**DESCRIPTION**: Add a UI.MultiLineText annotation to the property. In display mode, this will result in an expandable text, in edit mode, there will be a text area.

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}
```

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.MultiLineText" Bool="true" />
```

**LANGUAGE**: ABAP

**CODE**:
```abap
@EndUserText.label: 'Travel Details'
@UI.multiLineText
TravelDetails : String(1024);
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: Sample.fragment.xml

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<VBox class="sapUiTinyMarginTop" width="320px">
		<Label text="Travel Details:" />
		<macros:Field metaPath="TravelDetails" id="fieldMultiLineTextTravelDetails" />
	</VBox>
</core:FragmentDefinition>

```

**FILE**: annotations.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});

```

**FILE**: Travel.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"TravelID": "00000001",
		"BeginDate": "2025-11-04",
		"EndDate": "2025-11-06",
		"BookingFee": "20.00",
		"TotalPrice": "900.00",
		"CurrencyCode_code": "USD",
		"Description": "Business Trip for Christine, Pierre",
		"TravelDetails": "This business trip includes a two-day customer workshop at the airport. The goal is the evaluation of the customer's use cases and the alignment on the roadmap for the upcoming year.",
		"TravelStatus_code": "A",
		"to_Agency_AgencyID": "070001"
	},
	{
		"TravelUUID": "53657221A8E4645C17002DF03754AB66",
		"TravelID": "00000002",
		"BeginDate": "2025-12-04",
		"EndDate": "2025-12-16",
		"BookingFee": "80.00",
		"TotalPrice": "3164.00",
		"CurrencyCode_code": "USD",
		"Description": "Lars Jensen site visit for system rollout support",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070002"
	},
	{
		"TravelUUID": "54657221A8E4645C17002DF03754AB66",
		"TravelID": "00000003",
		"BeginDate": "2025-08-04",
		"EndDate": "2025-08-08",
		"BookingFee": "40.00",
		"TotalPrice": "1871.00",
		"CurrencyCode_code": "USD",
		"Description": "John Smith customer workshop at Acme Corp headquarters",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070003"
	},
	{
		"TravelUUID": "55657221A8E4645C17002DF03754AB66",
		"TravelID": "00000004",
		"BeginDate": "2025-09-04",
		"EndDate": "2025-09-05",
		"BookingFee": "40.00",
		"TotalPrice": "1240.00",
		"CurrencyCode_code": "USD",
		"Description": "Anna Müller onboarding with new project team in Berlin",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "X",
		"to_Agency_AgencyID": "070003"
	}
]

```

--------------------------------

**TITLE**: Multi-Input Field

**INTRODUCTION**: The Field building block enables you to render multi-input fields, which allow users to input more than one value per field. A multi-input field visualizes 1:n relations by turning each related record into a token. It requires a ValueList annotation on the target property to resolve IDs into user-friendly texts and to open a selection dialog.

**TAGS**: field, input, multi value, tokens, selection, value help

**STEP**: Multi-Input Field as Input Field

**DESCRIPTION**: The property "Name" of the Booking entity is used as multi-input field to show multiple agencies per travel. The property has a ValueList annotation to provide value help and to resolve the agency IDs into user-friendly names.
				Selecting agencies from the value help adds tokens referencing the selected agency IDs. The metaPath points to the navigation property to_Booking and the property "Name" within the target entity.

**STEP**: Multi-Input Field as ReadOnly Field

**DESCRIPTION**: The multi-input field can be used with or without editing and the corresponding ValueHelp, depending on the attribute 'readOnly'.

**STEP**: Multi-Input Field Target via Annotation

**DESCRIPTION**: The MetaPath of the multi-input field points to a DataField within a FieldGroup annotation to demonstrate the reuse of annotation-defined DataField instead of direct property path.

**STEP**: Multi-Input Field filled by JSON Model

**DESCRIPTION**: Demonstrates filling the multi-input field with data from a JSON Model. The JSON Model is created and set to the view in the controller onInit method.

**STEP**: Multi-Input Field in a Table

**DESCRIPTION**: The multi-input field used within a table column to show multiple agencies per travel in a tabular way. Due to performance reasons we strongly recommend adding the multi-input field as an annotation, instead of as a custom column. Adding a building block field or multi-input field to the table as a custom column will generate a ValueHelp for each row. This is only allowed for use cases with a defined and limited number of rows.

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: localService.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {TravelService} from '../../../../../service/service';
using from '../../../../../service/annotations';

extend service TravelService with {
  entity AgencyName {
        @Common.Label: 'ID'
    key AgencyID : String;
        Name     : String;
  };
}

extend entity TravelService.Booking with {
  Name : String;
};

annotate TravelService.Booking with {
  Name @(Common: {
    Label    : 'Agencies',
    ValueList: {
      Label         : 'Travel Agency',
      CollectionPath: 'AgencyName',
      Parameters    : [
        {
          $Type            : 'Common.ValueListParameterDisplayOnly',
          ValueListProperty: 'AgencyID'
        },
        {
          $Type            : 'Common.ValueListParameterInOut',
          LocalDataProperty: Name,
          ValueListProperty: 'Name'
        }
      ]
    }
  });
};

annotate TravelService.Booking with @UI: {FieldGroup #Default: {Data: [{
  $Type: 'UI.DataField',
  Value: Name
}]}};

annotate TravelService.Travel with @UI.LineItem: [
  {Value: TravelID, },
  {
    $Type: 'UI.DataField',
    Label: 'Agencies (MVF)',
    Value: to_Booking.Name
  }
];

```

**FILE**: FieldMultiValueField.view.xml

**LANGUAGE**: XML

**CODE**:
```xml
<mvc:View
	height="100%"
	controllerName="sap.fe.core.fpmExplorer.fieldMultiValueField.FieldMultiValueField"
	xmlns="sap.m"
	xmlns:mvc="sap.ui.core.mvc"
	xmlns:fpmExplorer="sap.fe.core.fpmExplorer.controls"
	xmlns:core="sap.ui.core"
	xmlns:macros="sap.fe.macros"
	xmlns:table="sap.ui.table"
	xmlns:rowmodes="sap.ui.table.rowmodes"
>
	<fpmExplorer:Page
		title="Multi-Input Field"
		introduction="The Field building block enables you to render multi-input fields, which allow users to input more than one value per field. A multi-input field visualizes 1:n relations by turning each related record into a token. It requires a ValueList annotation on the target property to resolve IDs into user-friendly texts and to open a selection dialog."
		documentation="04ff5b1a81344a8e8169ea99630ff4e5"
		editMode="true"
		multiSamples="true"
	>
		<fpmExplorer:implementation>
			<fpmExplorer:ImplementationStep
				title="Multi-Input Field as Input Field"
				text="The property &quot;Name&quot; of the Booking entity is used as multi-input field to show multiple agencies per travel. The property has a ValueList annotation to provide value help and to resolve the agency IDs into user-friendly names.
				Selecting agencies from the value help adds tokens referencing the selected agency IDs. The metaPath points to the navigation property to_Booking and the property &quot;Name&quot; within the target entity."
			>
				<VBox>
					<Panel
						width="auto"
						class="sapUiResponsiveMargin"
						binding="{path:'/Travel(TravelUUID=\'52657221A8E4645C17002DF03754AB66\',IsActiveEntity=true)'}"
					>
						<headerToolbar>
							<Toolbar>
								<Title text="Example" level="H6" />
								<ToolbarSpacer />
								<Button
									text="{= ${ui>/isEditable} ? 'Switch to Display Mode' : 'Switch to Edit Mode' }"
									press=".onToggleEdit"
								/>
							</Toolbar>
						</headerToolbar>
						<macros:MultiValueField id="BasicMVF" metaPath="to_Booking/Name" readOnly="{= !${ui>/isEditable} }" />
					</Panel>

					<Panel headerText="Implementation" width="auto" class="sapUiResponsiveMargin">
						<fpmExplorer:CodeBlock>
							<fpmExplorer:CodeLink
								file="field/fieldMultiValueField/localService/service.cds"
								start="Name @"
								end="});"
								fileName="localService.cds"
							/>
							<fpmExplorer:CodeLink file="field/fieldMultiValueField/code/multiValueField.rap" codeType="rap" />
							<fpmExplorer:CodeLink
								file="field/fieldMultiValueField/FieldMultiValueField.view.xml"
								codeType="view"
								start="BasicMVF"
							/>
						</fpmExplorer:CodeBlock>
					</Panel>
				</VBox>
			</fpmExplorer:ImplementationStep>

			<fpmExplorer:ImplementationStep
				title="Multi-Input Field as ReadOnly Field"
				text="The multi-input field can be used with or without editing and the corresponding ValueHelp, depending on the attribute 'readOnly'."
			>
				<VBox>
					<Panel
						headerText="Example"
						width="auto"
						class="sapUiResponsiveMargin"
						binding="{path:'/Travel(TravelUUID=\'52657221A8E4645C17002DF03754AB66\',IsActiveEntity=true)'}"
					>
						<macros:MultiValueField id="ReadOnlyMVF" metaPath="to_Booking/Name" readOnly="true" />
					</Panel>
					<Panel headerText="Implementation" width="auto" class="sapUiResponsiveMargin">
						<fpmExplorer:CodeBlock>
							<fpmExplorer:CodeLink
								file="field/fieldMultiValueField/FieldMultiValueField.view.xml"
								codeType="view"
								start="ReadOnlyMVF"
							/>
						</fpmExplorer:CodeBlock>
					</Panel>
				</VBox>
			</fpmExplorer:ImplementationStep>

			<fpmExplorer:ImplementationStep
				title="Multi-Input Field Target via Annotation"
				text="The MetaPath of the multi-input field points to a DataField within a FieldGroup annotation to demonstrate the reuse of annotation-defined DataField instead of direct property path."
			>
				<VBox>
					<Panel
						width="auto"
						class="sapUiResponsiveMargin"
						binding="{path:'/Travel(TravelUUID=\'52657221A8E4645C17002DF03754AB66\',IsActiveEntity=true)'}"
					>
						<headerToolbar>
							<Toolbar>
								<Title text="Example" level="H6" />
								<ToolbarSpacer />
								<Button
									text="{= ${ui>/isEditable} ? 'Switch to Display Mode' : 'Switch to Edit Mode' }"
									press=".onToggleEdit"
								/>
							</Toolbar>
						</headerToolbar>
						<macros:MultiValueField
							id="DataFieldMVF"
							metaPath="to_Booking/@com.sap.vocabularies.UI.v1.FieldGroup#Default/Data/0"
							readOnly="{= !${ui>/isEditable} }"
						/>
					</Panel>
					<Panel headerText="Implementation" width="auto" class="sapUiResponsiveMargin">
						<fpmExplorer:CodeBlock>
							<fpmExplorer:CodeLink
								file="field/fieldMultiValueField/FieldMultiValueField.view.xml"
								codeType="view"
								start="DataFieldMVF"
							/>
						</fpmExplorer:CodeBlock>
					</Panel>
				</VBox>
			</fpmExplorer:ImplementationStep>

			<fpmExplorer:ImplementationStep
				title="Multi-Input Field filled by JSON Model"
				text="Demonstrates filling the multi-input field with data from a JSON Model. The JSON Model is created and set to the view in the controller onInit method."
			>
				<VBox>
					<Panel
						width="auto"
						class="sapUiResponsiveMargin"
						binding="{path:'/Travel(TravelUUID=\'52657221A8E4645C17002DF03754AB66\',IsActiveEntity=true)'}"
					>
						<headerToolbar>
							<Toolbar>
								<Title text="Example" level="H6" />
								<ToolbarSpacer />
								<Button
									text="{= ${ui>/isEditable} ? 'Switch to Display Mode' : 'Switch to Edit Mode' }"
									press=".onToggleEdit"
								/>
							</Toolbar>
						</headerToolbar>
						<macros:MultiValueField
							id="JsonModelMVF"
							metaPath="to_Booking/Name"
							items="{jsonModel>/Agencies}"
							readOnly="{= !${ui>/isEditable} }"
						/>
					</Panel>
					<Panel headerText="Implementation" width="auto" class="sapUiResponsiveMargin">
						<fpmExplorer:CodeBlock>
							<fpmExplorer:CodeLink
								file="field/fieldMultiValueField/FieldMultiValueField.view.xml"
								codeType="view"
								start="JsonModelMVF"
							/>
						</fpmExplorer:CodeBlock>
						<fpmExplorer:CodeBlock>
							<fpmExplorer:CodeLink
								file="field/fieldMultiValueField/FieldMultiValueField.controller.ts"
								start="var jsonModel"
								end="]);"
								codeType="ts"
							/>
						</fpmExplorer:CodeBlock>
					</Panel>
				</VBox>
			</fpmExplorer:ImplementationStep>

			<fpmExplorer:ImplementationStep
				title="Multi-Input Field in a Table"
				text="The multi-input field used within a table column to show multiple agencies per travel in a tabular way. Due to performance reasons we strongly recommend adding the multi-input field as an annotation, instead of as a custom column. Adding a building block field or multi-input field to the table as a custom column will generate a ValueHelp for each row. This is only allowed for use cases with a defined and limited number of rows."
			>
				<VBox>
					<Panel
						width="auto"
						class="sapUiResponsiveMargin"
						binding="{path:'/Travel(TravelUUID=\'52657221A8E4645C17002DF03754AB66\',IsActiveEntity=true)'}"
					>
						<headerToolbar>
							<Toolbar>
								<Title text="Example" level="H6" />
								<ToolbarSpacer />
								<Button
									text="{= ${ui>/isEditable} ? 'Switch to Display Mode' : 'Switch to Edit Mode' }"
									press=".onToggleEdit"
								/>
							</Toolbar>
						</headerToolbar>
						<table:Table rows="{/Travel}" class="sapUiMediumMarginTop" id="TravelTable">
							<table:columns>
								<table:Column width="4em">
									<Label text="ID" />
									<table:template>
										<Text text="{TravelID}" />
									</table:template>
								</table:Column>
								<table:Column>
									<Label text="Description" />
									<table:template>
										<Text text="{Description}" />
									</table:template>
								</table:Column>
								<table:Column>
									<Label text="Agencies" />
									<table:template>
										<macros:MultiValueField
											id="CustomColumnMVF"
											metaPath="to_Booking/Name"
											readOnly="{= !${ui>/isEditable} }"
										/>
									</table:template>
								</table:Column>
							</table:columns>
							<table:rowMode>
								<rowmodes:Auto maxRowCount="6" />
							</table:rowMode>
						</table:Table>
					</Panel>
					<Panel headerText="Implementation" width="auto" class="sapUiResponsiveMargin">
						<fpmExplorer:CodeBlock>
							<fpmExplorer:CodeLink
								file="field/fieldMultiValueField/FieldMultiValueField.view.xml"
								codeType="view"
								start="table:Column"
								end="23"
							/>
						</fpmExplorer:CodeBlock>
					</Panel>
				</VBox>
			</fpmExplorer:ImplementationStep>
		</fpmExplorer:implementation>
	</fpmExplorer:Page>
</mvc:View>

```

**FILE**: FieldMultiValueField.controller.ts

**LANGUAGE**: TypeScript

**CODE**:
```typescript
import PageController from "sap/fe/core/PageController";
import JSONModel from "sap/ui/model/json/JSONModel";

export default class FieldMultiValueFieldController extends PageController {
	public onInit(): void {
		super.onInit();
		const uiModel = this.getView().getModel("ui") as JSONModel;
		uiModel.setProperty("/isEditable", true);

		const jsonModel = new JSONModel();
		this.getView().setModel(jsonModel, "jsonModel");
		jsonModel.setProperty("/Agencies", [
			{
				AgencyID: "070011",
				Name: "Voyager Enterprises"
			},
			{
				AgencyID: "070012",
				Name: "Ben McCloskey Ltd."
			}
		]);
	}

	public onToggleEdit(): void {
		const uiModel = this.getView().getModel("ui") as JSONModel;
		const editable = !!uiModel.getProperty("/isEditable");
		uiModel.setProperty("/isEditable", !editable);
	}
}

```

--------------------------------

**TITLE**: Number with Currency or Unit of Measure

**INTRODUCTION**: The Field building block enables you to render fields for numbers with a currency or a unit of measure.

**TAGS**: field, number, unit, currency, amount, aligned, formatting

**STEP**: Field with Currency

**DESCRIPTION**: To connect a property with a currency property, define a Measures.ISOCurrency annotation.

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}
```

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="TravelService.Travel/FlightPrice">
	<Annotation Term="Measures.ISOCurrency" Path="CurrencyCode" />
	<Annotation Term="Common.Label" String="Flight Price" />
</Annotations>
```

**LANGUAGE**: ABAP

**CODE**:
```abap
@Semantics.amount.currencyCode: 'CurrencyCode'
@EndUserText.label: 'Flight Price'
FlightPrice : ABAP.DEC(10,2);

@Semantics.currencyCode: true
@EndUserText.label: 'Currency'
CurrencyCode : ABAP.CUKY;

// Unit of measure example
extend view TravelService.Booking with {
  @Semantics.quantity.unitOfMeasure: 'DistanceUnit'
  Distance : abap.int4;
  
  @Semantics.unitOfMeasure: true
  DistanceUnit : abap.unit(3);
}
```

**STEP**: Field with Unit of Measure

**DESCRIPTION**: To connect a property with a unit property, define a Measures.Unit annotation.

**LANGUAGE**: CDS

**CODE**:
```cds
using {TravelService.Booking} from '../../../../../service/service';
using from '../../../../../service/annotations';

extend entity Booking with {
  Distance     : Integer @Measures.Unit: DistanceUnit;
  DistanceUnit : String(2)
                         @Common       : {
    ValueListWithFixedValues: true,
    ValueList               : {
      CollectionPath: 'DistanceUnitVH',
      Parameters    : [
        {
          $Type            : 'Common.ValueListParameterInOut',
          LocalDataProperty: 'DistanceUnit',
          ValueListProperty: 'ID'
        },
        {
          $Type            : 'Common.ValueListParameterDisplayOnly',
          ValueListProperty: 'Description'
        }
      ]
    }
  };
};

extend service TravelService with {
  entity DistanceUnitVH {
    key ID          : String(2);
        Description : String(20);
  };
}
```

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="TravelService.Travel/Distance">
	<Annotation Term="Measures.Unit" Path="DistanceUnit" />
	<Annotation Term="Common.Label" String="Distance" />
</Annotations>
```

**LANGUAGE**: ABAP

**CODE**:
```abap
@Semantics.amount.currencyCode: 'CurrencyCode'
@EndUserText.label: 'Flight Price'
FlightPrice : ABAP.DEC(10,2);

@Semantics.currencyCode: true
@EndUserText.label: 'Currency'
CurrencyCode : ABAP.CUKY;

// Unit of measure example
extend view TravelService.Booking with {
  @Semantics.quantity.unitOfMeasure: 'DistanceUnit'
  Distance : abap.int4;
  
  @Semantics.unitOfMeasure: true
  DistanceUnit : abap.unit(3);
}
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: Sample.fragment.xml

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<VBox class="sapUiTinyMarginTop" width="320px">
		<Label text="Flight Price:" />
		<macros:Field metaPath="FlightPrice" id="FieldNumberWitCurrencyFlightPrice" />
		<Label text="Distance:" class="sapUiTinyMarginTop" />
		<macros:Field metaPath="Distance" id="FieldNumberWitUnitDistance" />
	</VBox>
</core:FragmentDefinition>

```

**FILE**: annotations.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});

```

**FILE**: Booking.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"BookingUUID": "7A757221A8E4645C17002DF03754AB66",
		"to_Travel_TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"BookingID": "0001",
		"BookingDate": "2023-08-02",
		"ConnectionID": "1537",
		"FlightDate": "2023-08-04",
		"FlightPrice": "438.00",
		"CurrencyCode_code": "USD",
		"BookingStatus_code": "N",
		"Distance": 1752,
		"DistanceUnit": "KM"
	}
]

```

--------------------------------

**TITLE**: Business Object Status

**INTRODUCTION**: The Field building block enables you to render fields that display the status of a business object.

**TAGS**: field, object status, status, state, indicator, color, semantic

**STEP**: Implementation

**DESCRIPTION**: Add a criticality property to the data field showing an object status.

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});
```

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.FieldGroup" Qualifier="ApprovalData">
	<Record Type="UI.FieldGroupType">
		<PropertyValue Property="Data">
			<Collection>
				<Record Type="UI.DataField">
					<PropertyValue Property="Value" Path="OverallStatus_code" />
					<PropertyValue Property="Criticality" Path="OverallStatus_criticality" />
					<PropertyValue Property="Label" String="Status" />
				</Record>
			</Collection>
		</PropertyValue>
	</Record>
</Annotation>
```

**LANGUAGE**: ABAP

**CODE**:
```abap
@UI.fieldGroup: [
  { qualifier: 'ApprovalData',
    groupLabel: 'Approval Data',
    position: 10 }
]
@UI.lineItem: [
  { position: 10,
    criticality: 'TravelStatus.criticality',
    label: 'Status' }
]
TravelStatus_code;
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: Sample.fragment.xml

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<VBox class="sapUiTinyMarginTop" width="320px">
		<Label text="Travel Status:" />
		<macros:Field metaPath="@com.sap.vocabularies.UI.v1.FieldGroup#ApprovalData/Data/0" id="fieldObjectStatusTravelStatus" />
	</VBox>
</core:FragmentDefinition>

```

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: Travel.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"TravelID": "00000001",
		"BeginDate": "2025-11-04",
		"EndDate": "2025-11-06",
		"BookingFee": "20.00",
		"TotalPrice": "900.00",
		"CurrencyCode_code": "USD",
		"Description": "Business Trip for Christine, Pierre",
		"TravelDetails": "This business trip includes a two-day customer workshop at the airport. The goal is the evaluation of the customer's use cases and the alignment on the roadmap for the upcoming year.",
		"TravelStatus_code": "A",
		"to_Agency_AgencyID": "070001"
	},
	{
		"TravelUUID": "53657221A8E4645C17002DF03754AB66",
		"TravelID": "00000002",
		"BeginDate": "2025-12-04",
		"EndDate": "2025-12-16",
		"BookingFee": "80.00",
		"TotalPrice": "3164.00",
		"CurrencyCode_code": "USD",
		"Description": "Lars Jensen site visit for system rollout support",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070002"
	},
	{
		"TravelUUID": "54657221A8E4645C17002DF03754AB66",
		"TravelID": "00000003",
		"BeginDate": "2025-08-04",
		"EndDate": "2025-08-08",
		"BookingFee": "40.00",
		"TotalPrice": "1871.00",
		"CurrencyCode_code": "USD",
		"Description": "John Smith customer workshop at Acme Corp headquarters",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070003"
	},
	{
		"TravelUUID": "55657221A8E4645C17002DF03754AB66",
		"TravelID": "00000004",
		"BeginDate": "2025-09-04",
		"EndDate": "2025-09-05",
		"BookingFee": "40.00",
		"TotalPrice": "1240.00",
		"CurrencyCode_code": "USD",
		"Description": "Anna Müller onboarding with new project team in Berlin",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "X",
		"to_Agency_AgencyID": "070003"
	}
]

```

--------------------------------

**TITLE**: Radio Button Group

**INTRODUCTION**: The Field building block enables you to render fields with a fixed value list as radio button groups.

**TAGS**: field, radio button, choice, selection, group, mutually exclusive

**STEP**: Step 1: Define a fixed value list

**DESCRIPTION**: Add Commmon.ValueList and Common.ValueListWithFixedValues annotations to the property for which you want to show a radio button group in edit mode. Inside Common.ValueList, also add a Parameters entry of type Common.ValueLIstParameterInOut connecting the local property with the ValueList property.

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}
```

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="TravelService.Travel/PaymentMethod">
	<Annotation Term="Common.ValueList">
		<Record Type="Common.ValueListType">
			<PropertyValue Property="CollectionPath" String="PaymentMethod" />
			<PropertyValue Property="Parameters">
				<Collection>
					<Record Type="Common.ValueListParameterInOut">
						<PropertyValue Property="LocalDataProperty" PropertyPath="PaymentMethod" />
						<PropertyValue Property="ValueListProperty" String="code" />
					</Record>
				</Collection>
			</PropertyValue>
		</Record>
	</Annotation>
	<Annotation Term="Common.ValueListWithFixedValues" Bool="true" />
</Annotations>
```

**LANGUAGE**: ABAP

**CODE**:
```abap
@EndUserText.label: 'Payment Method'
@Consumption.valueHelpDefinition: [{ 
  entity: { name: 'Payment', element: 'code' } 
}]
@ObjectModel.text.element: ['_Payment.Method']
@ObjectModel.textArrangement: #TEXT_ONLY
PaymentMethod : abap.char(1);

@ObjectModel.association.type: #TO_ONE_TO_MANY
_Payment;
```

**STEP**: Step 2: Add format options to the field

**DESCRIPTION**: For the field building block, add a formatOptions element with a fieldEditStyle attribute and the value RadioButtons.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<VBox class="sapUiTinyMarginTop" width="320px">
		<Label text="Payment Method:" />
		<macros:Field metaPath="PaymentMethod" id="FieldRadioButtonGroupPaymentMethod">
			<formatOptions fieldEditStyle="RadioButtons" />
		</macros:Field>
	</VBox>
</core:FragmentDefinition>
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: annotations.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});

```

**FILE**: Booking.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"BookingUUID": "1A757221A8E4645C17002DF03754AB66",
		"to_Travel_TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"BookingID": "0001",
		"BookingDate": "2025-10-20",
		"ConnectionID": "1001",
		"FlightDate": "2025-11-04",
		"FlightPrice": "405.00",
		"CurrencyCode_code": "USD",
		"BookingStatus_code": "N",
		"PaymentMethod": "B"
	},
	{
		"BookingUUID": "1B757221A8E4645C17002DF03754AB66",
		"to_Travel_TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"BookingID": "0002",
		"BookingDate": "2025-10-20",
		"ConnectionID": "1002",
		"FlightDate": "2025-11-06",
		"FlightPrice": "495.00",
		"CurrencyCode_code": "USD",
		"BookingStatus_code": "N",
		"PaymentMethod": "B"
	},
	{
		"BookingUUID": "2A757221A8E4645C17002DF03754AB66",
		"to_Travel_TravelUUID": "53657221A8E4645C17002DF03754AB66",
		"BookingID": "0001",
		"BookingDate": "2025-11-20",
		"ConnectionID": "2001",
		"FlightDate": "2025-12-04",
		"FlightPrice": "1492.08",
		"CurrencyCode_code": "USD",
		"BookingStatus_code": "N",
		"PaymentMethod": "B"
	},
	{
		"BookingUUID": "2B757221A8E4645C17002DF03754AB66",
		"to_Travel_TravelUUID": "53657221A8E4645C17002DF03754AB66",
		"BookingID": "0002",
		"BookingDate": "2025-11-20",
		"ConnectionID": "2002",
		"FlightDate": "2025-12-16",
		"FlightPrice": "1671.92",
		"CurrencyCode_code": "USD",
		"BookingStatus_code": "N",
		"PaymentMethod": "B"
	},
	{
		"BookingUUID": "3A757221A8E4645C17002DF03754AB66",
		"to_Travel_TravelUUID": "54657221A8E4645C17002DF03754AB66",
		"BookingID": "0001",
		"BookingDate": "2025-07-20",
		"ConnectionID": "3001",
		"FlightDate": "2025-08-04",
		"FlightPrice": "785.82",
		"CurrencyCode_code": "USD",
		"BookingStatus_code": "N",
		"PaymentMethod": "B"
	},
	{
		"BookingUUID": "3B757221A8E4645C17002DF03754AB66",
		"to_Travel_TravelUUID": "54657221A8E4645C17002DF03754AB66",
		"BookingID": "0002",
		"BookingDate": "2025-07-20",
		"ConnectionID": "3002",
		"FlightDate": "2025-08-08",
		"FlightPrice": "1085.18",
		"CurrencyCode_code": "USD",
		"BookingStatus_code": "N",
		"PaymentMethod": "B"
	},
	{
		"BookingUUID": "4A757221A8E4645C17002DF03754AB66",
		"to_Travel_TravelUUID": "55657221A8E4645C17002DF03754AB66",
		"BookingID": "0001",
		"BookingDate": "2025-08-20",
		"ConnectionID": "4001",
		"FlightDate": "2025-09-04",
		"FlightPrice": "632.40",
		"CurrencyCode_code": "USD",
		"BookingStatus_code": "N",
		"PaymentMethod": "B"
	},
	{
		"BookingUUID": "4B757221A8E4645C17002DF03754AB66",
		"to_Travel_TravelUUID": "55657221A8E4645C17002DF03754AB66",
		"BookingID": "0002",
		"BookingDate": "2025-08-20",
		"ConnectionID": "4002",
		"FlightDate": "2025-09-05",
		"FlightPrice": "607.60",
		"CurrencyCode_code": "USD",
		"BookingStatus_code": "N",
		"PaymentMethod": "B"
	}
]

```

**FILE**: Payment.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"code": "B",
		"Method": "Bank Transfer"
	},
	{
		"code": "C",
		"Method": "Credit Card"
	},
	{
		"code": "I",
		"Method": "Invoice"
	}
]

```

--------------------------------

**TITLE**: Rating Indicator

**INTRODUCTION**: The Field building block enables you to render rating indicators.

**TAGS**: field, rating, indicator, stars, feedback, evaluation, score

**STEP**: Implementation

**DESCRIPTION**: Add a DataPoint annotation with the visualization type #Rating. The Value points to the property representing the data to be visualized.

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});
```

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.DataPoint" Qualifier="Rating">
	<Record Type="UI.DataPointType">
		<PropertyValue Property="Value" Path="Rating" />
		<PropertyValue Property="Title" String="Rating" />
		<PropertyValue Property="TargetValue" Decimal="5" />
		<PropertyValue Property="Visualization" EnumMember="UI.VisualizationType/Rating" />
	</Record>
</Annotation>
```

**LANGUAGE**: ABAP

**CODE**:
```abap
@UI.dataPoint: {
  title: 'Rating',
  targetValue: 5.0,
  visualization: #RATING
}
Rating;
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: Sample.fragment.xml

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<VBox class="sapUiTinyMarginTop" width="320px">
		<Label text="Travel Agency Rating:" />
		<macros:Field metaPath="@com.sap.vocabularies.UI.v1.DataPoint#Rating" id="FieldRatingIndicatorRating" />
	</VBox>
</core:FragmentDefinition>

```

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: TravelAgency.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"AgencyID": "070001",
		"City": "Rochester",
		"CountryCode_code": "US",
		"EMailAddress": "info@sunshine-travel.sap",
		"Name": "Sunshine Travel",
		"PhoneNumber": "+1 901-632-5620",
		"PostalCode": "54323",
		"Street": "134 West Street",
		"WebAddress": "http://www.sunshine-travel.sap",
		"Rating": "4",
		"Recommendation": "88"
	},
	{
		"AgencyID": "070002",
		"City": "Duesseldorf",
		"CountryCode_code": "DE",
		"EMailAddress": "info@flyhigh.sap",
		"Name": "Fly High",
		"PhoneNumber": "+49 2102 69555",
		"PostalCode": "40880",
		"Street": "Berliner Allee 11",
		"WebAddress": "http://www.flyhigh.sap",
		"Rating": "5",
		"Recommendation": "98"
	},
	{
		"AgencyID": "070003",
		"City": "Berlin",
		"CountryCode_code": "DE",
		"EMailAddress": "info@haphop.sap",
		"Name": "Happy Hopping",
		"PhoneNumber": "+49 30-8853-0",
		"PostalCode": "13467",
		"Street": "Calvinstr. 36",
		"WebAddress": "http://www.haphop.sap",
		"Rating": "4",
		"Recommendation": "91"
	},
	{
		"AgencyID": "070004",
		"City": "Frankfurt",
		"CountryCode_code": "DE",
		"EMailAddress": "info@pinkpanther.sap",
		"Name": "Pink Panther",
		"PhoneNumber": "+49 69-467653-0",
		"PostalCode": "65936",
		"Street": "Auf der Schanz 54",
		"WebAddress": "http://www.pinkpanther.sap",
		"Rating": "5",
		"Recommendation": "97"
	},
	{
		"AgencyID": "070005",
		"City": "Nuernberg",
		"CountryCode_code": "DE",
		"EMailAddress": "info@yc.sap",
		"Name": "Your Choice",
		"PhoneNumber": "+49 9256-4548-0",
		"PostalCode": "90455",
		"Street": "Gustav-Jung-Str. 425",
		"WebAddress": "http://www.yc.sap",
		"Rating": "4",
		"Recommendation": "82"
	},
	{
		"AgencyID": "070006",
		"City": "Roma",
		"CountryCode_code": "IT",
		"EMailAddress": "info@tours.it/Adventure/",
		"Name": "Bella Italia",
		"PhoneNumber": "+39 6 893546721",
		"PostalCode": "00139",
		"Street": "Via Marconi 123",
		"WebAddress": "http://www.tours.it/Adventure/",
		"Rating": "5",
		"Recommendation": "95"
	},
	{
		"AgencyID": "070007",
		"City": "Sydney",
		"CountryCode_code": "AU",
		"EMailAddress": "info@hst.co.au",
		"Name": "Hot Socks Travel",
		"PhoneNumber": "+61 2 2004 5000",
		"PostalCode": "8053",
		"Street": "224 Balnagask Rd",
		"WebAddress": "http://www.hst.co.au",
		"Rating": "5",
		"Recommendation": "99"
	},
	{
		"AgencyID": "070008",
		"City": "Singapore",
		"CountryCode_code": "SG",
		"EMailAddress": "info@burns-burns-burns.sg",
		"Name": "Burns Nuclear",
		"PhoneNumber": "+65 777-5566",
		"PostalCode": "118228",
		"Street": "14 Science Park Drive",
		"WebAddress": "http://www.burns-burns-burns.sg",
		"Rating": "4",
		"Recommendation": "84"
	},
	{
		"AgencyID": "070009",
		"City": "Neumarkt",
		"CountryCode_code": "AT",
		"EMailAddress": "info@honauer.at",
		"Name": "Honauer Reisen GmbH",
		"PhoneNumber": "+43 7941 8903",
		"PostalCode": "4212",
		"Street": "Baumgarten 8",
		"WebAddress": "http://www.honauer.at",
		"Rating": "5",
		"Recommendation": "99"
	},
	{
		"AgencyID": "070010",
		"City": "Berlin",
		"CountryCode_code": "DE",
		"EMailAddress": "info@travel-from-walldorf",
		"Name": "Travel from Walldorf",
		"PhoneNumber": "+49 30-622860",
		"PostalCode": "10557",
		"Street": "Altonaer Str. 24",
		"WebAddress": "http://www.travel-from-walldorf",
		"Rating": "4",
		"Recommendation": "90"
	},
	{
		"AgencyID": "070011",
		"City": "Stockholm",
		"CountryCode_code": "SE",
		"EMailAddress": "info@starfleet.ufp",
		"Name": "Voyager Enterprises",
		"PhoneNumber": "+46 8/ 587 70000",
		"PostalCode": "70563",
		"Street": "Gustavslundsvaegen 151",
		"WebAddress": "http://www.starfleet.ufp",
		"Rating": "5",
		"Recommendation": "100"
	},
	{
		"AgencyID": "070012",
		"City": "Birmingham",
		"CountryCode_code": "GB",
		"EMailAddress": "info@ben-mcCloskey.co.uk",
		"Name": "Ben McCloskey Ltd.",
		"PhoneNumber": "+44 121 365-2251",
		"PostalCode": "B17 9TN",
		"Street": "74 Court Oak Rd",
		"WebAddress": "http://www.ben-mcCloskey.co.uk",
		"Rating": "5",
		"Recommendation": "97"
	},
	{
		"AgencyID": "070013",
		"City": "Zuerich",
		"CountryCode_code": "CH",
		"EMailAddress": "info@pi-pa-tri.sap",
		"Name": "Pillepalle Trips",
		"PhoneNumber": "+41 1 345-5321",
		"PostalCode": "8008",
		"Street": "Gorki Park 4",
		"WebAddress": "http://www.pi-pa-tri.sap",
		"Rating": "5",
		"Recommendation": "99"
	},
	{
		"AgencyID": "070014",
		"City": "London",
		"CountryCode_code": "GB",
		"EMailAddress": "info@hopp.sap",
		"Name": "Kangeroos",
		"PhoneNumber": "+44 171-2937638",
		"PostalCode": "20001",
		"Street": "Lancaster drive 435",
		"WebAddress": "http://www.hopp.sap",
		"Rating": "4",
		"Recommendation": "85"
	},
	{
		"AgencyID": "070015",
		"City": "Dresden",
		"CountryCode_code": "DE",
		"EMailAddress": "info@neu.schwanstein.sap",
		"Name": "Bavarian Castle",
		"PhoneNumber": "+49 98-32832732",
		"PostalCode": "01069",
		"Street": "Pilnizerstr. 241",
		"WebAddress": "http://www.neu.schwanstein.sap",
		"Rating": "4",
		"Recommendation": "91"
	},
	{
		"AgencyID": "070016",
		"City": "Boston",
		"CountryCode_code": "US",
		"EMailAddress": "info@ali.sap",
		"Name": "Ali's Bazar",
		"PhoneNumber": "+1 508-692-5200",
		"PostalCode": "19113",
		"Street": "45, Mac Arthur Boulevard",
		"WebAddress": "http://www.ali.sap",
		"Rating": "4",
		"Recommendation": "87"
	},
	{
		"AgencyID": "070017",
		"City": "Glasgow",
		"CountryCode_code": "GB",
		"EMailAddress": "info@super.sap",
		"Name": "Super Agency",
		"PhoneNumber": "+44 141 711-5643",
		"PostalCode": "G12 8AG",
		"Street": "50 Cranworth St",
		"WebAddress": "http://www.super.sap",
		"Rating": "5",
		"Recommendation": "96"
	},
	{
		"AgencyID": "070018",
		"City": "Moscow",
		"CountryCode_code": "RU",
		"EMailAddress": "info@wang.chong.sap",
		"Name": "Wang Chong",
		"PhoneNumber": "+7 3287-213321",
		"PostalCode": "150021",
		"Street": "Gagarine Park",
		"WebAddress": "http://www.wang.chong.sap",
		"Rating": "3",
		"Recommendation": "48"
	},
	{
		"AgencyID": "070019",
		"City": "Hannover",
		"CountryCode_code": "DE",
		"EMailAddress": "info@atw.sap",
		"Name": "Around the World",
		"PhoneNumber": "+49 511-347589-0",
		"PostalCode": "30625",
		"Street": "An der Breiten Wiese 122",
		"WebAddress": "http://www.atw.sap",
		"Rating": "4",
		"Recommendation": "88"
	},
	{
		"AgencyID": "070020",
		"City": "Koeln",
		"CountryCode_code": "DE",
		"EMailAddress": "info@bye-bye.sap",
		"Name": "No Return",
		"PhoneNumber": "+49 221-5689-100",
		"PostalCode": "51105",
		"Street": "Wahnheider Str. 57",
		"WebAddress": "http://www.bye-bye.sap",
		"Rating": "5",
		"Recommendation": "94"
	}
]

```

--------------------------------

**TITLE**: Time Picker

**INTRODUCTION**: The Field building block enables you to render time input fields with a time picker.

**TAGS**: field, time picker, clock, time selection

**STEP**: Implementation

**DESCRIPTION**: Define a property of type Time. The field formats the string value and in edit mode offers a Time Picker for changing the time.

**LANGUAGE**: CDS

**CODE**:
```cds
using {TravelService.Travel} from '../../../../../service/service';
using from '../../../../../service/annotations';

extend entity TravelService.Travel with {
  @Common.Label: 'Reminder'
  ReminderTime : Time;
};
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: Sample.fragment.xml

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<VBox class="sapUiTinyMarginTop" width="320px">
		<Title text="Time Picker examples" />
		<Label text="Reminder:" />
		<macros:Field metaPath="ReminderTime" id="FieldReminderTime" />
	</VBox>
</core:FragmentDefinition>

```

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: annotations.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});

```

**FILE**: Travel.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"TravelID": "00000001",
		"BeginDate": "2025-11-04",
		"EndDate": "2025-11-06",
		"BookingFee": "20.00",
		"TotalPrice": "900.00",
		"CurrencyCode_code": "USD",
		"Description": "Business Trip for Christine, Pierre",
		"TravelDetails": "This business trip includes a two-day customer workshop at the airport. The goal is the evaluation of the customer's use cases and the alignment on the roadmap for the upcoming year.",
		"TravelStatus_code": "A",
		"to_Agency_AgencyID": "070001"
	},
	{
		"TravelUUID": "53657221A8E4645C17002DF03754AB66",
		"TravelID": "00000002",
		"BeginDate": "2025-12-04",
		"EndDate": "2025-12-16",
		"BookingFee": "80.00",
		"TotalPrice": "3164.00",
		"CurrencyCode_code": "USD",
		"Description": "Lars Jensen site visit for system rollout support",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070002"
	},
	{
		"TravelUUID": "54657221A8E4645C17002DF03754AB66",
		"TravelID": "00000003",
		"BeginDate": "2025-08-04",
		"EndDate": "2025-08-08",
		"BookingFee": "40.00",
		"TotalPrice": "1871.00",
		"CurrencyCode_code": "USD",
		"Description": "John Smith customer workshop at Acme Corp headquarters",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070003"
	},
	{
		"TravelUUID": "55657221A8E4645C17002DF03754AB66",
		"TravelID": "00000004",
		"BeginDate": "2025-09-04",
		"EndDate": "2025-09-05",
		"BookingFee": "40.00",
		"TotalPrice": "1240.00",
		"CurrencyCode_code": "USD",
		"Description": "Anna Müller onboarding with new project team in Berlin",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "X",
		"to_Agency_AgencyID": "070003"
	}
]

```

--------------------------------

**TITLE**: Custom Filter

**INTRODUCTION**: The filter bar displays the most suitable selection control for each field, based on the data type. You can customize the filter bar by using a different selection control if it better suits your use case.

**TAGS**: filter bar extensions, custom filters, APIs

**STEP**: Define Custom Filter Fields

**DESCRIPTION**: Define custom filter bars as FilterField controls inside FilterBar. The Key property points to the property from the service.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros" xmlns:f="sap.f">
	<VBox core:require="{handler: 'sap/fe/core/fpmExplorer/filterBarCustom/CustomFilter'}">
		<macros:FilterBar
			metaPath="@com.sap.vocabularies.UI.v1.SelectionFields#SF1"
			id="FilterBar"
			showClearButton="true"
			key="FilterBar"
			afterClear="handler.afterClear"
		>
			<macros:filterFields>
				<macros:FilterField key="TotalPrice">
					<core:Fragment fragmentName="sap.fe.core.fpmExplorer.filterBarCustom.CustomRangeFilter" type="XML" />
				</macros:FilterField>
			</macros:filterFields>
		</macros:FilterBar>
		<macros:Table metaPath="@com.sap.vocabularies.UI.v1.LineItem#LI1" id="LineItemTable" filterBar="FilterBar" initialLoad="true" />
	</VBox>
</core:FragmentDefinition>
```

**STEP**: Define Custom Filter Bar via Manifest

**DESCRIPTION**: Alternatively, define a custom filter bar using the manifest configuration.

**LANGUAGE**: JSON

**CODE**:
```json
{
	"sap.ui5": {
		"routing": {
			"targets": {
				"sample": {
					"options": {
						"settings": {
							"controlConfiguration": {
								"@com.sap.vocabularies.UI.v1.SelectionFields": {
									"filterFields": {
										"TotalPrice": {
											"label": "{i18n>customFilter_label}",
											"property": "TotalPrice",
											"template": "sap.fe.core.fpmExplorer.filterBarCustom.code.CustomRangeFilter"
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: CustomRangeFilter.fragment.xml

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m">
	<HBox alignItems="Center" core:require="{handler: 'sap/fe/core/fpmExplorer/filterBarCustom/CustomFilter'}" width="100%">
		<RangeSlider
			id="RangeSlider"
			width="100%"
			min="0"
			max="3500"
			range="{path: 'filterValues>', type: 'sap.fe.macros.filter.type.Range'}"
			change="handler.onRangeChanged"
		>
			<layoutData>
				<FlexItemData growFactor="1" />
			</layoutData>
		</RangeSlider>
		<core:Icon src="sap-icon://reset" press="handler.onPriceRangeReset" class="sapUiSmallMarginBegin" />
	</HBox>
</core:FragmentDefinition>

```

**FILE**: CustomFilter.js

**LANGUAGE**: JavaScript

**CODE**:
```javascript
sap.ui.define(["sap/ui/model/FilterOperator"], function (FilterOperator) {
	"use strict";

	return {
		onRangeChanged: function (oEvent) {
			var oRange_0 = oEvent.getParameter("range")[0];
			var oRange_1 = oEvent.getParameter("range")[1];
			var filterBar = this.byId("FilterBar");
			filterBar.setFilterValues("TotalPrice", FilterOperator.BT, [oRange_0, oRange_1]);
		},

		onPriceRangeReset: function (oEvent) {
			this.byId("FilterBar").setFilterValues("TotalPrice");
			this.byId("RangeSlider").setRange([0, 3500]);
		},

		afterClear: function (oEvent) {
			this.byId("RangeSlider").setRange([0, 3500]);
		}
	};
});

```

**FILE**: localService.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {TravelService.Travel} from '../../../../../service/service';
using from '../../../../../service/annotations';

annotate TravelService.Travel with @(UI: {SelectionFields #SF1: [
  TravelID,
  TravelStatus_code,
]});


annotate TravelService.Travel with @UI.LineItem #LI1: [
  {Value: TravelID},
  {Value: TotalPrice},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  }
];

```

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: annotations.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});

```

--------------------------------

**TITLE**: Filter Bar

**INTRODUCTION**: The filter bar enables users to set criteria that limit the data loaded and displayed in a table.

**TAGS**: filter bar, overview, filtering, search, selection

**STEP**: Define Filter Fields

**DESCRIPTION**: Use the following annotation to define the filters shown in the filter bar. The Search and Editing Status are out-of-the-box filters that appear if the entities are searchable and draft is enabled, respectively.

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});
```

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="YourEntity">
	<Annotation Term="UI.SelectionFields">
		<Collection>
			<PropertyPath>TravelID</PropertyPath>
			<PropertyPath>to_Agency_AgencyID</PropertyPath>
			<PropertyPath>TravelStatus_code</PropertyPath>
			<PropertyPath>BeginDate</PropertyPath>
			<PropertyPath>EndDate</PropertyPath>
		</Collection>
	</Annotation>
</Annotations>
```

**LANGUAGE**: ABAP

**CODE**:
```abap
@UI.selectionField: [
  { position: 10 },
  { position: 20 },
  { position: 30 },
  { position: 40 },
  { position: 50 }
]
annotate view service.Travel with {
  TravelID;
  to_Agency.AgencyID;
  TravelStatus.code;
  BeginDate;
  EndDate;
}
```

**STEP**: Connect Filter Bar to Table

**DESCRIPTION**: Connect the Filter Bar to a Table using the 'filterBar' property of the Table building block. Provide the ID of the Filter Bar, which can be either a local or global ID.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros" xmlns:f="sap.f">
	<VBox>
		<macros:FilterBar metaPath="@com.sap.vocabularies.UI.v1.SelectionFields" id="FilterBar" />
		<macros:Table metaPath="@com.sap.vocabularies.UI.v1.LineItem" id="LineItemTable" filterBar="FilterBar" initialLoad="false" />
	</VBox>
</core:FragmentDefinition>
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: Travel.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"TravelID": "00000001",
		"BeginDate": "2025-11-04",
		"EndDate": "2025-11-06",
		"BookingFee": "20.00",
		"TotalPrice": "900.00",
		"CurrencyCode_code": "USD",
		"Description": "Business Trip for Christine, Pierre",
		"TravelDetails": "This business trip includes a two-day customer workshop at the airport. The goal is the evaluation of the customer's use cases and the alignment on the roadmap for the upcoming year.",
		"TravelStatus_code": "A",
		"to_Agency_AgencyID": "070001"
	},
	{
		"TravelUUID": "53657221A8E4645C17002DF03754AB66",
		"TravelID": "00000002",
		"BeginDate": "2025-12-04",
		"EndDate": "2025-12-16",
		"BookingFee": "80.00",
		"TotalPrice": "3164.00",
		"CurrencyCode_code": "USD",
		"Description": "Lars Jensen site visit for system rollout support",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070002"
	},
	{
		"TravelUUID": "54657221A8E4645C17002DF03754AB66",
		"TravelID": "00000003",
		"BeginDate": "2025-08-04",
		"EndDate": "2025-08-08",
		"BookingFee": "40.00",
		"TotalPrice": "1871.00",
		"CurrencyCode_code": "USD",
		"Description": "John Smith customer workshop at Acme Corp headquarters",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070003"
	},
	{
		"TravelUUID": "55657221A8E4645C17002DF03754AB66",
		"TravelID": "00000004",
		"BeginDate": "2025-09-04",
		"EndDate": "2025-09-05",
		"BookingFee": "40.00",
		"TotalPrice": "1240.00",
		"CurrencyCode_code": "USD",
		"Description": "Anna Müller onboarding with new project team in Berlin",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "X",
		"to_Agency_AgencyID": "070003"
	}
]

```

**FILE**: ValueHelpEntity.js

**LANGUAGE**: JavaScript

**CODE**:
```javascript
var aMockData = [];
for (var i = 0; i < 50; i++) {
	aMockData.push({
		KeyProp: "Value" + i,
		Description: "Description for Value" + i
	});
}
module.exports = aMockData;

```

--------------------------------

**TITLE**: Filter Bar Default Values

**INTRODUCTION**: The FilterBar building block enables you to set default values for the filter fields.

**TAGS**: filter bar, default values, presets, initial state

**STEP**: Annotation Options

**DESCRIPTION**: There are two ways to annotate default filter values. Use either 'UI.SelectionVariant' or 'Common.FilterDefaultValue'. If both are defined, 'Common.FilterDefaultValue' will be ignored.

**LANGUAGE**: CDS

**CODE**:
```cds
using {TravelService.Travel} from '../../../../../service/service';
using from '../../../../../service/annotations';

//As long as the SelectionVarinat is provided, Common.FilterDefaultValue is ignored for all other filters.
// The following will be used to set the default filter values ->

annotate TravelService.Travel with @(UI: {SelectionVariant: {
  $Type        : 'UI.SelectionVariantType',
  SelectOptions: [
    {
      PropertyName: 'BeginDate',
      Ranges      : [{
        Sign  : #I,
        Option: #GE,
        Low   : '2025-01-01'
      }]
    },
    {
      PropertyName: 'TravelStatus_code',
      Ranges      : [{
        Sign  : #I,
        Option: #EQ,
        Low   : 'O'
      }]
    }
  ]
}});

//The following will be ignored ->

annotate TravelService.Travel : BeginDate @Common.FilterDefaultValue: '2024-01-01';
annotate TravelService.Travel : TravelStatus @Common.FilterDefaultValue: 'A';
```

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="YourEntity">
	<Annotation Term="UI.SelectionVariant">
		<Record Type="UI.SelectionVariantType">
			<PropertyValue Property="SelectOptions">
				<Collection>
					<Record Type="UI.SelectOptionType">
						<PropertyValue Property="PropertyName" PropertyPath="BeginDate" />
						<PropertyValue Property="Ranges">
							<Collection>
								<Record Type="UI.SelectionRangeType">
									<PropertyValue Property="Sign" EnumMember="UI.SelectionRangeSignType/I" />
									<PropertyValue Property="Option" EnumMember="UI.SelectionRangeOptionType/GE" />
									<PropertyValue Property="Low" String="2025-01-01" />
								</Record>
							</Collection>
						</PropertyValue>
					</Record>
					<Record Type="UI.SelectOptionType">
						<PropertyValue Property="PropertyName" PropertyPath="TravelStatus_code" />
						<PropertyValue Property="Ranges">
							<Collection>
								<Record Type="UI.SelectionRangeType">
									<PropertyValue Property="Sign" EnumMember="UI.SelectionRangeSignType/I" />
									<PropertyValue Property="Option" EnumMember="UI.SelectionRangeOptionType/EQ" />
									<PropertyValue Property="Low" String="O" />
								</Record>
							</Collection>
						</PropertyValue>
					</Record>
				</Collection>
			</PropertyValue>
		</Record>
	</Annotation>
</Annotations>
```

**LANGUAGE**: ABAP

**CODE**:
```abap
// RAP Default Filter Values Implementation
// This shows two approaches: UI.SelectionVariant (takes precedence) and Common.FilterDefaultValue

define view entity C_Travel as select from Travel {
  TravelID,
  BeginDate,
  EndDate,
  TravelStatus,
  TravelStatus.code as TravelStatus_code
}

// Primary approach: UI.SelectionVariant - defines default filter values with ranges
// This annotation takes precedence over Common.FilterDefaultValue
annotate view C_Travel with @(
  UI.SelectionVariant: [
    {
      selectOptions: [
        {
          propertyName: 'BeginDate',
          ranges: [
            {
              sign: #I,        // Include
              option: #GE,     // Greater than or equal
              low: '2025-01-01'
            }
          ]
        },
        {
          propertyName: 'TravelStatus_code', 
          ranges: [
            {
              sign: #I,        // Include  
              option: #EQ,     // Equal
              low: 'O'         // Open status
            }
          ]
        }
      ]
    }
  ]
);

// Alternative approach: Common.FilterDefaultValue - simple default values
// Note: These are ignored when UI.SelectionVariant is present
annotate view C_Travel with {
  @Common.FilterDefaultValue: '2024-01-01'
  BeginDate;
  
  @Common.FilterDefaultValue: 'A'
  TravelStatus_code;
}
```

**STEP**: Setting Flexible Values via Controller

**DESCRIPTION**: Annotations cannot set flexible values (Semantic Operators) as default values. To achieve this, use a controller implementation.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
import PageController from "sap/fe/core/PageController";
import type FilterBarAPI from "sap/fe/macros/filterBar/FilterBarAPI";

export default class FilterBarDefaultValueController extends PageController {
	public onAfterRendering(): void {
		const filterBar = this.byId("FilterBar") as FilterBarAPI;
		// Handle the promise without using void operator
		filterBar.setFilterValues("EndDate", "NEXTMONTHS", 3).catch((error: Error) => {
			// Handle potential errors when setting filter values
			console.error("Failed to set filter values:", error);
		});
	}
}
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: Sample.fragment.xml

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros" xmlns:f="sap.f">
	<VBox>
		<macros:FilterBar metaPath="@com.sap.vocabularies.UI.v1.SelectionFields#SF1" id="FilterBar" />
		<macros:Table metaPath="@com.sap.vocabularies.UI.v1.LineItem" id="LineItemTable" filterBar="FilterBar" initialLoad="false" />
	</VBox>
</core:FragmentDefinition>

```

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: annotations.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});

```

--------------------------------

**TITLE**: Filter Bar with Parameterized Entity Set

**INTRODUCTION**: Parameterized entity sets use parameters to dynamically transform data at runtime, enabling consistent processing of values with different units of measure. For example, a 'Currency' parameter can automatically convert sales amounts stored in various currencies into a single target currency when data is fetched, allowing proper aggregation without altering the original back-end data. When linked to a parameterized entity set, the filter bar automatically adds fields for required parameters.

**TAGS**: filter bar, parameterized, parameters, table integration

**STEP**: Define Parameterized Entity

**DESCRIPTION**: For example, the 'CustomerType' in the following sample code represents the main entity set from which further data needs to be fetched. This has a 'Parameters' navigation entity set defined as well.

**LANGUAGE**: XML

**CODE**:
```xml
<?xml version="1.0" encoding="UTF-8" ?>
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" xmlns="http://docs.oasis-open.org/odata/ns/edm" Version="4.0">
	<edmx:Reference
		Uri="/sap/opu/odata/IWFND/CATALOGSERVICE;v=2/Vocabularies(TechnicalName='%2FIWBEP%2FVOC_COMMON',Version='0001',SAP__Origin='LOCAL')/$value"
	>
		<edmx:Include Namespace="com.sap.vocabularies.Common.v1" Alias="SAP__common" />
	</edmx:Reference>
	<edmx:Reference
		Uri="/sap/opu/odata/IWFND/CATALOGSERVICE;v=2/Vocabularies(TechnicalName='%2FIWBEP%2FVOC_CORE',Version='0001',SAP__Origin='LOCAL')/$value"
	>
		<edmx:Include Namespace="Org.OData.Core.V1" Alias="SAP__core" />
	</edmx:Reference>
	<edmx:Reference
		Uri="/sap/opu/odata/IWFND/CATALOGSERVICE;v=2/Vocabularies(TechnicalName='%2FIWBEP%2FVOC_MEASURES',Version='0001',SAP__Origin='LOCAL')/$value"
	>
		<edmx:Include Namespace="Org.OData.Measures.V1" Alias="SAP__measures" />
	</edmx:Reference>
	<edmx:Reference
		Uri="/sap/opu/odata/IWFND/CATALOGSERVICE;v=2/Vocabularies(TechnicalName='%2FIWBEP%2FVOC_UI',Version='0001',SAP__Origin='LOCAL')/$value"
	>
		<edmx:Include Namespace="com.sap.vocabularies.UI.v1" Alias="SAP__UI" />
	</edmx:Reference>
	<edmx:DataServices>
		<Schema Namespace="com.sap.gateway.srvd.zrc_arcustomer_definition.v0001" Alias="SAP__self">
			<EntityType Name="CustomerParameters">
				<Key>
					<PropertyRef Name="PreferredCurrency" />
				</Key>
				<Property Name="PreferredCurrency" Type="Edm.String" Nullable="false" MaxLength="5" />
				<NavigationProperty
					Name="Set"
					Type="Collection(com.sap.gateway.srvd.zrc_arcustomer_definition.v0001.CustomerType)"
					Partner="Parameters"
					ContainsTarget="true"
				/>
			</EntityType>
			<EntityType Name="CustomerType">
				<Key>
					<PropertyRef Name="CustomerID" />
				</Key>
				<Property Name="CustomerID" Type="Edm.String" Nullable="false" MaxLength="10" />
				<Property Name="CustomerName" Type="Edm.String" Nullable="false" MaxLength="80" />
				<Property Name="CityName" Type="Edm.String" Nullable="false" MaxLength="40" />
				<Property Name="TotalSpend" Type="Edm.Decimal" Precision="12" Scale="variable" />
				<Property Name="CurrencyCode" Type="Edm.String" Nullable="false" MaxLength="5" />
				<NavigationProperty
					Name="Parameters"
					Type="com.sap.gateway.srvd.zrc_arcustomer_definition.v0001.CustomerParameters"
					Nullable="false"
				/>
			</EntityType>
			<EntityType Name="CurrencyVHType">
				<Key>
					<PropertyRef Name="Currency" />
				</Key>
				<Property Name="Currency" Type="Edm.String" Nullable="false" MaxLength="5" />
				<Property Name="Currency_Text" Type="Edm.String" Nullable="false" MaxLength="40" />
			</EntityType>
			<EntityType Name="CityVHType">
				<Key>
					<PropertyRef Name="CityName" />
				</Key>
				<Property Name="CityName" Type="Edm.String" MaxLength="100" Nullable="false" />
			</EntityType>
			<EntityContainer Name="Container">
				<EntitySet Name="Customer" EntityType="com.sap.gateway.srvd.zrc_arcustomer_definition.v0001.CustomerParameters">
					<NavigationPropertyBinding Path="Set/Parameters" Target="Customer" />
				</EntitySet>
				<EntitySet Name="CurrencyVH" EntityType="com.sap.gateway.srvd.zrc_arcustomer_definition.v0001.CurrencyVHType" />
				<EntitySet Name="CityVH" EntityType="com.sap.gateway.srvd.zrc_arcustomer_definition.v0001.CityVHType" />
			</EntityContainer>
			<Annotations Target="SAP__self.CityType">
				<Annotation Term="SAP__common.Label" String="City" />
			</Annotations>
			<Annotations Target="SAP__self.CityType/CityName">
				<Annotation Term="SAP__common.Label" String="City" />
			</Annotations>
			<Annotations Target="SAP__self.CurrencyType">
				<Annotation Term="SAP__common.Label" String="Currency" />
			</Annotations>
			<Annotations Target="SAP__self.CurrencyType/Currency_Text">
				<Annotation Term="SAP__common.Label" String="Currency" />
			</Annotations>
			<Annotations Target="SAP__self.CurrencyType/USDConversionRate">
				<Annotation Term="SAP__common.Label" String="Conversion Rate (USD)" />
			</Annotations>
			<Annotations Target="SAP__self.CustomerParameters/PreferredCurrency">
				<Annotation Term="SAP__core.Computed" />
				<Annotation Term="SAP__common.ValueList">
					<Record>
						<PropertyValue Property="Label" String="Currency" />
						<PropertyValue Property="CollectionPath" String="CurrencyVH" />
						<PropertyValue Property="SearchSupported" Bool="true" />
						<PropertyValue Property="Parameters">
							<Collection>
								<Record Type="SAP__common.ValueListParameterInOut">
									<PropertyValue Property="LocalDataProperty" PropertyPath="PreferredCurrency" />
									<PropertyValue Property="ValueListProperty" String="Currency" />
								</Record>
								<Record Type="SAP__common.ValueListParameterDisplayOnly">
									<PropertyValue Property="ValueListProperty" String="Currency_Text" />
								</Record>
							</Collection>
						</PropertyValue>
					</Record>
				</Annotation>
				<Annotation Term="SAP__common.Label" String="Preferred Currency" />
			</Annotations>
			<Annotations Target="SAP__self.CustomerParameters">
				<Annotation Term="SAP__common.ResultContext" />
				<Annotation Term="SAP__UI.LineItem">
					<Collection>
						<Record Type="SAP__UI.DataField">
							<PropertyValue Property="Value" Path="PreferredCurrency" />
						</Record>
					</Collection>
				</Annotation>
			</Annotations>
			<Annotations Target="SAP__self.CustomerType/CustomerID">
				<Annotation Term="SAP__common.Text" Path="CustomerName">
					<Annotation Term="SAP__UI.TextArrangement" EnumMember="SAP__UI.TextArrangementType/TextFirst" />
				</Annotation>
			</Annotations>
			<Annotations Target="SAP__self.CustomerType/CityName">
				<Annotation Term="SAP__core.Computed" />
				<Annotation Term="SAP__common.ValueList">
					<Record>
						<PropertyValue Property="Label" String="City" />
						<PropertyValue Property="CollectionPath" String="CityVH" />
						<PropertyValue Property="Parameters">
							<Collection>
								<Record Type="SAP__common.ValueListParameterInOut">
									<PropertyValue Property="LocalDataProperty" PropertyPath="CityName" />
									<PropertyValue Property="ValueListProperty" String="CityName" />
								</Record>
							</Collection>
						</PropertyValue>
					</Record>
				</Annotation>
				<Annotation Term="SAP__common.Label" String="City" />
			</Annotations>
			<Annotations Target="SAP__self.CustomerType/TotalSpend">
				<Annotation Term="SAP__measures.ISOCurrency" Path="CurrencyCode" />
				<Annotation Term="SAP__common.Label" String="Total Spend" />
			</Annotations>
			<Annotations Target="SAP__self.CustomerType/CurrencyCode">
				<Annotation Term="SAP__common.IsCurrency" />
			</Annotations>
			<Annotations Target="SAP__self.CustomerType">
				<Annotation Term="SAP__common.Label" String="Customer List" />
				<Annotation Term="SAP__UI.HeaderInfo">
					<Record>
						<PropertyValue Property="TypeName" String="Customer" />
						<PropertyValue Property="TypeNamePlural" String="Customers" />
						<PropertyValue Property="Title">
							<Record Type="SAP__UI.DataField">
								<PropertyValue Property="Value" Path="CustomerID" />
							</Record>
						</PropertyValue>
					</Record>
				</Annotation>
				<Annotation Term="SAP__UI.LineItem">
					<Collection>
						<Record Type="SAP__UI.DataField">
							<PropertyValue Property="Label" String="Customer" />
							<PropertyValue Property="Value" Path="CustomerID" />
						</Record>
						<Record Type="SAP__UI.DataField">
							<PropertyValue Property="Value" Path="CityName" />
						</Record>
						<Record Type="SAP__UI.DataField">
							<PropertyValue Property="Value" Path="TotalSpend" />
						</Record>
					</Collection>
				</Annotation>
				<Annotation Term="SAP__UI.SelectionFields">
					<Collection>
						<PropertyPath>CityName</PropertyPath>
					</Collection>
				</Annotation>
			</Annotations>
		</Schema>
	</edmx:DataServices>
</edmx:Edmx>
```

**STEP**: Define Parameter Entity

**DESCRIPTION**: In the 'CustomerParameters' entity type, you can now find the parameters that need to be supplied with values to access the data from the main parameterized entity set. Note that the 'Partner' term points to 'Parameters' here, which was also the navigation entity set pointing to this 'CustomerParameter' in the main entity type.

**LANGUAGE**: XML

**CODE**:
```xml
<?xml version="1.0" encoding="UTF-8" ?>
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" xmlns="http://docs.oasis-open.org/odata/ns/edm" Version="4.0">
	<edmx:Reference
		Uri="/sap/opu/odata/IWFND/CATALOGSERVICE;v=2/Vocabularies(TechnicalName='%2FIWBEP%2FVOC_COMMON',Version='0001',SAP__Origin='LOCAL')/$value"
	>
		<edmx:Include Namespace="com.sap.vocabularies.Common.v1" Alias="SAP__common" />
	</edmx:Reference>
	<edmx:Reference
		Uri="/sap/opu/odata/IWFND/CATALOGSERVICE;v=2/Vocabularies(TechnicalName='%2FIWBEP%2FVOC_CORE',Version='0001',SAP__Origin='LOCAL')/$value"
	>
		<edmx:Include Namespace="Org.OData.Core.V1" Alias="SAP__core" />
	</edmx:Reference>
	<edmx:Reference
		Uri="/sap/opu/odata/IWFND/CATALOGSERVICE;v=2/Vocabularies(TechnicalName='%2FIWBEP%2FVOC_MEASURES',Version='0001',SAP__Origin='LOCAL')/$value"
	>
		<edmx:Include Namespace="Org.OData.Measures.V1" Alias="SAP__measures" />
	</edmx:Reference>
	<edmx:Reference
		Uri="/sap/opu/odata/IWFND/CATALOGSERVICE;v=2/Vocabularies(TechnicalName='%2FIWBEP%2FVOC_UI',Version='0001',SAP__Origin='LOCAL')/$value"
	>
		<edmx:Include Namespace="com.sap.vocabularies.UI.v1" Alias="SAP__UI" />
	</edmx:Reference>
	<edmx:DataServices>
		<Schema Namespace="com.sap.gateway.srvd.zrc_arcustomer_definition.v0001" Alias="SAP__self">
			<EntityType Name="CustomerParameters">
				<Key>
					<PropertyRef Name="PreferredCurrency" />
				</Key>
				<Property Name="PreferredCurrency" Type="Edm.String" Nullable="false" MaxLength="5" />
				<NavigationProperty
					Name="Set"
					Type="Collection(com.sap.gateway.srvd.zrc_arcustomer_definition.v0001.CustomerType)"
					Partner="Parameters"
					ContainsTarget="true"
				/>
			</EntityType>
			<EntityType Name="CustomerType">
				<Key>
					<PropertyRef Name="CustomerID" />
				</Key>
				<Property Name="CustomerID" Type="Edm.String" Nullable="false" MaxLength="10" />
				<Property Name="CustomerName" Type="Edm.String" Nullable="false" MaxLength="80" />
				<Property Name="CityName" Type="Edm.String" Nullable="false" MaxLength="40" />
				<Property Name="TotalSpend" Type="Edm.Decimal" Precision="12" Scale="variable" />
				<Property Name="CurrencyCode" Type="Edm.String" Nullable="false" MaxLength="5" />
				<NavigationProperty
					Name="Parameters"
					Type="com.sap.gateway.srvd.zrc_arcustomer_definition.v0001.CustomerParameters"
					Nullable="false"
				/>
			</EntityType>
			<EntityType Name="CurrencyVHType">
				<Key>
					<PropertyRef Name="Currency" />
				</Key>
				<Property Name="Currency" Type="Edm.String" Nullable="false" MaxLength="5" />
				<Property Name="Currency_Text" Type="Edm.String" Nullable="false" MaxLength="40" />
			</EntityType>
			<EntityType Name="CityVHType">
				<Key>
					<PropertyRef Name="CityName" />
				</Key>
				<Property Name="CityName" Type="Edm.String" MaxLength="100" Nullable="false" />
			</EntityType>
			<EntityContainer Name="Container">
				<EntitySet Name="Customer" EntityType="com.sap.gateway.srvd.zrc_arcustomer_definition.v0001.CustomerParameters">
					<NavigationPropertyBinding Path="Set/Parameters" Target="Customer" />
				</EntitySet>
				<EntitySet Name="CurrencyVH" EntityType="com.sap.gateway.srvd.zrc_arcustomer_definition.v0001.CurrencyVHType" />
				<EntitySet Name="CityVH" EntityType="com.sap.gateway.srvd.zrc_arcustomer_definition.v0001.CityVHType" />
			</EntityContainer>
			<Annotations Target="SAP__self.CityType">
				<Annotation Term="SAP__common.Label" String="City" />
			</Annotations>
			<Annotations Target="SAP__self.CityType/CityName">
				<Annotation Term="SAP__common.Label" String="City" />
			</Annotations>
			<Annotations Target="SAP__self.CurrencyType">
				<Annotation Term="SAP__common.Label" String="Currency" />
			</Annotations>
			<Annotations Target="SAP__self.CurrencyType/Currency_Text">
				<Annotation Term="SAP__common.Label" String="Currency" />
			</Annotations>
			<Annotations Target="SAP__self.CurrencyType/USDConversionRate">
				<Annotation Term="SAP__common.Label" String="Conversion Rate (USD)" />
			</Annotations>
			<Annotations Target="SAP__self.CustomerParameters/PreferredCurrency">
				<Annotation Term="SAP__core.Computed" />
				<Annotation Term="SAP__common.ValueList">
					<Record>
						<PropertyValue Property="Label" String="Currency" />
						<PropertyValue Property="CollectionPath" String="CurrencyVH" />
						<PropertyValue Property="SearchSupported" Bool="true" />
						<PropertyValue Property="Parameters">
							<Collection>
								<Record Type="SAP__common.ValueListParameterInOut">
									<PropertyValue Property="LocalDataProperty" PropertyPath="PreferredCurrency" />
									<PropertyValue Property="ValueListProperty" String="Currency" />
								</Record>
								<Record Type="SAP__common.ValueListParameterDisplayOnly">
									<PropertyValue Property="ValueListProperty" String="Currency_Text" />
								</Record>
							</Collection>
						</PropertyValue>
					</Record>
				</Annotation>
				<Annotation Term="SAP__common.Label" String="Preferred Currency" />
			</Annotations>
			<Annotations Target="SAP__self.CustomerParameters">
				<Annotation Term="SAP__common.ResultContext" />
				<Annotation Term="SAP__UI.LineItem">
					<Collection>
						<Record Type="SAP__UI.DataField">
							<PropertyValue Property="Value" Path="PreferredCurrency" />
						</Record>
					</Collection>
				</Annotation>
			</Annotations>
			<Annotations Target="SAP__self.CustomerType/CustomerID">
				<Annotation Term="SAP__common.Text" Path="CustomerName">
					<Annotation Term="SAP__UI.TextArrangement" EnumMember="SAP__UI.TextArrangementType/TextFirst" />
				</Annotation>
			</Annotations>
			<Annotations Target="SAP__self.CustomerType/CityName">
				<Annotation Term="SAP__core.Computed" />
				<Annotation Term="SAP__common.ValueList">
					<Record>
						<PropertyValue Property="Label" String="City" />
						<PropertyValue Property="CollectionPath" String="CityVH" />
						<PropertyValue Property="Parameters">
							<Collection>
								<Record Type="SAP__common.ValueListParameterInOut">
									<PropertyValue Property="LocalDataProperty" PropertyPath="CityName" />
									<PropertyValue Property="ValueListProperty" String="CityName" />
								</Record>
							</Collection>
						</PropertyValue>
					</Record>
				</Annotation>
				<Annotation Term="SAP__common.Label" String="City" />
			</Annotations>
			<Annotations Target="SAP__self.CustomerType/TotalSpend">
				<Annotation Term="SAP__measures.ISOCurrency" Path="CurrencyCode" />
				<Annotation Term="SAP__common.Label" String="Total Spend" />
			</Annotations>
			<Annotations Target="SAP__self.CustomerType/CurrencyCode">
				<Annotation Term="SAP__common.IsCurrency" />
			</Annotations>
			<Annotations Target="SAP__self.CustomerType">
				<Annotation Term="SAP__common.Label" String="Customer List" />
				<Annotation Term="SAP__UI.HeaderInfo">
					<Record>
						<PropertyValue Property="TypeName" String="Customer" />
						<PropertyValue Property="TypeNamePlural" String="Customers" />
						<PropertyValue Property="Title">
							<Record Type="SAP__UI.DataField">
								<PropertyValue Property="Value" Path="CustomerID" />
							</Record>
						</PropertyValue>
					</Record>
				</Annotation>
				<Annotation Term="SAP__UI.LineItem">
					<Collection>
						<Record Type="SAP__UI.DataField">
							<PropertyValue Property="Label" String="Customer" />
							<PropertyValue Property="Value" Path="CustomerID" />
						</Record>
						<Record Type="SAP__UI.DataField">
							<PropertyValue Property="Value" Path="CityName" />
						</Record>
						<Record Type="SAP__UI.DataField">
							<PropertyValue Property="Value" Path="TotalSpend" />
						</Record>
					</Collection>
				</Annotation>
				<Annotation Term="SAP__UI.SelectionFields">
					<Collection>
						<PropertyPath>CityName</PropertyPath>
					</Collection>
				</Annotation>
			</Annotations>
		</Schema>
	</edmx:DataServices>
</edmx:Edmx>
```

**STEP**: Annotate Parameter Entity with ResultContext

**DESCRIPTION**: Furthermore, the parameter entity type is annotated with the 'ResultContext' annotation, indicating that the parent entity set (in our example 'CustomerType') is a parameterized entity set.

**LANGUAGE**: XML

**CODE**:
```xml
<?xml version="1.0" encoding="UTF-8" ?>
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" xmlns="http://docs.oasis-open.org/odata/ns/edm" Version="4.0">
	<edmx:Reference
		Uri="/sap/opu/odata/IWFND/CATALOGSERVICE;v=2/Vocabularies(TechnicalName='%2FIWBEP%2FVOC_COMMON',Version='0001',SAP__Origin='LOCAL')/$value"
	>
		<edmx:Include Namespace="com.sap.vocabularies.Common.v1" Alias="SAP__common" />
	</edmx:Reference>
	<edmx:Reference
		Uri="/sap/opu/odata/IWFND/CATALOGSERVICE;v=2/Vocabularies(TechnicalName='%2FIWBEP%2FVOC_CORE',Version='0001',SAP__Origin='LOCAL')/$value"
	>
		<edmx:Include Namespace="Org.OData.Core.V1" Alias="SAP__core" />
	</edmx:Reference>
	<edmx:Reference
		Uri="/sap/opu/odata/IWFND/CATALOGSERVICE;v=2/Vocabularies(TechnicalName='%2FIWBEP%2FVOC_MEASURES',Version='0001',SAP__Origin='LOCAL')/$value"
	>
		<edmx:Include Namespace="Org.OData.Measures.V1" Alias="SAP__measures" />
	</edmx:Reference>
	<edmx:Reference
		Uri="/sap/opu/odata/IWFND/CATALOGSERVICE;v=2/Vocabularies(TechnicalName='%2FIWBEP%2FVOC_UI',Version='0001',SAP__Origin='LOCAL')/$value"
	>
		<edmx:Include Namespace="com.sap.vocabularies.UI.v1" Alias="SAP__UI" />
	</edmx:Reference>
	<edmx:DataServices>
		<Schema Namespace="com.sap.gateway.srvd.zrc_arcustomer_definition.v0001" Alias="SAP__self">
			<EntityType Name="CustomerParameters">
				<Key>
					<PropertyRef Name="PreferredCurrency" />
				</Key>
				<Property Name="PreferredCurrency" Type="Edm.String" Nullable="false" MaxLength="5" />
				<NavigationProperty
					Name="Set"
					Type="Collection(com.sap.gateway.srvd.zrc_arcustomer_definition.v0001.CustomerType)"
					Partner="Parameters"
					ContainsTarget="true"
				/>
			</EntityType>
			<EntityType Name="CustomerType">
				<Key>
					<PropertyRef Name="CustomerID" />
				</Key>
				<Property Name="CustomerID" Type="Edm.String" Nullable="false" MaxLength="10" />
				<Property Name="CustomerName" Type="Edm.String" Nullable="false" MaxLength="80" />
				<Property Name="CityName" Type="Edm.String" Nullable="false" MaxLength="40" />
				<Property Name="TotalSpend" Type="Edm.Decimal" Precision="12" Scale="variable" />
				<Property Name="CurrencyCode" Type="Edm.String" Nullable="false" MaxLength="5" />
				<NavigationProperty
					Name="Parameters"
					Type="com.sap.gateway.srvd.zrc_arcustomer_definition.v0001.CustomerParameters"
					Nullable="false"
				/>
			</EntityType>
			<EntityType Name="CurrencyVHType">
				<Key>
					<PropertyRef Name="Currency" />
				</Key>
				<Property Name="Currency" Type="Edm.String" Nullable="false" MaxLength="5" />
				<Property Name="Currency_Text" Type="Edm.String" Nullable="false" MaxLength="40" />
			</EntityType>
			<EntityType Name="CityVHType">
				<Key>
					<PropertyRef Name="CityName" />
				</Key>
				<Property Name="CityName" Type="Edm.String" MaxLength="100" Nullable="false" />
			</EntityType>
			<EntityContainer Name="Container">
				<EntitySet Name="Customer" EntityType="com.sap.gateway.srvd.zrc_arcustomer_definition.v0001.CustomerParameters">
					<NavigationPropertyBinding Path="Set/Parameters" Target="Customer" />
				</EntitySet>
				<EntitySet Name="CurrencyVH" EntityType="com.sap.gateway.srvd.zrc_arcustomer_definition.v0001.CurrencyVHType" />
				<EntitySet Name="CityVH" EntityType="com.sap.gateway.srvd.zrc_arcustomer_definition.v0001.CityVHType" />
			</EntityContainer>
			<Annotations Target="SAP__self.CityType">
				<Annotation Term="SAP__common.Label" String="City" />
			</Annotations>
			<Annotations Target="SAP__self.CityType/CityName">
				<Annotation Term="SAP__common.Label" String="City" />
			</Annotations>
			<Annotations Target="SAP__self.CurrencyType">
				<Annotation Term="SAP__common.Label" String="Currency" />
			</Annotations>
			<Annotations Target="SAP__self.CurrencyType/Currency_Text">
				<Annotation Term="SAP__common.Label" String="Currency" />
			</Annotations>
			<Annotations Target="SAP__self.CurrencyType/USDConversionRate">
				<Annotation Term="SAP__common.Label" String="Conversion Rate (USD)" />
			</Annotations>
			<Annotations Target="SAP__self.CustomerParameters/PreferredCurrency">
				<Annotation Term="SAP__core.Computed" />
				<Annotation Term="SAP__common.ValueList">
					<Record>
						<PropertyValue Property="Label" String="Currency" />
						<PropertyValue Property="CollectionPath" String="CurrencyVH" />
						<PropertyValue Property="SearchSupported" Bool="true" />
						<PropertyValue Property="Parameters">
							<Collection>
								<Record Type="SAP__common.ValueListParameterInOut">
									<PropertyValue Property="LocalDataProperty" PropertyPath="PreferredCurrency" />
									<PropertyValue Property="ValueListProperty" String="Currency" />
								</Record>
								<Record Type="SAP__common.ValueListParameterDisplayOnly">
									<PropertyValue Property="ValueListProperty" String="Currency_Text" />
								</Record>
							</Collection>
						</PropertyValue>
					</Record>
				</Annotation>
				<Annotation Term="SAP__common.Label" String="Preferred Currency" />
			</Annotations>
			<Annotations Target="SAP__self.CustomerParameters">
				<Annotation Term="SAP__common.ResultContext" />
				<Annotation Term="SAP__UI.LineItem">
					<Collection>
						<Record Type="SAP__UI.DataField">
							<PropertyValue Property="Value" Path="PreferredCurrency" />
						</Record>
					</Collection>
				</Annotation>
			</Annotations>
			<Annotations Target="SAP__self.CustomerType/CustomerID">
				<Annotation Term="SAP__common.Text" Path="CustomerName">
					<Annotation Term="SAP__UI.TextArrangement" EnumMember="SAP__UI.TextArrangementType/TextFirst" />
				</Annotation>
			</Annotations>
			<Annotations Target="SAP__self.CustomerType/CityName">
				<Annotation Term="SAP__core.Computed" />
				<Annotation Term="SAP__common.ValueList">
					<Record>
						<PropertyValue Property="Label" String="City" />
						<PropertyValue Property="CollectionPath" String="CityVH" />
						<PropertyValue Property="Parameters">
							<Collection>
								<Record Type="SAP__common.ValueListParameterInOut">
									<PropertyValue Property="LocalDataProperty" PropertyPath="CityName" />
									<PropertyValue Property="ValueListProperty" String="CityName" />
								</Record>
							</Collection>
						</PropertyValue>
					</Record>
				</Annotation>
				<Annotation Term="SAP__common.Label" String="City" />
			</Annotations>
			<Annotations Target="SAP__self.CustomerType/TotalSpend">
				<Annotation Term="SAP__measures.ISOCurrency" Path="CurrencyCode" />
				<Annotation Term="SAP__common.Label" String="Total Spend" />
			</Annotations>
			<Annotations Target="SAP__self.CustomerType/CurrencyCode">
				<Annotation Term="SAP__common.IsCurrency" />
			</Annotations>
			<Annotations Target="SAP__self.CustomerType">
				<Annotation Term="SAP__common.Label" String="Customer List" />
				<Annotation Term="SAP__UI.HeaderInfo">
					<Record>
						<PropertyValue Property="TypeName" String="Customer" />
						<PropertyValue Property="TypeNamePlural" String="Customers" />
						<PropertyValue Property="Title">
							<Record Type="SAP__UI.DataField">
								<PropertyValue Property="Value" Path="CustomerID" />
							</Record>
						</PropertyValue>
					</Record>
				</Annotation>
				<Annotation Term="SAP__UI.LineItem">
					<Collection>
						<Record Type="SAP__UI.DataField">
							<PropertyValue Property="Label" String="Customer" />
							<PropertyValue Property="Value" Path="CustomerID" />
						</Record>
						<Record Type="SAP__UI.DataField">
							<PropertyValue Property="Value" Path="CityName" />
						</Record>
						<Record Type="SAP__UI.DataField">
							<PropertyValue Property="Value" Path="TotalSpend" />
						</Record>
					</Collection>
				</Annotation>
				<Annotation Term="SAP__UI.SelectionFields">
					<Collection>
						<PropertyPath>CityName</PropertyPath>
					</Collection>
				</Annotation>
			</Annotations>
		</Schema>
	</edmx:DataServices>
</edmx:Edmx>
```

**STEP**: Define Entity Set

**DESCRIPTION**: Access the main entity set via the navigation entity set. The 'Customer' entity set corresponds to 'CustomerParameters'.

**LANGUAGE**: XML

**CODE**:
```xml
<?xml version="1.0" encoding="UTF-8" ?>
<edmx:Edmx xmlns:edmx="http://docs.oasis-open.org/odata/ns/edmx" xmlns="http://docs.oasis-open.org/odata/ns/edm" Version="4.0">
	<edmx:Reference
		Uri="/sap/opu/odata/IWFND/CATALOGSERVICE;v=2/Vocabularies(TechnicalName='%2FIWBEP%2FVOC_COMMON',Version='0001',SAP__Origin='LOCAL')/$value"
	>
		<edmx:Include Namespace="com.sap.vocabularies.Common.v1" Alias="SAP__common" />
	</edmx:Reference>
	<edmx:Reference
		Uri="/sap/opu/odata/IWFND/CATALOGSERVICE;v=2/Vocabularies(TechnicalName='%2FIWBEP%2FVOC_CORE',Version='0001',SAP__Origin='LOCAL')/$value"
	>
		<edmx:Include Namespace="Org.OData.Core.V1" Alias="SAP__core" />
	</edmx:Reference>
	<edmx:Reference
		Uri="/sap/opu/odata/IWFND/CATALOGSERVICE;v=2/Vocabularies(TechnicalName='%2FIWBEP%2FVOC_MEASURES',Version='0001',SAP__Origin='LOCAL')/$value"
	>
		<edmx:Include Namespace="Org.OData.Measures.V1" Alias="SAP__measures" />
	</edmx:Reference>
	<edmx:Reference
		Uri="/sap/opu/odata/IWFND/CATALOGSERVICE;v=2/Vocabularies(TechnicalName='%2FIWBEP%2FVOC_UI',Version='0001',SAP__Origin='LOCAL')/$value"
	>
		<edmx:Include Namespace="com.sap.vocabularies.UI.v1" Alias="SAP__UI" />
	</edmx:Reference>
	<edmx:DataServices>
		<Schema Namespace="com.sap.gateway.srvd.zrc_arcustomer_definition.v0001" Alias="SAP__self">
			<EntityType Name="CustomerParameters">
				<Key>
					<PropertyRef Name="PreferredCurrency" />
				</Key>
				<Property Name="PreferredCurrency" Type="Edm.String" Nullable="false" MaxLength="5" />
				<NavigationProperty
					Name="Set"
					Type="Collection(com.sap.gateway.srvd.zrc_arcustomer_definition.v0001.CustomerType)"
					Partner="Parameters"
					ContainsTarget="true"
				/>
			</EntityType>
			<EntityType Name="CustomerType">
				<Key>
					<PropertyRef Name="CustomerID" />
				</Key>
				<Property Name="CustomerID" Type="Edm.String" Nullable="false" MaxLength="10" />
				<Property Name="CustomerName" Type="Edm.String" Nullable="false" MaxLength="80" />
				<Property Name="CityName" Type="Edm.String" Nullable="false" MaxLength="40" />
				<Property Name="TotalSpend" Type="Edm.Decimal" Precision="12" Scale="variable" />
				<Property Name="CurrencyCode" Type="Edm.String" Nullable="false" MaxLength="5" />
				<NavigationProperty
					Name="Parameters"
					Type="com.sap.gateway.srvd.zrc_arcustomer_definition.v0001.CustomerParameters"
					Nullable="false"
				/>
			</EntityType>
			<EntityType Name="CurrencyVHType">
				<Key>
					<PropertyRef Name="Currency" />
				</Key>
				<Property Name="Currency" Type="Edm.String" Nullable="false" MaxLength="5" />
				<Property Name="Currency_Text" Type="Edm.String" Nullable="false" MaxLength="40" />
			</EntityType>
			<EntityType Name="CityVHType">
				<Key>
					<PropertyRef Name="CityName" />
				</Key>
				<Property Name="CityName" Type="Edm.String" MaxLength="100" Nullable="false" />
			</EntityType>
			<EntityContainer Name="Container">
				<EntitySet Name="Customer" EntityType="com.sap.gateway.srvd.zrc_arcustomer_definition.v0001.CustomerParameters">
					<NavigationPropertyBinding Path="Set/Parameters" Target="Customer" />
				</EntitySet>
				<EntitySet Name="CurrencyVH" EntityType="com.sap.gateway.srvd.zrc_arcustomer_definition.v0001.CurrencyVHType" />
				<EntitySet Name="CityVH" EntityType="com.sap.gateway.srvd.zrc_arcustomer_definition.v0001.CityVHType" />
			</EntityContainer>
			<Annotations Target="SAP__self.CityType">
				<Annotation Term="SAP__common.Label" String="City" />
			</Annotations>
			<Annotations Target="SAP__self.CityType/CityName">
				<Annotation Term="SAP__common.Label" String="City" />
			</Annotations>
			<Annotations Target="SAP__self.CurrencyType">
				<Annotation Term="SAP__common.Label" String="Currency" />
			</Annotations>
			<Annotations Target="SAP__self.CurrencyType/Currency_Text">
				<Annotation Term="SAP__common.Label" String="Currency" />
			</Annotations>
			<Annotations Target="SAP__self.CurrencyType/USDConversionRate">
				<Annotation Term="SAP__common.Label" String="Conversion Rate (USD)" />
			</Annotations>
			<Annotations Target="SAP__self.CustomerParameters/PreferredCurrency">
				<Annotation Term="SAP__core.Computed" />
				<Annotation Term="SAP__common.ValueList">
					<Record>
						<PropertyValue Property="Label" String="Currency" />
						<PropertyValue Property="CollectionPath" String="CurrencyVH" />
						<PropertyValue Property="SearchSupported" Bool="true" />
						<PropertyValue Property="Parameters">
							<Collection>
								<Record Type="SAP__common.ValueListParameterInOut">
									<PropertyValue Property="LocalDataProperty" PropertyPath="PreferredCurrency" />
									<PropertyValue Property="ValueListProperty" String="Currency" />
								</Record>
								<Record Type="SAP__common.ValueListParameterDisplayOnly">
									<PropertyValue Property="ValueListProperty" String="Currency_Text" />
								</Record>
							</Collection>
						</PropertyValue>
					</Record>
				</Annotation>
				<Annotation Term="SAP__common.Label" String="Preferred Currency" />
			</Annotations>
			<Annotations Target="SAP__self.CustomerParameters">
				<Annotation Term="SAP__common.ResultContext" />
				<Annotation Term="SAP__UI.LineItem">
					<Collection>
						<Record Type="SAP__UI.DataField">
							<PropertyValue Property="Value" Path="PreferredCurrency" />
						</Record>
					</Collection>
				</Annotation>
			</Annotations>
			<Annotations Target="SAP__self.CustomerType/CustomerID">
				<Annotation Term="SAP__common.Text" Path="CustomerName">
					<Annotation Term="SAP__UI.TextArrangement" EnumMember="SAP__UI.TextArrangementType/TextFirst" />
				</Annotation>
			</Annotations>
			<Annotations Target="SAP__self.CustomerType/CityName">
				<Annotation Term="SAP__core.Computed" />
				<Annotation Term="SAP__common.ValueList">
					<Record>
						<PropertyValue Property="Label" String="City" />
						<PropertyValue Property="CollectionPath" String="CityVH" />
						<PropertyValue Property="Parameters">
							<Collection>
								<Record Type="SAP__common.ValueListParameterInOut">
									<PropertyValue Property="LocalDataProperty" PropertyPath="CityName" />
									<PropertyValue Property="ValueListProperty" String="CityName" />
								</Record>
							</Collection>
						</PropertyValue>
					</Record>
				</Annotation>
				<Annotation Term="SAP__common.Label" String="City" />
			</Annotations>
			<Annotations Target="SAP__self.CustomerType/TotalSpend">
				<Annotation Term="SAP__measures.ISOCurrency" Path="CurrencyCode" />
				<Annotation Term="SAP__common.Label" String="Total Spend" />
			</Annotations>
			<Annotations Target="SAP__self.CustomerType/CurrencyCode">
				<Annotation Term="SAP__common.IsCurrency" />
			</Annotations>
			<Annotations Target="SAP__self.CustomerType">
				<Annotation Term="SAP__common.Label" String="Customer List" />
				<Annotation Term="SAP__UI.HeaderInfo">
					<Record>
						<PropertyValue Property="TypeName" String="Customer" />
						<PropertyValue Property="TypeNamePlural" String="Customers" />
						<PropertyValue Property="Title">
							<Record Type="SAP__UI.DataField">
								<PropertyValue Property="Value" Path="CustomerID" />
							</Record>
						</PropertyValue>
					</Record>
				</Annotation>
				<Annotation Term="SAP__UI.LineItem">
					<Collection>
						<Record Type="SAP__UI.DataField">
							<PropertyValue Property="Label" String="Customer" />
							<PropertyValue Property="Value" Path="CustomerID" />
						</Record>
						<Record Type="SAP__UI.DataField">
							<PropertyValue Property="Value" Path="CityName" />
						</Record>
						<Record Type="SAP__UI.DataField">
							<PropertyValue Property="Value" Path="TotalSpend" />
						</Record>
					</Collection>
				</Annotation>
				<Annotation Term="SAP__UI.SelectionFields">
					<Collection>
						<PropertyPath>CityName</PropertyPath>
					</Collection>
				</Annotation>
			</Annotations>
		</Schema>
	</edmx:DataServices>
</edmx:Edmx>
```

**STEP**: Use Parameterized Entity Set

**DESCRIPTION**: Reference the parameterized entity set in your manifest.json using the 'contextPath' property. This enables the filter bar to detect and use the parameters defined in the entity set, automatically adding fields for required parameters such as 'Preferred Currency'. The table will then display data according to the parameter values specified in the filter bar.

**LANGUAGE**: JSON

**CODE**:
```json
{
	"_version": "1.12.0",
	"sap.app": {
		"id": "sap.fe.core.fpmExplorer.filterBarParameterizedWithTable",
		"type": "application",
		"i18n": {
			"bundleUrl": "i18n/i18n.properties",
			"supportedLocales": [""],
			"fallbackLocale": ""
		},
		"applicationVersion": {
			"version": "1.0.0"
		},
		"dataSources": {
			"mainService": {
				"uri": "/sap/fe/core/mock/filterBarParameterizedWithTable/",
				"type": "OData",
				"settings": {
					"annotations": [],
					"odataVersion": "4.0"
				}
			}
		}
	},
	"sap.ui5": {
		"dependencies": {
			"minUI5Version": "1.111.1",
			"libs": {
				"sap.ui.core": {},
				"sap.fe.templates": {}
			}
		},
		"contentDensities": {
			"compact": true,
			"cozy": true
		},
		"models": {
			"i18n": {
				"type": "sap.ui.model.resource.ResourceModel",
				"settings": {
					"bundleUrl": "i18n/i18n.properties"
				}
			},
			"@i18n": {
				"type": "sap.ui.model.resource.ResourceModel",
				"settings": {
					"bundleUrl": "i18n/i18n.properties"
				}
			},
			"": {
				"dataSource": "mainService",
				"settings": {
					"operationMode": "Server",
					"autoExpandSelect": true,
					"earlyRequests": true
				}
			}
		},
		"routing": {
			"routes": [
				{
					"pattern": ":?query:",
					"name": "default",
					"target": "sample"
				}
			],
			"targets": {
				"sample": {
					"type": "Component",
					"id": "Default",
					"name": "sap.fe.core.fpm",
					"viewLevel": 1,
					"options": {
						"settings": {
							"viewName": "sap/fe/core/fpmExplorer/filterBarParameterizedWithTable/FilterBarParameterizedWithTable",
							"contextPath": "/Customer/Set"
						}
					}
				}
			}
		}
	}
}
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: Sample.fragment.xml

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<VBox>
		<macros:FilterBar metaPath="@com.sap.vocabularies.UI.v1.SelectionFields" id="ParameterizedFilterBar" />
		<macros:Table
			id="ParameterizedLineItemTable"
			filterBar="ParameterizedFilterBar"
			metaPath="@com.sap.vocabularies.UI.v1.LineItem"
			readOnly="true"
			enableAutoColumnWidth="true"
			widthIncludingColumnHeader="true"
		/>
	</VBox>
</core:FragmentDefinition>

```

--------------------------------

**TITLE**: FilterBar APIs

**INTRODUCTION**: The FilterBar building block enables you to extend the filter bar using APIs. This includes managing selection variants and controlling the filter field visibility and state.

**TAGS**: filter bar APIs, public APIs, programmatic access

**STEP**: Selection Variant Management

**DESCRIPTION**: You can get and set the selection variant of a filter bar using the APIs provided by the FilterBar building block.

**STEP**: Filter Field Visibility

**DESCRIPTION**: You can show and hide filter fields using the APIs provided by the FilterBar building block.

**STEP**: Filter Field State

**DESCRIPTION**: You can enable and disable filter fields using the APIs provided by the FilterBar building block.

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: Sample.fragment.xml

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros" xmlns:ce="sap.ui.codeeditor">
	<VBox>
		<macros:FilterBar
			metaPath="/RootEntity/@com.sap.vocabularies.UI.v1.SelectionFields"
			id="SampleFilterBar"
			search=".handlers.onFiltersChanged"
			filterChanged=".handlers.onFiltersChanged"
		/>
		<Panel expandable="false" expanded="false" headerText="Interacting with FilterBar API" class="sapUiMediumMarginTop">
			<Panel expandable="true" expanded="false" headerText="Selection Variant">
				<FlexBox direction="Column" fitContainer="true" justifyContent="Start">
					<HBox alignItems="Center" class="sapUi-Std-PaddingS">
						<Button width="100%" text="getSelectionVariant" press=".filterBarSVToCodeEditor" />
						<Text
							text="Click this button to get the filter bar's current selection variant to the code editor below."
							width="100%"
							class="sapUiSmallMargin"
						/>
					</HBox>
					<HBox alignItems="Center" class="sapUi-Std-PaddingS">
						<Button
							width="100%"
							text="setSelectionVariant"
							press=".codeEditorSVToFilterBar"
							tooltip="{interactionModel>/setSVButton/tooltip}"
							type="{interactionModel>/setSVButton/type}"
						/>
						<Text
							text="Click this button to set the selection variant from the code editor below to the filter bar."
							width="100%"
							class="sapUiSmallMargin"
						/>
					</HBox>

					<ce:CodeEditor
						id="sampleFiltersDisplay"
						type="json"
						lineNumbers="true"
						value="{interactionModel>/svObject}"
						editable="true"
						liveChange=".validateSV"
						height="10rem"
					>
						<ce:layoutData>
							<FlexItemData growFactor="1" shrinkFactor="1" />
						</ce:layoutData>
					</ce:CodeEditor>
				</FlexBox>
			</Panel>

			<Panel expandable="true" expanded="false" headerText="Filter Field Visibility">
				<HBox alignItems="Center" class="sapUi-Std-PaddingS">
					<Button
						width="100%"
						text="Show filter field"
						press=".showFilterField"
						enabled="{interactionModel>/showFilterFieldButton/enabled}"
					/>
					<Text text="Click this button to show the 'Date Property' filter field." width="100%" class="sapUiSmallMargin" />
				</HBox>
				<HBox alignItems="Center" class="sapUi-Std-PaddingS">
					<Button
						width="100%"
						text="Hide filter field"
						press=".hideFilterField"
						enabled="{interactionModel>/hideFilterFieldButton/enabled}"
					/>
					<Text text="Click this button to hide the 'Date Property' filter field." width="100%" class="sapUiSmallMargin" />
				</HBox>
			</Panel>

			<Panel expandable="true" expanded="false" headerText="Filter Field State">
				<HBox alignItems="Center" class="sapUi-Std-PaddingS">
					<Button
						width="100%"
						text="Disable filter field"
						press=".disableFilterField"
						enabled="{interactionModel>/disableFilterFieldButton/enabled}"
					/>
					<Text text="Click this button to disable the 'String Property' filter field." width="100%" class="sapUiSmallMargin" />
				</HBox>
				<HBox alignItems="Center" class="sapUi-Std-PaddingS">
					<Button
						width="100%"
						text="Enable filter field"
						press=".enableFilterField"
						enabled="{interactionModel>/enableFilterFieldButton/enabled}"
					/>
					<Text text="Click this button to enable the 'String Property' filter field." width="100%" class="sapUiSmallMargin" />
				</HBox>
			</Panel>
		</Panel>
	</VBox>
</core:FragmentDefinition>

```

**FILE**: Sample.controller.ts

**LANGUAGE**: TypeScript

**CODE**:
```typescript
import Log from "sap/base/Log";
import PageController from "sap/fe/core/PageController";
import type FilterBarAPI from "sap/fe/macros/filterBar/FilterBarAPI";
import SelectionVariant from "sap/fe/navigation/SelectionVariant";
import type Button from "sap/m/Button";
import MessageToast from "sap/m/MessageToast";
import type UI5Event from "sap/ui/base/Event";
import JSONModel from "sap/ui/model/json/JSONModel";

export default class SampleController extends PageController {
	public onAfterRendering(): void {
		const view = this.getView();
		const interactionModel = new JSONModel({
			svObject: "",
			filterBarExpanded: true,
			setSVButton: {
				type: "Success",
				tooltip: ""
			},
			showFilterFieldButton: {
				enabled: false
			},
			hideFilterFieldButton: {
				enabled: true
			},
			disableFilterFieldButton: {
				enabled: false
			},
			enableFilterFieldButton: {
				enabled: true
			}
		});
		view.setModel(interactionModel, "interactionModel");
		this.filterBarSVToCodeEditor();
		this.updateFilterFieldVisibilityButtons();
	}

	public filterBarSVToCodeEditor(): void {
		const filterBar = this.getView().byId("SampleFilterBar") as FilterBarAPI;
		const interactionModel = filterBar.getModel("interactionModel") as JSONModel;

		/** getSelectionVariant API: gives the present selection variant from the filter bar */
		/*****************************************************************************************/
		filterBar.getSelectionVariant().then((selectionVariant: SelectionVariant) => {
			interactionModel.setProperty("/svObject", JSON.stringify(selectionVariant.toJSONObject(), null, "  "));
		});
		/*****************************************************************************************/
	}

	public codeEditorSVToFilterBar(): void {
		const filterBar = this.getView().byId("SampleFilterBar") as FilterBarAPI;
		const interactionModel = filterBar.getModel("interactionModel") as JSONModel;
		const svString = interactionModel.getProperty("/svObject");
		try {
			const selectionVariantToSet = new SelectionVariant(svString);
			interactionModel.setProperty("/filterBarExpanded", true);

			/** setSelectionVariant API: to apply the selection variant to filter bar */
			/**************************************************************************/
			filterBar
				.setSelectionVariant(selectionVariantToSet)
				.then(() => {
					MessageToast.show("Selection variant from code editor is set to filter bar.");
				})
				.catch((err: Error | string) => {
					const message = err instanceof Error ? err.message : String(err);
					Log.error(`set SV error: ${message}`);
				});
			/**************************************************************************/
		} catch (err) {
			const message = err instanceof Error ? err.message : String(err);
			Log.error(`SV creation error: ${message}`);
		}
	}

	public validateSV(event: UI5Event<{ value: string }, Button>): void {
		// To validate the selection variant in code editor and change the status and type of "setSelectionVariant" button.
		const interactionModel = event.getSource().getModel("interactionModel") as JSONModel;
		const svString = event.getParameter("value");
		try {
			const selectionVariantToSet = new SelectionVariant(svString);
			interactionModel.setProperty("/setSVButton/type", selectionVariantToSet ? "Success" : "Critical");
		} catch (err) {
			interactionModel.setProperty("/setSVButton/type", "Critical");
			interactionModel.setProperty("/setSVButton/tooltip", "Selection Variant validation failed in code editor");
		}
	}

	public async showFilterField(): Promise<void> {
		const filterBar = this.getView().byId("SampleFilterBar") as FilterBarAPI;
		await filterBar.setFilterFieldVisible("DateProperty", true);
		await this.updateFilterFieldVisibilityButtons();
	}

	public async hideFilterField(): Promise<void> {
		const filterBar = this.getView().byId("SampleFilterBar") as FilterBarAPI;
		await filterBar.setFilterFieldVisible("DateProperty", false);
		await this.updateFilterFieldVisibilityButtons();
	}

	public async disableFilterField(): Promise<void> {
		const filterBar = this.getView().byId("SampleFilterBar") as FilterBarAPI;
		filterBar.setFilterFieldEnabled("StringProperty", false);
		await this.updateFilterFieldVisibilityButtons();
	}

	public async enableFilterField(): Promise<void> {
		const filterBar = this.getView().byId("SampleFilterBar") as FilterBarAPI;
		filterBar.setFilterFieldEnabled("StringProperty", true);
		await this.updateFilterFieldVisibilityButtons();
	}

	public async updateFilterFieldVisibilityButtons(event?: UI5Event): Promise<void> {
		const filterBar = this.getView().byId("SampleFilterBar") as FilterBarAPI;
		const isVisible = await filterBar.getFilterFieldVisible("DateProperty");
		const isEnabled = filterBar.getFilterFieldEnabled("StringProperty");

		const interactionModel = this.getView().getModel("interactionModel") as JSONModel;
		interactionModel.setProperty("/showFilterFieldButton/enabled", !isVisible);
		interactionModel.setProperty("/hideFilterFieldButton/enabled", isVisible);
		interactionModel.setProperty("/disableFilterFieldButton/enabled", isEnabled);
		interactionModel.setProperty("/enableFilterFieldButton/enabled", !isEnabled);
	}
}

```

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
service Service {
  @odata.draft.enabled
  entity RootEntity {
    key ID                      : Integer       @Common.Label: 'ID';
        StringProperty          : String        @Common.Label: 'String Property';
        IntegerProperty         : Integer       @Common.Label: 'Integer Property';
        NumberProperty          : Decimal(4, 2) @Common.Label: 'Number Property';
        BooleanProperty         : Boolean       @Common.Label: 'Boolean Property';
        SingleValueDateProperty : Date          @Common.Label: 'Single Value Date Property';
        DateProperty            : Date          @Common.Label: 'Date Property';
        TimeProperty            : Time          @Common.Label: 'Time Property';
  }

  annotate RootEntity with @(
    UI          : {
      SelectionFields : [
        StringProperty,
        IntegerProperty,
        DateProperty,
        SingleValueDateProperty
      ],

      SelectionVariant: {
        Text         : 'String Property',
        SelectOptions: [
          {
            PropertyName: StringProperty,
            Ranges      : [{
              Sign  : #I,
              Option: #EQ,
              Low   : 'abc'
            }]
          },
          {
            PropertyName: IntegerProperty,
            Ranges      : [{
              Sign  : #I,
              Option: #EQ,
              Low   : 1
            }]
          },
          {
            PropertyName: DateProperty,
            Ranges      : [{
              Sign  : #I,
              Option: #EQ,
              Low   : '2022-02-01'
            }]
          },
          {
            PropertyName: SingleValueDateProperty,
            Ranges      : [{
              Sign  : #I,
              Option: #EQ,
              Low   : '2021-05-12'
            }]
          }
        ]
      }
    },
    Capabilities: {
      SearchRestrictions: {Searchable: true},
      FilterRestrictions: {FilterExpressionRestrictions: [
        {
          Property          : 'DateProperty',
          AllowedExpressions: 'SingleRange'
        },
        {
          Property          : 'SingleValueDateProperty',
          AllowedExpressions: 'SingleValue'
        }
      ]}
    }
  );

}

```

**FILE**: RootEntity.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"ID": 1,
		"StringProperty": "Hello",
		"NumberProperty": 78.777,
		"IntegerProperty": 89,
		"DateProperty": "2022-03-03",
		"TimeProperty": "21:45:00",
		"BooleanProperty": false
	},
	{
		"ID": 2,
		"StringProperty": "Good morning",
		"NumberProperty": 75.41,
		"IntegerProperty": 39,
		"DateProperty": "2021-03-03",
		"TimeProperty": "09:45:00",
		"BooleanProperty": false
	},
	{
		"ID": 3,
		"StringProperty": "Bye",
		"NumberProperty": 8.12,
		"IntegerProperty": 9,
		"DateProperty": "2020-12-03",
		"TimeProperty": "21:37:00",
		"BooleanProperty": false
	},
	{
		"ID": 4,
		"StringProperty": "Sup",
		"NumberProperty": 17.7,
		"IntegerProperty": 11,
		"DateProperty": "2019-03-01",
		"TimeProperty": "04:41:12",
		"BooleanProperty": true
	},
	{
		"ID": 5,
		"StringProperty": "Sup",
		"NumberProperty": 13.145,
		"IntegerProperty": 15,
		"DateProperty": "2019-03-01",
		"TimeProperty": "04:41:12",
		"BooleanProperty": true
	}
]

```

--------------------------------

**TITLE**: Filter Bar with Variant Management and Chart

**INTRODUCTION**: Linking the FilterBar building block to the VariantManagement building block enables you to render a filter bar where users can save and manage different filter configurations. This example shows a chart with a filter bar that allows users to filter the data displayed in the chart.

**TAGS**: filter bar, chart, variant management, integration

**STEP**: Variant Management Configuration

**DESCRIPTION**: Configure the variant management to control both the filter bar and chart by specifying their IDs in the 'for' property. This enables users to save and restore different combinations of filters and chart settings.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros" xmlns:f="sap.f">
	<VBox>
		<macros:VariantManagement
			id="VMWithChart"
			for="FilterBarVM,ChartVM"
			showSetAsDefault="true"
			executeOnSelectionForStandardDefault="true"
			headerLevel="H2"
		/>
		<macros:FilterBar metaPath="@com.sap.vocabularies.UI.v1.SelectionFields#SF1" id="FilterBarVM" />
		<macros:Chart
			id="ChartVM"
			metaPath="/RootEntity/@com.sap.vocabularies.UI.v1.Chart"
			personalization="Sort,Type,Item"
			selectionMode="Multiple"
			filterBar="FilterBarVM"
		/>
	</VBox>
</core:FragmentDefinition>
```

**LANGUAGE**: ABAP

**CODE**:
```abap
@Analytics.query: true
@Analytics.dataCategory: #CUBE
@Analytics.dataExtraction.enabled: true
annotate view RootEntity with {

@Analytics.attributes: [
  { dimension: 'SalesOrderType' },
  { dimension: 'SalesOrder' },
  { dimension: 'SalesOrganization' },
  { dimension: 'OverallSDProcessStatus' }
]
@Analytics.measure: [
  { name: 'NetPricing' }
]

@Analytics.customAggregation: 'Custom.concat'

@EndUserText.label: 'Sales Order No.'
@Core.Computed
SalesOrder;

@Semantics.amount.currencyCode: 'Currency'
NetPricing;

@EndUserText.label: 'Overall Process Status'
@Consumption.valueHelp: '_Status'
@Consumption.filter.defaultValue: 'A'
@ObjectModel.text.element: ['OverallSDProcessStatusText']
OverallSDProcessStatus;

@UI.textArrangement: #TEXT_ONLY
OverallSDProcessStatusText;

@EndUserText.label: 'Sales Order Type'
@ObjectModel.text.element: ['SalesOrderType_Text']
SalesOrderType;

@UI.hidden: true
SalesOrderType_Text;

@EndUserText.label: 'Sales Organization'
@ObjectModel.text.element: ['SalesOrganization_Text']
SalesOrganization;

@UI.hidden: true
SalesOrganization_Text;

@UI.selectionField: [{ position: 10 }]
OverallSDProcessStatus;

@UI.chart: [{
  title: 'Chart Title',
  description: 'Chart Description',
  chartType: #COLUMN,
  dimensions: ['SalesOrganization'],
  measures: ['totalPricing'],
  dimensionAttributes: [{
    dimension: 'SalesOrganization',
    role: #CATEGORY
  }],
  measureAttributes: [{
    measure: 'totalPricing',
    role: #AXIS_1
  }]
}]
_Chart;

@ObjectModel.association.type: #TO_COMPOSITION_CHILD
_Status;
}

@ObjectModel.resultSet.sizeCategory: #XS
annotate view Status with {
  @ObjectModel.text.element: ['status']
  status;
}

@Analytics.query: true
@Analytics.dataCategory: #CUBE
annotate view RootEntity with {
@Analytics.internalName: 'MINPRICING'
@EndUserText.label: 'Minimal Net Amount'
@Aggregation.default: #MIN
minPricing;

@Analytics.internalName: 'MAXPRICING'
@EndUserText.label: 'Maximal Net Amount'
@Aggregation.default: #MAX
maxPricing;

@Analytics.internalName: 'AVGPRICING'
@EndUserText.label: 'Average Net Amount'
@Aggregation.default: #AVG
avgPricing;

@Analytics.internalName: 'TOTALPRICING'
@EndUserText.label: 'Total Net Amount'
@Aggregation.default: #SUM
totalPricing;
}
```

**STEP**: Filter Bar Configuration

**DESCRIPTION**: Create the filter bar with a specific ID that matches the variant management configuration. The filter bar will provide filtering capabilities for the chart.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros" xmlns:f="sap.f">
	<VBox>
		<macros:VariantManagement
			id="VMWithChart"
			for="FilterBarVM,ChartVM"
			showSetAsDefault="true"
			executeOnSelectionForStandardDefault="true"
			headerLevel="H2"
		/>
		<macros:FilterBar metaPath="@com.sap.vocabularies.UI.v1.SelectionFields#SF1" id="FilterBarVM" />
		<macros:Chart
			id="ChartVM"
			metaPath="/RootEntity/@com.sap.vocabularies.UI.v1.Chart"
			personalization="Sort,Type,Item"
			selectionMode="Multiple"
			filterBar="FilterBarVM"
		/>
	</VBox>
</core:FragmentDefinition>
```

**STEP**: Chart Configuration

**DESCRIPTION**: Connect the chart to the filter bar using the 'filterBar' property. The chart will automatically update when filters are applied, and both components will be managed by the same variant management.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros" xmlns:f="sap.f">
	<VBox>
		<macros:VariantManagement
			id="VMWithChart"
			for="FilterBarVM,ChartVM"
			showSetAsDefault="true"
			executeOnSelectionForStandardDefault="true"
			headerLevel="H2"
		/>
		<macros:FilterBar metaPath="@com.sap.vocabularies.UI.v1.SelectionFields#SF1" id="FilterBarVM" />
		<macros:Chart
			id="ChartVM"
			metaPath="/RootEntity/@com.sap.vocabularies.UI.v1.Chart"
			personalization="Sort,Type,Item"
			selectionMode="Multiple"
			filterBar="FilterBarVM"
		/>
	</VBox>
</core:FragmentDefinition>
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
service Service {
  @Aggregation.ApplySupported    : {
    Transformations         : [
      'aggregate',
      'topcount',
      'bottomcount',
      'identity',
      'concat',
      'groupby',
      'filter',
      'expand',
      'top',
      'skip',
      'orderby',
      'search'
    ],
    CustomAggregationMethods: ['Custom.concat'],
    Rollup                  : #None,
    PropertyRestrictions    : true,
    GroupableProperties     : [
      SalesOrderType,
      SalesOrder,
      SalesOrganization,
      OverallSDProcessStatus
    ],
    AggregatableProperties  : [{Property: NetPricing}]
  }
  @Analytics.AggregatedProperties: [
    {
      Name                : 'minPricing',
      AggregationMethod   : 'min',
      AggregatableProperty: 'NetPricing',
      ![@Common.Label]    : 'Minimal Net Amount'
    },
    {
      Name                : 'maxPricing',
      AggregationMethod   : 'max',
      AggregatableProperty: 'NetPricing',
      ![@Common.Label]    : 'Maximal Net Amount'
    },
    {
      Name                : 'avgPricing',
      AggregationMethod   : 'average',
      AggregatableProperty: 'NetPricing',
      ![@Common.Label]    : 'Average Net Amount'
    },
    {
      Name                : 'totalPricing',
      AggregationMethod   : 'sum',
      AggregatableProperty: 'NetPricing',
      ![@Common.Label]    : 'Total Net Amount'
    }
  ]
  entity RootEntity {
    key ID                         : String(2);
        SalesOrder                 : String(10) not null @(
          title: 'Sales Order No.',
          Core.Computed
        );
        NetPricing                 : Decimal(15, 10);
        OverallSDProcessStatus     : String(1)           @(
          title                    : 'Overall Process Status',
          Common.Text              : OverallSDProcessStatusText,
          Common.FilterDefaultValue: 'A',
          Common.ValueList         : {
            Label                  : 'Status',
            CollectionPath         : 'Status',
            DistinctValuesSupported: true,
            Parameters             : [{
              $Type            : 'Common.ValueListParameterOut',
              ValueListProperty: 'status',
              LocalDataProperty: 'OverallSDProcessStatus'
            }]
          },
          UI.ValueCriticality      : [
            {
              Value      : 'A',
              Criticality: #Negative
            },
            {
              Value      : 'B',
              Criticality: #Critical
            },
            {
              Value      : 'C',
              Criticality: #Positive
            }
          ]
        );
        OverallSDProcessStatusText : String(20);
        SalesOrderType             : String(4)           @(
          title      : 'Sales Order Type',
          Common.Text: SalesOrderType_Text
        );
        SalesOrderType_Text        : String(20);
        SalesOrganization          : String(4)           @(
          title      : 'Sales Organization',
          Common.Text: SalesOrganization_Text
        );
        SalesOrganization_Text     : String(20);
  }

  entity Status {
    key status : String(2);
  }

  annotate RootEntity with @(
    UI.SelectionFields #SF1: [OverallSDProcessStatus],
    UI.Chart               : {
      $Type              : 'UI.ChartDefinitionType',
      Title              : 'Chart Title',
      Description        : 'Chart Description',
      ChartType          : #Column,
      Measures           : [totalPricing],
      Dimensions         : [SalesOrganization],
      MeasureAttributes  : [{
        $Type  : 'UI.ChartMeasureAttributeType',
        Measure: totalPricing,
        Role   : #Axis1
      }],
      DimensionAttributes: [{
        $Type    : 'UI.ChartDimensionAttributeType',
        Dimension: SalesOrganization,
        Role     : #Category
      }]
    }
  );
}

```

**FILE**: RootEntity.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"ID": "11111144-aaaa-bbbb-cccc-ddddeeeeffff",
		"SalesOrder": 2919682,
		"SalesOrderType": "OR",
		"NetPricing": 20000,
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "1",
		"SalesOrganization_Text": "Sales Org. 0001"
	},
	{
		"ID": "11111147-aaaa-bbbb-cccc-ddddeeeeffff",
		"SalesOrder": 2922870,
		"SalesOrderType": "CR",
		"NetPricing": 10000,
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "2",
		"SalesOrganization_Text": "Sales Org. 002"
	},
	{
		"ID": "11111111-aaaa-bbbb-cccc-ddddeeeeffff",
		"SalesOrder": 6437,
		"SalesOrderType": "CCLN",
		"NetPricing": 10000,
		"OverallSDProcessStatus": "B",
		"OverallSDProcessStatusText": "In Process",
		"SalesOrganization": "3",
		"SalesOrganization_Text": "Sales Org. 003"
	},
	{
		"ID": "11111112-aaaa-bbbb-cccc-ddddeeeeffff",
		"SalesOrder": 2915717,
		"SalesOrderType": "SE",
		"NetPricing": 10000,
		"OverallSDProcessStatus": "B",
		"OverallSDProcessStatusText": "In Process",
		"SalesOrganization": "12",
		"SalesOrganization_Text": "Sales Org. 012"
	},
	{
		"ID": "11111121-aaaa-bbbb-cccc-ddddeeeeffff",
		"SalesOrder": 2916499,
		"SalesOrderType": "OR",
		"NetPricing": 20000,
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "1",
		"SalesOrganization_Text": "test"
	},
	{
		"ID": "11111129-aaaa-bbbb-cccc-ddddeeeeffff",
		"SalesOrder": 2916639,
		"SalesOrderType": "CR",
		"NetPricing": 30000,
		"OverallSDProcessStatus": "B",
		"OverallSDProcessStatusText": "In Process",
		"SalesOrganization": "1010",
		"SalesOrganization_Text": "Sales Org 1010"
	},
	{
		"ID": "11111132-aaaa-bbbb-cccc-ddddeeeeffff",
		"SalesOrder": 2917844,
		"SalesOrderType": "CCLN",
		"NetPricing": 50000,
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "1111",
		"SalesOrganization_Text": "Sales Org. 1111"
	},
	{
		"ID": "11111138-aaaa-bbbb-cccc-ddddeeeeffff",
		"SalesOrder": 2919431,
		"SalesOrderType": "SE",
		"NetPricing": 10000,
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "1710",
		"SalesOrganization_Text": "Food Sales Org"
	},
	{
		"ID": "11111151-aaaa-bbbb-cccc-ddddeeeeffff",
		"SalesOrder": 2922871,
		"SalesOrderType": "OR",
		"NetPricing": 10000,
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "2320",
		"SalesOrganization_Text": "Sales Org 2320"
	},
	{
		"ID": "11111159-aaaa-bbbb-cccc-ddddeeeeffff",
		"SalesOrder": 2922872,
		"SalesOrderType": "CR",
		"NetPricing": 30000,
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "9000",
		"SalesOrganization_Text": "FMS Sales Org. 1"
	},
	{
		"ID": "11111161-aaaa-bbbb-cccc-ddddeeeeffff",
		"SalesOrder": 2922873,
		"SalesOrderType": "CCLN",
		"NetPricing": 100000,
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "998",
		"SalesOrganization_Text": "Singapore sale org"
	},
	{
		"ID": "11111162-aaaa-bbbb-cccc-ddddeeeeffff",
		"SalesOrder": 2922874,
		"SalesOrderType": "SE",
		"NetPricing": 100000,
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "AFR",
		"SalesOrganization_Text": "My SalesOrg"
	},
	{
		"ID": "11111163-aaaa-bbbb-cccc-ddddeeeeffff",
		"SalesOrder": 2922875,
		"SalesOrderType": "OR",
		"NetPricing": 20000,
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "CF01",
		"SalesOrganization_Text": "Sales Org. 0001"
	},
	{
		"ID": "11111164-aaaa-bbbb-cccc-ddddeeeeffff",
		"SalesOrder": 2922876,
		"SalesOrderType": "CR",
		"NetPricing": 30000,
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "CM01",
		"SalesOrganization_Text": "CM Sales Org. 0001"
	},
	{
		"ID": "11111165-aaaa-bbbb-cccc-ddddeeeeffff",
		"SalesOrder": 2922877,
		"SalesOrderType": "CCLN",
		"NetPricing": 500000,
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "CM03",
		"SalesOrganization_Text": "CM Sales Org. 0003"
	},
	{
		"ID": "11111166-aaaa-bbbb-cccc-ddddeeeeffff",
		"SalesOrder": 2922878,
		"SalesOrderType": "SE",
		"NetPricing": 100000,
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "DBM",
		"SalesOrganization_Text": "DBM"
	},
	{
		"ID": "11111167-aaaa-bbbb-cccc-ddddeeeeffff",
		"SalesOrder": 2922879,
		"SalesOrderType": "OR",
		"NetPricing": 10000,
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "DPS",
		"SalesOrganization_Text": "DPS"
	},
	{
		"ID": "11111168-aaaa-bbbb-cccc-ddddeeeeffff",
		"SalesOrder": 2922880,
		"SalesOrderType": "CR",
		"NetPricing": 30000,
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "GK01",
		"SalesOrganization_Text": "Gopi's sales org"
	},
	{
		"ID": "11111169-aaaa-bbbb-cccc-ddddeeeeffff",
		"SalesOrder": 2922881,
		"SalesOrderType": "CCLN",
		"NetPricing": 10000,
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "GK02",
		"SalesOrganization_Text": "Gopi's sales org2"
	},
	{
		"ID": "11111171-aaaa-bbbb-cccc-ddddeeeeffff",
		"SalesOrder": 2922882,
		"SalesOrderType": "SE",
		"NetPricing": 10000,
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "HF01",
		"SalesOrganization_Text": "HF Sales Org"
	},
	{
		"ID": "11111172-aaaa-bbbb-cccc-ddddeeeeffff",
		"SalesOrder": 2922883,
		"SalesOrderType": "OR",
		"NetPricing": 10000,
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "1",
		"SalesOrganization_Text": "Sales Org. 0001"
	},
	{
		"ID": "11111173-aaaa-bbbb-cccc-ddddeeeeffff",
		"SalesOrder": 2922884,
		"SalesOrderType": "CR",
		"NetPricing": 10000,
		"OverallSDProcessStatus": "B",
		"OverallSDProcessStatusText": "In Process",
		"SalesOrganization": "2",
		"SalesOrganization_Text": "Sales Org. 002"
	},
	{
		"ID": "11111174-aaaa-bbbb-cccc-ddddeeeeffff",
		"SalesOrder": 2922885,
		"SalesOrderType": "CCLN",
		"NetPricing": 20000,
		"OverallSDProcessStatus": "C",
		"OverallSDProcessStatusText": "Completed",
		"SalesOrganization": "3",
		"SalesOrganization_Text": "Sales Org. 003"
	},
	{
		"ID": "11111175-aaaa-bbbb-cccc-ddddeeeeffff",
		"SalesOrder": 2922886,
		"SalesOrderType": "SE",
		"NetPricing": 300000,
		"OverallSDProcessStatus": "B",
		"OverallSDProcessStatusText": "In Process",
		"SalesOrganization": "12",
		"SalesOrganization_Text": "Sales Org. 012"
	},
	{
		"ID": "11111176-aaaa-bbbb-cccc-ddddeeeeffff",
		"SalesOrder": 2922887,
		"SalesOrderType": "OR",
		"NetPricing": 50000,
		"OverallSDProcessStatus": "A",
		"OverallSDProcessStatusText": "Open",
		"SalesOrganization": "1",
		"SalesOrganization_Text": "test"
	}
]

```

--------------------------------

**TITLE**: Form Extensions

**INTRODUCTION**: Form extensions enable you to define custom inline fields and extend your forms.

**TAGS**: form extensions, custom, UI.ReferenceFacet, extensibility

**STEP**: Add Further Properties

**DESCRIPTION**: You can add further properties to your form by using the FormElement macro. The placement and anchor attributes define where the new element will be added.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<macros:Form metaPath="/Travel/@com.sap.vocabularies.UI.v1.FieldGroup#ApprovalData" id="myForm" title="Extended Form">
		<macros:FormElement metaPath="DateProperty" id="customSlider" placement="Before" label="Slider Example">
			<macros:fields>
				<Slider />
			</macros:fields>
		</macros:FormElement>
	</macros:Form>
</core:FragmentDefinition>
```

**STEP**: Add Custom Form Elements

**DESCRIPTION**: You can also add custom form elements to your form. In this example, a slider is added as a custom field.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<macros:Form metaPath="/Travel/@com.sap.vocabularies.UI.v1.FieldGroup#ApprovalData" id="myForm" title="Extended Form">
		<macros:FormElement metaPath="DateProperty" id="customSlider" placement="Before" label="Slider Example">
			<macros:fields>
				<Slider />
			</macros:fields>
		</macros:FormElement>
	</macros:Form>
</core:FragmentDefinition>
```

**STEP**: Add Elements through Manifest

**DESCRIPTION**: If you want to add elements to your object page form rendered through UI.Facet annotations, you can use the 'fields' property in the controlConfiguration section of the respective UI.FieldGroup.

**LANGUAGE**: JSON

**CODE**:
```json
{
	"sample": {
		"type": "Component",
		"id": "sample",
		"name": "sap.fe.templates.ObjectPage",
		"options": {
			"settings": {
				"contextPath": "/Travel",
				"controlConfiguration": {
					"@com.sap.vocabularies.UI.v1.FieldGroup#TravelData": {
						"fields": {
							"myCustomFormElement": {
								"template": "my.custom.FormElement.fragment.xml",
								"label": "My custom form element"
							}
						}
					}
				}
			}
		}
	}
}
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: annotations.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});

```

**FILE**: Travel.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"TravelID": "00000001",
		"BeginDate": "2025-11-04",
		"EndDate": "2025-11-06",
		"BookingFee": "20.00",
		"TotalPrice": "900.00",
		"CurrencyCode_code": "USD",
		"Description": "Business Trip for Christine, Pierre",
		"TravelDetails": "This business trip includes a two-day customer workshop at the airport. The goal is the evaluation of the customer's use cases and the alignment on the roadmap for the upcoming year.",
		"TravelStatus_code": "A",
		"to_Agency_AgencyID": "070001"
	},
	{
		"TravelUUID": "53657221A8E4645C17002DF03754AB66",
		"TravelID": "00000002",
		"BeginDate": "2025-12-04",
		"EndDate": "2025-12-16",
		"BookingFee": "80.00",
		"TotalPrice": "3164.00",
		"CurrencyCode_code": "USD",
		"Description": "Lars Jensen site visit for system rollout support",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070002"
	},
	{
		"TravelUUID": "54657221A8E4645C17002DF03754AB66",
		"TravelID": "00000003",
		"BeginDate": "2025-08-04",
		"EndDate": "2025-08-08",
		"BookingFee": "40.00",
		"TotalPrice": "1871.00",
		"CurrencyCode_code": "USD",
		"Description": "John Smith customer workshop at Acme Corp headquarters",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070003"
	},
	{
		"TravelUUID": "55657221A8E4645C17002DF03754AB66",
		"TravelID": "00000004",
		"BeginDate": "2025-09-04",
		"EndDate": "2025-09-05",
		"BookingFee": "40.00",
		"TotalPrice": "1240.00",
		"CurrencyCode_code": "USD",
		"Description": "Anna Müller onboarding with new project team in Berlin",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "X",
		"to_Agency_AgencyID": "070003"
	}
]

```

--------------------------------

**TITLE**: Form

**INTRODUCTION**: The Form building block enables you to render a form based on a FieldGroup annotation.

**TAGS**: UI.ReferenceFacet, UI.CollectionFacet, grid layout

**STEP**: Define UI.FieldGroup Annotation

**DESCRIPTION**: To define the fields of the form, you can use the UI.FieldGroup annotation in your service definition. This annotation allows you to specify which properties should be included in the form.

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});
```

**STEP**: Usage of Form Building Block

**DESCRIPTION**: To use a form, you need to define the metaPath pointing to a UI.FieldGroup annotation. You can also set a tile for the form.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<macros:Form metaPath="/Travel/@com.sap.vocabularies.UI.v1.FieldGroup#ApprovalData" id="myForm" title="Sample Form" />
</core:FragmentDefinition>
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: Travel.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"TravelID": "00000001",
		"BeginDate": "2025-11-04",
		"EndDate": "2025-11-06",
		"BookingFee": "20.00",
		"TotalPrice": "900.00",
		"CurrencyCode_code": "USD",
		"Description": "Business Trip for Christine, Pierre",
		"TravelDetails": "This business trip includes a two-day customer workshop at the airport. The goal is the evaluation of the customer's use cases and the alignment on the roadmap for the upcoming year.",
		"TravelStatus_code": "A",
		"to_Agency_AgencyID": "070001"
	},
	{
		"TravelUUID": "53657221A8E4645C17002DF03754AB66",
		"TravelID": "00000002",
		"BeginDate": "2025-12-04",
		"EndDate": "2025-12-16",
		"BookingFee": "80.00",
		"TotalPrice": "3164.00",
		"CurrencyCode_code": "USD",
		"Description": "Lars Jensen site visit for system rollout support",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070002"
	},
	{
		"TravelUUID": "54657221A8E4645C17002DF03754AB66",
		"TravelID": "00000003",
		"BeginDate": "2025-08-04",
		"EndDate": "2025-08-08",
		"BookingFee": "40.00",
		"TotalPrice": "1871.00",
		"CurrencyCode_code": "USD",
		"Description": "John Smith customer workshop at Acme Corp headquarters",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070003"
	},
	{
		"TravelUUID": "55657221A8E4645C17002DF03754AB66",
		"TravelID": "00000004",
		"BeginDate": "2025-09-04",
		"EndDate": "2025-09-05",
		"BookingFee": "40.00",
		"TotalPrice": "1240.00",
		"CurrencyCode_code": "USD",
		"Description": "Anna Müller onboarding with new project team in Berlin",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "X",
		"to_Agency_AgencyID": "070003"
	}
]

```

--------------------------------

**TITLE**: Form Element

**INTRODUCTION**: The FormElement building block enables you to add a label and visibility control to a field inside a form.

**TAGS**: form element, label, field, input, validation, structure

**STEP**: Implementation

**DESCRIPTION**: To use a form element, you need to define the metaPath of the field you want to display. You can also set a label for the field. If no label is provided, the label will be set automatically based on the metadata.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns:f="sap.ui.layout.form" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<VBox>
		<Panel headerText="Label Set Manually">
			<f:Form>
				<f:layout>
					<f:ColumnLayout columnsM="2" columnsL="3" columnsXL="4" labelCellsLarge="12" />
				</f:layout>
				<f:formContainers>
					<f:FormContainer>
						<f:formElements>
							<macros:FormElement metaPath="TravelID" id="formElementIdWithLabel" label="Travel ID number" />
							<macros:FormElement metaPath="Description" id="formElementDescriptionWithLabel" label="Travel description" />
						</f:formElements>
					</f:FormContainer>
				</f:formContainers>
			</f:Form>
		</Panel>
		<Panel headerText="Label Set Automatically">
			<f:Form>
				<f:layout>
					<f:ColumnLayout columnsM="2" columnsL="3" columnsXL="4" labelCellsLarge="12" />
				</f:layout>
				<f:formContainers>
					<f:FormContainer>
						<f:formElements>
							<macros:FormElement metaPath="TravelID" id="formElementId" />
							<macros:FormElement metaPath="Description" id="formElementDescription" />
						</f:formElements>
					</f:FormContainer>
				</f:formContainers>
			</f:Form>
		</Panel>
	</VBox>
</core:FragmentDefinition>
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: annotations.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});

```

**FILE**: Travel.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"TravelID": "00000001",
		"BeginDate": "2025-11-04",
		"EndDate": "2025-11-06",
		"BookingFee": "20.00",
		"TotalPrice": "900.00",
		"CurrencyCode_code": "USD",
		"Description": "Business Trip for Christine, Pierre",
		"TravelDetails": "This business trip includes a two-day customer workshop at the airport. The goal is the evaluation of the customer's use cases and the alignment on the roadmap for the upcoming year.",
		"TravelStatus_code": "A",
		"to_Agency_AgencyID": "070001"
	},
	{
		"TravelUUID": "53657221A8E4645C17002DF03754AB66",
		"TravelID": "00000002",
		"BeginDate": "2025-12-04",
		"EndDate": "2025-12-16",
		"BookingFee": "80.00",
		"TotalPrice": "3164.00",
		"CurrencyCode_code": "USD",
		"Description": "Lars Jensen site visit for system rollout support",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070002"
	},
	{
		"TravelUUID": "54657221A8E4645C17002DF03754AB66",
		"TravelID": "00000003",
		"BeginDate": "2025-08-04",
		"EndDate": "2025-08-08",
		"BookingFee": "40.00",
		"TotalPrice": "1871.00",
		"CurrencyCode_code": "USD",
		"Description": "John Smith customer workshop at Acme Corp headquarters",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070003"
	},
	{
		"TravelUUID": "55657221A8E4645C17002DF03754AB66",
		"TravelID": "00000004",
		"BeginDate": "2025-09-04",
		"EndDate": "2025-09-05",
		"BookingFee": "40.00",
		"TotalPrice": "1240.00",
		"CurrencyCode_code": "USD",
		"Description": "Anna Müller onboarding with new project team in Berlin",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "X",
		"to_Agency_AgencyID": "070003"
	}
]

```

--------------------------------

**TITLE**: Building Blocks Usage

**INTRODUCTION**: You can use the building blocks provided by SAP Fiori elements to create a custom app if none of the floorplans suit your use case. By using the custom page building block, you can build a custom app that still runs on the SAP Fiori elements framework, but where all pages are treated as custom pages. When creating a new app, we recommend that you use the SAP Fiori tools - Application Generator and then choose the 'Custom Page' template. You can even include the SAP Fiori elements building blocks into an existing SAPUI5 freestyle application – to do so, make the changes described on this page.

**TAGS**: extend sap.fe.PageController, extend sap.fe.AppComponent, wrap FPM component, handling edit mode, metaPath, contextPath, navigation, sap.fe.macros

**STEP**: Extending the sap.fe.AppComponent

**DESCRIPTION**: Change your Component.js file to extend the SAP Fiori elements AppComponent instead of the SAPUI5 Core Component. This ensures your app runs within the SAP Fiori elements framework.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
sap.ui.define(["sap/fe/core/AppComponent"], function (AppComponent) {
	"use strict";

	return AppComponent.extend("sap.fe.core.fpmExplorer.guidanceCustomApps.Component", {
		metadata: {
			manifest: "json"
		}
	});
});
```

**STEP**: Adapting Your Manifest

**DESCRIPTION**: In the manifest, wrap each view that uses SAP Fiori elements building blocks into the SAP Fiori development portal component. SAP Fiori elements requires the context path to serve as a pointer to the metadata path.

**LANGUAGE**: JSON

**CODE**:
```json
{
	"_version": "1.12.0",
	"sap.app": {
		"id": "sap.fe.core.fpmExplorer.guidanceCustomApps",
		"type": "application",
		"i18n": {
			"bundleUrl": "i18n/i18n.properties",
			"supportedLocales": [""],
			"fallbackLocale": ""
		},
		"applicationVersion": {
			"version": "1.0.0"
		},
		"dataSources": {
			"mainService": {
				"uri": "/sap/fe/core/mock/service/",
				"type": "OData",
				"settings": {
					"annotations": [],
					"odataVersion": "4.0"
				}
			}
		}
	},
	"sap.ui5": {
		"dependencies": {
			"minUI5Version": "1.111.1",
			"libs": {
				"sap.ui.core": {},
				"sap.fe.templates": {}
			}
		},
		"contentDensities": {
			"compact": true,
			"cozy": true
		},
		"models": {
			"": {
				"dataSource": "mainService",
				"settings": {
					"operationMode": "Server",
					"autoExpandSelect": true,
					"earlyRequests": true
				}
			}
		},
		"routing": {
			"routes": [
				{
					"pattern": ":?query:",
					"name": "default",
					"target": "sample"
				}
			],
			"targets": {
				"sample": {
					"type": "Component",
					"id": "Default",
					"name": "sap.fe.core.fpm",
					"viewLevel": 1,
					"options": {
						"settings": {
							"viewName": "sap.fe.core.fpmExplorer.guidanceCustomApps.BBUsage",
							"contextPath": "/Travel"
						}
					}
				}
			}
		}
	}
}
```

**STEP**: Adding the SAP Fiori Elements Library as a Dependent Library

**DESCRIPTION**: To benefit from performance optimizations, add the SAP Fiori elements library as a dependency.&#10;&#10;- For building blocks only: add sap.fe.macros.&#10;&#10;- For floorplans: add sap.fe.templates (which includes sap.fe.macros).

**LANGUAGE**: JSON

**CODE**:
```json
{
	"_version": "1.12.0",
	"sap.app": {
		"id": "sap.fe.core.fpmExplorer.guidanceCustomApps",
		"type": "application",
		"i18n": {
			"bundleUrl": "i18n/i18n.properties",
			"supportedLocales": [""],
			"fallbackLocale": ""
		},
		"applicationVersion": {
			"version": "1.0.0"
		},
		"dataSources": {
			"mainService": {
				"uri": "/sap/fe/core/mock/service/",
				"type": "OData",
				"settings": {
					"annotations": [],
					"odataVersion": "4.0"
				}
			}
		}
	},
	"sap.ui5": {
		"dependencies": {
			"minUI5Version": "1.111.1",
			"libs": {
				"sap.ui.core": {},
				"sap.fe.templates": {}
			}
		},
		"contentDensities": {
			"compact": true,
			"cozy": true
		},
		"models": {
			"": {
				"dataSource": "mainService",
				"settings": {
					"operationMode": "Server",
					"autoExpandSelect": true,
					"earlyRequests": true
				}
			}
		},
		"routing": {
			"routes": [
				{
					"pattern": ":?query:",
					"name": "default",
					"target": "sample"
				}
			],
			"targets": {
				"sample": {
					"type": "Component",
					"id": "Default",
					"name": "sap.fe.core.fpm",
					"viewLevel": 1,
					"options": {
						"settings": {
							"viewName": "sap.fe.core.fpmExplorer.guidanceCustomApps.BBUsage",
							"contextPath": "/Travel"
						}
					}
				}
			}
		}
	}
}
```

**STEP**: Extending the sap.fe.PageController

**DESCRIPTION**: Extend the page controller of SAP Fiori elements instead of the SAPUI5 mvc.Controller. Adapt the view controller of your custom page as shown below. Always call the onInit of the PageController when adding your own initialization logic.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
import PageController from "sap/fe/core/PageController";

export default class SamplePageController extends PageController {
	public onInit(): void {
		super.onInit();
	}
}
```

**STEP**: Adding Building Blocks

**DESCRIPTION**: You can now add the building blocks provided by SAP Fiori elements. The example below uses the Table building block by defining the metaPath relative to the contextPath.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<macros:Table metaPath="/Travel/@com.sap.vocabularies.UI.v1.LineItem" />
</core:FragmentDefinition>
```

**STEP**: Accessing the App Component

**DESCRIPTION**: You can’t access your app component from the view controller of your custom view using this.getOwnerComponent() because you've added an additional component to your application tree. You must use this.getAppComponent() instead.

--------------------------------

**TITLE**: Custom Root View

**INTRODUCTION**: If neither of the standard root views provided by SAP Fiori elements suit your needs, you can create and register a custom root view. The following standard root views are available: NavContainer and Flexible Column Layout.

**TAGS**: sap.fe.core.rootView.NavContainer, sap.fe.core.rootView.Fcl, flexible column layout

**STEP**: Add a NavContainer or FlexibleColumnLayout to Your Custom Root View

**DESCRIPTION**: Ensure your custom root view contains an sap.m.NavContainer (or an sap.f.FlexibleColumnLayout) as the main container for your application content.

**LANGUAGE**: XML

**CODE**:
```xml
<mvc:View
	height="100%"
	xmlns="sap.m"
	xmlns:mvc="sap.ui.core.mvc"
	xmlns:fpmExplorer="sap.fe.core.fpmExplorer.controls"
	controllerName="sap.fe.core.rootView.NavContainer"
>
	<fpmExplorer:Page
		title="Custom Root View"
		documentation="1175a122737043f7a6ff7ff9d0e9b815"
		introduction="If neither of the standard root views provided by SAP Fiori elements suit your needs, you can create and register a custom root view. The following standard root views are available: NavContainer and Flexible Column Layout."
	>
		<fpmExplorer:sample>
			<VBox>
				<MessageStrip
					type="Information"
					text="The sample shows a list report where the NavContainer control is used in a custom root view."
				/>
				<NavContainer id="ownRootView" autoFocus="false" height="600px" />
			</VBox>
		</fpmExplorer:sample>
		<fpmExplorer:implementation>
			<fpmExplorer:ImplementationStep
				title="Add a NavContainer or FlexibleColumnLayout to Your Custom Root View"
				text="Ensure your custom root view contains an sap.m.NavContainer (or an sap.f.FlexibleColumnLayout) as the main container for your application content."
			>
				<fpmExplorer:CodeBlock>
					<fpmExplorer:CodeLink file="guidance/guidanceOwnRootView/OwnRootView.view.xml" codeType="view" start="ownRootView" />
				</fpmExplorer:CodeBlock>
			</fpmExplorer:ImplementationStep>

			<fpmExplorer:ImplementationStep
				title="Use the Appropriate Controller for Your Custom Root View"
				text="Ensure your custom root view uses the sap.fe.core.rootView.NavContainer controller (or sap.fe.core.rootView.Fcl controller), or a controller extending it. This enables the default SAP Fiori elements features in your custom root view."
			>
				<fpmExplorer:CodeBlock>
					<fpmExplorer:CodeLink
						file="guidance/guidanceOwnRootView/OwnRootView.view.xml"
						codeType="view"
						start="controllerName"
						fullTag="false"
					/>
				</fpmExplorer:CodeBlock>
			</fpmExplorer:ImplementationStep>

			<fpmExplorer:ImplementationStep
				title="Set the Control ID for the Main Container"
				text="Ensure the ID of the NavContainer (or FlexibleColumnLayout) is set as 'appContent' or is defined in the application manifest under '/sap.ui5/routing/config/controlId'. This allows the router to target the correct container."
			>
				<fpmExplorer:CodeBlock>
					<fpmExplorer:CodeLink file="guidance/guidanceOwnRootView/manifest.json" codeType="manifest" start="routing" end="4" />
				</fpmExplorer:CodeBlock>
			</fpmExplorer:ImplementationStep>

			<fpmExplorer:ImplementationStep
				title="Register the Root View in the Manifest"
				text="Ensure your custom root is defined in the application manifest under '/sap.ui5/rootView/viewName'. This registers your custom root view for the application."
			>
				<fpmExplorer:CodeBlock>
					<fpmExplorer:CodeLink file="guidance/guidanceOwnRootView/manifest.json" codeType="manifest" start="rootView" end="4" />
				</fpmExplorer:CodeBlock>
			</fpmExplorer:ImplementationStep>
		</fpmExplorer:implementation>
	</fpmExplorer:Page>
</mvc:View>
```

**STEP**: Use the Appropriate Controller for Your Custom Root View

**DESCRIPTION**: Ensure your custom root view uses the sap.fe.core.rootView.NavContainer controller (or sap.fe.core.rootView.Fcl controller), or a controller extending it. This enables the default SAP Fiori elements features in your custom root view.

**LANGUAGE**: XML

**CODE**:
```xml
<mvc:View
	height="100%"
	xmlns="sap.m"
	xmlns:mvc="sap.ui.core.mvc"
	xmlns:fpmExplorer="sap.fe.core.fpmExplorer.controls"
	controllerName="sap.fe.core.rootView.NavContainer"
>
	<fpmExplorer:Page
		title="Custom Root View"
		documentation="1175a122737043f7a6ff7ff9d0e9b815"
		introduction="If neither of the standard root views provided by SAP Fiori elements suit your needs, you can create and register a custom root view. The following standard root views are available: NavContainer and Flexible Column Layout."
	>
		<fpmExplorer:sample>
			<VBox>
				<MessageStrip
					type="Information"
					text="The sample shows a list report where the NavContainer control is used in a custom root view."
				/>
				<NavContainer id="ownRootView" autoFocus="false" height="600px" />
			</VBox>
		</fpmExplorer:sample>
		<fpmExplorer:implementation>
			<fpmExplorer:ImplementationStep
				title="Add a NavContainer or FlexibleColumnLayout to Your Custom Root View"
				text="Ensure your custom root view contains an sap.m.NavContainer (or an sap.f.FlexibleColumnLayout) as the main container for your application content."
			>
				<fpmExplorer:CodeBlock>
					<fpmExplorer:CodeLink file="guidance/guidanceOwnRootView/OwnRootView.view.xml" codeType="view" start="ownRootView" />
				</fpmExplorer:CodeBlock>
			</fpmExplorer:ImplementationStep>

			<fpmExplorer:ImplementationStep
				title="Use the Appropriate Controller for Your Custom Root View"
				text="Ensure your custom root view uses the sap.fe.core.rootView.NavContainer controller (or sap.fe.core.rootView.Fcl controller), or a controller extending it. This enables the default SAP Fiori elements features in your custom root view."
			>
				<fpmExplorer:CodeBlock>
					<fpmExplorer:CodeLink
						file="guidance/guidanceOwnRootView/OwnRootView.view.xml"
						codeType="view"
						start="controllerName"
						fullTag="false"
					/>
				</fpmExplorer:CodeBlock>
			</fpmExplorer:ImplementationStep>

			<fpmExplorer:ImplementationStep
				title="Set the Control ID for the Main Container"
				text="Ensure the ID of the NavContainer (or FlexibleColumnLayout) is set as 'appContent' or is defined in the application manifest under '/sap.ui5/routing/config/controlId'. This allows the router to target the correct container."
			>
				<fpmExplorer:CodeBlock>
					<fpmExplorer:CodeLink file="guidance/guidanceOwnRootView/manifest.json" codeType="manifest" start="routing" end="4" />
				</fpmExplorer:CodeBlock>
			</fpmExplorer:ImplementationStep>

			<fpmExplorer:ImplementationStep
				title="Register the Root View in the Manifest"
				text="Ensure your custom root is defined in the application manifest under '/sap.ui5/rootView/viewName'. This registers your custom root view for the application."
			>
				<fpmExplorer:CodeBlock>
					<fpmExplorer:CodeLink file="guidance/guidanceOwnRootView/manifest.json" codeType="manifest" start="rootView" end="4" />
				</fpmExplorer:CodeBlock>
			</fpmExplorer:ImplementationStep>
		</fpmExplorer:implementation>
	</fpmExplorer:Page>
</mvc:View>
```

**STEP**: Set the Control ID for the Main Container

**DESCRIPTION**: Ensure the ID of the NavContainer (or FlexibleColumnLayout) is set as 'appContent' or is defined in the application manifest under '/sap.ui5/routing/config/controlId'. This allows the router to target the correct container.

**LANGUAGE**: JSON

**CODE**:
```json
{
	"_version": "1.12.0",
	"sap.app": {
		"id": "sap.fe.core.fpmExplorer.guidanceOwnRootView",
		"type": "application",
		"i18n": {
			"bundleUrl": "i18n/i18n.properties",
			"supportedLocales": [""],
			"fallbackLocale": ""
		},
		"applicationVersion": {
			"version": "1.0.0"
		},
		"dataSources": {
			"mainService": {
				"uri": "/sap/fe/core/mock/service/",
				"type": "OData",
				"settings": {
					"annotations": [],
					"odataVersion": "4.0"
				}
			}
		}
	},
	"sap.ui5": {
		"dependencies": {
			"minUI5Version": "1.111.1",
			"libs": {
				"sap.ui.core": {},
				"sap.fe.templates": {}
			}
		},
		"contentDensities": {
			"compact": true,
			"cozy": true
		},
		"models": {
			"": {
				"dataSource": "mainService",
				"settings": {
					"operationMode": "Server",
					"autoExpandSelect": true,
					"earlyRequests": true
				}
			}
		},
		"rootView": {
			"viewName": "sap.fe.core.fpmExplorer.guidanceOwnRootView.OwnRootView"
		},
		"routing": {
			"config": {
				"controlId": "ownRootView"
			},
			"routes": [
				{
					"pattern": ":?query:",
					"name": "listPage",
					"target": "listPage"
				},
				{
					"pattern": "/Travel({key}):?query:",
					"name": "objectPage",
					"target": "objectPage"
				}
			],
			"targets": {
				"listPage": {
					"type": "Component",
					"id": "Default",
					"name": "sap.fe.templates.ListReport",
					"options": {
						"settings": {
							"contextPath": "/Travel",
							"variantManagement": "Page",
							"initialLoad": "Enabled",
							"navigation": {
								"Travel": {
									"detail": {
										"route": "objectPage"
									}
								}
							}
						}
					}
				},
				"objectPage": {
					"type": "Component",
					"id": "objectPage",
					"name": "sap.fe.templates.ObjectPage",
					"options": {
						"settings": {
							"contextPath": "/Travel"
						}
					}
				}
			}
		}
	}
}
```

**STEP**: Register the Root View in the Manifest

**DESCRIPTION**: Ensure your custom root is defined in the application manifest under '/sap.ui5/rootView/viewName'. This registers your custom root view for the application.

**LANGUAGE**: JSON

**CODE**:
```json
{
	"_version": "1.12.0",
	"sap.app": {
		"id": "sap.fe.core.fpmExplorer.guidanceOwnRootView",
		"type": "application",
		"i18n": {
			"bundleUrl": "i18n/i18n.properties",
			"supportedLocales": [""],
			"fallbackLocale": ""
		},
		"applicationVersion": {
			"version": "1.0.0"
		},
		"dataSources": {
			"mainService": {
				"uri": "/sap/fe/core/mock/service/",
				"type": "OData",
				"settings": {
					"annotations": [],
					"odataVersion": "4.0"
				}
			}
		}
	},
	"sap.ui5": {
		"dependencies": {
			"minUI5Version": "1.111.1",
			"libs": {
				"sap.ui.core": {},
				"sap.fe.templates": {}
			}
		},
		"contentDensities": {
			"compact": true,
			"cozy": true
		},
		"models": {
			"": {
				"dataSource": "mainService",
				"settings": {
					"operationMode": "Server",
					"autoExpandSelect": true,
					"earlyRequests": true
				}
			}
		},
		"rootView": {
			"viewName": "sap.fe.core.fpmExplorer.guidanceOwnRootView.OwnRootView"
		},
		"routing": {
			"config": {
				"controlId": "ownRootView"
			},
			"routes": [
				{
					"pattern": ":?query:",
					"name": "listPage",
					"target": "listPage"
				},
				{
					"pattern": "/Travel({key}):?query:",
					"name": "objectPage",
					"target": "objectPage"
				}
			],
			"targets": {
				"listPage": {
					"type": "Component",
					"id": "Default",
					"name": "sap.fe.templates.ListReport",
					"options": {
						"settings": {
							"contextPath": "/Travel",
							"variantManagement": "Page",
							"initialLoad": "Enabled",
							"navigation": {
								"Travel": {
									"detail": {
										"route": "objectPage"
									}
								}
							}
						}
					}
				},
				"objectPage": {
					"type": "Component",
					"id": "objectPage",
					"name": "sap.fe.templates.ObjectPage",
					"options": {
						"settings": {
							"contextPath": "/Travel"
						}
					}
				}
			}
		}
	}
}
```

--------------------------------

**TITLE**: KPI Tag

**INTRODUCTION**: The KPITag building block enables you to render the key performance indicator (KPI) tag. It is a clickable control with a KPI value.

**TAGS**: kpi tag, key performance indicator, metrics, dashboard, summary

**STEP**: Implementation

**DESCRIPTION**: For a simple usage, a number, optional a unit, and the status need to be passed to the control.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<FlexBox direction="Column" gap="1rem">
		<FlexBox alignItems="Center" justifyContent="Start">
			<Label text="Success" class="sapUiSmallMarginEnd" />
			<macros:KPITag id="mySuccessKPI" number="{TotalPrice}" unit="{CurrencyCode_code}" status="Success" />
		</FlexBox>
		<FlexBox alignItems="Center" justifyContent="Start">
			<Label text="Error" class="sapUiSmallMarginEnd" />
			<macros:KPITag id="myErrorKPI" number="{TotalPrice}" unit="{CurrencyCode_code}" status="Error" />
		</FlexBox>
		<FlexBox alignItems="Center" justifyContent="Start">
			<Label text="Warning" class="sapUiSmallMarginEnd" />
			<macros:KPITag id="myWarningKPI" number="{TotalPrice}" unit="{CurrencyCode_code}" status="Warning" />
		</FlexBox>
		<FlexBox alignItems="Center" justifyContent="Start">
			<Label text="Information" class="sapUiSmallMarginEnd" />
			<macros:KPITag id="myInformationKPI" number="{TotalPrice}" unit="{CurrencyCode_code}" status="Information" />
		</FlexBox>
		<FlexBox alignItems="Center" justifyContent="Start">
			<Label text="Showing icon" class="sapUiSmallMarginEnd" />
			<macros:KPITag id="myWarningKPIWithIcon" number="{TotalPrice}" unit="{CurrencyCode_code}" status="Warning" showIcon="true" />
		</FlexBox>
		<FlexBox alignItems="Center" justifyContent="Start">
			<Label text="Handling press event" class="sapUiSmallMarginEnd" />
			<macros:KPITag id="myErrorWithPress" number="{TotalPrice}" unit="{CurrencyCode_code}" status="Error" press=".onKPIPressed" />
		</FlexBox>
	</FlexBox>
</core:FragmentDefinition>
```

**STEP**: Implementation

**DESCRIPTION**: By setting the showIcon property to true, in addition a status icon is shown.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<FlexBox direction="Column" gap="1rem">
		<FlexBox alignItems="Center" justifyContent="Start">
			<Label text="Success" class="sapUiSmallMarginEnd" />
			<macros:KPITag id="mySuccessKPI" number="{TotalPrice}" unit="{CurrencyCode_code}" status="Success" />
		</FlexBox>
		<FlexBox alignItems="Center" justifyContent="Start">
			<Label text="Error" class="sapUiSmallMarginEnd" />
			<macros:KPITag id="myErrorKPI" number="{TotalPrice}" unit="{CurrencyCode_code}" status="Error" />
		</FlexBox>
		<FlexBox alignItems="Center" justifyContent="Start">
			<Label text="Warning" class="sapUiSmallMarginEnd" />
			<macros:KPITag id="myWarningKPI" number="{TotalPrice}" unit="{CurrencyCode_code}" status="Warning" />
		</FlexBox>
		<FlexBox alignItems="Center" justifyContent="Start">
			<Label text="Information" class="sapUiSmallMarginEnd" />
			<macros:KPITag id="myInformationKPI" number="{TotalPrice}" unit="{CurrencyCode_code}" status="Information" />
		</FlexBox>
		<FlexBox alignItems="Center" justifyContent="Start">
			<Label text="Showing icon" class="sapUiSmallMarginEnd" />
			<macros:KPITag id="myWarningKPIWithIcon" number="{TotalPrice}" unit="{CurrencyCode_code}" status="Warning" showIcon="true" />
		</FlexBox>
		<FlexBox alignItems="Center" justifyContent="Start">
			<Label text="Handling press event" class="sapUiSmallMarginEnd" />
			<macros:KPITag id="myErrorWithPress" number="{TotalPrice}" unit="{CurrencyCode_code}" status="Error" press=".onKPIPressed" />
		</FlexBox>
	</FlexBox>
</core:FragmentDefinition>
```

**STEP**: Implementation

**DESCRIPTION**: The press event can be handled by defining an event handler.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<FlexBox direction="Column" gap="1rem">
		<FlexBox alignItems="Center" justifyContent="Start">
			<Label text="Success" class="sapUiSmallMarginEnd" />
			<macros:KPITag id="mySuccessKPI" number="{TotalPrice}" unit="{CurrencyCode_code}" status="Success" />
		</FlexBox>
		<FlexBox alignItems="Center" justifyContent="Start">
			<Label text="Error" class="sapUiSmallMarginEnd" />
			<macros:KPITag id="myErrorKPI" number="{TotalPrice}" unit="{CurrencyCode_code}" status="Error" />
		</FlexBox>
		<FlexBox alignItems="Center" justifyContent="Start">
			<Label text="Warning" class="sapUiSmallMarginEnd" />
			<macros:KPITag id="myWarningKPI" number="{TotalPrice}" unit="{CurrencyCode_code}" status="Warning" />
		</FlexBox>
		<FlexBox alignItems="Center" justifyContent="Start">
			<Label text="Information" class="sapUiSmallMarginEnd" />
			<macros:KPITag id="myInformationKPI" number="{TotalPrice}" unit="{CurrencyCode_code}" status="Information" />
		</FlexBox>
		<FlexBox alignItems="Center" justifyContent="Start">
			<Label text="Showing icon" class="sapUiSmallMarginEnd" />
			<macros:KPITag id="myWarningKPIWithIcon" number="{TotalPrice}" unit="{CurrencyCode_code}" status="Warning" showIcon="true" />
		</FlexBox>
		<FlexBox alignItems="Center" justifyContent="Start">
			<Label text="Handling press event" class="sapUiSmallMarginEnd" />
			<macros:KPITag id="myErrorWithPress" number="{TotalPrice}" unit="{CurrencyCode_code}" status="Error" press=".onKPIPressed" />
		</FlexBox>
	</FlexBox>
</core:FragmentDefinition>
```

**LANGUAGE**: TypeScript

**CODE**:
```typescript
import PageController from "sap/fe/core/PageController";
import type KPITag from "sap/fe/macros/KPITag";
import type Popover from "sap/m/Popover";
import type UI5Event from "sap/ui/base/Event";

export default class MainController extends PageController {
	private myPopover?: Popover;

	public async onKPIPressed(event: UI5Event<{}, KPITag>): Promise<void> {
		if (!this.myPopover) {
			this.myPopover = (await this.getExtensionAPI().loadFragment({
				id: "KPITagPopover",
				name: "sap.fe.core.fpmExplorer.kpiTagDefault.Fragment"
			})) as Popover;
		}

		const kpiTag = event.getSource();

		this.myPopover?.openBy(kpiTag);
		this.myPopover?.setBindingContext(kpiTag.getBindingContext());
	}
}
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: annotations.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});

```

**FILE**: Travel.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"TravelID": "00000001",
		"BeginDate": "2025-11-04",
		"EndDate": "2025-11-06",
		"BookingFee": "20.00",
		"TotalPrice": "900.00",
		"CurrencyCode_code": "USD",
		"Description": "Business Trip for Christine, Pierre",
		"TravelDetails": "This business trip includes a two-day customer workshop at the airport. The goal is the evaluation of the customer's use cases and the alignment on the roadmap for the upcoming year.",
		"TravelStatus_code": "A",
		"to_Agency_AgencyID": "070001"
	},
	{
		"TravelUUID": "53657221A8E4645C17002DF03754AB66",
		"TravelID": "00000002",
		"BeginDate": "2025-12-04",
		"EndDate": "2025-12-16",
		"BookingFee": "80.00",
		"TotalPrice": "3164.00",
		"CurrencyCode_code": "USD",
		"Description": "Lars Jensen site visit for system rollout support",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070002"
	},
	{
		"TravelUUID": "54657221A8E4645C17002DF03754AB66",
		"TravelID": "00000003",
		"BeginDate": "2025-08-04",
		"EndDate": "2025-08-08",
		"BookingFee": "40.00",
		"TotalPrice": "1871.00",
		"CurrencyCode_code": "USD",
		"Description": "John Smith customer workshop at Acme Corp headquarters",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070003"
	},
	{
		"TravelUUID": "55657221A8E4645C17002DF03754AB66",
		"TravelID": "00000004",
		"BeginDate": "2025-09-04",
		"EndDate": "2025-09-05",
		"BookingFee": "40.00",
		"TotalPrice": "1240.00",
		"CurrencyCode_code": "USD",
		"Description": "Anna Müller onboarding with new project team in Berlin",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "X",
		"to_Agency_AgencyID": "070003"
	}
]

```

--------------------------------

**TITLE**: Micro Chart

**INTRODUCTION**: The MicroChart building block enables you to render different types of micro charts.

**TAGS**: micro chart, overview, harvey ball, bullet chart, radial chart, column chart, area chart, line chart, stacked bar chart, comparison chart

**STEP**: Define UI.FieldGroup Annotation

**DESCRIPTION**: To define the micro chart, you can use the UI.Chart annotation in your service definition. This annotation refers to a UI.DataPoint annotation.

**LANGUAGE**: CDS

**CODE**:
```cds
service Service {
  entity RootEntity {
    key ID                  : String(2);
        SalesOrder          : String(10) not null @(
          title: 'Sales Order No.',
          Core.Computed
        );
        _Item               : Composition of many ChildEntity
                                on _Item.Parent = $self;
        _CreditLimitDetails : Association to CreditLimitDetails
                                on _CreditLimitDetails.SalesDocument = SalesOrder;
  }

  entity ChildEntity {
    key ID                    : String(2)           @(
          title        : 'Sales Order Item UUID',
          PersonalData : {IsPotentiallySensitive: true},
          Core.Computed: true
        );
        NetAmount             : Decimal(15, 2)      @(
          Analytics           : {Measure: true},
          Measures.ISOCurrency: TransactionCurrency,
          Core.Immutable      : true
        );
        SalesOrder            : String(10) not null @(
          title: 'Sales Order No.',
          Core.Computed
        );
        SalesOrderItem        : String(1) not null  @(
          title: 'Item',
          Core.Computed
        );
        SalesOrderItemNumber  : Integer;
        TransactionCurrency   : String(5);
        NetAmount_text        : String(10);
        TargetAmount          : Decimal(15, 2)      @(
          UI                  : {ExcludeFromNavigationContext: true},
          Measures.ISOCurrency: TransactionCurrency,
          Core.Immutable      : true,
          Common              : {Label: 'Target Value'}
        );
        Criticality           : Integer;
        ToleranceRangeLow     : Decimal(23, 0);
        ToleranceRangeHigh    : Decimal(23, 0);
        DeviationRangeLow     : Decimal(23, 0);
        DeviationRangeHigh    : Decimal(23, 0);
        AcceptanceRangeLow    : Decimal(23, 0);
        AcceptanceRangeHigh   : Decimal(23, 0);
        RequestedDeliveryDate : Date                @(Common: {Label: 'Delivery Date'});
        Parent                : Association to RootEntity;
  }

  annotate ChildEntity with @(UI: {
    PresentationVariant #ComparisonPath: {
      Visualizations: ['@UI.Chart#ComparisonPath'],
      SortOrder     : [{
        Property  : 'NetAmount',
        Descending: true
      }]
    },
    Chart #ColumnMaxPath               : {
      $Type            : 'UI.ChartDefinitionType',
      Title            : 'Items Column Chart',
      Description      : 'Column MicroChart',
      ChartType        : #Column,
      Measures         : [NetAmount],
      Dimensions       : [SalesOrderItem],
      MeasureAttributes: [{
        $Type    : 'UI.ChartMeasureAttributeType',
        Measure  : NetAmount,
        Role     : #Axis1,
        DataPoint: '@UI.DataPoint#ColumnMaxPath'
      }]
    },
    DataPoint #ColumnMaxPath           : {
      Value                 : NetAmount,
      Title                 : 'Data',
      Description           : 'Column Micro Chart',
      Criticality           : Criticality,
      CriticalityCalculation: {
        ImprovementDirection    : #Maximize,
        DeviationRangeLowValue  : DeviationRangeLow,
        ToleranceRangeLowValue  : ToleranceRangeLow,
        AcceptanceRangeLowValue : AcceptanceRangeLow,
        AcceptanceRangeHighValue: AcceptanceRangeHigh,
        ToleranceRangeHighValue : ToleranceRangeHigh,
        DeviationRangeHighValue : DeviationRangeHigh
      }
    },
    Chart #AreaMaxPath                 : {
      $Type            : 'UI.ChartDefinitionType',
      Title            : 'Items Area Chart',
      Description      : 'Area MicroChart',
      ChartType        : #Area,
      Measures         : [NetAmount],
      Dimensions       : [SalesOrderItemNumber],
      MeasureAttributes: [{
        $Type    : 'UI.ChartMeasureAttributeType',
        Measure  : NetAmount,
        Role     : #Axis1,
        DataPoint: '@UI.DataPoint#AreaMaxPath'
      }]
    },
    DataPoint #AreaMaxPath             : {
      Value                 : NetAmount,
      Title                 : 'Data',
      Description           : 'Area Micro Chart',
      TargetValue           : TargetAmount,
      CriticalityCalculation: {
        ImprovementDirection    : #Target,
        DeviationRangeLowValue  : DeviationRangeLow,
        ToleranceRangeLowValue  : ToleranceRangeLow,
        AcceptanceRangeLowValue : AcceptanceRangeLow,
        AcceptanceRangeHighValue: AcceptanceRangeHigh,
        ToleranceRangeHighValue : ToleranceRangeHigh,
        DeviationRangeHighValue : DeviationRangeHigh
      }
    },
    Chart #LineMaxPath                 : {
      $Type            : 'UI.ChartDefinitionType',
      Title            : 'Items Line Chart',
      Description      : 'Line MicroChart',
      ChartType        : #Line,
      Measures         : [
        NetAmount,
        TargetAmount
      ],
      Dimensions       : [RequestedDeliveryDate],
      MeasureAttributes: [
        {
          $Type    : 'UI.ChartMeasureAttributeType',
          Measure  : NetAmount,
          Role     : #Axis1,
          DataPoint: '@UI.DataPoint#LineValueCriticality'
        },
        {
          $Type    : 'UI.ChartMeasureAttributeType',
          Measure  : TargetAmount,
          Role     : #Axis1,
          DataPoint: '@UI.DataPoint#LineTargetCriticality'
        }
      ]
    },
    DataPoint #LineValueCriticality    : {
      Value      : NetAmount,
      Title      : 'Net Amount',
      Description: 'Net Amount Line',
      Criticality: #Positive
    },
    DataPoint #LineTargetCriticality   : {
      Value      : TargetAmount,
      Title      : 'Target Amount',
      Description: 'Target Amount Line',
      Criticality: #Neutral
    },
    Chart #BarStackedPath              : {
      $Type            : 'UI.ChartDefinitionType',
      Title            : 'Items Stacked Bar Chart',
      Description      : 'Stacked Bar MicroChart',
      ChartType        : #BarStacked,
      Measures         : [NetAmount],
      MeasureAttributes: [{
        $Type    : 'UI.ChartMeasureAttributeType',
        Measure  : NetAmount,
        Role     : #Axis1,
        DataPoint: '@UI.DataPoint#BarStackedPath'
      }]
    },
    DataPoint #BarStackedPath          : {
      Value      : NetAmount,
      Title      : 'Net Amount',
      Criticality: Criticality,
    },
    Chart #RadialChart                 : {
      $Type            : 'UI.ChartDefinitionType',
      Title            : 'MicroChart',
      ChartType        : #Bullet,
      Measures         : [NetAmount],
      Dimensions       : [SalesOrderItem],
      MeasureAttributes: [{
        $Type    : 'UI.ChartMeasureAttributeType',
        Measure  : NetAmount,
        Role     : #Axis1,
        DataPoint: '@UI.DataPoint#RadialPath'
      }]
    },
    DataPoint #RadialPath              : {
      Value      : NetAmount,
      Title      : 'Net Amount',
      Criticality: Criticality,
    },
    Chart #ComparisonPath              : {
      $Type            : 'UI.ChartDefinitionType',
      Title            : 'Items Comparison Chart',
      Description      : 'Comparison Chart from PV',
      ChartType        : #Bar,
      Measures         : [NetAmount],
      Dimensions       : [SalesOrderItem],
      MeasureAttributes: [{
        $Type    : 'UI.ChartMeasureAttributeType',
        Measure  : NetAmount,
        Role     : #Axis1,
        DataPoint: '@UI.DataPoint#ComparisonPath'
      }]
    },
    DataPoint #ComparisonPath          : {
      Value       : NetAmount,
      Title       : 'Net Amount',
      Criticality : Criticality,
      MaximumValue: 100,
      MinimumValue: -100,
    }
  });

  entity CreditLimitDetails                                 @(title: 'Bullet Chart') {
    key SalesDocument                      : String(10);
        CustomerCreditExposureAmount       : Decimal(23, 2) @(Measures.ISOCurrency: TransactionCurrency, );
        Delivered                          : Boolean        @(title: 'Delivery Status');
        CustomerCreditExposureAmountHidden : Decimal(23, 2) @(
          Measures.ISOCurrency: TransactionCurrency,
          UI.Hidden           : Delivered
        );
        CustomerCreditForecast             : Decimal(23, 2) @(Measures.ISOCurrency: TransactionCurrency, );
        CustomerCreditExposureAmount_text  : String(15);
        CustomerCreditLimitAmount          : Decimal(23, 2) @(Measures.ISOCurrency: TransactionCurrency, );
        MaximumCreditValue                 : Decimal(23, 2);
        CustomerCreditLimitAmount_text     : String(15);
        TransactionCurrency                : String(5);
        CustomerIsAboveThreshold           : Integer;
        ToleranceRangeLow                  : Decimal(23, 2);
        ToleranceRangeHigh                 : Decimal(23, 2);
        DeviationRangeLow                  : Decimal(23, 2);
        DeviationRangeHigh                 : Decimal(23, 2);
        AcceptanceRangeLow                 : Decimal(23, 2);
        AcceptanceRangeHigh                : Decimal(23, 2);
  }

  annotate CreditLimitDetails with @(UI: {
    Chart #CreditLimitChart                : {
      $Type            : 'UI.ChartDefinitionType',
      Title            : 'Credit Limit Bullet',
      Description      : 'Bullet MicroChart',
      ChartType        : #Bullet,
      Measures         : [CustomerCreditExposureAmount],
      MeasureAttributes: [{
        $Type    : 'UI.ChartMeasureAttributeType',
        Measure  : CustomerCreditExposureAmount,
        Role     : #Axis1,
        DataPoint: '@UI.DataPoint#CustomerCreditExposureAmount'
      }]
    },
    DataPoint #CustomerCreditExposureAmount: {
      Value                 : CustomerCreditExposureAmount,
      Title                 : 'Exposure Amount',
      Description           : 'Bullet Micro Chart',
      TargetValue           : CustomerCreditLimitAmount,
      ForecastValue         : CustomerCreditForecast,
      MaximumValue          : 7000,
      MinimumValue          : 200,
      Criticality           : CustomerIsAboveThreshold,
      CriticalityCalculation: {
        ImprovementDirection    : #Maximize,
        DeviationRangeLowValue  : DeviationRangeLow,
        ToleranceRangeLowValue  : ToleranceRangeLow,
        AcceptanceRangeLowValue : AcceptanceRangeLow,
        AcceptanceRangeHighValue: AcceptanceRangeHigh,
        ToleranceRangeHighValue : ToleranceRangeHigh,
        DeviationRangeHighValue : DeviationRangeHigh
      }
    },
    Chart #HarveyBallCriticalityPath       : {
      $Type            : 'UI.ChartDefinitionType',
      Title            : 'Credit Limit HarveyBall',
      Description      : 'HarveyBall MicroChart',
      ChartType        : #Pie,
      Measures         : [CustomerCreditExposureAmount],
      MeasureAttributes: [{
        $Type    : 'UI.ChartMeasureAttributeType',
        Measure  : CustomerCreditExposureAmount,
        Role     : #Axis1,
        DataPoint: '@UI.DataPoint#HarveyBallValuePath'
      }]
    },
    DataPoint #HarveyBallValuePath         : {
      Value       : CustomerCreditExposureAmount,
      MaximumValue: CustomerCreditLimitAmount,
      Criticality : CustomerIsAboveThreshold
    },
    Chart #RadialCriticalityPath           : {
      $Type            : 'UI.ChartDefinitionType',
      Title            : 'Credit Limit Radial',
      Description      : 'Radial MicroChart',
      ChartType        : #Donut,
      Measures         : [CustomerCreditExposureAmount],
      MeasureAttributes: [{
        $Type    : 'UI.ChartMeasureAttributeType',
        Measure  : CustomerCreditExposureAmount,
        Role     : #Axis1,
        DataPoint: '@UI.DataPoint#RadialValuePath'
      }]
    },
    DataPoint #RadialValuePath             : {
      Value      : CustomerCreditExposureAmount,
      TargetValue: CustomerCreditLimitAmount,
      Criticality: CustomerIsAboveThreshold
    }
  });
}
```

**LANGUAGE**: ABAP

**CODE**:
```abap
@Metadata.layer: #CORE
define view entity C_RootEntity
  as select from I_RootEntity
{
  key ID,
      SalesOrder,
      // Association to child items for micro charts
      _Item,
      _CreditLimitDetails
}

@Metadata.layer: #CORE  
define view entity C_ChildEntity
  as select from I_ChildEntity
{
  key ID,
      NetAmount,
      SalesOrder,
      SalesOrderItem,
      SalesOrderItemNumber,
      TransactionCurrency,
      NetAmount_text,
      TargetAmount,
      Criticality,
      ToleranceRangeLow,
      ToleranceRangeHigh,
      DeviationRangeLow,
      DeviationRangeHigh,
      AcceptanceRangeLow,
      AcceptanceRangeHigh,
      RequestedDeliveryDate,
      Parent
}

// Field-level annotations for ChildEntity
@Metadata.layer: #CORE
annotate view C_ChildEntity with
{
  @EndUserText.label: 'Sales Order Item UUID'
  @PersonalData.isPotentiallySensitive: true
  ID;
  
  @Analytics.measure: true
  @Semantics.amount.currencyCode: 'TransactionCurrency'
  NetAmount;
  
  @EndUserText.label: 'Sales Order No.'
  SalesOrder;
  
  @EndUserText.label: 'Item'
  SalesOrderItem;
  
  @EndUserText.label: 'Target Value'
  @Semantics.amount.currencyCode: 'TransactionCurrency'
  TargetAmount;
  
  @EndUserText.label: 'Delivery Date'
  RequestedDeliveryDate;
}

// UI.Chart and UI.DataPoint annotations for micro charts
@Metadata.layer: #CORE
annotate view C_ChildEntity with
{
  // Column Micro Chart
  @UI.chart: [
    {
      qualifier: 'ColumnMaxPath',
      title: 'Items Column Chart',
      description: 'Column MicroChart',
      chartType: #COLUMN,
      measures: [ 'NetAmount' ],
      dimensions: [ 'SalesOrderItem' ],
      measureAttributes: [
        {
          measure: 'NetAmount',
          role: #AXIS_1,
          dataPoint: '@UI.dataPoint#ColumnMaxPath'
        }
      ]
    }
  ]
  @UI.dataPoint: [
    {
      qualifier: 'ColumnMaxPath',
      title: 'Data',
      description: 'Column Micro Chart',
      criticality: 'Criticality',
      criticalityCalculation: {
        improvementDirection: #MAXIMIZE,
        deviationRangeLowValue: 'DeviationRangeLow',
        toleranceRangeLowValue: 'ToleranceRangeLow',
        acceptanceRangeLowValue: 'AcceptanceRangeLow',
        acceptanceRangeHighValue: 'AcceptanceRangeHigh',
        toleranceRangeHighValue: 'ToleranceRangeHigh',
        deviationRangeHighValue: 'DeviationRangeHigh'
      }
    }
  ]
  NetAmount;
  
  // Area Micro Chart
  @UI.chart: [
    {
      qualifier: 'AreaMaxPath', 
      title: 'Items Area Chart',
      description: 'Area MicroChart',
      chartType: #AREA,
      measures: [ 'NetAmount' ],
      dimensions: [ 'SalesOrderItemNumber' ],
      measureAttributes: [
        {
          measure: 'NetAmount',
          role: #AXIS_1,
          dataPoint: '@UI.dataPoint#AreaMaxPath'
        }
      ]
    }
  ]
  @UI.dataPoint: [
    {
      qualifier: 'AreaMaxPath',
      title: 'Area Data',
      description: 'Area Micro Chart',
      targetValue: 'TargetAmount',
      criticality: 'Criticality'
    }
  ]
  SalesOrderItemNumber;
  
  // Line Micro Chart
  @UI.chart: [
    {
      qualifier: 'LineMaxPath',
      title: 'Items Line Chart', 
      description: 'Line MicroChart',
      chartType: #LINE,
      measures: [ 'NetAmount', 'TargetAmount' ],
      dimensions: [ 'SalesOrderItemNumber' ],
      measureAttributes: [
        {
          measure: 'NetAmount',
          role: #AXIS_1,
          dataPoint: '@UI.dataPoint#LineValueCriticality'
        },
        {
          measure: 'TargetAmount',
          role: #AXIS_1,
          dataPoint: '@UI.dataPoint#LineTargetCriticality'
        }
      ]
    }
  ]
  @UI.dataPoint: [
    {
      qualifier: 'LineValueCriticality',
      title: 'Line Value',
      criticality: 'Criticality'
    },
    {
      qualifier: 'LineTargetCriticality',
      title: 'Target Line',
      targetValue: 'TargetAmount'
    }
  ]
  TargetAmount;
  
  // Bar Stacked Micro Chart
  @UI.chart: [
    {
      qualifier: 'BarStackedPath',
      title: 'Items Bar Chart',
      description: 'Bar MicroChart', 
      chartType: #BAR,
      measures: [ 'NetAmount' ],
      dimensions: [ 'SalesOrderItem' ],
      measureAttributes: [
        {
          measure: 'NetAmount',
          role: #AXIS_1,
          dataPoint: '@UI.dataPoint#BarStackedPath'
        }
      ]
    }
  ]
  @UI.dataPoint: [
    {
      qualifier: 'BarStackedPath',
      title: 'Bar Data',
      targetValue: 'TargetAmount',
      criticality: 'Criticality'
    }
  ]
  SalesOrderItem;
  
  // Radial Micro Chart
  @UI.chart: [
    {
      qualifier: 'RadialChart',
      title: 'Items Radial Chart',
      description: 'Radial MicroChart',
      chartType: #DONUT,
      measures: [ 'NetAmount' ],
      measureAttributes: [
        {
          measure: 'NetAmount', 
          role: #AXIS_1,
          dataPoint: '@UI.dataPoint#RadialPath'
        }
      ]
    }
  ]
  @UI.dataPoint: [
    {
      qualifier: 'RadialPath',
      title: 'Radial Data',
      targetValue: 'TargetAmount',
      criticality: 'Criticality'
    }
  ]
  Criticality;
}

// UI.PresentationVariant for micro chart comparison
@Metadata.layer: #CORE
annotate view C_ChildEntity with
{
  @UI.presentationVariant: [
    {
      qualifier: 'ComparisonPath',
      visualizations: [ '@UI.chart#ComparisonPath' ],
      sortOrder: [
        {
          by: 'NetAmount',
          direction: #DESC
        }
      ]
    }
  ]
  ID;
}
```

**STEP**: Usage of Micro Chart Building Block

**DESCRIPTION**: To use a micro chart, you need to define the metaPath pointing to a UI.Chart annotation.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<VBox class="sapUiMediumMargin">
		<Panel>
			<HBox justifyContent="SpaceAround" class="sapUiLargeMarginBottom">
				<HBox binding="{path:'/RootEntity(\'8\')'}" class="sapUiTinyMarginEnd">
					<macros:MicroChart
						id="harveyball"
						metaPath="/RootEntity/_CreditLimitDetails/@com.sap.vocabularies.UI.v1.Chart#HarveyBallCriticalityPath"
						batchGroupId="$auto.abc"
					/>
				</HBox>
				<HBox binding="{path:'/RootEntity(\'1\')'}" class="sapUiTinyMarginBegin sapUiTinyMarginEnd">
					<macros:MicroChart
						id="bullet"
						metaPath="_CreditLimitDetails/@com.sap.vocabularies.UI.v1.Chart#CreditLimitChart"
						batchGroupId="$auto.abc"
					/>
				</HBox>
				<HBox binding="{path:'/RootEntity(\'4\')'}" class="sapUiTinyMarginBegin sapUiTinyMarginEnd">
					<macros:MicroChart
						id="radial"
						metaPath="_CreditLimitDetails/@com.sap.vocabularies.UI.v1.Chart#RadialCriticalityPath"
						batchGroupId="$auto.abc"
					/>
				</HBox>
			</HBox>
		</Panel>
		<Panel>
			<HBox justifyContent="SpaceAround" class="sapUiLargeMarginBottom sapUiLargeMarginTop">
				<HBox binding="{path:'/RootEntity(\'5\')'}" class="sapUiTinyMarginEnd">
					<macros:MicroChart
						id="column"
						metaPath="_Item/@com.sap.vocabularies.UI.v1.Chart#ColumnMaxPath"
						batchGroupId="$auto.abc"
					/>
				</HBox>
				<HBox binding="{path:'/RootEntity(\'1\')'}" class="sapUiTinyMarginBegin sapUiTinyMarginEnd">
					<macros:MicroChart id="area" metaPath="_Item/@com.sap.vocabularies.UI.v1.Chart#AreaMaxPath" batchGroupId="$auto.def" />
				</HBox>
				<HBox binding="{path:'/RootEntity(\'1\')'}" class="sapUiTinyMarginBegin sapUiTinyMarginEnd">
					<macros:MicroChart id="line" metaPath="_Item/@com.sap.vocabularies.UI.v1.Chart#LineMaxPath" batchGroupId="$auto.def" />
				</HBox>
			</HBox>
			<HBox justifyContent="SpaceAround" class="sapUiLargeMarginBottom sapUiLargeMarginTop">
				<HBox binding="{path:'/RootEntity(\'5\')'}" class="sapUiTinyMarginEnd">
					<macros:MicroChart
						id="bar"
						metaPath="_Item/@com.sap.vocabularies.UI.v1.Chart#BarStackedPath"
						batchGroupId="$auto.abc"
					/>
				</HBox>
				<HBox binding="{path:'/RootEntity(\'2\')'}" class="sapUiTinyMarginBegin sapUiTinyMarginEnd">
					<macros:MicroChart
						id="comparison"
						metaPath="_Item/@com.sap.vocabularies.UI.v1.PresentationVariant#ComparisonPath"
						batchGroupId="$auto.abc"
					/>
				</HBox>
			</HBox>
		</Panel>
	</VBox>
</core:FragmentDefinition>
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: RootEntity.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"ID": "1",
		"SalesOrder": "2919682"
	},
	{
		"ID": "2",
		"SalesOrder": "2922870"
	},
	{
		"ID": "3",
		"SalesOrder": "6437"
	},
	{
		"ID": "4",
		"SalesOrder": "2915717"
	},
	{
		"ID": "5",
		"SalesOrder": "2916499"
	},
	{
		"ID": "6",
		"SalesOrder": "2916639"
	},
	{
		"ID": "7",
		"SalesOrder": "2917844"
	},
	{
		"ID": "8",
		"SalesOrder": "2919431"
	}
]

```

**FILE**: ChildEntity.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"ID": "1",
		"Parent_ID": "3",
		"SalesOrder": "6437",
		"SalesOrderItem": "A",
		"SalesOrderItemNumber": 40,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "3",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "2",
		"Parent_ID": "4",
		"SalesOrder": "2915717",
		"SalesOrderItem": "A",
		"SalesOrderItemNumber": 40,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "4",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "3",
		"Parent_ID": "4",
		"SalesOrder": "2915717",
		"SalesOrderItem": "D",
		"SalesOrderItemNumber": 70,
		"NetAmount": 10,
		"owner_ID": "4",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "4",
		"Parent_ID": "4",
		"SalesOrder": "2915717",
		"SalesOrderItem": "C",
		"SalesOrderItemNumber": 60,
		"TransactionCurrency": "EUR",
		"NetAmount": 20,
		"owner_ID": "4",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "5",
		"Parent_ID": "4",
		"SalesOrder": "2915717",
		"SalesOrderItem": "B",
		"SalesOrderItemNumber": 50,
		"TransactionCurrency": "EUR",
		"NetAmount": 30,
		"owner_ID": "4",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "6",
		"Parent_ID": "4",
		"SalesOrder": "2915717",
		"SalesOrderItem": "E",
		"SalesOrderItemNumber": 80,
		"TransactionCurrency": "EUR",
		"NetAmount": 50,
		"owner_ID": "4",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "7",
		"Parent_ID": "4",
		"SalesOrder": "2915717",
		"SalesOrderItem": "Z",
		"SalesOrderItemNumber": 30,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "4",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "8",
		"Parent_ID": "4",
		"SalesOrder": "2915717",
		"SalesOrderItem": "Y",
		"SalesOrderItemNumber": 20,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "4",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "9",
		"Parent_ID": "4",
		"SalesOrder": "2915717",
		"SalesOrderItem": "X",
		"SalesOrderItemNumber": 10,
		"TransactionCurrency": "EUR",
		"NetAmount": 30,
		"owner_ID": "4",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "10",
		"Parent_ID": "5",
		"SalesOrder": "2916499",
		"SalesOrderItem": "A",
		"SalesOrderItemNumber": 40,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "5",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 1,
		"NetAmount_text": "0"
	},
	{
		"ID": "11",
		"Parent_ID": "5",
		"SalesOrder": "2916499",
		"SalesOrderItem": "D",
		"SalesOrderItemNumber": 70,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "5",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 2,
		"NetAmount_text": "0"
	},
	{
		"ID": "12",
		"Parent_ID": "5",
		"SalesOrder": "2916499",
		"SalesOrderItem": "C",
		"SalesOrderItemNumber": 60,
		"TransactionCurrency": "EUR",
		"NetAmount": 20,
		"owner_ID": "5",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 1,
		"NetAmount_text": "0"
	},
	{
		"ID": "13",
		"Parent_ID": "5",
		"SalesOrder": "2916499",
		"SalesOrderItem": "B",
		"SalesOrderItemNumber": 50,
		"TransactionCurrency": "EUR",
		"NetAmount": 30,
		"owner_ID": "5",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 3,
		"NetAmount_text": "0"
	},
	{
		"ID": "14",
		"Parent_ID": "5",
		"SalesOrder": "2916499",
		"SalesOrderItem": "E",
		"SalesOrderItemNumber": 80,
		"TransactionCurrency": "EUR",
		"NetAmount": 50,
		"owner_ID": "5",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 3,
		"NetAmount_text": "0"
	},
	{
		"ID": "15",
		"Parent_ID": "5",
		"SalesOrder": "2916499",
		"SalesOrderItem": "Z",
		"SalesOrderItemNumber": 30,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "5",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 2,
		"NetAmount_text": "0"
	},
	{
		"ID": "16",
		"Parent_ID": "5",
		"SalesOrder": "2916499",
		"SalesOrderItem": "Y",
		"SalesOrderItemNumber": 20,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "5",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 2,
		"NetAmount_text": "0"
	},
	{
		"ID": "17",
		"Parent_ID": "5",
		"SalesOrder": "2916499",
		"SalesOrderItem": "X",
		"SalesOrderItemNumber": 10,
		"TransactionCurrency": "EUR",
		"NetAmount": 30,
		"owner_ID": "5",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 1,
		"NetAmount_text": "0"
	},
	{
		"ID": "18",
		"Parent_ID": "6",
		"SalesOrder": "2916639",
		"SalesOrderItem": "A",
		"SalesOrderItemNumber": 40,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "6",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "19",
		"Parent_ID": "6",
		"SalesOrder": "2916639",
		"SalesOrderItem": "D",
		"SalesOrderItemNumber": 70,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "6",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "20",
		"Parent_ID": "7",
		"SalesOrder": "2917844",
		"SalesOrderItem": "A",
		"SalesOrderItemNumber": 40,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "7",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "21",
		"Parent_ID": "7",
		"SalesOrder": "2917844",
		"SalesOrderItem": "D",
		"SalesOrderItemNumber": 70,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "7",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "22",
		"Parent_ID": "7",
		"SalesOrder": "2917844",
		"SalesOrderItem": "C",
		"SalesOrderItemNumber": 60,
		"TransactionCurrency": "EUR",
		"NetAmount": 20,
		"owner_ID": "7",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "22",
		"Parent_ID": "7",
		"SalesOrder": "2917844",
		"SalesOrderItem": "B",
		"SalesOrderItemNumber": 50,
		"TransactionCurrency": "EUR",
		"NetAmount": 30,
		"owner_ID": "7",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "23",
		"Parent_ID": "7",
		"SalesOrder": "2917844",
		"SalesOrderItem": "E",
		"SalesOrderItemNumber": 80,
		"TransactionCurrency": "EUR",
		"NetAmount": 50,
		"owner_ID": "7",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "24",
		"Parent_ID": "7",
		"SalesOrder": "2917844",
		"SalesOrderItem": "Z",
		"SalesOrderItemNumber": 30,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "7",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "25",
		"Parent_ID": "8",
		"SalesOrder": "2919431",
		"SalesOrderItem": "A",
		"SalesOrderItemNumber": 40,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "8",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "26",
		"Parent_ID": "8",
		"SalesOrder": "2919431",
		"SalesOrderItem": "D",
		"SalesOrderItemNumber": 70,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "8",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "27",
		"Parent_ID": "8",
		"SalesOrder": "2919431",
		"SalesOrderItem": "C",
		"SalesOrderItemNumber": 60,
		"TransactionCurrency": "EUR",
		"NetAmount": 20,
		"owner_ID": "8",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "28",
		"Parent_ID": "8",
		"SalesOrder": "2919431",
		"SalesOrderItem": "Y",
		"SalesOrderItemNumber": 20,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "8",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "29",
		"Parent_ID": "8",
		"SalesOrder": "2919431",
		"SalesOrderItem": "X",
		"SalesOrderItemNumber": 10,
		"TransactionCurrency": "EUR",
		"NetAmount": 30,
		"owner_ID": "8",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "30",
		"Parent_ID": "1",
		"SalesOrder": "2919682",
		"SalesOrderItem": "X",
		"SalesOrderItemNumber": 10,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "1",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 10,
		"AcceptanceRangeLow": 15,
		"AcceptanceRangeHigh": 20,
		"ToleranceRangeHigh": 30,
		"DeviationRangeHigh": 40,
		"TargetAmount": 0,
		"Criticality": 1,
		"NetAmount_text": "0",
		"RequestedDeliveryDate": "2018-04-28"
	},
	{
		"ID": "31",
		"Parent_ID": "1",
		"SalesOrder": "2919682",
		"SalesOrderItem": "A",
		"SalesOrderItemNumber": 40,
		"TransactionCurrency": "EUR",
		"NetAmount": 20,
		"owner_ID": "1",
		"DeviationRangeLow": 15,
		"ToleranceRangeLow": 25,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 35,
		"ToleranceRangeHigh": 45,
		"DeviationRangeHigh": 55,
		"TargetAmount": 35,
		"Criticality": 2,
		"NetAmount_text": "0",
		"RequestedDeliveryDate": "2018-04-29"
	},
	{
		"ID": "32",
		"Parent_ID": "1",
		"SalesOrder": "2919682",
		"SalesOrganization": "0001",
		"SalesOrderItem": "D",
		"SalesOrderItemNumber": 70,
		"TransactionCurrency": "EUR",
		"NetAmount": 50,
		"owner_ID": "1",
		"DeviationRangeLow": 30,
		"ToleranceRangeLow": 40,
		"AcceptanceRangeLow": 45,
		"AcceptanceRangeHigh": 50,
		"ToleranceRangeHigh": 60,
		"DeviationRangeHigh": 70,
		"TargetAmount": 70,
		"Criticality": 3,
		"NetAmount_text": "0",
		"RequestedDeliveryDate": "2018-04-30"
	},
	{
		"ID": "33",
		"Parent_ID": "2",
		"SalesOrder": "2922870",
		"SalesOrderItem": "F",
		"SalesOrderItemNumber": 90,
		"TransactionCurrency": "EUR",
		"NetAmount": 15,
		"owner_ID": "2",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 10,
		"AcceptanceRangeLow": 15,
		"AcceptanceRangeHigh": 20,
		"ToleranceRangeHigh": 30,
		"DeviationRangeHigh": 40,
		"TargetAmount": 0,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "34",
		"Parent_ID": "2",
		"SalesOrder": "2922870",
		"SalesOrderItem": "B",
		"SalesOrderItemNumber": 50,
		"TransactionCurrency": "EUR",
		"NetAmount": 40,
		"owner_ID": "2",
		"DeviationRangeLow": 15,
		"ToleranceRangeLow": 25,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 35,
		"ToleranceRangeHigh": 45,
		"DeviationRangeHigh": 55,
		"TargetAmount": 35,
		"Criticality": 1,
		"NetAmount_text": "0"
	},
	{
		"ID": "35",
		"Parent_ID": "2",
		"SalesOrder": "2922870",
		"SalesOrderItem": "D",
		"SalesOrderItemNumber": 70,
		"TransactionCurrency": "EUR",
		"NetAmount": 65,
		"owner_ID": "2",
		"DeviationRangeLow": 30,
		"ToleranceRangeLow": 40,
		"AcceptanceRangeLow": 45,
		"AcceptanceRangeHigh": 50,
		"ToleranceRangeHigh": 60,
		"DeviationRangeHigh": 70,
		"TargetAmount": 70,
		"Criticality": 2,
		"NetAmount_text": "0"
	}
]

```

**FILE**: CreditLimitDetails.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"CustomerCreditForecast": 1800,
		"CustomerCreditExposureAmount": 1251,
		"CustomerCreditExposureAmountHidden": 2250,
		"CustomerCreditExposureAmount_text": "Credit Exposure",
		"CustomerCreditLimitAmount": 4000,
		"CustomerCreditLimitAmount_text": "Credit Limit",
		"CustomerIsAboveThreshold": 3,
		"SalesDocument": "2919682",
		"DeviationRangeLow": 1000,
		"ToleranceRangeLow": 2000,
		"AcceptanceRangeLow": 2500,
		"AcceptanceRangeHigh": 3500,
		"ToleranceRangeHigh": 4000,
		"DeviationRangeHigh": 5000,
		"TransactionCurrency": "EUR",
		"MaximumCreditValue": 7000,
		"Delivered": 0
	},
	{
		"CustomerCreditForecast": 2100,
		"CustomerCreditExposureAmount": 2250,
		"CustomerCreditExposureAmountHidden": 1000,
		"CustomerCreditExposureAmount_text": "Credit Exposure",
		"CustomerCreditLimitAmount": 4000,
		"CustomerCreditLimitAmount_text": "Credit Limit",
		"CustomerIsAboveThreshold": 1,
		"SalesDocument": "2922870",
		"DeviationRangeLow": 1000,
		"ToleranceRangeLow": 2000,
		"AcceptanceRangeLow": 2500,
		"AcceptanceRangeHigh": 3500,
		"ToleranceRangeHigh": 4000,
		"DeviationRangeHigh": 5000,
		"TransactionCurrency": "EUR",
		"MaximumCreditValue": 7000,
		"Delivered": 1
	},
	{
		"CustomerCreditForecast": 1800,
		"CustomerCreditExposureAmount": 1251,
		"CustomerCreditExposureAmountHidden": 4000,
		"CustomerCreditExposureAmount_text": "Credit Exposure",
		"CustomerCreditLimitAmount": 4000,
		"CustomerCreditLimitAmount_text": "Credit Limit",
		"CustomerIsAboveThreshold": 3,
		"SalesDocument": "2915717",
		"DeviationRangeLow": 1000,
		"ToleranceRangeLow": 2000,
		"AcceptanceRangeLow": 2500,
		"AcceptanceRangeHigh": 3500,
		"ToleranceRangeHigh": 4000,
		"DeviationRangeHigh": 5000,
		"TransactionCurrency": "EUR",
		"MaximumCreditValue": 7000,
		"Delivered": 0
	},
	{
		"CustomerCreditForecast": 2100,
		"CustomerCreditExposureAmount": 2250,
		"CustomerCreditExposureAmountHidden": 3500,
		"CustomerCreditExposureAmount_text": "Credit Exposure",
		"CustomerCreditLimitAmount": 4000,
		"CustomerCreditLimitAmount_text": "Credit Limit",
		"CustomerIsAboveThreshold": 1,
		"SalesDocument": "2916499",
		"DeviationRangeLow": 1000,
		"ToleranceRangeLow": 2000,
		"AcceptanceRangeLow": 2500,
		"AcceptanceRangeHigh": 3500,
		"ToleranceRangeHigh": 4000,
		"DeviationRangeHigh": 5000,
		"TransactionCurrency": "EUR",
		"MaximumCreditValue": 7000,
		"Delivered": 0
	},
	{
		"CustomerCreditForecast": 1800,
		"CustomerCreditExposureAmount": 1251,
		"CustomerCreditExposureAmountHidden": 500,
		"CustomerCreditExposureAmount_text": "Credit Exposure",
		"CustomerCreditLimitAmount": 4000,
		"CustomerCreditLimitAmount_text": "Credit Limit",
		"CustomerIsAboveThreshold": 3,
		"SalesDocument": "2917844",
		"DeviationRangeLow": 1000,
		"ToleranceRangeLow": 2000,
		"AcceptanceRangeLow": 2500,
		"AcceptanceRangeHigh": 3500,
		"ToleranceRangeHigh": 4000,
		"DeviationRangeHigh": 5000,
		"TransactionCurrency": "EUR",
		"MaximumCreditValue": 7000,
		"Delivered": 0
	},
	{
		"CustomerCreditForecast": 2100,
		"CustomerCreditExposureAmount": 2250,
		"CustomerCreditExposureAmountHidden": 2600,
		"CustomerCreditExposureAmount_text": "Credit Exposure",
		"CustomerCreditLimitAmount": 4000,
		"CustomerCreditLimitAmount_text": "Credit Limit",
		"CustomerIsAboveThreshold": 1,
		"SalesDocument": "2919431",
		"DeviationRangeLow": 1000,
		"ToleranceRangeLow": 2000,
		"AcceptanceRangeLow": 2500,
		"AcceptanceRangeHigh": 3500,
		"ToleranceRangeHigh": 4000,
		"DeviationRangeHigh": 5000,
		"TransactionCurrency": "EUR",
		"MaximumCreditValue": 7000,
		"Delivered": 0
	},
	{
		"CustomerCreditForecast": 1800,
		"CustomerCreditExposureAmount": 1251,
		"CustomerCreditExposureAmountHidden": 2200,
		"CustomerCreditExposureAmount_text": "Credit Exposure",
		"CustomerCreditLimitAmount": 4000,
		"CustomerCreditLimitAmount_text": "Credit Limit",
		"CustomerIsAboveThreshold": 3,
		"SalesDocument": "2922872",
		"DeviationRangeLow": 1000,
		"ToleranceRangeLow": 2000,
		"AcceptanceRangeLow": 2500,
		"AcceptanceRangeHigh": 3500,
		"ToleranceRangeHigh": 4000,
		"DeviationRangeHigh": 5000,
		"TransactionCurrency": "EUR",
		"MaximumCreditValue": 7000,
		"Delivered": 0
	},
	{
		"CustomerCreditForecast": 2100,
		"CustomerCreditExposureAmount": 2250,
		"CustomerCreditExposureAmountHidden": 2500,
		"CustomerCreditExposureAmount_text": "Credit Exposure",
		"CustomerCreditLimitAmount": 4000,
		"CustomerCreditLimitAmount_text": "Credit Limit",
		"CustomerIsAboveThreshold": 1,
		"SalesDocument": "2922873",
		"DeviationRangeLow": 1000,
		"ToleranceRangeLow": 2000,
		"AcceptanceRangeLow": 2500,
		"AcceptanceRangeHigh": 3500,
		"ToleranceRangeHigh": 4000,
		"DeviationRangeHigh": 5000,
		"TransactionCurrency": "EUR",
		"MaximumCreditValue": 7000,
		"Delivered": 0
	}
]

```

--------------------------------

**TITLE**: Micro Chart Dynamic Size

**INTRODUCTION**: The MicroChart building block enables you to render micro charts in different sizes.

**TAGS**: micro chart, dynamic size, responsive, harvey ball, bullet chart, radial chart, column chart, area chart, line chart, stacked bar chart, comparison chart

**STEP**: Implementation

**DESCRIPTION**: To define the size of the micro chart, you can use the 'size' property of the micro chart building block. Valid sizes are 'XS', 'S', 'M', and 'L'.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<VBox class="sapUiMediumMargin">
		<Panel headerText="Small">
			<HBox justifyContent="SpaceAround" class="sapUiLargeMarginBottom">
				<HBox binding="{path:'/RootEntity(\'4\')'}" class="sapUiTinyMarginEnd">
					<macros:MicroChart
						id="harveyball"
						metaPath="@com.sap.vocabularies.UI.v1.Chart#HarveyBallCriticalityPath"
						contextPath="/RootEntity/_CreditLimitDetails"
						batchGroupId="$auto.abc"
						size="S"
					/>
				</HBox>
				<HBox binding="{path:'/RootEntity(\'2\')'}" class="sapUiTinyMarginBegin sapUiTinyMarginEnd">
					<macros:MicroChart
						id="bullet"
						metaPath="@com.sap.vocabularies.UI.v1.Chart#CreditLimitChart"
						contextPath="/RootEntity/_CreditLimitDetails"
						batchGroupId="$auto.abc"
						size="S"
					/>
				</HBox>
				<HBox binding="{path:'/RootEntity(\'8\')'}" class="sapUiTinyMarginBegin sapUiTinyMarginEnd">
					<macros:MicroChart
						id="radial"
						metaPath="@com.sap.vocabularies.UI.v1.Chart#RadialCriticalityPath"
						contextPath="/RootEntity/_CreditLimitDetails"
						batchGroupId="$auto.abc"
						size="S"
					/>
				</HBox>
			</HBox>
		</Panel>
		<Panel headerText="Medium">
			<HBox justifyContent="SpaceAround" class="sapUiLargeMarginBottom sapUiLargeMarginTop">
				<HBox binding="{path:'/RootEntity(\'1\')'}" class="sapUiTinyMarginEnd">
					<macros:MicroChart
						id="column"
						metaPath="@com.sap.vocabularies.UI.v1.Chart#ColumnMaxPath"
						contextPath="/RootEntity/_Item"
						batchGroupId="$auto.abc"
						size="M"
					/>
				</HBox>
				<HBox binding="{path:'/RootEntity(\'1\')'}" class="sapUiTinyMarginBegin sapUiTinyMarginEnd">
					<macros:MicroChart
						id="areastring"
						metaPath="@com.sap.vocabularies.UI.v1.Chart#AreaMaxPathString"
						contextPath="/RootEntity/_Item"
						batchGroupId="$auto.def"
						size="M"
					/>
				</HBox>
				<HBox binding="{path:'/RootEntity(\'1\')'}" class="sapUiTinyMarginBegin sapUiTinyMarginEnd">
					<macros:MicroChart
						id="line"
						metaPath="@com.sap.vocabularies.UI.v1.Chart#LineMaxPath"
						contextPath="/RootEntity/_Item"
						batchGroupId="$auto.def"
						size="M"
					/>
				</HBox>
			</HBox>
		</Panel>
		<Panel headerText="Large">
			<HBox justifyContent="SpaceAround" class="sapUiLargeMarginBottom sapUiLargeMarginTop">
				<HBox binding="{path:'/RootEntity(\'2\')'}" class="sapUiTinyMarginEnd">
					<macros:MicroChart
						id="bar"
						metaPath="@com.sap.vocabularies.UI.v1.Chart#BarStackedPath"
						contextPath="/RootEntity/_Item"
						batchGroupId="$auto.abc"
						size="L"
					/>
				</HBox>
				<HBox binding="{path:'/RootEntity(\'1\')'}" class="sapUiTinyMarginBegin sapUiTinyMarginEnd">
					<macros:MicroChart
						id="comparison"
						metaPath="@com.sap.vocabularies.UI.v1.Chart#ComparisonPath"
						contextPath="/RootEntity/_Item"
						batchGroupId="$auto.abc"
						size="L"
					/>
				</HBox>
			</HBox>
		</Panel>
	</VBox>
</core:FragmentDefinition>
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: Sample.fragment.xml

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<VBox class="sapUiMediumMargin">
		<Panel headerText="Small">
			<HBox justifyContent="SpaceAround" class="sapUiLargeMarginBottom">
				<HBox binding="{path:'/RootEntity(\'4\')'}" class="sapUiTinyMarginEnd">
					<macros:MicroChart
						id="harveyball"
						metaPath="@com.sap.vocabularies.UI.v1.Chart#HarveyBallCriticalityPath"
						contextPath="/RootEntity/_CreditLimitDetails"
						batchGroupId="$auto.abc"
						size="S"
					/>
				</HBox>
				<HBox binding="{path:'/RootEntity(\'2\')'}" class="sapUiTinyMarginBegin sapUiTinyMarginEnd">
					<macros:MicroChart
						id="bullet"
						metaPath="@com.sap.vocabularies.UI.v1.Chart#CreditLimitChart"
						contextPath="/RootEntity/_CreditLimitDetails"
						batchGroupId="$auto.abc"
						size="S"
					/>
				</HBox>
				<HBox binding="{path:'/RootEntity(\'8\')'}" class="sapUiTinyMarginBegin sapUiTinyMarginEnd">
					<macros:MicroChart
						id="radial"
						metaPath="@com.sap.vocabularies.UI.v1.Chart#RadialCriticalityPath"
						contextPath="/RootEntity/_CreditLimitDetails"
						batchGroupId="$auto.abc"
						size="S"
					/>
				</HBox>
			</HBox>
		</Panel>
		<Panel headerText="Medium">
			<HBox justifyContent="SpaceAround" class="sapUiLargeMarginBottom sapUiLargeMarginTop">
				<HBox binding="{path:'/RootEntity(\'1\')'}" class="sapUiTinyMarginEnd">
					<macros:MicroChart
						id="column"
						metaPath="@com.sap.vocabularies.UI.v1.Chart#ColumnMaxPath"
						contextPath="/RootEntity/_Item"
						batchGroupId="$auto.abc"
						size="M"
					/>
				</HBox>
				<HBox binding="{path:'/RootEntity(\'1\')'}" class="sapUiTinyMarginBegin sapUiTinyMarginEnd">
					<macros:MicroChart
						id="areastring"
						metaPath="@com.sap.vocabularies.UI.v1.Chart#AreaMaxPathString"
						contextPath="/RootEntity/_Item"
						batchGroupId="$auto.def"
						size="M"
					/>
				</HBox>
				<HBox binding="{path:'/RootEntity(\'1\')'}" class="sapUiTinyMarginBegin sapUiTinyMarginEnd">
					<macros:MicroChart
						id="line"
						metaPath="@com.sap.vocabularies.UI.v1.Chart#LineMaxPath"
						contextPath="/RootEntity/_Item"
						batchGroupId="$auto.def"
						size="M"
					/>
				</HBox>
			</HBox>
		</Panel>
		<Panel headerText="Large">
			<HBox justifyContent="SpaceAround" class="sapUiLargeMarginBottom sapUiLargeMarginTop">
				<HBox binding="{path:'/RootEntity(\'2\')'}" class="sapUiTinyMarginEnd">
					<macros:MicroChart
						id="bar"
						metaPath="@com.sap.vocabularies.UI.v1.Chart#BarStackedPath"
						contextPath="/RootEntity/_Item"
						batchGroupId="$auto.abc"
						size="L"
					/>
				</HBox>
				<HBox binding="{path:'/RootEntity(\'1\')'}" class="sapUiTinyMarginBegin sapUiTinyMarginEnd">
					<macros:MicroChart
						id="comparison"
						metaPath="@com.sap.vocabularies.UI.v1.Chart#ComparisonPath"
						contextPath="/RootEntity/_Item"
						batchGroupId="$auto.abc"
						size="L"
					/>
				</HBox>
			</HBox>
		</Panel>
	</VBox>
</core:FragmentDefinition>

```

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
service Service {
  entity RootEntity {
    key ID                  : String(2);
        SalesOrder          : String(10) not null @(
          title: 'Sales Order No.',
          Core.Computed
        );
        _Item               : Composition of many ChildEntity
                                on _Item.Parent = $self;
        _CreditLimitDetails : Association to CreditLimitDetails
                                on _CreditLimitDetails.SalesDocument = SalesOrder;
  }

  entity ChildEntity {
    key ID                   : String(2)           @(
          title        : 'Sales Order Item UUID',
          PersonalData : {IsPotentiallySensitive: true},
          Core.Computed: true
        );
        NetAmount            : Decimal(15, 2)      @(
          Analytics           : {Measure: true},
          Measures.ISOCurrency: TransactionCurrency,
          Core.Immutable      : true
        );
        SalesOrder           : String(10) not null @(
          title: 'Sales Order No.',
          Core.Computed
        );
        SalesOrderItem       : String(1) not null  @(
          title: 'Item',
          Core.Computed
        );
        SalesOrderItemNumber : Integer;
        OrderNumber          : String(2);
        OrderYear            : String(4)           @(Common.IsCalendarYear: true);
        OrderDate            : Date;
        TransactionCurrency  : String(5);
        NetAmount_text       : String(10);
        TargetAmount         : Decimal(15, 2)      @(
          UI                  : {ExcludeFromNavigationContext: true},
          Measures.ISOCurrency: TransactionCurrency,
          Core.Immutable      : true,
          Common              : {Label: 'Target Value'}
        );
        Criticality          : Integer;
        ToleranceRangeLow    : Decimal(23, 0);
        ToleranceRangeHigh   : Decimal(23, 0);
        DeviationRangeLow    : Decimal(23, 0);
        DeviationRangeHigh   : Decimal(23, 0);
        AcceptanceRangeLow   : Decimal(23, 0);
        AcceptanceRangeHigh  : Decimal(23, 0);
        Parent               : Association to RootEntity;
  }

  annotate ChildEntity with @(UI: {
    Chart #ColumnMaxPath            : {
      $Type            : 'UI.ChartDefinitionType',
      Title            : 'Items Column Chart',
      Description      : 'Column MicroChart',
      ChartType        : #Column,
      Measures         : [NetAmount],
      Dimensions       : [SalesOrderItem],
      MeasureAttributes: [{
        $Type    : 'UI.ChartMeasureAttributeType',
        Measure  : NetAmount,
        Role     : #Axis1,
        DataPoint: '@UI.DataPoint#ColumnMaxPath'
      }]
    },
    DataPoint #ColumnMaxPath        : {
      Value                 : NetAmount,
      Title                 : 'Data',
      Description           : 'Column Micro Chart',
      Criticality           : Criticality,
      CriticalityCalculation: {
        ImprovementDirection    : #Maximize,
        DeviationRangeLowValue  : DeviationRangeLow,
        ToleranceRangeLowValue  : ToleranceRangeLow,
        AcceptanceRangeLowValue : AcceptanceRangeLow,
        AcceptanceRangeHighValue: AcceptanceRangeHigh,
        ToleranceRangeHighValue : ToleranceRangeHigh,
        DeviationRangeHighValue : DeviationRangeHigh
      }
    },
    Chart #AreaMaxPath              : {
      $Type            : 'UI.ChartDefinitionType',
      Title            : 'Items Area Chart',
      Description      : 'Area MicroChart',
      ChartType        : #Area,
      Measures         : [NetAmount],
      Dimensions       : [SalesOrderItemNumber],
      MeasureAttributes: [{
        $Type    : 'UI.ChartMeasureAttributeType',
        Measure  : NetAmount,
        Role     : #Axis1,
        DataPoint: '@UI.DataPoint#AreaMaxPath'
      }]
    },
    DataPoint #AreaMaxPath          : {
      Value                 : NetAmount,
      Title                 : 'Data',
      Description           : 'Area Micro Chart',
      TargetValue           : TargetAmount,
      CriticalityCalculation: {
        ImprovementDirection    : #Target,
        DeviationRangeLowValue  : DeviationRangeLow,
        ToleranceRangeLowValue  : ToleranceRangeLow,
        AcceptanceRangeLowValue : AcceptanceRangeLow,
        AcceptanceRangeHighValue: AcceptanceRangeHigh,
        ToleranceRangeHighValue : ToleranceRangeHigh,
        DeviationRangeHighValue : DeviationRangeHigh
      }
    },
    Chart #AreaMaxPathString        : {
      $Type            : 'UI.ChartDefinitionType',
      Title            : 'Items Area Chart (string)',
      Description      : 'Area MicroChart',
      ChartType        : #Area,
      Measures         : [NetAmount],
      Dimensions       : [OrderYear],
      MeasureAttributes: [{
        $Type    : 'UI.ChartMeasureAttributeType',
        Measure  : NetAmount,
        Role     : #Axis1,
        DataPoint: '@UI.DataPoint#AreaMaxPathString'
      }]
    },
    DataPoint #AreaMaxPathString    : {
      Value                 : NetAmount,
      Title                 : 'Data',
      Description           : 'Area Micro Chart',
      TargetValue           : TargetAmount,
      CriticalityCalculation: {
        ImprovementDirection    : #Target,
        DeviationRangeLowValue  : DeviationRangeLow,
        ToleranceRangeLowValue  : ToleranceRangeLow,
        AcceptanceRangeLowValue : AcceptanceRangeLow,
        AcceptanceRangeHighValue: AcceptanceRangeHigh,
        ToleranceRangeHighValue : ToleranceRangeHigh,
        DeviationRangeHighValue : DeviationRangeHigh
      }
    },
    Chart #LineMaxPath              : {
      $Type            : 'UI.ChartDefinitionType',
      Title            : 'Items Line Chart',
      Description      : 'Line MicroChart',
      ChartType        : #Line,
      Measures         : [
        NetAmount,
        TargetAmount
      ],
      Dimensions       : [SalesOrderItemNumber],
      MeasureAttributes: [
        {
          $Type    : 'UI.ChartMeasureAttributeType',
          Measure  : NetAmount,
          Role     : #Axis1,
          DataPoint: '@UI.DataPoint#LineValueCriticality'
        },
        {
          $Type    : 'UI.ChartMeasureAttributeType',
          Measure  : TargetAmount,
          Role     : #Axis1,
          DataPoint: '@UI.DataPoint#LineTargetCriticality'
        }
      ]
    },
    DataPoint #LineValueCriticality : {
      Value      : NetAmount,
      Title      : 'Net Amount',
      Description: 'Net Amount Line',
      Criticality: #Positive
    },
    DataPoint #LineTargetCriticality: {
      Value      : TargetAmount,
      Title      : 'Target Amount',
      Description: 'Target Amount Line',
      Criticality: #Neutral
    },
    Chart #BarStackedPath           : {
      $Type            : 'UI.ChartDefinitionType',
      Title            : 'Items Stacked Bar Chart',
      Description      : 'Stacked Bar MicroChart',
      ChartType        : #BarStacked,
      Measures         : [NetAmount],
      MeasureAttributes: [{
        $Type    : 'UI.ChartMeasureAttributeType',
        Measure  : NetAmount,
        Role     : #Axis1,
        DataPoint: '@UI.DataPoint#BarStackedPath'
      }]
    },
    DataPoint #BarStackedPath       : {
      Value      : NetAmount,
      Title      : 'Net Amount',
      Criticality: Criticality,
    },
    Chart #RadialChart              : {
      $Type            : 'UI.ChartDefinitionType',
      Title            : 'MicroChart',
      ChartType        : #Bullet,
      Measures         : [NetAmount],
      Dimensions       : [SalesOrderItem],
      MeasureAttributes: [{
        $Type    : 'UI.ChartMeasureAttributeType',
        Measure  : NetAmount,
        Role     : #Axis1,
        DataPoint: '@UI.DataPoint#RadialPath'
      }]
    },
    DataPoint #RadialPath           : {
      Value      : NetAmount,
      Title      : 'Net Amount',
      Criticality: Criticality,
    },
    Chart #ComparisonPath           : {
      $Type            : 'UI.ChartDefinitionType',
      Title            : 'Items Comparison Chart',
      Description      : 'Comparison MicroChart',
      ChartType        : #Bar,
      Measures         : [NetAmount],
      Dimensions       : [SalesOrderItem],
      MeasureAttributes: [{
        $Type    : 'UI.ChartMeasureAttributeType',
        Measure  : NetAmount,
        Role     : #Axis1,
        DataPoint: '@UI.DataPoint#ComparisonPath'
      }]
    },
    DataPoint #ComparisonPath       : {
      Value      : NetAmount,
      Title      : 'Net Amount',
      Criticality: Criticality,
    }
  });

  entity CreditLimitDetails                                 @(title: 'Bullet Chart') {
    key SalesDocument                      : String(10);
        CustomerCreditExposureAmount       : Decimal(23, 2) @(Measures.ISOCurrency: TransactionCurrency, );
        Delivered                          : Boolean        @(title: 'Delivery Status');
        CustomerCreditExposureAmountHidden : Decimal(23, 2) @(
          Measures.ISOCurrency: TransactionCurrency,
          UI.Hidden           : Delivered
        );
        CustomerCreditForecast             : Decimal(23, 2) @(Measures.ISOCurrency: TransactionCurrency, );
        CustomerCreditExposureAmount_text  : String(15);
        CustomerCreditLimitAmount          : Decimal(23, 2) @(Measures.ISOCurrency: TransactionCurrency, );
        MaximumCreditValue                 : Decimal(23, 2);
        CustomerCreditLimitAmount_text     : String(15);
        TransactionCurrency                : String(5);
        CustomerIsAboveThreshold           : Integer;
        ToleranceRangeLow                  : Decimal(23, 2);
        ToleranceRangeHigh                 : Decimal(23, 2);
        DeviationRangeLow                  : Decimal(23, 2);
        DeviationRangeHigh                 : Decimal(23, 2);
        AcceptanceRangeLow                 : Decimal(23, 2);
        AcceptanceRangeHigh                : Decimal(23, 2);
  }

  annotate CreditLimitDetails with @(UI: {
    Chart #CreditLimitChart                : {
      $Type            : 'UI.ChartDefinitionType',
      Title            : 'Credit Limit Bullet',
      Description      : 'Bullet MicroChart',
      ChartType        : #Bullet,
      Measures         : [CustomerCreditExposureAmount],
      MeasureAttributes: [{
        $Type    : 'UI.ChartMeasureAttributeType',
        Measure  : CustomerCreditExposureAmount,
        Role     : #Axis1,
        DataPoint: '@UI.DataPoint#CustomerCreditExposureAmount'
      }]
    },
    DataPoint #CustomerCreditExposureAmount: {
      Value                 : CustomerCreditExposureAmount,
      Title                 : 'Exposure Amount',
      Description           : 'Bullet Micro Chart',
      TargetValue           : CustomerCreditLimitAmount,
      ForecastValue         : CustomerCreditForecast,
      MaximumValue          : 7000,
      MinimumValue          : 200,
      Criticality           : CustomerIsAboveThreshold,
      CriticalityCalculation: {
        ImprovementDirection    : #Maximize,
        DeviationRangeLowValue  : DeviationRangeLow,
        ToleranceRangeLowValue  : ToleranceRangeLow,
        AcceptanceRangeLowValue : AcceptanceRangeLow,
        AcceptanceRangeHighValue: AcceptanceRangeHigh,
        ToleranceRangeHighValue : ToleranceRangeHigh,
        DeviationRangeHighValue : DeviationRangeHigh
      }
    },
    Chart #HarveyBallCriticalityPath       : {
      $Type            : 'UI.ChartDefinitionType',
      Title            : 'Credit Limit HarveyBall',
      Description      : 'HarveyBall MicroChart',
      ChartType        : #Pie,
      Measures         : [CustomerCreditExposureAmount],
      MeasureAttributes: [{
        $Type    : 'UI.ChartMeasureAttributeType',
        Measure  : CustomerCreditExposureAmount,
        Role     : #Axis1,
        DataPoint: '@UI.DataPoint#HarveyBallValuePath'
      }]
    },
    DataPoint #HarveyBallValuePath         : {
      Value       : CustomerCreditExposureAmount,
      MaximumValue: CustomerCreditLimitAmount,
      Criticality : CustomerIsAboveThreshold
    },
    Chart #RadialCriticalityPath           : {
      $Type            : 'UI.ChartDefinitionType',
      Title            : 'Credit Limit Radial',
      Description      : 'Radial MicroChart',
      ChartType        : #Donut,
      Measures         : [CustomerCreditExposureAmount],
      MeasureAttributes: [{
        $Type    : 'UI.ChartMeasureAttributeType',
        Measure  : CustomerCreditExposureAmount,
        Role     : #Axis1,
        DataPoint: '@UI.DataPoint#RadialValuePath'
      }]
    },
    DataPoint #RadialValuePath             : {
      Value      : CustomerCreditExposureAmount,
      TargetValue: CustomerCreditLimitAmount,
      Criticality: CustomerIsAboveThreshold
    }
  });
}

```

**FILE**: RootEntity.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"ID": "1",
		"SalesOrder": "2919682"
	},
	{
		"ID": "2",
		"SalesOrder": "2922870"
	},
	{
		"ID": "3",
		"SalesOrder": "6437"
	},
	{
		"ID": "4",
		"SalesOrder": "2915717"
	},
	{
		"ID": "5",
		"SalesOrder": "2916499"
	},
	{
		"ID": "6",
		"SalesOrder": "2916639"
	},
	{
		"ID": "7",
		"SalesOrder": "2917844"
	},
	{
		"ID": "8",
		"SalesOrder": "2919431"
	}
]

```

**FILE**: ChildEntity.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"ID": "1",
		"Parent_ID": "3",
		"SalesOrder": "6437",
		"SalesOrderItem": "A",
		"SalesOrderItemNumber": 40,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "3",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0",
		"OrderDate": "2022-05-18",
		"OrderNumber": "40",
		"OrderYear": "1990"
	},
	{
		"ID": "2",
		"Parent_ID": "4",
		"SalesOrder": "2915717",
		"SalesOrderItem": "A",
		"SalesOrderItemNumber": 40,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "4",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0",
		"OrderDate": "2022-05-19",
		"OrderNumber": "50",
		"OrderYear": "1991"
	},
	{
		"ID": "3",
		"Parent_ID": "4",
		"SalesOrder": "2915717",
		"SalesOrderItem": "D",
		"SalesOrderItemNumber": 70,
		"NetAmount": 10,
		"owner_ID": "4",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0",
		"OrderDate": "2022-05-20",
		"OrderNumber": "40",
		"OrderYear": "1992"
	},
	{
		"ID": "4",
		"Parent_ID": "4",
		"SalesOrder": "2915717",
		"SalesOrderItem": "C",
		"SalesOrderItemNumber": 60,
		"TransactionCurrency": "EUR",
		"NetAmount": 20,
		"owner_ID": "4",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0",
		"OrderDate": "2022-05-21",
		"OrderNumber": "40",
		"OrderYear": "1993"
	},
	{
		"ID": "5",
		"Parent_ID": "4",
		"SalesOrder": "2915717",
		"SalesOrderItem": "B",
		"SalesOrderItemNumber": 50,
		"TransactionCurrency": "EUR",
		"NetAmount": 30,
		"owner_ID": "4",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0",
		"OrderDate": "2022-05-22",
		"OrderNumber": "50",
		"OrderYear": "1994"
	},
	{
		"ID": "6",
		"Parent_ID": "4",
		"SalesOrder": "2915717",
		"SalesOrderItem": "E",
		"SalesOrderItemNumber": 80,
		"TransactionCurrency": "EUR",
		"NetAmount": 50,
		"owner_ID": "4",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0",
		"OrderDate": "2022-05-23",
		"OrderNumber": "70",
		"OrderYear": "1995"
	},
	{
		"ID": "7",
		"Parent_ID": "4",
		"SalesOrder": "2915717",
		"SalesOrderItem": "Z",
		"SalesOrderItemNumber": 30,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "4",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0",
		"OrderDate": "2022-05-24",
		"OrderNumber": "80",
		"OrderYear": "1996"
	},
	{
		"ID": "8",
		"Parent_ID": "4",
		"SalesOrder": "2915717",
		"SalesOrderItem": "Y",
		"SalesOrderItemNumber": 20,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "4",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0",
		"OrderDate": "2022-05-25",
		"OrderNumber": "70",
		"OrderYear": "1997"
	},
	{
		"ID": "9",
		"Parent_ID": "4",
		"SalesOrder": "2915717",
		"SalesOrderItem": "X",
		"SalesOrderItemNumber": 10,
		"TransactionCurrency": "EUR",
		"NetAmount": 30,
		"owner_ID": "4",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0",
		"OrderDate": "2022-05-26",
		"OrderNumber": "60",
		"OrderYear": "1998"
	},
	{
		"ID": "10",
		"Parent_ID": "5",
		"SalesOrder": "2916499",
		"SalesOrderItem": "A",
		"SalesOrderItemNumber": 40,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "5",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 1,
		"NetAmount_text": "0",
		"OrderDate": "2022-05-27",
		"OrderNumber": "60",
		"OrderYear": "1999"
	},
	{
		"ID": "11",
		"Parent_ID": "5",
		"SalesOrder": "2916499",
		"SalesOrderItem": "D",
		"SalesOrderItemNumber": 70,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "5",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 2,
		"NetAmount_text": "0",
		"OrderDate": "2022-05-28",
		"OrderNumber": "70",
		"OrderYear": "2000"
	},
	{
		"ID": "12",
		"Parent_ID": "5",
		"SalesOrder": "2916499",
		"SalesOrderItem": "C",
		"SalesOrderItemNumber": 60,
		"TransactionCurrency": "EUR",
		"NetAmount": 20,
		"owner_ID": "5",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 1,
		"NetAmount_text": "0",
		"OrderDate": "2022-05-29",
		"OrderNumber": "80",
		"OrderYear": "2001"
	},
	{
		"ID": "13",
		"Parent_ID": "5",
		"SalesOrder": "2916499",
		"SalesOrderItem": "B",
		"SalesOrderItemNumber": 50,
		"TransactionCurrency": "EUR",
		"NetAmount": 30,
		"owner_ID": "5",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 3,
		"NetAmount_text": "0",
		"OrderDate": "2022-05-30",
		"OrderNumber": "50",
		"OrderYear": "2002"
	},
	{
		"ID": "14",
		"Parent_ID": "5",
		"SalesOrder": "2916499",
		"SalesOrderItem": "E",
		"SalesOrderItemNumber": 80,
		"TransactionCurrency": "EUR",
		"NetAmount": 50,
		"owner_ID": "5",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 3,
		"NetAmount_text": "0",
		"OrderDate": "2022-05-31",
		"OrderNumber": "60",
		"OrderYear": "2003"
	},
	{
		"ID": "15",
		"Parent_ID": "5",
		"SalesOrder": "2916499",
		"SalesOrderItem": "Z",
		"SalesOrderItemNumber": 30,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "5",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 2,
		"NetAmount_text": "0",
		"OrderDate": "2022-06-01",
		"OrderNumber": "70",
		"OrderYear": "2004"
	},
	{
		"ID": "16",
		"Parent_ID": "5",
		"SalesOrder": "2916499",
		"SalesOrderItem": "Y",
		"SalesOrderItemNumber": 20,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "5",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 2,
		"NetAmount_text": "0",
		"OrderDate": "2022-06-02",
		"OrderNumber": "70",
		"OrderYear": "2005"
	},
	{
		"ID": "17",
		"Parent_ID": "5",
		"SalesOrder": "2916499",
		"SalesOrderItem": "X",
		"SalesOrderItemNumber": 10,
		"TransactionCurrency": "EUR",
		"NetAmount": 30,
		"owner_ID": "5",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 1,
		"NetAmount_text": "0",
		"OrderDate": "2022-06-03",
		"OrderNumber": "60",
		"OrderYear": "2006"
	},
	{
		"ID": "18",
		"Parent_ID": "6",
		"SalesOrder": "2916639",
		"SalesOrderItem": "A",
		"SalesOrderItemNumber": 40,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "6",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0",
		"OrderDate": "2022-06-04",
		"OrderNumber": "50",
		"OrderYear": "2007"
	},
	{
		"ID": "19",
		"Parent_ID": "6",
		"SalesOrder": "2916639",
		"SalesOrderItem": "D",
		"SalesOrderItemNumber": 70,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "6",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0",
		"OrderDate": "2022-06-05",
		"OrderNumber": "50",
		"OrderYear": "2008"
	},
	{
		"ID": "20",
		"Parent_ID": "7",
		"SalesOrder": "2917844",
		"SalesOrderItem": "A",
		"SalesOrderItemNumber": 40,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "7",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0",
		"OrderDate": "2022-06-06",
		"OrderNumber": "40",
		"OrderYear": "2009"
	},
	{
		"ID": "21",
		"Parent_ID": "7",
		"SalesOrder": "2917844",
		"SalesOrderItem": "D",
		"SalesOrderItemNumber": 70,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "7",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0",
		"OrderDate": "2022-06-07",
		"OrderNumber": "80",
		"OrderYear": "2010"
	},
	{
		"ID": "22",
		"Parent_ID": "7",
		"SalesOrder": "2917844",
		"SalesOrderItem": "C",
		"SalesOrderItemNumber": 60,
		"TransactionCurrency": "EUR",
		"NetAmount": 20,
		"owner_ID": "7",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0",
		"OrderDate": "2022-06-08",
		"OrderNumber": "80",
		"OrderYear": "2011"
	},
	{
		"ID": "22",
		"Parent_ID": "7",
		"SalesOrder": "2917844",
		"SalesOrderItem": "B",
		"SalesOrderItemNumber": 50,
		"TransactionCurrency": "EUR",
		"NetAmount": 30,
		"owner_ID": "7",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0",
		"OrderDate": "2022-06-09",
		"OrderNumber": "90",
		"OrderYear": "2012"
	},
	{
		"ID": "23",
		"Parent_ID": "7",
		"SalesOrder": "2917844",
		"SalesOrderItem": "E",
		"SalesOrderItemNumber": 80,
		"TransactionCurrency": "EUR",
		"NetAmount": 50,
		"owner_ID": "7",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0",
		"OrderDate": "2022-06-10",
		"OrderNumber": "90",
		"OrderYear": "2013"
	},
	{
		"ID": "24",
		"Parent_ID": "7",
		"SalesOrder": "2917844",
		"SalesOrderItem": "Z",
		"SalesOrderItemNumber": 30,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "7",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0",
		"OrderDate": "2022-06-11",
		"OrderNumber": "80",
		"OrderYear": "2014"
	},
	{
		"ID": "25",
		"Parent_ID": "8",
		"SalesOrder": "2919431",
		"SalesOrderItem": "A",
		"SalesOrderItemNumber": 40,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "8",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0",
		"OrderDate": "2022-06-12",
		"OrderNumber": "90",
		"OrderYear": "2015"
	},
	{
		"ID": "26",
		"Parent_ID": "8",
		"SalesOrder": "2919431",
		"SalesOrderItem": "D",
		"SalesOrderItemNumber": 70,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "8",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0",
		"OrderDate": "2022-06-13",
		"OrderNumber": "90",
		"OrderYear": "2016"
	},
	{
		"ID": "27",
		"Parent_ID": "8",
		"SalesOrder": "2919431",
		"SalesOrderItem": "C",
		"SalesOrderItemNumber": 60,
		"TransactionCurrency": "EUR",
		"NetAmount": 20,
		"owner_ID": "8",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0",
		"OrderDate": "2022-06-14",
		"OrderNumber": "40",
		"OrderYear": "2017"
	},
	{
		"ID": "28",
		"Parent_ID": "8",
		"SalesOrder": "2919431",
		"SalesOrderItem": "Y",
		"SalesOrderItemNumber": 20,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "8",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0",
		"OrderDate": "2022-06-15",
		"OrderNumber": "70",
		"OrderYear": "2018"
	},
	{
		"ID": "29",
		"Parent_ID": "8",
		"SalesOrder": "2919431",
		"SalesOrderItem": "X",
		"SalesOrderItemNumber": 10,
		"TransactionCurrency": "EUR",
		"NetAmount": 30,
		"owner_ID": "8",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0",
		"OrderDate": "2022-06-16",
		"OrderNumber": "60",
		"OrderYear": "2019"
	},
	{
		"ID": "30",
		"Parent_ID": "1",
		"SalesOrder": "2919682",
		"SalesOrderItem": "X",
		"SalesOrderItemNumber": 10,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "1",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 10,
		"AcceptanceRangeLow": 15,
		"AcceptanceRangeHigh": 20,
		"ToleranceRangeHigh": 30,
		"DeviationRangeHigh": 40,
		"TargetAmount": 0,
		"Criticality": 1,
		"NetAmount_text": "0",
		"OrderDate": "2022-06-17",
		"OrderNumber": "40",
		"OrderYear": "2020"
	},
	{
		"ID": "31",
		"Parent_ID": "1",
		"SalesOrder": "2919682",
		"SalesOrderItem": "A",
		"SalesOrderItemNumber": 40,
		"TransactionCurrency": "EUR",
		"NetAmount": 20,
		"owner_ID": "1",
		"DeviationRangeLow": 15,
		"ToleranceRangeLow": 25,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 35,
		"ToleranceRangeHigh": 45,
		"DeviationRangeHigh": 55,
		"TargetAmount": 35,
		"Criticality": 2,
		"NetAmount_text": "0",
		"OrderDate": "2022-06-18",
		"OrderNumber": "50",
		"OrderYear": "2021"
	},
	{
		"ID": "32",
		"Parent_ID": "1",
		"SalesOrder": "2919682",
		"SalesOrganization": "0001",
		"SalesOrderItem": "D",
		"SalesOrderItemNumber": 70,
		"TransactionCurrency": "EUR",
		"NetAmount": 50,
		"owner_ID": "1",
		"DeviationRangeLow": 30,
		"ToleranceRangeLow": 40,
		"AcceptanceRangeLow": 45,
		"AcceptanceRangeHigh": 50,
		"ToleranceRangeHigh": 60,
		"DeviationRangeHigh": 70,
		"TargetAmount": 70,
		"Criticality": 3,
		"NetAmount_text": "0",
		"OrderDate": "2022-06-19",
		"OrderNumber": "50",
		"OrderYear": "2022"
	},
	{
		"ID": "33",
		"Parent_ID": "2",
		"SalesOrder": "2922870",
		"SalesOrderItem": "F",
		"SalesOrderItemNumber": 90,
		"TransactionCurrency": "EUR",
		"NetAmount": 15,
		"owner_ID": "2",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 10,
		"AcceptanceRangeLow": 15,
		"AcceptanceRangeHigh": 20,
		"ToleranceRangeHigh": 30,
		"DeviationRangeHigh": 40,
		"TargetAmount": 0,
		"Criticality": 0,
		"NetAmount_text": "0",
		"OrderDate": "2022-06-20",
		"OrderNumber": "80",
		"OrderYear": "2022"
	},
	{
		"ID": "34",
		"Parent_ID": "2",
		"SalesOrder": "2922870",
		"SalesOrderItem": "B",
		"SalesOrderItemNumber": 50,
		"TransactionCurrency": "EUR",
		"NetAmount": 40,
		"owner_ID": "2",
		"DeviationRangeLow": 15,
		"ToleranceRangeLow": 25,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 35,
		"ToleranceRangeHigh": 45,
		"DeviationRangeHigh": 55,
		"TargetAmount": 35,
		"Criticality": 1,
		"NetAmount_text": "0",
		"OrderDate": "2022-06-21",
		"OrderNumber": "90",
		"OrderYear": "2023"
	},
	{
		"ID": "35",
		"Parent_ID": "2",
		"SalesOrder": "2922870",
		"SalesOrderItem": "D",
		"SalesOrderItemNumber": 70,
		"TransactionCurrency": "EUR",
		"NetAmount": 65,
		"owner_ID": "2",
		"DeviationRangeLow": 30,
		"ToleranceRangeLow": 40,
		"AcceptanceRangeLow": 45,
		"AcceptanceRangeHigh": 50,
		"ToleranceRangeHigh": 60,
		"DeviationRangeHigh": 70,
		"TargetAmount": 70,
		"Criticality": 2,
		"NetAmount_text": "0",
		"OrderDate": "2022-06-22",
		"OrderNumber": "30",
		"OrderYear": "2024"
	}
]

```

**FILE**: CreditLimitDetails.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"CustomerCreditForecast": 1800,
		"CustomerCreditExposureAmount": 1251,
		"CustomerCreditExposureAmountHidden": 2250,
		"CustomerCreditExposureAmount_text": "Credit Exposure",
		"CustomerCreditLimitAmount": 4000,
		"CustomerCreditLimitAmount_text": "Credit Limit",
		"CustomerIsAboveThreshold": 3,
		"SalesDocument": "2919682",
		"DeviationRangeLow": 1000,
		"ToleranceRangeLow": 2000,
		"AcceptanceRangeLow": 2500,
		"AcceptanceRangeHigh": 3500,
		"ToleranceRangeHigh": 4000,
		"DeviationRangeHigh": 5000,
		"TransactionCurrency": "EUR",
		"MaximumCreditValue": 7000,
		"Delivered": 0
	},
	{
		"CustomerCreditForecast": 2100,
		"CustomerCreditExposureAmount": 2250,
		"CustomerCreditExposureAmountHidden": 1000,
		"CustomerCreditExposureAmount_text": "Credit Exposure",
		"CustomerCreditLimitAmount": 4000,
		"CustomerCreditLimitAmount_text": "Credit Limit",
		"CustomerIsAboveThreshold": 1,
		"SalesDocument": "2922870",
		"DeviationRangeLow": 1000,
		"ToleranceRangeLow": 2000,
		"AcceptanceRangeLow": 2500,
		"AcceptanceRangeHigh": 3500,
		"ToleranceRangeHigh": 4000,
		"DeviationRangeHigh": 5000,
		"TransactionCurrency": "EUR",
		"MaximumCreditValue": 7000,
		"Delivered": 1
	},
	{
		"CustomerCreditForecast": 1800,
		"CustomerCreditExposureAmount": 1251,
		"CustomerCreditExposureAmountHidden": 4000,
		"CustomerCreditExposureAmount_text": "Credit Exposure",
		"CustomerCreditLimitAmount": 4000,
		"CustomerCreditLimitAmount_text": "Credit Limit",
		"CustomerIsAboveThreshold": 3,
		"SalesDocument": "2915717",
		"DeviationRangeLow": 1000,
		"ToleranceRangeLow": 2000,
		"AcceptanceRangeLow": 2500,
		"AcceptanceRangeHigh": 3500,
		"ToleranceRangeHigh": 4000,
		"DeviationRangeHigh": 5000,
		"TransactionCurrency": "EUR",
		"MaximumCreditValue": 7000,
		"Delivered": 0
	},
	{
		"CustomerCreditForecast": 2100,
		"CustomerCreditExposureAmount": 2250,
		"CustomerCreditExposureAmountHidden": 3500,
		"CustomerCreditExposureAmount_text": "Credit Exposure",
		"CustomerCreditLimitAmount": 4000,
		"CustomerCreditLimitAmount_text": "Credit Limit",
		"CustomerIsAboveThreshold": 1,
		"SalesDocument": "2916499",
		"DeviationRangeLow": 1000,
		"ToleranceRangeLow": 2000,
		"AcceptanceRangeLow": 2500,
		"AcceptanceRangeHigh": 3500,
		"ToleranceRangeHigh": 4000,
		"DeviationRangeHigh": 5000,
		"TransactionCurrency": "EUR",
		"MaximumCreditValue": 7000,
		"Delivered": 0
	},
	{
		"CustomerCreditForecast": 1800,
		"CustomerCreditExposureAmount": 1251,
		"CustomerCreditExposureAmountHidden": 500,
		"CustomerCreditExposureAmount_text": "Credit Exposure",
		"CustomerCreditLimitAmount": 4000,
		"CustomerCreditLimitAmount_text": "Credit Limit",
		"CustomerIsAboveThreshold": 3,
		"SalesDocument": "2917844",
		"DeviationRangeLow": 1000,
		"ToleranceRangeLow": 2000,
		"AcceptanceRangeLow": 2500,
		"AcceptanceRangeHigh": 3500,
		"ToleranceRangeHigh": 4000,
		"DeviationRangeHigh": 5000,
		"TransactionCurrency": "EUR",
		"MaximumCreditValue": 7000,
		"Delivered": 0
	},
	{
		"CustomerCreditForecast": 2100,
		"CustomerCreditExposureAmount": 2250,
		"CustomerCreditExposureAmountHidden": 2600,
		"CustomerCreditExposureAmount_text": "Credit Exposure",
		"CustomerCreditLimitAmount": 4000,
		"CustomerCreditLimitAmount_text": "Credit Limit",
		"CustomerIsAboveThreshold": 1,
		"SalesDocument": "2919431",
		"DeviationRangeLow": 1000,
		"ToleranceRangeLow": 2000,
		"AcceptanceRangeLow": 2500,
		"AcceptanceRangeHigh": 3500,
		"ToleranceRangeHigh": 4000,
		"DeviationRangeHigh": 5000,
		"TransactionCurrency": "EUR",
		"MaximumCreditValue": 7000,
		"Delivered": 0
	},
	{
		"CustomerCreditForecast": 1800,
		"CustomerCreditExposureAmount": 1251,
		"CustomerCreditExposureAmountHidden": 2200,
		"CustomerCreditExposureAmount_text": "Credit Exposure",
		"CustomerCreditLimitAmount": 4000,
		"CustomerCreditLimitAmount_text": "Credit Limit",
		"CustomerIsAboveThreshold": 3,
		"SalesDocument": "2922872",
		"DeviationRangeLow": 1000,
		"ToleranceRangeLow": 2000,
		"AcceptanceRangeLow": 2500,
		"AcceptanceRangeHigh": 3500,
		"ToleranceRangeHigh": 4000,
		"DeviationRangeHigh": 5000,
		"TransactionCurrency": "EUR",
		"MaximumCreditValue": 7000,
		"Delivered": 0
	},
	{
		"CustomerCreditForecast": 2100,
		"CustomerCreditExposureAmount": 2250,
		"CustomerCreditExposureAmountHidden": 2500,
		"CustomerCreditExposureAmount_text": "Credit Exposure",
		"CustomerCreditLimitAmount": 4000,
		"CustomerCreditLimitAmount_text": "Credit Limit",
		"CustomerIsAboveThreshold": 1,
		"SalesDocument": "2922873",
		"DeviationRangeLow": 1000,
		"ToleranceRangeLow": 2000,
		"AcceptanceRangeLow": 2500,
		"AcceptanceRangeHigh": 3500,
		"ToleranceRangeHigh": 4000,
		"DeviationRangeHigh": 5000,
		"TransactionCurrency": "EUR",
		"MaximumCreditValue": 7000,
		"Delivered": 0
	}
]

```

--------------------------------

**TITLE**: Show Only Chart

**INTRODUCTION**: The MicroChart building block enables you to render micro charts without additional information.

**TAGS**: micro chart, show only chart, minimal, harvey ball, bullet chart, radial chart, column chart, area chart, line chart, stacked bar chart, comparison chart

**STEP**: Implementation

**DESCRIPTION**: To show only the chart without additional information, you can set the 'showOnlyChart' property to true in the micro chart building block.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<VBox class="sapUiMediumMargin">
		<Panel headerText="Default">
			<HBox justifyContent="SpaceAround" class="sapUiLargeMarginBottom">
				<HBox binding="{path:'/RootEntity(\'8\')'}" class="sapUiTinyMarginEnd">
					<macros:MicroChart
						id="harveyball"
						metaPath="@com.sap.vocabularies.UI.v1.Chart#HarveyBallCriticalityPath"
						contextPath="/RootEntity/_CreditLimitDetails"
						batchGroupId="$auto.abc"
						showOnlyChart="false"
					/>
				</HBox>
				<HBox binding="{path:'/RootEntity(\'1\')'}" class="sapUiTinyMarginBegin sapUiTinyMarginEnd">
					<macros:MicroChart
						id="bullet"
						metaPath="@com.sap.vocabularies.UI.v1.Chart#CreditLimitChart"
						contextPath="/RootEntity/_CreditLimitDetails"
						batchGroupId="$auto.abc"
						showOnlyChart="false"
					/>
				</HBox>
				<HBox binding="{path:'/RootEntity(\'4\')'}" class="sapUiTinyMarginBegin sapUiTinyMarginEnd">
					<macros:MicroChart
						id="radial"
						metaPath="@com.sap.vocabularies.UI.v1.Chart#RadialCriticalityPath"
						contextPath="/RootEntity/_CreditLimitDetails"
						batchGroupId="$auto.abc"
						showOnlyChart="false"
					/>
				</HBox>
			</HBox>
		</Panel>
		<Panel headerText="Show Only Chart">
			<HBox justifyContent="SpaceAround" class="sapUiLargeMarginBottom sapUiLargeMarginTop">
				<HBox binding="{path:'/RootEntity(\'5\')'}" class="sapUiTinyMarginEnd">
					<macros:MicroChart
						id="column"
						metaPath="@com.sap.vocabularies.UI.v1.Chart#ColumnMaxPath"
						contextPath="/RootEntity/_Item"
						batchGroupId="$auto.abc"
						showOnlyChart="true"
					/>
				</HBox>
				<HBox binding="{path:'/RootEntity(\'1\')'}" class="sapUiTinyMarginBegin sapUiTinyMarginEnd">
					<macros:MicroChart
						id="area"
						metaPath="@com.sap.vocabularies.UI.v1.Chart#AreaMaxPath"
						contextPath="/RootEntity/_Item"
						batchGroupId="$auto.def"
						showOnlyChart="true"
					/>
				</HBox>
				<HBox binding="{path:'/RootEntity(\'1\')'}" class="sapUiTinyMarginBegin sapUiTinyMarginEnd">
					<macros:MicroChart
						id="line"
						metaPath="@com.sap.vocabularies.UI.v1.Chart#LineMaxPath"
						contextPath="/RootEntity/_Item"
						batchGroupId="$auto.def"
						showOnlyChart="true"
					/>
				</HBox>
			</HBox>
			<HBox justifyContent="SpaceAround" class="sapUiLargeMarginBottom sapUiLargeMarginTop">
				<HBox binding="{path:'/RootEntity(\'5\')'}" class="sapUiTinyMarginEnd">
					<macros:MicroChart
						id="bar"
						metaPath="@com.sap.vocabularies.UI.v1.Chart#BarStackedPath"
						contextPath="/RootEntity/_Item"
						batchGroupId="$auto.abc"
						showOnlyChart="true"
						size="XS"
					/>
				</HBox>
				<HBox binding="{path:'/RootEntity(\'2\')'}" class="sapUiTinyMarginBegin sapUiTinyMarginEnd">
					<macros:MicroChart
						id="comparison"
						metaPath="@com.sap.vocabularies.UI.v1.Chart#ComparisonPath"
						contextPath="/RootEntity/_Item"
						batchGroupId="$auto.abc"
						showOnlyChart="true"
						size="XS"
					/>
				</HBox>
			</HBox>
		</Panel>
	</VBox>
</core:FragmentDefinition>
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
service Service {
  entity RootEntity {
    key ID                  : String(2);
        SalesOrder          : String(10) not null @(
          title: 'Sales Order No.',
          Core.Computed
        );
        _Item               : Composition of many ChildEntity
                                on _Item.Parent = $self;
        _CreditLimitDetails : Association to CreditLimitDetails
                                on _CreditLimitDetails.SalesDocument = SalesOrder;
  }

  entity ChildEntity {
    key ID                   : String(2)           @(
          title        : 'Sales Order Item UUID',
          PersonalData : {IsPotentiallySensitive: true},
          Core.Computed: true
        );
        NetAmount            : Decimal(15, 2)      @(
          Analytics           : {Measure: true},
          Measures.ISOCurrency: TransactionCurrency,
          Core.Immutable      : true
        );
        SalesOrder           : String(10) not null @(
          title: 'Sales Order No.',
          Core.Computed
        );
        SalesOrderItem       : String(1) not null  @(
          title: 'Item',
          Core.Computed
        );
        SalesOrderItemNumber : Integer;
        TransactionCurrency  : String(5);
        NetAmount_text       : String(10);
        TargetAmount         : Decimal(15, 2)      @(
          UI                  : {ExcludeFromNavigationContext: true},
          Measures.ISOCurrency: TransactionCurrency,
          Core.Immutable      : true,
          Common              : {Label: 'Target Value'}
        );
        Criticality          : Integer;
        ToleranceRangeLow    : Decimal(23, 0);
        ToleranceRangeHigh   : Decimal(23, 0);
        DeviationRangeLow    : Decimal(23, 0);
        DeviationRangeHigh   : Decimal(23, 0);
        AcceptanceRangeLow   : Decimal(23, 0);
        AcceptanceRangeHigh  : Decimal(23, 0);
        Parent               : Association to RootEntity;
  }

  annotate ChildEntity with @(UI: {
    Chart #ColumnMaxPath            : {
      $Type            : 'UI.ChartDefinitionType',
      Title            : 'Items Column Chart',
      Description      : 'Column MicroChart',
      ChartType        : #Column,
      Measures         : [NetAmount],
      Dimensions       : [SalesOrderItem],
      MeasureAttributes: [{
        $Type    : 'UI.ChartMeasureAttributeType',
        Measure  : NetAmount,
        Role     : #Axis1,
        DataPoint: '@UI.DataPoint#ColumnMaxPath'
      }]
    },
    DataPoint #ColumnMaxPath        : {
      Value                 : NetAmount,
      Title                 : 'Data',
      Description           : 'Column Micro Chart',
      Criticality           : Criticality,
      CriticalityCalculation: {
        ImprovementDirection    : #Maximize,
        DeviationRangeLowValue  : DeviationRangeLow,
        ToleranceRangeLowValue  : ToleranceRangeLow,
        AcceptanceRangeLowValue : AcceptanceRangeLow,
        AcceptanceRangeHighValue: AcceptanceRangeHigh,
        ToleranceRangeHighValue : ToleranceRangeHigh,
        DeviationRangeHighValue : DeviationRangeHigh
      }
    },
    Chart #AreaMaxPath              : {
      $Type            : 'UI.ChartDefinitionType',
      Title            : 'Items Area Chart',
      Description      : 'Area MicroChart',
      ChartType        : #Area,
      Measures         : [NetAmount],
      Dimensions       : [SalesOrderItemNumber],
      MeasureAttributes: [{
        $Type    : 'UI.ChartMeasureAttributeType',
        Measure  : NetAmount,
        Role     : #Axis1,
        DataPoint: '@UI.DataPoint#AreaMaxPath'
      }]
    },
    DataPoint #AreaMaxPath          : {
      Value                 : NetAmount,
      Title                 : 'Data',
      Description           : 'Area Micro Chart',
      TargetValue           : TargetAmount,
      CriticalityCalculation: {
        ImprovementDirection    : #Target,
        DeviationRangeLowValue  : DeviationRangeLow,
        ToleranceRangeLowValue  : ToleranceRangeLow,
        AcceptanceRangeLowValue : AcceptanceRangeLow,
        AcceptanceRangeHighValue: AcceptanceRangeHigh,
        ToleranceRangeHighValue : ToleranceRangeHigh,
        DeviationRangeHighValue : DeviationRangeHigh
      }
    },
    Chart #LineMaxPath              : {
      $Type            : 'UI.ChartDefinitionType',
      Title            : 'Items Line Chart',
      Description      : 'Line MicroChart',
      ChartType        : #Line,
      Measures         : [
        NetAmount,
        TargetAmount
      ],
      Dimensions       : [SalesOrderItemNumber],
      MeasureAttributes: [
        {
          $Type    : 'UI.ChartMeasureAttributeType',
          Measure  : NetAmount,
          Role     : #Axis1,
          DataPoint: '@UI.DataPoint#LineValueCriticality'
        },
        {
          $Type    : 'UI.ChartMeasureAttributeType',
          Measure  : TargetAmount,
          Role     : #Axis1,
          DataPoint: '@UI.DataPoint#LineTargetCriticality'
        }
      ]
    },
    DataPoint #LineValueCriticality : {
      Value      : NetAmount,
      Title      : 'Net Amount',
      Description: 'Net Amount Line',
      Criticality: #Positive
    },
    DataPoint #LineTargetCriticality: {
      Value      : TargetAmount,
      Title      : 'Target Amount',
      Description: 'Target Amount Line',
      Criticality: #Neutral
    },
    Chart #BarStackedPath           : {
      $Type            : 'UI.ChartDefinitionType',
      Title            : 'Items Stacked Bar Chart',
      Description      : 'Stacked Bar MicroChart',
      ChartType        : #BarStacked,
      Measures         : [NetAmount],
      MeasureAttributes: [{
        $Type    : 'UI.ChartMeasureAttributeType',
        Measure  : NetAmount,
        Role     : #Axis1,
        DataPoint: '@UI.DataPoint#BarStackedPath'
      }]
    },
    DataPoint #BarStackedPath       : {
      Value      : NetAmount,
      Title      : 'Net Amount',
      Criticality: Criticality,
    },
    Chart #RadialChart              : {
      $Type            : 'UI.ChartDefinitionType',
      Title            : 'MicroChart',
      ChartType        : #Bullet,
      Measures         : [NetAmount],
      Dimensions       : [SalesOrderItem],
      MeasureAttributes: [{
        $Type    : 'UI.ChartMeasureAttributeType',
        Measure  : NetAmount,
        Role     : #Axis1,
        DataPoint: '@UI.DataPoint#RadialPath'
      }]
    },
    DataPoint #RadialPath           : {
      Value      : NetAmount,
      Title      : 'Net Amount',
      Criticality: Criticality,
    },
    Chart #ComparisonPath           : {
      $Type            : 'UI.ChartDefinitionType',
      Title            : 'Items Comparison Chart',
      Description      : 'Comparison MicroChart',
      ChartType        : #Bar,
      Measures         : [NetAmount],
      Dimensions       : [SalesOrderItem],
      MeasureAttributes: [{
        $Type    : 'UI.ChartMeasureAttributeType',
        Measure  : NetAmount,
        Role     : #Axis1,
        DataPoint: '@UI.DataPoint#ComparisonPath'
      }]
    },
    DataPoint #ComparisonPath       : {
      Value      : NetAmount,
      Title      : 'Net Amount',
      Criticality: Criticality,
    }
  });

  entity CreditLimitDetails                                 @(title: 'Bullet Chart') {
    key SalesDocument                      : String(10);
        CustomerCreditExposureAmount       : Decimal(23, 2) @(Measures.ISOCurrency: TransactionCurrency, );
        Delivered                          : Boolean        @(title: 'Delivery Status');
        CustomerCreditExposureAmountHidden : Decimal(23, 2) @(
          Measures.ISOCurrency: TransactionCurrency,
          UI.Hidden           : Delivered
        );
        CustomerCreditForecast             : Decimal(23, 2) @(Measures.ISOCurrency: TransactionCurrency, );
        CustomerCreditExposureAmount_text  : String(15);
        CustomerCreditLimitAmount          : Decimal(23, 2) @(Measures.ISOCurrency: TransactionCurrency, );
        MaximumCreditValue                 : Decimal(23, 2);
        CustomerCreditLimitAmount_text     : String(15);
        TransactionCurrency                : String(5);
        CustomerIsAboveThreshold           : Integer;
        ToleranceRangeLow                  : Decimal(23, 2);
        ToleranceRangeHigh                 : Decimal(23, 2);
        DeviationRangeLow                  : Decimal(23, 2);
        DeviationRangeHigh                 : Decimal(23, 2);
        AcceptanceRangeLow                 : Decimal(23, 2);
        AcceptanceRangeHigh                : Decimal(23, 2);
  }

  annotate CreditLimitDetails with @(UI: {
    Chart #CreditLimitChart                : {
      $Type            : 'UI.ChartDefinitionType',
      Title            : 'Credit Limit Bullet',
      Description      : 'Bullet MicroChart',
      ChartType        : #Bullet,
      Measures         : [CustomerCreditExposureAmount],
      MeasureAttributes: [{
        $Type    : 'UI.ChartMeasureAttributeType',
        Measure  : CustomerCreditExposureAmount,
        Role     : #Axis1,
        DataPoint: '@UI.DataPoint#CustomerCreditExposureAmount'
      }]
    },
    DataPoint #CustomerCreditExposureAmount: {
      Value                 : CustomerCreditExposureAmount,
      Title                 : 'Exposure Amount',
      Description           : 'Bullet Micro Chart',
      TargetValue           : CustomerCreditLimitAmount,
      ForecastValue         : CustomerCreditForecast,
      MaximumValue          : 7000,
      MinimumValue          : 200,
      Criticality           : CustomerIsAboveThreshold,
      CriticalityCalculation: {
        ImprovementDirection    : #Maximize,
        DeviationRangeLowValue  : DeviationRangeLow,
        ToleranceRangeLowValue  : ToleranceRangeLow,
        AcceptanceRangeLowValue : AcceptanceRangeLow,
        AcceptanceRangeHighValue: AcceptanceRangeHigh,
        ToleranceRangeHighValue : ToleranceRangeHigh,
        DeviationRangeHighValue : DeviationRangeHigh
      }
    },
    Chart #HarveyBallCriticalityPath       : {
      $Type            : 'UI.ChartDefinitionType',
      Title            : 'Credit Limit HarveyBall',
      Description      : 'HarveyBall MicroChart',
      ChartType        : #Pie,
      Measures         : [CustomerCreditExposureAmount],
      MeasureAttributes: [{
        $Type    : 'UI.ChartMeasureAttributeType',
        Measure  : CustomerCreditExposureAmount,
        Role     : #Axis1,
        DataPoint: '@UI.DataPoint#HarveyBallValuePath'
      }]
    },
    DataPoint #HarveyBallValuePath         : {
      Value       : CustomerCreditExposureAmount,
      MaximumValue: CustomerCreditLimitAmount,
      Criticality : CustomerIsAboveThreshold
    },
    Chart #RadialCriticalityPath           : {
      $Type            : 'UI.ChartDefinitionType',
      Title            : 'Credit Limit Radial',
      Description      : 'Radial MicroChart',
      ChartType        : #Donut,
      Measures         : [CustomerCreditExposureAmount],
      MeasureAttributes: [{
        $Type    : 'UI.ChartMeasureAttributeType',
        Measure  : CustomerCreditExposureAmount,
        Role     : #Axis1,
        DataPoint: '@UI.DataPoint#RadialValuePath'
      }]
    },
    DataPoint #RadialValuePath             : {
      Value      : CustomerCreditExposureAmount,
      TargetValue: CustomerCreditLimitAmount,
      Criticality: CustomerIsAboveThreshold
    }
  });
}

```

**FILE**: RootEntity.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"ID": "1",
		"SalesOrder": "2919682"
	},
	{
		"ID": "2",
		"SalesOrder": "2922870"
	},
	{
		"ID": "3",
		"SalesOrder": "6437"
	},
	{
		"ID": "4",
		"SalesOrder": "2915717"
	},
	{
		"ID": "5",
		"SalesOrder": "2916499"
	},
	{
		"ID": "6",
		"SalesOrder": "2916639"
	},
	{
		"ID": "7",
		"SalesOrder": "2917844"
	},
	{
		"ID": "8",
		"SalesOrder": "2919431"
	}
]

```

**FILE**: ChildEntity.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"ID": "1",
		"Parent_ID": "3",
		"SalesOrder": "6437",
		"SalesOrderItem": "A",
		"SalesOrderItemNumber": 40,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "3",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "2",
		"Parent_ID": "4",
		"SalesOrder": "2915717",
		"SalesOrderItem": "A",
		"SalesOrderItemNumber": 40,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "4",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "3",
		"Parent_ID": "4",
		"SalesOrder": "2915717",
		"SalesOrderItem": "D",
		"SalesOrderItemNumber": 70,
		"NetAmount": 10,
		"owner_ID": "4",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "4",
		"Parent_ID": "4",
		"SalesOrder": "2915717",
		"SalesOrderItem": "C",
		"SalesOrderItemNumber": 60,
		"TransactionCurrency": "EUR",
		"NetAmount": 20,
		"owner_ID": "4",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "5",
		"Parent_ID": "4",
		"SalesOrder": "2915717",
		"SalesOrderItem": "B",
		"SalesOrderItemNumber": 50,
		"TransactionCurrency": "EUR",
		"NetAmount": 30,
		"owner_ID": "4",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "6",
		"Parent_ID": "4",
		"SalesOrder": "2915717",
		"SalesOrderItem": "E",
		"SalesOrderItemNumber": 80,
		"TransactionCurrency": "EUR",
		"NetAmount": 50,
		"owner_ID": "4",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "7",
		"Parent_ID": "4",
		"SalesOrder": "2915717",
		"SalesOrderItem": "Z",
		"SalesOrderItemNumber": 30,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "4",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "8",
		"Parent_ID": "4",
		"SalesOrder": "2915717",
		"SalesOrderItem": "Y",
		"SalesOrderItemNumber": 20,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "4",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "9",
		"Parent_ID": "4",
		"SalesOrder": "2915717",
		"SalesOrderItem": "X",
		"SalesOrderItemNumber": 10,
		"TransactionCurrency": "EUR",
		"NetAmount": 30,
		"owner_ID": "4",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "10",
		"Parent_ID": "5",
		"SalesOrder": "2916499",
		"SalesOrderItem": "A",
		"SalesOrderItemNumber": 40,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "5",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 1,
		"NetAmount_text": "0"
	},
	{
		"ID": "11",
		"Parent_ID": "5",
		"SalesOrder": "2916499",
		"SalesOrderItem": "D",
		"SalesOrderItemNumber": 70,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "5",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 2,
		"NetAmount_text": "0"
	},
	{
		"ID": "12",
		"Parent_ID": "5",
		"SalesOrder": "2916499",
		"SalesOrderItem": "C",
		"SalesOrderItemNumber": 60,
		"TransactionCurrency": "EUR",
		"NetAmount": 20,
		"owner_ID": "5",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 1,
		"NetAmount_text": "0"
	},
	{
		"ID": "13",
		"Parent_ID": "5",
		"SalesOrder": "2916499",
		"SalesOrderItem": "B",
		"SalesOrderItemNumber": 50,
		"TransactionCurrency": "EUR",
		"NetAmount": 30,
		"owner_ID": "5",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 3,
		"NetAmount_text": "0"
	},
	{
		"ID": "14",
		"Parent_ID": "5",
		"SalesOrder": "2916499",
		"SalesOrderItem": "E",
		"SalesOrderItemNumber": 80,
		"TransactionCurrency": "EUR",
		"NetAmount": 50,
		"owner_ID": "5",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 3,
		"NetAmount_text": "0"
	},
	{
		"ID": "15",
		"Parent_ID": "5",
		"SalesOrder": "2916499",
		"SalesOrderItem": "Z",
		"SalesOrderItemNumber": 30,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "5",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 2,
		"NetAmount_text": "0"
	},
	{
		"ID": "16",
		"Parent_ID": "5",
		"SalesOrder": "2916499",
		"SalesOrderItem": "Y",
		"SalesOrderItemNumber": 20,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "5",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 2,
		"NetAmount_text": "0"
	},
	{
		"ID": "17",
		"Parent_ID": "5",
		"SalesOrder": "2916499",
		"SalesOrderItem": "X",
		"SalesOrderItemNumber": 10,
		"TransactionCurrency": "EUR",
		"NetAmount": 30,
		"owner_ID": "5",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 1,
		"NetAmount_text": "0"
	},
	{
		"ID": "18",
		"Parent_ID": "6",
		"SalesOrder": "2916639",
		"SalesOrderItem": "A",
		"SalesOrderItemNumber": 40,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "6",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "19",
		"Parent_ID": "6",
		"SalesOrder": "2916639",
		"SalesOrderItem": "D",
		"SalesOrderItemNumber": 70,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "6",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "20",
		"Parent_ID": "7",
		"SalesOrder": "2917844",
		"SalesOrderItem": "A",
		"SalesOrderItemNumber": 40,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "7",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "21",
		"Parent_ID": "7",
		"SalesOrder": "2917844",
		"SalesOrderItem": "D",
		"SalesOrderItemNumber": 70,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "7",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "22",
		"Parent_ID": "7",
		"SalesOrder": "2917844",
		"SalesOrderItem": "C",
		"SalesOrderItemNumber": 60,
		"TransactionCurrency": "EUR",
		"NetAmount": 20,
		"owner_ID": "7",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "22",
		"Parent_ID": "7",
		"SalesOrder": "2917844",
		"SalesOrderItem": "B",
		"SalesOrderItemNumber": 50,
		"TransactionCurrency": "EUR",
		"NetAmount": 30,
		"owner_ID": "7",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "23",
		"Parent_ID": "7",
		"SalesOrder": "2917844",
		"SalesOrderItem": "E",
		"SalesOrderItemNumber": 80,
		"TransactionCurrency": "EUR",
		"NetAmount": 50,
		"owner_ID": "7",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "24",
		"Parent_ID": "7",
		"SalesOrder": "2917844",
		"SalesOrderItem": "Z",
		"SalesOrderItemNumber": 30,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "7",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "25",
		"Parent_ID": "8",
		"SalesOrder": "2919431",
		"SalesOrderItem": "A",
		"SalesOrderItemNumber": 40,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "8",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "26",
		"Parent_ID": "8",
		"SalesOrder": "2919431",
		"SalesOrderItem": "D",
		"SalesOrderItemNumber": 70,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "8",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "27",
		"Parent_ID": "8",
		"SalesOrder": "2919431",
		"SalesOrderItem": "C",
		"SalesOrderItemNumber": 60,
		"TransactionCurrency": "EUR",
		"NetAmount": 20,
		"owner_ID": "8",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "28",
		"Parent_ID": "8",
		"SalesOrder": "2919431",
		"SalesOrderItem": "Y",
		"SalesOrderItemNumber": 20,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "8",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "29",
		"Parent_ID": "8",
		"SalesOrder": "2919431",
		"SalesOrderItem": "X",
		"SalesOrderItemNumber": 10,
		"TransactionCurrency": "EUR",
		"NetAmount": 30,
		"owner_ID": "8",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 15,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 40,
		"ToleranceRangeHigh": 55,
		"DeviationRangeHigh": 70,
		"TargetAmount": 35,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "30",
		"Parent_ID": "1",
		"SalesOrder": "2919682",
		"SalesOrderItem": "X",
		"SalesOrderItemNumber": 10,
		"TransactionCurrency": "EUR",
		"NetAmount": 10,
		"owner_ID": "1",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 10,
		"AcceptanceRangeLow": 15,
		"AcceptanceRangeHigh": 20,
		"ToleranceRangeHigh": 30,
		"DeviationRangeHigh": 40,
		"TargetAmount": 0,
		"Criticality": 1,
		"NetAmount_text": "0"
	},
	{
		"ID": "31",
		"Parent_ID": "1",
		"SalesOrder": "2919682",
		"SalesOrderItem": "A",
		"SalesOrderItemNumber": 40,
		"TransactionCurrency": "EUR",
		"NetAmount": 20,
		"owner_ID": "1",
		"DeviationRangeLow": 15,
		"ToleranceRangeLow": 25,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 35,
		"ToleranceRangeHigh": 45,
		"DeviationRangeHigh": 55,
		"TargetAmount": 35,
		"Criticality": 2,
		"NetAmount_text": "0"
	},
	{
		"ID": "32",
		"Parent_ID": "1",
		"SalesOrder": "2919682",
		"SalesOrganization": "0001",
		"SalesOrderItem": "D",
		"SalesOrderItemNumber": 70,
		"TransactionCurrency": "EUR",
		"NetAmount": 50,
		"owner_ID": "1",
		"DeviationRangeLow": 30,
		"ToleranceRangeLow": 40,
		"AcceptanceRangeLow": 45,
		"AcceptanceRangeHigh": 50,
		"ToleranceRangeHigh": 60,
		"DeviationRangeHigh": 70,
		"TargetAmount": 70,
		"Criticality": 3,
		"NetAmount_text": "0"
	},
	{
		"ID": "33",
		"Parent_ID": "2",
		"SalesOrder": "2922870",
		"SalesOrderItem": "F",
		"SalesOrderItemNumber": 90,
		"TransactionCurrency": "EUR",
		"NetAmount": 15,
		"owner_ID": "2",
		"DeviationRangeLow": 0,
		"ToleranceRangeLow": 10,
		"AcceptanceRangeLow": 15,
		"AcceptanceRangeHigh": 20,
		"ToleranceRangeHigh": 30,
		"DeviationRangeHigh": 40,
		"TargetAmount": 0,
		"Criticality": 0,
		"NetAmount_text": "0"
	},
	{
		"ID": "34",
		"Parent_ID": "2",
		"SalesOrder": "2922870",
		"SalesOrderItem": "B",
		"SalesOrderItemNumber": 50,
		"TransactionCurrency": "EUR",
		"NetAmount": 40,
		"owner_ID": "2",
		"DeviationRangeLow": 15,
		"ToleranceRangeLow": 25,
		"AcceptanceRangeLow": 30,
		"AcceptanceRangeHigh": 35,
		"ToleranceRangeHigh": 45,
		"DeviationRangeHigh": 55,
		"TargetAmount": 35,
		"Criticality": 1,
		"NetAmount_text": "0"
	},
	{
		"ID": "35",
		"Parent_ID": "2",
		"SalesOrder": "2922870",
		"SalesOrderItem": "D",
		"SalesOrderItemNumber": 70,
		"TransactionCurrency": "EUR",
		"NetAmount": 65,
		"owner_ID": "2",
		"DeviationRangeLow": 30,
		"ToleranceRangeLow": 40,
		"AcceptanceRangeLow": 45,
		"AcceptanceRangeHigh": 50,
		"ToleranceRangeHigh": 60,
		"DeviationRangeHigh": 70,
		"TargetAmount": 70,
		"Criticality": 2,
		"NetAmount_text": "0"
	}
]

```

**FILE**: CreditLimitDetails.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"CustomerCreditForecast": 1800,
		"CustomerCreditExposureAmount": 1251,
		"CustomerCreditExposureAmountHidden": 2250,
		"CustomerCreditExposureAmount_text": "Credit Exposure",
		"CustomerCreditLimitAmount": 4000,
		"CustomerCreditLimitAmount_text": "Credit Limit",
		"CustomerIsAboveThreshold": 3,
		"SalesDocument": "2919682",
		"DeviationRangeLow": 1000,
		"ToleranceRangeLow": 2000,
		"AcceptanceRangeLow": 2500,
		"AcceptanceRangeHigh": 3500,
		"ToleranceRangeHigh": 4000,
		"DeviationRangeHigh": 5000,
		"TransactionCurrency": "EUR",
		"MaximumCreditValue": 7000,
		"Delivered": 0
	},
	{
		"CustomerCreditForecast": 2100,
		"CustomerCreditExposureAmount": 2250,
		"CustomerCreditExposureAmountHidden": 1000,
		"CustomerCreditExposureAmount_text": "Credit Exposure",
		"CustomerCreditLimitAmount": 4000,
		"CustomerCreditLimitAmount_text": "Credit Limit",
		"CustomerIsAboveThreshold": 1,
		"SalesDocument": "2922870",
		"DeviationRangeLow": 1000,
		"ToleranceRangeLow": 2000,
		"AcceptanceRangeLow": 2500,
		"AcceptanceRangeHigh": 3500,
		"ToleranceRangeHigh": 4000,
		"DeviationRangeHigh": 5000,
		"TransactionCurrency": "EUR",
		"MaximumCreditValue": 7000,
		"Delivered": 1
	},
	{
		"CustomerCreditForecast": 1800,
		"CustomerCreditExposureAmount": 1251,
		"CustomerCreditExposureAmountHidden": 4000,
		"CustomerCreditExposureAmount_text": "Credit Exposure",
		"CustomerCreditLimitAmount": 4000,
		"CustomerCreditLimitAmount_text": "Credit Limit",
		"CustomerIsAboveThreshold": 3,
		"SalesDocument": "2915717",
		"DeviationRangeLow": 1000,
		"ToleranceRangeLow": 2000,
		"AcceptanceRangeLow": 2500,
		"AcceptanceRangeHigh": 3500,
		"ToleranceRangeHigh": 4000,
		"DeviationRangeHigh": 5000,
		"TransactionCurrency": "EUR",
		"MaximumCreditValue": 7000,
		"Delivered": 0
	},
	{
		"CustomerCreditForecast": 2100,
		"CustomerCreditExposureAmount": 2250,
		"CustomerCreditExposureAmountHidden": 3500,
		"CustomerCreditExposureAmount_text": "Credit Exposure",
		"CustomerCreditLimitAmount": 4000,
		"CustomerCreditLimitAmount_text": "Credit Limit",
		"CustomerIsAboveThreshold": 1,
		"SalesDocument": "2916499",
		"DeviationRangeLow": 1000,
		"ToleranceRangeLow": 2000,
		"AcceptanceRangeLow": 2500,
		"AcceptanceRangeHigh": 3500,
		"ToleranceRangeHigh": 4000,
		"DeviationRangeHigh": 5000,
		"TransactionCurrency": "EUR",
		"MaximumCreditValue": 7000,
		"Delivered": 0
	},
	{
		"CustomerCreditForecast": 1800,
		"CustomerCreditExposureAmount": 1251,
		"CustomerCreditExposureAmountHidden": 500,
		"CustomerCreditExposureAmount_text": "Credit Exposure",
		"CustomerCreditLimitAmount": 4000,
		"CustomerCreditLimitAmount_text": "Credit Limit",
		"CustomerIsAboveThreshold": 3,
		"SalesDocument": "2917844",
		"DeviationRangeLow": 1000,
		"ToleranceRangeLow": 2000,
		"AcceptanceRangeLow": 2500,
		"AcceptanceRangeHigh": 3500,
		"ToleranceRangeHigh": 4000,
		"DeviationRangeHigh": 5000,
		"TransactionCurrency": "EUR",
		"MaximumCreditValue": 7000,
		"Delivered": 0
	},
	{
		"CustomerCreditForecast": 2100,
		"CustomerCreditExposureAmount": 2250,
		"CustomerCreditExposureAmountHidden": 2600,
		"CustomerCreditExposureAmount_text": "Credit Exposure",
		"CustomerCreditLimitAmount": 4000,
		"CustomerCreditLimitAmount_text": "Credit Limit",
		"CustomerIsAboveThreshold": 1,
		"SalesDocument": "2919431",
		"DeviationRangeLow": 1000,
		"ToleranceRangeLow": 2000,
		"AcceptanceRangeLow": 2500,
		"AcceptanceRangeHigh": 3500,
		"ToleranceRangeHigh": 4000,
		"DeviationRangeHigh": 5000,
		"TransactionCurrency": "EUR",
		"MaximumCreditValue": 7000,
		"Delivered": 0
	},
	{
		"CustomerCreditForecast": 1800,
		"CustomerCreditExposureAmount": 1251,
		"CustomerCreditExposureAmountHidden": 2200,
		"CustomerCreditExposureAmount_text": "Credit Exposure",
		"CustomerCreditLimitAmount": 4000,
		"CustomerCreditLimitAmount_text": "Credit Limit",
		"CustomerIsAboveThreshold": 3,
		"SalesDocument": "2922872",
		"DeviationRangeLow": 1000,
		"ToleranceRangeLow": 2000,
		"AcceptanceRangeLow": 2500,
		"AcceptanceRangeHigh": 3500,
		"ToleranceRangeHigh": 4000,
		"DeviationRangeHigh": 5000,
		"TransactionCurrency": "EUR",
		"MaximumCreditValue": 7000,
		"Delivered": 0
	},
	{
		"CustomerCreditForecast": 2100,
		"CustomerCreditExposureAmount": 2250,
		"CustomerCreditExposureAmountHidden": 2500,
		"CustomerCreditExposureAmount_text": "Credit Exposure",
		"CustomerCreditLimitAmount": 4000,
		"CustomerCreditLimitAmount_text": "Credit Limit",
		"CustomerIsAboveThreshold": 1,
		"SalesDocument": "2922873",
		"DeviationRangeLow": 1000,
		"ToleranceRangeLow": 2000,
		"AcceptanceRangeLow": 2500,
		"AcceptanceRangeHigh": 3500,
		"ToleranceRangeHigh": 4000,
		"DeviationRangeHigh": 5000,
		"TransactionCurrency": "EUR",
		"MaximumCreditValue": 7000,
		"Delivered": 0
	}
]

```

--------------------------------

**TITLE**: Page

**INTRODUCTION**: The Page building block enables you to create a custom page with a pre-defined layout.

**TAGS**: page, layout, structure, container, navigation

**STEP**: Using the Page Building Block

**DESCRIPTION**: You can use the Page building block to create a new page. You can configure the content of the building block as per your requirements.

**LANGUAGE**: XML

**CODE**:
```xml
<mvc:View
	id="application-product"
	height="100%"
	controllerName="sap.fe.core.PageController"
	xmlns="sap.m"
	xmlns:mvc="sap.ui.core.mvc"
	xmlns:macros="sap.fe.macros"
	xmlns:l="sap.ui.layout"
>
	<macros:Page title="Page title" description="Page description" avatarSrc="sap-icon://page">
		<Panel headerText="First content" id="firstContent">
			<l:HorizontalLayout
				id="TileContainerExpanded"
				allowWrapping="true"
				content="{
        			path : '/Travel',
        			filters : [
            			{ path : 'TravelStatus_code', operator : 'EQ', value1 : 'O'}
        			]
    			}"
			>
				<GenericTile
					header="{Description}"
					subheader="{BeginDate}"
					press="onPressed"
					class="sapUiTinyMarginEnd sapUiTinyMarginTop tileLayout"
				>
					<TileContent unit="{CurrencyCode_code}">
						<NumericContent withMargin="false" value="{TotalPrice}" truncateValueTo="6" />
					</TileContent>
				</GenericTile>
			</l:HorizontalLayout>
		</Panel>
		<Panel headerText="Second content" id="secondContent">
			<macros:Table metaPath="/Travel/@com.sap.vocabularies.UI.v1.LineItem" />
		</Panel>
	</macros:Page>
</mvc:View>
```

**STEP**: Using Building Blocks

**DESCRIPTION**: You can use the building blocks in your page as shown in the following example.

**LANGUAGE**: XML

**CODE**:
```xml
<mvc:View
	id="application-product"
	height="100%"
	controllerName="sap.fe.core.PageController"
	xmlns="sap.m"
	xmlns:mvc="sap.ui.core.mvc"
	xmlns:macros="sap.fe.macros"
	xmlns:l="sap.ui.layout"
>
	<macros:Page title="Page title" description="Page description" avatarSrc="sap-icon://page">
		<Panel headerText="First content" id="firstContent">
			<l:HorizontalLayout
				id="TileContainerExpanded"
				allowWrapping="true"
				content="{
        			path : '/Travel',
        			filters : [
            			{ path : 'TravelStatus_code', operator : 'EQ', value1 : 'O'}
        			]
    			}"
			>
				<GenericTile
					header="{Description}"
					subheader="{BeginDate}"
					press="onPressed"
					class="sapUiTinyMarginEnd sapUiTinyMarginTop tileLayout"
				>
					<TileContent unit="{CurrencyCode_code}">
						<NumericContent withMargin="false" value="{TotalPrice}" truncateValueTo="6" />
					</TileContent>
				</GenericTile>
			</l:HorizontalLayout>
		</Panel>
		<Panel headerText="Second content" id="secondContent">
			<macros:Table metaPath="/Travel/@com.sap.vocabularies.UI.v1.LineItem" />
		</Panel>
	</macros:Page>
</mvc:View>
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: manifest.json

**LANGUAGE**: JSON

**CODE**:
```json
{
	"_version": "1.12.0",
	"sap.app": {
		"id": "sap.fe.core.fpmExplorer.pageDefault",
		"type": "application",
		"i18n": {
			"bundleUrl": "i18n/i18n.properties",
			"supportedLocales": [""],
			"fallbackLocale": ""
		},
		"applicationVersion": {
			"version": "1.0.0"
		},
		"dataSources": {
			"mainService": {
				"uri": "/sap/fe/core/mock/service/",
				"type": "OData",
				"settings": {
					"annotations": [],
					"odataVersion": "4.0"
				}
			}
		}
	},
	"sap.ui5": {
		"dependencies": {
			"minUI5Version": "1.111.1",
			"libs": {
				"sap.ui.core": {},
				"sap.fe.templates": {}
			}
		},
		"contentDensities": {
			"compact": true,
			"cozy": true
		},
		"models": {
			"": {
				"dataSource": "mainService",
				"settings": {
					"operationMode": "Server",
					"autoExpandSelect": true,
					"earlyRequests": true
				}
			}
		},
		"rootView": {
			"viewName": "sap.fe.core.fpmExplorer.pageDefault.Page"
		},
		"routing": {
			"config": {
				"controlId": "customPage"
			},
			"routes": [
				{
					"pattern": ":?query:",
					"name": "customPage",
					"target": "customPage"
				},
				{
					"pattern": "/Travel({key}):?query:",
					"name": "objectPage",
					"target": "objectPage"
				}
			],
			"targets": {
				"customPage": {
					"type": "Component",
					"id": "Default",
					"name": "sap.fe.core.fpm",
					"options": {
						"settings": {
							"viewName": "sap.fe.core.fpmExplorer.pageDefault.Sample",
							"contextPath": "/Travel"
						}
					}
				},
				"objectPage": {
					"type": "Component",
					"id": "objectPage",
					"name": "sap.fe.templates.ObjectPage",
					"options": {
						"settings": {
							"contextPath": "/Travel"
						}
					}
				}
			}
		}
	}
}

```

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: annotations.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});

```

**FILE**: Travel.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"TravelID": "00000001",
		"BeginDate": "2025-11-04",
		"EndDate": "2025-11-06",
		"BookingFee": "20.00",
		"TotalPrice": "900.00",
		"CurrencyCode_code": "USD",
		"Description": "Business Trip for Christine, Pierre",
		"TravelDetails": "This business trip includes a two-day customer workshop at the airport. The goal is the evaluation of the customer's use cases and the alignment on the roadmap for the upcoming year.",
		"TravelStatus_code": "A",
		"to_Agency_AgencyID": "070001"
	},
	{
		"TravelUUID": "53657221A8E4645C17002DF03754AB66",
		"TravelID": "00000002",
		"BeginDate": "2025-12-04",
		"EndDate": "2025-12-16",
		"BookingFee": "80.00",
		"TotalPrice": "3164.00",
		"CurrencyCode_code": "USD",
		"Description": "Lars Jensen site visit for system rollout support",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070002"
	},
	{
		"TravelUUID": "54657221A8E4645C17002DF03754AB66",
		"TravelID": "00000003",
		"BeginDate": "2025-08-04",
		"EndDate": "2025-08-08",
		"BookingFee": "40.00",
		"TotalPrice": "1871.00",
		"CurrencyCode_code": "USD",
		"Description": "John Smith customer workshop at Acme Corp headquarters",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070003"
	},
	{
		"TravelUUID": "55657221A8E4645C17002DF03754AB66",
		"TravelID": "00000004",
		"BeginDate": "2025-09-04",
		"EndDate": "2025-09-05",
		"BookingFee": "40.00",
		"TotalPrice": "1240.00",
		"CurrencyCode_code": "USD",
		"Description": "Anna Müller onboarding with new project team in Berlin",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "X",
		"to_Agency_AgencyID": "070003"
	}
]

```

--------------------------------

**TITLE**: Paginator

**INTRODUCTION**: The Paginator building block enables you to render paginator buttons in scenarios where users have to navigate through a list of items.

**TAGS**: paginator, pagination, paging, navigation, results

**STEP**: Using the Paginator Building Block

**DESCRIPTION**: To use the Paginator building block, you can include it in your view.

**LANGUAGE**: XML

**CODE**:
```xml
<mvc:View
	id="application-product"
	height="100%"
	controllerName="sap.fe.core.fpmExplorer.paginatorDefault.Paginator"
	xmlns="sap.m"
	xmlns:mvc="sap.ui.core.mvc"
	xmlns:macros="sap.fe.macros"
>
	<Page id="PaginatorPage">
		<customHeader>
			<Toolbar>
				<Title text="Paginator Sample" level="H2" />
				<ToolbarSpacer />
				<macros:Paginator id="paginator" />
			</Toolbar>
		</customHeader>
		<macros:Form metaPath="/Travel/@com.sap.vocabularies.UI.v1.FieldGroup#ApprovalData" id="myForm" title="Travel Data" />
	</Page>
</mvc:View>
```

**STEP**: Initialize the Paginator Building Block

**DESCRIPTION**: To use the paginator building block, you need to initialize it in your controller coding and need to define a list binding and current context.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
import PageController from "sap/fe/core/PageController";
import Paginator from "sap/fe/core/controllerextensions/Paginator";
import type UI5Event from "sap/ui/base/Event";
import type Control from "sap/ui/core/Control";
import JSONModel from "sap/ui/model/json/JSONModel";
import type Context from "sap/ui/model/odata/v4/Context";

/**
 * @namespace sap.fe.core.fpmExplorer.paginator
 */

export default PageController.extend("sap.fe.core.fpmExplorer.paginator.PaginatorController", {
	onBeforeRendering: function (this: PageController): void {
		const list = this.getView()?.byId("travelList");
		if (list) {
			if (!this.getModel("paginatorModel")) {
				// we create a JSON model to hold the list binding and selected row
				const jsonModel = new JSONModel();
				const ownerComponent = this.getOwnerComponent();
				const appComponent = ownerComponent.getAppComponent();
				appComponent?.setModel(jsonModel, "paginatorModel");
			}
		} else {
			// we are in the detail page, so we initialize the paginator with the list binding and selected row
			const paginatorModel = this.getModel("paginatorModel");
			const listBinding = paginatorModel?.getProperty("/listBinding");
			const selectedRow = paginatorModel?.getProperty("/selectedRow");
			this.paginator.initialize(listBinding, selectedRow);
		}
	},

	rowPress: function (this: PageController, event: UI5Event): void {
		const source = event.getSource() as Control;
		const context = source.getBindingContext() as Context;
		// we navigate to the detail page with the context of the selected row
		this.routing.navigate(context);

		// we update the paginator model with the list binding and selected row
		const listBinding = this.getView()?.byId("travelList")?.getBinding("items");
		const paginatorModel = this.getModel("paginatorModel") as JSONModel;
		paginatorModel.setProperty("/listBinding", listBinding);
		paginatorModel.setProperty("/selectedRow", context);
	},

	paginator: Paginator.override({
		onContextUpdate: function (this: PageController, context: Context): void {
			this.getView()?.setBindingContext(context);
		}
	})
});
```

**STEP**: Update the Page Context

**DESCRIPTION**: Once the user navigates to a new page through the paginator, you need to update the view context to reflect the new page's data.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
import PageController from "sap/fe/core/PageController";
import Paginator from "sap/fe/core/controllerextensions/Paginator";
import type UI5Event from "sap/ui/base/Event";
import type Control from "sap/ui/core/Control";
import JSONModel from "sap/ui/model/json/JSONModel";
import type Context from "sap/ui/model/odata/v4/Context";

/**
 * @namespace sap.fe.core.fpmExplorer.paginator
 */

export default PageController.extend("sap.fe.core.fpmExplorer.paginator.PaginatorController", {
	onBeforeRendering: function (this: PageController): void {
		const list = this.getView()?.byId("travelList");
		if (list) {
			if (!this.getModel("paginatorModel")) {
				// we create a JSON model to hold the list binding and selected row
				const jsonModel = new JSONModel();
				const ownerComponent = this.getOwnerComponent();
				const appComponent = ownerComponent.getAppComponent();
				appComponent?.setModel(jsonModel, "paginatorModel");
			}
		} else {
			// we are in the detail page, so we initialize the paginator with the list binding and selected row
			const paginatorModel = this.getModel("paginatorModel");
			const listBinding = paginatorModel?.getProperty("/listBinding");
			const selectedRow = paginatorModel?.getProperty("/selectedRow");
			this.paginator.initialize(listBinding, selectedRow);
		}
	},

	rowPress: function (this: PageController, event: UI5Event): void {
		const source = event.getSource() as Control;
		const context = source.getBindingContext() as Context;
		// we navigate to the detail page with the context of the selected row
		this.routing.navigate(context);

		// we update the paginator model with the list binding and selected row
		const listBinding = this.getView()?.byId("travelList")?.getBinding("items");
		const paginatorModel = this.getModel("paginatorModel") as JSONModel;
		paginatorModel.setProperty("/listBinding", listBinding);
		paginatorModel.setProperty("/selectedRow", context);
	},

	paginator: Paginator.override({
		onContextUpdate: function (this: PageController, context: Context): void {
			this.getView()?.setBindingContext(context);
		}
	})
});
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: annotations.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});

```

**FILE**: Travel.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"TravelID": "00000001",
		"BeginDate": "2025-11-04",
		"EndDate": "2025-11-06",
		"BookingFee": "20.00",
		"TotalPrice": "900.00",
		"CurrencyCode_code": "USD",
		"Description": "Business Trip for Christine, Pierre",
		"TravelDetails": "This business trip includes a two-day customer workshop at the airport. The goal is the evaluation of the customer's use cases and the alignment on the roadmap for the upcoming year.",
		"TravelStatus_code": "A",
		"to_Agency_AgencyID": "070001"
	},
	{
		"TravelUUID": "53657221A8E4645C17002DF03754AB66",
		"TravelID": "00000002",
		"BeginDate": "2025-12-04",
		"EndDate": "2025-12-16",
		"BookingFee": "80.00",
		"TotalPrice": "3164.00",
		"CurrencyCode_code": "USD",
		"Description": "Lars Jensen site visit for system rollout support",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070002"
	},
	{
		"TravelUUID": "54657221A8E4645C17002DF03754AB66",
		"TravelID": "00000003",
		"BeginDate": "2025-08-04",
		"EndDate": "2025-08-08",
		"BookingFee": "40.00",
		"TotalPrice": "1871.00",
		"CurrencyCode_code": "USD",
		"Description": "John Smith customer workshop at Acme Corp headquarters",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070003"
	},
	{
		"TravelUUID": "55657221A8E4645C17002DF03754AB66",
		"TravelID": "00000004",
		"BeginDate": "2025-09-04",
		"EndDate": "2025-09-05",
		"BookingFee": "40.00",
		"TotalPrice": "1240.00",
		"CurrencyCode_code": "USD",
		"Description": "Anna Müller onboarding with new project team in Berlin",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "X",
		"to_Agency_AgencyID": "070003"
	}
]

```

--------------------------------

**TITLE**: Rich Text Editor

**INTRODUCTION**: The RichTextEditor building block enables you to add a control that shows a formatted text in display mode and allows users to edit and format it directly in edit mode.

**TAGS**: rich text editor, rte, wysiwyg, text formatting, editor

**STEP**: Implementation

**DESCRIPTION**: To use the rich text editor, you need to define the metaPath pointing to a string property. The building block is based on the rich text editor used in SAPUI5, allowing you to define the button groups and plugins the same way as you would in that control.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition
	xmlns:core="sap.ui.core"
	xmlns="sap.m"
	xmlns:macros="sap.fe.macros"
	xmlns:richtexteditor="sap.fe.macros.richtexteditor"
>
	<macros:RichTextEditorWithMetadata metaPath="Description" id="myRichTextEditor">
		<macros:buttonGroups>
			<richtexteditor:ButtonGroup name="font-style" visible="true" priority="10" buttons="bold,italic,underline" />
		</macros:buttonGroups>
	</macros:RichTextEditorWithMetadata>
</core:FragmentDefinition>
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: annotations.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});

```

**FILE**: Travel.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"TravelID": "00000001",
		"BeginDate": "2025-11-04",
		"EndDate": "2025-11-06",
		"BookingFee": "20.00",
		"TotalPrice": "900.00",
		"CurrencyCode_code": "USD",
		"Description": "Business Trip for Christine, Pierre",
		"TravelDetails": "This business trip includes a two-day customer workshop at the airport. The goal is the evaluation of the customer's use cases and the alignment on the roadmap for the upcoming year.",
		"TravelStatus_code": "A",
		"to_Agency_AgencyID": "070001"
	},
	{
		"TravelUUID": "53657221A8E4645C17002DF03754AB66",
		"TravelID": "00000002",
		"BeginDate": "2025-12-04",
		"EndDate": "2025-12-16",
		"BookingFee": "80.00",
		"TotalPrice": "3164.00",
		"CurrencyCode_code": "USD",
		"Description": "Lars Jensen site visit for system rollout support",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070002"
	},
	{
		"TravelUUID": "54657221A8E4645C17002DF03754AB66",
		"TravelID": "00000003",
		"BeginDate": "2025-08-04",
		"EndDate": "2025-08-08",
		"BookingFee": "40.00",
		"TotalPrice": "1871.00",
		"CurrencyCode_code": "USD",
		"Description": "John Smith customer workshop at Acme Corp headquarters",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070003"
	},
	{
		"TravelUUID": "55657221A8E4645C17002DF03754AB66",
		"TravelID": "00000004",
		"BeginDate": "2025-09-04",
		"EndDate": "2025-09-05",
		"BookingFee": "40.00",
		"TotalPrice": "1240.00",
		"CurrencyCode_code": "USD",
		"Description": "Anna Müller onboarding with new project team in Berlin",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "X",
		"to_Agency_AgencyID": "070003"
	}
]

```

--------------------------------

**TITLE**: Share

**INTRODUCTION**: The Share building block enables you to add a button that allows users to share content from your application with other users or applications.

**TAGS**: share, sharing, collaboration, link, export

**STEP**: Implementation

**DESCRIPTION**: To use the share building block, you need to define it in your view.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<macros:Share id="share" />
</core:FragmentDefinition>
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: annotations.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});

```

**FILE**: Travel.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"TravelID": "00000001",
		"BeginDate": "2025-11-04",
		"EndDate": "2025-11-06",
		"BookingFee": "20.00",
		"TotalPrice": "900.00",
		"CurrencyCode_code": "USD",
		"Description": "Business Trip for Christine, Pierre",
		"TravelDetails": "This business trip includes a two-day customer workshop at the airport. The goal is the evaluation of the customer's use cases and the alignment on the roadmap for the upcoming year.",
		"TravelStatus_code": "A",
		"to_Agency_AgencyID": "070001"
	},
	{
		"TravelUUID": "53657221A8E4645C17002DF03754AB66",
		"TravelID": "00000002",
		"BeginDate": "2025-12-04",
		"EndDate": "2025-12-16",
		"BookingFee": "80.00",
		"TotalPrice": "3164.00",
		"CurrencyCode_code": "USD",
		"Description": "Lars Jensen site visit for system rollout support",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070002"
	},
	{
		"TravelUUID": "54657221A8E4645C17002DF03754AB66",
		"TravelID": "00000003",
		"BeginDate": "2025-08-04",
		"EndDate": "2025-08-08",
		"BookingFee": "40.00",
		"TotalPrice": "1871.00",
		"CurrencyCode_code": "USD",
		"Description": "John Smith customer workshop at Acme Corp headquarters",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070003"
	},
	{
		"TravelUUID": "55657221A8E4645C17002DF03754AB66",
		"TravelID": "00000004",
		"BeginDate": "2025-09-04",
		"EndDate": "2025-09-05",
		"BookingFee": "40.00",
		"TotalPrice": "1240.00",
		"CurrencyCode_code": "USD",
		"Description": "Anna Müller onboarding with new project team in Berlin",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "X",
		"to_Agency_AgencyID": "070003"
	}
]

```

--------------------------------

**TITLE**: Status

**INTRODUCTION**: No introduction

**TAGS**: status, object status, status indicator

**STEP**: Usage of Status Building Block

**DESCRIPTION**: To use the Status building block, you must define the metaPath pointing to a DataField or a property. The criticality of the DataField (or its DataFieldDefault) determines its color. You can attach a press event to the Status to handle user interactions.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<VBox>
		<macros:Status
			metaPath="@com.sap.vocabularies.UI.v1.FieldGroup#ApprovalData/Data/0"
			id="myStatus"
			largeDesign="true"
			press=".onStatusPressed"
		/>
		<macros:Status metaPath="@com.sap.vocabularies.UI.v1.FieldGroup#ApprovalData/Data/1" id="mySecondStatus" />
	</VBox>
</core:FragmentDefinition>
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: Default.controller.ts

**LANGUAGE**: TypeScript

**CODE**:
```typescript
import PageController from "sap/fe/core/PageController";
import IllustratedMessage from "sap/m/IllustratedMessage";
import Popover from "sap/m/Popover";
import type Event from "sap/ui/base/Event";
import type Control from "sap/ui/core/Control";

/**
 * Controller for the status default example page.
 */
export default class DefaultController extends PageController {
	private popover?: Popover;

	/**
	 * Handles the status pressed event by opening a congratulations popover.
	 * @param oEvent The event object from the status press
	 */
	public async onStatusPressed(oEvent: Event): Promise<void> {
		if (!this.popover) {
			this.popover = new Popover({
				title: "Congratulations",
				content: [new IllustratedMessage({ illustrationType: "sapIllus-ReceiveAppreciation" })]
			});
		}
		const source = oEvent.getSource() as Control;
		this.popover.openBy(source);
	}
}

```

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: annotations.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});

```

**FILE**: Travel.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"TravelID": "00000001",
		"BeginDate": "2025-11-04",
		"EndDate": "2025-11-06",
		"BookingFee": "20.00",
		"TotalPrice": "900.00",
		"CurrencyCode_code": "USD",
		"Description": "Business Trip for Christine, Pierre",
		"TravelDetails": "This business trip includes a two-day customer workshop at the airport. The goal is the evaluation of the customer's use cases and the alignment on the roadmap for the upcoming year.",
		"TravelStatus_code": "A",
		"to_Agency_AgencyID": "070001"
	},
	{
		"TravelUUID": "53657221A8E4645C17002DF03754AB66",
		"TravelID": "00000002",
		"BeginDate": "2025-12-04",
		"EndDate": "2025-12-16",
		"BookingFee": "80.00",
		"TotalPrice": "3164.00",
		"CurrencyCode_code": "USD",
		"Description": "Lars Jensen site visit for system rollout support",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070002"
	},
	{
		"TravelUUID": "54657221A8E4645C17002DF03754AB66",
		"TravelID": "00000003",
		"BeginDate": "2025-08-04",
		"EndDate": "2025-08-08",
		"BookingFee": "40.00",
		"TotalPrice": "1871.00",
		"CurrencyCode_code": "USD",
		"Description": "John Smith customer workshop at Acme Corp headquarters",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070003"
	},
	{
		"TravelUUID": "55657221A8E4645C17002DF03754AB66",
		"TravelID": "00000004",
		"BeginDate": "2025-09-04",
		"EndDate": "2025-09-05",
		"BookingFee": "40.00",
		"TotalPrice": "1240.00",
		"CurrencyCode_code": "USD",
		"Description": "Anna Müller onboarding with new project team in Berlin",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "X",
		"to_Agency_AgencyID": "070003"
	}
]

```

--------------------------------

**TITLE**: Custom Column

**INTRODUCTION**: The Table building block enables you to render custom columns in a table.

**TAGS**: table extensions, custom columns, custom actions, APIs

**STEP**: Add Custom Columns

**DESCRIPTION**: You can add custom columns to your table. In this example, a process flow is added as a custom column. By specifying property names in the 'properties' attribute of the column, users can sort, group, export, and paste data based on these properties.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros" xmlns:macrosTable="sap.fe.macros.table">
	<macros:Table metaPath="/Travel/@com.sap.vocabularies.UI.v1.LineItem">
		<macros:columns>
			<macrosTable:Column
				header="My Column"
				importance="High"
				width="20em"
				key="myColumnKey"
				properties="ApprovalStatus,PaymentStatus,ConfirmationStatus"
			>
				<core:Fragment fragmentName="sap.fe.core.fpmExplorer.customColumn.CustomColumn" type="XML" />
			</macrosTable:Column>
		</macros:columns>
	</macros:Table>
</core:FragmentDefinition>
```

**STEP**: Add Columns through Manifest

**DESCRIPTION**: If you want to add custom columns to your object page table rendered through UI.Facet annotations, you can use the 'columns' property in the controlConfiguration section of the respective UI.LineItem.

**LANGUAGE**: JSON

**CODE**:
```json
{
	"sample": {
		"type": "Component",
		"id": "sample",
		"name": "sap.fe.templates.ObjectPage",
		"options": {
			"settings": {
				"contextPath": "/Travel",
				"controlConfiguration": {
					"to_Booking/@com.sap.vocabularies.UI.v1.LineItem": {
						"columns": {
							"CustomColumnOnObjectPage": {
								"header": "{i18n>bookingProcess}",
								"width": "15em",
								"importance": "High",
								"horizontalAlign": "Left",
								"position": {
									"placement": "After",
									"anchor": "DataField::ConnectionID"
								},
								"template": "sap.fe.core.fpmExplorer.CustomColumn",
								"availability": "Default"
							}
						}
					}
				}
			}
		}
	}
}
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: CustomColumn.fragment.xml

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns:commons="sap.suite.ui.commons" xmlns="sap.m">
	<commons:MicroProcessFlow renderType="NoWrap">
		<commons:content>
			<commons:MicroProcessFlowItem state="{ApprovalStatus}" title="{i18n>approvalStatus}" />
			<commons:MicroProcessFlowItem state="{PaymentStatus}" title="{i18n>paymentStatus}" />
			<commons:MicroProcessFlowItem state="{ConfirmationStatus}" title="{i18n>confirmationStatus}" />
		</commons:content>
	</commons:MicroProcessFlow>
</core:FragmentDefinition>

```

**FILE**: localService.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {TravelService.Travel} from '../../../../../service/service';
using from '../../../../../service/annotations';

extend entity TravelService.Travel with {
  ApprovalStatus     : String;
  PaymentStatus      : String;
  ConfirmationStatus : String;
};

annotate TravelService.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {Value: BookingFee},
  {Value: TotalPrice}
];

```

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: annotations.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});

```

--------------------------------

**TITLE**: Custom Action

**INTRODUCTION**: The Table building block enables you to define custom actions in a table.

**TAGS**: custom actions, row press handler, selection change handler, extensions

**STEP**: Add Custom Actions

**DESCRIPTION**: You can add custom actions to your table.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros" xmlns:macrosTable="sap.fe.macros.table">
	<macros:Table metaPath="/Travel/@com.sap.vocabularies.UI.v1.LineItem">
		<macros:actions>
			<macrosTable:Action
				key="customAction"
				text="My Custom Action"
				press=".onPressAction"
				placement="After"
				requiresSelection="true"
			/>
			<macrosTable:ActionGroup key="customActionGroup" text="My Action Group" placement="After" anchor="customAction">
				<macrosTable:Action text="Menu Action 1" press=".onPressMenuAction" key="menuAction1" />
				<macrosTable:Action text="Menu Action 2" press=".onPressMenuAction" enabled="false" key="menuAction2" />
			</macrosTable:ActionGroup>
		</macros:actions>
	</macros:Table>
</core:FragmentDefinition>
```

**STEP**: Add Custom Menu Actions

**DESCRIPTION**: You can also add custom menu actions to your table.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros" xmlns:macrosTable="sap.fe.macros.table">
	<macros:Table metaPath="/Travel/@com.sap.vocabularies.UI.v1.LineItem">
		<macros:actions>
			<macrosTable:Action
				key="customAction"
				text="My Custom Action"
				press=".onPressAction"
				placement="After"
				requiresSelection="true"
			/>
			<macrosTable:ActionGroup key="customActionGroup" text="My Action Group" placement="After" anchor="customAction">
				<macrosTable:Action text="Menu Action 1" press=".onPressMenuAction" key="menuAction1" />
				<macrosTable:Action text="Menu Action 2" press=".onPressMenuAction" enabled="false" key="menuAction2" />
			</macrosTable:ActionGroup>
		</macros:actions>
	</macros:Table>
</core:FragmentDefinition>
```

**STEP**: Add Actions through Manifest

**DESCRIPTION**: If you want to add custom actions to your object page table rendered through UI.Facet annotations, you can use the 'actions' property in the controlConfiguration section of the respective UI.LineItem.

**LANGUAGE**: JSON

**CODE**:
```json
{
	"sample": {
		"type": "Component",
		"id": "sample",
		"name": "sap.fe.templates.ObjectPage",
		"options": {
			"settings": {
				"contextPath": "/Travel",
				"controlConfiguration": {
					"to_Booking/@com.sap.vocabularies.UI.v1.LineItem": {
						"actions": {
							"customAction": {
								"press": "sap.fe.core.fpmExplorer.customTableAction.CustomAction.onPressAction",
								"text": "My Custom Action"
							},
							"menuAction1": {
								"text": "Menu Action 1",
								"press": "sap.fe.core.fpmExplorer.customTableAction.CustomAction.onPressMenuAction"
							},
							"menuAction2": {
								"text": "Menu Action 2",
								"press": "sap.fe.core.fpmExplorer.customTableAction.CustomAction.onPressMenuAction"
							},
							"DataFieldForActionGroup::MyActionGroup": {
								"menu": ["menuAction1", "menuAction2"],
								"position": {
									"anchor": "customAction",
									"position": "After"
								}
							}
						}
					}
				}
			}
		}
	}
}
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: annotations.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});

```

--------------------------------

**TITLE**: Analytical Table

**INTRODUCTION**: Analytical tables enable you to display and manage your data efficiently. This table type provides powerful functionalities, including advanced grouping and aggregation.

**TAGS**: analytical table, analytics, aggregation, grouping, totals

**STEP**: Annotating a Service as an Analytical Service

**DESCRIPTION**: To set the analytical capabilities of your service or entity, use the Aggregation.ApplySupported annotation at the entity set level. The analytical table offers the possibility to group rows based on groupable properties. You must define which properties are groupable so that the table allows grouping the relevant properties. To annotate a set of properties as groupable, add it to the GroupableProperties annotation.

**LANGUAGE**: CDS

**CODE**:
```cds
service Service {
  @Aggregation.CustomAggregate #NumberProperty: 'Edm.Decimal'
  @Aggregation.ApplySupported                 : {
    GroupableProperties   : [StringProperty, ],
    AggregatableProperties: [{Property: NumberProperty}]
  }

  @odata.draft.enabled
  entity RootEntity {
    key ID              : Integer       @Common.Label: 'Agency ID';
        StringProperty  : String        @Common.Label: 'Agency';
        IntegerProperty : Integer       @Common.Label: 'Integer Property';
        NumberProperty  : Decimal(4, 2) @Common.Label: 'Amount';
        BooleanProperty : Boolean       @Common.Label: 'Boolean Property';
        DateProperty    : Date          @Common.Label: 'Date Property';
        TimeProperty    : Time          @Common.Label: 'Time Property';
        Criticality     : Integer;
        emailAddress    : String        @Communication.IsEmailAddress;
        phoneNumber     : String        @Communication.IsPhoneNumber;
        role            : String;
        PostalCode      : String;
        CityName        : String;
        Country         : String;
  }

  annotate RootEntity with @(UI: {LineItem: {
    ![@UI.Criticality]: Criticality,
    $value            : [
      {Value: ID},
      {Value: StringProperty},
      {
        Value             : NumberProperty,
        @UI.Importance    : #High,
        @HTML5.CssDefaults: {width: '10em'}
      },

    ]
  }});
}
```

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="Aggregation.ApplySupported">
	<Record Type="Aggregation.ApplySupportedType">
		<PropertyValue Property="GroupableProperties">
			<Collection>
				<PropertyPath>StringProperty</PropertyPath>
			</Collection>
		</PropertyValue>
		<PropertyValue Property="AggregatableProperties">
			<Collection>
				<Record Type="Aggregation.AggregatablePropertyType">
					<PropertyValue Property="Property" PropertyPath="NumberProperty" />
				</Record>
			</Collection>
		</PropertyValue>
	</Record>
</Annotation>
```

**LANGUAGE**: ABAP

**CODE**:
```abap
@EndUserText.label: 'Root Entity'
@Metadata.allowExtensions: true
@ObjectModel.query.implementedBy: 'ABAP:CL_ROOT_ENTITY_QUERY'
@ObjectModel.semanticKey: ['ID']
@ObjectModel.transactionalProcessingEnabled: true
@ObjectModel.usageType:{
  serviceQuality: #X,
  sizeCategory: #S,
  dataClass: #MIXED
}
define root view entity RootEntity as select from root_entity_table
{
  @ObjectModel.text.element: ['StringProperty']
  @EndUserText.label: 'Agency ID'
  key ID,
  
  @EndUserText.label: 'Agency'
  @Search.defaultSearchElement: true
  StringProperty,
  
  @EndUserText.label: 'Integer Property'
  IntegerProperty,
  
  @Semantics.amount.currencyCode: 'Currency'
  @EndUserText.label: 'Amount'
  @Aggregation.default: #SUM
  NumberProperty,
  
  @EndUserText.label: 'Boolean Property'
  BooleanProperty,
  
  @EndUserText.label: 'Date Property'
  DateProperty,
  
  @EndUserText.label: 'Time Property'
  TimeProperty,
  
  Criticality,
  
  @Semantics.eMail.address: true
  emailAddress,
  
  @Semantics.telephone.type: [#CELL]
  phoneNumber,
  
  role,
  
  @Semantics.address.zipCode: true
  PostalCode,
  
  @Semantics.address.city: true
  CityName,
  
  @Semantics.address.country: true
  Country,
  
  @UI.lineItem: [
    { position: 10 },
    { position: 20 },
    { position: 30, importance: #HIGH, cssDefault.width: '10em' }
  ]
  @UI.identification: [
    { position: 10 },
    { position: 20 },
    { position: 30, importance: #HIGH, cssDefault.width: '10em' }
  ]
  virtual dummy : abap.char(1)
}
```

**STEP**: Defining Aggregatable Properties

**DESCRIPTION**: The properties can also be annotated as aggregatable (measures). To do so, at the entity level, you must also define the Aggregation.CustomAggregate annotation, which has the property name as the qualifier.

**LANGUAGE**: CDS

**CODE**:
```cds
service Service {
  @Aggregation.CustomAggregate #NumberProperty: 'Edm.Decimal'
  @Aggregation.ApplySupported                 : {
    GroupableProperties   : [StringProperty, ],
    AggregatableProperties: [{Property: NumberProperty}]
  }

  @odata.draft.enabled
  entity RootEntity {
    key ID              : Integer       @Common.Label: 'Agency ID';
        StringProperty  : String        @Common.Label: 'Agency';
        IntegerProperty : Integer       @Common.Label: 'Integer Property';
        NumberProperty  : Decimal(4, 2) @Common.Label: 'Amount';
        BooleanProperty : Boolean       @Common.Label: 'Boolean Property';
        DateProperty    : Date          @Common.Label: 'Date Property';
        TimeProperty    : Time          @Common.Label: 'Time Property';
        Criticality     : Integer;
        emailAddress    : String        @Communication.IsEmailAddress;
        phoneNumber     : String        @Communication.IsPhoneNumber;
        role            : String;
        PostalCode      : String;
        CityName        : String;
        Country         : String;
  }

  annotate RootEntity with @(UI: {LineItem: {
    ![@UI.Criticality]: Criticality,
    $value            : [
      {Value: ID},
      {Value: StringProperty},
      {
        Value             : NumberProperty,
        @UI.Importance    : #High,
        @HTML5.CssDefaults: {width: '10em'}
      },

    ]
  }});
}
```

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="Aggregation.CustomAggregate" Qualifier="NumberProperty" String="Edm.Decimal" />
```

**LANGUAGE**: ABAP

**CODE**:
```abap
@EndUserText.label: 'Root Entity'
@Metadata.allowExtensions: true
@ObjectModel.query.implementedBy: 'ABAP:CL_ROOT_ENTITY_QUERY'
@ObjectModel.semanticKey: ['ID']
@ObjectModel.transactionalProcessingEnabled: true
@ObjectModel.usageType:{
  serviceQuality: #X,
  sizeCategory: #S,
  dataClass: #MIXED
}
define root view entity RootEntity as select from root_entity_table
{
  @ObjectModel.text.element: ['StringProperty']
  @EndUserText.label: 'Agency ID'
  key ID,
  
  @EndUserText.label: 'Agency'
  @Search.defaultSearchElement: true
  StringProperty,
  
  @EndUserText.label: 'Integer Property'
  IntegerProperty,
  
  @Semantics.amount.currencyCode: 'Currency'
  @EndUserText.label: 'Amount'
  @Aggregation.default: #SUM
  NumberProperty,
  
  @EndUserText.label: 'Boolean Property'
  BooleanProperty,
  
  @EndUserText.label: 'Date Property'
  DateProperty,
  
  @EndUserText.label: 'Time Property'
  TimeProperty,
  
  Criticality,
  
  @Semantics.eMail.address: true
  emailAddress,
  
  @Semantics.telephone.type: [#CELL]
  phoneNumber,
  
  role,
  
  @Semantics.address.zipCode: true
  PostalCode,
  
  @Semantics.address.city: true
  CityName,
  
  @Semantics.address.country: true
  Country,
  
  @UI.lineItem: [
    { position: 10 },
    { position: 20 },
    { position: 30, importance: #HIGH, cssDefault.width: '10em' }
  ]
  @UI.identification: [
    { position: 10 },
    { position: 20 },
    { position: 30, importance: #HIGH, cssDefault.width: '10em' }
  ]
  virtual dummy : abap.char(1)
}
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: Sample.fragment.xml

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<macros:Table
		metaPath="/RootEntity/@com.sap.vocabularies.UI.v1.LineItem"
		id="MyAnalyticalTable"
		type="AnalyticalTable"
		rowCount="5"
		variantManagement="Control"
	/>
</core:FragmentDefinition>

```

**FILE**: RootEntity.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"ID": 1,
		"StringProperty": "Sunshine Travel",
		"NumberProperty": 1278.77,
		"IntegerProperty": 89,
		"DateProperty": "2022-03-03",
		"TimeProperty": "21:45:00",
		"BooleanProperty": false,
		"Criticality": 0,
		"emailAddress": "xxxxx@xyz.example",
		"phoneNumber": "+49-6227-12383",
		"role": "Consultant",
		"PostalCode": "75000",
		"CityName": "Paris",
		"Country": "France"
	},
	{
		"ID": 2,
		"StringProperty": "Fly High",
		"NumberProperty": 7575.41,
		"IntegerProperty": 39,
		"DateProperty": "2021-03-03",
		"TimeProperty": "09:45:00",
		"BooleanProperty": false,
		"Criticality": 1,
		"emailAddress": "xxxxx@xyz.example",
		"phoneNumber": "+49-6227-12383-1",
		"role": "Consultant",
		"PostalCode": "75000",
		"CityName": "Paris",
		"Country": "France"
	},
	{
		"ID": 3,
		"StringProperty": "Happy Hopping",
		"NumberProperty": 5638.12,
		"IntegerProperty": 9,
		"DateProperty": "2020-12-03",
		"TimeProperty": "21:37:00",
		"BooleanProperty": false,
		"Criticality": 2,
		"emailAddress": "xxxxx@xyz.example",
		"phoneNumber": "+49-6227-12383-2",
		"role": "Consultant",
		"PostalCode": "75000",
		"CityName": "Paris",
		"Country": "France"
	},
	{
		"ID": 4,
		"StringProperty": "Pink Panther",
		"NumberProperty": 2317.7,
		"IntegerProperty": 11,
		"DateProperty": "2019-03-01",
		"TimeProperty": "04:41:12",
		"BooleanProperty": true,
		"Criticality": 3,
		"emailAddress": "xxxxx@xyz.example",
		"phoneNumber": "+49-6227-12383-3",
		"role": "Consultant",
		"PostalCode": "12345",
		"CityName": "Frankfurt",
		"Country": "Germany"
	},
	{
		"ID": 5,
		"StringProperty": "Bella Italia",
		"NumberProperty": 1213.14,
		"IntegerProperty": 15,
		"DateProperty": "2019-03-01",
		"TimeProperty": "04:41:12",
		"BooleanProperty": true,
		"Criticality": 5,
		"emailAddress": "xxxxx@xyz.example",
		"phoneNumber": "+49-6227-12383-4",
		"role": "Consultant",
		"PostalCode": "12345",
		"CityName": "Rome",
		"Country": "Italy"
	}
]

```

--------------------------------

**TITLE**: Table

**INTRODUCTION**: The Table building block enables you to render a table based on an entitySet or a specific navigation property.

**TAGS**: table, overview, grid, list, data, rows, columns

**STEP**: Implementation

**DESCRIPTION**: The UI.LineItem annotation defines the columns of the table.

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});
```

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.LineItem">
	<Collection>
		<Record Type="UI.DataField">
			<PropertyValue Property="Value" Path="TravelID" />
		</Record>
		<Record Type="UI.DataField">
			<PropertyValue Property="Value" Path="BeginDate" />
		</Record>
		<Record Type="UI.DataField">
			<PropertyValue Property="Value" Path="EndDate" />
		</Record>
		<Record Type="UI.DataField">
			<PropertyValue Property="Value" Path="to_Agency_AgencyID" />
		</Record>
		<Record Type="UI.DataField">
			<PropertyValue Property="Value" Path="TravelStatus_code" />
			<PropertyValue Property="Criticality" Path="TravelStatus/criticality" />
			<Annotation Term="UI.Importance" EnumMember="UI.ImportanceType/High" />
			<Annotation Term="HTML5.CssDefaults">
				<Record Type="HTML5.CssDefaultsType">
					<PropertyValue Property="width" String="10em" />
				</Record>
			</Annotation>
		</Record>
		<Record Type="UI.DataField">
			<PropertyValue Property="Value" Path="BookingFee" />
		</Record>
		<Record Type="UI.DataField">
			<PropertyValue Property="Value" Path="TotalPrice" />
		</Record>
	</Collection>
</Annotation>
```

**LANGUAGE**: ABAP

**CODE**:
```abap
@Metadata.layer: #CORE
annotate view Z_C_TRAVEL_R with {
  @UI.lineItem: [
    { position: 10, importance: #HIGH },
    { position: 20, importance: #HIGH },
    { position: 30, importance: #HIGH },
    { position: 40, importance: #HIGH },
    { position: 50, importance: #HIGH, criticality: 'TravelStatus.criticality' },
    { position: 60 },
    { position: 70 }
  ]
  @UI.selectionField: [{ position: 10 }]
  TravelID;

  @UI.lineItem: [{ position: 20, importance: #HIGH }]
  @UI.selectionField: [{ position: 20 }]
  BeginDate;

  @UI.lineItem: [{ position: 30, importance: #HIGH }]
  @UI.selectionField: [{ position: 50 }]
  EndDate;

  @UI.lineItem: [{ position: 40, importance: #HIGH }]
  @UI.selectionField: [{ position: 20 }]
  to_Agency.AgencyID;

  @UI.lineItem: [{ position: 50, importance: #HIGH, criticality: 'TravelStatus.criticality' }]
  @UI.selectionField: [{ position: 30 }]
  TravelStatus.code;

  @UI.lineItem: [{ position: 60 }]
  BookingFee;

  @UI.lineItem: [{ position: 70 }]
  TotalPrice;
}
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: Sample.fragment.xml

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<macros:Table metaPath="/Travel/@com.sap.vocabularies.UI.v1.LineItem" />
</core:FragmentDefinition>

```

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: Travel.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"TravelID": "00000001",
		"BeginDate": "2025-11-04",
		"EndDate": "2025-11-06",
		"BookingFee": "20.00",
		"TotalPrice": "900.00",
		"CurrencyCode_code": "USD",
		"Description": "Business Trip for Christine, Pierre",
		"TravelDetails": "This business trip includes a two-day customer workshop at the airport. The goal is the evaluation of the customer's use cases and the alignment on the roadmap for the upcoming year.",
		"TravelStatus_code": "A",
		"to_Agency_AgencyID": "070001"
	},
	{
		"TravelUUID": "53657221A8E4645C17002DF03754AB66",
		"TravelID": "00000002",
		"BeginDate": "2025-12-04",
		"EndDate": "2025-12-16",
		"BookingFee": "80.00",
		"TotalPrice": "3164.00",
		"CurrencyCode_code": "USD",
		"Description": "Lars Jensen site visit for system rollout support",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070002"
	},
	{
		"TravelUUID": "54657221A8E4645C17002DF03754AB66",
		"TravelID": "00000003",
		"BeginDate": "2025-08-04",
		"EndDate": "2025-08-08",
		"BookingFee": "40.00",
		"TotalPrice": "1871.00",
		"CurrencyCode_code": "USD",
		"Description": "John Smith customer workshop at Acme Corp headquarters",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070003"
	},
	{
		"TravelUUID": "55657221A8E4645C17002DF03754AB66",
		"TravelID": "00000004",
		"BeginDate": "2025-09-04",
		"EndDate": "2025-09-05",
		"BookingFee": "40.00",
		"TotalPrice": "1240.00",
		"CurrencyCode_code": "USD",
		"Description": "Anna Müller onboarding with new project team in Berlin",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "X",
		"to_Agency_AgencyID": "070003"
	}
]

```

--------------------------------

**TITLE**: Usage with Filter Bar

**INTRODUCTION**: Linking the Table building block to the FilterBar building block enables you to render a filter bar for the table.

**TAGS**: filter bar, live mode, filtering, search, integration

**STEP**: Implementation

**DESCRIPTION**: You can connect the Table with a Filter Bar by using the 'filterBar' property of the Table building block. You need to provide the ID of the Filter Bar. This ID can be a local or a global one.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<VBox>
		<macros:FilterBar metaPath="@com.sap.vocabularies.UI.v1.SelectionFields" id="FilterBar" />
		<macros:Table metaPath="@com.sap.vocabularies.UI.v1.LineItem" id="LineItemTable" filterBar="FilterBar" initialLoad="true" />
	</VBox>
</core:FragmentDefinition>
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: annotations.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});

```

**FILE**: Travel.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"TravelID": "00000001",
		"BeginDate": "2025-11-04",
		"EndDate": "2025-11-06",
		"BookingFee": "20.00",
		"TotalPrice": "900.00",
		"CurrencyCode_code": "USD",
		"Description": "Business Trip for Christine, Pierre",
		"TravelDetails": "This business trip includes a two-day customer workshop at the airport. The goal is the evaluation of the customer's use cases and the alignment on the roadmap for the upcoming year.",
		"TravelStatus_code": "A",
		"to_Agency_AgencyID": "070001"
	},
	{
		"TravelUUID": "53657221A8E4645C17002DF03754AB66",
		"TravelID": "00000002",
		"BeginDate": "2025-12-04",
		"EndDate": "2025-12-16",
		"BookingFee": "80.00",
		"TotalPrice": "3164.00",
		"CurrencyCode_code": "USD",
		"Description": "Lars Jensen site visit for system rollout support",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070002"
	},
	{
		"TravelUUID": "54657221A8E4645C17002DF03754AB66",
		"TravelID": "00000003",
		"BeginDate": "2025-08-04",
		"EndDate": "2025-08-08",
		"BookingFee": "40.00",
		"TotalPrice": "1871.00",
		"CurrencyCode_code": "USD",
		"Description": "John Smith customer workshop at Acme Corp headquarters",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070003"
	},
	{
		"TravelUUID": "55657221A8E4645C17002DF03754AB66",
		"TravelID": "00000004",
		"BeginDate": "2025-09-04",
		"EndDate": "2025-09-05",
		"BookingFee": "40.00",
		"TotalPrice": "1240.00",
		"CurrencyCode_code": "USD",
		"Description": "Anna Müller onboarding with new project team in Berlin",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "X",
		"to_Agency_AgencyID": "070003"
	}
]

```

--------------------------------

**TITLE**: Highlighting Lines

**INTRODUCTION**: The Table building block enables you to add semantic highlights to line items in tables, based on their criticality.

**TAGS**: highlighting, lines, conditional formatting, colors, status

**STEP**: Implementation

**DESCRIPTION**: Add a LineItem criticality annotation for the line items of the entity type that is used by a table.

**LANGUAGE**: CDS

**CODE**:
```cds
using {TravelService.Travel} from '../../../../../service/service';
using from '../../../../../service/annotations';

annotate TravelService.Travel with @UI.LineItem: {
  ![@UI.Criticality]: TravelStatus.criticality,
  $value            : [
    {Value: TravelID},
    {Value: BeginDate},
    {Value: EndDate},
    {Value: to_Agency_AgencyID},
    {Value: BookingFee},
    {Value: TotalPrice}
  ]
};
```

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.LineItem">
	<Collection>
		<Record Type="UI.DataField">
			<PropertyValue Property="Value" Path="TravelID" />
		</Record>
		<Record Type="UI.DataField">
			<PropertyValue Property="Value" Path="BeginDate" />
		</Record>
		<Record Type="UI.DataField">
			<PropertyValue Property="Value" Path="EndDate" />
		</Record>
		<Record Type="UI.DataField">
			<PropertyValue Property="Value" Path="to_Agency_AgencyID" />
		</Record>
		<Record Type="UI.DataField">
			<PropertyValue Property="Value" Path="BookingFee" />
		</Record>
		<Record Type="UI.DataField">
			<PropertyValue Property="Value" Path="TotalPrice" />
		</Record>
	</Collection>
	<Annotation Term="UI.Criticality" Path="TravelStatus/criticality" />
</Annotation>
```

**LANGUAGE**: ABAP

**CODE**:
```abap
@Metadata.layer: #CORE
annotate view TravelService.Travel with {
  @UI.lineItem: [
    { position: 10 },
    { position: 20 },
    { position: 30 },
    { position: 40 },
    { position: 50 },
    { position: 60 }
  ]
  @UI.identification: [
    { position: 10 },
    { position: 20 },
    { position: 30 },
    { position: 40 },
    { position: 50 },
    { position: 60 }
  ]
  TravelID;
  BeginDate;
  EndDate;
  to_Agency.AgencyID;
  BookingFee;
  TotalPrice;

  @UI.lineItem: [{ criticality: 'TravelStatus.criticality' }]
  TravelStatus;
}
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: Sample.fragment.xml

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<macros:Table metaPath="/Travel/@com.sap.vocabularies.UI.v1.LineItem" />
</core:FragmentDefinition>

```

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: annotations.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});

```

**FILE**: Travel.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"TravelID": "00000001",
		"BeginDate": "2025-11-04",
		"EndDate": "2025-11-06",
		"BookingFee": "20.00",
		"TotalPrice": "900.00",
		"CurrencyCode_code": "USD",
		"Description": "Business Trip for Christine, Pierre",
		"TravelStatus_code": "A",
		"to_Agency_AgencyID": "070001"
	},
	{
		"TravelUUID": "53657221A8E4645C17002DF03754AB66",
		"TravelID": "00000002",
		"BeginDate": "2025-12-04",
		"EndDate": "2025-12-16",
		"BookingFee": "80.00",
		"TotalPrice": "3164.00",
		"CurrencyCode_code": "USD",
		"Description": "Lars Jensen site visit for system rollout support",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070002"
	},
	{
		"TravelUUID": "54657221A8E4645C17002DF03754AB66",
		"TravelID": "00000003",
		"BeginDate": "2025-08-04",
		"EndDate": "2025-08-08",
		"BookingFee": "40.00",
		"TotalPrice": "1871.00",
		"CurrencyCode_code": "USD",
		"Description": "John Smith customer workshop at Acme Corp headquarters",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070003"
	},
	{
		"TravelUUID": "55657221A8E4645C17002DF03754AB66",
		"TravelID": "00000004",
		"BeginDate": "2025-09-04",
		"EndDate": "2025-09-05",
		"BookingFee": "40.00",
		"TotalPrice": "1240.00",
		"CurrencyCode_code": "USD",
		"Description": "Anna Müller onboarding with new project team in Berlin",
		"TravelStatus_code": "X",
		"to_Agency_AgencyID": "070003"
	}
]

```

**FILE**: TravelStatus.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"code": "O",
		"name": "Open",
		"descr": "Open",
		"fieldControl": 7,
		"createDeleteHidden": false,
		"insertDeleteRestriction": true,
		"criticality": 5
	},
	{
		"code": "A",
		"name": "Accepted",
		"descr": "Accepted",
		"fieldControl": 1,
		"createDeleteHidden": true,
		"insertDeleteRestriction": false,
		"criticality": 3
	},
	{
		"code": "X",
		"name": "Canceled",
		"descr": "Canceled",
		"fieldControl": 7,
		"createDeleteHidden": true,
		"insertDeleteRestriction": false,
		"criticality": 1
	}
]

```

--------------------------------

**TITLE**: Mass Edit

**INTRODUCTION**: Mass editing enables users to simultaneously change multiple objects that share the same editable properties.

**TAGS**: mass edit, bulk edit, massedit, mass-edit, quickfilter, quickvariant

**STEP**: Enabling Mass Edit

**DESCRIPTION**: You can enable mass edit by adding the 'massEdit' aggregation to the table. The 'visibleFields' property lets you specify which fields are available in the mass edit dialog, even if these fields are not displayed in the table. The 'ignoredFields' property lets you hide specific fields from the mass edit dialog, even if these fields are displayed in the table.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition
	xmlns:core="sap.ui.core"
	xmlns="sap.m"
	xmlns:macros="sap.fe.macros"
	xmlns:macrosTable="sap.fe.macros.Table"
	xmlns:f="sap.ui.layout.form"
>
	<macros:Table metaPath="/Travel/@com.sap.vocabularies.UI.v1.LineItem">
		<massEdit>
			<macrosTable:MassEdit visibleFields="BeginDate,EndDate,BookingFee" ignoredFields="TravelID,TravelStatus_code">
				<f:FormContainer>
					<f:formElements>
						<f:FormElement label="Custom Element">
							<Text text="This is a custom fragment displayed in the Mass-edit dialog" />
						</f:FormElement>
					</f:formElements>
				</f:FormContainer>
			</macrosTable:MassEdit>
		</massEdit>
	</macros:Table>
</core:FragmentDefinition>
```

**STEP**: Adding Custom Content

**DESCRIPTION**: You can add custom content to the mass edit dialog by using the 'customContent' aggregation of the massEdit. This allows you to include additional fields or controls in the dialog.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition
	xmlns:core="sap.ui.core"
	xmlns="sap.m"
	xmlns:macros="sap.fe.macros"
	xmlns:macrosTable="sap.fe.macros.Table"
	xmlns:f="sap.ui.layout.form"
>
	<macros:Table metaPath="/Travel/@com.sap.vocabularies.UI.v1.LineItem">
		<massEdit>
			<macrosTable:MassEdit visibleFields="BeginDate,EndDate,BookingFee" ignoredFields="TravelID,TravelStatus_code">
				<f:FormContainer>
					<f:formElements>
						<f:FormElement label="Custom Element">
							<Text text="This is a custom fragment displayed in the Mass-edit dialog" />
						</f:FormElement>
					</f:formElements>
				</f:FormContainer>
			</macrosTable:MassEdit>
		</massEdit>
	</macros:Table>
</core:FragmentDefinition>
```

**STEP**: Enabling through Manifest

**DESCRIPTION**: If you want to enable mass edit to your object page table rendered through UI.Facet annotations, you can use the 'enableMassEdit' property in the controlConfiguration section of the respective UI.LineItem.

**LANGUAGE**: JSON

**CODE**:
```json
{
	"sample": {
		"type": "Component",
		"id": "sample",
		"name": "sap.fe.templates.ObjectPage",
		"options": {
			"settings": {
				"contextPath": "/Travel",
				"controlConfiguration": {
					"to_Booking/@com.sap.vocabularies.UI.v1.LineItem": {
						"enableMassEdit": {
							"visibleFields": "BeginDate,EndDate,BookingFee",
							"ignoredFields": "TravelID,TravelStatus_code"
						}
					}
				}
			}
		}
	}
}
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: annotations.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});

```

**FILE**: Travel.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"TravelID": "00000001",
		"BeginDate": "2025-11-04",
		"EndDate": "2025-11-06",
		"BookingFee": "20.00",
		"TotalPrice": "900.00",
		"CurrencyCode_code": "USD",
		"Description": "Business Trip for Christine, Pierre",
		"TravelDetails": "This business trip includes a two-day customer workshop at the airport. The goal is the evaluation of the customer's use cases and the alignment on the roadmap for the upcoming year.",
		"TravelStatus_code": "A",
		"to_Agency_AgencyID": "070001"
	},
	{
		"TravelUUID": "53657221A8E4645C17002DF03754AB66",
		"TravelID": "00000002",
		"BeginDate": "2025-12-04",
		"EndDate": "2025-12-16",
		"BookingFee": "80.00",
		"TotalPrice": "3164.00",
		"CurrencyCode_code": "USD",
		"Description": "Lars Jensen site visit for system rollout support",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070002"
	},
	{
		"TravelUUID": "54657221A8E4645C17002DF03754AB66",
		"TravelID": "00000003",
		"BeginDate": "2025-08-04",
		"EndDate": "2025-08-08",
		"BookingFee": "40.00",
		"TotalPrice": "1871.00",
		"CurrencyCode_code": "USD",
		"Description": "John Smith customer workshop at Acme Corp headquarters",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070003"
	},
	{
		"TravelUUID": "55657221A8E4645C17002DF03754AB66",
		"TravelID": "00000004",
		"BeginDate": "2025-09-04",
		"EndDate": "2025-09-05",
		"BookingFee": "40.00",
		"TotalPrice": "1240.00",
		"CurrencyCode_code": "USD",
		"Description": "Anna Müller onboarding with new project team in Berlin",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "X",
		"to_Agency_AgencyID": "070003"
	}
]

```

--------------------------------

**TITLE**: Table APIs

**INTRODUCTION**: The Table building block enables you to extend the table using APIs.

**TAGS**: table APIs, presentation variant, get presentation variant, set presentation variant, message handling, variant management

**STEP**: Message Handling

**DESCRIPTION**: You can add and remove messages using the APIs provided by the Table building block.

**STEP**: No Data

**DESCRIPTION**: You can add a custom illustrated message shown once the table shows no data using the APIs provided by the Table building block.

**STEP**: Presentation Variant

**DESCRIPTION**: You can get and set the presentation variant of a table using the APIs provided by the Table building block.

**STEP**: Selection Variant

**DESCRIPTION**: You can get and set the selection variant of a table using the APIs provided by the Table building block.

**STEP**: Variant Management

**DESCRIPTION**: You can get the currently selected variant and change the variant of a table using the APIs provided by the Table building block.

**STEP**: Column Visibility

**DESCRIPTION**: You can hide and show columns of a table using the APIs provided by the Table building block. Please note, this API is still experimental and may change in the future.

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: TablePublicAPIs.controller.ts

**LANGUAGE**: TypeScript

**CODE**:
```typescript
import Log from "sap/base/Log";
import PageController from "sap/fe/core/PageController";
import type Table from "sap/fe/macros/table/TableAPI";
import PresentationVariant from "sap/fe/navigation/PresentationVariant";
import SelectionVariant from "sap/fe/navigation/SelectionVariant";
import type Button from "sap/m/Button";
import IllustratedMessage from "sap/m/IllustratedMessage";
import IllustratedMessageSize from "sap/m/IllustratedMessageSize";
import IllustratedMessageType from "sap/m/IllustratedMessageType";
import type Input from "sap/m/Input";
import MessageToast from "sap/m/MessageToast";
import { ButtonType } from "sap/m/library";
import type UI5Event from "sap/ui/base/Event";
import MessageType from "sap/ui/core/message/MessageType";
import JSONModel from "sap/ui/model/json/JSONModel";

export default class TablePublicAPIsController extends PageController {
	private addedMessages: string[] = [];

	public onAfterRendering(event?: UI5Event): void {
		const view = this.getView();
		const interactionModel = new JSONModel({
			pvObject: "",
			setPVButton: {
				type: ButtonType.Transparent,
				tooltip: ""
			},
			svObject: "",
			setSVButton: {
				type: ButtonType.Transparent,
				tooltip: ""
			}
		});
		view.setModel(interactionModel, "interactionModel");
		this.tablePVToCodeEditor();
		this.tableSVToCodeEditor();

		// the beforeRebindTable and setNoData APIs are missing in the types, so we need to extend the Table type here
		type TableExtended = Table & { attachBeforeRebindTable: (fn: () => void) => void; setNoData: (noData: IllustratedMessage) => void };

		const table = view.byId("myTable") as TableExtended;
		table.attachBeforeRebindTable(() => {
			const illustratedMessage = new IllustratedMessage();
			illustratedMessage.setTitle("No Travel Request");
			illustratedMessage.setDescription("Time to travel - create new travel request now.");
			illustratedMessage.setIllustrationType(IllustratedMessageType.BalloonSky);
			illustratedMessage.setIllustrationSize(IllustratedMessageSize.Large);
			table.setNoData(illustratedMessage);
		});
		this.showColumn();
	}

	public tablePVToCodeEditor(): void {
		// accessing custom element from FPM sample
		const table = this.getView().byId("myTable") as Table;
		const interactionModel = table.getModel("interactionModel") as JSONModel;

		/** getPresentationVariant API: gives the current presentation from the table */
		/*****************************************************************************************/
		table.getPresentationVariant().then((presentationVariant: PresentationVariant) => {
			interactionModel.setProperty("/pvObject", JSON.stringify(presentationVariant.toJSONObject(), null, "  "));
		});
		/*****************************************************************************************/
	}

	public codeEditorPVToTable(): void {
		// accessing custom element from FPM sample
		const table = this.getView().byId("myTable") as Table;
		const interactionModel = table.getModel("interactionModel") as JSONModel;
		const pvString = interactionModel.getProperty("/pvObject");
		try {
			const presentationVariantToSet = new PresentationVariant(pvString);

			/** setPresentationVariant API: to apply the presentation variant to table */
			/**************************************************************************/
			table
				.setPresentationVariant(presentationVariantToSet)
				.then(() => {
					MessageToast.show("Presentation variant from code editor is set to table.");
				})
				.catch((err: Error | string) => {
					const message = err instanceof Error ? err.message : String(err);
					Log.error(`set PV error: ${message}`);
				});
			/**************************************************************************/
		} catch (err) {
			const message = err instanceof Error ? err.message : String(err);
			Log.error(`PV creation error: ${message}`);
		}
	}

	public validatePV(event: UI5Event<{ value: string }, Button>): void {
		// To validate the presentation variant in code editor and change the status and type of "setPresentationVariant" button.
		const interactionModel = event.getSource().getModel("interactionModel") as JSONModel;
		const pvString = event.getParameter("value");
		try {
			const presentationVariantToSet = new PresentationVariant(pvString);
			interactionModel.setProperty("/setPVButton/type", presentationVariantToSet ? "Success" : "Critical");
		} catch (err) {
			interactionModel.setProperty("/setPVButton/type", "Critical");
			interactionModel.setProperty("/setPVButton/tooltip", "Presentation Variant validation failed in code editor");
		}
	}

	public tableSVToCodeEditor(): void {
		// accessing custom element from FPM sample
		const table = this.getView().byId("myTable") as Table;
		const interactionModel = table.getModel("interactionModel") as JSONModel;

		/** getSelectionVariant API: gives the current selection from the table */
		/*****************************************************************************************/
		table.getSelectionVariant().then((selectionVariant: SelectionVariant) => {
			interactionModel.setProperty("/svObject", JSON.stringify(selectionVariant.toJSONObject(), null, "  "));
		});
		/*****************************************************************************************/
	}

	public codeEditorSVToTable(): void {
		// accessing custom element from FPM sample
		const table = this.getView().byId("LineItemTable") as Table;
		const interactionModel = table.getModel("interactionModel") as JSONModel;
		const svString = interactionModel.getProperty("/svObject");
		try {
			const selectionVariantToSet = new SelectionVariant(svString);

			/** setSelectionVariant API: to apply the selection variant to table */
			/**************************************************************************/
			table
				.setSelectionVariant(selectionVariantToSet)
				.then(() => {
					MessageToast.show("Selection variant from code editor is set to table.");
				})
				.catch((err: Error | string) => {
					const message = err instanceof Error ? err.message : String(err);
					Log.error(`set SV error: ${message}`);
				});
			/**************************************************************************/
		} catch (err) {
			const message = err instanceof Error ? err.message : String(err);
			Log.error(`SV creation error: ${message}`);
		}
	}

	public validateSV(event: UI5Event<{ value: string }, Button>): void {
		const interactionModel = event.getSource().getModel("interactionModel") as JSONModel;
		const svString = event.getParameter("value");
		try {
			const selectionVariantToSet = new SelectionVariant(svString);
			interactionModel.setProperty("/setSVButton/type", selectionVariantToSet ? "Success" : "Critical");
		} catch (err) {
			interactionModel.setProperty("/setSVButton/type", "Critical");
			interactionModel.setProperty("/setSVButton/tooltip", "Selection Variant validation failed in code editor");
		}
	}

	public async addMessage(): Promise<void> {
		const table = this.byId("myTable") as Table;

		const myparameters = {
			type: MessageType.Error,
			message: "This is an error message"
		};
		if (this.addedMessages === undefined) {
			this.addedMessages = [];
		}

		this.addedMessages.push(await table.addMessage(myparameters));
	}

	public removeAllMessages(): void {
		const table = this.byId("myTable") as Table;

		this.addedMessages.forEach((element) => table.removeMessage(element));
		this.addedMessages = [];
	}

	public hideColumn(event: UI5Event<{}, Button>): void {
		const table = this.getView().byId("myTable") as Table;
		// Warning: this API is still experimental
		table.hideColumns(["DataField::TravelStatus_code"]);
		event.getSource().setEnabled(false);
		(this.getView().byId("showColumn") as Button).setEnabled(true);
	}

	public showColumn(event?: UI5Event<{}, Button>): void {
		const table = this.getView().byId("myTable") as Table;
		// Warning: this API is still experimental
		table.showColumns(["DataField::TravelStatus_code"]);
		(table.getModel("ui") as JSONModel).setProperty("/myColumnVisible", true);
		if (event) {
			event.getSource().setEnabled(false);
		}
		(this.getView().byId("hideColumn") as Button).setEnabled(true);
	}

	public tableGetVariantManagement(): void {
		const table = this.getView().byId("myTable") as Table;
		(this.getView().byId("variantManagementKey") as Input).setValue(table.getCurrentVariantKey() || "");
	}

	public tableSetVariantManagement(): void {
		const table = this.getView().byId("myTable") as Table;
		table.setCurrentVariantKey((this.getView().byId("variantManagementKey") as Input).getValue());
	}
}

```

**FILE**: Sample.fragment.xml

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros" xmlns:ce="sap.ui.codeeditor">
	<VBox>
		<macros:Table metaPath="/Travel/@com.sap.vocabularies.UI.v1.LineItem" id="myTable" variantManagement="Control" />
		<Panel expandable="false" expanded="false" headerText="Interacting with Table API" class="sapUiMediumMarginTop">
			<Panel expandable="true" expanded="false" headerText="Message Handling">
				<Button press=".addMessage" text="Add error message" />
				<Button press=".removeAllMessages" text="Remove all messages" />
			</Panel>

			<Panel expandable="true" expanded="false" headerText="No Data">
				<MessageStrip text="Delete all travel requests to see the custom no data message." type="Information" showIcon="true" />
			</Panel>

			<Panel expandable="true" expanded="false" headerText="Presentation Variant">
				<FlexBox direction="Column" fitContainer="true" justifyContent="Start">
					<HBox alignItems="Center" class="sapUi-Std-PaddingS">
						<Button width="100%" text="getPresentationVariant" press=".tablePVToCodeEditor" />
						<Text
							text="Click this button to get the table's current presentation variant to the code editor below."
							width="100%"
							class="sapUiSmallMargin"
						/>
					</HBox>
					<HBox alignItems="Center" class="sapUi-Std-PaddingS">
						<Button
							width="100%"
							text="setPresentationVariant"
							press=".codeEditorPVToTable"
							tooltip="{interactionModel>/setPVButton/tooltip}"
							type="{interactionModel>/setPVButton/type}"
						/>
						<Text
							text="Click this button to set the presentation variant from the code editor below to the table."
							width="100%"
							class="sapUiSmallMargin"
						/>
					</HBox>

					<ce:CodeEditor
						id="tablesDisplayTwo"
						type="json"
						lineNumbers="true"
						value="{interactionModel>/pvObject}"
						editable="true"
						liveChange=".validatePV"
						height="10rem"
					>
						<ce:layoutData>
							<FlexItemData growFactor="1" shrinkFactor="1" />
						</ce:layoutData>
					</ce:CodeEditor>
				</FlexBox>
			</Panel>

			<Panel expandable="true" expanded="false" headerText="Selection Variant">
				<FlexBox direction="Column" fitContainer="true" justifyContent="Start">
					<HBox alignItems="Center" class="sapUi-Std-PaddingS">
						<Button width="100%" text="getSelectionVariant" press=".tableSVToCodeEditor" />
						<Text
							text="Click this button to get the current selection variant from the table and insert it into the code editor."
							width="100%"
							class="sapUiSmallMargin"
						/>
					</HBox>
					<HBox alignItems="Center" class="sapUi-Std-PaddingS">
						<Button
							width="100%"
							text="setSelectionVariant"
							press=".codeEditorSVToTable"
							tooltip="{interactionModel>/setSVButton/tooltip}"
							type="{interactionModel>/setSVButton/type}"
						/>
						<Text
							text="Click this button to set the selection variant from the code editor below to the table."
							width="100%"
							class="sapUiSmallMargin"
						/>
					</HBox>

					<ce:CodeEditor
						id="tablesDisplayThree"
						type="json"
						lineNumbers="true"
						value="{interactionModel>/svObject}"
						editable="true"
						liveChange=".validateSV"
						height="10rem"
					>
						<ce:layoutData>
							<FlexItemData growFactor="1" shrinkFactor="1" />
						</ce:layoutData>
					</ce:CodeEditor>
				</FlexBox>
			</Panel>

			<Panel expandable="true" expanded="false" headerText="Variant Management">
				<Button press=".tableGetVariantManagement" text="Get Current Variant Management Key" />
				<Button press=".tableSetVariantManagement" text="Set Variant Management" />
				<Input id="variantManagementKey" placeholder="Enter Variant Management Key" />
			</Panel>

			<Panel expandable="true" expanded="false" headerText="Column Visibility">
				<Button press=".hideColumn" text="Hide Travel Status Column" id="hideColumn" />
				<Button press=".showColumn" text="Show Travel Status Column" id="showColumn" enabled="false" />
			</Panel>
		</Panel>
	</VBox>
</core:FragmentDefinition>

```

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: annotations.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});

```

**FILE**: Travel.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"TravelID": "00000001",
		"BeginDate": "2025-11-04",
		"EndDate": "2025-11-06",
		"BookingFee": "20.00",
		"TotalPrice": "900.00",
		"CurrencyCode_code": "USD",
		"Description": "Business Trip for Christine, Pierre",
		"TravelDetails": "This business trip includes a two-day customer workshop at the airport. The goal is the evaluation of the customer's use cases and the alignment on the roadmap for the upcoming year.",
		"TravelStatus_code": "A",
		"to_Agency_AgencyID": "070001"
	},
	{
		"TravelUUID": "53657221A8E4645C17002DF03754AB66",
		"TravelID": "00000002",
		"BeginDate": "2025-12-04",
		"EndDate": "2025-12-16",
		"BookingFee": "80.00",
		"TotalPrice": "3164.00",
		"CurrencyCode_code": "USD",
		"Description": "Lars Jensen site visit for system rollout support",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070002"
	},
	{
		"TravelUUID": "54657221A8E4645C17002DF03754AB66",
		"TravelID": "00000003",
		"BeginDate": "2025-08-04",
		"EndDate": "2025-08-08",
		"BookingFee": "40.00",
		"TotalPrice": "1871.00",
		"CurrencyCode_code": "USD",
		"Description": "John Smith customer workshop at Acme Corp headquarters",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070003"
	},
	{
		"TravelUUID": "55657221A8E4645C17002DF03754AB66",
		"TravelID": "00000004",
		"BeginDate": "2025-09-04",
		"EndDate": "2025-09-05",
		"BookingFee": "40.00",
		"TotalPrice": "1240.00",
		"CurrencyCode_code": "USD",
		"Description": "Anna Müller onboarding with new project team in Berlin",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "X",
		"to_Agency_AgencyID": "070003"
	}
]

```

--------------------------------

**TITLE**: Quick Variant Selection

**INTRODUCTION**: Quick variant selection provides segmented buttons in the toolbar to enable switching between the table content using a selection presentation variant annotation.

**TAGS**: quick variant, quickfilter, quickvariant, presets, filters

**STEP**: Enabling Quick Variant Selection

**DESCRIPTION**: You can enable quick variant selection in your table by using the 'quickVariantSelection' aggregation of the table macro. This allows you to define a set of selection presentation variants that users can switch between.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros" xmlns:macrosTable="sap.fe.macros.Table">
	<macros:Table metaPath="/Travel/@com.sap.vocabularies.UI.v1.LineItem">
		<macros:quickVariantSelection>
			<macrosTable:QuickVariantSelection
				paths="com.sap.vocabularies.UI.v1.SelectionPresentationVariant#All,com.sap.vocabularies.UI.v1.SelectionPresentationVariant#Approved"
				showCounts="true"
			/>
		</macros:quickVariantSelection>
	</macros:Table>
</core:FragmentDefinition>
```

**STEP**: Enabling through Manifest

**DESCRIPTION**: If you want to enable quick variant selection to your object page table rendered through UI.Facet annotations, you can use the 'quickVariantSelection' property in the controlConfiguration section of the respective UI.LineItem.

**LANGUAGE**: JSON

**CODE**:
```json
{
	"sample": {
		"type": "Component",
		"id": "sample",
		"name": "sap.fe.templates.ObjectPage",
		"options": {
			"settings": {
				"contextPath": "/Travel",
				"controlConfiguration": {
					"to_Booking/@com.sap.vocabularies.UI.v1.LineItem": {
						"quickVariantSelection": {
							"paths": [
								{
									"annotationPath": "com.sap.vocabularies.UI.v1.SelectionPresentationVariant#All"
								},
								{
									"annotationPath": "com.sap.vocabularies.UI.v1.SelectionPresentationVariant#Approved"
								}
							],
							"showCounts": true
						}
					}
				}
			}
		}
	}
}
```

**STEP**: Defining Selection Presentation Variants

**DESCRIPTION**: You can define selection presentation variants by using the UI.SelectionPresentationVariant in your CDS service. The selection presentation variants point to UI.SelectionVariant and UI.PresentationVariant annotations. These selection presentation variants will be used by the quick variant selection control to switch between different views of the table content.

**LANGUAGE**: CDS

**CODE**:
```cds
using {TravelService.Travel} from '../../../../../service/service';
using from '../../../../../service/annotations';

annotate TravelService.Travel with @UI: {
  LineItem                              : [
    {Value: TravelID},
    {Value: BeginDate},
    {Value: EndDate},
    {Value: to_Agency_AgencyID},
    {Value: BookingFee},
    {Value: TotalPrice}
  ],
  PresentationVariant                   : {
    $Type         : 'UI.PresentationVariantType',
    Visualizations: ['@UI.LineItem']
  },
  SelectionVariant #Approved            : {
    $Type        : 'UI.SelectionVariantType',
    Text         : 'Approved',
    SelectOptions: [{
      $Type       : 'UI.SelectOptionType',
      PropertyName: 'TravelStatus_code',
      Ranges      : [{
        $Type : 'UI.SelectionRangeType',
        Sign  : #I,
        Option: #EQ,
        Low   : 'A'
      }]
    }]
  },
  SelectionPresentationVariant #Approved: {
    $Type              : 'UI.SelectionPresentationVariantType',
    SelectionVariant   : ![@UI.SelectionVariant#Approved],
    PresentationVariant: ![@UI.PresentationVariant],
    Text               : 'Approved',
  },
  SelectionPresentationVariant #All     : {
    $Type              : 'UI.SelectionPresentationVariantType',
    SelectionVariant   : {
      $Type: 'UI.SelectionVariantType',
      Text : 'All'
    },
    PresentationVariant: ![@UI.PresentationVariant],
    Text               : 'All'
  }
};
```

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="TravelService.Travel">
	<Annotation Term="UI.PresentationVariant">
		<Record Type="UI.PresentationVariantType">
			<PropertyValue Property="Visualizations">
				<Collection>
					<AnnotationPath>@UI.LineItem</AnnotationPath>
				</Collection>
			</PropertyValue>
		</Record>
	</Annotation>
	<Annotation Term="UI.SelectionVariant" Qualifier="Approved">
		<Record Type="UI.SelectionVariantType">
			<PropertyValue Property="Text" String="Approved" />
			<PropertyValue Property="SelectOptions">
				<Collection>
					<Record Type="UI.SelectOptionType">
						<PropertyValue Property="PropertyName" PropertyPath="TravelStatus_code" />
						<PropertyValue Property="Ranges">
							<Collection>
								<Record Type="UI.SelectionRangeType">
									<PropertyValue Property="Sign" EnumMember="UI.SelectionRangeSignType/I" />
									<PropertyValue Property="Option" EnumMember="UI.SelectionRangeOptionType/EQ" />
									<PropertyValue Property="Low" String="A" />
								</Record>
							</Collection>
						</PropertyValue>
					</Record>
				</Collection>
			</PropertyValue>
		</Record>
	</Annotation>
	<Annotation Term="UI.SelectionPresentationVariant" Qualifier="Approved">
		<Record Type="UI.SelectionPresentationVariantType">
			<PropertyValue Property="SelectionVariant" Path="@UI.SelectionVariant#Approved" />
			<PropertyValue Property="PresentationVariant" Path="@UI.PresentationVariant" />
			<PropertyValue Property="Text" String="Approved" />
		</Record>
	</Annotation>
	<Annotation Term="UI.SelectionPresentationVariant" Qualifier="All">
		<Record Type="UI.SelectionPresentationVariantType">
			<PropertyValue Property="SelectionVariant">
				<Record Type="UI.SelectionVariantType">
					<PropertyValue Property="Text" String="All" />
				</Record>
			</PropertyValue>
			<PropertyValue Property="PresentationVariant" Path="@UI.PresentationVariant" />
			<PropertyValue Property="Text" String="All" />
		</Record>
	</Annotation>
</Annotations>
```

**LANGUAGE**: ABAP

**CODE**:
```abap
@Metadata.layer: #CORE
annotate view TravelService.Travel with {
  @UI.lineItem: [
    { position: 10 },
    { position: 20 },
    { position: 30 },
    { position: 40 },
    { position: 50 },
    { position: 60 }
  ]
  @UI.identification: [
    { position: 10 },
    { position: 20 },
    { position: 30 },
    { position: 40 },
    { position: 50 },
    { position: 60 }
  ]
  TravelID;
  BeginDate;
  EndDate;
  to_Agency.AgencyID;
  BookingFee;
  TotalPrice;

  @UI.lineItem: [{ criticality: 'TravelStatus.criticality' }]
  TravelStatus;

  @UI.presentationVariant: [{
    sortOrder: [{ by: 'TravelID', direction: #ASC }],
    visualizations: ['@UI.lineItem']
  }]
  dummy;

  @UI.selectionVariant: [{
    qualifier: 'Approved',
    text: 'Approved',
    filter: 'TravelStatus_code EQ ''A'''
  }]
  dummy2;

  @UI.selectionPresentationVariant: [{
    qualifier: 'Approved',
    text: 'Approved',
    selectionVariantQualifier: 'Approved',
    presentationVariantQualifier: ''
  }]
  dummy3;

  @UI.selectionPresentationVariant: [{
    qualifier: 'All',
    text: 'All',
    selectionVariantQualifier: '',
    presentationVariantQualifier: ''
  }]
  dummy4;
}
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: Travel.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"TravelID": "00000001",
		"BeginDate": "2025-11-04",
		"EndDate": "2025-11-06",
		"BookingFee": "20.00",
		"TotalPrice": "900.00",
		"CurrencyCode_code": "USD",
		"Description": "Business Trip for Christine, Pierre",
		"TravelStatus_code": "A",
		"to_Agency_AgencyID": "070001"
	},
	{
		"TravelUUID": "53657221A8E4645C17002DF03754AB66",
		"TravelID": "00000002",
		"BeginDate": "2025-12-04",
		"EndDate": "2025-12-16",
		"BookingFee": "80.00",
		"TotalPrice": "3164.00",
		"CurrencyCode_code": "USD",
		"Description": "Lars Jensen site visit for system rollout support",
		"TravelStatus_code": "A",
		"to_Agency_AgencyID": "070002"
	},
	{
		"TravelUUID": "54657221A8E4645C17002DF03754AB66",
		"TravelID": "00000003",
		"BeginDate": "2025-08-04",
		"EndDate": "2025-08-08",
		"BookingFee": "40.00",
		"TotalPrice": "1871.00",
		"CurrencyCode_code": "USD",
		"Description": "John Smith customer workshop at Acme Corp headquarters",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070003"
	},
	{
		"TravelUUID": "55657221A8E4645C17002DF03754AB66",
		"TravelID": "00000004",
		"BeginDate": "2025-09-04",
		"EndDate": "2025-09-05",
		"BookingFee": "40.00",
		"TotalPrice": "1240.00",
		"CurrencyCode_code": "USD",
		"Description": "Anna Müller onboarding with new project team in Berlin",
		"TravelStatus_code": "X",
		"to_Agency_AgencyID": "070003"
	}
]

```

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: annotations.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});

```

--------------------------------

**TITLE**: Tree Table

**INTRODUCTION**: The TreeTable building block enables you to render a table with hierarchical data.

**TAGS**: tree table, hierarchy, nodes, expand, collapse, nested

**STEP**: Hierarchy Definition

**DESCRIPTION**: The Aggregation.RecursiveHierarchy and @Hierarchy.RecursiveHierarchy defines the hierarchy of the tree table.

**LANGUAGE**: CDS

**CODE**:
```cds
service Service {
  @Aggregation.RecursiveHierarchy #ProductsHierarchy: {
    NodeProperty            : ID,
    ParentNavigationProperty: Parent
  }
  @Hierarchy.RecursiveHierarchy #ProductsHierarchy  : {
    ExternalKey           : ID,
    LimitedDescendantCount: LimitedDescendantCount,
    DistanceFromRoot      : DistanceFromRoot,
    DrillState            : DrillState,
    Matched               : Matched,
    MatchedDescendantCount: MatchedDescendantCount
  }
  @Capabilities.FilterRestrictions                  : {NonFilterableProperties: [
    LimitedDescendantCount,
    DistanceFromRoot,
    DrillState,
    Matched,
    MatchedDescendantCount
  ]}
  @Capabilities.SortRestrictions                    : {NonSortableProperties: [
    LimitedDescendantCount,
    DistanceFromRoot,
    DrillState,
    Matched,
    MatchedDescendantCount
  ]}
  entity Products                        @(Common: {SemanticKey: [ID]}) {
    key ID                     : String  @title: 'Identifier'  @Core.Computed;
        Title                  : String  @title: 'Product Title';
        Description            : String  @title: 'Product Description';
        ParentID               : String;
        Parent                 : Association to one Products
                                   on Parent.ID = ParentID;

        @Core.Computed: true
        LimitedDescendantCount : Integer64;

        @Core.Computed: true
        DistanceFromRoot       : Integer64;

        @Core.Computed: true
        DrillState             : String;

        @Core.Computed: true
        Matched                : Boolean;

        @Core.Computed: true
        MatchedDescendantCount : Integer64;
  }

  annotate Products with @UI: {
    LineItem                 : [
      {
        $Type: 'UI.DataField',
        Value: ID,
      },
      {
        $Type: 'UI.DataField',
        Value: Title,
      },
      {
        $Type: 'UI.DataField',
        Value: Description,
      },
    ],
    PresentationVariant      : {
      $Type         : 'UI.PresentationVariantType',
      Visualizations: ['@UI.LineItem', ],
      Text          : 'Hierarchical',
    },
    PresentationVariant #Flat: {
      $Type         : 'UI.PresentationVariantType',
      Visualizations: ['@UI.LineItem#Flat', ],
      Text          : 'Flat list',
    },
    LineItem #Flat           : [
      {
        $Type: 'UI.DataField',
        Value: ID,
      },
      {
        $Type: 'UI.DataField',
        Value: Title,
      },
      {
        $Type: 'UI.DataField',
        Value: Description,
      },
    ],
    HeaderInfo               : {
      $Type         : 'UI.HeaderInfoType',
      TypeName      : 'Product',
      TypeNamePlural: 'Products',
      Title         : {
        $Type: 'UI.DataField',
        Value: ID,
      },
    },
    FieldGroup               : {
      $Type: 'UI.FieldGroupType',
      Data : [
        {
          $Type: 'UI.DataField',
          Value: Description,
        },
        {
          $Type: 'UI.DataField',
          Value: Title,
        },
      ],
    },
    Facets                   : [{
      $Type : 'UI.ReferenceFacet',
      Target: '@UI.FieldGroup',
      Label : 'General',
    }, ],
  };
}
```

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="Service.Products">
	<Annotation Term="Aggregation.RecursiveHierarchy" Qualifier="ProductsHierarchy">
		<Record Type="Aggregation.RecursiveHierarchyType">
			<PropertyValue Property="NodeProperty" PropertyPath="ID" />
			<PropertyValue Property="ParentNavigationProperty" NavigationPropertyPath="Parent" />
		</Record>
	</Annotation>
	<Annotation Term="Hierarchy.RecursiveHierarchy" Qualifier="ProductsHierarchy">
		<Record Type="Hierarchy.RecursiveHierarchyType">
			<PropertyValue Property="ExternalKey" Path="ID" />
			<PropertyValue Property="LimitedDescendantCount" Path="LimitedDescendantCount" />
			<PropertyValue Property="DistanceFromRoot" Path="DistanceFromRoot" />
			<PropertyValue Property="DrillState" Path="DrillState" />
			<PropertyValue Property="Matched" Path="Matched" />
			<PropertyValue Property="MatchedDescendantCount" Path="MatchedDescendantCount" />
		</Record>
	</Annotation>
</Annotations>
```

**LANGUAGE**: ABAP

**CODE**:
```abap
@AbapCatalog.sqlViewName: 'ZPRODUCTS'
@AbapCatalog.compiler.compareFilter: true
@AbapCatalog.preserveKey: true
@AccessControl.authorizationCheck: #CHECK
@EndUserText.label: 'Products'
@Metadata.allowExtensions: true
@ObjectModel.semanticKey: ['ID']
@ObjectModel.representativeKey: 'ID'
@ObjectModel.hierarchyNode: 'ID'
@ObjectModel.hierarchyParent: 'ParentID'
define root view entity Products as select from products_db 
association [0..1] to Products as _Parent on $projection.ParentID = _Parent.ID
{
    @ObjectModel.text.element: ['Title']
    @EndUserText.label: 'Identifier'
    key ID,
    
    @EndUserText.label: 'Product Title'
    Title,
    
    @EndUserText.label: 'Product Description'
    Description,
    
    ParentID,
    
    @ObjectModel.association.type: #TO_COMPOSITION_PARENT
    _Parent,
    
    @Semantics.quantity.unitOfMeasure: 'Unit'
    @EndUserText.label: 'Limited Descendant Count'
    LimitedDescendantCount,
    
    @EndUserText.label: 'Distance From Root'
    DistanceFromRoot,
    
    @EndUserText.label: 'Drill State'
    DrillState,
    
    @EndUserText.label: 'Matched'
    Matched,
    
    @EndUserText.label: 'Matched Descendant Count'
    MatchedDescendantCount
}

@Metadata.layer: #CORE
@UI: {
  headerInfo: {
    typeName: 'Product',
    typeNamePlural: 'Products',
    title: { type: #STANDARD, value: 'ID' }
  }
}
annotate view Products with {
    @UI.lineItem: [
        { position: 10, importance: #HIGH },
        { position: 20 },
        { position: 30 }
    ]
    @UI.identification: [
        { position: 10, importance: #HIGH },
        { position: 20 },
        { position: 30 }
    ]
    @UI.selectionField: [{ position: 10 }]
    ID;
    Title;
    Description;

    @UI.fieldGroup: [{ qualifier: 'General', position: 10 }]
    Description;

    @UI.fieldGroup: [{ qualifier: 'General', position: 20 }]
    Title;

    @UI.hidden: true
    ParentID;

    @UI.hidden: true
    LimitedDescendantCount;

    @UI.hidden: true
    DistanceFromRoot;

    @UI.hidden: true
    DrillState;

    @UI.hidden: true
    Matched;

    @UI.hidden: true
    MatchedDescendantCount;
}
```

**STEP**: LineItem Definition

**DESCRIPTION**: The UI.LineItem annotation defines the columns of the table.

**LANGUAGE**: CDS

**CODE**:
```cds
service Service {
  @Aggregation.RecursiveHierarchy #ProductsHierarchy: {
    NodeProperty            : ID,
    ParentNavigationProperty: Parent
  }
  @Hierarchy.RecursiveHierarchy #ProductsHierarchy  : {
    ExternalKey           : ID,
    LimitedDescendantCount: LimitedDescendantCount,
    DistanceFromRoot      : DistanceFromRoot,
    DrillState            : DrillState,
    Matched               : Matched,
    MatchedDescendantCount: MatchedDescendantCount
  }
  @Capabilities.FilterRestrictions                  : {NonFilterableProperties: [
    LimitedDescendantCount,
    DistanceFromRoot,
    DrillState,
    Matched,
    MatchedDescendantCount
  ]}
  @Capabilities.SortRestrictions                    : {NonSortableProperties: [
    LimitedDescendantCount,
    DistanceFromRoot,
    DrillState,
    Matched,
    MatchedDescendantCount
  ]}
  entity Products                        @(Common: {SemanticKey: [ID]}) {
    key ID                     : String  @title: 'Identifier'  @Core.Computed;
        Title                  : String  @title: 'Product Title';
        Description            : String  @title: 'Product Description';
        ParentID               : String;
        Parent                 : Association to one Products
                                   on Parent.ID = ParentID;

        @Core.Computed: true
        LimitedDescendantCount : Integer64;

        @Core.Computed: true
        DistanceFromRoot       : Integer64;

        @Core.Computed: true
        DrillState             : String;

        @Core.Computed: true
        Matched                : Boolean;

        @Core.Computed: true
        MatchedDescendantCount : Integer64;
  }

  annotate Products with @UI: {
    LineItem                 : [
      {
        $Type: 'UI.DataField',
        Value: ID,
      },
      {
        $Type: 'UI.DataField',
        Value: Title,
      },
      {
        $Type: 'UI.DataField',
        Value: Description,
      },
    ],
    PresentationVariant      : {
      $Type         : 'UI.PresentationVariantType',
      Visualizations: ['@UI.LineItem', ],
      Text          : 'Hierarchical',
    },
    PresentationVariant #Flat: {
      $Type         : 'UI.PresentationVariantType',
      Visualizations: ['@UI.LineItem#Flat', ],
      Text          : 'Flat list',
    },
    LineItem #Flat           : [
      {
        $Type: 'UI.DataField',
        Value: ID,
      },
      {
        $Type: 'UI.DataField',
        Value: Title,
      },
      {
        $Type: 'UI.DataField',
        Value: Description,
      },
    ],
    HeaderInfo               : {
      $Type         : 'UI.HeaderInfoType',
      TypeName      : 'Product',
      TypeNamePlural: 'Products',
      Title         : {
        $Type: 'UI.DataField',
        Value: ID,
      },
    },
    FieldGroup               : {
      $Type: 'UI.FieldGroupType',
      Data : [
        {
          $Type: 'UI.DataField',
          Value: Description,
        },
        {
          $Type: 'UI.DataField',
          Value: Title,
        },
      ],
    },
    Facets                   : [{
      $Type : 'UI.ReferenceFacet',
      Target: '@UI.FieldGroup',
      Label : 'General',
    }, ],
  };
}
```

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.LineItem">
	<Collection>
		<Record Type="UI.DataField">
			<PropertyValue Property="Value" Path="ID" />
		</Record>
		<Record Type="UI.DataField">
			<PropertyValue Property="Value" Path="Title" />
		</Record>
		<Record Type="UI.DataField">
			<PropertyValue Property="Value" Path="Description" />
		</Record>
	</Collection>
</Annotation>
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: Sample.fragment.xml

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<macros:TreeTable metaPath="/Products/@com.sap.vocabularies.UI.v1.LineItem" hierarchyQualifier="ProductsHierarchy" id="treeTable" />
</core:FragmentDefinition>

```

**FILE**: Products.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"ID": "P1",
		"Title": "Desktop",
		"Description": "Standard desktop computer"
	},
	{
		"ID": "P2",
		"Title": "Main",
		"Description": "Central unit",
		"ParentID": "P1"
	},
	{
		"ID": "P3",
		"Title": "CPU",
		"Description": "CPU",
		"ParentID": "P2"
	},
	{
		"ID": "P4",
		"Title": "Graphics card",
		"Description": "Graphics card",
		"ParentID": "P2"
	},
	{
		"ID": "P5",
		"Title": "RAM",
		"Description": "Main memory",
		"ParentID": "P2"
	},
	{
		"ID": "P6",
		"Title": "Keyboard",
		"Description": "Keyboard",
		"ParentID": "P1"
	},
	{
		"ID": "P7",
		"Title": "Mouse",
		"Description": "Mouse",
		"ParentID": "P1"
	},
	{
		"ID": "P10",
		"Title": "Laptop",
		"Description": "Standard laptop"
	},
	{
		"ID": "P11",
		"Title": "CPU",
		"Description": "CPU",
		"ParentID": "P10"
	},
	{
		"ID": "P12",
		"Title": "Graphics card",
		"Description": "Graphics card",
		"ParentID": "P10"
	},
	{
		"ID": "P13",
		"Title": "RAM",
		"Description": "Main memory",
		"ParentID": "P10"
	},
	{
		"ID": "P14",
		"Title": "Screen",
		"Description": "Integrated screen",
		"ParentID": "P10"
	}
]

```

--------------------------------

**TITLE**: Draft Handling

**INTRODUCTION**: You can implement draft handling on a custom page using the editFlow controller extension.

**TAGS**: custom page, edit flow, draft

**STEP**: Using the editFlow Controller Extension

**DESCRIPTION**: You must extend the PageController to implement draft handling on a custom page. You can then access the editFlow controller extension through 'this.editFlow'. The editFlow controller provides methods to manage the draft state, such as creating drafts, saving drafts, and canceling drafts.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
import PageController from "sap/fe/core/PageController";
import type TableAPI from "sap/fe/macros/table/TableAPI";
import type Button from "sap/m/Button";
import MessageBox from "sap/m/MessageBox";
import type UI5Event from "sap/ui/base/Event";
import type ODataV4Context from "sap/ui/model/odata/v4/Context";

export default class SampleController extends PageController {
	public onSelectionChange(event: UI5Event<{ bindingContext: ODataV4Context }, TableAPI>): void {
		const currentContext = event.getParameter("bindingContext") ?? event.getSource().getSelectedContexts()[0];
		if (currentContext?.getObject("IsActiveEntity") === false) {
			this.getView().getModel("ui").setProperty("/isEditable", true);
		} else {
			this.getView().getModel("ui").setProperty("/isEditable", false);
		}
		const model = currentContext.getModel();
		const contextBinding = model.bindContext(currentContext.getPath());
		const targetContext = contextBinding.getBoundContext();

		this.getView().setBindingContext(targetContext);
	}

	public async onEditPressed(this: PageController): Promise<void> {
		const context = this.getView().getBindingContext();
		if (!context) {
			MessageBox.show("You must first select a row before you can press edit!");
		}
		const targetContext = await this.editFlow.editDocument(this.getView().getBindingContext());
		if (targetContext) {
			this.getView().setBindingContext(targetContext);
			(this.getExtensionAPI().byId("travelTable") as TableAPI).refresh();
		}
	}

	public async onSavePressed(this: PageController): Promise<void> {
		await this.editFlow.saveDocument(this.getView().getBindingContext(), {});
		(this.getExtensionAPI().byId("travelTable") as TableAPI).refresh();
	}

	public async onCancelPressed(this: PageController, event: UI5Event<{}, Button>): Promise<void> {
		await this.editFlow.cancelDocument(this.getView().getBindingContext(), { cancelButton: event.getSource() });
		(this.getExtensionAPI().byId("travelTable") as TableAPI).refresh();
	}
}
```

**STEP**: Implementing a Hook

**DESCRIPTION**: You can implement the hooks provided by the editFlow controller extensions, for example, the onBeforeEdit hook, as described in the following topic.

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: Sample.view.xml

**LANGUAGE**: XML

**CODE**:
```xml
<mvc:View
	id="customEditFlow"
	height="100%"
	controllerName="sap.fe.core.fpmExplorer.customEditFlow.Sample"
	xmlns="sap.m"
	xmlns:mvc="sap.ui.core.mvc"
	xmlns:l="sap.ui.layout"
	xmlns:macros="sap.fe.macros"
>
	<Page>
		<content>
			<VBox>
				<MessageStrip
					text="Selecting a table line populates the form fields and sets the edit button to visible."
					class="sapUiSmallMargin"
					type="Information"
				/>
				<l:HorizontalLayout
					id="macroTableContainer"
					allowWrapping="true"
					class="sapUiSmallMarginTopBottom sapUiMediumMarginBeginEnd"
				>
					<macros:Table
						metaPath="/Travel/@com.sap.vocabularies.UI.v1.LineItem"
						readOnly="true"
						selectionMode="None"
						id="travelTable"
						selectionChange=".onSelectionChange"
						rowPress=".onSelectionChange"
					/>
				</l:HorizontalLayout>

				<Panel id="myFormContent" class="sapUiSmallMarginTopBottom sapUiMediumMarginBeginEnd" width="90%">
					<headerToolbar>
						<OverflowToolbar>
							<Title text="Editing the object" />
							<ToolbarSpacer />
							<Button text="Edit" press=".onEditPressed" visible="{= !${ui>/isEditable} }" />
						</OverflowToolbar>
					</headerToolbar>
					<content>
						<macros:Form metaPath="/Travel/@com.sap.vocabularies.UI.v1.FieldGroup#ApprovalData" id="formContent" />
						<Toolbar>
							<ToolbarSpacer />
							<Button text="Save" press=".onSavePressed" visible="{ui>/isEditable}" />
							<Button text="Cancel" press=".onCancelPressed" visible="{ui>/isEditable}" />
						</Toolbar>
					</content>
				</Panel>
			</VBox>
		</content>
	</Page>
</mvc:View>

```

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: annotations.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});

```

**FILE**: Travel.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"TravelID": "00000001",
		"BeginDate": "2025-11-04",
		"EndDate": "2025-11-06",
		"BookingFee": "20.00",
		"TotalPrice": "900.00",
		"CurrencyCode_code": "USD",
		"Description": "Business Trip for Christine, Pierre",
		"TravelDetails": "This business trip includes a two-day customer workshop at the airport. The goal is the evaluation of the customer's use cases and the alignment on the roadmap for the upcoming year.",
		"TravelStatus_code": "A",
		"to_Agency_AgencyID": "070001"
	},
	{
		"TravelUUID": "53657221A8E4645C17002DF03754AB66",
		"TravelID": "00000002",
		"BeginDate": "2025-12-04",
		"EndDate": "2025-12-16",
		"BookingFee": "80.00",
		"TotalPrice": "3164.00",
		"CurrencyCode_code": "USD",
		"Description": "Lars Jensen site visit for system rollout support",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070002"
	},
	{
		"TravelUUID": "54657221A8E4645C17002DF03754AB66",
		"TravelID": "00000003",
		"BeginDate": "2025-08-04",
		"EndDate": "2025-08-08",
		"BookingFee": "40.00",
		"TotalPrice": "1871.00",
		"CurrencyCode_code": "USD",
		"Description": "John Smith customer workshop at Acme Corp headquarters",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070003"
	},
	{
		"TravelUUID": "55657221A8E4645C17002DF03754AB66",
		"TravelID": "00000004",
		"BeginDate": "2025-09-04",
		"EndDate": "2025-09-05",
		"BookingFee": "40.00",
		"TotalPrice": "1240.00",
		"CurrencyCode_code": "USD",
		"Description": "Anna Müller onboarding with new project team in Berlin",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "X",
		"to_Agency_AgencyID": "070003"
	}
]

```

--------------------------------

**TITLE**: Draft Handling with Edit Flow Controller Extension

**INTRODUCTION**: The Edit Flow controller extension implements all the draft actions (such as creating a draft, saving a draft). It provides hooks you can implement to add your custom logic. It can also be used to implement the draft handling in custom pages.

**TAGS**: global patterns, controller extensions, draft handling, extensibility, custom logic

**STEP**: Defining a Controller Extension in Manifest

**DESCRIPTION**: To implement hooks provided by the Edit Flow controller extension, you need to register a custom controller extension in the manifest.json file for the object page instance you want to extend.

**LANGUAGE**: JSON

**CODE**:
```json
{
	"_version": "1.12.0",
	"sap.app": {
		"id": "sap.fe.core.fpmExplorer",
		"type": "application",
		"i18n": {
			"bundleUrl": "i18n/i18n.properties",
			"supportedLocales": [""],
			"fallbackLocale": ""
		},
		"applicationVersion": {
			"version": "1.0.0"
		},
		"dataSources": {
			"mainService": {
				"uri": "/sap/fe/core/mock/editFlow/",
				"type": "OData",
				"settings": {
					"annotations": [],
					"odataVersion": "4.0"
				}
			}
		}
	},
	"sap.ui5": {
		"dependencies": {
			"minUI5Version": "1.111.1",
			"libs": {
				"sap.ui.core": {},
				"sap.fe.templates": {}
			}
		},
		"extends": {
			"extensions": {
				"sap.ui.controllerExtensions": {
					"sap.fe.templates.ObjectPage.ObjectPageController#sap.fe.core.fpmExplorer.editFlow::Default": {
						"controllerName": "sap.fe.core.fpmExplorer.editFlow.TravelExtend"
					}
				}
			}
		},
		"contentDensities": {
			"compact": true,
			"cozy": true
		},
		"models": {
			"": {
				"dataSource": "mainService",
				"settings": {
					"operationMode": "Server",
					"autoExpandSelect": true,
					"earlyRequests": true
				}
			}
		},
		"rootView": {
			"viewName": "sap.fe.core.fpmExplorer.editFlow.EditFlow"
		},
		"routing": {
			"config": {
				"controlId": "editFlow"
			},
			"routes": [
				{
					"pattern": ":?query:",
					"name": "TravelList",
					"target": "TravelList"
				},
				{
					"pattern": "/Travel({key}):?query:",
					"name": "TravelDetail",
					"target": "TravelDetail"
				}
			],
			"targets": {
				"TravelList": {
					"type": "Component",
					"id": "Default",
					"name": "sap.fe.templates.ListReport",
					"options": {
						"settings": {
							"contextPath": "/Travel",
							"variantManagement": "Page",
							"initialLoad": "Enabled",
							"navigation": {
								"Travel": {
									"detail": {
										"route": "TravelDetail"
									}
								}
							}
						}
					}
				},
				"TravelDetail": {
					"type": "Component",
					"id": "Default",
					"name": "sap.fe.templates.ObjectPage",
					"viewLevel": 1,
					"options": {
						"settings": {
							"contextPath": "/Travel",
							"content": {
								"header": {
									"actions": {
										"headerInvokeAction": {
											"press": ".extension.sap.fe.core.fpmExplorer.editFlow.TravelExtend.invokeAction",
											"text": "Check Travel Policy"
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}
```

**STEP**: Implementing a Hook

**DESCRIPTION**: In your controller extension, you can implement the hooks provided by the Edit Flow controller extensions, for example the onBeforeEdit hook.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
import type PageController from "sap/fe/core/PageController";
import type Dialog from "sap/m/Dialog";
import MessageToast from "sap/m/MessageToast";
import ControllerExtension from "sap/ui/core/mvc/ControllerExtension";
import JSONModel from "sap/ui/model/json/JSONModel";
import type ODataV4Context from "sap/ui/model/odata/v4/Context";

/**
 * @namespace sap.fe.core.fpmExplorer.editFlow
 */
export default class TravelExtend extends ControllerExtension {
	/**
	 * Reference to the base PageController.
	 */
	// eslint-disable-next-line @typescript-eslint/no-non-null-assertion
	protected base!: PageController;

	/**
	 * Overrides (sap.ui.core.mvc.ControllerExtension.override)
	 */
	static overrides = {
		onInit: function (this: TravelExtend): void {
			// Sample data
			const data = {
				text: "",
				formVisible: false
			};
			const dialogModel = new JSONModel(data);
			this.base.getView().setModel(dialogModel, "dialog");
		},

		editFlow: {
			onBeforeEdit: function (this: TravelExtend): Promise<void> {
				return this.openDialog("Do you want to edit this travel request?", true);
			},

			onAfterEdit: function (this: TravelExtend): void {
				MessageToast.show("You can now edit this travel request.");
			},

			onBeforeSave: function (this: TravelExtend, mParameters?: { context: ODataV4Context }): Promise<void> | undefined {
				// Asynchronous access to property values. Non cached values are requested from the backend
				return mParameters?.context.requestProperty(["BookingFee"]).then((result: number[]) => {
					return result[0] > 50
						? this.openDialog("The booking fee exceed our travel policy - do you really want to save the travel request?", true)
						: Promise.resolve();
				});
			},

			onAfterSave: function (this: TravelExtend): void {
				MessageToast.show("The travel request was successfully saved.");
			},

			onBeforeDiscard: function (this: TravelExtend): Promise<void> {
				return this.openDialog("Are you sure you want to discard this travel request?");
			}
		}
	};

	/**
	 * Opens a confirmation dialog.
	 * @param text The text to display in the dialog
	 * @param formVisible Whether to show the form in the dialog
	 * @param fnAction Optional action function to execute on confirmation
	 * @returns Promise that resolves on confirmation or rejects on cancellation
	 */
	public async openDialog(text: string, formVisible?: boolean, fnAction?: () => void): Promise<void> {
		const dialogModel = this.base.getView().getModel("dialog") as JSONModel;
		const data = dialogModel.getData();
		data.text = text;
		data.formVisible = formVisible !== undefined ? formVisible : false;
		dialogModel.setData(data);
		// Use building blocks in an XML fragment using the loadFragment method from the SAP Fiori elements ExtensionAPI
		const approveDialog = (await this.base.getExtensionAPI().loadFragment({
			id: "myAcceptDialog",
			name: "sap.fe.core.fpmExplorer.editFlow.Dialog",
			controller: this
		})) as Dialog;

		return new Promise((resolve, reject) => {
			approveDialog.getBeginButton().attachPress(() => {
				approveDialog.close();
				if (fnAction) {
					fnAction();
				}
				resolve();
			});
			approveDialog.getEndButton().attachPress(() => {
				approveDialog.close().destroy();
				reject();
			});
			approveDialog.attachAfterClose(() => {
				approveDialog.destroy();
				reject();
			});
			approveDialog.open();
		});
	}

	/**
	 * Invokes a custom action to check travel policy.
	 * @param context The binding context for the action
	 */
	public invokeAction(context: ODataV4Context): void {
		this.base.editFlow
			.invokeAction("TravelService.checkTravelPolicy", {
				contexts: context,
				parameterValues: [
					{ name: "TotalPrice", value: context.getObject("TotalPrice") },
					{ name: "BookingFee", value: context.getObject("BookingFee") }
				],
				// Show the dialog in edit mode only
				skipParameterDialog: !this.base.getExtensionAPI().getModel("ui")?.getProperty("/isEditable")
			})
			.then(() => {
				MessageToast.show("Travel policy successfully checked");
			});
	}
}
```

**STEP**: Invoking an Action

**DESCRIPTION**: In your controller extension, you can invoke OData actions provided by your service. If the action has parameters, a dialog is displayed to the user to enter the parameters. You can also pass the parameters and skip the dialog by using the 'skipParameterDialog' property.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
import type PageController from "sap/fe/core/PageController";
import type Dialog from "sap/m/Dialog";
import MessageToast from "sap/m/MessageToast";
import ControllerExtension from "sap/ui/core/mvc/ControllerExtension";
import JSONModel from "sap/ui/model/json/JSONModel";
import type ODataV4Context from "sap/ui/model/odata/v4/Context";

/**
 * @namespace sap.fe.core.fpmExplorer.editFlow
 */
export default class TravelExtend extends ControllerExtension {
	/**
	 * Reference to the base PageController.
	 */
	// eslint-disable-next-line @typescript-eslint/no-non-null-assertion
	protected base!: PageController;

	/**
	 * Overrides (sap.ui.core.mvc.ControllerExtension.override)
	 */
	static overrides = {
		onInit: function (this: TravelExtend): void {
			// Sample data
			const data = {
				text: "",
				formVisible: false
			};
			const dialogModel = new JSONModel(data);
			this.base.getView().setModel(dialogModel, "dialog");
		},

		editFlow: {
			onBeforeEdit: function (this: TravelExtend): Promise<void> {
				return this.openDialog("Do you want to edit this travel request?", true);
			},

			onAfterEdit: function (this: TravelExtend): void {
				MessageToast.show("You can now edit this travel request.");
			},

			onBeforeSave: function (this: TravelExtend, mParameters?: { context: ODataV4Context }): Promise<void> | undefined {
				// Asynchronous access to property values. Non cached values are requested from the backend
				return mParameters?.context.requestProperty(["BookingFee"]).then((result: number[]) => {
					return result[0] > 50
						? this.openDialog("The booking fee exceed our travel policy - do you really want to save the travel request?", true)
						: Promise.resolve();
				});
			},

			onAfterSave: function (this: TravelExtend): void {
				MessageToast.show("The travel request was successfully saved.");
			},

			onBeforeDiscard: function (this: TravelExtend): Promise<void> {
				return this.openDialog("Are you sure you want to discard this travel request?");
			}
		}
	};

	/**
	 * Opens a confirmation dialog.
	 * @param text The text to display in the dialog
	 * @param formVisible Whether to show the form in the dialog
	 * @param fnAction Optional action function to execute on confirmation
	 * @returns Promise that resolves on confirmation or rejects on cancellation
	 */
	public async openDialog(text: string, formVisible?: boolean, fnAction?: () => void): Promise<void> {
		const dialogModel = this.base.getView().getModel("dialog") as JSONModel;
		const data = dialogModel.getData();
		data.text = text;
		data.formVisible = formVisible !== undefined ? formVisible : false;
		dialogModel.setData(data);
		// Use building blocks in an XML fragment using the loadFragment method from the SAP Fiori elements ExtensionAPI
		const approveDialog = (await this.base.getExtensionAPI().loadFragment({
			id: "myAcceptDialog",
			name: "sap.fe.core.fpmExplorer.editFlow.Dialog",
			controller: this
		})) as Dialog;

		return new Promise((resolve, reject) => {
			approveDialog.getBeginButton().attachPress(() => {
				approveDialog.close();
				if (fnAction) {
					fnAction();
				}
				resolve();
			});
			approveDialog.getEndButton().attachPress(() => {
				approveDialog.close().destroy();
				reject();
			});
			approveDialog.attachAfterClose(() => {
				approveDialog.destroy();
				reject();
			});
			approveDialog.open();
		});
	}

	/**
	 * Invokes a custom action to check travel policy.
	 * @param context The binding context for the action
	 */
	public invokeAction(context: ODataV4Context): void {
		this.base.editFlow
			.invokeAction("TravelService.checkTravelPolicy", {
				contexts: context,
				parameterValues: [
					{ name: "TotalPrice", value: context.getObject("TotalPrice") },
					{ name: "BookingFee", value: context.getObject("BookingFee") }
				],
				// Show the dialog in edit mode only
				skipParameterDialog: !this.base.getExtensionAPI().getModel("ui")?.getProperty("/isEditable")
			})
			.then(() => {
				MessageToast.show("Travel policy successfully checked");
			});
	}
}
```

**STEP**: Draft Handling on Custom Page

**DESCRIPTION**: You can use the Edit Flow controller extension to implement draft handling on custom pages as described in the following topic.

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: editFlow.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {TravelService.Travel} from '../../../../service/service';
using from '../../../../service/annotations';

extend entity TravelService.Travel with actions {
  action checkTravelPolicy(TotalPrice : Decimal(10, 2), BookingFee : Decimal(10, 2));
}

```

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: annotations.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});

```

**FILE**: Travel.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"TravelID": "00000001",
		"BeginDate": "2025-11-04",
		"EndDate": "2025-11-06",
		"BookingFee": "20.00",
		"TotalPrice": "900.00",
		"CurrencyCode_code": "USD",
		"Description": "Business Trip for Christine, Pierre",
		"TravelDetails": "This business trip includes a two-day customer workshop at the airport. The goal is the evaluation of the customer's use cases and the alignment on the roadmap for the upcoming year.",
		"TravelStatus_code": "A",
		"to_Agency_AgencyID": "070001"
	},
	{
		"TravelUUID": "53657221A8E4645C17002DF03754AB66",
		"TravelID": "00000002",
		"BeginDate": "2025-12-04",
		"EndDate": "2025-12-16",
		"BookingFee": "80.00",
		"TotalPrice": "3164.00",
		"CurrencyCode_code": "USD",
		"Description": "Lars Jensen site visit for system rollout support",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070002"
	},
	{
		"TravelUUID": "54657221A8E4645C17002DF03754AB66",
		"TravelID": "00000003",
		"BeginDate": "2025-08-04",
		"EndDate": "2025-08-08",
		"BookingFee": "40.00",
		"TotalPrice": "1871.00",
		"CurrencyCode_code": "USD",
		"Description": "John Smith customer workshop at Acme Corp headquarters",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070003"
	},
	{
		"TravelUUID": "55657221A8E4645C17002DF03754AB66",
		"TravelID": "00000004",
		"BeginDate": "2025-09-04",
		"EndDate": "2025-09-05",
		"BookingFee": "40.00",
		"TotalPrice": "1240.00",
		"CurrencyCode_code": "USD",
		"Description": "Anna Müller onboarding with new project team in Berlin",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "X",
		"to_Agency_AgencyID": "070003"
	}
]

```

--------------------------------

**TITLE**: Controller Extensions

**INTRODUCTION**: SAP Fiori elements provides a set of controller building blocks. They are implemented as controller extensions and can be used in your custom code and provide hooks that allow you to implement custom logic in your application. In addition, you can also load custom controllers in your XML fragments and use them as event handlers or formatters, and use the ExtensionAPI to access the SAP Fiori elements building blocks.

**TAGS**: list report extensions, custom header, custom view, KPI tags, object page extensions, custom section, custom subsection, custom action, custom header facet

**STEP**: Load Custom Controller in XML

**DESCRIPTION**: A simple way to make use of custom coding as event handlers or formatters is to require a controller within your XML and give it a name. You can then use this controller coding with the given name as shown in the following code block:

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m">
	<HBox core:require="{handler: 'myApp/ext/myCustomSectionHandler'}">
		<Button text="Accept" press="handler.accept" type="Positive" />
	</HBox>
</core:FragmentDefinition>
```

**STEP**: Accessing ExtensionAPI

**DESCRIPTION**: The controller is automatically scoped with the SAP Fiori elements ExtensionAPI. You can access the ExtensionAPI via 'this'.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
import type ObjectPageExtensionAPI from "sap/fe/templates/ObjectPage/ExtensionAPI";

/**
 * Extension API implementation with custom accept method.
 */
const customImplementation = {
	/**
	 * Accepts the current state and refreshes the data.
	 */
	accept(this: ObjectPageExtensionAPI): void {
		// ... custom code here
		// "this" is the Fiori elements ExtensionAPI
		this.refresh();
	}
};

export default customImplementation;
```

**STEP**: Implementing a Controller Extension

**DESCRIPTION**: The following code block shows an example controller extension. You can extend lifecycle hooks or hooks provided by SAP Fiori elements in a controller extension. You can also add your own methods that can be used as formatters and event handlers. Note: You can't bundle formatter and event handler methods into an object of methods. Instead, define the methods at the top level of the controller extension.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
import type ObjectPageController from "sap/fe/templates/ObjectPage/ObjectPageController.controller";
import ControllerExtension from "sap/ui/core/mvc/ControllerExtension";

/**
 * Controller extension that demonstrates lifecycle hooks and custom methods.
 */
export default ControllerExtension.extend("sap.fe.core.fpmExplorer.guidanceControllerExtensions.OPExtend", {
	// this section allows to extend lifecycle hooks or hooks provided by Fiori elements
	override: {
		/**
		 * Initialization hook that gets called when the controller is initialized.
		 */
		onInit: function (this: { base: ObjectPageController }) {
			// you can access the Fiori elements extensionAPI through the base controller
			const extensionAPI = this.base.getExtensionAPI();
			// ... custom code here
		},
		viewState: {
			/**
			 * Applies initial state configuration.
			 */
			applyInitialStateOnly: function (this: { base: ObjectPageController }) {
				// ... custom code here
			}
		}
	},

	/**
	 * Custom formatter method for field formatting.
	 * @returns Formatted field value
	 */
	formatMyField: function (): string {
		// ... custom code here
		return "";
	},

	/**
	 * Custom accept method for handling acceptance logic.
	 */
	accept: function (this: { base: ObjectPageController }): void {
		// ... custom code here
	}
});
```

**STEP**: Defining a Controller Extension

**DESCRIPTION**: Define the controller extensions in the manifest.json, as shown in the following code block. The first entry extends the list report controller with one controller extension. The second entry overrides one specific instance of the object page controller (the ID is constructed by using the pattern YourApplicationID::ComponentID) with multiple controller extensions. In case of multiple controller extensions you have to use 'controllerNames' instead of 'controllerName'.

**LANGUAGE**: JSON

**CODE**:
```json
{
	"sap.ui5": {
		"extends": {
			"extensions": {
				"sap.ui.controllerExtensions": {
					"sap.fe.templates.ListReport.ListReportController": {
						"controllerName": "myApp.ext.LRExtend"
					},
					"sap.fe.templates.ObjectPage.ObjectPageController#myAppID::CustomerDetails": {
						"controllerNames": ["myApp.ext.OPExtend", "myApp.ext.CustomerDetailsExtend"]
					}
				}
			}
		}
	}
}
```

**STEP**: Using Event Handlers and Formatters

**DESCRIPTION**: You can use the event handlers and formatters that were added to the controller extension within XML fragments using the following syntax: .extension.yourExtension.method:

**LANGUAGE**: XML

**CODE**:
```xml
<HBox>
	<Button text="Accept" press=".extension.myApp.ext.OPExtend.accept" type="Positive" />
	<Text text="{path: 'TotalNetAmount', formatter:'.extension.myApp.ext.OPExtend.myFormatter' }" />
</HBox>
```

**STEP**: Using Building Blocks in XML Fragment

**DESCRIPTION**: You can use building blocks in an XML fragment using the loadFragment method from the SAP Fiori elements ExtensionAPI. You can access the extensionAPI via 'this.base.getExtensionAPI' on the controller extension as shown in the following code block:

**LANGUAGE**: TypeScript

**CODE**:
```typescript
import type ObjectPageController from "sap/fe/templates/ObjectPage/ObjectPageController.controller";
import MessageToast from "sap/m/MessageToast";
import ControllerExtension from "sap/ui/core/mvc/ControllerExtension";

/**
 * Controller extension that demonstrates loading fragments.
 */
export default class OPExtend extends ControllerExtension {
	protected base!: ObjectPageController;

	/**
	 * Handler for create press event that loads a custom dialog fragment.
	 */
	async onCreatePress(): Promise<void> {
		try {
			const extensionAPI = this.base.getExtensionAPI();
			const fragmentOptions = {
				id: "myCustomDialog",
				name: "fpmExplorer.fragments.customDialog",
				controller: this
			};

			await extensionAPI.loadFragment(fragmentOptions);
			MessageToast.show("Dialog fragment loaded successfully");
		} catch (error) {
			MessageToast.show("Failed to load dialog fragment");
		}
	}
}
```

--------------------------------

**TITLE**: External Navigation

**INTRODUCTION**: SAP Fiori elements provides three different approaches for implementing external navigation to other applications. You can use semantic object annotations to show a popover with multiple related navigation options, UI.DataFieldWithIntentBasedNavigation for direct navigation to a specific intent, or the IntentBasedNavigation controller extension for programmatic navigation control.

**TAGS**: external navigation, intent based navigation, navigateOutbound, custom page override

**STEP**: Option 1: Annotating the Semantic Object

**DESCRIPTION**: Annotate entity properties with semantic objects to show a popover with multiple navigation options. When users click the field, they see all available intents for that semantic object (for example, create new travel request, approve travel, etc.).

**LANGUAGE**: CDS

**CODE**:
```cds
using {TravelService.Travel} from '../../../../service/service';
using from '../../../../service/annotations';

annotate TravelService.Travel {
  TravelID @Common.SemanticObject: 'TravelRequest';
}

annotate TravelService.Travel with @(UI: {
  FieldGroup #IntentBasedNavigation   : {Data: [{
    $Type         : 'UI.DataFieldWithIntentBasedNavigation',
    Label         : 'Approve Travel',
    SemanticObject: 'TravelRequest',
    Action        : 'approve',
    Value         : TravelID
  }]},

  FieldGroup #SemanticObjectNavigation: {Data: [{
    $Type: 'UI.DataField',
    Value: TravelID,
    Label: 'Travel Request'
  }]},
});
```

**STEP**: Display Semantic Object Fields

**DESCRIPTION**: Create a field group that displays the annotated field. The semantic object annotation will automatically render the field as a clickable link that opens a popover with all available navigation options.

**LANGUAGE**: CDS

**CODE**:
```cds
using {TravelService.Travel} from '../../../../service/service';
using from '../../../../service/annotations';

annotate TravelService.Travel {
  TravelID @Common.SemanticObject: 'TravelRequest';
}

annotate TravelService.Travel with @(UI: {
  FieldGroup #IntentBasedNavigation   : {Data: [{
    $Type         : 'UI.DataFieldWithIntentBasedNavigation',
    Label         : 'Approve Travel',
    SemanticObject: 'TravelRequest',
    Action        : 'approve',
    Value         : TravelID
  }]},

  FieldGroup #SemanticObjectNavigation: {Data: [{
    $Type: 'UI.DataField',
    Value: TravelID,
    Label: 'Travel Request'
  }]},
});
```

**STEP**: Option 2: UI.DataFieldWithIntentBasedNavigation

**DESCRIPTION**: Use UI.DataFieldWithIntentBasedNavigation to create a direct navigation link to one specific intent. Unlike semantic objects, this creates a button or link that navigates directly to a single target application (for example, directly to approve travel request).

**LANGUAGE**: CDS

**CODE**:
```cds
using {TravelService.Travel} from '../../../../service/service';
using from '../../../../service/annotations';

annotate TravelService.Travel {
  TravelID @Common.SemanticObject: 'TravelRequest';
}

annotate TravelService.Travel with @(UI: {
  FieldGroup #IntentBasedNavigation   : {Data: [{
    $Type         : 'UI.DataFieldWithIntentBasedNavigation',
    Label         : 'Approve Travel',
    SemanticObject: 'TravelRequest',
    Action        : 'approve',
    Value         : TravelID
  }]},

  FieldGroup #SemanticObjectNavigation: {Data: [{
    $Type: 'UI.DataField',
    Value: TravelID,
    Label: 'Travel Request'
  }]},
});
```

**STEP**: Option 3: IntentBasedNavigation Controller Extension

**DESCRIPTION**: Implement custom navigation logic using the controller extension API. Pass parameters and control when navigation occurs.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
import PageController from "sap/fe/core/PageController";
import IntentBasedNavigation from "sap/fe/core/controllerextensions/IntentBasedNavigation";
import type { SelectionVariant } from "sap/fe/navigation/SelectionVariant";
import type Button from "sap/m/Button";
import type UI5Event from "sap/ui/base/Event";

/**
 * @namespace sap.fe.core.fpmExplorer.intentBasedNavigation
 */
export default PageController.extend("sap.fe.core.fpmExplorer.intentBasedNavigation.Sample", {
	intentBasedNavigation: IntentBasedNavigation.override({
		adaptNavigationContext: function (selectionVariant: SelectionVariant) {
			// Sample to show how to adapt the navigation context
			selectionVariant.addSelectOption("Status", "I", "EQ", "Completed");
		}
	}),

	navigateExternal: function (this: PageController, event: UI5Event<{}, Button>) {
		const travelRequestID = event.getSource()?.getBindingContext()?.getObject("TravelUUID");
		const navigationParameter = {
			TravelRequestID: travelRequestID
		};
		this.getExtensionAPI().intentBasedNavigation.navigateOutbound("approveTravelRequest", navigationParameter);
	}
});
```

**STEP**: Configure Cross Navigation

**DESCRIPTION**: Define outbound navigation targets in the manifest.json to specify which semantic objects and actions your application can navigate to.

**LANGUAGE**: JSON

**CODE**:
```json
{
	"_version": "1.12.0",
	"sap.app": {
		"id": "sap.fe.core.fpmExplorer.intentBasedNavigation",
		"type": "application",
		"i18n": {
			"bundleUrl": "i18n/i18n.properties",
			"supportedLocales": [""],
			"fallbackLocale": ""
		},
		"applicationVersion": {
			"version": "1.0.0"
		},
		"dataSources": {
			"mainService": {
				"uri": "/sap/fe/core/mock/intentBasedNavigation/",
				"type": "OData",
				"settings": {
					"annotations": [],
					"odataVersion": "4.0"
				}
			}
		},
		"crossNavigation": {
			"outbounds": {
				"approveTravelRequest": {
					"semanticObject": "TravelRequest",
					"action": "approve"
				}
			}
		}
	},
	"sap.ui5": {
		"dependencies": {
			"minUI5Version": "1.111.1",
			"libs": {
				"sap.ui.core": {},
				"sap.fe.templates": {}
			}
		},
		"contentDensities": {
			"compact": true,
			"cozy": true
		},
		"models": {
			"": {
				"dataSource": "mainService",
				"settings": {
					"operationMode": "Server",
					"autoExpandSelect": true,
					"earlyRequests": true
				}
			}
		},
		"routing": {
			"routes": [
				{
					"pattern": "/Travel({key}):?query:",
					"name": "default",
					"target": "sample"
				}
			],
			"targets": {
				"sample": {
					"type": "Component",
					"id": "Default",
					"name": "sap.fe.core.fpm",
					"viewLevel": 1,
					"options": {
						"settings": {
							"viewName": "sap.fe.core.fpmExplorer.intentBasedNavigation.IntentBasedNavigation",
							"contextPath": "/Travel"
						}
					}
				}
			}
		}
	}
}
```

**STEP**: Adapt Parameters

**DESCRIPTION**: Override the 'adaptNavigationContext' method to customize navigation behavior.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
import PageController from "sap/fe/core/PageController";
import IntentBasedNavigation from "sap/fe/core/controllerextensions/IntentBasedNavigation";
import type { SelectionVariant } from "sap/fe/navigation/SelectionVariant";
import type Button from "sap/m/Button";
import type UI5Event from "sap/ui/base/Event";

/**
 * @namespace sap.fe.core.fpmExplorer.intentBasedNavigation
 */
export default PageController.extend("sap.fe.core.fpmExplorer.intentBasedNavigation.Sample", {
	intentBasedNavigation: IntentBasedNavigation.override({
		adaptNavigationContext: function (selectionVariant: SelectionVariant) {
			// Sample to show how to adapt the navigation context
			selectionVariant.addSelectOption("Status", "I", "EQ", "Completed");
		}
	}),

	navigateExternal: function (this: PageController, event: UI5Event<{}, Button>) {
		const travelRequestID = event.getSource()?.getBindingContext()?.getObject("TravelUUID");
		const navigationParameter = {
			TravelRequestID: travelRequestID
		};
		this.getExtensionAPI().intentBasedNavigation.navigateOutbound("approveTravelRequest", navigationParameter);
	}
});
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: Sample.fragment.xml

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<VBox>
		<Label text="Using Semantic Object Navigation:" />
		<!-- Form building block referencing the SemanticObjectNavigation field group -->
		<macros:Form id="semanticObjectNavigationForm" metaPath="@UI.FieldGroup#SemanticObjectNavigation" />

		<Label text="Using UI.DataFieldWithIntentBasedNavigation:" class="sapUiMediumMarginTop" />
		<!-- Form building block referencing the IntentBasedNavigation field group -->
		<macros:Form id="intentBasedNavigationForm" metaPath="@UI.FieldGroup#IntentBasedNavigation" />

		<Label text="Using IntentBasedNavigation Controller Extension:" class="sapUiMediumMarginTop" />
		<Button text="Navigate to Intent" press=".navigateExternal" />
	</VBox>
</core:FragmentDefinition>

```

**FILE**: Travel.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"TravelID": "00000001",
		"BeginDate": "2025-11-04",
		"EndDate": "2025-11-06",
		"BookingFee": "20.00",
		"TotalPrice": "900.00",
		"CurrencyCode_code": "USD",
		"Description": "Business Trip for Christine, Pierre",
		"TravelDetails": "This business trip includes a two-day customer workshop at the airport. The goal is the evaluation of the customer's use cases and the alignment on the roadmap for the upcoming year.",
		"TravelStatus_code": "A",
		"to_Agency_AgencyID": "070001"
	},
	{
		"TravelUUID": "53657221A8E4645C17002DF03754AB66",
		"TravelID": "00000002",
		"BeginDate": "2025-12-04",
		"EndDate": "2025-12-16",
		"BookingFee": "80.00",
		"TotalPrice": "3164.00",
		"CurrencyCode_code": "USD",
		"Description": "Lars Jensen site visit for system rollout support",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070002"
	},
	{
		"TravelUUID": "54657221A8E4645C17002DF03754AB66",
		"TravelID": "00000003",
		"BeginDate": "2025-08-04",
		"EndDate": "2025-08-08",
		"BookingFee": "40.00",
		"TotalPrice": "1871.00",
		"CurrencyCode_code": "USD",
		"Description": "John Smith customer workshop at Acme Corp headquarters",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070003"
	},
	{
		"TravelUUID": "55657221A8E4645C17002DF03754AB66",
		"TravelID": "00000004",
		"BeginDate": "2025-09-04",
		"EndDate": "2025-09-05",
		"BookingFee": "40.00",
		"TotalPrice": "1240.00",
		"CurrencyCode_code": "USD",
		"Description": "Anna Müller onboarding with new project team in Berlin",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "X",
		"to_Agency_AgencyID": "070003"
	}
]

```

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: annotations.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});

```

--------------------------------

**TITLE**: Internal Navigation and Routing

**INTRODUCTION**: The Routing controller extension implements the routing and the navigation between pages. It provides hooks you can implement to add your custom logic. It can also be used to trigger navigation in custom code.

**TAGS**: internal navigation, routing extensibility, navigation, routing

**STEP**: Defining a Controller Extension in Manifest

**DESCRIPTION**: To implement hooks provided by the Routing controller extension, you need to register a custom controller extension for in the manifest.json file for the pages you want to extend.

**LANGUAGE**: JSON

**CODE**:
```json
{
	"_version": "1.12.0",
	"sap.app": {
		"id": "sap.fe.core.fpmExplorer",
		"type": "application",
		"i18n": {
			"bundleUrl": "i18n/i18n.properties",
			"supportedLocales": [""],
			"fallbackLocale": ""
		},
		"applicationVersion": {
			"version": "1.0.0"
		},
		"dataSources": {
			"mainService": {
				"uri": "/sap/fe/core/mock/service/",
				"type": "OData",
				"settings": {
					"annotations": [],
					"odataVersion": "4.0"
				}
			}
		}
	},
	"sap.ui5": {
		"dependencies": {
			"minUI5Version": "1.111.1",
			"libs": {
				"sap.ui.core": {},
				"sap.fe.templates": {}
			}
		},
		"extends": {
			"extensions": {
				"sap.ui.controllerExtensions": {
					"sap.fe.templates.ListReport.ListReportController": {
						"controllerName": "sap.fe.core.fpmExplorer.routing.TravelListExtension"
					},
					"sap.fe.templates.ObjectPage.ObjectPageController#sap.fe.core.fpmExplorer.routing::TravelDetail": {
						"controllerName": "sap.fe.core.fpmExplorer.routing.TravelDetailExtension"
					}
				}
			}
		},
		"contentDensities": {
			"compact": true,
			"cozy": true
		},
		"models": {
			"": {
				"dataSource": "mainService",
				"settings": {
					"operationMode": "Server",
					"autoExpandSelect": true,
					"earlyRequests": true
				}
			}
		},
		"rootView": {
			"viewName": "sap.fe.core.fpmExplorer.routing.Routing"
		},
		"routing": {
			"config": {
				"controlId": "routing"
			},
			"routes": [
				{
					"pattern": ":?query:",
					"name": "TravelList",
					"target": "TravelList"
				},
				{
					"pattern": "/Travel({key}):?query:",
					"name": "TravelDetail",
					"target": "TravelDetail"
				}
			],
			"targets": {
				"TravelList": {
					"type": "Component",
					"id": "Default",
					"name": "sap.fe.templates.ListReport",
					"options": {
						"settings": {
							"contextPath": "/Travel",
							"variantManagement": "Page",
							"initialLoad": "Enabled",
							"navigation": {
								"Travel": {
									"detail": {
										"route": "TravelDetail"
									}
								}
							},
							"content": {
								"header": {
									"actions": {
										"headerInvokeAction": {
											"press": ".extension.sap.fe.core.fpmExplorer.routing.TravelListExtension.invokeNavigation",
											"text": "Navigate to Next Open Travel Request"
										}
									}
								}
							}
						}
					}
				},
				"TravelDetail": {
					"type": "Component",
					"id": "TravelDetail",
					"name": "sap.fe.templates.ObjectPage",
					"viewLevel": 1,
					"options": {
						"settings": {
							"contextPath": "/Travel"
						}
					}
				}
			}
		}
	}
}
```

**STEP**: Implementing a Hook

**DESCRIPTION**: In your controller extension, you can implement the hooks provided by the Routing controller extensions, for example the onAfterBinding hook.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
import type ObjectPageController from "sap/fe/templates/ObjectPage/ObjectPageController.controller";
import Message from "sap/ui/core/message/Message";
import MessageType from "sap/ui/core/message/MessageType";
import ControllerExtension from "sap/ui/core/mvc/ControllerExtension";
import type ODataV4Context from "sap/ui/model/odata/v4/Context";

/**
 * Controller extension for custom routing logic in Travel Detail.
 * @namespace sap.fe.core.fpmExplorer.routing
 */
export default class TravelDetailExtension extends ControllerExtension {
	/**
	 * Reference to the base ObjectPageController.
	 */
	protected base!: ObjectPageController;

	/**
	 * Overrides (sap.ui.core.mvc.ControllerExtension.override)
	 */
	static overrides = {
		routing: {
			/**
			 * Called after the binding is complete. Shows a message if travel is approved.
			 * @param bindingContext The OData v4 binding context
			 */
			onAfterBinding: async function (this: TravelDetailExtension, bindingContext: ODataV4Context): Promise<void> {
				const extensionApi = this.base.getExtensionAPI();
				const travelStatusCode = await bindingContext.requestObject("TravelStatus_code");
				if (travelStatusCode === "A") {
					const message = [
						new Message({
							message: "The flights for this travel were confirmed by the agency.",
							type: MessageType.Success
						})
					];
					extensionApi.showMessages(message);
				}
			}
		}
	};
}
```

**STEP**: Invoking Navigation

**DESCRIPTION**: In your controller extension, you can invoke the navigation to another page using the 'navigateToRoute' method. You can pass instance keys to navigate to a specific instance.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
import type PageController from "sap/fe/core/PageController";
import Button from "sap/m/Button";
import Dialog from "sap/m/Dialog";
import MessageToast from "sap/m/MessageToast";
import Text from "sap/m/Text";
import { ButtonType, DialogType } from "sap/m/library";
import ControllerExtension from "sap/ui/core/mvc/ControllerExtension";
import type ODataV4Context from "sap/ui/model/odata/v4/Context";

/**
 * Controller extension for custom routing logic in Travel List.
 * @namespace sap.fe.core.fpmExplorer.routing
 */
export default class TravelListExtension extends ControllerExtension {
	/**
	 * Reference to the base PageController.
	 */
	protected base!: PageController;

	/**
	 * Overrides (sap.ui.core.mvc.ControllerExtension.override)
	 */
	static overrides = {
		routing: {
			/**
			 * Handles navigation events and prompts user for confirmation if needed.
			 * @param navigationParameters Navigation parameters containing bindingContext
			 * @returns True to prevent default routing, false to allow
			 */
			onBeforeNavigation: async function (
				this: TravelListExtension,
				navigationParameters: { bindingContext: ODataV4Context }
			): Promise<boolean> {
				const bindingContext = navigationParameters.bindingContext;
				const objectInformation = bindingContext.getObject();

				const askUser = (): Promise<boolean> => {
					return new Promise((resolve) => {
						const approveDialog = new Dialog({
							type: DialogType.Message,
							title: "Navigation Confirmation",
							content: new Text({
								text: "Travel already confirmed - do you still want to continue?"
							}),
							beginButton: new Button({
								type: ButtonType.Emphasized,
								text: "Yes",
								press: () => {
									approveDialog.close();
									resolve(true);
								}
							}),
							endButton: new Button({
								text: "No",
								press: () => {
									approveDialog.close();
									resolve(false);
								}
							})
						});
						approveDialog.open();
					});
				};

				if (objectInformation.TravelStatus_code === "A") {
					// If the travel status is "A" (Approved), ask for confirmation before navigating
					const result = await askUser();
					if (result) {
						this.base.getExtensionAPI().routing.navigate(bindingContext);
					} else {
						MessageToast.show("Navigation aborted");
					}
					return true; // Prevent default routing behaviour
				} else if (objectInformation.TravelStatus_code === "X") {
					// If the travel is cancelled, show a message and prevent navigation
					MessageToast.show("Travel is cancelled - navigation not allowed");
					return true;
				} else {
					return false; // Continue with default routing behaviour
				}
			}
		}
	};

	/**
	 * Navigates to the TravelDetail route with a hardcoded key.
	 */
	public invokeNavigation(): void {
		// Example of programmatic navigation to TravelDetail with a hardcoded key
		const navigationParameter = {
			key: `TravelUUID=53657221A8E4645C17002DF03754AB66,IsActiveEntity=true`
		} as any;
		this.base.routing.navigateToRoute("TravelDetail", navigationParameter);
	}
}
```

**STEP**: Intercepting Navigation

**DESCRIPTION**: In your controller extension, you can intercept the navigation to a specific page and add your custom logic by overriding the 'onBeforeNavigation' hook. By return true, you can prevent the navigation to the target page and implement your own logic instead.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
import type PageController from "sap/fe/core/PageController";
import Button from "sap/m/Button";
import Dialog from "sap/m/Dialog";
import MessageToast from "sap/m/MessageToast";
import Text from "sap/m/Text";
import { ButtonType, DialogType } from "sap/m/library";
import ControllerExtension from "sap/ui/core/mvc/ControllerExtension";
import type ODataV4Context from "sap/ui/model/odata/v4/Context";

/**
 * Controller extension for custom routing logic in Travel List.
 * @namespace sap.fe.core.fpmExplorer.routing
 */
export default class TravelListExtension extends ControllerExtension {
	/**
	 * Reference to the base PageController.
	 */
	protected base!: PageController;

	/**
	 * Overrides (sap.ui.core.mvc.ControllerExtension.override)
	 */
	static overrides = {
		routing: {
			/**
			 * Handles navigation events and prompts user for confirmation if needed.
			 * @param navigationParameters Navigation parameters containing bindingContext
			 * @returns True to prevent default routing, false to allow
			 */
			onBeforeNavigation: async function (
				this: TravelListExtension,
				navigationParameters: { bindingContext: ODataV4Context }
			): Promise<boolean> {
				const bindingContext = navigationParameters.bindingContext;
				const objectInformation = bindingContext.getObject();

				const askUser = (): Promise<boolean> => {
					return new Promise((resolve) => {
						const approveDialog = new Dialog({
							type: DialogType.Message,
							title: "Navigation Confirmation",
							content: new Text({
								text: "Travel already confirmed - do you still want to continue?"
							}),
							beginButton: new Button({
								type: ButtonType.Emphasized,
								text: "Yes",
								press: () => {
									approveDialog.close();
									resolve(true);
								}
							}),
							endButton: new Button({
								text: "No",
								press: () => {
									approveDialog.close();
									resolve(false);
								}
							})
						});
						approveDialog.open();
					});
				};

				if (objectInformation.TravelStatus_code === "A") {
					// If the travel status is "A" (Approved), ask for confirmation before navigating
					const result = await askUser();
					if (result) {
						this.base.getExtensionAPI().routing.navigate(bindingContext);
					} else {
						MessageToast.show("Navigation aborted");
					}
					return true; // Prevent default routing behaviour
				} else if (objectInformation.TravelStatus_code === "X") {
					// If the travel is cancelled, show a message and prevent navigation
					MessageToast.show("Travel is cancelled - navigation not allowed");
					return true;
				} else {
					return false; // Continue with default routing behaviour
				}
			}
		}
	};

	/**
	 * Navigates to the TravelDetail route with a hardcoded key.
	 */
	public invokeNavigation(): void {
		// Example of programmatic navigation to TravelDetail with a hardcoded key
		const navigationParameter = {
			key: `TravelUUID=53657221A8E4645C17002DF03754AB66,IsActiveEntity=true`
		} as any;
		this.base.routing.navigateToRoute("TravelDetail", navigationParameter);
	}
}
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: annotations.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});

```

**FILE**: Travel.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"TravelID": "00000001",
		"BeginDate": "2025-11-04",
		"EndDate": "2025-11-06",
		"BookingFee": "20.00",
		"TotalPrice": "900.00",
		"CurrencyCode_code": "USD",
		"Description": "Business Trip for Christine, Pierre",
		"TravelDetails": "This business trip includes a two-day customer workshop at the airport. The goal is the evaluation of the customer's use cases and the alignment on the roadmap for the upcoming year.",
		"TravelStatus_code": "A",
		"to_Agency_AgencyID": "070001"
	},
	{
		"TravelUUID": "53657221A8E4645C17002DF03754AB66",
		"TravelID": "00000002",
		"BeginDate": "2025-12-04",
		"EndDate": "2025-12-16",
		"BookingFee": "80.00",
		"TotalPrice": "3164.00",
		"CurrencyCode_code": "USD",
		"Description": "Lars Jensen site visit for system rollout support",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070002"
	},
	{
		"TravelUUID": "54657221A8E4645C17002DF03754AB66",
		"TravelID": "00000003",
		"BeginDate": "2025-08-04",
		"EndDate": "2025-08-08",
		"BookingFee": "40.00",
		"TotalPrice": "1871.00",
		"CurrencyCode_code": "USD",
		"Description": "John Smith customer workshop at Acme Corp headquarters",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070003"
	},
	{
		"TravelUUID": "55657221A8E4645C17002DF03754AB66",
		"TravelID": "00000004",
		"BeginDate": "2025-09-04",
		"EndDate": "2025-09-05",
		"BookingFee": "40.00",
		"TotalPrice": "1240.00",
		"CurrencyCode_code": "USD",
		"Description": "Anna Müller onboarding with new project team in Berlin",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "X",
		"to_Agency_AgencyID": "070003"
	}
]

```

--------------------------------

**TITLE**: Share Extension

**INTRODUCTION**: The Share controller extension enables you to extend the share functionality in your application.

**TAGS**: share extensions, share controller extension, share extensibility, customization

**STEP**: Overriding the Share Controller Extension

**DESCRIPTION**: To implement a custom share functionality, you need to override the Share controller extension. This allows you to add custom logic to the share action in your application.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
import PageController from "sap/fe/core/PageController";
import Share from "sap/fe/core/controllerextensions/Share";

/**
 * Share metadata structure for the share extension.
 */
interface ShareData {
	email: {
		title: string;
	};
}

/**
 * @namespace sap.fe.core.fpmExplorer.shareExtensibility
 */
export default PageController.extend("sap.fe.core.fpmExplorer.shareExtensibility.Sample", {
	share: Share.override({
		adaptShareMetadata: function (shareData: ShareData): ShareData {
			shareData.email.title = "SAP Fiori Development Portal: Share Extension";
			return shareData;
		}
	})
});
```

**STEP**: Implementing Custom Share Logic

**DESCRIPTION**: In the overridden Share controller extension, you can implement your custom share logic. This includes defining how the share action should behave, such as modifying the e-mail title.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
import PageController from "sap/fe/core/PageController";
import Share from "sap/fe/core/controllerextensions/Share";

/**
 * Share metadata structure for the share extension.
 */
interface ShareData {
	email: {
		title: string;
	};
}

/**
 * @namespace sap.fe.core.fpmExplorer.shareExtensibility
 */
export default PageController.extend("sap.fe.core.fpmExplorer.shareExtensibility.Sample", {
	share: Share.override({
		adaptShareMetadata: function (shareData: ShareData): ShareData {
			shareData.email.title = "SAP Fiori Development Portal: Share Extension";
			return shareData;
		}
	})
});
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: Sample.fragment.xml

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:macros="sap.fe.macros">
	<VBox>
		<MessageStrip type="Information" class="sapUiSmallMarginBottom" text="Click on 'Send E-Mail' to see the custom mail title." />
		<macros:Share id="share" />
	</VBox>
</core:FragmentDefinition>

```

--------------------------------

**TITLE**: State Handling

**INTRODUCTION**: You can implement custom state handling in controller extensions to save and restore the state of custom controls and additional data when navigating between pages.

**TAGS**: custom state handling, view state, state management

**STEP**: Override View State Methods

**DESCRIPTION**: To implement view state management, you need to extend the controller and override the viewState methods. The viewState object provides several hooks to customize how the state is managed.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
import ObjectPageController from "sap/fe/templates/ObjectPage/ObjectPageController.controller";
import type Input from "sap/m/Input";
import MessageToast from "sap/m/MessageToast";
import type Control from "sap/ui/core/Control";
import JSONModel from "sap/ui/model/json/JSONModel";

/**
 * Additional state information for the view.
 */
type ViewAdditionalStates = {
	lastVisit: string;
};

/**
 * Handler for adapting control state.
 */
type AdaptHandler = {
	retrieve: (control: Input) => { stateValue: string };
	apply: (_control: Control, currentState: { stateValue: string }, _n: unknown) => void;
};

export default class OPExtendController extends ObjectPageController {
	public base!: ObjectPageController;

	// this section allows to extend lifecycle hooks or override public methods of the base controller
	public override = {
		onInit: () => {
			this.getView().setModel(new JSONModel({ stateValue: "" }), "state");
		},
		viewState: {
			applyInitialStateOnly: () => {
				return false;
			},
			adaptControlStateHandler: (controlToAdapt: Control, adaptHandlers: AdaptHandler[]) => {
				if (controlToAdapt.isA("sap.m.Input")) {
					adaptHandlers.push({
						retrieve: (control: Input) => {
							return {
								stateValue: control.getValue()
							};
						},
						apply: (_control: Control, currentState: { stateValue: string }, _n: unknown) => {
							if (currentState.stateValue) {
								(this.base.getView().getModel("state") as JSONModel).setProperty("/stateValue", currentState.stateValue);
							}
						}
					});
				}
			},
			adaptStateControls: (controls: Control[]) => {
				controls.push(this.base.getExtensionAPI().byId("fe::CustomSubSection::myCustomSection--myCustomInput") as Input);
			},
			retrieveAdditionalStates: (additionalStates: ViewAdditionalStates) => {
				additionalStates.lastVisit = new Date().toString();
			},
			applyAdditionalStates: (additionalStates: ViewAdditionalStates) => {
				if (additionalStates && additionalStates.lastVisit) {
					MessageToast.show("Applying view state from " + additionalStates.lastVisit);
				}
			}
		}
	};

	public onSaveToAppState(): void {
		this.base.getExtensionAPI().updateAppState();
	}

	public onRefresh(): void {
		window.location.reload();
	}
}
```

**STEP**: Control State Adaptation

**DESCRIPTION**: Use adaptControlStateHandler to define how custom controls should save and restore their state. This method allows you to specify retrieve and apply functions for different control types.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
import ObjectPageController from "sap/fe/templates/ObjectPage/ObjectPageController.controller";
import type Input from "sap/m/Input";
import MessageToast from "sap/m/MessageToast";
import type Control from "sap/ui/core/Control";
import JSONModel from "sap/ui/model/json/JSONModel";

/**
 * Additional state information for the view.
 */
type ViewAdditionalStates = {
	lastVisit: string;
};

/**
 * Handler for adapting control state.
 */
type AdaptHandler = {
	retrieve: (control: Input) => { stateValue: string };
	apply: (_control: Control, currentState: { stateValue: string }, _n: unknown) => void;
};

export default class OPExtendController extends ObjectPageController {
	public base!: ObjectPageController;

	// this section allows to extend lifecycle hooks or override public methods of the base controller
	public override = {
		onInit: () => {
			this.getView().setModel(new JSONModel({ stateValue: "" }), "state");
		},
		viewState: {
			applyInitialStateOnly: () => {
				return false;
			},
			adaptControlStateHandler: (controlToAdapt: Control, adaptHandlers: AdaptHandler[]) => {
				if (controlToAdapt.isA("sap.m.Input")) {
					adaptHandlers.push({
						retrieve: (control: Input) => {
							return {
								stateValue: control.getValue()
							};
						},
						apply: (_control: Control, currentState: { stateValue: string }, _n: unknown) => {
							if (currentState.stateValue) {
								(this.base.getView().getModel("state") as JSONModel).setProperty("/stateValue", currentState.stateValue);
							}
						}
					});
				}
			},
			adaptStateControls: (controls: Control[]) => {
				controls.push(this.base.getExtensionAPI().byId("fe::CustomSubSection::myCustomSection--myCustomInput") as Input);
			},
			retrieveAdditionalStates: (additionalStates: ViewAdditionalStates) => {
				additionalStates.lastVisit = new Date().toString();
			},
			applyAdditionalStates: (additionalStates: ViewAdditionalStates) => {
				if (additionalStates && additionalStates.lastVisit) {
					MessageToast.show("Applying view state from " + additionalStates.lastVisit);
				}
			}
		}
	};

	public onSaveToAppState(): void {
		this.base.getExtensionAPI().updateAppState();
	}

	public onRefresh(): void {
		window.location.reload();
	}
}
```

**STEP**: Register State Controls

**DESCRIPTION**: Use adaptStateControls to register which controls should be included in the state management. Add your custom controls to the aControls array.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
import ObjectPageController from "sap/fe/templates/ObjectPage/ObjectPageController.controller";
import type Input from "sap/m/Input";
import MessageToast from "sap/m/MessageToast";
import type Control from "sap/ui/core/Control";
import JSONModel from "sap/ui/model/json/JSONModel";

/**
 * Additional state information for the view.
 */
type ViewAdditionalStates = {
	lastVisit: string;
};

/**
 * Handler for adapting control state.
 */
type AdaptHandler = {
	retrieve: (control: Input) => { stateValue: string };
	apply: (_control: Control, currentState: { stateValue: string }, _n: unknown) => void;
};

export default class OPExtendController extends ObjectPageController {
	public base!: ObjectPageController;

	// this section allows to extend lifecycle hooks or override public methods of the base controller
	public override = {
		onInit: () => {
			this.getView().setModel(new JSONModel({ stateValue: "" }), "state");
		},
		viewState: {
			applyInitialStateOnly: () => {
				return false;
			},
			adaptControlStateHandler: (controlToAdapt: Control, adaptHandlers: AdaptHandler[]) => {
				if (controlToAdapt.isA("sap.m.Input")) {
					adaptHandlers.push({
						retrieve: (control: Input) => {
							return {
								stateValue: control.getValue()
							};
						},
						apply: (_control: Control, currentState: { stateValue: string }, _n: unknown) => {
							if (currentState.stateValue) {
								(this.base.getView().getModel("state") as JSONModel).setProperty("/stateValue", currentState.stateValue);
							}
						}
					});
				}
			},
			adaptStateControls: (controls: Control[]) => {
				controls.push(this.base.getExtensionAPI().byId("fe::CustomSubSection::myCustomSection--myCustomInput") as Input);
			},
			retrieveAdditionalStates: (additionalStates: ViewAdditionalStates) => {
				additionalStates.lastVisit = new Date().toString();
			},
			applyAdditionalStates: (additionalStates: ViewAdditionalStates) => {
				if (additionalStates && additionalStates.lastVisit) {
					MessageToast.show("Applying view state from " + additionalStates.lastVisit);
				}
			}
		}
	};

	public onSaveToAppState(): void {
		this.base.getExtensionAPI().updateAppState();
	}

	public onRefresh(): void {
		window.location.reload();
	}
}
```

**STEP**: Additional State Management

**DESCRIPTION**: Use retrieveAdditionalStates and applyAdditionalStates to manage custom data that is not bound to specific controls, such as timestamps or user preferences.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
import ObjectPageController from "sap/fe/templates/ObjectPage/ObjectPageController.controller";
import type Input from "sap/m/Input";
import MessageToast from "sap/m/MessageToast";
import type Control from "sap/ui/core/Control";
import JSONModel from "sap/ui/model/json/JSONModel";

/**
 * Additional state information for the view.
 */
type ViewAdditionalStates = {
	lastVisit: string;
};

/**
 * Handler for adapting control state.
 */
type AdaptHandler = {
	retrieve: (control: Input) => { stateValue: string };
	apply: (_control: Control, currentState: { stateValue: string }, _n: unknown) => void;
};

export default class OPExtendController extends ObjectPageController {
	public base!: ObjectPageController;

	// this section allows to extend lifecycle hooks or override public methods of the base controller
	public override = {
		onInit: () => {
			this.getView().setModel(new JSONModel({ stateValue: "" }), "state");
		},
		viewState: {
			applyInitialStateOnly: () => {
				return false;
			},
			adaptControlStateHandler: (controlToAdapt: Control, adaptHandlers: AdaptHandler[]) => {
				if (controlToAdapt.isA("sap.m.Input")) {
					adaptHandlers.push({
						retrieve: (control: Input) => {
							return {
								stateValue: control.getValue()
							};
						},
						apply: (_control: Control, currentState: { stateValue: string }, _n: unknown) => {
							if (currentState.stateValue) {
								(this.base.getView().getModel("state") as JSONModel).setProperty("/stateValue", currentState.stateValue);
							}
						}
					});
				}
			},
			adaptStateControls: (controls: Control[]) => {
				controls.push(this.base.getExtensionAPI().byId("fe::CustomSubSection::myCustomSection--myCustomInput") as Input);
			},
			retrieveAdditionalStates: (additionalStates: ViewAdditionalStates) => {
				additionalStates.lastVisit = new Date().toString();
			},
			applyAdditionalStates: (additionalStates: ViewAdditionalStates) => {
				if (additionalStates && additionalStates.lastVisit) {
					MessageToast.show("Applying view state from " + additionalStates.lastVisit);
				}
			}
		}
	};

	public onSaveToAppState(): void {
		this.base.getExtensionAPI().updateAppState();
	}

	public onRefresh(): void {
		window.location.reload();
	}
}
```

**STEP**: Update App State

**DESCRIPTION**: Call the updateAppState method from the extension API to save the current state. This is typically done in response to user actions.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
import ObjectPageController from "sap/fe/templates/ObjectPage/ObjectPageController.controller";
import type Input from "sap/m/Input";
import MessageToast from "sap/m/MessageToast";
import type Control from "sap/ui/core/Control";
import JSONModel from "sap/ui/model/json/JSONModel";

/**
 * Additional state information for the view.
 */
type ViewAdditionalStates = {
	lastVisit: string;
};

/**
 * Handler for adapting control state.
 */
type AdaptHandler = {
	retrieve: (control: Input) => { stateValue: string };
	apply: (_control: Control, currentState: { stateValue: string }, _n: unknown) => void;
};

export default class OPExtendController extends ObjectPageController {
	public base!: ObjectPageController;

	// this section allows to extend lifecycle hooks or override public methods of the base controller
	public override = {
		onInit: () => {
			this.getView().setModel(new JSONModel({ stateValue: "" }), "state");
		},
		viewState: {
			applyInitialStateOnly: () => {
				return false;
			},
			adaptControlStateHandler: (controlToAdapt: Control, adaptHandlers: AdaptHandler[]) => {
				if (controlToAdapt.isA("sap.m.Input")) {
					adaptHandlers.push({
						retrieve: (control: Input) => {
							return {
								stateValue: control.getValue()
							};
						},
						apply: (_control: Control, currentState: { stateValue: string }, _n: unknown) => {
							if (currentState.stateValue) {
								(this.base.getView().getModel("state") as JSONModel).setProperty("/stateValue", currentState.stateValue);
							}
						}
					});
				}
			},
			adaptStateControls: (controls: Control[]) => {
				controls.push(this.base.getExtensionAPI().byId("fe::CustomSubSection::myCustomSection--myCustomInput") as Input);
			},
			retrieveAdditionalStates: (additionalStates: ViewAdditionalStates) => {
				additionalStates.lastVisit = new Date().toString();
			},
			applyAdditionalStates: (additionalStates: ViewAdditionalStates) => {
				if (additionalStates && additionalStates.lastVisit) {
					MessageToast.show("Applying view state from " + additionalStates.lastVisit);
				}
			}
		}
	};

	public onSaveToAppState(): void {
		this.base.getExtensionAPI().updateAppState();
	}

	public onRefresh(): void {
		window.location.reload();
	}
}
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: manifest.json

**LANGUAGE**: JSON

**CODE**:
```json
{
	"_version": "1.12.0",
	"sap.app": {
		"id": "sap.fe.core.fpmExplorer.viewState",
		"type": "application",
		"i18n": {
			"bundleUrl": "i18n/i18n.properties",
			"supportedLocales": [""],
			"fallbackLocale": ""
		},
		"applicationVersion": {
			"version": "1.0.0"
		},
		"dataSources": {
			"mainService": {
				"uri": "/sap/fe/core/mock/viewState/",
				"type": "OData",
				"settings": {
					"annotations": [],
					"odataVersion": "4.0"
				}
			}
		}
	},
	"sap.ui5": {
		"dependencies": {
			"minUI5Version": "1.111.1",
			"libs": {
				"sap.ui.core": {},
				"sap.fe.templates": {}
			}
		},
		"extends": {
			"extensions": {
				"sap.ui.controllerExtensions": {
					"sap.fe.templates.ObjectPage.ObjectPageController#sap.fe.core.fpmExplorer.viewState::Default": {
						"controllerName": "sap.fe.core.fpmExplorer.viewState.OPExtend"
					}
				}
			}
		},
		"contentDensities": {
			"compact": true,
			"cozy": true
		},
		"models": {
			"": {
				"dataSource": "mainService",
				"settings": {
					"operationMode": "Server",
					"autoExpandSelect": true,
					"earlyRequests": true
				}
			}
		},
		"rootView": {
			"viewName": "sap.fe.core.fpmExplorer.viewState.ViewState"
		},
		"routing": {
			"config": {
				"controlId": "viewState"
			},
			"routes": [
				{
					"pattern": "/Travel({key}):?query:",
					"name": "default",
					"target": "sample"
				}
			],
			"targets": {
				"sample": {
					"type": "Component",
					"id": "Default",
					"name": "sap.fe.templates.ObjectPage",
					"viewLevel": 1,
					"options": {
						"settings": {
							"contextPath": "/Travel",
							"content": {
								"body": {
									"sections": {
										"myCustomSection": {
											"template": "sap.fe.core.fpmExplorer.viewState.CustomSection",
											"title": "My Custom Section"
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}

```

**FILE**: CustomSection.fragment.xml

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:l="sap.ui.layout">
	<l:VerticalLayout class="sapUiContentPadding">
		<Text text="The data written here can be saved to appState" />
		<Text text="Value currently set {state>/stateValue}" />
		<Input id="myCustomInput" />
		<Button text="Save to AppState" press=".extension.sap.fe.core.fpmExplorer.viewState.OPExtend.onSaveToAppState" />
		<Button text="Refresh the page" press=".extension.sap.fe.core.fpmExplorer.viewState.OPExtend.onRefresh" />
	</l:VerticalLayout>
</core:FragmentDefinition>

```

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: annotations.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});

```

**FILE**: Travel.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"TravelID": "00000001",
		"BeginDate": "2025-11-04",
		"EndDate": "2025-11-06",
		"BookingFee": "20.00",
		"TotalPrice": "900.00",
		"CurrencyCode_code": "USD",
		"Description": "Business Trip for Christine, Pierre",
		"TravelDetails": "This business trip includes a two-day customer workshop at the airport. The goal is the evaluation of the customer's use cases and the alignment on the roadmap for the upcoming year.",
		"TravelStatus_code": "A",
		"to_Agency_AgencyID": "070001"
	},
	{
		"TravelUUID": "53657221A8E4645C17002DF03754AB66",
		"TravelID": "00000002",
		"BeginDate": "2025-12-04",
		"EndDate": "2025-12-16",
		"BookingFee": "80.00",
		"TotalPrice": "3164.00",
		"CurrencyCode_code": "USD",
		"Description": "Lars Jensen site visit for system rollout support",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070002"
	},
	{
		"TravelUUID": "54657221A8E4645C17002DF03754AB66",
		"TravelID": "00000003",
		"BeginDate": "2025-08-04",
		"EndDate": "2025-08-08",
		"BookingFee": "40.00",
		"TotalPrice": "1871.00",
		"CurrencyCode_code": "USD",
		"Description": "John Smith customer workshop at Acme Corp headquarters",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070003"
	},
	{
		"TravelUUID": "55657221A8E4645C17002DF03754AB66",
		"TravelID": "00000004",
		"BeginDate": "2025-09-04",
		"EndDate": "2025-09-05",
		"BookingFee": "40.00",
		"TotalPrice": "1240.00",
		"CurrencyCode_code": "USD",
		"Description": "Anna Müller onboarding with new project team in Berlin",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "X",
		"to_Agency_AgencyID": "070003"
	}
]

```

--------------------------------

**TITLE**: Custom Page

**INTRODUCTION**: You can build your SAP Fiori elements app from a blank custom page while still getting full support through our building blocks, including the Page building block.

**TAGS**: custom page, dialog, custom dialog, building blocks, controller, blank page

**STEP**: Using Building Blocks

**DESCRIPTION**: 

**STEP**: Using the Page Building Block

**DESCRIPTION**: You can use the Page building block to create a new custom page. By default, it contains a title and is preconfigured with the appropriate margins and padding.

**LANGUAGE**: XML

**CODE**:
```xml
<mvc:View
	id="application-product"
	height="100%"
	controllerName="sap.fe.core.fpmExplorer.customPage.CustomPageSample"
	xmlns="sap.m"
	xmlns:mvc="sap.ui.core.mvc"
	xmlns:l="sap.ui.layout"
	xmlns:macros="sap.fe.macros"
>
	<macros:Page title="My Travel Requests" class="sapUiContentPadding">
		<Panel headerText="Pending Travel Requests">
			<ProgressIndicator
				width="40%"
				class="sapUiTinyMarginTopBottom"
				percentValue="40"
				displayValue="28k of 70k travel budget used"
				showValue="true"
				state="Warning"
			/>
			<l:HorizontalLayout
				id="TileContainerExpanded"
				allowWrapping="true"
				content="{
        			path : '/Travel',
        			filters : [
            			{ path : 'TravelStatus_code', operator : 'EQ', value1 : 'O'}
        			]
    			}"
			>
				<GenericTile
					header="{Description}"
					subheader="{BeginDate}"
					press="onPressed"
					class="sapUiTinyMarginEnd sapUiTinyMarginTop tileLayout"
				>
					<TileContent unit="{CurrencyCode_code}">
						<NumericContent withMargin="false" value="{TotalPrice}" truncateValueTo="6" />
					</TileContent>
				</GenericTile>
			</l:HorizontalLayout>
		</Panel>
		<Panel headerText="All Travel Requests">
			<macros:Table metaPath="/Travel/@com.sap.vocabularies.UI.v1.LineItem" />
		</Panel>
	</macros:Page>
</mvc:View>
```

--------------------------------

**TITLE**: Analytical List Page

**INTRODUCTION**: The analytical list page offers a unique way to analyze data step by step from different perspectives, to investigate a root cause through drilldown, and to act on transactional content.

**TAGS**: analytical list page, analytics, charts, insights, ALP

**STEP**: Visual Filter

**DESCRIPTION**: The visual filter bar enables end users to select filter values based on measure values in addition to the filters and filter values already selected in the regular filter bar.

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

// using { TravelService.Booking as Booking, MasterData } from '../../../../../service/service';

// ensure all masterdata entities are available to clients
@cds.autoexpose  @readonly
aspect MasterData {}

aspect CodeList @(
  cds.autoexpose,
  cds.persistence.skip: 'if-unused'
) {
  name  : localized String(255)  @title: 'Name';
  descr : localized String(1000) @title: 'Description';
}


service AnalyticsService {
  //
  entity Airline : MasterData {
    key AirlineID     : String(3);
        Name          : String(40);
        CurrencyCode  : Currency;
        AirlinePicURL : String @UI: {IsImageURL: true};
  };

  //
  @readonly
  entity Booking {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @mandatory;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'USD'                   @mandatory;

        @Common.Label: 'Airline ID'
        airline       : String(3)                                @mandatory;

        @Common.Label: 'Airline Name'
        airlineName   : String(40)                               @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;

        @title       : 'Airline'
        to_Carrier    : Association to Airline                   @mandatory;

  // maybe later?
  // @Common.Label: 'Status'
  // BookingStatus : Association to BookingStatus default 'N' @mandatory;
  // to_Travel     : Association to Travel                    @mandatory;
  //
  };
  //

  /*
    @readonly
    entity Bookings as
      projection on Booking {

        BookingUUID,
        BookingID,
        BookingDate,
        ConnectionID,
        FlightDate,
        FlightPrice,
        CurrencyCode,
        @Common.Text: airlineName
        to_Carrier.AirlineID as airline,
        to_Carrier.Name      as airlineName,

      }
  */

  //
  // code lists
  //
  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };

  entity BookingStatus : CodeList {
    key code : BookingStatusCode
  };


  //
  // annotations
  //
  annotate Booking with @(
    Aggregation.CustomAggregate #FlightPrice      : 'Edm.Decimal',
    Aggregation.CustomAggregate #CurrencyCode_code: 'Edm.String',
    Common.SemanticKey                            : [BookingUUID],
  ) {
    BookingUUID  @ID                 : 'ID';
    FlightPrice  @Aggregation.default: #SUM;
    CurrencyCode @Aggregation.default: #MAX;
  };

  annotate Booking with @Aggregation.ApplySupported: {
    Transformations       : [
      'aggregate',
      'topcount',
      'bottomcount',
      'identity',
      'concat',
      'groupby',
      'filter',
      'search'
    ],
    GroupableProperties   : [
      BookingID,
      ConnectionID,
      FlightDate,
      CurrencyCode
    ],
    AggregatableProperties: [
      {Property: FlightPrice},
      {Property: BookingUUID},
    ],
  };

  annotate Booking with @(
    Analytics.AggregatedProperty #countBookings: {
      Name                : 'countBookings',
      AggregationMethod   : 'countdistinct',
      AggregatableProperty: BookingUUID,
      @Common.Label       : '{i18n>Bookings}'
    },
    Analytics.AggregatedProperty #minPrice     : {
      Name                : 'minPrice',
      AggregationMethod   : 'min',
      AggregatableProperty: FlightPrice,
      @Common.Label       : '{i18n>MinPrice}'
    },
    Analytics.AggregatedProperty #maxPrice     : {
      Name                : 'maxPrice',
      AggregationMethod   : 'max',
      AggregatableProperty: FlightPrice,
      @Common.Label       : '{i18n>MaxPrice}'
    },
    Analytics.AggregatedProperty #avgPrice     : {
      Name                : 'avgPrice',
      AggregationMethod   : 'average',
      AggregatableProperty: FlightPrice,
      @Common.Label       : '{i18n>AvgPrice}'
    }
  );

  annotate Booking with @UI.LineItem: [
    {
      Value             : BookingID,
      Label             : '{i18n>Booking}',
      @UI.Importance    : #High,
      @HTML5.CssDefaults: {width: '8em'},
    },
    // {
    //   Value             : to_Carrier_AirlineID,
    //   @UI.Importance    : #High,
    //   @HTML5.CssDefaults: {width: '14em'},
    // },
    // {
    //   Value             : airlineName,
    //   @UI.Importance    : #High,
    //   @HTML5.CssDefaults: {width: '20em'},
    // },
    {
      Value             : ConnectionID,
      @UI.Importance    : #High,
      @HTML5.CssDefaults: {width: '8em'},
    },
    {
      Value         : FlightDate,
      @UI.Importance: #High,
    },
    {
      Value             : FlightPrice,
      @UI.Importance    : #High,
      @HTML5.CssDefaults: {width: '12em'},
    }
  ];

  annotate Booking with @UI.Chart: {
    Title              : '{i18n>Bookings}',
    ChartType          : #Bar,
    DynamicMeasures    : [
      '@Analytics.AggregatedProperty#minPrice',
      '@Analytics.AggregatedProperty#maxPrice',
      '@Analytics.AggregatedProperty#avgPrice'
    ],
    Dimensions         : [airline],
    MeasureAttributes  : [{
      DynamicMeasure: '@Analytics.AggregatedProperty#minPrice',
      Role          : #Axis1
    }],
    DimensionAttributes: [{
      Dimension: airline,
      Role     : #Category
    }],
  };

  annotate Booking with @UI.PresentationVariant: {
    GroupBy       : [ // default grouping in table
      airline,
      BookingStatus_code
    ],
    Total         : [ // default aggregation in table
    FlightPrice],
    Visualizations: [
      '@UI.Chart',
      '@UI.LineItem',
    ]
  };


  //
  // Visual Filters
  //
  annotate Booking with @(
    UI.PresentationVariant #pvAirline: {
      SortOrder     : [{
        Property  : airline,
        Descending: false
      }],
      Visualizations: ['@UI.Chart#chartAirline']
    },
    UI.Chart #chartAirline           : {
      Title              : 'Bookings over Airline',
      ChartType          : #Bar,
      DynamicMeasures    : ['@Analytics.AggregatedProperty#countBookings', ],
      Dimensions         : [airline],
      MeasureAttributes  : [{
        DynamicMeasure: '@Analytics.AggregatedProperty#countBookings',
        Role          : #Axis1,
      }],
      DimensionAttributes: [{
        Dimension: airline,
        Role     : #Category
      }],
    }
  ) {
    airline @Common.ValueList #vlAirline: {
      CollectionPath              : 'Booking',
      PresentationVariantQualifier: 'pvAirline',
      Parameters                  : [{
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: airline,
        ValueListProperty: 'airline'
      }]
    };
  };

  /*
    annotate Booking with @(
      UI.PresentationVariant #pvStatus : {
        Visualizations : ['@UI.Chart#chartStatus']
      },
      UI.Chart #chartStatus : {
        ChartType           : #Bar,
        DynamicMeasures : [
          '@Analytics.AggregatedProperty#countBookings',
        ],
        Dimensions          : [BookingStatus_code],
        MeasureAttributes   : [{
          DynamicMeasure : '@Analytics.AggregatedProperty#countBookings',
          Role      : #Axis1,
        }],
        DimensionAttributes : [{
          Dimension : BookingStatus_code,
          Role      : #Category
        }]
      }
    ) {
      BookingStatus @(
        Common.ValueList #vlStatus : {
          CollectionPath               : 'Booking',
          PresentationVariantQualifier : 'pvStatus',
          Parameters                   : [{
            $Type             : 'Common.ValueListParameterInOut',
            LocalDataProperty : BookingStatus_code,
            ValueListProperty : 'BookingStatus_code'
          }]
        },
        Common.ValueList : {
          CollectionPath : 'BookingStatus',
          Parameters : [{
            $Type : 'Common.ValueListParameterInOut',
            LocalDataProperty : BookingStatus_code,
            ValueListProperty : 'code',
          }]
        },
        //Common.ValueListWithFixedValues : true
      )
    };
  */
  annotate Booking with @(
    UI.PresentationVariant #pvFlightDate: {
      SortOrder     : [{
        Property  : FlightDate,
        Descending: true
      }],
      Visualizations: ['@UI.Chart#chartFlightDate']
    },
    UI.Chart #chartFlightDate           : {
      Title              : 'Bookings over FlightDate',
      ChartType          : #Line,
      DynamicMeasures    : ['@Analytics.AggregatedProperty#countBookings', ],
      Dimensions         : [FlightDate],
      MeasureAttributes  : [{
        DynamicMeasure: '@Analytics.AggregatedProperty#countBookings',
        Role          : #Axis1,
      }],
      DimensionAttributes: [{
        Dimension: FlightDate,
        Role     : #Category
      }]
    }
  ) {
    FlightDate @Common.ValueList #vlFlightDate: {
      CollectionPath              : 'Booking',
      PresentationVariantQualifier: 'pvFlightDate',
      Parameters                  : [{
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: FlightDate,
        ValueListProperty: 'FlightDate'
      }]
    };
  };

  // determines the order of visual filters
  annotate Booking with @UI.SelectionFields: [
    airline,
    FlightDate
  ];


  //
  // KPI
  //
  annotate Booking with @(
    UI.KPI #myKPI1: {
      DataPoint       : {
        Value                 : FlightPrice,
        Title                 : 'TOT',
        Description           : '{i18n>Total Price}',
        CriticalityCalculation: {
          ImprovementDirection   : #Maximize,
          AcceptanceRangeLowValue: 26000000,
          ToleranceRangeLowValue : 24000000,
          DeviationRangeLowValue : 22000000
        }
      },
      Detail          : {DefaultPresentationVariant: {Visualizations: ['@UI.Chart#kpi1'], }, },
      SelectionVariant: {SelectOptions: [{
        PropertyName: FlightPrice,
        Ranges      : [{
          Sign  : #E,
          Option: #EQ,
          Low   : 0,
        }, ],
      }], }
    },
    UI.Chart #kpi1: {
      ChartType          : #Line,
      Measures           : [FlightPrice],
      Dimensions         : [FlightDate],
      MeasureAttributes  : [{
        Measure: FlightPrice,
        Role   : #Axis1
      }],
      DimensionAttributes: [{
        Dimension: FlightDate,
        Role     : #Category
      }]
    },
  );


}
```

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.PresentationVariant" Qualifier="pvFlightDate">
	<Record Type="UI.PresentationVariantType">
		<PropertyValue Property="SortOrder">
			<Collection>
				<Record Type="Common.SortOrderType">
					<PropertyValue Property="Property" PropertyPath="FlightDate" />
					<PropertyValue Property="Descending" Bool="true" />
				</Record>
			</Collection>
		</PropertyValue>
		<PropertyValue Property="Visualizations">
			<Collection>
				<AnnotationPath>@UI.Chart#chartFlightDate</AnnotationPath>
			</Collection>
		</PropertyValue>
	</Record>
</Annotation>
```

**STEP**: Bar Chart

**DESCRIPTION**: Use a chart that provides visual representation of analytical data.

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

// using { TravelService.Booking as Booking, MasterData } from '../../../../../service/service';

// ensure all masterdata entities are available to clients
@cds.autoexpose  @readonly
aspect MasterData {}

aspect CodeList @(
  cds.autoexpose,
  cds.persistence.skip: 'if-unused'
) {
  name  : localized String(255)  @title: 'Name';
  descr : localized String(1000) @title: 'Description';
}


service AnalyticsService {
  //
  entity Airline : MasterData {
    key AirlineID     : String(3);
        Name          : String(40);
        CurrencyCode  : Currency;
        AirlinePicURL : String @UI: {IsImageURL: true};
  };

  //
  @readonly
  entity Booking {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @mandatory;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'USD'                   @mandatory;

        @Common.Label: 'Airline ID'
        airline       : String(3)                                @mandatory;

        @Common.Label: 'Airline Name'
        airlineName   : String(40)                               @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;

        @title       : 'Airline'
        to_Carrier    : Association to Airline                   @mandatory;

  // maybe later?
  // @Common.Label: 'Status'
  // BookingStatus : Association to BookingStatus default 'N' @mandatory;
  // to_Travel     : Association to Travel                    @mandatory;
  //
  };
  //

  /*
    @readonly
    entity Bookings as
      projection on Booking {

        BookingUUID,
        BookingID,
        BookingDate,
        ConnectionID,
        FlightDate,
        FlightPrice,
        CurrencyCode,
        @Common.Text: airlineName
        to_Carrier.AirlineID as airline,
        to_Carrier.Name      as airlineName,

      }
  */

  //
  // code lists
  //
  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };

  entity BookingStatus : CodeList {
    key code : BookingStatusCode
  };


  //
  // annotations
  //
  annotate Booking with @(
    Aggregation.CustomAggregate #FlightPrice      : 'Edm.Decimal',
    Aggregation.CustomAggregate #CurrencyCode_code: 'Edm.String',
    Common.SemanticKey                            : [BookingUUID],
  ) {
    BookingUUID  @ID                 : 'ID';
    FlightPrice  @Aggregation.default: #SUM;
    CurrencyCode @Aggregation.default: #MAX;
  };

  annotate Booking with @Aggregation.ApplySupported: {
    Transformations       : [
      'aggregate',
      'topcount',
      'bottomcount',
      'identity',
      'concat',
      'groupby',
      'filter',
      'search'
    ],
    GroupableProperties   : [
      BookingID,
      ConnectionID,
      FlightDate,
      CurrencyCode
    ],
    AggregatableProperties: [
      {Property: FlightPrice},
      {Property: BookingUUID},
    ],
  };

  annotate Booking with @(
    Analytics.AggregatedProperty #countBookings: {
      Name                : 'countBookings',
      AggregationMethod   : 'countdistinct',
      AggregatableProperty: BookingUUID,
      @Common.Label       : '{i18n>Bookings}'
    },
    Analytics.AggregatedProperty #minPrice     : {
      Name                : 'minPrice',
      AggregationMethod   : 'min',
      AggregatableProperty: FlightPrice,
      @Common.Label       : '{i18n>MinPrice}'
    },
    Analytics.AggregatedProperty #maxPrice     : {
      Name                : 'maxPrice',
      AggregationMethod   : 'max',
      AggregatableProperty: FlightPrice,
      @Common.Label       : '{i18n>MaxPrice}'
    },
    Analytics.AggregatedProperty #avgPrice     : {
      Name                : 'avgPrice',
      AggregationMethod   : 'average',
      AggregatableProperty: FlightPrice,
      @Common.Label       : '{i18n>AvgPrice}'
    }
  );

  annotate Booking with @UI.LineItem: [
    {
      Value             : BookingID,
      Label             : '{i18n>Booking}',
      @UI.Importance    : #High,
      @HTML5.CssDefaults: {width: '8em'},
    },
    // {
    //   Value             : to_Carrier_AirlineID,
    //   @UI.Importance    : #High,
    //   @HTML5.CssDefaults: {width: '14em'},
    // },
    // {
    //   Value             : airlineName,
    //   @UI.Importance    : #High,
    //   @HTML5.CssDefaults: {width: '20em'},
    // },
    {
      Value             : ConnectionID,
      @UI.Importance    : #High,
      @HTML5.CssDefaults: {width: '8em'},
    },
    {
      Value         : FlightDate,
      @UI.Importance: #High,
    },
    {
      Value             : FlightPrice,
      @UI.Importance    : #High,
      @HTML5.CssDefaults: {width: '12em'},
    }
  ];

  annotate Booking with @UI.Chart: {
    Title              : '{i18n>Bookings}',
    ChartType          : #Bar,
    DynamicMeasures    : [
      '@Analytics.AggregatedProperty#minPrice',
      '@Analytics.AggregatedProperty#maxPrice',
      '@Analytics.AggregatedProperty#avgPrice'
    ],
    Dimensions         : [airline],
    MeasureAttributes  : [{
      DynamicMeasure: '@Analytics.AggregatedProperty#minPrice',
      Role          : #Axis1
    }],
    DimensionAttributes: [{
      Dimension: airline,
      Role     : #Category
    }],
  };

  annotate Booking with @UI.PresentationVariant: {
    GroupBy       : [ // default grouping in table
      airline,
      BookingStatus_code
    ],
    Total         : [ // default aggregation in table
    FlightPrice],
    Visualizations: [
      '@UI.Chart',
      '@UI.LineItem',
    ]
  };


  //
  // Visual Filters
  //
  annotate Booking with @(
    UI.PresentationVariant #pvAirline: {
      SortOrder     : [{
        Property  : airline,
        Descending: false
      }],
      Visualizations: ['@UI.Chart#chartAirline']
    },
    UI.Chart #chartAirline           : {
      Title              : 'Bookings over Airline',
      ChartType          : #Bar,
      DynamicMeasures    : ['@Analytics.AggregatedProperty#countBookings', ],
      Dimensions         : [airline],
      MeasureAttributes  : [{
        DynamicMeasure: '@Analytics.AggregatedProperty#countBookings',
        Role          : #Axis1,
      }],
      DimensionAttributes: [{
        Dimension: airline,
        Role     : #Category
      }],
    }
  ) {
    airline @Common.ValueList #vlAirline: {
      CollectionPath              : 'Booking',
      PresentationVariantQualifier: 'pvAirline',
      Parameters                  : [{
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: airline,
        ValueListProperty: 'airline'
      }]
    };
  };

  /*
    annotate Booking with @(
      UI.PresentationVariant #pvStatus : {
        Visualizations : ['@UI.Chart#chartStatus']
      },
      UI.Chart #chartStatus : {
        ChartType           : #Bar,
        DynamicMeasures : [
          '@Analytics.AggregatedProperty#countBookings',
        ],
        Dimensions          : [BookingStatus_code],
        MeasureAttributes   : [{
          DynamicMeasure : '@Analytics.AggregatedProperty#countBookings',
          Role      : #Axis1,
        }],
        DimensionAttributes : [{
          Dimension : BookingStatus_code,
          Role      : #Category
        }]
      }
    ) {
      BookingStatus @(
        Common.ValueList #vlStatus : {
          CollectionPath               : 'Booking',
          PresentationVariantQualifier : 'pvStatus',
          Parameters                   : [{
            $Type             : 'Common.ValueListParameterInOut',
            LocalDataProperty : BookingStatus_code,
            ValueListProperty : 'BookingStatus_code'
          }]
        },
        Common.ValueList : {
          CollectionPath : 'BookingStatus',
          Parameters : [{
            $Type : 'Common.ValueListParameterInOut',
            LocalDataProperty : BookingStatus_code,
            ValueListProperty : 'code',
          }]
        },
        //Common.ValueListWithFixedValues : true
      )
    };
  */
  annotate Booking with @(
    UI.PresentationVariant #pvFlightDate: {
      SortOrder     : [{
        Property  : FlightDate,
        Descending: true
      }],
      Visualizations: ['@UI.Chart#chartFlightDate']
    },
    UI.Chart #chartFlightDate           : {
      Title              : 'Bookings over FlightDate',
      ChartType          : #Line,
      DynamicMeasures    : ['@Analytics.AggregatedProperty#countBookings', ],
      Dimensions         : [FlightDate],
      MeasureAttributes  : [{
        DynamicMeasure: '@Analytics.AggregatedProperty#countBookings',
        Role          : #Axis1,
      }],
      DimensionAttributes: [{
        Dimension: FlightDate,
        Role     : #Category
      }]
    }
  ) {
    FlightDate @Common.ValueList #vlFlightDate: {
      CollectionPath              : 'Booking',
      PresentationVariantQualifier: 'pvFlightDate',
      Parameters                  : [{
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: FlightDate,
        ValueListProperty: 'FlightDate'
      }]
    };
  };

  // determines the order of visual filters
  annotate Booking with @UI.SelectionFields: [
    airline,
    FlightDate
  ];


  //
  // KPI
  //
  annotate Booking with @(
    UI.KPI #myKPI1: {
      DataPoint       : {
        Value                 : FlightPrice,
        Title                 : 'TOT',
        Description           : '{i18n>Total Price}',
        CriticalityCalculation: {
          ImprovementDirection   : #Maximize,
          AcceptanceRangeLowValue: 26000000,
          ToleranceRangeLowValue : 24000000,
          DeviationRangeLowValue : 22000000
        }
      },
      Detail          : {DefaultPresentationVariant: {Visualizations: ['@UI.Chart#kpi1'], }, },
      SelectionVariant: {SelectOptions: [{
        PropertyName: FlightPrice,
        Ranges      : [{
          Sign  : #E,
          Option: #EQ,
          Low   : 0,
        }, ],
      }], }
    },
    UI.Chart #kpi1: {
      ChartType          : #Line,
      Measures           : [FlightPrice],
      Dimensions         : [FlightDate],
      MeasureAttributes  : [{
        Measure: FlightPrice,
        Role   : #Axis1
      }],
      DimensionAttributes: [{
        Dimension: FlightDate,
        Role     : #Category
      }]
    },
  );


}
```

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.Chart">
	<Record Type="UI.ChartDefinitionType">
		<PropertyValue Property="Title" String="Bookings" />
		<PropertyValue Property="ChartType" EnumMember="UI.ChartType/Bar" />
		<PropertyValue Property="DynamicMeasures">
			<Collection>
				<AnnotationPath>@Analytics.AggregatedProperty#minPrice</AnnotationPath>
				<AnnotationPath>@Analytics.AggregatedProperty#maxPrice</AnnotationPath>
				<AnnotationPath>@Analytics.AggregatedProperty#avgPrice</AnnotationPath>
			</Collection>
		</PropertyValue>
		<PropertyValue Property="Dimensions">
			<Collection>
				<PropertyPath>airline</PropertyPath>
			</Collection>
		</PropertyValue>
		<PropertyValue Property="MeasureAttributes">
			<Collection>
				<Record Type="UI.ChartMeasureAttributeType">
					<PropertyValue Property="DynamicMeasure" AnnotationPath="@Analytics.AggregatedProperty#minPrice" />
					<PropertyValue Property="Role" EnumMember="UI.ChartMeasureRoleType/Axis1" />
				</Record>
			</Collection>
		</PropertyValue>
		<PropertyValue Property="DimensionAttributes">
			<Collection>
				<Record Type="UI.ChartDimensionAttributeType">
					<PropertyValue Property="Dimension" PropertyPath="airline" />
					<PropertyValue Property="Role" EnumMember="UI.ChartDimensionRoleType/Category" />
				</Record>
			</Collection>
		</PropertyValue>
	</Record>
</Annotation>
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: manifest.json

**LANGUAGE**: JSON

**CODE**:
```json
{
	"_version": "1.12.0",
	"sap.app": {
		"id": "sap.fe.core.fpmExplorer.analyticalListReport",
		"type": "application",
		"i18n": {
			"bundleUrl": "i18n/i18n.properties",
			"supportedLocales": [""],
			"fallbackLocale": ""
		},
		"applicationVersion": {
			"version": "1.0.0"
		},
		"dataSources": {
			"mainService": {
				"uri": "/sap/fe/core/mock/analyticalListReport/",
				"type": "OData",
				"settings": {
					"annotations": [],
					"odataVersion": "4.0"
				}
			}
		}
	},
	"sap.ui5": {
		"dependencies": {
			"minUI5Version": "1.111.1",
			"libs": {
				"sap.ui.core": {},
				"sap.fe.templates": {}
			}
		},
		"contentDensities": {
			"compact": true,
			"cozy": true
		},
		"models": {
			"": {
				"dataSource": "mainService",
				"settings": {
					"operationMode": "Server",
					"autoExpandSelect": true,
					"earlyRequests": true
				}
			}
		},
		"rootView": {
			"viewName": "sap.fe.core.fpmExplorer.analyticalListReport.AnalyticalListReport"
		},
		"routing": {
			"config": {
				"controlId": "analyticalListReport"
			},
			"routes": [
				{
					"pattern": ":?query:",
					"name": "listPage",
					"target": "listPage"
				},
				{
					"pattern": "/Booking({key}):?query:",
					"name": "objectPage",
					"target": "objectPage"
				}
			],
			"targets": {
				"listPage": {
					"type": "Component",
					"id": "Default",
					"name": "sap.fe.templates.ListReport",
					"options": {
						"settings": {
							"contextPath": "/Booking",
							"entitySet": "Booking",
							"variantManagement": "Page",
							"initialLoad": "Enabled",
							"navigation": {
								"Booking": {
									"detail": {
										"route": "objectPage"
									}
								}
							},
							"views": {
								"paths": [
									{
										"primary": [
											{
												"annotationPath": "@com.sap.vocabularies.UI.v1.PresentationVariant"
											}
										],
										"secondary": [
											{
												"annotationPath": "@com.sap.vocabularies.UI.v1.PresentationVariant"
											}
										],
										"defaultPath": "both"
									}
								]
							},
							"controlConfiguration": {
								"@com.sap.vocabularies.UI.v1.LineItem": {
									"tableSettings": {
										"type": "AnalyticalTable",
										"enableExport": true
									}
								},
								"@com.sap.vocabularies.UI.v1.SelectionFields": {
									"layout": "CompactVisual",
									"initialLayout": "Visual",
									"filterFields": {
										"FlightDate": {
											"label": "Flight Date",
											"availability": "Default",
											"visualFilter": {
												"valueList": "com.sap.vocabularies.Common.v1.ValueList#vlFlightDate"
											}
										},
										"airline": {
											"label": "Airline",
											"availability": "Default",
											"visualFilter": {
												"valueList": "com.sap.vocabularies.Common.v1.ValueList#vlAirline"
											}
										}
									}
								}
							},
							"keyPerformanceIndicators": {
								"KPI1": {
									"entitySet": "Booking",
									"qualifier": "myKPI1"
								}
							}
						}
					}
				},
				"objectPage": {
					"type": "Component",
					"id": "objectPage",
					"name": "sap.fe.templates.ObjectPage",
					"options": {
						"settings": {
							"entitySet": "Booking",
							"contextPath": "/Booking"
						}
					}
				}
			}
		}
	}
}

```

--------------------------------

**TITLE**: Custom Header

**INTRODUCTION**: No introduction

**TAGS**: custom header, list report, header customization, extensions

**STEP**: Fragment settings in the Manifest

**DESCRIPTION**: You can specify separate Fragments in the manifest.json file for the expanded header and the collapsed header as shown in the sample code.

**LANGUAGE**: JSON

**CODE**:
```json
{
	"_version": "1.12.0",
	"sap.app": {
		"id": "sap.fe.core.fpmExplorer.customHeaderListReport",
		"type": "application",
		"i18n": {
			"bundleUrl": "i18n/i18n.properties",
			"supportedLocales": [""],
			"fallbackLocale": ""
		},
		"applicationVersion": {
			"version": "1.0.0"
		},
		"dataSources": {
			"mainService": {
				"uri": "/sap/fe/core/mock/service/",
				"type": "OData",
				"settings": {
					"annotations": [],
					"odataVersion": "4.0"
				}
			}
		}
	},
	"sap.ui5": {
		"dependencies": {
			"minUI5Version": "1.111.1",
			"libs": {
				"sap.ui.core": {},
				"sap.fe.templates": {}
			}
		},
		"contentDensities": {
			"compact": true,
			"cozy": true
		},
		"models": {
			"": {
				"dataSource": "mainService",
				"settings": {
					"operationMode": "Server",
					"autoExpandSelect": true,
					"earlyRequests": true
				}
			}
		},
		"extends": {
			"extensions": {
				"sap.ui.controllerExtensions": {
					"sap.fe.templates.ListReport.ListReportController": {
						"controllerName": "sap.fe.core.fpmExplorer.customHeaderListReport.LRExtend"
					}
				}
			}
		},
		"rootView": {
			"viewName": "sap.fe.core.fpmExplorer.customHeaderListReport.CustomHeaderListReport"
		},
		"routing": {
			"config": {
				"controlId": "customHeaderListReport"
			},
			"routes": [
				{
					"pattern": ":?query:",
					"name": "listPage",
					"target": "listPage"
				},
				{
					"pattern": "/Travel({key}):?query:",
					"name": "objectPage",
					"target": "objectPage"
				}
			],
			"targets": {
				"listPage": {
					"type": "Component",
					"id": "Default",
					"name": "sap.fe.templates.ListReport",
					"options": {
						"settings": {
							"contextPath": "/Travel",
							"variantManagement": "Page",
							"initialLoad": "Enabled",
							"liveMode": true,
							"controlConfiguration": {
								"@com.sap.vocabularies.UI.v1.LineItem": {
									"tableSettings": {
										"beforeRebindTable": ".extension.sap.fe.core.fpmExplorer.customHeaderListReport.LRExtend.beforeRebindTableLR"
									}
								}
							},
							"content": {
								"header": {
									"customHeader": {
										"expandedHeaderFragment": "sap.fe.core.fpmExplorer.customHeaderListReport.CustomHeaderExpanded",
										"collapsedHeaderFragment": "sap.fe.core.fpmExplorer.customHeaderListReport.CustomHeaderCollapsed"
									}
								}
							},
							"navigation": {
								"Travel": {
									"detail": {
										"route": "objectPage"
									}
								}
							}
						}
					}
				},
				"objectPage": {
					"type": "Component",
					"id": "objectPage",
					"name": "sap.fe.templates.ObjectPage",
					"options": {
						"settings": {
							"contextPath": "/Travel"
						}
					}
				}
			}
		}
	}
}
```

**STEP**: Fragment definition for the expanded header

**DESCRIPTION**: Controls of type GenericTile with its properties and press-handlers are used to show the tiles for the List Report header.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:macros="sap.fe.macros" xmlns:f="sap.f">
	<HBox>
		<GenericTile
			class="sapUiTinyMarginBegin"
			header="All Travel entities"
			subheader="No filtering"
			press=".extension.sap.fe.core.fpmExplorer.customHeaderListReport.LRExtend.pressTravelEntitiesNoFilter"
			id="tileId"
		>
			<TileContent unit="Travels">
				<NumericContent id="numericId" withMargin="false" />
			</TileContent>
		</GenericTile>
		<GenericTile
			class="sapUiTinyMarginBegin"
			header="Open Travel entities"
			subheader="Status Open"
			press=".extension.sap.fe.core.fpmExplorer.customHeaderListReport.LRExtend.pressTravelEntitiesWithFilter"
		>
			<TileContent unit="Travels">
				<NumericContent value="2" withMargin="false" />
			</TileContent>
		</GenericTile>
		<GenericTile
			class="sapUiTinyMarginBegin"
			header="Other Actions..."
			subheader="...to be executed"
			press=".extension.sap.fe.core.fpmExplorer.customHeaderListReport.LRExtend.pressNavigation"
		>
			<TileContent unit="Travels">
				<NumericContent value="x" withMargin="false" />
			</TileContent>
		</GenericTile>
	</HBox>
</core:FragmentDefinition>
```

**STEP**: Fragment definition for the collapsed header

**DESCRIPTION**: For the collapsed header KPITag macros are used to show the KPI tags.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:mc="sap.suite.ui.microchart" xmlns:macros="sap.fe.macros">
	<HBox>
		<HBox class="sapUiTinyMarginEnd">
			<FlexBox alignItems="Center" justifyContent="Start" class="sapUiTinyMarginEnd">
				<Label text="No filtering" class="sapUiSmallMarginEnd" />
				<macros:KPITag
					id="TravelEntitiesNoFilter"
					number="4"
					status="Success"
					unit="Travels"
					press=".extension.sap.fe.core.fpmExplorer.customHeaderListReport.LRExtend.pressTravelEntitiesNoFilter"
				/>
			</FlexBox>
		</HBox>
		<HBox class="sapUiTinyMarginEnd">
			<FlexBox alignItems="Center" justifyContent="Start" class="sapUiTinyMarginEnd">
				<Label text="Status Open" class="sapUiSmallMarginEnd" />
				<macros:KPITag
					id="TravelEntitiesWithFilter"
					number="2"
					status="Information"
					unit="Travels"
					press=".extension.sap.fe.core.fpmExplorer.customHeaderListReport.LRExtend.pressTravelEntitiesWithFilter"
				/>
			</FlexBox>
		</HBox>
		<HBox class="sapUiTinyMarginEnd">
			<FlexBox alignItems="Center" justifyContent="Start" class="sapUiTinyMarginEnd">
				<Label text="Other Actions..." class="sapUiSmallMarginEnd" />
				<macros:KPITag
					id="Navigation"
					number="x"
					status="Information"
					unit="Travels"
					press=".extension.sap.fe.core.fpmExplorer.customHeaderListReport.LRExtend.pressNavigation"
				/>
			</FlexBox>
		</HBox>
	</HBox>
</core:FragmentDefinition>
```

**STEP**: Extensions settings in the Manifest

**DESCRIPTION**: The controller used for the extension is defined in the extensions section of the manifest file.

**LANGUAGE**: JSON

**CODE**:
```json
{
	"_version": "1.12.0",
	"sap.app": {
		"id": "sap.fe.core.fpmExplorer.customHeaderListReport",
		"type": "application",
		"i18n": {
			"bundleUrl": "i18n/i18n.properties",
			"supportedLocales": [""],
			"fallbackLocale": ""
		},
		"applicationVersion": {
			"version": "1.0.0"
		},
		"dataSources": {
			"mainService": {
				"uri": "/sap/fe/core/mock/service/",
				"type": "OData",
				"settings": {
					"annotations": [],
					"odataVersion": "4.0"
				}
			}
		}
	},
	"sap.ui5": {
		"dependencies": {
			"minUI5Version": "1.111.1",
			"libs": {
				"sap.ui.core": {},
				"sap.fe.templates": {}
			}
		},
		"contentDensities": {
			"compact": true,
			"cozy": true
		},
		"models": {
			"": {
				"dataSource": "mainService",
				"settings": {
					"operationMode": "Server",
					"autoExpandSelect": true,
					"earlyRequests": true
				}
			}
		},
		"extends": {
			"extensions": {
				"sap.ui.controllerExtensions": {
					"sap.fe.templates.ListReport.ListReportController": {
						"controllerName": "sap.fe.core.fpmExplorer.customHeaderListReport.LRExtend"
					}
				}
			}
		},
		"rootView": {
			"viewName": "sap.fe.core.fpmExplorer.customHeaderListReport.CustomHeaderListReport"
		},
		"routing": {
			"config": {
				"controlId": "customHeaderListReport"
			},
			"routes": [
				{
					"pattern": ":?query:",
					"name": "listPage",
					"target": "listPage"
				},
				{
					"pattern": "/Travel({key}):?query:",
					"name": "objectPage",
					"target": "objectPage"
				}
			],
			"targets": {
				"listPage": {
					"type": "Component",
					"id": "Default",
					"name": "sap.fe.templates.ListReport",
					"options": {
						"settings": {
							"contextPath": "/Travel",
							"variantManagement": "Page",
							"initialLoad": "Enabled",
							"liveMode": true,
							"controlConfiguration": {
								"@com.sap.vocabularies.UI.v1.LineItem": {
									"tableSettings": {
										"beforeRebindTable": ".extension.sap.fe.core.fpmExplorer.customHeaderListReport.LRExtend.beforeRebindTableLR"
									}
								}
							},
							"content": {
								"header": {
									"customHeader": {
										"expandedHeaderFragment": "sap.fe.core.fpmExplorer.customHeaderListReport.CustomHeaderExpanded",
										"collapsedHeaderFragment": "sap.fe.core.fpmExplorer.customHeaderListReport.CustomHeaderCollapsed"
									}
								}
							},
							"navigation": {
								"Travel": {
									"detail": {
										"route": "objectPage"
									}
								}
							}
						}
					}
				},
				"objectPage": {
					"type": "Component",
					"id": "objectPage",
					"name": "sap.fe.templates.ObjectPage",
					"options": {
						"settings": {
							"contextPath": "/Travel"
						}
					}
				}
			}
		}
	}
}
```

**STEP**: Controller implementation

**DESCRIPTION**: The Controller implementation used to set the filtering and to handle the press-event for the action to be triggered.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
import type CollectionBindingInfoAPI from "sap/fe/macros/CollectionBindingInfo";
import type TableAPI from "sap/fe/macros/table/TableAPI";
import type ListReportController from "sap/fe/templates/ListReport/ListReportController.controller";
import MessageToast from "sap/m/MessageToast";
import type NumericContent from "sap/m/NumericContent";
import type UI5Event from "sap/ui/base/Event";
import ControllerExtension from "sap/ui/core/mvc/ControllerExtension";

export default class LRExtendController extends ControllerExtension {
	public base!: ListReportController;

	public pressNavigation(event: UI5Event): void {
		MessageToast.show("Any other action to be executed on pressing the tile");
	}

	public pressTravelEntitiesNoFilter(event: UI5Event): void {
		const filters = this.base.getExtensionAPI().getFilters()?.filters as any;
		const tFilters = filters[0].aFilters ?? filters;

		for (const filter of tFilters) {
			this.base.getExtensionAPI().setFilterValues(filter.sPath, "EQ");
		}
	}

	public pressTravelEntitiesWithFilter(event: UI5Event): void {
		this.base.getExtensionAPI().setFilterValues("TravelStatus_code", "EQ", "O");
	}

	public beforeRebindTableLR(event: UI5Event<{ collectionBindingInfo: CollectionBindingInfoAPI }, TableAPI>): void {
		const collectionBindingInfoAPI = event.getParameter("collectionBindingInfo");
		collectionBindingInfoAPI.attachEvent(
			"dataReceived",
			() => {
				const tableCount = (
					this.base
						.getExtensionAPI()
						.byId("sap.fe.core.fpmExplorer.customHeaderListReport::listPage--fe::table::Travel::LineItem::Table") as TableAPI
				)
					.getCount()
					?.toString();
				(
					this.base
						.getExtensionAPI()
						.byId("sap.fe.core.fpmExplorer.customHeaderListReport::listPage--numericId") as NumericContent
				).setValue(tableCount);
			},
			this
		);
	}
}
```

--------------------------------

**TITLE**: Custom KPI Tag

**INTRODUCTION**: No introduction

**TAGS**: custom KPI, KPI tags, list report, metrics, performance indicators

**STEP**: KPI Configuration in Manifest

**DESCRIPTION**: Define your custom KPI tags in the manifest.json file under the keyPerformanceIndicators section. Each KPI references a fragment template that defines its appearance and behavior.

**LANGUAGE**: JSON

**CODE**:
```json
{
	"_version": "1.12.0",
	"sap.app": {
		"id": "sap.fe.core.fpmExplorer.customKPIContent",
		"type": "application",
		"applicationVersion": {
			"version": "1.0.0"
		},
		"dataSources": {
			"mainService": {
				"uri": "/sap/fe/core/mock/service/",
				"type": "OData",
				"settings": {
					"annotations": [],
					"odataVersion": "4.0"
				}
			}
		}
	},
	"sap.ui5": {
		"dependencies": {
			"minUI5Version": "1.111.1",
			"libs": {
				"sap.ui.core": {},
				"sap.fe.templates": {}
			}
		},
		"contentDensities": {
			"compact": true,
			"cozy": true
		},
		"models": {
			"": {
				"dataSource": "mainService",
				"settings": {
					"operationMode": "Server",
					"autoExpandSelect": true,
					"earlyRequests": true
				}
			}
		},
		"extends": {
			"extensions": {
				"sap.ui.controllerExtensions": {
					"sap.fe.templates.ListReport.ListReportController": {
						"controllerName": "sap.fe.core.fpmExplorer.customKPI.LRExtend"
					}
				}
			}
		},
		"rootView": {
			"viewName": "sap.fe.core.fpmExplorer.customKPI.CustomKPI"
		},
		"routing": {
			"config": {
				"controlId": "customKPI"
			},
			"routes": [
				{
					"pattern": ":?query:",
					"name": "sample",
					"target": "sample"
				}
			],
			"targets": {
				"sample": {
					"type": "Component",
					"id": "Default",
					"name": "sap.fe.templates.ListReport",
					"options": {
						"settings": {
							"contextPath": "/Travel",
							"variantManagement": "None",
							"initialLoad": true,
							"keyPerformanceIndicators": {
								"myKPITag": {
									"template": "sap.fe.core.fpmExplorer.customKPI.CustomKPITag"
								},
								"myKPIWithPress": {
									"template": "sap.fe.core.fpmExplorer.customKPI.CustomKPITagWithPress"
								}
							}
						}
					}
				}
			}
		}
	}
}
```

**STEP**: Basic KPI Tag Fragment

**DESCRIPTION**: Create a fragment that defines a simple KPI tag with static values. The KPITag macro provides properties for number, unit, and status display.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:macros="sap.fe.macros">
	<macros:KPITag number="101" unit="RUP" status="Success" />
</core:FragmentDefinition>
```

**STEP**: Interactive KPI Tag with Press Handler

**DESCRIPTION**: For interactive KPI tags, add a press handler that references a method in your controller extension. This allows users to click on the KPI for additional actions.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:macros="sap.fe.macros">
	<macros:KPITag
		number="0"
		unit="Days"
		status="Error"
		showIcon="true"
		press=".extension.sap.fe.core.fpmExplorer.customKPI.LRExtend.onKPIPressed"
	/>
</core:FragmentDefinition>
```

**STEP**: Controller Extension Configuration

**DESCRIPTION**: Register your controller extension in the manifest.json file to handle KPI press events and other custom logic.

**LANGUAGE**: JSON

**CODE**:
```json
{
	"_version": "1.12.0",
	"sap.app": {
		"id": "sap.fe.core.fpmExplorer.customKPIContent",
		"type": "application",
		"applicationVersion": {
			"version": "1.0.0"
		},
		"dataSources": {
			"mainService": {
				"uri": "/sap/fe/core/mock/service/",
				"type": "OData",
				"settings": {
					"annotations": [],
					"odataVersion": "4.0"
				}
			}
		}
	},
	"sap.ui5": {
		"dependencies": {
			"minUI5Version": "1.111.1",
			"libs": {
				"sap.ui.core": {},
				"sap.fe.templates": {}
			}
		},
		"contentDensities": {
			"compact": true,
			"cozy": true
		},
		"models": {
			"": {
				"dataSource": "mainService",
				"settings": {
					"operationMode": "Server",
					"autoExpandSelect": true,
					"earlyRequests": true
				}
			}
		},
		"extends": {
			"extensions": {
				"sap.ui.controllerExtensions": {
					"sap.fe.templates.ListReport.ListReportController": {
						"controllerName": "sap.fe.core.fpmExplorer.customKPI.LRExtend"
					}
				}
			}
		},
		"rootView": {
			"viewName": "sap.fe.core.fpmExplorer.customKPI.CustomKPI"
		},
		"routing": {
			"config": {
				"controlId": "customKPI"
			},
			"routes": [
				{
					"pattern": ":?query:",
					"name": "sample",
					"target": "sample"
				}
			],
			"targets": {
				"sample": {
					"type": "Component",
					"id": "Default",
					"name": "sap.fe.templates.ListReport",
					"options": {
						"settings": {
							"contextPath": "/Travel",
							"variantManagement": "None",
							"initialLoad": true,
							"keyPerformanceIndicators": {
								"myKPITag": {
									"template": "sap.fe.core.fpmExplorer.customKPI.CustomKPITag"
								},
								"myKPIWithPress": {
									"template": "sap.fe.core.fpmExplorer.customKPI.CustomKPITagWithPress"
								}
							}
						}
					}
				}
			}
		}
	}
}
```

**STEP**: Controller Implementation

**DESCRIPTION**: Implement the press handler method in your controller extension to define what happens when users interact with the KPI tags.

**LANGUAGE**: TypeScript

**CODE**:
```typescript
import MessageToast from "sap/m/MessageToast";
import ControllerExtension from "sap/ui/core/mvc/ControllerExtension";

/**
 * Controller extension for custom KPI actions in the List Report floorplan.
 */
export default class LRExtendController extends ControllerExtension {
	/**
	 * Handles the KPI press event.
	 * Shows a message toast when the KPI is clicked.
	 */
	public onKPIPressed(): void {
		MessageToast.show("You clicked on a KPI");
	}
}
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: annotations.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});

```

**FILE**: Travel.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"TravelID": "00000001",
		"BeginDate": "2025-11-04",
		"EndDate": "2025-11-06",
		"BookingFee": "20.00",
		"TotalPrice": "900.00",
		"CurrencyCode_code": "USD",
		"Description": "Business Trip for Christine, Pierre",
		"TravelDetails": "This business trip includes a two-day customer workshop at the airport. The goal is the evaluation of the customer's use cases and the alignment on the roadmap for the upcoming year.",
		"TravelStatus_code": "A",
		"to_Agency_AgencyID": "070001"
	},
	{
		"TravelUUID": "53657221A8E4645C17002DF03754AB66",
		"TravelID": "00000002",
		"BeginDate": "2025-12-04",
		"EndDate": "2025-12-16",
		"BookingFee": "80.00",
		"TotalPrice": "3164.00",
		"CurrencyCode_code": "USD",
		"Description": "Lars Jensen site visit for system rollout support",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070002"
	},
	{
		"TravelUUID": "54657221A8E4645C17002DF03754AB66",
		"TravelID": "00000003",
		"BeginDate": "2025-08-04",
		"EndDate": "2025-08-08",
		"BookingFee": "40.00",
		"TotalPrice": "1871.00",
		"CurrencyCode_code": "USD",
		"Description": "John Smith customer workshop at Acme Corp headquarters",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070003"
	},
	{
		"TravelUUID": "55657221A8E4645C17002DF03754AB66",
		"TravelID": "00000004",
		"BeginDate": "2025-09-04",
		"EndDate": "2025-09-05",
		"BookingFee": "40.00",
		"TotalPrice": "1240.00",
		"CurrencyCode_code": "USD",
		"Description": "Anna Müller onboarding with new project team in Berlin",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "X",
		"to_Agency_AgencyID": "070003"
	}
]

```

--------------------------------

**TITLE**: Custom View

**INTRODUCTION**: No introduction

**TAGS**: custom view, list report, view customization, extensions

**STEP**: View settings in the Manifest

**DESCRIPTION**: The Views to be shown on top of the list report table are defined in the page definition area of the manifest.

**LANGUAGE**: JSON

**CODE**:
```json
{
	"_version": "1.12.0",
	"sap.app": {
		"id": "sap.fe.core.fpmExplorer.customViewListReport",
		"type": "application",
		"i18n": {
			"bundleUrl": "i18n/i18n.properties",
			"supportedLocales": [""],
			"fallbackLocale": ""
		},
		"applicationVersion": {
			"version": "1.0.0"
		},
		"dataSources": {
			"mainService": {
				"uri": "/sap/fe/core/mock/customViewListReport/",
				"type": "OData",
				"settings": {
					"annotations": [],
					"odataVersion": "4.0"
				}
			}
		}
	},
	"sap.ui5": {
		"dependencies": {
			"minUI5Version": "1.111.1",
			"libs": {
				"sap.ui.core": {},
				"sap.fe.templates": {}
			}
		},
		"contentDensities": {
			"compact": true,
			"cozy": true
		},
		"models": {
			"i18n": {
				"type": "sap.ui.model.resource.ResourceModel",
				"settings": {
					"bundleName": "sap.fe.core.fpmExplorer.customViewListReport.i18n.i18n"
				}
			},
			"@i18n": {
				"type": "sap.ui.model.resource.ResourceModel",
				"settings": {
					"bundleName": "sap.fe.core.fpmExplorer.customViewListReport.i18n.i18n"
				}
			},
			"": {
				"dataSource": "mainService",
				"settings": {
					"operationMode": "Server",
					"autoExpandSelect": true,
					"earlyRequests": true
				}
			}
		},
		"extends": {
			"extensions": {
				"sap.ui.controllerExtensions": {
					"sap.fe.templates.ListReport.ListReportController": {
						"controllerName": "sap.fe.core.fpmExplorer.customViewListReport.LRExtend"
					}
				}
			}
		},
		"rootView": {
			"viewName": "sap.fe.core.fpmExplorer.customViewListReport.CustomViewListReport"
		},
		"routing": {
			"config": {
				"controlId": "customViewListReport"
			},
			"routes": [
				{
					"pattern": ":?query:",
					"name": "listPage",
					"target": "listPage"
				}
			],
			"targets": {
				"listPage": {
					"type": "Component",
					"id": "Default",
					"name": "sap.fe.templates.ListReport",
					"options": {
						"settings": {
							"contextPath": "/Travel",
							"variantManagement": "None",
							"initialLoad": true,
							"controlConfiguration": {
								"@com.sap.vocabularies.UI.v1.SelectionFields": {
									"showClearButton": true
								}
							},
							"views": {
								"paths": [
									{
										"key": "tab1",
										"annotationPath": "com.sap.vocabularies.UI.v1.SelectionPresentationVariant#All"
									},
									{
										"key": "tab2",
										"label": "Custom View with List control",
										"template": "sap.fe.core.fpmExplorer.customViewListReport.CustomViewWithList"
									}
								],
								"showCounts": true
							}
						}
					}
				}
			}
		}
	}
}
```

**STEP**: Extension settings in the Manifest

**DESCRIPTION**: The controller used for the extension is defined in the Extensions section of the manifest file.

**LANGUAGE**: JSON

**CODE**:
```json
{
	"_version": "1.12.0",
	"sap.app": {
		"id": "sap.fe.core.fpmExplorer.customViewListReport",
		"type": "application",
		"i18n": {
			"bundleUrl": "i18n/i18n.properties",
			"supportedLocales": [""],
			"fallbackLocale": ""
		},
		"applicationVersion": {
			"version": "1.0.0"
		},
		"dataSources": {
			"mainService": {
				"uri": "/sap/fe/core/mock/customViewListReport/",
				"type": "OData",
				"settings": {
					"annotations": [],
					"odataVersion": "4.0"
				}
			}
		}
	},
	"sap.ui5": {
		"dependencies": {
			"minUI5Version": "1.111.1",
			"libs": {
				"sap.ui.core": {},
				"sap.fe.templates": {}
			}
		},
		"contentDensities": {
			"compact": true,
			"cozy": true
		},
		"models": {
			"i18n": {
				"type": "sap.ui.model.resource.ResourceModel",
				"settings": {
					"bundleName": "sap.fe.core.fpmExplorer.customViewListReport.i18n.i18n"
				}
			},
			"@i18n": {
				"type": "sap.ui.model.resource.ResourceModel",
				"settings": {
					"bundleName": "sap.fe.core.fpmExplorer.customViewListReport.i18n.i18n"
				}
			},
			"": {
				"dataSource": "mainService",
				"settings": {
					"operationMode": "Server",
					"autoExpandSelect": true,
					"earlyRequests": true
				}
			}
		},
		"extends": {
			"extensions": {
				"sap.ui.controllerExtensions": {
					"sap.fe.templates.ListReport.ListReportController": {
						"controllerName": "sap.fe.core.fpmExplorer.customViewListReport.LRExtend"
					}
				}
			}
		},
		"rootView": {
			"viewName": "sap.fe.core.fpmExplorer.customViewListReport.CustomViewListReport"
		},
		"routing": {
			"config": {
				"controlId": "customViewListReport"
			},
			"routes": [
				{
					"pattern": ":?query:",
					"name": "listPage",
					"target": "listPage"
				}
			],
			"targets": {
				"listPage": {
					"type": "Component",
					"id": "Default",
					"name": "sap.fe.templates.ListReport",
					"options": {
						"settings": {
							"contextPath": "/Travel",
							"variantManagement": "None",
							"initialLoad": true,
							"controlConfiguration": {
								"@com.sap.vocabularies.UI.v1.SelectionFields": {
									"showClearButton": true
								}
							},
							"views": {
								"paths": [
									{
										"key": "tab1",
										"annotationPath": "com.sap.vocabularies.UI.v1.SelectionPresentationVariant#All"
									},
									{
										"key": "tab2",
										"label": "Custom View with List control",
										"template": "sap.fe.core.fpmExplorer.customViewListReport.CustomViewWithList"
									}
								],
								"showCounts": true
							}
						}
					}
				}
			}
		}
	}
}
```

**STEP**: Referencing the table in the Selection Presentation Variants

**DESCRIPTION**: You can define selection presentation variants by using the UI.SelectionPresentationVariant in your service implementation. The selection presentation variant points to UI.SelectionVariant and UI.PresentationVariant annotations.

**LANGUAGE**: CDS

**CODE**:
```cds
using {TravelService.Travel} from '../../../../../service/service';
using from '../../../../../service/annotations';

annotate TravelService.Travel with @(UI: {
  PresentationVariant              : {Visualizations: ['@UI.LineItem']},
  SelectionPresentationVariant #All: {
    Text               : 'All',
    SelectionVariant   : {
      Text         : 'All',
      SelectOptions: [{PropertyName: TravelID}]
    },
    PresentationVariant: {
      SortOrder     : [{Property: Description}],
      Visualizations: ['@UI.LineItem']
    }
  }
});
```

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.SelectionPresentationVariant" Qualifier="All">
	<Record Type="UI.SelectionPresentationVariantType">
		<PropertyValue Property="Text" String="All" />
		<PropertyValue Property="SelectionVariant">
			<Record Type="UI.SelectionVariantType">
				<PropertyValue Property="Text" String="All" />
				<PropertyValue Property="SelectOptions">
					<Collection>
						<Record Type="UI.SelectOptionType">
							<PropertyValue Property="PropertyName" PropertyPath="TravelID" />
						</Record>
					</Collection>
				</PropertyValue>
			</Record>
		</PropertyValue>
		<PropertyValue Property="PresentationVariant">
			<Record Type="UI.PresentationVariantType">
				<PropertyValue Property="SortOrder">
					<Collection>
						<Record Type="Common.SortOrderType">
							<PropertyValue Property="Property" PropertyPath="Description" />
						</Record>
					</Collection>
				</PropertyValue>
				<PropertyValue Property="Visualizations">
					<Collection>
						<AnnotationPath>@UI.LineItem</AnnotationPath>
					</Collection>
				</PropertyValue>
			</Record>
		</PropertyValue>
	</Record>
</Annotation>
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: CustomViewWithList.fragment.xml

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core">
	<List id="customViewWithTableList" items="{path: '/Travel', sorter: {path: 'TravelID'}}">
		<headerToolbar>
			<OverflowToolbar>
				<content>
					<Title text="Travel Entities" level="H2" />
					<ToolbarSpacer />
				</content>
			</OverflowToolbar>
		</headerToolbar>
		<infoToolbar>
			<OverflowToolbar>
				<Label text="List of Travel entities" />
			</OverflowToolbar>
		</infoToolbar>

		<items>
			<StandardListItem title="{TravelID}" description="{Description}" />
		</items>
	</List>
</core:FragmentDefinition>

```

--------------------------------

**TITLE**: Flexible Column Layout

**INTRODUCTION**: The flexible column layout is a feature that can show two or three columns on a single page.

**TAGS**: flexible column layout, fcl, list report, multi-column

**STEP**: Routing Configuration

**DESCRIPTION**: Setting the column layout within the manifest

**STEP**: Routing Routes

**DESCRIPTION**: The route target for the Object Page contains both pages, the List Report as well as the Object Page

**STEP**: Pages Control Aggregation

**DESCRIPTION**: Setting the controlAggregation for each page

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: manifest.json

**LANGUAGE**: JSON

**CODE**:
```json
{
	"_version": "1.12.0",
	"sap.app": {
		"id": "sap.fe.core.fpmExplorer.fclListReport",
		"type": "application",
		"i18n": {
			"bundleUrl": "i18n/i18n.properties",
			"supportedLocales": [""],
			"fallbackLocale": ""
		},
		"applicationVersion": {
			"version": "1.0.0"
		},
		"dataSources": {
			"mainService": {
				"uri": "/sap/fe/core/mock/service/",
				"type": "OData",
				"settings": {
					"annotations": [],
					"odataVersion": "4.0"
				}
			}
		}
	},
	"sap.ui5": {
		"dependencies": {
			"minUI5Version": "1.111.1",
			"libs": {
				"sap.ui.core": {},
				"sap.fe.templates": {}
			}
		},
		"contentDensities": {
			"compact": true,
			"cozy": true
		},
		"models": {
			"": {
				"dataSource": "mainService",
				"settings": {
					"operationMode": "Server",
					"autoExpandSelect": true,
					"earlyRequests": true
				}
			}
		},
		"rootView": {
			"viewName": "sap.fe.core.fpmExplorer.fclListReport.FclListReport",
			"type": "XML",
			"async": true,
			"id": "appRootView"
		},
		"routing": {
			"config": {
				"flexibleColumnLayout": {
					"defaultTwoColumnLayoutType": "TwoColumnsMidExpanded",
					"defaultThreeColumnLayoutType": "ThreeColumnsMidExpanded"
				},
				"routerClass": "sap.f.routing.Router"
			},
			"routes": [
				{
					"pattern": ":?query:",
					"name": "default",
					"target": ["listPage"]
				},
				{
					"pattern": "/Travel({key}):?query:",
					"name": "objectPage",
					"target": ["listPage", "objectPage"]
				}
			],
			"targets": {
				"listPage": {
					"type": "Component",
					"id": "Default",
					"name": "sap.fe.templates.ListReport",
					"controlAggregation": "beginColumnPages",
					"contextPattern": "",
					"options": {
						"settings": {
							"contextPath": "/Travel",
							"variantManagement": "Page",
							"initialLoad": "Enabled",
							"navigation": {
								"Travel": {
									"detail": {
										"route": "objectPage"
									}
								}
							}
						}
					}
				},
				"objectPage": {
					"type": "Component",
					"id": "objectPage",
					"name": "sap.fe.templates.ObjectPage",
					"controlAggregation": "midColumnPages",
					"contextPattern": "/Travel({key})",
					"options": {
						"settings": {
							"contextPath": "/Travel",
							"navigation": {}
						}
					}
				}
			}
		}
	}
}

```

--------------------------------

**TITLE**: List Report Page

**INTRODUCTION**: No introduction

**TAGS**: list report, overview, simple, table, data

**STEP**: Filter Fields in the Filter Bar

**DESCRIPTION**: You can select the fields to be shown in the Filter Bar by using annotation UI.SelectionFields. At runtime, you can add and remove Filter Fields by pressing the Adapt Filters button.

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});
```

**LANGUAGE**: ABAP

**CODE**:
```abap
@UI.selectionField: [{ position: 10 }]
key TravelID : abap.numc(8);

@UI.selectionField: [{ position: 20 }]
to_Agency_AgencyID : abap.char(10);

@UI.selectionField: [{ position: 30 }]
TravelStatus_code : abap.char(2);

@UI.selectionField: [{ position: 40 }]
BeginDate : abap.dats;

@UI.selectionField: [{ position: 50 }]
EndDate : abap.dats;
```

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.SelectionFields">
	<Collection>
		<PropertyPath>TravelID</PropertyPath>
		<PropertyPath>to_Agency_AgencyID</PropertyPath>
		<PropertyPath>BeginDate</PropertyPath>
		<PropertyPath>EndDate</PropertyPath>
		<PropertyPath>BookingFee</PropertyPath>
		<PropertyPath>TotalPrice</PropertyPath>
	</Collection>
</Annotation>
```

**STEP**: Table Columns

**DESCRIPTION**: 

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});
```

**LANGUAGE**: ABAP

**CODE**:
```abap
@UI.lineItem: [{ position: 10 }]
key TravelID : abap.numc(8);

@UI.lineItem: [{ position: 20 }]
BeginDate : abap.dats;

@UI.lineItem: [{ position: 30 }]
EndDate : abap.dats;

@UI.lineItem: [{ position: 40 }]
to_Agency_AgencyID : abap.char(10);

@UI.lineItem: [
  { position: 50, criticality: 'TravelStatusCriticality', importance: #HIGH, style: [{ width: '10em' }] }
]
TravelStatus_code : abap.char(2);

@UI.lineItem: [{ position: 60 }]
BookingFee : abap.curr(10,2);

@UI.lineItem: [{ position: 70 }]
TotalPrice : abap.curr(10,2);

@ObjectModel.virtualElement.calculatedBy: 'ABAP:<class_name>'
virtual TravelStatusCriticality: abap.int1
```

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="TravelService.Travel">
	<Annotation Term="UI.LineItem">
		<Collection>
			<Record Type="UI.DataField">
				<PropertyValue Property="Value" Path="TravelID" />
			</Record>
			<Record Type="UI.DataField">
				<PropertyValue Property="Value" Path="BeginDate" />
			</Record>
			<Record Type="UI.DataField">
				<PropertyValue Property="Value" Path="EndDate" />
			</Record>
			<Record Type="UI.DataField">
				<PropertyValue Property="Value" Path="to_Agency_AgencyID" />
			</Record>
			<Record Type="UI.DataField">
				<PropertyValue Property="Value" Path="BookingFee" />
			</Record>
			<Record Type="UI.DataField">
				<PropertyValue Property="Value" Path="TotalPrice" />
			</Record>
			<Record Type="UI.DataField">
				<PropertyValue Property="Value" Path="CurrencyCode_code" />
			</Record>
			<Record Type="UI.DataField">
				<PropertyValue Property="Value" Path="Description" />
			</Record>
		</Collection>
	</Annotation>
</Annotations>
```

**STEP**: Value Help

**DESCRIPTION**: 

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});
```

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="TravelService.Travel/to_Agency_AgencyID">
	<Annotation Term="Common.Text" Path="to_Agency/Name" />
	<Annotation Term="Common.ValueList">
		<Record Type="Common.ValueListType">
			<PropertyValue Property="CollectionPath" String="TravelAgency" />
			<PropertyValue Property="Label" String="" />
			<PropertyValue Property="Parameters">
				<Collection>
					<Record Type="Common.ValueListParameterInOut">
						<PropertyValue Property="LocalDataProperty" PropertyPath="to_Agency_AgencyID" />
						<PropertyValue Property="ValueListProperty" String="AgencyID" />
					</Record>
					<Record Type="Common.ValueListParameterDisplayOnly">
						<PropertyValue Property="ValueListProperty" String="Name" />
					</Record>
					<Record Type="Common.ValueListParameterDisplayOnly">
						<PropertyValue Property="ValueListProperty" String="Street" />
					</Record>
					<Record Type="Common.ValueListParameterDisplayOnly">
						<PropertyValue Property="ValueListProperty" String="PostalCode" />
					</Record>
					<Record Type="Common.ValueListParameterDisplayOnly">
						<PropertyValue Property="ValueListProperty" String="City" />
					</Record>
					<Record Type="Common.ValueListParameterDisplayOnly">
						<PropertyValue Property="ValueListProperty" String="CountryCode_code" />
					</Record>
					<Record Type="Common.ValueListParameterDisplayOnly">
						<PropertyValue Property="ValueListProperty" String="PhoneNumber" />
					</Record>
					<Record Type="Common.ValueListParameterDisplayOnly">
						<PropertyValue Property="ValueListProperty" String="EMailAddress" />
					</Record>
					<Record Type="Common.ValueListParameterDisplayOnly">
						<PropertyValue Property="ValueListProperty" String="WebAddress" />
					</Record>
				</Collection>
			</PropertyValue>
		</Record>
	</Annotation>
	<Annotation Term="Common.Label" String="Agency" />
	<Annotation Term="Common.FieldControl" EnumMember="Common.FieldControlType/Mandatory" />
</Annotations>
```

**LANGUAGE**: ABAP

**CODE**:
```abap
@Consumption.valueHelpDefinition: [{ entity : {name: '/DMO/I_Agency', element: 'AgencyID'  }}]
AgencyID
```

**STEP**: Text annotation and Text Arrangement

**DESCRIPTION**: You can configure properties to show both text and ID for value help fields in Edit and Display modes.

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}
```

**LANGUAGE**: ABAP

**CODE**:
```abap
@ObjectModel.text.element: ['AgencyText']
@UI.textArrangement: #TEXT_FIRST
agencyID,

_toAgency._toAgencyText.AgencyText: localized
```

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="TravelService.Travel/to_Agency_AgencyID">
	<Annotation Term="Common.Text" Path="to_Agency/Name">
		<Annotation Term="UI.TextArrangement" EnumMember="UI.TextArrangementType/TextFirst" />
	</Annotation>
	...
</Annotations>
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: manifest.json

**LANGUAGE**: JSON

**CODE**:
```json
{
	"_version": "1.12.0",
	"sap.app": {
		"id": "sap.fe.core.fpmExplorer.simpleListReport",
		"type": "application",
		"i18n": {
			"bundleUrl": "i18n/i18n.properties",
			"supportedLocales": [""],
			"fallbackLocale": ""
		},
		"applicationVersion": {
			"version": "1.0.0"
		},
		"dataSources": {
			"mainService": {
				"uri": "/sap/fe/core/mock/service/",
				"type": "OData",
				"settings": {
					"annotations": [],
					"odataVersion": "4.0"
				}
			}
		}
	},
	"sap.ui5": {
		"dependencies": {
			"minUI5Version": "1.111.1",
			"libs": {
				"sap.ui.core": {},
				"sap.fe.templates": {}
			}
		},
		"contentDensities": {
			"compact": true,
			"cozy": true
		},
		"models": {
			"": {
				"dataSource": "mainService",
				"settings": {
					"operationMode": "Server",
					"autoExpandSelect": true,
					"earlyRequests": true
				}
			}
		},
		"rootView": {
			"viewName": "sap.fe.core.fpmExplorer.simpleListReport.SimpleListReport"
		},
		"routing": {
			"config": {
				"controlId": "simpleListReport"
			},
			"routes": [
				{
					"pattern": ":?query:",
					"name": "listPage",
					"target": "listPage"
				},
				{
					"pattern": "/Travel({key}):?query:",
					"name": "objectPage",
					"target": "objectPage"
				}
			],
			"targets": {
				"listPage": {
					"type": "Component",
					"id": "Default",
					"name": "sap.fe.templates.ListReport",
					"options": {
						"settings": {
							"contextPath": "/Travel",
							"variantManagement": "Page",
							"initialLoad": "Enabled",
							"navigation": {
								"Travel": {
									"detail": {
										"route": "objectPage"
									}
								}
							}
						}
					}
				},
				"objectPage": {
					"type": "Component",
					"id": "objectPage",
					"name": "sap.fe.templates.ObjectPage",
					"options": {
						"settings": {
							"contextPath": "/Travel"
						}
					}
				}
			}
		}
	}
}

```

**FILE**: Travel.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"TravelID": "00000001",
		"BeginDate": "2025-11-04",
		"EndDate": "2025-11-06",
		"BookingFee": "20.00",
		"TotalPrice": "900.00",
		"CurrencyCode_code": "USD",
		"Description": "Business Trip for Christine, Pierre",
		"TravelDetails": "This business trip includes a two-day customer workshop at the airport. The goal is the evaluation of the customer's use cases and the alignment on the roadmap for the upcoming year.",
		"TravelStatus_code": "A",
		"to_Agency_AgencyID": "070001"
	},
	{
		"TravelUUID": "53657221A8E4645C17002DF03754AB66",
		"TravelID": "00000002",
		"BeginDate": "2025-12-04",
		"EndDate": "2025-12-16",
		"BookingFee": "80.00",
		"TotalPrice": "3164.00",
		"CurrencyCode_code": "USD",
		"Description": "Lars Jensen site visit for system rollout support",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070002"
	},
	{
		"TravelUUID": "54657221A8E4645C17002DF03754AB66",
		"TravelID": "00000003",
		"BeginDate": "2025-08-04",
		"EndDate": "2025-08-08",
		"BookingFee": "40.00",
		"TotalPrice": "1871.00",
		"CurrencyCode_code": "USD",
		"Description": "John Smith customer workshop at Acme Corp headquarters",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070003"
	},
	{
		"TravelUUID": "55657221A8E4645C17002DF03754AB66",
		"TravelID": "00000004",
		"BeginDate": "2025-09-04",
		"EndDate": "2025-09-05",
		"BookingFee": "40.00",
		"TotalPrice": "1240.00",
		"CurrencyCode_code": "USD",
		"Description": "Anna Müller onboarding with new project team in Berlin",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "X",
		"to_Agency_AgencyID": "070003"
	}
]

```

**FILE**: Booking.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"BookingUUID": "1A757221A8E4645C17002DF03754AB66",
		"to_Travel_TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"BookingID": "0001",
		"BookingDate": "2025-10-20",
		"ConnectionID": "1001",
		"FlightDate": "2025-11-04",
		"FlightPrice": "405.00",
		"CurrencyCode_code": "USD",
		"BookingStatus_code": "N",
		"PaymentMethod": "B"
	},
	{
		"BookingUUID": "1B757221A8E4645C17002DF03754AB66",
		"to_Travel_TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"BookingID": "0002",
		"BookingDate": "2025-10-20",
		"ConnectionID": "1002",
		"FlightDate": "2025-11-06",
		"FlightPrice": "495.00",
		"CurrencyCode_code": "USD",
		"BookingStatus_code": "N",
		"PaymentMethod": "B"
	},
	{
		"BookingUUID": "2A757221A8E4645C17002DF03754AB66",
		"to_Travel_TravelUUID": "53657221A8E4645C17002DF03754AB66",
		"BookingID": "0001",
		"BookingDate": "2025-11-20",
		"ConnectionID": "2001",
		"FlightDate": "2025-12-04",
		"FlightPrice": "1492.08",
		"CurrencyCode_code": "USD",
		"BookingStatus_code": "N",
		"PaymentMethod": "B"
	},
	{
		"BookingUUID": "2B757221A8E4645C17002DF03754AB66",
		"to_Travel_TravelUUID": "53657221A8E4645C17002DF03754AB66",
		"BookingID": "0002",
		"BookingDate": "2025-11-20",
		"ConnectionID": "2002",
		"FlightDate": "2025-12-16",
		"FlightPrice": "1671.92",
		"CurrencyCode_code": "USD",
		"BookingStatus_code": "N",
		"PaymentMethod": "B"
	},
	{
		"BookingUUID": "3A757221A8E4645C17002DF03754AB66",
		"to_Travel_TravelUUID": "54657221A8E4645C17002DF03754AB66",
		"BookingID": "0001",
		"BookingDate": "2025-07-20",
		"ConnectionID": "3001",
		"FlightDate": "2025-08-04",
		"FlightPrice": "785.82",
		"CurrencyCode_code": "USD",
		"BookingStatus_code": "N",
		"PaymentMethod": "B"
	},
	{
		"BookingUUID": "3B757221A8E4645C17002DF03754AB66",
		"to_Travel_TravelUUID": "54657221A8E4645C17002DF03754AB66",
		"BookingID": "0002",
		"BookingDate": "2025-07-20",
		"ConnectionID": "3002",
		"FlightDate": "2025-08-08",
		"FlightPrice": "1085.18",
		"CurrencyCode_code": "USD",
		"BookingStatus_code": "N",
		"PaymentMethod": "B"
	},
	{
		"BookingUUID": "4A757221A8E4645C17002DF03754AB66",
		"to_Travel_TravelUUID": "55657221A8E4645C17002DF03754AB66",
		"BookingID": "0001",
		"BookingDate": "2025-08-20",
		"ConnectionID": "4001",
		"FlightDate": "2025-09-04",
		"FlightPrice": "632.40",
		"CurrencyCode_code": "USD",
		"BookingStatus_code": "N",
		"PaymentMethod": "B"
	},
	{
		"BookingUUID": "4B757221A8E4645C17002DF03754AB66",
		"to_Travel_TravelUUID": "55657221A8E4645C17002DF03754AB66",
		"BookingID": "0002",
		"BookingDate": "2025-08-20",
		"ConnectionID": "4002",
		"FlightDate": "2025-09-05",
		"FlightPrice": "607.60",
		"CurrencyCode_code": "USD",
		"BookingStatus_code": "N",
		"PaymentMethod": "B"
	}
]

```

--------------------------------

**TITLE**: Worklist Page

**INTRODUCTION**: No introduction

**TAGS**: worklist, work list, tasks, items, to-do

**STEP**: Implementation

**DESCRIPTION**: For worklists, the FilterBar and Variant Management are deactivated by settings in the manifest.json file. By default, there is no Go button to load the data - therefore the initialLoad option is active.

**LANGUAGE**: JSON

**CODE**:
```json
{
	"_version": "1.12.0",
	"sap.app": {
		"id": "sap.fe.core.fpmExplorer.worklist",
		"type": "application",
		"title": "View My Travels",
		"i18n": {
			"bundleUrl": "i18n/i18n.properties",
			"supportedLocales": [""],
			"fallbackLocale": ""
		},
		"applicationVersion": {
			"version": "1.0.0"
		},
		"dataSources": {
			"mainService": {
				"uri": "/sap/fe/core/mock/service/",
				"type": "OData",
				"settings": {
					"annotations": [],
					"odataVersion": "4.0"
				}
			}
		}
	},
	"sap.ui5": {
		"dependencies": {
			"minUI5Version": "1.111.1",
			"libs": {
				"sap.ui.core": {},
				"sap.fe.templates": {}
			}
		},
		"contentDensities": {
			"compact": true,
			"cozy": true
		},
		"models": {
			"": {
				"dataSource": "mainService",
				"settings": {
					"operationMode": "Server",
					"autoExpandSelect": true,
					"earlyRequests": true
				}
			}
		},
		"rootView": {
			"viewName": "sap.fe.core.fpmExplorer.worklist.Worklist"
		},
		"routing": {
			"config": {
				"controlId": "worklist"
			},
			"routes": [
				{
					"pattern": ":?query:",
					"name": "listPage",
					"target": "listPage"
				},
				{
					"pattern": "/Travel({key}):?query:",
					"name": "objectPage",
					"target": "objectPage"
				}
			],
			"targets": {
				"listPage": {
					"type": "Component",
					"id": "Default",
					"name": "sap.fe.templates.ListReport",
					"options": {
						"settings": {
							"contextPath": "/Travel",
							"variantManagement": "None",
							"hideFilterBar": true,
							"initialLoad": "Enabled",
							"navigation": {
								"Travel": {
									"detail": {
										"route": "objectPage"
									}
								}
							},
							"controlConfiguration": {
								"@com.sap.vocabularies.UI.v1.LineItem": {
									"tableSettings": {
										"type": "ResponsiveTable",
										"selectionMode": "Auto",
										"condensedTableLayout": true
									}
								}
							}
						}
					}
				},
				"objectPage": {
					"type": "Component",
					"id": "objectPage",
					"name": "sap.fe.templates.ObjectPage",
					"options": {
						"settings": {
							"editableHeaderContent": false,
							"contextPath": "/Travel"
						}
					}
				}
			}
		}
	}
}
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: annotations.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});

```

--------------------------------

**TITLE**: Custom Actions

**INTRODUCTION**: No introduction

**TAGS**: action visibility, action enablement, hide in edit mode, secured execution

**STEP**: Manifest Action 'Show Message'

**DESCRIPTION**: The header action 'Show Message' is defined in the Manifest. Its visibility and enablement is controlled by the content of the Travel entity fields 'HeaderActionVisible' and 'HeaderBooleanEnabled'. When in edit mode, you can change the fields 'Show Message enabled' and 'Show Message visible' to see the action switching between enabled and disabled, visible and hidden.

**LANGUAGE**: JSON

**CODE**:
```json
{
	"_version": "1.12.0",
	"sap.app": {
		"id": "sap.fe.core.fpmExplorer.customAction",
		"type": "application",
		"i18n": {
			"bundleUrl": "i18n/i18n.properties",
			"supportedLocales": [""],
			"fallbackLocale": ""
		},
		"applicationVersion": {
			"version": "1.0.0"
		},
		"dataSources": {
			"mainService": {
				"uri": "/sap/fe/core/mock/customAction/",
				"type": "OData",
				"settings": {
					"annotations": [],
					"odataVersion": "4.0"
				}
			}
		}
	},
	"sap.ui5": {
		"dependencies": {
			"minUI5Version": "1.111.1",
			"libs": {
				"sap.ui.core": {},
				"sap.fe.templates": {}
			}
		},
		"contentDensities": {
			"compact": true,
			"cozy": true
		},
		"models": {
			"i18n": {
				"type": "sap.ui.model.resource.ResourceModel",
				"settings": {
					"bundleName": "sap.fe.core.fpmExplorer.customAction.i18n.i18n"
				}
			},
			"@i18n": {
				"type": "sap.ui.model.resource.ResourceModel",
				"settings": {
					"bundleName": "sap.fe.core.fpmExplorer.customAction.i18n.i18n"
				}
			},
			"": {
				"dataSource": "mainService",
				"settings": {
					"operationMode": "Server",
					"autoExpandSelect": true,
					"earlyRequests": true
				}
			}
		},
		"rootView": {
			"viewName": "sap.fe.core.fpmExplorer.customAction.CustomAction"
		},
		"extends": {
			"extensions": {
				"sap.ui.controllerExtensions": {
					"sap.fe.templates.ObjectPage.ObjectPageController": {
						"controllerName": "sap.fe.core.fpmExplorer.customAction.extendOP"
					}
				}
			}
		},
		"routing": {
			"config": {
				"controlId": "customAction"
			},
			"routes": [
				{
					"pattern": "/Travel({key}):?query:",
					"name": "objectPage",
					"target": "objectPage"
				},
				{
					"pattern": "/Travel({key})/to_Booking({key2}):?query:",
					"name": "subObjectPage",
					"target": "subObjectPage"
				}
			],
			"targets": {
				"objectPage": {
					"type": "Component",
					"id": "Default",
					"name": "sap.fe.templates.ObjectPage",
					"viewLevel": 1,
					"options": {
						"settings": {
							"contextPath": "/Travel",

							"content": {
								"header": {
									"actions": {
										"customHeaderActionShowMessage": {
											"press": ".extension.sap.fe.core.fpmExplorer.customAction.extendOP.onPress",
											"visible": "{= %{HeaderActionVisible} === 1 }",
											"enabled": "{= %{HeaderBooleanEnabled}}",
											"text": "{i18n>showMessage}"
										},
										"customHeaderActionShowAlert": {
											"press": "sap.fe.core.fpmExplorer.customAction.CustomAction.alertHeader",
											"visible": "{= ${/EntitiesSingleton/ShowAlertVisible}}",
											"enabled": "{ui>/isEditable}",
											"text": "{i18n>showAlert}"
										},
										"setTravelStatus": {
											"text": "{i18n>setTravelStatus}",
											"press": "sap.fe.core.fpmExplorer.customAction.CustomAction.setTravelStatus"
										},
										"DataFieldForActionGroup::TravelActions": {
											"menu": [
												"DataFieldForAction::TravelService.CopyAction",
												"DataFieldForAction::TravelService.ShareAction",
												"DataFieldForAction::TravelService.CheckStatusAction",
												"setTravelStatus"
											],
											"position": {
												"anchor": "customHeaderActionShowAlert",
												"position": "After"
											}
										}
									}
								},
								"footer": {
									"actions": {
										"customRevertChangesAction": {
											"press": "sap.fe.core.fpmExplorer.customAction.CustomAction.revertChangesAction",
											"visible": "{= !${ui>/isEditable}}",
											"enabled": true,
											"text": "{i18n>customRevertChangesAction}"
										}
									}
								}
							},

							"controlConfiguration": {
								"@com.sap.vocabularies.UI.v1.FieldGroup#TravelData": {
									"actions": {
										"customSectionAction": {
											"press": "sap.fe.core.fpmExplorer.customAction.CustomAction.securedExecution",
											"visible": "{= %{NameProperty} === 'Visible'}",
											"enabled": "{= %{BooleanProperty}}",
											"text": "{i18n>customSectionAction}"
										}
									}
								},
								"to_Booking/@com.sap.vocabularies.UI.v1.LineItem": {
									"actions": {
										"customActionShowTotalPrice": {
											"press": "sap.fe.core.fpmExplorer.customAction.CustomAction.showTotalPrice",
											"text": "{i18n>customShowTotalPrice}",
											"enabled": "{= !${ui>/isEditable}}"
										}
									}
								}
							},
							"navigation": {
								"Booking": {
									"detail": {
										"route": "subObjectPage"
									}
								}
							}
						}
					}
				},
				"subObjectPage": {
					"type": "Component",
					"id": "subObjectPage",
					"name": "sap.fe.templates.ObjectPage",
					"viewLevel": 2,
					"options": {
						"settings": {
							"contextPath": "/Travel/to_Booking"
						}
					}
				}
			}
		}
	}
}
```

**LANGUAGE**: TypeScript

**CODE**:
```typescript
import MessageToast from "sap/m/MessageToast";
import ControllerExtension from "sap/ui/core/mvc/ControllerExtension";
import type Context from "sap/ui/model/odata/v4/Context";

export default class ExtendOPController extends ControllerExtension {
	// controller extensions can be used for handling manifest based custom action events
	public onPress(context: Context): void {
		MessageToast.show("Controller extension based action handler invoked for Travel item '" + context.getObject().Description + "'");
	}
}
```

**STEP**: Manifest Action 'Show Alert'

**DESCRIPTION**: The header action 'Show Alert' is also defined in the Manifest. Its visibility is controlled by the singleton '/EntitiesSingleton/ShowAlertVisible' within file 'EntitiesSingleton.json'. The enablement depends on the state of the ObjectPage, i.e. whether or not it is editable. This is controlled by the 'ui>/isEditable' expression.

**LANGUAGE**: JSON

**CODE**:
```json
{
	"_version": "1.12.0",
	"sap.app": {
		"id": "sap.fe.core.fpmExplorer.customAction",
		"type": "application",
		"i18n": {
			"bundleUrl": "i18n/i18n.properties",
			"supportedLocales": [""],
			"fallbackLocale": ""
		},
		"applicationVersion": {
			"version": "1.0.0"
		},
		"dataSources": {
			"mainService": {
				"uri": "/sap/fe/core/mock/customAction/",
				"type": "OData",
				"settings": {
					"annotations": [],
					"odataVersion": "4.0"
				}
			}
		}
	},
	"sap.ui5": {
		"dependencies": {
			"minUI5Version": "1.111.1",
			"libs": {
				"sap.ui.core": {},
				"sap.fe.templates": {}
			}
		},
		"contentDensities": {
			"compact": true,
			"cozy": true
		},
		"models": {
			"i18n": {
				"type": "sap.ui.model.resource.ResourceModel",
				"settings": {
					"bundleName": "sap.fe.core.fpmExplorer.customAction.i18n.i18n"
				}
			},
			"@i18n": {
				"type": "sap.ui.model.resource.ResourceModel",
				"settings": {
					"bundleName": "sap.fe.core.fpmExplorer.customAction.i18n.i18n"
				}
			},
			"": {
				"dataSource": "mainService",
				"settings": {
					"operationMode": "Server",
					"autoExpandSelect": true,
					"earlyRequests": true
				}
			}
		},
		"rootView": {
			"viewName": "sap.fe.core.fpmExplorer.customAction.CustomAction"
		},
		"extends": {
			"extensions": {
				"sap.ui.controllerExtensions": {
					"sap.fe.templates.ObjectPage.ObjectPageController": {
						"controllerName": "sap.fe.core.fpmExplorer.customAction.extendOP"
					}
				}
			}
		},
		"routing": {
			"config": {
				"controlId": "customAction"
			},
			"routes": [
				{
					"pattern": "/Travel({key}):?query:",
					"name": "objectPage",
					"target": "objectPage"
				},
				{
					"pattern": "/Travel({key})/to_Booking({key2}):?query:",
					"name": "subObjectPage",
					"target": "subObjectPage"
				}
			],
			"targets": {
				"objectPage": {
					"type": "Component",
					"id": "Default",
					"name": "sap.fe.templates.ObjectPage",
					"viewLevel": 1,
					"options": {
						"settings": {
							"contextPath": "/Travel",

							"content": {
								"header": {
									"actions": {
										"customHeaderActionShowMessage": {
											"press": ".extension.sap.fe.core.fpmExplorer.customAction.extendOP.onPress",
											"visible": "{= %{HeaderActionVisible} === 1 }",
											"enabled": "{= %{HeaderBooleanEnabled}}",
											"text": "{i18n>showMessage}"
										},
										"customHeaderActionShowAlert": {
											"press": "sap.fe.core.fpmExplorer.customAction.CustomAction.alertHeader",
											"visible": "{= ${/EntitiesSingleton/ShowAlertVisible}}",
											"enabled": "{ui>/isEditable}",
											"text": "{i18n>showAlert}"
										},
										"setTravelStatus": {
											"text": "{i18n>setTravelStatus}",
											"press": "sap.fe.core.fpmExplorer.customAction.CustomAction.setTravelStatus"
										},
										"DataFieldForActionGroup::TravelActions": {
											"menu": [
												"DataFieldForAction::TravelService.CopyAction",
												"DataFieldForAction::TravelService.ShareAction",
												"DataFieldForAction::TravelService.CheckStatusAction",
												"setTravelStatus"
											],
											"position": {
												"anchor": "customHeaderActionShowAlert",
												"position": "After"
											}
										}
									}
								},
								"footer": {
									"actions": {
										"customRevertChangesAction": {
											"press": "sap.fe.core.fpmExplorer.customAction.CustomAction.revertChangesAction",
											"visible": "{= !${ui>/isEditable}}",
											"enabled": true,
											"text": "{i18n>customRevertChangesAction}"
										}
									}
								}
							},

							"controlConfiguration": {
								"@com.sap.vocabularies.UI.v1.FieldGroup#TravelData": {
									"actions": {
										"customSectionAction": {
											"press": "sap.fe.core.fpmExplorer.customAction.CustomAction.securedExecution",
											"visible": "{= %{NameProperty} === 'Visible'}",
											"enabled": "{= %{BooleanProperty}}",
											"text": "{i18n>customSectionAction}"
										}
									}
								},
								"to_Booking/@com.sap.vocabularies.UI.v1.LineItem": {
									"actions": {
										"customActionShowTotalPrice": {
											"press": "sap.fe.core.fpmExplorer.customAction.CustomAction.showTotalPrice",
											"text": "{i18n>customShowTotalPrice}",
											"enabled": "{= !${ui>/isEditable}}"
										}
									}
								}
							},
							"navigation": {
								"Booking": {
									"detail": {
										"route": "subObjectPage"
									}
								}
							}
						}
					}
				},
				"subObjectPage": {
					"type": "Component",
					"id": "subObjectPage",
					"name": "sap.fe.templates.ObjectPage",
					"viewLevel": 2,
					"options": {
						"settings": {
							"contextPath": "/Travel/to_Booking"
						}
					}
				}
			}
		}
	}
}
```

**LANGUAGE**: TypeScript

**CODE**:
```typescript
sap.ui.define(["sap/m/MessageToast", "sap/ui/core/message/Message", "sap/ui/core/Messaging"], function (MessageToast, Message, Messaging) {
	"use strict";

	return {
		message: function (oContext, aSelectedContexts) {
			var sMsgText;
			if (this.getModel("ui").getProperty("/isEditable")) {
				sMsgText = "This action can't be triggered in edit mode";
				MessageToast.show(sMsgText);
			} else if (oContext) {
				// we assume with context = OP, without context = LR
				// Object Page
				sMsgText = "Custom Header action invoked for object '" + oContext.getObject().TitleProperty;
				if (aSelectedContexts.length > 0) {
					sMsgText +=
						"' with selected context \n" +
						aSelectedContexts
							.map(function (ctx) {
								return ctx.getPath();
							})
							.join(",\n");
				}
				MessageToast.show(sMsgText);
			}
		},
		securedExecution: function (oContext, aSelectedContexts) {
			/* This action is encapsulated using the securedExecution method. This ensures the inner function is called
			   only after all previous tasks are fulfilled. By default it sets the UI to busy during execution.
			   Once the task is done, the message handler checks for any new unbound message to be shown to the user.
			   In this example updatesDocument is set to true. As a result, the draft status is updated
			   and the user has to confirm the cancellation of the editing process.
			 */

			this.editFlow.securedExecution(
				function () {
					MessageToast.show("This operation will take a few seconds");
					return new Promise(function (resolve, reject) {
						setTimeout(function () {
							// Adding an unbound message to the message handler which is shown after execution.
							// Same also works for unbound messages sent by any service call.
							Messaging.addMessages(
								new Message({
									message: "The operation was successful",
									target: "",
									persistent: true,
									type: "Success",
									code: "123"
								})
							);
							resolve();
						}, 5000);
					});
				},
				{
					updatesDocument: true
				}
			);
		},
		alertHeader: function (oContext, aSelectedContexts) {
			MessageToast.show("Alert triggered from header action 'Show Alert'");
		},
		revertChangesAction: function (oContext, aSelectedContexts) {
			MessageToast.show("Revert Changes triggered from footer action");
		},
		showTotalPrice: function (oContext, aSelectedContexts) {
			MessageToast.show("Show Total Price triggered from Table Toolbar");
		},
		setTravelStatus: function (oContext, aSelectedContexts) {
			MessageToast.show("Set Travel Status action triggered");
		}
	};
});
```

**STEP**: Enhance an Action Group

**DESCRIPTION**: The header action group 'Travel Actions' shows an example how an action group defined in the servive by annotations can be enhanced within the Manifest file. The actions 'Copy' and 'Share' are defined by annotations.
				In the Manifest file the group is enhanced to provide two more actions, 'Check Travel Status' and 'Set Travel Status'. 'Check Travel Status' is also defined in the service but added to the action group via Manifest setting.
				'Set Travel Status' is a custom action defined and added to the action group in the Manifest - therefore it is not part of the service and only available for a specific application.

**LANGUAGE**: CDS

**CODE**:
```cds
using {TravelService} from '../../../../../service/service';
using from '../../../../../service/annotations';

extend service TravelService with {
  entity ActionVisibilityEntity {
    key code        : Integer    @(
          Common: {
            Text           : Description,
            TextArrangement: #TextFirst
          },
          title : 'Visibility'
        );
        Description : String(20) @(
          Core.Immutable: true,
          Common        : {Label: 'Value Help Description'}
        );
  }

  @odata.singleton
  entity EntitiesSingleton {
    key DoNotChange      : Integer @Core.Computed;
        ShowAlertVisible : Boolean @Core.Computed;
  }
}

extend entity TravelService.Travel with {
  HeaderBooleanEnabled  : Boolean @title: 'Boolean';
  HeaderActionVisible   : Integer @title: 'Boolean';
  ShowAlertDescription1 : String  @title: 'Description'  @UI.MultiLineText: true  @readonly;
  ShowAlertDescription2 : String  @title: 'Description'  @UI.MultiLineText: true  @readonly;
  NameProperty          : String  @title: 'Secured Execution visibility';
  BooleanProperty       : Boolean @title: 'Boolean';
  visible               : Association to TravelService.ActionVisibilityEntity
                            on visible.code = $self.HeaderActionVisible;
} actions {
  action CopyAction();
  action ShareAction();
  action CheckStatusAction();
}

extend entity TravelService.Booking with {
  TextProperty : String @title: 'Text';
}

annotate TravelService.Travel with
@(UI: {

  Identification        : [
    {
      $Type  : 'UI.DataFieldForActionGroup',
      ID     : 'TravelActions',
      Label  : 'Travel Actions',
      Actions: [
        {
          $Type : 'UI.DataFieldForAction',
          Label : 'Copy',
          Action: 'TravelService.CopyAction',
        },
        {
          $Type : 'UI.DataFieldForAction',
          Label : 'Share',
          Action: 'TravelService.ShareAction',
        }
      ]
    },
    {
      $Type : 'UI.DataFieldForAction',
      Label : 'Check Travel Status',
      Action: 'TravelService.CheckStatusAction',
    }
  ],

  FieldGroup #HeaderMain: {Data: [
    {
      $Type: 'UI.DataField',
      Label: '"Show Message" Enabled',
      Value: HeaderBooleanEnabled
    },
    {
      $Type: 'UI.DataField',
      Label: '"Show Message" Visible',
      Value: HeaderActionVisible
    },
    {
      $Type: 'UI.DataField',
      Label: '"Show Alert" Enabled',
      Value: ShowAlertDescription1
    },
    {
      $Type: 'UI.DataField',
      Label: '"Show Alert" Visible',
      Value: ShowAlertDescription2
    }
  ]},

  FieldGroup #TravelData: {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate},
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {
      $Type: 'UI.DataField',
      Label: 'Secured Execution enabled',
      Value: BooleanProperty
    },
    {
      $Type: 'UI.DataField',
      Value: NameProperty
    }
  ]}
}) {
  HeaderActionVisible @(Common: {
    Text                    : visible.Description,
    TextArrangement         : #TextOnly,
    ValueListWithFixedValues: true,
    ValueList               : {
      Label         : 'Value with Value Help',
      CollectionPath: 'ActionVisibilityEntity',
      Parameters    : [
        {
          $Type            : 'Common.ValueListParameterInOut',
          LocalDataProperty: HeaderActionVisible,
          ValueListProperty: 'code'
        },
        {
          $Type            : 'Common.ValueListParameterDisplayOnly',
          ValueListProperty: 'Description'
        }
      ]
    }
  });
  NameProperty        @(Common: {
    // Text                    : visible.Description,
    // TextArrangement         : #TextOnly,
    ValueListWithFixedValues: true,
    ValueList               : {
      Label         : 'Value with Value Help',
      CollectionPath: 'ActionVisibilityEntity',
      Parameters    : [{
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: NameProperty,
        ValueListProperty: 'Description'
      }]
    }
  });
}

annotate TravelService.Travel with @(UI: {Facets: [
  {
    $Type : 'UI.ReferenceFacet',
    ID    : 'TravelData',
    Label : 'Travel Information',
    Target: '@UI.FieldGroup#TravelData',
  },
  {
    $Type : 'UI.ReferenceFacet',
    ID    : 'BookingList',
    Label : 'Bookings',
    Target: 'to_Booking/@UI.LineItem'
  }
]});

annotate TravelService.Booking with @(UI: {LineItem: [
  {Value: BookingID},
  {Value: BookingDate},
  {Value: ConnectionID},
  {Value: FlightDate},
  {Value: FlightPrice},
  {Value: CurrencyCode_code},
  {Value: TextProperty},
]});
```

**LANGUAGE**: JSON

**CODE**:
```json
{
	"_version": "1.12.0",
	"sap.app": {
		"id": "sap.fe.core.fpmExplorer.customAction",
		"type": "application",
		"i18n": {
			"bundleUrl": "i18n/i18n.properties",
			"supportedLocales": [""],
			"fallbackLocale": ""
		},
		"applicationVersion": {
			"version": "1.0.0"
		},
		"dataSources": {
			"mainService": {
				"uri": "/sap/fe/core/mock/customAction/",
				"type": "OData",
				"settings": {
					"annotations": [],
					"odataVersion": "4.0"
				}
			}
		}
	},
	"sap.ui5": {
		"dependencies": {
			"minUI5Version": "1.111.1",
			"libs": {
				"sap.ui.core": {},
				"sap.fe.templates": {}
			}
		},
		"contentDensities": {
			"compact": true,
			"cozy": true
		},
		"models": {
			"i18n": {
				"type": "sap.ui.model.resource.ResourceModel",
				"settings": {
					"bundleName": "sap.fe.core.fpmExplorer.customAction.i18n.i18n"
				}
			},
			"@i18n": {
				"type": "sap.ui.model.resource.ResourceModel",
				"settings": {
					"bundleName": "sap.fe.core.fpmExplorer.customAction.i18n.i18n"
				}
			},
			"": {
				"dataSource": "mainService",
				"settings": {
					"operationMode": "Server",
					"autoExpandSelect": true,
					"earlyRequests": true
				}
			}
		},
		"rootView": {
			"viewName": "sap.fe.core.fpmExplorer.customAction.CustomAction"
		},
		"extends": {
			"extensions": {
				"sap.ui.controllerExtensions": {
					"sap.fe.templates.ObjectPage.ObjectPageController": {
						"controllerName": "sap.fe.core.fpmExplorer.customAction.extendOP"
					}
				}
			}
		},
		"routing": {
			"config": {
				"controlId": "customAction"
			},
			"routes": [
				{
					"pattern": "/Travel({key}):?query:",
					"name": "objectPage",
					"target": "objectPage"
				},
				{
					"pattern": "/Travel({key})/to_Booking({key2}):?query:",
					"name": "subObjectPage",
					"target": "subObjectPage"
				}
			],
			"targets": {
				"objectPage": {
					"type": "Component",
					"id": "Default",
					"name": "sap.fe.templates.ObjectPage",
					"viewLevel": 1,
					"options": {
						"settings": {
							"contextPath": "/Travel",

							"content": {
								"header": {
									"actions": {
										"customHeaderActionShowMessage": {
											"press": ".extension.sap.fe.core.fpmExplorer.customAction.extendOP.onPress",
											"visible": "{= %{HeaderActionVisible} === 1 }",
											"enabled": "{= %{HeaderBooleanEnabled}}",
											"text": "{i18n>showMessage}"
										},
										"customHeaderActionShowAlert": {
											"press": "sap.fe.core.fpmExplorer.customAction.CustomAction.alertHeader",
											"visible": "{= ${/EntitiesSingleton/ShowAlertVisible}}",
											"enabled": "{ui>/isEditable}",
											"text": "{i18n>showAlert}"
										},
										"setTravelStatus": {
											"text": "{i18n>setTravelStatus}",
											"press": "sap.fe.core.fpmExplorer.customAction.CustomAction.setTravelStatus"
										},
										"DataFieldForActionGroup::TravelActions": {
											"menu": [
												"DataFieldForAction::TravelService.CopyAction",
												"DataFieldForAction::TravelService.ShareAction",
												"DataFieldForAction::TravelService.CheckStatusAction",
												"setTravelStatus"
											],
											"position": {
												"anchor": "customHeaderActionShowAlert",
												"position": "After"
											}
										}
									}
								},
								"footer": {
									"actions": {
										"customRevertChangesAction": {
											"press": "sap.fe.core.fpmExplorer.customAction.CustomAction.revertChangesAction",
											"visible": "{= !${ui>/isEditable}}",
											"enabled": true,
											"text": "{i18n>customRevertChangesAction}"
										}
									}
								}
							},

							"controlConfiguration": {
								"@com.sap.vocabularies.UI.v1.FieldGroup#TravelData": {
									"actions": {
										"customSectionAction": {
											"press": "sap.fe.core.fpmExplorer.customAction.CustomAction.securedExecution",
											"visible": "{= %{NameProperty} === 'Visible'}",
											"enabled": "{= %{BooleanProperty}}",
											"text": "{i18n>customSectionAction}"
										}
									}
								},
								"to_Booking/@com.sap.vocabularies.UI.v1.LineItem": {
									"actions": {
										"customActionShowTotalPrice": {
											"press": "sap.fe.core.fpmExplorer.customAction.CustomAction.showTotalPrice",
											"text": "{i18n>customShowTotalPrice}",
											"enabled": "{= !${ui>/isEditable}}"
										}
									}
								}
							},
							"navigation": {
								"Booking": {
									"detail": {
										"route": "subObjectPage"
									}
								}
							}
						}
					}
				},
				"subObjectPage": {
					"type": "Component",
					"id": "subObjectPage",
					"name": "sap.fe.templates.ObjectPage",
					"viewLevel": 2,
					"options": {
						"settings": {
							"contextPath": "/Travel/to_Booking"
						}
					}
				}
			}
		}
	}
}
```

**STEP**: Action triggering Secured Execution

**DESCRIPTION**: The action 'Secured Execution' in the Travel Information section triggers a secured execution by calling the method 'this.editFlow.securedExecution()'. It assures that the UI is showing a busy indicator while the action is executed.
				The actions visibility and enablement is controlled by the fields 'NameProperty' and 'BooleanProperty' of the entity. When in edit mode, you can change the fields 'Secured Execution enabled' and 'Secured Execution visibility' to see the action switching between enabled and disabled, visible and hidden.

**LANGUAGE**: JSON

**CODE**:
```json
{
	"_version": "1.12.0",
	"sap.app": {
		"id": "sap.fe.core.fpmExplorer.customAction",
		"type": "application",
		"i18n": {
			"bundleUrl": "i18n/i18n.properties",
			"supportedLocales": [""],
			"fallbackLocale": ""
		},
		"applicationVersion": {
			"version": "1.0.0"
		},
		"dataSources": {
			"mainService": {
				"uri": "/sap/fe/core/mock/customAction/",
				"type": "OData",
				"settings": {
					"annotations": [],
					"odataVersion": "4.0"
				}
			}
		}
	},
	"sap.ui5": {
		"dependencies": {
			"minUI5Version": "1.111.1",
			"libs": {
				"sap.ui.core": {},
				"sap.fe.templates": {}
			}
		},
		"contentDensities": {
			"compact": true,
			"cozy": true
		},
		"models": {
			"i18n": {
				"type": "sap.ui.model.resource.ResourceModel",
				"settings": {
					"bundleName": "sap.fe.core.fpmExplorer.customAction.i18n.i18n"
				}
			},
			"@i18n": {
				"type": "sap.ui.model.resource.ResourceModel",
				"settings": {
					"bundleName": "sap.fe.core.fpmExplorer.customAction.i18n.i18n"
				}
			},
			"": {
				"dataSource": "mainService",
				"settings": {
					"operationMode": "Server",
					"autoExpandSelect": true,
					"earlyRequests": true
				}
			}
		},
		"rootView": {
			"viewName": "sap.fe.core.fpmExplorer.customAction.CustomAction"
		},
		"extends": {
			"extensions": {
				"sap.ui.controllerExtensions": {
					"sap.fe.templates.ObjectPage.ObjectPageController": {
						"controllerName": "sap.fe.core.fpmExplorer.customAction.extendOP"
					}
				}
			}
		},
		"routing": {
			"config": {
				"controlId": "customAction"
			},
			"routes": [
				{
					"pattern": "/Travel({key}):?query:",
					"name": "objectPage",
					"target": "objectPage"
				},
				{
					"pattern": "/Travel({key})/to_Booking({key2}):?query:",
					"name": "subObjectPage",
					"target": "subObjectPage"
				}
			],
			"targets": {
				"objectPage": {
					"type": "Component",
					"id": "Default",
					"name": "sap.fe.templates.ObjectPage",
					"viewLevel": 1,
					"options": {
						"settings": {
							"contextPath": "/Travel",

							"content": {
								"header": {
									"actions": {
										"customHeaderActionShowMessage": {
											"press": ".extension.sap.fe.core.fpmExplorer.customAction.extendOP.onPress",
											"visible": "{= %{HeaderActionVisible} === 1 }",
											"enabled": "{= %{HeaderBooleanEnabled}}",
											"text": "{i18n>showMessage}"
										},
										"customHeaderActionShowAlert": {
											"press": "sap.fe.core.fpmExplorer.customAction.CustomAction.alertHeader",
											"visible": "{= ${/EntitiesSingleton/ShowAlertVisible}}",
											"enabled": "{ui>/isEditable}",
											"text": "{i18n>showAlert}"
										},
										"setTravelStatus": {
											"text": "{i18n>setTravelStatus}",
											"press": "sap.fe.core.fpmExplorer.customAction.CustomAction.setTravelStatus"
										},
										"DataFieldForActionGroup::TravelActions": {
											"menu": [
												"DataFieldForAction::TravelService.CopyAction",
												"DataFieldForAction::TravelService.ShareAction",
												"DataFieldForAction::TravelService.CheckStatusAction",
												"setTravelStatus"
											],
											"position": {
												"anchor": "customHeaderActionShowAlert",
												"position": "After"
											}
										}
									}
								},
								"footer": {
									"actions": {
										"customRevertChangesAction": {
											"press": "sap.fe.core.fpmExplorer.customAction.CustomAction.revertChangesAction",
											"visible": "{= !${ui>/isEditable}}",
											"enabled": true,
											"text": "{i18n>customRevertChangesAction}"
										}
									}
								}
							},

							"controlConfiguration": {
								"@com.sap.vocabularies.UI.v1.FieldGroup#TravelData": {
									"actions": {
										"customSectionAction": {
											"press": "sap.fe.core.fpmExplorer.customAction.CustomAction.securedExecution",
											"visible": "{= %{NameProperty} === 'Visible'}",
											"enabled": "{= %{BooleanProperty}}",
											"text": "{i18n>customSectionAction}"
										}
									}
								},
								"to_Booking/@com.sap.vocabularies.UI.v1.LineItem": {
									"actions": {
										"customActionShowTotalPrice": {
											"press": "sap.fe.core.fpmExplorer.customAction.CustomAction.showTotalPrice",
											"text": "{i18n>customShowTotalPrice}",
											"enabled": "{= !${ui>/isEditable}}"
										}
									}
								}
							},
							"navigation": {
								"Booking": {
									"detail": {
										"route": "subObjectPage"
									}
								}
							}
						}
					}
				},
				"subObjectPage": {
					"type": "Component",
					"id": "subObjectPage",
					"name": "sap.fe.templates.ObjectPage",
					"viewLevel": 2,
					"options": {
						"settings": {
							"contextPath": "/Travel/to_Booking"
						}
					}
				}
			}
		}
	}
}
```

**LANGUAGE**: TypeScript

**CODE**:
```typescript
sap.ui.define(["sap/m/MessageToast", "sap/ui/core/message/Message", "sap/ui/core/Messaging"], function (MessageToast, Message, Messaging) {
	"use strict";

	return {
		message: function (oContext, aSelectedContexts) {
			var sMsgText;
			if (this.getModel("ui").getProperty("/isEditable")) {
				sMsgText = "This action can't be triggered in edit mode";
				MessageToast.show(sMsgText);
			} else if (oContext) {
				// we assume with context = OP, without context = LR
				// Object Page
				sMsgText = "Custom Header action invoked for object '" + oContext.getObject().TitleProperty;
				if (aSelectedContexts.length > 0) {
					sMsgText +=
						"' with selected context \n" +
						aSelectedContexts
							.map(function (ctx) {
								return ctx.getPath();
							})
							.join(",\n");
				}
				MessageToast.show(sMsgText);
			}
		},
		securedExecution: function (oContext, aSelectedContexts) {
			/* This action is encapsulated using the securedExecution method. This ensures the inner function is called
			   only after all previous tasks are fulfilled. By default it sets the UI to busy during execution.
			   Once the task is done, the message handler checks for any new unbound message to be shown to the user.
			   In this example updatesDocument is set to true. As a result, the draft status is updated
			   and the user has to confirm the cancellation of the editing process.
			 */

			this.editFlow.securedExecution(
				function () {
					MessageToast.show("This operation will take a few seconds");
					return new Promise(function (resolve, reject) {
						setTimeout(function () {
							// Adding an unbound message to the message handler which is shown after execution.
							// Same also works for unbound messages sent by any service call.
							Messaging.addMessages(
								new Message({
									message: "The operation was successful",
									target: "",
									persistent: true,
									type: "Success",
									code: "123"
								})
							);
							resolve();
						}, 5000);
					});
				},
				{
					updatesDocument: true
				}
			);
		},
		alertHeader: function (oContext, aSelectedContexts) {
			MessageToast.show("Alert triggered from header action 'Show Alert'");
		},
		revertChangesAction: function (oContext, aSelectedContexts) {
			MessageToast.show("Revert Changes triggered from footer action");
		},
		showTotalPrice: function (oContext, aSelectedContexts) {
			MessageToast.show("Show Total Price triggered from Table Toolbar");
		},
		setTravelStatus: function (oContext, aSelectedContexts) {
			MessageToast.show("Set Travel Status action triggered");
		}
	};
});
```

**STEP**: 'Show Total Price' Action in the Bookings table

**DESCRIPTION**: This action is implemented in the Manifest and also depends on whether the ObjectPage is editable or not. In this case it is only active when the travel item is in display mode.

**LANGUAGE**: JSON

**CODE**:
```json
{
	"_version": "1.12.0",
	"sap.app": {
		"id": "sap.fe.core.fpmExplorer.customAction",
		"type": "application",
		"i18n": {
			"bundleUrl": "i18n/i18n.properties",
			"supportedLocales": [""],
			"fallbackLocale": ""
		},
		"applicationVersion": {
			"version": "1.0.0"
		},
		"dataSources": {
			"mainService": {
				"uri": "/sap/fe/core/mock/customAction/",
				"type": "OData",
				"settings": {
					"annotations": [],
					"odataVersion": "4.0"
				}
			}
		}
	},
	"sap.ui5": {
		"dependencies": {
			"minUI5Version": "1.111.1",
			"libs": {
				"sap.ui.core": {},
				"sap.fe.templates": {}
			}
		},
		"contentDensities": {
			"compact": true,
			"cozy": true
		},
		"models": {
			"i18n": {
				"type": "sap.ui.model.resource.ResourceModel",
				"settings": {
					"bundleName": "sap.fe.core.fpmExplorer.customAction.i18n.i18n"
				}
			},
			"@i18n": {
				"type": "sap.ui.model.resource.ResourceModel",
				"settings": {
					"bundleName": "sap.fe.core.fpmExplorer.customAction.i18n.i18n"
				}
			},
			"": {
				"dataSource": "mainService",
				"settings": {
					"operationMode": "Server",
					"autoExpandSelect": true,
					"earlyRequests": true
				}
			}
		},
		"rootView": {
			"viewName": "sap.fe.core.fpmExplorer.customAction.CustomAction"
		},
		"extends": {
			"extensions": {
				"sap.ui.controllerExtensions": {
					"sap.fe.templates.ObjectPage.ObjectPageController": {
						"controllerName": "sap.fe.core.fpmExplorer.customAction.extendOP"
					}
				}
			}
		},
		"routing": {
			"config": {
				"controlId": "customAction"
			},
			"routes": [
				{
					"pattern": "/Travel({key}):?query:",
					"name": "objectPage",
					"target": "objectPage"
				},
				{
					"pattern": "/Travel({key})/to_Booking({key2}):?query:",
					"name": "subObjectPage",
					"target": "subObjectPage"
				}
			],
			"targets": {
				"objectPage": {
					"type": "Component",
					"id": "Default",
					"name": "sap.fe.templates.ObjectPage",
					"viewLevel": 1,
					"options": {
						"settings": {
							"contextPath": "/Travel",

							"content": {
								"header": {
									"actions": {
										"customHeaderActionShowMessage": {
											"press": ".extension.sap.fe.core.fpmExplorer.customAction.extendOP.onPress",
											"visible": "{= %{HeaderActionVisible} === 1 }",
											"enabled": "{= %{HeaderBooleanEnabled}}",
											"text": "{i18n>showMessage}"
										},
										"customHeaderActionShowAlert": {
											"press": "sap.fe.core.fpmExplorer.customAction.CustomAction.alertHeader",
											"visible": "{= ${/EntitiesSingleton/ShowAlertVisible}}",
											"enabled": "{ui>/isEditable}",
											"text": "{i18n>showAlert}"
										},
										"setTravelStatus": {
											"text": "{i18n>setTravelStatus}",
											"press": "sap.fe.core.fpmExplorer.customAction.CustomAction.setTravelStatus"
										},
										"DataFieldForActionGroup::TravelActions": {
											"menu": [
												"DataFieldForAction::TravelService.CopyAction",
												"DataFieldForAction::TravelService.ShareAction",
												"DataFieldForAction::TravelService.CheckStatusAction",
												"setTravelStatus"
											],
											"position": {
												"anchor": "customHeaderActionShowAlert",
												"position": "After"
											}
										}
									}
								},
								"footer": {
									"actions": {
										"customRevertChangesAction": {
											"press": "sap.fe.core.fpmExplorer.customAction.CustomAction.revertChangesAction",
											"visible": "{= !${ui>/isEditable}}",
											"enabled": true,
											"text": "{i18n>customRevertChangesAction}"
										}
									}
								}
							},

							"controlConfiguration": {
								"@com.sap.vocabularies.UI.v1.FieldGroup#TravelData": {
									"actions": {
										"customSectionAction": {
											"press": "sap.fe.core.fpmExplorer.customAction.CustomAction.securedExecution",
											"visible": "{= %{NameProperty} === 'Visible'}",
											"enabled": "{= %{BooleanProperty}}",
											"text": "{i18n>customSectionAction}"
										}
									}
								},
								"to_Booking/@com.sap.vocabularies.UI.v1.LineItem": {
									"actions": {
										"customActionShowTotalPrice": {
											"press": "sap.fe.core.fpmExplorer.customAction.CustomAction.showTotalPrice",
											"text": "{i18n>customShowTotalPrice}",
											"enabled": "{= !${ui>/isEditable}}"
										}
									}
								}
							},
							"navigation": {
								"Booking": {
									"detail": {
										"route": "subObjectPage"
									}
								}
							}
						}
					}
				},
				"subObjectPage": {
					"type": "Component",
					"id": "subObjectPage",
					"name": "sap.fe.templates.ObjectPage",
					"viewLevel": 2,
					"options": {
						"settings": {
							"contextPath": "/Travel/to_Booking"
						}
					}
				}
			}
		}
	}
}
```

**STEP**: 'Revert Changes' Action in the Footer Bar

**DESCRIPTION**: The action is defined in the Manifest file. It is always enabled but the visibility depends on whether the ObjectPage is in display mode or in edit mode.

**LANGUAGE**: JSON

**CODE**:
```json
{
	"_version": "1.12.0",
	"sap.app": {
		"id": "sap.fe.core.fpmExplorer.customAction",
		"type": "application",
		"i18n": {
			"bundleUrl": "i18n/i18n.properties",
			"supportedLocales": [""],
			"fallbackLocale": ""
		},
		"applicationVersion": {
			"version": "1.0.0"
		},
		"dataSources": {
			"mainService": {
				"uri": "/sap/fe/core/mock/customAction/",
				"type": "OData",
				"settings": {
					"annotations": [],
					"odataVersion": "4.0"
				}
			}
		}
	},
	"sap.ui5": {
		"dependencies": {
			"minUI5Version": "1.111.1",
			"libs": {
				"sap.ui.core": {},
				"sap.fe.templates": {}
			}
		},
		"contentDensities": {
			"compact": true,
			"cozy": true
		},
		"models": {
			"i18n": {
				"type": "sap.ui.model.resource.ResourceModel",
				"settings": {
					"bundleName": "sap.fe.core.fpmExplorer.customAction.i18n.i18n"
				}
			},
			"@i18n": {
				"type": "sap.ui.model.resource.ResourceModel",
				"settings": {
					"bundleName": "sap.fe.core.fpmExplorer.customAction.i18n.i18n"
				}
			},
			"": {
				"dataSource": "mainService",
				"settings": {
					"operationMode": "Server",
					"autoExpandSelect": true,
					"earlyRequests": true
				}
			}
		},
		"rootView": {
			"viewName": "sap.fe.core.fpmExplorer.customAction.CustomAction"
		},
		"extends": {
			"extensions": {
				"sap.ui.controllerExtensions": {
					"sap.fe.templates.ObjectPage.ObjectPageController": {
						"controllerName": "sap.fe.core.fpmExplorer.customAction.extendOP"
					}
				}
			}
		},
		"routing": {
			"config": {
				"controlId": "customAction"
			},
			"routes": [
				{
					"pattern": "/Travel({key}):?query:",
					"name": "objectPage",
					"target": "objectPage"
				},
				{
					"pattern": "/Travel({key})/to_Booking({key2}):?query:",
					"name": "subObjectPage",
					"target": "subObjectPage"
				}
			],
			"targets": {
				"objectPage": {
					"type": "Component",
					"id": "Default",
					"name": "sap.fe.templates.ObjectPage",
					"viewLevel": 1,
					"options": {
						"settings": {
							"contextPath": "/Travel",

							"content": {
								"header": {
									"actions": {
										"customHeaderActionShowMessage": {
											"press": ".extension.sap.fe.core.fpmExplorer.customAction.extendOP.onPress",
											"visible": "{= %{HeaderActionVisible} === 1 }",
											"enabled": "{= %{HeaderBooleanEnabled}}",
											"text": "{i18n>showMessage}"
										},
										"customHeaderActionShowAlert": {
											"press": "sap.fe.core.fpmExplorer.customAction.CustomAction.alertHeader",
											"visible": "{= ${/EntitiesSingleton/ShowAlertVisible}}",
											"enabled": "{ui>/isEditable}",
											"text": "{i18n>showAlert}"
										},
										"setTravelStatus": {
											"text": "{i18n>setTravelStatus}",
											"press": "sap.fe.core.fpmExplorer.customAction.CustomAction.setTravelStatus"
										},
										"DataFieldForActionGroup::TravelActions": {
											"menu": [
												"DataFieldForAction::TravelService.CopyAction",
												"DataFieldForAction::TravelService.ShareAction",
												"DataFieldForAction::TravelService.CheckStatusAction",
												"setTravelStatus"
											],
											"position": {
												"anchor": "customHeaderActionShowAlert",
												"position": "After"
											}
										}
									}
								},
								"footer": {
									"actions": {
										"customRevertChangesAction": {
											"press": "sap.fe.core.fpmExplorer.customAction.CustomAction.revertChangesAction",
											"visible": "{= !${ui>/isEditable}}",
											"enabled": true,
											"text": "{i18n>customRevertChangesAction}"
										}
									}
								}
							},

							"controlConfiguration": {
								"@com.sap.vocabularies.UI.v1.FieldGroup#TravelData": {
									"actions": {
										"customSectionAction": {
											"press": "sap.fe.core.fpmExplorer.customAction.CustomAction.securedExecution",
											"visible": "{= %{NameProperty} === 'Visible'}",
											"enabled": "{= %{BooleanProperty}}",
											"text": "{i18n>customSectionAction}"
										}
									}
								},
								"to_Booking/@com.sap.vocabularies.UI.v1.LineItem": {
									"actions": {
										"customActionShowTotalPrice": {
											"press": "sap.fe.core.fpmExplorer.customAction.CustomAction.showTotalPrice",
											"text": "{i18n>customShowTotalPrice}",
											"enabled": "{= !${ui>/isEditable}}"
										}
									}
								}
							},
							"navigation": {
								"Booking": {
									"detail": {
										"route": "subObjectPage"
									}
								}
							}
						}
					}
				},
				"subObjectPage": {
					"type": "Component",
					"id": "subObjectPage",
					"name": "sap.fe.templates.ObjectPage",
					"viewLevel": 2,
					"options": {
						"settings": {
							"contextPath": "/Travel/to_Booking"
						}
					}
				}
			}
		}
	}
}
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: Travel.js

**LANGUAGE**: JavaScript

**CODE**:
```javascript
module.exports = {
	executeAction: async function (actionDefinition, actionData, keys, odataRequest) {
		console.log("Method is called: " + actionDefinition.name);

		if (actionDefinition.name === "CopyAction") {
			odataRequest.addMessage(0, "Copy action clicked ", 2, "");
		} else if (actionDefinition.name === "ShareAction") {
			odataRequest.addMessage(0, "Share action clicked", 2, "");
		} else if (actionDefinition.name === "CheckStatusAction") {
			odataRequest.addMessage(0, "Check Status action clicked", 2, "");
		}
		return undefined;
	}
};

```

**FILE**: EntitiesSingleton.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"DoNotChange": 1,
		"ShowAlertVisible": true
	}
]

```

--------------------------------

**TITLE**: Custom Header Facet

**INTRODUCTION**: No introduction

**TAGS**: micro chart, column chart, bullet chart, data point, building block micro chart, building block form element

**STEP**: Define Service Annotations

**DESCRIPTION**: Add the Chart (#MicroChart) and DataPoint annotations to provide the semantic data (measures, criticality, title and subtitle) that the custom header facet will visualize.

**LANGUAGE**: CDS

**CODE**:
```cds
using {TravelService.Travel} from '../../../../../service/service';
using from '../../../../../service/annotations';

extend entity TravelService.Travel with {
  NumberProperty               : Decimal(6, 2)  @title: 'Number';
  Currency                     : String         @title: 'Currency';
  BooleanProperty              : Boolean        @title: 'Boolean';
  Progress                     : Decimal(4, 1)  @title: 'Progress';
  IntProperty                  : Integer        @title: 'Number';
  StringProperty               : String         @title: 'Value';
  TextProperty                 : String         @title: 'Text';
  TransactionCurrency          : String(5);
  CustomerCreditForecast       : Decimal(23, 2) @title: 'Forecast';
  CustomerCreditExposureAmount : Decimal(23, 2) @title: 'Exposure Amount';
  CustomerCreditLimitAmount    : Decimal(23, 2) @title: 'Limit Amount';
  Criticality                  : Integer;
};

annotate TravelService.Travel with @(UI: {
  Chart #MicroChart                      : {
    $Type            : 'UI.ChartDefinitionType',
    Title            : 'Credit Limit Bullet',
    Description      : 'Bullet MicroChart',
    ChartType        : #Bullet,
    Measures         : [CustomerCreditExposureAmount],
    MeasureAttributes: [{
      $Type    : 'UI.ChartMeasureAttributeType',
      Measure  : CustomerCreditExposureAmount,
      Role     : #Axis1,
      DataPoint: '@UI.DataPoint#CustomerCreditExposureAmount'
    }]
  },
  DataPoint #CustomerCreditExposureAmount: {
    Title        : 'Exposure Amount',
    Value        : CustomerCreditExposureAmount,
    Description  : 'Bullet Micro Chart',
    TargetValue  : CustomerCreditLimitAmount,
    ForecastValue: CustomerCreditForecast,
    MaximumValue : 7000,
    MinimumValue : 200,
    Criticality  : Criticality,
  },
  Facets                                 : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'TravelData',
    Label : 'Travel Information',
    Target: '@UI.FieldGroup#TravelData',
  }]
});
```

**STEP**: Configure Header Facets in Manifest

**DESCRIPTION**: Map the annotated facet to custom content and reference the display and edit templates via 'template' and 'templateEdit'. Manifest settings refine or override the base annotations (positioning, titles, edit/display behavior).

**LANGUAGE**: JSON

**CODE**:
```json
{
	"_version": "1.12.0",
	"sap.app": {
		"id": "sap.fe.core.fpmExplorer.customHeaderFacet",
		"type": "application",
		"i18n": {
			"bundleUrl": "i18n/i18n.properties",
			"supportedLocales": [""],
			"fallbackLocale": ""
		},
		"applicationVersion": {
			"version": "1.0.0"
		},
		"dataSources": {
			"mainService": {
				"uri": "/sap/fe/core/mock/customHeaderFacet/",
				"type": "OData",
				"settings": {
					"annotations": [],
					"odataVersion": "4.0"
				}
			}
		}
	},
	"sap.ui5": {
		"dependencies": {
			"minUI5Version": "1.111.1",
			"libs": {
				"sap.ui.core": {},
				"sap.fe.templates": {}
			}
		},
		"contentDensities": {
			"compact": true,
			"cozy": true
		},
		"models": {
			"": {
				"dataSource": "mainService",
				"settings": {
					"operationMode": "Server",
					"autoExpandSelect": true,
					"earlyRequests": true
				}
			}
		},
		"rootView": {
			"viewName": "sap.fe.core.fpmExplorer.customHeaderFacet.CustomHeaderFacet"
		},
		"routing": {
			"config": {
				"controlId": "customHeaderFacet"
			},
			"routes": [
				{
					"pattern": "/Travel({key}):?query:",
					"name": "objectPage",
					"target": "objectPage"
				},
				{
					"pattern": "/Travel({key})/to_Booking({key2}):?query:",
					"name": "subObjectPage",
					"target": "subObjectPage"
				}
			],
			"targets": {
				"objectPage": {
					"type": "Component",
					"id": "Default",
					"name": "sap.fe.templates.ObjectPage",
					"viewLevel": 1,
					"options": {
						"settings": {
							"contextPath": "/Travel",
							"content": {
								"header": {
									"facets": {
										"customColumnChart": {
											"template": "sap.fe.core.fpmExplorer.customHeaderFacet.CustomHeaderFacetColumnChart",
											"requestGroupId": "Heroes",
											"stashed": false,
											"visible": "{= ${BooleanProperty}}",
											"position": {
												"placement": "After",
												"anchor": "HeaderFacetIdentifier1"
											},
											"flexSettings": {
												"designtime": "not-adaptable-visibility"
											}
										},
										"customDataPoint": {
											"template": "sap.fe.core.fpmExplorer.customHeaderFacet.CustomHeaderFacetDataPoint",
											"title": "Custom Data Point",
											"subTitle": "Car Rental",
											"requestGroupId": "LongRunners",
											"position": {
												"placement": "After",
												"anchor": "customColumnChart"
											},
											"templateEdit": "sap.fe.core.fpmExplorer.customHeaderFacet.CustomHeaderFacetDataPointEdit"
										}
									}
								}
							},
							"editableHeaderContent": true,
							"controlConfiguration": {
								"to_Booking/@com.sap.vocabularies.UI.v1.LineItem": {
									"actions": {}
								},
								"@com.sap.vocabularies.UI.v1.HeaderFacets": {
									"facets": {
										"customMicroChart": {
											"template": "sap.fe.core.fpmExplorer.customHeaderFacet.CustomHeaderFacetMicroChart",
											"title": "Custom Micro Chart",
											"requestGroupId": "Workers",
											"position": {
												"placement": "After",
												"anchor": "customDataPoint"
											},
											"templateEdit": "sap.fe.core.fpmExplorer.customHeaderFacet.CustomHeaderFacetMicroChartEdit"
										},
										"customBuildingBlockMicroChart": {
											"template": "sap.fe.core.fpmExplorer.customHeaderFacet.CustomHeaderFacetBuildingBlockMicroChart",
											"title": "Custom Building Block Micro Chart",
											"requestGroupId": "Workers",
											"position": {
												"placement": "After",
												"anchor": "customMicroChart"
											},
											"templateEdit": "sap.fe.core.fpmExplorer.customHeaderFacet.CustomHeaderFacetBuildingBlockMicroChartEdit"
										}
									}
								}
							},
							"navigation": {
								"Booking": {
									"detail": {
										"route": "subObjectPage"
									}
								}
							}
						}
					}
				},
				"subObjectPage": {
					"type": "Component",
					"id": "subObjectPage",
					"name": "sap.fe.templates.ObjectPage",
					"viewLevel": 2,
					"options": {
						"settings": {
							"contextPath": "/Travel/to_Booking"
						}
					}
				}
			}
		}
	}
}
```

**STEP**: Provide XML Fragments

**DESCRIPTION**: Implement the XML fragments: one for display and one for edit. The runtime selects the fragment according to the current edit mode.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:macros="sap.fe.macros">
	<VBox id="CustomBuildingBlockMicroChart" displayInline="true">
		<macros:MicroChart
			id="radialMicroChart"
			metaPath="@com.sap.vocabularies.UI.v1.Chart#MicroChart"
			contextPath="/Travel"
			batchGroupId="$auto.abc"
		/>
	</VBox>
</core:FragmentDefinition>
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: CustomHeaderFacetBuildingBlockMicroChartEdit.fragment.xml

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:macros="sap.fe.macros">
	<macros:FormElement metaPath="CustomerCreditForecast" id="CustomerCreditForecastID" />
	<macros:FormElement metaPath="CustomerCreditExposureAmount" id="CustomerCreditExposureAmountID" />
	<macros:FormElement metaPath="CustomerCreditLimitAmount" id="CustomerCreditLimitAmountID" />
</core:FragmentDefinition>

```

**FILE**: CustomHeaderFacetColumnChart.fragment.xml

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:mc="sap.suite.ui.microchart">
	<VBox id="CustomHeaderFacetColumnChart" displayInline="true">
		<Link text="Custom Column Chart" target="_blank" href="https://ui5.sap.com/#/api/sap.suite.ui.microchart.ColumnMicroChartData" />
		<mc:ColumnMicroChart size="S" class="sapUiSmallMarginTop sapUiSmallMarginEnd">
			<mc:columns>
				<mc:ColumnMicroChartData value="75" color="Error" />
				<mc:ColumnMicroChartData value="95" color="Error" />
				<mc:ColumnMicroChartData value="100" color="Error" />
				<mc:ColumnMicroChartData value="90" color="Error" />
				<mc:ColumnMicroChartData value="80" color="Error" />
				<mc:ColumnMicroChartData value="35" color="Neutral" />
				<mc:ColumnMicroChartData value="65" color="Neutral" />
				<mc:ColumnMicroChartData value="5" color="Neutral" />
				<mc:ColumnMicroChartData value="15" color="Neutral" />
				<mc:ColumnMicroChartData value="20" color="Neutral" />
			</mc:columns>
		</mc:ColumnMicroChart>
	</VBox>
</core:FragmentDefinition>

```

**FILE**: CustomHeaderFacetDataPoint.fragment.xml

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core">
	<VBox id="CustomHeaderFacetDataPoint" displayInline="true">
		<HBox>
			<core:Icon src="sap-icon://car-rental" color="#e9730c" size="1.8rem" class="sapUiSmallMarginEnd" />
			<ObjectNumber
				state="Warning"
				number="{parts:[{path:'NumberProperty',type:'sap.ui.model.odata.type.Decimal',constraints:{'precision':15,'scale':10}},{path:'Currency',type:'sap.ui.model.odata.type.String',constraints:{'maxLength':5}},{mode:'OneTime',path:'/##@@requestCurrencyCodes',targetType:'any'}],type:'sap.ui.model.odata.type.Currency'}"
			/>
		</HBox>
	</VBox>
</core:FragmentDefinition>

```

**FILE**: CustomHeaderFacetDataPointEdit.fragment.xml

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:f="sap.ui.layout.form" xmlns:macros="sap.fe.macros">
	<f:FormElement label="Net Amount">
		<f:fields>
			<macros:Field id="NumberProperty" metaPath="NumberProperty" />
		</f:fields>
	</f:FormElement>
</core:FragmentDefinition>

```

**FILE**: CustomHeaderFacetMicroChart.fragment.xml

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:mc="sap.suite.ui.microchart">
	<VBox id="CustomHeaderFacetHarveyBall" displayInline="true">
		<mc:HarveyBallMicroChart size="S" total="100" totalScale="%">
			<mc:items>
				<mc:HarveyBallMicroChartItem
					fraction="{= ((100 > 0) ? ((${Progress} > 100) ? 100 : ((${Progress} &lt; 0) ? 0 : (${Progress} / 100 * 100))) : 0) }"
					color="Good"
					fractionScale="%"
				/>
			</mc:items>
		</mc:HarveyBallMicroChart>
	</VBox>
</core:FragmentDefinition>

```

**FILE**: CustomHeaderFacetMicroChartEdit.fragment.xml

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:f="sap.ui.layout.form" xmlns:macros="sap.fe.macros">
	<f:FormElement label="Progress">
		<f:fields>
			<macros:Field id="Progress" metaPath="Progress" />
		</f:fields>
	</f:FormElement>
</core:FragmentDefinition>

```

--------------------------------

**TITLE**: Custom Section

**INTRODUCTION**: No introduction

**TAGS**: object page extensions, custom section, custom subsection, custom action, custom header facet

**STEP**: Section Configuration in Manifest

**DESCRIPTION**: Define your custom sections in the manifest.json file under the 'content.body.sections' configuration. Each section references a fragment that contains the custom content.

**LANGUAGE**: JSON

**CODE**:
```json
{
	"_version": "1.12.0",
	"sap.app": {
		"id": "sap.fe.core.fpmExplorer.customSection",
		"type": "application",
		"i18n": {
			"bundleName": "sap.fe.core.fpmExplorer.customSection.i18n.i18n",
			"supportedLocales": [""],
			"fallbackLocale": ""
		},
		"applicationVersion": {
			"version": "1.0.0"
		},
		"dataSources": {
			"mainService": {
				"uri": "/sap/fe/core/mock/customSection/",
				"type": "OData",
				"settings": {
					"annotations": [],
					"odataVersion": "4.0"
				}
			}
		}
	},
	"sap.ui5": {
		"dependencies": {
			"minUI5Version": "1.111.1",
			"libs": {
				"sap.ui.core": {},
				"sap.fe.templates": {},
				"sap.ui.vbm": {}
			}
		},
		"contentDensities": {
			"compact": true,
			"cozy": true
		},
		"models": {
			"i18n": {
				"type": "sap.ui.model.resource.ResourceModel",
				"settings": {
					"bundleName": "sap.fe.core.fpmExplorer.customSection.i18n.i18n"
				}
			},
			"@i18n": {
				"type": "sap.ui.model.resource.ResourceModel",
				"settings": {
					"bundleName": "sap.fe.core.fpmExplorer.customSection.i18n.i18n"
				}
			},
			"": {
				"dataSource": "mainService",
				"settings": {
					"operationMode": "Server",
					"autoExpandSelect": true,
					"earlyRequests": true
				}
			}
		},
		"rootView": {
			"viewName": "sap.fe.core.fpmExplorer.customSection.CustomSection"
		},
		"routing": {
			"config": {
				"controlId": "customSection"
			},
			"routes": [
				{
					"pattern": "/Travel({key}):?query:",
					"name": "default",
					"target": "sample"
				},
				{
					"pattern": "/Travel({key})/to_Booking({key2}):?query:",
					"name": "Booking",
					"target": "Booking"
				}
			],
			"targets": {
				"Booking": {
					"type": "Component",
					"id": "booking",
					"name": "sap.fe.templates.ObjectPage",
					"options": {
						"settings": {
							"contextPath": "/Travel/to_Booking"
						}
					}
				},
				"sample": {
					"type": "Component",
					"id": "Default",
					"name": "sap.fe.templates.ObjectPage",
					"viewLevel": 1,
					"options": {
						"settings": {
							"contextPath": "/Travel",
							"navigation": {
								"items": {
									"detail": {
										"route": "to_Booking"
									}
								}
							},
							"content": {
								"body": {
									"sections": {
										"flightMap": {
											"name": "sap.fe.core.fpmExplorer.customSection.CustomSectionFlightMap",
											"type": "XMLFragment",
											"title": "{i18n>FlightMap}",
											"position": {
												"placement": "After",
												"anchor": "BookingList"
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}
```

**STEP**: Section Positioning

**DESCRIPTION**: Use the position property to control where your custom section appears in the Object Page. You can place it before or after existing sections using the placement and anchor properties.

**LANGUAGE**: JSON

**CODE**:
```json
{
	"_version": "1.12.0",
	"sap.app": {
		"id": "sap.fe.core.fpmExplorer.customSection",
		"type": "application",
		"i18n": {
			"bundleName": "sap.fe.core.fpmExplorer.customSection.i18n.i18n",
			"supportedLocales": [""],
			"fallbackLocale": ""
		},
		"applicationVersion": {
			"version": "1.0.0"
		},
		"dataSources": {
			"mainService": {
				"uri": "/sap/fe/core/mock/customSection/",
				"type": "OData",
				"settings": {
					"annotations": [],
					"odataVersion": "4.0"
				}
			}
		}
	},
	"sap.ui5": {
		"dependencies": {
			"minUI5Version": "1.111.1",
			"libs": {
				"sap.ui.core": {},
				"sap.fe.templates": {},
				"sap.ui.vbm": {}
			}
		},
		"contentDensities": {
			"compact": true,
			"cozy": true
		},
		"models": {
			"i18n": {
				"type": "sap.ui.model.resource.ResourceModel",
				"settings": {
					"bundleName": "sap.fe.core.fpmExplorer.customSection.i18n.i18n"
				}
			},
			"@i18n": {
				"type": "sap.ui.model.resource.ResourceModel",
				"settings": {
					"bundleName": "sap.fe.core.fpmExplorer.customSection.i18n.i18n"
				}
			},
			"": {
				"dataSource": "mainService",
				"settings": {
					"operationMode": "Server",
					"autoExpandSelect": true,
					"earlyRequests": true
				}
			}
		},
		"rootView": {
			"viewName": "sap.fe.core.fpmExplorer.customSection.CustomSection"
		},
		"routing": {
			"config": {
				"controlId": "customSection"
			},
			"routes": [
				{
					"pattern": "/Travel({key}):?query:",
					"name": "default",
					"target": "sample"
				},
				{
					"pattern": "/Travel({key})/to_Booking({key2}):?query:",
					"name": "Booking",
					"target": "Booking"
				}
			],
			"targets": {
				"Booking": {
					"type": "Component",
					"id": "booking",
					"name": "sap.fe.templates.ObjectPage",
					"options": {
						"settings": {
							"contextPath": "/Travel/to_Booking"
						}
					}
				},
				"sample": {
					"type": "Component",
					"id": "Default",
					"name": "sap.fe.templates.ObjectPage",
					"viewLevel": 1,
					"options": {
						"settings": {
							"contextPath": "/Travel",
							"navigation": {
								"items": {
									"detail": {
										"route": "to_Booking"
									}
								}
							},
							"content": {
								"body": {
									"sections": {
										"flightMap": {
											"name": "sap.fe.core.fpmExplorer.customSection.CustomSectionFlightMap",
											"type": "XMLFragment",
											"title": "{i18n>FlightMap}",
											"position": {
												"placement": "After",
												"anchor": "BookingList"
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}
```

**STEP**: Section Title and Internationalization

**DESCRIPTION**: Define section titles using i18n keys to support multiple languages. The title property in the section configuration references the i18n bundle.

**LANGUAGE**: JSON

**CODE**:
```json
{
	"_version": "1.12.0",
	"sap.app": {
		"id": "sap.fe.core.fpmExplorer.customSection",
		"type": "application",
		"i18n": {
			"bundleName": "sap.fe.core.fpmExplorer.customSection.i18n.i18n",
			"supportedLocales": [""],
			"fallbackLocale": ""
		},
		"applicationVersion": {
			"version": "1.0.0"
		},
		"dataSources": {
			"mainService": {
				"uri": "/sap/fe/core/mock/customSection/",
				"type": "OData",
				"settings": {
					"annotations": [],
					"odataVersion": "4.0"
				}
			}
		}
	},
	"sap.ui5": {
		"dependencies": {
			"minUI5Version": "1.111.1",
			"libs": {
				"sap.ui.core": {},
				"sap.fe.templates": {},
				"sap.ui.vbm": {}
			}
		},
		"contentDensities": {
			"compact": true,
			"cozy": true
		},
		"models": {
			"i18n": {
				"type": "sap.ui.model.resource.ResourceModel",
				"settings": {
					"bundleName": "sap.fe.core.fpmExplorer.customSection.i18n.i18n"
				}
			},
			"@i18n": {
				"type": "sap.ui.model.resource.ResourceModel",
				"settings": {
					"bundleName": "sap.fe.core.fpmExplorer.customSection.i18n.i18n"
				}
			},
			"": {
				"dataSource": "mainService",
				"settings": {
					"operationMode": "Server",
					"autoExpandSelect": true,
					"earlyRequests": true
				}
			}
		},
		"rootView": {
			"viewName": "sap.fe.core.fpmExplorer.customSection.CustomSection"
		},
		"routing": {
			"config": {
				"controlId": "customSection"
			},
			"routes": [
				{
					"pattern": "/Travel({key}):?query:",
					"name": "default",
					"target": "sample"
				},
				{
					"pattern": "/Travel({key})/to_Booking({key2}):?query:",
					"name": "Booking",
					"target": "Booking"
				}
			],
			"targets": {
				"Booking": {
					"type": "Component",
					"id": "booking",
					"name": "sap.fe.templates.ObjectPage",
					"options": {
						"settings": {
							"contextPath": "/Travel/to_Booking"
						}
					}
				},
				"sample": {
					"type": "Component",
					"id": "Default",
					"name": "sap.fe.templates.ObjectPage",
					"viewLevel": 1,
					"options": {
						"settings": {
							"contextPath": "/Travel",
							"navigation": {
								"items": {
									"detail": {
										"route": "to_Booking"
									}
								}
							},
							"content": {
								"body": {
									"sections": {
										"flightMap": {
											"name": "sap.fe.core.fpmExplorer.customSection.CustomSectionFlightMap",
											"type": "XMLFragment",
											"title": "{i18n>FlightMap}",
											"position": {
												"placement": "After",
												"anchor": "BookingList"
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}
```

**STEP**: Fragment Type Configuration

**DESCRIPTION**: Specify the fragment type as 'XMLFragment' in the section configuration to ensure proper loading and rendering of your custom content.

**LANGUAGE**: JSON

**CODE**:
```json
{
	"_version": "1.12.0",
	"sap.app": {
		"id": "sap.fe.core.fpmExplorer.customSection",
		"type": "application",
		"i18n": {
			"bundleName": "sap.fe.core.fpmExplorer.customSection.i18n.i18n",
			"supportedLocales": [""],
			"fallbackLocale": ""
		},
		"applicationVersion": {
			"version": "1.0.0"
		},
		"dataSources": {
			"mainService": {
				"uri": "/sap/fe/core/mock/customSection/",
				"type": "OData",
				"settings": {
					"annotations": [],
					"odataVersion": "4.0"
				}
			}
		}
	},
	"sap.ui5": {
		"dependencies": {
			"minUI5Version": "1.111.1",
			"libs": {
				"sap.ui.core": {},
				"sap.fe.templates": {},
				"sap.ui.vbm": {}
			}
		},
		"contentDensities": {
			"compact": true,
			"cozy": true
		},
		"models": {
			"i18n": {
				"type": "sap.ui.model.resource.ResourceModel",
				"settings": {
					"bundleName": "sap.fe.core.fpmExplorer.customSection.i18n.i18n"
				}
			},
			"@i18n": {
				"type": "sap.ui.model.resource.ResourceModel",
				"settings": {
					"bundleName": "sap.fe.core.fpmExplorer.customSection.i18n.i18n"
				}
			},
			"": {
				"dataSource": "mainService",
				"settings": {
					"operationMode": "Server",
					"autoExpandSelect": true,
					"earlyRequests": true
				}
			}
		},
		"rootView": {
			"viewName": "sap.fe.core.fpmExplorer.customSection.CustomSection"
		},
		"routing": {
			"config": {
				"controlId": "customSection"
			},
			"routes": [
				{
					"pattern": "/Travel({key}):?query:",
					"name": "default",
					"target": "sample"
				},
				{
					"pattern": "/Travel({key})/to_Booking({key2}):?query:",
					"name": "Booking",
					"target": "Booking"
				}
			],
			"targets": {
				"Booking": {
					"type": "Component",
					"id": "booking",
					"name": "sap.fe.templates.ObjectPage",
					"options": {
						"settings": {
							"contextPath": "/Travel/to_Booking"
						}
					}
				},
				"sample": {
					"type": "Component",
					"id": "Default",
					"name": "sap.fe.templates.ObjectPage",
					"viewLevel": 1,
					"options": {
						"settings": {
							"contextPath": "/Travel",
							"navigation": {
								"items": {
									"detail": {
										"route": "to_Booking"
									}
								}
							},
							"content": {
								"body": {
									"sections": {
										"flightMap": {
											"name": "sap.fe.core.fpmExplorer.customSection.CustomSectionFlightMap",
											"type": "XMLFragment",
											"title": "{i18n>FlightMap}",
											"position": {
												"placement": "After",
												"anchor": "BookingList"
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}
```

**STEP**: Custom Section Fragment

**DESCRIPTION**: Create a fragment that defines your custom section content. This example shows a flight map visualization using the VBM (Visual Business Map) control.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:vbm="sap.ui.vbm" height="100%" displayBlock="true">
	<vbm:AnalyticMap id="vbi" width="100%" height="600px">
		<vbm:vos>
			<vbm:Routes>
				<vbm:Route
					position="{FlightRoute}"
					color="rgb(117,148,34)"
					colorBorder="rgb(255,255,255)"
					linewidth="3"
					routetype="Geodesic"
				/>
			</vbm:Routes>
		</vbm:vos>
	</vbm:AnalyticMap>
</core:FragmentDefinition>
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: annotations.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});

```

**FILE**: localService.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {TravelService.Travel} from '../../../../../service/service';
using from '../../../../../service/annotations';

extend entity TravelService.Travel with {
  FlightRoute : String(1024);
  CityFrom    : String;
  CityTo      : String;
};

```

**FILE**: Travel.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"TravelID": "00000001",
		"BeginDate": "2023-08-04",
		"EndDate": "2023-08-04",
		"BookingFee": "20.00",
		"TotalPrice": "900.00",
		"CurrencyCode_code": "USD",
		"Description": "Business Trip for Christine, Pierre",
		"FlightRoute": "2.3522219;48.856614;0; -74.0059731;40.7143528;0",
		"CityFrom": "Paris",
		"CityTo": "New York",
		"TravelStatus_code": "A"
	},
	{
		"TravelUUID": "53657221A8E4645C17002DF03754AB66",
		"TravelID": "00000002",
		"BeginDate": "2023-08-04",
		"EndDate": "2024-06-02",
		"BookingFee": "80.00",
		"TotalPrice": "4164.00",
		"CurrencyCode_code": "USD",
		"Description": "Vacation",
		"FlightRoute": "2.3522219;48.856614;0; -74.0059731;40.7143528;0",
		"CityFrom": "Paris",
		"CityTo": "New York",
		"TravelStatus_code": "O"
	},
	{
		"TravelUUID": "54657221A8E4645C17002DF03754AB66",
		"TravelID": "00000003",
		"BeginDate": "2023-08-04",
		"EndDate": "2024-06-02",
		"BookingFee": "40.00",
		"TotalPrice": "1871.00",
		"CurrencyCode_code": "USD",
		"Description": "Vacation",
		"FlightRoute": "2.3522219;48.856614;0; -74.0059731;40.7143528;0",
		"CityFrom": "Paris",
		"CityTo": "New York",
		"TravelStatus_code": "X"
	}
]

```

--------------------------------

**TITLE**: Custom Subsection

**INTRODUCTION**: No introduction

**TAGS**: building block table, UI.CollectionFacet, UI.ReferenceFacet

**STEP**: SubSection Configuration in Manifest

**DESCRIPTION**: Define your custom subsections in the manifest.json file under the 'content.body.sections.[sectionName].subSections' configuration. Each subsection references a fragment that contains the custom content.

**LANGUAGE**: JSON

**CODE**:
```json
{
	"_version": "1.12.0",
	"sap.app": {
		"id": "sap.fe.core.fpmExplorer.customSubSection",
		"type": "application",
		"i18n": {
			"bundleName": "sap.fe.core.fpmExplorer.customSubSection.i18n.i18n",
			"supportedLocales": [""],
			"fallbackLocale": ""
		},
		"applicationVersion": {
			"version": "1.0.0"
		},
		"dataSources": {
			"mainService": {
				"uri": "/sap/fe/core/mock/customSubSection/",
				"type": "OData",
				"settings": {
					"annotations": [],
					"odataVersion": "4.0"
				}
			}
		}
	},
	"sap.ui5": {
		"dependencies": {
			"minUI5Version": "1.111.1",
			"libs": {
				"sap.ui.core": {},
				"sap.fe.templates": {},
				"sap.ui.vbm": {}
			}
		},
		"contentDensities": {
			"compact": true,
			"cozy": true
		},
		"models": {
			"i18n": {
				"type": "sap.ui.model.resource.ResourceModel",
				"settings": {
					"bundleName": "sap.fe.core.fpmExplorer.customSubSection.i18n.i18n"
				}
			},
			"@i18n": {
				"type": "sap.ui.model.resource.ResourceModel",
				"settings": {
					"bundleName": "sap.fe.core.fpmExplorer.customSubSection.i18n.i18n"
				}
			},
			"": {
				"dataSource": "mainService",
				"settings": {
					"operationMode": "Server",
					"autoExpandSelect": true,
					"earlyRequests": true
				}
			}
		},
		"rootView": {
			"viewName": "sap.fe.core.fpmExplorer.customSubSection.CustomSubSection"
		},
		"routing": {
			"config": {
				"controlId": "customSubSection"
			},
			"routes": [
				{
					"pattern": "/Travel({key}):?query:",
					"name": "default",
					"target": "sample"
				},
				{
					"pattern": "/Travel({key})/to_Booking({key2}):?query:",
					"name": "Booking",
					"target": "Booking"
				}
			],
			"targets": {
				"Booking": {
					"type": "Component",
					"id": "booking",
					"name": "sap.fe.templates.ObjectPage",
					"options": {
						"settings": {
							"contextPath": "/Travel/to_Booking"
						}
					}
				},
				"sample": {
					"type": "Component",
					"id": "Default",
					"name": "sap.fe.templates.ObjectPage",
					"viewLevel": 1,
					"options": {
						"settings": {
							"contextPath": "/Travel",
							"navigation": {
								"items": {
									"detail": {
										"route": "to_Booking"
									}
								}
							},
							"content": {
								"body": {
									"sections": {
										"TravelData": {
											"subSections": {
												"flightMap": {
													"name": "sap.fe.core.fpmExplorer.customSubSection.CustomSubSectionFlightMap",
													"type": "XMLFragment",
													"title": "{i18n>FlightMap}"
												}
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}
```

**STEP**: Subsection Title

**DESCRIPTION**: Define subsection titles using i18n keys to support multiple languages. The title property in the subsection configuration references the i18n bundle.

**LANGUAGE**: JSON

**CODE**:
```json
{
	"_version": "1.12.0",
	"sap.app": {
		"id": "sap.fe.core.fpmExplorer.customSubSection",
		"type": "application",
		"i18n": {
			"bundleName": "sap.fe.core.fpmExplorer.customSubSection.i18n.i18n",
			"supportedLocales": [""],
			"fallbackLocale": ""
		},
		"applicationVersion": {
			"version": "1.0.0"
		},
		"dataSources": {
			"mainService": {
				"uri": "/sap/fe/core/mock/customSubSection/",
				"type": "OData",
				"settings": {
					"annotations": [],
					"odataVersion": "4.0"
				}
			}
		}
	},
	"sap.ui5": {
		"dependencies": {
			"minUI5Version": "1.111.1",
			"libs": {
				"sap.ui.core": {},
				"sap.fe.templates": {},
				"sap.ui.vbm": {}
			}
		},
		"contentDensities": {
			"compact": true,
			"cozy": true
		},
		"models": {
			"i18n": {
				"type": "sap.ui.model.resource.ResourceModel",
				"settings": {
					"bundleName": "sap.fe.core.fpmExplorer.customSubSection.i18n.i18n"
				}
			},
			"@i18n": {
				"type": "sap.ui.model.resource.ResourceModel",
				"settings": {
					"bundleName": "sap.fe.core.fpmExplorer.customSubSection.i18n.i18n"
				}
			},
			"": {
				"dataSource": "mainService",
				"settings": {
					"operationMode": "Server",
					"autoExpandSelect": true,
					"earlyRequests": true
				}
			}
		},
		"rootView": {
			"viewName": "sap.fe.core.fpmExplorer.customSubSection.CustomSubSection"
		},
		"routing": {
			"config": {
				"controlId": "customSubSection"
			},
			"routes": [
				{
					"pattern": "/Travel({key}):?query:",
					"name": "default",
					"target": "sample"
				},
				{
					"pattern": "/Travel({key})/to_Booking({key2}):?query:",
					"name": "Booking",
					"target": "Booking"
				}
			],
			"targets": {
				"Booking": {
					"type": "Component",
					"id": "booking",
					"name": "sap.fe.templates.ObjectPage",
					"options": {
						"settings": {
							"contextPath": "/Travel/to_Booking"
						}
					}
				},
				"sample": {
					"type": "Component",
					"id": "Default",
					"name": "sap.fe.templates.ObjectPage",
					"viewLevel": 1,
					"options": {
						"settings": {
							"contextPath": "/Travel",
							"navigation": {
								"items": {
									"detail": {
										"route": "to_Booking"
									}
								}
							},
							"content": {
								"body": {
									"sections": {
										"TravelData": {
											"subSections": {
												"flightMap": {
													"name": "sap.fe.core.fpmExplorer.customSubSection.CustomSubSectionFlightMap",
													"type": "XMLFragment",
													"title": "{i18n>FlightMap}"
												}
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}
```

**STEP**: Fragment Type Configuration

**DESCRIPTION**: Specify the fragment type as 'XMLFragment' in the subsection configuration to ensure proper loading and rendering of your custom content.

**LANGUAGE**: JSON

**CODE**:
```json
{
	"_version": "1.12.0",
	"sap.app": {
		"id": "sap.fe.core.fpmExplorer.customSubSection",
		"type": "application",
		"i18n": {
			"bundleName": "sap.fe.core.fpmExplorer.customSubSection.i18n.i18n",
			"supportedLocales": [""],
			"fallbackLocale": ""
		},
		"applicationVersion": {
			"version": "1.0.0"
		},
		"dataSources": {
			"mainService": {
				"uri": "/sap/fe/core/mock/customSubSection/",
				"type": "OData",
				"settings": {
					"annotations": [],
					"odataVersion": "4.0"
				}
			}
		}
	},
	"sap.ui5": {
		"dependencies": {
			"minUI5Version": "1.111.1",
			"libs": {
				"sap.ui.core": {},
				"sap.fe.templates": {},
				"sap.ui.vbm": {}
			}
		},
		"contentDensities": {
			"compact": true,
			"cozy": true
		},
		"models": {
			"i18n": {
				"type": "sap.ui.model.resource.ResourceModel",
				"settings": {
					"bundleName": "sap.fe.core.fpmExplorer.customSubSection.i18n.i18n"
				}
			},
			"@i18n": {
				"type": "sap.ui.model.resource.ResourceModel",
				"settings": {
					"bundleName": "sap.fe.core.fpmExplorer.customSubSection.i18n.i18n"
				}
			},
			"": {
				"dataSource": "mainService",
				"settings": {
					"operationMode": "Server",
					"autoExpandSelect": true,
					"earlyRequests": true
				}
			}
		},
		"rootView": {
			"viewName": "sap.fe.core.fpmExplorer.customSubSection.CustomSubSection"
		},
		"routing": {
			"config": {
				"controlId": "customSubSection"
			},
			"routes": [
				{
					"pattern": "/Travel({key}):?query:",
					"name": "default",
					"target": "sample"
				},
				{
					"pattern": "/Travel({key})/to_Booking({key2}):?query:",
					"name": "Booking",
					"target": "Booking"
				}
			],
			"targets": {
				"Booking": {
					"type": "Component",
					"id": "booking",
					"name": "sap.fe.templates.ObjectPage",
					"options": {
						"settings": {
							"contextPath": "/Travel/to_Booking"
						}
					}
				},
				"sample": {
					"type": "Component",
					"id": "Default",
					"name": "sap.fe.templates.ObjectPage",
					"viewLevel": 1,
					"options": {
						"settings": {
							"contextPath": "/Travel",
							"navigation": {
								"items": {
									"detail": {
										"route": "to_Booking"
									}
								}
							},
							"content": {
								"body": {
									"sections": {
										"TravelData": {
											"subSections": {
												"flightMap": {
													"name": "sap.fe.core.fpmExplorer.customSubSection.CustomSubSectionFlightMap",
													"type": "XMLFragment",
													"title": "{i18n>FlightMap}"
												}
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}
```

**STEP**: Custom SubSection Fragment

**DESCRIPTION**: Create a fragment that defines your custom subsection content. This example shows a flight map visualization using the VBM (Visual Business Map) control within a subsection.

**LANGUAGE**: XML

**CODE**:
```xml
<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns="sap.m" xmlns:vbm="sap.ui.vbm" height="100%" displayBlock="true">
	<vbm:AnalyticMap id="vbi-subsection" width="100%" height="600px">
		<vbm:vos>
			<vbm:Routes>
				<vbm:Route
					position="{FlightRoute}"
					color="rgb(117,148,34)"
					colorBorder="rgb(255,255,255)"
					linewidth="3"
					routetype="Geodesic"
				/>
			</vbm:Routes>
		</vbm:vos>
	</vbm:AnalyticMap>
</core:FragmentDefinition>
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: annotations.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});

```

**FILE**: localService.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {TravelService.Travel} from '../../../../../service/service';
using from '../../../../../service/annotations';

extend entity TravelService.Travel with {
  FlightRoute : String(1024);
  CityFrom    : String;
  CityTo      : String;
};

```

**FILE**: Travel.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"TravelID": "00000001",
		"BeginDate": "2023-08-04",
		"EndDate": "2023-08-04",
		"BookingFee": "20.00",
		"TotalPrice": "900.00",
		"CurrencyCode_code": "USD",
		"Description": "Business Trip for Christine, Pierre",
		"FlightRoute": "2.3522219;48.856614;0; -74.0059731;40.7143528;0",
		"CityFrom": "Paris",
		"CityTo": "New York",
		"TravelStatus_code": "A"
	},
	{
		"TravelUUID": "53657221A8E4645C17002DF03754AB66",
		"TravelID": "00000002",
		"BeginDate": "2023-08-04",
		"EndDate": "2024-06-02",
		"BookingFee": "80.00",
		"TotalPrice": "4164.00",
		"CurrencyCode_code": "USD",
		"Description": "Vacation",
		"FlightRoute": "2.3522219;48.856614;0; -74.0059731;40.7143528;0",
		"CityFrom": "Paris",
		"CityTo": "New York",
		"TravelStatus_code": "O"
	},
	{
		"TravelUUID": "54657221A8E4645C17002DF03754AB66",
		"TravelID": "00000003",
		"BeginDate": "2023-08-04",
		"EndDate": "2024-06-02",
		"BookingFee": "40.00",
		"TotalPrice": "1871.00",
		"CurrencyCode_code": "USD",
		"Description": "Vacation",
		"FlightRoute": "2.3522219;48.856614;0; -74.0059731;40.7143528;0",
		"CityFrom": "Paris",
		"CityTo": "New York",
		"TravelStatus_code": "X"
	}
]

```

--------------------------------

**TITLE**: Show and Hide Details

**INTRODUCTION**: No introduction

**TAGS**: UI.PartOfPreview, show more, show details, show less

**STEP**: Show and Hide Fields

**DESCRIPTION**: You can show or hide fields inside reference facets by applying the @UI.PartOfPreview annotation. This renders the Show Details and Hide Details buttons.

**LANGUAGE**: CDS

**CODE**:
```cds
using {TravelService.Travel} from '../../../../../service/service';
using from '../../../../../service/annotations';

annotate TravelService.Travel with @(UI: {
  Facets                : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData'
    },
    {
      $Type               : 'UI.ReferenceFacet',
      ID                  : 'BookingList',
      Label               : 'Bookings',
      Target              : 'to_Booking/@UI.LineItem',
      ![@UI.PartOfPreview]: false
    }
  ],

  FieldGroup #TravelData: {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {
      Value               : BeginDate,
      ![@UI.PartOfPreview]: false
    },
    {
      Value               : EndDate,
      ![@UI.PartOfPreview]: false
    }
  ]}
});
```

**LANGUAGE**: XML

**CODE**:
```xml
<Annotation Term="UI.FieldGroup" Qualifier="TravelData">
	<Record Type="UI.FieldGroupType">
		<PropertyValue Property="Data">
			<Collection>
				<Record Type="UI.DataField">
					<PropertyValue Property="Value" Path="TravelID" />
				</Record>
				<Record Type="UI.DataField">
					<PropertyValue Property="Value" Path="to_Agency_AgencyID" />
				</Record>
				<Record Type="UI.DataField">
					<PropertyValue Property="Value" Path="BeginDate" />
					<Annotation Term="UI.PartOfPreview" Bool="false" />
				</Record>
				<Record Type="UI.DataField">
					<PropertyValue Property="Value" Path="EndDate" />
					<Annotation Term="UI.PartOfPreview" Bool="false" />
				</Record>
			</Collection>
		</PropertyValue>
	</Record>
</Annotation>
```

**STEP**: Show and Hide Facets

**DESCRIPTION**: You can show or hide Reference Facets by applying the @UI.PartOfPreview annotation on Facet level. This renders the Show More and Show Less buttons.

**LANGUAGE**: CDS

**CODE**:
```cds
using {TravelService.Travel} from '../../../../../service/service';
using from '../../../../../service/annotations';

annotate TravelService.Travel with @(UI: {
  Facets                : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData'
    },
    {
      $Type               : 'UI.ReferenceFacet',
      ID                  : 'BookingList',
      Label               : 'Bookings',
      Target              : 'to_Booking/@UI.LineItem',
      ![@UI.PartOfPreview]: false
    }
  ],

  FieldGroup #TravelData: {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {
      Value               : BeginDate,
      ![@UI.PartOfPreview]: false
    },
    {
      Value               : EndDate,
      ![@UI.PartOfPreview]: false
    }
  ]}
});
```

**LANGUAGE**: XML

**CODE**:
```xml
<Record Type="UI.ReferenceFacet">
	<PropertyValue Property="Label" String="Bookings" />
	<PropertyValue Property="ID" String="BookingList" />
	<PropertyValue Property="Target" AnnotationPath="to_Booking/@UI.LineItem" />
	<Annotation Term="UI.PartOfPreview" Bool="false" />
</Record>
```

**LANGUAGE**: ABAP

**CODE**:
```abap
@UI.Facet: [{
        type: #FIELDGROUP_REFERENCE,
        label: 'Bookings',
        targetQualifier: 'BookingList',
        isPartOfPreview: false
}]
```

--------------------------------

**TITLE**: Object Page

**INTRODUCTION**: No introduction

**TAGS**: object page, overview, detail view, entity, sections

**STEP**: Header Facet

**DESCRIPTION**: The object page consists of facets that display data. You can use the header facet and header info to show essential business object details that remain permanently visible on the UI.

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});
```

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="TravelService.Travel">
	...
	<Annotation Term="UI.HeaderFacets">
		<Collection>
			<Record Type="UI.ReferenceFacet">
				<PropertyValue Property="Target" AnnotationPath="@UI.FieldGroup#HeaderMain" />
			</Record>
		</Collection>
	</Annotation>

	<Annotation Term="UI.HeaderInfo">
		<Record Type="UI.HeaderInfoType">
			<PropertyValue Property="TypeName" String="Travel" />
			<PropertyValue Property="TypeNamePlural" String="Travels" />
			<PropertyValue Property="Title">
				<Record Type="UI.DataField">
					<PropertyValue Property="Value" Path="TravelID" />
				</Record>
			</PropertyValue>
			<PropertyValue Property="Description">
				<Record Type="UI.DataField">
					<PropertyValue Property="Value" Path="Description" />
				</Record>
			</PropertyValue>
			<PropertyValue Property="TypeImageUrl" String="sap-icon://header" />
		</Record>
	</Annotation>
</Annotations>
```

**STEP**: Facets

**DESCRIPTION**: Within Facets you can show the data collected in field groups. You can use facets to group and show related information on the UI.

**LANGUAGE**: CDS

**CODE**:
```cds
using TravelService as service from '../service/service';

annotate service.Travel {
  TravelStatus @Common.ValueListWithFixedValues
}

annotate service.Travel with @UI.LineItem: [
  {Value: TravelID},
  {Value: BeginDate},
  {Value: EndDate},
  {Value: to_Agency_AgencyID},
  {
    Value             : TravelStatus_code,
    Criticality       : TravelStatus.criticality,
    @UI.Importance    : #High,
    @HTML5.CssDefaults: {width: '10em'}
  },
  {Value: BookingFee},
  {Value: TotalPrice}
];

annotate service.Travel with @(UI: {SelectionFields: [
  TravelID,
  to_Agency_AgencyID,
  TravelStatus_code,
  BeginDate,
  EndDate
]});

annotate service.Travel with @Capabilities.FilterRestrictions.FilterExpressionRestrictions: [
  {
    Property          : 'BeginDate',
    AllowedExpressions: 'SingleRange'
  },
  {
    Property          : 'EndDate',
    AllowedExpressions: 'SingleRange'
  }
];

annotate service.Travel with @(UI: {
  FieldGroup #TravelData  : {Data: [
    {Value: TravelID},
    {Value: to_Agency_AgencyID},
    {Value: BeginDate},
    {Value: EndDate}
  ]},
  FieldGroup #ApprovalData: {Data: [
    {
      $Type      : 'UI.DataField',
      Value      : TravelStatus_code,
      Criticality: TravelStatus.criticality,
      Label      : 'Status'
    },
    {Value: BookingFee},
    {Value: TotalPrice},
    {Value: CurrencyCode_code}
  ]},
  FieldGroup #HeaderMain  : {Data: [
    {Value: BeginDate},
    {Value: EndDate},
    {Value: TotalPrice}
  ]},
  Facets                  : [
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'TravelData',
      Label : 'Travel Information',
      Target: '@UI.FieldGroup#TravelData',
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'ApprovalData',
      Label : 'Approval Data',
      Target: '@UI.FieldGroup#ApprovalData'
    },
    {
      $Type : 'UI.ReferenceFacet',
      ID    : 'BookingList',
      Label : 'Bookings',
      Target: 'to_Booking/@UI.LineItem'
    }
  ],
  HeaderFacets            : [{
    $Type : 'UI.ReferenceFacet',
    Target: '@UI.FieldGroup#HeaderMain'
  }],
  HeaderInfo              : {
    TypeName      : 'Travel',
    TypeNamePlural: 'Travels',
    Title         : {
      $Type: 'UI.DataField',
      Value: Description
    },
    Description   : {
      $Type: 'UI.DataField',
      Value: TravelID
    },
    TypeImageUrl  : 'sap-icon://header',
  }
});

annotate service.Travel {
  to_Agency @Common.ValueList: {
    CollectionPath: 'TravelAgency',
    Label         : '',
    Parameters    : [
      {
        $Type            : 'Common.ValueListParameterInOut',
        LocalDataProperty: to_Agency_AgencyID,
        ValueListProperty: 'AgencyID'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Name'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'Street'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PostalCode'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'City'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'CountryCode_code'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'PhoneNumber'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'EMailAddress'
      },
      {
        $Type            : 'Common.ValueListParameterDisplayOnly',
        ValueListProperty: 'WebAddress'
      }
    ]
  };
}

annotate service.TravelAgency with @(UI: {
  DataPoint #Recommendation: {
    Value        : Recommendation,
    TargetValue  : 100.0,
    Title        : 'Recommendation',
    Visualization: #Progress
  },
  DataPoint #Rating        : {
    Value        : Rating,
    TargetValue  : 5.0,
    Title        : 'Rating',
    Visualization: #Rating
  },
  FieldGroup #Contact      : {Data: [{
    $Type : 'UI.DataFieldForAnnotation',
    Target: '@Communication.Contact',
    Label : 'Travel Agency'
  }]}
});

annotate service.TravelAgency with @(
  Communication.Contact : {
    email: [{
      type   : #work,
      address: EMailAddress
    }],
    fn   : Name,
    adr  : [{
      type    : #work,
      code    : PostalCode,
      country : CountryCode_code,
      locality: City
    }]
  },
  Common.IsNaturalPerson: false
);

annotate service.Booking with @(UI: {
  HeaderInfo: {
    TypeName      : 'Booking',
    TypeNamePlural: 'Bookings',
    TypeImageUrl  : 'sap-icon://alert',
    Title         : {
      $Type: 'UI.DataField',
      Value: BookingID
    }
  },
  Facets    : [{
    $Type : 'UI.ReferenceFacet',
    ID    : 'FacetIdentifier1',
    Target: '@UI.FieldGroup'
  }],
  LineItem  : [
    {Value: BookingID},
    {Value: BookingDate},
    {Value: ConnectionID},
    {Value: FlightDate},
    {Value: FlightPrice},
    {Value: CurrencyCode_code}
  ],
  FieldGroup: {Data: [
    {
      $Type: 'UI.DataField',
      Value: BookingID
    },
    {
      $Type: 'UI.DataField',
      Value: BookingDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightDate
    },
    {
      $Type: 'UI.DataField',
      Value: FlightPrice
    }
  ]}
});

annotate service.TravelAgency with @(UI: {FieldGroup #Link: {Data: [{
  $Type: 'UI.DataFieldWithUrl',
  Value: Name,
  Url  : WebAddress
}]}});
```

**LANGUAGE**: XML

**CODE**:
```xml
<Annotations Target="TravelService.Travel">
	...
	<Annotation Term="UI.Facets">
		<Collection>
			<Record Type="UI.ReferenceFacet">
				<PropertyValue Property="ID" String="TravelData" />
				<PropertyValue Property="Label" String="Travel Information" />
				<PropertyValue Property="Target" AnnotationPath="@UI.FieldGroup#TravelData" />
			</Record>
			<Record Type="UI.ReferenceFacet">
				<PropertyValue Property="ID" String="ApprovalData" />
				<PropertyValue Property="Label" String="Approval Data" />
				<PropertyValue Property="Target" AnnotationPath="@UI.FieldGroup#ApprovalData" />
			</Record>
			<Record Type="UI.ReferenceFacet">
				<PropertyValue Property="ID" String="BookingList" />
				<PropertyValue Property="Label" String="Bookings" />
				<PropertyValue Property="Target" AnnotationPath="to_Booking/@UI.LineItem" />
			</Record>
		</Collection>
	</Annotation>
</Annotations>
```

**ADDITIONAL RELATED CODE BLOCKS**:

**FILE**: service.cds

**LANGUAGE**: CDS

**CODE**:
```cds
using {
  sap,
  managed,
  Currency,
  Country
} from '@sap/cds/common';

using from '../service/annotations';

@cds.autoexpose  @readonly
aspect MasterData {}

service TravelService {
  @odata.draft.enabled
  @Common.SemanticKey: [TravelID]

  entity Travel : managed {
    key TravelUUID    : UUID;

        @Common.Label          : 'ID'
        @Common.Text           : Description
        TravelID      : Integer default 0                       @readonly;

        @Common.Label          : 'Begin Date'
        BeginDate     : Date                                    @mandatory;

        @Common.Label          : 'End Date'
        EndDate       : Date                                    @mandatory;

        @Common.Label          : 'Booking Fee'
        BookingFee    : Decimal(10, 2) default 0                @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Total Price'
        TotalPrice    : Decimal(10, 2)                          @readonly  @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label          : 'Currency'
        CurrencyCode  : Currency default 'EUR'                  @mandatory;

        @Common.Label          : 'Description'
        Description   : String(1024);

        @Common.Label          : 'Travel Details'
        @UI.MultiLineText
        TravelDetails : String(1024);

        @title                 : 'Status'
        @Common.Text           : TravelStatus.name
        @Common.TextArrangement: #TextOnly
        TravelStatus  : Association to TravelStatus default 'O' @readonly;

        @title                 : 'Agency'
        @Common.Text           : to_Agency.Name
        @Common.TextArrangement: #TextFirst
        to_Agency     : Association to TravelAgency             @mandatory;

        to_Booking    : Composition of many Booking
                          on to_Booking.to_Travel = $self;
  };

  entity Booking : managed {
    key BookingUUID   : UUID;

        @Common.Label: 'Booking ID'
        BookingID     : Integer                                  @Core.Computed;

        @Common.Label: 'Booking Date'
        BookingDate   : Date;

        @Common.Label: 'Connection'
        ConnectionID  : String(4)                                @mandatory;

        @Common.Label: 'Flight Date'
        FlightDate    : Date                                     @mandatory;

        @Common.Label: 'Flight Price'
        FlightPrice   : Decimal(10, 2)                           @Measures.ISOCurrency: CurrencyCode_code;

        @Common.Label: 'Currency'
        CurrencyCode  : Currency default 'EUR'                   @mandatory;

        @Common.Label: 'Status'
        BookingStatus : Association to BookingStatus default 'N' @mandatory;
        to_Travel     : Association to Travel                    @mandatory;

        PaymentMethod : String(1) default 'B'                    @Common              : {
          Label                   : 'Payment Method',
          Text                    : _Payment.Method,
          TextArrangement         : #TextOnly,
          ValueListWithFixedValues: true,
          ValueList               : {
            Label         : 'Payment Method',
            CollectionPath: 'Payment',
            Parameters    : [{
              $Type            : 'Common.ValueListParameterInOut',
              LocalDataProperty: PaymentMethod,
              ValueListProperty: 'code'
            }]
          }
        };
        _Payment      : Association to one Payment
                          on _Payment.code = PaymentMethod;
  };

  entity Payment {
    key code   : String(1) @(Common: {
          Label          : 'Payment Code',
          Text           : Method,
          TextArrangement: #TextFirst
        });
        Method : String    @(
          Core.Immutable: true,
          Common.Label  : 'Payment Method'
        );
  }

  entity TravelStatus : sap.common.CodeList {
    key code        : String(1) @Common.Text: descr;
        name        : String(255);
        descr       : String(1000);
        criticality : Int16     @odata.Type : 'Edm.Byte' enum {
          Neutral  = 0;
          Negative = 1;
          Critical = 2;
          Positive = 3;
          NewItem  = 5
        };
  };

  entity BookingStatus : sap.common.CodeList {
    key code : BookingStatusCode
  };

  entity TravelAgency : MasterData {
    key AgencyID       : String(6);

        @Common.Label: 'Agency Name'
        Name           : String(80);
        Street         : String(60);
        PostalCode     : String(10);

        @Common.Label: 'City'
        City           : String(40);

        @Common.Label: 'Country Code'
        CountryCode    : Country;
        PhoneNumber    : String(30);
        EMailAddress   : String(256);
        WebAddress     : String(256);
        Rating         : Integer;
        Recommendation : Integer;
  };

  type TravelStatusCode  : String(1) enum {
    Open     = 'O';
    Accepted = 'A';
    Canceled = 'X';
  };

  type BookingStatusCode : String(1) enum {
    New      = 'N';
    Booked   = 'B';
    Canceled = 'X';
  };
}

```

**FILE**: Travel.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"TravelID": "00000001",
		"BeginDate": "2025-11-04",
		"EndDate": "2025-11-06",
		"BookingFee": "20.00",
		"TotalPrice": "900.00",
		"CurrencyCode_code": "USD",
		"Description": "Business Trip for Christine, Pierre",
		"TravelDetails": "This business trip includes a two-day customer workshop at the airport. The goal is the evaluation of the customer's use cases and the alignment on the roadmap for the upcoming year.",
		"TravelStatus_code": "A",
		"to_Agency_AgencyID": "070001"
	},
	{
		"TravelUUID": "53657221A8E4645C17002DF03754AB66",
		"TravelID": "00000002",
		"BeginDate": "2025-12-04",
		"EndDate": "2025-12-16",
		"BookingFee": "80.00",
		"TotalPrice": "3164.00",
		"CurrencyCode_code": "USD",
		"Description": "Lars Jensen site visit for system rollout support",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070002"
	},
	{
		"TravelUUID": "54657221A8E4645C17002DF03754AB66",
		"TravelID": "00000003",
		"BeginDate": "2025-08-04",
		"EndDate": "2025-08-08",
		"BookingFee": "40.00",
		"TotalPrice": "1871.00",
		"CurrencyCode_code": "USD",
		"Description": "John Smith customer workshop at Acme Corp headquarters",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "O",
		"to_Agency_AgencyID": "070003"
	},
	{
		"TravelUUID": "55657221A8E4645C17002DF03754AB66",
		"TravelID": "00000004",
		"BeginDate": "2025-09-04",
		"EndDate": "2025-09-05",
		"BookingFee": "40.00",
		"TotalPrice": "1240.00",
		"CurrencyCode_code": "USD",
		"Description": "Anna Müller onboarding with new project team in Berlin",
		"TravelDetails": "Will be provided soon...",
		"TravelStatus_code": "X",
		"to_Agency_AgencyID": "070003"
	}
]

```

**FILE**: Booking.json

**LANGUAGE**: JSON

**CODE**:
```json
[
	{
		"BookingUUID": "1A757221A8E4645C17002DF03754AB66",
		"to_Travel_TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"BookingID": "0001",
		"BookingDate": "2025-10-20",
		"ConnectionID": "1001",
		"FlightDate": "2025-11-04",
		"FlightPrice": "405.00",
		"CurrencyCode_code": "USD",
		"BookingStatus_code": "N",
		"PaymentMethod": "B"
	},
	{
		"BookingUUID": "1B757221A8E4645C17002DF03754AB66",
		"to_Travel_TravelUUID": "52657221A8E4645C17002DF03754AB66",
		"BookingID": "0002",
		"BookingDate": "2025-10-20",
		"ConnectionID": "1002",
		"FlightDate": "2025-11-06",
		"FlightPrice": "495.00",
		"CurrencyCode_code": "USD",
		"BookingStatus_code": "N",
		"PaymentMethod": "B"
	},
	{
		"BookingUUID": "2A757221A8E4645C17002DF03754AB66",
		"to_Travel_TravelUUID": "53657221A8E4645C17002DF03754AB66",
		"BookingID": "0001",
		"BookingDate": "2025-11-20",
		"ConnectionID": "2001",
		"FlightDate": "2025-12-04",
		"FlightPrice": "1492.08",
		"CurrencyCode_code": "USD",
		"BookingStatus_code": "N",
		"PaymentMethod": "B"
	},
	{
		"BookingUUID": "2B757221A8E4645C17002DF03754AB66",
		"to_Travel_TravelUUID": "53657221A8E4645C17002DF03754AB66",
		"BookingID": "0002",
		"BookingDate": "2025-11-20",
		"ConnectionID": "2002",
		"FlightDate": "2025-12-16",
		"FlightPrice": "1671.92",
		"CurrencyCode_code": "USD",
		"BookingStatus_code": "N",
		"PaymentMethod": "B"
	},
	{
		"BookingUUID": "3A757221A8E4645C17002DF03754AB66",
		"to_Travel_TravelUUID": "54657221A8E4645C17002DF03754AB66",
		"BookingID": "0001",
		"BookingDate": "2025-07-20",
		"ConnectionID": "3001",
		"FlightDate": "2025-08-04",
		"FlightPrice": "785.82",
		"CurrencyCode_code": "USD",
		"BookingStatus_code": "N",
		"PaymentMethod": "B"
	},
	{
		"BookingUUID": "3B757221A8E4645C17002DF03754AB66",
		"to_Travel_TravelUUID": "54657221A8E4645C17002DF03754AB66",
		"BookingID": "0002",
		"BookingDate": "2025-07-20",
		"ConnectionID": "3002",
		"FlightDate": "2025-08-08",
		"FlightPrice": "1085.18",
		"CurrencyCode_code": "USD",
		"BookingStatus_code": "N",
		"PaymentMethod": "B"
	},
	{
		"BookingUUID": "4A757221A8E4645C17002DF03754AB66",
		"to_Travel_TravelUUID": "55657221A8E4645C17002DF03754AB66",
		"BookingID": "0001",
		"BookingDate": "2025-08-20",
		"ConnectionID": "4001",
		"FlightDate": "2025-09-04",
		"FlightPrice": "632.40",
		"CurrencyCode_code": "USD",
		"BookingStatus_code": "N",
		"PaymentMethod": "B"
	},
	{
		"BookingUUID": "4B757221A8E4645C17002DF03754AB66",
		"to_Travel_TravelUUID": "55657221A8E4645C17002DF03754AB66",
		"BookingID": "0002",
		"BookingDate": "2025-08-20",
		"ConnectionID": "4002",
		"FlightDate": "2025-09-05",
		"FlightPrice": "607.60",
		"CurrencyCode_code": "USD",
		"BookingStatus_code": "N",
		"PaymentMethod": "B"
	}
]

```

--------------------------------

**TITLE**: Overview Page

**INTRODUCTION**: Overview pages provide quick access to vital business information through visual, actionable cards that display key data at a glance. The user-friendly interface makes viewing, filtering, and acting upon data both quick and intuitive. Business users can instantly grasp the big picture while simultaneously focusing on critical tasks, enabling faster decision-making and immediate action.

**TAGS**: overview page, overview, dashboard, cards, summary

**STEP**: Defining Overview Cards

**DESCRIPTION**: The cards shown on the overview page are defined in your application's manifest.json file. You can choose from a variety of card types, such as list cards, analytical cards, and custom cards, to best represent your data.

**LANGUAGE**: JSON

**CODE**:
```json
{
	"_version": "1.12.0",
	"sap.app": {
		"id": "sap.fe.core.fpmExplorer.overviewPage",
		"type": "application",
		"i18n": {
			"bundleUrl": "i18n/i18n.properties",
			"supportedLocales": [""],
			"fallbackLocale": ""
		},
		"applicationVersion": {
			"version": "1.0.0"
		},
		"dataSources": {
			"mainService": {
				"uri": "/sap/fe/core/mock/overviewPage/",
				"type": "OData",
				"settings": {
					"annotations": [],
					"odataVersion": "4.0"
				}
			}
		}
	},
	"sap.ovp": {
		"globalFilterModel": "mainModel",
		"globalFilterEntityType": "Travel",
		"containerLayout": "resizable",
		"enableLiveFilter": true,
		"considerAnalyticalParameters": false,
		"cards": {
			"card_open_travels": {
				"model": "mainModel",
				"template": "sap.ovp.cards.v4.list",
				"settings": {
					"title": "{{LIST_CARD_METADATA_ANNOTATIONS}}",
					"subTitle": "{{COMMON_LIST_CARD_SUBTITLE_V4}}",
					"entitySet": "Travel",
					"annotationPath": "com.sap.vocabularies.UI.v1.LineItem"
				}
			}
		},
		"globalFilterControlType": "MacroFilterBar",
		"useDateRangeType": true,
		"chartSettings": {}
	},
	"sap.ui5": {
		"flexEnabled": true,
		"dependencies": {
			"minUI5Version": "1.111.1",
			"libs": {
				"sap.m": {
					"lazy": false
				},
				"sap.ui.core": {
					"lazy": false
				},
				"sap.fe.templates": {
					"lazy": false
				},
				"sap.ovp": {
					"lazy": false
				},
				"sap.ui.rta": {
					"lazy": false
				},
				"sap.ui.layout": {
					"lazy": false
				}
			}
		},
		"extends": {
			"component": "sap.ovp.app",
			"minVersion": "1.32.0",
			"extensions": {}
		},
		"contentDensities": {
			"compact": true,
			"cozy": true
		},
		"models": {
			"mainModel": {
				"dataSource": "mainService",
				"preload": true,
				"settings": {
					"operationMode": "Server",
					"autoExpandSelect": true,
					"earlyRequests": true
				}
			}
		},
		"rootView": {
			"viewName": "sap.fe.core.fpmExplorer.overviewPage.OverviewPage"
		},
		"resources": {
			"css": []
		},
		"routing": {
			"config": {
				"controlId": "overviewPage"
			},
			"routes": [],
			"targets": {}
		}
	}
}
```

--------------------------------
