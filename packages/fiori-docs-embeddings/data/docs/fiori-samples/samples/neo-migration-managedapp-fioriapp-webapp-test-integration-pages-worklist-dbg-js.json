{
  "id": "fiori-samples-neo-migration-managedapp-fioriapp-webapp-test-integration-pages-worklist-dbg-js",
  "title": "Worklist dbg",
  "category": "samples",
  "path": "neo-migration/managedapp/fioriapp/webapp/test/integration/pages/Worklist-dbg.js",
  "lastModified": "2025-09-01T18:17:10.811Z",
  "tags": [
    "samples",
    "js",
    "Worklist",
    "dbg"
  ],
  "headers": [
    "allItemsInTheListContainTheSearchTerm",
    "createWaitForItemAtPosition"
  ],
  "content": "# Worklist dbg.md\n\n```javascript\n# Worklist dbg.md\n\n```javascript\n# Worklist dbg.md\n\n```javascript\n# Worklist dbg.md\n\n```javascript\n# Worklist dbg.md\n\n```javascript\n# Worklist dbg.md\n\n```javascript\n# Worklist dbg.md\n\n```javascript\n# Worklist dbg.md\n\n```javascript\n# Worklist-dbg.js\n\n```javascript\nsap.ui.define([\n\t\"sap/ui/test/Opa5\",\n\t\"sap/ui/test/actions/Press\",\n\t\"sap/ui/test/actions/EnterText\",\n\t\"sap/ui/test/matchers/AggregationLengthEquals\",\n\t\"sap/ui/test/matchers/AggregationFilled\",\n\t\"sap/ui/test/matchers/PropertyStrictEquals\",\n\t\"./Common\",\n\t\"./shareOptions\"\n], function(\n\tOpa5,\n\tPress,\n\tEnterText,\n\tAggregationLengthEquals,\n\tAggregationFilled,\n\tPropertyStrictEquals,\n\tCommon,\n\tshareOptions) {\n\t\"use strict\";\n\n\tvar sViewName = \"Worklist\",\n\t\tsTableId = \"table\",\n\t\tsSearchFieldId = \"searchField\",\n\t\tsSomethingThatCannotBeFound = \"*#-Q@@||\";\n\n\tfunction allItemsInTheListContainTheSearchTerm (aControls) {\n\t\tvar oTable = aControls[0],\n\t\t\toSearchField = aControls[1],\n\t\t\taItems = oTable.getItems();\n\n\t\t// table needs items\n\t\tif (aItems.length === 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn aItems.every(function (oItem) {\n\t\t\treturn oItem.getCells()[0].getTitle().indexOf(oSearchField.getValue()) !== -1;\n\t\t});\n\t}\n\n\tfunction createWaitForItemAtPosition (oOptions) {\n\t\tvar iPosition = oOptions.position;\n\t\treturn {\n\t\t\tid : sTableId,\n\t\t\tviewName : sViewName,\n\t\t\tmatchers : function (oTable) {\n\t\t\t\treturn oTable.getItems()[iPosition];\n\t\t\t},\n\t\t\tactions : oOptions.actions,\n\t\t\tsuccess : oOptions.success,\n\t\t\terrorMessage : \"Table in view '\" + sViewName + \"' does not contain an Item at position '\" + iPosition + \"'\"\n\t\t};\n\t}\n\n\tOpa5.createPageObjects({\n\n\t\tonTheWorklistPage : {\n\t\t\tbaseClass : Common,\n\t\t\tactions : Object.assign({\n\t\t\t\tiPressATableItemAtPosition : function (iPosition) {\n\t\t\t\t\treturn this.waitFor(createWaitForItemAtPosition({\n\t\t\t\t\t\tposition : iPosition,\n\t\t\t\t\t\tactions : new Press()\n\t\t\t\t\t}));\n\t\t\t\t},\n\n\t\t\t\tiRememberTheItemAtPosition : function (iPosition){\n\t\t\t\t\treturn this.waitFor(createWaitForItemAtPosition({\n\t\t\t\t\t\tposition : iPosition,\n\t\t\t\t\t\tsuccess : function (oTableItem) {\n\t\t\t\t\t\t\tvar oBindingContext = oTableItem.getBindingContext();\n\n\t\t\t\t\t\t\t// Don't remember objects just strings since IE will not allow accessing objects of destroyed frames\n\t\t\t\t\t\t\tthis.getContext().currentItem = {\n\t\t\t\t\t\t\t\tbindingPath: oBindingContext.getPath(),\n\t\t\t\t\t\t\t\tid: oBindingContext.getProperty(\"ProductID\"),\n\t\t\t\t\t\t\t\tname: oBindingContext.getProperty(\"ProductName\")\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t\t\t\t},\n\n\t\t\t\tiPressOnMoreData : function (){\n\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\tid : sTableId,\n\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\tmatchers : function (oTable) {\n\t\t\t\t\t\t\treturn !!oTable.$(\"trigger\").length;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tactions : new Press(),\n\t\t\t\t\t\terrorMessage : \"The Table does not have a trigger\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tiSearchForTheFirstObject: function() {\n\t\t\t\t\tvar sFirstObjectTitle;\n\n\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\tid: sTableId,\n\t\t\t\t\t\tviewName: sViewName,\n\t\t\t\t\t\tmatchers: new AggregationFilled({\n\t\t\t\t\t\t\tname: \"items\"\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tsuccess: function(oTable) {\n\t\t\t\t\t\t\tsFirstObjectTitle = oTable.getItems()[0].getCells()[0].getTitle();\n\n\t\t\t\t\t\t\tthis.iSearchForValue(sFirstObjectTitle);\n\n\t\t\t\t\t\t\tthis.waitFor({\n\t\t\t\t\t\t\t\tid: [sTableId, sSearchFieldId],\n\t\t\t\t\t\t\t\tviewName: sViewName,\n\t\t\t\t\t\t\t\tcheck : allItemsInTheListContainTheSearchTerm,\n\t\t\t\t\t\t\t\terrorMessage: \"Did not find any table entries or too many while trying to search for the first object.\"\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t\terrorMessage: \"Did not find table entries while trying to search for the first object.\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tiSearchForValueWithActions : function (aActions) {\n\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\tid : sSearchFieldId,\n\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\tactions: aActions,\n\t\t\t\t\t\terrorMessage : \"Failed to find search field in Worklist view.'\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tiSearchForValue : function (sSearchString) {\n\t\t\t\t\treturn this.iSearchForValueWithActions([new EnterText({text : sSearchString}), new Press()]);\n\t\t\t\t},\n\n\t\t\t\tiTypeSomethingInTheSearchThatCannotBeFoundAndTriggerRefresh : function () {\n\t\t\t\t\tvar fnEnterTextAndFireRefreshButtonPressedOnSearchField = function (oSearchField) {\n\t\t\t\t\t\t// set the search field value directly as EnterText action triggers a search event\n\t\t\t\t\t\toSearchField.setValue(sSomethingThatCannotBeFound);\n\n\t\t\t\t\t\t// fire the search to simulate a refresh button press\n\t\t\t\t\t\toSearchField.fireSearch({refreshButtonPressed: true});\n\t\t\t\t\t};\n\t\t\t\t\treturn this.iSearchForValueWithActions(fnEnterTextAndFireRefreshButtonPressedOnSearchField);\n\t\t\t\t},\n\n\t\t\t\tiClearTheSearch : function () {\n\t\t\t\t\treturn this.iSearchForValueWithActions([new EnterText({text: \"\"}), new Press()]);\n\t\t\t\t},\n\n\t\t\t\tiSearchForSomethingWithNoResults : function () {\n\t\t\t\t\treturn this.iSearchForValueWithActions([new EnterText({text: sSomethingThatCannotBeFound}), new Press()]);\n\t\t\t\t}\n\n\t\t\t}, shareOptions.createActions(sViewName)),\n\n\t\t\tassertions: Object.assign({\n\n\t\t\t\tiShouldSeeTheTable : function () {\n\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\tid : sTableId,\n\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\tsuccess : function (oTable) {\n\t\t\t\t\t\t\tOpa5.assert.ok(oTable, \"Found the object Table\");\n\t\t\t\t\t\t},\n\t\t\t\t\t\terrorMessage : \"Can't see the master Table.\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\ttheTableShowsOnlyObjectsWithTheSearchStringInTheirTitle : function () {\n\t\t\t\t\tthis.waitFor({\n\t\t\t\t\t\tid : [sTableId, sSearchFieldId],\n\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\tcheck:  allItemsInTheListContainTheSearchTerm,\n\t\t\t\t\t\tsuccess : function () {\n\t\t\t\t\t\t\tOpa5.assert.ok(true, \"Every item did contain the title\");\n\t\t\t\t\t\t},\n\t\t\t\t\t\terrorMessage : \"The table did not have items\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\ttheTableHasEntries : function () {\n\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\tid : sTableId,\n\t\t\t\t\t\tmatchers : new AggregationFilled({\n\t\t\t\t\t\t\tname : \"items\"\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tsuccess : function () {\n\t\t\t\t\t\t\tOpa5.assert.ok(true, \"The table has entries\");\n\t\t\t\t\t\t},\n\t\t\t\t\t\terrorMessage : \"The table had no entries\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\ttheTableShouldHaveAllEntries : function () {\n\t\t\t\t\tvar aAllEntities,\n\t\t\t\t\t\tiExpectedNumberOfItems;\n\n\t\t\t\t\t// retrieve all Objects to be able to check for the total amount\n\t\t\t\t\tthis.waitFor(this.createAWaitForAnEntitySet({\n\t\t\t\t\t\tentitySet: \"Products\",\n\t\t\t\t\t\tsuccess: function (aEntityData) {\n\t\t\t\t\t\t\taAllEntities = aEntityData;\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\n\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\tid : sTableId,\n\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\tmatchers : function (oTable) {\n\t\t\t\t\t\t\t// If there are less items in the list than the growingThreshold, only check for this number.\n\t\t\t\t\t\t\tiExpectedNumberOfItems = Math.min(oTable.getGrowingThreshold(), aAllEntities.length);\n\t\t\t\t\t\t\treturn new AggregationLengthEquals({name : \"items\", length : iExpectedNumberOfItems}).isMatching(oTable);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsuccess : function (oTable) {\n\t\t\t\t\t\t\tOpa5.assert.strictEqual(oTable.getItems().length, iExpectedNumberOfItems, \"The growing Table has \" + iExpectedNumberOfItems + \" items\");\n\t\t\t\t\t\t},\n\t\t\t\t\t\terrorMessage : \"Table does not have all entries.\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\ttheTitleShouldDisplayTheTotalAmountOfItems : function () {\n\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\tid : sTableId,\n\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\tmatchers : new AggregationFilled({name : \"items\"}),\n\t\t\t\t\t\tsuccess : function (oTable) {\n\t\t\t\t\t\t\tvar iObjectCount = oTable.getBinding(\"items\").getLength();\n\t\t\t\t\t\t\tthis.waitFor({\n\t\t\t\t\t\t\t\tid : \"tableHeader\",\n\t\t\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\t\t\tmatchers : function (oPage) {\n\t\t\t\t\t\t\t\t\tvar sExpectedText = oPage.getModel(\"i18n\").getResourceBundle().getText(\"worklistTableTitleCount\", [iObjectCount]);\n\t\t\t\t\t\t\t\t\treturn new PropertyStrictEquals({name : \"text\", value: sExpectedText}).isMatching(oPage);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tsuccess : function () {\n\t\t\t\t\t\t\t\t\tOpa5.assert.ok(true, \"The Page has a title containing the number \" + iObjectCount);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\terrorMessage : \"The Page's header does not container the number of items \" + iObjectCount\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t\terrorMessage : \"The table has no items.\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\ttheTableShouldHaveTheDoubleAmountOfInitialEntries : function () {\n\t\t\t\t\tvar iExpectedNumberOfItems;\n\n\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\tid : sTableId,\n\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\tmatchers : function (oTable) {\n\t\t\t\t\t\t\tiExpectedNumberOfItems = oTable.getGrowingThreshold() * 2;\n\t\t\t\t\t\t\treturn new AggregationLengthEquals({name : \"items\", length : iExpectedNumberOfItems}).isMatching(oTable);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsuccess : function () {\n\t\t\t\t\t\t\tOpa5.assert.ok(true, \"The growing Table had the double amount: \" + iExpectedNumberOfItems + \" of entries\");\n\t\t\t\t\t\t},\n\t\t\t\t\t\terrorMessage : \"Table does not have the double amount of entries.\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\ttheTableShouldContainOnlyFormattedUnitNumbers : function () {\n\t\t\t\t\treturn this.theUnitNumbersShouldHaveTwoDecimals(\"sap.m.ObjectNumber\",\n\t\t\t\t\t\tsViewName,\n\t\t\t\t\t\t\"Object numbers are properly formatted\",\n\t\t\t\t\t\t\"Table has no entries which can be checked for their formatting\");\n\t\t\t\t},\n\n\t\t\t\tiShouldSeeTheNoDataTextForNoSearchResults : function () {\n\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\tid : sTableId,\n\t\t\t\t\t\tviewName : sViewName,\n\t\t\t\t\t\tsuccess : function (oTable) {\n\t\t\t\t\t\t\tOpa5.assert.strictEqual(\n\t\t\t\t\t\t\t\toTable.getNoDataText(),\n\t\t\t\t\t\t\t\toTable.getModel(\"i18n\").getProperty(\"worklistNoDataWithSearchText\"),\n\t\t\t\t\t\t\t\t\"the table should show the no data text for search\");\n\t\t\t\t\t\t},\n\t\t\t\t\t\terrorMessage : \"table does not show the no data text for search\"\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}, shareOptions.createAssertions(sViewName))\n\n\t\t}\n\n\t});\n\n});\n```\n```\n```\n```\n```\n```\n```\n```\n```",
  "excerpt": "Worklist dbg.md javascript Worklist dbg.md javascript Worklist dbg.md javascript Worklist dbg.md javascript Worklist-dbg.js",
  "wordCount": 913,
  "version": "1.0.0",
  "source": "fiori-samples",
  "sourceType": "github"
}