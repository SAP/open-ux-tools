{
  "id": "fiori-samples-neo-migration-managedapp-fioriapp-webapp-controller-worklist-controller-js",
  "title": "Worklist.controller",
  "category": "fiori-samples",
  "path": "neo-migration/managedapp/fioriapp/webapp/controller/Worklist.controller.js",
  "lastModified": "2025-09-29T10:06:39.530Z",
  "tags": [
    "fiori-samples",
    "js",
    "Worklist",
    "controller"
  ],
  "headers": [],
  "content": "# Worklist.controller.js\n\n```javascript\nsap.ui.define([\"./BaseController\",\"sap/ui/model/json/JSONModel\",\"../model/formatter\",\"sap/ui/model/Filter\",\"sap/ui/model/FilterOperator\",\"sap/m/MessageToast\",\"sap/m/MessageBox\"],function(e,t,s,o,i,n,r){\"use strict\";return e.extend(\"ns.manageproductsneo.controller.Worklist\",{formatter:s,onInit:function(){var e,s,n=this.byId(\"table\");s=n.getBusyIndicatorDelay();this._oTable=n;this._aTableSearchState=[];e=new t({worklistTableTitle:this.getResourceBundle().getText(\"worklistTableTitle\"),shareOnJamTitle:this.getResourceBundle().getText(\"worklistTitle\"),shareSendEmailSubject:this.getResourceBundle().getText(\"shareSendEmailWorklistSubject\"),shareSendEmailMessage:this.getResourceBundle().getText(\"shareSendEmailWorklistMessage\",[location.href]),tableNoDataText:this.getResourceBundle().getText(\"tableNoDataText\"),tableBusyDelay:0,inStock:0,shortage:0,outOfStock:0,countAll:0});this.setModel(e,\"worklistView\");this._mFilters={inStock:[new o(\"UnitsInStock\",i.GT,10)],outOfStock:[new o(\"UnitsInStock\",i.LE,0)],shortage:[new o(\"UnitsInStock\",i.BT,1,10)],all:[]};n.attachEventOnce(\"updateFinished\",function(){e.setProperty(\"/tableBusyDelay\",s)})},onUpdateFinished:function(e){var t,s=e.getSource(),o=this.getModel(\"worklistView\"),i=e.getParameter(\"total\");if(i&&s.getBinding(\"items\").isLengthFinal()){t=this.getResourceBundle().getText(\"worklistTableTitleCount\",[i]);this.getModel().read(\"/Products/$count\",{success:function(e){o.setProperty(\"/countAll\",e)}});this.getModel().read(\"/Products/$count\",{success:function(e){o.setProperty(\"/inStock\",e)},filters:this._mFilters.inStock});this.getModel().read(\"/Products/$count\",{success:function(e){o.setProperty(\"/outOfStock\",e)},filters:this._mFilters.outOfStock});this.getModel().read(\"/Products/$count\",{success:function(e){o.setProperty(\"/shortage\",e)},filters:this._mFilters.shortage})}else{t=this.getResourceBundle().getText(\"worklistTableTitle\")}this.getModel(\"worklistView\").setProperty(\"/worklistTableTitle\",t)},onPress:function(e){this._showObject(e.getSource())},onNavBack:function(){history.go(-1)},onSearch:function(e){if(e.getParameters().refreshButtonPressed){this.onRefresh()}else{var t=[];var s=e.getParameter(\"query\");if(s&&s.length>0){t=[new o(\"ProductName\",i.Contains,s)]}this._applySearch(t)}},onRefresh:function(){var e=this.byId(\"table\");e.getBinding(\"items\").refresh()},_showObject:function(e){this.getRouter().navTo(\"object\",{objectId:e.getBindingContext().getProperty(\"ProductID\")})},_applySearch:function(e){var t=this.byId(\"table\"),s=this.getModel(\"worklistView\");t.getBinding(\"items\").filter(e,\"Application\");if(e.length!==0){s.setProperty(\"/tableNoDataText\",this.getResourceBundle().getText(\"worklistNoDataWithSearchText\"))}},_showErrorMessage:function(e){r.error(e,{styleClass:this.getOwnerComponent().getContentDensityClass()})},onQuickFilter:function(e){var t=this._oTable.getBinding(\"items\"),s=e.getParameter(\"selectedKey\");t.filter(this._mFilters[s])},_handleUnlistActionResult:function(e,t,s,o){if(s===o){n.show(this.getModel(\"i18n\").getResourceBundle().getText(\"StockRemovedSuccessMsg\",[o]))}},_handleReorderActionResult:function(e,t,s,o){if(s===o){n.show(this.getModel(\"i18n\").getResourceBundle().getText(\"StockUpdatedSuccessMsg\",[o]))}},onUnlistObjects:function(){var e,t,s,o,i;e=this.byId(\"table\").getSelectedItems();if(e.length){for(t=0;t<e.length;t++){o=e[t];i=o.getBindingContext().getProperty(\"ProductID\");s=o.getBindingContext().getPath();this.getModel().remove(s,{success:this._handleUnlistActionResult.bind(this,i,true,t+1,e.length),error:this._handleUnlistActionResult.bind(this,i,false,t+1,e.length)})}}else{this._showErrorMessage(this.getModel(\"i18n\").getResourceBundle().getText(\"TableSelectProduct\"))}},onUpdateStockObjects:function(){var e,t,s,o;e=this.byId(\"table\").getSelectedItems();if(e.length){for(t=0;t<e.length;t++){s=e[t].getBindingContext().getPath();o=e[t].getBindingContext().getObject();o.UnitsInStock+=10;this.getModel().update(s,o,{success:this._handleReorderActionResult.bind(this,o.ProductID,true,t+1,e.length),error:this._handleReorderActionResult.bind(this,o.ProductID,false,t+1,e.length)})}}else{this._showErrorMessage(this.getModel(\"i18n\").getResourceBundle().getText(\"TableSelectProduct\"))}}})});\n```",
  "excerpt": "Worklist.controller.js",
  "wordCount": 21,
  "version": "1.0.0",
  "source": "fiori-samples",
  "sourceType": "github"
}