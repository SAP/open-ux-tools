{
  "id": "fiori-samples-app-with-tutorials-cap-fiori-elements-incident-management-app-annotations-cds",
  "title": "annotations",
  "category": "fiori-samples",
  "path": "app-with-tutorials/cap/fiori-elements-incident-management/app/annotations.cds",
  "lastModified": "2025-09-29T10:06:39.453Z",
  "tags": [
    "fiori-samples",
    "cds",
    "annotations"
  ],
  "headers": [],
  "content": "# annotations.cds\n\n```cds\nusing IncidentService as service from '../srv/incidentservice';\nusing from '../srv/common';\n\nannotate service.Incidents with @(UI : {\n    //basic list report annotations\n    //the presentation variant defines a per default ascending sorting for the LR table\n    //https://github.com/SAP/odata-vocabularies/blob/master/vocabularies/Common.md#SortOrderType\n    // PresentationVariant : {\n    //     SortOrder      : [{\n    //         $Type    : 'Common.SortOrderType',\n    //         Property : priority_code\n    //     }],\n    //     Visualizations : ['@UI.LineItem']\n    // },\n    //the lineItem annotation defines the table columns for UI display of the annotated entity\n    //https://github.com/SAP/odata-vocabularies/blob/master/vocabularies/UI.md#LineItem\n    //Table columns are defined by building blocks of type DataFieldAbstract\n    //https://github.com/SAP/odata-vocabularies/blob/master/vocabularies/UI.md#DataFieldAbstract\n    LineItem : [\n        {\n            $Type : 'UI.DataField',\n            Value : identifier\n        },\n        {\n            $Type                     : 'UI.DataField',\n            Value                     : priority_code,\n            Criticality               : priority.criticality,\n            CriticalityRepresentation : #WithoutIcon\n        },\n        {\n            $Type : 'UI.DataField',\n            Value : incidentStatus_code\n        },\n        {\n            $Type : 'UI.DataField',\n            Value : category_code\n        },\n        //insert your line item enhancement here\n        {\n        $Type : 'UI.DataField',\n        Value : title\n        }\n    ],\n\n    //the managed associations incidentStatus, category and priority provide a denormalized _code property to the root entity SafetIncidents\n    //Documentation managed associations: https://cap.cloud.sap/docs/guides/domain-models#use-managed-associations\n    //usage of aspect sap.common.codelist for the associated entities automatically provides value help support for the selection fields\n    //the entity definitions can be found in file db/schema.cds\n    //Documentation codelists: https://cap.cloud.sap/docs/cds/common#aspect-sapcommoncodelist\n        \n    SelectionFields : [\n        incidentStatus_code,\n        priority_code,\n        //insert your selection fields enhancement here\n        category_code\n    ],\n\n    //\tInformation for the header area of an entity representation\n    HeaderInfo : {\n        TypeName       : '{i18n>Incident}',\n        TypeNamePlural : '{i18n>Incidents}',\n        TypeImageUrl   : 'sap-icon://alert',\n        Title          : {Value : title},\n        Description    : {Value : ID}\n    },\n\n    //Facets for additional object header information (shown in the object page header)\n    HeaderFacets                         : [{\n        $Type  : 'UI.ReferenceFacet',\n        Target : '@UI.FieldGroup#HeaderGeneralInformation'\n    }],\n\n    //Group of fields with an optional label\n    //https://github.com/SAP/odata-vocabularies/blob/master/vocabularies/UI.md#FieldGroupType\n    FieldGroup #HeaderGeneralInformation : {\n        $Type : 'UI.FieldGroupType',\n        Data : [\n            {\n                Value : priority_code\n            },\n            {\n                Value : incidentStatus_code\n            },\n            {\n                Value : category_code\n            },\n            {\n                $Type  : 'UI.DataFieldForAnnotation',\n                Target : 'assignedIndividual/@Communication.Contact',\n                Label  : '{i18n>AssignedContact}'\n            }\n        ]\n    },\n\n    FieldGroup #IncidentDetails : {\n        $Type : 'UI.FieldGroupType',\n        Data : [\n            {\n                $Type : 'UI.DataField',\n                Value : identifier\n            },\n            {\n                $Type : 'UI.DataField',\n                Value : title\n            },\n            //insert your field group enhancement here \n            {\n            $Type : 'UI.DataField',\n            Value : description\n            }\n       ]\n    },\n\n    //insert your new field group here\nFieldGroup #GeneralInformation : {\n    $Type : 'UI.FieldGroupType',\n    Data : [\n        {\n            $Type : 'UI.DataField',\n            Value : priority_code,\n        },\n        {\n            $Type : 'UI.DataField',\n            Value : category_code,\n        },\n        {\n            $Type : 'UI.DataField',\n            Value : incidentStatus_code,\n        },\n    ],\n},\n\n    //object page content area is organized by facets referring to e.g. fieldgroup and lineItem annotations\n    //https://github.com/SAP/odata-vocabularies/blob/master/vocabularies/UI.md#Facet    \n    Facets : [\n        {\n            $Type  : 'UI.CollectionFacet',\n            Label  : '{i18n>IncidentOverview}',\n            ID     : 'IncidentOverviewFacet',\n            Facets : [\n                {\n                    $Type  : 'UI.ReferenceFacet',\n                    Label  : '{i18n>IncidentDetails}',\n                    ID     : 'IncidentDetailsFacet',\n                    Target : '@UI.FieldGroup#IncidentDetails'\n                },\n                //insert your reference facet enhancement here\n                {\n                    $Type : 'UI.ReferenceFacet',\n                    Target : '@UI.FieldGroup#GeneralInformation',\n                    Label : '{i18n>GeneralInformation}',\n                    ID : 'GeneralInformationFacet',\n                }, \n            ]\n        },\n        //this facet shows a table on the object page by referring to a lineItem annotation via association incidentFlow\n        //the referred LineItem annotation definition for entity IncidentFlow is defined below\n        {\n            $Type         : 'UI.ReferenceFacet',\n            Label         : '{i18n>IncidentProcessFlow}',\n            ID            : 'ProcessFlowFacet',\n            Target        : 'incidentFlow/@UI.LineItem',\n            ![@UI.Hidden] : isDraft\n        }\n    ]\n});\n\nannotate service.IncidentFlow with @(UI : {\n    LineItem : [\n        //insert your column enhancement here\n        {\n            $Type : 'UI.DataField',\n            Value : stepStatus,\n            Criticality : criticality,\n        },\n        {\n            $Type : 'UI.DataField',\n            Value : processStep\n        },\n        {\n            $Type : 'UI.DataField',\n            Value : stepStartDate\n        },\n        {\n            $Type : 'UI.DataField',\n            Value : stepEndDate\n        },\n        {\n            $Type : 'UI.DataField',\n            Value : incident.assignedIndividual.fullName,\n            Label : '{i18n>CreatedBy}'\n        }\n    ]\n});\n\n```",
  "excerpt": "annotations.cds",
  "wordCount": 569,
  "version": "1.0.0",
  "source": "fiori-samples",
  "sourceType": "github"
}