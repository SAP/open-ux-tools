{
  "id": "fiori-showcase-app-featureshowcase-webapp-utils-locate-reuse-libs-js",
  "title": "locate reuse libs",
  "category": "features",
  "path": "app/featureShowcase/webapp/utils/locate-reuse-libs.js",
  "lastModified": "2025-09-01T18:17:10.727Z",
  "tags": [
    "features",
    "js",
    "locate",
    "reuse",
    "libs"
  ],
  "headers": [],
  "content": "# locate reuse libs.md\n\n```javascript\n# locate reuse libs.md\n\n```javascript\n# locate reuse libs.md\n\n```javascript\n# locate reuse libs.md\n\n```javascript\n# locate reuse libs.md\n\n```javascript\n# locate reuse libs.md\n\n```javascript\n# locate reuse libs.md\n\n```javascript\n# locate reuse libs.md\n\n```javascript\n# locate-reuse-libs.js\n\n```javascript\n\n\n//Generated by SAP Fiori tools Application Generator\n\n\n/*eslint-disable semi, no-console*/\n(function (sap) {\n    fioriToolsGetManifestLibs = function (manifestPath) {\n        var url = manifestPath;\n        var result = \"\";\n        // SAPUI5 delivered namespaces from https://ui5.sap.com/#/api/sap\n        var ui5Libs = [\n            \"sap.apf\",\n            \"sap.base\",\n            \"sap.chart\",\n            \"sap.collaboration\",\n            \"sap.f\",\n            \"sap.fe\",\n            \"sap.fileviewer\",\n            \"sap.gantt\",\n            \"sap.landvisz\",\n            \"sap.m\",\n            \"sap.ndc\",\n            \"sap.ovp\",\n            \"sap.rules\",\n            \"sap.suite\",\n            \"sap.tnt\",\n            \"sap.ui\",\n            \"sap.uiext\",\n            \"sap.ushell\",\n            \"sap.uxap\",\n            \"sap.viz\",\n            \"sap.webanalytics\",\n            \"sap.zen\"\n        ];\n        return new Promise(function (resolve, reject) {\n            $.ajax(url)\n                .done(function (manifest) {\n                    if (manifest) {\n                        if (\n                            manifest[\"sap.ui5\"] &&\n                            manifest[\"sap.ui5\"].dependencies &&\n                            manifest[\"sap.ui5\"].dependencies.libs\n                        ) {\n                            Object.keys(manifest[\"sap.ui5\"].dependencies.libs).forEach(function (manifestLibKey) {\n                                // ignore libs that start with SAPUI5 delivered namespaces\n                                if (!ui5Libs.some(function (substring) { return manifestLibKey === substring || manifestLibKey.startsWith(substring + \".\"); })) {\n                                    if (result.length > 0) {\n                                        result = result + \",\" + manifestLibKey;\n                                    } else {\n                                        result = manifestLibKey;\n                                    }\n                                }\n                            });\n                        }\n                    }\n                    resolve(result);\n                })\n                .fail(function (error) {\n                    reject(new Error(\"Could not fetch manifest at '\" + manifestPath));\n                });\n        });\n    };\n    /**\n     * Registers the module paths for dependencies of the given component.\n     * @param {string} manifestPath The the path to the app manifest path\n     * for which the dependencies should be registered.\n     * @returns {Promise} A promise which is resolved when the ajax request for\n     * the app-index was successful and the module paths were registered.\n     */\n    sap.registerComponentDependencyPaths = function (manifestPath) {\n        return fioriToolsGetManifestLibs(manifestPath).then(function (libs) {\n            if (libs && libs.length > 0) {\n                var url = \"/sap/bc/ui2/app_index/ui5_app_info?id=\" + libs;\n                var sapClient = jQuery.sap.getUriParameters().get(\"sap-client\");\n                if (sapClient && sapClient.length === 3) {\n                    url = url + \"&sap-client=\" + sapClient;\n                }\n                return $.ajax(url).done(function (data) {\n                    if (data) {\n                        Object.keys(data).forEach(function (moduleDefinitionKey) {\n                            var moduleDefinition = data[moduleDefinitionKey];\n                            if (moduleDefinition && moduleDefinition.dependencies) {\n                                moduleDefinition.dependencies.forEach(function (dependency) {\n                                    if (dependency.url && dependency.url.length > 0 && dependency.type === \"UI5LIB\") {\n                                        jQuery.sap.log.info(\n                                            \"Registering Library \" +\n                                            dependency.componentId +\n                                            \" from server \" +\n                                            dependency.url\n                                        );\n                                        jQuery.sap.registerModulePath(dependency.componentId, dependency.url);\n                                    }\n                                });\n                            }\n                        });\n                    }\n                });\n            }\n        });\n    };\n})(sap);\n\nvar scripts = document.getElementsByTagName(\"script\");\nvar currentScript = scripts[scripts.length - 1];\nvar manifestUri = currentScript.getAttribute(\"data-sap-ui-manifest-uri\");\nvar componentName = currentScript.getAttribute(\"data-sap-ui-componentName\");\nvar useMockserver = currentScript.getAttribute(\"data-sap-ui-use-mockserver\");\nsap.registerComponentDependencyPaths(manifestUri)\n    .catch(function (error) {\n        jQuery.sap.log.error(error);\n    })\n    .finally(function () {\n        if (componentName && componentName.length > 0) {\n            if (useMockserver && useMockserver === \"true\") {\n                sap.ui.getCore().attachInit(function () {\n                    sap.ui.require([componentName.replace(/\\./g, \"/\") + \"/localService/mockserver\"], function (server) {\n                        // set up test service for local testing\n                        server.init();\n                        // initialize the ushell sandbox component\n                        sap.ushell.Container.createRenderer().placeAt(\"content\");\n                    });\n                });\n            } else {\n                // Requiring the ComponentSupport module automatically executes the component initialisation for all declaratively defined components\n                sap.ui.require([\"sap/ui/core/ComponentSupport\"]);\n            }\n        } else {\n            sap.ui.getCore().attachInit(function () {\n                // initialize the ushell sandbox component\n                sap.ushell.Container.createRenderer().placeAt(\"content\");\n            });\n        }\n    });\n\nsap.registerComponentDependencyPaths(manifestUri);\n\n```\n```\n```\n```\n```\n```\n```\n```\n```",
  "excerpt": "locate reuse libs.md javascript locate reuse libs.md javascript locate reuse libs.md javascript locate reuse libs.md javascript locate-reuse-libs.js",
  "wordCount": 466,
  "version": "1.0.0",
  "source": "fiori-showcase",
  "sourceType": "github"
}