{
  "id": "sapui5-docs-03-get-started-step-3-adding-the-price-formatter-2bf4892-md",
  "title": "Step 3: Adding the Price Formatter",
  "category": "ui5-framework",
  "path": "docs/03_Get-Started/step-3-adding-the-price-formatter-2bf4892.md",
  "lastModified": "2025-09-01T18:17:10.466Z",
  "tags": [
    "ui5-framework",
    "md",
    "Step",
    "Adding",
    "the",
    "Price",
    "Formatter"
  ],
  "headers": [
    "Step 3: Adding the Price Formatter",
    "Preview",
    "Coding",
    "webapp/model/formatter.js",
    "webapp/view/Worklist.view.xml"
  ],
  "content": "<!-- loio2bf4892527174264808076be32c1e1b0 -->\n\n# Step 3: Adding the Price Formatter\n\nWe will now take care of the implementation of the price formatter and make sure that the tests we wrote in the previous step run successfully.\n\nIf the tests are passed, we can be sure that the formatter is formally correct but it is still not visible in the app. So additionally, we will add the formatter to the UI to be able to verify and check that the price is shown properly.\n\n\n\n## Preview\n\n  \n  \n**The price is now formatted with a semantic color**\n\n![](images/Tutorial_Testing_Step_03_436054f.jpg \"The price is now formatted with a semantic color\")\n\n\n\n## Coding\n\nYou can view and download all files in the *Samples* in the Demo Kit at [Testing - Step 3](https://ui5.sap.com/#/entity/sap.m.tutorial.testing/sample/sap.m.tutorial.testing.03).\n\n\n\n## webapp/model/formatter.js\n\n```js\n\nsap.ui.define([], function () {\n\t   \"use strict\";\n\n\t   return {\n\t\t     numberUnit: function (sValue) {\n\t\t\t// …\n\t\t     },\n\t\t     /**\n\t\t     * Defines a value state based on the price\n\t\t     *\n\t\t     * @public\n\t\t     * @param {number} iPrice the price of a post\n\t\t     * @returns {string} sValue the state for the price\n\t\t     */\n\t\t     priceState: function (iPrice) {\n\t\t\t   if (iPrice < 50) {\n\t\t\t\t  return \"Success\";\n\t\t\t   } else if (iPrice >= 50 && iPrice < 250) {\n\t\t\t\t  return \"None\";\n\t\t\t   } else if (iPrice >= 250 && iPrice < 2000) {\n\t\t\t\t  return \"Warning\";\n\t\t\t   } else {\n\t\t\t\t  return \"Error\";\n\t\t\t   }\n\t\t  }\n\t};\n});\n```\n\nWe change the empty formatter function that we have added in the last step and add the implementation details to it. If the implementation matches the specification embedded in our tests we are done with implementing the formatter.\n\nThe input for the formatter is the price value from the model and the result is the state as a `string` value. The actual implementation logic is quite simple and returns a semantic state value based on the price as we have seen already in the test. There are four cases that are reflected in the `if/else` statements inside the formatter.\n\nYou can now run the file `webapp/test/testsuite.qunit.html` in your browser and select `unit/unitTests` to check if the unit tests run successfully. You should see your new test cases on the result page. If the overall result is successful then we have successfully implemented our first feature.\n\n\n\n## webapp/view/Worklist.view.xml\n\n```xml\n…\n<ColumnListItem vAlign=\"Middle\">\n\t<cells>\n\t\t…\n\t\t<ObjectNumber\n\t\t\tnumber=\"{\n\t\t\t\tpath: 'Price',\n\t\t\t\tformatter: '.formatter.numberUnit'\n\t\t\t}\"\n\t\t\tstate=\"{\n\t\t\t\tpath: 'Price',\n\t\t\t\tformatter: '.formatter.priceState'\n\t\t\t}\"\n\t\t\tunit=\"{Currency}\"/>\n\t</cells>\n</ColumnListItem>\n…\n```\n\nWe still have to apply the changes to our UI so that we can actually see the formatted price in the app. Unit tests are typically testing the logic independent of the user interface. That is why the tests are running successfully even though we did not adapt the UI yet.\n\nIn our worklist view we simply add a state attribute to the `ObjectNumber` control in the `columns` aggregation. We define the same data binding path as for the number, but we use our new formatter function to determine the proper state. If you now run the `webapp/test/mockServer.html` file, you can see that some of the product prices are listed in green, black, orange, and red depending on their price.\n\n**Related Information**  \n\n\n[API Reference: `sap.ui.core.ValueState`](https://ui5.sap.com/#/api/sap.ui.core.ValueState)\n\n[API Reference: `sap.m.ObjectNumber`](https://ui5.sap.com/#/api/sap.m.ObjectNumber)\n\n",
  "excerpt": "<!-- loio2bf4892527174264808076be32c1e1b0 --> Step 3: Adding the Price Formatter We will now take care of the implementation of the price formatter and make sure that the tests we wrote in the previou...",
  "wordCount": 522,
  "version": "1.0.0",
  "source": "sapui5",
  "sourceType": "github"
}