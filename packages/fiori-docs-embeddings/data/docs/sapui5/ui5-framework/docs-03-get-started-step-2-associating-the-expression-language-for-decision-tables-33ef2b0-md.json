{
  "id": "sapui5-docs-03-get-started-step-2-associating-the-expression-language-for-decision-tables-33ef2b0-md",
  "title": "Step 2: Associating the Expression Language for Decision Tables",
  "category": "ui5-framework",
  "path": "docs/03_Get-Started/step-2-associating-the-expression-language-for-decision-tables-33ef2b0.md",
  "lastModified": "2025-09-01T18:17:10.458Z",
  "tags": [
    "ui5-framework",
    "md",
    "Step",
    "Associating",
    "the",
    "Expression",
    "Language",
    "for",
    "Decision",
    "Tables"
  ],
  "headers": [
    "Step 2: Associating the Expression Language for Decision Tables",
    "Preview",
    "Coding"
  ],
  "content": "<!-- loio33ef2b0efda148afaa3270a08c3f5d9b -->\n\n# Step 2: Associating the Expression Language for Decision Tables\n\nExpression languages provide the required services for rule authoring, rule visualization, and rule content validation. The services provided by the expression language object include expression validations, expression parsing, auto-complete suggestions, retrieval of expression metadata and tokens, and performing runtime services such as fetching data objects, outputs, and so on.\n\nThe vocabulary OData model and the binding context path for the specific vocabulary are mandatory input for the expression language.\n\nThe expression language objects are an association of the `RuleBuilder` object, and it can be associated with multiple `RuleBuilder` objects.\n\n\n\n<a name=\"loio33ef2b0efda148afaa3270a08c3f5d9b__section_f5q_rp3_rz\"/>\n\n## Preview\n\n  \n  \n**Decision Table with Guided Input**\n\n![](images/decision_table1_40a97b4.png \"Decision Table with Guided Input\")\n\n\n\n<a name=\"loio33ef2b0efda148afaa3270a08c3f5d9b__section_mjx_fn3_rz\"/>\n\n## Coding\n\nYou can view and download all files at [Rule Builder - Guided Decision Table](https://ui5.sap.com/#/entity/sap.rules.ui.RuleBuilder/sample/sap.rules.ui.sample.GuidedDecisionTable). This is applicable only for rule expression language.\n\n\n\nBefore you begin, customize the `Page.controller.js` as per your requirements.\n\n-   Set the expression language object:\n\n    For rule expression language 1.0:\n\n    ```\n    oExpressionLanguage = new sap.rules.ui.services.ExpressionLanguage();\n    oRuleBuilder.setExpressionLanguage(oExpressionLanguage);\n    \n    ```\n\n    For DMN SFEEL\\(Expression language 2.0\\):\n\n    ```\n    oAstExpressionLanguage = new sap.rules.ui.services.AstExpressionLanguage();\n    oRuleBuilder.setAstExpressionLanguage(oAstExpressionLanguage);\n    \n    ```\n\n-   Ensure that you have set the data before setting the vocabulary model for the expression language as shown:\n\n    ```\n    oExpressionLanguage.setData(data);\n    oExpressionLanguage.setModel(that.oVocabularyModel);\n    \n    ```\n\n\n**Page.controller.js**\n\n```js\n \nsap.ui.define([\n\t'jquery.sap.global',\n\t'sap/ui/core/mvc/Controller',\n\t'sap/ui/model/odata/v2/ODataModel',\n\t'sap/rules/ui/services/ExpressionLanguage',   //For DMN SFEEL language, use 'AstExpressionLanguage'.\n\t'sap/ui/core/util/MockServer',\n\t'sap/m/MessageToast'\n], function (jQuery, Controller, ODataModel, ExpressionLanguage, MockServer, MessageToast) {    //For DMN SFEEL language, use 'AstExpressionLanguage' instead of 'ExpressionLanguage'.\n\t\"use strict\";\n\n\treturn Controller.extend(\"sap.rules.ui.sample.GuidedDecisionTable.Page\", {\n\n\t\tonInit: function () {\n\n\t\t\tsap.ui.getCore().applyTheme(\"sap_horizon\");\n\n\t\t\t// apply compact density for desktop, the cozy design otherwise\n\t\t\tthis.getView().addStyleClass(sap.ui.Device.system.desktop ? \"sapUiSizeCompact\" : \"sapUiSizeCozy\");\n\n\t\t\tvar mPath = sap.ui.require.toUrl(\"sap/rules/ui/sample/GuidedDecisionTable\") + \"/\";\n\t\t\t\n\t\t\t// Initialize Expression Language services\n\t\t\tthis.oVocabularyMockServer = new MockServer({rootUri: \"/sap/opu/odata/SAP/vocabulary_srv/\"});\n\t\t\tthis.oVocabularyMockServer.simulate(\n\t\t\t\tmPath + \"localService/vocabulary/metadata.xml\",\n\t\t\t\t{'sMockdataBaseUrl': mPath + \"localService/vocabulary/mockdata/\"}\n\t\t\t);\n\t\t\tthis.oVocabularyMockServer.start();\n\t\t\tthis.oVocabularyModel = new ODataModel(\"/sap/opu/odata/SAP/vocabulary_srv/\");\n\t\t\tthis.oExpressionLanguage = new ExpressionLanguage();               //For DMN SFEEL, use 'new AstExpressionLanguage();'.\n\t\t\tthis.oExpressionLanguage.setModel(this.oVocabularyModel);\n\t\t\tthis.oExpressionLanguage.setBindingContextPath(\"/Vocabularies('FA163E38C6481EE785F409DCAD583D43')\");\n\n\t\t\t// Initialize the Rule Builder\n\t\t\tthis.oRuleMockServer = new MockServer({rootUri: \"/sap/opu/odata/SAP/RULE_SRV/\"});\n\t\t\tthis.oRuleMockServer.simulate(\n\t\t\t\tmPath + \"localService/rule/metadata.xml\",\n\t\t\t\t{'sMockdataBaseUrl': mPath + \"localService/rule/mockdata/\"}\n\t\t\t);\n\n\t\t\tvar aRequests = this.loadRequests(mPath);\n\t\t\tthis.oRuleMockServer.setRequests(aRequests);\n\t\t\tthis.oRuleMockServer.start();\n\t\t\tthis.oRuleModel = new ODataModel({\n\t\t\t\tserviceUrl: \"/sap/opu/odata/SAP/RULE_SRV/\",\n\t\t\t\tdefaultBindingMode: sap.ui.model.BindingMode.TwoWay\n\t\t\t});\n\n\t\t\tvar oRuleBuilder = this.byId(\"ruleBuilder\");\n\t\t\toRuleBuilder.setModel(this.oRuleModel);\n\t\t\toRuleBuilder.setExpressionLanguage(this.oExpressionLanguage);\n\t\t\toRuleBuilder.setBindingContextPath(\"/Rules(Id='FA163E38C6481EE785F409DCAD583D43',Version='000000000000000001')\");\n\t\t},\n\n\t\thandleEditButton: function () {\n\t\t\tvar oEditButton = this.byId(\"editButton\");\n\t\t\tvar oRuleBuilder = this.byId(\"ruleBuilder\");\n\t\t\tvar bEdit = (oEditButton.getText() === \"Edit\");\n\t\t\toRuleBuilder.setEditable(bEdit);\n\t\t\toEditButton.setText(bEdit ? \"Display\" : \"Edit\");\n\t\t},\n\n\t\tonAfterRendering: function () {\n\n\t\t\t// Line actions are not supported in this demo\n\t\t\tvar oRuleBuilder = this.byId(\"ruleBuilder\");\n\t\t\tvar oDecisionTable = oRuleBuilder.getAggregation(\"_rule\");\n\t\t\tvar oToolbar = oDecisionTable.getAggregation(\"_toolbar\");\n\t\t\tvar arrContent = oToolbar.getContent();\n\t\t\tfor (var i = 0; i < arrContent.length; i++) {\n\t\t\t\tif (arrContent[i].getMetadata().getName() === \"sap.m.Button\") {\n\t\t\t\t\tarrContent[i].detachPress(arrContent[i].mEventRegistry.press[0].fFunction, arrContent[i].mEventRegistry.press[0].oListner);\n\t\t\t\t\tarrContent[i].attachPress(function (oEvent) {\n\t\t\t\t\t\t\tvar msg = 'Line action pressed';\n\t\t\t\t\t\t\tMessageToast.show(msg);\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t} else if (arrContent[i].getMetadata().getName() === \"sap.m.MenuButton\") {\n\t\t\t\t\tvar oMenu = arrContent[i].getMenu();\n\t\t\t\t\toMenu.detachItemSelected(oMenu.mEventRegistry.itemSelected[1].fFunction, oMenu.mEventRegistry.itemSelected[1].oListner);\n\t\t\t\t\toMenu.attachItemSelected(function (oEvent) {\n\t\t\t\t\t\t\tvar msg = 'Line action pressed';\n\t\t\t\t\t\t\tMessageToast.show(msg);\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t},\n\n\t\tloadRequests: function (mPath) {\n\n\t\t\t// The mock server does not support 1 to 1 navigation.\n\t\t\t// Hence we provide the responses directly by adding custom requests to the MockServer\n\t\t\tvar oRresponses = jQuery.sap.sjax({\n\t\t\t\ttype: \"GET\",\n\t\t\t\turl: mPath + \"localService/rule/responses.json\",\n\t\t\t\tdataType: \"json\"\n\t\t\t\t}\t\n\t\t\t).data;\n\t\t\t\n\t\t\tvar aRequests = this.oRuleMockServer.getRequests();\n\t\t\tvar sMethod = \"GET\";\n\t\t\tvar sPath = /Rules\\(Id='FA163E38C6481EE785F409DCAD583D43',Version='000001'\\)\\/DecisionTable\\/DecisionTableRows\\/\\$count/;\n\t\t\tvar fnResponse1 = function (xhr) {\n\t\t\t\txhr.respond(200, {\n\t\t\t\t\t\"Content-Type\": \"text/plain;charset=utf-8\"\n\t\t\t\t}, \"5\");\n\t\t\t};\n\t\t\taRequests.push({method: sMethod, path: sPath, response: fnResponse1});\n\t\t\t\n\t\t\tsPath = /Rules\\(Id='FA163E38C6481EE785F409DCAD583D43',Version='000001'\\)\\/DecisionTable\\/DecisionTableRows\\?\\$skip=0&\\$top=\\d+&\\$orderby=Sequence%20asc&\\$expand=Cells/;\n\t\t\tvar response_1 = this.response_1;\n\t\t\tvar fnResponse2 = function (xhr) {\n\t\t\t\txhr.respondJSON(200, {\n\t\t\t\t\t\"Content-Type\": \"application/json;charset=utf-8\"\n\t\t\t\t}, oRresponses.response_1);\n\t\t\t};\n\t\t\taRequests.push({method: sMethod, path: sPath, response: fnResponse2});\n\n\t\t\tsPath = /Rules\\(Id='FA163E38C6481EE785F409DCAD583D43',Version='000001'\\)\\/DecisionTable\\/DecisionTableColumns\\/\\$count/;\n\t\t\tvar fnResponse3 = function (xhr) {\n\t\t\t\txhr.respond(200, {\n\t\t\t\t\t\"Content-Type\": \"text/plain;charset=utf-8\"\n\t\t\t\t}, \"5\");\n\t\t\t}\n\t\t\taRequests.push({method: sMethod, path: sPath, response: fnResponse3});\n\n\t\t\tsPath = /Rules\\(Id='FA163E38C6481EE785F409DCAD583D43',Version='000001'\\)\\/DecisionTable\\/DecisionTableColumns\\?\\$skip=0&\\$top=\\d+&\\$expand=Condition%2cResult/;\n\t\t\tvar response_2 = this.response_2;\n\t\t\tvar fnResponse4 = function (xhr) {\n\t\t\t\txhr.respondJSON(200, {\n\t\t\t\t\t\"Content-Type\": \"application/json;charset=utf-8\"\n\t\t\t\t}, oRresponses.response_2);\n\t\t\t}\n\t\t\taRequests.push({method: sMethod, path: sPath, response: fnResponse4});\n \n\t\t\treturn aRequests;\n\t\t}\n\t});\n});\n```\n\nThis code adds an expression language object to the view controller, and connects it to the `RuleBuilder` as an association. For the expression language service, this code sets the model and then does all the necessary data binding internally \\(unlike other SAPUI5 controls where the developer defines the data binding\\). The data for the expression language is loaded via the vocabulary OData service.\n\nThe following are the code modifications that you can make to include additional functionalities:\n\n-   For reading specific vocabulary content like data objects, attributes, value help, rules or vocabulary rules, use the following code:\n\n    ```\n    this.oVocabularyModel.read(sVocabularyPath, {\n                    urlParameters: {\n                        \"$expand\": \"DataObjects/Associations,DataObjects/Attributes,ValueSources,Rules\"\n                   },\n    \n    ```\n\n-   To set the vocabulary context shown in autosuggestion, use the following code:\n\n    ```\n    oExpressionLanguage.setBindingContextPath(\"/Vocabularies(\\'\" + <vocabulary context> + \"\\')\");\n    ```\n\n    > ### Note:  \n    > Vocabulary context is `ProjectId` by default and all the data objects of the given project are listed in autosuggestion. The possible contexts include `RuleserviceId`, `RuleId` and `ProjectId`.\n\n\nThe code also sets a binding context path on `RuleBuilder` to the specific rule you are currently working on.\n\nNow, when running the application, the decision table will be rendered filled with rule data from the mock server.\n\n> ### Note:  \n> If you are using a back-end system with the relevant implemented OData services, use the following code:\n> \n> ```js\n> sap.ui.define([\n> \t'sap/ui/core/mvc/Controller',\n> \t'sap/ui/model/odata/v2/ODataModel',\n> \t'sap/rules/ui/services/ExpressionLanguage'         //For DMN SFEEL language, use 'sap/rules/ui/services/AstExpressionLanguage'.\n> ], function ( Controller, ODataModel, ExpressionLanguage) {   //For DMN SFEEL language, use 'AstExpressionLanguage' instead of 'ExpressionLanguage'.\n> \t\"use strict\";\n> \n> \treturn Controller.extend(\"mySample.RuleBuilder.Page\", {\n> \n> \t\tonInit: function () {\n> \n> \t\t\t// apply compact density for desktop, the cozy design otherwise\n> \t\t\tthis.getView().addStyleClass(sap.ui.Device.system.desktop ? \"sapUiSizeCompact\" : \"sapUiSizeCozy\");\n> \t\t\t\n> \t\t\t// Initialize Expression Language services\n> \t\t\tthis.oVocabularyModel = new ODataModel(\"/vocabulary_srv/\");\n> \t\t\tthis.oExpressionLanguage = new ExpressionLanguage();       //For DMN SFEEL, use 'new AstExpressionLanguage()'.\n> \t\t\tthis.oExpressionLanguage.setModel(this.oVocabularyModel);\n> \t\t\tthis.oExpressionLanguage.setBindingContextPath(\"/Vocabularies('<your rule ID>')\");\n> \n> \t\t\t// Initialize the Rule Builder\n> \t\t\tthis.oRuleModel = new ODataModel({\n> \t\t\t\tserviceUrl: \"/sap/opu/odata/SAP/RULE_SRV/\",\n> \t\t\t\tdefaultBindingMode: sap.ui.model.BindingMode.TwoWay\n> \t\t\t});\n> \n> \t\t\tvar oRuleBuilder = this.byId(\"ruleBuilder\");\n> \t\t\toRuleBuilder.setModel(this.oRuleModel);\n> \t\t\toRuleBuilder.setExpressionLanguage(this.oExpressionLanguage);\n> \t\t\toRuleBuilder.setBindingContextPath(\"/Rules(Id='<your rule ID>',Version='000001')\");\n> \t\t},\n> \n> \t\thandleEditButton: function () {\n> \t\t\tvar oEditButton = this.byId(\"editButton\");\n> \t\t\tvar oRuleBuilder = this.byId(\"ruleBuilder\");\n> \t\t\tvar bEdit = (oEditButton.getText() === \"Edit\");\n> \t\t\toRuleBuilder.setEditable(bEdit);\n> \t\t\toEditButton.setText(bEdit ? \"Display\" : \"Edit\");\n> \t\t}\n> \t});\n> });\n> ```\n\n",
  "excerpt": "<!-- loio33ef2b0efda148afaa3270a08c3f5d9b --> Step 2: Associating the Expression Language for Decision Tables Expression languages provide the required services for rule authoring, rule visualization,...",
  "wordCount": 1001,
  "version": "1.0.0",
  "source": "sapui5",
  "sourceType": "github"
}