{
  "id": "sapui5-docs-03-get-started-step-8-testing-navigation-10592af-md",
  "title": "Step 8: Testing Navigation",
  "category": "ui5-framework",
  "path": "docs/03_Get-Started/step-8-testing-navigation-10592af.md",
  "lastModified": "2025-09-01T18:17:10.485Z",
  "tags": [
    "ui5-framework",
    "md",
    "Step",
    "Testing",
    "Navigation"
  ],
  "headers": [
    "Step 8: Testing Navigation",
    "Preview",
    "Coding",
    "webapp/test/integration/PostJourney.js \\(New\\)",
    "webapp/test/integration/pages/Worklist.js – action object",
    "**webapp/test/integration/pages/Post.js \\(New\\)**",
    "**webapp/test/integration/pages/Worklist.js – assertion object**",
    "**webapp/test/integration/pages/Browser.js \\(New\\)**",
    "**webapp/test/integration/opaTests.qunit.js**"
  ],
  "content": "<!-- loio10592affce3e4f1ba73c3125ee06e0b7 -->\n\n# Step 8: Testing Navigation\n\nSo far, we have a list of posts on the home page of the app. But typically, a post comes with more details that should be displayed on a separate detail page. We call it the post page because it displays details of a post. In this step we will introduce a new journey to test the post page. We write tests that trigger typical navigation events with OPA. Testing navigation greatly helps in reducing manual testing efforts as it covers a lot of testing paths. It is good practice to cover every view of your application with at least one test, since OPA will check if an exception is thrown. In this way you can detect critical errors very fast. \n\n\n\n## Preview\n\n  \n  \n**We add an OPA test that selects an item from the table and navigates to the post page**\n\n![](images/Tutorial_Testing_Step_08_cf3e0a6.jpg \"We add an OPA test that selects an item from the table and navigates to the\n\t\t\t\t\tpost page\")\n\n\n\n## Coding\n\nYou can view and download all files in the Demo Kit at [Testing - Step 8](https://ui5.sap.com/#/entity/sap.m.tutorial.testing/sample/sap.m.tutorial.testing.08).\n\n\n\n## webapp/test/integration/PostJourney.js \\(New\\)\n\n```js\n/*global QUnit*/\nsap.ui.define([\n\t\"sap/ui/test/opaQunit\",\n\t\"./pages/Worklist\",\n\t\"./pages/Browser\",\n\t\"./pages/Post\"\n], function (opaTest) {\n\t\"use strict\";\n\n\tQUnit.module(\"Post\");\n\n\topaTest(\"Should see the post page when a user clicks on an entry of the list\", function (Given, When, Then) {\n\t\t// Arrangements\n\t\tGiven.iStartMyApp();\n\n\t\t//Actions\n\t\tWhen.onTheWorklistPage.iPressOnTheItemWithTheID(\"PostID_15\");\n\n\t\t// Assertions\n\t\tThen.onThePostPage.theTitleShouldDisplayTheName(\"Jeans\");\n\t});\n\n\topaTest(\"Should go back to the TablePage\", function (Given, When, Then) {\n\t\t// Actions\n\t\tWhen.onThePostPage.iPressTheBackButton();\n\n\t\t// Assertions\n\t\tThen.onTheWorklistPage.iShouldSeeTheTable();\n\t});\n\n\topaTest(\"Should be on the post page again when the browser's forward button is pressed\", function (Given, When, Then) {\n\t\t// Actions\n\t\tWhen.onTheBrowser.iPressOnTheForwardButton();\n\n\t\t// Assertions\n\t\tThen.onThePostPage.theTitleShouldDisplayTheName(\"Jeans\");\n\n\t\t// Cleanup\n\t\tThen.iTeardownMyApp();\n\t});\n});\n```\n\nThis new journey for the *Post* page introduces a test case that tests the navigation and also tests if the browser history is in the correct state, so that the user can navigate through our app with the back and forward button of the browser. This time, instead of adding a test we will add a new journey.\n\nA journey represents a user's task in our app. Journeys start with the startup of our app and end with a teardown in the last test. We don't write isolated tests here, since starting up the app takes a lot of time and doing it too often slows down our test execution and feedback time considerably. If the execution speed of the tests is no problem, you may also write isolated tests.\n\nOur new journey consists of three user interaction steps:\n\n1.  User chooses a *Post* to view the details\n\n2.  User chooses the *Back* button on the *Detail* page of the *Post* to see the list again\n\n3.  User chooses the *Forward* button to revisit the details of the post\n\n\n\n\n## webapp/test/integration/pages/Worklist.js – action object\n\n```js\n\nsap.ui.define([\n\t\t'sap/ui/test/Opa5',\n\t\t'sap/ui/test/matchers/AggregationLengthEquals',\n\t\t'sap/ui/test/matchers/I18NText',\n\t\t'sap/ui/test/matchers/BindingPath',\n\t\t'sap/ui/test/actions/Press'\n],   function (Opa5, AggregationLengthEquals, I18NText, BindingPath, Press) {\n\t\t\"use strict\";\n\n\t\tvar sViewName = \"Worklist\",\n\t\t\tsTableId = \"table\";\n\n\t\tOpa5.createPageObjects({\n\t\t\tonTheWorklistPage: {\n\t\t\t\tactions: {\n…\n                        ,\n\t\t\t\t\tiPressOnTheItemWithTheID: function (sId) {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tcontrolType: \"sap.m.ColumnListItem\",\n\t\t\t\t\t\t\tviewName: sViewName,\n\t\t\t\t\t\t\tmatchers:  new BindingPath({\n\t\t\t\t\t\t\t\tpath: \"/Posts('\" + sId + \"')\"\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\tactions: new Press(),\n\t\t\t\t\t\t\terrorMessage: \"No list item with the id \" + sId + \" was found.\"\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n```\n\nNow that we have written our spec how the navigation to the *Post* page is planned, we first need to implement the \"click\" on a list item. To identify the item we are looking for, we use the `BindingPath` matcher. Doing so, we make sure that even if the order of the items changes, we always choose the same item. The `press` action simulates a user click on the item.\n\n\n\n## **webapp/test/integration/pages/Post.js \\(New\\)**\n\n```js\nsap.ui.define([\n\t'sap/ui/test/Opa5',\n\t'sap/ui/test/matchers/Properties',\n\t'sap/ui/test/actions/Press'\n], function (Opa5, Properties, Press) {\n\t\t\"use strict\";\n\t\tvar sViewName = \"Post\";\n\t\tOpa5.createPageObjects({\n\t\t\tonThePostPage: {\n\t\t\t\tactions: {\n\t\t\t\t\tiPressTheBackButton: function () {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tid: \"page\",\n\t\t\t\t\t\t\tviewName: sViewName,\n\t\t\t\t\t\t\tactions: new Press(),\n\t\t\t\t\t\t\terrorMessage: \"Did not find the nav button on object page\"\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tassertions: {\n\t\t\t\t\ttheTitleShouldDisplayTheName: function (sName) {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tsuccess: function () {\n\t\t\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\t\t\tid: \"objectHeader\",\n\t\t\t\t\t\t\t\t\tviewName: sViewName,\n\t\t\t\t\t\t\t\t\tmatchers: new Properties({\n\t\t\t\t\t\t\t\t\t\ttitle: sName\n\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\tsuccess: function (oPage) {\n\t\t\t\t\t\t\t\t\t\tOpa5.assert.ok(true, \"was on the remembered detail page\");\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\terrorMessage: \"The Post \" + sName + \" is not shown\"\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\n```\n\nAfter navigating to the *Post* page, we need a new OPA5 `Page` object for the page to implement our actions and assertions.\n\nAn OPA5 `Page` object is used to group and reuse actions and assertions that are related to a specific part of the screen. For more information, see [Cookbook for OPA5](../04_Essentials/cookbook-for-opa5-ce4b180.md).\n\nWe implement a `press` event on the page's `nav` button and we assert that we are on the correct page by checking the title in the object header. The `nav` button is retrieved via DOM reference, because the page does not offer us an API here. Since the DOM ID is the most stable attribute, we are using this to retrieve the button.\n\n\n\n## **webapp/test/integration/pages/Worklist.js – assertion object**\n\n```js\n…\n,\n\t\t\t\t\tiShouldSeeTheTable: function () {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tid: sTableId,\n\t\t\t\t\t\t\tviewName: sViewName,\n\t\t\t\t\t\t\tsuccess: function () {\n\t\t\t\t\t\t\t\tOpa5.assert.ok(true, \"The table is visible\");\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\terrorMessage: \"Was not able to see the table.\"\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n…\n```\n\nAfter going back, we want to move forwards again, but we need to check if the back navigation actually took place. So we assert that we are back on our table of posts again. We achieve this with a very simple `waitFor` statement just checking if the table is present.\n\n\n\n## **webapp/test/integration/pages/Browser.js \\(New\\)**\n\n```js\nsap.ui.define([\n\t'sap/ui/test/Opa5'\n], function (Opa5) {\n\t\"use strict\";\n\t\tOpa5.createPageObjects({\n\t\t\tonTheBrowser: {\n\t\t\t\tactions: {\n\t\t\t\t\tiPressOnTheForwardButton: function () {\n\t\t\t\t\t\treturn this.waitFor({\n\t\t\t\t\t\t\tsuccess: function () {\n\t\t\t\t\t\t\t\tOpa5.getWindow().history.forward();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tassertions: {}\n\t\t\t}\n\t\t});\n\t}); \n```\n\nWe now implement an action that is triggered when the *Forward* button is chosen. Since it is not part of the browser's UI and it could be used on any page of our application, we just declare our browser's UI as an own OPA page object. To simulate the *Forward* button, we use the `history` API of the browser. We have to wrap our action in a `waitFor` statement. Otherwise the action would be executed before our app is started.\n\n\n\n## **webapp/test/integration/opaTests.qunit.js**\n\n```js\nsap.ui.define([\n\t\"sap/ui/test/Opa5\",\n\t\"./arrangements/Startup\",\n\t\"./WorklistJourney\",\n\t\"./PostJourney\"\n], function (Opa5, Startup) {\n\t\"use strict\";\n\n\tOpa5.extendConfig({\n\t\tarrangements: new Startup(),\n\t\tviewNamespace: \"sap.ui.demo.bulletinboard.view.\",\n\t\tautoWait: true\n\t});\n});\n```\n\nTo make navigation tests complete, we add the new journey to the `opaTests.qunit.js` file that is invoked by the test suite.\n\nIf you execute the tests now, you can see in the logs of the developer tools that OPA is waiting for the object page to be displayed. Of course, this will not happen as it is not yet implemented. But we already have a pretty good idea on how we will implement the feature in the next step.\n\n**Related Information**  \n\n\n[API Reference: `sap.ui.test.matchers.BindingPath`](https://ui5.sap.com/#/api/sap.ui.test.matchers.BindingPath)\n\n",
  "excerpt": "<!-- loio10592affce3e4f1ba73c3125ee06e0b7 --> Step 8: Testing Navigation So far, we have a list of posts on the home page of the app. But typically, a post comes with more details that should be displ...",
  "wordCount": 1148,
  "version": "1.0.0",
  "source": "sapui5",
  "sourceType": "github"
}