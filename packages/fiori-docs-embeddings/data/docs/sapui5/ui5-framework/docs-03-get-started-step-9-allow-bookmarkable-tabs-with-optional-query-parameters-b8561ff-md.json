{
  "id": "sapui5-docs-03-get-started-step-9-allow-bookmarkable-tabs-with-optional-query-parameters-b8561ff-md",
  "title": "Step 9: Allow Bookmarkable Tabs with Optional Query Parameters",
  "category": "ui5-framework",
  "path": "docs/03_Get-Started/step-9-allow-bookmarkable-tabs-with-optional-query-parameters-b8561ff.md",
  "lastModified": "2025-09-01T18:17:10.486Z",
  "tags": [
    "ui5-framework",
    "md",
    "Step",
    "Allow",
    "Bookmarkable",
    "Tabs",
    "with",
    "Optional",
    "Query",
    "Parameters"
  ],
  "headers": [
    "Step 9: Allow Bookmarkable Tabs with Optional Query Parameters",
    "Preview",
    "Coding",
    "webapp/manifest.json",
    "webapp/view/employee/Resume.view.xml",
    "webapp/controller/employee/Resume.controller.js"
  ],
  "content": "<!-- loiob8561ff6f4c34c85a91ed06d20814cd3 -->\n\n# Step 9: Allow Bookmarkable Tabs with Optional Query Parameters\n\nThe `resume` view contains four tabs as we have seen in the previous steps. However, when the user navigates to the `resume` page, only the first tab is displayed initially. Navigating directly to a specific tab or bookmarking a tab is not yet supported in our current app.\n\nIn this step, we implement a bookmarking feature by enabling deep linking to tabs with optional query parameters. A deep link is basically a link that directly references a deeper structure and parameters of the app in the URL. It is often bookmarked or shared to have a convenient entry point into the app for a certain task or action. The selected tab should be reflected in the URL but the tab can also be omitted, for example, when we initially navigate to the resume page.\n\n\n\n## Preview\n\n  \n  \n**Deep link to allow bookmarkable tabs**\n\n![](images/Tutorial_Navigation_and_Routing_Step_09_3eb33f8.png \"Deep link to allow bookmarkable tabs\")\n\n\n\n## Coding\n\nYou can view and download all files in the *Samples* in the Demo Kit at [Routing and Navigation - Step 9](https://ui5.sap.com/#/entity/sap.ui.core.tutorial.navigation/sample/sap.ui.core.tutorial.navigation.09).\n\n\n\n## webapp/manifest.json\n\n```js\n{\n\t\"_version\": \"1.12.0\",\n\t\"sap.app\": {\n\t\t...\n\t},\n\t\"sap.ui\": {\n\t\t...\n\t},\n\t\"sap.ui5\": {\n\t\t...\n\t\t\"routing\": {\n\t\t\t\"config\": {\n\t\t\t\t\"routerClass\": \"sap.m.routing.Router\",\n\t\t\t\t\"type\": \"View\",\n\t\t\t\t\"viewType\": \"XML\",\n\t\t\t\t\"path\": \"sap.ui.demo.nav.view\",\n\t\t\t\t\"controlId\": \"app\",\n\t\t\t\t\"controlAggregation\": \"pages\",\n\t\t\t\t\"transition\": \"slide\",\n\t\t\t\t\"bypassed\": {\n\t\t\t\t\t\"target\": \"notFound\"\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"routes\": [{\n\t\t\t\t\"pattern\": \"\",\n\t\t\t\t\"name\": \"appHome\",\n\t\t\t\t\"target\": \"home\"\n\t\t\t}, {\n\t\t\t\t\"pattern\": \"employees\",\n\t\t\t\t\"name\": \"employeeList\",\n\t\t\t\t\"target\": \"employees\"\n\t\t\t}, {\n\t\t\t\t\"pattern\": \"employees/{employeeId}\",\n\t\t\t\t\"name\": \"employee\",\n\t\t\t\t\"target\": \"employee\"\n\t\t\t}, {\n\t\t\t\t\"pattern\": \"employees/{employeeId}/resume:?query:\",\n\t\t\t\t\"name\": \"employeeResume\",\n\t\t\t\t\"target\": \"employeeResume\"\n\t\t\t}],\n\t\t\t\"targets\": {\n\t\t\t\t...\n\t\t\t}\n\t\t}\n\t}\n}\n```\n\nUp until now, you could only navigate to an employee's resume with the deep link `webapp/index.html#/employees/3/resume`. This will always select the first tab as implemented by the `IconTabBar` control. In order to open the page directly with a specific tab selected and to make the tabs bookmarkable, we add the `?query` parameter to the URL pattern.\n\nThis allows URLs like `webapp/index.html#/employees/3/resume?tab=Projects` where the query parameter defines which tab shall be displayed. We change the pattern of the `employeeResume` route to `employees/{employeeId}/resume:?query:`. The new part `:?query:` allows to pass on queries with any parameters, for example, the hash `/#/employees/3/resume?tab=Projects` or `/#/employees/3/resume?tab=Projects&action=edit` matches the pattern and can be processed in the matched event.\n\nThe `:?query:` parameter starts and ends with \"`:`\", which means that it is optional. If you want to make it mandatory, you can use the `{?query}` syntax \\(everything in between `{}` is considered as being mandatory\\).\n\n\n\n## webapp/view/employee/Resume.view.xml\n\n```xml\n<mvc:View\n\tcontrollerName=\"sap.ui.demo.nav.controller.employee.Resume\"\n\txmlns=\"sap.m\"\n\txmlns:mvc=\"sap.ui.core.mvc\">\n\t<Page\n\t\ttitle=\"{i18n>ResumeOf} {FirstName} {LastName}\"\n\t\tid=\"employeeResumePage\"\n\t\tshowNavButton=\"true\"\n\t\tnavButtonPress=\".onNavBack\">\n\t\t<content>\n\t\t\t<IconTabBar\n\t\t\t\tid=\"iconTabBar\"\n\t\t\t\theaderBackgroundDesign=\"Transparent\"\n\t\t\t\tclass=\"sapUiResponsiveContentPadding\"\n\t\t\t\tbinding=\"{Resume}\"\n\t\t\t\tselect=\".onTabSelect\"\n\t\t\t\tselectedKey=\"{view>/selectedTabKey}\">\n\t\t\t\t<items>\n\t\t\t\t\t<IconTabFilter id=\"infoTab\" text=\"{i18n>tabInfo}\" key=\"Info\">\n\t\t\t\t\t\t<Text text=\"{Information}\"/>\n\t\t\t\t\t</IconTabFilter>\n\t\t\t\t\t<IconTabFilter id=\"projectsTab\" text=\"{i18n>tabProjects}\" key=\"Projects\">\n\t\t\t\t\t\t<mvc:XMLView viewName=\"sap.ui.demo.nav.view.employee.ResumeProjects\"></mvc:XMLView>\n\t\t\t\t\t</IconTabFilter>\n\t\t\t\t\t<IconTabFilter id=\"hobbiesTab\" text=\"{i18n>tabHobbies}\" key=\"Hobbies\">\n\t\t\t\t\t\t<Text text=\"{Hobbies}\"/>\n\t\t\t\t\t</IconTabFilter>\n\t\t\t\t\t<IconTabFilter id=\"notesTab\" text=\"{i18n>tabNotes}\" key=\"Notes\">\n\t\t\t\t\t\t<Text text=\"{Notes}\"/>\n\t\t\t\t\t</IconTabFilter>\n\t\t\t\t</items>\n\t\t\t</IconTabBar>\n\t\t</content>\n\t</Page>\n</mvc:View>\n\n```\n\nTo update the currently selected tab in the URL we listen to the select event of the `IconTabBar` by setting `select=\".onTabSelect\"` in the resume view. The `selectedKey` is bound to a view model. This allows to easily change the `selectedKey` according to the selected tab in the URL.\n\n\n\n## webapp/controller/employee/Resume.controller.js\n\n```js\nsap.ui.define([\n\t\"sap/ui/demo/nav/controller/BaseController\",\n\t\"sap/ui/model/json/JSONModel\"\n\n], function (BaseController, JSONModel) {\n\t\"use strict\";\n\tvar _aValidTabKeys = [\"Info\", \"Projects\", \"Hobbies\", \"Notes\"];\n\treturn BaseController.extend(\"sap.ui.demo.nav.controller.employee.Resume\", {\n\t\tonInit: function () {\n\t\t\tvar oRouter = this.getRouter();\n\t\t\tthis.getView().setModel(new JSONModel(), \"view\");\n\n\t\t\toRouter.getRoute(\"employeeResume\").attachMatched(this._onRouteMatched, this);\n\t\t},\n\t\t_onRouteMatched: function (oEvent) {\n\t\t\tvar oArgs, oView, oQuery;\n\t\t\toArgs = oEvent.getParameter(\"arguments\");\n\t\t\toView = this.getView();\n\t\t\toView.bindElement({\n\t\t\t\tpath: \"/Employees(\" + oArgs.employeeId + \")\",\n\t\t\t\tevents: {\n\t\t\t\t\tchange: this._onBindingChange.bind(this),\n\t\t\t\t\tdataRequested: function (oEvent) {\n\t\t\t\t\t\toView.setBusy(true);\n\t\t\t\t\t},\n\t\t\t\t\tdataReceived: function (oEvent) {\n\t\t\t\t\t\toView.setBusy(false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\toQuery = oArgs[\"?query\"];\n\t\t\tif (oQuery && _aValidTabKeys.indexOf(oQuery.tab) > -1){\n\t\t\t\toView.getModel(\"view\").setProperty(\"/selectedTabKey\", oQuery.tab);\n\t\t\t} else {\n\t\t\t\t// the default query param should be visible at all time\n\t\t\t\tthis.getRouter().navTo(\"employeeResume\", {\n\t\t\t\t\temployeeId: oArgs.employeeId,\n\t\t\t\t\t\"?query\": {\n\t\t\t\t\t\ttab: _aValidTabKeys[0]\n\t\t\t\t\t}\n\t\t\t\t}, true /*no history*/);\n\t\t\t}\n\n\t\t},\n\t\t_onBindingChange: function (oEvent) {\n\t\t\t// No data for the binding\n\t\t\tif (!this.getView().getBindingContext()) {\n\t\t\t\tthis.getRouter().getTargets().display(\"notFound\");\n\t\t\t}\n\t\t},\n\t\tonTabSelect: function (oEvent){\n\t\t\tvar oCtx = this.getView().getBindingContext();\n\t\t\tthis.getRouter().navTo(\"employeeResume\", {\n\t\t\t\temployeeId: oCtx.getProperty(\"EmployeeID\"),\n\t\t\t\t\"?query\": {\n\t\t\t\t\ttab: oEvent.getParameter(\"selectedKey\")\n\t\t\t\t}\n\t\t\t}, true /*without history*/);\n\t\t}\n\n\t});\n});\n```\n\nWhen a tab is selected manually, its select handler is called. Therefore, let's first have a look at the `onTabSelect` event handler that is added at the end of the `resume` controller. It detects the `selectedKey` of the tab and navigates to the `employeeResume` route to update the URL in the address bar. Additionally to the mandatory parameter `employeeId`, we pass on a custom `query` object with a parameter `tab` and fill it with the `selectedKey` value that we receive from the `select` event of the `IconTabBar`. By passing on `true` as the third argument we replace the current history to make sure that manually clicked tabs won't be added to the browser history.\n\nA dependency to `sap/ui/model/json/JSONModel` is added to the controller. Now, we modify the `onInit` function to instantiate a JSONModel and use it as the `view` model. `_aValidTabKeys` is added to the controller. We want to make sure that only valid tabs can be selected. Therefore, the `array _aValidTabKeys` contains all allowed tab keys that we can check against to validate the tab parameter from the URL later. The keys are equal to the keys of our `IconTabFilters` in the `resume` view.\n\nIn the `_onRouteMatched` event handler, we add the `oQuery` variable to store a reference to the query object from the router. This allows a more comfortable access to the query object.\n\nIn case a query object is passed on and the `tab` parameter has a valid value, we display the specific tab by updating the property `selectedTabKey` in the view model. As the `selectedKey` property of the `IconTabBar` is bound to `{view>/selectedTabKey}` the corresponding tab is selected.\n\nThe `else` case is called when either no or an invalid tab parameter is specified. We navigate to the *Info* tab to make sure that the tab parameter is reflected in the URL at all times. The actual requirements of your app might differ, feel free to change it accordingly...\n\n\n\nFrom now on our tabs are bookmarkable. Try to access the following \\(deep\\) links directly:\n\n-   `webapp/index.html#/employees/3/resume`\n\n-   `webapp/index.html#/employees/3/resume?tab=Info`\n\n-   `webapp/index.html#/employees/3/resume?tab=Projects`\n\n-   `webapp/index.html#/employees/3/resume?tab=Hobbies`\n\n-   `webapp/index.html#/employees/3/resume?tab=Notes`\n\n-   `webapp/index.html#/employees/3/resume?tab=SomethingInvalid`\n\n\nWhen you click on any tab you will see that the hash in the URL changes immediately, and when you change the hash in the URL parameter manually, you can see that the UI is also updated accordingly.\n\n**Related Information**  \n\n\n[API Reference: `sap.m.IconTabBar`](https://ui5.sap.com/#/api/sap.m.IconTabBar)\n\n",
  "excerpt": "<!-- loiob8561ff6f4c34c85a91ed06d20814cd3 --> Step 9: Allow Bookmarkable Tabs with Optional Query Parameters The resume view contains four tabs as we have seen in the previous steps. However, when the...",
  "wordCount": 1068,
  "version": "1.0.0",
  "source": "sapui5",
  "sourceType": "github"
}