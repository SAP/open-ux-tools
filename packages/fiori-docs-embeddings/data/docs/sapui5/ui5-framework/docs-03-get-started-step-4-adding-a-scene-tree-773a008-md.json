{
  "id": "sapui5-docs-03-get-started-step-4-adding-a-scene-tree-773a008-md",
  "title": "Step 4: Adding a Scene Tree",
  "category": "ui5-framework",
  "path": "docs/03_Get-Started/step-4-adding-a-scene-tree-773a008.md",
  "lastModified": "2025-09-01T18:17:10.474Z",
  "tags": [
    "ui5-framework",
    "md",
    "Step",
    "Adding",
    "Scene",
    "Tree"
  ],
  "headers": [
    "Step 4: Adding a Scene Tree",
    "Preview",
    "Coding",
    "index.html",
    "Component.js",
    "i18n.properties",
    "manifest.json",
    "App.view.xml",
    "App.controller.js",
    "API Reference"
  ],
  "content": "<!-- loio773a0088c5a54d0cbeb985c347cb643f -->\n\n# Step 4: Adding a Scene Tree\n\nIn this step, you will be adding an `sap.ui.vk.SceneTree` control to your 3D Viewer application.\n\nThe following `sap.ui.vk` controls are introduced in this step:\n\n-   `SceneTree` control\n-   `ViewStateManager` control\n\nWe will use the `SceneTree` control to create a tree structure that displays the hierarchy of the nodes for the loaded model. We will then use the `ViewStateManager` control to link the Scene Tree with the model loaded into the Viewport, so that we can visually associate a selection in the scene with its corresponding node as displayed in the Scene Tree.\n\nThe content in this step builds on the code from [Step 3: 3D Viewer Using the Viewport Control](step-3-3d-viewer-using-the-viewport-control-112d7b4.md), and code changes performed in this step of the tutorial are done in relation to the files in [Step 3: 3D Viewer Using the Viewport Control](step-3-3d-viewer-using-the-viewport-control-112d7b4.md).\n\n\n\n## Preview\n\n  \n  \n**Viewer application with a Viewport and a Scene Tree**\n\n![](images/3D_Viewer_Tutorial_Step_04_-_Preview_a0d2e26.png \"Viewer application with a Viewport and a Scene Tree\")\n\n\n\n## Coding\n\nYou can view and download all files at [3D Viewer - Step 4 - Add a Scene Tree](https://ui5.sap.com/#/entity/sap.ui.vk.tutorial.VIT/sample/sap.ui.vk.tutorial.VIT.04).\n\n\n\n### index.html\n\nUpdate the `index.html` file to reference the `viewportScenetree` namespace, which will be the namespace we'll use for the sample application in this step.\n\n```html\n<!DOCTYPE HTML>\n<html>\n    <head>\n        <meta http-equiv=\"Content-Type\" content=\"text/html;charset=UTF-8\"/>\n    <script id=\"sap-ui-bootstrap\"\n        src=\"https://ui5.sap.com/resources/sap-ui-core.js\"\n        data-sap-ui-theme=\"sap_horizon\"\n        data-sap-ui-compat-version=\"edge\"\n        data-sap-ui-async=\"true\"\n        data-sap-ui-libs=\"sap.ui.vk, sap.m\"\n        data-sap-ui-resource-roots='{\n            \"viewportScenetree\": \"./\"\n        }'>\n    </script>\n    <script>\n    sap.ui.getCore().attachInit(function(){\n        new sap.m.Shell({\n            app: new sap.ui.core.ComponentContainer({\n                name : \"viewportScenetree\"\n            })\n        }).placeAt(\"content\");\n    });\n    </script>\n    </head>\n    <body id=\"content\" class=\"sapUiBody\">\n    </body>\n</html>\n```\n\n\n\n### Component.js\n\nUpdate the `Component.js` file to reference the namespace specified for this application.\n\n```js\nsap.ui.define([\n    \"sap/ui/core/UIComponent\"\n], function (UIComponent) {\n    \"use strict\";\n\n    return UIComponent.extend(\"viewportScenetree.Component\", {\n        metadata: {\n            manifest: \"json\"\n        },\n        init: function () {\n            // call the init function of the parent\n            UIComponent.prototype.init.apply(this, arguments);\n        }\n    });\n});\n```\n\n\n\n### i18n.properties\n\nUpdate the page title to say \"Viewport with Scene Tree\".\n\n```ini\n# Page Descriptor\npageTitle=Viewport with Scene Tree\n```\n\n\n\n### manifest.json\n\nUpdate the `manifest.json` file so that it references the correct files.\n\n```js\n{\n    \"_version\": \"1.8.0\",\n    \"sap.app\": {\n        \"id\": \"viewportScenetree\",\n        \"type\": \"application\",\n        \"i18n\": \"i18n/i18n.properties\",\n        \"title\": \"{{appTitle}}\",\n        \"description\": \"{{appDescription}}\",\n        \"applicationVersion\": {\n            \"version\": \"1.0.0\"\n        }\n    },\n    \"sap.ui\": {\n        \"technology\": \"UI5\",\n        \"deviceTypes\": {\n            \"desktop\": true,\n            \"tablet\": true,\n            \"phone\": true\n        }\n    },\n    \"sap.ui5\": {\n        \"rootView\": \"viewportScenetree.view.App\",\n        \"dependencies\": {\n            \"minUI5Version\": \"1.30\",\n            \"libs\": {\n                \"sap.m\": {}\n            }\n        },\n        \"models\": {\n            \"i18n\": {\n                \"type\": \"sap.ui.model.resource.ResourceModel\",\n                \"settings\": {\n                    \"bundleName\": \"viewportScenetree.i18n.i18n\"\n                }\n            }\n        }\n    }\n}\n```\n\n\n\n### App.view.xml\n\nTo display the Scene Tree in your application, add the `<vk:SceneTree>` element. In the element's attribute's, specify the Scene Tree control's width and height on the screen, and give it an arbitrary identifier value.\n\n```xml\n<mvc:View\n        controllerName=\"viewportScenetree.controller.App\"\n        xmlns=\"sap.m\"\n        xmlns:mvc=\"sap.ui.core.mvc\"\n        xmlns:vk=\"sap.ui.vk\"\n        xmlns:l=\"sap.ui.layout\"\n        xmlns:f=\"sap.ui.layout.form\"\n        xmlns:u=\"sap.ui.unified\"\n        displayBlock=\"true\">\n    <App id=\"viewportScenetree\">\n        <Page\n                title=\"{i18n>pageTitle}\">\n            <vk:Viewport\n                    id=\"viewport\"\n                    width=\"100%\"\n                    height=\"50%\"/>\n            <vk:SceneTree\n                    id=\"scenetree\"/>\n        </Page>\n    </App>\n</mvc:View>\n```\n\n\n\n### App.controller.js\n\nFor the most part, the code in the `App.controller.js` file will be the same as the content of the `App.controller.js` file for the application in [Step 3: 3D Viewer Using the Viewport Control](step-3-3d-viewer-using-the-viewport-control-112d7b4.md). The highlighted sections in the following code block indicate the additions and changes made in the code to incorporate a Scene Tree in the 3D Viewer application.\n\n```js\nsap.ui.define([\n    \"sap/base/Log\",\n    \"sap/ui/core/mvc/Controller\",\n    \"sap/ui/vk/ContentResource\",\n    \"sap/ui/vk/ContentConnector\"\n], function (Log, Controller, ContentResource, ContentConnector) {\n    \"use strict\";\n\n    var contentResource = new ContentResource({\n        source: \"models/boxTestModel.vds\",\n        sourceType: \"vds4\",\n        id: \"abc123\"\n    });\n    return Controller.extend(\"viewportScenetree.controller.App\",{\n        onInit: function() {\n            var view = this.getView();\n            var sceneTree = view.byId(\"scenetree\");\n            var contentConnector = new ContentConnector({\n                contentChangesFinished: function(event) {\n                    var failureReason = event.getParameter(\"failureReason\");\n                    if (failureReason) {\n                        Log.error(\"Some of content resources cannot be loaded: \" + failureReason);\n                } else {\n                       Log.info(\"Scene successfully loaded\");\n                }\n            });\n            var viewStateManager = new ViewStateManager({\n                contentConnector: contentConnector\n            });\n            viewport.setViewStateManager(viewStateManager);\n            viewport.setContentConnector(contentConnector);\n            sceneTree.setViewStateManager(viewStateManager);\n            sceneTree.setContentConnector(contentConnector);\n            contentConnector.addContentResource(contentResource);\n        }\n    });\n});\n```\n\nLet us look at the changes in more detail.\n\nThe following code line gets a reference to a new Scene Tree object.\n\n```js\nvar sceneTree = view.byId(\"scenetree\");\n```\n\nWe create a new object called `viewStateManager` that gets the node hierarchy of the resource that's loaded into the scene and takes care of nodes 'states' for example visibility or selection states. Then, we associate newly created `viewStateManager` object with our Viewport and `sceneTree`. We also associate the Content Connector to the `viewStateManager` and `sceneTree` objects so they can get notified when content is changed.\n\n```js\nvar viewStateManager = new ViewStateManager({\n    contentConnector: contentConnector\n});\nviewport.setViewStateManager(viewStateManager);\nviewport.setContentConnector(contentConnector);\nsceneTree.setViewStateManager(viewStateManager);\nsceneTree.setContentConnector(contentConnector);\n```\n\nFinally, we load Content Resource in Content Connector to take care of notifying the `Viewport` and `SceneTree` when the model is loaded.\n\n```js\ncontentConnector.addContentResource(contentResource);\n```\n\nNow you can select box in Scene Tree and it will be selected in the Viewport. In the same way, if you click on the box in the Viewport and select it then this will select it in Scene Tree. You can change the visibility state of the box in the Scene Tree by clicking the eye icon; this hides or shows the box in Viewport. This means that `ViewStateManager` has been connected to both objects and keeps them synchorized.\n\n\n\n## API Reference\n\n-   [`sap.ui.vk.SceneTree`](https://ui5.sap.com/#/api/sap.ui.vk.SceneTree)\n-   [`sap.ui.vk.ViewStateManager`](https://ui5.sap.com/#/api/sap.ui.vk.ViewStateManager)\n\n**Related Information**  \n\n\n[Scene Tree](../10_More_About_Controls/scene-tree-ab70215.md \"\")\n\n",
  "excerpt": "<!-- loio773a0088c5a54d0cbeb985c347cb643f --> Step 4: Adding a Scene Tree In this step, you will be adding an sap.ui.vk.SceneTree control to your 3D Viewer application. The following sap.ui.vk control...",
  "wordCount": 840,
  "version": "1.0.0",
  "source": "sapui5",
  "sourceType": "github"
}