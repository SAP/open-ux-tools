{
  "id": "sapui5-docs-09-developing-controls-provide-the-design-time-metadata-for-the-settings-action-326a77d-md",
  "title": "Provide the Design-Time Metadata for the *Settings* Action",
  "category": "ui5-framework",
  "path": "docs/09_Developing_Controls/provide-the-design-time-metadata-for-the-settings-action-326a77d.md",
  "lastModified": "2025-09-01T18:17:10.682Z",
  "tags": [
    "ui5-framework",
    "md",
    "Provide",
    "the",
    "Design",
    "Time",
    "Metadata",
    "for",
    "Settings",
    "Action"
  ],
  "headers": [
    "Provide the Design-Time Metadata for the *Settings* Action",
    "Single Settings Action",
    "Multiple Settings Actions",
    "Handler Function",
    "Creating Manifest Changes Using Settings"
  ],
  "content": "<!-- loio326a77d194fe4243849cc89b15221ec9 -->\n\n# Provide the Design-Time Metadata for the *Settings* Action\n\nProvide the design-time metadata and the meta functions needed when the *settings* action is performed.\n\n\n\n<a name=\"loio326a77d194fe4243849cc89b15221ec9__section_mlz_vf4_hyb\"/>\n\n## Single Settings Action\n\nThe module returns an object literal with the following properties:\n\n\n<table>\n<tr>\n<th valign=\"top\">\n\nProperty\n\n\\(Level 1\\)\n\n</th>\n<th valign=\"top\">\n\nProperty\n\n\\(Level 2\\)\n\n</th>\n<th valign=\"top\">\n\nProperty\n\n\\(Level 3\\)\n\n</th>\n<th valign=\"top\">\n\nProperty\n\n\\(Level 4\\)\n\n</th>\n<th valign=\"top\">\n\nDescription\n\n</th>\n</tr>\n<tr>\n<td valign=\"top\" rowspan=\"11\">\n\n`actions: <object>` \\(mandatory\\)\n\n</td>\n<td valign=\"top\">\n\n\\-\\>\n\n</td>\n<td valign=\"top\">\n\n\\-\\>\n\n</td>\n<td valign=\"top\">\n\n\\-\\>\n\n</td>\n<td valign=\"top\">\n\nDescribes the actions that can be applied to the element.\n\n</td>\n</tr>\n<tr>\n<td valign=\"top\" rowspan=\"10\">\n\n`\"settings\": <object> | <function>`\n\n</td>\n<td valign=\"top\">\n\n\\-\\>\n\n</td>\n<td valign=\"top\">\n\n\\-\\>\n\n</td>\n<td valign=\"top\">\n\nProvides or calculates the design-time metadata specific to the *settings* action for an element as an object with the following properties.\n\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n\n`isEnabled: <function> | <boolean>` \\(optional\\)\n\n</td>\n<td valign=\"top\">\n\n\\-\\>\n\n</td>\n<td valign=\"top\">\n\nThis method influences the enablement of settings in the context menu for a selected element. By default it's `true`. If a selected element under some boundary conditions doesn't have this context menu item, it returns `false`.\n\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n\n`name: <i18n key>|<function>` \\(optional\\)\n\n</td>\n<td valign=\"top\">\n\n\\-\\>\n\n</td>\n<td valign=\"top\">\n\n`i18n` key from library resource bundle or function returning translated text as string. This text is used in the context menu entry, otherwise it's called *Settings*.\n\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n\n`icon: <string>` \\(optional\\)\n\n</td>\n<td valign=\"top\">\n\n\\-\\>\n\n</td>\n<td valign=\"top\">\n\nThis property allows you to define an individual icon for the *Settings* action. The default icon is: `sap-icon://key-user-settings` \n\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n\n`handler: <function>` \\(mandatory\\)\n\n</td>\n<td valign=\"top\">\n\n\\-\\>\n\n</td>\n<td valign=\"top\">\n\nThis method handles everything concerning the changes in the settings of a control and returns a promise with an object including change-specific data.\n\nSee the next sections for examples and parameters.\n\n</td>\n</tr>\n<tr>\n<td valign=\"top\" rowspan=\"5\">\n\n`submenu: <object[]>`\n\n</td>\n<td valign=\"top\">\n\n\\-\\>\n\n</td>\n<td valign=\"top\">\n\nArray of submenu entries.\n\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n\n`name <string>`\n\n</td>\n<td valign=\"top\">\n\nName to be shown on the UI.\n\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n\n`icon <string>` \\(optional\\)\n\n</td>\n<td valign=\"top\">\n\nIcon to be shown on the UI, default is blank.\n\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n\n`enabled <boolean>` \\(optional\\)\n\n</td>\n<td valign=\"top\">\n\nControls if the button is enabled or not, default is `true`.\n\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n\n`key <string>` \\(optional\\)\n\n</td>\n<td valign=\"top\">\n\nThis key will be available in the handler on the custom data of the `eventItem` object.\n\n</td>\n</tr>\n</table>\n\n\n\n<a name=\"loio326a77d194fe4243849cc89b15221ec9__section_htg_jh4_hyb\"/>\n\n## Multiple Settings Actions\n\nEach action requires an identifier, a text to be displayed on the context menu and its own handler to execute. The order of the actions on the context menu is the same as the order in which they're described in the `designtime` file.\n\n\n<table>\n<tr>\n<th valign=\"top\">\n\nProperty\n\n\\(Level 1\\)\n\n</th>\n<th valign=\"top\">\n\nProperty\n\n\\(Level 2\\)\n\n</th>\n<th valign=\"top\">\n\nProperty\n\n\\(Level 3\\)\n\n</th>\n<th valign=\"top\">\n\nProperty\n\n\\(Level 4\\)\n\n</th>\n<th valign=\"top\">\n\nProperty\n\n\\(Level 5\\)\n\n</th>\n<th valign=\"top\">\n\nDescription\n\n</th>\n</tr>\n<tr>\n<td valign=\"top\" rowspan=\"11\">\n\n`actions:<object>` \\(mandatory\\)\n\n</td>\n<td valign=\"top\">\n\n\\-\\>\n\n</td>\n<td valign=\"top\">\n\n\\-\\>\n\n</td>\n<td valign=\"top\">\n\n\\-\\>\n\n</td>\n<td valign=\"top\">\n\n\\-\\>\n\n</td>\n<td valign=\"top\">\n\nDescribes the actions that can be applied to the element.\n\n</td>\n</tr>\n<tr>\n<td valign=\"top\" rowspan=\"10\">\n\n`\"settings\": <object>|<function>`\n\n</td>\n<td valign=\"top\">\n\n`{`\n\n</td>\n<td valign=\"top\">\n\n\\-\\>\n\n</td>\n<td valign=\"top\">\n\n\\-\\>\n\n</td>\n<td valign=\"top\">\n\nFor multiple actions, return them in a map object. Entries are shown in this order in the context menu.\n\n</td>\n</tr>\n<tr>\n<td valign=\"top\" rowspan=\"8\">\n\n \n\n</td>\n<td valign=\"top\">\n\n`\"<key>\": <object>`\n\n</td>\n<td valign=\"top\">\n\n\\-\\>\n\n</td>\n<td valign=\"top\">\n\nDescribes the settings action called `<key>`\n\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n\n`{`\n\n</td>\n<td valign=\"top\">\n\n \n\n</td>\n<td valign=\"top\">\n\n \n\n</td>\n</tr>\n<tr>\n<td valign=\"top\" rowspan=\"4\">\n\n \n\n</td>\n<td valign=\"top\">\n\n`name: <i18n key>|<function>` \\(mandatory\\)\n\n</td>\n<td valign=\"top\">\n\nThe text for context menu entries is mandatory for multiple settings actions to distinguish the different entries.\n\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n\n`isEnabled: <function>` \\(optional\\)\n\n</td>\n<td valign=\"top\">\n\nThis method influences the enablement of settings in the context menu for a selected element. By default it's `true`. If a selected element under some boundary conditions doesn't have this context menu item, it returns `false`.\n\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n\n`icon: <string>` \\(optional\\)\n\n</td>\n<td valign=\"top\">\n\nThis property allows you to define an individual icon for the *Settings* action. The default icon is: `sap-icon://key-user-settings` \n\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n\n`handler: <function>` \\(mandatory\\)\n\n</td>\n<td valign=\"top\">\n\nThis method handles everything concerning the changes in the settings of a control and returns a promise with an object including change-specific data.\n\nSee the next sections for examples and parameters.\n\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n\n`},`\n\n</td>\n<td valign=\"top\">\n\n \n\n</td>\n<td valign=\"top\">\n\n \n\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n\n`<other action>`\n\n</td>\n<td valign=\"top\">\n\n\\-\\>\n\n</td>\n<td valign=\"top\">\n\nSee previous rows. Other actions follow the same schema and have the same properties / functions.\n\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n\n`};`\n\n</td>\n<td valign=\"top\">\n\n \n\n</td>\n<td valign=\"top\">\n\n \n\n</td>\n<td valign=\"top\">\n\n \n\n</td>\n</tr>\n</table>\n\n\n\n<a name=\"loio326a77d194fe4243849cc89b15221ec9__section_zsg_s34_hyb\"/>\n\n## Handler Function\n\nWe call the handler function with two parameters: `oElement` and `mPropertyBag`. Use the following methods:\n\n-   `mPropertyBag.getUnsavedChanges`: Function that returns an array of unsaved changes.\n\n-   `mPropertyBag.styleClass`: Contains the name of the CSS class that every dialog/popup from SAPUI5 flexibility \\(including the settings-dialog\\) needs to have. Add this style class to the control if you build a dialog or popup.\n\n\nHere's an example with one action:\n\n> ### Sample Code:  \n> `<control>.designtime.js`\n> \n> ```\n> sap.ui.define(['<your namespace>/YourControl'], function(YourControl) {\n>     \"use strict\";\n>     return {\n>         actions: {\n>             settings: {\n>                 handler: function(oYourControl, mPropertyBag) {\n>                     return new Promise(function(resolve) {\n>                         // For example, open a dialog to handle the settings\n>                         YourControl.createDialog().addClass(mPropertyBag.styleClass) // Please attach the RTA style so that users will recognize your dialog belongs to key user adaptation and not the app\n>                         // Handle dialog close and resolve promise with data to create the corresponding changes:\n>                         resolve([{\n>                             selectorControl: oYourControl,\n>                             changeSpecificData: {\n>                                 changeType: \"yourChangeType\",\n>                                 content: \"changeSpecificContent\" // Can also be a deep object, your change handler has to handle it\n>                             }\n>                         },{\n>                             selectorControl: { // If control doesn't exist at the moment you can return the following data\n>                                 id: \"idOfNotYetExistingControl\",\n>                                 controlType: \"sap.ui.XXX.YourControlType\", // Needed to retrieve the change handler\n>                                 appComponent: oAppComponent  // You can use sap.ui.fl.Utils.getAppComponentForControl(oYourControl) for it\n>                             },\n>                             changeSpecificData: {\n>                                 changeType: \"yourChangeType\",\n>                                 content: \"changeSpecificContent\" // Can also be a deep object, your change handler has to handle it\n>                             }\n>                         }]);\n>                     });\n>                 }\n>             };\n>         }\n>     }\n> });\n> ```\n\nHere's an example with more actions:\n\n> ### Sample Code:  \n> `<control>.designtime.js`\n> \n> ```\n> sap.ui.define([], function() {\n>     \"use strict\";\n>     return {\n>         actions: {\n>             settings: {\n>                 action1: { // This action will be always enabled and its context menu text (name) will be retrieved from i18n\n>                     name: \"ACTION1_i18n_KEY\",\n>                     handler: function(oControl, mPropertyBag) {\n>                         return ActionExecuter.execute(oControl, mPropertyBag);\n>                     }\n>                 },\n>                 action2: { // This action's context menu text (name) is retrieved by a function, and the enabled check is also a function\n>                     name: function() {\n>                         return \"Execute Action 2\"; // This is just an example! Remember to use translatable strings.\n>                     },\n>                     isEnabled: function(oControl) {\n>                         return checkEnabled(oControl);\n>                     },\n>                     handler: function(oControl, mPropertyBag) {\n>                         // You can, for example, build the changes inline; but it is recommended to implement a handler to keep the designtime.js file clean\n>                         return new Promise(function(resolve) {\n>                             resolve([{\n>                                 selectorControl: oControl,\n>                                 changeSpecificData: {\n>                                     changeType: \"myChangeType\",\n>                                     content: \"changeSpecificContent\"\n>                                 }\n>                             }]);\n>                         });\n>                     }\n>                 }\n>             }\n>         }\n>     };\n> });\n> ```\n\n\n\n<a name=\"loio326a77d194fe4243849cc89b15221ec9__section_kxw_nys_hyb\"/>\n\n## Creating Manifest Changes Using Settings\n\nIn addition to the usual SAPUI5 flexibility changes, the *Settings* action can also create changes that modify the `manifest.json` file.\n\nManifest changes are used, for example, on an Overview Page \\(OVP\\), where adding a card modifies the manifest.\n\nIn most cases, the change must also be visible when the user creates it. For example, when users click on *Add Card*, they want to see the new card on the screen. For this reason, in the usual case, a flexibility change is created in parallel with the manifest change, as shown in this diagram:\n\n![The Handler calls the Settuings Plugin with an array of mChangeContent, which contains the change types and all data required for each change. The Settings Plugin then creates a Settings Command and an AppDescritor Command. The Settings Command creates and executes the Flex Change on the UI and applies the change. The actual action execution requires a change handler. The AppDescriptor Command creates and executes an AppDescriptor Change and persists it. The manifest (app descriptor) change is saved in the layered repository (LREP) to include the new card when the app is loaded.](images/Creating_App_Descriptor_Changes_Using_Settings_b1c32cb.png)\n\nIf the flexibility change is only relevant during the execution of SAPUI5 flexibility \\(because the \"real\" change is saved on the manifest\\), it needs to have parameter `runtimeOnly: true`. If you set this parameter, the change is not persisted.\n\nOn the other hand, a change that has the manifest as the target needs the `appDescriptorChangeType` parameter instead of `changeType`. Here's an example:\n\n> ### Sample Code:  \n> <control\\>.designtime.js\n> \n> ```\n> actions: {\n>     settings: {\n>         handler: function(oSelectedElement, mPropertyBag) {\n>             return openAddCardDialog(oSelectedElement, mPropertyBag.styleClass).then(function(mChangeContent)) {\n>                 return [\n>                     {\n>                         // appDescriptorChange does not need a selector control\n>                         appComponent: oSelectedElement.getAppComponent(), // example\n>                         changeSpecificData: {\n>                             appDescriptorChangeType: \"appdescr_ovp_addNewCard\",\n>                             content: {\n>                                 parameters: mChangeContent.parameters,\n>                                 texts: mChangeContent.texts\n>                             }\n>                         }\n>                     },\n>                     {\n>                         selectorControl: oSelectedElement,\n>                         changeSpecificData: {\n>                             runtimeOnly: true, // UI change would be used only at runtime to modify the app; it will not be persisted\n>                             changeType: \"addCard\",\n>                             content: toUIChange(mChangeContent) // Allows for different parameters in runtime or manifest change\n>                         }\n>                     }\n>                 ])\n>             });\n>         }\n>     }\n> }\n> ```\n\nThis example is for a single action created with *Settings*, but there are no restrictions that prevent implementing multiple actions in *Settings*, which can create manifest changes as well.\n\n",
  "excerpt": "<!-- loio326a77d194fe4243849cc89b15221ec9 --> Provide the Design-Time Metadata for the Settings Action Provide the design-time metadata and the meta functions needed when the settings action is perfor...",
  "wordCount": 1715,
  "version": "1.0.0",
  "source": "sapui5",
  "sourceType": "github"
}