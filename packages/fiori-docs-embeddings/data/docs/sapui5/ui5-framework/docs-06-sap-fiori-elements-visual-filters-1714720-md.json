{
  "id": "sapui5-docs-06-sap-fiori-elements-visual-filters-1714720-md",
  "title": "Visual Filters",
  "category": "ui5-framework",
  "path": "docs/06_SAP_Fiori_Elements/visual-filters-1714720.md",
  "lastModified": "2025-09-01T18:17:10.662Z",
  "tags": [
    "ui5-framework",
    "md",
    "Visual",
    "Filters"
  ],
  "headers": [
    "Visual Filters",
    "`ValueList` Annotation",
    "`PresentationVariant` Qualifier",
    "Chart Annotation",
    "Annotation: `SelectionFields`",
    "Annotation: `SelectionVariant`",
    "Charts",
    "Chart Type",
    "Chart Title",
    "Text Arrangement",
    "Lazy Loading of Visual Filters",
    "Fixed Values on Visual Filters",
    "Date Selection",
    "**Unit of Measure with Multiple Units of Measure**",
    "Semantic Coloring for Visual Filters Based on Dimension Values",
    "Guidelines",
    "Additional Features in SAP Fiori Elements for OData V2",
    "Display of Empty Values",
    "Date Selection",
    "Number Formatting",
    "Semantic Coloring for Visual Filters Based on Measure Values",
    "Grouping Visual Filter Calls \\(Optional\\)",
    "Text for Unit of Measure",
    "Additional Features in SAP Fiori Elements for OData V4",
    "Line Chart",
    "Date Selection",
    "Number Formatting",
    "Semantic Coloring for Visual Filters Based on Measure Values"
  ],
  "content": "<!-- loio1714720cae984ad8b9d9111937e7cd38 -->\n\n# Visual Filters\n\nAn intuitive way of choosing filter values from an associated measure value.\n\n\n\nYou can configure visual filters by enhancing the `ValueList` annotation associated with the filter field. For more information, see [Enhancing ValueList Annotations for Visual Filters](enhancing-valuelist-annotations-for-visual-filters-16d43eb.md). This setup supports line and bar charts.\n\nYou must ensure that the records available through the value help entity set associated with the visual filter are the same as the records available through the value help entity set associated with the regular filter field. This is required for a smooth sync of the selected values across the different filter modes.\n\nThe visual filter includes only the first measure and dimension from the first chart annotation within the specified `PresentationVariantQualifier`. Ensure that the dimension specified in the chart matches the `ValueListProperty` of the `OUT` parameter. To control the sort order, define a `SortOrder` property in the `PresentationVariant` annotation.\n\n> ### Note:  \n> Sorting in visual filters is based on the following logic:\n> \n> -   For bar charts and donut charts in SAP Fiori elements for OData V2, sorting is always based on the displayed measure, with descending order as the default sort order. To modify the sort order, define the `SortOrder` property in the `PresentationVariant` annotation.\n> \n> -   For line charts with time-based dimensions, sorting is always based on the dimension displayed in ascending order, however, only the last six time periods are displayed.\n> \n>     Sorting by the annotation is ignored for line charts with time-based dimensions in the visual filter.\n> \n> -   For line charts with non time-based dimensions, sorting is always based on the dimension, with ascending order as the default sort order. To modify the sort order, define the `SortOrder` property in the `PresentationVariant` annotation.\n\n![](images/VF_FC_77f4724.png)\n\n\n\n### `ValueList` Annotation\n\nThis is an example of a code snippet for a value list annotation. You use it to configure visual filters. For more information, see [Enhancing ValueList Annotations for Visual Filters](enhancing-valuelist-annotations-for-visual-filters-16d43eb.md).\n\n> ### Sample Code:  \n> XML Annotation\n> \n> ```\n> <Annotations xmlns=\"http://docs.oasis-open.org/odata/ns/edm\" Target=\"SEPMRA_ALP_SO_ANA_SRV.SEPMRA_C_ALP_SlsOrdItemCubeALPResult/SalesOrderOverallStatus\">\n>    <Annotation Term=\"Common.ValueList\" Qualifier=\"VisualFilter\">\n>       <Record>\n>          <PropertyValue Property=\"Label\" String=\"Overall Status\" />\n>          <PropertyValue Property=\"CollectionPath\" String=\"SEPMRA_C_ALP_SlsOrdItemCubeALPResults\" />\n>          <PropertyValue Property=\"SearchSupported\" Bool=\"false\" />\n>          <PropertyValue Property=\"PresentationVariantQualifier\" String=\"FilterNumberOfSalesOrdersByStatus\" />\n>          <PropertyValue Property=\"SelectionVariantQualifier\" String=\"SVForStatus\" />\n>          <PropertyValue Property=\"Parameters\">\n>             <Collection>\n>                <Record Type=\"Common.ValueListParameterInOut\">\n>                   <PropertyValue Property=\"LocalDataProperty\" PropertyPath=\"SalesOrderOverallStatus\" />\n>                   <PropertyValue Property=\"ValueListProperty\" String=\"SalesOrderOverallStatus\" />\n>                </Record>\n>                <Record Type=\"Common.ValueListParameterInOut\">\n>                   <PropertyValue Property=\"LocalDataProperty\" PropertyPath=\"MainProductCategory\" />\n>                   <PropertyValue Property=\"ValueListProperty\" String=\"MainProductCategory\" />\n>                </Record>\n>                <Record Type=\"Common.ValueListParameterInOut\">\n>                   <PropertyValue Property=\"LocalDataProperty\" PropertyPath=\"ProductCategory\" />\n>                   <PropertyValue Property=\"ValueListProperty\" String=\"ProductCategory\" />\n>                </Record>\n>             </Collection>\n>          </PropertyValue>\n>       </Record>\n>    </Annotation>\n> </Annotations>\n> ```\n\n> ### Sample Code:  \n> CAP CDS Annotation\n> \n> ```\n> annotate SEPMRA_ALP_SO_ANA_SRV.SEPMRA_C_ALP_SlsOrdItemCubeALPResult with {\n>   @Common.ValueList #VisualFilter : {\n>     Label : 'Overall Status',\n>     CollectionPath : 'SEPMRA_C_ALP_SlsOrdItemCubeALPResults',\n>     SearchSupported : false,\n>     PresentationVariantQualifier : 'FilterNumberOfSalesOrdersByStatus',\n>     SelectionVariantQualifier : 'SVForStatus',\n>     Parameters : [\n>         {\n>             $Type : 'Common.ValueListParameterInOut',\n>             LocalDataProperty : SalesOrderOverallStatus,\n>             ValueListProperty : 'SalesOrderOverallStatus'\n>         },\n>         {\n>             $Type : 'Common.ValueListParameterInOut',\n>             LocalDataProperty : MainProductCategory,\n>             ValueListProperty : 'MainProductCategory'\n>         },\n>         {\n>             $Type : 'Common.ValueListParameterInOut',\n>             LocalDataProperty : ProductCategory,\n>             ValueListProperty : 'ProductCategory'\n>         }\n>     ]\n>   }\n>   SalesOrderOverallStatus\n> };\n> \n> ```\n\n> ### Note:  \n> For information about the IN/OUT mapping of visual filters, see [Enhancing ValueList Annotations for Visual Filters](enhancing-valuelist-annotations-for-visual-filters-16d43eb.md).\n\n\n\n### `PresentationVariant` Qualifier\n\nThe `PresentationVariant` qualifier provides chart definitions for visual filters. The visual filter picks up the first chart annotation in the `PresentationVariant` annotation to render the chart. If the chart type isn't supported, the analytical list page renders a bar chart as the default chart type.\n\n> ### Sample Code:  \n> XML Annotation\n> \n> ```\n> <Annotation Term=\"UI.PresentationVariant\" Qualifier=\"FilterNumberOfSalesOrdersByStatus\">\n>    <Record>\n>       <PropertyValue Property=\"Text\" String=\"Filter: Number of Sales Order by Status\" />\n>       <PropertyValue Property=\"SortOrder\">\n>          <Collection>\n>             <Record Type=\"Common.SortOrderType\">\n>                <PropertyValue Property=\"Property\" PropertyPath=\"NumberOfSalesOrders\" />\n>                <PropertyValue Property=\"Descending\" Bool=\"true\" />\n>             </Record>\n>          </Collection>\n>       </PropertyValue>\n>       <PropertyValue Property=\"Visualizations\">\n>          <Collection>\n>             <AnnotationPath>@UI.Chart#FilterNumberOfSalesOrdersByStatus</AnnotationPath>\n>          </Collection>\n>       </PropertyValue>\n>    </Record>\n> </Annotation>\n> ```\n\n> ### Sample Code:  \n> ABAP CDS Annotation\n> \n> ```\n> @UI.PresentationVariant: [\n>   {\n>     text: 'Filter: Number of Sales Order by Status',\n>     sortOrder: [\n>       {\n>         by: 'NUMBEROFSALESORDERS',\n>         direction: #DESC\n>       }\n>     ],\n>     visualizations: [\n>       {\n>         type: #AS_CHART,\n>         qualifier: 'FilterNumberOfSalesOrdersByStatus'\n>       }\n>     ],\n>     qualifier: 'FilterNumberOfSalesOrdersByStatus'\n>   }\n> ]\n> annotate view VIEWNAME with {\n> \n> }\n> ```\n\n> ### Sample Code:  \n> CAP CDS Annotation\n> \n> ```\n> UI.PresentationVariant #FilterNumberOfSalesOrdersByStatus : {\n>     Text : 'Filter: Number of Sales Order by Status',\n>     SortOrder : [\n>         {\n>             $Type : 'Common.SortOrderType',\n>             Property : NumberOfSalesOrders,\n>             Descending : true\n>         },\n>     ],\n>     Visualizations : [\n>         '@UI.Chart#FilterNumberOfSalesOrdersByStatus'\n>     ]\n> },\n> ```\n\n\n\n### Chart Annotation\n\n> ### Sample Code:  \n> XML Annotation\n> \n> ```\n> <Annotation Term=\"UI.Chart\" Qualifier=\"FilterNumberOfSalesOrdersByStatus\">\n>    <Record Type=\"UI.ChartDefinitionType\">\n>       <PropertyValue Property=\"Title\" String=\"Sales Orders by Status\" />\n>       <PropertyValue Property=\"Description\" String=\"Number of Sales Orders by Status\" />\n>       <PropertyValue Property=\"ChartType\" EnumMember=\"UI.ChartType/Donut\" />\n>       <PropertyValue Property=\"Dimensions\">\n>          <Collection>\n>             <PropertyPath>SalesOrderOverallStatus</PropertyPath>\n>          </Collection>\n>       </PropertyValue>\n>       <PropertyValue Property=\"DimensionAttributes\">\n>          <Collection>\n>             <Record Type=\"UI.ChartDimensionAttributeType\">\n>                <PropertyValue Property=\"Dimension\" PropertyPath=\"SalesOrderOverallStatus\" />\n>                <PropertyValue Property=\"Role\" EnumMember=\"UI.ChartDimensionRoleType/Category\" />\n>             </Record>\n>          </Collection>\n>       </PropertyValue>\n>       <PropertyValue Property=\"Measures\">\n>          <Collection>\n>             <PropertyPath>NumberOfSalesOrders</PropertyPath>\n>          </Collection>\n>       </PropertyValue>\n>       <PropertyValue Property=\"MeasureAttributes\">\n>          <Collection>\n>             <Record Type=\"UI.ChartMeasureAttributeType\">\n>                <PropertyValue Property=\"Measure\" PropertyPath=\"NumberOfSalesOrders\" />\n>                <PropertyValue Property=\"Role\" EnumMember=\"UI.ChartMeasureRoleType/Axis1\" />\n>                <PropertyValue Property=\"DataPoint\" AnnotationPath=\"@UI.DataPoint#NumberOfSalesOrders\" />\n>             </Record>\n>          </Collection>\n>       </PropertyValue>\n>    </Record>\n> </Annotation>\n> ```\n\n> ### Sample Code:  \n> ABAP CDS Annotation\n> \n> ```\n> @UI.Chart: [\n>   {\n>     title: 'Sales Orders by Status',\n>     description: 'Number of Sales Orders by Status',\n>     chartType: #DONUT,\n>     dimensions: [\n>       'SALESORDEROVERALLSTATUS'\n>     ],\n>     dimensionAttributes: [\n>       {\n>         dimension: 'SalesOrderOverallStatus',\n>         role: #CATEGORY\n>       }\n>     ],\n>     measures: [\n>       'NUMBEROFSALESORDERS'\n>     ],\n>     measureAttributes: [\n>       {\n>         measure: 'NumberOfSalesOrders',\n>         role: #AXIS_1,\n> \t\tasDataPoint: true\n>       }\n>     ],\n>     qualifier: 'FilterNumberOfSalesOrdersByStatus'\n>   }\n> ]\n> annotate view VIEWNAME with {\n> \n> }\n> \n> ```\n\n> ### Sample Code:  \n> CAP CDS Annotation\n> \n> ```\n> UI.Chart #FilterNumberOfSalesOrdersByStatus : {\n>     $Type : 'UI.ChartDefinitionType',\n>     Title : 'Sales Orders by Status',\n>     Description : 'Number of Sales Orders by Status',\n>     ChartType : #Donut,\n>     Dimensions : [\n>         SalesOrderOverallStatus\n>     ],\n>     DimensionAttributes : [\n>         {\n>             $Type : 'UI.ChartDimensionAttributeType',\n>             Dimension : SalesOrderOverallStatus,\n>             Role : #Category\n>         }\n>     ],\n>     Measures : [\n>         NumberOfSalesOrders\n>     ],\n>     MeasureAttributes : [\n>         {\n>             $Type : 'UI.ChartMeasureAttributeType',\n>             Measure : NumberOfSalesOrders,\n>             Role : #Axis1,\n>             DataPoint : '@UI.DataPoint#NumberOfSalesOrders'\n>         }\n>     ]\n> }\n> \n> ```\n\n\n\n### Annotation: `SelectionFields`\n\nDefine the `SelectionFields` annotation for sorting the order of the fields displayed in the visual filters. If there are any mandatory filter fields that aren't specified in the `SelectionFields`, then these fields appear first, followed by the other entries in the `SelectionFields`.\n\n> ### Sample Code:  \n> XML Annotation\n> \n> ```\n> <Annotation Term=\"UI.SelectionFields\">\n>   <Collection>\n>     <PropertyPath>DeliveryCalendarYear</PropertyPath>\n>     <PropertyPath>SoldToParty</PropertyPath>\n>     <PropertyPath>Product</PropertyPath>\n>     <PropertyPath>MainProductCategory</PropertyPath>\n>     <PropertyPath>DeliveryCalendarQuarter</PropertyPath>\n>   </Collection>\n> </Annotation>\n> ```\n\n> ### Sample Code:  \n> ABAP CDS Annotation\n> \n> ```\n> @UI.SelectionField: [{ position: 10 }]\n> DELIVERYCALENDARYEAR;\n> \n> @UI.SelectionField: [{ position: 20 }]\n> SOLDTOPARTY;\n> \n> @UI.SelectionField: [{ position: 30 }]\n> PRODUCT;\n> \n> @UI.SelectionField: [{ position: 40 }]\n> MAINPRODUCTCATEGORY;\n> \n> @UI.SelectionField: [{ position: 50 }]\n> DELIVERYCALENDARQUARTER;\n> ```\n\n> ### Sample Code:  \n> CAP CDS Annotation\n> \n> ```\n> UI.SelectionFields : [\n>     DeliveryCalendarYear,\n>     SoldToParty,\n>     Product,\n>     MainProductCategory,\n>     DeliveryCalendarQuarter\n> ]\n> ```\n\n\n\n### Annotation: `SelectionVariant`\n\n> ### Sample Code:  \n> XML Annotation\n> \n> ```\n> <Annotation Term=\"UI.SelectionVariant\" Qualifier=\"SVForStatus\">\n>    <Record>\n>       <PropertyValue Property=\"Parameters\">\n>          <Collection>\n>             <Record Type=\"UI.Parameter\">\n>                <PropertyValue Property=\"PropertyName\" PropertyPath=\"CompanyCurrency\" />\n>                <PropertyValue Property=\"PropertyValue\" String=\"EUR\" />\n>             </Record>\n>          </Collection>\n>       </PropertyValue>\n>       <PropertyValue Property=\"SelectOptions\">\n>          <Collection>\n>             <Record Type=\"UI.SelectOptionType\">\n>                <PropertyValue Property=\"PropertyName\" PropertyPath=\"SalesOrderOverallStatus\" />\n>                <PropertyValue Property=\"Ranges\">\n>                   <Collection>\n>                      <Record Type=\"UI.SelectionRangeType\">\n>                         <PropertyValue EnumMember=\"UI.SelectionRangeSignType/E\" Property=\"Sign\" />\n>                         <PropertyValue EnumMember=\"UI.SelectionRangeOptionType/EQ\" Property=\"Option\" />\n>                         <PropertyValue Property=\"Low\" String=\"D\" />\n>                      </Record>\n>                   </Collection>\n>                </PropertyValue>\n>             </Record>\n>             <Record Type=\"UI.SelectOptionType\">\n>                <PropertyValue Property=\"PropertyName\" PropertyPath=\"Product\" />\n>                <PropertyValue Property=\"Ranges\">\n>                   <Collection>\n>                      <Record Type=\"UI.SelectionRangeType\">\n>                         <PropertyValue EnumMember=\"UI.SelectionRangeSignType/E\" Property=\"Sign\" />\n>                         <PropertyValue EnumMember=\"UI.SelectionRangeOptionType/EQ\" Property=\"Option\" />\n>                         <PropertyValue Property=\"Low\" String=\"HT-1502\" />\n>                      </Record>\n>                   </Collection>\n>                </PropertyValue>\n>             </Record>\n>          </Collection>\n>       </PropertyValue>\n>    </Record>\n> </Annotation>\n> ```\n\n> ### Sample Code:  \n> ABAP CDS Annotation\n> \n> ```\n> @UI.selectionVariant: [\n>   {\n>     qualifier: 'SVForStatus',\n> \tparameters: [{name: 'PropertyName', value: 'CompanyCurrency' },{ name: 'PropertyValue', value: 'EUR'}]\n>   }\n> ]\n> \n> ```\n\n> ### Sample Code:  \n> CAP CDS Annotation\n> \n> ```\n> UI.SelectionVariant #SVForStatus : {\n>     Parameters : [\n>         {\n>             $Type : 'UI.Parameter',\n>             PropertyName : CompanyCurrency,\n>             PropertyValue : 'EUR'\n>         }\n>     ],\n>     SelectOptions : [\n>         {\n>             $Type : 'UI.SelectOptionType',\n>             PropertyName : SalesOrderOverallStatus,\n>             Ranges : [\n>                 {\n>                     $Type : 'UI.SelectionRangeType',\n>                     Sign : #E,\n>                     Option : #EQ,\n>                     Low : 'D'\n>                 }\n>             ]\n>         },\n>         {\n>             $Type : 'UI.SelectOptionType',\n>             PropertyName : Product,\n>             Ranges : [\n>                 {\n>                     $Type : 'UI.SelectionRangeType',\n>                     Sign : #E,\n>                     Option : #EQ,\n>                     Low : 'HT-1502'\n>                 }\n>             ]\n>         }\n>     ]\n> }\n> \n> ```\n\n\n\n<a name=\"loio1714720cae984ad8b9d9111937e7cd38__section_fzx_npk_qqb\"/>\n\n## Charts\n\n\n\n### Chart Type\n\nYou can select chart data points and segments in a chart. These selections influence the other chart filters depending on the configuration of the value list annotation.\n\n\n<table>\n<tr>\n<th valign=\"top\">\n\nThe Chart Type…\n\n</th>\n<th valign=\"top\">\n\nDisplays…\n\n</th>\n</tr>\n<tr>\n<td valign=\"top\">\n\nBar\n\n</td>\n<td valign=\"top\">\n\nTop or bottom three records\n\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n\nLine\n\n</td>\n<td valign=\"top\">\n\nFirst or last six data points\n\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n\nDonut\n\n\\(Only supported in SAP Fiori elements for OData V2\\)\n\n</td>\n<td valign=\"top\">\n\nTop or bottom two records\n\n</td>\n</tr>\n</table>\n\nIn SAP Fiori elements for OData V2, you can enable the visual filter \\(donut chart type\\) to display an overlay message if there are measures with negative values. To do so, set the `Analytics.AccumulativeMeasure` annotation to `false`, as shown in the following sample code. By default, the value of the `Analytics.AccumulativeMeasure` annotation is `true`.\n\n```\n<Annotations Target=\"SEPMRA_ALP_SO_ANA_SRV.Z_SEPMRA_C_ALP_QUARTERVHType/DifferenceAmount\">\n    <Annotation Term=\"Analytics.Measure\" Bool=\"true\" />\n    <Annotation Term=\"Analytics.AccumulativeMeasure\" Bool=\"false\" />\n</Annotations>\n\n```\n\n\n\n### Chart Title\n\nAnalytical list page displays chart titles in the following order:\n\n<Measure Name\\> by <Dimension Name\\> in <Scale factor\\> <UoM\\>\n\n-   <Measure Name\\>: The measure associated with the chart. Use `sap:label()` \n-   <Dimension Name\\>: The dimension associated with the chart. Use `sap:label()`\n-   <Scale Factor\\>: The scale specified using the `ScaleFactor` property of the `DataPoint` annotation associated with the measure displayed in the chart.\n\n    > ### Sample Code:  \n    > Scale factor annotation\n    > \n    > ```\n    > <Annotation Term=\"UI.DataPoint\" Qualifier=\"LineChartTimeDataPoint\">\n    >     <Record Type=\"UI.DataPointType\">\n    >         <PropertyValue Property=\"Criticality\" EnumMember=\"UI.CriticalityType/Positive\"/>\n    >         <PropertyValue Property=\"Title\" String=\"Total Pricing\"/>\n    >         <PropertyValue Property=\"Value\" Path=\"totalPricing\"/>\n    >         <PropertyValue Property=\"ValueFormat\">\n    >             <Record Type=\"UI.NumberFormat\">\n    >                 <PropertyValue Property=\"ScaleFactor\" Decimal=\"1000\"/> // A value of 1000 results in \"K\" in the title bar since chart value is scaled with thousand!\n    >             </Record>\n    >         </PropertyValue>\n    >     </Record>\n    > </Annotation>\n    > ```\n\n    If not specified, SAP Fiori elements uses a built-in logic to determine the optimal scale factor for the values displayed in the chart.\n\n\n> ### Note:  \n> SAP Fiori elements recommends that you do **not** specify a hard-coded scale factor that doesn't work well with changing measure values. Use it only if you can ensure that the range of possible values for the measure is fixed and there'sis a preferred scale factor to be used.\n> \n> The scale factor in the chart and chart title are of the same scale.\n\n\n\n<a name=\"loio1714720cae984ad8b9d9111937e7cd38__section_aps_ntv_yfb\"/>\n\n## Text Arrangement\n\nYou can modify the formatting of the text that appears on the visual filter chart axis labels, chart tooltips, and within the selected link \\(if a chart context is selected\\). The default view of the visual filter bar is based on the filter fields defined in the `TextArrangement` annotation and its type in the main entity set.\n\n****\n\n\n<table>\n<tr>\n<th valign=\"top\">\n\nText Arrangement Type\n\n</th>\n<th valign=\"top\">\n\nDescription\n\n</th>\n</tr>\n<tr>\n<td valign=\"top\">\n\nTextFirst\n\n</td>\n<td valign=\"top\">\n\nUse the visual filter to combine measures or item counts with filter values. The ChartDefault type that has the sap:text first, followed by the ID in brackets, for example, \"Notebook \\(001\\)\"\n\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n\nTextLast\n\n</td>\n<td valign=\"top\">\n\nID followed by the sap:text in brackets, for example, \"001 \\(Notebook\\)\".\n\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n\nTextOnly\n\n</td>\n<td valign=\"top\">\n\nShows only the sap:text, for example, \"Notebook\"\n\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n\nTextSeparate\n\n</td>\n<td valign=\"top\">\n\nShows only the ID, for example, \"002\"\n\n</td>\n</tr>\n</table>\n\n> ### Sample Code:  \n> XML Annotation\n> \n> ```xml\n> <Annotations Target=\"ProductType\"> //Main EntitySet\n>   <Annotation Term=\"com.sap.vocabularies.UI.v1.TextArrangement\" EnumMember=\"com.sap.vocabularies.UI.v1.TextArrangementType/TextFirst\"/> \n> </Annotations>\n> ```\n\n> ### Sample Code:  \n> ABAP CDS Annotation\n> \n> ```\n> \n> @UI.textArrangement: #TEXT_FIRST\n> annotate view ProductType with {\n> \n> }\n> ```\n\n> ### Sample Code:  \n> CAP CDS Annotation\n> \n> ```\n> \n> annotate ProductType @(\n>   UI.TextArrangement : #TextFirst\n> );\n> ```\n\n\n\n<a name=\"loio1714720cae984ad8b9d9111937e7cd38__section_ms2_qdl_j2b\"/>\n\n## Lazy Loading of Visual Filters\n\nIn SAP Fiori elements for OData V2, you can enable lazy loading of visual filters by configuring the `lazyLoadVisualFilter` setting in the descriptor file. It is disabled by default.\n\nIf lazy loading is enabled, then the batch call for loading of visual filters is deferred until the user switches to the visual filter bar.\n\n> ### Sample Code:  \n> Descriptor setting\n> \n> ```\n> \"settings\": {\n>               \"qualifier\": \"MainContent\",\n>               \"defaultContentView\": \"charttable\",\n>               \"smartVariantManagement\": true,\n>               \"showGoButtonOnFilterBar\": true,\n>               \"multiSelect\": true,\n>               \"lazyLoadVisualFilter\":true,\n>               \"tableType\": \"AnalyticalTable\",\n>               ....\n> }\n> \n> ```\n\n> ### Note:  \n> In SAP Fiori elements for OData V4, lazy loading is enabled by default and can't be switched off.\n\n\n\n<a name=\"loio1714720cae984ad8b9d9111937e7cd38__section_mlt_fxn_j2b\"/>\n\n## Fixed Values on Visual Filters\n\nTo display default records on the visual filter chart, configure the `SelectionVariant` annotation with filter values \\(`SelectOptions` property\\) and link it with the `ValueList` annotation.\n\nThe `IN/OUT` parameter values take precedence over the `SelectionVariant` values for the fields that have values coming from both options.\n\n> ### Note:  \n> **Handling date-based filter fields**\n> \n> If the `SelectionVariant` has date-based filter fields, you must specify the value in the format `\"Z'. Ex:\"2018-10-15T00:00:00Z\"`, with the time part as zeroes and appended with 'Z'.\n\n**In/Out Parameter Taking Precedence**\n\n\n<table>\n<tr>\n<th valign=\"top\">\n\nScenario\n\n</th>\n<th valign=\"top\">\n\nDescription\n\n</th>\n</tr>\n<tr>\n<td valign=\"top\">\n\n**Scenario 1**: Annotation configuration\n\nChart dimension = \"Status\", Select Option in SV = \\[\\(\"Status\", Values = \"In Progress\", \"New\"\\), \\(\"Project\", Values=\"List Report\"\\)\\]\n\n</td>\n<td valign=\"top\">\n\n-   \"Project\" is not a chart dimension, it is an in/out parameter for the status.\n\n-   The chart displays records relating to `In Progress` and `New` status values for the project `List Report`.\n\n\n\n\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n\n**Scenario 2**: Overriding annotation configuration from filter bar\n\nChange the project value from `List Report` to `Analytical List Page` on the filter bar.\n\n</td>\n<td valign=\"top\">\n\nSpecifying `Analytical List Page` as a value for the project in the filter bar, re-renders charts to display records for *In Progress* and *New* status values of the Analytical List Page project.\n\n> ### Note:  \n> The in/out parameter mapping values set for the other properties in the `SelectionVariant` annotation that are not part of the project field is considered as it is.\n\n\n\n</td>\n</tr>\n</table>\n\nIn SAP Fiori elements for OData V2, you can render the visual filter with a parametrized entity set as the collection path. To do so, you need to provide parameters in the `SelectionVariant` annotation. Any values added in the smart filter bar take priority over the `SelectionVariant` annotation values.\n\n****\n\n\n<table>\n<tr>\n<th valign=\"top\">\n\nScenario\n\n</th>\n<th valign=\"top\">\n\nDescription\n\n</th>\n</tr>\n<tr>\n<td valign=\"top\">\n\nScenario 1: Annotation configuration\n\nParameter in SelectionVariant = \\[\\(\"P\\_DisplayCurrency\", Value=\"USD\"\\)\\]\n\n</td>\n<td valign=\"top\">\n\nThe chart renders records with the currency unit USD.\n\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n\nScenario 2: Overriding annotation configurations on the filter bar\n\nChange USD to EUR on the filter bar\n\n</td>\n<td valign=\"top\">\n\nIf you specify EUR as a value for `P_DisplayCurrency` in the filter bar, the chart re-renders with records that have the currency unit EUR.\n\n</td>\n</tr>\n</table>\n\n\n\n<a name=\"loio1714720cae984ad8b9d9111937e7cd38__section_e11_qrb_lqb\"/>\n\n## Date Selection\n\nVisual filters support date-based, single-select, multi-select based filter fields in the Universal Time Coordinated \\(UTC\\) format. Semantic dates and date ranges are not supported.\n\n\n\n## **Unit of Measure with Multiple Units of Measure**\n\nVisual filter charts do not show up if the back end returns data with multiple units of measure \\(UoM\\). To achieve a single UoM, set the required UoM in the filter bar or change all the UoMs into one UoM in the back end.\n\nFor currency-based visual filter values, the currency value could come from another filter field in the main entity set \\(mapped to the value help currency field based entity set through the standard `IN` mapping\\).\n\n\n\n<a name=\"loio1714720cae984ad8b9d9111937e7cd38__section_gxg_tq2_mqb\"/>\n\n## Semantic Coloring for Visual Filters Based on Dimension Values\n\nSemantic coloring is based on the criticality defined in the `ValueCriticality` annotations for dimensions. The value returned from the path determines the color.\n\n> ### Note:  \n> -   No color is applied to the chart dimension when a neutral value is returned.\n> \n> -   Chart measure semantic coloring takes precendence over dimension semantic coloring.\n\nFor a sample annotation applicable to both SAP Fiori elements for OData V2 and SAP Fiori elements for OData V4, please see the [Support for Criticality Coloring](configuring-charts-653ed0f.md#loio653ed0f4f0d743dbb33ace4f68886c4e__criticality_coloring_subsection) section in [Configuring Charts](configuring-charts-653ed0f.md).\n\n\n\n<a name=\"loio1714720cae984ad8b9d9111937e7cd38__section_nxf_3yy_ghb\"/>\n\n## Guidelines\n\nShow the filter dimension with one measure in the visual filter not with multiple measures.\n\nFilter dimensions in the regular filters \\(filter bar\\) have exactly one representation in the visual filter bar.\n\nDo not show the same filter dimension with two or more different measures at the same time in the visual filter bar. The following example shows the `Dimension Year` filter with two different measures *Revenue* and *Quantity*. Showing the filter *dimensionYear* twice is not in sync with the regular filter, where it is shown only once. Furthermore, matching between the two filter types won't work.\n\nIf the use case requires visualizing a dimension with different measures, consider using an overview page instead.\n\n****\n\n\n<table>\n<tr>\n<th valign=\"top\">\n\nDo\n\n</th>\n<th valign=\"top\">\n\nDon't\n\n</th>\n</tr>\n<tr>\n<td valign=\"top\">\n\n![](images/ALP_VFB_LineChartDO_ace802e.jpg)\n\n</td>\n<td valign=\"top\">\n\n![](images/ALP_VFB_LineChartDONT_f95c7de.jpg)\n\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n\n**For each dimension, display exactly one representation in the visual filter bar.**\n\n</td>\n<td valign=\"top\">\n\n**Do not use the same filter dimension with different measures.**\n\n</td>\n</tr>\n</table>\n\n\n\n<a name=\"loio1714720cae984ad8b9d9111937e7cd38__section_oqj_tq1_bqb\"/>\n\n## Additional Features in SAP Fiori Elements for OData V2\n\nWe also support the visual filter setup for donut charts, and you can define visual filters for parameters.\n\n\n\n### Display of Empty Values\n\nIn visual filter charts, the empty dimension value is displayed as *Not Assigned*. Note that this behavior is specific to the display of visual filters. For the value help, drop down, or compact filter, it is displayed as *<empty\\>*.\n\n![](images/Not_Assigned_Screenshot_841d97d.png)\n\n\n\n### Date Selection\n\nVisual filters support date-based, single selection fields in the Universal Time Coordinated \\(UTC\\) format. Visual filters also support string-based fields that denote a time period via the following annotations:\n\n-   `Edm.DateTime` and `sap:display-format=\"Date\"`\n\n-   `Edm.String` and `sap:semantics=\"yearmonthday\"`\n\n-   `Edm.String` and `sap:semantics=\"yearmonth\"`\n\n-   `Edm.String` and `sap:semantics=\"year\"`\n\n-   `Edm.String` and `sap:semantics=\"yearquarter\"`\n\n-   `Edm.String` and `sap:semantics=\"yearweek\"`\n\n-   `Edm.String` and `sap:semantics=\"fiscalyear\"`\n\n-   `Edm.String` and `sap:semantics=\"fiscalyearperiod\"`\n\n\n> ### Note:  \n> Displaying the value in the visual filter and its tooltip is impacted. Value help or the dropdown for selecting the values remains the same if `sap:semantics=\"yearmonth\"` is set.\n\n> ### Note:  \n> You can see the date selection button on the visual filter for fields annotated with `sap:filter-restriction=\"single-value\"`. For fields annotated with `sap:filter-restriction=\"multiple\"`, you see the value help selection button.\n\n> ### Sample Code:  \n> Sample Metadata\n> \n> ```\n> <Property Name=\"StartDate\" Type=\"Edm.DateTime\" sap:display-format=\"Date\" \n> sap:aggregation-role=\"dimension\" sap:label=\"Date\" sap:filter-restriction=\"single-value\"/>\n> \n> <Property Name=\"StartDate\" Type=\"Edm.String\" sap:semantics=\"yearmonthday\" \n> sap:aggregation-role=\"dimension\" sap:label=\"Date\" sap:filter-restriction=\"single-value\"/>\n> \n> ```\n\n\n\n### Number Formatting\n\nThe `NumberOfFractionalDigits` property is used to determine the number of fraction digits. `NumberOfFractionalDigits` information can be provided in [com.sap.vocabularies.UI.v1.DataPoint](annotations-used-in-overview-pages-65731e6.md) term, using the `ValueFormat` property. These are the rules:\n\n-   Decimals are not shown by default.\n\n-   You can specify 1 or 2 decimal places using the `NumberOfFractionalDigits` property in annotations. If a value of more than 2 is provided, it is also included.\n\n\nIn the following sample code, the price property number of fractional digits provided in the OData metadata, 3 is overridden by the value 1 as provided in the [com.sap.vocabularies.UI.v1.DataPoint](annotations-used-in-overview-pages-65731e6.md) `ValueFormat` property:\n\n> ### Sample Code:  \n> XML Annotation\n> \n> ```xml\n> <Annotation Term=\"com.sap.vocabularies.UI.v1.DataPoint\" Qualifier=\"Price\">\n>     <Record Type=\"com.sap.vocabularies.UI.v1.DataPointType\">\n>         <PropertyValue Property=\"Value\" Path=\"Price\"/>\n>         <PropertyValue Property=\"ValueFormat\">\n>             <Record Type=\"com.sap.vocabularies.UI.v1.NumberFormat\">\n>                 <PropertyValue Property=\"NumberOfFractionalDigits\" Int=\"1\"/>\n>             </Record>\n>         </PropertyValue>\n>     </Record>\n> </Annotation>\n> \n> ```\n\n> ### Sample Code:  \n> ABAP CDS Annotation\n> \n> ```\n> \n> @UI.dataPoint: { \n>    valueFormat.numberOfFractionalDigits: 1  \n> }\n> price;\n> ```\n\n\n\n### Semantic Coloring for Visual Filters Based on Measure Values\n\nSemantic coloring is based on the defined:\n\n-   Criticality in `DataPoint` annotations. The specified value, or the value returned from a path, determines the color\n\n-   `CriticalityCalculation` in `DataPoint` annotations, along with the improvement direction and various threshold values. This applies only when the criticality is not defined.\n\n\n![](images/Semantic_Coloring_-_Visual_Filters_a477ee8.png)\n\n> ### Note:  \n> No color is applied to the chart measure when:\n> \n> -   A neutral value is returned.\n> \n> -   Not enough threshold values are defined or when the improvement direction is missing.\n\n\n\n### Grouping Visual Filter Calls \\(Optional\\)\n\nYou can add `groupId` for a set of visual filters to consolidate all group calls into one batch call. This allows you to group fast-loading visual filters in one batch and group all the other slow loading visual filters into a separate batch call. This improves rendering of the fast-loading visual filters over the slow-loading visual filters.\n\nDefine the `onBeforeRebindVisualFilterExtension` extension controller method in the controller file. Ensure that the `groupId` is one of the keys in the `oContext` object which is passed to the extension as a parameter. Provide a valid string value as shown here:\n\n> ### Sample Code:  \n> ```\n> onBeforeRebindVisualFilterExtension: function(sEntityType, sDimension, sMeasure, oContext){\n>     'use strict';\n>     var Log = sap.ui.require(\"sap/base/Log\");\n>     if (sDimension === \"Product\") {\n>         oContext.groupId = \"Group1\";\n>     }\n>     if (sDimension === \"DeliveryCalendarMonth\" || sDimension === \"DeliveryCalendarQuarter\") {\n>         oContext.groupId = \"Group2\";\n>     }\n>     Log.info(\"onBeforeRebindVisualFilterExtension called!\");\n> }\n> ```\n\n> ### Note:  \n> -   The visual filter calls without a `groupId` are all combined in one batch.\n> \n> -   Visual filter calls assigned to a `groupId` reach the back end in one batch.\n\n\n\n### Text for Unit of Measure\n\nIf a unit field such as a currency or unit of measure\\(UOM\\) contains a text annotation \\(`sap:text`\\) this property is retrieved and displayed along with the unit field.\n\nThe unit fields can contain the text annotation either in the main entity set or its value list entity sets.\n\n> ### Sample Code:  \n> Main Entity Set: `DisplayCurrency` doesn't contain a text annotation\n> \n> ```\n> <EntityType Name=\"ZEPM_C_SALESORDERITEMQUERYResult\" sap:semantics=\"aggregate\" sap:content-version=\"1\">\n>                 <Key>\n>                     <PropertyRef Name=\"ID\"/>\n>                 </Key> \n>               <Property Name=\"DisplayCurrency\" Type=\"Edm.String\" MaxLength=\"5\" sap:aggregation-role=\"dimension\" sap:creatable=\"false\" sap:label=\"Display Currency\" sap:updatable=\"false\" sap:semantics=\"currency-code\"/>  \n> </EntityType > \n> \n> ```\n\n> ### Sample Code:  \n> Value List Entity Set : `DisplayCurrency` contains a text annotation to another text property\n> \n> ```\n> <EntityType Name=\"ZEPM_C_SALESORDERITEMQUERYValueHelpResult\" sap:semantics=\"aggregate\" sap:content-version=\"1\">\n>                 <Key>\n>                     <PropertyRef Name=\"ID\"/>\n>                 </Key> \n>                 <Property Name=\"DisplayCurrency\" Type=\"Edm.String\" MaxLength=\"5\" sap:aggregation-role=\"dimension\" sap:creatable=\"false\" sap:label=\"Display Currency\" sap:updatable=\"false\" sap:semantics=\"currency-code\" sap:text=\"DisplayCurrencyText\"/>\n>                 <Property Name=\"DisplayCurrencyText\" Type=\"Edm.String\" MaxLength=\"60\" sap:filterable=\"false\"/>\n> </EntityType > \n> \n> ```\n\nThe text is fetched to be displayed along with the unit field and is displayed in brackets.\n\nIf the main entity set doesn't contain the text annotation, and if the unit field has a value list associated, and the text annotation is present in the value list entity set, then this is retrieved and displayed along with the unit field.\n\nIf the main entity set contains the text annotation for a unit, then that is displayed and the value list entity set is not checked for the annotation.\n\n![](images/Visual_Filters_Image_01_3469fc3.png)\n\n\n\n<a name=\"loio1714720cae984ad8b9d9111937e7cd38__section_qsw_sts_cqb\"/>\n\n## Additional Features in SAP Fiori Elements for OData V4\n\nYou must ensure there is a manifest property for each visual filter that is to be rendered. For more information, see the [Additional Features in SAP Fiori Elements for OData V4](configuring-the-visual-filter-bar-33f3d80.md#loio33f3d807c10b47d9a8141692d2619dc2__section_my4_mgz_jqb) section in [Configuring the Visual Filter Bar](configuring-the-visual-filter-bar-33f3d80.md).\n\n\n\n### Line Chart\n\nLine charts are only rendered if the dimension is time-based, that is, if you use `Edm.Date`, `Edm.Time`, or `Edm.DateTimeOffset`.\n\n\n\n### Date Selection\n\nWhile date/time is converted to the local timezone, the values coming from the back end are used for all other formats. SAP Fiori elements for OData V4 `Edm.Date`, which is shown with no conversion to the local timezone.\n\n\n\n### Number Formatting\n\nThe `NumberOfFractionalDigits` property is used to determine the number of fraction digits. `NumberOfFractionalDigits` information can be provided in [com.sap.vocabularies.UI.v1.DataPoint](annotations-used-in-overview-pages-65731e6.md) term, using the `ValueFormat` property. These are the rules:\n\n-   Decimals are not shown by default.\n\n-   You can specify 1 or 2 decimal places using the `NumberOfFractionalDigits` property in annotations. If a value of more than 2 is provided, it remains at 2.\n\n    For a currency-based measure, the number of decimal places as specified in the annotation is only considered if the measure value is also being displayed with a scale factor. Otherwise, the number of decimal places is based on the displayed currency.\n\n\nIn the following sample code, the weight property number of fractional digits provided in the OData metadata, is set to the value 1 as provided in the [com.sap.vocabularies.UI.v1.DataPoint](annotations-used-in-overview-pages-65731e6.md) `ValueFormat` property:\n\n> ### Sample Code:  \n> XML Annotation\n> \n> ```xml\n> <Annotation Term=\"com.sap.vocabularies.UI.v1.DataPoint\" Qualifier=\"Weight\">\n>     <Record Type=\"com.sap.vocabularies.UI.v1.DataPointType\">\n>         <PropertyValue Property=\"Value\" Path=\"Weight\"/>\n>         <PropertyValue Property=\"ValueFormat\">\n>             <Record Type=\"com.sap.vocabularies.UI.v1.NumberFormat\">\n>                 <PropertyValue Property=\"NumberOfFractionalDigits\" Int=\"1\"/>\n>             </Record>\n>         </PropertyValue>\n>     </Record>\n> </Annotation>\n> \n> ```\n\n> ### Sample Code:  \n> ABAP CDS Annotation\n> \n> ```\n> \n> @UI.dataPoint: { \n>    valueFormat.numberOfFractionalDigits: 1  \n> }\n> price;\n> ```\n\n> ### Sample Code:  \n> CAP CDS Annotation\n> \n> ```\n> \n> UI.DataPoint #Price : {\n>     $Type : 'UI.DataPointType',\n>     Value : Price,\n>     ValueFormat : {\n>         $Type : 'UI.NumberFormat',\n>         NumberOfFractionalDigits : 1\n>     }\n> }\n> ```\n\n\n\n### Semantic Coloring for Visual Filters Based on Measure Values\n\nWe support only hard-coded values. Ensure that a data point has been defined for the measure of the chart and that the criticality has been configured for the data point.\n\n![](images/Semantic_Coloring_-_Visual_Filters_a477ee8.png)\n\n> ### Note:  \n> No color is applied to the chart measure when a neutral value is returned.\n> \n> Chart coloring specified on dimensions using semantic coloring is overridden by the semantic coloring specified for the measures.\n\n> ### Sample Code:  \n> XML Annotation\n> \n> ```xml\n> <Annotation Term=\"UI.Chart\" Qualifier=\"BarChartSoldToParty\">\n>      <Record Type=\"UI.ChartDefinitionType\">\n>           <PropertyValue Property=\"Title\" String=\"Bar Chart\"/>\n>           <PropertyValue Property=\"Description\" String=\"Testing Bar Chart\"/>\n>           <PropertyValue Property=\"ChartType\" EnumMember=\"UI.ChartType/Bar\"/>\n>           <PropertyValue Property=\"Measures\">\n>                <Collection>\n>                     <PropertyPath>totalPricing</PropertyPath>\n>                </Collection>\n>           </PropertyValue>\n>           <PropertyValue Property=\"Dimensions\">\n>                <Collection>\n>           <PropertyPath>SoldToParty</PropertyPath>\n>                </Collection>\n>           </PropertyValue>\n>           <PropertyValue Property=\"MeasureAttributes\">\n>                <Collection>\n>                     <Record Type=\"UI.ChartMeasureAttributeType\">\n>                          <PropertyValue Property=\"Measure\" PropertyPath=\" totalPricing\"/>\n>                          <PropertyValue Property=\"Role\" EnumMember=\"UI.ChartMeasureRoleType/Axis1\"/>\n>                          <PropertyValue Property=\"DataPoint\" AnnotationPath=\"@UI.DataPoint#LineChartTimeDataPoint\"/>\n>                     </Record>\n>                </Collection>\n>           </PropertyValue>\n>           <PropertyValue Property=\"DimensionAttributes\">\n>                <Collection/>\n>           </PropertyValue>\n>      </Record>\n> </Annotation>\n> \n> <Annotation Term=\"UI.DataPoint\" Qualifier=\"LineChartTimeDataPoint\">\n>      <Record Type=\"UI.DataPointType\">\n>           <PropertyValue Property=\"Value\" Path=\"totalPricing\"/>\n>           <PropertyValue Property=\"Title\" String=\"Total Pricing\"/>\n>           <PropertyValue Property=\"Criticality\" EnumMember=\"UI.CriticalityType/Positive\"/>\n>      </Record>\n> </Annotation>\n> \n> ```\n\n> ### Sample Code:  \n> ABAP CDS Annotation\n> \n> ```\n> @UI.chart: [\n>   {\n>     chartType: #BAR,\n>     title: 'Bar Chart',\n>     description: 'Testing Bar Chart',\n>     dimensions: [\n>       'SoldToParty'\n>     ],\n>     measures: [\n>       'totalPricing'\n>     ],\n>     measureAttributes: [{measure: 'totalPricing', role: #AXIS_1, asDataPoint: true }],\n>   }\n> ]\n> \n> @UI.dataPoint: { \n>      title: 'Total Pricing',\n>      criticalityValue: #POSITIVE   \n>  }\n> totalPricing;\n> \n> ```\n\n> ### Sample Code:  \n> CAP CDS Annotation\n> \n> ```\n> Chart #BarChartSoldToParty               : {\n>             $Type             : 'UI.ChartDefinitionType',\n>             Title             : 'Bar Chart',\n>             Description       : 'Testing Bar Chart',\n>             ChartType         : #Bar,\n>             Measures          : [totalPricing],\n>             Dimensions        : [SoldToParty],\n>             MeasureAttributes : [{\n>                 $Type     : 'UI.ChartMeasureAttributeType',\n>                 Measure   : totalPricing,\n>                 Role      : #Axis1,\n>                 DataPoint : '@UI.DataPoint#LineChartTimeDataPoint'\n>             }],\n> DimensionAttributes: []\n>         },\n>         DataPoint #LineChartTimeDataPoint              : {\n>             Value       : totalPricing,\n>             Title       : 'Total Pricing',\n>             Criticality : #Positive,\n>             ValueFormat : {\n>                 ScaleFactor: 1000\n>             }\n> \n> ```\n\n**Related Information**  \n\n\n[Configuring the Visual Filter Bar](configuring-the-visual-filter-bar-33f3d80.md \"The visual filter bar enables end users to select filter values based on measure values in addition to the filters and filter values already selected in the regular filter bar.\")\n\n",
  "excerpt": "<!-- loio1714720cae984ad8b9d9111937e7cd38 --> Visual Filters An intuitive way of choosing filter values from an associated measure value. You can configure visual filters by enhancing the ValueList an...",
  "wordCount": 4851,
  "version": "1.0.0",
  "source": "sapui5",
  "sourceType": "github"
}